function cE(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function gv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Eh={exports:{}},Ua={},Th={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function dE(){if(Eg)return ze;Eg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),x=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=x&&V[x]||V["@@iterator"],typeof V=="function"?V:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,q={};function U(V,Q,me){this.props=V,this.context=Q,this.refs=q,this.updater=me||O}U.prototype.isReactComponent={},U.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},U.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function H(){}H.prototype=U.prototype;function X(V,Q,me){this.props=V,this.context=Q,this.refs=q,this.updater=me||O}var ne=X.prototype=new H;ne.constructor=X,B(ne,U.prototype),ne.isPureReactComponent=!0;var he=Array.isArray,Pe=Object.prototype.hasOwnProperty,re={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(V,Q,me){var _e,Le={},Fe=null,Me=null;if(Q!=null)for(_e in Q.ref!==void 0&&(Me=Q.ref),Q.key!==void 0&&(Fe=""+Q.key),Q)Pe.call(Q,_e)&&!k.hasOwnProperty(_e)&&(Le[_e]=Q[_e]);var Be=arguments.length-2;if(Be===1)Le.children=me;else if(1<Be){for(var Ce=Array(Be),et=0;et<Be;et++)Ce[et]=arguments[et+2];Le.children=Ce}if(V&&V.defaultProps)for(_e in Be=V.defaultProps,Be)Le[_e]===void 0&&(Le[_e]=Be[_e]);return{$$typeof:r,type:V,key:Fe,ref:Me,props:Le,_owner:re.current}}function A(V,Q){return{$$typeof:r,type:V.type,key:Q,ref:V.ref,props:V.props,_owner:V._owner}}function P(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function D(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(me){return Q[me]})}var L=/\/+/g;function R(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?D(""+V.key):Q.toString(36)}function st(V,Q,me,_e,Le){var Fe=typeof V;(Fe==="undefined"||Fe==="boolean")&&(V=null);var Me=!1;if(V===null)Me=!0;else switch(Fe){case"string":case"number":Me=!0;break;case"object":switch(V.$$typeof){case r:case e:Me=!0}}if(Me)return Me=V,Le=Le(Me),V=_e===""?"."+R(Me,0):_e,he(Le)?(me="",V!=null&&(me=V.replace(L,"$&/")+"/"),st(Le,Q,me,"",function(et){return et})):Le!=null&&(P(Le)&&(Le=A(Le,me+(!Le.key||Me&&Me.key===Le.key?"":(""+Le.key).replace(L,"$&/")+"/")+V)),Q.push(Le)),1;if(Me=0,_e=_e===""?".":_e+":",he(V))for(var Be=0;Be<V.length;Be++){Fe=V[Be];var Ce=_e+R(Fe,Be);Me+=st(Fe,Q,me,Ce,Le)}else if(Ce=S(V),typeof Ce=="function")for(V=Ce.call(V),Be=0;!(Fe=V.next()).done;)Fe=Fe.value,Ce=_e+R(Fe,Be++),Me+=st(Fe,Q,me,Ce,Le);else if(Fe==="object")throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Me}function lt(V,Q,me){if(V==null)return V;var _e=[],Le=0;return st(V,_e,"","",function(Fe){return Q.call(me,Fe,Le++)}),_e}function xt(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(me){(V._status===0||V._status===-1)&&(V._status=1,V._result=me)},function(me){(V._status===0||V._status===-1)&&(V._status=2,V._result=me)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var Ye={current:null},ae={transition:null},ve={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:ae,ReactCurrentOwner:re};function ce(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:lt,forEach:function(V,Q,me){lt(V,function(){Q.apply(this,arguments)},me)},count:function(V){var Q=0;return lt(V,function(){Q++}),Q},toArray:function(V){return lt(V,function(Q){return Q})||[]},only:function(V){if(!P(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},ze.Component=U,ze.Fragment=t,ze.Profiler=o,ze.PureComponent=X,ze.StrictMode=i,ze.Suspense=y,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,ze.act=ce,ze.cloneElement=function(V,Q,me){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var _e=B({},V.props),Le=V.key,Fe=V.ref,Me=V._owner;if(Q!=null){if(Q.ref!==void 0&&(Fe=Q.ref,Me=re.current),Q.key!==void 0&&(Le=""+Q.key),V.type&&V.type.defaultProps)var Be=V.type.defaultProps;for(Ce in Q)Pe.call(Q,Ce)&&!k.hasOwnProperty(Ce)&&(_e[Ce]=Q[Ce]===void 0&&Be!==void 0?Be[Ce]:Q[Ce])}var Ce=arguments.length-2;if(Ce===1)_e.children=me;else if(1<Ce){Be=Array(Ce);for(var et=0;et<Ce;et++)Be[et]=arguments[et+2];_e.children=Be}return{$$typeof:r,type:V.type,key:Le,ref:Fe,props:_e,_owner:Me}},ze.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},ze.createElement=I,ze.createFactory=function(V){var Q=I.bind(null,V);return Q.type=V,Q},ze.createRef=function(){return{current:null}},ze.forwardRef=function(V){return{$$typeof:p,render:V}},ze.isValidElement=P,ze.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:xt}},ze.memo=function(V,Q){return{$$typeof:v,type:V,compare:Q===void 0?null:Q}},ze.startTransition=function(V){var Q=ae.transition;ae.transition={};try{V()}finally{ae.transition=Q}},ze.unstable_act=ce,ze.useCallback=function(V,Q){return Ye.current.useCallback(V,Q)},ze.useContext=function(V){return Ye.current.useContext(V)},ze.useDebugValue=function(){},ze.useDeferredValue=function(V){return Ye.current.useDeferredValue(V)},ze.useEffect=function(V,Q){return Ye.current.useEffect(V,Q)},ze.useId=function(){return Ye.current.useId()},ze.useImperativeHandle=function(V,Q,me){return Ye.current.useImperativeHandle(V,Q,me)},ze.useInsertionEffect=function(V,Q){return Ye.current.useInsertionEffect(V,Q)},ze.useLayoutEffect=function(V,Q){return Ye.current.useLayoutEffect(V,Q)},ze.useMemo=function(V,Q){return Ye.current.useMemo(V,Q)},ze.useReducer=function(V,Q,me){return Ye.current.useReducer(V,Q,me)},ze.useRef=function(V){return Ye.current.useRef(V)},ze.useState=function(V){return Ye.current.useState(V)},ze.useSyncExternalStore=function(V,Q,me){return Ye.current.useSyncExternalStore(V,Q,me)},ze.useTransition=function(){return Ye.current.useTransition()},ze.version="18.3.1",ze}var Tg;function yf(){return Tg||(Tg=1,Th.exports=dE()),Th.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function hE(){if(xg)return Ua;xg=1;var r=yf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(p,y,v){var E,x={},S=null,O=null;v!==void 0&&(S=""+v),y.key!==void 0&&(S=""+y.key),y.ref!==void 0&&(O=y.ref);for(E in y)i.call(y,E)&&!l.hasOwnProperty(E)&&(x[E]=y[E]);if(p&&p.defaultProps)for(E in y=p.defaultProps,y)x[E]===void 0&&(x[E]=y[E]);return{$$typeof:e,type:p,key:S,ref:O,props:x,_owner:o.current}}return Ua.Fragment=t,Ua.jsx=d,Ua.jsxs=d,Ua}var Ig;function fE(){return Ig||(Ig=1,Eh.exports=hE()),Eh.exports}var h=fE(),K=yf();const yv=gv(K),pE=cE({__proto__:null,default:yv},[K]);var Uu={},xh={exports:{}},mn={},Ih={exports:{}},Sh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function mE(){return Sg||(Sg=1,(function(r){function e(ae,ve){var ce=ae.length;ae.push(ve);e:for(;0<ce;){var V=ce-1>>>1,Q=ae[V];if(0<o(Q,ve))ae[V]=ve,ae[ce]=Q,ce=V;else break e}}function t(ae){return ae.length===0?null:ae[0]}function i(ae){if(ae.length===0)return null;var ve=ae[0],ce=ae.pop();if(ce!==ve){ae[0]=ce;e:for(var V=0,Q=ae.length,me=Q>>>1;V<me;){var _e=2*(V+1)-1,Le=ae[_e],Fe=_e+1,Me=ae[Fe];if(0>o(Le,ce))Fe<Q&&0>o(Me,Le)?(ae[V]=Me,ae[Fe]=ce,V=Fe):(ae[V]=Le,ae[_e]=ce,V=_e);else if(Fe<Q&&0>o(Me,ce))ae[V]=Me,ae[Fe]=ce,V=Fe;else break e}}return ve}function o(ae,ve){var ce=ae.sortIndex-ve.sortIndex;return ce!==0?ce:ae.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var y=[],v=[],E=1,x=null,S=3,O=!1,B=!1,q=!1,U=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(ae){for(var ve=t(v);ve!==null;){if(ve.callback===null)i(v);else if(ve.startTime<=ae)i(v),ve.sortIndex=ve.expirationTime,e(y,ve);else break;ve=t(v)}}function he(ae){if(q=!1,ne(ae),!B)if(t(y)!==null)B=!0,xt(Pe);else{var ve=t(v);ve!==null&&Ye(he,ve.startTime-ae)}}function Pe(ae,ve){B=!1,q&&(q=!1,H(I),I=-1),O=!0;var ce=S;try{for(ne(ve),x=t(y);x!==null&&(!(x.expirationTime>ve)||ae&&!D());){var V=x.callback;if(typeof V=="function"){x.callback=null,S=x.priorityLevel;var Q=V(x.expirationTime<=ve);ve=r.unstable_now(),typeof Q=="function"?x.callback=Q:x===t(y)&&i(y),ne(ve)}else i(y);x=t(y)}if(x!==null)var me=!0;else{var _e=t(v);_e!==null&&Ye(he,_e.startTime-ve),me=!1}return me}finally{x=null,S=ce,O=!1}}var re=!1,k=null,I=-1,A=5,P=-1;function D(){return!(r.unstable_now()-P<A)}function L(){if(k!==null){var ae=r.unstable_now();P=ae;var ve=!0;try{ve=k(!0,ae)}finally{ve?R():(re=!1,k=null)}}else re=!1}var R;if(typeof X=="function")R=function(){X(L)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,lt=st.port2;st.port1.onmessage=L,R=function(){lt.postMessage(null)}}else R=function(){U(L,0)};function xt(ae){k=ae,re||(re=!0,R())}function Ye(ae,ve){I=U(function(){ae(r.unstable_now())},ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ae){ae.callback=null},r.unstable_continueExecution=function(){B||O||(B=!0,xt(Pe))},r.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ae?Math.floor(1e3/ae):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(ae){switch(S){case 1:case 2:case 3:var ve=3;break;default:ve=S}var ce=S;S=ve;try{return ae()}finally{S=ce}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ae,ve){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ce=S;S=ae;try{return ve()}finally{S=ce}},r.unstable_scheduleCallback=function(ae,ve,ce){var V=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?V+ce:V):ce=V,ae){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ce+Q,ae={id:E++,callback:ve,priorityLevel:ae,startTime:ce,expirationTime:Q,sortIndex:-1},ce>V?(ae.sortIndex=ce,e(v,ae),t(y)===null&&ae===t(v)&&(q?(H(I),I=-1):q=!0,Ye(he,ce-V))):(ae.sortIndex=Q,e(y,ae),B||O||(B=!0,xt(Pe))),ae},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(ae){var ve=S;return function(){var ce=S;S=ve;try{return ae.apply(this,arguments)}finally{S=ce}}}})(Sh)),Sh}var Cg;function gE(){return Cg||(Cg=1,Ih.exports=mE()),Ih.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function yE(){if(Pg)return mn;Pg=1;var r=yf(),e=gE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},x={};function S(n){return y.call(x,n)?!0:y.call(E,n)?!1:v.test(n)?x[n]=!0:(E[n]=!0,!1)}function O(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function B(n,s,a,c){if(s===null||typeof s>"u"||O(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function q(n,s,a,c,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];U[s]=new q(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new q(n,5,!1,n.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function X(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(H,X);U[s]=new q(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(H,X);U[s]=new q(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(H,X);U[s]=new q(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new q(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new q(n,1,!1,n.toLowerCase(),null,!0,!0)});function ne(n,s,a,c){var f=U.hasOwnProperty(s)?U[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(B(s,a,f,c)&&(a=null),c||f===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var he=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pe=Symbol.for("react.element"),re=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),D=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),Ye=Symbol.for("react.offscreen"),ae=Symbol.iterator;function ve(n){return n===null||typeof n!="object"?null:(n=ae&&n[ae]||n["@@iterator"],typeof n=="function"?n:null)}var ce=Object.assign,V;function Q(n){if(V===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+n}var me=!1;function _e(n,s){if(!n||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){c=$}n.call(s.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=c.stack.split(`
`),w=f.length-1,C=g.length-1;1<=w&&0<=C&&f[w]!==g[C];)C--;for(;1<=w&&0<=C;w--,C--)if(f[w]!==g[C]){if(w!==1||C!==1)do if(w--,C--,0>C||f[w]!==g[C]){var N=`
`+f[w].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=w&&0<=C);break}}}finally{me=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function Le(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=_e(n.type,!1),n;case 11:return n=_e(n.type.render,!1),n;case 1:return n=_e(n.type,!0),n;default:return""}}function Fe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case re:return"Portal";case A:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case st:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case L:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case lt:return s=n.displayName||null,s!==null?s:Fe(n.type)||"Memo";case xt:s=n._payload,n=n._init;try{return Fe(n(s))}catch{}}return null}function Me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ce(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function et(n){var s=Ce(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function vn(n){n._valueTracker||(n._valueTracker=et(n))}function $n(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Ce(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function _n(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function wn(n,s){var a=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function b(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Be(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ue(n,s){s=s.checked,s!=null&&ne(n,"checked",s,!1)}function se(n,s){ue(n,s);var a=Be(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ie(n,s.type,a):s.hasOwnProperty("defaultValue")&&Ie(n,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function G(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ie(n,s,a){(s!=="number"||_n(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Y=Array.isArray;function de(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Be(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function fe(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Se(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Y(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Be(a)}}function qe(n,s){var a=Be(s.value),c=Be(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function rt(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function De(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xe(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?De(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Wn,Zi=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Wn=Wn||document.createElement("div"),Wn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Wn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function ur(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nr=["Webkit","ms","Moz","O"];Object.keys(cr).forEach(function(n){Nr.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),cr[s]=cr[n]})});function es(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||cr.hasOwnProperty(n)&&cr[n]?(""+s).trim():s+"px"}function ts(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=es(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var ns=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rs(n,s){if(s){if(ns[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function is(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var br=null;function ri(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ii=null,an=null,tt=null;function En(n){if(n=Sa(n)){if(typeof ii!="function")throw Error(t(280));var s=n.stateNode;s&&(s=tu(s),ii(n.stateNode,n.type,s))}}function dr(n){an?tt?tt.push(n):tt=[n]:an=n}function na(){if(an){var n=an,s=tt;if(tt=an=null,En(n),s)for(n=0;n<s.length;n++)En(s[n])}}function ss(n,s){return n(s)}function ra(){}var jr=!1;function ia(n,s,a){if(jr)return n(s,a);jr=!0;try{return ss(n,s,a)}finally{jr=!1,(an!==null||tt!==null)&&(ra(),na())}}function _t(n,s){var a=n.stateNode;if(a===null)return null;var c=tu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Hs=!1;if(p)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){Hs=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{Hs=!1}function os(n,s,a,c,f,g,w,C,N){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(te){this.onError(te)}}var as=!1,qs=null,qn=!1,sa=null,Qc={onError:function(n){as=!0,qs=n}};function Gs(n,s,a,c,f,g,w,C,N){as=!1,qs=null,os.apply(Qc,arguments)}function Cl(n,s,a,c,f,g,w,C,N){if(Gs.apply(this,arguments),as){if(as){var $=qs;as=!1,qs=null}else throw Error(t(198));qn||(qn=!0,sa=$)}}function Gn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ls(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Kn(n){if(Gn(n)!==n)throw Error(t(188))}function Pl(n){var s=n.alternate;if(!s){if(s=Gn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Kn(f),n;if(g===c)return Kn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var w=!1,C=f.child;C;){if(C===a){w=!0,a=f,c=g;break}if(C===c){w=!0,c=f,a=g;break}C=C.sibling}if(!w){for(C=g.child;C;){if(C===a){w=!0,a=g,c=f;break}if(C===c){w=!0,c=g,a=f;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function oa(n){return n=Pl(n),n!==null?Ks(n):null}function Ks(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ks(n);if(s!==null)return s;n=n.sibling}return null}var Qs=e.unstable_scheduleCallback,aa=e.unstable_cancelCallback,Rl=e.unstable_shouldYield,Yc=e.unstable_requestPaint,ot=e.unstable_now,Al=e.unstable_getCurrentPriorityLevel,us=e.unstable_ImmediatePriority,si=e.unstable_UserBlockingPriority,Nn=e.unstable_NormalPriority,la=e.unstable_LowPriority,kl=e.unstable_IdlePriority,cs=null,Tn=null;function Nl(n){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(cs,n,void 0,(n.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:jl,ua=Math.log,bl=Math.LN2;function jl(n){return n>>>=0,n===0?32:31-(ua(n)/bl|0)|0}var Ys=64,Js=4194304;function oi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ds(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~f;C!==0?c=oi(C):(g&=w,g!==0&&(c=oi(g)))}else w=a&~f,w!==0?c=oi(w):g!==0&&(c=oi(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-nn(s),f=1<<a,c|=n[a],s&=~f;return c}function Jc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-nn(g),C=1<<w,N=f[w];N===-1?((C&a)===0||(C&c)!==0)&&(f[w]=Jc(C,s)):N<=s&&(n.expiredLanes|=C),g&=~C}}function xn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function hs(){var n=Ys;return Ys<<=1,(Ys&4194240)===0&&(Ys=64),n}function ai(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function li(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-nn(s),n[s]=a}function it(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-nn(a),g=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function ui(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-nn(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var He=0;function ci(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Dl,Xs,Vl,Ol,Ll,ca=!1,hr=[],Ut=null,Qn=null,Yn=null,di=new Map,bn=new Map,fr=[],Xc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ml(n,s){switch(n){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":di.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":bn.delete(s.pointerId)}}function ln(n,s,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Sa(s),s!==null&&Xs(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Zc(n,s,a,c,f){switch(s){case"focusin":return Ut=ln(Ut,n,s,a,c,f),!0;case"dragenter":return Qn=ln(Qn,n,s,a,c,f),!0;case"mouseover":return Yn=ln(Yn,n,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return di.set(g,ln(di.get(g)||null,n,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,bn.set(g,ln(bn.get(g)||null,n,s,a,c,f)),!0}return!1}function Fl(n){var s=ys(n.target);if(s!==null){var a=Gn(s);if(a!==null){if(s=a.tag,s===13){if(s=ls(a),s!==null){n.blockedOn=s,Ll(n.priority,function(){Vl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Vr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Zs(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);br=c,a.target.dispatchEvent(c),br=null}else return s=Sa(a),s!==null&&Xs(s),n.blockedOn=a,!1;s.shift()}return!0}function fs(n,s,a){Vr(n)&&a.delete(s)}function Ul(){ca=!1,Ut!==null&&Vr(Ut)&&(Ut=null),Qn!==null&&Vr(Qn)&&(Qn=null),Yn!==null&&Vr(Yn)&&(Yn=null),di.forEach(fs),bn.forEach(fs)}function Jn(n,s){n.blockedOn===s&&(n.blockedOn=null,ca||(ca=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ul)))}function Xn(n){function s(f){return Jn(f,n)}if(0<hr.length){Jn(hr[0],n);for(var a=1;a<hr.length;a++){var c=hr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Ut!==null&&Jn(Ut,n),Qn!==null&&Jn(Qn,n),Yn!==null&&Jn(Yn,n),di.forEach(s),bn.forEach(s),a=0;a<fr.length;a++)c=fr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<fr.length&&(a=fr[0],a.blockedOn===null);)Fl(a),a.blockedOn===null&&fr.shift()}var Or=he.ReactCurrentBatchConfig,hi=!0;function ft(n,s,a,c){var f=He,g=Or.transition;Or.transition=null;try{He=1,da(n,s,a,c)}finally{He=f,Or.transition=g}}function ed(n,s,a,c){var f=He,g=Or.transition;Or.transition=null;try{He=4,da(n,s,a,c)}finally{He=f,Or.transition=g}}function da(n,s,a,c){if(hi){var f=Zs(n,s,a,c);if(f===null)dd(n,s,c,ps,a),Ml(n,c);else if(Zc(f,n,s,a,c))c.stopPropagation();else if(Ml(n,c),s&4&&-1<Xc.indexOf(n)){for(;f!==null;){var g=Sa(f);if(g!==null&&Dl(g),g=Zs(n,s,a,c),g===null&&dd(n,s,c,ps,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else dd(n,s,c,null,a)}}var ps=null;function Zs(n,s,a,c){if(ps=null,n=ri(c),n=ys(n),n!==null)if(s=Gn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ls(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ps=n,null}function ha(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Al()){case us:return 1;case si:return 4;case Nn:case la:return 16;case kl:return 536870912;default:return 16}default:return 16}}var In=null,eo=null,un=null;function fa(){if(un)return un;var n,s=eo,a=s.length,c,f="value"in In?In.value:In.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===f[g-c];c++);return un=f.slice(n,1<c?1-c:void 0)}function to(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function pr(){return!0}function pa(){return!1}function zt(n){function s(a,c,f,g,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pr:pa,this.isPropagationStopped=pa,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),s}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=zt(Zn),mr=ce({},Zn,{view:0,detail:0}),td=zt(mr),ro,Lr,fi,ms=ce({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==fi&&(fi&&n.type==="mousemove"?(ro=n.screenX-fi.screenX,Lr=n.screenY-fi.screenY):Lr=ro=0,fi=n),ro)},movementY:function(n){return"movementY"in n?n.movementY:Lr}}),io=zt(ms),ma=ce({},ms,{dataTransfer:0}),zl=zt(ma),so=ce({},mr,{relatedTarget:0}),oo=zt(so),Bl=ce({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Mr=zt(Bl),$l=ce({},Zn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Wl=zt($l),Hl=ce({},Zn,{data:0}),ga=zt(Hl),ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=ql[n])?!!s[n]:!1}function gr(){return Gl}var u=ce({},mr,{key:function(n){if(n.key){var s=ao[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=to(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gr,charCode:function(n){return n.type==="keypress"?to(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?to(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=zt(u),_=ce({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=zt(_),M=ce({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gr}),W=zt(M),le=ce({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),nt=zt(le),At=ce({},ms,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ge=zt(At),Vt=[9,13,27,32],It=p&&"CompositionEvent"in window,jn=null;p&&"documentMode"in document&&(jn=document.documentMode);var Sn=p&&"TextEvent"in window&&!jn,gs=p&&(!It||jn&&8<jn&&11>=jn),lo=" ",mp=!1;function gp(n,s){switch(n){case"keyup":return Vt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var uo=!1;function aw(n,s){switch(n){case"compositionend":return yp(s);case"keypress":return s.which!==32?null:(mp=!0,lo);case"textInput":return n=s.data,n===lo&&mp?null:n;default:return null}}function lw(n,s){if(uo)return n==="compositionend"||!It&&gp(n,s)?(n=fa(),un=eo=In=null,uo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gs&&s.locale!=="ko"?null:s.data;default:return null}}var uw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!uw[n.type]:s==="textarea"}function _p(n,s,a,c){dr(c),s=Xl(s,"onChange"),0<s.length&&(a=new no("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ya=null,va=null;function cw(n){Lp(n,0)}function Kl(n){var s=mo(n);if($n(s))return n}function dw(n,s){if(n==="change")return s}var wp=!1;if(p){var nd;if(p){var rd="oninput"in document;if(!rd){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),rd=typeof Ep.oninput=="function"}nd=rd}else nd=!1;wp=nd&&(!document.documentMode||9<document.documentMode)}function Tp(){ya&&(ya.detachEvent("onpropertychange",xp),va=ya=null)}function xp(n){if(n.propertyName==="value"&&Kl(va)){var s=[];_p(s,va,n,ri(n)),ia(cw,s)}}function hw(n,s,a){n==="focusin"?(Tp(),ya=s,va=a,ya.attachEvent("onpropertychange",xp)):n==="focusout"&&Tp()}function fw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Kl(va)}function pw(n,s){if(n==="click")return Kl(s)}function mw(n,s){if(n==="input"||n==="change")return Kl(s)}function gw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var er=typeof Object.is=="function"?Object.is:gw;function _a(n,s){if(er(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!y.call(s,f)||!er(n[f],s[f]))return!1}return!0}function Ip(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sp(n,s){var a=Ip(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ip(a)}}function Cp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Cp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Pp(){for(var n=window,s=_n();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=_n(n.document)}return s}function id(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function yw(n){var s=Pp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Cp(a.ownerDocument.documentElement,a)){if(c!==null&&id(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=Sp(a,g);var w=Sp(a,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var vw=p&&"documentMode"in document&&11>=document.documentMode,co=null,sd=null,wa=null,od=!1;function Rp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;od||co==null||co!==_n(c)||(c=co,"selectionStart"in c&&id(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),wa&&_a(wa,c)||(wa=c,c=Xl(sd,"onSelect"),0<c.length&&(s=new no("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=co)))}function Ql(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var ho={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},ad={},Ap={};p&&(Ap=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function Yl(n){if(ad[n])return ad[n];if(!ho[n])return n;var s=ho[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Ap)return ad[n]=s[a];return n}var kp=Yl("animationend"),Np=Yl("animationiteration"),bp=Yl("animationstart"),jp=Yl("transitionend"),Dp=new Map,Vp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pi(n,s){Dp.set(n,s),l(s,[n])}for(var ld=0;ld<Vp.length;ld++){var ud=Vp[ld],_w=ud.toLowerCase(),ww=ud[0].toUpperCase()+ud.slice(1);pi(_w,"on"+ww)}pi(kp,"onAnimationEnd"),pi(Np,"onAnimationIteration"),pi(bp,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(jp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ew=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function Op(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Cl(c,s,void 0,n),n.currentTarget=null}function Lp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var C=c[w],N=C.instance,$=C.currentTarget;if(C=C.listener,N!==g&&f.isPropagationStopped())break e;Op(f,C,$),g=N}else for(w=0;w<c.length;w++){if(C=c[w],N=C.instance,$=C.currentTarget,C=C.listener,N!==g&&f.isPropagationStopped())break e;Op(f,C,$),g=N}}}if(qn)throw n=sa,qn=!1,sa=null,n}function ut(n,s){var a=s[yd];a===void 0&&(a=s[yd]=new Set);var c=n+"__bubble";a.has(c)||(Mp(s,n,2,!1),a.add(c))}function cd(n,s,a){var c=0;s&&(c|=4),Mp(a,n,c,s)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Ta(n){if(!n[Jl]){n[Jl]=!0,i.forEach(function(a){a!=="selectionchange"&&(Ew.has(a)||cd(a,!1,n),cd(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Jl]||(s[Jl]=!0,cd("selectionchange",!1,s))}}function Mp(n,s,a,c){switch(ha(s)){case 1:var f=ft;break;case 4:f=ed;break;default:f=da}a=f.bind(null,s,a,n),f=void 0,!Hs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function dd(n,s,a,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===f||N.nodeType===8&&N.parentNode===f))return;w=w.return}for(;C!==null;){if(w=ys(C),w===null)return;if(N=w.tag,N===5||N===6){c=g=w;continue e}C=C.parentNode}}c=c.return}ia(function(){var $=g,te=ri(a),ie=[];e:{var ee=Dp.get(n);if(ee!==void 0){var pe=no,we=n;switch(n){case"keypress":if(to(a)===0)break e;case"keydown":case"keyup":pe=m;break;case"focusin":we="focus",pe=oo;break;case"focusout":we="blur",pe=oo;break;case"beforeblur":case"afterblur":pe=oo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=zl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=W;break;case kp:case Np:case bp:pe=Mr;break;case jp:pe=nt;break;case"scroll":pe=td;break;case"wheel":pe=Ge;break;case"copy":case"cut":case"paste":pe=Wl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=T}var Ee=(s&4)!==0,wt=!Ee&&n==="scroll",F=Ee?ee!==null?ee+"Capture":null:ee;Ee=[];for(var j=$,z;j!==null;){z=j;var oe=z.stateNode;if(z.tag===5&&oe!==null&&(z=oe,F!==null&&(oe=_t(j,F),oe!=null&&Ee.push(xa(j,oe,z)))),wt)break;j=j.return}0<Ee.length&&(ee=new pe(ee,we,null,a,te),ie.push({event:ee,listeners:Ee}))}}if((s&7)===0){e:{if(ee=n==="mouseover"||n==="pointerover",pe=n==="mouseout"||n==="pointerout",ee&&a!==br&&(we=a.relatedTarget||a.fromElement)&&(ys(we)||we[Fr]))break e;if((pe||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,pe?(we=a.relatedTarget||a.toElement,pe=$,we=we?ys(we):null,we!==null&&(wt=Gn(we),we!==wt||we.tag!==5&&we.tag!==6)&&(we=null)):(pe=null,we=$),pe!==we)){if(Ee=io,oe="onMouseLeave",F="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(Ee=T,oe="onPointerLeave",F="onPointerEnter",j="pointer"),wt=pe==null?ee:mo(pe),z=we==null?ee:mo(we),ee=new Ee(oe,j+"leave",pe,a,te),ee.target=wt,ee.relatedTarget=z,oe=null,ys(te)===$&&(Ee=new Ee(F,j+"enter",we,a,te),Ee.target=z,Ee.relatedTarget=wt,oe=Ee),wt=oe,pe&&we)t:{for(Ee=pe,F=we,j=0,z=Ee;z;z=fo(z))j++;for(z=0,oe=F;oe;oe=fo(oe))z++;for(;0<j-z;)Ee=fo(Ee),j--;for(;0<z-j;)F=fo(F),z--;for(;j--;){if(Ee===F||F!==null&&Ee===F.alternate)break t;Ee=fo(Ee),F=fo(F)}Ee=null}else Ee=null;pe!==null&&Fp(ie,ee,pe,Ee,!1),we!==null&&wt!==null&&Fp(ie,wt,we,Ee,!0)}}e:{if(ee=$?mo($):window,pe=ee.nodeName&&ee.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ee.type==="file")var xe=dw;else if(vp(ee))if(wp)xe=mw;else{xe=fw;var Ae=hw}else(pe=ee.nodeName)&&pe.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(xe=pw);if(xe&&(xe=xe(n,$))){_p(ie,xe,a,te);break e}Ae&&Ae(n,ee,$),n==="focusout"&&(Ae=ee._wrapperState)&&Ae.controlled&&ee.type==="number"&&Ie(ee,"number",ee.value)}switch(Ae=$?mo($):window,n){case"focusin":(vp(Ae)||Ae.contentEditable==="true")&&(co=Ae,sd=$,wa=null);break;case"focusout":wa=sd=co=null;break;case"mousedown":od=!0;break;case"contextmenu":case"mouseup":case"dragend":od=!1,Rp(ie,a,te);break;case"selectionchange":if(vw)break;case"keydown":case"keyup":Rp(ie,a,te)}var ke;if(It)e:{switch(n){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else uo?gp(n,a)&&(je="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(gs&&a.locale!=="ko"&&(uo||je!=="onCompositionStart"?je==="onCompositionEnd"&&uo&&(ke=fa()):(In=te,eo="value"in In?In.value:In.textContent,uo=!0)),Ae=Xl($,je),0<Ae.length&&(je=new ga(je,n,null,a,te),ie.push({event:je,listeners:Ae}),ke?je.data=ke:(ke=yp(a),ke!==null&&(je.data=ke)))),(ke=Sn?aw(n,a):lw(n,a))&&($=Xl($,"onBeforeInput"),0<$.length&&(te=new ga("onBeforeInput","beforeinput",null,a,te),ie.push({event:te,listeners:$}),te.data=ke))}Lp(ie,s)})}function xa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Xl(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=_t(n,a),g!=null&&c.unshift(xa(n,g,f)),g=_t(n,s),g!=null&&c.push(xa(n,g,f))),n=n.return}return c}function fo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Fp(n,s,a,c,f){for(var g=s._reactName,w=[];a!==null&&a!==c;){var C=a,N=C.alternate,$=C.stateNode;if(N!==null&&N===c)break;C.tag===5&&$!==null&&(C=$,f?(N=_t(a,g),N!=null&&w.unshift(xa(a,N,C))):f||(N=_t(a,g),N!=null&&w.push(xa(a,N,C)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var Tw=/\r\n?/g,xw=/\u0000|\uFFFD/g;function Up(n){return(typeof n=="string"?n:""+n).replace(Tw,`
`).replace(xw,"")}function Zl(n,s,a){if(s=Up(s),Up(n)!==s&&a)throw Error(t(425))}function eu(){}var hd=null,fd=null;function pd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var md=typeof setTimeout=="function"?setTimeout:void 0,Iw=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,Sw=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(n){return zp.resolve(null).then(n).catch(Cw)}:md;function Cw(n){setTimeout(function(){throw n})}function gd(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),Xn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Xn(s)}function mi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Bp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var po=Math.random().toString(36).slice(2),yr="__reactFiber$"+po,Ia="__reactProps$"+po,Fr="__reactContainer$"+po,yd="__reactEvents$"+po,Pw="__reactListeners$"+po,Rw="__reactHandles$"+po;function ys(n){var s=n[yr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Fr]||a[yr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Bp(n);n!==null;){if(a=n[yr])return a;n=Bp(n)}return s}n=a,a=n.parentNode}return null}function Sa(n){return n=n[yr]||n[Fr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function mo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function tu(n){return n[Ia]||null}var vd=[],go=-1;function gi(n){return{current:n}}function ct(n){0>go||(n.current=vd[go],vd[go]=null,go--)}function at(n,s){go++,vd[go]=n.current,n.current=s}var yi={},Kt=gi(yi),cn=gi(!1),vs=yi;function yo(n,s){var a=n.type.contextTypes;if(!a)return yi;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function dn(n){return n=n.childContextTypes,n!=null}function nu(){ct(cn),ct(Kt)}function $p(n,s,a){if(Kt.current!==yi)throw Error(t(168));at(Kt,s),at(cn,a)}function Wp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,Me(n)||"Unknown",f));return ce({},a,c)}function ru(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||yi,vs=Kt.current,at(Kt,n),at(cn,cn.current),!0}function Hp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Wp(n,s,vs),c.__reactInternalMemoizedMergedChildContext=n,ct(cn),ct(Kt),at(Kt,n)):ct(cn),at(cn,a)}var Ur=null,iu=!1,_d=!1;function qp(n){Ur===null?Ur=[n]:Ur.push(n)}function Aw(n){iu=!0,qp(n)}function vi(){if(!_d&&Ur!==null){_d=!0;var n=0,s=He;try{var a=Ur;for(He=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Ur=null,iu=!1}catch(f){throw Ur!==null&&(Ur=Ur.slice(n+1)),Qs(us,vi),f}finally{He=s,_d=!1}}return null}var vo=[],_o=0,su=null,ou=0,Dn=[],Vn=0,_s=null,zr=1,Br="";function ws(n,s){vo[_o++]=ou,vo[_o++]=su,su=n,ou=s}function Gp(n,s,a){Dn[Vn++]=zr,Dn[Vn++]=Br,Dn[Vn++]=_s,_s=n;var c=zr;n=Br;var f=32-nn(c)-1;c&=~(1<<f),a+=1;var g=32-nn(s)+f;if(30<g){var w=f-f%5;g=(c&(1<<w)-1).toString(32),c>>=w,f-=w,zr=1<<32-nn(s)+f|a<<f|c,Br=g+n}else zr=1<<g|a<<f|c,Br=n}function wd(n){n.return!==null&&(ws(n,1),Gp(n,1,0))}function Ed(n){for(;n===su;)su=vo[--_o],vo[_o]=null,ou=vo[--_o],vo[_o]=null;for(;n===_s;)_s=Dn[--Vn],Dn[Vn]=null,Br=Dn[--Vn],Dn[Vn]=null,zr=Dn[--Vn],Dn[Vn]=null}var Cn=null,Pn=null,pt=!1,tr=null;function Kp(n,s){var a=Fn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Qp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Cn=n,Pn=mi(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Cn=n,Pn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=_s!==null?{id:zr,overflow:Br}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Fn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Cn=n,Pn=null,!0):!1;default:return!1}}function Td(n){return(n.mode&1)!==0&&(n.flags&128)===0}function xd(n){if(pt){var s=Pn;if(s){var a=s;if(!Qp(n,s)){if(Td(n))throw Error(t(418));s=mi(a.nextSibling);var c=Cn;s&&Qp(n,s)?Kp(c,a):(n.flags=n.flags&-4097|2,pt=!1,Cn=n)}}else{if(Td(n))throw Error(t(418));n.flags=n.flags&-4097|2,pt=!1,Cn=n}}}function Yp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Cn=n}function au(n){if(n!==Cn)return!1;if(!pt)return Yp(n),pt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!pd(n.type,n.memoizedProps)),s&&(s=Pn)){if(Td(n))throw Jp(),Error(t(418));for(;s;)Kp(n,s),s=mi(s.nextSibling)}if(Yp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Pn=mi(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Pn=null}}else Pn=Cn?mi(n.stateNode.nextSibling):null;return!0}function Jp(){for(var n=Pn;n;)n=mi(n.nextSibling)}function wo(){Pn=Cn=null,pt=!1}function Id(n){tr===null?tr=[n]:tr.push(n)}var kw=he.ReactCurrentBatchConfig;function Ca(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var C=f.refs;w===null?delete C[g]:C[g]=w},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function lu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Xp(n){var s=n._init;return s(n._payload)}function Zp(n){function s(F,j){if(n){var z=F.deletions;z===null?(F.deletions=[j],F.flags|=16):z.push(j)}}function a(F,j){if(!n)return null;for(;j!==null;)s(F,j),j=j.sibling;return null}function c(F,j){for(F=new Map;j!==null;)j.key!==null?F.set(j.key,j):F.set(j.index,j),j=j.sibling;return F}function f(F,j){return F=Ci(F,j),F.index=0,F.sibling=null,F}function g(F,j,z){return F.index=z,n?(z=F.alternate,z!==null?(z=z.index,z<j?(F.flags|=2,j):z):(F.flags|=2,j)):(F.flags|=1048576,j)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function C(F,j,z,oe){return j===null||j.tag!==6?(j=mh(z,F.mode,oe),j.return=F,j):(j=f(j,z),j.return=F,j)}function N(F,j,z,oe){var xe=z.type;return xe===k?te(F,j,z.props.children,oe,z.key):j!==null&&(j.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===xt&&Xp(xe)===j.type)?(oe=f(j,z.props),oe.ref=Ca(F,j,z),oe.return=F,oe):(oe=bu(z.type,z.key,z.props,null,F.mode,oe),oe.ref=Ca(F,j,z),oe.return=F,oe)}function $(F,j,z,oe){return j===null||j.tag!==4||j.stateNode.containerInfo!==z.containerInfo||j.stateNode.implementation!==z.implementation?(j=gh(z,F.mode,oe),j.return=F,j):(j=f(j,z.children||[]),j.return=F,j)}function te(F,j,z,oe,xe){return j===null||j.tag!==7?(j=Rs(z,F.mode,oe,xe),j.return=F,j):(j=f(j,z),j.return=F,j)}function ie(F,j,z){if(typeof j=="string"&&j!==""||typeof j=="number")return j=mh(""+j,F.mode,z),j.return=F,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Pe:return z=bu(j.type,j.key,j.props,null,F.mode,z),z.ref=Ca(F,null,j),z.return=F,z;case re:return j=gh(j,F.mode,z),j.return=F,j;case xt:var oe=j._init;return ie(F,oe(j._payload),z)}if(Y(j)||ve(j))return j=Rs(j,F.mode,z,null),j.return=F,j;lu(F,j)}return null}function ee(F,j,z,oe){var xe=j!==null?j.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return xe!==null?null:C(F,j,""+z,oe);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Pe:return z.key===xe?N(F,j,z,oe):null;case re:return z.key===xe?$(F,j,z,oe):null;case xt:return xe=z._init,ee(F,j,xe(z._payload),oe)}if(Y(z)||ve(z))return xe!==null?null:te(F,j,z,oe,null);lu(F,z)}return null}function pe(F,j,z,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return F=F.get(z)||null,C(j,F,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Pe:return F=F.get(oe.key===null?z:oe.key)||null,N(j,F,oe,xe);case re:return F=F.get(oe.key===null?z:oe.key)||null,$(j,F,oe,xe);case xt:var Ae=oe._init;return pe(F,j,z,Ae(oe._payload),xe)}if(Y(oe)||ve(oe))return F=F.get(z)||null,te(j,F,oe,xe,null);lu(j,oe)}return null}function we(F,j,z,oe){for(var xe=null,Ae=null,ke=j,je=j=0,Mt=null;ke!==null&&je<z.length;je++){ke.index>je?(Mt=ke,ke=null):Mt=ke.sibling;var Je=ee(F,ke,z[je],oe);if(Je===null){ke===null&&(ke=Mt);break}n&&ke&&Je.alternate===null&&s(F,ke),j=g(Je,j,je),Ae===null?xe=Je:Ae.sibling=Je,Ae=Je,ke=Mt}if(je===z.length)return a(F,ke),pt&&ws(F,je),xe;if(ke===null){for(;je<z.length;je++)ke=ie(F,z[je],oe),ke!==null&&(j=g(ke,j,je),Ae===null?xe=ke:Ae.sibling=ke,Ae=ke);return pt&&ws(F,je),xe}for(ke=c(F,ke);je<z.length;je++)Mt=pe(ke,F,je,z[je],oe),Mt!==null&&(n&&Mt.alternate!==null&&ke.delete(Mt.key===null?je:Mt.key),j=g(Mt,j,je),Ae===null?xe=Mt:Ae.sibling=Mt,Ae=Mt);return n&&ke.forEach(function(Pi){return s(F,Pi)}),pt&&ws(F,je),xe}function Ee(F,j,z,oe){var xe=ve(z);if(typeof xe!="function")throw Error(t(150));if(z=xe.call(z),z==null)throw Error(t(151));for(var Ae=xe=null,ke=j,je=j=0,Mt=null,Je=z.next();ke!==null&&!Je.done;je++,Je=z.next()){ke.index>je?(Mt=ke,ke=null):Mt=ke.sibling;var Pi=ee(F,ke,Je.value,oe);if(Pi===null){ke===null&&(ke=Mt);break}n&&ke&&Pi.alternate===null&&s(F,ke),j=g(Pi,j,je),Ae===null?xe=Pi:Ae.sibling=Pi,Ae=Pi,ke=Mt}if(Je.done)return a(F,ke),pt&&ws(F,je),xe;if(ke===null){for(;!Je.done;je++,Je=z.next())Je=ie(F,Je.value,oe),Je!==null&&(j=g(Je,j,je),Ae===null?xe=Je:Ae.sibling=Je,Ae=Je);return pt&&ws(F,je),xe}for(ke=c(F,ke);!Je.done;je++,Je=z.next())Je=pe(ke,F,je,Je.value,oe),Je!==null&&(n&&Je.alternate!==null&&ke.delete(Je.key===null?je:Je.key),j=g(Je,j,je),Ae===null?xe=Je:Ae.sibling=Je,Ae=Je);return n&&ke.forEach(function(uE){return s(F,uE)}),pt&&ws(F,je),xe}function wt(F,j,z,oe){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Pe:e:{for(var xe=z.key,Ae=j;Ae!==null;){if(Ae.key===xe){if(xe=z.type,xe===k){if(Ae.tag===7){a(F,Ae.sibling),j=f(Ae,z.props.children),j.return=F,F=j;break e}}else if(Ae.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===xt&&Xp(xe)===Ae.type){a(F,Ae.sibling),j=f(Ae,z.props),j.ref=Ca(F,Ae,z),j.return=F,F=j;break e}a(F,Ae);break}else s(F,Ae);Ae=Ae.sibling}z.type===k?(j=Rs(z.props.children,F.mode,oe,z.key),j.return=F,F=j):(oe=bu(z.type,z.key,z.props,null,F.mode,oe),oe.ref=Ca(F,j,z),oe.return=F,F=oe)}return w(F);case re:e:{for(Ae=z.key;j!==null;){if(j.key===Ae)if(j.tag===4&&j.stateNode.containerInfo===z.containerInfo&&j.stateNode.implementation===z.implementation){a(F,j.sibling),j=f(j,z.children||[]),j.return=F,F=j;break e}else{a(F,j);break}else s(F,j);j=j.sibling}j=gh(z,F.mode,oe),j.return=F,F=j}return w(F);case xt:return Ae=z._init,wt(F,j,Ae(z._payload),oe)}if(Y(z))return we(F,j,z,oe);if(ve(z))return Ee(F,j,z,oe);lu(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,j!==null&&j.tag===6?(a(F,j.sibling),j=f(j,z),j.return=F,F=j):(a(F,j),j=mh(z,F.mode,oe),j.return=F,F=j),w(F)):a(F,j)}return wt}var Eo=Zp(!0),em=Zp(!1),uu=gi(null),cu=null,To=null,Sd=null;function Cd(){Sd=To=cu=null}function Pd(n){var s=uu.current;ct(uu),n._currentValue=s}function Rd(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function xo(n,s){cu=n,Sd=To=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(hn=!0),n.firstContext=null)}function On(n){var s=n._currentValue;if(Sd!==n)if(n={context:n,memoizedValue:s,next:null},To===null){if(cu===null)throw Error(t(308));To=n,cu.dependencies={lanes:0,firstContext:n}}else To=To.next=n;return s}var Es=null;function Ad(n){Es===null?Es=[n]:Es.push(n)}function tm(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Ad(s)):(a.next=f.next,f.next=a),s.interleaved=a,$r(n,c)}function $r(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var _i=!1;function kd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Wr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function wi(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Qe&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,$r(n,a)}return f=c.interleaved,f===null?(s.next=s,Ad(c)):(s.next=f.next,f.next=s),c.interleaved=s,$r(n,a)}function du(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ui(n,a)}}function rm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function hu(n,s,a,c){var f=n.updateQueue;_i=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var N=C,$=N.next;N.next=null,w===null?g=$:w.next=$,w=N;var te=n.alternate;te!==null&&(te=te.updateQueue,C=te.lastBaseUpdate,C!==w&&(C===null?te.firstBaseUpdate=$:C.next=$,te.lastBaseUpdate=N))}if(g!==null){var ie=f.baseState;w=0,te=$=N=null,C=g;do{var ee=C.lane,pe=C.eventTime;if((c&ee)===ee){te!==null&&(te=te.next={eventTime:pe,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var we=n,Ee=C;switch(ee=s,pe=a,Ee.tag){case 1:if(we=Ee.payload,typeof we=="function"){ie=we.call(pe,ie,ee);break e}ie=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ee.payload,ee=typeof we=="function"?we.call(pe,ie,ee):we,ee==null)break e;ie=ce({},ie,ee);break e;case 2:_i=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,ee=f.effects,ee===null?f.effects=[C]:ee.push(C))}else pe={eventTime:pe,lane:ee,tag:C.tag,payload:C.payload,callback:C.callback,next:null},te===null?($=te=pe,N=ie):te=te.next=pe,w|=ee;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ee=C,C=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);if(te===null&&(N=ie),f.baseState=N,f.firstBaseUpdate=$,f.lastBaseUpdate=te,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);Is|=w,n.lanes=w,n.memoizedState=ie}}function im(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Pa={},vr=gi(Pa),Ra=gi(Pa),Aa=gi(Pa);function Ts(n){if(n===Pa)throw Error(t(174));return n}function Nd(n,s){switch(at(Aa,s),at(Ra,n),at(vr,Pa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Xe(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Xe(s,n)}ct(vr),at(vr,s)}function Io(){ct(vr),ct(Ra),ct(Aa)}function sm(n){Ts(Aa.current);var s=Ts(vr.current),a=Xe(s,n.type);s!==a&&(at(Ra,n),at(vr,a))}function bd(n){Ra.current===n&&(ct(vr),ct(Ra))}var mt=gi(0);function fu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var jd=[];function Dd(){for(var n=0;n<jd.length;n++)jd[n]._workInProgressVersionPrimary=null;jd.length=0}var pu=he.ReactCurrentDispatcher,Vd=he.ReactCurrentBatchConfig,xs=0,gt=null,kt=null,Ot=null,mu=!1,ka=!1,Na=0,Nw=0;function Qt(){throw Error(t(321))}function Od(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!er(n[a],s[a]))return!1;return!0}function Ld(n,s,a,c,f,g){if(xs=g,gt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,pu.current=n===null||n.memoizedState===null?Vw:Ow,n=a(c,f),ka){g=0;do{if(ka=!1,Na=0,25<=g)throw Error(t(301));g+=1,Ot=kt=null,s.updateQueue=null,pu.current=Lw,n=a(c,f)}while(ka)}if(pu.current=vu,s=kt!==null&&kt.next!==null,xs=0,Ot=kt=gt=null,mu=!1,s)throw Error(t(300));return n}function Md(){var n=Na!==0;return Na=0,n}function _r(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?gt.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function Ln(){if(kt===null){var n=gt.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var s=Ot===null?gt.memoizedState:Ot.next;if(s!==null)Ot=s,kt=n;else{if(n===null)throw Error(t(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Ot===null?gt.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function ba(n,s){return typeof s=="function"?s(n):s}function Fd(n){var s=Ln(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=kt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var C=w=null,N=null,$=g;do{var te=$.lane;if((xs&te)===te)N!==null&&(N=N.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var ie={lane:te,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};N===null?(C=N=ie,w=c):N=N.next=ie,gt.lanes|=te,Is|=te}$=$.next}while($!==null&&$!==g);N===null?w=c:N.next=C,er(c,s.memoizedState)||(hn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,gt.lanes|=g,Is|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ud(n){var s=Ln(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);er(g,s.memoizedState)||(hn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function om(){}function am(n,s){var a=gt,c=Ln(),f=s(),g=!er(c.memoizedState,f);if(g&&(c.memoizedState=f,hn=!0),c=c.queue,zd(cm.bind(null,a,c,n),[n]),c.getSnapshot!==s||g||Ot!==null&&Ot.memoizedState.tag&1){if(a.flags|=2048,ja(9,um.bind(null,a,c,f,s),void 0,null),Lt===null)throw Error(t(349));(xs&30)!==0||lm(a,s,f)}return f}function lm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=gt.updateQueue,s===null?(s={lastEffect:null,stores:null},gt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function um(n,s,a,c){s.value=a,s.getSnapshot=c,dm(s)&&hm(n)}function cm(n,s,a){return a(function(){dm(s)&&hm(n)})}function dm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!er(n,a)}catch{return!0}}function hm(n){var s=$r(n,1);s!==null&&sr(s,n,1,-1)}function fm(n){var s=_r();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:n},s.queue=n,n=n.dispatch=Dw.bind(null,gt,n),[s.memoizedState,n]}function ja(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=gt.updateQueue,s===null?(s={lastEffect:null,stores:null},gt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function pm(){return Ln().memoizedState}function gu(n,s,a,c){var f=_r();gt.flags|=n,f.memoizedState=ja(1|s,a,void 0,c===void 0?null:c)}function yu(n,s,a,c){var f=Ln();c=c===void 0?null:c;var g=void 0;if(kt!==null){var w=kt.memoizedState;if(g=w.destroy,c!==null&&Od(c,w.deps)){f.memoizedState=ja(s,a,g,c);return}}gt.flags|=n,f.memoizedState=ja(1|s,a,g,c)}function mm(n,s){return gu(8390656,8,n,s)}function zd(n,s){return yu(2048,8,n,s)}function gm(n,s){return yu(4,2,n,s)}function ym(n,s){return yu(4,4,n,s)}function vm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function _m(n,s,a){return a=a!=null?a.concat([n]):null,yu(4,4,vm.bind(null,s,n),a)}function Bd(){}function wm(n,s){var a=Ln();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Od(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Em(n,s){var a=Ln();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Od(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Tm(n,s,a){return(xs&21)===0?(n.baseState&&(n.baseState=!1,hn=!0),n.memoizedState=a):(er(a,s)||(a=hs(),gt.lanes|=a,Is|=a,n.baseState=!0),s)}function bw(n,s){var a=He;He=a!==0&&4>a?a:4,n(!0);var c=Vd.transition;Vd.transition={};try{n(!1),s()}finally{He=a,Vd.transition=c}}function xm(){return Ln().memoizedState}function jw(n,s,a){var c=Ii(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Im(n))Sm(s,a);else if(a=tm(n,s,a,c),a!==null){var f=on();sr(a,n,c,f),Cm(a,s,c)}}function Dw(n,s,a){var c=Ii(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Im(n))Sm(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,C=g(w,a);if(f.hasEagerState=!0,f.eagerState=C,er(C,w)){var N=s.interleaved;N===null?(f.next=f,Ad(s)):(f.next=N.next,N.next=f),s.interleaved=f;return}}catch{}finally{}a=tm(n,s,f,c),a!==null&&(f=on(),sr(a,n,c,f),Cm(a,s,c))}}function Im(n){var s=n.alternate;return n===gt||s!==null&&s===gt}function Sm(n,s){ka=mu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Cm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ui(n,a)}}var vu={readContext:On,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},Vw={readContext:On,useCallback:function(n,s){return _r().memoizedState=[n,s===void 0?null:s],n},useContext:On,useEffect:mm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,gu(4194308,4,vm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return gu(4194308,4,n,s)},useInsertionEffect:function(n,s){return gu(4,2,n,s)},useMemo:function(n,s){var a=_r();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=_r();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=jw.bind(null,gt,n),[c.memoizedState,n]},useRef:function(n){var s=_r();return n={current:n},s.memoizedState=n},useState:fm,useDebugValue:Bd,useDeferredValue:function(n){return _r().memoizedState=n},useTransition:function(){var n=fm(!1),s=n[0];return n=bw.bind(null,n[1]),_r().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=gt,f=_r();if(pt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Lt===null)throw Error(t(349));(xs&30)!==0||lm(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,mm(cm.bind(null,c,g,n),[n]),c.flags|=2048,ja(9,um.bind(null,c,g,a,s),void 0,null),a},useId:function(){var n=_r(),s=Lt.identifierPrefix;if(pt){var a=Br,c=zr;a=(c&~(1<<32-nn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Na++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Nw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Ow={readContext:On,useCallback:wm,useContext:On,useEffect:zd,useImperativeHandle:_m,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Em,useReducer:Fd,useRef:pm,useState:function(){return Fd(ba)},useDebugValue:Bd,useDeferredValue:function(n){var s=Ln();return Tm(s,kt.memoizedState,n)},useTransition:function(){var n=Fd(ba)[0],s=Ln().memoizedState;return[n,s]},useMutableSource:om,useSyncExternalStore:am,useId:xm,unstable_isNewReconciler:!1},Lw={readContext:On,useCallback:wm,useContext:On,useEffect:zd,useImperativeHandle:_m,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Em,useReducer:Ud,useRef:pm,useState:function(){return Ud(ba)},useDebugValue:Bd,useDeferredValue:function(n){var s=Ln();return kt===null?s.memoizedState=n:Tm(s,kt.memoizedState,n)},useTransition:function(){var n=Ud(ba)[0],s=Ln().memoizedState;return[n,s]},useMutableSource:om,useSyncExternalStore:am,useId:xm,unstable_isNewReconciler:!1};function nr(n,s){if(n&&n.defaultProps){s=ce({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function $d(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ce({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var _u={isMounted:function(n){return(n=n._reactInternals)?Gn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=on(),f=Ii(n),g=Wr(c,f);g.payload=s,a!=null&&(g.callback=a),s=wi(n,g,f),s!==null&&(sr(s,n,f,c),du(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=on(),f=Ii(n),g=Wr(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=wi(n,g,f),s!==null&&(sr(s,n,f,c),du(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=on(),c=Ii(n),f=Wr(a,c);f.tag=2,s!=null&&(f.callback=s),s=wi(n,f,c),s!==null&&(sr(s,n,c,a),du(s,n,c))}};function Pm(n,s,a,c,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!_a(a,c)||!_a(f,g):!0}function Rm(n,s,a){var c=!1,f=yi,g=s.contextType;return typeof g=="object"&&g!==null?g=On(g):(f=dn(s)?vs:Kt.current,c=s.contextTypes,g=(c=c!=null)?yo(n,f):yi),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=_u,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Am(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&_u.enqueueReplaceState(s,s.state,null)}function Wd(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},kd(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=On(g):(g=dn(s)?vs:Kt.current,f.context=yo(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&($d(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&_u.enqueueReplaceState(f,f.state,null),hu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function So(n,s){try{var a="",c=s;do a+=Le(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Hd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function qd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Mw=typeof WeakMap=="function"?WeakMap:Map;function km(n,s,a){a=Wr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Cu||(Cu=!0,ah=c),qd(n,s)},a}function Nm(n,s,a){a=Wr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){qd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){qd(n,s),typeof c!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function bm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Mw;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=Xw.bind(null,n,s,a),s.then(n,n))}function jm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Dm(n,s,a,c,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Wr(-1,1),s.tag=2,wi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Fw=he.ReactCurrentOwner,hn=!1;function sn(n,s,a,c){s.child=n===null?em(s,null,a,c):Eo(s,n.child,a,c)}function Vm(n,s,a,c,f){a=a.render;var g=s.ref;return xo(s,f),c=Ld(n,s,a,c,g,f),a=Md(),n!==null&&!hn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Hr(n,s,f)):(pt&&a&&wd(s),s.flags|=1,sn(n,s,c,f),s.child)}function Om(n,s,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!ph(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Lm(n,s,g,c,f)):(n=bu(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:_a,a(w,c)&&n.ref===s.ref)return Hr(n,s,f)}return s.flags|=1,n=Ci(g,c),n.ref=s.ref,n.return=s,s.child=n}function Lm(n,s,a,c,f){if(n!==null){var g=n.memoizedProps;if(_a(g,c)&&n.ref===s.ref)if(hn=!1,s.pendingProps=c=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(hn=!0);else return s.lanes=n.lanes,Hr(n,s,f)}return Gd(n,s,a,c,f)}function Mm(n,s,a){var c=s.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(Po,Rn),Rn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,at(Po,Rn),Rn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,at(Po,Rn),Rn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,at(Po,Rn),Rn|=c;return sn(n,s,f,a),s.child}function Fm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Gd(n,s,a,c,f){var g=dn(a)?vs:Kt.current;return g=yo(s,g),xo(s,f),a=Ld(n,s,a,c,g,f),c=Md(),n!==null&&!hn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Hr(n,s,f)):(pt&&c&&wd(s),s.flags|=1,sn(n,s,a,f),s.child)}function Um(n,s,a,c,f){if(dn(a)){var g=!0;ru(s)}else g=!1;if(xo(s,f),s.stateNode===null)Eu(n,s),Rm(s,a,c),Wd(s,a,c,f),c=!0;else if(n===null){var w=s.stateNode,C=s.memoizedProps;w.props=C;var N=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=On($):($=dn(a)?vs:Kt.current,$=yo(s,$));var te=a.getDerivedStateFromProps,ie=typeof te=="function"||typeof w.getSnapshotBeforeUpdate=="function";ie||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||N!==$)&&Am(s,w,c,$),_i=!1;var ee=s.memoizedState;w.state=ee,hu(s,c,w,f),N=s.memoizedState,C!==c||ee!==N||cn.current||_i?(typeof te=="function"&&($d(s,a,te,c),N=s.memoizedState),(C=_i||Pm(s,a,C,c,ee,N,$))?(ie||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=N),w.props=c,w.state=N,w.context=$,c=C):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,nm(n,s),C=s.memoizedProps,$=s.type===s.elementType?C:nr(s.type,C),w.props=$,ie=s.pendingProps,ee=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=On(N):(N=dn(a)?vs:Kt.current,N=yo(s,N));var pe=a.getDerivedStateFromProps;(te=typeof pe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==ie||ee!==N)&&Am(s,w,c,N),_i=!1,ee=s.memoizedState,w.state=ee,hu(s,c,w,f);var we=s.memoizedState;C!==ie||ee!==we||cn.current||_i?(typeof pe=="function"&&($d(s,a,pe,c),we=s.memoizedState),($=_i||Pm(s,a,$,c,ee,we,N)||!1)?(te||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,we,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,we,N)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=we),w.props=c,w.state=we,w.context=N,c=$):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),c=!1)}return Kd(n,s,a,c,g,f)}function Kd(n,s,a,c,f,g){Fm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&Hp(s,a,!1),Hr(n,s,g);c=s.stateNode,Fw.current=s;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=Eo(s,n.child,null,g),s.child=Eo(s,null,C,g)):sn(n,s,C,g),s.memoizedState=c.state,f&&Hp(s,a,!0),s.child}function zm(n){var s=n.stateNode;s.pendingContext?$p(n,s.pendingContext,s.pendingContext!==s.context):s.context&&$p(n,s.context,!1),Nd(n,s.containerInfo)}function Bm(n,s,a,c,f){return wo(),Id(f),s.flags|=256,sn(n,s,a,c),s.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function Yd(n){return{baseLanes:n,cachePool:null,transitions:null}}function $m(n,s,a){var c=s.pendingProps,f=mt.current,g=!1,w=(s.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(f&2)!==0),C?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),at(mt,f&1),n===null)return xd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,g?(c=s.mode,g=s.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=ju(w,c,0,null),n=Rs(n,c,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=Yd(a),s.memoizedState=Qd,n):Jd(s,w));if(f=n.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return Uw(n,s,w,c,C,f,a);if(g){g=c.fallback,w=s.mode,f=n.child,C=f.sibling;var N={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=N,s.deletions=null):(c=Ci(f,N),c.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=Ci(C,g):(g=Rs(g,w,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,w=n.child.memoizedState,w=w===null?Yd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,s.memoizedState=Qd,c}return g=n.child,n=g.sibling,c=Ci(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Jd(n,s){return s=ju({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function wu(n,s,a,c){return c!==null&&Id(c),Eo(s,n.child,null,a),n=Jd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Uw(n,s,a,c,f,g,w){if(a)return s.flags&256?(s.flags&=-257,c=Hd(Error(t(422))),wu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=ju({mode:"visible",children:c.children},f,0,null),g=Rs(g,f,w,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&Eo(s,n.child,null,w),s.child.memoizedState=Yd(w),s.memoizedState=Qd,g);if((s.mode&1)===0)return wu(n,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var C=c.dgst;return c=C,g=Error(t(419)),c=Hd(g,c,void 0),wu(n,s,w,c)}if(C=(w&n.childLanes)!==0,hn||C){if(c=Lt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,$r(n,f),sr(c,n,f,-1))}return fh(),c=Hd(Error(t(421))),wu(n,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=Zw.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,Pn=mi(f.nextSibling),Cn=s,pt=!0,tr=null,n!==null&&(Dn[Vn++]=zr,Dn[Vn++]=Br,Dn[Vn++]=_s,zr=n.id,Br=n.overflow,_s=s),s=Jd(s,c.children),s.flags|=4096,s)}function Wm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Rd(n.return,s,a)}function Xd(n,s,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Hm(n,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(sn(n,s,c.children,a),c=mt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wm(n,a,s);else if(n.tag===19)Wm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(at(mt,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&fu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Xd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&fu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Xd(s,!0,a,null,g);break;case"together":Xd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Eu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Hr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Is|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Ci(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ci(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function zw(n,s,a){switch(s.tag){case 3:zm(s),wo();break;case 5:sm(s);break;case 1:dn(s.type)&&ru(s);break;case 4:Nd(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;at(uu,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(at(mt,mt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?$m(n,s,a):(at(mt,mt.current&1),n=Hr(n,s,a),n!==null?n.sibling:null);at(mt,mt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Hm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),at(mt,mt.current),c)break;return null;case 22:case 23:return s.lanes=0,Mm(n,s,a)}return Hr(n,s,a)}var qm,Zd,Gm,Km;qm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Zd=function(){},Gm=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Ts(vr.current);var g=null;switch(a){case"input":f=wn(n,f),c=wn(n,c),g=[];break;case"select":f=ce({},f,{value:void 0}),c=ce({},c,{value:void 0}),g=[];break;case"textarea":f=fe(n,f),c=fe(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=eu)}rs(a,c);var w;a=null;for($ in f)if(!c.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var C=f[$];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in c){var N=c[$];if(C=f!=null?f[$]:void 0,c.hasOwnProperty($)&&N!==C&&(N!=null||C!=null))if($==="style")if(C){for(w in C)!C.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&C[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(g||(g=[]),g.push($,a)),a=N;else $==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,C=C?C.__html:void 0,N!=null&&C!==N&&(g=g||[]).push($,N)):$==="children"?typeof N!="string"&&typeof N!="number"||(g=g||[]).push($,""+N):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(N!=null&&$==="onScroll"&&ut("scroll",n),g||C===N||(g=[])):(g=g||[]).push($,N))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},Km=function(n,s,a,c){a!==c&&(s.flags|=4)};function Da(n,s){if(!pt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Yt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Bw(n,s,a){var c=s.pendingProps;switch(Ed(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(s),null;case 1:return dn(s.type)&&nu(),Yt(s),null;case 3:return c=s.stateNode,Io(),ct(cn),ct(Kt),Dd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(au(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,tr!==null&&(ch(tr),tr=null))),Zd(n,s),Yt(s),null;case 5:bd(s);var f=Ts(Aa.current);if(a=s.type,n!==null&&s.stateNode!=null)Gm(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Yt(s),null}if(n=Ts(vr.current),au(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[yr]=s,c[Ia]=g,n=(s.mode&1)!==0,a){case"dialog":ut("cancel",c),ut("close",c);break;case"iframe":case"object":case"embed":ut("load",c);break;case"video":case"audio":for(f=0;f<Ea.length;f++)ut(Ea[f],c);break;case"source":ut("error",c);break;case"img":case"image":case"link":ut("error",c),ut("load",c);break;case"details":ut("toggle",c);break;case"input":b(c,g),ut("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},ut("invalid",c);break;case"textarea":Se(c,g),ut("invalid",c)}rs(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var C=g[w];w==="children"?typeof C=="string"?c.textContent!==C&&(g.suppressHydrationWarning!==!0&&Zl(c.textContent,C,n),f=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&Zl(c.textContent,C,n),f=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&ut("scroll",c)}switch(a){case"input":vn(c),G(c,g,!0);break;case"textarea":vn(c),rt(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=eu)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=De(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[yr]=s,n[Ia]=c,qm(n,s,!1,!1),s.stateNode=n;e:{switch(w=is(a,c),a){case"dialog":ut("cancel",n),ut("close",n),f=c;break;case"iframe":case"object":case"embed":ut("load",n),f=c;break;case"video":case"audio":for(f=0;f<Ea.length;f++)ut(Ea[f],n);f=c;break;case"source":ut("error",n),f=c;break;case"img":case"image":case"link":ut("error",n),ut("load",n),f=c;break;case"details":ut("toggle",n),f=c;break;case"input":b(n,c),f=wn(n,c),ut("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=ce({},c,{value:void 0}),ut("invalid",n);break;case"textarea":Se(n,c),f=fe(n,c),ut("invalid",n);break;default:f=c}rs(a,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var N=C[g];g==="style"?ts(n,N):g==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Zi(n,N)):g==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&ur(n,N):typeof N=="number"&&ur(n,""+N):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?N!=null&&g==="onScroll"&&ut("scroll",n):N!=null&&ne(n,g,N,w))}switch(a){case"input":vn(n),G(n,c,!1);break;case"textarea":vn(n),rt(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Be(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?de(n,!!c.multiple,g,!1):c.defaultValue!=null&&de(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=eu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Yt(s),null;case 6:if(n&&s.stateNode!=null)Km(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Ts(Aa.current),Ts(vr.current),au(s)){if(c=s.stateNode,a=s.memoizedProps,c[yr]=s,(g=c.nodeValue!==a)&&(n=Cn,n!==null))switch(n.tag){case 3:Zl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Zl(c.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[yr]=s,s.stateNode=c}return Yt(s),null;case 13:if(ct(mt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(pt&&Pn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Jp(),wo(),s.flags|=98560,g=!1;else if(g=au(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[yr]=s}else wo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Yt(s),g=!1}else tr!==null&&(ch(tr),tr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(mt.current&1)!==0?Nt===0&&(Nt=3):fh())),s.updateQueue!==null&&(s.flags|=4),Yt(s),null);case 4:return Io(),Zd(n,s),n===null&&Ta(s.stateNode.containerInfo),Yt(s),null;case 10:return Pd(s.type._context),Yt(s),null;case 17:return dn(s.type)&&nu(),Yt(s),null;case 19:if(ct(mt),g=s.memoizedState,g===null)return Yt(s),null;if(c=(s.flags&128)!==0,w=g.rendering,w===null)if(c)Da(g,!1);else{if(Nt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=fu(n),w!==null){for(s.flags|=128,Da(g,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,n=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return at(mt,mt.current&1|2),s.child}n=n.sibling}g.tail!==null&&ot()>Ro&&(s.flags|=128,c=!0,Da(g,!1),s.lanes=4194304)}else{if(!c)if(n=fu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Da(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!pt)return Yt(s),null}else 2*ot()-g.renderingStartTime>Ro&&a!==1073741824&&(s.flags|=128,c=!0,Da(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=ot(),s.sibling=null,a=mt.current,at(mt,c?a&1|2:a&1),s):(Yt(s),null);case 22:case 23:return hh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Rn&1073741824)!==0&&(Yt(s),s.subtreeFlags&6&&(s.flags|=8192)):Yt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function $w(n,s){switch(Ed(s),s.tag){case 1:return dn(s.type)&&nu(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Io(),ct(cn),ct(Kt),Dd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return bd(s),null;case 13:if(ct(mt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));wo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ct(mt),null;case 4:return Io(),null;case 10:return Pd(s.type._context),null;case 22:case 23:return hh(),null;case 24:return null;default:return null}}var Tu=!1,Jt=!1,Ww=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Co(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){vt(n,s,c)}else a.current=null}function eh(n,s,a){try{a()}catch(c){vt(n,s,c)}}var Qm=!1;function Hw(n,s){if(hd=hi,n=Pp(),id(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,C=-1,N=-1,$=0,te=0,ie=n,ee=null;t:for(;;){for(var pe;ie!==a||f!==0&&ie.nodeType!==3||(C=w+f),ie!==g||c!==0&&ie.nodeType!==3||(N=w+c),ie.nodeType===3&&(w+=ie.nodeValue.length),(pe=ie.firstChild)!==null;)ee=ie,ie=pe;for(;;){if(ie===n)break t;if(ee===a&&++$===f&&(C=w),ee===g&&++te===c&&(N=w),(pe=ie.nextSibling)!==null)break;ie=ee,ee=ie.parentNode}ie=pe}a=C===-1||N===-1?null:{start:C,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(fd={focusedElem:n,selectionRange:a},hi=!1,ye=s;ye!==null;)if(s=ye,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ye=n;else for(;ye!==null;){s=ye;try{var we=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Ee=we.memoizedProps,wt=we.memoizedState,F=s.stateNode,j=F.getSnapshotBeforeUpdate(s.elementType===s.type?Ee:nr(s.type,Ee),wt);F.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){vt(s,s.return,oe)}if(n=s.sibling,n!==null){n.return=s.return,ye=n;break}ye=s.return}return we=Qm,Qm=!1,we}function Va(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&eh(s,a,g)}f=f.next}while(f!==c)}}function xu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function th(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Ym(n){var s=n.alternate;s!==null&&(n.alternate=null,Ym(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[yr],delete s[Ia],delete s[yd],delete s[Pw],delete s[Rw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Jm(n){return n.tag===5||n.tag===3||n.tag===4}function Xm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Jm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=eu));else if(c!==4&&(n=n.child,n!==null))for(nh(n,s,a),n=n.sibling;n!==null;)nh(n,s,a),n=n.sibling}function rh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(rh(n,s,a),n=n.sibling;n!==null;)rh(n,s,a),n=n.sibling}var Bt=null,rr=!1;function Ei(n,s,a){for(a=a.child;a!==null;)Zm(n,s,a),a=a.sibling}function Zm(n,s,a){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(cs,a)}catch{}switch(a.tag){case 5:Jt||Co(a,s);case 6:var c=Bt,f=rr;Bt=null,Ei(n,s,a),Bt=c,rr=f,Bt!==null&&(rr?(n=Bt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Bt.removeChild(a.stateNode));break;case 18:Bt!==null&&(rr?(n=Bt,a=a.stateNode,n.nodeType===8?gd(n.parentNode,a):n.nodeType===1&&gd(n,a),Xn(n)):gd(Bt,a.stateNode));break;case 4:c=Bt,f=rr,Bt=a.stateNode.containerInfo,rr=!0,Ei(n,s,a),Bt=c,rr=f;break;case 0:case 11:case 14:case 15:if(!Jt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&eh(a,s,w),f=f.next}while(f!==c)}Ei(n,s,a);break;case 1:if(!Jt&&(Co(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){vt(a,s,C)}Ei(n,s,a);break;case 21:Ei(n,s,a);break;case 22:a.mode&1?(Jt=(c=Jt)||a.memoizedState!==null,Ei(n,s,a),Jt=c):Ei(n,s,a);break;default:Ei(n,s,a)}}function eg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Ww),s.forEach(function(c){var f=eE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function ir(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 5:Bt=C.stateNode,rr=!1;break e;case 3:Bt=C.stateNode.containerInfo,rr=!0;break e;case 4:Bt=C.stateNode.containerInfo,rr=!0;break e}C=C.return}if(Bt===null)throw Error(t(160));Zm(g,w,f),Bt=null,rr=!1;var N=f.alternate;N!==null&&(N.return=null),f.return=null}catch($){vt(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)tg(s,n),s=s.sibling}function tg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ir(s,n),wr(n),c&4){try{Va(3,n,n.return),xu(3,n)}catch(Ee){vt(n,n.return,Ee)}try{Va(5,n,n.return)}catch(Ee){vt(n,n.return,Ee)}}break;case 1:ir(s,n),wr(n),c&512&&a!==null&&Co(a,a.return);break;case 5:if(ir(s,n),wr(n),c&512&&a!==null&&Co(a,a.return),n.flags&32){var f=n.stateNode;try{ur(f,"")}catch(Ee){vt(n,n.return,Ee)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,C=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&ue(f,g),is(C,w);var $=is(C,g);for(w=0;w<N.length;w+=2){var te=N[w],ie=N[w+1];te==="style"?ts(f,ie):te==="dangerouslySetInnerHTML"?Zi(f,ie):te==="children"?ur(f,ie):ne(f,te,ie,$)}switch(C){case"input":se(f,g);break;case"textarea":qe(f,g);break;case"select":var ee=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var pe=g.value;pe!=null?de(f,!!g.multiple,pe,!1):ee!==!!g.multiple&&(g.defaultValue!=null?de(f,!!g.multiple,g.defaultValue,!0):de(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ia]=g}catch(Ee){vt(n,n.return,Ee)}}break;case 6:if(ir(s,n),wr(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(Ee){vt(n,n.return,Ee)}}break;case 3:if(ir(s,n),wr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Xn(s.containerInfo)}catch(Ee){vt(n,n.return,Ee)}break;case 4:ir(s,n),wr(n);break;case 13:ir(s,n),wr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(oh=ot())),c&4&&eg(n);break;case 22:if(te=a!==null&&a.memoizedState!==null,n.mode&1?(Jt=($=Jt)||te,ir(s,n),Jt=$):ir(s,n),wr(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!te&&(n.mode&1)!==0)for(ye=n,te=n.child;te!==null;){for(ie=ye=te;ye!==null;){switch(ee=ye,pe=ee.child,ee.tag){case 0:case 11:case 14:case 15:Va(4,ee,ee.return);break;case 1:Co(ee,ee.return);var we=ee.stateNode;if(typeof we.componentWillUnmount=="function"){c=ee,a=ee.return;try{s=c,we.props=s.memoizedProps,we.state=s.memoizedState,we.componentWillUnmount()}catch(Ee){vt(c,a,Ee)}}break;case 5:Co(ee,ee.return);break;case 22:if(ee.memoizedState!==null){ig(ie);continue}}pe!==null?(pe.return=ee,ye=pe):ig(ie)}te=te.sibling}e:for(te=null,ie=n;;){if(ie.tag===5){if(te===null){te=ie;try{f=ie.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=ie.stateNode,N=ie.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,C.style.display=es("display",w))}catch(Ee){vt(n,n.return,Ee)}}}else if(ie.tag===6){if(te===null)try{ie.stateNode.nodeValue=$?"":ie.memoizedProps}catch(Ee){vt(n,n.return,Ee)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===n)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===n)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===n)break e;te===ie&&(te=null),ie=ie.return}te===ie&&(te=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:ir(s,n),wr(n),c&4&&eg(n);break;case 21:break;default:ir(s,n),wr(n)}}function wr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Jm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(ur(f,""),c.flags&=-33);var g=Xm(n);rh(n,g,f);break;case 3:case 4:var w=c.stateNode.containerInfo,C=Xm(n);nh(n,C,w);break;default:throw Error(t(161))}}catch(N){vt(n,n.return,N)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function qw(n,s,a){ye=n,ng(n)}function ng(n,s,a){for(var c=(n.mode&1)!==0;ye!==null;){var f=ye,g=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Tu;if(!w){var C=f.alternate,N=C!==null&&C.memoizedState!==null||Jt;C=Tu;var $=Jt;if(Tu=w,(Jt=N)&&!$)for(ye=f;ye!==null;)w=ye,N=w.child,w.tag===22&&w.memoizedState!==null?sg(f):N!==null?(N.return=w,ye=N):sg(f);for(;g!==null;)ye=g,ng(g),g=g.sibling;ye=f,Tu=C,Jt=$}rg(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ye=g):rg(n)}}function rg(n){for(;ye!==null;){var s=ye;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Jt||xu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Jt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:nr(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&im(s,g,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}im(s,w,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var te=$.memoizedState;if(te!==null){var ie=te.dehydrated;ie!==null&&Xn(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||s.flags&512&&th(s)}catch(ee){vt(s,s.return,ee)}}if(s===n){ye=null;break}if(a=s.sibling,a!==null){a.return=s.return,ye=a;break}ye=s.return}}function ig(n){for(;ye!==null;){var s=ye;if(s===n){ye=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ye=a;break}ye=s.return}}function sg(n){for(;ye!==null;){var s=ye;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{xu(4,s)}catch(N){vt(s,a,N)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(N){vt(s,f,N)}}var g=s.return;try{th(s)}catch(N){vt(s,g,N)}break;case 5:var w=s.return;try{th(s)}catch(N){vt(s,w,N)}}}catch(N){vt(s,s.return,N)}if(s===n){ye=null;break}var C=s.sibling;if(C!==null){C.return=s.return,ye=C;break}ye=s.return}}var Gw=Math.ceil,Iu=he.ReactCurrentDispatcher,ih=he.ReactCurrentOwner,Mn=he.ReactCurrentBatchConfig,Qe=0,Lt=null,St=null,$t=0,Rn=0,Po=gi(0),Nt=0,Oa=null,Is=0,Su=0,sh=0,La=null,fn=null,oh=0,Ro=1/0,qr=null,Cu=!1,ah=null,Ti=null,Pu=!1,xi=null,Ru=0,Ma=0,lh=null,Au=-1,ku=0;function on(){return(Qe&6)!==0?ot():Au!==-1?Au:Au=ot()}function Ii(n){return(n.mode&1)===0?1:(Qe&2)!==0&&$t!==0?$t&-$t:kw.transition!==null?(ku===0&&(ku=hs()),ku):(n=He,n!==0||(n=window.event,n=n===void 0?16:ha(n.type)),n)}function sr(n,s,a,c){if(50<Ma)throw Ma=0,lh=null,Error(t(185));li(n,a,c),((Qe&2)===0||n!==Lt)&&(n===Lt&&((Qe&2)===0&&(Su|=a),Nt===4&&Si(n,$t)),pn(n,c),a===1&&Qe===0&&(s.mode&1)===0&&(Ro=ot()+500,iu&&vi()))}function pn(n,s){var a=n.callbackNode;Dr(n,s);var c=ds(n,n===Lt?$t:0);if(c===0)a!==null&&aa(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&aa(a),s===1)n.tag===0?Aw(ag.bind(null,n)):qp(ag.bind(null,n)),Sw(function(){(Qe&6)===0&&vi()}),a=null;else{switch(ci(c)){case 1:a=us;break;case 4:a=si;break;case 16:a=Nn;break;case 536870912:a=kl;break;default:a=Nn}a=mg(a,og.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function og(n,s){if(Au=-1,ku=0,(Qe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Ao()&&n.callbackNode!==a)return null;var c=ds(n,n===Lt?$t:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Nu(n,c);else{s=c;var f=Qe;Qe|=2;var g=ug();(Lt!==n||$t!==s)&&(qr=null,Ro=ot()+500,Cs(n,s));do try{Yw();break}catch(C){lg(n,C)}while(!0);Cd(),Iu.current=g,Qe=f,St!==null?s=0:(Lt=null,$t=0,s=Nt)}if(s!==0){if(s===2&&(f=xn(n),f!==0&&(c=f,s=uh(n,f))),s===1)throw a=Oa,Cs(n,0),Si(n,c),pn(n,ot()),a;if(s===6)Si(n,c);else{if(f=n.current.alternate,(c&30)===0&&!Kw(f)&&(s=Nu(n,c),s===2&&(g=xn(n),g!==0&&(c=g,s=uh(n,g))),s===1))throw a=Oa,Cs(n,0),Si(n,c),pn(n,ot()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Ps(n,fn,qr);break;case 3:if(Si(n,c),(c&130023424)===c&&(s=oh+500-ot(),10<s)){if(ds(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){on(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=md(Ps.bind(null,n,fn,qr),s);break}Ps(n,fn,qr);break;case 4:if(Si(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var w=31-nn(c);g=1<<w,w=s[w],w>f&&(f=w),c&=~g}if(c=f,c=ot()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Gw(c/1960))-c,10<c){n.timeoutHandle=md(Ps.bind(null,n,fn,qr),c);break}Ps(n,fn,qr);break;case 5:Ps(n,fn,qr);break;default:throw Error(t(329))}}}return pn(n,ot()),n.callbackNode===a?og.bind(null,n):null}function uh(n,s){var a=La;return n.current.memoizedState.isDehydrated&&(Cs(n,s).flags|=256),n=Nu(n,s),n!==2&&(s=fn,fn=a,s!==null&&ch(s)),n}function ch(n){fn===null?fn=n:fn.push.apply(fn,n)}function Kw(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!er(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Si(n,s){for(s&=~sh,s&=~Su,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-nn(s),c=1<<a;n[a]=-1,s&=~c}}function ag(n){if((Qe&6)!==0)throw Error(t(327));Ao();var s=ds(n,0);if((s&1)===0)return pn(n,ot()),null;var a=Nu(n,s);if(n.tag!==0&&a===2){var c=xn(n);c!==0&&(s=c,a=uh(n,c))}if(a===1)throw a=Oa,Cs(n,0),Si(n,s),pn(n,ot()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Ps(n,fn,qr),pn(n,ot()),null}function dh(n,s){var a=Qe;Qe|=1;try{return n(s)}finally{Qe=a,Qe===0&&(Ro=ot()+500,iu&&vi())}}function Ss(n){xi!==null&&xi.tag===0&&(Qe&6)===0&&Ao();var s=Qe;Qe|=1;var a=Mn.transition,c=He;try{if(Mn.transition=null,He=1,n)return n()}finally{He=c,Mn.transition=a,Qe=s,(Qe&6)===0&&vi()}}function hh(){Rn=Po.current,ct(Po)}function Cs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Iw(a)),St!==null)for(a=St.return;a!==null;){var c=a;switch(Ed(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&nu();break;case 3:Io(),ct(cn),ct(Kt),Dd();break;case 5:bd(c);break;case 4:Io();break;case 13:ct(mt);break;case 19:ct(mt);break;case 10:Pd(c.type._context);break;case 22:case 23:hh()}a=a.return}if(Lt=n,St=n=Ci(n.current,null),$t=Rn=s,Nt=0,Oa=null,sh=Su=Is=0,fn=La=null,Es!==null){for(s=0;s<Es.length;s++)if(a=Es[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,c.next=w}a.pending=c}Es=null}return n}function lg(n,s){do{var a=St;try{if(Cd(),pu.current=vu,mu){for(var c=gt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}mu=!1}if(xs=0,Ot=kt=gt=null,ka=!1,Na=0,ih.current=null,a===null||a.return===null){Nt=1,Oa=s,St=null;break}e:{var g=n,w=a.return,C=a,N=s;if(s=$t,C.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=N,te=C,ie=te.tag;if((te.mode&1)===0&&(ie===0||ie===11||ie===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var pe=jm(w);if(pe!==null){pe.flags&=-257,Dm(pe,w,C,g,s),pe.mode&1&&bm(g,$,s),s=pe,N=$;var we=s.updateQueue;if(we===null){var Ee=new Set;Ee.add(N),s.updateQueue=Ee}else we.add(N);break e}else{if((s&1)===0){bm(g,$,s),fh();break e}N=Error(t(426))}}else if(pt&&C.mode&1){var wt=jm(w);if(wt!==null){(wt.flags&65536)===0&&(wt.flags|=256),Dm(wt,w,C,g,s),Id(So(N,C));break e}}g=N=So(N,C),Nt!==4&&(Nt=2),La===null?La=[g]:La.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var F=km(g,N,s);rm(g,F);break e;case 1:C=N;var j=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Ti===null||!Ti.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var oe=Nm(g,C,s);rm(g,oe);break e}}g=g.return}while(g!==null)}dg(a)}catch(xe){s=xe,St===a&&a!==null&&(St=a=a.return);continue}break}while(!0)}function ug(){var n=Iu.current;return Iu.current=vu,n===null?vu:n}function fh(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Lt===null||(Is&268435455)===0&&(Su&268435455)===0||Si(Lt,$t)}function Nu(n,s){var a=Qe;Qe|=2;var c=ug();(Lt!==n||$t!==s)&&(qr=null,Cs(n,s));do try{Qw();break}catch(f){lg(n,f)}while(!0);if(Cd(),Qe=a,Iu.current=c,St!==null)throw Error(t(261));return Lt=null,$t=0,Nt}function Qw(){for(;St!==null;)cg(St)}function Yw(){for(;St!==null&&!Rl();)cg(St)}function cg(n){var s=pg(n.alternate,n,Rn);n.memoizedProps=n.pendingProps,s===null?dg(n):St=s,ih.current=null}function dg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Bw(a,s,Rn),a!==null){St=a;return}}else{if(a=$w(a,s),a!==null){a.flags&=32767,St=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Nt=6,St=null;return}}if(s=s.sibling,s!==null){St=s;return}St=s=n}while(s!==null);Nt===0&&(Nt=5)}function Ps(n,s,a){var c=He,f=Mn.transition;try{Mn.transition=null,He=1,Jw(n,s,a,c)}finally{Mn.transition=f,He=c}return null}function Jw(n,s,a,c){do Ao();while(xi!==null);if((Qe&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(it(n,g),n===Lt&&(St=Lt=null,$t=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Pu||(Pu=!0,mg(Nn,function(){return Ao(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Mn.transition,Mn.transition=null;var w=He;He=1;var C=Qe;Qe|=4,ih.current=null,Hw(n,a),tg(a,n),yw(fd),hi=!!hd,fd=hd=null,n.current=a,qw(a),Yc(),Qe=C,He=w,Mn.transition=g}else n.current=a;if(Pu&&(Pu=!1,xi=n,Ru=f),g=n.pendingLanes,g===0&&(Ti=null),Nl(a.stateNode),pn(n,ot()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Cu)throw Cu=!1,n=ah,ah=null,n;return(Ru&1)!==0&&n.tag!==0&&Ao(),g=n.pendingLanes,(g&1)!==0?n===lh?Ma++:(Ma=0,lh=n):Ma=0,vi(),null}function Ao(){if(xi!==null){var n=ci(Ru),s=Mn.transition,a=He;try{if(Mn.transition=null,He=16>n?16:n,xi===null)var c=!1;else{if(n=xi,xi=null,Ru=0,(Qe&6)!==0)throw Error(t(331));var f=Qe;for(Qe|=4,ye=n.current;ye!==null;){var g=ye,w=g.child;if((ye.flags&16)!==0){var C=g.deletions;if(C!==null){for(var N=0;N<C.length;N++){var $=C[N];for(ye=$;ye!==null;){var te=ye;switch(te.tag){case 0:case 11:case 15:Va(8,te,g)}var ie=te.child;if(ie!==null)ie.return=te,ye=ie;else for(;ye!==null;){te=ye;var ee=te.sibling,pe=te.return;if(Ym(te),te===$){ye=null;break}if(ee!==null){ee.return=pe,ye=ee;break}ye=pe}}}var we=g.alternate;if(we!==null){var Ee=we.child;if(Ee!==null){we.child=null;do{var wt=Ee.sibling;Ee.sibling=null,Ee=wt}while(Ee!==null)}}ye=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,ye=w;else e:for(;ye!==null;){if(g=ye,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Va(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,ye=F;break e}ye=g.return}}var j=n.current;for(ye=j;ye!==null;){w=ye;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,ye=z;else e:for(w=j;ye!==null;){if(C=ye,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:xu(9,C)}}catch(xe){vt(C,C.return,xe)}if(C===w){ye=null;break e}var oe=C.sibling;if(oe!==null){oe.return=C.return,ye=oe;break e}ye=C.return}}if(Qe=f,vi(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(cs,n)}catch{}c=!0}return c}finally{He=a,Mn.transition=s}}return!1}function hg(n,s,a){s=So(a,s),s=km(n,s,1),n=wi(n,s,1),s=on(),n!==null&&(li(n,1,s),pn(n,s))}function vt(n,s,a){if(n.tag===3)hg(n,n,a);else for(;s!==null;){if(s.tag===3){hg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ti===null||!Ti.has(c))){n=So(a,n),n=Nm(s,n,1),s=wi(s,n,1),n=on(),s!==null&&(li(s,1,n),pn(s,n));break}}s=s.return}}function Xw(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=on(),n.pingedLanes|=n.suspendedLanes&a,Lt===n&&($t&a)===a&&(Nt===4||Nt===3&&($t&130023424)===$t&&500>ot()-oh?Cs(n,0):sh|=a),pn(n,s)}function fg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Js,Js<<=1,(Js&130023424)===0&&(Js=4194304)));var a=on();n=$r(n,s),n!==null&&(li(n,s,a),pn(n,a))}function Zw(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),fg(n,a)}function eE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),fg(n,a)}var pg;pg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||cn.current)hn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return hn=!1,zw(n,s,a);hn=(n.flags&131072)!==0}else hn=!1,pt&&(s.flags&1048576)!==0&&Gp(s,ou,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Eu(n,s),n=s.pendingProps;var f=yo(s,Kt.current);xo(s,a),f=Ld(null,s,c,n,f,a);var g=Md();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,dn(c)?(g=!0,ru(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,kd(s),f.updater=_u,s.stateNode=f,f._reactInternals=s,Wd(s,c,n,a),s=Kd(null,s,c,!0,g,a)):(s.tag=0,pt&&g&&wd(s),sn(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Eu(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=nE(c),n=nr(c,n),f){case 0:s=Gd(null,s,c,n,a);break e;case 1:s=Um(null,s,c,n,a);break e;case 11:s=Vm(null,s,c,n,a);break e;case 14:s=Om(null,s,c,nr(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:nr(c,f),Gd(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:nr(c,f),Um(n,s,c,f,a);case 3:e:{if(zm(s),n===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,nm(n,s),hu(s,c,null,a);var w=s.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=So(Error(t(423)),s),s=Bm(n,s,c,a,f);break e}else if(c!==f){f=So(Error(t(424)),s),s=Bm(n,s,c,a,f);break e}else for(Pn=mi(s.stateNode.containerInfo.firstChild),Cn=s,pt=!0,tr=null,a=em(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(wo(),c===f){s=Hr(n,s,a);break e}sn(n,s,c,a)}s=s.child}return s;case 5:return sm(s),n===null&&xd(s),c=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,w=f.children,pd(c,f)?w=null:g!==null&&pd(c,g)&&(s.flags|=32),Fm(n,s),sn(n,s,w,a),s.child;case 6:return n===null&&xd(s),null;case 13:return $m(n,s,a);case 4:return Nd(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Eo(s,null,c,a):sn(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:nr(c,f),Vm(n,s,c,f,a);case 7:return sn(n,s,s.pendingProps,a),s.child;case 8:return sn(n,s,s.pendingProps.children,a),s.child;case 12:return sn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,at(uu,c._currentValue),c._currentValue=w,g!==null)if(er(g.value,w)){if(g.children===f.children&&!cn.current){s=Hr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){w=g.child;for(var N=C.firstContext;N!==null;){if(N.context===c){if(g.tag===1){N=Wr(-1,a&-a),N.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var te=$.pending;te===null?N.next=N:(N.next=te.next,te.next=N),$.pending=N}}g.lanes|=a,N=g.alternate,N!==null&&(N.lanes|=a),Rd(g.return,a,s),C.lanes|=a;break}N=N.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),Rd(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}sn(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,xo(s,a),f=On(f),c=c(f),s.flags|=1,sn(n,s,c,a),s.child;case 14:return c=s.type,f=nr(c,s.pendingProps),f=nr(c.type,f),Om(n,s,c,f,a);case 15:return Lm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:nr(c,f),Eu(n,s),s.tag=1,dn(c)?(n=!0,ru(s)):n=!1,xo(s,a),Rm(s,c,f),Wd(s,c,f,a),Kd(null,s,c,!0,n,a);case 19:return Hm(n,s,a);case 22:return Mm(n,s,a)}throw Error(t(156,s.tag))};function mg(n,s){return Qs(n,s)}function tE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(n,s,a,c){return new tE(n,s,a,c)}function ph(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nE(n){if(typeof n=="function")return ph(n)?1:0;if(n!=null){if(n=n.$$typeof,n===L)return 11;if(n===lt)return 14}return 2}function Ci(n,s){var a=n.alternate;return a===null?(a=Fn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function bu(n,s,a,c,f,g){var w=2;if(c=n,typeof n=="function")ph(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case k:return Rs(a.children,f,g,s);case I:w=8,f|=8;break;case A:return n=Fn(12,a,s,f|2),n.elementType=A,n.lanes=g,n;case R:return n=Fn(13,a,s,f),n.elementType=R,n.lanes=g,n;case st:return n=Fn(19,a,s,f),n.elementType=st,n.lanes=g,n;case Ye:return ju(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:w=10;break e;case D:w=9;break e;case L:w=11;break e;case lt:w=14;break e;case xt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Fn(w,a,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function Rs(n,s,a,c){return n=Fn(7,n,c,s),n.lanes=a,n}function ju(n,s,a,c){return n=Fn(22,n,c,s),n.elementType=Ye,n.lanes=a,n.stateNode={isHidden:!1},n}function mh(n,s,a){return n=Fn(6,n,null,s),n.lanes=a,n}function gh(n,s,a){return s=Fn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function rE(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ai(0),this.expirationTimes=ai(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ai(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function yh(n,s,a,c,f,g,w,C,N){return n=new rE(n,s,a,C,N),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Fn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},kd(g),n}function iE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function gg(n){if(!n)return yi;n=n._reactInternals;e:{if(Gn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(dn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(dn(a))return Wp(n,a,s)}return s}function yg(n,s,a,c,f,g,w,C,N){return n=yh(a,c,!0,n,f,g,w,C,N),n.context=gg(null),a=n.current,c=on(),f=Ii(a),g=Wr(c,f),g.callback=s??null,wi(a,g,f),n.current.lanes=f,li(n,f,c),pn(n,c),n}function Du(n,s,a,c){var f=s.current,g=on(),w=Ii(f);return a=gg(a),s.context===null?s.context=a:s.pendingContext=a,s=Wr(g,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=wi(f,s,w),n!==null&&(sr(n,f,w,g),du(n,f,w)),w}function Vu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function vg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function vh(n,s){vg(n,s),(n=n.alternate)&&vg(n,s)}function sE(){return null}var _g=typeof reportError=="function"?reportError:function(n){console.error(n)};function _h(n){this._internalRoot=n}Ou.prototype.render=_h.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Du(n,s,null,null)},Ou.prototype.unmount=_h.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ss(function(){Du(null,n,null,null)}),s[Fr]=null}};function Ou(n){this._internalRoot=n}Ou.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ol();n={blockedOn:null,target:n,priority:s};for(var a=0;a<fr.length&&s!==0&&s<fr[a].priority;a++);fr.splice(a,0,n),a===0&&Fl(n)}};function wh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Lu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function wg(){}function oE(n,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var $=Vu(w);g.call($)}}var w=yg(s,c,n,0,null,!1,!1,"",wg);return n._reactRootContainer=w,n[Fr]=w.current,Ta(n.nodeType===8?n.parentNode:n),Ss(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var C=c;c=function(){var $=Vu(N);C.call($)}}var N=yh(n,0,!1,null,null,!1,!1,"",wg);return n._reactRootContainer=N,n[Fr]=N.current,Ta(n.nodeType===8?n.parentNode:n),Ss(function(){Du(s,N,a,c)}),N}function Mu(n,s,a,c,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var C=f;f=function(){var N=Vu(w);C.call(N)}}Du(s,w,n,f)}else w=oE(a,s,n,f,c);return Vu(w)}Dl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=oi(s.pendingLanes);a!==0&&(ui(s,a|1),pn(s,ot()),(Qe&6)===0&&(Ro=ot()+500,vi()))}break;case 13:Ss(function(){var c=$r(n,1);if(c!==null){var f=on();sr(c,n,1,f)}}),vh(n,1)}},Xs=function(n){if(n.tag===13){var s=$r(n,134217728);if(s!==null){var a=on();sr(s,n,134217728,a)}vh(n,134217728)}},Vl=function(n){if(n.tag===13){var s=Ii(n),a=$r(n,s);if(a!==null){var c=on();sr(a,n,s,c)}vh(n,s)}},Ol=function(){return He},Ll=function(n,s){var a=He;try{return He=n,s()}finally{He=a}},ii=function(n,s,a){switch(s){case"input":if(se(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=tu(c);if(!f)throw Error(t(90));$n(c),se(c,f)}}}break;case"textarea":qe(n,a);break;case"select":s=a.value,s!=null&&de(n,!!a.multiple,s,!1)}},ss=dh,ra=Ss;var aE={usingClientEntryPoint:!1,Events:[Sa,mo,tu,dr,na,dh]},Fa={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lE={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:he.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=oa(n),n===null?null:n.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||sE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{cs=Fu.inject(lE),Tn=Fu}catch{}}return mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aE,mn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wh(s))throw Error(t(200));return iE(n,s,null,a)},mn.createRoot=function(n,s){if(!wh(n))throw Error(t(299));var a=!1,c="",f=_g;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=yh(n,1,!1,null,null,a,!1,c,f),n[Fr]=s.current,Ta(n.nodeType===8?n.parentNode:n),new _h(s)},mn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=oa(s),n=n===null?null:n.stateNode,n},mn.flushSync=function(n){return Ss(n)},mn.hydrate=function(n,s,a){if(!Lu(s))throw Error(t(200));return Mu(null,n,s,!0,a)},mn.hydrateRoot=function(n,s,a){if(!wh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",w=_g;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=yg(s,null,n,1,a??null,f,!1,g,w),n[Fr]=s.current,Ta(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Ou(s)},mn.render=function(n,s,a){if(!Lu(s))throw Error(t(200));return Mu(null,n,s,!1,a)},mn.unmountComponentAtNode=function(n){if(!Lu(n))throw Error(t(40));return n._reactRootContainer?(Ss(function(){Mu(null,null,n,!1,function(){n._reactRootContainer=null,n[Fr]=null})}),!0):!1},mn.unstable_batchedUpdates=dh,mn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Lu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Mu(n,s,a,!1,c)},mn.version="18.3.1-next-f1338f8080-20240426",mn}var Rg;function vv(){if(Rg)return xh.exports;Rg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),xh.exports=yE(),xh.exports}var Ag;function vE(){if(Ag)return Uu;Ag=1;var r=vv();return Uu.createRoot=r.createRoot,Uu.hydrateRoot=r.hydrateRoot,Uu}var _E=vE();const wE=gv(_E);vv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},nl.apply(this,arguments)}var bi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(bi||(bi={}));const kg="popstate";function EE(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:d,hash:p}=i.location;return zh("",{pathname:l,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:sc(o)}return xE(e,t,null,r)}function Rt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function vf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TE(){return Math.random().toString(36).substr(2,8)}function Ng(r,e){return{usr:r.state,key:r.key,idx:e}}function zh(r,e,t,i){return t===void 0&&(t=null),nl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Go(e):e,{state:t,key:e&&e.key||i||TE()})}function sc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Go(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function xE(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,p=bi.Pop,y=null,v=E();v==null&&(v=0,d.replaceState(nl({},d.state,{idx:v}),""));function E(){return(d.state||{idx:null}).idx}function x(){p=bi.Pop;let U=E(),H=U==null?null:U-v;v=U,y&&y({action:p,location:q.location,delta:H})}function S(U,H){p=bi.Push;let X=zh(q.location,U,H);v=E()+1;let ne=Ng(X,v),he=q.createHref(X);try{d.pushState(ne,"",he)}catch(Pe){if(Pe instanceof DOMException&&Pe.name==="DataCloneError")throw Pe;o.location.assign(he)}l&&y&&y({action:p,location:q.location,delta:1})}function O(U,H){p=bi.Replace;let X=zh(q.location,U,H);v=E();let ne=Ng(X,v),he=q.createHref(X);d.replaceState(ne,"",he),l&&y&&y({action:p,location:q.location,delta:0})}function B(U){let H=o.location.origin!=="null"?o.location.origin:o.location.href,X=typeof U=="string"?U:sc(U);return X=X.replace(/ $/,"%20"),Rt(H,"No window.location.(origin|href) available to create URL for href: "+X),new URL(X,H)}let q={get action(){return p},get location(){return r(o,d)},listen(U){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(kg,x),y=U,()=>{o.removeEventListener(kg,x),y=null}},createHref(U){return e(o,U)},createURL:B,encodeLocation(U){let H=B(U);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:S,replace:O,go(U){return d.go(U)}};return q}var bg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(bg||(bg={}));function IE(r,e,t){return t===void 0&&(t="/"),SE(r,e,t)}function SE(r,e,t,i){let o=typeof e=="string"?Go(e):e,l=_f(o.pathname||"/",t);if(l==null)return null;let d=_v(r);CE(d);let p=null;for(let y=0;p==null&&y<d.length;++y){let v=ME(l);p=VE(d[y],v)}return p}function _v(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,d,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};y.relativePath.startsWith("/")&&(Rt(y.relativePath.startsWith(i),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(i.length));let v=Di([i,y.relativePath]),E=t.concat(y);l.children&&l.children.length>0&&(Rt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),_v(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:jE(v,l.index),routesMeta:E})};return r.forEach((l,d)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,d);else for(let y of wv(l.path))o(l,d,y)}),e}function wv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=wv(i.join("/")),p=[];return p.push(...d.map(y=>y===""?l:[l,y].join("/"))),o&&p.push(...d),p.map(y=>r.startsWith("/")&&y===""?"/":y)}function CE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:DE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const PE=/^:[\w-]+$/,RE=3,AE=2,kE=1,NE=10,bE=-2,jg=r=>r==="*";function jE(r,e){let t=r.split("/"),i=t.length;return t.some(jg)&&(i+=bE),e&&(i+=AE),t.filter(o=>!jg(o)).reduce((o,l)=>o+(PE.test(l)?RE:l===""?kE:NE),i)}function DE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function VE(r,e,t){let{routesMeta:i}=r,o={},l="/",d=[];for(let p=0;p<i.length;++p){let y=i[p],v=p===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",x=OE({path:y.relativePath,caseSensitive:y.caseSensitive,end:v},E),S=y.route;if(!x)return null;Object.assign(o,x.params),d.push({params:o,pathname:Di([l,x.pathname]),pathnameBase:$E(Di([l,x.pathnameBase])),route:S}),x.pathnameBase!=="/"&&(l=Di([l,x.pathnameBase]))}return d}function OE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=LE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((v,E,x)=>{let{paramName:S,isOptional:O}=E;if(S==="*"){let q=p[x]||"";d=l.slice(0,l.length-q.length).replace(/(.)\/+$/,"$1")}const B=p[x];return O&&!B?v[S]=void 0:v[S]=(B||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function LE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),vf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,y)=>(i.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function ME(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function _f(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const FE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UE=r=>FE.test(r);function zE(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?Go(r):r,l;if(t)if(UE(t))l=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),vf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+t))}t.startsWith("/")?l=Dg(t.substring(1),"/"):l=Dg(t,e)}else l=e;return{pathname:l,search:WE(i),hash:HE(o)}}function Dg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Ch(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ev(r,e){let t=BE(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Tv(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=Go(r):(o=nl({},r),Rt(!o.pathname||!o.pathname.includes("?"),Ch("?","pathname","search",o)),Rt(!o.pathname||!o.pathname.includes("#"),Ch("#","pathname","hash",o)),Rt(!o.search||!o.search.includes("#"),Ch("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,p;if(d==null)p=t;else{let x=e.length-1;if(!i&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),x-=1;o.pathname=S.join("/")}p=x>=0?e[x]:"/"}let y=zE(o,p),v=d&&d!=="/"&&d.endsWith("/"),E=(l||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(v||E)&&(y.pathname+="/"),y}const Di=r=>r.join("/").replace(/\/\/+/g,"/"),$E=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),WE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,HE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function qE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const xv=["post","put","patch","delete"];new Set(xv);const GE=["get",...xv];new Set(GE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},rl.apply(this,arguments)}const wf=K.createContext(null),KE=K.createContext(null),zs=K.createContext(null),Cc=K.createContext(null),Bs=K.createContext({outlet:null,matches:[],isDataRoute:!1}),Iv=K.createContext(null);function QE(r,e){let{relative:t}=e===void 0?{}:e;fl()||Rt(!1);let{basename:i,navigator:o}=K.useContext(zs),{hash:l,pathname:d,search:p}=Cv(r,{relative:t}),y=d;return i!=="/"&&(y=d==="/"?i:Di([i,d])),o.createHref({pathname:y,search:p,hash:l})}function fl(){return K.useContext(Cc)!=null}function Pc(){return fl()||Rt(!1),K.useContext(Cc).location}function Sv(r){K.useContext(zs).static||K.useLayoutEffect(r)}function Ef(){let{isDataRoute:r}=K.useContext(Bs);return r?lT():YE()}function YE(){fl()||Rt(!1);let r=K.useContext(wf),{basename:e,future:t,navigator:i}=K.useContext(zs),{matches:o}=K.useContext(Bs),{pathname:l}=Pc(),d=JSON.stringify(Ev(o,t.v7_relativeSplatPath)),p=K.useRef(!1);return Sv(()=>{p.current=!0}),K.useCallback(function(v,E){if(E===void 0&&(E={}),!p.current)return;if(typeof v=="number"){i.go(v);return}let x=Tv(v,JSON.parse(d),l,E.relative==="path");r==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Di([e,x.pathname])),(E.replace?i.replace:i.push)(x,E.state,E)},[e,i,d,l,r])}function Cv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=K.useContext(zs),{matches:o}=K.useContext(Bs),{pathname:l}=Pc(),d=JSON.stringify(Ev(o,i.v7_relativeSplatPath));return K.useMemo(()=>Tv(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function JE(r,e){return XE(r,e)}function XE(r,e,t,i){fl()||Rt(!1);let{navigator:o}=K.useContext(zs),{matches:l}=K.useContext(Bs),d=l[l.length-1],p=d?d.params:{};d&&d.pathname;let y=d?d.pathnameBase:"/";d&&d.route;let v=Pc(),E;if(e){var x;let U=typeof e=="string"?Go(e):e;y==="/"||(x=U.pathname)!=null&&x.startsWith(y)||Rt(!1),E=U}else E=v;let S=E.pathname||"/",O=S;if(y!=="/"){let U=y.replace(/^\//,"").split("/");O="/"+S.replace(/^\//,"").split("/").slice(U.length).join("/")}let B=IE(r,{pathname:O}),q=rT(B&&B.map(U=>Object.assign({},U,{params:Object.assign({},p,U.params),pathname:Di([y,o.encodeLocation?o.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?y:Di([y,o.encodeLocation?o.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),l,t,i);return e&&q?K.createElement(Cc.Provider,{value:{location:rl({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:bi.Pop}},q):q}function ZE(){let r=aT(),e=qE(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:o},t):null,null)}const eT=K.createElement(ZE,null);class tT extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?K.createElement(Bs.Provider,{value:this.props.routeContext},K.createElement(Iv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nT(r){let{routeContext:e,match:t,children:i}=r,o=K.useContext(wf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(Bs.Provider,{value:e},i)}function rT(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let E=d.findIndex(x=>x.route.id&&(p==null?void 0:p[x.route.id])!==void 0);E>=0||Rt(!1),d=d.slice(0,Math.min(d.length,E+1))}let y=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<d.length;E++){let x=d[E];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(v=E),x.route.id){let{loaderData:S,errors:O}=t,B=x.route.loader&&S[x.route.id]===void 0&&(!O||O[x.route.id]===void 0);if(x.route.lazy||B){y=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((E,x,S)=>{let O,B=!1,q=null,U=null;t&&(O=p&&x.route.id?p[x.route.id]:void 0,q=x.route.errorElement||eT,y&&(v<0&&S===0?(uT("route-fallback"),B=!0,U=null):v===S&&(B=!0,U=x.route.hydrateFallbackElement||null)));let H=e.concat(d.slice(0,S+1)),X=()=>{let ne;return O?ne=q:B?ne=U:x.route.Component?ne=K.createElement(x.route.Component,null):x.route.element?ne=x.route.element:ne=E,K.createElement(nT,{match:x,routeContext:{outlet:E,matches:H,isDataRoute:t!=null},children:ne})};return t&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?K.createElement(tT,{location:t.location,revalidation:t.revalidation,component:q,error:O,children:X(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):X()},null)}var Pv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Pv||{}),Rv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Rv||{});function iT(r){let e=K.useContext(wf);return e||Rt(!1),e}function sT(r){let e=K.useContext(KE);return e||Rt(!1),e}function oT(r){let e=K.useContext(Bs);return e||Rt(!1),e}function Av(r){let e=oT(),t=e.matches[e.matches.length-1];return t.route.id||Rt(!1),t.route.id}function aT(){var r;let e=K.useContext(Iv),t=sT(),i=Av();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function lT(){let{router:r}=iT(Pv.UseNavigateStable),e=Av(Rv.UseNavigateStable),t=K.useRef(!1);return Sv(()=>{t.current=!0}),K.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,rl({fromRouteId:e},l)))},[r,e])}const Vg={};function uT(r,e,t){Vg[r]||(Vg[r]=!0)}function cT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function As(r){Rt(!1)}function dT(r){let{basename:e="/",children:t=null,location:i,navigationType:o=bi.Pop,navigator:l,static:d=!1,future:p}=r;fl()&&Rt(!1);let y=e.replace(/^\/*/,"/"),v=K.useMemo(()=>({basename:y,navigator:l,static:d,future:rl({v7_relativeSplatPath:!1},p)}),[y,p,l,d]);typeof i=="string"&&(i=Go(i));let{pathname:E="/",search:x="",hash:S="",state:O=null,key:B="default"}=i,q=K.useMemo(()=>{let U=_f(E,y);return U==null?null:{location:{pathname:U,search:x,hash:S,state:O,key:B},navigationType:o}},[y,E,x,S,O,B,o]);return q==null?null:K.createElement(zs.Provider,{value:v},K.createElement(Cc.Provider,{children:t,value:q}))}function hT(r){let{children:e,location:t}=r;return JE(Bh(e),t)}new Promise(()=>{});function Bh(r,e){e===void 0&&(e=[]);let t=[];return K.Children.forEach(r,(i,o)=>{if(!K.isValidElement(i))return;let l=[...e,o];if(i.type===K.Fragment){t.push.apply(t,Bh(i.props.children,l));return}i.type!==As&&Rt(!1),!i.props.index||!i.props.children||Rt(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Bh(i.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $h(){return $h=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},$h.apply(this,arguments)}function fT(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function pT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function mT(r,e){return r.button===0&&(!e||e==="_self")&&!pT(r)}const gT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yT="6";try{window.__reactRouterVersion=yT}catch{}const vT="startTransition",Og=pE[vT];function _T(r){let{basename:e,children:t,future:i,window:o}=r,l=K.useRef();l.current==null&&(l.current=EE({window:o,v5Compat:!0}));let d=l.current,[p,y]=K.useState({action:d.action,location:d.location}),{v7_startTransition:v}=i||{},E=K.useCallback(x=>{v&&Og?Og(()=>y(x)):y(x)},[y,v]);return K.useLayoutEffect(()=>d.listen(E),[d,E]),K.useEffect(()=>cT(i),[i]),K.createElement(dT,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:d,future:i})}const wT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ET=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,za=K.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:p,target:y,to:v,preventScrollReset:E,viewTransition:x}=e,S=fT(e,gT),{basename:O}=K.useContext(zs),B,q=!1;if(typeof v=="string"&&ET.test(v)&&(B=v,wT))try{let ne=new URL(window.location.href),he=v.startsWith("//")?new URL(ne.protocol+v):new URL(v),Pe=_f(he.pathname,O);he.origin===ne.origin&&Pe!=null?v=Pe+he.search+he.hash:q=!0}catch{}let U=QE(v,{relative:o}),H=TT(v,{replace:d,state:p,target:y,preventScrollReset:E,relative:o,viewTransition:x});function X(ne){i&&i(ne),ne.defaultPrevented||H(ne)}return K.createElement("a",$h({},S,{href:B||U,onClick:q||l?i:X,ref:t,target:y}))});var Lg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Lg||(Lg={}));var Mg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Mg||(Mg={}));function TT(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:p}=e===void 0?{}:e,y=Ef(),v=Pc(),E=Cv(r,{relative:d});return K.useCallback(x=>{if(mT(x,t)){x.preventDefault();let S=i!==void 0?i:sc(v)===sc(E);y(r,{replace:S,state:o,preventScrollReset:l,relative:d,viewTransition:p})}},[v,y,E,i,o,t,r,l,d,p])}const xT=()=>{};var Fg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},IT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],p=r[t++],y=((o&7)<<18|(l&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Nv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,p=d?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,E=l>>2,x=(l&3)<<4|p>>4;let S=(p&15)<<2|v>>6,O=v&63;y||(O=64,d||(S=64)),i.push(t[E],t[x],t[S],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(kv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):IT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const x=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||x==null)throw new ST;const S=l<<2|p>>4;if(i.push(S),v!==64){const O=p<<4&240|v>>2;if(i.push(O),x!==64){const B=v<<6&192|x;i.push(B)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ST extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CT=function(r){const e=kv(r);return Nv.encodeByteArray(e,!0)},oc=function(r){return CT(r).replace(/\./g,"")},bv=function(r){try{return Nv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=()=>PT().__FIREBASE_DEFAULTS__,AT=()=>{if(typeof process>"u"||typeof Fg>"u")return;const r=Fg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},kT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&bv(r[1]);return e&&JSON.parse(e)},Rc=()=>{try{return xT()||RT()||AT()||kT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},jv=r=>{var e,t;return(t=(e=Rc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},NT=r=>{const e=jv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Dv=()=>{var r;return(r=Rc())===null||r===void 0?void 0:r.config},Vv=r=>{var e;return(e=Rc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ov(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[oc(JSON.stringify(t)),oc(JSON.stringify(d)),""].join(".")}const Ya={};function DT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ya))Ya[e]?r.emulator.push(e):r.prod.push(e);return r}function VT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Ug=!1;function Lv(r,e){if(typeof window>"u"||typeof document>"u"||!Ko(window.location.host)||Ya[r]===e||Ya[r]||Ug)return;Ya[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=DT().prod.length>0;function d(){const S=document.getElementById(i);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Ug=!0,d()},S}function E(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function x(){const S=VT(i),O=t("text"),B=document.getElementById(O)||document.createElement("span"),q=t("learnmore"),U=document.getElementById(q)||document.createElement("a"),H=t("preprendIcon"),X=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ne=S.element;p(ne),E(U,q);const he=v();y(X,H),ne.append(X,B,U,he),document.body.appendChild(ne)}l?(B.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function LT(){var r;const e=(r=Rc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function UT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zT(){const r=tn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function BT(){return!LT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $T(){try{return typeof indexedDB=="object"}catch{return!1}}function WT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="FirebaseError";class ni extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=HT,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pl.prototype.create)}}class pl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?qT(l,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new ni(o,p,i)}}function qT(r,e){return r.replace(GT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const GT=/\{\$([^}]+)}/g;function KT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ds(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],d=e[o];if(zg(l)&&zg(d)){if(!Ds(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function zg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ba(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function $a(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function QT(r,e){const t=new YT(r,e);return t.subscribe.bind(t)}class YT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");JT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Ph),o.error===void 0&&(o.error=Ph),o.complete===void 0&&(o.complete=Ph);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Ph(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(r){return r&&r._delegate?r._delegate:r}class Vs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new bT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ex(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ZT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZT(r){return r===ks?void 0:r}function ex(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})($e||($e={}));const nx={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},rx=$e.INFO,ix={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},sx=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=ix[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tf{constructor(e){this.name=e,this._logLevel=rx,this._logHandler=sx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const ox=(r,e)=>e.some(t=>r instanceof t);let Bg,$g;function ax(){return Bg||(Bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lx(){return $g||($g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mv=new WeakMap,Wh=new WeakMap,Fv=new WeakMap,Rh=new WeakMap,xf=new WeakMap;function ux(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(Vi(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Mv.set(t,r)}).catch(()=>{}),xf.set(e,r),e}function cx(r){if(Wh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Wh.set(r,e)}let Hh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Wh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Fv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function dx(r){Hh=r(Hh)}function hx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Ah(this),e,...t);return Fv.set(i,e.sort?e.sort():[e]),Vi(i)}:lx().includes(r)?function(...e){return r.apply(Ah(this),e),Vi(Mv.get(this))}:function(...e){return Vi(r.apply(Ah(this),e))}}function fx(r){return typeof r=="function"?hx(r):(r instanceof IDBTransaction&&cx(r),ox(r,ax())?new Proxy(r,Hh):r)}function Vi(r){if(r instanceof IDBRequest)return ux(r);if(Rh.has(r))return Rh.get(r);const e=fx(r);return e!==r&&(Rh.set(r,e),xf.set(e,r)),e}const Ah=r=>xf.get(r);function px(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),p=Vi(d);return i&&d.addEventListener("upgradeneeded",y=>{i(Vi(d.result),y.oldVersion,y.newVersion,Vi(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),p.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const mx=["get","getKey","getAll","getAllKeys","count"],gx=["put","add","delete","clear"],kh=new Map;function Wg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(kh.get(e))return kh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=gx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||mx.includes(t)))return;const l=async function(d,...p){const y=this.transaction(d,o?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&y.done]))[0]};return kh.set(e,l),l}dx(r=>({...r,get:(e,t,i)=>Wg(e,t)||r.get(e,t,i),has:(e,t)=>!!Wg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function vx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qh="@firebase/app",Hg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new Tf("@firebase/app"),_x="@firebase/app-compat",wx="@firebase/analytics-compat",Ex="@firebase/analytics",Tx="@firebase/app-check-compat",xx="@firebase/app-check",Ix="@firebase/auth",Sx="@firebase/auth-compat",Cx="@firebase/database",Px="@firebase/data-connect",Rx="@firebase/database-compat",Ax="@firebase/functions",kx="@firebase/functions-compat",Nx="@firebase/installations",bx="@firebase/installations-compat",jx="@firebase/messaging",Dx="@firebase/messaging-compat",Vx="@firebase/performance",Ox="@firebase/performance-compat",Lx="@firebase/remote-config",Mx="@firebase/remote-config-compat",Fx="@firebase/storage",Ux="@firebase/storage-compat",zx="@firebase/firestore",Bx="@firebase/ai",$x="@firebase/firestore-compat",Wx="firebase",Hx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="[DEFAULT]",qx={[qh]:"fire-core",[_x]:"fire-core-compat",[Ex]:"fire-analytics",[wx]:"fire-analytics-compat",[xx]:"fire-app-check",[Tx]:"fire-app-check-compat",[Ix]:"fire-auth",[Sx]:"fire-auth-compat",[Cx]:"fire-rtdb",[Px]:"fire-data-connect",[Rx]:"fire-rtdb-compat",[Ax]:"fire-fn",[kx]:"fire-fn-compat",[Nx]:"fire-iid",[bx]:"fire-iid-compat",[jx]:"fire-fcm",[Dx]:"fire-fcm-compat",[Vx]:"fire-perf",[Ox]:"fire-perf-compat",[Lx]:"fire-rc",[Mx]:"fire-rc-compat",[Fx]:"fire-gcs",[Ux]:"fire-gcs-compat",[zx]:"fire-fst",[$x]:"fire-fst-compat",[Bx]:"fire-vertex","fire-js":"fire-js",[Wx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Map,Gx=new Map,Kh=new Map;function qg(r,e){try{r.container.addComponent(e)}catch(t){Jr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Uo(r){const e=r.name;if(Kh.has(e))return Jr.debug(`There were multiple attempts to register component ${e}.`),!1;Kh.set(e,r);for(const t of ac.values())qg(t,r);for(const t of Gx.values())qg(t,r);return!0}function If(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function An(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new pl("app","Firebase",Kx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=Hx;function Uv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Gh,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Oi.create("bad-app-name",{appName:String(o)});if(t||(t=Dv()),!t)throw Oi.create("no-options");const l=ac.get(o);if(l){if(Ds(t,l.options)&&Ds(i,l.config))return l;throw Oi.create("duplicate-app",{appName:o})}const d=new tx(o);for(const y of Kh.values())d.addComponent(y);const p=new Qx(t,i,d);return ac.set(o,p),p}function zv(r=Gh){const e=ac.get(r);if(!e&&r===Gh&&Dv())return Uv();if(!e)throw Oi.create("no-app",{appName:r});return e}function Li(r,e,t){var i;let o=(i=qx[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jr.warn(p.join(" "));return}Uo(new Vs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="firebase-heartbeat-database",Jx=1,il="firebase-heartbeat-store";let Nh=null;function Bv(){return Nh||(Nh=px(Yx,Jx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(il)}catch(t){console.warn(t)}}}}).catch(r=>{throw Oi.create("idb-open",{originalErrorMessage:r.message})})),Nh}async function Xx(r){try{const t=(await Bv()).transaction(il),i=await t.objectStore(il).get($v(r));return await t.done,i}catch(e){if(e instanceof ni)Jr.warn(e.message);else{const t=Oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jr.warn(t.message)}}}async function Gg(r,e){try{const i=(await Bv()).transaction(il,"readwrite");await i.objectStore(il).put(e,$v(r)),await i.done}catch(t){if(t instanceof ni)Jr.warn(t.message);else{const i=Oi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Jr.warn(i.message)}}}function $v(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=1024,eI=30;class tI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Kg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>eI){const d=iI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Jr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Kg(),{heartbeatsToSend:i,unsentEntries:o}=nI(this._heartbeatsCache.heartbeats),l=oc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Jr.warn(t),""}}}function Kg(){return new Date().toISOString().substring(0,10)}function nI(r,e=Zx){const t=[];let i=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),Qg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Qg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class rI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $T()?WT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Xx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Qg(r){return oc(JSON.stringify({version:2,heartbeats:r})).length}function iI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(r){Uo(new Vs("platform-logger",e=>new yx(e),"PRIVATE")),Uo(new Vs("heartbeat",e=>new tI(e),"PRIVATE")),Li(qh,Hg,r),Li(qh,Hg,"esm2017"),Li("fire-js","")}sI("");var oI="firebase",aI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(oI,aI,"app");function Sf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Wv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lI=Wv,Hv=new pl("auth","Firebase",Wv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Tf("@firebase/auth");function uI(r,...e){lc.logLevel<=$e.WARN&&lc.warn(`Auth (${Qo}): ${r}`,...e)}function Qu(r,...e){lc.logLevel<=$e.ERROR&&lc.error(`Auth (${Qo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(r,...e){throw Pf(r,...e)}function ar(r,...e){return Pf(r,...e)}function Cf(r,e,t){const i=Object.assign(Object.assign({},lI()),{[e]:t});return new pl("auth","Firebase",i).create(e,{appName:r.name})}function Qr(r){return Cf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Bn(r,"argument-error"),Cf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Hv.create(r,...e)}function Ne(r,e,...t){if(!r)throw Pf(e,...t)}function Gr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Qu(e),new Error(e)}function Xr(r,e){r||Gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function dI(){return Yg()==="http:"||Yg()==="https:"}function Yg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dI()||FT()||"connection"in navigator)?navigator.onLine:!0}function fI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xr(t>e,"Short delay should be less than long delay!"),this.isMobile=OT()||UT()}get(){return hI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(r,e){Xr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gI=new gl(3e4,6e4);function Ki(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Qi(r,e,t,i,o={}){return Gv(r,o,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const p=ml(Object.assign({key:r.config.apiKey},d)).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:y},l);return MT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Ko(r.emulatorConfig.host)&&(v.credentials="include"),qv.fetch()(await Kv(r,r.config.apiHost,t,p),v)})}async function Gv(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},pI),e);try{const o=new vI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw zu(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const p=l.ok?d.errorMessage:d.error.message,[y,v]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw zu(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw zu(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw zu(r,"user-disabled",d);const E=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Cf(r,E,v);Bn(r,E)}}catch(o){if(o instanceof ni)throw o;Bn(r,"network-request-failed",{message:String(o)})}}async function yl(r,e,t,i,o={}){const l=await Qi(r,e,t,i,o);return"mfaPendingCredential"in l&&Bn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Kv(r,e,t,i){const o=`${e}${t}?${i}`,l=r,d=l.config.emulator?Rf(r.config,o):`${r.config.apiScheme}://${o}`;return mI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function yI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ar(this.auth,"network-request-failed")),gI.get())})}}function zu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ar(r,e,i);return o.customData._tokenResponse=t,o}function Jg(r){return r!==void 0&&r.enterprise!==void 0}class _I{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wI(r,e){return Qi(r,"GET","/v2/recaptchaConfig",Ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(r,e){return Qi(r,"POST","/v1/accounts:delete",e)}async function uc(r,e){return Qi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TI(r,e=!1){const t=qt(r),i=await t.getIdToken(e),o=Af(i);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Ja(bh(o.auth_time)),issuedAtTime:Ja(bh(o.iat)),expirationTime:Ja(bh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function bh(r){return Number(r)*1e3}function Af(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const o=bv(t);return o?JSON.parse(o):(Qu("Failed to decode base64 JWT payload"),null)}catch(o){return Qu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Xg(r){const e=Af(r);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ni&&xI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function xI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ja(this.lastLoginAt),this.creationTime=Ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await sl(r,uc(t,{idToken:i}));Ne(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Qv(l.providerUserInfo):[],p=CI(r.providerData,d),y=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),E=y?v:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new Yh(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,x)}async function SI(r){const e=qt(r);await cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Qv(r){return r.map(e=>{var{providerId:t}=e,i=Sf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(r,e){const t=await Gv(r,{},async()=>{const i=ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await Kv(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:i};return r.emulatorConfig&&Ko(r.emulatorConfig.host)&&(y.credentials="include"),qv.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RI(r,e){return Qi(r,"POST","/v2/accounts:revokeToken",Ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=Xg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await PI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,d=new Vo;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Ne(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(Ne(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(r,e){Ne(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class or{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Sf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new II(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Yh(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await sl(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TI(this,e)}reload(){return SI(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await cc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await sl(this,EI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,d,p,y,v,E;const x=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,O=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,B=(d=t.photoURL)!==null&&d!==void 0?d:void 0,q=(p=t.tenantId)!==null&&p!==void 0?p:void 0,U=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,H=(v=t.createdAt)!==null&&v!==void 0?v:void 0,X=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ne,emailVerified:he,isAnonymous:Pe,providerData:re,stsTokenManager:k}=t;Ne(ne&&k,e,"internal-error");const I=Vo.fromJSON(this.name,k);Ne(typeof ne=="string",e,"internal-error"),Ri(x,e.name),Ri(S,e.name),Ne(typeof he=="boolean",e,"internal-error"),Ne(typeof Pe=="boolean",e,"internal-error"),Ri(O,e.name),Ri(B,e.name),Ri(q,e.name),Ri(U,e.name),Ri(H,e.name),Ri(X,e.name);const A=new or({uid:ne,auth:e,email:S,emailVerified:he,displayName:x,isAnonymous:Pe,photoURL:B,phoneNumber:O,tenantId:q,stsTokenManager:I,createdAt:H,lastLoginAt:X});return re&&Array.isArray(re)&&(A.providerData=re.map(P=>Object.assign({},P))),U&&(A._redirectEventId=U),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new Vo;o.updateFromServerResponse(t);const l=new or({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await cc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Qv(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Vo;p.updateFromIdToken(i);const y=new or({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Yh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new Map;function Kr(r){Xr(r instanceof Function,"Expected a class definition");let e=Zg.get(r);return e?(Xr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Zg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Yv.type="NONE";const ey=Yv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(r,e,t){return`firebase:${r}:${e}:${t}`}class Oo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Yu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Yu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await uc(this.auth,{idToken:e}).catch(()=>{});return t?or._fromGetAccountInfoResponse(this.auth,t,e):null}return or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Oo(Kr(ey),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Kr(ey);const d=Yu(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const E=await v._get(d);if(E){let x;if(typeof E=="string"){const S=await uc(e,{idToken:E}).catch(()=>{});if(!S)break;x=await or._fromGetAccountInfoResponse(e,S,E)}else x=or._fromJSON(e,E);v!==l&&(p=x),l=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new Oo(l,e,i):(l=y[0],p&&await l._set(d,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Oo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(e_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(n_(e))return"Blackberry";if(r_(e))return"Webos";if(Xv(e))return"Safari";if((e.includes("chrome/")||Zv(e))&&!e.includes("edge/"))return"Chrome";if(t_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Jv(r=tn()){return/firefox\//i.test(r)}function Xv(r=tn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zv(r=tn()){return/crios\//i.test(r)}function e_(r=tn()){return/iemobile/i.test(r)}function t_(r=tn()){return/android/i.test(r)}function n_(r=tn()){return/blackberry/i.test(r)}function r_(r=tn()){return/webos/i.test(r)}function kf(r=tn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function AI(r=tn()){var e;return kf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kI(){return zT()&&document.documentMode===10}function i_(r=tn()){return kf(r)||t_(r)||r_(r)||n_(r)||/windows phone/i.test(r)||e_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(r,e=[]){let t;switch(r){case"Browser":t=ty(tn());break;case"Worker":t=`${ty(tn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,p)=>{try{const y=e(l);d(y)}catch(y){p(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(r,e={}){return Qi(r,"GET","/v2/passwordPolicy",Ki(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=6;class DI{constructor(e){var t,i,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:jI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,d,p;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(i=y.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),y.isValid&&(y.isValid=(o=y.containsLowercaseLetter)!==null&&o!==void 0?o:!0),y.isValid&&(y.isValid=(l=y.containsUppercaseLetter)!==null&&l!==void 0?l:!0),y.isValid&&(y.isValid=(d=y.containsNumericCharacter)!==null&&d!==void 0?d:!0),y.isValid&&(y.isValid=(p=y.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),y}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ny(this),this.idTokenSubscription=new ny(this),this.beforeStateQueue=new NI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await uc(this,{idToken:e}),i=await or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(An(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===p)&&(y!=null&&y.user)&&(o=y.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(Qr(this));const t=e?qt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bI(this),t=new DI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await RI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kr(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(p,this,"internal-error"),p.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&uI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Yi(r){return qt(r)}class ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=QT(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OI(r){Ac=r}function o_(r){return Ac.loadJS(r)}function LI(){return Ac.recaptchaEnterpriseScript}function MI(){return Ac.gapiScript}function FI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class UI{constructor(){this.enterprise=new zI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const BI="recaptcha-enterprise",a_="NO_RECAPTCHA";class $I{constructor(e){this.type=BI,this.auth=Yi(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,p)=>{wI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new _I(y);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(y=>{p(y)})})}function o(l,d,p){const y=window.grecaptcha;Jg(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(a_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UI().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{i(this.auth).then(p=>{if(!t&&Jg(window.grecaptcha))o(p,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=LI();y.length!==0&&(y+=p),o_(y).then(()=>{o(p,l,d)}).catch(v=>{d(v)})}}).catch(p=>{d(p)})})}}async function ry(r,e,t,i=!1,o=!1){const l=new $I(r);let d;if(o)d=a_;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Jh(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await ry(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await ry(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(r,e){const t=If(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ds(l,e??{}))return o;Bn(o,"already-initialized")}return t.initialize({options:e})}function HI(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Kr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function qI(r,e,t){const i=Yi(r);Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=l_(e),{host:d,port:p}=GI(e),y=p===null?"":`:${p}`,v={url:`${l}//${d}${y}/`},E=Object.freeze({host:d,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ne(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ne(Ds(v,i.config.emulator)&&Ds(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,Ko(d)?(Ov(`${l}//${d}${y}`),Lv("Auth",!0)):KI()}function l_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function GI(r){const e=l_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:iy(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:iy(d)}}}function iy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function KI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,t){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}}async function QI(r,e){return Qi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(r,e){return yl(r,"POST","/v1/accounts:signInWithPassword",Ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(r,e){return yl(r,"POST","/v1/accounts:signInWithEmailLink",Ki(r,e))}async function XI(r,e){return yl(r,"POST","/v1/accounts:signInWithEmailLink",Ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends Nf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ol(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ol(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jh(e,t,"signInWithPassword",YI);case"emailLink":return JI(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jh(e,i,"signUpPassword",QI);case"emailLink":return XI(e,{idToken:t,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(r,e){return yl(r,"POST","/v1/accounts:signInWithIdp",Ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="http://localhost";class Os extends Nf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Sf(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new Os(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Lo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Lo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lo(e,t)}buildRequest(){const e={requestUri:ZI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ml(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tS(r){const e=Ba($a(r)).link,t=e?Ba($a(e)).deep_link_id:null,i=Ba($a(r)).deep_link_id;return(i?Ba($a(i)).link:null)||i||t||e||r}class bf{constructor(e){var t,i,o,l,d,p;const y=Ba($a(e)),v=(t=y.apiKey)!==null&&t!==void 0?t:null,E=(i=y.oobCode)!==null&&i!==void 0?i:null,x=eS((o=y.mode)!==null&&o!==void 0?o:null);Ne(v&&E&&x,"argument-error"),this.apiKey=v,this.operation=x,this.code=E,this.continueUrl=(l=y.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=y.lang)!==null&&d!==void 0?d:null,this.tenantId=(p=y.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=tS(e);try{return new bf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.providerId=Yo.PROVIDER_ID}static credential(e,t){return ol._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=bf.parseLink(t);return Ne(i,"argument-error"),ol._fromEmailAndCode(e,i.code,i.tenantId)}}Yo.PROVIDER_ID="password";Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends jf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends vl{constructor(){super("facebook.com")}static credential(e){return Os._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Os._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return xr.credential(t,i)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends vl{constructor(){super("github.com")}static credential(e){return Os._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends vl{constructor(){super("twitter.com")}static credential(e,t){return Os._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ni.credential(t,i)}catch{return null}}}Ni.TWITTER_SIGN_IN_METHOD="twitter.com";Ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(r,e){return yl(r,"POST","/v1/accounts:signUp",Ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await or._fromIdTokenResponse(e,i,o),d=sy(i);return new Ls({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=sy(i);return new Ls({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function sy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends ni{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,dc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new dc(e,t,i,o)}}function u_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?dc._fromErrorAndOperation(r,l,e,i):l})}async function rS(r,e,t=!1){const i=await sl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ls._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(r,e,t=!1){const{auth:i}=r;if(An(i.app))return Promise.reject(Qr(i));const o="reauthenticate";try{const l=await sl(r,u_(i,o,e,r),t);Ne(l.idToken,i,"internal-error");const d=Af(l.idToken);Ne(d,i,"internal-error");const{sub:p}=d;return Ne(r.uid===p,i,"user-mismatch"),Ls._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Bn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_(r,e,t=!1){if(An(r.app))return Promise.reject(Qr(r));const i="signIn",o=await u_(r,i,e),l=await Ls._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function sS(r,e){return c_(Yi(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_(r){const e=Yi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oS(r,e,t){if(An(r.app))return Promise.reject(Qr(r));const i=Yi(r),d=await Jh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nS).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&d_(r),y}),p=await Ls._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function h_(r,e,t){return An(r.app)?Promise.reject(Qr(r)):sS(qt(r),Yo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&d_(r),i})}function aS(r,e,t,i){return qt(r).onIdTokenChanged(e,t,i)}function lS(r,e,t){return qt(r).beforeAuthStateChanged(e,t)}function uS(r,e,t,i){return qt(r).onAuthStateChanged(e,t,i)}function f_(r){return qt(r).signOut()}const hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=1e3,dS=10;class m_ extends p_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=i_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);kI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,dS):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},cS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}m_.type="LOCAL";const hS=m_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends p_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}g_.type="SESSION";const y_=g_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new kc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async v=>v(t.origin,l)),y=await fS(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((p,y)=>{const v=Df("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(x){const S=x;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(S.data.response);break;default:clearTimeout(E),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return window}function mS(r){Ir().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(){return typeof Ir().WorkerGlobalScope<"u"&&typeof Ir().importScripts=="function"}async function gS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function vS(){return v_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="firebaseLocalStorageDb",_S=1,fc="firebaseLocalStorage",w_="fbase_key";class _l{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nc(r,e){return r.transaction([fc],e?"readwrite":"readonly").objectStore(fc)}function wS(){const r=indexedDB.deleteDatabase(__);return new _l(r).toPromise()}function Xh(){const r=indexedDB.open(__,_S);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(fc,{keyPath:w_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(fc)?e(i):(i.close(),await wS(),e(await Xh()))})})}async function oy(r,e,t){const i=Nc(r,!0).put({[w_]:e,value:t});return new _l(i).toPromise()}async function ES(r,e){const t=Nc(r,!1).get(e),i=await new _l(t).toPromise();return i===void 0?null:i.value}function ay(r,e){const t=Nc(r,!0).delete(e);return new _l(t).toPromise()}const TS=800,xS=3;class E_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>xS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kc._getInstance(vS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await gS(),!this.activeServiceWorker)return;this.sender=new pS(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xh();return await oy(e,hc,"1"),await ay(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>oy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>ES(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ay(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Nc(o,!1).getAll();return new _l(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}E_.type="LOCAL";const IS=E_;new gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(r,e){return e?Kr(e):(Ne(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends Nf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function SS(r){return c_(r.auth,new Vf(r),r.bypassAuthState)}function CS(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),iS(t,new Vf(r),r.bypassAuthState)}async function PS(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),rS(t,new Vf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SS;case"linkViaPopup":case"linkViaRedirect":return PS;case"reauthViaPopup":case"reauthViaRedirect":return CS;default:Bn(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new gl(2e3,1e4);async function I_(r,e,t){if(An(r.app))return Promise.reject(ar(r,"operation-not-supported-in-this-environment"));const i=Yi(r);cI(r,e,jf);const o=T_(i,t);return new Ns(i,"signInViaPopup",e,o).executeNotNull()}class Ns extends x_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Ns.currentPopupAction&&Ns.currentPopupAction.cancel(),Ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Xr(this.filter.length===1,"Popup operations only handle one event");const e=Df();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RS.get())};e()}}Ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="pendingRedirect",Ju=new Map;class kS extends x_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const i=await NS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NS(r,e){const t=DS(e),i=jS(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function bS(r,e){Ju.set(r._key(),e)}function jS(r){return Kr(r._redirectPersistence)}function DS(r){return Yu(AS,r.config.apiKey,r.name)}async function VS(r,e,t=!1){if(An(r.app))return Promise.reject(Qr(r));const i=Yi(r),o=T_(i,e),d=await new kS(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=600*1e3;class LS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!S_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ar(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OS&&this.cachedEventUids.clear(),this.cachedEventUids.has(ly(e))}saveEventToCache(e){this.cachedEventUids.add(ly(e)),this.lastProcessedEventTime=Date.now()}}function ly(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function S_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(r,e={}){return Qi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zS=/^https?/;async function BS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await FS(r);for(const t of e)try{if($S(t))return}catch{}Bn(r,"unauthorized-domain")}function $S(r){const e=Qh(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!zS.test(t))return!1;if(US.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new gl(3e4,6e4);function uy(){const r=Ir().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function HS(r){return new Promise((e,t)=>{var i,o,l;function d(){uy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uy(),t(ar(r,"network-request-failed"))},timeout:WS.get()})}if(!((o=(i=Ir().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Ir().gapi)===null||l===void 0)&&l.load)d();else{const p=FI("iframefcb");return Ir()[p]=()=>{gapi.load?d():t(ar(r,"network-request-failed"))},o_(`${MI()}?onload=${p}`).catch(y=>t(y))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function qS(r){return Xu=Xu||HS(r),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new gl(5e3,15e3),KS="__/auth/iframe",QS="emulator/auth/iframe",YS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XS(r){const e=r.config;Ne(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Rf(e,QS):`https://${r.config.authDomain}/${KS}`,i={apiKey:e.apiKey,appName:r.name,v:Qo},o=JS.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ml(i).slice(1)}`}async function ZS(r){const e=await qS(r),t=Ir().gapi;return Ne(t,r,"internal-error"),e.open({where:document.body,url:XS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YS,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=ar(r,"network-request-failed"),p=Ir().setTimeout(()=>{l(d)},GS.get());function y(){Ir().clearTimeout(p),o(i)}i.ping(y).then(y,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t1=500,n1=600,r1="_blank",i1="http://localhost";class cy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s1(r,e,t,i=t1,o=n1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const y=Object.assign(Object.assign({},e1),{width:i.toString(),height:o.toString(),top:l,left:d}),v=tn().toLowerCase();t&&(p=Zv(v)?r1:t),Jv(v)&&(e=e||i1,y.scrollbars="yes");const E=Object.entries(y).reduce((S,[O,B])=>`${S}${O}=${B},`,"");if(AI(v)&&p!=="_self")return o1(e||"",p),new cy(null);const x=window.open(e||"",p,E);Ne(x,r,"popup-blocked");try{x.focus()}catch{}return new cy(x)}function o1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="__/auth/handler",l1="emulator/auth/handler",u1=encodeURIComponent("fac");async function dy(r,e,t,i,o,l){Ne(r.config.authDomain,r,"auth-domain-config-required"),Ne(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Qo,eventId:o};if(e instanceof jf){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",KT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,x]of Object.entries({}))d[E]=x}if(e instanceof vl){const E=e.getScopes().filter(x=>x!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const y=await r._getAppCheckToken(),v=y?`#${u1}=${encodeURIComponent(y)}`:"";return`${c1(r)}?${ml(p).slice(1)}${v}`}function c1({config:r}){return r.emulator?Rf(r,l1):`https://${r.authDomain}/${a1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="webStorageSupport";class d1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y_,this._completeRedirectFn=VS,this._overrideRedirectResult=bS}async _openPopup(e,t,i,o){var l;Xr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await dy(e,t,i,Qh(),o);return s1(e,d,Df())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await dy(e,t,i,Qh(),o);return mS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Xr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await ZS(e),i=new LS(e);return t.register("authEvent",o=>(Ne(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jh,{type:jh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[jh];d!==void 0&&t(!!d),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return i_()||Xv()||kf()}}const h1=d1;var hy="@firebase/auth",fy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m1(r){Uo(new Vs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;Ne(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s_(r)},v=new VI(i,o,l,y);return HI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Uo(new Vs("auth-internal",e=>{const t=Yi(e.getProvider("auth").getImmediate());return(i=>new f1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(hy,fy,p1(r)),Li(hy,fy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=300,y1=Vv("authIdTokenMaxAge")||g1;let py=null;const v1=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>y1)return;const o=t==null?void 0:t.token;py!==o&&(py=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function _1(r=zv()){const e=If(r,"auth");if(e.isInitialized())return e.getImmediate();const t=WI(r,{popupRedirectResolver:h1,persistence:[IS,hS,y_]}),i=Vv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=v1(l.toString());lS(t,d,()=>d(t.currentUser)),aS(t,p=>d(p))}}const o=jv("auth");return o&&qI(t,`http://${o}`),t}function w1(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}OI({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=ar("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",w1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m1("Browser");var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mi,C_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function A(){}A.prototype=I.prototype,k.D=I.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(P,D,L){for(var R=Array(arguments.length-2),st=2;st<arguments.length;st++)R[st-2]=arguments[st];return I.prototype[D].apply(P,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,A){A||(A=0);var P=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)P[D]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(D=0;16>D;++D)P[D]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=k.g[0],A=k.g[1],D=k.g[2];var L=k.g[3],R=I+(L^A&(D^L))+P[0]+3614090360&4294967295;I=A+(R<<7&4294967295|R>>>25),R=L+(D^I&(A^D))+P[1]+3905402710&4294967295,L=I+(R<<12&4294967295|R>>>20),R=D+(A^L&(I^A))+P[2]+606105819&4294967295,D=L+(R<<17&4294967295|R>>>15),R=A+(I^D&(L^I))+P[3]+3250441966&4294967295,A=D+(R<<22&4294967295|R>>>10),R=I+(L^A&(D^L))+P[4]+4118548399&4294967295,I=A+(R<<7&4294967295|R>>>25),R=L+(D^I&(A^D))+P[5]+1200080426&4294967295,L=I+(R<<12&4294967295|R>>>20),R=D+(A^L&(I^A))+P[6]+2821735955&4294967295,D=L+(R<<17&4294967295|R>>>15),R=A+(I^D&(L^I))+P[7]+4249261313&4294967295,A=D+(R<<22&4294967295|R>>>10),R=I+(L^A&(D^L))+P[8]+1770035416&4294967295,I=A+(R<<7&4294967295|R>>>25),R=L+(D^I&(A^D))+P[9]+2336552879&4294967295,L=I+(R<<12&4294967295|R>>>20),R=D+(A^L&(I^A))+P[10]+4294925233&4294967295,D=L+(R<<17&4294967295|R>>>15),R=A+(I^D&(L^I))+P[11]+2304563134&4294967295,A=D+(R<<22&4294967295|R>>>10),R=I+(L^A&(D^L))+P[12]+1804603682&4294967295,I=A+(R<<7&4294967295|R>>>25),R=L+(D^I&(A^D))+P[13]+4254626195&4294967295,L=I+(R<<12&4294967295|R>>>20),R=D+(A^L&(I^A))+P[14]+2792965006&4294967295,D=L+(R<<17&4294967295|R>>>15),R=A+(I^D&(L^I))+P[15]+1236535329&4294967295,A=D+(R<<22&4294967295|R>>>10),R=I+(D^L&(A^D))+P[1]+4129170786&4294967295,I=A+(R<<5&4294967295|R>>>27),R=L+(A^D&(I^A))+P[6]+3225465664&4294967295,L=I+(R<<9&4294967295|R>>>23),R=D+(I^A&(L^I))+P[11]+643717713&4294967295,D=L+(R<<14&4294967295|R>>>18),R=A+(L^I&(D^L))+P[0]+3921069994&4294967295,A=D+(R<<20&4294967295|R>>>12),R=I+(D^L&(A^D))+P[5]+3593408605&4294967295,I=A+(R<<5&4294967295|R>>>27),R=L+(A^D&(I^A))+P[10]+38016083&4294967295,L=I+(R<<9&4294967295|R>>>23),R=D+(I^A&(L^I))+P[15]+3634488961&4294967295,D=L+(R<<14&4294967295|R>>>18),R=A+(L^I&(D^L))+P[4]+3889429448&4294967295,A=D+(R<<20&4294967295|R>>>12),R=I+(D^L&(A^D))+P[9]+568446438&4294967295,I=A+(R<<5&4294967295|R>>>27),R=L+(A^D&(I^A))+P[14]+3275163606&4294967295,L=I+(R<<9&4294967295|R>>>23),R=D+(I^A&(L^I))+P[3]+4107603335&4294967295,D=L+(R<<14&4294967295|R>>>18),R=A+(L^I&(D^L))+P[8]+1163531501&4294967295,A=D+(R<<20&4294967295|R>>>12),R=I+(D^L&(A^D))+P[13]+2850285829&4294967295,I=A+(R<<5&4294967295|R>>>27),R=L+(A^D&(I^A))+P[2]+4243563512&4294967295,L=I+(R<<9&4294967295|R>>>23),R=D+(I^A&(L^I))+P[7]+1735328473&4294967295,D=L+(R<<14&4294967295|R>>>18),R=A+(L^I&(D^L))+P[12]+2368359562&4294967295,A=D+(R<<20&4294967295|R>>>12),R=I+(A^D^L)+P[5]+4294588738&4294967295,I=A+(R<<4&4294967295|R>>>28),R=L+(I^A^D)+P[8]+2272392833&4294967295,L=I+(R<<11&4294967295|R>>>21),R=D+(L^I^A)+P[11]+1839030562&4294967295,D=L+(R<<16&4294967295|R>>>16),R=A+(D^L^I)+P[14]+4259657740&4294967295,A=D+(R<<23&4294967295|R>>>9),R=I+(A^D^L)+P[1]+2763975236&4294967295,I=A+(R<<4&4294967295|R>>>28),R=L+(I^A^D)+P[4]+1272893353&4294967295,L=I+(R<<11&4294967295|R>>>21),R=D+(L^I^A)+P[7]+4139469664&4294967295,D=L+(R<<16&4294967295|R>>>16),R=A+(D^L^I)+P[10]+3200236656&4294967295,A=D+(R<<23&4294967295|R>>>9),R=I+(A^D^L)+P[13]+681279174&4294967295,I=A+(R<<4&4294967295|R>>>28),R=L+(I^A^D)+P[0]+3936430074&4294967295,L=I+(R<<11&4294967295|R>>>21),R=D+(L^I^A)+P[3]+3572445317&4294967295,D=L+(R<<16&4294967295|R>>>16),R=A+(D^L^I)+P[6]+76029189&4294967295,A=D+(R<<23&4294967295|R>>>9),R=I+(A^D^L)+P[9]+3654602809&4294967295,I=A+(R<<4&4294967295|R>>>28),R=L+(I^A^D)+P[12]+3873151461&4294967295,L=I+(R<<11&4294967295|R>>>21),R=D+(L^I^A)+P[15]+530742520&4294967295,D=L+(R<<16&4294967295|R>>>16),R=A+(D^L^I)+P[2]+3299628645&4294967295,A=D+(R<<23&4294967295|R>>>9),R=I+(D^(A|~L))+P[0]+4096336452&4294967295,I=A+(R<<6&4294967295|R>>>26),R=L+(A^(I|~D))+P[7]+1126891415&4294967295,L=I+(R<<10&4294967295|R>>>22),R=D+(I^(L|~A))+P[14]+2878612391&4294967295,D=L+(R<<15&4294967295|R>>>17),R=A+(L^(D|~I))+P[5]+4237533241&4294967295,A=D+(R<<21&4294967295|R>>>11),R=I+(D^(A|~L))+P[12]+1700485571&4294967295,I=A+(R<<6&4294967295|R>>>26),R=L+(A^(I|~D))+P[3]+2399980690&4294967295,L=I+(R<<10&4294967295|R>>>22),R=D+(I^(L|~A))+P[10]+4293915773&4294967295,D=L+(R<<15&4294967295|R>>>17),R=A+(L^(D|~I))+P[1]+2240044497&4294967295,A=D+(R<<21&4294967295|R>>>11),R=I+(D^(A|~L))+P[8]+1873313359&4294967295,I=A+(R<<6&4294967295|R>>>26),R=L+(A^(I|~D))+P[15]+4264355552&4294967295,L=I+(R<<10&4294967295|R>>>22),R=D+(I^(L|~A))+P[6]+2734768916&4294967295,D=L+(R<<15&4294967295|R>>>17),R=A+(L^(D|~I))+P[13]+1309151649&4294967295,A=D+(R<<21&4294967295|R>>>11),R=I+(D^(A|~L))+P[4]+4149444226&4294967295,I=A+(R<<6&4294967295|R>>>26),R=L+(A^(I|~D))+P[11]+3174756917&4294967295,L=I+(R<<10&4294967295|R>>>22),R=D+(I^(L|~A))+P[2]+718787259&4294967295,D=L+(R<<15&4294967295|R>>>17),R=A+(L^(D|~I))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+L&4294967295}i.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var A=I-this.blockSize,P=this.B,D=this.h,L=0;L<I;){if(D==0)for(;L<=A;)o(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<I;)if(P[D++]=k.charCodeAt(L++),D==this.blockSize){o(this,P),D=0;break}}else for(;L<I;)if(P[D++]=k[L++],D==this.blockSize){o(this,P),D=0;break}}this.h=D,this.o+=I},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var A=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=A&255,A/=256;for(this.u(k),k=Array(16),I=A=0;4>I;++I)for(var P=0;32>P;P+=8)k[A++]=this.g[I]>>>P&255;return k};function l(k,I){var A=p;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=I(k)}function d(k,I){this.h=I;for(var A=[],P=!0,D=k.length-1;0<=D;D--){var L=k[D]|0;P&&L==I||(A[D]=L,P=!1)}this.g=A}var p={};function y(k){return-128<=k&&128>k?l(k,function(I){return new d([I|0],0>I?-1:0)}):new d([k|0],0>k?-1:0)}function v(k){if(isNaN(k)||!isFinite(k))return x;if(0>k)return U(v(-k));for(var I=[],A=1,P=0;k>=A;P++)I[P]=k/A|0,A*=4294967296;return new d(I,0)}function E(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return U(E(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(I,8)),P=x,D=0;D<k.length;D+=8){var L=Math.min(8,k.length-D),R=parseInt(k.substring(D,D+L),I);8>L?(L=v(Math.pow(I,L)),P=P.j(L).add(v(R))):(P=P.j(A),P=P.add(v(R)))}return P}var x=y(0),S=y(1),O=y(16777216);r=d.prototype,r.m=function(){if(q(this))return-U(this).m();for(var k=0,I=1,A=0;A<this.g.length;A++){var P=this.i(A);k+=(0<=P?P:4294967296+P)*I,I*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(B(this))return"0";if(q(this))return"-"+U(this).toString(k);for(var I=v(Math.pow(k,6)),A=this,P="";;){var D=he(A,I).g;A=H(A,D.j(I));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=D,B(A))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function B(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function q(k){return k.h==-1}r.l=function(k){return k=H(this,k),q(k)?-1:B(k)?0:1};function U(k){for(var I=k.g.length,A=[],P=0;P<I;P++)A[P]=~k.g[P];return new d(A,~k.h).add(S)}r.abs=function(){return q(this)?U(this):this},r.add=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],P=0,D=0;D<=I;D++){var L=P+(this.i(D)&65535)+(k.i(D)&65535),R=(L>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);P=R>>>16,L&=65535,R&=65535,A[D]=R<<16|L}return new d(A,A[A.length-1]&-2147483648?-1:0)};function H(k,I){return k.add(U(I))}r.j=function(k){if(B(this)||B(k))return x;if(q(this))return q(k)?U(this).j(U(k)):U(U(this).j(k));if(q(k))return U(this.j(U(k)));if(0>this.l(O)&&0>k.l(O))return v(this.m()*k.m());for(var I=this.g.length+k.g.length,A=[],P=0;P<2*I;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<k.g.length;D++){var L=this.i(P)>>>16,R=this.i(P)&65535,st=k.i(D)>>>16,lt=k.i(D)&65535;A[2*P+2*D]+=R*lt,X(A,2*P+2*D),A[2*P+2*D+1]+=L*lt,X(A,2*P+2*D+1),A[2*P+2*D+1]+=R*st,X(A,2*P+2*D+1),A[2*P+2*D+2]+=L*st,X(A,2*P+2*D+2)}for(P=0;P<I;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=I;P<2*I;P++)A[P]=0;return new d(A,0)};function X(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function ne(k,I){this.g=k,this.h=I}function he(k,I){if(B(I))throw Error("division by zero");if(B(k))return new ne(x,x);if(q(k))return I=he(U(k),I),new ne(U(I.g),U(I.h));if(q(I))return I=he(k,U(I)),new ne(U(I.g),I.h);if(30<k.g.length){if(q(k)||q(I))throw Error("slowDivide_ only works with positive integers.");for(var A=S,P=I;0>=P.l(k);)A=Pe(A),P=Pe(P);var D=re(A,1),L=re(P,1);for(P=re(P,2),A=re(A,2);!B(P);){var R=L.add(P);0>=R.l(k)&&(D=D.add(A),L=R),P=re(P,1),A=re(A,1)}return I=H(k,D.j(I)),new ne(D,I)}for(D=x;0<=k.l(I);){for(A=Math.max(1,Math.floor(k.m()/I.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=v(A),R=L.j(I);q(R)||0<R.l(k);)A-=P,L=v(A),R=L.j(I);B(L)&&(L=S),D=D.add(L),k=H(k,R)}return new ne(D,k)}r.A=function(k){return he(this,k).h},r.and=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],P=0;P<I;P++)A[P]=this.i(P)&k.i(P);return new d(A,this.h&k.h)},r.or=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],P=0;P<I;P++)A[P]=this.i(P)|k.i(P);return new d(A,this.h|k.h)},r.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],P=0;P<I;P++)A[P]=this.i(P)^k.i(P);return new d(A,this.h^k.h)};function Pe(k){for(var I=k.g.length+1,A=[],P=0;P<I;P++)A[P]=k.i(P)<<1|k.i(P-1)>>>31;return new d(A,k.h)}function re(k,I){var A=I>>5;I%=32;for(var P=k.g.length-A,D=[],L=0;L<P;L++)D[L]=0<I?k.i(L+A)>>>I|k.i(L+A+1)<<32-I:k.i(L+A);return new d(D,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,C_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,Mi=d}).apply(typeof my<"u"?my:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var P_,Wa,R_,Zu,Zh,A_,k_,N_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in _))break e;_=_[M]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,T=!1,M={next:function(){if(!T&&_<u.length){var W=_++;return{value:m(W,u[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function x(u,m,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function S(u,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:x,S.apply(null,arguments)}function O(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function B(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,M,W){for(var le=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)le[nt-2]=arguments[nt];return m.prototype[M].apply(T,le)}}function q(u){const m=u.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function U(u,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(y(T)){const M=u.length||0,W=T.length||0;u.length=M+W;for(let le=0;le<W;le++)u[M+le]=T[le]}else u.push(T)}}class H{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function X(u){return/^[\s\xa0]*$/.test(u)}function ne(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function he(u){return he[" "](u),u}he[" "]=function(){};var Pe=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function re(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function k(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function I(u){const m={};for(const _ in u)m[_]=u[_];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,m){let _,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(_ in T)u[_]=T[_];for(let W=0;W<A.length;W++)_=A[W],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function D(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function L(u){p.setTimeout(()=>{throw u},0)}function R(){var u=ve;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class st{constructor(){this.h=this.g=null}add(m,_){const T=lt.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var lt=new H(()=>new xt,u=>u.reset());class xt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ye,ae=!1,ve=new st,ce=()=>{const u=p.Promise.resolve(void 0);Ye=()=>{u.then(V)}};var V=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){L(_)}var m=lt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ae=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function Le(u,m){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Pe){e:{try{he(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Fe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Le.aa.h.call(this)}}B(Le,me);var Fe={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Ce(u,m,_,T,M){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=M,this.key=++Be,this.da=this.fa=!1}function et(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vn(u){this.src=u,this.g={},this.h=0}vn.prototype.add=function(u,m,_,T,M){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var le=_n(u,m,T,M);return-1<le?(m=u[le],_||(m.fa=!1)):(m=new Ce(m,this.src,W,!!T,M),m.fa=_,u.push(m)),m};function $n(u,m){var _=m.type;if(_ in u.g){var T=u.g[_],M=Array.prototype.indexOf.call(T,m,void 0),W;(W=0<=M)&&Array.prototype.splice.call(T,M,1),W&&(et(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function _n(u,m,_,T){for(var M=0;M<u.length;++M){var W=u[M];if(!W.da&&W.listener==m&&W.capture==!!_&&W.ha==T)return M}return-1}var wn="closure_lm_"+(1e6*Math.random()|0),b={};function ue(u,m,_,T,M){if(Array.isArray(m)){for(var W=0;W<m.length;W++)ue(u,m[W],_,T,M);return null}return _=rt(_),u&&u[Me]?u.K(m,_,v(T)?!!T.capture:!1,M):se(u,m,_,!1,T,M)}function se(u,m,_,T,M,W){if(!m)throw Error("Invalid event type");var le=v(M)?!!M.capture:!!M,nt=Se(u);if(nt||(u[wn]=nt=new vn(u)),_=nt.add(m,_,T,le,W),_.proxy)return _;if(T=G(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)_e||(M=le),M===void 0&&(M=!1),u.addEventListener(m.toString(),T,M);else if(u.attachEvent)u.attachEvent(de(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function G(){function u(_){return m.call(u.src,u.listener,_)}const m=fe;return u}function Ie(u,m,_,T,M){if(Array.isArray(m))for(var W=0;W<m.length;W++)Ie(u,m[W],_,T,M);else T=v(T)?!!T.capture:!!T,_=rt(_),u&&u[Me]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],_=_n(W,_,T,M),-1<_&&(et(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=Se(u))&&(m=u.g[m.toString()],u=-1,m&&(u=_n(m,_,T,M)),(_=-1<u?m[u]:null)&&Y(_))}function Y(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Me])$n(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(de(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Se(m))?($n(_,u),_.h==0&&(_.src=null,m[wn]=null)):et(u)}}}function de(u){return u in b?b[u]:b[u]="on"+u}function fe(u,m){if(u.da)u=!0;else{m=new Le(m,this);var _=u.listener,T=u.ha||u.src;u.fa&&Y(u),u=_.call(T,m)}return u}function Se(u){return u=u[wn],u instanceof vn?u:null}var qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function rt(u){return typeof u=="function"?u:(u[qe]||(u[qe]=function(m){return u.handleEvent(m)}),u[qe])}function De(){Q.call(this),this.i=new vn(this),this.M=this,this.F=null}B(De,Q),De.prototype[Me]=!0,De.prototype.removeEventListener=function(u,m,_,T){Ie(this,u,m,_,T)};function Xe(u,m){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new me(m,u);else if(m instanceof me)m.target=m.target||u;else{var M=m;m=new me(T,u),P(m,M)}if(M=!0,_)for(var W=_.length-1;0<=W;W--){var le=m.g=_[W];M=Wn(le,T,!0,m)&&M}if(le=m.g=u,M=Wn(le,T,!0,m)&&M,M=Wn(le,T,!1,m)&&M,_)for(W=0;W<_.length;W++)le=m.g=_[W],M=Wn(le,T,!1,m)&&M}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],T=0;T<_.length;T++)et(_[T]);delete u.g[m],u.h--}}this.F=null},De.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},De.prototype.L=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function Wn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,W=0;W<m.length;++W){var le=m[W];if(le&&!le.da&&le.capture==_){var nt=le.listener,At=le.ha||le.src;le.fa&&$n(u.i,le),M=nt.call(At,T)!==!1&&M}}return M&&!T.defaultPrevented}function Zi(u,m,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function ur(u){u.g=Zi(()=>{u.g=null,u.i&&(u.i=!1,ur(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class cr extends Q{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ur(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(u){Q.call(this),this.h=u,this.g={}}B(Nr,Q);var es=[];function ts(u){re(u.g,function(m,_){this.g.hasOwnProperty(_)&&Y(m)},u),u.g={}}Nr.prototype.N=function(){Nr.aa.N.call(this),ts(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ns=p.JSON.stringify,rs=p.JSON.parse,is=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function br(){}br.prototype.h=null;function ri(u){return u.h||(u.h=u.i())}function ii(){}var an={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tt(){me.call(this,"d")}B(tt,me);function En(){me.call(this,"c")}B(En,me);var dr={},na=null;function ss(){return na=na||new De}dr.La="serverreachability";function ra(u){me.call(this,dr.La,u)}B(ra,me);function jr(u){const m=ss();Xe(m,new ra(m))}dr.STAT_EVENT="statevent";function ia(u,m){me.call(this,dr.STAT_EVENT,u),this.stat=m}B(ia,me);function _t(u){const m=ss();Xe(m,new ia(m,u))}dr.Ma="timingevent";function Hs(u,m){me.call(this,dr.Ma,u),this.size=m}B(Hs,me);function Hn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function os(){this.g=!0}os.prototype.xa=function(){this.g=!1};function as(u,m,_,T,M,W){u.info(function(){if(u.g)if(W)for(var le="",nt=W.split("&"),At=0;At<nt.length;At++){var Ge=nt[At].split("=");if(1<Ge.length){var Vt=Ge[0];Ge=Ge[1];var It=Vt.split("_");le=2<=It.length&&It[1]=="type"?le+(Vt+"="+Ge+"&"):le+(Vt+"=redacted&")}}else le=null;else le=W;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+m+`
`+_+`
`+le})}function qs(u,m,_,T,M,W,le){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+m+`
`+_+`
`+W+" "+le})}function qn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Qc(u,_)+(T?" "+T:"")})}function sa(u,m){u.info(function(){return"TIMEOUT: "+m})}os.prototype.info=function(){};function Qc(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var W=M[0];if(W!="noop"&&W!="stop"&&W!="close")for(var le=1;le<M.length;le++)M[le]=""}}}}return ns(_)}catch{return m}}var Gs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gn;function ls(){}B(ls,br),ls.prototype.g=function(){return new XMLHttpRequest},ls.prototype.i=function(){return{}},Gn=new ls;function Kn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.R=T||1,this.U=new Nr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pl}function Pl(){this.i=null,this.g="",this.h=!1}var oa={},Ks={};function Qs(u,m,_){u.L=1,u.v=ui(xn(m)),u.m=_,u.P=!0,aa(u,null)}function aa(u,m){u.F=Date.now(),ot(u),u.A=xn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),di(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Pl,u.g=Hl(u.j,_?m:null,!u.m),0<u.O&&(u.M=new cr(S(u.Y,u,u.g),u.O)),m=u.U,_=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(es[0]=M.toString()),M=es);for(var W=0;W<M.length;W++){var le=ue(_,M[W],T||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),jr(),as(u.i,u.u,u.A,u.l,u.R,u.m)}Kn.prototype.ca=function(u){u=u.target;const m=this.M;m&&un(u)==3?m.j():this.Y(u)},Kn.prototype.Y=function(u){try{if(u==this.g)e:{const It=un(this.g);var m=this.g.Ba();const jn=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||fa(this.g)))){this.J||It!=4||m==7||(m==8||0>=jn?jr(3):jr(2)),us(this);var _=this.g.Z();this.X=_;t:if(Rl(this)){var T=fa(this.g);u="";var M=T.length,W=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nn(this),si(this);var le="";break t}this.h.i=new p.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(W&&m==M-1)});T.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,qs(this.i,this.u,this.A,this.l,this.R,It,_),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,At=this.g;if((nt=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(nt)){var Ge=nt;break t}}Ge=null}if(_=Ge)qn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,la(this,_);else{this.o=!1,this.s=3,_t(12),Nn(this),si(this);break e}}if(this.P){_=!0;let Sn;for(;!this.J&&this.C<le.length;)if(Sn=Yc(this,le),Sn==Ks){It==4&&(this.s=4,_t(14),_=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==oa){this.s=4,_t(15),qn(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else qn(this.i,this.l,Sn,null),la(this,Sn);if(Rl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||le.length!=0||this.h.h||(this.s=1,_t(16),_=!1),this.o=this.o&&_,!_)qn(this.i,this.l,le,"[Invalid Chunked Response]"),Nn(this),si(this);else if(0<le.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),ma(Vt),Vt.M=!0,_t(11))}}else qn(this.i,this.l,le,null),la(this,le);It==4&&Nn(this),this.o&&!this.J&&(It==4?oo(this.j,this):(this.o=!1,ot(this)))}else to(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Nn(this),si(this)}}}catch{}finally{}};function Rl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Yc(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?Ks:(_=Number(m.substring(_,T)),isNaN(_)?oa:(T+=1,T+_>m.length?Ks:(m=m.slice(T,T+_),u.C=T+_,m)))}Kn.prototype.cancel=function(){this.J=!0,Nn(this)};function ot(u){u.S=Date.now()+u.I,Al(u,u.I)}function Al(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Hn(S(u.ba,u),m)}function us(u){u.B&&(p.clearTimeout(u.B),u.B=null)}Kn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(sa(this.i,this.A),this.L!=2&&(jr(),_t(17)),Nn(this),this.s=2,si(this)):Al(this,this.S-u)};function si(u){u.j.G==0||u.J||oo(u.j,u)}function Nn(u){us(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ts(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function la(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||nn(_.h,u))){if(!u.K&&nn(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)so(_),Zn(_);else break e;io(_),_t(18)}}else _.za=M[1],0<_.za-_.T&&37500>M[2]&&_.F&&_.v==0&&!_.C&&(_.C=Hn(S(_.Za,_),6e3));if(1>=Nl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Mr(_,11)}else if((u.K||_.g==u)&&so(_),!X(m))for(M=_.Da.g.parse(m),m=0;m<M.length;m++){let Ge=M[m];if(_.T=Ge[0],Ge=Ge[1],_.G==2)if(Ge[0]=="c"){_.K=Ge[1],_.ia=Ge[2];const Vt=Ge[3];Vt!=null&&(_.la=Vt,_.j.info("VER="+_.la));const It=Ge[4];It!=null&&(_.Aa=It,_.j.info("SVER="+_.Aa));const jn=Ge[5];jn!=null&&typeof jn=="number"&&0<jn&&(T=1.5*jn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Sn=u.g;if(Sn){const gs=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var W=T.h;W.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ua(W,W.h),W.h=null))}if(T.D){const lo=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;lo&&(T.ya=lo,it(T.I,T.D,lo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var le=u;if(T.qa=Wl(T,T.J?T.ia:null,T.W),le.K){bl(T.h,le);var nt=le,At=T.L;At&&(nt.I=At),nt.B&&(us(nt),ot(nt)),T.g=le}else ms(T);0<_.i.length&&mr(_)}else Ge[0]!="stop"&&Ge[0]!="close"||Mr(_,7);else _.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Mr(_,7):zt(_):Ge[0]!="noop"&&_.l&&_.l.ta(Ge),_.v=0)}}jr(4)}catch{}}var kl=class{constructor(u,m){this.g=u,this.map=m}};function cs(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Nl(u){return u.h?1:u.g?u.g.size:0}function nn(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ua(u,m){u.g?u.g.add(m):u.h=m}function bl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}cs.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function jl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return q(u.i)}function Ys(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],_=u.length,T=0;T<_;T++)m.push(u[T]);return m}m=[],_=0;for(T in u)m[_++]=u[T];return m}function Js(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const T in u)m[_++]=T;return m}}}function oi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Js(u),T=Ys(u),M=T.length,W=0;W<M;W++)m.call(void 0,T[W],_&&_[W],u)}var ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jc(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),M=null;if(0<=T){var W=u[_].substring(0,T);M=u[_].substring(T+1)}else W=u[_];m(W,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Dr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Dr){this.h=u.h,hs(this,u.j),this.o=u.o,this.g=u.g,ai(this,u.s),this.l=u.l;var m=u.i,_=new hr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),li(this,_),this.m=u.m}else u&&(m=String(u).match(ds))?(this.h=!1,hs(this,m[1]||"",!0),this.o=He(m[2]||""),this.g=He(m[3]||"",!0),ai(this,m[4]),this.l=He(m[5]||"",!0),li(this,m[6]||"",!0),this.m=He(m[7]||"")):(this.h=!1,this.i=new hr(null,this.h))}Dr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ci(m,Xs,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ci(m,Xs,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ci(_,_.charAt(0)=="/"?Ol:Vl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ci(_,ca)),u.join("")};function xn(u){return new Dr(u)}function hs(u,m,_){u.j=_?He(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ai(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function li(u,m,_){m instanceof hr?(u.i=m,fr(u.i,u.h)):(_||(m=ci(m,Ll)),u.i=new hr(m,u.h))}function it(u,m,_){u.i.set(m,_)}function ui(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function He(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ci(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Dl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Dl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xs=/[#\/\?@]/g,Vl=/[#\?:]/g,Ol=/[#\?]/g,Ll=/[#\?@]/g,ca=/#/g;function hr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Ut(u){u.g||(u.g=new Map,u.h=0,u.i&&Jc(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=hr.prototype,r.add=function(u,m){Ut(this),this.i=null,u=bn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Qn(u,m){Ut(u),m=bn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Yn(u,m){return Ut(u),m=bn(u,m),u.g.has(m)}r.forEach=function(u,m){Ut(this),this.g.forEach(function(_,T){_.forEach(function(M){u.call(m,M,T,this)},this)},this)},r.na=function(){Ut(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const M=u[T];for(let W=0;W<M.length;W++)_.push(m[T])}return _},r.V=function(u){Ut(this);let m=[];if(typeof u=="string")Yn(this,u)&&(m=m.concat(this.g.get(bn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Ut(this),this.i=null,u=bn(this,u),Yn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function di(u,m,_){Qn(u,m),0<_.length&&(u.i=null,u.g.set(bn(u,m),q(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const W=encodeURIComponent(String(T)),le=this.V(T);for(T=0;T<le.length;T++){var M=W;le[T]!==""&&(M+="="+encodeURIComponent(String(le[T]))),u.push(M)}}return this.i=u.join("&")};function bn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function fr(u,m){m&&!u.j&&(Ut(u),u.i=null,u.g.forEach(function(_,T){var M=T.toLowerCase();T!=M&&(Qn(this,T),di(this,M,_))},u)),u.j=m}function Xc(u,m){const _=new os;if(p.Image){const T=new Image;T.onload=O(ln,_,"TestLoadImage: loaded",!0,m,T),T.onerror=O(ln,_,"TestLoadImage: error",!1,m,T),T.onabort=O(ln,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=O(ln,_,"TestLoadImage: timeout",!1,m,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Ml(u,m){const _=new os,T=new AbortController,M=setTimeout(()=>{T.abort(),ln(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(W=>{clearTimeout(M),W.ok?ln(_,"TestPingServer: ok",!0,m):ln(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),ln(_,"TestPingServer: error",!1,m)})}function ln(u,m,_,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(_)}catch{}}function Zc(){this.g=new is}function Fl(u,m,_){const T=_||"";try{oi(u,function(M,W){let le=M;v(M)&&(le=ns(M)),m.push(T+W+"="+encodeURIComponent(le))})}catch(M){throw m.push(T+"type="+encodeURIComponent("_badmap")),M}}function Vr(u){this.l=u.Ub||null,this.j=u.eb||!1}B(Vr,br),Vr.prototype.g=function(){return new fs(this.l,this.j)},Vr.prototype.i=(function(u){return function(){return u}})({});function fs(u,m){De.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(fs,De),r=fs.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Xn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ul(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ul(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Jn(this):Xn(this),this.readyState==3&&Ul(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Jn(this))},r.Qa=function(u){this.g&&(this.response=u,Jn(this))},r.ga=function(){this.g&&Jn(this)};function Jn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Or(u){let m="";return re(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function hi(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Or(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):it(u,m,_))}function ft(u){De.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(ft,De);var ed=/^https?$/i,da=["POST","PUT"];r=ft.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gn.g(),this.v=this.o?ri(this.o):ri(Gn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){ps(this,W);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)_.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())_.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),M=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(da,m,void 0))||T||M||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,le]of _)this.g.setRequestHeader(W,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eo(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){ps(this,W)}};function ps(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Zs(u),In(u)}function Zs(u){u.A||(u.A=!0,Xe(u,"complete"),Xe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Xe(this,"complete"),Xe(this,"abort"),In(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),In(this,!0)),ft.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ha(this):this.bb())},r.bb=function(){ha(this)};function ha(u){if(u.h&&typeof d<"u"&&(!u.v[1]||un(u)!=4||u.Z()!=2)){if(u.u&&un(u)==4)Zi(u.Ea,0,u);else if(Xe(u,"readystatechange"),un(u)==4){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=le===0){var M=String(u.D).match(ds)[1]||null;!M&&p.self&&p.self.location&&(M=p.self.location.protocol.slice(0,-1)),T=!ed.test(M?M.toLowerCase():"")}_=T}if(_)Xe(u,"complete"),Xe(u,"success");else{u.m=6;try{var W=2<un(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Zs(u)}}finally{In(u)}}}}function In(u,m){if(u.g){eo(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Xe(u,"ready");try{_.onreadystatechange=T}catch{}}}function eo(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function un(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),rs(m)}};function fa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function to(u){const m={};u=(u.g&&2<=un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(X(u[T]))continue;var _=D(u[T]);const M=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=m[M]||[];m[M]=W,W.push(_)}k(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function pa(u){this.Aa=0,this.i=[],this.j=new os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pr("baseRetryDelayMs",5e3,u),this.cb=pr("retryDelaySeedMs",1e4,u),this.Wa=pr("forwardChannelMaxRetries",2,u),this.wa=pr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new cs(u&&u.concurrentRequestLimit),this.Da=new Zc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=pa.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,T){_t(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Wl(this,null,this.W),mr(this)};function zt(u){if(no(u),u.G==3){var m=u.U++,_=xn(u.I);if(it(_,"SID",u.K),it(_,"RID",m),it(_,"TYPE","terminate"),Lr(u,_),m=new Kn(u,u.j,m),m.L=2,m.v=ui(xn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Hl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ot(m)}$l(u)}function Zn(u){u.g&&(ma(u),u.g.cancel(),u.g=null)}function no(u){Zn(u),u.u&&(p.clearTimeout(u.u),u.u=null),so(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function mr(u){if(!Tn(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ye||ce(),ae||(Ye(),ae=!0),ve.add(m,u),u.B=0}}function td(u,m){return Nl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Hn(S(u.Ga,u,m),Bl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Kn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=I(W),P(W,this.S)):W=this.S),this.m!==null||this.O||(M.H=W,W=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=fi(this,M,m),_=xn(this.I),it(_,"RID",u),it(_,"CVER",22),this.D&&it(_,"X-HTTP-Session-Id",this.D),Lr(this,_),W&&(this.O?m="headers="+encodeURIComponent(String(Or(W)))+"&"+m:this.m&&hi(_,this.m,W)),ua(this.h,M),this.Ua&&it(_,"TYPE","init"),this.P?(it(_,"$req",m),it(_,"SID","null"),M.T=!0,Qs(M,_,null)):Qs(M,_,m),this.G=2}}else this.G==3&&(u?ro(this,u):this.i.length==0||Tn(this.h)||ro(this))};function ro(u,m){var _;m?_=m.l:_=u.U++;const T=xn(u.I);it(T,"SID",u.K),it(T,"RID",_),it(T,"AID",u.T),Lr(u,T),u.m&&u.o&&hi(T,u.m,u.o),_=new Kn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=fi(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ua(u.h,_),Qs(_,T,m)}function Lr(u,m){u.H&&re(u.H,function(_,T){it(m,T,_)}),u.l&&oi({},function(_,T){it(m,T,_)})}function fi(u,m,_){_=Math.min(u.i.length,_);var T=u.l?S(u.l.Na,u.l,u):null;e:{var M=u.i;let W=-1;for(;;){const le=["count="+_];W==-1?0<_?(W=M[0].g,le.push("ofs="+W)):W=0:le.push("ofs="+W);let nt=!0;for(let At=0;At<_;At++){let Ge=M[At].g;const Vt=M[At].map;if(Ge-=W,0>Ge)W=Math.max(0,M[At].g-100),nt=!1;else try{Fl(Vt,le,"req"+Ge+"_")}catch{T&&T(Vt)}}if(nt){T=le.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,T}function ms(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ye||ce(),ae||(Ye(),ae=!0),ve.add(m,u),u.v=0}}function io(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Hn(S(u.Fa,u),Bl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,zl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Hn(S(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),Zn(this),zl(this))};function ma(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function zl(u){u.g=new Kn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=xn(u.qa);it(m,"RID","rpc"),it(m,"SID",u.K),it(m,"AID",u.T),it(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(m,"TO",u.ja),it(m,"TYPE","xmlhttp"),Lr(u,m),u.m&&u.o&&hi(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ui(xn(m)),_.m=null,_.P=!0,aa(_,u)}r.Za=function(){this.C!=null&&(this.C=null,Zn(this),io(this),_t(19))};function so(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function oo(u,m){var _=null;if(u.g==m){so(u),ma(u),u.g=null;var T=2}else if(nn(u.h,m))_=m.D,bl(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;T=ss(),Xe(T,new Hs(T,_)),mr(u)}else ms(u);else if(M=m.s,M==3||M==0&&0<m.X||!(T==1&&td(u,m)||T==2&&io(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),M){case 1:Mr(u,5);break;case 4:Mr(u,10);break;case 3:Mr(u,6);break;default:Mr(u,2)}}}function Bl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Mr(u,m){if(u.j.info("Error code "+m),m==2){var _=S(u.fb,u),T=u.Xa;const M=!T;T=new Dr(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||hs(T,"https"),ui(T),M?Xc(T.toString(),_):Ml(T.toString(),_)}else _t(2);u.G=0,u.l&&u.l.sa(m),$l(u),no(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function $l(u){if(u.G=0,u.ka=[],u.l){const m=jl(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.ra()}}function Wl(u,m,_){var T=_ instanceof Dr?xn(_):new Dr(_);if(T.g!="")m&&(T.g=m+"."+T.g),ai(T,T.s);else{var M=p.location;T=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var W=new Dr(null);T&&hs(W,T),m&&(W.g=m),M&&ai(W,M),_&&(W.l=_),T=W}return _=u.D,m=u.ya,_&&m&&it(T,_,m),it(T,"VER",u.la),Lr(u,T),T}function Hl(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new ft(new Vr({eb:_})):new ft(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ga(){}r=ga.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ao(){}ao.prototype.g=function(u,m){return new rn(u,m)};function rn(u,m){De.call(this),this.g=new pa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!X(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!X(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new gr(this)}B(rn,De),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){zt(this.g)},rn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ns(u),u=_);m.i.push(new kl(m.Ya++,u)),m.G==3&&mr(m)},rn.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,rn.aa.N.call(this)};function ql(u){tt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}B(ql,tt);function Gl(){En.call(this),this.status=1}B(Gl,En);function gr(u){this.g=u}B(gr,ga),gr.prototype.ua=function(){Xe(this.g,"a")},gr.prototype.ta=function(u){Xe(this.g,new ql(u))},gr.prototype.sa=function(u){Xe(this.g,new Gl)},gr.prototype.ra=function(){Xe(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,N_=function(){return new ao},k_=function(){return ss()},A_=dr,Zh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gs.NO_ERROR=0,Gs.TIMEOUT=8,Gs.HTTP_ERROR=6,Zu=Gs,Cl.COMPLETE="complete",R_=Cl,ii.EventType=an,an.OPEN="a",an.CLOSE="b",an.ERROR="c",an.MESSAGE="d",De.prototype.listen=De.prototype.K,Wa=ii,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,P_=ft}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const gy="@firebase/firestore",yy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Tf("@firebase/firestore");function No(){return Ms.logLevel}function ge(r,...e){if(Ms.logLevel<=$e.DEBUG){const t=e.map(Of);Ms.debug(`Firestore (${Jo}): ${r}`,...t)}}function Zr(r,...e){if(Ms.logLevel<=$e.ERROR){const t=e.map(Of);Ms.error(`Firestore (${Jo}): ${r}`,...t)}}function zi(r,...e){if(Ms.logLevel<=$e.WARN){const t=e.map(Of);Ms.warn(`Firestore (${Jo}): ${r}`,...t)}}function Of(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,b_(r,i,t)}function b_(r,e,t){let i=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Zr(i),new Error(i)}function Ze(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||b_(e,o,i)}function Oe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends ni{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zt.UNAUTHENTICATED)))}shutdown(){}}class T1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class x1{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Yr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Yr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string",31837,{l:i}),new j_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class I1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class S1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new I1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const i=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=P1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ue(r,e){return r<e?-1:r>e?1:0}function ef(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ue(i,o);{const l=D_(),d=R1(l.encode(_y(r,t)),l.encode(_y(e,t)));return d!==0?d:Ue(i,o)}}t+=i>65535?2:1}return Ue(r.length,e.length)}function _y(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function R1(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Ue(r[t],e[t]);return Ue(r.length,e.length)}function zo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="__name__";class Er{constructor(e,t,i){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Er.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Er?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Er.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ue(e.length,t.length)}static compareSegments(e,t){const i=Er.isNumericId(e),o=Er.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Er.extractNumericId(e).compare(Er.extractNumericId(t)):ef(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mi.fromString(e.substring(4,e.length-2))}}class dt extends Er{construct(e,t,i){return new dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const A1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Er{construct(e,t,i){return new Ht(e,t,i)}static isValidIdentifier(e){return A1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wy}static keyField(){return new Ht([wy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Te(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Te(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Te(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(l(),o++)}if(l(),d)throw new Te(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(t)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(dt.fromString(e))}static fromName(e){return new Re(dt.fromString(e).popFirst(5))}static empty(){return new Re(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(r,e,t){if(!t)throw new Te(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function k1(r,e,t,i){if(e===!0&&i===!0)throw new Te(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ey(r){if(!Re.isDocumentKey(r))throw new Te(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ty(r){if(Re.isDocumentKey(r))throw new Te(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function O_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Mf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":be(12329,{type:typeof r})}function ei(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Te(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mf(r);throw new Te(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(r,e){const t={typeString:r};return e&&(t.value=e),t}function wl(r,e){if(!O_(r))throw new Te(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Te(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=-62135596800,Iy=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Iy);return new ht(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xy)throw new Te(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iy}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wl(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Pt("string",ht._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new ht(0,0))}static max(){return new Ve(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=-1;function N1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ve.fromTimestamp(i===1e9?new ht(t+1,0):new ht(t,i));return new Bi(o,Re.empty(),e)}function b1(r){return new Bi(r.readTime,r.key,al)}class Bi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Bi(Ve.min(),Re.empty(),al)}static max(){return new Bi(Ve.max(),Re.empty(),al)}}function j1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(r.documentKey,e.documentKey),t!==0?t:Ue(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==D1)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):J.reject(t)}static resolve(e){return new J(((t,i)=>{t(e)}))}static reject(e){return new J(((t,i)=>{i(e)}))}static waitFor(e){return new J(((t,i)=>{let o=0,l=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++l,d&&l===o&&t()}),(y=>i(y)))})),d=!0,l===o&&t()}))}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next((o=>o?J.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new J(((i,o)=>{const l=e.length,d=new Array(l);let p=0;for(let y=0;y<l;y++){const v=y;t(e[v]).next((E=>{d[v]=E,++p,p===l&&i(d)}),(E=>o(E)))}}))}static doWhile(e,t){return new J(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function O1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}bc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=-1;function jc(r){return r==null}function pc(r){return r===0&&1/r==-1/0}function L1(r){return typeof r=="number"&&Number.isInteger(r)&&!pc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="";function M1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Sy(e)),e=F1(r.get(t),e);return Sy(e)}function F1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case L_:t+="";break;default:t+=l}}return t}function Sy(r){return r+L_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ji(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function M_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $u(this.root,e,this.comparator,!1)}getReverseIterator(){return new $u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $u(this.root,e,this.comparator,!0)}}class $u{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Wt.RED,this.left=o??Wt.EMPTY,this.right=l??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Wt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Wt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(e){return new Py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class Py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new kn([])}unionWith(e){let t=new Dt(Ht.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new F_("Invalid base64 string: "+l):l}})(e);return new Gt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const U1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(r){if(Ze(!!r,39018),typeof r=="string"){let e=0;const t=U1.exec(r);if(Ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(r.seconds),nanos:Tt(r.nanos)}}function Tt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Wi(r){return typeof r=="string"?Gt.fromBase64String(r):Gt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="server_timestamp",z_="__type__",B_="__previous_value__",$_="__local_write_time__";function Uf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[z_])===null||t===void 0?void 0:t.stringValue)===U_}function Dc(r){const e=r.mapValue.fields[B_];return Uf(e)?Dc(e):e}function ll(r){const e=$i(r.mapValue.fields[$_].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t,i,o,l,d,p,y,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=E}}const mc="(default)";class ul{constructor(e,t){this.projectId=e,this.database=t||mc}static empty(){return new ul("","")}get isDefaultDatabase(){return this.database===mc}isEqual(e){return e instanceof ul&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="__type__",B1="__max__",Wu={mapValue:{}},H_="__vector__",gc="value";function Hi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Uf(r)?4:W1(r)?9007199254740991:$1(r)?10:11:be(28295,{value:r})}function Ar(r,e){if(r===e)return!0;const t=Hi(r);if(t!==Hi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ll(r).isEqual(ll(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=$i(o.timestampValue),p=$i(l.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Wi(o.bytesValue).isEqual(Wi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return Tt(o.geoPointValue.latitude)===Tt(l.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Tt(o.integerValue)===Tt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=Tt(o.doubleValue),p=Tt(l.doubleValue);return d===p?pc(d)===pc(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return zo(r.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Cy(d)!==Cy(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!Ar(d[y],p[y])))return!1;return!0})(r,e);default:return be(52216,{left:r})}}function cl(r,e){return(r.values||[]).find((t=>Ar(t,e)))!==void 0}function Bo(r,e){if(r===e)return 0;const t=Hi(r),i=Hi(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const p=Tt(l.integerValue||l.doubleValue),y=Tt(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(r,e);case 3:return Ry(r.timestampValue,e.timestampValue);case 4:return Ry(ll(r),ll(e));case 5:return ef(r.stringValue,e.stringValue);case 6:return(function(l,d){const p=Wi(l),y=Wi(d);return p.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const p=l.split("/"),y=d.split("/");for(let v=0;v<p.length&&v<y.length;v++){const E=Ue(p[v],y[v]);if(E!==0)return E}return Ue(p.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const p=Ue(Tt(l.latitude),Tt(d.latitude));return p!==0?p:Ue(Tt(l.longitude),Tt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ay(r.arrayValue,e.arrayValue);case 10:return(function(l,d){var p,y,v,E;const x=l.fields||{},S=d.fields||{},O=(p=x[gc])===null||p===void 0?void 0:p.arrayValue,B=(y=S[gc])===null||y===void 0?void 0:y.arrayValue,q=Ue(((v=O==null?void 0:O.values)===null||v===void 0?void 0:v.length)||0,((E=B==null?void 0:B.values)===null||E===void 0?void 0:E.length)||0);return q!==0?q:Ay(O,B)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Wu.mapValue&&d===Wu.mapValue)return 0;if(l===Wu.mapValue)return 1;if(d===Wu.mapValue)return-1;const p=l.fields||{},y=Object.keys(p),v=d.fields||{},E=Object.keys(v);y.sort(),E.sort();for(let x=0;x<y.length&&x<E.length;++x){const S=ef(y[x],E[x]);if(S!==0)return S;const O=Bo(p[y[x]],v[E[x]]);if(O!==0)return O}return Ue(y.length,E.length)})(r.mapValue,e.mapValue);default:throw be(23264,{le:t})}}function Ry(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ue(r,e);const t=$i(r),i=$i(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function Ay(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Bo(t[o],i[o]);if(l)return l}return Ue(t.length,i.length)}function $o(r){return tf(r)}function tf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=$i(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Wi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Re.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=tf(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of i)l?l=!1:o+=",",o+=`${d}:${tf(t.fields[d])}`;return o+"}"})(r.mapValue):be(61005,{value:r})}function ec(r){switch(Hi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dc(r);return e?16+ec(e):16;case 5:return 2*r.stringValue.length;case 6:return Wi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+ec(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Ji(i.fields,((l,d)=>{o+=l.length+ec(d)})),o})(r.mapValue);default:throw be(13486,{value:r})}}function nf(r){return!!r&&"integerValue"in r}function zf(r){return!!r&&"arrayValue"in r}function ky(r){return!!r&&"nullValue"in r}function Ny(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function tc(r){return!!r&&"mapValue"in r}function $1(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[W_])===null||t===void 0?void 0:t.stringValue)===H_}function Xa(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ji(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Xa(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xa(r.arrayValue.values[t]);return e}return Object.assign({},r)}function W1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===B1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xa(t)}setAll(e){let t=Ht.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=p.popLast()}d?i[p.lastSegment()]=Xa(d):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ji(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new yn(Xa(this.value))}}function q_(r){const e=[];return Ji(r.fields,((t,i)=>{const o=new Ht([t]);if(tc(i)){const l=q_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,i,o,l,d,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=d,this.documentState=p}static newInvalidDocument(e){return new en(e,0,Ve.min(),Ve.min(),Ve.min(),yn.empty(),0)}static newFoundDocument(e,t,i,o){return new en(e,1,t,Ve.min(),i,o,0)}static newNoDocument(e,t){return new en(e,2,t,Ve.min(),Ve.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,Ve.min(),Ve.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){this.position=e,this.inclusive=t}}function by(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?i=Re.comparator(Re.fromName(d.referenceValue),t.key):i=Bo(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function jy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ar(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function H1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{}class bt extends G_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new G1(e,t,i):t==="array-contains"?new Y1(e,i):t==="in"?new J1(e,i):t==="not-in"?new X1(e,i):t==="array-contains-any"?new Z1(e,i):new bt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new K1(e,i):new Q1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&Hi(this.value)===Hi(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends G_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new kr(e,t)}matches(e){return K_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function K_(r){return r.op==="and"}function Q_(r){return q1(r)&&K_(r)}function q1(r){for(const e of r.filters)if(e instanceof kr)return!1;return!0}function rf(r){if(r instanceof bt)return r.field.canonicalString()+r.op.toString()+$o(r.value);if(Q_(r))return r.filters.map((e=>rf(e))).join(",");{const e=r.filters.map((t=>rf(t))).join(",");return`${r.op}(${e})`}}function Y_(r,e){return r instanceof bt?(function(i,o){return o instanceof bt&&i.op===o.op&&i.field.isEqual(o.field)&&Ar(i.value,o.value)})(r,e):r instanceof kr?(function(i,o){return o instanceof kr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,d,p)=>l&&Y_(d,o.filters[p])),!0):!1})(r,e):void be(19439)}function J_(r){return r instanceof bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`})(r):r instanceof kr?(function(t){return t.op.toString()+" {"+t.getFilters().map(J_).join(" ,")+"}"})(r):"Filter"}class G1 extends bt{constructor(e,t,i){super(e,t,i),this.key=Re.fromName(i.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class K1 extends bt{constructor(e,t){super(e,"in",t),this.keys=X_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Q1 extends bt{constructor(e,t){super(e,"not-in",t),this.keys=X_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function X_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Re.fromName(i.referenceValue)))}class Y1 extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zf(t)&&cl(t.arrayValue,this.value)}}class J1 extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cl(this.value.arrayValue,t)}}class X1 extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cl(this.value.arrayValue,t)}}class Z1 extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>cl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t=null,i=[],o=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=d,this.endAt=p,this.Pe=null}}function Dy(r,e=null,t=[],i=[],o=null,l=null,d=null){return new eC(r,e,t,i,o,l,d)}function Bf(r){const e=Oe(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>rf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),jc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>$o(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>$o(i))).join(",")),e.Pe=t}return e.Pe}function $f(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!H1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Y_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!jy(r.startAt,e.startAt)&&jy(r.endAt,e.endAt)}function sf(r){return Re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t=null,i=[],o=[],l=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=y,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function tC(r,e,t,i,o,l,d,p){return new Vc(r,e,t,i,o,l,d,p)}function Wf(r){return new Vc(r)}function Vy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function nC(r){return r.collectionGroup!==null}function Za(r){const e=Oe(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Dt(Ht.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new vc(l,i))})),t.has(Ht.keyField().canonicalString())||e.Te.push(new vc(Ht.keyField(),i))}return e.Te}function Sr(r){const e=Oe(r);return e.Ie||(e.Ie=rC(e,Za(r))),e.Ie}function rC(r,e){if(r.limitType==="F")return Dy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new vc(o.field,l)}));const t=r.endAt?new yc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new yc(r.startAt.position,r.startAt.inclusive):null;return Dy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function of(r,e,t){return new Vc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Oc(r,e){return $f(Sr(r),Sr(e))&&r.limitType===e.limitType}function Z_(r){return`${Bf(Sr(r))}|lt:${r.limitType}`}function bo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>J_(o))).join(", ")}]`),jc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>$o(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>$o(o))).join(",")),`Target(${i})`})(Sr(r))}; limitType=${r.limitType})`}function Lc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Re.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Za(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,y){const v=by(d,p,y);return d.inclusive?v<=0:v<0})(i.startAt,Za(i),o)||i.endAt&&!(function(d,p,y){const v=by(d,p,y);return d.inclusive?v>=0:v>0})(i.endAt,Za(i),o))})(r,e)}function iC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function e0(r){return(e,t)=>{let i=!1;for(const o of Za(r)){const l=sC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function sC(r,e,t){const i=r.field.isKeyField()?Re.comparator(e.key,t.key):(function(l,d,p){const y=d.data.field(l),v=p.data.field(l);return y!==null&&v!==null?Bo(y,v):be(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return be(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return M_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new yt(Re.comparator);function ti(){return oC}const t0=new yt(Re.comparator);function Ha(...r){let e=t0;for(const t of r)e=e.insert(t.key,t);return e}function n0(r){let e=t0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function bs(){return el()}function r0(){return el()}function el(){return new $s((r=>r.toString()),((r,e)=>r.isEqual(e)))}const aC=new yt(Re.comparator),lC=new Dt(Re.comparator);function We(...r){let e=lC;for(const t of r)e=e.add(t);return e}const uC=new Dt(Ue);function cC(){return uC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function i0(r){return{integerValue:""+r}}function dC(r,e){return L1(e)?i0(e):Hf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this._=void 0}}function hC(r,e,t){return r instanceof _c?(function(o,l){const d={fields:{[z_]:{stringValue:U_},[$_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Uf(l)&&(l=Dc(l)),l&&(d.fields[B_]=l),{mapValue:d}})(t,e):r instanceof dl?o0(r,e):r instanceof hl?a0(r,e):(function(o,l){const d=s0(o,l),p=Oy(d)+Oy(o.Ee);return nf(d)&&nf(o.Ee)?i0(p):Hf(o.serializer,p)})(r,e)}function fC(r,e,t){return r instanceof dl?o0(r,e):r instanceof hl?a0(r,e):t}function s0(r,e){return r instanceof wc?(function(i){return nf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class _c extends Mc{}class dl extends Mc{constructor(e){super(),this.elements=e}}function o0(r,e){const t=l0(e);for(const i of r.elements)t.some((o=>Ar(o,i)))||t.push(i);return{arrayValue:{values:t}}}class hl extends Mc{constructor(e){super(),this.elements=e}}function a0(r,e){let t=l0(e);for(const i of r.elements)t=t.filter((o=>!Ar(o,i)));return{arrayValue:{values:t}}}class wc extends Mc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Oy(r){return Tt(r.integerValue||r.doubleValue)}function l0(r){return zf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function pC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof dl&&o instanceof dl||i instanceof hl&&o instanceof hl?zo(i.elements,o.elements,Ar):i instanceof wc&&o instanceof wc?Ar(i.Ee,o.Ee):i instanceof _c&&o instanceof _c})(r.transform,e.transform)}class mC{constructor(e,t){this.version=e,this.transformResults=t}}class lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Fc{}function u0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new qf(r.key,lr.none()):new El(r.key,r.data,lr.none());{const t=r.data,i=yn.empty();let o=new Dt(Ht.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),o=o.add(l)}return new Xi(r.key,i,new kn(o.toArray()),lr.none())}}function gC(r,e,t){r instanceof El?(function(o,l,d){const p=o.value.clone(),y=My(o.fieldTransforms,l,d.transformResults);p.setAll(y),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,t):r instanceof Xi?(function(o,l,d){if(!nc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const p=My(o.fieldTransforms,l,d.transformResults),y=l.data;y.setAll(c0(o)),y.setAll(p),l.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function tl(r,e,t,i){return r instanceof El?(function(l,d,p,y){if(!nc(l.precondition,d))return p;const v=l.value.clone(),E=Fy(l.fieldTransforms,y,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Xi?(function(l,d,p,y){if(!nc(l.precondition,d))return p;const v=Fy(l.fieldTransforms,y,d),E=d.data;return E.setAll(c0(l)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(r,e,t,i):(function(l,d,p){return nc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,t)}function yC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=s0(i.transform,o||null);l!=null&&(t===null&&(t=yn.empty()),t.set(i.field,l))}return t||null}function Ly(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&zo(i,o,((l,d)=>pC(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class El extends Fc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Xi extends Fc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function c0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function My(r,e,t){const i=new Map;Ze(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,p=e.data.field(l.field);i.set(l.field,fC(d,p,t[o]))}return i}function Fy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);i.set(o.field,hC(l,d,e))}return i}class qf extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vC extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&gC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=tl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=tl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=r0();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let p=this.applyToLocalView(d,l.mutatedFields);p=t.has(o.key)?null:p;const y=u0(d,p);y!==null&&i.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Ve.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((t,i)=>Ly(t,i)))&&zo(this.baseMutations,e.baseMutations,((t,i)=>Ly(t,i)))}}class Gf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ze(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return aC})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,i[d].version);return new Gf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Ke;function TC(r){switch(r){case Z.OK:return be(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return be(15467,{code:r})}}function d0(r){if(r===void 0)return Zr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case Ct.OK:return Z.OK;case Ct.CANCELLED:return Z.CANCELLED;case Ct.UNKNOWN:return Z.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return Z.INTERNAL;case Ct.UNAVAILABLE:return Z.UNAVAILABLE;case Ct.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ct.NOT_FOUND:return Z.NOT_FOUND;case Ct.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ct.ABORTED:return Z.ABORTED;case Ct.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ct.DATA_LOSS:return Z.DATA_LOSS;default:return be(39323,{code:r})}}(Ke=Ct||(Ct={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new Mi([4294967295,4294967295],0);function Uy(r){const e=D_().encode(r),t=new C_;return t.update(e),new Uint8Array(t.digest())}function zy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Mi([t,i],0),new Mi([o,l],0)]}class Kf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new qa(`Invalid padding: ${t}`);if(i<0)throw new qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new qa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Mi.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Mi.fromNumber(i)));return o.compare(xC)===1&&(o=new Mi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Uy(e),[i,o]=zy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new Kf(l,o,t);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.fe===0)return;const t=Uy(e),[i,o]=zy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Tl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Uc(Ve.min(),o,new yt(Ue),ti(),We())}}class Tl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Tl(i,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class h0{constructor(e,t){this.targetId=e,this.De=t}}class f0{constructor(e,t,i=Gt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class By{constructor(){this.ve=0,this.Ce=$y(),this.Fe=Gt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=We(),t=We(),i=We();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:be(38017,{changeType:l})}})),new Tl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=$y()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class IC{constructor(e){this.We=e,this.Ge=new Map,this.ze=ti(),this.je=Hu(),this.Je=Hu(),this.He=new yt(Ue)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(sf(l))if(i===0){const d=new Re(l.path);this.Xe(t,d,en.newNoDocument(d,Ve.min()))}else Ze(i===1,20013,{expectedCount:i});else{const d=this.ot(t);if(d!==i){const p=this._t(e),y=p?this.ut(p,e,d):1;if(y!==0){this.rt(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let d,p;try{d=Wi(i).toUint8Array()}catch(y){if(y instanceof F_)return zi("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new Kf(d,o,l)}catch(y){return zi(y instanceof qa?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.fe===0?null:p}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const d=this.We.lt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,d)=>{const p=this.st(d);if(p){if(l.current&&sf(p.target)){const y=new Re(p.target.path);this.Tt(y).has(d)||this.It(d,y)||this.Xe(d,y,en.newNoDocument(y,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}}));let i=We();this.Je.forEach(((l,d)=>{let p=!0;d.forEachWhile((y=>{const v=this.st(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ze.forEach(((l,d)=>d.setReadTime(e)));const o=new Uc(e,t,this.He,this.ze,i);return this.ze=ti(),this.je=Hu(),this.Je=Hu(),this.He=new yt(Ue),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new By,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Dt(Ue),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Dt(Ue),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new By),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new yt(Re.comparator)}function $y(){return new yt(Re.comparator)}const SC={asc:"ASCENDING",desc:"DESCENDING"},CC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PC={and:"AND",or:"OR"};class RC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function af(r,e){return r.useProto3Json||jc(e)?e:{value:e}}function Ec(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function AC(r,e){return Ec(r,e.toTimestamp())}function Cr(r){return Ze(!!r,49232),Ve.fromTimestamp((function(t){const i=$i(t);return new ht(i.seconds,i.nanos)})(r))}function Qf(r,e){return lf(r,e).canonicalString()}function lf(r,e){const t=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function m0(r){const e=dt.fromString(r);return Ze(w0(e),10190,{key:e.toString()}),e}function uf(r,e){return Qf(r.databaseId,e.path)}function Dh(r,e){const t=m0(e);if(t.get(1)!==r.databaseId.projectId)throw new Te(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Te(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Re(y0(t))}function g0(r,e){return Qf(r.databaseId,e)}function kC(r){const e=m0(r);return e.length===4?dt.emptyPath():y0(e)}function cf(r){return new dt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function y0(r){return Ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Wy(r,e,t){return{name:uf(r,e),fields:t.value.mapValue.fields}}function NC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:be(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(Ze(E===void 0||typeof E=="string",58123),Gt.fromBase64String(E||"")):(Ze(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Gt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const E=v.code===void 0?Z.UNKNOWN:d0(v.code);return new Te(E,v.message||"")})(d);t=new f0(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Dh(r,i.document.name),l=Cr(i.document.updateTime),d=i.document.createTime?Cr(i.document.createTime):Ve.min(),p=new yn({mapValue:{fields:i.document.fields}}),y=en.newFoundDocument(o,l,d,p),v=i.targetIds||[],E=i.removedTargetIds||[];t=new rc(v,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Dh(r,i.document),l=i.readTime?Cr(i.readTime):Ve.min(),d=en.newNoDocument(o,l),p=i.removedTargetIds||[];t=new rc([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Dh(r,i.document),l=i.removedTargetIds||[];t=new rc([],l,o,null)}else{if(!("filter"in e))return be(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,d=new EC(o,l),p=i.targetId;t=new h0(p,d)}}return t}function bC(r,e){let t;if(e instanceof El)t={update:Wy(r,e.key,e.value)};else if(e instanceof qf)t={delete:uf(r,e.key)};else if(e instanceof Xi)t={update:Wy(r,e.key,e.data),updateMask:zC(e.fieldMask)};else{if(!(e instanceof vC))return be(16599,{Rt:e.type});t={verify:uf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const p=d.transform;if(p instanceof _c)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof dl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof hl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof wc)return{fieldPath:d.field.canonicalString(),increment:p.Ee};throw be(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:AC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(r,e.precondition)),t}function jC(r,e){return r&&r.length>0?(Ze(e!==void 0,14353),r.map((t=>(function(o,l){let d=o.updateTime?Cr(o.updateTime):Cr(l);return d.isEqual(Ve.min())&&(d=Cr(l)),new mC(d,o.transformResults||[])})(t,e)))):[]}function DC(r,e){return{documents:[g0(r,e.path)]}}function VC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=g0(r,o);const l=(function(v){if(v.length!==0)return _0(kr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(v){if(v.length!==0)return v.map((E=>(function(S){return{field:jo(S.field),direction:MC(S.dir)}})(E)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=af(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function OC(r){let e=kC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ze(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(x){const S=v0(x);return S instanceof kr&&Q_(S)?S.getFilters():[S]})(t.where));let d=[];t.orderBy&&(d=(function(x){return x.map((S=>(function(B){return new vc(Do(B.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(S)))})(t.orderBy));let p=null;t.limit&&(p=(function(x){let S;return S=typeof x=="object"?x.value:x,jc(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(x){const S=!!x.before,O=x.values||[];return new yc(O,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(x){const S=!x.before,O=x.values||[];return new yc(O,S)})(t.endAt)),tC(e,o,d,l,p,"F",y,v)}function LC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function v0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Do(t.unaryFilter.field);return bt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Do(t.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Do(t.unaryFilter.field);return bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Do(t.unaryFilter.field);return bt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(r):r.fieldFilter!==void 0?(function(t){return bt.create(Do(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return kr.create(t.compositeFilter.filters.map((i=>v0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(r):be(30097,{filter:r})}function MC(r){return SC[r]}function FC(r){return CC[r]}function UC(r){return PC[r]}function jo(r){return{fieldPath:r.canonicalString()}}function Do(r){return Ht.fromServerFormat(r.fieldPath)}function _0(r){return r instanceof bt?(function(t){if(t.op==="=="){if(Ny(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NAN"}};if(ky(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ny(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NAN"}};if(ky(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(t.field),op:FC(t.op),value:t.value}}})(r):r instanceof kr?(function(t){const i=t.getFilters().map((o=>_0(o)));return i.length===1?i[0]:{compositeFilter:{op:UC(t.op),filters:i}}})(r):be(54877,{filter:r})}function zC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function w0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,i,o,l=Ve.min(),d=Ve.min(),p=Gt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.gt=e}}function $C(r){const e=OC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?of(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.Dn=new HC}addToCollectionParentIndex(e,t){return this.Dn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(Bi.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class HC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Dt(dt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Dt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E0=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(E0,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Wo(0)}static ur(){return new Wo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="LruGarbageCollector",qC=1048576;function Gy([r,e],[t,i]){const o=Ue(r,t);return o===0?Ue(e,i):o}class GC{constructor(e){this.Tr=e,this.buffer=new Dt(Gy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Gy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ge(qy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zo(t)?ge(qy,"Ignoring IndexedDB error during garbage collection: ",t):await Xo(t)}await this.Rr(3e5)}))}}class QC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return J.resolve(bc.ue);const i=new GC(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Hy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,d,p,y,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,d=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(i=x,p=Date.now(),this.removeTargets(e,i,t)))).next((x=>(l=x,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(v=Date.now(),No()<=$e.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${l} targets in `+(y-p)+`ms
	Removed ${x} documents in `+(v-y)+`ms
Total Duration: ${v-E}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:x}))))}}function YC(r,e){return new QC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.changes=new $s((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&tl(i.mutation,o,kn.empty(),ht.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,We()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=We()){const o=bs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let d=Ha();return l.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=bs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,We())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,i,o){let l=ti();const d=el(),p=(function(){return el()})();return t.forEach(((y,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Xi)?l=l.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),tl(E.mutation,v,E.mutation.getFieldMask(),ht.now())):d.set(v.key,kn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((v,E)=>d.set(v,E))),t.forEach(((v,E)=>{var x;return p.set(v,new XC(E,(x=d.get(v))!==null&&x!==void 0?x:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=el();let o=new yt(((d,p)=>d-p)),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let E=i.get(y)||kn.empty();E=p.applyToLocalView(v,E),i.set(y,E);const x=(o.get(p.batchId)||We()).add(y);o=o.insert(p.batchId,x)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),v=y.key,E=y.value,x=r0();E.forEach((S=>{if(!l.has(S)){const O=u0(t.get(S),i.get(S));O!==null&&x.set(S,O),l=l.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,x))}return J.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return Re.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):J.resolve(bs());let p=al,y=l;return d.next((v=>J.forEach(v,((E,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),l.get(E)?J.resolve():this.remoteDocumentCache.getEntry(e,E).next((S=>{y=y.insert(E,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,y,v,We()))).next((E=>({batchId:p,changes:n0(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((i=>{let o=Ha();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let d=Ha();return this.indexManager.getCollectionParents(e,l).next((p=>J.forEach(p,(y=>{const v=(function(x,S){return new Vc(S,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((x,S)=>{d=d.insert(x,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((d=>{l.forEach(((y,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,en.newInvalidDocument(E)))}));let p=Ha();return d.forEach(((y,v)=>{const E=l.get(y);E!==void 0&&tl(E.mutation,v,kn.empty(),ht.now()),Lc(t,v)&&(p=p.insert(y,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return J.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Cr(o.createTime)}})(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:$C(o.bundledQuery),readTime:Cr(o.readTime)}})(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.overlays=new yt(Re.comparator),this.kr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=bs();return J.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),J.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const o=bs(),l=t.length+1,d=new Re(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new yt(((v,E)=>v-E));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=bs(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const p=bs(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,E)=>p.set(v,E))),!(p.size()>=o)););return J.resolve(p)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new wC(t,i));let l=this.kr.get(t);l===void 0&&(l=We(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this.qr=new Dt(Ft.Qr),this.$r=new Dt(Ft.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Ft(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Re(new dt([])),i=new Ft(t,e),o=new Ft(t,e+1),l=[];return this.$r.forEachInRange([i,o],(d=>{this.Wr(d),l.push(d.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Re(new dt([])),i=new Ft(t,e),o=new Ft(t,e+1);let l=We();return this.$r.forEachInRange([i,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Ft(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Re.comparator(e.key,t.key)||Ue(e.Hr,t.Hr)}static Ur(e,t){return Ue(e.Hr,t.Hr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Dt(Ft.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new _C(l,t,i,o);this.mutationQueue.push(d);for(const p of o)this.Yr=this.Yr.add(new Ft(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return J.resolve(d)}lookupMutationBatch(e,t){return J.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return J.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Ff:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(d=>{const p=this.Zr(d.Hr);l.push(p)})),J.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Dt(Ue);return t.forEach((o=>{const l=new Ft(o,0),d=new Ft(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],(p=>{i=i.add(p.Hr)}))})),J.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Re.isDocumentKey(l)||(l=l.child(""));const d=new Ft(new Re(l),0);let p=new Dt(Ue);return this.Yr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(y.Hr)),!0)}),d),J.resolve(this.ei(p))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ze(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return J.forEach(t.mutations,(o=>{const l=new Ft(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Ft(t,0),o=this.Yr.firstAfterOrEqual(i);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.ni=e,this.docs=(function(){return new yt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let i=ti();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():en.newInvalidDocument(o))})),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=ti();const d=t.path,p=new Re(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:v,value:{document:E}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||j1(b1(E),i)<=0||(o.has(E.key)||Lc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return J.resolve(l)}getAllFromCollectionGroup(e,t,i,o){be(9500)}ri(e,t){return J.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new sP(this)}getSize(e){return J.resolve(this.size)}}class sP extends JC{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),J.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.persistence=e,this.ii=new $s((t=>Bf(t)),$f),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.si=0,this.oi=new Yf,this.targetCount=0,this._i=Wo.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),J.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Wo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.hr(t),J.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((d,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),J.waitFor(l).next((()=>o))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),J.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),J.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,t){this.ai={},this.overlays={},this.ui=new bc(0),this.ci=!1,this.ci=!0,this.li=new nP,this.referenceDelegate=e(this),this.hi=new oP(this),this.indexManager=new WC,this.remoteDocumentCache=(function(o){return new iP(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new BC(t),this.Ti=new eP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new rP(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new aP(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return J.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class aP extends V1{constructor(e){super(),this.currentSequenceNumber=e}}class Jf{constructor(e){this.persistence=e,this.Ai=new Yf,this.Ri=null}static Vi(e){return new Jf(e)}get mi(){if(this.Ri)return this.Ri;throw be(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,(i=>{const o=Re.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ve.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return J.or([()=>J.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Tc{constructor(e,t){this.persistence=e,this.gi=new $s((i=>M1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=YC(this,t)}static Vi(e,t){return new Tc(e,t)}Ii(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return J.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?J.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(d=>this.Sr(e,d,t).next((p=>{p||(i++,l.removeEntry(d,Ve.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),J.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ec(e.data.value)),t}Sr(e,t,i){return J.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return J.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=We(),o=We();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Xf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return BT()?8:O1(tn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new lP;return this.ws(e,t,d).next((p=>{if(l.result=p,this.Rs)return this.Ss(e,t,d,p.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(No()<=$e.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(No()<=$e.DEBUG&&ge("QueryEngine","Query:",bo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(No()<=$e.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(t))):J.resolve())}ps(e,t){if(Vy(t))return J.resolve(null);let i=Sr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=of(t,null,"F"),i=Sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=We(...l);return this.gs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.bs(t,p);return this.Ds(t,v,d,y.readTime)?this.ps(e,of(t,null,"F")):this.vs(e,v,t,y)}))))})))))}ys(e,t,i,o){return Vy(t)||o.isEqual(Ve.min())?J.resolve(null):this.gs.getDocuments(e,i).next((l=>{const d=this.bs(t,l);return this.Ds(t,d,i,o)?J.resolve(null):(No()<=$e.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.vs(e,d,t,N1(o,al)).next((p=>p)))}))}bs(e,t){let i=new Dt(e0(e));return t.forEach(((o,l)=>{Lc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return No()<=$e.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",bo(t)),this.gs.getDocumentsMatchingQuery(e,t,Bi.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="LocalStore",cP=3e8;class dP{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new yt(Ue),this.Ms=new $s((l=>Bf(l)),$f),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function hP(r,e,t,i){return new dP(r,e,t,i)}async function x0(r,e){const t=Oe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],p=[];let y=We();for(const v of o){d.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}for(const v of l){p.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(i,y).next((v=>({Bs:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function fP(r,e){const t=Oe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(p,y,v,E){const x=v.batch,S=x.keys();let O=J.resolve();return S.forEach((B=>{O=O.next((()=>E.getEntry(y,B))).next((q=>{const U=v.docVersions.get(B);Ze(U!==null,48541),q.version.compareTo(U)<0&&(x.applyToRemoteDocument(q,v),q.isValidDocument()&&(q.setReadTime(v.commitVersion),E.addEntry(q)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(y,x)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let y=We();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(y=y.add(p.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function I0(r){const e=Oe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function pP(r,e){const t=Oe(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const p=[];e.targetChanges.forEach(((E,x)=>{const S=o.get(x);if(!S)return;p.push(t.hi.removeMatchingKeys(l,E.removedDocuments,x).next((()=>t.hi.addMatchingKeys(l,E.addedDocuments,x))));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?O=O.withResumeToken(Gt.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,i)),o=o.insert(x,O),(function(q,U,H){return q.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=cP?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(S,O,E)&&p.push(t.hi.updateTargetData(l,O))}));let y=ti(),v=We();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),p.push(mP(l,d,e.documentUpdates).next((E=>{y=E.Ls,v=E.ks}))),!i.isEqual(Ve.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next((x=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(E)}return J.waitFor(p).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,v))).next((()=>y))})).then((l=>(t.Fs=o,l)))}function mP(r,e,t){let i=We(),o=We();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let d=ti();return t.forEach(((p,y)=>{const v=l.get(p);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(Ve.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):ge(Zf,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",y.version)})),{Ls:d,ks:o}}))}function gP(r,e){const t=Oe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ff),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function yP(r,e){const t=Oe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,J.resolve(o)):t.hi.allocateTargetId(i).next((d=>(o=new ji(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function df(r,e,t){const i=Oe(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Zo(d))throw d;ge(Zf,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Ky(r,e,t){const i=Oe(r);let o=Ve.min(),l=We();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,v,E){const x=Oe(y),S=x.Ms.get(E);return S!==void 0?J.resolve(x.Fs.get(S)):x.hi.getTargetData(v,E)})(i,d,Sr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{l=y}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,t?o:Ve.min(),t?l:We()))).next((p=>(vP(i,iC(e),p),{documents:p,qs:l})))))}function vP(r,e,t){let i=r.xs.get(e)||Ve.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class Qy{constructor(){this.activeTargetIds=cC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _P{constructor(){this.Fo=new Qy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Qy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="ConnectivityMonitor";class Jy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ge(Yy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ge(Yy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu=null;function hf(){return qu===null?qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():qu++,"0x"+qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="RestConnection",EP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===mc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const d=hf(),p=this.Go(e,t.toUriEncodedString());ge(Vh,`Sending RPC '${e}' ${d}:`,p,i);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(y,o,l);const{host:v}=new URL(p),E=Ko(v);return this.jo(e,p,y,i,E).then((x=>(ge(Vh,`Received RPC '${e}' ${d}: `,x),x)),(x=>{throw zi(Vh,`RPC '${e}' ${d} failed with error: `,x,"url: ",p,"request:",i),x}))}Jo(e,t,i,o,l,d){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=EP[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class IP extends TP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const d=hf();return new Promise(((p,y)=>{const v=new P_;v.setWithCredentials(!0),v.listenOnce(R_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Zu.NO_ERROR:const x=v.getResponseJson();ge(Xt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),p(x);break;case Zu.TIMEOUT:ge(Xt,`RPC '${e}' ${d} timed out`),y(new Te(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const S=v.getStatus();if(ge(Xt,`RPC '${e}' ${d} failed with status:`,S,"response text:",v.getResponseText()),S>0){let O=v.getResponseJson();Array.isArray(O)&&(O=O[0]);const B=O==null?void 0:O.error;if(B&&B.status&&B.message){const q=(function(H){const X=H.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(X)>=0?X:Z.UNKNOWN})(B.status);y(new Te(q,B.message))}else y(new Te(Z.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new Te(Z.UNAVAILABLE,"Connection failed."));break;default:be(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{ge(Xt,`RPC '${e}' ${d} completed.`)}}));const E=JSON.stringify(o);ge(Xt,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",E,i,15)}))}P_(e,t,i){const o=hf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=N_(),p=k_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.zo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const E=l.join("");ge(Xt,`Creating RPC '${e}' stream ${o}: ${E}`,y);const x=d.createWebChannel(E,y);this.T_(x);let S=!1,O=!1;const B=new xP({Ho:U=>{O?ge(Xt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(ge(Xt,`Opening RPC '${e}' stream ${o} transport.`),x.open(),S=!0),ge(Xt,`RPC '${e}' stream ${o} sending:`,U),x.send(U))},Yo:()=>x.close()}),q=(U,H,X)=>{U.listen(H,(ne=>{try{X(ne)}catch(he){setTimeout((()=>{throw he}),0)}}))};return q(x,Wa.EventType.OPEN,(()=>{O||(ge(Xt,`RPC '${e}' stream ${o} transport opened.`),B.s_())})),q(x,Wa.EventType.CLOSE,(()=>{O||(O=!0,ge(Xt,`RPC '${e}' stream ${o} transport closed`),B.__(),this.I_(x))})),q(x,Wa.EventType.ERROR,(U=>{O||(O=!0,zi(Xt,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),B.__(new Te(Z.UNAVAILABLE,"The operation could not be completed")))})),q(x,Wa.EventType.MESSAGE,(U=>{var H;if(!O){const X=U.data[0];Ze(!!X,16349);const ne=X,he=(ne==null?void 0:ne.error)||((H=ne[0])===null||H===void 0?void 0:H.error);if(he){ge(Xt,`RPC '${e}' stream ${o} received error:`,he);const Pe=he.status;let re=(function(A){const P=Ct[A];if(P!==void 0)return d0(P)})(Pe),k=he.message;re===void 0&&(re=Z.INTERNAL,k="Unknown error status: "+Pe+" with message "+he.message),O=!0,B.__(new Te(re,k)),x.close()}else ge(Xt,`RPC '${e}' stream ${o} received:`,X),B.a_(X)}})),q(p,A_.STAT_EVENT,(U=>{U.stat===Zh.PROXY?ge(Xt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Zh.NOPROXY&&ge(Xt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.o_()}),0),B}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Oh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(r){return new RC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="PersistentStream";class C0{constructor(e,t,i,o,l,d,p,y){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new S0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Zr(t.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new Te(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ge(Xy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ge(Xy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SP extends C0{constructor(e,t,i,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=NC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ve.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Ve.min():d.readTime?Cr(d.readTime):Ve.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=cf(this.serializer),t.addTarget=(function(l,d){let p;const y=d.target;if(p=sf(y)?{documents:DC(l,y)}:{query:VC(l,y).Vt},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=p0(l,d.resumeToken);const v=af(l,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(Ve.min())>0){p.readTime=Ec(l,d.snapshotVersion.toTimestamp());const v=af(l,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=LC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=cf(this.serializer),t.removeTarget=e,this.k_(t)}}class CP extends C0{constructor(e,t,i,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=jC(e.writeResults,e.commitTime),i=Cr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=cf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>bC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{}class RP extends PP{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Te(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,lf(t,i),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(Z.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Jo(e,lf(t,i),o,d,p,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Te(Z.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class AP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Zr(t),this._a=!1):ge("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="RemoteStore";class kP{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{Ws(this)&&(ge(Fs,"Restarting streams for network reachability change."),await(async function(y){const v=Oe(y);v.Ia.add(4),await xl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Bc(v)})(this))}))})),this.Aa=new AP(i,o)}}async function Bc(r){if(Ws(r))for(const e of r.da)await e(!0)}async function xl(r){for(const e of r.da)await e(!1)}function P0(r,e){const t=Oe(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),rp(t)?np(t):ea(t).x_()&&tp(t,e))}function ep(r,e){const t=Oe(r),i=ea(t);t.Ta.delete(e),i.x_()&&R0(t,e),t.Ta.size===0&&(i.x_()?i.B_():Ws(t)&&t.Aa.set("Unknown"))}function tp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ea(r).H_(e)}function R0(r,e){r.Ra.$e(e),ea(r).Y_(e)}function np(r){r.Ra=new IC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),ea(r).start(),r.Aa.aa()}function rp(r){return Ws(r)&&!ea(r).M_()&&r.Ta.size>0}function Ws(r){return Oe(r).Ia.size===0}function A0(r){r.Ra=void 0}async function NP(r){r.Aa.set("Online")}async function bP(r){r.Ta.forEach(((e,t)=>{tp(r,e)}))}async function jP(r,e){A0(r),rp(r)?(r.Aa.la(e),np(r)):r.Aa.set("Unknown")}async function DP(r,e,t){if(r.Aa.set("Online"),e instanceof f0&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const p of l.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ta.delete(p),o.Ra.removeTarget(p))})(r,e)}catch(i){ge(Fs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await xc(r,i)}else if(e instanceof rc?r.Ra.Ye(e):e instanceof h0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Ve.min()))try{const i=await I0(r.localStore);t.compareTo(i)>=0&&await(function(l,d){const p=l.Ra.Pt(d);return p.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const E=l.Ta.get(v);E&&l.Ta.set(v,E.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,v)=>{const E=l.Ta.get(y);if(!E)return;l.Ta.set(y,E.withResumeToken(Gt.EMPTY_BYTE_STRING,E.snapshotVersion)),R0(l,y);const x=new ji(E.target,y,v,E.sequenceNumber);tp(l,x)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){ge(Fs,"Failed to raise snapshot:",i),await xc(r,i)}}async function xc(r,e,t){if(!Zo(e))throw e;r.Ia.add(1),await xl(r),r.Aa.set("Offline"),t||(t=()=>I0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(Fs,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Bc(r)}))}function k0(r,e){return e().catch((t=>xc(r,t,e)))}async function $c(r){const e=Oe(r),t=qi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ff;for(;VP(e);)try{const o=await gP(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,OP(e,o)}catch(o){await xc(e,o)}N0(e)&&b0(e)}function VP(r){return Ws(r)&&r.Pa.length<10}function OP(r,e){r.Pa.push(e);const t=qi(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function N0(r){return Ws(r)&&!qi(r).M_()&&r.Pa.length>0}function b0(r){qi(r).start()}async function LP(r){qi(r).na()}async function MP(r){const e=qi(r);for(const t of r.Pa)e.X_(t.mutations)}async function FP(r,e,t){const i=r.Pa.shift(),o=Gf.from(i,e,t);await k0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await $c(r)}async function UP(r,e){e&&qi(r).Z_&&await(async function(i,o){if((function(d){return TC(d)&&d!==Z.ABORTED})(o.code)){const l=i.Pa.shift();qi(i).N_(),await k0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await $c(i)}})(r,e),N0(r)&&b0(r)}async function Zy(r,e){const t=Oe(r);t.asyncQueue.verifyOperationInProgress(),ge(Fs,"RemoteStore received new credentials");const i=Ws(t);t.Ia.add(3),await xl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Bc(t)}async function zP(r,e){const t=Oe(r);e?(t.Ia.delete(2),await Bc(t)):e||(t.Ia.add(2),await xl(t),t.Aa.set("Unknown"))}function ea(r){return r.Va||(r.Va=(function(t,i,o){const l=Oe(t);return l.ia(),new SP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:NP.bind(null,r),e_:bP.bind(null,r),n_:jP.bind(null,r),J_:DP.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),rp(r)?np(r):r.Aa.set("Unknown")):(await r.Va.stop(),A0(r))}))),r.Va}function qi(r){return r.ma||(r.ma=(function(t,i,o){const l=Oe(t);return l.ia(),new CP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:LP.bind(null,r),n_:UP.bind(null,r),ea:MP.bind(null,r),ta:FP.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await $c(r)):(await r.ma.stop(),r.Pa.length>0&&(ge(Fs,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const d=Date.now()+i,p=new ip(e,t,d,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sp(r,e){if(Zr("AsyncQueue",`${e}: ${r}`),Zo(r))return new Te(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Re.comparator(t.key,i.key):(t,i)=>Re.comparator(t.key,i.key),this.keyedMap=Ha(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.fa=new yt(Re.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):be(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ho{constructor(e,t,i,o,l,d,p,y,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new Ho(e,t,Mo.emptySet(t),d,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class $P{constructor(){this.queries=tv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Oe(t),l=o.queries;o.queries=tv(),l.forEach(((d,p)=>{for(const y of p.wa)y.onError(i)}))})(this,new Te(Z.ABORTED,"Firestore shutting down"))}}function tv(){return new $s((r=>Z_(r)),Oc)}async function j0(r,e){const t=Oe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new BP,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=sp(d,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&op(t)}async function D0(r,e){const t=Oe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function WP(r,e){const t=Oe(r);let i=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const p of d.wa)p.Ca(o)&&(i=!0);d.ya=o}}i&&op(t)}function HP(r,e,t){const i=Oe(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function op(r){r.Da.forEach((e=>{e.next()}))}var ff,nv;(nv=ff||(ff={})).Fa="default",nv.Cache="cache";class V0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ho(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this.key=e}}class L0{constructor(e){this.key=e}}class qP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=We(),this.mutatedKeys=We(),this.Xa=e0(e),this.eu=new Mo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new ev,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,x)=>{const S=o.get(E),O=Lc(this.query,x)?x:null,B=!!S&&this.mutatedKeys.has(S.key),q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;S&&O?S.data.isEqual(O.data)?B!==q&&(i.track({type:3,doc:O}),U=!0):this.iu(S,O)||(i.track({type:2,doc:O}),U=!0,(y&&this.Xa(O,y)>0||v&&this.Xa(O,v)<0)&&(p=!0)):!S&&O?(i.track({type:0,doc:O}),U=!0):S&&!O&&(i.track({type:1,doc:S}),U=!0,(y||v)&&(p=!0)),U&&(O?(d=d.add(O),l=q?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{eu:d,ru:i,Ds:p,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((E,x)=>(function(O,B){const q=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{At:U})}};return q(O)-q(B)})(E.type,x.type)||this.Xa(E.doc,x.doc))),this.su(i),o=o!=null&&o;const p=t&&!o?this.ou():[],y=this.Za.size===0&&this.current&&!o?1:0,v=y!==this.Ya;return this.Ya=y,d.length!==0||v?{snapshot:new Ho(this.query,e.eu,l,d,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ev,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=We(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new L0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new O0(i))})),t}uu(e){this.Ha=e.qs,this.Za=We();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ho.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ap="SyncEngine";class GP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class KP{constructor(e){this.key=e,this.lu=!1}}class QP{constructor(e,t,i,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new $s((p=>Z_(p)),Oc),this.Tu=new Map,this.Iu=new Set,this.du=new yt(Re.comparator),this.Eu=new Map,this.Au=new Yf,this.Ru={},this.Vu=new Map,this.mu=Wo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function YP(r,e,t=!0){const i=$0(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await M0(i,e,t,!0),o}async function JP(r,e){const t=$0(r);await M0(t,e,!0,!1)}async function M0(r,e,t,i){const o=await yP(r.localStore,Sr(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await XP(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&P0(r.remoteStore,o),p}async function XP(r,e,t,i,o){r.gu=(x,S,O)=>(async function(q,U,H,X){let ne=U.view.nu(H);ne.Ds&&(ne=await Ky(q.localStore,U.query,!1).then((({documents:k})=>U.view.nu(k,ne))));const he=X&&X.targetChanges.get(U.targetId),Pe=X&&X.targetMismatches.get(U.targetId)!=null,re=U.view.applyChanges(ne,q.isPrimaryClient,he,Pe);return iv(q,U.targetId,re._u),re.snapshot})(r,x,S,O);const l=await Ky(r.localStore,e,!0),d=new qP(e,l.qs),p=d.nu(l.documents),y=Tl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=d.applyChanges(p,r.isPrimaryClient,y);iv(r,t,v._u);const E=new GP(e,t,d);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function ZP(r,e,t){const i=Oe(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((d=>!Oc(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await df(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ep(i.remoteStore,o.targetId),pf(i,o.targetId)})).catch(Xo)):(pf(i,o.targetId),await df(i.localStore,o.targetId,!0))}async function eR(r,e){const t=Oe(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ep(t.remoteStore,i.targetId))}async function tR(r,e,t){const i=lR(r);try{const o=await(function(d,p){const y=Oe(d),v=ht.now(),E=p.reduce(((O,B)=>O.add(B.key)),We());let x,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let B=ti(),q=We();return y.Os.getEntries(O,E).next((U=>{B=U,B.forEach(((H,X)=>{X.isValidDocument()||(q=q.add(H))}))})).next((()=>y.localDocuments.getOverlayedDocuments(O,B))).next((U=>{x=U;const H=[];for(const X of p){const ne=yC(X,x.get(X.key).overlayedDocument);ne!=null&&H.push(new Xi(X.key,ne,q_(ne.value.mapValue),lr.exists(!0)))}return y.mutationQueue.addMutationBatch(O,v,H,p)})).next((U=>{S=U;const H=U.applyToLocalDocumentSet(x,q);return y.documentOverlayCache.saveOverlays(O,U.batchId,H)}))})).then((()=>({batchId:S.batchId,changes:n0(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,y){let v=d.Ru[d.currentUser.toKey()];v||(v=new yt(Ue)),v=v.insert(p,y),d.Ru[d.currentUser.toKey()]=v})(i,o.batchId,t),await Il(i,o.changes),await $c(i.remoteStore)}catch(o){const l=sp(o,"Failed to persist write");t.reject(l)}}async function F0(r,e){const t=Oe(r);try{const i=await pP(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Eu.get(l);d&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?Ze(d.lu,14607):o.removedDocuments.size>0&&(Ze(d.lu,42227),d.lu=!1))})),await Il(t,i,e)}catch(i){await Xo(i)}}function rv(r,e,t){const i=Oe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const y=Oe(d);y.onlineState=p;let v=!1;y.queries.forEach(((E,x)=>{for(const S of x.wa)S.va(p)&&(v=!0)})),v&&op(y)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function nR(r,e,t){const i=Oe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let d=new yt(Re.comparator);d=d.insert(l,en.newNoDocument(l,Ve.min()));const p=We().add(l),y=new Uc(Ve.min(),new Map,new yt(Ue),d,p);await F0(i,y),i.du=i.du.remove(l),i.Eu.delete(e),lp(i)}else await df(i.localStore,e,!1).then((()=>pf(i,e,t))).catch(Xo)}async function rR(r,e){const t=Oe(r),i=e.batch.batchId;try{const o=await fP(t.localStore,e);z0(t,i,null),U0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Il(t,o)}catch(o){await Xo(o)}}async function iR(r,e,t){const i=Oe(r);try{const o=await(function(d,p){const y=Oe(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return y.mutationQueue.lookupMutationBatch(v,p).next((x=>(Ze(x!==null,37113),E=x.keys(),y.mutationQueue.removeMutationBatch(v,x)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,E,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>y.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);z0(i,e,t),U0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Il(i,o)}catch(o){await Xo(o)}}function U0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function z0(r,e,t){const i=Oe(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function pf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||B0(r,i)}))}function B0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(ep(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),lp(r))}function iv(r,e,t){for(const i of t)i instanceof O0?(r.Au.addReference(i.key,e),sR(r,i)):i instanceof L0?(ge(ap,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||B0(r,i.key)):be(19791,{yu:i})}function sR(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(ge(ap,"New document in limbo: "+t),r.Iu.add(i),lp(r))}function lp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Re(dt.fromString(e)),i=r.mu.next();r.Eu.set(i,new KP(t)),r.du=r.du.insert(t,i),P0(r.remoteStore,new ji(Sr(Wf(t.path)),i,"TargetPurposeLimboResolution",bc.ue))}}async function Il(r,e,t){const i=Oe(r),o=[],l=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((p,y)=>{d.push(i.gu(y,e,t).then((v=>{var E;if((v||t)&&i.isPrimaryClient){const x=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(y.targetId,x?"current":"not-current")}if(v){o.push(v);const x=Xf.Es(y.targetId,v);l.push(x)}})))})),await Promise.all(d),i.hu.J_(o),await(async function(y,v){const E=Oe(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>J.forEach(v,(S=>J.forEach(S.Is,(O=>E.persistence.referenceDelegate.addReference(x,S.targetId,O))).next((()=>J.forEach(S.ds,(O=>E.persistence.referenceDelegate.removeReference(x,S.targetId,O)))))))))}catch(x){if(!Zo(x))throw x;ge(Zf,"Failed to update sequence numbers: "+x)}for(const x of v){const S=x.targetId;if(!x.fromCache){const O=E.Fs.get(S),B=O.snapshotVersion,q=O.withLastLimboFreeSnapshotVersion(B);E.Fs=E.Fs.insert(S,q)}}})(i.localStore,l))}async function oR(r,e){const t=Oe(r);if(!t.currentUser.isEqual(e)){ge(ap,"User change. New user:",e.toKey());const i=await x0(t.localStore,e);t.currentUser=e,(function(l,d){l.Vu.forEach((p=>{p.forEach((y=>{y.reject(new Te(Z.CANCELLED,d))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Il(t,i.Bs)}}function aR(r,e){const t=Oe(r),i=t.Eu.get(e);if(i&&i.lu)return We().add(i.key);{let o=We();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const p=t.Pu.get(d);o=o.unionWith(p.view.tu)}return o}}function $0(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=F0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nR.bind(null,e),e.hu.J_=WP.bind(null,e.eventManager),e.hu.pu=HP.bind(null,e.eventManager),e}function lR(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iR.bind(null,e),e}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return hP(this.persistence,new uP,e.initialUser,this.serializer)}Du(e){return new T0(Jf.Vi,this.serializer)}bu(e){return new _P}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class uR extends Ic{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ze(this.persistence.referenceDelegate instanceof Tc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new KC(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new T0((i=>Tc.Vi(i,t)),this.serializer)}}class mf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oR.bind(null,this.syncEngine),await zP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $P})()}createDatastore(e){const t=zc(e.databaseInfo.databaseId),i=(function(l){return new IP(l)})(e.databaseInfo);return(function(l,d,p,y){return new RP(l,d,p,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,d,p){return new kP(i,o,l,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>rv(this.syncEngine,t,0)),(function(){return Jy.C()?new Jy:new wP})())}createSyncEngine(e,t){return(function(o,l,d,p,y,v,E){const x=new QP(o,l,d,p,y,v);return E&&(x.fu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Oe(o);ge(Fs,"RemoteStore shutting down."),l.Ia.add(5),await xl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}mf.provider={build:()=>new mf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Zr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="FirestoreClient";class cR{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Zt.UNAUTHENTICATED,this.clientId=Lf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{ge(Gi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ge(Gi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Lh(r,e){r.asyncQueue.verifyOperationInProgress(),ge(Gi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await x0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{zi("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{ge("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{zi("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function sv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await dR(r);ge(Gi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Zy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Zy(e.remoteStore,o))),r._onlineComponents=e}async function dR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(Gi,"Using user provided OfflineComponentProvider");try{await Lh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;zi("Error using user provided cache. Falling back to memory cache: "+t),await Lh(r,new Ic)}}else ge(Gi,"Using default OfflineComponentProvider"),await Lh(r,new uR(void 0));return r._offlineComponents}async function H0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(Gi,"Using user provided OnlineComponentProvider"),await sv(r,r._uninitializedComponentsProvider._online)):(ge(Gi,"Using default OnlineComponentProvider"),await sv(r,new mf))),r._onlineComponents}function hR(r){return H0(r).then((e=>e.syncEngine))}async function q0(r){const e=await H0(r),t=e.eventManager;return t.onListen=YP.bind(null,e.syncEngine),t.onUnlisten=ZP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eR.bind(null,e.syncEngine),t}function fR(r,e,t={}){const i=new Yr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const E=new W0({next:S=>{E.Ou(),d.enqueueAndForget((()=>D0(l,x)));const O=S.docs.has(p);!O&&S.fromCache?v.reject(new Te(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&y&&y.source==="server"?v.reject(new Te(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),x=new V0(Wf(p.path),E,{includeMetadataChanges:!0,ka:!0});return j0(l,x)})(await q0(r),r.asyncQueue,e,t,i))),i.promise}function pR(r,e,t={}){const i=new Yr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const E=new W0({next:S=>{E.Ou(),d.enqueueAndForget((()=>D0(l,x))),S.fromCache&&y.source==="server"?v.reject(new Te(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),x=new V0(p,E,{includeMetadataChanges:!0,ka:!0});return j0(l,x)})(await q0(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="firestore.googleapis.com",av=!0;class lv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K0,this.ssl=av}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:av;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=E0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new Te(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Te(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Te(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Te(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new E1;switch(i.type){case"firstParty":return new S1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ov.get(t);i&&(ge("ComponentProvider","Removing Datastore"),ov.delete(t),i.terminate())})(this),Promise.resolve()}}function mR(r,e,t,i={}){var o;r=ei(r,Wc);const l=Ko(e),d=r._getSettings(),p=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),y=`${e}:${t}`;l&&(Ov(`https://${y}`),Lv("Firestore",!0)),d.host!==K0&&d.host!==y&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:y,ssl:l,emulatorOptions:i});if(!Ds(v,p)&&(r._setSettings(v),i.mockUserToken)){let E,x;if(typeof i.mockUserToken=="string")E=i.mockUserToken,x=Zt.MOCK_USER;else{E=jT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Te(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Zt(S)}r._authCredentials=new T1(new j_(E,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hc(this.firestore,e,this._query)}}class jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(wl(t,jt._jsonSchema))return new jt(e,i||null,new Re(dt.fromString(t.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Pt("string",jt._jsonSchemaVersion),referencePath:Pt("string")};class Fi extends Hc{constructor(e,t,i){super(e,t,Wf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Re(e))}withConverter(e){return new Fi(this.firestore,e,this._path)}}function Tr(r,e,...t){if(r=qt(r),V_("collection","path",e),r instanceof Wc){const i=dt.fromString(e,...t);return Ty(i),new Fi(r,null,i)}{if(!(r instanceof jt||r instanceof Fi))throw new Te(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(dt.fromString(e,...t));return Ty(i),new Fi(r.firestore,null,i)}}function Un(r,e,...t){if(r=qt(r),arguments.length===1&&(e=Lf.newId()),V_("doc","path",e),r instanceof Wc){const i=dt.fromString(e,...t);return Ey(i),new jt(r,null,new Re(i))}{if(!(r instanceof jt||r instanceof Fi))throw new Te(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(dt.fromString(e,...t));return Ey(i),new jt(r.firestore,r instanceof Fi?r.converter:null,new Re(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="AsyncQueue";class cv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new S0(this,"async_queue_retry"),this.oc=()=>{const i=Oh();i&&ge(uv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Oh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Oh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Yr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Zo(e))throw e;ge(uv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Zr("INTERNAL UNHANDLED ERROR: ",dv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=ip.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&be(47125,{hc:dv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function dv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ta extends Wc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new cv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cv(e),this._firestoreClient=void 0,await e}}}function gR(r,e){const t=typeof r=="object"?r:zv(),i=typeof r=="string"?r:mc,o=If(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=NT("firestore");l&&mR(o,...l)}return o}function up(r){if(r._terminated)throw new Te(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yR(r),r._firestoreClient}function yR(r){var e,t,i;const o=r._freezeSettings(),l=(function(p,y,v,E){return new z1(p,y,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,G0(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new cR(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Gt.fromBase64String(e))}catch(t){throw new Te(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wl(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Pt("string",zn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pr._jsonSchemaVersion}}static fromJSON(e){if(wl(e,Pr._jsonSchema))return new Pr(e.latitude,e.longitude)}}Pr._jsonSchemaVersion="firestore/geoPoint/1.0",Pr._jsonSchema={type:Pt("string",Pr._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Rr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wl(e,Rr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Rr(e.vectorValues);throw new Te(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rr._jsonSchemaVersion="firestore/vectorValue/1.0",Rr._jsonSchema={type:Pt("string",Rr._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=/^__.*__$/;class _R{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new El(e,this.data,t,this.fieldTransforms)}}class Q0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Y0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ec:r})}}class dp{constructor(e,t,i,o,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new dp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Sc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Y0(this.Ec)&&vR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class wR{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zc(e)}Dc(e,t,i,o=!1){return new dp({Ec:e,methodName:t,bc:i,path:Ht.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J0(r){const e=r._freezeSettings(),t=zc(r._databaseId);return new wR(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ER(r,e,t,i,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);hp("Data must be an object, but it was:",d,i);const p=X0(i,d);let y,v;if(l.merge)y=new kn(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const x of l.mergeFields){const S=gf(e,x,t);if(!d.contains(S))throw new Te(Z.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);ew(E,S)||E.push(S)}y=new kn(E),v=d.fieldTransforms.filter((x=>y.covers(x.field)))}else y=null,v=d.fieldTransforms;return new _R(new yn(p),y,v)}class Gc extends cp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gc}}function TR(r,e,t,i){const o=r.Dc(1,e,t);hp("Data must be an object, but it was:",o,i);const l=[],d=yn.empty();Ji(i,((y,v)=>{const E=fp(e,y,t);v=qt(v);const x=o.gc(E);if(v instanceof Gc)l.push(E);else{const S=Kc(v,x);S!=null&&(l.push(E),d.set(E,S))}}));const p=new kn(l);return new Q0(d,p,o.fieldTransforms)}function xR(r,e,t,i,o,l){const d=r.Dc(1,e,t),p=[gf(e,i,t)],y=[o];if(l.length%2!=0)throw new Te(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)p.push(gf(e,l[S])),y.push(l[S+1]);const v=[],E=yn.empty();for(let S=p.length-1;S>=0;--S)if(!ew(v,p[S])){const O=p[S];let B=y[S];B=qt(B);const q=d.gc(O);if(B instanceof Gc)v.push(O);else{const U=Kc(B,q);U!=null&&(v.push(O),E.set(O,U))}}const x=new kn(v);return new Q0(E,x,d.fieldTransforms)}function Kc(r,e){if(Z0(r=qt(r)))return hp("Unsupported field value:",e,r),X0(r,e);if(r instanceof cp)return(function(i,o){if(!Y0(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let d=0;for(const p of i){let y=Kc(p,o.yc(d));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),d++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ht.fromDate(i);return{timestampValue:Ec(o.serializer,l)}}if(i instanceof ht){const l=new ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ec(o.serializer,l)}}if(i instanceof Pr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zn)return{bytesValue:p0(o.serializer,i._byteString)};if(i instanceof jt){const l=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Qf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Rr)return(function(d,p){return{mapValue:{fields:{[W_]:{stringValue:H_},[gc]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw p.wc("VectorValues must only contain numeric values.");return Hf(p.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Mf(i)}`)})(r,e)}function X0(r,e){const t={};return M_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(r,((i,o)=>{const l=Kc(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Z0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ht||r instanceof Pr||r instanceof zn||r instanceof jt||r instanceof cp||r instanceof Rr)}function hp(r,e,t){if(!Z0(t)||!O_(t)){const i=Mf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function gf(r,e,t){if((e=qt(e))instanceof qc)return e._internalPath;if(typeof e=="string")return fp(r,e);throw Sc("Field path arguments must be of type string or ",r,!1,void 0,t)}const IR=new RegExp("[~\\*/\\[\\]]");function fp(r,e,t){if(e.search(IR)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new qc(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Sc(r,e,t,i,o){const l=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(l||d)&&(y+=" (found",l&&(y+=` in field ${i}`),d&&(y+=` in document ${o}`),y+=")"),new Te(Z.INVALID_ARGUMENT,p+r+y)}function ew(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SR extends tw{data(){return super.data()}}function nw(r,e){return typeof e=="string"?fp(r,e):e instanceof qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Te(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PR{convertValue(e,t="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ji(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[gc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>Tt(d.doubleValue)));return new Rr(l)}convertGeoPoint(e){return new Pr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Dc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const t=$i(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dt.fromString(e);Ze(w0(i),9688,{name:e});const o=new ul(i.get(1),i.get(3)),l=new Re(i.popFirst(5));return o.isEqual(t)||Zr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Ga{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class js extends tw{constructor(e,t,i,o,l,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(nw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=js._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}js._jsonSchemaVersion="firestore/documentSnapshot/1.0",js._jsonSchema={type:Pt("string",js._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class ic extends js{data(e={}){return super.data(e)}}class Fo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ga(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ic(this._firestore,this._userDataWriter,i.key,i,new Ga(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const y=new ic(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ga(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const y=new ic(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ga(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),E=d.indexOf(p.doc.key)),{type:AR(p.type),doc:y,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function AR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(r){r=ei(r,jt);const e=ei(r.firestore,ta);return fR(up(e),r._key).then((t=>kR(e,r,t)))}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:Pt("string",Fo._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class rw extends PR{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}function qo(r){r=ei(r,Hc);const e=ei(r.firestore,ta),t=up(e),i=new rw(e);return CR(r._query),pR(t,r._query).then((o=>new Fo(e,i,r,o)))}function Gu(r,e,t,...i){r=ei(r,jt);const o=ei(r.firestore,ta),l=J0(o);let d;return d=typeof(e=qt(e))=="string"||e instanceof qc?xR(l,"updateDoc",r._key,e,t,i):TR(l,"updateDoc",r._key,e),pp(o,[d.toMutation(r._key,lr.exists(!0))])}function Ka(r){return pp(ei(r.firestore,ta),[new qf(r._key,lr.none())])}function Qa(r,e){const t=ei(r.firestore,ta),i=Un(r),o=RR(r.converter,e);return pp(t,[ER(J0(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,lr.exists(!1))]).then((()=>i))}function pp(r,e){return(function(i,o){const l=new Yr;return i.asyncQueue.enqueueAndForget((async()=>tR(await hR(i),o,l))),l.promise})(up(r),e)}function kR(r,e,t){const i=t.docs.get(e._key),o=new rw(r);return new js(r,o,e._key,i,new Ga(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Jo=o})(Qo),Uo(new Vs("firestore",((i,{instanceIdentifier:o,options:l})=>{const d=i.getProvider("app").getImmediate(),p=new ta(new x1(i.getProvider("auth-internal")),new C1(d,i.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Te(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ul(v.options.projectId,E)})(d,o),d);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),Li(gy,yy,e),Li(gy,yy,"esm2017")})();const NR={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},iw=Uv(NR),Ui=_1(iw),Et=gR(iw),sw=K.createContext(null);function bR({children:r}){const[e,t]=K.useState(null),[i,o]=K.useState(!1),[l,d]=K.useState(!0);K.useEffect(()=>{const v=uS(Ui,async E=>{if(t(E),E)try{const x=Un(Et,"admins",E.uid);if((await hv(x)).exists())o(!0);else{const O=Un(Et,"roles",E.uid),B=await hv(O);B.exists()&&B.data().admin===!0?o(!0):o(!1)}}catch(x){console.error("Error checking admin role:",x),o(!1)}else o(!1);d(!1)});return()=>v()},[]);const p=async(v,E)=>{await h_(Ui,v,E)},y=async()=>{await f_(Ui)};return h.jsx(sw.Provider,{value:{user:e,admin:i,loading:l,login:p,logout:y},children:r})}function Sl(){return K.useContext(sw)}function jR({onClose:r}){const[e,t]=K.useState("login"),[i,o]=K.useState(""),[l,d]=K.useState("");async function p(){try{await I_(Ui,new xr),r()}catch(E){alert(E.message)}}async function y(E){E.preventDefault();try{await h_(Ui,i,l),r()}catch(x){alert(x.message)}}async function v(E){E.preventDefault();try{await oS(Ui,i,l),r()}catch(x){alert(x.message)}}return h.jsx("div",{className:"auth-modal-backdrop",onClick:r,children:h.jsxs("div",{className:"auth-modal",onClick:E=>E.stopPropagation(),children:[h.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),h.jsxs("button",{className:"google-btn",onClick:p,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsx("div",{className:"auth-divider",children:h.jsx("span",{children:"or"})}),h.jsxs("form",{onSubmit:e==="login"?y:v,className:"auth-form",children:[h.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:i,onChange:E=>o(E.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:E=>d(E.target.value),required:!0}),h.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),h.jsx("div",{className:"auth-switcher",children:e==="login"?h.jsxs("p",{children:["No account?"," ",h.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):h.jsxs("p",{children:["Already have an account?"," ",h.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),h.jsx("button",{className:"auth-close",onClick:r,children:"Close"})]})})}function DR(){const[r,e]=K.useState(!1),[t,i]=K.useState(!1),{user:o,admin:l}=Sl(),d=Ef();async function p(){try{await f_(Ui),e(!1),d("/")}catch(y){console.error(y),alert("Logout failed.")}}return h.jsxs(h.Fragment,{children:[h.jsxs("button",{className:`menu-toggle ${r?"active":""}`,onClick:()=>e(!r),children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("nav",{className:`menu-panel ${r?"open":""}`,children:[h.jsx(za,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),h.jsx(za,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),h.jsx(za,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),h.jsx(za,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),l&&h.jsx(za,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),h.jsxs("div",{className:"auth-section",children:[h.jsx("p",{className:"auth-section-status",children:o?`Signed in as ${o.email||o.uid}`:"Not signed in"}),h.jsxs("div",{children:[!o&&h.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),i(!0)},children:"Sign in"}),o&&h.jsx("button",{className:"auth-btn secondary",onClick:p,children:"Sign out"})]})]})]}),t&&h.jsx(jR,{onClose:()=>i(!1)})]})}function VR(){return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"im_ok's Collection Hub"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem"},children:"A quiet little corner of the internet for my shelves, lists, and cardboard addictions."}),h.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.72)",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"12px",fontSize:"0.85rem",color:"var(--text-soft)"},children:"Manga | Anime | TCG"})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"About me"}),h.jsxs("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5},children:["Hey, I go by ",h.jsx("strong",{children:"im_ok"}),". I hoard manga, binge anime, and collect way too many trading cards. This site is where I track everything: volumes on my shelves, finished shows, and growing TCG binders."]}),h.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem"},children:"You'll find detailed stats, reading history, and collection values across the different pages - it's basically my personal library dashboard."}),h.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px"},children:[h.jsx("span",{className:"pill",children:"Manga library power user"}),h.jsx("span",{className:"pill",children:"MAL-synced anime list"}),h.jsx("span",{className:"pill",children:"Pokemon & One Piece TCG"}),h.jsx("span",{className:"pill",children:"Automation & data nerd"})]})]}),h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"Explore the site"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[h.jsxs("a",{href:"/base/manga",className:"section-card",children:[h.jsx("h3",{children:"Manga Library"}),h.jsx("p",{children:"Full manga collection & wishlist, with covers, stats, and release tracking."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Firestore-powered"}),h.jsx("span",{className:"section-chip",children:"Library & wishlist"}),h.jsx("span",{className:"section-chip",children:"Release calendar"})]})]}),h.jsxs("a",{href:"/base/anime",className:"section-card",children:[h.jsx("h3",{children:"Anime Library"}),h.jsx("p",{children:"Read-only mirror of my MAL list, with filters, stats, and pretty cards."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"MAL synced"}),h.jsx("span",{className:"section-chip",children:"Status filters"}),h.jsx("span",{className:"section-chip",children:"Quick stats"})]})]}),h.jsxs("a",{href:"/base/tcg",className:"section-card",children:[h.jsx("h3",{children:"TCG Collection"}),h.jsx("p",{children:"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Tracked in Firestore"}),h.jsx("span",{className:"section-chip",children:"Value vs paid"}),h.jsx("span",{className:"section-chip",children:"Per-game breakdown"})]})]})]})]})]}),h.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"Built as a static GitHub Pages site. Data lives in Firestore & MyAnimeList."})]})}function Ku(r){let e=(r||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),i=t?t[1].trim().toLowerCase():e.toLowerCase(),o=t&&t[2]?parseInt(t[2],10):0;return{name:i,vol:Number.isFinite(o)?o:0}}function Mh(r){if(typeof r=="number")return r;if(r==null)return 0;const e=String(r).replace(/[^0-9.-]/g,""),t=parseFloat(e);return Number.isFinite(t)?t:0}function OR(r){if(typeof r=="number")return r;if(r==null||r==="")return 0;const e=parseInt(r,10);return Number.isFinite(e)?e:0}function LR(r,e){const t=r.length,i=e.length,o=t+i,l=r.filter(re=>re.read).length,d=t-l,p=t?Math.round(l/t*100):0;let y=0,v=0,E=0;r.forEach(re=>{y+=Mh(re.amountPaid),v+=Mh(re.msrp),E+=Mh(re.collectiblePrice)});let x=0,S=0;r.forEach(re=>{const k=OR(re.pageCount);x+=k,re.read&&(S+=k)});const O={10:0,9:0,8:0,7:0,6:0,5:0,4:0,3:0,2:0,1:0};let B=0,q=0;r.forEach(re=>{const k=re.rating==null||re.rating===""?NaN:parseFloat(re.rating);if(!Number.isFinite(k)||k<=0)return;const I=String(Math.round(k));O[I]!=null&&(O[I]+=1),B+=k,q+=1});const U=q?B/q:0,H=new Date,X=[];for(let re=11;re>=0;re-=1){const k=new Date(H.getFullYear(),H.getMonth()-re,1),I=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}`;X.push({key:I,label:k.toLocaleString(void 0,{month:"short"}),count:0})}const ne=Object.fromEntries(X.map((re,k)=>[re.key,k]));r.forEach(re=>{if(!re.dateRead)return;const k=re.dateRead.slice(0,7),I=ne[k];I!=null&&(X[I].count+=1)});const he={};r.forEach(re=>{const k=(re.publisher||"").trim();k&&(he[k]=(he[k]||0)+1)});const Pe=Object.entries(he).sort((re,k)=>k[1]-re[1]).slice(0,5).map(([re,k])=>({name:re,count:k}));return{totalBooks:o,totalLibrary:t,totalWishlist:i,readBooks:l,unreadBooks:d,readPct:p,paidTotal:y,msrpTotal:v,collectibleTotal:E,pagesTotal:x,pagesRead:S,avgRating:U,ratingBuckets:O,months:X,topPublishers:Pe}}function MR({library:r,wishlist:e}){const t=K.useMemo(()=>LR(r,e),[r,e]);if(!t.totalBooks)return h.jsx("div",{className:"manga-empty-state",children:"No manga loaded yet. Once your Firestore library & wishlist are pulled in, this dashboard will light up."});const i=Math.max(...Object.values(t.ratingBuckets),1),o=t.topPublishers.length>0?Math.max(...t.topPublishers.map(d=>d.count),1):1,l=t.months.length>0?Math.max(...t.months.map(d=>d.count),1):1;return h.jsxs("div",{className:"manga-dashboard",children:[h.jsxs("div",{className:"manga-dashboard-grid",children:[h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Collection"}),h.jsx("div",{className:"manga-stat-value",children:t.totalBooks})]}),h.jsxs("div",{className:"manga-stat-sub",children:["Library: ",t.totalLibrary,"  |  Wishlist: ",t.totalWishlist]})]}),h.jsxs("div",{className:"manga-pie-wrap",children:[h.jsx("div",{className:"manga-pie",style:{"--pct":t.readPct},children:h.jsxs("div",{className:"manga-pie-label",children:[t.readPct,"% read"]})}),h.jsxs("div",{className:"manga-stat-sub",children:[h.jsx("strong",{children:t.readBooks})," read  | "," ",h.jsx("strong",{children:t.unreadBooks})," unread in your library.",h.jsx("br",{}),"Perfect for tracking backlog vs progress."]})]})]}),h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Spending & Pages"}),h.jsxs("div",{className:"manga-stat-value",children:["$",t.paidTotal.toFixed(0)]})]}),h.jsxs("div",{className:"manga-stat-sub",children:["Pages owned: ",t.pagesTotal.toLocaleString(),"  |  Read:"," ",t.pagesRead.toLocaleString()]})]}),h.jsxs("div",{className:"manga-stat-sub",children:["MSRP (if set): $",t.msrpTotal.toFixed(0),"  |  Collectible value: $",t.collectibleTotal.toFixed(0),h.jsx("br",{}),"Avg rating:"," ",t.avgRating?t.avgRating.toFixed(2):"N/A"," ","/ 10"]})]}),h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Reading Pace"}),h.jsx("div",{className:"manga-stat-value",children:t.months.reduce((d,p)=>d+p.count,0)})]}),h.jsx("div",{className:"manga-stat-sub",children:"Volumes finished in the last 12 months"})]}),h.jsx("div",{className:"manga-bar-chart",children:t.months.map(d=>h.jsxs("div",{className:"manga-bar",children:[h.jsx("div",{className:"manga-bar-fill",style:{height:`${d.count/l*100||0}%`}}),h.jsx("div",{className:"manga-bar-label",children:d.label}),d.count>0&&h.jsx("div",{className:"manga-bar-value",children:d.count})]},d.key))})]})]}),h.jsxs("div",{className:"manga-dashboard-grid",style:{marginTop:"14px",gridTemplateColumns:"minmax(0, 1.3fr) minmax(0, 1.7fr)"},children:[h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Ratings"}),h.jsx("div",{className:"manga-stat-value",children:Object.values(t.ratingBuckets).reduce((d,p)=>d+p,0)})]}),h.jsx("div",{className:"manga-stat-sub",children:"How you've scored your volumes"})]}),h.jsx("div",{className:"manga-bar-chart",children:Object.entries(t.ratingBuckets).sort((d,p)=>Number(p[0])-Number(d[0])).map(([d,p])=>h.jsxs("div",{className:"manga-bar",children:[h.jsx("div",{className:"manga-bar-fill",style:{height:`${p/i*100||0}%`}}),h.jsx("div",{className:"manga-bar-label",children:d}),p>0&&h.jsx("div",{className:"manga-bar-value",children:p})]},d))})]}),h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Top Publishers"}),h.jsx("div",{className:"manga-stat-value",children:t.topPublishers.reduce((d,p)=>d+p.count,0)})]}),h.jsx("div",{className:"manga-stat-sub",children:"Most common publishers in your library"})]}),t.topPublishers.length===0?h.jsx("div",{className:"manga-stat-sub",children:"No publisher data yet - add some volumes first."}):h.jsx("div",{className:"manga-bar-chart",children:t.topPublishers.map(d=>h.jsxs("div",{className:"manga-bar",children:[h.jsx("div",{className:"manga-bar-fill",style:{height:`${d.count/o*100||0}%`}}),h.jsx("div",{className:"manga-bar-label",children:d.name.length>8?`${d.name.slice(0,8)}...`:d.name}),h.jsx("div",{className:"manga-bar-value",children:d.count})]},d.name))})]})]})]})}function FR(){const{admin:r}=Sl(),e=r,[t,i]=K.useState("library"),[o,l]=K.useState([]),[d,p]=K.useState([]),[y,v]=K.useState([]),[E,x]=K.useState(!0),[S,O]=K.useState(""),[B,q]=K.useState(""),[U,H]=K.useState(""),[X,ne]=K.useState(!1),[he,Pe]=K.useState(()=>new Set),[re,k]=K.useState(null),[I,A]=K.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[P,D]=K.useState({open:!1,index:0,items:[]});async function L(){const b=await qo(Tr(Et,"library")),ue=[];b.forEach(se=>{const G=se.data();ue.push({id:se.id,title:G.title||"",authors:G.authors||"Unknown",publisher:G.publisher||"Unknown",demographic:G.demographic||"",genre:G.genre||"",subGenre:G.subGenre||"",date:G.date||"Unknown",cover:G.cover||"",isbn:G.isbn||"",pageCount:G.pageCount!==void 0&&G.pageCount!==null?G.pageCount:"",rating:G.rating!==void 0&&G.rating!==null?G.rating:"",amountPaid:G.amountPaid!==void 0&&G.amountPaid!==null?G.amountPaid:"",dateRead:G.dateRead||"",datePurchased:G.datePurchased||"",msrp:G.msrp!==void 0&&G.msrp!==null?G.msrp:"",specialType:G.specialType||"",specialVolumes:G.specialVolumes!==void 0&&G.specialVolumes!==null?G.specialVolumes:"",collectiblePrice:G.collectiblePrice!==void 0&&G.collectiblePrice!==null?G.collectiblePrice:"",read:!!G.read,amazonURL:G.amazonURL||"",kind:"library"})}),ue.sort((se,G)=>{const Ie=Ku(se.title),Y=Ku(G.title),de=Ie.name.localeCompare(Y.name);return de!==0?de:Ie.vol-Y.vol}),l(ue),v(se=>{const G=new Set(se);return ue.forEach(Ie=>G.add(Ie.title||"")),Array.from(G).filter(Boolean).sort()})}async function R(){const b=await qo(Tr(Et,"wishlist")),ue=[];b.forEach(se=>{const G=se.data();ue.push({id:se.id,title:G.title||"",authors:G.authors||"Unknown",publisher:G.publisher||"Unknown",date:G.date||"Unknown",cover:G.cover||"",isbn:G.isbn||"",pageCount:G.pageCount!==void 0&&G.pageCount!==null?G.pageCount:"",rating:G.rating!==void 0&&G.rating!==null?G.rating:"",amountPaid:G.amountPaid!==void 0&&G.amountPaid!==null?G.amountPaid:"",specialType:G.specialType||"",specialVolumes:G.specialVolumes!==void 0&&G.specialVolumes!==null?G.specialVolumes:"",collectiblePrice:G.collectiblePrice!==void 0&&G.collectiblePrice!==null?G.collectiblePrice:"",amazonURL:G.amazonURL||"",kind:"wishlist"})}),ue.sort((se,G)=>{const Ie=Ku(se.title),Y=Ku(G.title),de=Ie.name.localeCompare(Y.name);return de!==0?de:Ie.vol-Y.vol}),p(ue),v(se=>{const G=new Set(se);return ue.forEach(Ie=>G.add(Ie.title||"")),Array.from(G).filter(Boolean).sort()})}K.useEffect(()=>{let b=!1;async function ue(){x(!0),O("");try{await Promise.all([L(),R()]),b||x(!1)}catch(se){console.error(se),b||(O("Failed to load manga data from Firestore."),x(!1))}}return ue(),()=>{b=!0}},[]);const st=K.useMemo(()=>{const b=B.trim().toLowerCase();return b?o.filter(ue=>[ue.title,ue.authors,ue.publisher,ue.isbn,ue.date,String(ue.pageCount??"")].join(" ").toLowerCase().includes(b)):o},[o,B]),lt=K.useMemo(()=>{const b=U.trim().toLowerCase();return b?d.filter(ue=>[ue.title,ue.authors,ue.publisher,ue.isbn,ue.date,String(ue.pageCount??"")].join(" ").toLowerCase().includes(b)):d},[d,U]);function xt(){e&&(ne(b=>!b),Pe(new Set))}function Ye(b){Pe(ue=>{const se=new Set(ue);return se.has(b)?se.delete(b):se.add(b),se})}async function ae(b){if(!e){alert("Multi-select actions require admin access.");return}const ue=Array.from(he);if(!ue.length){alert("Select at least one item first.");return}const se=t==="library";try{if(b==="move")if(se){if(!window.confirm(`Move ${ue.length} item(s) to Wishlist?`))return;for(const G of ue){const Ie=o.find(de=>de.id===G);if(!Ie)continue;const Y={title:Ie.title,authors:Ie.authors,publisher:Ie.publisher,date:Ie.date,isbn:Ie.isbn,pageCount:Ie.pageCount||"",cover:Ie.cover,amazonURL:Ie.amazonURL||"",specialType:Ie.specialType||"",specialVolumes:Ie.specialVolumes||"",collectiblePrice:Ie.collectiblePrice||"",rating:Ie.rating||""};await Qa(Tr(Et,"wishlist"),Y),await Ka(Un(Et,"library",G))}}else{if(!window.confirm(`Move ${ue.length} item(s) to Library?`))return;for(const G of ue){const Ie=d.find(de=>de.id===G);if(!Ie)continue;const Y={title:Ie.title,authors:Ie.authors,publisher:Ie.publisher,date:Ie.date,isbn:Ie.isbn,pageCount:Ie.pageCount||"",cover:Ie.cover,amountPaid:"",read:!1,rating:"",specialType:Ie.specialType||"",specialVolumes:Ie.specialVolumes||"",collectiblePrice:Ie.collectiblePrice||""};await Qa(Tr(Et,"library"),Y),await Ka(Un(Et,"wishlist",G))}}else if(b==="markRead"&&se)for(const G of ue)await Gu(Un(Et,"library",G),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(b==="markUnread"&&se)for(const G of ue)await Gu(Un(Et,"library",G),{read:!1,dateRead:"",rating:""});else if(b==="delete"){const G=se?"library":"wishlist";if(!window.confirm(`Delete ${ue.length} item(s) from ${se?"Library":"Wishlist"}?`))return;for(const Ie of ue)await Ka(Un(Et,G,Ie))}await Promise.all([L(),R()]),Pe(new Set),ne(!1)}catch(G){console.error(G),alert("Failed to apply multi-select action.")}}function ve(b){k(b)}function ce(){k(null)}const V=()=>A(b=>({...b,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},multiAdd:!1,startVol:"",endVol:""})),Q=b=>{A(ue=>({...ue,open:!0,mode:"add",list:b,editingId:null,data:{...ue.data,title:"",list:b}}))},me=b=>{A({open:!0,mode:"edit",list:b.kind==="wishlist"?"wishlist":"library",editingId:b.id,data:{title:b.title||"",authors:b.authors||"",publisher:b.publisher||"",demographic:b.demographic||"",genre:b.genre||"",subGenre:b.subGenre||"",date:b.date||"",cover:b.cover||"",isbn:b.isbn||"",pageCount:b.pageCount||"",rating:b.rating||"",amountPaid:b.amountPaid||"",dateRead:b.dateRead||"",datePurchased:b.datePurchased||"",msrp:b.msrp||"",specialType:b.specialType||"",specialVolumes:b.specialVolumes||"",collectiblePrice:b.collectiblePrice||"",amazonURL:b.amazonURL||"",read:!!b.read}})},_e=(b,ue,se="text")=>{A(G=>({...G,data:{...G.data,[b]:se==="checkbox"?!!ue:ue}}))};async function Le(){if(!e)return;const{mode:b,list:ue,data:se,editingId:G,multiAdd:Ie,startVol:Y,endVol:de}=I;if(!se.title.trim()){alert("Title is required.");return}const fe=Se=>({title:Se||se.title.trim(),authors:se.authors.trim(),publisher:se.publisher.trim(),demographic:se.demographic.trim(),genre:se.genre.trim(),subGenre:se.subGenre.trim(),date:se.date.trim(),cover:se.cover.trim(),isbn:se.isbn.trim(),pageCount:se.pageCount===""?"":Number(se.pageCount),rating:se.rating===""?"":Number(se.rating),amountPaid:se.amountPaid===""?"":Number(se.amountPaid),dateRead:se.dateRead.trim(),datePurchased:se.datePurchased.trim(),msrp:se.msrp===""?"":Number(se.msrp),specialType:se.specialType.trim(),specialVolumes:se.specialVolumes===""?"":Number(se.specialVolumes),collectiblePrice:se.collectiblePrice===""?"":Number(se.collectiblePrice),amazonURL:se.amazonURL.trim(),read:!!se.read,kind:ue});try{if(b==="add"&&Ie){const Se=Number(Y||0),qe=Number(de||0);if(!Number.isFinite(Se)||!Number.isFinite(qe)||Se<=0||qe<Se){alert("Provide valid start/end volumes (start > 0, end >= start).");return}const rt=[];for(let De=Se;De<=qe;De++){const Xe=`${se.title.trim()} Vol. ${De}`;rt.push(Qa(Tr(Et,ue),fe(Xe)))}await Promise.all(rt)}else b==="add"?await Qa(Tr(Et,ue),fe()):b==="edit"&&G&&await Gu(Un(Et,ue,G),fe());await Promise.all([L(),R()]),V()}catch(Se){console.error(Se),alert("Failed to save entry.")}}async function Fe(b,ue){if(e&&window.confirm("Delete this entry?"))try{await Ka(Un(Et,ue,b)),await Promise.all([L(),R()])}catch(se){console.error(se),alert("Failed to delete entry.")}}const Me=()=>D({open:!1,index:0,items:[]}),Be=()=>{if(!he.size){alert("Select at least one entry first.");return}const ue=[...o,...d].filter(G=>he.has(G.id));if(!ue.length){alert("No items selected.");return}const se=ue.map(G=>({id:G.id,kind:G.kind||(t==="wishlist"?"wishlist":"library"),data:{title:G.title||"",authors:G.authors||"",publisher:G.publisher||"",demographic:G.demographic||"",genre:G.genre||"",subGenre:G.subGenre||"",date:G.date||"",cover:G.cover||"",isbn:G.isbn||"",pageCount:G.pageCount||"",rating:G.rating||"",amountPaid:G.amountPaid||"",dateRead:G.dateRead||"",datePurchased:G.datePurchased||"",msrp:G.msrp||"",specialType:G.specialType||"",specialVolumes:G.specialVolumes||"",collectiblePrice:G.collectiblePrice||"",amazonURL:G.amazonURL||"",read:!!G.read}}));D({open:!0,index:0,items:se})},Ce=(b,ue,se="text")=>{D(G=>{const Ie=[...G.items],Y={...Ie[G.index]};return Y.data={...Y.data,[b]:se==="checkbox"?!!ue:ue},Ie[G.index]=Y,{...G,items:Ie}})},et=()=>{D(b=>({...b,index:Math.min(b.index+1,b.items.length-1)}))},vn=()=>{D(b=>({...b,index:Math.max(b.index-1,0)}))};async function $n(){if(!e)return;const b=P.items;if(!b.length){Me();return}try{const ue=b.map(se=>{const G={...se.data,pageCount:se.data.pageCount===""?"":Number(se.data.pageCount),rating:se.data.rating===""?"":Number(se.data.rating),amountPaid:se.data.amountPaid===""?"":Number(se.data.amountPaid),msrp:se.data.msrp===""?"":Number(se.data.msrp),collectiblePrice:se.data.collectiblePrice===""?"":Number(se.data.collectiblePrice),specialVolumes:se.data.specialVolumes===""?"":Number(se.data.specialVolumes),read:!!se.data.read},Ie=se.kind==="wishlist"?"wishlist":"library";return Gu(Un(Et,Ie,se.id),G)});await Promise.all(ue),await Promise.all([L(),R()]),Pe(new Set),ne(!1),Me()}catch(ue){console.error(ue),alert("Failed to save bulk edits.")}}function _n(b){const ue=he.has(b.id),se=b.kind==="library",G=()=>{X&&e?Ye(b.id):ve(b)};return h.jsxs("div",{className:"manga-card"+(b.read&&se?" read":"")+(ue?" multiselect-selected":""),onClick:G,children:[h.jsx("div",{className:"manga-card-cover-wrap",children:h.jsx("img",{src:b.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),h.jsxs("div",{className:"manga-card-body",children:[h.jsx("div",{className:"manga-card-title",children:b.title||"Untitled"}),h.jsxs("div",{className:"manga-card-meta",children:[b.authors&&b.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[b.authors,h.jsx("br",{})]}),b.publisher&&b.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[b.publisher,h.jsx("br",{})]}),b.date&&b.date!=="Unknown"&&b.date]}),b.isbn&&h.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",b.isbn]}),e&&h.jsxs("div",{className:"manga-card-actions",children:[h.jsx("button",{type:"button",className:"manga-btn mini",onClick:Ie=>{Ie.stopPropagation(),me(b)},children:"Edit"}),h.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:Ie=>{Ie.stopPropagation(),Fe(b.id,b.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},b.id)}const wn=t==="library"?st:lt;return h.jsxs("div",{className:"manga-page",children:[h.jsxs("header",{className:"manga-header",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"manga-header-title",children:["Tyler's Manga Library",h.jsx("span",{className:"manga-badge",children:"Firestore synced"})]}),h.jsx("div",{className:"manga-header-sub",children:"Library & Wishlist are managed via Firestore. This React port reuses the same collections as your original index.html."})]}),e&&h.jsx("div",{className:"manga-admin-actions",children:h.jsxs("button",{className:"manga-btn",onClick:()=>Q(t==="wishlist"?"wishlist":"library"),children:["Add ",t==="wishlist"?"Wishlist":"Library"," Item"]})})]}),h.jsxs("div",{className:"manga-tabs",children:[h.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{i("library"),ne(!1),Pe(new Set)},children:"Library"}),h.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{i("wishlist"),ne(!1),Pe(new Set)},children:"Wishlist"}),h.jsx("button",{className:"manga-tab-btn"+(t==="dashboard"?" active":""),onClick:()=>{i("dashboard"),ne(!1),Pe(new Set)},children:"Manga Dashboard"})]}),t!=="dashboard"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-toolbar",children:[h.jsxs("div",{className:"manga-toolbar-left",children:[h.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?B:U,onChange:b=>t==="library"?q(b.target.value):H(b.target.value)}),h.jsx("div",{className:"manga-counter",children:t==="library"?h.jsxs(h.Fragment,{children:["Library: ",st.length," / ",o.length]}):h.jsxs(h.Fragment,{children:["Wishlist: ",lt.length," / ",d.length]})})]}),h.jsx("div",{className:"manga-toolbar-right",children:e&&h.jsx("button",{className:"manga-btn secondary"+(X?" active":""),onClick:xt,children:X?"Exit Multi-select":"Multi-select"})})]}),e&&X&&h.jsxs("div",{className:"manga-multiselect-bar",children:[h.jsxs("span",{children:["Selected: ",h.jsx("strong",{children:he.size})]}),h.jsx("button",{className:"manga-btn",onClick:Be,children:"Bulk Edit"}),h.jsxs("button",{className:"manga-btn secondary",onClick:()=>ae("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"manga-btn",onClick:()=>ae("markRead"),children:"Mark Read"}),h.jsx("button",{className:"manga-btn secondary",onClick:()=>ae("markUnread"),children:"Mark Unread"})]}),h.jsx("button",{className:"manga-btn danger",onClick:()=>ae("delete"),children:"Delete"})]})]}),E?h.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):S?h.jsx("div",{className:"manga-empty-state",children:S}):t==="dashboard"?h.jsx(MR,{library:o,wishlist:d}):wn.length===0?h.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):h.jsx("div",{className:"manga-grid",children:wn.map(b=>_n(b))}),re&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:b=>{b.target===b.currentTarget&&ce()},children:h.jsxs("div",{className:"manga-modal",children:[h.jsx("div",{className:"manga-modal-cover-wrap",children:h.jsx("img",{src:re.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:re.title||"Untitled"}),h.jsx("button",{className:"manga-modal-close",onClick:ce,type:"button",children:"Close"})]}),h.jsxs("div",{className:"manga-modal-meta",children:[re.authors&&re.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Author(s):"})," ",re.authors,h.jsx("br",{})]}),re.publisher&&re.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Publisher:"})," ",re.publisher,h.jsx("br",{})]}),re.date&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Release:"})," ",re.date,h.jsx("br",{})]}),re.isbn&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"ISBN:"})," ",re.isbn,h.jsx("br",{})]})]}),h.jsxs("div",{className:"manga-modal-details",children:[re.pageCount&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Pages:"})," ",re.pageCount,h.jsx("br",{})]}),re.rating&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Rating:"})," ",re.rating,"/10",h.jsx("br",{})]}),re.amountPaid&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Amount Paid:"})," $",re.amountPaid,h.jsx("br",{})]}),re.msrp&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"MSRP:"})," $",re.msrp,h.jsx("br",{})]}),re.collectiblePrice&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Collectible:"})," $",re.collectiblePrice,h.jsx("br",{})]}),re.read&&re.dateRead&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Date Read:"})," ",re.dateRead,h.jsx("br",{})]}),re.amazonURL&&h.jsx("div",{style:{marginTop:"6px"},children:h.jsx("a",{href:re.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),h.jsx("div",{className:"manga-modal-footer",children:h.jsx("div",{children:re.kind==="library"&&re.read?"Marked as read in your library.":re.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."})})]})]})}),e&&I.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:b=>{b.target===b.currentTarget&&V()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:I.mode==="add"?"Add Entry":"Edit Entry"}),h.jsx("button",{className:"manga-modal-close",onClick:V,type:"button",children:"Close"})]}),h.jsxs("div",{className:"admin-form-grid",children:[h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:I.data.title,list:"adminTitleSuggestions",onChange:b=>_e("title",b.target.value)})]}),h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:I.data.authors,onChange:b=>_e("authors",b.target.value)})]}),h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:I.data.publisher,onChange:b=>_e("publisher",b.target.value)})]}),h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:I.data.demographic,onChange:b=>_e("demographic",b.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:I.data.genre,onChange:b=>_e("genre",b.target.value)})]}),h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:I.data.subGenre,onChange:b=>_e("subGenre",b.target.value)})]}),h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:I.data.date,onChange:b=>_e("date",b.target.value)})]}),h.jsxs("label",{children:["ISBN",h.jsx("input",{type:"text",value:I.data.isbn,onChange:b=>_e("isbn",b.target.value)})]}),h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",value:I.data.cover,onChange:b=>_e("cover",b.target.value)})]}),h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",value:I.data.pageCount,onChange:b=>_e("pageCount",b.target.value)})]}),h.jsxs("label",{children:["Rating",h.jsx("input",{type:"number",step:"0.5",min:"0",max:"10",value:I.data.rating,onChange:b=>_e("rating",b.target.value)})]}),h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:I.data.amountPaid,onChange:b=>_e("amountPaid",b.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:I.data.msrp,onChange:b=>_e("msrp",b.target.value)})]}),h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:I.data.collectiblePrice,onChange:b=>_e("collectiblePrice",b.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:I.data.datePurchased,onChange:b=>_e("datePurchased",b.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:I.data.dateRead,onChange:b=>_e("dateRead",b.target.value)})]}),h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:I.data.specialType,onChange:b=>_e("specialType",b.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",value:I.data.specialVolumes,onChange:b=>_e("specialVolumes",b.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:I.data.amazonURL,onChange:b=>_e("amazonURL",b.target.value)})]}),h.jsxs("label",{className:"checkbox-row",children:[h.jsx("input",{type:"checkbox",checked:I.data.read,onChange:b=>_e("read",b.target.checked,"checkbox")}),h.jsx("span",{children:"Marked as read"})]}),h.jsxs("label",{className:"checkbox-row",children:[h.jsx("input",{type:"checkbox",checked:I.multiAdd,onChange:b=>A(ue=>({...ue,multiAdd:b.target.checked}))}),h.jsx("span",{children:"Multi-create volumes"})]}),I.multiAdd&&h.jsxs(h.Fragment,{children:[h.jsxs("label",{children:["Start Volume",h.jsx("input",{type:"number",min:"1",value:I.startVol,onChange:b=>A(ue=>({...ue,startVol:b.target.value}))})]}),h.jsxs("label",{children:["End Volume",h.jsx("input",{type:"number",min:"1",value:I.endVol,onChange:b=>A(ue=>({...ue,endVol:b.target.value}))})]})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:V,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:Le,type:"button",children:I.mode==="add"?"Add":"Save"})]})]})})}),e&&P.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:b=>{b.target===b.currentTarget&&Me()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",P.index+1," / ",P.items.length,")"]}),h.jsx("button",{className:"manga-modal-close",onClick:Me,type:"button",children:"Close"})]}),P.items.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",P.items[P.index].data.title||"Untitled"]}),h.jsxs("div",{className:"admin-form-grid",children:[h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:P.items[P.index].data.title,onChange:b=>Ce("title",b.target.value)})]}),h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:P.items[P.index].data.authors,onChange:b=>Ce("authors",b.target.value)})]}),h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:P.items[P.index].data.publisher,onChange:b=>Ce("publisher",b.target.value)})]}),h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:P.items[P.index].data.demographic,onChange:b=>Ce("demographic",b.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:P.items[P.index].data.genre,onChange:b=>Ce("genre",b.target.value)})]}),h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:P.items[P.index].data.subGenre,onChange:b=>Ce("subGenre",b.target.value)})]}),h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:P.items[P.index].data.date,onChange:b=>Ce("date",b.target.value)})]}),h.jsxs("label",{children:["ISBN",h.jsx("input",{type:"text",value:P.items[P.index].data.isbn,onChange:b=>Ce("isbn",b.target.value)})]}),h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",value:P.items[P.index].data.cover,onChange:b=>Ce("cover",b.target.value)})]}),h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",value:P.items[P.index].data.pageCount,onChange:b=>Ce("pageCount",b.target.value)})]}),h.jsxs("label",{children:["Rating",h.jsx("input",{type:"number",step:"0.5",min:"0",max:"10",value:P.items[P.index].data.rating,onChange:b=>Ce("rating",b.target.value)})]}),h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:P.items[P.index].data.amountPaid,onChange:b=>Ce("amountPaid",b.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:P.items[P.index].data.msrp,onChange:b=>Ce("msrp",b.target.value)})]}),h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:P.items[P.index].data.collectiblePrice,onChange:b=>Ce("collectiblePrice",b.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:P.items[P.index].data.datePurchased,onChange:b=>Ce("datePurchased",b.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:P.items[P.index].data.dateRead,onChange:b=>Ce("dateRead",b.target.value)})]}),h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:P.items[P.index].data.specialType,onChange:b=>Ce("specialType",b.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",value:P.items[P.index].data.specialVolumes,onChange:b=>Ce("specialVolumes",b.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:P.items[P.index].data.amazonURL,onChange:b=>Ce("amazonURL",b.target.value)})]}),h.jsxs("label",{className:"checkbox-row",children:[h.jsx("input",{type:"checkbox",checked:P.items[P.index].data.read,onChange:b=>Ce("read",b.target.checked,"checkbox")}),h.jsx("span",{children:"Marked as read"})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[h.jsxs("div",{children:[h.jsx("button",{className:"manga-btn secondary",onClick:vn,type:"button",disabled:P.index===0,children:"Previous"}),h.jsx("button",{className:"manga-btn secondary",onClick:et,type:"button",disabled:P.index===P.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:Me,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:$n,type:"button",children:"Save Edits"})]})]})]})]})})})]})}titleSuggestions.map(r=>h.jsx("option",{value:r},r));const UR="https://imokmalworker.imokissick.workers.dev/?url=",zR="im_ok",fv=300,BR={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function $R(r){const e=BR[r.status]||(typeof r.status=="string"?r.status.toLowerCase():"unknown");return{id:r.anime_id||r.id,title:r.anime_title||r.title||"Untitled",episodes:r.anime_num_episodes??r.episodes??null,status:e,score:r.score??null}}function pv(){return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null}]}async function WR(r,e){const t=`https://myanimelist.net/animelist/${r}/load.json?status=7&offset=${e}`,i=await fetch(`${UR}${encodeURIComponent(t)}`);if(!i.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return i.json()}async function HR(r=zR){const e=[];try{let t=0;for(;;){const i=await WR(r,t);if(!Array.isArray(i)||i.length===0||(e.push(...i),i.length<fv))break;t+=fv}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),pv()}return e.length?e.map($R):pv()}function qR(){const r=O=>O?O.toString().replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase()):"Unknown",[e,t]=K.useState([]),[i,o]=K.useState([]),[l,d]=K.useState(""),[p,y]=K.useState("all"),[v,E]=K.useState(!0),[x,S]=K.useState("");return K.useEffect(()=>{async function O(){try{const q=[...await HR()].sort((U,H)=>(U.title||"").localeCompare(H.title||""));t(q),o(q)}catch(B){console.error(B),S("Failed to load data from MAL.")}finally{E(!1)}}O()},[]),K.useEffect(()=>{let O=[...e];if(p!=="all"&&(O=O.filter(B=>(B.status||"").toLowerCase()===p)),l){const B=l.toLowerCase();O=O.filter(q=>(q.title||"").toLowerCase().includes(B))}o(O)},[e,p,l]),h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"Anime Library"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Read-only mirror of your MyAnimeList entries."})]}),h.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"12px"},children:[h.jsx("input",{type:"text",placeholder:"Search anime by title...",value:l,onChange:O=>d(O.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid var(--border-soft)",background:"rgba(43,15,29,0.93)",color:"#fff",fontSize:"0.9rem"}}),h.jsxs("select",{value:p,onChange:O=>y(O.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid var(--border-soft)",background:"rgba(43,15,29,0.93)",color:"#fff",fontSize:"0.9rem"},children:[h.jsx("option",{value:"all",children:"All statuses"}),h.jsx("option",{value:"watching",children:"Watching"}),h.jsx("option",{value:"completed",children:"Completed"}),h.jsx("option",{value:"on_hold",children:"On Hold"}),h.jsx("option",{value:"dropped",children:"Dropped"}),h.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"})]})]}),v&&h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading anime list from MAL..."}),x&&h.jsx("p",{style:{marginTop:"20px",color:"#ff8a80"},children:x}),!v&&!x&&h.jsxs("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",marginTop:"20px"},children:[i.length===0&&h.jsx("p",{style:{marginTop:"12px",color:"var(--text-soft)"},children:"No results match your filters yet."}),i.map(O=>h.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"16px",border:"1px solid rgba(255,182,193,0.16)",boxShadow:"var(--shadow-soft)",fontSize:"0.85rem",padding:"8px 8px 10px"},children:[h.jsx("div",{style:{fontWeight:600,color:"#ffc0cb",marginBottom:"4px"},children:O.title}),h.jsx("div",{style:{color:"var(--text-soft)"},children:O.episodes?`${O.episodes} eps`:"Episodes: ?"}),h.jsxs("div",{style:{color:"var(--text-soft)",fontSize:"0.78rem",marginTop:"4px"},children:["Status: ",r(O.status)]}),O.score!=null&&h.jsxs("div",{style:{color:"#ffd166",fontSize:"0.78rem",marginTop:"2px"},children:["Score: ",O.score||"N/A"]})]},O.id||O.title))]})]})}function GR(){const{admin:r}=Sl(),[e,t]=K.useState([]),[i,o]=K.useState(!0),[l,d]=K.useState(""),[p,y]=K.useState("all"),[v,E]=K.useState({game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:""});K.useEffect(()=>{async function H(){try{const X=Tr(Et,"tcg"),ne=await qo(X),he=[];ne.forEach(Pe=>he.push({id:Pe.id,...Pe.data()})),t(he)}catch(X){console.error("Error loading TCG:",X)}finally{o(!1)}}H()},[]);const x=e.filter(H=>{if(p!=="all"&&H.game!==p)return!1;if(!l)return!0;const X=l.toLowerCase();return(H.name||"").toLowerCase().includes(X)||(H.setName||"").toLowerCase().includes(X)||(H.number||"").toLowerCase().includes(X)}),S=e.reduce((H,X)=>{const ne=Number(X.quantity||1),he=Number(X.pricePaid||0),Pe=Number(X.estimatedValue||0);return H.totalCards+=ne,H.totalPaid+=ne*he,H.totalValue+=ne*Pe,X.game==="pokemon"&&(H.pokemon+=ne),X.game==="onepiece"&&(H.onepiece+=ne),H},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),O=S.totalValue-S.totalPaid,B=(H,X)=>{E(ne=>({...ne,[H]:X}))},q=async()=>{if(!r)return;if(!v.name.trim()){alert("Card name is required.");return}const H={game:v.game,name:v.name.trim(),setName:v.setName.trim(),number:v.number.trim(),rarity:v.rarity.trim(),condition:v.condition.trim(),quantity:Number(v.quantity||1),pricePaid:Number(v.pricePaid||0),estimatedValue:Number(v.estimatedValue||0)};try{const X=Tr(Et,"tcg");await Qa(X,H),E({game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:""});const ne=await qo(X),he=[];ne.forEach(Pe=>he.push({id:Pe.id,...Pe.data()})),t(he)}catch(X){console.error("Error adding card:",X),alert("Failed to save card.")}},U=async H=>{if(r&&window.confirm("Delete this card?"))try{await Ka(Un(Et,"tcg",H)),t(X=>X.filter(ne=>ne.id!==H))}catch(X){console.error("Delete error:",X),alert("Failed to delete card.")}};return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"TCG Collection"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Pokemon & One Piece TCG cards with quantities, prices, and collection value."})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.totalCards})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",S.totalPaid.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",S.totalValue.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:O>=0?"#00e676":"#ff8a80"},children:[O>=0?"+":"-","$",Math.abs(O).toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.pokemon})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.onepiece})]})]}),h.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[h.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:l,onChange:H=>d(H.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),h.jsxs("select",{value:p,onChange:H=>y(H.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[h.jsx("option",{value:"all",children:"All games"}),h.jsx("option",{value:"pokemon",children:"Pokemon only"}),h.jsx("option",{value:"onepiece",children:"One Piece only"})]})]}),r&&h.jsxs("section",{className:"card",style:{marginTop:"16px",borderStyle:"dashed",borderColor:"rgba(255,182,193,0.5)"},children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"10px",fontSize:"1.05rem",color:"#ffb6c1"},children:"Add card (admin)"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:v.game,onChange:H=>B("game",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:v.name,onChange:H=>B("name",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:v.setName,onChange:H=>B("setName",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:v.number,onChange:H=>B("number",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:v.rarity,onChange:H=>B("rarity",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:v.condition,onChange:H=>B("condition",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",min:"1",value:v.quantity,onChange:H=>B("quantity",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:v.pricePaid,onChange:H=>B("pricePaid",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:v.estimatedValue,onChange:H=>B("estimatedValue",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]}),h.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"10px"},children:h.jsx("button",{onClick:q,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})})]}),i?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):x.length===0?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):h.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:x.map(H=>{const X=Number(H.quantity||1),ne=X*Number(H.pricePaid||0),he=X*Number(H.estimatedValue||0);return h.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem"},children:[h.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:H.name||"Unnamed card"}),h.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:H.setName||""}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[h.jsxs("span",{children:["#",H.number||"-"]}),h.jsx("span",{children:H.rarity||""})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Cond: ",H.condition||"N/A"]}),h.jsxs("span",{children:["Qty: ",X]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Paid: $",ne.toFixed(2)]}),h.jsxs("span",{children:["Value: $",he.toFixed(2)]})]}),h.jsxs("div",{style:{marginTop:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem"},children:H.game==="pokemon"?"Pokemon":"One Piece"}),r&&h.jsx("button",{onClick:()=>U(H.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})]})]},H.id)})})]})}const KR="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",QR="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",YR="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82";function Us(r){if(!r)return null;if(r instanceof Date)return r;if(r&&typeof r.toDate=="function")return r.toDate();const e=String(r).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,d,p]=t;return new Date(Number(l),Number(d)-1,Number(p))}const i=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(i){let[,l,d,p]=i;const y=p.length===2?+`20${p}`:Number(p);return new Date(y,Number(l)-1,Number(d))}const o=new Date(e);return isNaN(o.getTime())?null:o}function ow(r){const e=(r.seriesKey||r.series||r.Series||r.title||r.Title||"").trim();return e?e.replace(/\bvolume\s+\d+.*$/i,"").replace(/\bvol\.?\s+\d+.*$/i,"").trim().toLowerCase():""}function JR(r){const e=new Map;for(const t of r){const i=ow(t)||t.id;if(!e.has(i)){const y=(t.series||t.Series||t.title||t.Title||"Unknown Series").trim();e.set(i,{key:i,title:y,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const o=e.get(i);o.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;o.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(o.readVolumes+=1,o.readPages+=l);const p=Number(t.rating||t.Rating);!isNaN(p)&&p>0&&(o.ratingSum+=p,o.ratingCount+=1)}return e}function ko(r,e,t=5){const i=new Map;for(const o of r.values()){const l=(o[e]||"").trim();if(!l)continue;const d=l.split(/[\/,]/).map(p=>p.trim()).filter(Boolean);for(const p of d)i.set(p,(i.get(p)||0)+1)}return[...i.entries()].sort((o,l)=>l[1]-o[1]).slice(0,t).map(([o,l])=>({name:o,count:l}))}function mv(r,e){const t=Array.from({length:12},(i,o)=>{const l=new Date(e,o,1);return{key:`${e}-${o}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:o,value:0}});for(const i of r){const o=Us(i.dateRead||i.DateRead);!o||o.getFullYear()!==e||(t[o.getMonth()].value+=1)}return t}function Fh(r){const e=r.getFullYear(),t=`${r.getMonth()+1}`.padStart(2,"0"),i=`${r.getDate()}`.padStart(2,"0");return`${e}-${t}-${i}`}async function Uh(r,e){try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function XR(r){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of r){const d=Us(l.dateRead||l.DateRead);d&&(t[d.getDay()]+=1)}if(!t.some(l=>l>0))return[];const o=t.reduce((l,d)=>Math.max(l,d),0)||1;return e.map((l,d)=>({label:l,value:t[d],pct:t[d]/o}))}function ZR(r,e=8){const t=[...r.values()];t.sort((l,d)=>d.volumes-l.volumes);const i=t.slice(0,e),o=i.reduce((l,d)=>Math.max(l,d.volumes),0)||1;return i.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/o}))}function eA(r){const e=[];for(const t of r){const i=Us(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!i)continue;const o=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:i,title:o})}return e.sort((t,i)=>t.date-i.date),e}function tA(r){const e=new Date;for(const t of r)if(t.date>=e)return t;return r[r.length-1]||null}function nA(r){let e=0,t=0;for(const i of r){const o=Us(i.datePurchased||i.DatePurchased),l=Us(i.dateRead||i.DateRead);if(!o||!l)continue;const d=l-o;d<=0||(e+=d/(1e3*60*60*24),t+=1)}return t?e/t:null}function rA(r){let e=0,t=0,i=0;for(const o of r){const l=Number(o.msrp||o.MSRP||0)||0,d=Number(o.amountPaid||o.AmountPaid||o.pricePaid||0)||l||0,p=Number(o.collectiblePrice||o.CollectiblePrice||0)||0;e+=l,t+=d,i+=p}return{msrpTotal:e,paidTotal:t,collectibleTotal:i}}function iA(r){const e=new Map;for(const t of r){const i=ow(t)||t.id;e.has(i)||e.set(i,{key:i,title:t.series||t.Series||t.title||t.Title||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]});const o=e.get(i);o.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,d=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,p=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,y=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;o.msrp+=l,o.paid+=d,o.collectible+=p,o.pages+=y,v&&(o.readPages+=y);const E=Number(t.rating||t.Rating);!isNaN(E)&&E>0&&o.ratings.push(E)}return[...e.values()]}function sA(r){let e=0,t=0;for(const i of r){const o=Number(i.pages||i.Pages||i.pageCount||0)||0;e+=o,(!!i.read||i.status==="Read"||i.Read===!0)&&(t+=o)}return{total:e,read:t}}function oA(r){let e=0,t=0;for(const i of r.values())i.ratingCount>0&&(e+=i.ratingSum/i.ratingCount,t+=1);return t?e/t:null}function aA({data:r}){if(!r||!r.length)return h.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=r.reduce((v,E)=>Math.max(v,E.value),0)||1,t=480,i=230,o=30,l=i-o*2,d=t/Math.max(r.length-1,1),p=r.map((v,E)=>{const x=E*d,S=i-o-v.value/e*l;return{...v,x,y:S}}),y=p.map((v,E)=>E===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return h.jsx("div",{className:"line-chart",children:h.jsxs("svg",{viewBox:`0 0 ${t} ${i}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,E)=>{const x=i-o-v*l;return h.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:x,y2:x},`h-${E}`)}),p.map((v,E)=>h.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:o/2,y2:i-o/2},`v-${E}`)),h.jsx("path",{className:"line-path",d:y}),p.map((v,E)=>h.jsxs("g",{children:[h.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),h.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),h.jsx("text",{className:"line-label",x:v.x,y:i-4,children:v.label})]},E))]})})}function lA({data:r}){return!r||!r.length?h.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):h.jsx("div",{className:"weekday-bars",children:r.map(e=>h.jsxs("div",{className:"weekday-col",children:[h.jsx("div",{className:"weekday-count",children:e.value}),h.jsx("div",{className:"weekday-bar-vert",children:h.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),h.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function uA(r,e){const t=r.getFullYear(),i=r.getMonth(),l=new Date(t,i,1).getDay(),d=new Date(t,i+1,0).getDate(),p=new Map;for(const v of e){const E=v.date;if(E.getFullYear()===t&&E.getMonth()===i){const x=E.getDate();p.has(x)||p.set(x,[]),p.get(x).push(v)}}const y=[];for(let v=0;v<l;v++)y.push({type:"pad"});for(let v=1;v<=d;v++)y.push({type:"day",day:v,releases:p.get(v)||[]});return y}function cA(){const{user:r,admin:e,loading:t}=Sl(),[i,o]=K.useState([]),[l,d]=K.useState([]),[p,y]=K.useState(!0),[v,E]=K.useState(null),[x,S]=K.useState("-"),[O,B]=K.useState(!1),[q,U]=K.useState(()=>new Date),[H,X]=K.useState({open:!1,type:null}),ne=new Date().getFullYear(),he=K.useRef(null),Pe=K.useRef(null),re=K.useRef("");K.useEffect(()=>{typeof window>"u"||(he.current=localStorage.getItem("dashboard-yearly-posted"),Pe.current=localStorage.getItem("dashboard-release-posted"))},[]),K.useEffect(()=>{let Y=!1;async function de(){if(!r||!e){o([]),d([]),E(null),y(!1);return}try{y(!0);const[fe,Se]=await Promise.all([qo(Tr(Et,"library")),qo(Tr(Et,"wishlist"))]);if(Y)return;o(fe.docs.map(qe=>({id:qe.id,...qe.data()}))),d(Se.docs.map(qe=>({id:qe.id,...qe.data()}))),E(null)}catch(fe){console.error(fe),Y||E("Failed to load dashboard data.")}finally{Y||y(!1)}}return de(),()=>{Y=!0}},[r,e]);const k=K.useMemo(()=>{const Y=i.length,de=i.filter(tt=>!!tt.read||tt.status==="Read"||tt.Read===!0).length,fe=Y-de,Se=Y?Math.round(de/Y*100):0,qe=l.length,rt=JR(i),De=mv(i,ne),Xe=mv(i,ne-1),Wn=De.reduce((tt,En)=>tt+En.value,0),Zi=XR(i),ur=ZR(rt),cr=eA(l),Nr=tA(cr),es=nA(i),ts=rA(i),ns=sA(i),rs=oA(rt),is=ko(rt,"publisher",5),br=ko(rt,"genre",5),ri=ko(rt,"demographic",5),ii=iA(i),an=[...i].map(tt=>{const En=Us(tt.dateRead||tt.DateRead)||Us(tt.datePurchased||tt.DatePurchased);return En?{title:tt.title||tt.Title||tt.series||tt.Series||"Untitled",type:tt.dateRead||tt.DateRead?"Read":"Purchased",date:En}:null}).filter(Boolean).sort((tt,En)=>En.date-tt.date).slice(0,12);return{totalLibrary:Y,readCount:de,unreadCount:fe,readPct:Se,wishlistCount:qe,seriesMap:rt,monthlyReads:De,prevYearReads:Xe,currentYearReadsTotal:Wn,weekdayBreakdown:Zi,topSeriesBars:ur,releases:cr,nextRelease:Nr,avgDays:es,collectionValue:ts,pages:ns,avgRating:rs,topPublishers:is,topGenres:br,topDemographics:ri,seriesAggregates:ii,activity:an}},[i,l,ne]),{totalLibrary:I,readCount:A,unreadCount:P,readPct:D,wishlistCount:L,seriesMap:R,monthlyReads:st,prevYearReads:lt,currentYearReadsTotal:xt,weekdayBreakdown:Ye,topSeriesBars:ae,releases:ve,nextRelease:ce,avgDays:V,collectionValue:Q,pages:me,avgRating:_e,topPublishers:Le,topGenres:Fe,topDemographics:Me,seriesAggregates:Be,activity:Ce}=k,et=ce?ce.date:null,vn=!!v;if(K.useEffect(()=>{if(!lt||!lt.length)return;const Y=ne-1,de=lt.reduce((rt,De)=>rt+De.value,0);if(!de||(he.current?parseInt(he.current,10):null)===Y)return;const Se=lt.map(rt=>`${rt.label}: ${rt.value}`).join(", "),qe=`Yearly reads summary for ${Y}: ${de} total. Breakdown: ${Se}`;Uh(KR,qe).then(()=>{he.current=String(Y),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String(Y))})},[lt,ne]),K.useEffect(()=>{if(!ce||!ve.length)return;const Y=Fh(ce.date),de=Fh(new Date);if(Y>de||Pe.current===Y)return;const fe=ve.filter(qe=>Fh(qe.date)===Y);if(!fe.length)return;const Se=`Wishlist releases for ${Y}:
${fe.map(qe=>`- ${qe.title}`).join(`
`)}`;Uh(QR,Se).then(()=>{Pe.current=Y,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",Y)})},[ce,ve]),K.useEffect(()=>{var Se,qe;if(!Ce||!Ce.length)return;const Y=Ce[0];if(!Y||!Y.date)return;const de=`${Y.type}-${Y.title}-${((qe=(Se=Y.date).toISOString)==null?void 0:qe.call(Se))||Y.date}`;if(re.current===de)return;const fe=`Activity: ${Y.type}  ${Y.title} (${Y.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})`;Uh(YR,fe).then(()=>{re.current=de})},[Ce]),K.useEffect(()=>{if(!et){S("-");return}const Y=()=>{const fe=et-new Date;if(fe<=0){S("Released");return}const Se=Math.floor(fe/1e3),qe=Math.floor(Se/86400),rt=Math.floor(Se%86400/3600).toString().padStart(2,"0"),De=Math.floor(Se%3600/60).toString().padStart(2,"0"),Xe=Math.floor(Se%60).toString().padStart(2,"0");S(`${qe}d ${rt}:${De}:${Xe}`)};Y();const de=setInterval(Y,1e3);return()=>clearInterval(de)},[et]),t)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"Checking permissions..."})]})});if(!r||!e)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-locked",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(p)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),v?h.jsx("p",{className:"error",children:v}):h.jsx("p",{children:"Loading stats..."})]})});const $n=I+L,_n=$n?Math.round(I/$n*100):0,wn=[...R.values()].filter(Y=>Y.ratingCount>0).map(Y=>({title:Y.title,avg:Y.ratingSum/Y.ratingCount,count:Y.ratingCount})).sort((Y,de)=>de.avg-Y.avg||de.count-Y.count).slice(0,3);function b(){if(et)U(new Date(et.getFullYear(),et.getMonth(),1));else if(ve.length){const Y=ve[0].date;U(new Date(Y.getFullYear(),Y.getMonth(),1))}B(!0)}function ue(Y){X({open:!0,type:Y})}function se(){X({open:!1,type:null})}const G=uA(q,ve);function Ie(){const Y=H.type;if(!Y)return null;if(Y==="publishers"){const de=[...ko(R,"publisher",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Publishers by Series"}),de.length===0?h.jsx("p",{children:"No publisher data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Publisher"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:de.map((fe,Se)=>h.jsxs("tr",{children:[h.jsx("td",{children:Se+1}),h.jsx("td",{children:fe.name}),h.jsx("td",{children:fe.count})]},fe.name+Se))})]})]})}if(Y==="genres"){const de=[...ko(R,"genre",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Genres by Series"}),de.length===0?h.jsx("p",{children:"No genre data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Genre"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:de.map((fe,Se)=>h.jsxs("tr",{children:[h.jsx("td",{children:Se+1}),h.jsx("td",{children:fe.name}),h.jsx("td",{children:fe.count})]},fe.name+Se))})]})]})}if(Y==="demographics"){const de=[...ko(R,"demographic",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Demographics by Series"}),de.length===0?h.jsx("p",{children:"No demographic data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Demographic"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:de.map((fe,Se)=>h.jsxs("tr",{children:[h.jsx("td",{children:Se+1}),h.jsx("td",{children:fe.name}),h.jsx("td",{children:fe.count})]},fe.name+Se))})]})]})}if(Y==="timeToRead")return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Average Time From Purchase to Read"}),V==null?h.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):h.jsxs("p",{children:["On average, it takes"," ",h.jsxs("strong",{children:[V.toFixed(1)," days"]})," from purchase to finishing a volume."]})]});if(Y==="collectionValue"){const{msrpTotal:de,paidTotal:fe}=Q,Se=de-fe,qe=de>0?(fe/de*100).toFixed(1):"-",rt=[...Be].filter(De=>De.msrp||De.paid||De.collectible).sort((De,Xe)=>Xe.msrp+Xe.collectible-(De.msrp+De.collectible));return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Collection Value Breakdown"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total MSRP"}),h.jsxs("td",{children:["$",de.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Total Paid"}),h.jsxs("td",{children:["$",fe.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Difference"}),h.jsxs("td",{children:["$",Se.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Paid vs MSRP"}),h.jsx("td",{children:qe==="-"?"-":`${qe}%`})]})]})}),rt.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"MSRP"}),h.jsx("th",{children:"Paid"}),h.jsx("th",{children:"Collectible"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:rt.map((De,Xe)=>h.jsxs("tr",{children:[h.jsx("td",{children:De.title}),h.jsxs("td",{children:["$",De.msrp.toFixed(2)]}),h.jsxs("td",{children:["$",De.paid.toFixed(2)]}),h.jsx("td",{children:De.collectible?`$${De.collectible.toFixed(2)}`:"--"}),h.jsx("td",{children:De.books})]},De.title+Xe))})]})]})]})}if(Y==="pages"){const de=[...Be].filter(fe=>fe.pages>0).map(fe=>({...fe,pct:fe.pages?Math.round(fe.readPages/fe.pages*100):0})).sort((fe,Se)=>Se.pages-fe.pages);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Pages Read vs Total"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total Pages"}),h.jsx("td",{children:me.total.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Pages Read"}),h.jsx("td",{children:me.read.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Completion"}),h.jsx("td",{children:me.total?`${(me.read/me.total*100).toFixed(1)}%`:"-"})]})]})}),de.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Read Pages"}),h.jsx("th",{children:"Total Pages"}),h.jsx("th",{children:"% Read"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:de.map((fe,Se)=>h.jsxs("tr",{children:[h.jsx("td",{children:fe.title}),h.jsx("td",{children:fe.readPages.toLocaleString()}),h.jsx("td",{children:fe.pages.toLocaleString()}),h.jsxs("td",{children:[fe.pct,"%"]}),h.jsx("td",{children:fe.books})]},fe.title+Se))})]})]})]})}if(Y==="ratings"){const de=[...Be].map(fe=>{if(!fe.ratings.length)return null;const Se=fe.ratings.reduce((qe,rt)=>qe+rt,0)/fe.ratings.length;return{title:fe.title,avg:Se,count:fe.ratings.length}}).filter(Boolean).sort((fe,Se)=>Se.avg-fe.avg||Se.count-fe.count);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Ratings Overview"}),_e==null?h.jsx("p",{children:"No ratings have been recorded yet."}):h.jsxs("p",{children:["Average series rating across rated series is"," ",h.jsx("strong",{children:_e.toFixed(2)}),"."]}),de.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Avg"}),h.jsx("th",{children:"Ratings"})]})}),h.jsx("tbody",{children:de.map((fe,Se)=>h.jsxs("tr",{children:[h.jsx("td",{children:fe.title}),h.jsx("td",{children:fe.avg.toFixed(2)}),h.jsx("td",{children:fe.count})]},fe.title+Se))})]})]})]})}return Y==="releases"?h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Wishlist Releases"}),ve.length===0?h.jsx("p",{children:"No wishlist releases found."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Date"}),h.jsx("th",{children:"Title"})]})}),h.jsx("tbody",{children:ve.map((de,fe)=>h.jsxs("tr",{children:[h.jsx("td",{children:de.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),h.jsx("td",{children:de.title})]},fe))})]})]}):null}return h.jsxs("div",{className:"page dashboard-page",children:[h.jsx("header",{className:"dashboard-header",children:h.jsxs("div",{children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{className:"dashboard-sub",children:"Admin-only analytics for your manga library and wishlist."})]})}),h.jsx("section",{id:"dashboardSection",className:"page-section active",children:h.jsxs("div",{className:"dashboard-grid",children:[h.jsxs("div",{className:"stat-stack",children:[h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Total Library Books"}),h.jsx("div",{className:"stat-value",children:I}),h.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Wishlist Items"}),h.jsx("div",{className:"stat-value",children:L}),h.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Read / Unread"}),h.jsx("div",{className:"pie",style:{"--pct":`${D*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[D,"%"]})}),h.jsxs("div",{className:"stat-value",children:[A," read / ",P," unread"]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>ue("ratings"),children:[h.jsx("h3",{children:"Ratings"}),h.jsx("div",{className:"stat-value",children:_e==null?"-":_e.toFixed(2)}),h.jsx("div",{className:"stat-sub",children:"Average across rated series."}),h.jsx("div",{className:"stat-list compact",children:wn.length?wn.map((Y,de)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:de+1}),h.jsx("span",{className:"stat-name",children:Y.title}),h.jsx("span",{className:"stat-count",children:Y.avg.toFixed(2)})]},Y.title+de)):h.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>ue("pages"),children:[h.jsx("h3",{children:"Page Count Read / Total"}),h.jsxs("div",{className:"stat-value",children:[me.read.toLocaleString()," / ",me.total.toLocaleString()]}),h.jsx("div",{className:"stat-sub",children:me.total?`${(me.read/me.total*100).toFixed(1)}% read`:"-"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Library vs Wishlist"}),h.jsx("div",{className:"pie",style:{"--pct":`${_n*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[_n,"%"]})}),h.jsxs("div",{className:"stat-value",children:[I," / ",L]}),h.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>ue("demographics"),children:[h.jsx("h3",{children:"Top Demographics"}),h.jsx("div",{className:"stat-list",children:Me.length?Me.slice(0,3).map((Y,de)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:de+1}),h.jsx("span",{className:"stat-name",children:Y.name}),h.jsx("span",{className:"stat-count",children:Y.count})]},Y.name)):h.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>ue("publishers"),children:[h.jsx("h3",{children:"Top Publishers"}),h.jsx("div",{className:"stat-list",children:Le.length?Le.slice(0,3).map((Y,de)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:de+1}),h.jsx("span",{className:"stat-name",children:Y.name}),h.jsx("span",{className:"stat-count",children:Y.count})]},Y.name)):h.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>ue("genres"),children:[h.jsx("h3",{children:"Top Genres"}),h.jsx("div",{className:"stat-list",children:Fe.length?Fe.slice(0,3).map((Y,de)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:de+1}),h.jsx("span",{className:"stat-name",children:Y.name}),h.jsx("span",{className:"stat-count",children:Y.count})]},Y.name)):h.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>{b()},children:[h.jsx("h3",{children:"Next Wishlist Release"}),h.jsx("div",{className:"stat-value next-release",children:ce?ce.title:"No upcoming releases"}),h.jsxs("div",{className:"stat-sub",children:[et?et.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",h.jsx("br",{}),h.jsx("span",{id:"statNextCountdown",children:x})]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>ue("collectionValue"),style:{textAlign:"center"},children:[h.jsx("h3",{children:"Collection Pricing"}),h.jsxs("div",{className:"stat-value stat-msrp",children:["$",Q.msrpTotal.toFixed(2)]}),h.jsxs("div",{className:"stat-value stat-paid",children:["$",Q.paidTotal.toFixed(2),Q.msrpTotal>0&&h.jsxs("span",{className:"stat-paid-pct",children:["(",((1-Q.paidTotal/Q.msrpTotal)*100).toFixed(1),"% off)"]})]}),h.jsxs("div",{className:"stat-value stat-collectible",children:["$",Q.collectibleTotal.toFixed(2)]}),h.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Current Year Reads"}),h.jsx("div",{className:"stat-value",children:xt}),h.jsxs("div",{className:"stat-sub",children:["Reads in ",ne]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>ue("timeToRead"),children:[h.jsx("h3",{children:"Avg Days From Purchase to Read"}),h.jsx("div",{className:"stat-value",children:V==null?"-":`${V.toFixed(1)} days`}),h.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),h.jsxs("div",{className:"stat-duo",children:[h.jsxs("div",{className:"stat-card tall",children:[h.jsxs("h3",{children:["Reads Per Month (",ne,")"]}),h.jsx(aA,{data:st})]}),h.jsxs("div",{className:"stat-card tall",children:[h.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),h.jsx(lA,{data:Ye}),h.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),h.jsxs("div",{className:"stat-card wide",children:[h.jsx("h3",{children:"Activity Log"}),vn&&h.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),h.jsx("div",{className:"activity-log",children:Ce.length?Ce.map((Y,de)=>h.jsxs("div",{className:"activity-row",children:[h.jsx("span",{className:"activity-type",children:Y.type}),h.jsx("span",{className:"activity-title",children:Y.title}),h.jsx("span",{className:"activity-date",children:Y.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]},Y.title+de)):h.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]})]})}),O&&h.jsx("div",{id:"calendarOverlay",onClick:()=>B(!1),children:h.jsxs("div",{id:"calendarCard",onClick:Y=>Y.stopPropagation(),children:[h.jsxs("div",{className:"calendar-header",children:[h.jsx("div",{className:"calendar-title",children:q.toLocaleString(void 0,{month:"long",year:"numeric"})}),h.jsxs("div",{className:"calendar-nav",children:[h.jsx("button",{className:"calendar-nav-btn",onClick:()=>U(new Date(q.getFullYear(),q.getMonth()-1,1)),children:"<"}),h.jsx("button",{className:"calendar-nav-btn",onClick:()=>U(new Date(q.getFullYear(),q.getMonth()+1,1)),children:">"})]})]}),h.jsxs("div",{className:"calendar-weekdays",children:[h.jsx("div",{children:"Sun"}),h.jsx("div",{children:"Mon"}),h.jsx("div",{children:"Tue"}),h.jsx("div",{children:"Wed"}),h.jsx("div",{children:"Thu"}),h.jsx("div",{children:"Fri"}),h.jsx("div",{children:"Sat"})]}),h.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:G.map((Y,de)=>Y.type==="pad"?h.jsx("div",{className:"calendar-day pad"},de):h.jsxs("div",{className:"calendar-day",children:[h.jsx("div",{className:"day-num",children:Y.day}),h.jsxs("div",{className:"calendar-releases",children:[Y.releases.slice(0,2).map((fe,Se)=>h.jsx("div",{className:"calendar-release",title:fe.title,children:fe.title},Se)),Y.releases.length>2&&h.jsxs("button",{className:"calendar-more-btn",children:["+",Y.releases.length-2," more"]})]})]},de))}),!ve.length&&h.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),h.jsx("button",{id:"calendarClose",onClick:()=>B(!1),children:"x"})]})}),H.open&&h.jsx("div",{id:"statDetailOverlay",onClick:se,children:h.jsxs("div",{id:"statDetailCard",onClick:Y=>Y.stopPropagation(),children:[h.jsx("button",{id:"statDetailClose",onClick:se,children:"x"}),h.jsxs("h2",{id:"statDetailTitle",children:[H.type==="publishers"&&"Top Publishers",H.type==="genres"&&"Top Genres",H.type==="demographics"&&"Top Demographics",H.type==="timeToRead"&&"Avg Time From Purchase to Read",H.type==="collectionValue"&&"Collection Value",H.type==="pages"&&"Pages Read vs Total",H.type==="ratings"&&"Ratings",H.type==="releases"&&"Wishlist Releases"]}),h.jsx("div",{id:"statDetailBody",children:Ie()})]})})]})}function dA(){const r=Ef(),{user:e}=Sl();e&&r("/");async function t(){try{const i=new xr;await I_(Ui,i),r("/")}catch(i){console.error(i),alert("Google Sign-In failed.")}}return h.jsx("div",{className:"signin-page",children:h.jsxs("div",{className:"signin-card",children:[h.jsx("h2",{className:"signin-title",children:"Welcome Back"}),h.jsx("p",{className:"signin-sub",children:"Sign in to access your dashboard & collections."}),h.jsxs("button",{className:"google-btn",onClick:t,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsxs("button",{className:"signin-cancel",onClick:()=>r("/"),children:["<"," Back to Home"]})]})})}function hA(){return h.jsxs(bR,{children:[h.jsx(DR,{}),h.jsxs(hT,{children:[h.jsx(As,{path:"/",element:h.jsx(VR,{})}),h.jsx(As,{path:"/manga",element:h.jsx(FR,{})}),h.jsx(As,{path:"/anime",element:h.jsx(qR,{})}),h.jsx(As,{path:"/tcg",element:h.jsx(GR,{})}),h.jsx(As,{path:"/dashboard",element:h.jsx(cA,{})}),h.jsx(As,{path:"/signin",element:h.jsx(dA,{})})]})]})}wE.createRoot(document.getElementById("root")).render(h.jsx(yv.StrictMode,{children:h.jsx(_T,{basename:"/base",children:h.jsx(hA,{})})}));
