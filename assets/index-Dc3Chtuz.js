function Rx(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Vv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var kh={exports:{}},sl={},jh={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function bx(){if(Dg)return tt;Dg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function C(L){return L===null||typeof L!="object"?null:(L=E&&L[E]||L["@@iterator"],typeof L=="function"?L:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,Z={};function $(L,j,se){this.props=L,this.context=j,this.refs=Z,this.updater=se||W}$.prototype.isReactComponent={},$.prototype.setState=function(L,j){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,j,"setState")},$.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function re(){}re.prototype=$.prototype;function ne(L,j,se){this.props=L,this.context=j,this.refs=Z,this.updater=se||W}var oe=ne.prototype=new re;oe.constructor=ne,K(oe,$.prototype),oe.isPureReactComponent=!0;var me=Array.isArray,Te=Object.prototype.hasOwnProperty,pe={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function P(L,j,se){var _e,xe={},Ee=null,Fe=null;if(j!=null)for(_e in j.ref!==void 0&&(Fe=j.ref),j.key!==void 0&&(Ee=""+j.key),j)Te.call(j,_e)&&!D.hasOwnProperty(_e)&&(xe[_e]=j[_e]);var ke=arguments.length-2;if(ke===1)xe.children=se;else if(1<ke){for(var He=Array(ke),rt=0;rt<ke;rt++)He[rt]=arguments[rt+2];xe.children=He}if(L&&L.defaultProps)for(_e in ke=L.defaultProps,ke)xe[_e]===void 0&&(xe[_e]=ke[_e]);return{$$typeof:n,type:L,key:Ee,ref:Fe,props:xe,_owner:pe.current}}function k(L,j){return{$$typeof:n,type:L.type,key:j,ref:L.ref,props:L.props,_owner:L._owner}}function A(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function F(L){var j={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(se){return j[se]})}var R=/\/+/g;function b(L,j){return typeof L=="object"&&L!==null&&L.key!=null?F(""+L.key):j.toString(36)}function ge(L,j,se,_e,xe){var Ee=typeof L;(Ee==="undefined"||Ee==="boolean")&&(L=null);var Fe=!1;if(L===null)Fe=!0;else switch(Ee){case"string":case"number":Fe=!0;break;case"object":switch(L.$$typeof){case n:case e:Fe=!0}}if(Fe)return Fe=L,xe=xe(Fe),L=_e===""?"."+b(Fe,0):_e,me(xe)?(se="",L!=null&&(se=L.replace(R,"$&/")+"/"),ge(xe,j,se,"",function(rt){return rt})):xe!=null&&(A(xe)&&(xe=k(xe,se+(!xe.key||Fe&&Fe.key===xe.key?"":(""+xe.key).replace(R,"$&/")+"/")+L)),j.push(xe)),1;if(Fe=0,_e=_e===""?".":_e+":",me(L))for(var ke=0;ke<L.length;ke++){Ee=L[ke];var He=_e+b(Ee,ke);Fe+=ge(Ee,j,se,He,xe)}else if(He=C(L),typeof He=="function")for(L=He.call(L),ke=0;!(Ee=L.next()).done;)Ee=Ee.value,He=_e+b(Ee,ke++),Fe+=ge(Ee,j,se,He,xe);else if(Ee==="object")throw j=String(L),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return Fe}function Ke(L,j,se){if(L==null)return L;var _e=[],xe=0;return ge(L,_e,"","",function(Ee){return j.call(se,Ee,xe++)}),_e}function Qe(L){if(L._status===-1){var j=L._result;j=j(),j.then(function(se){(L._status===0||L._status===-1)&&(L._status=1,L._result=se)},function(se){(L._status===0||L._status===-1)&&(L._status=2,L._result=se)}),L._status===-1&&(L._status=0,L._result=j)}if(L._status===1)return L._result.default;throw L._result}var G={current:null},V={transition:null},ae={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:V,ReactCurrentOwner:pe};function ue(){throw Error("act(...) is not supported in production builds of React.")}return tt.Children={map:Ke,forEach:function(L,j,se){Ke(L,function(){j.apply(this,arguments)},se)},count:function(L){var j=0;return Ke(L,function(){j++}),j},toArray:function(L){return Ke(L,function(j){return j})||[]},only:function(L){if(!A(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},tt.Component=$,tt.Fragment=t,tt.Profiler=a,tt.PureComponent=ne,tt.StrictMode=s,tt.Suspense=m,tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,tt.act=ue,tt.cloneElement=function(L,j,se){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var _e=K({},L.props),xe=L.key,Ee=L.ref,Fe=L._owner;if(j!=null){if(j.ref!==void 0&&(Ee=j.ref,Fe=pe.current),j.key!==void 0&&(xe=""+j.key),L.type&&L.type.defaultProps)var ke=L.type.defaultProps;for(He in j)Te.call(j,He)&&!D.hasOwnProperty(He)&&(_e[He]=j[He]===void 0&&ke!==void 0?ke[He]:j[He])}var He=arguments.length-2;if(He===1)_e.children=se;else if(1<He){ke=Array(He);for(var rt=0;rt<He;rt++)ke[rt]=arguments[rt+2];_e.children=ke}return{$$typeof:n,type:L.type,key:xe,ref:Ee,props:_e,_owner:Fe}},tt.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},tt.createElement=P,tt.createFactory=function(L){var j=P.bind(null,L);return j.type=L,j},tt.createRef=function(){return{current:null}},tt.forwardRef=function(L){return{$$typeof:f,render:L}},tt.isValidElement=A,tt.lazy=function(L){return{$$typeof:w,_payload:{_status:-1,_result:L},_init:Qe}},tt.memo=function(L,j){return{$$typeof:v,type:L,compare:j===void 0?null:j}},tt.startTransition=function(L){var j=V.transition;V.transition={};try{L()}finally{V.transition=j}},tt.unstable_act=ue,tt.useCallback=function(L,j){return G.current.useCallback(L,j)},tt.useContext=function(L){return G.current.useContext(L)},tt.useDebugValue=function(){},tt.useDeferredValue=function(L){return G.current.useDeferredValue(L)},tt.useEffect=function(L,j){return G.current.useEffect(L,j)},tt.useId=function(){return G.current.useId()},tt.useImperativeHandle=function(L,j,se){return G.current.useImperativeHandle(L,j,se)},tt.useInsertionEffect=function(L,j){return G.current.useInsertionEffect(L,j)},tt.useLayoutEffect=function(L,j){return G.current.useLayoutEffect(L,j)},tt.useMemo=function(L,j){return G.current.useMemo(L,j)},tt.useReducer=function(L,j,se){return G.current.useReducer(L,j,se)},tt.useRef=function(L){return G.current.useRef(L)},tt.useState=function(L){return G.current.useState(L)},tt.useSyncExternalStore=function(L,j,se){return G.current.useSyncExternalStore(L,j,se)},tt.useTransition=function(){return G.current.useTransition()},tt.version="18.3.1",tt}var Vg;function bf(){return Vg||(Vg=1,jh.exports=bx()),jh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function Ax(){if(Lg)return sl;Lg=1;var n=bf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,m,v){var w,E={},C=null,W=null;v!==void 0&&(C=""+v),m.key!==void 0&&(C=""+m.key),m.ref!==void 0&&(W=m.ref);for(w in m)s.call(m,w)&&!l.hasOwnProperty(w)&&(E[w]=m[w]);if(f&&f.defaultProps)for(w in m=f.defaultProps,m)E[w]===void 0&&(E[w]=m[w]);return{$$typeof:e,type:f,key:C,ref:W,props:E,_owner:a.current}}return sl.Fragment=t,sl.jsx=h,sl.jsxs=h,sl}var Og;function Nx(){return Og||(Og=1,kh.exports=Ax()),kh.exports}var c=Nx(),M=bf();const Lv=Vv(M),kx=Rx({__proto__:null,default:Lv},[M]);var Qc={},Dh={exports:{}},Zn={},Vh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function jx(){return Mg||(Mg=1,(function(n){function e(V,ae){var ue=V.length;V.push(ae);e:for(;0<ue;){var L=ue-1>>>1,j=V[L];if(0<a(j,ae))V[L]=ae,V[ue]=j,ue=L;else break e}}function t(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var ae=V[0],ue=V.pop();if(ue!==ae){V[0]=ue;e:for(var L=0,j=V.length,se=j>>>1;L<se;){var _e=2*(L+1)-1,xe=V[_e],Ee=_e+1,Fe=V[Ee];if(0>a(xe,ue))Ee<j&&0>a(Fe,xe)?(V[L]=Fe,V[Ee]=ue,L=Ee):(V[L]=xe,V[_e]=ue,L=_e);else if(Ee<j&&0>a(Fe,ue))V[L]=Fe,V[Ee]=ue,L=Ee;else break e}}return ae}function a(V,ae){var ue=V.sortIndex-ae.sortIndex;return ue!==0?ue:V.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var m=[],v=[],w=1,E=null,C=3,W=!1,K=!1,Z=!1,$=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(V){for(var ae=t(v);ae!==null;){if(ae.callback===null)s(v);else if(ae.startTime<=V)s(v),ae.sortIndex=ae.expirationTime,e(m,ae);else break;ae=t(v)}}function me(V){if(Z=!1,oe(V),!K)if(t(m)!==null)K=!0,Qe(Te);else{var ae=t(v);ae!==null&&G(me,ae.startTime-V)}}function Te(V,ae){K=!1,Z&&(Z=!1,re(P),P=-1),W=!0;var ue=C;try{for(oe(ae),E=t(m);E!==null&&(!(E.expirationTime>ae)||V&&!F());){var L=E.callback;if(typeof L=="function"){E.callback=null,C=E.priorityLevel;var j=L(E.expirationTime<=ae);ae=n.unstable_now(),typeof j=="function"?E.callback=j:E===t(m)&&s(m),oe(ae)}else s(m);E=t(m)}if(E!==null)var se=!0;else{var _e=t(v);_e!==null&&G(me,_e.startTime-ae),se=!1}return se}finally{E=null,C=ue,W=!1}}var pe=!1,D=null,P=-1,k=5,A=-1;function F(){return!(n.unstable_now()-A<k)}function R(){if(D!==null){var V=n.unstable_now();A=V;var ae=!0;try{ae=D(!0,V)}finally{ae?b():(pe=!1,D=null)}}else pe=!1}var b;if(typeof ne=="function")b=function(){ne(R)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Ke=ge.port2;ge.port1.onmessage=R,b=function(){Ke.postMessage(null)}}else b=function(){$(R,0)};function Qe(V){D=V,pe||(pe=!0,b())}function G(V,ae){P=$(function(){V(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){K||W||(K=!0,Qe(Te))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(V){switch(C){case 1:case 2:case 3:var ae=3;break;default:ae=C}var ue=C;C=ae;try{return V()}finally{C=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,ae){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ue=C;C=V;try{return ae()}finally{C=ue}},n.unstable_scheduleCallback=function(V,ae,ue){var L=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?L+ue:L):ue=L,V){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ue+j,V={id:w++,callback:ae,priorityLevel:V,startTime:ue,expirationTime:j,sortIndex:-1},ue>L?(V.sortIndex=ue,e(v,V),t(m)===null&&V===t(v)&&(Z?(re(P),P=-1):Z=!0,G(me,ue-L))):(V.sortIndex=j,e(m,V),K||W||(K=!0,Qe(Te))),V},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(V){var ae=C;return function(){var ue=C;C=ae;try{return V.apply(this,arguments)}finally{C=ue}}}})(Lh)),Lh}var Fg;function Dx(){return Fg||(Fg=1,Vh.exports=jx()),Vh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function Vx(){if(Ug)return Zn;Ug=1;var n=bf(),e=Dx();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,o=1;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(r,i){h(r,i),h(r+"Capture",i)}function h(r,i){for(a[r]=i,r=0;r<i.length;r++)s.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function C(r){return m.call(E,r)?!0:m.call(w,r)?!1:v.test(r)?E[r]=!0:(w[r]=!0,!1)}function W(r,i,o,d){if(o!==null&&o.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:o!==null?!o.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function K(r,i,o,d){if(i===null||typeof i>"u"||W(r,i,o,d))return!0;if(d)return!1;if(o!==null)switch(o.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Z(r,i,o,d,p,y,x){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=o,this.propertyName=r,this.type=i,this.sanitizeURL=y,this.removeEmptyString=x}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){$[r]=new Z(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];$[i]=new Z(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){$[r]=new Z(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){$[r]=new Z(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){$[r]=new Z(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){$[r]=new Z(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){$[r]=new Z(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){$[r]=new Z(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){$[r]=new Z(r,5,!1,r.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function ne(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(re,ne);$[i]=new Z(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(re,ne);$[i]=new Z(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(re,ne);$[i]=new Z(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){$[r]=new Z(r,1,!1,r.toLowerCase(),null,!1,!1)}),$.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){$[r]=new Z(r,1,!1,r.toLowerCase(),null,!0,!0)});function oe(r,i,o,d){var p=$.hasOwnProperty(i)?$[i]:null;(p!==null?p.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(K(i,o,p,d)&&(o=null),d||p===null?C(i)&&(o===null?r.removeAttribute(i):r.setAttribute(i,""+o)):p.mustUseProperty?r[p.propertyName]=o===null?p.type===3?!1:"":o:(i=p.attributeName,d=p.attributeNamespace,o===null?r.removeAttribute(i):(p=p.type,o=p===3||p===4&&o===!0?"":""+o,d?r.setAttributeNS(d,i,o):r.setAttribute(i,o))))}var me=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Te=Symbol.for("react.element"),pe=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),F=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),Qe=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),V=Symbol.iterator;function ae(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var ue=Object.assign,L;function j(r){if(L===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+r}var se=!1;function _e(r,i){if(!r||se)return"";se=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(X){var d=X}Reflect.construct(r,[],i)}else{try{i.call()}catch(X){d=X}r.call(i.prototype)}else{try{throw Error()}catch(X){d=X}r()}}catch(X){if(X&&d&&typeof X.stack=="string"){for(var p=X.stack.split(`
`),y=d.stack.split(`
`),x=p.length-1,N=y.length-1;1<=x&&0<=N&&p[x]!==y[N];)N--;for(;1<=x&&0<=N;x--,N--)if(p[x]!==y[N]){if(x!==1||N!==1)do if(x--,N--,0>N||p[x]!==y[N]){var O=`
`+p[x].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=x&&0<=N);break}}}finally{se=!1,Error.prepareStackTrace=o}return(r=r?r.displayName||r.name:"")?j(r):""}function xe(r){switch(r.tag){case 5:return j(r.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return r=_e(r.type,!1),r;case 11:return r=_e(r.type.render,!1),r;case 1:return r=_e(r.type,!0),r;default:return""}}function Ee(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case pe:return"Portal";case k:return"Profiler";case P:return"StrictMode";case b:return"Suspense";case ge:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case F:return(r.displayName||"Context")+".Consumer";case A:return(r._context.displayName||"Context")+".Provider";case R:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ke:return i=r.displayName||null,i!==null?i:Ee(r.type)||"Memo";case Qe:i=r._payload,r=r._init;try{return Ee(r(i))}catch{}}return null}function Fe(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(i);case 8:return i===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ke(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function He(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function rt(r){var i=He(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),d=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,y=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return p.call(this)},set:function(x){d=""+x,y.call(this,x)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Wt(r){r._valueTracker||(r._valueTracker=rt(r))}function ht(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),d="";return r&&(d=He(r)?r.checked?"true":"false":r.value),r=d,r!==o?(i.setValue(r),!0):!1}function Ft(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function fn(r,i){var o=i.checked;return ue({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??r._wrapperState.initialChecked})}function Je(r,i){var o=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;o=ke(i.value!=null?i.value:o),r._wrapperState={initialChecked:d,initialValue:o,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Mn(r,i){i=i.checked,i!=null&&oe(r,"checked",i,!1)}function Ht(r,i){Mn(r,i);var o=ke(i.value),d=i.type;if(o!=null)d==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+o):r.value!==""+o&&(r.value=""+o);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?In(r,i.type,o):i.hasOwnProperty("defaultValue")&&In(r,i.type,ke(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function ws(r,i,o){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,o||i===r.value||(r.value=i),r.defaultValue=i}o=r.name,o!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,o!==""&&(r.name=o)}function In(r,i,o){(i!=="number"||Ft(r.ownerDocument)!==r)&&(o==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+o&&(r.defaultValue=""+o))}var pn=Array.isArray;function Cn(r,i,o,d){if(r=r.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<r.length;o++)p=i.hasOwnProperty("$"+r[o].value),r[o].selected!==p&&(r[o].selected=p),p&&d&&(r[o].defaultSelected=!0)}else{for(o=""+ke(o),i=null,p=0;p<r.length;p++){if(r[p].value===o){r[p].selected=!0,d&&(r[p].defaultSelected=!0);return}i!==null||r[p].disabled||(i=r[p])}i!==null&&(i.selected=!0)}}function rr(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Wn(r,i){var o=i.value;if(o==null){if(o=i.children,i=i.defaultValue,o!=null){if(i!=null)throw Error(t(92));if(pn(o)){if(1<o.length)throw Error(t(93));o=o[0]}i=o}i==null&&(i=""),o=i}r._wrapperState={initialValue:ke(o)}}function qr(r,i){var o=ke(i.value),d=ke(i.defaultValue);o!=null&&(o=""+o,o!==r.value&&(r.value=o),i.defaultValue==null&&r.defaultValue!==o&&(r.defaultValue=o)),d!=null&&(r.defaultValue=""+d)}function Gr(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Rt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qe(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Rt(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Pn,xs=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,o,d,p){MSApp.execUnsafeLocalFunction(function(){return r(i,o,d,p)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Pn=Pn||document.createElement("div"),Pn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Pn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Rn(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sr=["Webkit","ms","Moz","O"];Object.keys(Cr).forEach(function(r){sr.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Cr[i]=Cr[r]})});function Es(r,i,o){return i==null||typeof i=="boolean"||i===""?"":o||typeof i!="number"||i===0||Cr.hasOwnProperty(r)&&Cr[r]?(""+i).trim():i+"px"}function mn(r,i){r=r.style;for(var o in i)if(i.hasOwnProperty(o)){var d=o.indexOf("--")===0,p=Es(o,i[o],d);o==="float"&&(o="cssFloat"),d?r.setProperty(o,p):r[o]=p}}var Fn=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fr(r,i){if(i){if(Fn[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ts(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ot=null;function Ut(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var sn=null,I=null,ee=null;function le(r){if(r=$o(r)){if(typeof sn!="function")throw Error(t(280));var i=r.stateNode;i&&(i=uc(i),sn(r.stateNode,r.type,i))}}function B(r){I?ee?ee.push(r):ee=[r]:I=r}function Q(){if(I){var r=I,i=ee;if(ee=I=null,le(r),i)for(r=0;r<i.length;r++)le(i[r])}}function be(r,i){return r(i)}function Le(){}var mt=!1;function Se(r,i,o){if(mt)return r(i,o);mt=!0;try{return be(r,i,o)}finally{mt=!1,(I!==null||ee!==null)&&(Le(),Q())}}function Oe(r,i){var o=r.stateNode;if(o===null)return null;var d=uc(o);if(d===null)return null;o=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(t(231,i,typeof o));return o}var qt=!1;if(f)try{var an={};Object.defineProperty(an,"passive",{get:function(){qt=!0}}),window.addEventListener("test",an,an),window.removeEventListener("test",an,an)}catch{qt=!1}function on(r,i,o,d,p,y,x,N,O){var X=Array.prototype.slice.call(arguments,3);try{i.apply(o,X)}catch(he){this.onError(he)}}var Pr=!1,Rr=null,gn=!1,Ss=null,br={onError:function(r){Pr=!0,Rr=r}};function Kr(r,i,o,d,p,y,x,N,O){Pr=!1,Rr=null,on.apply(br,arguments)}function wa(r,i,o,d,p,y,x,N,O){if(Kr.apply(this,arguments),Pr){if(Pr){var X=Rr;Pr=!1,Rr=null}else throw Error(t(198));gn||(gn=!0,Ss=X)}}function ir(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function Qr(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function at(r){if(ir(r)!==r)throw Error(t(188))}function Yr(r){var i=r.alternate;if(!i){if(i=ir(r),i===null)throw Error(t(188));return i!==r?null:r}for(var o=r,d=i;;){var p=o.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){o=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===o)return at(p),r;if(y===d)return at(p),i;y=y.sibling}throw Error(t(188))}if(o.return!==d.return)o=p,d=y;else{for(var x=!1,N=p.child;N;){if(N===o){x=!0,o=p,d=y;break}if(N===d){x=!0,d=p,o=y;break}N=N.sibling}if(!x){for(N=y.child;N;){if(N===o){x=!0,o=y,d=p;break}if(N===d){x=!0,d=y,o=p;break}N=N.sibling}if(!x)throw Error(t(189))}}if(o.alternate!==d)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?r:i}function Hn(r){return r=Yr(r),r!==null?Is(r):null}function Is(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Is(r);if(i!==null)return i;r=r.sibling}return null}var Cs=e.unstable_scheduleCallback,Js=e.unstable_cancelCallback,xa=e.unstable_shouldYield,Ar=e.unstable_requestPaint,gt=e.unstable_now,Ea=e.unstable_getCurrentPriorityLevel,Ps=e.unstable_ImmediatePriority,Jr=e.unstable_UserBlockingPriority,S=e.unstable_NormalPriority,U=e.unstable_LowPriority,Y=e.unstable_IdlePriority,ve=null,Ne=null;function Xe(r){if(Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(ve,r,void 0,(r.current.flags&128)===128)}catch{}}var Ie=Math.clz32?Math.clz32:bt,ft=Math.log,kt=Math.LN2;function bt(r){return r>>>=0,r===0?32:31-(ft(r)/kt|0)|0}var xt=64,Et=4194304;function Xt(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function jt(r,i){var o=r.pendingLanes;if(o===0)return 0;var d=0,p=r.suspendedLanes,y=r.pingedLanes,x=o&268435455;if(x!==0){var N=x&~p;N!==0?d=Xt(N):(y&=x,y!==0&&(d=Xt(y)))}else x=o&~p,x!==0?d=Xt(x):y!==0&&(d=Xt(y));if(d===0)return 0;if(i!==0&&i!==d&&(i&p)===0&&(p=d&-d,y=i&-i,p>=y||p===16&&(y&4194240)!==0))return i;if((d&4)!==0&&(d|=o&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=d;0<i;)o=31-Ie(i),p=1<<o,d|=r[o],i&=~p;return d}function ct(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bn(r,i){for(var o=r.suspendedLanes,d=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes;0<y;){var x=31-Ie(y),N=1<<x,O=p[x];O===-1?((N&o)===0||(N&d)!==0)&&(p[x]=ct(N,i)):O<=i&&(r.expiredLanes|=N),y&=~N}}function _t(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Un(){var r=xt;return xt<<=1,(xt&4194240)===0&&(xt=64),r}function pr(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Xr(r,i,o){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Ie(i),r[i]=o}function yt(r,i){var o=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<o;){var p=31-Ie(o),y=1<<p;i[p]=0,d[p]=-1,r[p]=-1,o&=~y}}function Zr(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var d=31-Ie(o),p=1<<d;p&i|r[d]&i&&(r[d]|=i),o&=~p}}var Ze=0;function es(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var $l,Ta,Wl,Hl,ql,Ro=!1,ts=[],yn=null,Nr=null,kr=null,Xs=new Map,mr=new Map,ns=[],cd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gl(r,i){switch(r){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Xs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":mr.delete(i.pointerId)}}function qn(r,i,o,d,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:o,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},i!==null&&(i=$o(i),i!==null&&Ta(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),r)}function ud(r,i,o,d,p){switch(i){case"focusin":return yn=qn(yn,r,i,o,d,p),!0;case"dragenter":return Nr=qn(Nr,r,i,o,d,p),!0;case"mouseover":return kr=qn(kr,r,i,o,d,p),!0;case"pointerover":var y=p.pointerId;return Xs.set(y,qn(Xs.get(y)||null,r,i,o,d,p)),!0;case"gotpointercapture":return y=p.pointerId,mr.set(y,qn(mr.get(y)||null,r,i,o,d,p)),!0}return!1}function Kl(r){var i=Gi(r.target);if(i!==null){var o=ir(i);if(o!==null){if(i=o.tag,i===13){if(i=Qr(o),i!==null){r.blockedOn=i,ql(r.priority,function(){Wl(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Rs(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Sa(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(o===null){o=r.nativeEvent;var d=new o.constructor(o.type,o);Ot=d,o.target.dispatchEvent(d),Ot=null}else return i=$o(o),i!==null&&Ta(i),r.blockedOn=o,!1;i.shift()}return!0}function $i(r,i,o){Rs(r)&&o.delete(i)}function Ql(){Ro=!1,yn!==null&&Rs(yn)&&(yn=null),Nr!==null&&Rs(Nr)&&(Nr=null),kr!==null&&Rs(kr)&&(kr=null),Xs.forEach($i),mr.forEach($i)}function jr(r,i){r.blockedOn===i&&(r.blockedOn=null,Ro||(Ro=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ql)))}function Dr(r){function i(p){return jr(p,r)}if(0<ts.length){jr(ts[0],r);for(var o=1;o<ts.length;o++){var d=ts[o];d.blockedOn===r&&(d.blockedOn=null)}}for(yn!==null&&jr(yn,r),Nr!==null&&jr(Nr,r),kr!==null&&jr(kr,r),Xs.forEach(i),mr.forEach(i),o=0;o<ns.length;o++)d=ns[o],d.blockedOn===r&&(d.blockedOn=null);for(;0<ns.length&&(o=ns[0],o.blockedOn===null);)Kl(o),o.blockedOn===null&&ns.shift()}var bs=me.ReactCurrentBatchConfig,Zs=!0;function At(r,i,o,d){var p=Ze,y=bs.transition;bs.transition=null;try{Ze=1,bo(r,i,o,d)}finally{Ze=p,bs.transition=y}}function dd(r,i,o,d){var p=Ze,y=bs.transition;bs.transition=null;try{Ze=4,bo(r,i,o,d)}finally{Ze=p,bs.transition=y}}function bo(r,i,o,d){if(Zs){var p=Sa(r,i,o,d);if(p===null)Ed(r,i,d,Wi,o),Gl(r,d);else if(ud(p,r,i,o,d))d.stopPropagation();else if(Gl(r,d),i&4&&-1<cd.indexOf(r)){for(;p!==null;){var y=$o(p);if(y!==null&&$l(y),y=Sa(r,i,o,d),y===null&&Ed(r,i,d,Wi,o),y===p)break;p=y}p!==null&&d.stopPropagation()}else Ed(r,i,d,null,o)}}var Wi=null;function Sa(r,i,o,d){if(Wi=null,r=Ut(d),r=Gi(r),r!==null)if(i=ir(r),i===null)r=null;else if(o=i.tag,o===13){if(r=Qr(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Wi=r,null}function Ao(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ea()){case Ps:return 1;case Jr:return 4;case S:case U:return 16;case Y:return 536870912;default:return 16}default:return 16}}var ar=null,Ia=null,Gn=null;function No(){if(Gn)return Gn;var r,i=Ia,o=i.length,d,p="value"in ar?ar.value:ar.textContent,y=p.length;for(r=0;r<o&&i[r]===p[r];r++);var x=o-r;for(d=1;d<=x&&i[o-d]===p[y-d];d++);return Gn=p.slice(r,1<d?1-d:void 0)}function Ca(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function rs(){return!0}function ko(){return!1}function vn(r){function i(o,d,p,y,x){this._reactName=o,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(o=r[N],this[N]=o?o(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?rs:ko,this.isPropagationStopped=ko,this}return ue(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=rs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=rs)},persist:function(){},isPersistent:rs}),i}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pa=vn(Vr),ss=ue({},Vr,{view:0,detail:0}),hd=vn(ss),Ra,As,ei,Hi=ue({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:is,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ei&&(ei&&r.type==="mousemove"?(Ra=r.screenX-ei.screenX,As=r.screenY-ei.screenY):As=Ra=0,ei=r),Ra)},movementY:function(r){return"movementY"in r?r.movementY:As}}),ba=vn(Hi),jo=ue({},Hi,{dataTransfer:0}),Yl=vn(jo),Aa=ue({},ss,{relatedTarget:0}),Na=vn(Aa),Jl=ue({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ns=vn(Jl),Xl=ue({},Vr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Zl=vn(Xl),ec=ue({},Vr,{data:0}),Do=vn(ec),ka={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=tc[r])?!!i[r]:!1}function is(){return nc}var u=ue({},ss,{key:function(r){if(r.key){var i=ka[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ca(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?zn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:is,charCode:function(r){return r.type==="keypress"?Ca(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ca(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=vn(u),_=ue({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=vn(_),H=ue({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:is}),te=vn(H),we=ue({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vt=vn(we),Zt=ue({},Hi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ot=vn(Zt),ln=[9,13,27,32],Gt=f&&"CompositionEvent"in window,gr=null;f&&"documentMode"in document&&(gr=document.documentMode);var or=f&&"TextEvent"in window&&!gr,qi=f&&(!Gt||gr&&8<gr&&11>=gr),ja=" ",Rp=!1;function bp(r,i){switch(r){case"keyup":return ln.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Da=!1;function Iw(r,i){switch(r){case"compositionend":return Ap(i);case"keypress":return i.which!==32?null:(Rp=!0,ja);case"textInput":return r=i.data,r===ja&&Rp?null:r;default:return null}}function Cw(r,i){if(Da)return r==="compositionend"||!Gt&&bp(r,i)?(r=No(),Gn=Ia=ar=null,Da=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return qi&&i.locale!=="ko"?null:i.data;default:return null}}var Pw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Pw[r.type]:i==="textarea"}function kp(r,i,o,d){B(d),i=oc(i,"onChange"),0<i.length&&(o=new Pa("onChange","change",null,o,d),r.push({event:o,listeners:i}))}var Vo=null,Lo=null;function Rw(r){Yp(r,0)}function rc(r){var i=Fa(r);if(ht(i))return r}function bw(r,i){if(r==="change")return i}var jp=!1;if(f){var fd;if(f){var pd="oninput"in document;if(!pd){var Dp=document.createElement("div");Dp.setAttribute("oninput","return;"),pd=typeof Dp.oninput=="function"}fd=pd}else fd=!1;jp=fd&&(!document.documentMode||9<document.documentMode)}function Vp(){Vo&&(Vo.detachEvent("onpropertychange",Lp),Lo=Vo=null)}function Lp(r){if(r.propertyName==="value"&&rc(Lo)){var i=[];kp(i,Lo,r,Ut(r)),Se(Rw,i)}}function Aw(r,i,o){r==="focusin"?(Vp(),Vo=i,Lo=o,Vo.attachEvent("onpropertychange",Lp)):r==="focusout"&&Vp()}function Nw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return rc(Lo)}function kw(r,i){if(r==="click")return rc(i)}function jw(r,i){if(r==="input"||r==="change")return rc(i)}function Dw(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Lr=typeof Object.is=="function"?Object.is:Dw;function Oo(r,i){if(Lr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),d=Object.keys(i);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var p=o[d];if(!m.call(i,p)||!Lr(r[p],i[p]))return!1}return!0}function Op(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Mp(r,i){var o=Op(r);r=0;for(var d;o;){if(o.nodeType===3){if(d=r+o.textContent.length,r<=i&&d>=i)return{node:o,offset:i-r};r=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Op(o)}}function Fp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Fp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Up(){for(var r=window,i=Ft();i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=Ft(r.document)}return i}function md(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function Vw(r){var i=Up(),o=r.focusedElem,d=r.selectionRange;if(i!==o&&o&&o.ownerDocument&&Fp(o.ownerDocument.documentElement,o)){if(d!==null&&md(o)){if(i=d.start,r=d.end,r===void 0&&(r=i),"selectionStart"in o)o.selectionStart=i,o.selectionEnd=Math.min(r,o.value.length);else if(r=(i=o.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var p=o.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!r.extend&&y>d&&(p=d,d=y,y=p),p=Mp(o,y);var x=Mp(o,d);p&&x&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==x.node||r.focusOffset!==x.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),r.removeAllRanges(),y>d?(r.addRange(i),r.extend(x.node,x.offset)):(i.setEnd(x.node,x.offset),r.addRange(i)))}}for(i=[],r=o;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<i.length;o++)r=i[o],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Lw=f&&"documentMode"in document&&11>=document.documentMode,Va=null,gd=null,Mo=null,yd=!1;function zp(r,i,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;yd||Va==null||Va!==Ft(d)||(d=Va,"selectionStart"in d&&md(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Mo&&Oo(Mo,d)||(Mo=d,d=oc(gd,"onSelect"),0<d.length&&(i=new Pa("onSelect","select",null,i,o),r.push({event:i,listeners:d}),i.target=Va)))}function sc(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var La={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},vd={},Bp={};f&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function ic(r){if(vd[r])return vd[r];if(!La[r])return r;var i=La[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Bp)return vd[r]=i[o];return r}var $p=ic("animationend"),Wp=ic("animationiteration"),Hp=ic("animationstart"),qp=ic("transitionend"),Gp=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(r,i){Gp.set(r,i),l(i,[r])}for(var _d=0;_d<Kp.length;_d++){var wd=Kp[_d],Ow=wd.toLowerCase(),Mw=wd[0].toUpperCase()+wd.slice(1);ti(Ow,"on"+Mw)}ti($p,"onAnimationEnd"),ti(Wp,"onAnimationIteration"),ti(Hp,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(qp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fo));function Qp(r,i,o){var d=r.type||"unknown-event";r.currentTarget=o,wa(d,i,void 0,r),r.currentTarget=null}function Yp(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var d=r[o],p=d.event;d=d.listeners;e:{var y=void 0;if(i)for(var x=d.length-1;0<=x;x--){var N=d[x],O=N.instance,X=N.currentTarget;if(N=N.listener,O!==y&&p.isPropagationStopped())break e;Qp(p,N,X),y=O}else for(x=0;x<d.length;x++){if(N=d[x],O=N.instance,X=N.currentTarget,N=N.listener,O!==y&&p.isPropagationStopped())break e;Qp(p,N,X),y=O}}}if(gn)throw r=Ss,gn=!1,Ss=null,r}function Tt(r,i){var o=i[Rd];o===void 0&&(o=i[Rd]=new Set);var d=r+"__bubble";o.has(d)||(Jp(i,r,2,!1),o.add(d))}function xd(r,i,o){var d=0;i&&(d|=4),Jp(o,r,d,i)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Uo(r){if(!r[ac]){r[ac]=!0,s.forEach(function(o){o!=="selectionchange"&&(Fw.has(o)||xd(o,!1,r),xd(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[ac]||(i[ac]=!0,xd("selectionchange",!1,i))}}function Jp(r,i,o,d){switch(Ao(i)){case 1:var p=At;break;case 4:p=dd;break;default:p=bo}o=p.bind(null,i,o,r),p=void 0,!qt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),d?p!==void 0?r.addEventListener(i,o,{capture:!0,passive:p}):r.addEventListener(i,o,!0):p!==void 0?r.addEventListener(i,o,{passive:p}):r.addEventListener(i,o,!1)}function Ed(r,i,o,d,p){var y=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var N=d.stateNode.containerInfo;if(N===p||N.nodeType===8&&N.parentNode===p)break;if(x===4)for(x=d.return;x!==null;){var O=x.tag;if((O===3||O===4)&&(O=x.stateNode.containerInfo,O===p||O.nodeType===8&&O.parentNode===p))return;x=x.return}for(;N!==null;){if(x=Gi(N),x===null)return;if(O=x.tag,O===5||O===6){d=y=x;continue e}N=N.parentNode}}d=d.return}Se(function(){var X=y,he=Ut(o),fe=[];e:{var de=Gp.get(r);if(de!==void 0){var Ce=Pa,Ae=r;switch(r){case"keypress":if(Ca(o)===0)break e;case"keydown":case"keyup":Ce=g;break;case"focusin":Ae="focus",Ce=Na;break;case"focusout":Ae="blur",Ce=Na;break;case"beforeblur":case"afterblur":Ce=Na;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=Yl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=te;break;case $p:case Wp:case Hp:Ce=Ns;break;case qp:Ce=vt;break;case"scroll":Ce=hd;break;case"wheel":Ce=ot;break;case"copy":case"cut":case"paste":Ce=Zl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=T}var je=(i&4)!==0,zt=!je&&r==="scroll",q=je?de!==null?de+"Capture":null:de;je=[];for(var z=X,J;z!==null;){J=z;var ye=J.stateNode;if(J.tag===5&&ye!==null&&(J=ye,q!==null&&(ye=Oe(z,q),ye!=null&&je.push(zo(z,ye,J)))),zt)break;z=z.return}0<je.length&&(de=new Ce(de,Ae,null,o,he),fe.push({event:de,listeners:je}))}}if((i&7)===0){e:{if(de=r==="mouseover"||r==="pointerover",Ce=r==="mouseout"||r==="pointerout",de&&o!==Ot&&(Ae=o.relatedTarget||o.fromElement)&&(Gi(Ae)||Ae[ks]))break e;if((Ce||de)&&(de=he.window===he?he:(de=he.ownerDocument)?de.defaultView||de.parentWindow:window,Ce?(Ae=o.relatedTarget||o.toElement,Ce=X,Ae=Ae?Gi(Ae):null,Ae!==null&&(zt=ir(Ae),Ae!==zt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Ce=null,Ae=X),Ce!==Ae)){if(je=ba,ye="onMouseLeave",q="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(je=T,ye="onPointerLeave",q="onPointerEnter",z="pointer"),zt=Ce==null?de:Fa(Ce),J=Ae==null?de:Fa(Ae),de=new je(ye,z+"leave",Ce,o,he),de.target=zt,de.relatedTarget=J,ye=null,Gi(he)===X&&(je=new je(q,z+"enter",Ae,o,he),je.target=J,je.relatedTarget=zt,ye=je),zt=ye,Ce&&Ae)t:{for(je=Ce,q=Ae,z=0,J=je;J;J=Oa(J))z++;for(J=0,ye=q;ye;ye=Oa(ye))J++;for(;0<z-J;)je=Oa(je),z--;for(;0<J-z;)q=Oa(q),J--;for(;z--;){if(je===q||q!==null&&je===q.alternate)break t;je=Oa(je),q=Oa(q)}je=null}else je=null;Ce!==null&&Xp(fe,de,Ce,je,!1),Ae!==null&&zt!==null&&Xp(fe,zt,Ae,je,!0)}}e:{if(de=X?Fa(X):window,Ce=de.nodeName&&de.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&de.type==="file")var Ve=bw;else if(Np(de))if(jp)Ve=jw;else{Ve=Nw;var Ue=Aw}else(Ce=de.nodeName)&&Ce.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(Ve=kw);if(Ve&&(Ve=Ve(r,X))){kp(fe,Ve,o,he);break e}Ue&&Ue(r,de,X),r==="focusout"&&(Ue=de._wrapperState)&&Ue.controlled&&de.type==="number"&&In(de,"number",de.value)}switch(Ue=X?Fa(X):window,r){case"focusin":(Np(Ue)||Ue.contentEditable==="true")&&(Va=Ue,gd=X,Mo=null);break;case"focusout":Mo=gd=Va=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,zp(fe,o,he);break;case"selectionchange":if(Lw)break;case"keydown":case"keyup":zp(fe,o,he)}var ze;if(Gt)e:{switch(r){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Da?bp(r,o)&&(We="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(We="onCompositionStart");We&&(qi&&o.locale!=="ko"&&(Da||We!=="onCompositionStart"?We==="onCompositionEnd"&&Da&&(ze=No()):(ar=he,Ia="value"in ar?ar.value:ar.textContent,Da=!0)),Ue=oc(X,We),0<Ue.length&&(We=new Do(We,r,null,o,he),fe.push({event:We,listeners:Ue}),ze?We.data=ze:(ze=Ap(o),ze!==null&&(We.data=ze)))),(ze=or?Iw(r,o):Cw(r,o))&&(X=oc(X,"onBeforeInput"),0<X.length&&(he=new Do("onBeforeInput","beforeinput",null,o,he),fe.push({event:he,listeners:X}),he.data=ze))}Yp(fe,i)})}function zo(r,i,o){return{instance:r,listener:i,currentTarget:o}}function oc(r,i){for(var o=i+"Capture",d=[];r!==null;){var p=r,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Oe(r,o),y!=null&&d.unshift(zo(r,y,p)),y=Oe(r,i),y!=null&&d.push(zo(r,y,p))),r=r.return}return d}function Oa(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Xp(r,i,o,d,p){for(var y=i._reactName,x=[];o!==null&&o!==d;){var N=o,O=N.alternate,X=N.stateNode;if(O!==null&&O===d)break;N.tag===5&&X!==null&&(N=X,p?(O=Oe(o,y),O!=null&&x.unshift(zo(o,O,N))):p||(O=Oe(o,y),O!=null&&x.push(zo(o,O,N)))),o=o.return}x.length!==0&&r.push({event:i,listeners:x})}var Uw=/\r\n?/g,zw=/\u0000|\uFFFD/g;function Zp(r){return(typeof r=="string"?r:""+r).replace(Uw,`
`).replace(zw,"")}function lc(r,i,o){if(i=Zp(i),Zp(r)!==i&&o)throw Error(t(425))}function cc(){}var Td=null,Sd=null;function Id(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,Bw=typeof clearTimeout=="function"?clearTimeout:void 0,em=typeof Promise=="function"?Promise:void 0,$w=typeof queueMicrotask=="function"?queueMicrotask:typeof em<"u"?function(r){return em.resolve(null).then(r).catch(Ww)}:Cd;function Ww(r){setTimeout(function(){throw r})}function Pd(r,i){var o=i,d=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(d===0){r.removeChild(p),Dr(i);return}d--}else o!=="$"&&o!=="$?"&&o!=="$!"||d++;o=p}while(o);Dr(i)}function ni(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function tm(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),as="__reactFiber$"+Ma,Bo="__reactProps$"+Ma,ks="__reactContainer$"+Ma,Rd="__reactEvents$"+Ma,Hw="__reactListeners$"+Ma,qw="__reactHandles$"+Ma;function Gi(r){var i=r[as];if(i)return i;for(var o=r.parentNode;o;){if(i=o[ks]||o[as]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=tm(r);r!==null;){if(o=r[as])return o;r=tm(r)}return i}r=o,o=r.parentNode}return null}function $o(r){return r=r[as]||r[ks],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Fa(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function uc(r){return r[Bo]||null}var bd=[],Ua=-1;function ri(r){return{current:r}}function St(r){0>Ua||(r.current=bd[Ua],bd[Ua]=null,Ua--)}function wt(r,i){Ua++,bd[Ua]=r.current,r.current=i}var si={},An=ri(si),Kn=ri(!1),Ki=si;function za(r,i){var o=r.type.contextTypes;if(!o)return si;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in o)p[y]=i[y];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=p),p}function Qn(r){return r=r.childContextTypes,r!=null}function dc(){St(Kn),St(An)}function nm(r,i,o){if(An.current!==si)throw Error(t(168));wt(An,i),wt(Kn,o)}function rm(r,i,o){var d=r.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return o;d=d.getChildContext();for(var p in d)if(!(p in i))throw Error(t(108,Fe(r)||"Unknown",p));return ue({},o,d)}function hc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||si,Ki=An.current,wt(An,r),wt(Kn,Kn.current),!0}function sm(r,i,o){var d=r.stateNode;if(!d)throw Error(t(169));o?(r=rm(r,i,Ki),d.__reactInternalMemoizedMergedChildContext=r,St(Kn),St(An),wt(An,r)):St(Kn),wt(Kn,o)}var js=null,fc=!1,Ad=!1;function im(r){js===null?js=[r]:js.push(r)}function Gw(r){fc=!0,im(r)}function ii(){if(!Ad&&js!==null){Ad=!0;var r=0,i=Ze;try{var o=js;for(Ze=1;r<o.length;r++){var d=o[r];do d=d(!0);while(d!==null)}js=null,fc=!1}catch(p){throw js!==null&&(js=js.slice(r+1)),Cs(Ps,ii),p}finally{Ze=i,Ad=!1}}return null}var Ba=[],$a=0,pc=null,mc=0,yr=[],vr=0,Qi=null,Ds=1,Vs="";function Yi(r,i){Ba[$a++]=mc,Ba[$a++]=pc,pc=r,mc=i}function am(r,i,o){yr[vr++]=Ds,yr[vr++]=Vs,yr[vr++]=Qi,Qi=r;var d=Ds;r=Vs;var p=32-Ie(d)-1;d&=~(1<<p),o+=1;var y=32-Ie(i)+p;if(30<y){var x=p-p%5;y=(d&(1<<x)-1).toString(32),d>>=x,p-=x,Ds=1<<32-Ie(i)+p|o<<p|d,Vs=y+r}else Ds=1<<y|o<<p|d,Vs=r}function Nd(r){r.return!==null&&(Yi(r,1),am(r,1,0))}function kd(r){for(;r===pc;)pc=Ba[--$a],Ba[$a]=null,mc=Ba[--$a],Ba[$a]=null;for(;r===Qi;)Qi=yr[--vr],yr[vr]=null,Vs=yr[--vr],yr[vr]=null,Ds=yr[--vr],yr[vr]=null}var lr=null,cr=null,Nt=!1,Or=null;function om(r,i){var o=Er(5,null,null,0);o.elementType="DELETED",o.stateNode=i,o.return=r,i=r.deletions,i===null?(r.deletions=[o],r.flags|=16):i.push(o)}function lm(r,i){switch(r.tag){case 5:var o=r.type;return i=i.nodeType!==1||o.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,lr=r,cr=ni(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,lr=r,cr=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(o=Qi!==null?{id:Ds,overflow:Vs}:null,r.memoizedState={dehydrated:i,treeContext:o,retryLane:1073741824},o=Er(18,null,null,0),o.stateNode=i,o.return=r,r.child=o,lr=r,cr=null,!0):!1;default:return!1}}function jd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Dd(r){if(Nt){var i=cr;if(i){var o=i;if(!lm(r,i)){if(jd(r))throw Error(t(418));i=ni(o.nextSibling);var d=lr;i&&lm(r,i)?om(d,o):(r.flags=r.flags&-4097|2,Nt=!1,lr=r)}}else{if(jd(r))throw Error(t(418));r.flags=r.flags&-4097|2,Nt=!1,lr=r}}}function cm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;lr=r}function gc(r){if(r!==lr)return!1;if(!Nt)return cm(r),Nt=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Id(r.type,r.memoizedProps)),i&&(i=cr)){if(jd(r))throw um(),Error(t(418));for(;i;)om(r,i),i=ni(i.nextSibling)}if(cm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"){if(i===0){cr=ni(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++}r=r.nextSibling}cr=null}}else cr=lr?ni(r.stateNode.nextSibling):null;return!0}function um(){for(var r=cr;r;)r=ni(r.nextSibling)}function Wa(){cr=lr=null,Nt=!1}function Vd(r){Or===null?Or=[r]:Or.push(r)}var Kw=me.ReactCurrentBatchConfig;function Wo(r,i,o){if(r=o.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var d=o.stateNode}if(!d)throw Error(t(147,r));var p=d,y=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(x){var N=p.refs;x===null?delete N[y]:N[y]=x},i._stringRef=y,i)}if(typeof r!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,r))}return r}function yc(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function dm(r){var i=r._init;return i(r._payload)}function hm(r){function i(q,z){if(r){var J=q.deletions;J===null?(q.deletions=[z],q.flags|=16):J.push(z)}}function o(q,z){if(!r)return null;for(;z!==null;)i(q,z),z=z.sibling;return null}function d(q,z){for(q=new Map;z!==null;)z.key!==null?q.set(z.key,z):q.set(z.index,z),z=z.sibling;return q}function p(q,z){return q=fi(q,z),q.index=0,q.sibling=null,q}function y(q,z,J){return q.index=J,r?(J=q.alternate,J!==null?(J=J.index,J<z?(q.flags|=2,z):J):(q.flags|=2,z)):(q.flags|=1048576,z)}function x(q){return r&&q.alternate===null&&(q.flags|=2),q}function N(q,z,J,ye){return z===null||z.tag!==6?(z=Ch(J,q.mode,ye),z.return=q,z):(z=p(z,J),z.return=q,z)}function O(q,z,J,ye){var Ve=J.type;return Ve===D?he(q,z,J.props.children,ye,J.key):z!==null&&(z.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===Qe&&dm(Ve)===z.type)?(ye=p(z,J.props),ye.ref=Wo(q,z,J),ye.return=q,ye):(ye=zc(J.type,J.key,J.props,null,q.mode,ye),ye.ref=Wo(q,z,J),ye.return=q,ye)}function X(q,z,J,ye){return z===null||z.tag!==4||z.stateNode.containerInfo!==J.containerInfo||z.stateNode.implementation!==J.implementation?(z=Ph(J,q.mode,ye),z.return=q,z):(z=p(z,J.children||[]),z.return=q,z)}function he(q,z,J,ye,Ve){return z===null||z.tag!==7?(z=sa(J,q.mode,ye,Ve),z.return=q,z):(z=p(z,J),z.return=q,z)}function fe(q,z,J){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Ch(""+z,q.mode,J),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Te:return J=zc(z.type,z.key,z.props,null,q.mode,J),J.ref=Wo(q,null,z),J.return=q,J;case pe:return z=Ph(z,q.mode,J),z.return=q,z;case Qe:var ye=z._init;return fe(q,ye(z._payload),J)}if(pn(z)||ae(z))return z=sa(z,q.mode,J,null),z.return=q,z;yc(q,z)}return null}function de(q,z,J,ye){var Ve=z!==null?z.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Ve!==null?null:N(q,z,""+J,ye);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Te:return J.key===Ve?O(q,z,J,ye):null;case pe:return J.key===Ve?X(q,z,J,ye):null;case Qe:return Ve=J._init,de(q,z,Ve(J._payload),ye)}if(pn(J)||ae(J))return Ve!==null?null:he(q,z,J,ye,null);yc(q,J)}return null}function Ce(q,z,J,ye,Ve){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return q=q.get(J)||null,N(z,q,""+ye,Ve);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case Te:return q=q.get(ye.key===null?J:ye.key)||null,O(z,q,ye,Ve);case pe:return q=q.get(ye.key===null?J:ye.key)||null,X(z,q,ye,Ve);case Qe:var Ue=ye._init;return Ce(q,z,J,Ue(ye._payload),Ve)}if(pn(ye)||ae(ye))return q=q.get(J)||null,he(z,q,ye,Ve,null);yc(z,ye)}return null}function Ae(q,z,J,ye){for(var Ve=null,Ue=null,ze=z,We=z=0,dn=null;ze!==null&&We<J.length;We++){ze.index>We?(dn=ze,ze=null):dn=ze.sibling;var dt=de(q,ze,J[We],ye);if(dt===null){ze===null&&(ze=dn);break}r&&ze&&dt.alternate===null&&i(q,ze),z=y(dt,z,We),Ue===null?Ve=dt:Ue.sibling=dt,Ue=dt,ze=dn}if(We===J.length)return o(q,ze),Nt&&Yi(q,We),Ve;if(ze===null){for(;We<J.length;We++)ze=fe(q,J[We],ye),ze!==null&&(z=y(ze,z,We),Ue===null?Ve=ze:Ue.sibling=ze,Ue=ze);return Nt&&Yi(q,We),Ve}for(ze=d(q,ze);We<J.length;We++)dn=Ce(ze,q,We,J[We],ye),dn!==null&&(r&&dn.alternate!==null&&ze.delete(dn.key===null?We:dn.key),z=y(dn,z,We),Ue===null?Ve=dn:Ue.sibling=dn,Ue=dn);return r&&ze.forEach(function(pi){return i(q,pi)}),Nt&&Yi(q,We),Ve}function je(q,z,J,ye){var Ve=ae(J);if(typeof Ve!="function")throw Error(t(150));if(J=Ve.call(J),J==null)throw Error(t(151));for(var Ue=Ve=null,ze=z,We=z=0,dn=null,dt=J.next();ze!==null&&!dt.done;We++,dt=J.next()){ze.index>We?(dn=ze,ze=null):dn=ze.sibling;var pi=de(q,ze,dt.value,ye);if(pi===null){ze===null&&(ze=dn);break}r&&ze&&pi.alternate===null&&i(q,ze),z=y(pi,z,We),Ue===null?Ve=pi:Ue.sibling=pi,Ue=pi,ze=dn}if(dt.done)return o(q,ze),Nt&&Yi(q,We),Ve;if(ze===null){for(;!dt.done;We++,dt=J.next())dt=fe(q,dt.value,ye),dt!==null&&(z=y(dt,z,We),Ue===null?Ve=dt:Ue.sibling=dt,Ue=dt);return Nt&&Yi(q,We),Ve}for(ze=d(q,ze);!dt.done;We++,dt=J.next())dt=Ce(ze,q,We,dt.value,ye),dt!==null&&(r&&dt.alternate!==null&&ze.delete(dt.key===null?We:dt.key),z=y(dt,z,We),Ue===null?Ve=dt:Ue.sibling=dt,Ue=dt);return r&&ze.forEach(function(Px){return i(q,Px)}),Nt&&Yi(q,We),Ve}function zt(q,z,J,ye){if(typeof J=="object"&&J!==null&&J.type===D&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case Te:e:{for(var Ve=J.key,Ue=z;Ue!==null;){if(Ue.key===Ve){if(Ve=J.type,Ve===D){if(Ue.tag===7){o(q,Ue.sibling),z=p(Ue,J.props.children),z.return=q,q=z;break e}}else if(Ue.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===Qe&&dm(Ve)===Ue.type){o(q,Ue.sibling),z=p(Ue,J.props),z.ref=Wo(q,Ue,J),z.return=q,q=z;break e}o(q,Ue);break}else i(q,Ue);Ue=Ue.sibling}J.type===D?(z=sa(J.props.children,q.mode,ye,J.key),z.return=q,q=z):(ye=zc(J.type,J.key,J.props,null,q.mode,ye),ye.ref=Wo(q,z,J),ye.return=q,q=ye)}return x(q);case pe:e:{for(Ue=J.key;z!==null;){if(z.key===Ue)if(z.tag===4&&z.stateNode.containerInfo===J.containerInfo&&z.stateNode.implementation===J.implementation){o(q,z.sibling),z=p(z,J.children||[]),z.return=q,q=z;break e}else{o(q,z);break}else i(q,z);z=z.sibling}z=Ph(J,q.mode,ye),z.return=q,q=z}return x(q);case Qe:return Ue=J._init,zt(q,z,Ue(J._payload),ye)}if(pn(J))return Ae(q,z,J,ye);if(ae(J))return je(q,z,J,ye);yc(q,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,z!==null&&z.tag===6?(o(q,z.sibling),z=p(z,J),z.return=q,q=z):(o(q,z),z=Ch(J,q.mode,ye),z.return=q,q=z),x(q)):o(q,z)}return zt}var Ha=hm(!0),fm=hm(!1),vc=ri(null),_c=null,qa=null,Ld=null;function Od(){Ld=qa=_c=null}function Md(r){var i=vc.current;St(vc),r._currentValue=i}function Fd(r,i,o){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===o)break;r=r.return}}function Ga(r,i){_c=r,Ld=qa=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Yn=!0),r.firstContext=null)}function _r(r){var i=r._currentValue;if(Ld!==r)if(r={context:r,memoizedValue:i,next:null},qa===null){if(_c===null)throw Error(t(308));qa=r,_c.dependencies={lanes:0,firstContext:r}}else qa=qa.next=r;return i}var Ji=null;function Ud(r){Ji===null?Ji=[r]:Ji.push(r)}function pm(r,i,o,d){var p=i.interleaved;return p===null?(o.next=o,Ud(i)):(o.next=p.next,p.next=o),i.interleaved=o,Ls(r,d)}function Ls(r,i){r.lanes|=i;var o=r.alternate;for(o!==null&&(o.lanes|=i),o=r,r=r.return;r!==null;)r.childLanes|=i,o=r.alternate,o!==null&&(o.childLanes|=i),o=r,r=r.return;return o.tag===3?o.stateNode:null}var ai=!1;function zd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Os(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function oi(r,i,o){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(ut&2)!==0){var p=d.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),d.pending=i,Ls(r,o)}return p=d.interleaved,p===null?(i.next=i,Ud(d)):(i.next=p.next,p.next=i),d.interleaved=i,Ls(r,o)}function wc(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194240)!==0)){var d=i.lanes;d&=r.pendingLanes,o|=d,i.lanes=o,Zr(r,o)}}function gm(r,i){var o=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var p=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var x={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};y===null?p=y=x:y=y.next=x,o=o.next}while(o!==null);y===null?p=y=i:y=y.next=i}else p=y=i;o={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}function xc(r,i,o,d){var p=r.updateQueue;ai=!1;var y=p.firstBaseUpdate,x=p.lastBaseUpdate,N=p.shared.pending;if(N!==null){p.shared.pending=null;var O=N,X=O.next;O.next=null,x===null?y=X:x.next=X,x=O;var he=r.alternate;he!==null&&(he=he.updateQueue,N=he.lastBaseUpdate,N!==x&&(N===null?he.firstBaseUpdate=X:N.next=X,he.lastBaseUpdate=O))}if(y!==null){var fe=p.baseState;x=0,he=X=O=null,N=y;do{var de=N.lane,Ce=N.eventTime;if((d&de)===de){he!==null&&(he=he.next={eventTime:Ce,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var Ae=r,je=N;switch(de=i,Ce=o,je.tag){case 1:if(Ae=je.payload,typeof Ae=="function"){fe=Ae.call(Ce,fe,de);break e}fe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=je.payload,de=typeof Ae=="function"?Ae.call(Ce,fe,de):Ae,de==null)break e;fe=ue({},fe,de);break e;case 2:ai=!0}}N.callback!==null&&N.lane!==0&&(r.flags|=64,de=p.effects,de===null?p.effects=[N]:de.push(N))}else Ce={eventTime:Ce,lane:de,tag:N.tag,payload:N.payload,callback:N.callback,next:null},he===null?(X=he=Ce,O=fe):he=he.next=Ce,x|=de;if(N=N.next,N===null){if(N=p.shared.pending,N===null)break;de=N,N=de.next,de.next=null,p.lastBaseUpdate=de,p.shared.pending=null}}while(!0);if(he===null&&(O=fe),p.baseState=O,p.firstBaseUpdate=X,p.lastBaseUpdate=he,i=p.shared.interleaved,i!==null){p=i;do x|=p.lane,p=p.next;while(p!==i)}else y===null&&(p.shared.lanes=0);ea|=x,r.lanes=x,r.memoizedState=fe}}function ym(r,i,o){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var d=r[i],p=d.callback;if(p!==null){if(d.callback=null,d=o,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var Ho={},os=ri(Ho),qo=ri(Ho),Go=ri(Ho);function Xi(r){if(r===Ho)throw Error(t(174));return r}function Bd(r,i){switch(wt(Go,i),wt(qo,r),wt(os,Ho),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:qe(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=qe(i,r)}St(os),wt(os,i)}function Ka(){St(os),St(qo),St(Go)}function vm(r){Xi(Go.current);var i=Xi(os.current),o=qe(i,r.type);i!==o&&(wt(qo,r),wt(os,o))}function $d(r){qo.current===r&&(St(os),St(qo))}var Dt=ri(0);function Ec(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wd=[];function Hd(){for(var r=0;r<Wd.length;r++)Wd[r]._workInProgressVersionPrimary=null;Wd.length=0}var Tc=me.ReactCurrentDispatcher,qd=me.ReactCurrentBatchConfig,Zi=0,Vt=null,en=null,cn=null,Sc=!1,Ko=!1,Qo=0,Qw=0;function Nn(){throw Error(t(321))}function Gd(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Lr(r[o],i[o]))return!1;return!0}function Kd(r,i,o,d,p,y){if(Zi=y,Vt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Tc.current=r===null||r.memoizedState===null?Zw:ex,r=o(d,p),Ko){y=0;do{if(Ko=!1,Qo=0,25<=y)throw Error(t(301));y+=1,cn=en=null,i.updateQueue=null,Tc.current=tx,r=o(d,p)}while(Ko)}if(Tc.current=Pc,i=en!==null&&en.next!==null,Zi=0,cn=en=Vt=null,Sc=!1,i)throw Error(t(300));return r}function Qd(){var r=Qo!==0;return Qo=0,r}function ls(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Vt.memoizedState=cn=r:cn=cn.next=r,cn}function wr(){if(en===null){var r=Vt.alternate;r=r!==null?r.memoizedState:null}else r=en.next;var i=cn===null?Vt.memoizedState:cn.next;if(i!==null)cn=i,en=r;else{if(r===null)throw Error(t(310));en=r,r={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},cn===null?Vt.memoizedState=cn=r:cn=cn.next=r}return cn}function Yo(r,i){return typeof i=="function"?i(r):i}function Yd(r){var i=wr(),o=i.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=r;var d=en,p=d.baseQueue,y=o.pending;if(y!==null){if(p!==null){var x=p.next;p.next=y.next,y.next=x}d.baseQueue=p=y,o.pending=null}if(p!==null){y=p.next,d=d.baseState;var N=x=null,O=null,X=y;do{var he=X.lane;if((Zi&he)===he)O!==null&&(O=O.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),d=X.hasEagerState?X.eagerState:r(d,X.action);else{var fe={lane:he,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};O===null?(N=O=fe,x=d):O=O.next=fe,Vt.lanes|=he,ea|=he}X=X.next}while(X!==null&&X!==y);O===null?x=d:O.next=N,Lr(d,i.memoizedState)||(Yn=!0),i.memoizedState=d,i.baseState=x,i.baseQueue=O,o.lastRenderedState=d}if(r=o.interleaved,r!==null){p=r;do y=p.lane,Vt.lanes|=y,ea|=y,p=p.next;while(p!==r)}else p===null&&(o.lanes=0);return[i.memoizedState,o.dispatch]}function Jd(r){var i=wr(),o=i.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=r;var d=o.dispatch,p=o.pending,y=i.memoizedState;if(p!==null){o.pending=null;var x=p=p.next;do y=r(y,x.action),x=x.next;while(x!==p);Lr(y,i.memoizedState)||(Yn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,d]}function _m(){}function wm(r,i){var o=Vt,d=wr(),p=i(),y=!Lr(d.memoizedState,p);if(y&&(d.memoizedState=p,Yn=!0),d=d.queue,Xd(Tm.bind(null,o,d,r),[r]),d.getSnapshot!==i||y||cn!==null&&cn.memoizedState.tag&1){if(o.flags|=2048,Jo(9,Em.bind(null,o,d,p,i),void 0,null),un===null)throw Error(t(349));(Zi&30)!==0||xm(o,i,p)}return p}function xm(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=Vt.updateQueue,i===null?(i={lastEffect:null,stores:null},Vt.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Em(r,i,o,d){i.value=o,i.getSnapshot=d,Sm(i)&&Im(r)}function Tm(r,i,o){return o(function(){Sm(i)&&Im(r)})}function Sm(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Lr(r,o)}catch{return!0}}function Im(r){var i=Ls(r,1);i!==null&&zr(i,r,1,-1)}function Cm(r){var i=ls();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:r},i.queue=r,r=r.dispatch=Xw.bind(null,Vt,r),[i.memoizedState,r]}function Jo(r,i,o,d){return r={tag:r,create:i,destroy:o,deps:d,next:null},i=Vt.updateQueue,i===null?(i={lastEffect:null,stores:null},Vt.updateQueue=i,i.lastEffect=r.next=r):(o=i.lastEffect,o===null?i.lastEffect=r.next=r:(d=o.next,o.next=r,r.next=d,i.lastEffect=r)),r}function Pm(){return wr().memoizedState}function Ic(r,i,o,d){var p=ls();Vt.flags|=r,p.memoizedState=Jo(1|i,o,void 0,d===void 0?null:d)}function Cc(r,i,o,d){var p=wr();d=d===void 0?null:d;var y=void 0;if(en!==null){var x=en.memoizedState;if(y=x.destroy,d!==null&&Gd(d,x.deps)){p.memoizedState=Jo(i,o,y,d);return}}Vt.flags|=r,p.memoizedState=Jo(1|i,o,y,d)}function Rm(r,i){return Ic(8390656,8,r,i)}function Xd(r,i){return Cc(2048,8,r,i)}function bm(r,i){return Cc(4,2,r,i)}function Am(r,i){return Cc(4,4,r,i)}function Nm(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function km(r,i,o){return o=o!=null?o.concat([r]):null,Cc(4,4,Nm.bind(null,i,r),o)}function Zd(){}function jm(r,i){var o=wr();i=i===void 0?null:i;var d=o.memoizedState;return d!==null&&i!==null&&Gd(i,d[1])?d[0]:(o.memoizedState=[r,i],r)}function Dm(r,i){var o=wr();i=i===void 0?null:i;var d=o.memoizedState;return d!==null&&i!==null&&Gd(i,d[1])?d[0]:(r=r(),o.memoizedState=[r,i],r)}function Vm(r,i,o){return(Zi&21)===0?(r.baseState&&(r.baseState=!1,Yn=!0),r.memoizedState=o):(Lr(o,i)||(o=Un(),Vt.lanes|=o,ea|=o,r.baseState=!0),i)}function Yw(r,i){var o=Ze;Ze=o!==0&&4>o?o:4,r(!0);var d=qd.transition;qd.transition={};try{r(!1),i()}finally{Ze=o,qd.transition=d}}function Lm(){return wr().memoizedState}function Jw(r,i,o){var d=di(r);if(o={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null},Om(r))Mm(i,o);else if(o=pm(r,i,o,d),o!==null){var p=$n();zr(o,r,d,p),Fm(o,i,d)}}function Xw(r,i,o){var d=di(r),p={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null};if(Om(r))Mm(i,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var x=i.lastRenderedState,N=y(x,o);if(p.hasEagerState=!0,p.eagerState=N,Lr(N,x)){var O=i.interleaved;O===null?(p.next=p,Ud(i)):(p.next=O.next,O.next=p),i.interleaved=p;return}}catch{}finally{}o=pm(r,i,p,d),o!==null&&(p=$n(),zr(o,r,d,p),Fm(o,i,d))}}function Om(r){var i=r.alternate;return r===Vt||i!==null&&i===Vt}function Mm(r,i){Ko=Sc=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function Fm(r,i,o){if((o&4194240)!==0){var d=i.lanes;d&=r.pendingLanes,o|=d,i.lanes=o,Zr(r,o)}}var Pc={readContext:_r,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},Zw={readContext:_r,useCallback:function(r,i){return ls().memoizedState=[r,i===void 0?null:i],r},useContext:_r,useEffect:Rm,useImperativeHandle:function(r,i,o){return o=o!=null?o.concat([r]):null,Ic(4194308,4,Nm.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Ic(4194308,4,r,i)},useInsertionEffect:function(r,i){return Ic(4,2,r,i)},useMemo:function(r,i){var o=ls();return i=i===void 0?null:i,r=r(),o.memoizedState=[r,i],r},useReducer:function(r,i,o){var d=ls();return i=o!==void 0?o(i):i,d.memoizedState=d.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},d.queue=r,r=r.dispatch=Jw.bind(null,Vt,r),[d.memoizedState,r]},useRef:function(r){var i=ls();return r={current:r},i.memoizedState=r},useState:Cm,useDebugValue:Zd,useDeferredValue:function(r){return ls().memoizedState=r},useTransition:function(){var r=Cm(!1),i=r[0];return r=Yw.bind(null,r[1]),ls().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,o){var d=Vt,p=ls();if(Nt){if(o===void 0)throw Error(t(407));o=o()}else{if(o=i(),un===null)throw Error(t(349));(Zi&30)!==0||xm(d,i,o)}p.memoizedState=o;var y={value:o,getSnapshot:i};return p.queue=y,Rm(Tm.bind(null,d,y,r),[r]),d.flags|=2048,Jo(9,Em.bind(null,d,y,o,i),void 0,null),o},useId:function(){var r=ls(),i=un.identifierPrefix;if(Nt){var o=Vs,d=Ds;o=(d&~(1<<32-Ie(d)-1)).toString(32)+o,i=":"+i+"R"+o,o=Qo++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=Qw++,i=":"+i+"r"+o.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},ex={readContext:_r,useCallback:jm,useContext:_r,useEffect:Xd,useImperativeHandle:km,useInsertionEffect:bm,useLayoutEffect:Am,useMemo:Dm,useReducer:Yd,useRef:Pm,useState:function(){return Yd(Yo)},useDebugValue:Zd,useDeferredValue:function(r){var i=wr();return Vm(i,en.memoizedState,r)},useTransition:function(){var r=Yd(Yo)[0],i=wr().memoizedState;return[r,i]},useMutableSource:_m,useSyncExternalStore:wm,useId:Lm,unstable_isNewReconciler:!1},tx={readContext:_r,useCallback:jm,useContext:_r,useEffect:Xd,useImperativeHandle:km,useInsertionEffect:bm,useLayoutEffect:Am,useMemo:Dm,useReducer:Jd,useRef:Pm,useState:function(){return Jd(Yo)},useDebugValue:Zd,useDeferredValue:function(r){var i=wr();return en===null?i.memoizedState=r:Vm(i,en.memoizedState,r)},useTransition:function(){var r=Jd(Yo)[0],i=wr().memoizedState;return[r,i]},useMutableSource:_m,useSyncExternalStore:wm,useId:Lm,unstable_isNewReconciler:!1};function Mr(r,i){if(r&&r.defaultProps){i=ue({},i),r=r.defaultProps;for(var o in r)i[o]===void 0&&(i[o]=r[o]);return i}return i}function eh(r,i,o,d){i=r.memoizedState,o=o(d,i),o=o==null?i:ue({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Rc={isMounted:function(r){return(r=r._reactInternals)?ir(r)===r:!1},enqueueSetState:function(r,i,o){r=r._reactInternals;var d=$n(),p=di(r),y=Os(d,p);y.payload=i,o!=null&&(y.callback=o),i=oi(r,y,p),i!==null&&(zr(i,r,p,d),wc(i,r,p))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var d=$n(),p=di(r),y=Os(d,p);y.tag=1,y.payload=i,o!=null&&(y.callback=o),i=oi(r,y,p),i!==null&&(zr(i,r,p,d),wc(i,r,p))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=$n(),d=di(r),p=Os(o,d);p.tag=2,i!=null&&(p.callback=i),i=oi(r,p,d),i!==null&&(zr(i,r,d,o),wc(i,r,d))}};function Um(r,i,o,d,p,y,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,y,x):i.prototype&&i.prototype.isPureReactComponent?!Oo(o,d)||!Oo(p,y):!0}function zm(r,i,o){var d=!1,p=si,y=i.contextType;return typeof y=="object"&&y!==null?y=_r(y):(p=Qn(i)?Ki:An.current,d=i.contextTypes,y=(d=d!=null)?za(r,p):si),i=new i(o,y),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Rc,r.stateNode=i,i._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=y),i}function Bm(r,i,o,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,d),i.state!==r&&Rc.enqueueReplaceState(i,i.state,null)}function th(r,i,o,d){var p=r.stateNode;p.props=o,p.state=r.memoizedState,p.refs={},zd(r);var y=i.contextType;typeof y=="object"&&y!==null?p.context=_r(y):(y=Qn(i)?Ki:An.current,p.context=za(r,y)),p.state=r.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(eh(r,i,y,o),p.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&Rc.enqueueReplaceState(p,p.state,null),xc(r,o,p,d),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function Qa(r,i){try{var o="",d=i;do o+=xe(d),d=d.return;while(d);var p=o}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:i,stack:p,digest:null}}function nh(r,i,o){return{value:r,source:null,stack:o??null,digest:i??null}}function rh(r,i){try{console.error(i.value)}catch(o){setTimeout(function(){throw o})}}var nx=typeof WeakMap=="function"?WeakMap:Map;function $m(r,i,o){o=Os(-1,o),o.tag=3,o.payload={element:null};var d=i.value;return o.callback=function(){Vc||(Vc=!0,vh=d),rh(r,i)},o}function Wm(r,i,o){o=Os(-1,o),o.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var p=i.value;o.payload=function(){return d(p)},o.callback=function(){rh(r,i)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(o.callback=function(){rh(r,i),typeof d!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var x=i.stack;this.componentDidCatch(i.value,{componentStack:x!==null?x:""})}),o}function Hm(r,i,o){var d=r.pingCache;if(d===null){d=r.pingCache=new nx;var p=new Set;d.set(i,p)}else p=d.get(i),p===void 0&&(p=new Set,d.set(i,p));p.has(o)||(p.add(o),r=gx.bind(null,r,i,o),i.then(r,r))}function qm(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Gm(r,i,o,d,p){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(i=Os(-1,1),i.tag=2,oi(o,i,1))),o.lanes|=1),r):(r.flags|=65536,r.lanes=p,r)}var rx=me.ReactCurrentOwner,Yn=!1;function Bn(r,i,o,d){i.child=r===null?fm(i,null,o,d):Ha(i,r.child,o,d)}function Km(r,i,o,d,p){o=o.render;var y=i.ref;return Ga(i,p),d=Kd(r,i,o,d,y,p),o=Qd(),r!==null&&!Yn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~p,Ms(r,i,p)):(Nt&&o&&Nd(i),i.flags|=1,Bn(r,i,d,p),i.child)}function Qm(r,i,o,d,p){if(r===null){var y=o.type;return typeof y=="function"&&!Ih(y)&&y.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(i.tag=15,i.type=y,Ym(r,i,y,d,p)):(r=zc(o.type,null,d,i,i.mode,p),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,(r.lanes&p)===0){var x=y.memoizedProps;if(o=o.compare,o=o!==null?o:Oo,o(x,d)&&r.ref===i.ref)return Ms(r,i,p)}return i.flags|=1,r=fi(y,d),r.ref=i.ref,r.return=i,i.child=r}function Ym(r,i,o,d,p){if(r!==null){var y=r.memoizedProps;if(Oo(y,d)&&r.ref===i.ref)if(Yn=!1,i.pendingProps=d=y,(r.lanes&p)!==0)(r.flags&131072)!==0&&(Yn=!0);else return i.lanes=r.lanes,Ms(r,i,p)}return sh(r,i,o,d,p)}function Jm(r,i,o){var d=i.pendingProps,p=d.children,y=r!==null?r.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(Ja,ur),ur|=o;else{if((o&1073741824)===0)return r=y!==null?y.baseLanes|o:o,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,wt(Ja,ur),ur|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:o,wt(Ja,ur),ur|=d}else y!==null?(d=y.baseLanes|o,i.memoizedState=null):d=o,wt(Ja,ur),ur|=d;return Bn(r,i,p,o),i.child}function Xm(r,i){var o=i.ref;(r===null&&o!==null||r!==null&&r.ref!==o)&&(i.flags|=512,i.flags|=2097152)}function sh(r,i,o,d,p){var y=Qn(o)?Ki:An.current;return y=za(i,y),Ga(i,p),o=Kd(r,i,o,d,y,p),d=Qd(),r!==null&&!Yn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~p,Ms(r,i,p)):(Nt&&d&&Nd(i),i.flags|=1,Bn(r,i,o,p),i.child)}function Zm(r,i,o,d,p){if(Qn(o)){var y=!0;hc(i)}else y=!1;if(Ga(i,p),i.stateNode===null)Ac(r,i),zm(i,o,d),th(i,o,d,p),d=!0;else if(r===null){var x=i.stateNode,N=i.memoizedProps;x.props=N;var O=x.context,X=o.contextType;typeof X=="object"&&X!==null?X=_r(X):(X=Qn(o)?Ki:An.current,X=za(i,X));var he=o.getDerivedStateFromProps,fe=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function";fe||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==d||O!==X)&&Bm(i,x,d,X),ai=!1;var de=i.memoizedState;x.state=de,xc(i,d,x,p),O=i.memoizedState,N!==d||de!==O||Kn.current||ai?(typeof he=="function"&&(eh(i,o,he,d),O=i.memoizedState),(N=ai||Um(i,o,N,d,de,O,X))?(fe||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=O),x.props=d,x.state=O,x.context=X,d=N):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{x=i.stateNode,mm(r,i),N=i.memoizedProps,X=i.type===i.elementType?N:Mr(i.type,N),x.props=X,fe=i.pendingProps,de=x.context,O=o.contextType,typeof O=="object"&&O!==null?O=_r(O):(O=Qn(o)?Ki:An.current,O=za(i,O));var Ce=o.getDerivedStateFromProps;(he=typeof Ce=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==fe||de!==O)&&Bm(i,x,d,O),ai=!1,de=i.memoizedState,x.state=de,xc(i,d,x,p);var Ae=i.memoizedState;N!==fe||de!==Ae||Kn.current||ai?(typeof Ce=="function"&&(eh(i,o,Ce,d),Ae=i.memoizedState),(X=ai||Um(i,o,X,d,de,Ae,O)||!1)?(he||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,Ae,O),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,Ae,O)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||N===r.memoizedProps&&de===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&de===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=Ae),x.props=d,x.state=Ae,x.context=O,d=X):(typeof x.componentDidUpdate!="function"||N===r.memoizedProps&&de===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&de===r.memoizedState||(i.flags|=1024),d=!1)}return ih(r,i,o,d,y,p)}function ih(r,i,o,d,p,y){Xm(r,i);var x=(i.flags&128)!==0;if(!d&&!x)return p&&sm(i,o,!1),Ms(r,i,y);d=i.stateNode,rx.current=i;var N=x&&typeof o.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,r!==null&&x?(i.child=Ha(i,r.child,null,y),i.child=Ha(i,null,N,y)):Bn(r,i,N,y),i.memoizedState=d.state,p&&sm(i,o,!0),i.child}function eg(r){var i=r.stateNode;i.pendingContext?nm(r,i.pendingContext,i.pendingContext!==i.context):i.context&&nm(r,i.context,!1),Bd(r,i.containerInfo)}function tg(r,i,o,d,p){return Wa(),Vd(p),i.flags|=256,Bn(r,i,o,d),i.child}var ah={dehydrated:null,treeContext:null,retryLane:0};function oh(r){return{baseLanes:r,cachePool:null,transitions:null}}function ng(r,i,o){var d=i.pendingProps,p=Dt.current,y=!1,x=(i.flags&128)!==0,N;if((N=x)||(N=r!==null&&r.memoizedState===null?!1:(p&2)!==0),N?(y=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),wt(Dt,p&1),r===null)return Dd(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(x=d.children,r=d.fallback,y?(d=i.mode,y=i.child,x={mode:"hidden",children:x},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=x):y=Bc(x,d,0,null),r=sa(r,d,o,null),y.return=i,r.return=i,y.sibling=r,i.child=y,i.child.memoizedState=oh(o),i.memoizedState=ah,r):lh(i,x));if(p=r.memoizedState,p!==null&&(N=p.dehydrated,N!==null))return sx(r,i,x,d,N,p,o);if(y){y=d.fallback,x=i.mode,p=r.child,N=p.sibling;var O={mode:"hidden",children:d.children};return(x&1)===0&&i.child!==p?(d=i.child,d.childLanes=0,d.pendingProps=O,i.deletions=null):(d=fi(p,O),d.subtreeFlags=p.subtreeFlags&14680064),N!==null?y=fi(N,y):(y=sa(y,x,o,null),y.flags|=2),y.return=i,d.return=i,d.sibling=y,i.child=d,d=y,y=i.child,x=r.child.memoizedState,x=x===null?oh(o):{baseLanes:x.baseLanes|o,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=r.childLanes&~o,i.memoizedState=ah,d}return y=r.child,r=y.sibling,d=fi(y,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=o),d.return=i,d.sibling=null,r!==null&&(o=i.deletions,o===null?(i.deletions=[r],i.flags|=16):o.push(r)),i.child=d,i.memoizedState=null,d}function lh(r,i){return i=Bc({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function bc(r,i,o,d){return d!==null&&Vd(d),Ha(i,r.child,null,o),r=lh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function sx(r,i,o,d,p,y,x){if(o)return i.flags&256?(i.flags&=-257,d=nh(Error(t(422))),bc(r,i,x,d)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(y=d.fallback,p=i.mode,d=Bc({mode:"visible",children:d.children},p,0,null),y=sa(y,p,x,null),y.flags|=2,d.return=i,y.return=i,d.sibling=y,i.child=d,(i.mode&1)!==0&&Ha(i,r.child,null,x),i.child.memoizedState=oh(x),i.memoizedState=ah,y);if((i.mode&1)===0)return bc(r,i,x,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var N=d.dgst;return d=N,y=Error(t(419)),d=nh(y,d,void 0),bc(r,i,x,d)}if(N=(x&r.childLanes)!==0,Yn||N){if(d=un,d!==null){switch(x&-x){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|x))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Ls(r,p),zr(d,r,p,-1))}return Sh(),d=nh(Error(t(421))),bc(r,i,x,d)}return p.data==="$?"?(i.flags|=128,i.child=r.child,i=yx.bind(null,r),p._reactRetry=i,null):(r=y.treeContext,cr=ni(p.nextSibling),lr=i,Nt=!0,Or=null,r!==null&&(yr[vr++]=Ds,yr[vr++]=Vs,yr[vr++]=Qi,Ds=r.id,Vs=r.overflow,Qi=i),i=lh(i,d.children),i.flags|=4096,i)}function rg(r,i,o){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),Fd(r.return,i,o)}function ch(r,i,o,d,p){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:p}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=o,y.tailMode=p)}function sg(r,i,o){var d=i.pendingProps,p=d.revealOrder,y=d.tail;if(Bn(r,i,d.children,o),d=Dt.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&rg(r,o,i);else if(r.tag===19)rg(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(wt(Dt,d),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(o=i.child,p=null;o!==null;)r=o.alternate,r!==null&&Ec(r)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),ch(i,!1,p,o,y);break;case"backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(r=p.alternate,r!==null&&Ec(r)===null){i.child=p;break}r=p.sibling,p.sibling=o,o=p,p=r}ch(i,!0,o,null,y);break;case"together":ch(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ac(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Ms(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),ea|=i.lanes,(o&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,o=fi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=fi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function ix(r,i,o){switch(i.tag){case 3:eg(i),Wa();break;case 5:vm(i);break;case 1:Qn(i.type)&&hc(i);break;case 4:Bd(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,p=i.memoizedProps.value;wt(vc,d._currentValue),d._currentValue=p;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(wt(Dt,Dt.current&1),i.flags|=128,null):(o&i.child.childLanes)!==0?ng(r,i,o):(wt(Dt,Dt.current&1),r=Ms(r,i,o),r!==null?r.sibling:null);wt(Dt,Dt.current&1);break;case 19:if(d=(o&i.childLanes)!==0,(r.flags&128)!==0){if(d)return sg(r,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),wt(Dt,Dt.current),d)break;return null;case 22:case 23:return i.lanes=0,Jm(r,i,o)}return Ms(r,i,o)}var ig,uh,ag,og;ig=function(r,i){for(var o=i.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},uh=function(){},ag=function(r,i,o,d){var p=r.memoizedProps;if(p!==d){r=i.stateNode,Xi(os.current);var y=null;switch(o){case"input":p=fn(r,p),d=fn(r,d),y=[];break;case"select":p=ue({},p,{value:void 0}),d=ue({},d,{value:void 0}),y=[];break;case"textarea":p=rr(r,p),d=rr(r,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=cc)}fr(o,d);var x;o=null;for(X in p)if(!d.hasOwnProperty(X)&&p.hasOwnProperty(X)&&p[X]!=null)if(X==="style"){var N=p[X];for(x in N)N.hasOwnProperty(x)&&(o||(o={}),o[x]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(a.hasOwnProperty(X)?y||(y=[]):(y=y||[]).push(X,null));for(X in d){var O=d[X];if(N=p!=null?p[X]:void 0,d.hasOwnProperty(X)&&O!==N&&(O!=null||N!=null))if(X==="style")if(N){for(x in N)!N.hasOwnProperty(x)||O&&O.hasOwnProperty(x)||(o||(o={}),o[x]="");for(x in O)O.hasOwnProperty(x)&&N[x]!==O[x]&&(o||(o={}),o[x]=O[x])}else o||(y||(y=[]),y.push(X,o)),o=O;else X==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,N=N?N.__html:void 0,O!=null&&N!==O&&(y=y||[]).push(X,O)):X==="children"?typeof O!="string"&&typeof O!="number"||(y=y||[]).push(X,""+O):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(a.hasOwnProperty(X)?(O!=null&&X==="onScroll"&&Tt("scroll",r),y||N===O||(y=[])):(y=y||[]).push(X,O))}o&&(y=y||[]).push("style",o);var X=y;(i.updateQueue=X)&&(i.flags|=4)}},og=function(r,i,o,d){o!==d&&(i.flags|=4)};function Xo(r,i){if(!Nt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function kn(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,d=0;if(i)for(var p=r.child;p!==null;)o|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)o|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=d,r.childLanes=o,i}function ax(r,i,o){var d=i.pendingProps;switch(kd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(i),null;case 1:return Qn(i.type)&&dc(),kn(i),null;case 3:return d=i.stateNode,Ka(),St(Kn),St(An),Hd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(gc(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Or!==null&&(xh(Or),Or=null))),uh(r,i),kn(i),null;case 5:$d(i);var p=Xi(Go.current);if(o=i.type,r!==null&&i.stateNode!=null)ag(r,i,o,d,p),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return kn(i),null}if(r=Xi(os.current),gc(i)){d=i.stateNode,o=i.type;var y=i.memoizedProps;switch(d[as]=i,d[Bo]=y,r=(i.mode&1)!==0,o){case"dialog":Tt("cancel",d),Tt("close",d);break;case"iframe":case"object":case"embed":Tt("load",d);break;case"video":case"audio":for(p=0;p<Fo.length;p++)Tt(Fo[p],d);break;case"source":Tt("error",d);break;case"img":case"image":case"link":Tt("error",d),Tt("load",d);break;case"details":Tt("toggle",d);break;case"input":Je(d,y),Tt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Tt("invalid",d);break;case"textarea":Wn(d,y),Tt("invalid",d)}fr(o,y),p=null;for(var x in y)if(y.hasOwnProperty(x)){var N=y[x];x==="children"?typeof N=="string"?d.textContent!==N&&(y.suppressHydrationWarning!==!0&&lc(d.textContent,N,r),p=["children",N]):typeof N=="number"&&d.textContent!==""+N&&(y.suppressHydrationWarning!==!0&&lc(d.textContent,N,r),p=["children",""+N]):a.hasOwnProperty(x)&&N!=null&&x==="onScroll"&&Tt("scroll",d)}switch(o){case"input":Wt(d),ws(d,y,!0);break;case"textarea":Wt(d),Gr(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=cc)}d=p,i.updateQueue=d,d!==null&&(i.flags|=4)}else{x=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Rt(o)),r==="http://www.w3.org/1999/xhtml"?o==="script"?(r=x.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=x.createElement(o,{is:d.is}):(r=x.createElement(o),o==="select"&&(x=r,d.multiple?x.multiple=!0:d.size&&(x.size=d.size))):r=x.createElementNS(r,o),r[as]=i,r[Bo]=d,ig(r,i,!1,!1),i.stateNode=r;e:{switch(x=Ts(o,d),o){case"dialog":Tt("cancel",r),Tt("close",r),p=d;break;case"iframe":case"object":case"embed":Tt("load",r),p=d;break;case"video":case"audio":for(p=0;p<Fo.length;p++)Tt(Fo[p],r);p=d;break;case"source":Tt("error",r),p=d;break;case"img":case"image":case"link":Tt("error",r),Tt("load",r),p=d;break;case"details":Tt("toggle",r),p=d;break;case"input":Je(r,d),p=fn(r,d),Tt("invalid",r);break;case"option":p=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},p=ue({},d,{value:void 0}),Tt("invalid",r);break;case"textarea":Wn(r,d),p=rr(r,d),Tt("invalid",r);break;default:p=d}fr(o,p),N=p;for(y in N)if(N.hasOwnProperty(y)){var O=N[y];y==="style"?mn(r,O):y==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&xs(r,O)):y==="children"?typeof O=="string"?(o!=="textarea"||O!=="")&&Rn(r,O):typeof O=="number"&&Rn(r,""+O):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(a.hasOwnProperty(y)?O!=null&&y==="onScroll"&&Tt("scroll",r):O!=null&&oe(r,y,O,x))}switch(o){case"input":Wt(r),ws(r,d,!1);break;case"textarea":Wt(r),Gr(r);break;case"option":d.value!=null&&r.setAttribute("value",""+ke(d.value));break;case"select":r.multiple=!!d.multiple,y=d.value,y!=null?Cn(r,!!d.multiple,y,!1):d.defaultValue!=null&&Cn(r,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=cc)}switch(o){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return kn(i),null;case 6:if(r&&i.stateNode!=null)og(r,i,r.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(o=Xi(Go.current),Xi(os.current),gc(i)){if(d=i.stateNode,o=i.memoizedProps,d[as]=i,(y=d.nodeValue!==o)&&(r=lr,r!==null))switch(r.tag){case 3:lc(d.nodeValue,o,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&lc(d.nodeValue,o,(r.mode&1)!==0)}y&&(i.flags|=4)}else d=(o.nodeType===9?o:o.ownerDocument).createTextNode(d),d[as]=i,i.stateNode=d}return kn(i),null;case 13:if(St(Dt),d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Nt&&cr!==null&&(i.mode&1)!==0&&(i.flags&128)===0)um(),Wa(),i.flags|=98560,y=!1;else if(y=gc(i),d!==null&&d.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[as]=i}else Wa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kn(i),y=!1}else Or!==null&&(xh(Or),Or=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=o,i):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Dt.current&1)!==0?tn===0&&(tn=3):Sh())),i.updateQueue!==null&&(i.flags|=4),kn(i),null);case 4:return Ka(),uh(r,i),r===null&&Uo(i.stateNode.containerInfo),kn(i),null;case 10:return Md(i.type._context),kn(i),null;case 17:return Qn(i.type)&&dc(),kn(i),null;case 19:if(St(Dt),y=i.memoizedState,y===null)return kn(i),null;if(d=(i.flags&128)!==0,x=y.rendering,x===null)if(d)Xo(y,!1);else{if(tn!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(x=Ec(r),x!==null){for(i.flags|=128,Xo(y,!1),d=x.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=o,o=i.child;o!==null;)y=o,r=d,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,r=x.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),o=o.sibling;return wt(Dt,Dt.current&1|2),i.child}r=r.sibling}y.tail!==null&&gt()>Xa&&(i.flags|=128,d=!0,Xo(y,!1),i.lanes=4194304)}else{if(!d)if(r=Ec(x),r!==null){if(i.flags|=128,d=!0,o=r.updateQueue,o!==null&&(i.updateQueue=o,i.flags|=4),Xo(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!Nt)return kn(i),null}else 2*gt()-y.renderingStartTime>Xa&&o!==1073741824&&(i.flags|=128,d=!0,Xo(y,!1),i.lanes=4194304);y.isBackwards?(x.sibling=i.child,i.child=x):(o=y.last,o!==null?o.sibling=x:i.child=x,y.last=x)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=gt(),i.sibling=null,o=Dt.current,wt(Dt,d?o&1|2:o&1),i):(kn(i),null);case 22:case 23:return Th(),d=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(ur&1073741824)!==0&&(kn(i),i.subtreeFlags&6&&(i.flags|=8192)):kn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function ox(r,i){switch(kd(i),i.tag){case 1:return Qn(i.type)&&dc(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ka(),St(Kn),St(An),Hd(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return $d(i),null;case 13:if(St(Dt),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Wa()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return St(Dt),null;case 4:return Ka(),null;case 10:return Md(i.type._context),null;case 22:case 23:return Th(),null;case 24:return null;default:return null}}var Nc=!1,jn=!1,lx=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Ya(r,i){var o=r.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(d){Mt(r,i,d)}else o.current=null}function dh(r,i,o){try{o()}catch(d){Mt(r,i,d)}}var lg=!1;function cx(r,i){if(Td=Zs,r=Up(),md(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var x=0,N=-1,O=-1,X=0,he=0,fe=r,de=null;t:for(;;){for(var Ce;fe!==o||p!==0&&fe.nodeType!==3||(N=x+p),fe!==y||d!==0&&fe.nodeType!==3||(O=x+d),fe.nodeType===3&&(x+=fe.nodeValue.length),(Ce=fe.firstChild)!==null;)de=fe,fe=Ce;for(;;){if(fe===r)break t;if(de===o&&++X===p&&(N=x),de===y&&++he===d&&(O=x),(Ce=fe.nextSibling)!==null)break;fe=de,de=fe.parentNode}fe=Ce}o=N===-1||O===-1?null:{start:N,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Sd={focusedElem:r,selectionRange:o},Zs=!1,Re=i;Re!==null;)if(i=Re,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Re=r;else for(;Re!==null;){i=Re;try{var Ae=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var je=Ae.memoizedProps,zt=Ae.memoizedState,q=i.stateNode,z=q.getSnapshotBeforeUpdate(i.elementType===i.type?je:Mr(i.type,je),zt);q.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var J=i.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ye){Mt(i,i.return,ye)}if(r=i.sibling,r!==null){r.return=i.return,Re=r;break}Re=i.return}return Ae=lg,lg=!1,Ae}function Zo(r,i,o){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&r)===r){var y=p.destroy;p.destroy=void 0,y!==void 0&&dh(i,o,y)}p=p.next}while(p!==d)}}function kc(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&r)===r){var d=o.create;o.destroy=d()}o=o.next}while(o!==i)}}function hh(r){var i=r.ref;if(i!==null){var o=r.stateNode;switch(r.tag){case 5:r=o;break;default:r=o}typeof i=="function"?i(r):i.current=r}}function cg(r){var i=r.alternate;i!==null&&(r.alternate=null,cg(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[as],delete i[Bo],delete i[Rd],delete i[Hw],delete i[qw])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ug(r){return r.tag===5||r.tag===3||r.tag===4}function dg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ug(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function fh(r,i,o){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(r,i):o.insertBefore(r,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(r,o)):(i=o,i.appendChild(r)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=cc));else if(d!==4&&(r=r.child,r!==null))for(fh(r,i,o),r=r.sibling;r!==null;)fh(r,i,o),r=r.sibling}function ph(r,i,o){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(ph(r,i,o),r=r.sibling;r!==null;)ph(r,i,o),r=r.sibling}var _n=null,Fr=!1;function li(r,i,o){for(o=o.child;o!==null;)hg(r,i,o),o=o.sibling}function hg(r,i,o){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(ve,o)}catch{}switch(o.tag){case 5:jn||Ya(o,i);case 6:var d=_n,p=Fr;_n=null,li(r,i,o),_n=d,Fr=p,_n!==null&&(Fr?(r=_n,o=o.stateNode,r.nodeType===8?r.parentNode.removeChild(o):r.removeChild(o)):_n.removeChild(o.stateNode));break;case 18:_n!==null&&(Fr?(r=_n,o=o.stateNode,r.nodeType===8?Pd(r.parentNode,o):r.nodeType===1&&Pd(r,o),Dr(r)):Pd(_n,o.stateNode));break;case 4:d=_n,p=Fr,_n=o.stateNode.containerInfo,Fr=!0,li(r,i,o),_n=d,Fr=p;break;case 0:case 11:case 14:case 15:if(!jn&&(d=o.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,x=y.destroy;y=y.tag,x!==void 0&&((y&2)!==0||(y&4)!==0)&&dh(o,i,x),p=p.next}while(p!==d)}li(r,i,o);break;case 1:if(!jn&&(Ya(o,i),d=o.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=o.memoizedProps,d.state=o.memoizedState,d.componentWillUnmount()}catch(N){Mt(o,i,N)}li(r,i,o);break;case 21:li(r,i,o);break;case 22:o.mode&1?(jn=(d=jn)||o.memoizedState!==null,li(r,i,o),jn=d):li(r,i,o);break;default:li(r,i,o)}}function fg(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var o=r.stateNode;o===null&&(o=r.stateNode=new lx),i.forEach(function(d){var p=vx.bind(null,r,d);o.has(d)||(o.add(d),d.then(p,p))})}}function Ur(r,i){var o=i.deletions;if(o!==null)for(var d=0;d<o.length;d++){var p=o[d];try{var y=r,x=i,N=x;e:for(;N!==null;){switch(N.tag){case 5:_n=N.stateNode,Fr=!1;break e;case 3:_n=N.stateNode.containerInfo,Fr=!0;break e;case 4:_n=N.stateNode.containerInfo,Fr=!0;break e}N=N.return}if(_n===null)throw Error(t(160));hg(y,x,p),_n=null,Fr=!1;var O=p.alternate;O!==null&&(O.return=null),p.return=null}catch(X){Mt(p,i,X)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)pg(i,r),i=i.sibling}function pg(r,i){var o=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ur(i,r),cs(r),d&4){try{Zo(3,r,r.return),kc(3,r)}catch(je){Mt(r,r.return,je)}try{Zo(5,r,r.return)}catch(je){Mt(r,r.return,je)}}break;case 1:Ur(i,r),cs(r),d&512&&o!==null&&Ya(o,o.return);break;case 5:if(Ur(i,r),cs(r),d&512&&o!==null&&Ya(o,o.return),r.flags&32){var p=r.stateNode;try{Rn(p,"")}catch(je){Mt(r,r.return,je)}}if(d&4&&(p=r.stateNode,p!=null)){var y=r.memoizedProps,x=o!==null?o.memoizedProps:y,N=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{N==="input"&&y.type==="radio"&&y.name!=null&&Mn(p,y),Ts(N,x);var X=Ts(N,y);for(x=0;x<O.length;x+=2){var he=O[x],fe=O[x+1];he==="style"?mn(p,fe):he==="dangerouslySetInnerHTML"?xs(p,fe):he==="children"?Rn(p,fe):oe(p,he,fe,X)}switch(N){case"input":Ht(p,y);break;case"textarea":qr(p,y);break;case"select":var de=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var Ce=y.value;Ce!=null?Cn(p,!!y.multiple,Ce,!1):de!==!!y.multiple&&(y.defaultValue!=null?Cn(p,!!y.multiple,y.defaultValue,!0):Cn(p,!!y.multiple,y.multiple?[]:"",!1))}p[Bo]=y}catch(je){Mt(r,r.return,je)}}break;case 6:if(Ur(i,r),cs(r),d&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,y=r.memoizedProps;try{p.nodeValue=y}catch(je){Mt(r,r.return,je)}}break;case 3:if(Ur(i,r),cs(r),d&4&&o!==null&&o.memoizedState.isDehydrated)try{Dr(i.containerInfo)}catch(je){Mt(r,r.return,je)}break;case 4:Ur(i,r),cs(r);break;case 13:Ur(i,r),cs(r),p=r.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(yh=gt())),d&4&&fg(r);break;case 22:if(he=o!==null&&o.memoizedState!==null,r.mode&1?(jn=(X=jn)||he,Ur(i,r),jn=X):Ur(i,r),cs(r),d&8192){if(X=r.memoizedState!==null,(r.stateNode.isHidden=X)&&!he&&(r.mode&1)!==0)for(Re=r,he=r.child;he!==null;){for(fe=Re=he;Re!==null;){switch(de=Re,Ce=de.child,de.tag){case 0:case 11:case 14:case 15:Zo(4,de,de.return);break;case 1:Ya(de,de.return);var Ae=de.stateNode;if(typeof Ae.componentWillUnmount=="function"){d=de,o=de.return;try{i=d,Ae.props=i.memoizedProps,Ae.state=i.memoizedState,Ae.componentWillUnmount()}catch(je){Mt(d,o,je)}}break;case 5:Ya(de,de.return);break;case 22:if(de.memoizedState!==null){yg(fe);continue}}Ce!==null?(Ce.return=de,Re=Ce):yg(fe)}he=he.sibling}e:for(he=null,fe=r;;){if(fe.tag===5){if(he===null){he=fe;try{p=fe.stateNode,X?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(N=fe.stateNode,O=fe.memoizedProps.style,x=O!=null&&O.hasOwnProperty("display")?O.display:null,N.style.display=Es("display",x))}catch(je){Mt(r,r.return,je)}}}else if(fe.tag===6){if(he===null)try{fe.stateNode.nodeValue=X?"":fe.memoizedProps}catch(je){Mt(r,r.return,je)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===r)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===r)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===r)break e;he===fe&&(he=null),fe=fe.return}he===fe&&(he=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:Ur(i,r),cs(r),d&4&&fg(r);break;case 21:break;default:Ur(i,r),cs(r)}}function cs(r){var i=r.flags;if(i&2){try{e:{for(var o=r.return;o!==null;){if(ug(o)){var d=o;break e}o=o.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Rn(p,""),d.flags&=-33);var y=dg(r);ph(r,y,p);break;case 3:case 4:var x=d.stateNode.containerInfo,N=dg(r);fh(r,N,x);break;default:throw Error(t(161))}}catch(O){Mt(r,r.return,O)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function ux(r,i,o){Re=r,mg(r)}function mg(r,i,o){for(var d=(r.mode&1)!==0;Re!==null;){var p=Re,y=p.child;if(p.tag===22&&d){var x=p.memoizedState!==null||Nc;if(!x){var N=p.alternate,O=N!==null&&N.memoizedState!==null||jn;N=Nc;var X=jn;if(Nc=x,(jn=O)&&!X)for(Re=p;Re!==null;)x=Re,O=x.child,x.tag===22&&x.memoizedState!==null?vg(p):O!==null?(O.return=x,Re=O):vg(p);for(;y!==null;)Re=y,mg(y),y=y.sibling;Re=p,Nc=N,jn=X}gg(r)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,Re=y):gg(r)}}function gg(r){for(;Re!==null;){var i=Re;if((i.flags&8772)!==0){var o=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:jn||kc(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!jn)if(o===null)d.componentDidMount();else{var p=i.elementType===i.type?o.memoizedProps:Mr(i.type,o.memoizedProps);d.componentDidUpdate(p,o.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&ym(i,y,d);break;case 3:var x=i.updateQueue;if(x!==null){if(o=null,i.child!==null)switch(i.child.tag){case 5:o=i.child.stateNode;break;case 1:o=i.child.stateNode}ym(i,x,o)}break;case 5:var N=i.stateNode;if(o===null&&i.flags&4){o=N;var O=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&o.focus();break;case"img":O.src&&(o.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var X=i.alternate;if(X!==null){var he=X.memoizedState;if(he!==null){var fe=he.dehydrated;fe!==null&&Dr(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jn||i.flags&512&&hh(i)}catch(de){Mt(i,i.return,de)}}if(i===r){Re=null;break}if(o=i.sibling,o!==null){o.return=i.return,Re=o;break}Re=i.return}}function yg(r){for(;Re!==null;){var i=Re;if(i===r){Re=null;break}var o=i.sibling;if(o!==null){o.return=i.return,Re=o;break}Re=i.return}}function vg(r){for(;Re!==null;){var i=Re;try{switch(i.tag){case 0:case 11:case 15:var o=i.return;try{kc(4,i)}catch(O){Mt(i,o,O)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var p=i.return;try{d.componentDidMount()}catch(O){Mt(i,p,O)}}var y=i.return;try{hh(i)}catch(O){Mt(i,y,O)}break;case 5:var x=i.return;try{hh(i)}catch(O){Mt(i,x,O)}}}catch(O){Mt(i,i.return,O)}if(i===r){Re=null;break}var N=i.sibling;if(N!==null){N.return=i.return,Re=N;break}Re=i.return}}var dx=Math.ceil,jc=me.ReactCurrentDispatcher,mh=me.ReactCurrentOwner,xr=me.ReactCurrentBatchConfig,ut=0,un=null,Kt=null,wn=0,ur=0,Ja=ri(0),tn=0,el=null,ea=0,Dc=0,gh=0,tl=null,Jn=null,yh=0,Xa=1/0,Fs=null,Vc=!1,vh=null,ci=null,Lc=!1,ui=null,Oc=0,nl=0,_h=null,Mc=-1,Fc=0;function $n(){return(ut&6)!==0?gt():Mc!==-1?Mc:Mc=gt()}function di(r){return(r.mode&1)===0?1:(ut&2)!==0&&wn!==0?wn&-wn:Kw.transition!==null?(Fc===0&&(Fc=Un()),Fc):(r=Ze,r!==0||(r=window.event,r=r===void 0?16:Ao(r.type)),r)}function zr(r,i,o,d){if(50<nl)throw nl=0,_h=null,Error(t(185));Xr(r,o,d),((ut&2)===0||r!==un)&&(r===un&&((ut&2)===0&&(Dc|=o),tn===4&&hi(r,wn)),Xn(r,d),o===1&&ut===0&&(i.mode&1)===0&&(Xa=gt()+500,fc&&ii()))}function Xn(r,i){var o=r.callbackNode;bn(r,i);var d=jt(r,r===un?wn:0);if(d===0)o!==null&&Js(o),r.callbackNode=null,r.callbackPriority=0;else if(i=d&-d,r.callbackPriority!==i){if(o!=null&&Js(o),i===1)r.tag===0?Gw(wg.bind(null,r)):im(wg.bind(null,r)),$w(function(){(ut&6)===0&&ii()}),o=null;else{switch(es(d)){case 1:o=Ps;break;case 4:o=Jr;break;case 16:o=S;break;case 536870912:o=Y;break;default:o=S}o=Rg(o,_g.bind(null,r))}r.callbackPriority=i,r.callbackNode=o}}function _g(r,i){if(Mc=-1,Fc=0,(ut&6)!==0)throw Error(t(327));var o=r.callbackNode;if(Za()&&r.callbackNode!==o)return null;var d=jt(r,r===un?wn:0);if(d===0)return null;if((d&30)!==0||(d&r.expiredLanes)!==0||i)i=Uc(r,d);else{i=d;var p=ut;ut|=2;var y=Eg();(un!==r||wn!==i)&&(Fs=null,Xa=gt()+500,na(r,i));do try{px();break}catch(N){xg(r,N)}while(!0);Od(),jc.current=y,ut=p,Kt!==null?i=0:(un=null,wn=0,i=tn)}if(i!==0){if(i===2&&(p=_t(r),p!==0&&(d=p,i=wh(r,p))),i===1)throw o=el,na(r,0),hi(r,d),Xn(r,gt()),o;if(i===6)hi(r,d);else{if(p=r.current.alternate,(d&30)===0&&!hx(p)&&(i=Uc(r,d),i===2&&(y=_t(r),y!==0&&(d=y,i=wh(r,y))),i===1))throw o=el,na(r,0),hi(r,d),Xn(r,gt()),o;switch(r.finishedWork=p,r.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:ra(r,Jn,Fs);break;case 3:if(hi(r,d),(d&130023424)===d&&(i=yh+500-gt(),10<i)){if(jt(r,0)!==0)break;if(p=r.suspendedLanes,(p&d)!==d){$n(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=Cd(ra.bind(null,r,Jn,Fs),i);break}ra(r,Jn,Fs);break;case 4:if(hi(r,d),(d&4194240)===d)break;for(i=r.eventTimes,p=-1;0<d;){var x=31-Ie(d);y=1<<x,x=i[x],x>p&&(p=x),d&=~y}if(d=p,d=gt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*dx(d/1960))-d,10<d){r.timeoutHandle=Cd(ra.bind(null,r,Jn,Fs),d);break}ra(r,Jn,Fs);break;case 5:ra(r,Jn,Fs);break;default:throw Error(t(329))}}}return Xn(r,gt()),r.callbackNode===o?_g.bind(null,r):null}function wh(r,i){var o=tl;return r.current.memoizedState.isDehydrated&&(na(r,i).flags|=256),r=Uc(r,i),r!==2&&(i=Jn,Jn=o,i!==null&&xh(i)),r}function xh(r){Jn===null?Jn=r:Jn.push.apply(Jn,r)}function hx(r){for(var i=r;;){if(i.flags&16384){var o=i.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var d=0;d<o.length;d++){var p=o[d],y=p.getSnapshot;p=p.value;try{if(!Lr(y(),p))return!1}catch{return!1}}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function hi(r,i){for(i&=~gh,i&=~Dc,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var o=31-Ie(i),d=1<<o;r[o]=-1,i&=~d}}function wg(r){if((ut&6)!==0)throw Error(t(327));Za();var i=jt(r,0);if((i&1)===0)return Xn(r,gt()),null;var o=Uc(r,i);if(r.tag!==0&&o===2){var d=_t(r);d!==0&&(i=d,o=wh(r,d))}if(o===1)throw o=el,na(r,0),hi(r,i),Xn(r,gt()),o;if(o===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,ra(r,Jn,Fs),Xn(r,gt()),null}function Eh(r,i){var o=ut;ut|=1;try{return r(i)}finally{ut=o,ut===0&&(Xa=gt()+500,fc&&ii())}}function ta(r){ui!==null&&ui.tag===0&&(ut&6)===0&&Za();var i=ut;ut|=1;var o=xr.transition,d=Ze;try{if(xr.transition=null,Ze=1,r)return r()}finally{Ze=d,xr.transition=o,ut=i,(ut&6)===0&&ii()}}function Th(){ur=Ja.current,St(Ja)}function na(r,i){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;if(o!==-1&&(r.timeoutHandle=-1,Bw(o)),Kt!==null)for(o=Kt.return;o!==null;){var d=o;switch(kd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&dc();break;case 3:Ka(),St(Kn),St(An),Hd();break;case 5:$d(d);break;case 4:Ka();break;case 13:St(Dt);break;case 19:St(Dt);break;case 10:Md(d.type._context);break;case 22:case 23:Th()}o=o.return}if(un=r,Kt=r=fi(r.current,null),wn=ur=i,tn=0,el=null,gh=Dc=ea=0,Jn=tl=null,Ji!==null){for(i=0;i<Ji.length;i++)if(o=Ji[i],d=o.interleaved,d!==null){o.interleaved=null;var p=d.next,y=o.pending;if(y!==null){var x=y.next;y.next=p,d.next=x}o.pending=d}Ji=null}return r}function xg(r,i){do{var o=Kt;try{if(Od(),Tc.current=Pc,Sc){for(var d=Vt.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Sc=!1}if(Zi=0,cn=en=Vt=null,Ko=!1,Qo=0,mh.current=null,o===null||o.return===null){tn=1,el=i,Kt=null;break}e:{var y=r,x=o.return,N=o,O=i;if(i=wn,N.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var X=O,he=N,fe=he.tag;if((he.mode&1)===0&&(fe===0||fe===11||fe===15)){var de=he.alternate;de?(he.updateQueue=de.updateQueue,he.memoizedState=de.memoizedState,he.lanes=de.lanes):(he.updateQueue=null,he.memoizedState=null)}var Ce=qm(x);if(Ce!==null){Ce.flags&=-257,Gm(Ce,x,N,y,i),Ce.mode&1&&Hm(y,X,i),i=Ce,O=X;var Ae=i.updateQueue;if(Ae===null){var je=new Set;je.add(O),i.updateQueue=je}else Ae.add(O);break e}else{if((i&1)===0){Hm(y,X,i),Sh();break e}O=Error(t(426))}}else if(Nt&&N.mode&1){var zt=qm(x);if(zt!==null){(zt.flags&65536)===0&&(zt.flags|=256),Gm(zt,x,N,y,i),Vd(Qa(O,N));break e}}y=O=Qa(O,N),tn!==4&&(tn=2),tl===null?tl=[y]:tl.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var q=$m(y,O,i);gm(y,q);break e;case 1:N=O;var z=y.type,J=y.stateNode;if((y.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(ci===null||!ci.has(J)))){y.flags|=65536,i&=-i,y.lanes|=i;var ye=Wm(y,N,i);gm(y,ye);break e}}y=y.return}while(y!==null)}Sg(o)}catch(Ve){i=Ve,Kt===o&&o!==null&&(Kt=o=o.return);continue}break}while(!0)}function Eg(){var r=jc.current;return jc.current=Pc,r===null?Pc:r}function Sh(){(tn===0||tn===3||tn===2)&&(tn=4),un===null||(ea&268435455)===0&&(Dc&268435455)===0||hi(un,wn)}function Uc(r,i){var o=ut;ut|=2;var d=Eg();(un!==r||wn!==i)&&(Fs=null,na(r,i));do try{fx();break}catch(p){xg(r,p)}while(!0);if(Od(),ut=o,jc.current=d,Kt!==null)throw Error(t(261));return un=null,wn=0,tn}function fx(){for(;Kt!==null;)Tg(Kt)}function px(){for(;Kt!==null&&!xa();)Tg(Kt)}function Tg(r){var i=Pg(r.alternate,r,ur);r.memoizedProps=r.pendingProps,i===null?Sg(r):Kt=i,mh.current=null}function Sg(r){var i=r;do{var o=i.alternate;if(r=i.return,(i.flags&32768)===0){if(o=ax(o,i,ur),o!==null){Kt=o;return}}else{if(o=ox(o,i),o!==null){o.flags&=32767,Kt=o;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{tn=6,Kt=null;return}}if(i=i.sibling,i!==null){Kt=i;return}Kt=i=r}while(i!==null);tn===0&&(tn=5)}function ra(r,i,o){var d=Ze,p=xr.transition;try{xr.transition=null,Ze=1,mx(r,i,o,d)}finally{xr.transition=p,Ze=d}return null}function mx(r,i,o,d){do Za();while(ui!==null);if((ut&6)!==0)throw Error(t(327));o=r.finishedWork;var p=r.finishedLanes;if(o===null)return null;if(r.finishedWork=null,r.finishedLanes=0,o===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=o.lanes|o.childLanes;if(yt(r,y),r===un&&(Kt=un=null,wn=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Lc||(Lc=!0,Rg(S,function(){return Za(),null})),y=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||y){y=xr.transition,xr.transition=null;var x=Ze;Ze=1;var N=ut;ut|=4,mh.current=null,cx(r,o),pg(o,r),Vw(Sd),Zs=!!Td,Sd=Td=null,r.current=o,ux(o),Ar(),ut=N,Ze=x,xr.transition=y}else r.current=o;if(Lc&&(Lc=!1,ui=r,Oc=p),y=r.pendingLanes,y===0&&(ci=null),Xe(o.stateNode),Xn(r,gt()),i!==null)for(d=r.onRecoverableError,o=0;o<i.length;o++)p=i[o],d(p.value,{componentStack:p.stack,digest:p.digest});if(Vc)throw Vc=!1,r=vh,vh=null,r;return(Oc&1)!==0&&r.tag!==0&&Za(),y=r.pendingLanes,(y&1)!==0?r===_h?nl++:(nl=0,_h=r):nl=0,ii(),null}function Za(){if(ui!==null){var r=es(Oc),i=xr.transition,o=Ze;try{if(xr.transition=null,Ze=16>r?16:r,ui===null)var d=!1;else{if(r=ui,ui=null,Oc=0,(ut&6)!==0)throw Error(t(331));var p=ut;for(ut|=4,Re=r.current;Re!==null;){var y=Re,x=y.child;if((Re.flags&16)!==0){var N=y.deletions;if(N!==null){for(var O=0;O<N.length;O++){var X=N[O];for(Re=X;Re!==null;){var he=Re;switch(he.tag){case 0:case 11:case 15:Zo(8,he,y)}var fe=he.child;if(fe!==null)fe.return=he,Re=fe;else for(;Re!==null;){he=Re;var de=he.sibling,Ce=he.return;if(cg(he),he===X){Re=null;break}if(de!==null){de.return=Ce,Re=de;break}Re=Ce}}}var Ae=y.alternate;if(Ae!==null){var je=Ae.child;if(je!==null){Ae.child=null;do{var zt=je.sibling;je.sibling=null,je=zt}while(je!==null)}}Re=y}}if((y.subtreeFlags&2064)!==0&&x!==null)x.return=y,Re=x;else e:for(;Re!==null;){if(y=Re,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Zo(9,y,y.return)}var q=y.sibling;if(q!==null){q.return=y.return,Re=q;break e}Re=y.return}}var z=r.current;for(Re=z;Re!==null;){x=Re;var J=x.child;if((x.subtreeFlags&2064)!==0&&J!==null)J.return=x,Re=J;else e:for(x=z;Re!==null;){if(N=Re,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:kc(9,N)}}catch(Ve){Mt(N,N.return,Ve)}if(N===x){Re=null;break e}var ye=N.sibling;if(ye!==null){ye.return=N.return,Re=ye;break e}Re=N.return}}if(ut=p,ii(),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(ve,r)}catch{}d=!0}return d}finally{Ze=o,xr.transition=i}}return!1}function Ig(r,i,o){i=Qa(o,i),i=$m(r,i,1),r=oi(r,i,1),i=$n(),r!==null&&(Xr(r,1,i),Xn(r,i))}function Mt(r,i,o){if(r.tag===3)Ig(r,r,o);else for(;i!==null;){if(i.tag===3){Ig(i,r,o);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ci===null||!ci.has(d))){r=Qa(o,r),r=Wm(i,r,1),i=oi(i,r,1),r=$n(),i!==null&&(Xr(i,1,r),Xn(i,r));break}}i=i.return}}function gx(r,i,o){var d=r.pingCache;d!==null&&d.delete(i),i=$n(),r.pingedLanes|=r.suspendedLanes&o,un===r&&(wn&o)===o&&(tn===4||tn===3&&(wn&130023424)===wn&&500>gt()-yh?na(r,0):gh|=o),Xn(r,i)}function Cg(r,i){i===0&&((r.mode&1)===0?i=1:(i=Et,Et<<=1,(Et&130023424)===0&&(Et=4194304)));var o=$n();r=Ls(r,i),r!==null&&(Xr(r,i,o),Xn(r,o))}function yx(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),Cg(r,o)}function vx(r,i){var o=0;switch(r.tag){case 13:var d=r.stateNode,p=r.memoizedState;p!==null&&(o=p.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),Cg(r,o)}var Pg;Pg=function(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps||Kn.current)Yn=!0;else{if((r.lanes&o)===0&&(i.flags&128)===0)return Yn=!1,ix(r,i,o);Yn=(r.flags&131072)!==0}else Yn=!1,Nt&&(i.flags&1048576)!==0&&am(i,mc,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;Ac(r,i),r=i.pendingProps;var p=za(i,An.current);Ga(i,o),p=Kd(null,i,d,r,p,o);var y=Qd();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Qn(d)?(y=!0,hc(i)):y=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,zd(i),p.updater=Rc,i.stateNode=p,p._reactInternals=i,th(i,d,r,o),i=ih(null,i,d,!0,y,o)):(i.tag=0,Nt&&y&&Nd(i),Bn(null,i,p,o),i=i.child),i;case 16:d=i.elementType;e:{switch(Ac(r,i),r=i.pendingProps,p=d._init,d=p(d._payload),i.type=d,p=i.tag=wx(d),r=Mr(d,r),p){case 0:i=sh(null,i,d,r,o);break e;case 1:i=Zm(null,i,d,r,o);break e;case 11:i=Km(null,i,d,r,o);break e;case 14:i=Qm(null,i,d,Mr(d.type,r),o);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Mr(d,p),sh(r,i,d,p,o);case 1:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Mr(d,p),Zm(r,i,d,p,o);case 3:e:{if(eg(i),r===null)throw Error(t(387));d=i.pendingProps,y=i.memoizedState,p=y.element,mm(r,i),xc(i,d,null,o);var x=i.memoizedState;if(d=x.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){p=Qa(Error(t(423)),i),i=tg(r,i,d,o,p);break e}else if(d!==p){p=Qa(Error(t(424)),i),i=tg(r,i,d,o,p);break e}else for(cr=ni(i.stateNode.containerInfo.firstChild),lr=i,Nt=!0,Or=null,o=fm(i,null,d,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Wa(),d===p){i=Ms(r,i,o);break e}Bn(r,i,d,o)}i=i.child}return i;case 5:return vm(i),r===null&&Dd(i),d=i.type,p=i.pendingProps,y=r!==null?r.memoizedProps:null,x=p.children,Id(d,p)?x=null:y!==null&&Id(d,y)&&(i.flags|=32),Xm(r,i),Bn(r,i,x,o),i.child;case 6:return r===null&&Dd(i),null;case 13:return ng(r,i,o);case 4:return Bd(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=Ha(i,null,d,o):Bn(r,i,d,o),i.child;case 11:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Mr(d,p),Km(r,i,d,p,o);case 7:return Bn(r,i,i.pendingProps,o),i.child;case 8:return Bn(r,i,i.pendingProps.children,o),i.child;case 12:return Bn(r,i,i.pendingProps.children,o),i.child;case 10:e:{if(d=i.type._context,p=i.pendingProps,y=i.memoizedProps,x=p.value,wt(vc,d._currentValue),d._currentValue=x,y!==null)if(Lr(y.value,x)){if(y.children===p.children&&!Kn.current){i=Ms(r,i,o);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var N=y.dependencies;if(N!==null){x=y.child;for(var O=N.firstContext;O!==null;){if(O.context===d){if(y.tag===1){O=Os(-1,o&-o),O.tag=2;var X=y.updateQueue;if(X!==null){X=X.shared;var he=X.pending;he===null?O.next=O:(O.next=he.next,he.next=O),X.pending=O}}y.lanes|=o,O=y.alternate,O!==null&&(O.lanes|=o),Fd(y.return,o,i),N.lanes|=o;break}O=O.next}}else if(y.tag===10)x=y.type===i.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=o,N=x.alternate,N!==null&&(N.lanes|=o),Fd(x,o,i),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===i){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}Bn(r,i,p.children,o),i=i.child}return i;case 9:return p=i.type,d=i.pendingProps.children,Ga(i,o),p=_r(p),d=d(p),i.flags|=1,Bn(r,i,d,o),i.child;case 14:return d=i.type,p=Mr(d,i.pendingProps),p=Mr(d.type,p),Qm(r,i,d,p,o);case 15:return Ym(r,i,i.type,i.pendingProps,o);case 17:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Mr(d,p),Ac(r,i),i.tag=1,Qn(d)?(r=!0,hc(i)):r=!1,Ga(i,o),zm(i,d,p),th(i,d,p,o),ih(null,i,d,!0,r,o);case 19:return sg(r,i,o);case 22:return Jm(r,i,o)}throw Error(t(156,i.tag))};function Rg(r,i){return Cs(r,i)}function _x(r,i,o,d){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(r,i,o,d){return new _x(r,i,o,d)}function Ih(r){return r=r.prototype,!(!r||!r.isReactComponent)}function wx(r){if(typeof r=="function")return Ih(r)?1:0;if(r!=null){if(r=r.$$typeof,r===R)return 11;if(r===Ke)return 14}return 2}function fi(r,i){var o=r.alternate;return o===null?(o=Er(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&14680064,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o}function zc(r,i,o,d,p,y){var x=2;if(d=r,typeof r=="function")Ih(r)&&(x=1);else if(typeof r=="string")x=5;else e:switch(r){case D:return sa(o.children,p,y,i);case P:x=8,p|=8;break;case k:return r=Er(12,o,i,p|2),r.elementType=k,r.lanes=y,r;case b:return r=Er(13,o,i,p),r.elementType=b,r.lanes=y,r;case ge:return r=Er(19,o,i,p),r.elementType=ge,r.lanes=y,r;case G:return Bc(o,p,y,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case A:x=10;break e;case F:x=9;break e;case R:x=11;break e;case Ke:x=14;break e;case Qe:x=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Er(x,o,i,p),i.elementType=r,i.type=d,i.lanes=y,i}function sa(r,i,o,d){return r=Er(7,r,d,i),r.lanes=o,r}function Bc(r,i,o,d){return r=Er(22,r,d,i),r.elementType=G,r.lanes=o,r.stateNode={isHidden:!1},r}function Ch(r,i,o){return r=Er(6,r,null,i),r.lanes=o,r}function Ph(r,i,o){return i=Er(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function xx(r,i,o,d,p){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pr(0),this.expirationTimes=pr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pr(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Rh(r,i,o,d,p,y,x,N,O){return r=new xx(r,i,o,N,O),i===1?(i=1,y===!0&&(i|=8)):i=0,y=Er(3,null,null,i),r.current=y,y.stateNode=r,y.memoizedState={element:d,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},zd(y),r}function Ex(r,i,o){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pe,key:d==null?null:""+d,children:r,containerInfo:i,implementation:o}}function bg(r){if(!r)return si;r=r._reactInternals;e:{if(ir(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Qn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var o=r.type;if(Qn(o))return rm(r,o,i)}return i}function Ag(r,i,o,d,p,y,x,N,O){return r=Rh(o,d,!0,r,p,y,x,N,O),r.context=bg(null),o=r.current,d=$n(),p=di(o),y=Os(d,p),y.callback=i??null,oi(o,y,p),r.current.lanes=p,Xr(r,p,d),Xn(r,d),r}function $c(r,i,o,d){var p=i.current,y=$n(),x=di(p);return o=bg(o),i.context===null?i.context=o:i.pendingContext=o,i=Os(y,x),i.payload={element:r},d=d===void 0?null:d,d!==null&&(i.callback=d),r=oi(p,i,x),r!==null&&(zr(r,p,x,y),wc(r,p,x)),x}function Wc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ng(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function bh(r,i){Ng(r,i),(r=r.alternate)&&Ng(r,i)}function Tx(){return null}var kg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Ah(r){this._internalRoot=r}Hc.prototype.render=Ah.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));$c(r,i,null,null)},Hc.prototype.unmount=Ah.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;ta(function(){$c(null,r,null,null)}),i[ks]=null}};function Hc(r){this._internalRoot=r}Hc.prototype.unstable_scheduleHydration=function(r){if(r){var i=Hl();r={blockedOn:null,target:r,priority:i};for(var o=0;o<ns.length&&i!==0&&i<ns[o].priority;o++);ns.splice(o,0,r),o===0&&Kl(r)}};function Nh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function qc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function jg(){}function Sx(r,i,o,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var X=Wc(x);y.call(X)}}var x=Ag(i,d,r,0,null,!1,!1,"",jg);return r._reactRootContainer=x,r[ks]=x.current,Uo(r.nodeType===8?r.parentNode:r),ta(),x}for(;p=r.lastChild;)r.removeChild(p);if(typeof d=="function"){var N=d;d=function(){var X=Wc(O);N.call(X)}}var O=Rh(r,0,!1,null,null,!1,!1,"",jg);return r._reactRootContainer=O,r[ks]=O.current,Uo(r.nodeType===8?r.parentNode:r),ta(function(){$c(i,O,o,d)}),O}function Gc(r,i,o,d,p){var y=o._reactRootContainer;if(y){var x=y;if(typeof p=="function"){var N=p;p=function(){var O=Wc(x);N.call(O)}}$c(i,x,r,p)}else x=Sx(o,i,r,p,d);return Wc(x)}$l=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var o=Xt(i.pendingLanes);o!==0&&(Zr(i,o|1),Xn(i,gt()),(ut&6)===0&&(Xa=gt()+500,ii()))}break;case 13:ta(function(){var d=Ls(r,1);if(d!==null){var p=$n();zr(d,r,1,p)}}),bh(r,1)}},Ta=function(r){if(r.tag===13){var i=Ls(r,134217728);if(i!==null){var o=$n();zr(i,r,134217728,o)}bh(r,134217728)}},Wl=function(r){if(r.tag===13){var i=di(r),o=Ls(r,i);if(o!==null){var d=$n();zr(o,r,i,d)}bh(r,i)}},Hl=function(){return Ze},ql=function(r,i){var o=Ze;try{return Ze=r,i()}finally{Ze=o}},sn=function(r,i,o){switch(i){case"input":if(Ht(r,o),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<o.length;i++){var d=o[i];if(d!==r&&d.form===r.form){var p=uc(d);if(!p)throw Error(t(90));ht(d),Ht(d,p)}}}break;case"textarea":qr(r,o);break;case"select":i=o.value,i!=null&&Cn(r,!!o.multiple,i,!1)}},be=Eh,Le=ta;var Ix={usingClientEntryPoint:!1,Events:[$o,Fa,uc,B,Q,Eh]},rl={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cx={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:me.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Hn(r),r===null?null:r.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||Tx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{ve=Kc.inject(Cx),Ne=Kc}catch{}}return Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ix,Zn.createPortal=function(r,i){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nh(i))throw Error(t(200));return Ex(r,i,null,o)},Zn.createRoot=function(r,i){if(!Nh(r))throw Error(t(299));var o=!1,d="",p=kg;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=Rh(r,1,!1,null,null,o,!1,d,p),r[ks]=i.current,Uo(r.nodeType===8?r.parentNode:r),new Ah(i)},Zn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Hn(i),r=r===null?null:r.stateNode,r},Zn.flushSync=function(r){return ta(r)},Zn.hydrate=function(r,i,o){if(!qc(i))throw Error(t(200));return Gc(null,r,i,!0,o)},Zn.hydrateRoot=function(r,i,o){if(!Nh(r))throw Error(t(405));var d=o!=null&&o.hydratedSources||null,p=!1,y="",x=kg;if(o!=null&&(o.unstable_strictMode===!0&&(p=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),i=Ag(i,null,r,1,o??null,p,!1,y,x),r[ks]=i.current,Uo(r),d)for(r=0;r<d.length;r++)o=d[r],p=o._getVersion,p=p(o._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[o,p]:i.mutableSourceEagerHydrationData.push(o,p);return new Hc(i)},Zn.render=function(r,i,o){if(!qc(i))throw Error(t(200));return Gc(null,r,i,!1,o)},Zn.unmountComponentAtNode=function(r){if(!qc(r))throw Error(t(40));return r._reactRootContainer?(ta(function(){Gc(null,null,r,!1,function(){r._reactRootContainer=null,r[ks]=null})}),!0):!1},Zn.unstable_batchedUpdates=Eh,Zn.unstable_renderSubtreeIntoContainer=function(r,i,o,d){if(!qc(o))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Gc(r,i,o,!1,d)},Zn.version="18.3.1-next-f1338f8080-20240426",Zn}var zg;function Ov(){if(zg)return Dh.exports;zg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Dh.exports=Vx(),Dh.exports}var Bg;function Lx(){if(Bg)return Qc;Bg=1;var n=Ov();return Qc.createRoot=n.createRoot,Qc.hydrateRoot=n.hydrateRoot,Qc}var Ox=Lx();const Mx=Vv(Ox);Ov();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},vl.apply(this,arguments)}var wi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(wi||(wi={}));const $g="popstate";function Fx(n){n===void 0&&(n={});function e(s,a){let{pathname:l,search:h,hash:f}=s.location;return Xh("",{pathname:l,search:h,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:yu(a)}return zx(e,t,null,n)}function $t(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Af(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ux(){return Math.random().toString(36).substr(2,8)}function Wg(n,e){return{usr:n.state,key:n.key,idx:e}}function Xh(n,e,t,s){return t===void 0&&(t=null),vl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?vo(e):e,{state:t,key:e&&e.key||s||Ux()})}function yu(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function vo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function zx(n,e,t,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,h=a.history,f=wi.Pop,m=null,v=w();v==null&&(v=0,h.replaceState(vl({},h.state,{idx:v}),""));function w(){return(h.state||{idx:null}).idx}function E(){f=wi.Pop;let $=w(),re=$==null?null:$-v;v=$,m&&m({action:f,location:Z.location,delta:re})}function C($,re){f=wi.Push;let ne=Xh(Z.location,$,re);v=w()+1;let oe=Wg(ne,v),me=Z.createHref(ne);try{h.pushState(oe,"",me)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;a.location.assign(me)}l&&m&&m({action:f,location:Z.location,delta:1})}function W($,re){f=wi.Replace;let ne=Xh(Z.location,$,re);v=w();let oe=Wg(ne,v),me=Z.createHref(ne);h.replaceState(oe,"",me),l&&m&&m({action:f,location:Z.location,delta:0})}function K($){let re=a.location.origin!=="null"?a.location.origin:a.location.href,ne=typeof $=="string"?$:yu($);return ne=ne.replace(/ $/,"%20"),$t(re,"No window.location.(origin|href) available to create URL for href: "+ne),new URL(ne,re)}let Z={get action(){return f},get location(){return n(a,h)},listen($){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener($g,E),m=$,()=>{a.removeEventListener($g,E),m=null}},createHref($){return e(a,$)},createURL:K,encodeLocation($){let re=K($);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:C,replace:W,go($){return h.go($)}};return Z}var Hg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Hg||(Hg={}));function Bx(n,e,t){return t===void 0&&(t="/"),$x(n,e,t)}function $x(n,e,t,s){let a=typeof e=="string"?vo(e):e,l=Nf(a.pathname||"/",t);if(l==null)return null;let h=Mv(n);Wx(h);let f=null;for(let m=0;f==null&&m<h.length;++m){let v=nE(l);f=Zx(h[m],v)}return f}function Mv(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let a=(l,h,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&($t(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let v=Ei([s,m.relativePath]),w=t.concat(m);l.children&&l.children.length>0&&($t(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Mv(l.children,e,w,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:Jx(v,l.index),routesMeta:w})};return n.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,h);else for(let m of Fv(l.path))a(l,h,m)}),e}function Fv(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let h=Fv(s.join("/")),f=[];return f.push(...h.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...h),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function Wx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Xx(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const Hx=/^:[\w-]+$/,qx=3,Gx=2,Kx=1,Qx=10,Yx=-2,qg=n=>n==="*";function Jx(n,e){let t=n.split("/"),s=t.length;return t.some(qg)&&(s+=Yx),e&&(s+=Gx),t.filter(a=>!qg(a)).reduce((a,l)=>a+(Hx.test(l)?qx:l===""?Kx:Qx),s)}function Xx(n,e){return n.length===e.length&&n.slice(0,-1).every((s,a)=>s===e[a])?n[n.length-1]-e[e.length-1]:0}function Zx(n,e,t){let{routesMeta:s}=n,a={},l="/",h=[];for(let f=0;f<s.length;++f){let m=s[f],v=f===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",E=eE({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},w),C=m.route;if(!E)return null;Object.assign(a,E.params),h.push({params:a,pathname:Ei([l,E.pathname]),pathnameBase:oE(Ei([l,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(l=Ei([l,E.pathnameBase]))}return h}function eE(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=tE(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:s.reduce((v,w,E)=>{let{paramName:C,isOptional:W}=w;if(C==="*"){let Z=f[E]||"";h=l.slice(0,l.length-Z.length).replace(/(.)\/+$/,"$1")}const K=f[E];return W&&!K?v[C]=void 0:v[C]=(K||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:n}}function tE(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Af(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,m)=>(s.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function nE(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Af(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Nf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const rE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sE=n=>rE.test(n);function iE(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:a=""}=typeof n=="string"?vo(n):n,l;if(t)if(sE(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Af(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Gg(t.substring(1),"/"):l=Gg(t,e)}else l=e;return{pathname:l,search:lE(s),hash:cE(a)}}function Gg(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Oh(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function kf(n,e){let t=aE(n);return e?t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function jf(n,e,t,s){s===void 0&&(s=!1);let a;typeof n=="string"?a=vo(n):(a=vl({},n),$t(!a.pathname||!a.pathname.includes("?"),Oh("?","pathname","search",a)),$t(!a.pathname||!a.pathname.includes("#"),Oh("#","pathname","hash",a)),$t(!a.search||!a.search.includes("#"),Oh("#","search","hash",a)));let l=n===""||a.pathname==="",h=l?"/":a.pathname,f;if(h==null)f=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let C=h.split("/");for(;C[0]==="..";)C.shift(),E-=1;a.pathname=C.join("/")}f=E>=0?e[E]:"/"}let m=iE(a,f),v=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(v||w)&&(m.pathname+="/"),m}const Ei=n=>n.join("/").replace(/\/\/+/g,"/"),oE=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),lE=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,cE=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function uE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Uv=["post","put","patch","delete"];new Set(Uv);const dE=["get",...Uv];new Set(dE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _l(){return _l=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},_l.apply(this,arguments)}const Df=M.createContext(null),hE=M.createContext(null),Li=M.createContext(null),Mu=M.createContext(null),Oi=M.createContext({outlet:null,matches:[],isDataRoute:!1}),zv=M.createContext(null);function fE(n,e){let{relative:t}=e===void 0?{}:e;_o()||$t(!1);let{basename:s,navigator:a}=M.useContext(Li),{hash:l,pathname:h,search:f}=$v(n,{relative:t}),m=h;return s!=="/"&&(m=h==="/"?s:Ei([s,h])),a.createHref({pathname:m,search:f,hash:l})}function _o(){return M.useContext(Mu)!=null}function bl(){return _o()||$t(!1),M.useContext(Mu).location}function Bv(n){M.useContext(Li).static||M.useLayoutEffect(n)}function Fu(){let{isDataRoute:n}=M.useContext(Oi);return n?CE():pE()}function pE(){_o()||$t(!1);let n=M.useContext(Df),{basename:e,future:t,navigator:s}=M.useContext(Li),{matches:a}=M.useContext(Oi),{pathname:l}=bl(),h=JSON.stringify(kf(a,t.v7_relativeSplatPath)),f=M.useRef(!1);return Bv(()=>{f.current=!0}),M.useCallback(function(v,w){if(w===void 0&&(w={}),!f.current)return;if(typeof v=="number"){s.go(v);return}let E=jf(v,JSON.parse(h),l,w.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ei([e,E.pathname])),(w.replace?s.replace:s.push)(E,w.state,w)},[e,s,h,l,n])}function $v(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=M.useContext(Li),{matches:a}=M.useContext(Oi),{pathname:l}=bl(),h=JSON.stringify(kf(a,s.v7_relativeSplatPath));return M.useMemo(()=>jf(n,JSON.parse(h),l,t==="path"),[n,h,l,t])}function mE(n,e){return gE(n,e)}function gE(n,e,t,s){_o()||$t(!1);let{navigator:a}=M.useContext(Li),{matches:l}=M.useContext(Oi),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let v=bl(),w;if(e){var E;let $=typeof e=="string"?vo(e):e;m==="/"||(E=$.pathname)!=null&&E.startsWith(m)||$t(!1),w=$}else w=v;let C=w.pathname||"/",W=C;if(m!=="/"){let $=m.replace(/^\//,"").split("/");W="/"+C.replace(/^\//,"").split("/").slice($.length).join("/")}let K=Bx(n,{pathname:W}),Z=xE(K&&K.map($=>Object.assign({},$,{params:Object.assign({},f,$.params),pathname:Ei([m,a.encodeLocation?a.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?m:Ei([m,a.encodeLocation?a.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,t,s);return e&&Z?M.createElement(Mu.Provider,{value:{location:_l({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:wi.Pop}},Z):Z}function yE(){let n=IE(),e=uE(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:a},t):null,null)}const vE=M.createElement(yE,null);class _E extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?M.createElement(Oi.Provider,{value:this.props.routeContext},M.createElement(zv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wE(n){let{routeContext:e,match:t,children:s}=n,a=M.useContext(Df);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(Oi.Provider,{value:e},s)}function xE(n,e,t,s){var a;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let h=n,f=(a=t)==null?void 0:a.errors;if(f!=null){let w=h.findIndex(E=>E.route.id&&(f==null?void 0:f[E.route.id])!==void 0);w>=0||$t(!1),h=h.slice(0,Math.min(h.length,w+1))}let m=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<h.length;w++){let E=h[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(v=w),E.route.id){let{loaderData:C,errors:W}=t,K=E.route.loader&&C[E.route.id]===void 0&&(!W||W[E.route.id]===void 0);if(E.route.lazy||K){m=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((w,E,C)=>{let W,K=!1,Z=null,$=null;t&&(W=f&&E.route.id?f[E.route.id]:void 0,Z=E.route.errorElement||vE,m&&(v<0&&C===0?(PE("route-fallback"),K=!0,$=null):v===C&&(K=!0,$=E.route.hydrateFallbackElement||null)));let re=e.concat(h.slice(0,C+1)),ne=()=>{let oe;return W?oe=Z:K?oe=$:E.route.Component?oe=M.createElement(E.route.Component,null):E.route.element?oe=E.route.element:oe=w,M.createElement(wE,{match:E,routeContext:{outlet:w,matches:re,isDataRoute:t!=null},children:oe})};return t&&(E.route.ErrorBoundary||E.route.errorElement||C===0)?M.createElement(_E,{location:t.location,revalidation:t.revalidation,component:Z,error:W,children:ne(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):ne()},null)}var Wv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Wv||{}),Hv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Hv||{});function EE(n){let e=M.useContext(Df);return e||$t(!1),e}function TE(n){let e=M.useContext(hE);return e||$t(!1),e}function SE(n){let e=M.useContext(Oi);return e||$t(!1),e}function qv(n){let e=SE(),t=e.matches[e.matches.length-1];return t.route.id||$t(!1),t.route.id}function IE(){var n;let e=M.useContext(zv),t=TE(),s=qv();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function CE(){let{router:n}=EE(Wv.UseNavigateStable),e=qv(Hv.UseNavigateStable),t=M.useRef(!1);return Bv(()=>{t.current=!0}),M.useCallback(function(a,l){l===void 0&&(l={}),t.current&&(typeof a=="number"?n.navigate(a):n.navigate(a,_l({fromRouteId:e},l)))},[n,e])}const Kg={};function PE(n,e,t){Kg[n]||(Kg[n]=!0)}function RE(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function bE(n){let{to:e,replace:t,state:s,relative:a}=n;_o()||$t(!1);let{future:l,static:h}=M.useContext(Li),{matches:f}=M.useContext(Oi),{pathname:m}=bl(),v=Fu(),w=jf(e,kf(f,l.v7_relativeSplatPath),m,a==="path"),E=JSON.stringify(w);return M.useEffect(()=>v(JSON.parse(E),{replace:t,state:s,relative:a}),[v,E,a,t,s]),null}function Br(n){$t(!1)}function AE(n){let{basename:e="/",children:t=null,location:s,navigationType:a=wi.Pop,navigator:l,static:h=!1,future:f}=n;_o()&&$t(!1);let m=e.replace(/^\/*/,"/"),v=M.useMemo(()=>({basename:m,navigator:l,static:h,future:_l({v7_relativeSplatPath:!1},f)}),[m,f,l,h]);typeof s=="string"&&(s=vo(s));let{pathname:w="/",search:E="",hash:C="",state:W=null,key:K="default"}=s,Z=M.useMemo(()=>{let $=Nf(w,m);return $==null?null:{location:{pathname:$,search:E,hash:C,state:W,key:K},navigationType:a}},[m,w,E,C,W,K,a]);return Z==null?null:M.createElement(Li.Provider,{value:v},M.createElement(Mu.Provider,{children:t,value:Z}))}function NE(n){let{children:e,location:t}=n;return mE(Zh(e),t)}new Promise(()=>{});function Zh(n,e){e===void 0&&(e=[]);let t=[];return M.Children.forEach(n,(s,a)=>{if(!M.isValidElement(s))return;let l=[...e,a];if(s.type===M.Fragment){t.push.apply(t,Zh(s.props.children,l));return}s.type!==Br&&$t(!1),!s.props.index||!s.props.children||$t(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Zh(s.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ef(){return ef=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ef.apply(this,arguments)}function kE(n,e){if(n==null)return{};var t={},s=Object.keys(n),a,l;for(l=0;l<s.length;l++)a=s[l],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}function jE(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function DE(n,e){return n.button===0&&(!e||e==="_self")&&!jE(n)}const VE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LE="6";try{window.__reactRouterVersion=LE}catch{}const OE="startTransition",Qg=kx[OE];function ME(n){let{basename:e,children:t,future:s,window:a}=n,l=M.useRef();l.current==null&&(l.current=Fx({window:a,v5Compat:!0}));let h=l.current,[f,m]=M.useState({action:h.action,location:h.location}),{v7_startTransition:v}=s||{},w=M.useCallback(E=>{v&&Qg?Qg(()=>m(E)):m(E)},[m,v]);return M.useLayoutEffect(()=>h.listen(w),[h,w]),M.useEffect(()=>RE(s),[s]),M.createElement(AE,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const FE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ia=M.forwardRef(function(e,t){let{onClick:s,relative:a,reloadDocument:l,replace:h,state:f,target:m,to:v,preventScrollReset:w,viewTransition:E}=e,C=kE(e,VE),{basename:W}=M.useContext(Li),K,Z=!1;if(typeof v=="string"&&UE.test(v)&&(K=v,FE))try{let oe=new URL(window.location.href),me=v.startsWith("//")?new URL(oe.protocol+v):new URL(v),Te=Nf(me.pathname,W);me.origin===oe.origin&&Te!=null?v=Te+me.search+me.hash:Z=!0}catch{}let $=fE(v,{relative:a}),re=zE(v,{replace:h,state:f,target:m,preventScrollReset:w,relative:a,viewTransition:E});function ne(oe){s&&s(oe),oe.defaultPrevented||re(oe)}return M.createElement("a",ef({},C,{href:K||$,onClick:Z||l?s:ne,ref:t,target:m}))});var Yg;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Yg||(Yg={}));var Jg;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Jg||(Jg={}));function zE(n,e){let{target:t,replace:s,state:a,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,m=Fu(),v=bl(),w=$v(n,{relative:h});return M.useCallback(E=>{if(DE(E,t)){E.preventDefault();let C=s!==void 0?s:yu(v)===yu(w);m(n,{replace:C,state:a,preventScrollReset:l,relative:h,viewTransition:f})}},[v,m,w,s,a,t,n,l,h,f])}const BE=()=>{};var Xg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},$E=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],h=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],h=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Kv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],h=a+1<n.length,f=h?n[a+1]:0,m=a+2<n.length,v=m?n[a+2]:0,w=l>>2,E=(l&3)<<4|f>>4;let C=(f&15)<<2|v>>6,W=v&63;m||(W=64,h||(C=64)),s.push(t[w],t[E],t[C],t[W])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Gv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):$E(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const v=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||v==null||E==null)throw new WE;const C=l<<2|f>>4;if(s.push(C),v!==64){const W=f<<4&240|v>>2;if(s.push(W),E!==64){const K=v<<6&192|E;s.push(K)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class WE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HE=function(n){const e=Gv(n);return Kv.encodeByteArray(e,!0)},vu=function(n){return HE(n).replace(/\./g,"")},Qv=function(n){try{return Kv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=()=>qE().__FIREBASE_DEFAULTS__,KE=()=>{if(typeof process>"u"||typeof Xg>"u")return;const n=Xg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QE=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Qv(n[1]);return e&&JSON.parse(e)},Uu=()=>{try{return BE()||GE()||KE()||QE()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Yv=n=>{var e,t;return(t=(e=Uu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},YE=n=>{const e=Yv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Jv=()=>{var n;return(n=Uu())===null||n===void 0?void 0:n.config},Xv=n=>{var e;return(e=Uu())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[vu(JSON.stringify(t)),vu(JSON.stringify(h)),""].join(".")}const hl={};function ZE(){const n={prod:[],emulator:[]};for(const e of Object.keys(hl))hl[e]?n.emulator.push(e):n.prod.push(e);return n}function eT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Zg=!1;function e_(n,e){if(typeof window>"u"||typeof document>"u"||!wo(window.location.host)||hl[n]===e||hl[n]||Zg)return;hl[n]=e;function t(C){return`__firebase__banner__${C}`}const s="__firebase__banner",l=ZE().prod.length>0;function h(){const C=document.getElementById(s);C&&C.remove()}function f(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function m(C,W){C.setAttribute("width","24"),C.setAttribute("id",W),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function v(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Zg=!0,h()},C}function w(C,W){C.setAttribute("id",W),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=eT(s),W=t("text"),K=document.getElementById(W)||document.createElement("span"),Z=t("learnmore"),$=document.getElementById(Z)||document.createElement("a"),re=t("preprendIcon"),ne=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const oe=C.element;f(oe),w($,Z);const me=v();m(ne,re),oe.append(ne,K,$,me),document.body.appendChild(oe)}l?(K.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",W)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function nT(){var n;const e=(n=Uu())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aT(){const n=On();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function oT(){return!nT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lT(){try{return typeof indexedDB=="object"}catch{return!1}}function cT(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="FirebaseError";class Ys extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=uT,Object.setPrototypeOf(this,Ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],h=l?dT(l,s):"Error",f=`${this.serviceName}: ${h} (${a}).`;return new Ys(a,f,s)}}function dT(n,e){return n.replace(hT,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const hT=/\{\$([^}]+)}/g;function fT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ua(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],h=e[a];if(ey(l)&&ey(h)){if(!ua(l,h))return!1}else if(l!==h)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function ey(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function il(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function al(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function pT(n,e){const t=new mT(n,e);return t.subscribe.bind(t)}class mT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");gT(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Mh),a.error===void 0&&(a.error=Mh),a.complete===void 0&&(a.complete=Mh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Mh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(n){return n&&n._delegate?n._delegate:n}class da{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new JE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_T(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(a,l);const h=this.instances.get(a);return h&&e(h,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:vT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vT(n){return n===aa?void 0:n}function _T(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(st||(st={}));const xT={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},ET=st.INFO,TT={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},ST=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=TT[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vf{constructor(e){this.name=e,this._logLevel=ET,this._logHandler=ST,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const IT=(n,e)=>e.some(t=>n instanceof t);let ty,ny;function CT(){return ty||(ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PT(){return ny||(ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t_=new WeakMap,tf=new WeakMap,n_=new WeakMap,Fh=new WeakMap,Lf=new WeakMap;function RT(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(Ti(n.result)),a()},h=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&t_.set(t,n)}).catch(()=>{}),Lf.set(e,n),e}function bT(n){if(tf.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),a()},h=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});tf.set(n,e)}let nf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return tf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||n_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ti(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AT(n){nf=n(nf)}function NT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Uh(this),e,...t);return n_.set(s,e.sort?e.sort():[e]),Ti(s)}:PT().includes(n)?function(...e){return n.apply(Uh(this),e),Ti(t_.get(this))}:function(...e){return Ti(n.apply(Uh(this),e))}}function kT(n){return typeof n=="function"?NT(n):(n instanceof IDBTransaction&&bT(n),IT(n,CT())?new Proxy(n,nf):n)}function Ti(n){if(n instanceof IDBRequest)return RT(n);if(Fh.has(n))return Fh.get(n);const e=kT(n);return e!==n&&(Fh.set(n,e),Lf.set(e,n)),e}const Uh=n=>Lf.get(n);function jT(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const h=indexedDB.open(n,e),f=Ti(h);return s&&h.addEventListener("upgradeneeded",m=>{s(Ti(h.result),m.oldVersion,m.newVersion,Ti(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const DT=["get","getKey","getAll","getAllKeys","count"],VT=["put","add","delete","clear"],zh=new Map;function ry(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zh.get(e))return zh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=VT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||DT.includes(t)))return;const l=async function(h,...f){const m=this.transaction(h,a?"readwrite":"readonly");let v=m.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),a&&m.done]))[0]};return zh.set(e,l),l}AT(n=>({...n,get:(e,t,s)=>ry(e,t)||n.get(e,t,s),has:(e,t)=>!!ry(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function OT(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rf="@firebase/app",sy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new Vf("@firebase/app"),MT="@firebase/app-compat",FT="@firebase/analytics-compat",UT="@firebase/analytics",zT="@firebase/app-check-compat",BT="@firebase/app-check",$T="@firebase/auth",WT="@firebase/auth-compat",HT="@firebase/database",qT="@firebase/data-connect",GT="@firebase/database-compat",KT="@firebase/functions",QT="@firebase/functions-compat",YT="@firebase/installations",JT="@firebase/installations-compat",XT="@firebase/messaging",ZT="@firebase/messaging-compat",eS="@firebase/performance",tS="@firebase/performance-compat",nS="@firebase/remote-config",rS="@firebase/remote-config-compat",sS="@firebase/storage",iS="@firebase/storage-compat",aS="@firebase/firestore",oS="@firebase/ai",lS="@firebase/firestore-compat",cS="firebase",uS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",dS={[rf]:"fire-core",[MT]:"fire-core-compat",[UT]:"fire-analytics",[FT]:"fire-analytics-compat",[BT]:"fire-app-check",[zT]:"fire-app-check-compat",[$T]:"fire-auth",[WT]:"fire-auth-compat",[HT]:"fire-rtdb",[qT]:"fire-data-connect",[GT]:"fire-rtdb-compat",[KT]:"fire-fn",[QT]:"fire-fn-compat",[YT]:"fire-iid",[JT]:"fire-iid-compat",[XT]:"fire-fcm",[ZT]:"fire-fcm-compat",[eS]:"fire-perf",[tS]:"fire-perf-compat",[nS]:"fire-rc",[rS]:"fire-rc-compat",[sS]:"fire-gcs",[iS]:"fire-gcs-compat",[aS]:"fire-fst",[lS]:"fire-fst-compat",[oS]:"fire-vertex","fire-js":"fire-js",[cS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Map,hS=new Map,af=new Map;function iy(n,e){try{n.container.addComponent(e)}catch(t){qs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ho(n){const e=n.name;if(af.has(e))return qs.debug(`There were multiple attempts to register component ${e}.`),!1;af.set(e,n);for(const t of _u.values())iy(t,n);for(const t of hS.values())iy(t,n);return!0}function Of(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Si=new Al("app","Firebase",fS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=uS;function r_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:sf,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw Si.create("bad-app-name",{appName:String(a)});if(t||(t=Jv()),!t)throw Si.create("no-options");const l=_u.get(a);if(l){if(ua(t,l.options)&&ua(s,l.config))return l;throw Si.create("duplicate-app",{appName:a})}const h=new wT(a);for(const m of af.values())h.addComponent(m);const f=new pS(t,s,h);return _u.set(a,f),f}function s_(n=sf){const e=_u.get(n);if(!e&&n===sf&&Jv())return r_();if(!e)throw Si.create("no-app",{appName:n});return e}function Ii(n,e,t){var s;let a=(s=dS[n])!==null&&s!==void 0?s:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qs.warn(f.join(" "));return}ho(new da(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="firebase-heartbeat-database",gS=1,wl="firebase-heartbeat-store";let Bh=null;function i_(){return Bh||(Bh=jT(mS,gS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Si.create("idb-open",{originalErrorMessage:n.message})})),Bh}async function yS(n){try{const t=(await i_()).transaction(wl),s=await t.objectStore(wl).get(a_(n));return await t.done,s}catch(e){if(e instanceof Ys)qs.warn(e.message);else{const t=Si.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qs.warn(t.message)}}}async function ay(n,e){try{const s=(await i_()).transaction(wl,"readwrite");await s.objectStore(wl).put(e,a_(n)),await s.done}catch(t){if(t instanceof Ys)qs.warn(t.message);else{const s=Si.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qs.warn(s.message)}}}function a_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=1024,_S=30;class wS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ES(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=oy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>_S){const h=TS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){qs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=oy(),{heartbeatsToSend:s,unsentEntries:a}=xS(this._heartbeatsCache.heartbeats),l=vu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return qs.warn(t),""}}}function oy(){return new Date().toISOString().substring(0,10)}function xS(n,e=vS){const t=[];let s=n.slice();for(const a of n){const l=t.find(h=>h.agent===a.agent);if(l){if(l.dates.push(a.date),ly(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),ly(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class ES{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lT()?cT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ay(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ay(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function ly(n){return vu(JSON.stringify({version:2,heartbeats:n})).length}function TS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n){ho(new da("platform-logger",e=>new LT(e),"PRIVATE")),ho(new da("heartbeat",e=>new wS(e),"PRIVATE")),Ii(rf,sy,n),Ii(rf,sy,"esm2017"),Ii("fire-js","")}SS("");var IS="firebase",CS="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(IS,CS,"app");function Mf(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function o_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PS=o_,l_=new Al("auth","Firebase",o_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new Vf("@firebase/auth");function RS(n,...e){wu.logLevel<=st.WARN&&wu.warn(`Auth (${xo}): ${n}`,...e)}function au(n,...e){wu.logLevel<=st.ERROR&&wu.error(`Auth (${xo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(n,...e){throw Uf(n,...e)}function Wr(n,...e){return Uf(n,...e)}function Ff(n,e,t){const s=Object.assign(Object.assign({},PS()),{[e]:t});return new Al("auth","Firebase",s).create(e,{appName:n.name})}function Ws(n){return Ff(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bS(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ir(n,"argument-error"),Ff(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uf(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return l_.create(n,...e)}function Be(n,e,...t){if(!n)throw Uf(e,...t)}function Bs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw au(e),new Error(e)}function Gs(n,e){n||Bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function AS(){return cy()==="http:"||cy()==="https:"}function cy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AS()||sT()||"connection"in navigator)?navigator.onLine:!0}function kS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gs(t>e,"Short delay should be less than long delay!"),this.isMobile=tT()||iT()}get(){return NS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n,e){Gs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VS=new kl(3e4,6e4);function Mi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Fi(n,e,t,s,a={}){return u_(n,a,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=Nl(Object.assign({key:n.config.apiKey},h)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const v=Object.assign({method:e,headers:m},l);return rT()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&wo(n.emulatorConfig.host)&&(v.credentials="include"),c_.fetch()(await d_(n,n.config.apiHost,t,f),v)})}async function u_(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},jS),e);try{const a=new OS(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Yc(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[m,v]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(n,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw Yc(n,"email-already-in-use",h);if(m==="USER_DISABLED")throw Yc(n,"user-disabled",h);const w=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Ff(n,w,v);Ir(n,w)}}catch(a){if(a instanceof Ys)throw a;Ir(n,"network-request-failed",{message:String(a)})}}async function jl(n,e,t,s,a={}){const l=await Fi(n,e,t,s,a);return"mfaPendingCredential"in l&&Ir(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function d_(n,e,t,s){const a=`${e}${t}?${s}`,l=n,h=l.config.emulator?zf(n.config,a):`${n.config.apiScheme}://${a}`;return DS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function LS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Wr(this.auth,"network-request-failed")),VS.get())})}}function Yc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Wr(n,e,s);return a.customData._tokenResponse=t,a}function uy(n){return n!==void 0&&n.enterprise!==void 0}class MS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return LS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function FS(n,e){return Fi(n,"GET","/v2/recaptchaConfig",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(n,e){return Fi(n,"POST","/v1/accounts:delete",e)}async function xu(n,e){return Fi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zS(n,e=!1){const t=Tn(n),s=await t.getIdToken(e),a=Bf(s);Be(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:fl($h(a.auth_time)),issuedAtTime:fl($h(a.iat)),expirationTime:fl($h(a.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function $h(n){return Number(n)*1e3}function Bf(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return au("JWT malformed, contained fewer than 3 sections"),null;try{const a=Qv(t);return a?JSON.parse(a):(au("Failed to decode base64 JWT payload"),null)}catch(a){return au("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function dy(n){const e=Bf(n);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ys&&BS(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function BS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fl(this.lastLoginAt),this.creationTime=fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(n){var e;const t=n.auth,s=await n.getIdToken(),a=await xl(n,xu(t,{idToken:s}));Be(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?h_(l.providerUserInfo):[],f=HS(n.providerData,h),m=n.isAnonymous,v=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),w=m?v:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new lf(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(n,E)}async function WS(n){const e=Tn(n);await Eu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HS(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function h_(n){return n.map(e=>{var{providerId:t}=e,s=Mf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(n,e){const t=await u_(n,{},async()=>{const s=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,h=await d_(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return n.emulatorConfig&&wo(n.emulatorConfig.host)&&(m.credentials="include"),c_.fetch()(h,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function GS(n,e){return Fi(n,"POST","/v2/accounts:revokeToken",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const t=dy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await qS(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,h=new ao;return s&&(Be(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),a&&(Be(typeof a=="string","internal-error",{appName:e}),h.accessToken=a),l&&(Be(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ao,this.toJSON())}_performRefresh(){return Bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n,e){Be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class $r{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,l=Mf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $S(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new lf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await xl(this,this.stsTokenManager.getToken(this.auth,e));return Be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return zS(this,e)}reload(){return WS(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Eu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await xl(this,US(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,l,h,f,m,v,w;const E=(s=t.displayName)!==null&&s!==void 0?s:void 0,C=(a=t.email)!==null&&a!==void 0?a:void 0,W=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,K=(h=t.photoURL)!==null&&h!==void 0?h:void 0,Z=(f=t.tenantId)!==null&&f!==void 0?f:void 0,$=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,re=(v=t.createdAt)!==null&&v!==void 0?v:void 0,ne=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:oe,emailVerified:me,isAnonymous:Te,providerData:pe,stsTokenManager:D}=t;Be(oe&&D,e,"internal-error");const P=ao.fromJSON(this.name,D);Be(typeof oe=="string",e,"internal-error"),mi(E,e.name),mi(C,e.name),Be(typeof me=="boolean",e,"internal-error"),Be(typeof Te=="boolean",e,"internal-error"),mi(W,e.name),mi(K,e.name),mi(Z,e.name),mi($,e.name),mi(re,e.name),mi(ne,e.name);const k=new $r({uid:oe,auth:e,email:C,emailVerified:me,displayName:E,isAnonymous:Te,photoURL:K,phoneNumber:W,tenantId:Z,stsTokenManager:P,createdAt:re,lastLoginAt:ne});return pe&&Array.isArray(pe)&&(k.providerData=pe.map(A=>Object.assign({},A))),$&&(k._redirectEventId=$),k}static async _fromIdTokenResponse(e,t,s=!1){const a=new ao;a.updateFromServerResponse(t);const l=new $r({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Eu(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Be(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?h_(a.providerUserInfo):[],h=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new ao;f.updateFromIdToken(s);const m=new $r({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:h}),v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new lf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map;function $s(n){Gs(n instanceof Function,"Expected a class definition");let e=hy.get(n);return e?(Gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}f_.type="NONE";const fy=f_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n,e,t){return`firebase:${n}:${e}:${t}`}class oo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=ou(this.userKey,a.apiKey,l),this.fullPersistenceKey=ou("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xu(this.auth,{idToken:e}).catch(()=>{});return t?$r._fromGetAccountInfoResponse(this.auth,t,e):null}return $r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new oo($s(fy),e,s);const a=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=a[0]||$s(fy);const h=ou(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const w=await v._get(h);if(w){let E;if(typeof w=="string"){const C=await xu(e,{idToken:w}).catch(()=>{});if(!C)break;E=await $r._fromGetAccountInfoResponse(e,C,w)}else E=$r._fromJSON(e,w);v!==l&&(f=E),l=v;break}}catch{}const m=a.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new oo(l,e,s):(l=m[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new oo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(__(e))return"Blackberry";if(w_(e))return"Webos";if(m_(e))return"Safari";if((e.includes("chrome/")||g_(e))&&!e.includes("edge/"))return"Chrome";if(v_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function p_(n=On()){return/firefox\//i.test(n)}function m_(n=On()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g_(n=On()){return/crios\//i.test(n)}function y_(n=On()){return/iemobile/i.test(n)}function v_(n=On()){return/android/i.test(n)}function __(n=On()){return/blackberry/i.test(n)}function w_(n=On()){return/webos/i.test(n)}function $f(n=On()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KS(n=On()){var e;return $f(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QS(){return aT()&&document.documentMode===10}function x_(n=On()){return $f(n)||v_(n)||w_(n)||__(n)||/windows phone/i.test(n)||y_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n,e=[]){let t;switch(n){case"Browser":t=py(On());break;case"Worker":t=`${py(On())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const m=e(l);h(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(n,e={}){return Fi(n,"GET","/v2/passwordPolicy",Mi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=6;class ZS{constructor(e){var t,s,a,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:XS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,l,h,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new my(this),this.idTokenSubscription=new my(this),this.beforeStateQueue=new YS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$s(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await oo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xu(this,{idToken:e}),s=await $r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(dr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===f)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(h){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Eu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(Ws(this));const t=e?Tn(e):null;return t&&Be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JS(this),t=new ZS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Al("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await GS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$s(e)||this._popupRedirectResolver;Be(t,this,"argument-error"),this.redirectPersistenceManager=await oo.create(this,[$s(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,a);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&RS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ui(n){return Tn(n)}class my{constructor(e){this.auth=e,this.observer=null,this.addObserver=pT(t=>this.observer=t)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t1(n){zu=n}function T_(n){return zu.loadJS(n)}function n1(){return zu.recaptchaEnterpriseScript}function r1(){return zu.gapiScript}function s1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class i1{constructor(){this.enterprise=new a1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class a1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const o1="recaptcha-enterprise",S_="NO_RECAPTCHA";class l1{constructor(e){this.type=o1,this.auth=Ui(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{FS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new MS(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(m=>{f(m)})})}function a(l,h,f){const m=window.grecaptcha;uy(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(S_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new i1().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(f=>{if(!t&&uy(window.grecaptcha))a(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=n1();m.length!==0&&(m+=f),T_(m).then(()=>{a(f,l,h)}).catch(v=>{h(v)})}}).catch(f=>{h(f)})})}}async function gy(n,e,t,s=!1,a=!1){const l=new l1(n);let h;if(a)h=S_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function cf(n,e,t,s,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await gy(n,e,t,t==="getOobCode");return s(n,h)}else return s(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await gy(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n,e){const t=Of(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ua(l,e??{}))return a;Ir(a,"already-initialized")}return t.initialize({options:e})}function u1(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map($s);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function d1(n,e,t){const s=Ui(n);Be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=I_(e),{host:h,port:f}=h1(e),m=f===null?"":`:${f}`,v={url:`${l}//${h}${m}/`},w=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Be(ua(v,s.config.emulator)&&ua(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,wo(h)?(Zv(`${l}//${h}${m}`),e_("Auth",!0)):f1()}function I_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function h1(n){const e=I_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:yy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:yy(h)}}}function yy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function f1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bs("not implemented")}_getIdTokenResponse(e){return Bs("not implemented")}_linkToIdToken(e,t){return Bs("not implemented")}_getReauthenticationResolver(e){return Bs("not implemented")}}async function p1(n,e){return Fi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(n,e){return jl(n,"POST","/v1/accounts:signInWithPassword",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(n,e){return jl(n,"POST","/v1/accounts:signInWithEmailLink",Mi(n,e))}async function y1(n,e){return jl(n,"POST","/v1/accounts:signInWithEmailLink",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Wf{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new El(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new El(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cf(e,t,"signInWithPassword",m1);case"emailLink":return g1(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cf(e,s,"signUpPassword",p1);case"emailLink":return y1(e,{idToken:t,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(n,e){return jl(n,"POST","/v1/accounts:signInWithIdp",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="http://localhost";class ha extends Wf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,l=Mf(t,["providerId","signInMethod"]);if(!s||!a)return null;const h=new ha(s,a);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return lo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,lo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,lo(e,t)}buildRequest(){const e={requestUri:v1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function w1(n){const e=il(al(n)).link,t=e?il(al(e)).deep_link_id:null,s=il(al(n)).deep_link_id;return(s?il(al(s)).link:null)||s||t||e||n}class Hf{constructor(e){var t,s,a,l,h,f;const m=il(al(e)),v=(t=m.apiKey)!==null&&t!==void 0?t:null,w=(s=m.oobCode)!==null&&s!==void 0?s:null,E=_1((a=m.mode)!==null&&a!==void 0?a:null);Be(v&&w&&E,"argument-error"),this.apiKey=v,this.operation=E,this.code=w,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=m.lang)!==null&&h!==void 0?h:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=w1(e);try{return new Hf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.providerId=Eo.PROVIDER_ID}static credential(e,t){return El._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Hf.parseLink(t);return Be(s,"argument-error"),El._fromEmailAndCode(e,s.code,s.tenantId)}}Eo.PROVIDER_ID="password";Eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends qf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Dl{constructor(){super("facebook.com")}static credential(e){return ha._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ha._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ds.credential(t,s)}catch{return null}}}ds.GOOGLE_SIGN_IN_METHOD="google.com";ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Dl{constructor(){super("github.com")}static credential(e){return ha._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Dl{constructor(){super("twitter.com")}static credential(e,t){return ha._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return vi.credential(t,s)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(n,e){return jl(n,"POST","/v1/accounts:signUp",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await $r._fromIdTokenResponse(e,s,a),h=vy(s);return new fa({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=vy(s);return new fa({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function vy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends Ys{constructor(e,t,s,a){var l;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Tu.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Tu(e,t,s,a)}}function C_(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Tu._fromErrorAndOperation(n,l,e,s):l})}async function E1(n,e,t=!1){const s=await xl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fa._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(n,e,t=!1){const{auth:s}=n;if(dr(s.app))return Promise.reject(Ws(s));const a="reauthenticate";try{const l=await xl(n,C_(s,a,e,n),t);Be(l.idToken,s,"internal-error");const h=Bf(l.idToken);Be(h,s,"internal-error");const{sub:f}=h;return Be(n.uid===f,s,"user-mismatch"),fa._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ir(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(n,e,t=!1){if(dr(n.app))return Promise.reject(Ws(n));const s="signIn",a=await C_(n,s,e),l=await fa._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function S1(n,e){return P_(Ui(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R_(n){const e=Ui(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function I1(n,e,t){if(dr(n.app))return Promise.reject(Ws(n));const s=Ui(n),h=await cf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",x1).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&R_(n),m}),f=await fa._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(f.user),f}function b_(n,e,t){return dr(n.app)?Promise.reject(Ws(n)):S1(Tn(n),Eo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&R_(n),s})}function C1(n,e,t,s){return Tn(n).onIdTokenChanged(e,t,s)}function P1(n,e,t){return Tn(n).beforeAuthStateChanged(e,t)}function R1(n,e,t,s){return Tn(n).onAuthStateChanged(e,t,s)}function A_(n){return Tn(n).signOut()}const Su="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Su,"1"),this.storage.removeItem(Su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=1e3,A1=10;class k_ extends N_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,m)=>{this.notifyListeners(h,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);QS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,A1):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},b1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}k_.type="LOCAL";const N1=k_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends N_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}j_.type="SESSION";const D_=j_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Bu(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,h=this.handlersMap[a];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(h).map(async v=>v(t.origin,l)),m=await k1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,h;return new Promise((f,m)=>{const v=Gf("",20);a.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},s);h={messageChannel:a,onMessage(E){const C=E;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(C.data.response);break;default:clearTimeout(w),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),a.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[a.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(){return window}function D1(n){fs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){return typeof fs().WorkerGlobalScope<"u"&&typeof fs().importScripts=="function"}async function V1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L1(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function O1(){return V_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="firebaseLocalStorageDb",M1=1,Iu="firebaseLocalStorage",O_="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $u(n,e){return n.transaction([Iu],e?"readwrite":"readonly").objectStore(Iu)}function F1(){const n=indexedDB.deleteDatabase(L_);return new Vl(n).toPromise()}function uf(){const n=indexedDB.open(L_,M1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Iu,{keyPath:O_})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Iu)?e(s):(s.close(),await F1(),e(await uf()))})})}async function _y(n,e,t){const s=$u(n,!0).put({[O_]:e,value:t});return new Vl(s).toPromise()}async function U1(n,e){const t=$u(n,!1).get(e),s=await new Vl(t).toPromise();return s===void 0?null:s.value}function wy(n,e){const t=$u(n,!0).delete(e);return new Vl(t).toPromise()}const z1=800,B1=3;class M_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>B1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return V_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bu._getInstance(O1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await V1(),!this.activeServiceWorker)return;this.sender=new j1(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uf();return await _y(e,Su,"1"),await wy(e,Su),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>_y(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>U1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=$u(a,!1).getAll();return new Vl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}M_.type="LOCAL";const $1=M_;new kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(n,e){return e?$s(e):(Be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends Wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function W1(n){return P_(n.auth,new Kf(n),n.bypassAuthState)}function H1(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),T1(t,new Kf(n),n.bypassAuthState)}async function q1(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),E1(t,new Kf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W1;case"linkViaPopup":case"linkViaRedirect":return q1;case"reauthViaPopup":case"reauthViaRedirect":return H1;default:Ir(this.auth,"internal-error")}}resolve(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=new kl(2e3,1e4);async function z_(n,e,t){if(dr(n.app))return Promise.reject(Wr(n,"operation-not-supported-in-this-environment"));const s=Ui(n);bS(n,e,qf);const a=F_(s,t);return new oa(s,"signInViaPopup",e,a).executeNotNull()}class oa extends U_{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){Gs(this.filter.length===1,"Popup operations only handle one event");const e=Gf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G1.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="pendingRedirect",lu=new Map;class Q1 extends U_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=lu.get(this.auth._key());if(!e){try{const s=await Y1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}lu.set(this.auth._key(),e)}return this.bypassAuthState||lu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y1(n,e){const t=Z1(e),s=X1(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function J1(n,e){lu.set(n._key(),e)}function X1(n){return $s(n._redirectPersistence)}function Z1(n){return ou(K1,n.config.apiKey,n.name)}async function eI(n,e,t=!1){if(dr(n.app))return Promise.reject(Ws(n));const s=Ui(n),a=F_(s,e),h=await new Q1(s,a,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=600*1e3;class nI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!B_(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Wr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tI&&this.cachedEventUids.clear(),this.cachedEventUids.has(xy(e))}saveEventToCache(e){this.cachedEventUids.add(xy(e)),this.lastProcessedEventTime=Date.now()}}function xy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function B_({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return B_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(n,e={}){return Fi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aI=/^https?/;async function oI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sI(n);for(const t of e)try{if(lI(t))return}catch{}Ir(n,"unauthorized-domain")}function lI(n){const e=of(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!aI.test(t))return!1;if(iI.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new kl(3e4,6e4);function Ey(){const n=fs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uI(n){return new Promise((e,t)=>{var s,a,l;function h(){Ey(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ey(),t(Wr(n,"network-request-failed"))},timeout:cI.get()})}if(!((a=(s=fs().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=fs().gapi)===null||l===void 0)&&l.load)h();else{const f=s1("iframefcb");return fs()[f]=()=>{gapi.load?h():t(Wr(n,"network-request-failed"))},T_(`${r1()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw cu=null,e})}let cu=null;function dI(n){return cu=cu||uI(n),cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new kl(5e3,15e3),fI="__/auth/iframe",pI="emulator/auth/iframe",mI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yI(n){const e=n.config;Be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zf(e,pI):`https://${n.config.authDomain}/${fI}`,s={apiKey:e.apiKey,appName:n.name,v:xo},a=gI.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Nl(s).slice(1)}`}async function vI(n){const e=await dI(n),t=fs().gapi;return Be(t,n,"internal-error"),e.open({where:document.body,url:yI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mI,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const h=Wr(n,"network-request-failed"),f=fs().setTimeout(()=>{l(h)},hI.get());function m(){fs().clearTimeout(f),a(s)}s.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wI=500,xI=600,EI="_blank",TI="http://localhost";class Ty{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SI(n,e,t,s=wI,a=xI){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m=Object.assign(Object.assign({},_I),{width:s.toString(),height:a.toString(),top:l,left:h}),v=On().toLowerCase();t&&(f=g_(v)?EI:t),p_(v)&&(e=e||TI,m.scrollbars="yes");const w=Object.entries(m).reduce((C,[W,K])=>`${C}${W}=${K},`,"");if(KS(v)&&f!=="_self")return II(e||"",f),new Ty(null);const E=window.open(e||"",f,w);Be(E,n,"popup-blocked");try{E.focus()}catch{}return new Ty(E)}function II(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="__/auth/handler",PI="emulator/auth/handler",RI=encodeURIComponent("fac");async function Sy(n,e,t,s,a,l){Be(n.config.authDomain,n,"auth-domain-config-required"),Be(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:xo,eventId:a};if(e instanceof qf){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",fT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))h[w]=E}if(e instanceof Dl){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(h.scopes=w.join(","))}n.tenantId&&(h.tid=n.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const m=await n._getAppCheckToken(),v=m?`#${RI}=${encodeURIComponent(m)}`:"";return`${bI(n)}?${Nl(f).slice(1)}${v}`}function bI({config:n}){return n.emulator?zf(n,PI):`https://${n.authDomain}/${CI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="webStorageSupport";class AI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D_,this._completeRedirectFn=eI,this._overrideRedirectResult=J1}async _openPopup(e,t,s,a){var l;Gs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Sy(e,t,s,of(),a);return SI(e,h,Gf())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await Sy(e,t,s,of(),a);return D1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Gs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await vI(e),s=new nI(e);return t.register("authEvent",a=>(Be(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wh,{type:Wh},a=>{var l;const h=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Wh];h!==void 0&&t(!!h),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return x_()||m_()||$f()}}const NI=AI;var Iy="@firebase/auth",Cy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DI(n){ho(new da("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Be(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:h,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(n)},v=new e1(s,a,l,m);return u1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ho(new da("auth-internal",e=>{const t=Ui(e.getProvider("auth").getImmediate());return(s=>new kI(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(Iy,Cy,jI(n)),Ii(Iy,Cy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=300,LI=Xv("authIdTokenMaxAge")||VI;let Py=null;const OI=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>LI)return;const a=t==null?void 0:t.token;Py!==a&&(Py=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function MI(n=s_()){const e=Of(n,"auth");if(e.isInitialized())return e.getImmediate();const t=c1(n,{popupRedirectResolver:NI,persistence:[$1,N1,D_]}),s=Xv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=OI(l.toString());P1(t,h,()=>h(t.currentUser)),C1(t,f=>h(f))}}const a=Yv("auth");return a&&d1(t,`http://${a}`),t}function FI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}t1({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Wr("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",FI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DI("Browser");var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,$_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,P){function k(){}k.prototype=P.prototype,D.D=P.prototype,D.prototype=new k,D.prototype.constructor=D,D.C=function(A,F,R){for(var b=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)b[ge-2]=arguments[ge];return P.prototype[F].apply(A,b)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,P,k){k||(k=0);var A=Array(16);if(typeof P=="string")for(var F=0;16>F;++F)A[F]=P.charCodeAt(k++)|P.charCodeAt(k++)<<8|P.charCodeAt(k++)<<16|P.charCodeAt(k++)<<24;else for(F=0;16>F;++F)A[F]=P[k++]|P[k++]<<8|P[k++]<<16|P[k++]<<24;P=D.g[0],k=D.g[1],F=D.g[2];var R=D.g[3],b=P+(R^k&(F^R))+A[0]+3614090360&4294967295;P=k+(b<<7&4294967295|b>>>25),b=R+(F^P&(k^F))+A[1]+3905402710&4294967295,R=P+(b<<12&4294967295|b>>>20),b=F+(k^R&(P^k))+A[2]+606105819&4294967295,F=R+(b<<17&4294967295|b>>>15),b=k+(P^F&(R^P))+A[3]+3250441966&4294967295,k=F+(b<<22&4294967295|b>>>10),b=P+(R^k&(F^R))+A[4]+4118548399&4294967295,P=k+(b<<7&4294967295|b>>>25),b=R+(F^P&(k^F))+A[5]+1200080426&4294967295,R=P+(b<<12&4294967295|b>>>20),b=F+(k^R&(P^k))+A[6]+2821735955&4294967295,F=R+(b<<17&4294967295|b>>>15),b=k+(P^F&(R^P))+A[7]+4249261313&4294967295,k=F+(b<<22&4294967295|b>>>10),b=P+(R^k&(F^R))+A[8]+1770035416&4294967295,P=k+(b<<7&4294967295|b>>>25),b=R+(F^P&(k^F))+A[9]+2336552879&4294967295,R=P+(b<<12&4294967295|b>>>20),b=F+(k^R&(P^k))+A[10]+4294925233&4294967295,F=R+(b<<17&4294967295|b>>>15),b=k+(P^F&(R^P))+A[11]+2304563134&4294967295,k=F+(b<<22&4294967295|b>>>10),b=P+(R^k&(F^R))+A[12]+1804603682&4294967295,P=k+(b<<7&4294967295|b>>>25),b=R+(F^P&(k^F))+A[13]+4254626195&4294967295,R=P+(b<<12&4294967295|b>>>20),b=F+(k^R&(P^k))+A[14]+2792965006&4294967295,F=R+(b<<17&4294967295|b>>>15),b=k+(P^F&(R^P))+A[15]+1236535329&4294967295,k=F+(b<<22&4294967295|b>>>10),b=P+(F^R&(k^F))+A[1]+4129170786&4294967295,P=k+(b<<5&4294967295|b>>>27),b=R+(k^F&(P^k))+A[6]+3225465664&4294967295,R=P+(b<<9&4294967295|b>>>23),b=F+(P^k&(R^P))+A[11]+643717713&4294967295,F=R+(b<<14&4294967295|b>>>18),b=k+(R^P&(F^R))+A[0]+3921069994&4294967295,k=F+(b<<20&4294967295|b>>>12),b=P+(F^R&(k^F))+A[5]+3593408605&4294967295,P=k+(b<<5&4294967295|b>>>27),b=R+(k^F&(P^k))+A[10]+38016083&4294967295,R=P+(b<<9&4294967295|b>>>23),b=F+(P^k&(R^P))+A[15]+3634488961&4294967295,F=R+(b<<14&4294967295|b>>>18),b=k+(R^P&(F^R))+A[4]+3889429448&4294967295,k=F+(b<<20&4294967295|b>>>12),b=P+(F^R&(k^F))+A[9]+568446438&4294967295,P=k+(b<<5&4294967295|b>>>27),b=R+(k^F&(P^k))+A[14]+3275163606&4294967295,R=P+(b<<9&4294967295|b>>>23),b=F+(P^k&(R^P))+A[3]+4107603335&4294967295,F=R+(b<<14&4294967295|b>>>18),b=k+(R^P&(F^R))+A[8]+1163531501&4294967295,k=F+(b<<20&4294967295|b>>>12),b=P+(F^R&(k^F))+A[13]+2850285829&4294967295,P=k+(b<<5&4294967295|b>>>27),b=R+(k^F&(P^k))+A[2]+4243563512&4294967295,R=P+(b<<9&4294967295|b>>>23),b=F+(P^k&(R^P))+A[7]+1735328473&4294967295,F=R+(b<<14&4294967295|b>>>18),b=k+(R^P&(F^R))+A[12]+2368359562&4294967295,k=F+(b<<20&4294967295|b>>>12),b=P+(k^F^R)+A[5]+4294588738&4294967295,P=k+(b<<4&4294967295|b>>>28),b=R+(P^k^F)+A[8]+2272392833&4294967295,R=P+(b<<11&4294967295|b>>>21),b=F+(R^P^k)+A[11]+1839030562&4294967295,F=R+(b<<16&4294967295|b>>>16),b=k+(F^R^P)+A[14]+4259657740&4294967295,k=F+(b<<23&4294967295|b>>>9),b=P+(k^F^R)+A[1]+2763975236&4294967295,P=k+(b<<4&4294967295|b>>>28),b=R+(P^k^F)+A[4]+1272893353&4294967295,R=P+(b<<11&4294967295|b>>>21),b=F+(R^P^k)+A[7]+4139469664&4294967295,F=R+(b<<16&4294967295|b>>>16),b=k+(F^R^P)+A[10]+3200236656&4294967295,k=F+(b<<23&4294967295|b>>>9),b=P+(k^F^R)+A[13]+681279174&4294967295,P=k+(b<<4&4294967295|b>>>28),b=R+(P^k^F)+A[0]+3936430074&4294967295,R=P+(b<<11&4294967295|b>>>21),b=F+(R^P^k)+A[3]+3572445317&4294967295,F=R+(b<<16&4294967295|b>>>16),b=k+(F^R^P)+A[6]+76029189&4294967295,k=F+(b<<23&4294967295|b>>>9),b=P+(k^F^R)+A[9]+3654602809&4294967295,P=k+(b<<4&4294967295|b>>>28),b=R+(P^k^F)+A[12]+3873151461&4294967295,R=P+(b<<11&4294967295|b>>>21),b=F+(R^P^k)+A[15]+530742520&4294967295,F=R+(b<<16&4294967295|b>>>16),b=k+(F^R^P)+A[2]+3299628645&4294967295,k=F+(b<<23&4294967295|b>>>9),b=P+(F^(k|~R))+A[0]+4096336452&4294967295,P=k+(b<<6&4294967295|b>>>26),b=R+(k^(P|~F))+A[7]+1126891415&4294967295,R=P+(b<<10&4294967295|b>>>22),b=F+(P^(R|~k))+A[14]+2878612391&4294967295,F=R+(b<<15&4294967295|b>>>17),b=k+(R^(F|~P))+A[5]+4237533241&4294967295,k=F+(b<<21&4294967295|b>>>11),b=P+(F^(k|~R))+A[12]+1700485571&4294967295,P=k+(b<<6&4294967295|b>>>26),b=R+(k^(P|~F))+A[3]+2399980690&4294967295,R=P+(b<<10&4294967295|b>>>22),b=F+(P^(R|~k))+A[10]+4293915773&4294967295,F=R+(b<<15&4294967295|b>>>17),b=k+(R^(F|~P))+A[1]+2240044497&4294967295,k=F+(b<<21&4294967295|b>>>11),b=P+(F^(k|~R))+A[8]+1873313359&4294967295,P=k+(b<<6&4294967295|b>>>26),b=R+(k^(P|~F))+A[15]+4264355552&4294967295,R=P+(b<<10&4294967295|b>>>22),b=F+(P^(R|~k))+A[6]+2734768916&4294967295,F=R+(b<<15&4294967295|b>>>17),b=k+(R^(F|~P))+A[13]+1309151649&4294967295,k=F+(b<<21&4294967295|b>>>11),b=P+(F^(k|~R))+A[4]+4149444226&4294967295,P=k+(b<<6&4294967295|b>>>26),b=R+(k^(P|~F))+A[11]+3174756917&4294967295,R=P+(b<<10&4294967295|b>>>22),b=F+(P^(R|~k))+A[2]+718787259&4294967295,F=R+(b<<15&4294967295|b>>>17),b=k+(R^(F|~P))+A[9]+3951481745&4294967295,D.g[0]=D.g[0]+P&4294967295,D.g[1]=D.g[1]+(F+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+F&4294967295,D.g[3]=D.g[3]+R&4294967295}s.prototype.u=function(D,P){P===void 0&&(P=D.length);for(var k=P-this.blockSize,A=this.B,F=this.h,R=0;R<P;){if(F==0)for(;R<=k;)a(this,D,R),R+=this.blockSize;if(typeof D=="string"){for(;R<P;)if(A[F++]=D.charCodeAt(R++),F==this.blockSize){a(this,A),F=0;break}}else for(;R<P;)if(A[F++]=D[R++],F==this.blockSize){a(this,A),F=0;break}}this.h=F,this.o+=P},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var P=1;P<D.length-8;++P)D[P]=0;var k=8*this.o;for(P=D.length-8;P<D.length;++P)D[P]=k&255,k/=256;for(this.u(D),D=Array(16),P=k=0;4>P;++P)for(var A=0;32>A;A+=8)D[k++]=this.g[P]>>>A&255;return D};function l(D,P){var k=f;return Object.prototype.hasOwnProperty.call(k,D)?k[D]:k[D]=P(D)}function h(D,P){this.h=P;for(var k=[],A=!0,F=D.length-1;0<=F;F--){var R=D[F]|0;A&&R==P||(k[F]=R,A=!1)}this.g=k}var f={};function m(D){return-128<=D&&128>D?l(D,function(P){return new h([P|0],0>P?-1:0)}):new h([D|0],0>D?-1:0)}function v(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return $(v(-D));for(var P=[],k=1,A=0;D>=k;A++)P[A]=D/k|0,k*=4294967296;return new h(P,0)}function w(D,P){if(D.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(D.charAt(0)=="-")return $(w(D.substring(1),P));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=v(Math.pow(P,8)),A=E,F=0;F<D.length;F+=8){var R=Math.min(8,D.length-F),b=parseInt(D.substring(F,F+R),P);8>R?(R=v(Math.pow(P,R)),A=A.j(R).add(v(b))):(A=A.j(k),A=A.add(v(b)))}return A}var E=m(0),C=m(1),W=m(16777216);n=h.prototype,n.m=function(){if(Z(this))return-$(this).m();for(var D=0,P=1,k=0;k<this.g.length;k++){var A=this.i(k);D+=(0<=A?A:4294967296+A)*P,P*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(K(this))return"0";if(Z(this))return"-"+$(this).toString(D);for(var P=v(Math.pow(D,6)),k=this,A="";;){var F=me(k,P).g;k=re(k,F.j(P));var R=((0<k.g.length?k.g[0]:k.h)>>>0).toString(D);if(k=F,K(k))return R+A;for(;6>R.length;)R="0"+R;A=R+A}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function K(D){if(D.h!=0)return!1;for(var P=0;P<D.g.length;P++)if(D.g[P]!=0)return!1;return!0}function Z(D){return D.h==-1}n.l=function(D){return D=re(this,D),Z(D)?-1:K(D)?0:1};function $(D){for(var P=D.g.length,k=[],A=0;A<P;A++)k[A]=~D.g[A];return new h(k,~D.h).add(C)}n.abs=function(){return Z(this)?$(this):this},n.add=function(D){for(var P=Math.max(this.g.length,D.g.length),k=[],A=0,F=0;F<=P;F++){var R=A+(this.i(F)&65535)+(D.i(F)&65535),b=(R>>>16)+(this.i(F)>>>16)+(D.i(F)>>>16);A=b>>>16,R&=65535,b&=65535,k[F]=b<<16|R}return new h(k,k[k.length-1]&-2147483648?-1:0)};function re(D,P){return D.add($(P))}n.j=function(D){if(K(this)||K(D))return E;if(Z(this))return Z(D)?$(this).j($(D)):$($(this).j(D));if(Z(D))return $(this.j($(D)));if(0>this.l(W)&&0>D.l(W))return v(this.m()*D.m());for(var P=this.g.length+D.g.length,k=[],A=0;A<2*P;A++)k[A]=0;for(A=0;A<this.g.length;A++)for(var F=0;F<D.g.length;F++){var R=this.i(A)>>>16,b=this.i(A)&65535,ge=D.i(F)>>>16,Ke=D.i(F)&65535;k[2*A+2*F]+=b*Ke,ne(k,2*A+2*F),k[2*A+2*F+1]+=R*Ke,ne(k,2*A+2*F+1),k[2*A+2*F+1]+=b*ge,ne(k,2*A+2*F+1),k[2*A+2*F+2]+=R*ge,ne(k,2*A+2*F+2)}for(A=0;A<P;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=P;A<2*P;A++)k[A]=0;return new h(k,0)};function ne(D,P){for(;(D[P]&65535)!=D[P];)D[P+1]+=D[P]>>>16,D[P]&=65535,P++}function oe(D,P){this.g=D,this.h=P}function me(D,P){if(K(P))throw Error("division by zero");if(K(D))return new oe(E,E);if(Z(D))return P=me($(D),P),new oe($(P.g),$(P.h));if(Z(P))return P=me(D,$(P)),new oe($(P.g),P.h);if(30<D.g.length){if(Z(D)||Z(P))throw Error("slowDivide_ only works with positive integers.");for(var k=C,A=P;0>=A.l(D);)k=Te(k),A=Te(A);var F=pe(k,1),R=pe(A,1);for(A=pe(A,2),k=pe(k,2);!K(A);){var b=R.add(A);0>=b.l(D)&&(F=F.add(k),R=b),A=pe(A,1),k=pe(k,1)}return P=re(D,F.j(P)),new oe(F,P)}for(F=E;0<=D.l(P);){for(k=Math.max(1,Math.floor(D.m()/P.m())),A=Math.ceil(Math.log(k)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),R=v(k),b=R.j(P);Z(b)||0<b.l(D);)k-=A,R=v(k),b=R.j(P);K(R)&&(R=C),F=F.add(R),D=re(D,b)}return new oe(F,D)}n.A=function(D){return me(this,D).h},n.and=function(D){for(var P=Math.max(this.g.length,D.g.length),k=[],A=0;A<P;A++)k[A]=this.i(A)&D.i(A);return new h(k,this.h&D.h)},n.or=function(D){for(var P=Math.max(this.g.length,D.g.length),k=[],A=0;A<P;A++)k[A]=this.i(A)|D.i(A);return new h(k,this.h|D.h)},n.xor=function(D){for(var P=Math.max(this.g.length,D.g.length),k=[],A=0;A<P;A++)k[A]=this.i(A)^D.i(A);return new h(k,this.h^D.h)};function Te(D){for(var P=D.g.length+1,k=[],A=0;A<P;A++)k[A]=D.i(A)<<1|D.i(A-1)>>>31;return new h(k,D.h)}function pe(D,P){var k=P>>5;P%=32;for(var A=D.g.length-k,F=[],R=0;R<A;R++)F[R]=0<P?D.i(R+k)>>>P|D.i(R+k+1)<<32-P:D.i(R+k);return new h(F,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,$_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,Ci=h}).apply(typeof Ry<"u"?Ry:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W_,ol,H_,uu,df,q_,G_,K_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function a(u,g){if(g)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var H=u[T];if(!(H in _))break e;_=_[H]}u=u[u.length-1],T=_[u],g=g(T),g!=T&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function l(u,g){u instanceof String&&(u+="");var _=0,T=!1,H={next:function(){if(!T&&_<u.length){var te=_++;return{value:g(te,u[te]),done:!1}}return T=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}a("Array.prototype.values",function(u){return u||function(){return l(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function m(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function v(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function w(u,g,_){return u.call.apply(u.bind,arguments)}function E(u,g,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,T),u.apply(g,H)}}return function(){return u.apply(g,arguments)}}function C(u,g,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:E,C.apply(null,arguments)}function W(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function K(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,H,te){for(var we=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)we[vt-2]=arguments[vt];return g.prototype[H].apply(T,we)}}function Z(u){const g=u.length;if(0<g){const _=Array(g);for(let T=0;T<g;T++)_[T]=u[T];return _}return[]}function $(u,g){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(m(T)){const H=u.length||0,te=T.length||0;u.length=H+te;for(let we=0;we<te;we++)u[H+we]=T[we]}else u.push(T)}}class re{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ne(u){return/^[\s\xa0]*$/.test(u)}function oe(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function me(u){return me[" "](u),u}me[" "]=function(){};var Te=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function pe(u,g,_){for(const T in u)g.call(_,u[T],T,u)}function D(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function P(u){const g={};for(const _ in u)g[_]=u[_];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,g){let _,T;for(let H=1;H<arguments.length;H++){T=arguments[H];for(_ in T)u[_]=T[_];for(let te=0;te<k.length;te++)_=k[te],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function F(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function R(u){f.setTimeout(()=>{throw u},0)}function b(){var u=ae;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ge{constructor(){this.h=this.g=null}add(g,_){const T=Ke.get();T.set(g,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Ke=new re(()=>new Qe,u=>u.reset());class Qe{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let G,V=!1,ae=new ge,ue=()=>{const u=f.Promise.resolve(void 0);G=()=>{u.then(L)}};var L=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(_){R(_)}var g=Ke;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}V=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,g),f.removeEventListener("test",_,g)}catch{}return u})();function xe(u,g){if(se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(Te){e:{try{me(g.nodeName);var H=!0;break e}catch{}H=!1}H||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ee[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}K(xe,se);var Ee={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),ke=0;function He(u,g,_,T,H){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!T,this.ha=H,this.key=++ke,this.da=this.fa=!1}function rt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Wt(u){this.src=u,this.g={},this.h=0}Wt.prototype.add=function(u,g,_,T,H){var te=u.toString();u=this.g[te],u||(u=this.g[te]=[],this.h++);var we=Ft(u,g,T,H);return-1<we?(g=u[we],_||(g.fa=!1)):(g=new He(g,this.src,te,!!T,H),g.fa=_,u.push(g)),g};function ht(u,g){var _=g.type;if(_ in u.g){var T=u.g[_],H=Array.prototype.indexOf.call(T,g,void 0),te;(te=0<=H)&&Array.prototype.splice.call(T,H,1),te&&(rt(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ft(u,g,_,T){for(var H=0;H<u.length;++H){var te=u[H];if(!te.da&&te.listener==g&&te.capture==!!_&&te.ha==T)return H}return-1}var fn="closure_lm_"+(1e6*Math.random()|0),Je={};function Mn(u,g,_,T,H){if(Array.isArray(g)){for(var te=0;te<g.length;te++)Mn(u,g[te],_,T,H);return null}return _=Gr(_),u&&u[Fe]?u.K(g,_,v(T)?!!T.capture:!1,H):Ht(u,g,_,!1,T,H)}function Ht(u,g,_,T,H,te){if(!g)throw Error("Invalid event type");var we=v(H)?!!H.capture:!!H,vt=Wn(u);if(vt||(u[fn]=vt=new Wt(u)),_=vt.add(g,_,T,we,te),_.proxy)return _;if(T=ws(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)_e||(H=we),H===void 0&&(H=!1),u.addEventListener(g.toString(),T,H);else if(u.attachEvent)u.attachEvent(Cn(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ws(){function u(_){return g.call(u.src,u.listener,_)}const g=rr;return u}function In(u,g,_,T,H){if(Array.isArray(g))for(var te=0;te<g.length;te++)In(u,g[te],_,T,H);else T=v(T)?!!T.capture:!!T,_=Gr(_),u&&u[Fe]?(u=u.i,g=String(g).toString(),g in u.g&&(te=u.g[g],_=Ft(te,_,T,H),-1<_&&(rt(te[_]),Array.prototype.splice.call(te,_,1),te.length==0&&(delete u.g[g],u.h--)))):u&&(u=Wn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ft(g,_,T,H)),(_=-1<u?g[u]:null)&&pn(_))}function pn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Fe])ht(g.i,u);else{var _=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(_,T,u.capture):g.detachEvent?g.detachEvent(Cn(_),T):g.addListener&&g.removeListener&&g.removeListener(T),(_=Wn(g))?(ht(_,u),_.h==0&&(_.src=null,g[fn]=null)):rt(u)}}}function Cn(u){return u in Je?Je[u]:Je[u]="on"+u}function rr(u,g){if(u.da)u=!0;else{g=new xe(g,this);var _=u.listener,T=u.ha||u.src;u.fa&&pn(u),u=_.call(T,g)}return u}function Wn(u){return u=u[fn],u instanceof Wt?u:null}var qr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gr(u){return typeof u=="function"?u:(u[qr]||(u[qr]=function(g){return u.handleEvent(g)}),u[qr])}function Rt(){j.call(this),this.i=new Wt(this),this.M=this,this.F=null}K(Rt,j),Rt.prototype[Fe]=!0,Rt.prototype.removeEventListener=function(u,g,_,T){In(this,u,g,_,T)};function qe(u,g){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new se(g,u);else if(g instanceof se)g.target=g.target||u;else{var H=g;g=new se(T,u),A(g,H)}if(H=!0,_)for(var te=_.length-1;0<=te;te--){var we=g.g=_[te];H=Pn(we,T,!0,g)&&H}if(we=g.g=u,H=Pn(we,T,!0,g)&&H,H=Pn(we,T,!1,g)&&H,_)for(te=0;te<_.length;te++)we=g.g=_[te],H=Pn(we,T,!1,g)&&H}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],T=0;T<_.length;T++)rt(_[T]);delete u.g[g],u.h--}}this.F=null},Rt.prototype.K=function(u,g,_,T){return this.i.add(String(u),g,!1,_,T)},Rt.prototype.L=function(u,g,_,T){return this.i.add(String(u),g,!0,_,T)};function Pn(u,g,_,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var H=!0,te=0;te<g.length;++te){var we=g[te];if(we&&!we.da&&we.capture==_){var vt=we.listener,Zt=we.ha||we.src;we.fa&&ht(u.i,we),H=vt.call(Zt,T)!==!1&&H}}return H&&!T.defaultPrevented}function xs(u,g,_){if(typeof u=="function")_&&(u=C(u,_));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:f.setTimeout(u,g||0)}function Rn(u){u.g=xs(()=>{u.g=null,u.i&&(u.i=!1,Rn(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Cr extends j{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Rn(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(u){j.call(this),this.h=u,this.g={}}K(sr,j);var Es=[];function mn(u){pe(u.g,function(g,_){this.g.hasOwnProperty(_)&&pn(g)},u),u.g={}}sr.prototype.N=function(){sr.aa.N.call(this),mn(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=f.JSON.stringify,fr=f.JSON.parse,Ts=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ot(){}Ot.prototype.h=null;function Ut(u){return u.h||(u.h=u.i())}function sn(){}var I={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ee(){se.call(this,"d")}K(ee,se);function le(){se.call(this,"c")}K(le,se);var B={},Q=null;function be(){return Q=Q||new Rt}B.La="serverreachability";function Le(u){se.call(this,B.La,u)}K(Le,se);function mt(u){const g=be();qe(g,new Le(g))}B.STAT_EVENT="statevent";function Se(u,g){se.call(this,B.STAT_EVENT,u),this.stat=g}K(Se,se);function Oe(u){const g=be();qe(g,new Se(g,u))}B.Ma="timingevent";function qt(u,g){se.call(this,B.Ma,u),this.size=g}K(qt,se);function an(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function on(){this.g=!0}on.prototype.xa=function(){this.g=!1};function Pr(u,g,_,T,H,te){u.info(function(){if(u.g)if(te)for(var we="",vt=te.split("&"),Zt=0;Zt<vt.length;Zt++){var ot=vt[Zt].split("=");if(1<ot.length){var ln=ot[0];ot=ot[1];var Gt=ln.split("_");we=2<=Gt.length&&Gt[1]=="type"?we+(ln+"="+ot+"&"):we+(ln+"=redacted&")}}else we=null;else we=te;return"XMLHTTP REQ ("+T+") [attempt "+H+"]: "+g+`
`+_+`
`+we})}function Rr(u,g,_,T,H,te,we){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+H+"]: "+g+`
`+_+`
`+te+" "+we})}function gn(u,g,_,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+br(u,_)+(T?" "+T:"")})}function Ss(u,g){u.info(function(){return"TIMEOUT: "+g})}on.prototype.info=function(){};function br(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var H=T[1];if(Array.isArray(H)&&!(1>H.length)){var te=H[0];if(te!="noop"&&te!="stop"&&te!="close")for(var we=1;we<H.length;we++)H[we]=""}}}}return Fn(_)}catch{return g}}var Kr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ir;function Qr(){}K(Qr,Ot),Qr.prototype.g=function(){return new XMLHttpRequest},Qr.prototype.i=function(){return{}},ir=new Qr;function at(u,g,_,T){this.j=u,this.i=g,this.l=_,this.R=T||1,this.U=new sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yr}function Yr(){this.i=null,this.g="",this.h=!1}var Hn={},Is={};function Cs(u,g,_){u.L=1,u.v=Zr(_t(g)),u.m=_,u.P=!0,Js(u,null)}function Js(u,g){u.F=Date.now(),gt(u),u.A=_t(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Xs(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Yr,u.g=ec(u.j,_?g:null,!u.m),0<u.O&&(u.M=new Cr(C(u.Y,u,u.g),u.O)),g=u.U,_=u.g,T=u.ca;var H="readystatechange";Array.isArray(H)||(H&&(Es[0]=H.toString()),H=Es);for(var te=0;te<H.length;te++){var we=Mn(_,H[te],T||g.handleEvent,!1,g.h||g);if(!we)break;g.g[we.key]=we}g=u.H?P(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),mt(),Pr(u.i,u.u,u.A,u.l,u.R,u.m)}at.prototype.ca=function(u){u=u.target;const g=this.M;g&&Gn(u)==3?g.j():this.Y(u)},at.prototype.Y=function(u){try{if(u==this.g)e:{const Gt=Gn(this.g);var g=this.g.Ba();const gr=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||No(this.g)))){this.J||Gt!=4||g==7||(g==8||0>=gr?mt(3):mt(2)),Ps(this);var _=this.g.Z();this.X=_;t:if(xa(this)){var T=No(this.g);u="";var H=T.length,te=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){S(this),Jr(this);var we="";break t}this.h.i=new f.TextDecoder}for(g=0;g<H;g++)this.h.h=!0,u+=this.h.i.decode(T[g],{stream:!(te&&g==H-1)});T.length=0,this.h.g+=u,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=_==200,Rr(this.i,this.u,this.A,this.l,this.R,Gt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var vt,Zt=this.g;if((vt=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(vt)){var ot=vt;break t}}ot=null}if(_=ot)gn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,U(this,_);else{this.o=!1,this.s=3,Oe(12),S(this),Jr(this);break e}}if(this.P){_=!0;let or;for(;!this.J&&this.C<we.length;)if(or=Ar(this,we),or==Is){Gt==4&&(this.s=4,Oe(14),_=!1),gn(this.i,this.l,null,"[Incomplete Response]");break}else if(or==Hn){this.s=4,Oe(15),gn(this.i,this.l,we,"[Invalid Chunk]"),_=!1;break}else gn(this.i,this.l,or,null),U(this,or);if(xa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||we.length!=0||this.h.h||(this.s=1,Oe(16),_=!1),this.o=this.o&&_,!_)gn(this.i,this.l,we,"[Invalid Chunked Response]"),S(this),Jr(this);else if(0<we.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),jo(ln),ln.M=!0,Oe(11))}}else gn(this.i,this.l,we,null),U(this,we);Gt==4&&S(this),this.o&&!this.J&&(Gt==4?Na(this.j,this):(this.o=!1,gt(this)))}else Ca(this.g),_==400&&0<we.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),S(this),Jr(this)}}}catch{}finally{}};function xa(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ar(u,g){var _=u.C,T=g.indexOf(`
`,_);return T==-1?Is:(_=Number(g.substring(_,T)),isNaN(_)?Hn:(T+=1,T+_>g.length?Is:(g=g.slice(T,T+_),u.C=T+_,g)))}at.prototype.cancel=function(){this.J=!0,S(this)};function gt(u){u.S=Date.now()+u.I,Ea(u,u.I)}function Ea(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=an(C(u.ba,u),g)}function Ps(u){u.B&&(f.clearTimeout(u.B),u.B=null)}at.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ss(this.i,this.A),this.L!=2&&(mt(),Oe(17)),S(this),this.s=2,Jr(this)):Ea(this,this.S-u)};function Jr(u){u.j.G==0||u.J||Na(u.j,u)}function S(u){Ps(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,mn(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function U(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||Ie(_.h,u))){if(!u.K&&Ie(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var H=T;if(H[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Aa(_),Vr(_);else break e;ba(_),Oe(18)}}else _.za=H[1],0<_.za-_.T&&37500>H[2]&&_.F&&_.v==0&&!_.C&&(_.C=an(C(_.Za,_),6e3));if(1>=Xe(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ns(_,11)}else if((u.K||_.g==u)&&Aa(_),!ne(g))for(H=_.Da.g.parse(g),g=0;g<H.length;g++){let ot=H[g];if(_.T=ot[0],ot=ot[1],_.G==2)if(ot[0]=="c"){_.K=ot[1],_.ia=ot[2];const ln=ot[3];ln!=null&&(_.la=ln,_.j.info("VER="+_.la));const Gt=ot[4];Gt!=null&&(_.Aa=Gt,_.j.info("SVER="+_.Aa));const gr=ot[5];gr!=null&&typeof gr=="number"&&0<gr&&(T=1.5*gr,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const or=u.g;if(or){const qi=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qi){var te=T.h;te.g||qi.indexOf("spdy")==-1&&qi.indexOf("quic")==-1&&qi.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(ft(te,te.h),te.h=null))}if(T.D){const ja=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;ja&&(T.ya=ja,yt(T.I,T.D,ja))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var we=u;if(T.qa=Zl(T,T.J?T.ia:null,T.W),we.K){kt(T.h,we);var vt=we,Zt=T.L;Zt&&(vt.I=Zt),vt.B&&(Ps(vt),gt(vt)),T.g=we}else Hi(T);0<_.i.length&&ss(_)}else ot[0]!="stop"&&ot[0]!="close"||Ns(_,7);else _.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Ns(_,7):vn(_):ot[0]!="noop"&&_.l&&_.l.ta(ot),_.v=0)}}mt(4)}catch{}}var Y=class{constructor(u,g){this.g=u,this.map=g}};function ve(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ne(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Xe(u){return u.h?1:u.g?u.g.size:0}function Ie(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ft(u,g){u.g?u.g.add(g):u.h=g}function kt(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}ve.prototype.cancel=function(){if(this.i=bt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function bt(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return Z(u.i)}function xt(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var g=[],_=u.length,T=0;T<_;T++)g.push(u[T]);return g}g=[],_=0;for(T in u)g[_++]=u[T];return g}function Et(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const T in u)g[_++]=T;return g}}}function Xt(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=Et(u),T=xt(u),H=T.length,te=0;te<H;te++)g.call(void 0,T[te],_&&_[te],u)}var jt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ct(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),H=null;if(0<=T){var te=u[_].substring(0,T);H=u[_].substring(T+1)}else te=u[_];g(te,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function bn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof bn){this.h=u.h,Un(this,u.j),this.o=u.o,this.g=u.g,pr(this,u.s),this.l=u.l;var g=u.i,_=new ts;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Xr(this,_),this.m=u.m}else u&&(g=String(u).match(jt))?(this.h=!1,Un(this,g[1]||"",!0),this.o=Ze(g[2]||""),this.g=Ze(g[3]||"",!0),pr(this,g[4]),this.l=Ze(g[5]||"",!0),Xr(this,g[6]||"",!0),this.m=Ze(g[7]||"")):(this.h=!1,this.i=new ts(null,this.h))}bn.prototype.toString=function(){var u=[],g=this.j;g&&u.push(es(g,Ta,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(es(g,Ta,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(es(_,_.charAt(0)=="/"?Hl:Wl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",es(_,Ro)),u.join("")};function _t(u){return new bn(u)}function Un(u,g,_){u.j=_?Ze(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function pr(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Xr(u,g,_){g instanceof ts?(u.i=g,ns(u.i,u.h)):(_||(g=es(g,ql)),u.i=new ts(g,u.h))}function yt(u,g,_){u.i.set(g,_)}function Zr(u){return yt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ze(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function es(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,$l),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function $l(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ta=/[#\/\?@]/g,Wl=/[#\?:]/g,Hl=/[#\?]/g,ql=/[#\?@]/g,Ro=/#/g;function ts(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function yn(u){u.g||(u.g=new Map,u.h=0,u.i&&ct(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=ts.prototype,n.add=function(u,g){yn(this),this.i=null,u=mr(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function Nr(u,g){yn(u),g=mr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function kr(u,g){return yn(u),g=mr(u,g),u.g.has(g)}n.forEach=function(u,g){yn(this),this.g.forEach(function(_,T){_.forEach(function(H){u.call(g,H,T,this)},this)},this)},n.na=function(){yn(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let T=0;T<g.length;T++){const H=u[T];for(let te=0;te<H.length;te++)_.push(g[T])}return _},n.V=function(u){yn(this);let g=[];if(typeof u=="string")kr(this,u)&&(g=g.concat(this.g.get(mr(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},n.set=function(u,g){return yn(this),this.i=null,u=mr(this,u),kr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Xs(u,g,_){Nr(u,g),0<_.length&&(u.i=null,u.g.set(mr(u,g),Z(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var T=g[_];const te=encodeURIComponent(String(T)),we=this.V(T);for(T=0;T<we.length;T++){var H=te;we[T]!==""&&(H+="="+encodeURIComponent(String(we[T]))),u.push(H)}}return this.i=u.join("&")};function mr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ns(u,g){g&&!u.j&&(yn(u),u.i=null,u.g.forEach(function(_,T){var H=T.toLowerCase();T!=H&&(Nr(this,T),Xs(this,H,_))},u)),u.j=g}function cd(u,g){const _=new on;if(f.Image){const T=new Image;T.onload=W(qn,_,"TestLoadImage: loaded",!0,g,T),T.onerror=W(qn,_,"TestLoadImage: error",!1,g,T),T.onabort=W(qn,_,"TestLoadImage: abort",!1,g,T),T.ontimeout=W(qn,_,"TestLoadImage: timeout",!1,g,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function Gl(u,g){const _=new on,T=new AbortController,H=setTimeout(()=>{T.abort(),qn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then(te=>{clearTimeout(H),te.ok?qn(_,"TestPingServer: ok",!0,g):qn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(H),qn(_,"TestPingServer: error",!1,g)})}function qn(u,g,_,T,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),T(_)}catch{}}function ud(){this.g=new Ts}function Kl(u,g,_){const T=_||"";try{Xt(u,function(H,te){let we=H;v(H)&&(we=Fn(H)),g.push(T+te+"="+encodeURIComponent(we))})}catch(H){throw g.push(T+"type="+encodeURIComponent("_badmap")),H}}function Rs(u){this.l=u.Ub||null,this.j=u.eb||!1}K(Rs,Ot),Rs.prototype.g=function(){return new $i(this.l,this.j)},Rs.prototype.i=(function(u){return function(){return u}})({});function $i(u,g){Rt.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K($i,Rt),n=$i.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Dr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||f).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Dr(this)),this.g&&(this.readyState=3,Dr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ql(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ql(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?jr(this):Dr(this),this.readyState==3&&Ql(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,jr(this))},n.Qa=function(u){this.g&&(this.response=u,jr(this))},n.ga=function(){this.g&&jr(this)};function jr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Dr(u)}n.setRequestHeader=function(u,g){this.u.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Dr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bs(u){let g="";return pe(u,function(_,T){g+=T,g+=":",g+=_,g+=`\r
`}),g}function Zs(u,g,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=bs(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):yt(u,g,_))}function At(u){Rt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(At,Rt);var dd=/^https?$/i,bo=["POST","PUT"];n=At.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,g,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ir.g(),this.v=this.o?Ut(this.o):Ut(ir),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(te){Wi(this,te);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var H in T)_.set(H,T[H]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const te of T.keys())_.set(te,T.get(te));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(te=>te.toLowerCase()=="content-type"),H=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(bo,g,void 0))||T||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,we]of _)this.g.setRequestHeader(te,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ia(this),this.u=!0,this.g.send(u),this.u=!1}catch(te){Wi(this,te)}};function Wi(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Sa(u),ar(u)}function Sa(u){u.A||(u.A=!0,qe(u,"complete"),qe(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,qe(this,"complete"),qe(this,"abort"),ar(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),At.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ao(this):this.bb())},n.bb=function(){Ao(this)};function Ao(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Gn(u)!=4||u.Z()!=2)){if(u.u&&Gn(u)==4)xs(u.Ea,0,u);else if(qe(u,"readystatechange"),Gn(u)==4){u.h=!1;try{const we=u.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var T;if(T=we===0){var H=String(u.D).match(jt)[1]||null;!H&&f.self&&f.self.location&&(H=f.self.location.protocol.slice(0,-1)),T=!dd.test(H?H.toLowerCase():"")}_=T}if(_)qe(u,"complete"),qe(u,"success");else{u.m=6;try{var te=2<Gn(u)?u.g.statusText:""}catch{te=""}u.l=te+" ["+u.Z()+"]",Sa(u)}}finally{ar(u)}}}}function ar(u,g){if(u.g){Ia(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||qe(u,"ready");try{_.onreadystatechange=T}catch{}}}function Ia(u){u.I&&(f.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Gn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),fr(g)}};function No(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ca(u){const g={};u=(u.g&&2<=Gn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(ne(u[T]))continue;var _=F(u[T]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const te=g[H]||[];g[H]=te,te.push(_)}D(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function ko(u){this.Aa=0,this.i=[],this.j=new on,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rs("baseRetryDelayMs",5e3,u),this.cb=rs("retryDelaySeedMs",1e4,u),this.Wa=rs("forwardChannelMaxRetries",2,u),this.wa=rs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ve(u&&u.concurrentRequestLimit),this.Da=new ud,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ko.prototype,n.la=8,n.G=1,n.connect=function(u,g,_,T){Oe(0),this.W=u,this.H=g||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Zl(this,null,this.W),ss(this)};function vn(u){if(Pa(u),u.G==3){var g=u.U++,_=_t(u.I);if(yt(_,"SID",u.K),yt(_,"RID",g),yt(_,"TYPE","terminate"),As(u,_),g=new at(u,u.j,g),g.L=2,g.v=Zr(_t(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=g.v,_=!0),_||(g.g=ec(g.j,null),g.g.ea(g.v)),g.F=Date.now(),gt(g)}Xl(u)}function Vr(u){u.g&&(jo(u),u.g.cancel(),u.g=null)}function Pa(u){Vr(u),u.u&&(f.clearTimeout(u.u),u.u=null),Aa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function ss(u){if(!Ne(u.h)&&!u.s){u.s=!0;var g=u.Ga;G||ue(),V||(G(),V=!0),ae.add(g,u),u.B=0}}function hd(u,g){return Xe(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=an(C(u.Ga,u,g),Jl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const H=new at(this,this.j,u);let te=this.o;if(this.S&&(te?(te=P(te),A(te,this.S)):te=this.S),this.m!==null||this.O||(H.H=te,te=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=ei(this,H,g),_=_t(this.I),yt(_,"RID",u),yt(_,"CVER",22),this.D&&yt(_,"X-HTTP-Session-Id",this.D),As(this,_),te&&(this.O?g="headers="+encodeURIComponent(String(bs(te)))+"&"+g:this.m&&Zs(_,this.m,te)),ft(this.h,H),this.Ua&&yt(_,"TYPE","init"),this.P?(yt(_,"$req",g),yt(_,"SID","null"),H.T=!0,Cs(H,_,null)):Cs(H,_,g),this.G=2}}else this.G==3&&(u?Ra(this,u):this.i.length==0||Ne(this.h)||Ra(this))};function Ra(u,g){var _;g?_=g.l:_=u.U++;const T=_t(u.I);yt(T,"SID",u.K),yt(T,"RID",_),yt(T,"AID",u.T),As(u,T),u.m&&u.o&&Zs(T,u.m,u.o),_=new at(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=ei(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ft(u.h,_),Cs(_,T,g)}function As(u,g){u.H&&pe(u.H,function(_,T){yt(g,T,_)}),u.l&&Xt({},function(_,T){yt(g,T,_)})}function ei(u,g,_){_=Math.min(u.i.length,_);var T=u.l?C(u.l.Na,u.l,u):null;e:{var H=u.i;let te=-1;for(;;){const we=["count="+_];te==-1?0<_?(te=H[0].g,we.push("ofs="+te)):te=0:we.push("ofs="+te);let vt=!0;for(let Zt=0;Zt<_;Zt++){let ot=H[Zt].g;const ln=H[Zt].map;if(ot-=te,0>ot)te=Math.max(0,H[Zt].g-100),vt=!1;else try{Kl(ln,we,"req"+ot+"_")}catch{T&&T(ln)}}if(vt){T=we.join("&");break e}}}return u=u.i.splice(0,_),g.D=u,T}function Hi(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;G||ue(),V||(G(),V=!0),ae.add(g,u),u.v=0}}function ba(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=an(C(u.Fa,u),Jl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Yl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=an(C(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),Vr(this),Yl(this))};function jo(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Yl(u){u.g=new at(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=_t(u.qa);yt(g,"RID","rpc"),yt(g,"SID",u.K),yt(g,"AID",u.T),yt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&yt(g,"TO",u.ja),yt(g,"TYPE","xmlhttp"),As(u,g),u.m&&u.o&&Zs(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Zr(_t(g)),_.m=null,_.P=!0,Js(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Vr(this),ba(this),Oe(19))};function Aa(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Na(u,g){var _=null;if(u.g==g){Aa(u),jo(u),u.g=null;var T=2}else if(Ie(u.h,g))_=g.D,kt(u.h,g),T=1;else return;if(u.G!=0){if(g.o)if(T==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var H=u.B;T=be(),qe(T,new qt(T,_)),ss(u)}else Hi(u);else if(H=g.s,H==3||H==0&&0<g.X||!(T==1&&hd(u,g)||T==2&&ba(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),H){case 1:Ns(u,5);break;case 4:Ns(u,10);break;case 3:Ns(u,6);break;default:Ns(u,2)}}}function Jl(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function Ns(u,g){if(u.j.info("Error code "+g),g==2){var _=C(u.fb,u),T=u.Xa;const H=!T;T=new bn(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Un(T,"https"),Zr(T),H?cd(T.toString(),_):Gl(T.toString(),_)}else Oe(2);u.G=0,u.l&&u.l.sa(g),Xl(u),Pa(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Xl(u){if(u.G=0,u.ka=[],u.l){const g=bt(u.h);(g.length!=0||u.i.length!=0)&&($(u.ka,g),$(u.ka,u.i),u.h.i.length=0,Z(u.i),u.i.length=0),u.l.ra()}}function Zl(u,g,_){var T=_ instanceof bn?_t(_):new bn(_);if(T.g!="")g&&(T.g=g+"."+T.g),pr(T,T.s);else{var H=f.location;T=H.protocol,g=g?g+"."+H.hostname:H.hostname,H=+H.port;var te=new bn(null);T&&Un(te,T),g&&(te.g=g),H&&pr(te,H),_&&(te.l=_),T=te}return _=u.D,g=u.ya,_&&g&&yt(T,_,g),yt(T,"VER",u.la),As(u,T),T}function ec(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new At(new Rs({eb:_})):new At(u.pa),g.Ha(u.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Do(){}n=Do.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ka(){}ka.prototype.g=function(u,g){return new zn(u,g)};function zn(u,g){Rt.call(this),this.g=new ko(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!ne(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ne(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new is(this)}K(zn,Rt),zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){vn(this.g)},zn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Fn(u),u=_);g.i.push(new Y(g.Ya++,u)),g.G==3&&ss(g)},zn.prototype.N=function(){this.g.l=null,delete this.j,vn(this.g),delete this.g,zn.aa.N.call(this)};function tc(u){ee.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}K(tc,ee);function nc(){le.call(this),this.status=1}K(nc,le);function is(u){this.g=u}K(is,Do),is.prototype.ua=function(){qe(this.g,"a")},is.prototype.ta=function(u){qe(this.g,new tc(u))},is.prototype.sa=function(u){qe(this.g,new nc)},is.prototype.ra=function(){qe(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,K_=function(){return new ka},G_=function(){return be()},q_=B,df={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kr.NO_ERROR=0,Kr.TIMEOUT=8,Kr.HTTP_ERROR=6,uu=Kr,wa.COMPLETE="complete",H_=wa,sn.EventType=I,I.OPEN="a",I.CLOSE="b",I.ERROR="c",I.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,ol=sn,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,W_=At}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const by="@firebase/firestore",Ay="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn("google-credentials-uid"),Vn.FIRST_PARTY=new Vn("first-party-uid"),Vn.MOCK_USER=new Vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Vf("@firebase/firestore");function to(){return pa.logLevel}function Pe(n,...e){if(pa.logLevel<=st.DEBUG){const t=e.map(Qf);pa.debug(`Firestore (${To}): ${n}`,...t)}}function Ks(n,...e){if(pa.logLevel<=st.ERROR){const t=e.map(Qf);pa.error(`Firestore (${To}): ${n}`,...t)}}function bi(n,...e){if(pa.logLevel<=st.WARN){const t=e.map(Qf);pa.warn(`Firestore (${To}): ${n}`,...t)}}function Qf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Q_(n,s,t)}function Q_(n,e,t){let s=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ks(s),new Error(s)}function pt(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||Q_(e,a,s)}function Ye(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends Ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Vn.UNAUTHENTICATED)))}shutdown(){}}class zI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BI{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0,42304);let s=this.i;const a=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Hs,e.enqueueRetryable((()=>a(this.currentUser)))};const h=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Hs)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(pt(typeof s.accessToken=="string",31837,{l:s}),new Y_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new Vn(e)}}class $I{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new $I(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ny{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pt(this.o===void 0,3512);const s=l=>{l.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,Pe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ny(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ny(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=qI(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function et(n,e){return n<e?-1:n>e?1:0}function hf(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return et(s,a);{const l=J_(),h=GI(l.encode(ky(n,t)),l.encode(ky(e,t)));return h!==0?h:et(s,a)}}t+=s>65535?2:1}return et(n.length,e.length)}function ky(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function GI(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return et(n[t],e[t]);return et(n.length,e.length)}function fo(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="__name__";class us{constructor(e,t,s){t===void 0?t=0:t>e.length&&$e(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&$e(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return us.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof us?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=us.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return et(e.length,t.length)}static compareSegments(e,t){const s=us.isNumericId(e),a=us.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?us.extractNumericId(e).compare(us.extractNumericId(t)):hf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class Ct extends us{construct(e,t,s){return new Ct(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new De(ce.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Ct(t)}static emptyPath(){return new Ct([])}}const KI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends us{construct(e,t,s){return new En(e,t,s)}static isValidIdentifier(e){return KI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jy}static keyField(){return new En([jy])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new De(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new De(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new De(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,a+=2}else f==="`"?(h=!h,a++):f!=="."||h?(s+=f,a++):(l(),a++)}if(l(),h)throw new De(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(t)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Ct.fromString(e))}static fromName(e){return new Me(Ct.fromString(e).popFirst(5))}static empty(){return new Me(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(n,e,t){if(!t)throw new De(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QI(n,e,t,s){if(e===!0&&s===!0)throw new De(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Dy(n){if(!Me.isDocumentKey(n))throw new De(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Vy(n){if(Me.isDocumentKey(n))throw new De(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Z_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$e(12329,{type:typeof n})}function Hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jf(n);throw new De(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ll(n,e){if(!Z_(n))throw new De(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const h=n[s];if(a&&typeof h!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new De(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=-62135596800,Oy=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Oy);return new Pt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ly)throw new De(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Oy}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ll(e,Pt._jsonSchema))return new Pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ly;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:Yt("string",Pt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new Pt(0,0))}static max(){return new Ge(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=-1;function YI(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Ge.fromTimestamp(s===1e9?new Pt(t+1,0):new Pt(t,s));return new Ai(a,Me.empty(),e)}function JI(n){return new Ai(n.readTime,n.key,Tl)}class Ai{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ai(Ge.min(),Me.empty(),Tl)}static max(){return new Ai(Ge.max(),Me.empty(),Tl)}}function XI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(n.documentKey,e.documentKey),t!==0?t:et(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==ZI)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,s)=>{t(e)}))}static reject(e){return new ie(((t,s)=>{s(e)}))}static waitFor(e){return new ie(((t,s)=>{let a=0,l=0,h=!1;e.forEach((f=>{++a,f.next((()=>{++l,h&&l===a&&t()}),(m=>s(m)))})),h=!0,l===a&&t()}))}static or(e){let t=ie.resolve(!1);for(const s of e)t=t.next((a=>a?ie.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new ie(((s,a)=>{const l=e.length,h=new Array(l);let f=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((w=>{h[v]=w,++f,f===l&&s(h)}),(w=>a(w)))}}))}static doWhile(e,t){return new ie(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function tC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Io(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Wu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=-1;function Hu(n){return n==null}function Cu(n){return n===0&&1/n==-1/0}function nC(n){return typeof n=="number"&&Number.isInteger(n)&&!Cu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="";function rC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=My(e)),e=sC(n.get(t),e);return My(e)}function sC(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case e0:t+="";break;default:t+=l}}return t}function My(n){return n+e0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function t0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){this.comparator=e,this.root=t||xn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xc(this.root,e,this.comparator,!0)}}class Xc{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??xn.RED,this.left=a??xn.EMPTY,this.right=l??xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new xn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return xn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new xn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uy(this.data.getIterator())}getIteratorFrom(e){return new Uy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new rn(this.comparator);return t.data=e,t}}class Uy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new hr([])}unionWith(e){let t=new rn(En.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new hr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new n0("Invalid base64 string: "+l):l}})(e);return new Sn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let h=0;h<a.length;++h)l+=String.fromCharCode(a[h]);return l})(e);return new Sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const iC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(n){if(pt(!!n,39018),typeof n=="string"){let e=0;const t=iC.exec(n);if(pt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Bt(n.seconds),nanos:Bt(n.nanos)}}function Bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ki(n){return typeof n=="string"?Sn.fromBase64String(n):Sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="server_timestamp",s0="__type__",i0="__previous_value__",a0="__local_write_time__";function Zf(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[s0])===null||t===void 0?void 0:t.stringValue)===r0}function qu(n){const e=n.mapValue.fields[i0];return Zf(e)?qu(e):e}function Sl(n){const e=Ni(n.mapValue.fields[a0].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t,s,a,l,h,f,m,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=w}}const Pu="(default)";class Il{constructor(e,t){this.projectId=e,this.database=t||Pu}static empty(){return new Il("","")}get isDefaultDatabase(){return this.database===Pu}isEqual(e){return e instanceof Il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="__type__",oC="__max__",Zc={mapValue:{}},l0="__vector__",Ru="value";function ji(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zf(n)?4:cC(n)?9007199254740991:lC(n)?10:11:$e(28295,{value:n})}function vs(n,e){if(n===e)return!0;const t=ji(n);if(t!==ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sl(n).isEqual(Sl(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const h=Ni(a.timestampValue),f=Ni(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return ki(a.bytesValue).isEqual(ki(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Bt(a.geoPointValue.latitude)===Bt(l.geoPointValue.latitude)&&Bt(a.geoPointValue.longitude)===Bt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Bt(a.integerValue)===Bt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const h=Bt(a.doubleValue),f=Bt(l.doubleValue);return h===f?Cu(h)===Cu(f):isNaN(h)&&isNaN(f)}return!1})(n,e);case 9:return fo(n.arrayValue.values||[],e.arrayValue.values||[],vs);case 10:case 11:return(function(a,l){const h=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Fy(h)!==Fy(f))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(f[m]===void 0||!vs(h[m],f[m])))return!1;return!0})(n,e);default:return $e(52216,{left:n})}}function Cl(n,e){return(n.values||[]).find((t=>vs(t,e)))!==void 0}function po(n,e){if(n===e)return 0;const t=ji(n),s=ji(e);if(t!==s)return et(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=Bt(l.integerValue||l.doubleValue),m=Bt(h.integerValue||h.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return zy(n.timestampValue,e.timestampValue);case 4:return zy(Sl(n),Sl(e));case 5:return hf(n.stringValue,e.stringValue);case 6:return(function(l,h){const f=ki(l),m=ki(h);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),m=h.split("/");for(let v=0;v<f.length&&v<m.length;v++){const w=et(f[v],m[v]);if(w!==0)return w}return et(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=et(Bt(l.latitude),Bt(h.latitude));return f!==0?f:et(Bt(l.longitude),Bt(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return By(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var f,m,v,w;const E=l.fields||{},C=h.fields||{},W=(f=E[Ru])===null||f===void 0?void 0:f.arrayValue,K=(m=C[Ru])===null||m===void 0?void 0:m.arrayValue,Z=et(((v=W==null?void 0:W.values)===null||v===void 0?void 0:v.length)||0,((w=K==null?void 0:K.values)===null||w===void 0?void 0:w.length)||0);return Z!==0?Z:By(W,K)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Zc.mapValue&&h===Zc.mapValue)return 0;if(l===Zc.mapValue)return 1;if(h===Zc.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),v=h.fields||{},w=Object.keys(v);m.sort(),w.sort();for(let E=0;E<m.length&&E<w.length;++E){const C=hf(m[E],w[E]);if(C!==0)return C;const W=po(f[m[E]],v[w[E]]);if(W!==0)return W}return et(m.length,w.length)})(n.mapValue,e.mapValue);default:throw $e(23264,{le:t})}}function zy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return et(n,e);const t=Ni(n),s=Ni(e),a=et(t.seconds,s.seconds);return a!==0?a:et(t.nanos,s.nanos)}function By(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=po(t[a],s[a]);if(l)return l}return et(t.length,s.length)}function mo(n){return ff(n)}function ff(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ni(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ki(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=ff(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const h of s)l?l=!1:a+=",",a+=`${h}:${ff(t.fields[h])}`;return a+"}"})(n.mapValue):$e(61005,{value:n})}function du(n){switch(ji(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qu(n);return e?16+du(e):16;case 5:return 2*n.stringValue.length;case 6:return ki(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+du(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return zi(s.fields,((l,h)=>{a+=l.length+du(h)})),a})(n.mapValue);default:throw $e(13486,{value:n})}}function pf(n){return!!n&&"integerValue"in n}function ep(n){return!!n&&"arrayValue"in n}function $y(n){return!!n&&"nullValue"in n}function Wy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hu(n){return!!n&&"mapValue"in n}function lC(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[o0])===null||t===void 0?void 0:t.stringValue)===l0}function pl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zi(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=pl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===oC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!hu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(t)}setAll(e){let t=En.emptyPath(),s={},a=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,a),s={},a=[],t=f.popLast()}h?s[f.lastSegment()]=pl(h):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());hu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];hu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){zi(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new nr(pl(this.value))}}function c0(n){const e=[];return zi(n.fields,((t,s)=>{const a=new En([t]);if(hu(s)){const l=c0(s.mapValue).fields;if(l.length===0)e.push(a);else for(const h of l)e.push(a.child(h))}else e.push(a)})),new hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t,s,a,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Ln(e,0,Ge.min(),Ge.min(),Ge.min(),nr.empty(),0)}static newFoundDocument(e,t,s,a){return new Ln(e,1,t,Ge.min(),s,a,0)}static newNoDocument(e,t){return new Ln(e,2,t,Ge.min(),Ge.min(),nr.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,Ge.min(),Ge.min(),nr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.position=e,this.inclusive=t}}function Hy(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],h=n.position[a];if(l.field.isKeyField()?s=Me.comparator(Me.fromName(h.referenceValue),t.key):s=po(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function qy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t="asc"){this.field=e,this.dir=t}}function uC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{}class nn extends u0{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new hC(e,t,s):t==="array-contains"?new mC(e,s):t==="in"?new gC(e,s):t==="not-in"?new yC(e,s):t==="array-contains-any"?new vC(e,s):new nn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new fC(e,s):new pC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(po(t,this.value)):t!==null&&ji(this.value)===ji(t)&&this.matchesComparison(po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _s extends u0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new _s(e,t)}matches(e){return d0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function d0(n){return n.op==="and"}function h0(n){return dC(n)&&d0(n)}function dC(n){for(const e of n.filters)if(e instanceof _s)return!1;return!0}function mf(n){if(n instanceof nn)return n.field.canonicalString()+n.op.toString()+mo(n.value);if(h0(n))return n.filters.map((e=>mf(e))).join(",");{const e=n.filters.map((t=>mf(t))).join(",");return`${n.op}(${e})`}}function f0(n,e){return n instanceof nn?(function(s,a){return a instanceof nn&&s.op===a.op&&s.field.isEqual(a.field)&&vs(s.value,a.value)})(n,e):n instanceof _s?(function(s,a){return a instanceof _s&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,h,f)=>l&&f0(h,a.filters[f])),!0):!1})(n,e):void $e(19439)}function p0(n){return n instanceof nn?(function(t){return`${t.field.canonicalString()} ${t.op} ${mo(t.value)}`})(n):n instanceof _s?(function(t){return t.op.toString()+" {"+t.getFilters().map(p0).join(" ,")+"}"})(n):"Filter"}class hC extends nn{constructor(e,t,s){super(e,t,s),this.key=Me.fromName(s.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class fC extends nn{constructor(e,t){super(e,"in",t),this.keys=m0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pC extends nn{constructor(e,t){super(e,"not-in",t),this.keys=m0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function m0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Me.fromName(s.referenceValue)))}class mC extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ep(t)&&Cl(t.arrayValue,this.value)}}class gC extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cl(this.value.arrayValue,t)}}class yC extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cl(this.value.arrayValue,t)}}class vC extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ep(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Cl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t=null,s=[],a=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=h,this.endAt=f,this.Pe=null}}function Gy(n,e=null,t=[],s=[],a=null,l=null,h=null){return new _C(n,e,t,s,a,l,h)}function tp(n){const e=Ye(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>mf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Hu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>mo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>mo(s))).join(",")),e.Pe=t}return e.Pe}function np(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!f0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qy(n.startAt,e.startAt)&&qy(n.endAt,e.endAt)}function gf(n){return Me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t=null,s=[],a=[],l=null,h="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function wC(n,e,t,s,a,l,h,f){return new Gu(n,e,t,s,a,l,h,f)}function rp(n){return new Gu(n)}function Ky(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function xC(n){return n.collectionGroup!==null}function ml(n){const e=Ye(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new rn(En.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((v=>{v.isInequality()&&(f=f.add(v.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Au(l,s))})),t.has(En.keyField().canonicalString())||e.Te.push(new Au(En.keyField(),s))}return e.Te}function ps(n){const e=Ye(n);return e.Ie||(e.Ie=EC(e,ml(n))),e.Ie}function EC(n,e){if(n.limitType==="F")return Gy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Au(a.field,l)}));const t=n.endAt?new bu(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new bu(n.startAt.position,n.startAt.inclusive):null;return Gy(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function yf(n,e,t){return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ku(n,e){return np(ps(n),ps(e))&&n.limitType===e.limitType}function g0(n){return`${tp(ps(n))}|lt:${n.limitType}`}function no(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>p0(a))).join(", ")}]`),Hu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>mo(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>mo(a))).join(",")),`Target(${s})`})(ps(n))}; limitType=${n.limitType})`}function Qu(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Me.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of ml(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(h,f,m){const v=Hy(h,f,m);return h.inclusive?v<=0:v<0})(s.startAt,ml(s),a)||s.endAt&&!(function(h,f,m){const v=Hy(h,f,m);return h.inclusive?v>=0:v>0})(s.endAt,ml(s),a))})(n,e)}function TC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y0(n){return(e,t)=>{let s=!1;for(const a of ml(n)){const l=SC(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function SC(n,e,t){const s=n.field.isKeyField()?Me.comparator(e.key,t.key):(function(l,h,f){const m=h.data.field(l),v=f.data.field(l);return m!==null&&v!==null?po(m,v):$e(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return $e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return t0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new Lt(Me.comparator);function Qs(){return IC}const v0=new Lt(Me.comparator);function ll(...n){let e=v0;for(const t of n)e=e.insert(t.key,t);return e}function _0(n){let e=v0;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function la(){return gl()}function w0(){return gl()}function gl(){return new ya((n=>n.toString()),((n,e)=>n.isEqual(e)))}const CC=new Lt(Me.comparator),PC=new rn(Me.comparator);function it(...n){let e=PC;for(const t of n)e=e.add(t);return e}const RC=new rn(et);function bC(){return RC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function x0(n){return{integerValue:""+n}}function AC(n,e){return nC(e)?x0(e):sp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(){this._=void 0}}function NC(n,e,t){return n instanceof Nu?(function(a,l){const h={fields:{[s0]:{stringValue:r0},[a0]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Zf(l)&&(l=qu(l)),l&&(h.fields[i0]=l),{mapValue:h}})(t,e):n instanceof Pl?T0(n,e):n instanceof Rl?S0(n,e):(function(a,l){const h=E0(a,l),f=Qy(h)+Qy(a.Ee);return pf(h)&&pf(a.Ee)?x0(f):sp(a.serializer,f)})(n,e)}function kC(n,e,t){return n instanceof Pl?T0(n,e):n instanceof Rl?S0(n,e):t}function E0(n,e){return n instanceof ku?(function(s){return pf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Nu extends Yu{}class Pl extends Yu{constructor(e){super(),this.elements=e}}function T0(n,e){const t=I0(e);for(const s of n.elements)t.some((a=>vs(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Rl extends Yu{constructor(e){super(),this.elements=e}}function S0(n,e){let t=I0(e);for(const s of n.elements)t=t.filter((a=>!vs(a,s)));return{arrayValue:{values:t}}}class ku extends Yu{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Qy(n){return Bt(n.integerValue||n.doubleValue)}function I0(n){return ep(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function jC(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof Pl&&a instanceof Pl||s instanceof Rl&&a instanceof Rl?fo(s.elements,a.elements,vs):s instanceof ku&&a instanceof ku?vs(s.Ee,a.Ee):s instanceof Nu&&a instanceof Nu})(n.transform,e.transform)}class DC{constructor(e,t){this.version=e,this.transformResults=t}}class Sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ju{}function C0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ip(n.key,Sr.none()):new Ol(n.key,n.data,Sr.none());{const t=n.data,s=nr.empty();let a=new rn(En.comparator);for(let l of e.fields)if(!a.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),a=a.add(l)}return new Bi(n.key,s,new hr(a.toArray()),Sr.none())}}function VC(n,e,t){n instanceof Ol?(function(a,l,h){const f=a.value.clone(),m=Jy(a.fieldTransforms,l,h.transformResults);f.setAll(m),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Bi?(function(a,l,h){if(!fu(a.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Jy(a.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(P0(a)),m.setAll(f),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function yl(n,e,t,s){return n instanceof Ol?(function(l,h,f,m){if(!fu(l.precondition,h))return f;const v=l.value.clone(),w=Xy(l.fieldTransforms,m,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(n,e,t,s):n instanceof Bi?(function(l,h,f,m){if(!fu(l.precondition,h))return f;const v=Xy(l.fieldTransforms,m,h),w=h.data;return w.setAll(P0(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,h,f){return fu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(n,e,t)}function LC(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=E0(s.transform,a||null);l!=null&&(t===null&&(t=nr.empty()),t.set(s.field,l))}return t||null}function Yy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&fo(s,a,((l,h)=>jC(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ol extends Ju{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Bi extends Ju{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function P0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Jy(n,e,t){const s=new Map;pt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const l=n[a],h=l.transform,f=e.data.field(l.field);s.set(l.field,kC(h,f,t[a]))}return s}function Xy(n,e,t){const s=new Map;for(const a of n){const l=a.transform,h=t.data.field(a.field);s.set(a.field,NC(l,h,e))}return s}class ip extends Ju{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OC extends Ju{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&VC(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=yl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=yl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=w0();return this.mutations.forEach((a=>{const l=e.get(a.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(a.key)?null:f;const m=C0(h,f);m!==null&&s.set(a.key,m),h.isValidDocument()||h.convertToNoDocument(Ge.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),it())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,((t,s)=>Yy(t,s)))&&fo(this.baseMutations,e.baseMutations,((t,s)=>Yy(t,s)))}}class ap{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){pt(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=(function(){return CC})();const l=e.mutations;for(let h=0;h<l.length;h++)a=a.insert(l[h].key,s[h].version);return new ap(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,lt;function zC(n){switch(n){case ce.OK:return $e(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return $e(15467,{code:n})}}function R0(n){if(n===void 0)return Ks("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Qt.OK:return ce.OK;case Qt.CANCELLED:return ce.CANCELLED;case Qt.UNKNOWN:return ce.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return ce.INTERNAL;case Qt.UNAVAILABLE:return ce.UNAVAILABLE;case Qt.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Qt.NOT_FOUND:return ce.NOT_FOUND;case Qt.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Qt.ABORTED:return ce.ABORTED;case Qt.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Qt.DATA_LOSS:return ce.DATA_LOSS;default:return $e(39323,{code:n})}}(lt=Qt||(Qt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new Ci([4294967295,4294967295],0);function Zy(n){const e=J_().encode(n),t=new $_;return t.update(e),new Uint8Array(t.digest())}function ev(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ci([t,s],0),new Ci([a,l],0)]}class op{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new cl(`Invalid padding: ${t}`);if(s<0)throw new cl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new cl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ci.fromNumber(this.fe)}pe(e,t,s){let a=e.add(t.multiply(Ci.fromNumber(s)));return a.compare(BC)===1&&(a=new Ci([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Zy(e),[s,a]=ev(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(s,a,l);if(!this.ye(h))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new op(l,a,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.fe===0)return;const t=Zy(e),[s,a]=ev(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(s,a,l);this.we(h)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Xu(Ge.min(),a,new Lt(et),Qs(),it())}}class Ml{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ml(s,t,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=a}}class b0{constructor(e,t){this.targetId=e,this.De=t}}class A0{constructor(e,t,s=Sn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class tv{constructor(){this.ve=0,this.Ce=nv(),this.Fe=Sn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=it(),t=it(),s=it();return this.Ce.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:$e(38017,{changeType:l})}})),new Ml(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=nv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class $C{constructor(e){this.We=e,this.Ge=new Map,this.ze=Qs(),this.je=eu(),this.Je=eu(),this.He=new Lt(et)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,a)=>{this.nt(a)&&t(a)}))}it(e){const t=e.targetId,s=e.De.count,a=this.st(t);if(a){const l=a.target;if(gf(l))if(s===0){const h=new Me(l.path);this.Xe(t,h,Ln.newNoDocument(h,Ge.min()))}else pt(s===1,20013,{expectedCount:s});else{const h=this.ot(t);if(h!==s){const f=this._t(e),m=f?this.ut(f,e,h):1;if(m!==0){this.rt(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let h,f;try{h=ki(s).toUint8Array()}catch(m){if(m instanceof n0)return bi("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new op(h,a,l)}catch(m){return bi(m instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.fe===0?null:f}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const h=this.We.lt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),a++)})),a}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const f=this.st(h);if(f){if(l.current&&gf(f.target)){const m=new Me(f.target.path);this.Tt(m).has(h)||this.It(h,m)||this.Xe(h,m,Ln.newNoDocument(m,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let s=it();this.Je.forEach(((l,h)=>{let f=!0;h.forEachWhile((m=>{const v=this.st(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const a=new Xu(e,t,this.He,this.ze,s);return this.ze=Qs(),this.je=eu(),this.Je=eu(),this.He=new Lt(et),a}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new tv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new rn(et),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new rn(et),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new tv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function eu(){return new Lt(Me.comparator)}function nv(){return new Lt(Me.comparator)}const WC={asc:"ASCENDING",desc:"DESCENDING"},HC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qC={and:"AND",or:"OR"};class GC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vf(n,e){return n.useProto3Json||Hu(e)?e:{value:e}}function ju(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function KC(n,e){return ju(n,e.toTimestamp())}function ms(n){return pt(!!n,49232),Ge.fromTimestamp((function(t){const s=Ni(t);return new Pt(s.seconds,s.nanos)})(n))}function lp(n,e){return _f(n,e).canonicalString()}function _f(n,e){const t=(function(a){return new Ct(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function k0(n){const e=Ct.fromString(n);return pt(O0(e),10190,{key:e.toString()}),e}function wf(n,e){return lp(n.databaseId,e.path)}function Hh(n,e){const t=k0(e);if(t.get(1)!==n.databaseId.projectId)throw new De(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(D0(t))}function j0(n,e){return lp(n.databaseId,e)}function QC(n){const e=k0(n);return e.length===4?Ct.emptyPath():D0(e)}function xf(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function D0(n){return pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function rv(n,e,t){return{name:wf(n,e),fields:t.value.mapValue.fields}}function YC(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:$e(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(pt(w===void 0||typeof w=="string",58123),Sn.fromBase64String(w||"")):(pt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Sn.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(v){const w=v.code===void 0?ce.UNKNOWN:R0(v.code);return new De(w,v.message||"")})(h);t=new A0(s,a,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Hh(n,s.document.name),l=ms(s.document.updateTime),h=s.document.createTime?ms(s.document.createTime):Ge.min(),f=new nr({mapValue:{fields:s.document.fields}}),m=Ln.newFoundDocument(a,l,h,f),v=s.targetIds||[],w=s.removedTargetIds||[];t=new pu(v,w,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Hh(n,s.document),l=s.readTime?ms(s.readTime):Ge.min(),h=Ln.newNoDocument(a,l),f=s.removedTargetIds||[];t=new pu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Hh(n,s.document),l=s.removedTargetIds||[];t=new pu([],l,a,null)}else{if(!("filter"in e))return $e(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,h=new UC(a,l),f=s.targetId;t=new b0(f,h)}}return t}function JC(n,e){let t;if(e instanceof Ol)t={update:rv(n,e.key,e.value)};else if(e instanceof ip)t={delete:wf(n,e.key)};else if(e instanceof Bi)t={update:rv(n,e.key,e.data),updateMask:aP(e.fieldMask)};else{if(!(e instanceof OC))return $e(16599,{Rt:e.type});t={verify:wf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof Nu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Pl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Rl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ku)return{fieldPath:h.field.canonicalString(),increment:f.Ee};throw $e(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:KC(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:$e(27497)})(n,e.precondition)),t}function XC(n,e){return n&&n.length>0?(pt(e!==void 0,14353),n.map((t=>(function(a,l){let h=a.updateTime?ms(a.updateTime):ms(l);return h.isEqual(Ge.min())&&(h=ms(l)),new DC(h,a.transformResults||[])})(t,e)))):[]}function ZC(n,e){return{documents:[j0(n,e.path)]}}function eP(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=j0(n,a);const l=(function(v){if(v.length!==0)return L0(_s.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((w=>(function(C){return{field:ro(C.field),direction:rP(C.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=vf(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:a}}function tP(n){let e=QC(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){pt(s===1,65062);const w=t.from[0];w.allDescendants?a=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(E){const C=V0(E);return C instanceof _s&&h0(C)?C.getFilters():[C]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((C=>(function(K){return new Au(so(K.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(C)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let C;return C=typeof E=="object"?E.value:E,Hu(C)?null:C})(t.limit));let m=null;t.startAt&&(m=(function(E){const C=!!E.before,W=E.values||[];return new bu(W,C)})(t.startAt));let v=null;return t.endAt&&(v=(function(E){const C=!E.before,W=E.values||[];return new bu(W,C)})(t.endAt)),wC(e,a,h,l,f,"F",m,v)}function nP(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function V0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=so(t.unaryFilter.field);return nn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=so(t.unaryFilter.field);return nn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=so(t.unaryFilter.field);return nn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=so(t.unaryFilter.field);return nn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return nn.create(so(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return _s.create(t.compositeFilter.filters.map((s=>V0(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(t.compositeFilter.op))})(n):$e(30097,{filter:n})}function rP(n){return WC[n]}function sP(n){return HC[n]}function iP(n){return qC[n]}function ro(n){return{fieldPath:n.canonicalString()}}function so(n){return En.fromServerFormat(n.fieldPath)}function L0(n){return n instanceof nn?(function(t){if(t.op==="=="){if(Wy(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NAN"}};if($y(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Wy(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NOT_NAN"}};if($y(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(t.field),op:sP(t.op),value:t.value}}})(n):n instanceof _s?(function(t){const s=t.getFilters().map((a=>L0(a)));return s.length===1?s[0]:{compositeFilter:{op:iP(t.op),filters:s}}})(n):$e(54877,{filter:n})}function aP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function O0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t,s,a,l=Ge.min(),h=Ge.min(),f=Sn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.gt=e}}function lP(n){const e=tP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.Dn=new uP}addToCollectionParentIndex(e,t){return this.Dn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Ai.min())}updateCollectionGroup(e,t,s){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class uP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new rn(Ct.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new rn(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},M0=41943040;class er{static withCacheSize(e){return new er(e,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(M0,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new go(0)}static ur(){return new go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="LruGarbageCollector",dP=1048576;function av([n,e],[t,s]){const a=et(n,t);return a===0?et(e,s):a}class hP{constructor(e){this.Tr=e,this.buffer=new rn(av),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();av(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Pe(iv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Io(t)?Pe(iv,"Ignoring IndexedDB error during garbage collection: ",t):await So(t)}await this.Rr(3e5)}))}}class pP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Wu.ue);const s=new hP(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(sv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,a,l,h,f,m,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,h=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(v=Date.now(),to()<=st.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${a} in `+(f-h)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(v-m)+`ms
Total Duration: ${v-w}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function mP(n,e){return new pP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(){this.changes=new ya((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&yl(s.mutation,a,hr.empty(),Pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,it()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=it()){const a=la();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let h=ll();return l.forEach(((f,m)=>{h=h.insert(f,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=la();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,it())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,a){let l=Qs();const h=gl(),f=(function(){return gl()})();return t.forEach(((m,v)=>{const w=s.get(v.key);a.has(v.key)&&(w===void 0||w.mutation instanceof Bi)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),yl(w.mutation,v,w.mutation.getFieldMask(),Pt.now())):h.set(v.key,hr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,w)=>h.set(v,w))),t.forEach(((v,w)=>{var E;return f.set(v,new yP(w,(E=h.get(v))!==null&&E!==void 0?E:null))})),f)))}recalculateAndSaveOverlays(e,t){const s=gl();let a=new Lt(((h,f)=>h-f)),l=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let w=s.get(m)||hr.empty();w=f.applyToLocalView(v,w),s.set(m,w);const E=(a.get(f.batchId)||it()).add(m);a=a.insert(f.batchId,E)}))})).next((()=>{const h=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,w=m.value,E=w0();w.forEach((C=>{if(!l.has(C)){const W=C0(t.get(C),s.get(C));W!==null&&E.set(C,W),l=l.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,E))}return ie.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(h){return Me.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const h=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ie.resolve(la());let f=Tl,m=l;return h.next((v=>ie.forEach(v,((w,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(w)?ie.resolve():this.remoteDocumentCache.getEntry(e,w).next((C=>{m=m.insert(w,C)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,it()))).next((w=>({batchId:f,changes:_0(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next((s=>{let a=ll();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let h=ll();return this.indexManager.getCollectionParents(e,l).next((f=>ie.forEach(f,(m=>{const v=(function(E,C){return new Gu(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next((w=>{w.forEach(((E,C)=>{h=h.insert(E,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((h=>{l.forEach(((m,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Ln.newInvalidDocument(w)))}));let f=ll();return h.forEach(((m,v)=>{const w=l.get(m);w!==void 0&&yl(w.mutation,v,hr.empty(),Pt.now()),Qu(t,v)&&(f=f.insert(m,v))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ms(a.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(a){return{name:a.name,query:lP(a.bundledQuery),readTime:ms(a.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.overlays=new Lt(Me.comparator),this.kr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=la();return ie.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.wt(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(s)),ie.resolve()}getOverlaysForCollection(e,t,s){const a=la(),l=t.length+1,h=new Me(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>s&&a.set(m.getKey(),m)}return ie.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Lt(((v,w)=>v-w));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let w=l.get(v.largestBatchId);w===null&&(w=la(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const f=la(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,w)=>f.set(v,w))),!(f.size()>=a)););return ie.resolve(f)}wt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const h=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new FC(t,s));let l=this.kr.get(t);l===void 0&&(l=it(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.qr=new rn(hn.Qr),this.$r=new rn(hn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new hn(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new hn(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new Me(new Ct([])),s=new hn(t,e),a=new hn(t,e+1),l=[];return this.$r.forEachInRange([s,a],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Me(new Ct([])),s=new hn(t,e),a=new hn(t,e+1);let l=it();return this.$r.forEachInRange([s,a],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new hn(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class hn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Me.comparator(e.key,t.key)||et(e.Hr,t.Hr)}static Ur(e,t){return et(e.Hr,t.Hr)||Me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new rn(hn.Qr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new MC(l,t,s,a);this.mutationQueue.push(h);for(const f of a)this.Yr=this.Yr.add(new hn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ie.resolve(h)}lookupMutationBatch(e,t){return ie.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),l=a<0?0:a;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Xf:this.er-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new hn(t,0),a=new hn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,a],(h=>{const f=this.Zr(h.Hr);l.push(f)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new rn(et);return t.forEach((a=>{const l=new hn(a,0),h=new hn(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(f=>{s=s.add(f.Hr)}))})),ie.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Me.isDocumentKey(l)||(l=l.child(""));const h=new hn(new Me(l),0);let f=new rn(et);return this.Yr.forEachWhile((m=>{const v=m.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(f=f.add(m.Hr)),!0)}),h),ie.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){pt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return ie.forEach(t.mutations,(a=>{const l=new hn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new hn(t,0),a=this.Yr.firstAfterOrEqual(s);return ie.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.ni=e,this.docs=(function(){return new Lt(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,h=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ie.resolve(s?s.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let s=Qs();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Ln.newInvalidDocument(a))})),ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=Qs();const h=t.path,f=new Me(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:w}}=m.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||XI(JI(w),s)<=0||(a.has(w.key)||Qu(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,s,a){$e(9500)}ri(e,t){return ie.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new SP(this)}getSize(e){return ie.resolve(this.size)}}class SP extends gP{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)})),ie.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.persistence=e,this.ii=new ya((t=>tp(t)),np),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.si=0,this.oi=new cp,this.targetCount=0,this._i=go.ar()}forEachTarget(e,t){return this.ii.forEach(((s,a)=>t(a))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),ie.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new go(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.hr(t),ie.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.ii.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),ie.waitFor(l).next((()=>a))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return ie.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),ie.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((h=>{l.push(a.markPotentiallyOrphaned(e,h))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return ie.resolve(s)}containsKey(e,t){return ie.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Wu(0),this.ci=!1,this.ci=!0,this.li=new xP,this.referenceDelegate=e(this),this.hi=new IP(this),this.indexManager=new cP,this.remoteDocumentCache=(function(a){return new TP(a)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new oP(t),this.Ti=new _P(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new EP(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){Pe("MemoryPersistence","Starting transaction:",e);const a=new CP(this.ui.next());return this.referenceDelegate.Ii(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return ie.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class CP extends eC{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Ai=new cp,this.Ri=null}static Vi(e){return new up(e)}get mi(){if(this.Ri)return this.Ri;throw $e(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),ie.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((a=>this.mi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.mi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.mi,(s=>{const a=Me.fromPath(s);return this.fi(e,a).next((l=>{l||t.removeEntry(a,Ge.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ie.or([()=>ie.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Du{constructor(e,t){this.persistence=e,this.gi=new ya((s=>rC(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=mP(this,t)}static Vi(e,t){return new Du(e,t)}Ii(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return ie.forEach(this.gi,((s,a)=>this.Sr(e,s,a).next((l=>l?ie.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,(h=>this.Sr(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Ge.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ie.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=du(e.data.value)),t}Sr(e,t,s){return ie.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return ie.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=a}static Es(e,t){let s=it(),a=it();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new dp(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return oT()?8:tC(On())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,a,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new PP;return this.ws(e,t,h).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,h,f.size)}))})).next((()=>l.result))}Ss(e,t,s,a){return s.documentReadCount<this.Vs?(to()<=st.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",no(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ie.resolve()):(to()<=st.DEBUG&&Pe("QueryEngine","Query:",no(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(to()<=st.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",no(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(t))):ie.resolve())}ps(e,t){if(Ky(t))return ie.resolve(null);let s=ps(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=yf(t,null,"F"),s=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=it(...l);return this.gs.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((m=>{const v=this.bs(t,f);return this.Ds(t,v,h,m.readTime)?this.ps(e,yf(t,null,"F")):this.vs(e,v,t,m)}))))})))))}ys(e,t,s,a){return Ky(t)||a.isEqual(Ge.min())?ie.resolve(null):this.gs.getDocuments(e,s).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,s,a)?ie.resolve(null):(to()<=st.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),no(t)),this.vs(e,h,t,YI(a,Tl)).next((f=>f)))}))}bs(e,t){let s=new rn(y0(e));return t.forEach(((a,l)=>{Qu(e,l)&&(s=s.add(l))})),s}Ds(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,t,s){return to()<=st.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",no(t)),this.gs.getDocumentsMatchingQuery(e,t,Ai.min(),s)}vs(e,t,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="LocalStore",bP=3e8;class AP{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new Lt(et),this.Ms=new ya((l=>tp(l)),np),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function NP(n,e,t,s){return new AP(n,e,t,s)}async function U0(n,e){const t=Ye(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let m=it();for(const v of a){h.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}for(const v of l){f.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(s,m).next((v=>({Bs:v,removedBatchIds:h,addedBatchIds:f})))}))}))}function kP(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,m,v,w){const E=v.batch,C=E.keys();let W=ie.resolve();return C.forEach((K=>{W=W.next((()=>w.getEntry(m,K))).next((Z=>{const $=v.docVersions.get(K);pt($!==null,48541),Z.version.compareTo($)<0&&(E.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),w.addEntry(Z)))}))})),W.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let m=it();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(m=m.add(f.batch.mutations[v].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function z0(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function jP(n,e){const t=Ye(n),s=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const f=[];e.targetChanges.forEach(((w,E)=>{const C=a.get(E);if(!C)return;f.push(t.hi.removeMatchingKeys(l,w.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,w.addedDocuments,E))));let W=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?W=W.withResumeToken(Sn.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):w.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(w.resumeToken,s)),a=a.insert(E,W),(function(Z,$,re){return Z.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=bP?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(C,W,w)&&f.push(t.hi.updateTargetData(l,W))}));let m=Qs(),v=it();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(DP(l,h,e.documentUpdates).next((w=>{m=w.Ls,v=w.ks}))),!s.isEqual(Ge.min())){const w=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(w)}return ie.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.Fs=a,l)))}function DP(n,e,t){let s=it(),a=it();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let h=Qs();return t.forEach(((f,m)=>{const v=l.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Ge.min())?(e.removeEntry(f,m.readTime),h=h.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),h=h.insert(f,m)):Pe(hp,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)})),{Ls:h,ks:a}}))}function VP(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Xf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function LP(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.hi.getTargetData(s,e).next((l=>l?(a=l,ie.resolve(a)):t.hi.allocateTargetId(s).next((h=>(a=new xi(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function Ef(n,e,t){const s=Ye(n),a=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!Io(h))throw h;Pe(hp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function ov(n,e,t){const s=Ye(n);let a=Ge.min(),l=it();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,v,w){const E=Ye(m),C=E.Ms.get(w);return C!==void 0?ie.resolve(E.Fs.get(C)):E.hi.getTargetData(v,w)})(s,h,ps(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(h,f.targetId).next((m=>{l=m}))})).next((()=>s.Cs.getDocumentsMatchingQuery(h,e,t?a:Ge.min(),t?l:it()))).next((f=>(OP(s,TC(e),f),{documents:f,qs:l})))))}function OP(n,e,t){let s=n.xs.get(e)||Ge.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.xs.set(e,s)}class lv{constructor(){this.activeTargetIds=bC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MP{constructor(){this.Fo=new lv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new lv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="ConnectivityMonitor";class uv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Pe(cv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Pe(cv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function Tf(){return tu===null?tu=(function(){return 268435456+Math.round(2147483648*Math.random())})():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="RestConnection",UP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===Pu?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,l){const h=Tf(),f=this.Go(e,t.toUriEncodedString());Pe(qh,`Sending RPC '${e}' ${h}:`,f,s);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,a,l);const{host:v}=new URL(f),w=wo(v);return this.jo(e,f,m,s,w).then((E=>(Pe(qh,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw bi(qh,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",s),E}))}Jo(e,t,s,a,l,h){return this.Wo(e,t,s,a,l)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+To})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}Go(e,t){const s=UP[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class $P extends zP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,a,l){const h=Tf();return new Promise(((f,m)=>{const v=new W_;v.setWithCredentials(!0),v.listenOnce(H_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case uu.NO_ERROR:const E=v.getResponseJson();Pe(Dn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case uu.TIMEOUT:Pe(Dn,`RPC '${e}' ${h} timed out`),m(new De(ce.DEADLINE_EXCEEDED,"Request time out"));break;case uu.HTTP_ERROR:const C=v.getStatus();if(Pe(Dn,`RPC '${e}' ${h} failed with status:`,C,"response text:",v.getResponseText()),C>0){let W=v.getResponseJson();Array.isArray(W)&&(W=W[0]);const K=W==null?void 0:W.error;if(K&&K.status&&K.message){const Z=(function(re){const ne=re.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ne)>=0?ne:ce.UNKNOWN})(K.status);m(new De(Z,K.message))}else m(new De(ce.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new De(ce.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{c_:e,streamId:h,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{Pe(Dn,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(a);Pe(Dn,`RPC '${e}' ${h} sending request:`,a),v.send(t,"POST",w,s,15)}))}P_(e,t,s){const a=Tf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=K_(),f=G_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const w=l.join("");Pe(Dn,`Creating RPC '${e}' stream ${a}: ${w}`,m);const E=h.createWebChannel(w,m);this.T_(E);let C=!1,W=!1;const K=new BP({Ho:$=>{W?Pe(Dn,`Not sending because RPC '${e}' stream ${a} is closed:`,$):(C||(Pe(Dn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),C=!0),Pe(Dn,`RPC '${e}' stream ${a} sending:`,$),E.send($))},Yo:()=>E.close()}),Z=($,re,ne)=>{$.listen(re,(oe=>{try{ne(oe)}catch(me){setTimeout((()=>{throw me}),0)}}))};return Z(E,ol.EventType.OPEN,(()=>{W||(Pe(Dn,`RPC '${e}' stream ${a} transport opened.`),K.s_())})),Z(E,ol.EventType.CLOSE,(()=>{W||(W=!0,Pe(Dn,`RPC '${e}' stream ${a} transport closed`),K.__(),this.I_(E))})),Z(E,ol.EventType.ERROR,($=>{W||(W=!0,bi(Dn,`RPC '${e}' stream ${a} transport errored. Name:`,$.name,"Message:",$.message),K.__(new De(ce.UNAVAILABLE,"The operation could not be completed")))})),Z(E,ol.EventType.MESSAGE,($=>{var re;if(!W){const ne=$.data[0];pt(!!ne,16349);const oe=ne,me=(oe==null?void 0:oe.error)||((re=oe[0])===null||re===void 0?void 0:re.error);if(me){Pe(Dn,`RPC '${e}' stream ${a} received error:`,me);const Te=me.status;let pe=(function(k){const A=Qt[k];if(A!==void 0)return R0(A)})(Te),D=me.message;pe===void 0&&(pe=ce.INTERNAL,D="Unknown error status: "+Te+" with message "+me.message),W=!0,K.__(new De(pe,D)),E.close()}else Pe(Dn,`RPC '${e}' stream ${a} received:`,ne),K.a_(ne)}})),Z(f,q_.STAT_EVENT,($=>{$.stat===df.PROXY?Pe(Dn,`RPC '${e}' stream ${a} detected buffering proxy`):$.stat===df.NOPROXY&&Pe(Dn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{K.o_()}),0),K}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(n){return new GC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-s);a>0&&Pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="PersistentStream";class $0{constructor(e,t,s,a,l,h,f,m){this.Fi=e,this.w_=s,this.S_=a,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new B0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Ks(t.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.b_===t&&this.W_(s,a)}),(s=>{e((()=>{const a=new De(ce.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{s((()=>this.G_(a)))})),this.stream.onMessage((a=>{s((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Pe(dv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Pe(dv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WP extends $0{constructor(e,t,s,a,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=YC(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ge.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ge.min():h.readTime?ms(h.readTime):Ge.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=xf(this.serializer),t.addTarget=(function(l,h){let f;const m=h.target;if(f=gf(m)?{documents:ZC(l,m)}:{query:eP(l,m).Vt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=N0(l,h.resumeToken);const v=vf(l,h.expectedCount);v!==null&&(f.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ge.min())>0){f.readTime=ju(l,h.snapshotVersion.toTimestamp());const v=vf(l,h.expectedCount);v!==null&&(f.expectedCount=v)}return f})(this.serializer,e);const s=nP(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=xf(this.serializer),t.removeTarget=e,this.k_(t)}}class HP extends $0{constructor(e,t,s,a,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=XC(e.writeResults,e.commitTime),s=ms(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=xf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>JC(this.serializer,s)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{}class GP extends qP{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new De(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,_f(t,s),a,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new De(ce.UNKNOWN,l.toString())}))}Jo(e,t,s,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Jo(e,_f(t,s),a,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new De(ce.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class KP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ks(t),this._a=!1):Pe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="RemoteStore";class QP{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{s.enqueueAndForget((async()=>{va(this)&&(Pe(ma,"Restarting streams for network reachability change."),await(async function(m){const v=Ye(m);v.Ia.add(4),await Fl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await ed(v)})(this))}))})),this.Aa=new KP(s,a)}}async function ed(n){if(va(n))for(const e of n.da)await e(!0)}async function Fl(n){for(const e of n.da)await e(!1)}function W0(n,e){const t=Ye(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),gp(t)?mp(t):Co(t).x_()&&pp(t,e))}function fp(n,e){const t=Ye(n),s=Co(t);t.Ta.delete(e),s.x_()&&H0(t,e),t.Ta.size===0&&(s.x_()?s.B_():va(t)&&t.Aa.set("Unknown"))}function pp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Co(n).H_(e)}function H0(n,e){n.Ra.$e(e),Co(n).Y_(e)}function mp(n){n.Ra=new $C({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Co(n).start(),n.Aa.aa()}function gp(n){return va(n)&&!Co(n).M_()&&n.Ta.size>0}function va(n){return Ye(n).Ia.size===0}function q0(n){n.Ra=void 0}async function YP(n){n.Aa.set("Online")}async function JP(n){n.Ta.forEach(((e,t)=>{pp(n,e)}))}async function XP(n,e){q0(n),gp(n)?(n.Aa.la(e),mp(n)):n.Aa.set("Unknown")}async function ZP(n,e,t){if(n.Aa.set("Online"),e instanceof A0&&e.state===2&&e.cause)try{await(async function(a,l){const h=l.cause;for(const f of l.targetIds)a.Ta.has(f)&&(await a.remoteSyncer.rejectListen(f,h),a.Ta.delete(f),a.Ra.removeTarget(f))})(n,e)}catch(s){Pe(ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vu(n,s)}else if(e instanceof pu?n.Ra.Ye(e):e instanceof b0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ge.min()))try{const s=await z0(n.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Ra.Pt(h);return f.targetChanges.forEach(((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const w=l.Ta.get(v);w&&l.Ta.set(v,w.withResumeToken(m.resumeToken,h))}})),f.targetMismatches.forEach(((m,v)=>{const w=l.Ta.get(m);if(!w)return;l.Ta.set(m,w.withResumeToken(Sn.EMPTY_BYTE_STRING,w.snapshotVersion)),H0(l,m);const E=new xi(w.target,m,v,w.sequenceNumber);pp(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){Pe(ma,"Failed to raise snapshot:",s),await Vu(n,s)}}async function Vu(n,e,t){if(!Io(e))throw e;n.Ia.add(1),await Fl(n),n.Aa.set("Offline"),t||(t=()=>z0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Pe(ma,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await ed(n)}))}function G0(n,e){return e().catch((t=>Vu(n,t,e)))}async function td(n){const e=Ye(n),t=Di(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Xf;for(;eR(e);)try{const a=await VP(e.localStore,s);if(a===null){e.Pa.length===0&&t.B_();break}s=a.batchId,tR(e,a)}catch(a){await Vu(e,a)}K0(e)&&Q0(e)}function eR(n){return va(n)&&n.Pa.length<10}function tR(n,e){n.Pa.push(e);const t=Di(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function K0(n){return va(n)&&!Di(n).M_()&&n.Pa.length>0}function Q0(n){Di(n).start()}async function nR(n){Di(n).na()}async function rR(n){const e=Di(n);for(const t of n.Pa)e.X_(t.mutations)}async function sR(n,e,t){const s=n.Pa.shift(),a=ap.from(s,e,t);await G0(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await td(n)}async function iR(n,e){e&&Di(n).Z_&&await(async function(s,a){if((function(h){return zC(h)&&h!==ce.ABORTED})(a.code)){const l=s.Pa.shift();Di(s).N_(),await G0(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await td(s)}})(n,e),K0(n)&&Q0(n)}async function hv(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Pe(ma,"RemoteStore received new credentials");const s=va(t);t.Ia.add(3),await Fl(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await ed(t)}async function aR(n,e){const t=Ye(n);e?(t.Ia.delete(2),await ed(t)):e||(t.Ia.add(2),await Fl(t),t.Aa.set("Unknown"))}function Co(n){return n.Va||(n.Va=(function(t,s,a){const l=Ye(t);return l.ia(),new WP(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:YP.bind(null,n),e_:JP.bind(null,n),n_:XP.bind(null,n),J_:ZP.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),gp(n)?mp(n):n.Aa.set("Unknown")):(await n.Va.stop(),q0(n))}))),n.Va}function Di(n){return n.ma||(n.ma=(function(t,s,a){const l=Ye(t);return l.ia(),new HP(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:nR.bind(null,n),n_:iR.bind(null,n),ea:rR.bind(null,n),ta:sR.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await td(n)):(await n.ma.stop(),n.Pa.length>0&&(Pe(ma,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const h=Date.now()+s,f=new yp(e,t,h,a,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new De(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(n,e){if(Ks("AsyncQueue",`${e}: ${n}`),Io(n))return new De(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{static emptySet(e){return new co(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Me.comparator(t.key,s.key):(t,s)=>Me.comparator(t.key,s.key),this.keyedMap=ll(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(){this.fa=new Lt(Me.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):$e(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class yo{constructor(e,t,s,a,l,h,f,m,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,a,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new yo(e,t,co.emptySet(t),h,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class lR{constructor(){this.queries=pv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const a=Ye(t),l=a.queries;a.queries=pv(),l.forEach(((h,f)=>{for(const m of f.wa)m.onError(s)}))})(this,new De(ce.ABORTED,"Firestore shutting down"))}}function pv(){return new ya((n=>g0(n)),Ku)}async function Y0(n,e){const t=Ye(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.ba()&&(s=2):(l=new oR,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(a,!0);break;case 1:l.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(h){const f=vp(h,`Initialization of query '${no(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&_p(t)}async function J0(n,e){const t=Ye(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function cR(n,e){const t=Ye(n);let s=!1;for(const a of e){const l=a.query,h=t.queries.get(l);if(h){for(const f of h.wa)f.Ca(a)&&(s=!0);h.ya=a}}s&&_p(t)}function uR(n,e,t){const s=Ye(n),a=s.queries.get(e);if(a)for(const l of a.wa)l.onError(t);s.queries.delete(e)}function _p(n){n.Da.forEach((e=>{e.next()}))}var Sf,mv;(mv=Sf||(Sf={})).Fa="default",mv.Cache="cache";class X0{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new yo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.key=e}}class ew{constructor(e){this.key=e}}class dR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=it(),this.mutatedKeys=it(),this.Xa=y0(e),this.eu=new co(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new fv,a=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((w,E)=>{const C=a.get(w),W=Qu(this.query,E)?E:null,K=!!C&&this.mutatedKeys.has(C.key),Z=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let $=!1;C&&W?C.data.isEqual(W.data)?K!==Z&&(s.track({type:3,doc:W}),$=!0):this.iu(C,W)||(s.track({type:2,doc:W}),$=!0,(m&&this.Xa(W,m)>0||v&&this.Xa(W,v)<0)&&(f=!0)):!C&&W?(s.track({type:0,doc:W}),$=!0):C&&!W&&(s.track({type:1,doc:C}),$=!0,(m||v)&&(f=!0)),$&&(W?(h=h.add(W),l=Z?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{eu:h,ru:s,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((w,E)=>(function(W,K){const Z=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{At:$})}};return Z(W)-Z(K)})(w.type,E.type)||this.Xa(w.doc,E.doc))),this.su(s),a=a!=null&&a;const f=t&&!a?this.ou():[],m=this.Za.size===0&&this.current&&!a?1:0,v=m!==this.Ya;return this.Ya=m,h.length!==0||v?{snapshot:new yo(this.query,e.eu,l,h,e.mutatedKeys,m===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new fv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=it(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new ew(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new Z0(s))})),t}uu(e){this.Ha=e.qs,this.Za=it();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return yo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const wp="SyncEngine";class hR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class fR{constructor(e){this.key=e,this.lu=!1}}class pR{constructor(e,t,s,a,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new ya((f=>g0(f)),Ku),this.Tu=new Map,this.Iu=new Set,this.du=new Lt(Me.comparator),this.Eu=new Map,this.Au=new cp,this.Ru={},this.Vu=new Map,this.mu=go.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function mR(n,e,t=!0){const s=aw(n);let a;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await tw(s,e,t,!0),a}async function gR(n,e){const t=aw(n);await tw(t,e,!0,!1)}async function tw(n,e,t,s){const a=await LP(n.localStore,ps(e)),l=a.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await yR(n,e,l,h==="current",a.resumeToken)),n.isPrimaryClient&&t&&W0(n.remoteStore,a),f}async function yR(n,e,t,s,a){n.gu=(E,C,W)=>(async function(Z,$,re,ne){let oe=$.view.nu(re);oe.Ds&&(oe=await ov(Z.localStore,$.query,!1).then((({documents:D})=>$.view.nu(D,oe))));const me=ne&&ne.targetChanges.get($.targetId),Te=ne&&ne.targetMismatches.get($.targetId)!=null,pe=$.view.applyChanges(oe,Z.isPrimaryClient,me,Te);return yv(Z,$.targetId,pe._u),pe.snapshot})(n,E,C,W);const l=await ov(n.localStore,e,!0),h=new dR(e,l.qs),f=h.nu(l.documents),m=Ml.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),v=h.applyChanges(f,n.isPrimaryClient,m);yv(n,t,v._u);const w=new hR(e,t,h);return n.Pu.set(e,w),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),v.snapshot}async function vR(n,e,t){const s=Ye(n),a=s.Pu.get(e),l=s.Tu.get(a.targetId);if(l.length>1)return s.Tu.set(a.targetId,l.filter((h=>!Ku(h,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Ef(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&fp(s.remoteStore,a.targetId),If(s,a.targetId)})).catch(So)):(If(s,a.targetId),await Ef(s.localStore,a.targetId,!0))}async function _R(n,e){const t=Ye(n),s=t.Pu.get(e),a=t.Tu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),fp(t.remoteStore,s.targetId))}async function wR(n,e,t){const s=PR(n);try{const a=await(function(h,f){const m=Ye(h),v=Pt.now(),w=f.reduce(((W,K)=>W.add(K.key)),it());let E,C;return m.persistence.runTransaction("Locally write mutations","readwrite",(W=>{let K=Qs(),Z=it();return m.Os.getEntries(W,w).next(($=>{K=$,K.forEach(((re,ne)=>{ne.isValidDocument()||(Z=Z.add(re))}))})).next((()=>m.localDocuments.getOverlayedDocuments(W,K))).next(($=>{E=$;const re=[];for(const ne of f){const oe=LC(ne,E.get(ne.key).overlayedDocument);oe!=null&&re.push(new Bi(ne.key,oe,c0(oe.value.mapValue),Sr.exists(!0)))}return m.mutationQueue.addMutationBatch(W,v,re,f)})).next(($=>{C=$;const re=$.applyToLocalDocumentSet(E,Z);return m.documentOverlayCache.saveOverlays(W,$.batchId,re)}))})).then((()=>({batchId:C.batchId,changes:_0(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(h,f,m){let v=h.Ru[h.currentUser.toKey()];v||(v=new Lt(et)),v=v.insert(f,m),h.Ru[h.currentUser.toKey()]=v})(s,a.batchId,t),await Ul(s,a.changes),await td(s.remoteStore)}catch(a){const l=vp(a,"Failed to persist write");t.reject(l)}}async function nw(n,e){const t=Ye(n);try{const s=await jP(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const h=t.Eu.get(l);h&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?h.lu=!0:a.modifiedDocuments.size>0?pt(h.lu,14607):a.removedDocuments.size>0&&(pt(h.lu,42227),h.lu=!1))})),await Ul(t,s,e)}catch(s){await So(s)}}function gv(n,e,t){const s=Ye(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Pu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(h,f){const m=Ye(h);m.onlineState=f;let v=!1;m.queries.forEach(((w,E)=>{for(const C of E.wa)C.va(f)&&(v=!0)})),v&&_p(m)})(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function xR(n,e,t){const s=Ye(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Eu.get(e),l=a&&a.key;if(l){let h=new Lt(Me.comparator);h=h.insert(l,Ln.newNoDocument(l,Ge.min()));const f=it().add(l),m=new Xu(Ge.min(),new Map,new Lt(et),h,f);await nw(s,m),s.du=s.du.remove(l),s.Eu.delete(e),xp(s)}else await Ef(s.localStore,e,!1).then((()=>If(s,e,t))).catch(So)}async function ER(n,e){const t=Ye(n),s=e.batch.batchId;try{const a=await kP(t.localStore,e);sw(t,s,null),rw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ul(t,a)}catch(a){await So(a)}}async function TR(n,e,t){const s=Ye(n);try{const a=await(function(h,f){const m=Ye(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return m.mutationQueue.lookupMutationBatch(v,f).next((E=>(pt(E!==null,37113),w=E.keys(),m.mutationQueue.removeMutationBatch(v,E)))).next((()=>m.mutationQueue.performConsistencyCheck(v))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(v,w,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>m.localDocuments.getDocuments(v,w)))}))})(s.localStore,e);sw(s,e,t),rw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ul(s,a)}catch(a){await So(a)}}function rw(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function sw(n,e,t){const s=Ye(n);let a=s.Ru[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function If(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((s=>{n.Au.containsKey(s)||iw(n,s)}))}function iw(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(fp(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),xp(n))}function yv(n,e,t){for(const s of t)s instanceof Z0?(n.Au.addReference(s.key,e),SR(n,s)):s instanceof ew?(Pe(wp,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||iw(n,s.key)):$e(19791,{yu:s})}function SR(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(Pe(wp,"New document in limbo: "+t),n.Iu.add(s),xp(n))}function xp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Me(Ct.fromString(e)),s=n.mu.next();n.Eu.set(s,new fR(t)),n.du=n.du.insert(t,s),W0(n.remoteStore,new xi(ps(rp(t.path)),s,"TargetPurposeLimboResolution",Wu.ue))}}async function Ul(n,e,t){const s=Ye(n),a=[],l=[],h=[];s.Pu.isEmpty()||(s.Pu.forEach(((f,m)=>{h.push(s.gu(m,e,t).then((v=>{var w;if((v||t)&&s.isPrimaryClient){const E=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(m.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(v){a.push(v);const E=dp.Es(m.targetId,v);l.push(E)}})))})),await Promise.all(h),s.hu.J_(a),await(async function(m,v){const w=Ye(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(v,(C=>ie.forEach(C.Is,(W=>w.persistence.referenceDelegate.addReference(E,C.targetId,W))).next((()=>ie.forEach(C.ds,(W=>w.persistence.referenceDelegate.removeReference(E,C.targetId,W)))))))))}catch(E){if(!Io(E))throw E;Pe(hp,"Failed to update sequence numbers: "+E)}for(const E of v){const C=E.targetId;if(!E.fromCache){const W=w.Fs.get(C),K=W.snapshotVersion,Z=W.withLastLimboFreeSnapshotVersion(K);w.Fs=w.Fs.insert(C,Z)}}})(s.localStore,l))}async function IR(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Pe(wp,"User change. New user:",e.toKey());const s=await U0(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((f=>{f.forEach((m=>{m.reject(new De(ce.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ul(t,s.Bs)}}function CR(n,e){const t=Ye(n),s=t.Eu.get(e);if(s&&s.lu)return it().add(s.key);{let a=it();const l=t.Tu.get(e);if(!l)return a;for(const h of l){const f=t.Pu.get(h);a=a.unionWith(f.view.tu)}return a}}function aw(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xR.bind(null,e),e.hu.J_=cR.bind(null,e.eventManager),e.hu.pu=uR.bind(null,e.eventManager),e}function PR(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ER.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TR.bind(null,e),e}class Lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return NP(this.persistence,new RP,e.initialUser,this.serializer)}Du(e){return new F0(up.Vi,this.serializer)}bu(e){return new MP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lu.provider={build:()=>new Lu};class RR extends Lu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){pt(this.persistence.referenceDelegate instanceof Du,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new fP(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new F0((s=>Du.Vi(s,t)),this.serializer)}}class Cf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=IR.bind(null,this.syncEngine),await aR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new lR})()}createDatastore(e){const t=Zu(e.databaseInfo.databaseId),s=(function(l){return new $P(l)})(e.databaseInfo);return(function(l,h,f,m){return new GP(l,h,f,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,h,f){return new QP(s,a,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>gv(this.syncEngine,t,0)),(function(){return uv.C()?new uv:new FP})())}createSyncEngine(e,t){return(function(a,l,h,f,m,v,w){const E=new pR(a,l,h,f,m,v);return w&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ye(a);Pe(ma,"RemoteStore shutting down."),l.Ia.add(5),await Fl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Cf.provider={build:()=>new Cf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ks("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class bR{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Vn.UNAUTHENTICATED,this.clientId=Yf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{Pe(Vi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(Pe(Vi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=vp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Kh(n,e){n.asyncQueue.verifyOperationInProgress(),Pe(Vi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await U0(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>{bi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Pe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{bi("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),n._offlineComponents=e}async function vv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await AR(n);Pe(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>hv(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>hv(e.remoteStore,a))),n._onlineComponents=e}async function AR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe(Vi,"Using user provided OfflineComponentProvider");try{await Kh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;bi("Error using user provided cache. Falling back to memory cache: "+t),await Kh(n,new Lu)}}else Pe(Vi,"Using default OfflineComponentProvider"),await Kh(n,new RR(void 0));return n._offlineComponents}async function lw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe(Vi,"Using user provided OnlineComponentProvider"),await vv(n,n._uninitializedComponentsProvider._online)):(Pe(Vi,"Using default OnlineComponentProvider"),await vv(n,new Cf))),n._onlineComponents}function NR(n){return lw(n).then((e=>e.syncEngine))}async function cw(n){const e=await lw(n),t=e.eventManager;return t.onListen=mR.bind(null,e.syncEngine),t.onUnlisten=vR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_R.bind(null,e.syncEngine),t}function kR(n,e,t={}){const s=new Hs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,m,v){const w=new ow({next:C=>{w.Ou(),h.enqueueAndForget((()=>J0(l,E)));const W=C.docs.has(f);!W&&C.fromCache?v.reject(new De(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&C.fromCache&&m&&m.source==="server"?v.reject(new De(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),E=new X0(rp(f.path),w,{includeMetadataChanges:!0,ka:!0});return Y0(l,E)})(await cw(n),n.asyncQueue,e,t,s))),s.promise}function jR(n,e,t={}){const s=new Hs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,m,v){const w=new ow({next:C=>{w.Ou(),h.enqueueAndForget((()=>J0(l,E))),C.fromCache&&m.source==="server"?v.reject(new De(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(C)},error:C=>v.reject(C)}),E=new X0(f,w,{includeMetadataChanges:!0,ka:!0});return Y0(l,E)})(await cw(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="firestore.googleapis.com",wv=!0;class xv{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new De(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dw,this.ssl=wv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:wv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=M0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dP)throw new De(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new De(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new De(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new De(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new De(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new De(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new UI;switch(s.type){case"firstParty":return new WI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new De(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=_v.get(t);s&&(Pe("ComponentProvider","Removing Datastore"),_v.delete(t),s.terminate())})(this),Promise.resolve()}}function DR(n,e,t,s={}){var a;n=Hr(n,nd);const l=wo(e),h=n._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;l&&(Zv(`https://${m}`),e_("Firestore",!0)),h.host!==dw&&h.host!==m&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:m,ssl:l,emulatorOptions:s});if(!ua(v,f)&&(n._setSettings(v),s.mockUserToken)){let w,E;if(typeof s.mockUserToken=="string")w=s.mockUserToken,E=Vn.MOCK_USER;else{w=XE(s.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new De(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Vn(C)}n._authCredentials=new zI(new Y_(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new rd(this.firestore,e,this._query)}}class Jt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ll(t,Jt._jsonSchema))return new Jt(e,s||null,new Me(Ct.fromString(t.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:Yt("string",Jt._jsonSchemaVersion),referencePath:Yt("string")};class Pi extends rd{constructor(e,t,s){super(e,t,rp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new Me(e))}withConverter(e){return new Pi(this.firestore,e,this._path)}}function tr(n,e,...t){if(n=Tn(n),X_("collection","path",e),n instanceof nd){const s=Ct.fromString(e,...t);return Vy(s),new Pi(n,null,s)}{if(!(n instanceof Jt||n instanceof Pi))throw new De(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ct.fromString(e,...t));return Vy(s),new Pi(n.firestore,null,s)}}function It(n,e,...t){if(n=Tn(n),arguments.length===1&&(e=Yf.newId()),X_("doc","path",e),n instanceof nd){const s=Ct.fromString(e,...t);return Dy(s),new Jt(n,null,new Me(s))}{if(!(n instanceof Jt||n instanceof Pi))throw new De(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ct.fromString(e,...t));return Dy(s),new Jt(n.firestore,n instanceof Pi?n.converter:null,new Me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="AsyncQueue";class Tv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new B0(this,"async_queue_retry"),this.oc=()=>{const s=Gh();s&&Pe(Ev,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Gh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Gh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Hs;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Io(e))throw e;Pe(Ev,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,Ks("INTERNAL UNHANDLED ERROR: ",Sv(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=yp.createAndSchedule(this,e,t,s,(l=>this.lc(l)));return this.ec.push(a),a}ac(){this.tc&&$e(47125,{hc:Sv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Sv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class _a extends nd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Tv,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tv(e),this._firestoreClient=void 0,await e}}}function VR(n,e){const t=typeof n=="object"?n:s_(),s=typeof n=="string"?n:Pu,a=Of(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=YE("firestore");l&&DR(a,...l)}return a}function Ep(n){if(n._terminated)throw new De(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||LR(n),n._firestoreClient}function LR(n){var e,t,s;const a=n._freezeSettings(),l=(function(f,m,v,w){return new aC(f,m,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,uw(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new bR(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(Sn.fromBase64String(e))}catch(t){throw new De(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tr(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ll(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:Yt("string",Tr._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new De(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gs._jsonSchemaVersion}}static fromJSON(e){if(Ll(e,gs._jsonSchema))return new gs(e.latitude,e.longitude)}}gs._jsonSchemaVersion="firestore/geoPoint/1.0",gs._jsonSchema={type:Yt("string",gs._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ys._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ll(e,ys._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ys(e.vectorValues);throw new De(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ys._jsonSchemaVersion="firestore/vectorValue/1.0",ys._jsonSchema={type:Yt("string",ys._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=/^__.*__$/;class MR{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ol(e,this.data,t,this.fieldTransforms)}}class hw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ec:n})}}class Sp{constructor(e,t,s,a,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ou(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(fw(this.Ec)&&OR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class FR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Zu(e)}Dc(e,t,s,a=!1){return new Sp({Ec:e,methodName:t,bc:s,path:En.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ip(n){const e=n._freezeSettings(),t=Zu(n._databaseId);return new FR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pw(n,e,t,s,a,l={}){const h=n.Dc(l.merge||l.mergeFields?2:0,e,t,a);Cp("Data must be an object, but it was:",h,s);const f=mw(s,h);let m,v;if(l.merge)m=new hr(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const E of l.mergeFields){const C=Pf(e,E,t);if(!h.contains(C))throw new De(ce.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);yw(w,C)||w.push(C)}m=new hr(w),v=h.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,v=h.fieldTransforms;return new MR(new nr(f),m,v)}class id extends Tp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof id}}function UR(n,e,t,s){const a=n.Dc(1,e,t);Cp("Data must be an object, but it was:",a,s);const l=[],h=nr.empty();zi(s,((m,v)=>{const w=Pp(e,m,t);v=Tn(v);const E=a.gc(w);if(v instanceof id)l.push(w);else{const C=ad(v,E);C!=null&&(l.push(w),h.set(w,C))}}));const f=new hr(l);return new hw(h,f,a.fieldTransforms)}function zR(n,e,t,s,a,l){const h=n.Dc(1,e,t),f=[Pf(e,s,t)],m=[a];if(l.length%2!=0)throw new De(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)f.push(Pf(e,l[C])),m.push(l[C+1]);const v=[],w=nr.empty();for(let C=f.length-1;C>=0;--C)if(!yw(v,f[C])){const W=f[C];let K=m[C];K=Tn(K);const Z=h.gc(W);if(K instanceof id)v.push(W);else{const $=ad(K,Z);$!=null&&(v.push(W),w.set(W,$))}}const E=new hr(v);return new hw(w,E,h.fieldTransforms)}function ad(n,e){if(gw(n=Tn(n)))return Cp("Unsupported field value:",e,n),mw(n,e);if(n instanceof Tp)return(function(s,a){if(!fw(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,a){const l=[];let h=0;for(const f of s){let m=ad(f,a.yc(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=Tn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return AC(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Pt.fromDate(s);return{timestampValue:ju(a.serializer,l)}}if(s instanceof Pt){const l=new Pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ju(a.serializer,l)}}if(s instanceof gs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Tr)return{bytesValue:N0(a.serializer,s._byteString)};if(s instanceof Jt){const l=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw a.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:lp(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ys)return(function(h,f){return{mapValue:{fields:{[o0]:{stringValue:l0},[Ru]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw f.wc("VectorValues must only contain numeric values.");return sp(f.serializer,v)}))}}}}}})(s,a);throw a.wc(`Unsupported field value: ${Jf(s)}`)})(n,e)}function mw(n,e){const t={};return t0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(n,((s,a)=>{const l=ad(a,e.Vc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function gw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pt||n instanceof gs||n instanceof Tr||n instanceof Jt||n instanceof Tp||n instanceof ys)}function Cp(n,e,t){if(!gw(t)||!Z_(t)){const s=Jf(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function Pf(n,e,t){if((e=Tn(e))instanceof sd)return e._internalPath;if(typeof e=="string")return Pp(n,e);throw Ou("Field path arguments must be of type string or ",n,!1,void 0,t)}const BR=new RegExp("[~\\*/\\[\\]]");function Pp(n,e,t){if(e.search(BR)>=0)throw Ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sd(...e.split("."))._internalPath}catch{throw Ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ou(n,e,t,s,a){const l=s&&!s.isEmpty(),h=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${s}`),h&&(m+=` in document ${a}`),m+=")"),new De(ce.INVALID_ARGUMENT,f+n+m)}function yw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $R(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_w("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $R extends vw{data(){return super.data()}}function _w(n,e){return typeof e=="string"?Pp(n,e):e instanceof sd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new De(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HR{convertValue(e,t="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return zi(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,a;const l=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[Ru].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map((h=>Bt(h.doubleValue)));return new ys(l)}convertGeoPoint(e){return new gs(Bt(e.latitude),Bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=qu(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){const t=Ni(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ct.fromString(e);pt(O0(s),9688,{name:e});const a=new Il(s.get(1),s.get(3)),l=new Me(s.popFirst(5));return a.isEqual(t)||Ks(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class ul{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ca extends vw{constructor(e,t,s,a,l,h){super(e,t,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(_w("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new De(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ca._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",ca._jsonSchema={type:Yt("string",ca._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class mu extends ca{data(e={}){return super.data(e)}}class uo{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ul(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new mu(this._firestore,this._userDataWriter,s.key,s,new ul(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map((f=>{const m=new mu(a._firestore,a._userDataWriter,f.doc.key,f.doc,new ul(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new mu(a._firestore,a._userDataWriter,f.doc.key,f.doc,new ul(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,w=-1;return f.type!==0&&(v=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:qR(f.type),doc:m,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new De(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n){n=Hr(n,Jt);const e=Hr(n.firestore,_a);return kR(Ep(e),n._key).then((t=>GR(e,n,t)))}uo._jsonSchemaVersion="firestore/querySnapshot/1.0",uo._jsonSchema={type:Yt("string",uo._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class xw extends HR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function zs(n){n=Hr(n,rd);const e=Hr(n.firestore,_a),t=Ep(e),s=new xw(e);return WR(n._query),jR(t,n._query).then((a=>new uo(e,s,n,a)))}function nu(n,e,t){n=Hr(n,Jt);const s=Hr(n.firestore,_a),a=ww(n.converter,e,t);return od(s,[pw(Ip(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Sr.none())])}function hs(n,e,t,...s){n=Hr(n,Jt);const a=Hr(n.firestore,_a),l=Ip(a);let h;return h=typeof(e=Tn(e))=="string"||e instanceof sd?zR(l,"updateDoc",n._key,e,t,s):UR(l,"updateDoc",n._key,e),od(a,[h.toMutation(n._key,Sr.exists(!0))])}function _i(n){return od(Hr(n.firestore,_a),[new ip(n._key,Sr.none())])}function io(n,e){const t=Hr(n.firestore,_a),s=It(n),a=ww(n.converter,e);return od(t,[pw(Ip(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,Sr.exists(!1))]).then((()=>s))}function od(n,e){return(function(s,a){const l=new Hs;return s.asyncQueue.enqueueAndForget((async()=>wR(await NR(s),a,l))),l.promise})(Ep(n),e)}function GR(n,e,t){const s=t.docs.get(e._key),a=new xw(n);return new ca(n,a,e._key,s,new ul(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){To=a})(xo),ho(new da("firestore",((s,{instanceIdentifier:a,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new _a(new BI(s.getProvider("auth-internal")),new HI(h,s.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new De(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(v.options.projectId,w)})(h,a),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ii(by,Ay,e),Ii(by,Ay,"esm2017")})();const KR={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},Ew=r_(KR),Ri=MI(Ew),nt=VR(Ew),Tw=M.createContext(null);function QR({children:n}){const[e,t]=M.useState(null),[s,a]=M.useState(!1),[l,h]=M.useState(!0);M.useEffect(()=>{const v=R1(Ri,async w=>{if(t(w),w)try{const E=It(nt,"admins",w.uid);if((await Rf(E)).exists())a(!0);else{const W=It(nt,"roles",w.uid),K=await Rf(W);K.exists()&&K.data().admin===!0?a(!0):a(!1)}}catch(E){console.error("Error checking admin role:",E),a(!1)}else a(!1);h(!1)});return()=>v()},[]);const f=async(v,w)=>{await b_(Ri,v,w)},m=async()=>{await A_(Ri)};return c.jsx(Tw.Provider,{value:{user:e,admin:s,loading:l,login:f,logout:m},children:n})}function Po(){return M.useContext(Tw)}function YR({onClose:n}){const[e,t]=M.useState("login"),[s,a]=M.useState(""),[l,h]=M.useState("");async function f(){try{await z_(Ri,new ds),n()}catch(w){alert(w.message)}}async function m(w){w.preventDefault();try{await b_(Ri,s,l),n()}catch(E){alert(E.message)}}async function v(w){w.preventDefault();try{await I1(Ri,s,l),n()}catch(E){alert(E.message)}}return c.jsx("div",{className:"auth-modal-backdrop",onClick:n,children:c.jsxs("div",{className:"auth-modal",onClick:w=>w.stopPropagation(),children:[c.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),c.jsxs("button",{className:"google-btn",onClick:f,children:[c.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),c.jsx("div",{className:"auth-divider",children:c.jsx("span",{children:"or"})}),c.jsxs("form",{onSubmit:e==="login"?m:v,className:"auth-form",children:[c.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:s,onChange:w=>a(w.target.value),required:!0}),c.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:w=>h(w.target.value),required:!0}),c.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),c.jsx("div",{className:"auth-switcher",children:e==="login"?c.jsxs("p",{children:["No account?"," ",c.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):c.jsxs("p",{children:["Already have an account?"," ",c.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),c.jsx("button",{className:"auth-close",onClick:n,children:"Close"})]})})}function JR(){const[n,e]=M.useState(!1),[t,s]=M.useState(!1),{user:a,admin:l}=Po(),h=Fu();async function f(){try{await A_(Ri),e(!1),h("/")}catch(m){console.error(m),alert("Logout failed.")}}return c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:`menu-toggle ${n?"active":""}`,onClick:()=>e(!n),children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]}),c.jsxs("nav",{className:`menu-panel ${n?"open":""}`,children:[c.jsx(ia,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),c.jsx(ia,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),c.jsx(ia,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),c.jsx(ia,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),c.jsx(ia,{to:"/music",className:"menu-item",onClick:()=>e(!1),children:"Music"}),c.jsx(ia,{to:"/steam",className:"menu-item",onClick:()=>e(!1),children:"Gaming"}),l&&c.jsx(ia,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),c.jsxs("div",{className:"auth-section",children:[c.jsx("p",{className:"auth-section-status",children:a?`Signed in as ${a.email||a.uid}`:"Not signed in"}),c.jsxs("div",{children:[!a&&c.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),s(!0)},children:"Sign in"}),a&&c.jsx("button",{className:"auth-btn secondary",onClick:f,children:"Sign out"})]})]})]}),t&&c.jsx(YR,{onClose:()=>s(!1)})]})}function Iv(){const n="Tyler's Collection's and Hobbies",e="",[t,s]=M.useState(""),[a,l]=M.useState(!0),h=M.useRef(null),[f,m]=M.useState("jp"),[v,w]=M.useState(1);return M.useEffect(()=>{document.title="Tyler's Collection"},[]),M.useEffect(()=>(h.current=setInterval(()=>l(E=>!E),450),()=>{h.current&&clearInterval(h.current)}),[]),M.useEffect(()=>{let E=!1;const C=Z=>new Promise($=>setTimeout($,Z)),W=async(Z,$=120)=>{for(let re=1;re<=Z.length;re+=1){if(E)return;s(Z.slice(0,re)),await C($)}},K=async(Z,$=70)=>{for(let re=Z.length;re>=0;re-=1){if(E)return;s(Z.slice(0,re)),await C($)}};return(async()=>{if(localStorage.getItem("homeTitleTyped")==="1"){m("en"),s(n),l(!1),h.current&&clearInterval(h.current);return}await C(250),m("jp"),await W(e,140),await C(6e3),await K(e,80),await C(320);const $=n;for(let re=1;re<=$.length;re+=1){if(E)return;s($.slice(0,re)),re===4&&m("en"),await C(110)}m("en"),await C(2e3),l(!1),localStorage.setItem("homeTitleTyped","1"),h.current&&clearInterval(h.current)})(),()=>{E=!0}},[]),c.jsxs("main",{className:"page",children:[c.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[c.jsxs("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",display:"inline-flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:t||" "}),c.jsx("span",{style:{width:"6px",height:"1.1em",background:"#ffb6c1",opacity:a?1:0,transition:"opacity 0.15s ease"}})]}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem",opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"TCG":"This is my personal webpage to see what is on my shelves, wishlists, and TCG collections."}),c.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"8px 14px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"linear-gradient(135deg, rgba(255,182,193,0.18), rgba(43,15,29,0.9))",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"14px",fontSize:"0.78rem",color:"#ffe6ed",letterSpacing:"0.05em",textTransform:"uppercase",fontWeight:700,opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?c.jsxs(c.Fragment,{children:[c.jsx("span",{role:"img","aria-label":"manga",children:""})," ",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"anime",children:""})," ",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{role:"img","aria-label":"manga",children:""})," Manga",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"anime",children:""})," Anime",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]})})]}),c.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[c.jsxs("article",{className:"card",children:[c.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:c.jsx("span",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"About Me"})}),c.jsx("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5,opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"im.okTCG":"Hey, I am Tyler and I go by im.ok. I hoard manga, binge anime, and collect trading cards."}),c.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem",opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"TCG":"This site is where I track everything: volumes on my shelves, finished shows, and my TCG collection as they all slowly grow."}),c.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px",opacity:v,transition:"opacity 0.25s ease"},children:[c.jsx("span",{className:"pill",children:f==="jp"?"":"Manga library"}),c.jsx("span",{className:"pill",children:f==="jp"?"":"My Anime List (MAL)"}),c.jsx("span",{className:"pill",children:f==="jp"?" & TCG":"Pokemon & One Piece TCG"}),c.jsx("span",{className:"pill",children:f==="jp"?"":"Data Nerd"})]})]}),c.jsxs("article",{className:"card",children:[c.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:c.jsx("span",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Explore these pages"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[c.jsxs("a",{href:"/base/manga",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Manga Library"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Full manga collection & wishlist."}),c.jsx("div",{className:"section-chip-row",children:c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Library & wishlist"})})]}),c.jsxs("a",{href:"/base/music",className:"section-card",style:{justifySelf:"end",alignSelf:"end",order:99},children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Music"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"If you are here for my music, this is the page for you! Catch all the latest releases."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Latest tracks"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:"Spotify & SoundCloud"})]})]}),c.jsxs("a",{href:"/base/anime",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Anime Library"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"MAL":"The entire watched, plan to watch, and watching list synced directly from MyAnimeList."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"MAL":"MAL synced"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Status filters"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Quick stats"})]})]}),c.jsxs("a",{href:"/base/tcg",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"TCG":"TCG Collection"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"TCG":"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Full Collection"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Still Under-Construction"})]})]})]})]})]}),c.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"@ 2025 im.ok. All rights reserved."})]})}const XR="modulepreload",ZR=function(n){return"/base/"+n},Cv={},zl=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let h=function(v){return Promise.all(v.map(w=>Promise.resolve(w).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=h(t.map(v=>{if(v=ZR(v),v in Cv)return;Cv[v]=!0;const w=v.endsWith(".css"),E=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${E}`))return;const C=document.createElement("link");if(C.rel=w?"stylesheet":XR,w||(C.as="script"),C.crossOrigin="",C.href=v,m&&C.setAttribute("nonce",m),document.head.appendChild(C),w)return new Promise((W,K)=>{C.addEventListener("load",W),C.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return a.then(h=>{for(const f of h||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})};function Us(n){let e=(n||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),s=t?t[1].trim().toLowerCase():e.toLowerCase(),a=t&&t[2]?parseInt(t[2],10):0;return{name:s,vol:Number.isFinite(a)?a:0}}function eb(){const{admin:n}=Po(),e=n,[t,s]=M.useState("library");M.useEffect(()=>{document.title="Manga | Library"},[]);const[a,l]=M.useState([]),[h,f]=M.useState([]),[m,v]=M.useState([]),[w,E]=M.useState([]),[C,W]=M.useState(!1),[K,Z]=M.useState(!0),[$,re]=M.useState(""),[ne,oe]=M.useState(""),[me,Te]=M.useState(""),[pe,D]=M.useState(!1),[P,k]=M.useState(()=>new Set),[A,F]=M.useState(null),[R,b]=M.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",special:!1,specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[ge,Ke]=M.useState([]),[Qe,G]=M.useState(0),[V,ae]=M.useState({open:!1,index:0,items:[]});async function ue(){const I=await zs(tr(nt,"library")),ee=[];I.forEach(le=>{const B=le.data();ee.push({id:le.id,title:B.title||"",authors:B.authors||"Unknown",publisher:B.publisher||"Unknown",demographic:B.demographic||"",genre:B.genre||"",subGenre:B.subGenre||"",date:B.date||"Unknown",cover:B.cover||"",isbn:B.isbn||"",pageCount:B.pageCount!==void 0&&B.pageCount!==null?B.pageCount:"",rating:B.rating!==void 0&&B.rating!==null?B.rating:"",amountPaid:B.amountPaid!==void 0&&B.amountPaid!==null?B.amountPaid:"",dateRead:B.dateRead||"",datePurchased:B.datePurchased||"",msrp:B.msrp!==void 0&&B.msrp!==null?B.msrp:"",specialType:B.specialType||"",specialVolumes:B.specialVolumes!==void 0&&B.specialVolumes!==null?B.specialVolumes:"",collectiblePrice:B.collectiblePrice!==void 0&&B.collectiblePrice!==null?B.collectiblePrice:"",read:!!B.read,amazonURL:B.amazonURL||"",hidden:!!B.hidden,kind:"library"})}),ee.sort((le,B)=>{const Q=Us(le.title),be=Us(B.title),Le=Q.name.localeCompare(be.name);return Le!==0?Le:Q.vol-be.vol}),l(ee),v(le=>{const B=new Set(le);return ee.forEach(Q=>B.add(Q.title||"")),Array.from(B).filter(Boolean).sort()})}async function L(){const I=await zs(tr(nt,"wishlist")),ee=[];I.forEach(le=>{const B=le.data();ee.push({id:le.id,title:B.title||"",authors:B.authors||"Unknown",publisher:B.publisher||"Unknown",date:B.date||"Unknown",cover:B.cover||"",isbn:B.isbn||"",pageCount:B.pageCount!==void 0&&B.pageCount!==null?B.pageCount:"",rating:B.rating!==void 0&&B.rating!==null?B.rating:"",amountPaid:B.amountPaid!==void 0&&B.amountPaid!==null?B.amountPaid:"",specialType:B.specialType||"",specialVolumes:B.specialVolumes!==void 0&&B.specialVolumes!==null?B.specialVolumes:"",collectiblePrice:B.collectiblePrice!==void 0&&B.collectiblePrice!==null?B.collectiblePrice:"",amazonURL:B.amazonURL||"",hidden:!!B.hidden,kind:"wishlist"})}),ee.sort((le,B)=>{const Q=Us(le.title),be=Us(B.title),Le=Q.name.localeCompare(be.name);return Le!==0?Le:Q.vol-be.vol}),f(ee),v(le=>{const B=new Set(le);return ee.forEach(Q=>B.add(Q.title||"")),Array.from(B).filter(Boolean).sort()})}M.useEffect(()=>{let I=!1;async function ee(){Z(!0),re("");try{await Promise.all([ue(),L()]),I||Z(!1)}catch(le){if(console.error(le),!I){console.warn("Falling back to offline JSON for manga.");try{const Q=await fetch("/base/manga-library-wishlist.json",{cache:"no-cache"});if(!Q.ok)throw new Error("fallback fetch failed");const be=await Q.json(),Le=Array.isArray(be.library)?be.library:[],mt=Array.isArray(be.wishlist)?be.wishlist:[];l(Le.map((Se,Oe)=>({id:Se.id||`offline-lib-${Oe}`,title:Se.title||"",authors:Se.authors||"Unknown",publisher:Se.publisher||"Unknown",demographic:Se.demographic||"",genre:Se.genre||"",subGenre:Se.subGenre||"",date:Se.date||"Unknown",cover:Se.cover||"",isbn:Se.isbn||"",pageCount:Se.pageCount??"",rating:Se.rating??"",amountPaid:Se.amountPaid??"",dateRead:Se.dateRead||"",datePurchased:Se.datePurchased||"",msrp:Se.msrp??"",specialType:Se.specialType||"",specialVolumes:Se.specialVolumes??"",collectiblePrice:Se.collectiblePrice??"",amazonURL:Se.amazonURL||"",read:!!Se.read,hidden:!!Se.hidden,kind:"library"}))),f(mt.map((Se,Oe)=>({id:Se.id||`offline-wish-${Oe}`,title:Se.title||"",authors:Se.authors||"Unknown",publisher:Se.publisher||"Unknown",demographic:Se.demographic||"",genre:Se.genre||"",subGenre:Se.subGenre||"",date:Se.date||"Unknown",cover:Se.cover||"",isbn:Se.isbn||"",pageCount:Se.pageCount??"",rating:Se.rating??"",amountPaid:Se.amountPaid??"",dateRead:Se.dateRead||"",datePurchased:Se.datePurchased||"",msrp:Se.msrp??"",specialType:Se.specialType||"",specialVolumes:Se.specialVolumes??"",collectiblePrice:Se.collectiblePrice??"",amazonURL:Se.amazonURL||"",read:!!Se.read,hidden:!!Se.hidden,kind:"wishlist"}))),Z(!1),re("Loaded offline data (Firestore unavailable).")}catch(B){console.error("Offline fallback failed",B),re("Failed to load manga data from Firestore."),Z(!1)}}}}return ee(),()=>{I=!0}},[]);const j=M.useMemo(()=>{const I=ne.trim().toLowerCase();return I?a.filter(ee=>[ee.title,ee.authors,ee.publisher,ee.isbn,ee.date,String(ee.pageCount??"")].join(" ").toLowerCase().includes(I)):a},[a,ne]),se=M.useMemo(()=>e&&C?j:j.filter(I=>!I.hidden),[j,e,C]),_e=M.useMemo(()=>{const I=me.trim().toLowerCase();return I?h.filter(ee=>[ee.title,ee.authors,ee.publisher,ee.isbn,ee.date,String(ee.pageCount??"")].join(" ").toLowerCase().includes(I)):h},[h,me]),xe=M.useMemo(()=>e&&C?_e:_e.filter(I=>!I.hidden),[_e,e,C]);function Ee(){e&&(D(I=>!I),k(new Set))}function Fe(I){k(ee=>{const le=new Set(ee);return le.has(I)?le.delete(I):le.add(I),le})}async function ke(I){if(!e){alert("Multi-select actions require admin access.");return}const ee=Array.from(P);if(!ee.length){alert("Select at least one item first.");return}const le=t==="library";try{if(I==="move")if(le){if(!window.confirm(`Move ${ee.length} item(s) to Wishlist?`))return;for(const B of ee){const Q=a.find(Le=>Le.id===B);if(!Q)continue;const be={title:Q.title,authors:Q.authors,publisher:Q.publisher,date:Q.date,pageCount:Q.pageCount||"",cover:Q.cover,amazonURL:Q.amazonURL||"",hidden:!!Q.hidden};await io(tr(nt,"wishlist"),be),await _i(It(nt,"library",B))}}else{if(!window.confirm(`Move ${ee.length} item(s) to Library?`))return;for(const B of ee){const Q=h.find(Le=>Le.id===B);if(!Q)continue;const be={title:Q.title,authors:Q.authors,publisher:Q.publisher,date:Q.date,pageCount:Q.pageCount||"",cover:Q.cover,amountPaid:"",read:!1,rating:"",msrp:"",collectiblePrice:"",specialType:"",specialVolumes:"",isbn:"",demographic:"",genre:"",subGenre:"",hidden:!!Q.hidden};await io(tr(nt,"library"),be),await _i(It(nt,"wishlist",B))}}else if(I==="markRead"&&le)for(const B of ee)await hs(It(nt,"library",B),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(I==="markUnread"&&le)for(const B of ee)await hs(It(nt,"library",B),{read:!1,dateRead:"",rating:""});else if(I==="delete"){const B=le?"library":"wishlist";if(!window.confirm(`Delete ${ee.length} item(s) from ${le?"Library":"Wishlist"}?`))return;for(const Q of ee)await _i(It(nt,B,Q))}await Promise.all([ue(),L()]),k(new Set),D(!1)}catch(B){console.error(B),alert("Failed to apply multi-select action.")}}function He(I){F(I)}function rt(){F(null)}const Wt=()=>{b(I=>({...I,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",special:!1,specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1,hidden:!1},multiAdd:!1,startVol:"",endVol:""})),Ke([]),G(0)},ht=M.useMemo(()=>{const I=new Map;return[...a,...h].forEach(ee=>{const le=Us(ee.title||"");if(!le.name)return;const B=(ee.title||"").replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||ee.title||le.name;if(!I.has(le.name))I.set(le.name,{display:B,maxVol:le.vol,authors:ee.authors||"",publisher:ee.publisher||"",demographic:ee.demographic||""});else{const Q=I.get(le.name);Q.maxVol=Math.max(Q.maxVol,le.vol),!Q.authors&&ee.authors&&(Q.authors=ee.authors),!Q.publisher&&ee.publisher&&(Q.publisher=ee.publisher),!Q.demographic&&ee.demographic&&(Q.demographic=ee.demographic)}}),I},[a,h]),Ft=I=>{b(ee=>({...ee,open:!0,mode:"add",list:I,editingId:null,data:{...ee.data,title:"",list:I}})),Ke([{kind:"new",id:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1}}]),G(0)},fn=I=>{const ee={open:!0,mode:"edit",list:I.kind==="wishlist"?"wishlist":"library",editingId:I.id,data:{title:I.title||"",authors:I.authors||"",publisher:I.publisher||"",demographic:I.demographic||"",genre:I.genre||"",subGenre:I.subGenre||"",date:I.date||"",cover:I.cover||"",isbn:I.isbn||"",pageCount:I.pageCount||"",rating:I.rating||"",amountPaid:I.amountPaid||"",dateRead:I.dateRead||"",datePurchased:I.datePurchased||"",msrp:I.msrp||"",special:!!(I.specialType||I.specialVolumes||I.collectiblePrice),specialType:I.specialType||"",specialVolumes:I.specialVolumes||"",collectiblePrice:I.collectiblePrice||"",amazonURL:I.amazonURL||"",read:!!I.read,hidden:!!I.hidden}};b(ee),Ke([{kind:"edit",id:I.id,data:{...ee.data}}]),G(0)},Je=(I,ee,le="text")=>{if(b(B=>{const Q={...B.data,[I]:le==="checkbox"?!!ee:ee};if(I==="special"&&!ee&&(Q.specialType="",Q.specialVolumes="",Q.collectiblePrice=""),I==="specialType"&&(ee==="collectible"?Q.specialVolumes="":(ee==="specialEdition"||(Q.specialVolumes=""),Q.collectiblePrice="")),I==="title"){const be=Us(ee||"");if(be.name&&ht.has(be.name)){const Le=ht.get(be.name);Q.authors=Le.authors||Q.authors,Q.publisher=Le.publisher||Q.publisher,Q.demographic=Le.demographic||Q.demographic}}return{...B,data:Q}}),Ke(B=>{if(!B.length)return B;const Q=[...B],be={...Q[Qe]};return be.data={...be.data,[I]:le==="checkbox"?!!ee:ee},Q[Qe]=be,Q}),I==="title"){const B=String(ee||"").trim().toLowerCase();if(!B)E([]);else{const Q=[];ht.forEach(be=>{if(be.display.toLowerCase().includes(B)){const Le=be.maxVol>0?be.maxVol+1:1;Q.push(`${be.display}, Vol. ${Le}`)}}),E(Q.slice(0,6))}}},Mn=I=>{ge[I]&&(G(I),b(ee=>{const le=ge[I];return{...ee,data:{...le.data}}}))},Ht=()=>{const I=R.data.title||"",ee=Us(I);if(!ee.name){alert("Provide a title with a volume number first (e.g., Series, Vol. 1).");return}const le=I.replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||I;let B=ee.vol||0;const Q=ht.get(ee.name);Q&&Q.maxVol>B&&(B=Q.maxVol),ge.forEach(Se=>{const Oe=Us(Se.data.title||"");Oe.name===ee.name&&(B=Math.max(B,Oe.vol||0))});const be=(B||0)+1,mt={title:`${le}, Vol. ${be}`,authors:R.data.authors,publisher:R.data.publisher,demographic:R.data.demographic,genre:R.data.genre,subGenre:R.data.subGenre,msrp:R.data.msrp,hidden:R.data.hidden,cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",date:"",dateRead:"",datePurchased:"",special:!1,specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1};Ke(Se=>{const Oe=[...Se,{kind:"new",id:null,data:mt}];return G(Oe.length-1),Oe}),b(Se=>({...Se,mode:"add",data:mt}))};async function ws(){if(!e)return;const{list:I}=R,ee=I||"library",le=ge.length>0?ge:[{kind:R.mode,id:R.editingId,data:R.data}],B=Q=>({title:(Q.title||"").trim(),authors:(Q.authors||"").trim(),publisher:(Q.publisher||"").trim(),demographic:(Q.demographic||"").trim(),genre:(Q.genre||"").trim(),subGenre:(Q.subGenre||"").trim(),date:(Q.date||"").trim(),cover:(Q.cover||"").trim(),isbn:ee==="wishlist"?"":(Q.isbn||"").trim(),pageCount:Q.pageCount===""?"":Number(Q.pageCount),rating:ee==="wishlist"||Q.rating===""?"":Math.max(.5,Math.min(5,Number(Q.rating))),amountPaid:Q.amountPaid===""?"":Number(Q.amountPaid),dateRead:(Q.dateRead||"").trim(),datePurchased:(Q.datePurchased||"").trim(),msrp:ee==="wishlist"||Q.msrp===""?"":Number(Q.msrp),special:ee==="wishlist"?!1:!!(Q.special&&(Q.specialType||"").trim()),specialType:ee==="wishlist"||!(Q.special&&(Q.specialType||"").trim())?"":(Q.specialType||"").trim(),specialVolumes:ee==="wishlist"?"":Q.special&&Q.specialType==="specialEdition"?Q.specialVolumes===""?"":Number(Q.specialVolumes):"",collectiblePrice:ee==="wishlist"?"":Q.special&&Q.specialType==="collectible"?Q.collectiblePrice===""?"":Number(Q.collectiblePrice):"",amazonURL:(Q.amazonURL||"").trim(),read:ee==="wishlist"?!1:!!Q.read,hidden:!!Q.hidden,kind:I});try{const Q=[];for(const be of le){const Le=B(be.data);if(!Le.title){alert("Title is required for every entry.");return}be.kind==="edit"&&be.id?Q.push(hs(It(nt,ee,be.id),Le)):Q.push(io(tr(nt,ee),Le))}await Promise.all(Q),await Promise.all([ue(),L()]),Wt()}catch(Q){console.error(Q),alert("Failed to save entry.")}}async function In(I,ee){if(e&&window.confirm("Delete this entry?"))try{await _i(It(nt,ee,I)),await Promise.all([ue(),L()])}catch(le){console.error(le),alert("Failed to delete entry.")}}const[pn,Cn]=M.useState(!1),rr=()=>ae({open:!1,index:0,items:[]});async function Wn(I,ee){if(!(I!=null&&I.id))return;const le=I.kind==="wishlist"?"wishlist":"library";Cn(!0);try{await hs(It(nt,le,I.id),ee),await Promise.all([ue(),L()]),F(B=>B&&B.id===I.id?{...B,...ee}:B)}catch(B){console.error(B),alert("Failed to update entry.")}finally{Cn(!1)}}const qr=(I,ee)=>{const le=ee===""?"":Math.max(.5,Math.min(5,Number(ee)));Wn(I,{rating:le})},Gr=(I,ee)=>{if(!I)return;const le=ee?{read:!0,dateRead:new Date().toISOString().slice(0,10)}:{read:!1,dateRead:""};Wn(I,le)},Rt=()=>{if(!P.size){alert("Select at least one entry first.");return}const ee=[...a,...h].filter(B=>P.has(B.id));if(!ee.length){alert("No items selected.");return}const le=ee.map(B=>({id:B.id,kind:B.kind||(t==="wishlist"?"wishlist":"library"),data:{title:B.title||"",authors:B.authors||"",publisher:B.publisher||"",demographic:B.demographic||"",genre:B.genre||"",subGenre:B.subGenre||"",date:B.date||"",cover:B.cover||"",isbn:B.isbn||"",pageCount:B.pageCount||"",rating:B.rating||"",amountPaid:B.amountPaid||"",dateRead:B.dateRead||"",datePurchased:B.datePurchased||"",msrp:B.msrp||"",special:!!(B.specialType||B.specialVolumes||B.collectiblePrice),specialType:B.specialType||"",specialVolumes:B.specialVolumes||"",collectiblePrice:B.collectiblePrice||"",amazonURL:B.amazonURL||"",read:!!B.read,hidden:!!B.hidden}}));ae({open:!0,index:0,items:le})},qe=(I,ee,le="text")=>{ae(B=>{const Q=[...B.items],be={...Q[B.index]},Le={...be.data,[I]:le==="checkbox"?!!ee:ee};return I==="special"&&!ee&&(Le.specialType="",Le.specialVolumes="",Le.collectiblePrice=""),I==="specialType"&&(ee==="collectible"?Le.specialVolumes="":(ee==="specialEdition"||(Le.specialVolumes=""),Le.collectiblePrice="")),be.data=Le,Q[B.index]=be,{...B,items:Q}})},Pn=()=>{ae(I=>({...I,index:Math.min(I.index+1,I.items.length-1)}))},xs=()=>{ae(I=>({...I,index:Math.max(I.index-1,0)}))};async function Rn(){if(!e)return;const I=V.items;if(!I.length){rr();return}try{const ee=I.map(le=>{const Q=!(le.kind==="wishlist")&&!!(le.data.special&&(le.data.specialType||"").trim()),be={...le.data,pageCount:le.data.pageCount===""?"":Number(le.data.pageCount),rating:le.data.rating===""?"":Math.max(.5,Math.min(5,Number(le.data.rating))),amountPaid:le.data.amountPaid===""?"":Number(le.data.amountPaid),msrp:le.data.msrp===""?"":Number(le.data.msrp),special:Q,specialType:Q?le.data.specialType:"",collectiblePrice:Q&&le.data.specialType==="collectible"?le.data.collectiblePrice===""?"":Number(le.data.collectiblePrice):"",specialVolumes:Q&&le.data.specialType==="specialEdition"?le.data.specialVolumes===""?"":Number(le.data.specialVolumes):"",amazonURL:le.data.amazonURL||"",read:!!le.data.read},Le=le.kind==="wishlist"?"wishlist":"library";return hs(It(nt,Le,le.id),be)});await Promise.all(ee),await Promise.all([ue(),L()]),k(new Set),D(!1),rr()}catch(ee){console.error(ee),alert("Failed to save bulk edits.")}}function Cr(I){const ee=P.has(I.id),le=I.kind==="library",B=()=>{pe&&e?Fe(I.id):He(I)};return c.jsxs("div",{className:"manga-card"+(I.read&&le?" read":"")+(ee?" multiselect-selected":""),onClick:B,children:[c.jsx("div",{className:"manga-card-cover-wrap",children:c.jsx("img",{src:I.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),c.jsxs("div",{className:"manga-card-body",children:[c.jsx("div",{className:"manga-card-title",children:I.title||"Untitled"}),c.jsxs("div",{className:"manga-card-meta",children:[I.authors&&I.authors!=="Unknown"&&c.jsxs(c.Fragment,{children:[I.authors,c.jsx("br",{})]}),I.publisher&&I.publisher!=="Unknown"&&c.jsxs(c.Fragment,{children:[I.publisher,c.jsx("br",{})]}),I.date&&I.date!=="Unknown"&&I.date]}),I.isbn&&c.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",I.isbn]}),e&&c.jsxs("div",{className:"manga-card-actions",children:[c.jsx("button",{type:"button",className:"manga-btn mini",onClick:Q=>{Q.stopPropagation(),fn(I)},children:"Edit"}),c.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:Q=>{Q.stopPropagation(),In(I.id,I.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},I.id)}const sr=({value:I,onChange:ee})=>{const[le,B]=M.useState(null),Q=Math.max(0,Math.min(5,Number(I)||0)),be=le??Q,Le=Array.from({length:10},(Oe,qt)=>(qt+1)*.5),mt=5,Se=Array.from({length:mt},(Oe,qt)=>Math.max(0,Math.min(1,be-qt)));return c.jsxs("div",{className:"star-shell",role:"group","aria-label":"Rating",children:[c.jsxs("div",{className:"star-visual",style:{"--star-count":mt},children:[c.jsx("div",{className:"star-row",children:Se.map((Oe,qt)=>c.jsxs("div",{className:"star-icon",children:[c.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"star-base",children:c.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})}),c.jsx("div",{className:"star-fill",style:{"--pct":`${(Math.max(0,Math.min(1,Oe))*100).toFixed(1)}%`},children:c.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:c.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})})})]},qt))}),c.jsx("div",{className:"star-hit",children:Le.map(Oe=>c.jsx("button",{type:"button","aria-label":`${Oe} stars`,onMouseEnter:()=>B(Oe),onMouseLeave:()=>B(null),onClick:()=>ee(Oe)},Oe))})]}),c.jsx("div",{className:"star-value",children:be?be.toFixed(1):"--"}),c.jsx("button",{type:"button",className:"star-clear",onClick:()=>ee(""),"aria-label":"Clear rating",children:"clear"})]})},Es=t==="library"?se:xe,mn=(I,ee)=>{if(!I.length)return;const le=Array.from(I.reduce((Se,Oe)=>(Object.keys(Oe).forEach(qt=>Se.add(qt)),Se),new Set)),B=Se=>{const Oe=Se==null?"":String(Se);return/[",\n]/.test(Oe)?`"${Oe.replace(/"/g,'""')}"`:Oe},Q=[le.join(",")].concat(I.map(Se=>le.map(Oe=>B(Se[Oe])).join(","))),be=new Blob([Q.join(`
`)],{type:"text/csv"}),Le=URL.createObjectURL(be),mt=document.createElement("a");mt.href=Le,mt.download=ee,mt.click(),URL.revokeObjectURL(Le)},Fn=async(I,ee)=>{const le=(Q,be="image")=>(Q||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)||be,B=I.filter(Q=>Q.cover).map((Q,be)=>({url:Q.cover,name:le(Q.title||`manga-${be+1}`,`manga-${be+1}`)}));if(!B.length){alert("No images found to download.");return}try{const Q=(await zl(async()=>{const{default:on}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:on}},[])).default,be=new Q,Le=be.folder("images"),mt={},Se=B.map(async(on,Pr)=>{try{const gn=await(await fetch(on.url)).blob(),Ss=(on.url.split(".").pop()||"jpg").split(/[?#]/)[0],br=on.name||`image-${Pr+1}`;mt[br]=(mt[br]||0)+1;const Kr=mt[br]>1?`-${mt[br]}`:"";Le.file(`${br}${Kr}.${Ss}`,gn)}catch(Rr){console.warn("Failed to fetch image",on.url,Rr)}});await Promise.all(Se);const Oe=await be.generateAsync({type:"blob"}),qt=URL.createObjectURL(Oe),an=document.createElement("a");an.href=qt,an.download=ee,an.click(),URL.revokeObjectURL(qt)}catch(Q){console.error("Zip download failed",Q),alert("Failed to create zip. Please try again.")}},fr=(I,ee)=>{const le=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),B=URL.createObjectURL(le),Q=document.createElement("a");Q.href=B,Q.download=ee,Q.click(),URL.revokeObjectURL(B)},Ts=async I=>{if(!e||!(I!=null&&I.id))return;const ee=I.kind==="wishlist"?"wishlist":"library",le=ee==="library"?"wishlist":"library";try{if(ee==="library"){const B={title:I.title,authors:I.authors,publisher:I.publisher,date:I.date,pageCount:I.pageCount||"",cover:I.cover||"",amazonURL:I.amazonURL||"",hidden:!!I.hidden};await io(tr(nt,le),B)}else{const B={title:I.title,authors:I.authors,publisher:I.publisher,date:I.date,pageCount:I.pageCount||"",cover:I.cover||"",amountPaid:"",read:!1,rating:"",msrp:"",collectiblePrice:"",specialType:"",specialVolumes:"",isbn:"",demographic:"",genre:"",subGenre:"",amazonURL:I.amazonURL||"",hidden:!!I.hidden};await io(tr(nt,le),B)}await _i(It(nt,ee,I.id)),await Promise.all([ue(),L()]),rt()}catch(B){console.error("Move failed",B),alert("Failed to move item.")}},Ot=R.list==="wishlist",Ut=V.items[V.index]||null,sn=(Ut==null?void 0:Ut.kind)==="wishlist";return c.jsxs("div",{className:"manga-page",children:[c.jsxs("header",{className:"manga-header",style:{flexDirection:"column",alignItems:"center",textAlign:"center"},children:[c.jsx("div",{className:"manga-header-title",style:{justifyContent:"center",gap:"0.6rem",fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Manga Library"}),c.jsx("div",{className:"manga-header-sub",style:{textAlign:"center"},children:"This is my Manga Library and Wishlist. Check and see all the Manga I have in my possession!"})]}),c.jsxs("div",{className:"manga-tabs",children:[c.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{s("library"),D(!1),k(new Set)},children:"Library"}),c.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{s("wishlist"),D(!1),k(new Set)},children:"Wishlist"})]}),t!=="dashboard"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"manga-toolbar",children:[c.jsxs("div",{className:"manga-toolbar-left",children:[c.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?ne:me,onChange:I=>t==="library"?oe(I.target.value):Te(I.target.value)}),c.jsx("div",{className:"manga-counter",children:t==="library"?c.jsxs(c.Fragment,{children:["Library: ",j.length," / ",a.length]}):c.jsxs(c.Fragment,{children:["Wishlist: ",_e.length," / ",h.length]})})]}),c.jsxs("div",{className:"manga-toolbar-right",children:[e&&c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>W(I=>!I),children:C?"Hide Hidden":"Show Hidden"}),e&&c.jsx("button",{className:"manga-btn secondary"+(pe?" active":""),onClick:Ee,children:pe?"Exit Multi-select":"Multi-select"})]})]}),e&&pe&&c.jsxs("div",{className:"manga-multiselect-bar",children:[c.jsxs("span",{children:["Selected: ",c.jsx("strong",{children:P.size})]}),c.jsx("button",{className:"manga-btn",onClick:Rt,children:"Bulk Edit"}),c.jsxs("button",{className:"manga-btn secondary",onClick:()=>ke("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"manga-btn",onClick:()=>ke("markRead"),children:"Mark Read"}),c.jsx("button",{className:"manga-btn secondary",onClick:()=>ke("markUnread"),children:"Mark Unread"})]}),c.jsx("button",{className:"manga-btn danger",onClick:()=>ke("delete"),children:"Delete"})]})]}),K?c.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):$?c.jsx("div",{className:"manga-empty-state",children:$}):Es.length===0?c.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):c.jsx("div",{className:"manga-grid",children:Es.map(I=>Cr(I))}),e&&c.jsxs("div",{className:"manga-floating-actions",children:[c.jsxs("button",{className:"manga-btn",type:"button","aria-label":"Add item",onClick:()=>Ft(t==="wishlist"?"wishlist":"library"),children:["+ ",t==="wishlist"?"Wishlist":"Library"]}),c.jsxs("div",{className:"manga-export-actions",children:[c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>fr({library:a,wishlist:h},"manga-library-wishlist.json"),children:"Export JSON"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>mn(t==="library"?a:h,t==="library"?"manga-library.csv":"manga-wishlist.csv"),children:"Export CSV"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Fn(t==="library"?a:h,t==="library"?"manga-library-images.zip":"manga-wishlist-images.zip"),children:"Download Images"})]})]}),A&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:I=>{I.target===I.currentTarget&&rt()},children:c.jsxs("div",{className:"manga-modal",children:[c.jsx("div",{className:"manga-modal-cover-wrap",children:c.jsx("img",{src:A.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsx("div",{className:"manga-modal-title",children:A.title||"Untitled"}),c.jsx("button",{className:"manga-modal-close",onClick:rt,type:"button",children:"Close"})]}),c.jsxs("div",{className:"manga-modal-meta",children:[A.authors&&A.authors!=="Unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Author(s):"})," ",A.authors,c.jsx("br",{})]}),A.publisher&&A.publisher!=="Unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Publisher:"})," ",A.publisher,c.jsx("br",{})]}),A.date&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Release:"})," ",A.date,c.jsx("br",{})]}),A.isbn&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"ISBN:"})," ",A.isbn,c.jsx("br",{})]})]}),c.jsxs("div",{className:"manga-modal-details",children:[A.pageCount&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Pages:"})," ",A.pageCount,c.jsx("br",{})]}),c.jsxs("div",{style:{margin:"6px 0"},children:[c.jsx("strong",{children:"Rating:"})," ",c.jsx(sr,{value:A.rating||"",onChange:I=>qr(A,I)})]}),A.amountPaid&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Amount Paid:"})," $",A.amountPaid,c.jsx("br",{})]}),A.msrp&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"MSRP:"})," $",A.msrp,c.jsx("br",{})]}),A.collectiblePrice&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Collectible:"})," $",A.collectiblePrice,c.jsx("br",{})]}),A.read&&A.dateRead&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Date Read:"})," ",A.dateRead,c.jsx("br",{})]}),A.amazonURL&&c.jsx("div",{style:{marginTop:"6px"},children:c.jsx("a",{href:A.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),c.jsxs("div",{className:"manga-modal-footer",style:{gap:"10px",alignItems:"center"},children:[c.jsx("div",{children:A.kind==="library"&&A.read?"Marked as read in your library.":A.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."}),c.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[A.kind==="library"&&c.jsx(c.Fragment,{children:A.read?c.jsx("button",{className:"manga-btn mini secondary",disabled:pn,onClick:()=>Gr(A,!1),type:"button",children:"Mark as unread"}):c.jsx("button",{className:"manga-btn mini",disabled:pn,onClick:()=>Gr(A,!0),type:"button",children:"Mark as read"})}),e&&c.jsxs("button",{className:"manga-btn mini",type:"button",onClick:()=>Ts(A),children:["Move to ",A.kind==="library"?"Wishlist":"Library"]})]})]})]})]})}),e&&R.open&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:I=>{I.target===I.currentTarget&&Wt()},children:c.jsx("div",{className:"manga-modal admin",children:c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsx("div",{className:"manga-modal-title",children:R.mode==="add"?"Add Entry":"Edit Entry"}),c.jsx("button",{className:"manga-modal-close",onClick:Wt,type:"button",children:"Close"})]}),c.jsxs("div",{className:"admin-form-layout",children:[c.jsx("div",{className:"admin-cover-frame",children:c.jsx("img",{src:R.data.cover||"https://imgur.com/chUgq4W.png",alt:"Cover preview"})}),c.jsxs("div",{className:"admin-form-fields",children:[c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Title",c.jsx("input",{type:"text",value:R.data.title,onChange:I=>Je("title",I.target.value)})]})}),w.length>0&&c.jsx("div",{className:"title-suggestions",children:w.map((I,ee)=>c.jsx("button",{type:"button",className:"manga-btn mini",onClick:()=>Je("title",I),children:I},I+ee))}),c.jsxs("div",{className:"admin-row two",style:{alignItems:"flex-end",marginTop:"-8px"},children:[c.jsxs("div",{children:[c.jsxs("div",{className:"manga-modal-subtitle",style:{marginBottom:"6px"},children:["Entry ",Qe+1," / ",Math.max(1,ge.length||1)]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Qe>0&&Mn(Qe-1),disabled:Qe===0,children:"Previous"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>ge.length&&Qe<ge.length-1?Mn(Qe+1):null,disabled:!ge.length||Qe===ge.length-1,children:"Next"})]})]}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("button",{className:"manga-btn",type:"button",onClick:Ht,disabled:!Us(R.data.title||"").vol,children:"Add New Volume"}),c.jsx("div",{className:"manga-stat-sub",style:{marginTop:"4px"},children:"Auto-fills the next volume number for this series."})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Authors",c.jsx("input",{type:"text",value:R.data.authors,onChange:I=>Je("authors",I.target.value)})]})}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Publisher",c.jsx("input",{type:"text",value:R.data.publisher,onChange:I=>Je("publisher",I.target.value)})]})}),c.jsxs("div",{className:"admin-row three",children:[c.jsxs("label",{children:["Release Date",c.jsx("input",{type:"date",value:R.data.date,onChange:I=>Je("date",I.target.value)})]}),!Ot&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Date Purchased",c.jsx("input",{type:"date",value:R.data.datePurchased,onChange:I=>Je("datePurchased",I.target.value)})]}),c.jsxs("label",{children:["Date Read",c.jsx("input",{type:"date",value:R.data.dateRead,onChange:I=>Je("dateRead",I.target.value)})]})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Page Count",c.jsx("input",{type:"number",placeholder:"e.g. 192",value:R.data.pageCount,onChange:I=>Je("pageCount",I.target.value)})]}),!Ot&&c.jsxs("label",{children:["ISBN (library only)",c.jsx("input",{type:"text",value:R.data.isbn,onChange:I=>Je("isbn",I.target.value)})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Cover URL",c.jsx("input",{type:"text",placeholder:"Paste image URL here",value:R.data.cover,onChange:I=>Je("cover",I.target.value)})]})}),!Ot&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-row two",children:[!(R.data.special&&R.data.specialType==="collectible")&&c.jsxs("label",{children:["Amount Paid",c.jsx("input",{type:"number",step:"0.01",value:R.data.amountPaid,onChange:I=>Je("amountPaid",I.target.value)})]}),c.jsxs("label",{children:["MSRP",c.jsx("input",{type:"number",step:"0.01",value:R.data.msrp,onChange:I=>Je("msrp",I.target.value)})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:!!R.data.special,onChange:I=>Je("special",I.target.checked,"checkbox")}),c.jsx("span",{children:"Special item?"})]})}),R.data.special&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Special Type",c.jsxs("select",{value:R.data.specialType,onChange:I=>Je("specialType",I.target.value),children:[c.jsx("option",{value:"",children:"Select type"}),c.jsx("option",{value:"specialEdition",children:"Special Edition"}),c.jsx("option",{value:"collectible",children:"Collectible"})]})]}),R.data.specialType==="collectible"&&c.jsxs("label",{children:["Collectible Price",c.jsx("input",{type:"number",step:"0.01",value:R.data.collectiblePrice,onChange:I=>Je("collectiblePrice",I.target.value)})]})]}),R.data.specialType==="specialEdition"&&c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Special Volumes",c.jsx("input",{type:"number",min:"0",value:R.data.specialVolumes,onChange:I=>Je("specialVolumes",I.target.value)})]})})]})]}),Ot&&c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Amazon URL",c.jsx("input",{type:"text",value:R.data.amazonURL,onChange:I=>Je("amazonURL",I.target.value)})]})}),!Ot&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Rating (1-5 stars)",c.jsx(sr,{value:R.data.rating,onChange:I=>Je("rating",I)})]})}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:R.data.read,onChange:I=>Je("read",I.target.checked,"checkbox")}),c.jsx("span",{children:"Mark as read"})]}),c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:!!R.data.hidden,onChange:I=>Je("hidden",I.target.checked,"checkbox")}),c.jsx("span",{children:"Hide from public"})]})]})]}),Ot&&c.jsx("div",{className:"admin-row",children:c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:!!R.data.hidden,onChange:I=>Je("hidden",I.target.checked,"checkbox")}),c.jsx("span",{children:"Hide from public"})]})})]})]}),c.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[c.jsx("button",{className:"manga-btn secondary",onClick:Wt,type:"button",children:"Cancel"}),c.jsx("button",{className:"manga-btn",onClick:ws,type:"button",children:R.mode==="add"?"Add":"Save"})]})]})})}),e&&V.open&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:I=>{I.target===I.currentTarget&&rr()},children:c.jsx("div",{className:"manga-modal admin",children:c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",V.index+1," / ",V.items.length,")"]}),c.jsx("button",{className:"manga-modal-close",onClick:rr,type:"button",children:"Close"})]}),V.items.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",V.items[V.index].data.title||"Untitled"]}),c.jsxs("div",{className:"admin-form-grid",children:[c.jsxs("label",{children:["Title",c.jsx("input",{type:"text",value:V.items[V.index].data.title,onChange:I=>qe("title",I.target.value)})]}),c.jsxs("label",{children:["Authors",c.jsx("input",{type:"text",value:V.items[V.index].data.authors,onChange:I=>qe("authors",I.target.value)})]}),c.jsxs("label",{children:["Publisher",c.jsx("input",{type:"text",value:V.items[V.index].data.publisher,onChange:I=>qe("publisher",I.target.value)})]}),c.jsxs("label",{children:["Release Date",c.jsx("input",{type:"date",value:V.items[V.index].data.date,onChange:I=>qe("date",I.target.value)})]}),!sn&&c.jsxs("label",{children:["ISBN",c.jsx("input",{type:"text",value:V.items[V.index].data.isbn,onChange:I=>qe("isbn",I.target.value)})]}),c.jsxs("label",{children:["Cover URL",c.jsx("input",{type:"text",value:V.items[V.index].data.cover,onChange:I=>qe("cover",I.target.value)})]}),c.jsxs("label",{children:["Page Count",c.jsx("input",{type:"number",value:V.items[V.index].data.pageCount,onChange:I=>qe("pageCount",I.target.value)})]}),!sn&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Rating (1-5 stars)",c.jsx(sr,{value:V.items[V.index].data.rating,onChange:I=>qe("rating",I)})]}),!(V.items[V.index].data.special&&V.items[V.index].data.specialType==="collectible")&&c.jsxs("label",{children:["Amount Paid",c.jsx("input",{type:"number",step:"0.01",value:V.items[V.index].data.amountPaid,onChange:I=>qe("amountPaid",I.target.value)})]}),!(V.items[V.index].data.special&&V.items[V.index].data.specialType==="collectible")&&c.jsxs("label",{children:["Amount Paid",c.jsx("input",{type:"number",step:"0.01",value:V.items[V.index].data.amountPaid,onChange:I=>qe("amountPaid",I.target.value)})]}),c.jsxs("label",{children:["MSRP",c.jsx("input",{type:"number",step:"0.01",value:V.items[V.index].data.msrp,onChange:I=>qe("msrp",I.target.value)})]}),V.items[V.index].data.special&&V.items[V.index].data.specialType==="collectible"&&c.jsxs("label",{children:["Collectible Price",c.jsx("input",{type:"number",step:"0.01",value:V.items[V.index].data.collectiblePrice,onChange:I=>qe("collectiblePrice",I.target.value)})]})]}),!sn&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Date Purchased",c.jsx("input",{type:"date",value:V.items[V.index].data.datePurchased,onChange:I=>qe("datePurchased",I.target.value)})]}),c.jsxs("label",{children:["Date Read",c.jsx("input",{type:"date",value:V.items[V.index].data.dateRead,onChange:I=>qe("dateRead",I.target.value)})]})]}),!sn&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:!!V.items[V.index].data.special,onChange:I=>qe("special",I.target.checked,"checkbox")}),c.jsx("span",{children:"Special item?"})]}),V.items[V.index].data.special&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Special Type",c.jsxs("select",{value:V.items[V.index].data.specialType,onChange:I=>qe("specialType",I.target.value),children:[c.jsx("option",{value:"",children:"Select type"}),c.jsx("option",{value:"specialEdition",children:"Special Edition"}),c.jsx("option",{value:"collectible",children:"Collectible"})]})]}),V.items[V.index].data.specialType==="specialEdition"&&c.jsxs("label",{children:["Special Volumes",c.jsx("input",{type:"number",value:V.items[V.index].data.specialVolumes,onChange:I=>qe("specialVolumes",I.target.value)})]}),V.items[V.index].data.specialType==="collectible"&&c.jsxs("label",{children:["Collectible Price",c.jsx("input",{type:"number",step:"0.01",value:V.items[V.index].data.collectiblePrice,onChange:I=>qe("collectiblePrice",I.target.value)})]})]})]}),sn&&c.jsxs("label",{children:["Amazon URL",c.jsx("input",{type:"text",value:V.items[V.index].data.amazonURL,onChange:I=>qe("amazonURL",I.target.value)})]}),!sn&&c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:V.items[V.index].data.read,onChange:I=>qe("read",I.target.checked,"checkbox")}),c.jsx("span",{children:"Marked as read"})]}),c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:!!V.items[V.index].data.hidden,onChange:I=>qe("hidden",I.target.checked,"checkbox")}),c.jsx("span",{children:"Hidden from public"})]})]}),c.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[c.jsxs("div",{children:[c.jsx("button",{className:"manga-btn secondary",onClick:xs,type:"button",disabled:V.index===0,children:"Previous"}),c.jsx("button",{className:"manga-btn secondary",onClick:Pn,type:"button",disabled:V.index===V.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{className:"manga-btn secondary",onClick:rr,type:"button",children:"Cancel"}),c.jsx("button",{className:"manga-btn",onClick:Rn,type:"button",children:"Save Edits"})]})]})]})]})})}),c.jsx("datalist",{id:"adminTitleSuggestions",children:m.map(I=>c.jsx("option",{value:I},I))})]})}const tb="https://imokmalworker.imokissick.workers.dev/?url=",Sw="im_ok",Pv=300,nb={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function rb(n){const e=n==null?void 0:n.title_localized,t=typeof e=="string"?e:(e==null?void 0:e.en)||(e==null?void 0:e.english);return(n==null?void 0:n.anime_title_eng)||(n==null?void 0:n.title_english)||t||(n==null?void 0:n.anime_title)||(n==null?void 0:n.title)||"Untitled"}function sb(n){const e=(n==null?void 0:n.updated_at)??(n==null?void 0:n.updatedAt)??(n==null?void 0:n.updated_at_ms)??null;if(e==null)return null;const t=Number(e);if(Number.isFinite(t))return t<1e12?t*1e3:t;const s=Date.parse(e);return Number.isNaN(s)?null:s}function ib(n){const e=nb[n.status]||(typeof n.status=="string"?n.status.toLowerCase():"unknown");return{id:n.anime_id||n.id,title:rb(n),updatedAt:sb(n),episodes:n.anime_num_episodes??n.episodes??null,watchedEpisodes:n.num_watched_episodes??n.my_watched_episodes??n.watched_episodes??n.num_watched??0,status:e,score:n.score??null,image:n.anime_image_path||n.image_url||n.anime_img||n.picture||null,synopsis:n.anime_synopsis||n.synopsis||null}}function Rv(){const n=Date.now();return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10,updatedAt:n-1e3*60*60*24*3,synopsis:"In 2071, bounty hunters Spike and Jet roam the solar system looking for their next payout and a place to belong."},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10,updatedAt:n-1e3*60*60*24*6,synopsis:"Brothers Edward and Alphonse Elric search for the Philosopher's Stone to restore their bodies after a failed alchemy ritual."},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9,updatedAt:n-1e3*60*60*8,synopsis:"An elven mage retraces the steps of a past adventure to understand humanity and the passage of time."},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8,updatedAt:n-1e3*60*60*24*14,synopsis:"Monkey D. Luffy sails toward the Grand Line seeking the One Piece and a crew to make his dream real."},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null,updatedAt:n-1e3*60*30,synopsis:"A middle-aged worker gains kaiju powers and joins the Defense Force to fight monsters from the inside."}]}async function ab(n,e){const t=`https://myanimelist.net/animelist/${n}/load.json?status=7&offset=${e}`,s=await fetch(`${tb}${encodeURIComponent(t)}`);if(!s.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return s.json()}async function ob(n=Sw){const e=[];try{let t=0;for(;;){const s=await ab(n,t);if(!Array.isArray(s)||s.length===0||(e.push(...s),s.length<Pv))break;t+=Pv}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),Rv()}return e.length?e.map(ib):Rv()}async function bv(n){var e,t;if(!n)return null;try{const s=await fetch(`https://api.jikan.moe/v4/anime/${n}`);if(!s.ok)throw new Error(`Failed to fetch Jikan summary for id ${n}`);const a=await s.json();return((e=a==null?void 0:a.data)==null?void 0:e.synopsis)||((t=a==null?void 0:a.data)==null?void 0:t.background)||null}catch(s){return console.error("Failed to load anime synopsis",n,s),null}}async function lb(n=Sw){var e;if(!n)return null;try{const t=await fetch(`https://api.jikan.moe/v4/users/${encodeURIComponent(n)}/statistics`);if(!t.ok)throw new Error(`Failed to fetch user stats for ${n}`);const s=await t.json(),a=((e=s==null?void 0:s.data)==null?void 0:e.anime)||{},l=Number(a.days_watched),h=Number(a.total_episodes??a.episodes_watched);return{daysWatched:Number.isFinite(l)?l:null,episodesWatched:Number.isFinite(h)?h:null}}catch(t){return console.error("Failed to load user stats",n,t),null}}function cb(){var L;const{admin:n}=Po(),e=j=>j?j.toString().replace(/_/g," ").replace(/\b\w/g,se=>se.toUpperCase()):"Unknown",[t,s]=M.useState([]),[a,l]=M.useState([]),[h,f]=M.useState(""),[m,v]=M.useState("all"),[w,E]=M.useState(!0),[C,W]=M.useState(""),[K,Z]=M.useState(null),[$,re]=M.useState({}),[ne,oe]=M.useState({}),[me,Te]=M.useState({}),[pe,D]=M.useState(!1),[P,k]=M.useState(null);M.useEffect(()=>{document.title="Anime | Library"},[]);const A=j=>{if(!j)return"";const se=Date.now()-j,_e=Math.max(se,0),xe=Math.floor(_e/6e4);if(xe<1)return"just now";if(xe<60)return`${xe}m ago`;const Ee=Math.floor(xe/60);if(Ee<48)return`${Ee}h ago`;const Fe=Math.floor(Ee/24);if(Fe<14)return`${Fe}d ago`;const ke=Math.floor(Fe/7);return ke<8?`${ke}w ago`:`${Math.floor(Fe/30)}mo ago`},F=(j,se="image")=>(j||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80)||se,R=async()=>{const j=t.filter(se=>se.image).map((se,_e)=>({url:se.image,name:F(se.title||`anime-${_e+1}`,`anime-${_e+1}`)}));if(!j.length){alert("No images found to download.");return}try{const se=(await zl(async()=>{const{default:rt}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:rt}},[])).default,_e=new se,xe=_e.folder("images"),Ee={};await Promise.all(j.map(async(rt,Wt)=>{try{const Ft=await(await fetch(rt.url)).blob(),fn=(rt.url.split(".").pop()||"jpg").split(/[?#]/)[0],Je=rt.name||`image-${Wt+1}`;Ee[Je]=(Ee[Je]||0)+1;const Mn=Ee[Je]>1?`-${Ee[Je]}`:"";xe.file(`${Je}${Mn}.${fn}`,Ft)}catch(ht){console.warn("Failed to fetch image",rt.url,ht)}}));const Fe=await _e.generateAsync({type:"blob"}),ke=URL.createObjectURL(Fe),He=document.createElement("a");He.href=ke,He.download="anime-images.zip",He.click(),URL.revokeObjectURL(ke)}catch(se){console.error("Zip download failed",se),alert("Failed to create zip. Please try again.")}};M.useEffect(()=>{async function j(){try{const se=await ob();s(se),l(se)}catch(se){console.error(se),W("Failed to load data from MAL.")}finally{E(!1)}}j()},[]),M.useEffect(()=>{lb().then(j=>{j&&k(j)}).catch(()=>{})},[]);const b=j=>{switch((j||"unknown").toLowerCase()){case"watching":return 0;case"completed":return 1;case"on_hold":return 2;case"plan_to_watch":return 3;case"dropped":return 4;default:return 5}},ge=j=>{const se=Number.isFinite(Number(j.watchedEpisodes))?Number(j.watchedEpisodes):0,_e=Number.isFinite(Number(j.episodes))?Number(j.episodes):null;return _e?`${Math.min(se,_e)}/${_e} eps`:se?`${se} eps`:"No progress"};M.useEffect(()=>{let j=[...t];if(m!=="all"&&(j=j.filter(se=>(se.status||"").toLowerCase()===m)),h){const se=h.toLowerCase();j=j.filter(_e=>(_e.title||"").toLowerCase().includes(se))}j.sort((se,_e)=>{const xe=b(se.status),Ee=b(_e.status);return xe!==Ee?xe-Ee:(se.title||"").localeCompare(_e.title||"")}),l(j)},[t,m,h]);const Ke=M.useMemo(()=>[...t].filter(j=>Number.isFinite(j.updatedAt)).sort((j,se)=>se.updatedAt-j.updatedAt).slice(0,6),[t]);M.useEffect(()=>{if(!K){D(!1);return}const j=K.id;if(!j){D(!1);return}if(K.synopsis)return;const se=$[j];if(se!==void 0){Z(xe=>xe&&{...xe,synopsis:se});return}let _e=!1;return D(!0),bv(j).then(xe=>{_e||(re(Ee=>({...Ee,[j]:xe||""})),Z(Ee=>Ee&&{...Ee,synopsis:xe||""}))}).catch(()=>{_e||re(xe=>({...xe,[j]:""}))}).finally(()=>{_e||D(!1)}),()=>{_e=!0}},[K,$]);const Qe=M.useMemo(()=>{const j=t.length,se=t.reduce((ke,He)=>{const rt=Number(He.watchedEpisodes);return Number.isFinite(rt)?ke+rt:ke},0),_e=se*.4,xe=t.filter(ke=>Number.isFinite(ke.score)&&ke.score>0),Ee=xe.reduce((ke,He)=>ke+He.score,0),Fe={watching:0,completed:0,on_hold:0,dropped:0,plan_to_watch:0,unknown:0};return t.forEach(ke=>{const He=(ke.status||"unknown").toLowerCase();Fe[He]!=null?Fe[He]+=1:Fe.unknown+=1}),{total:j,totalWatchedEpisodes:se,byStatus:Fe,avgScore:xe.length?Ee/xe.length:0,totalHours:_e}},[t]),G=(P==null?void 0:P.daysWatched)??(Qe.totalHours||0)/24,V=(P==null?void 0:P.episodesWatched)??Qe.totalWatchedEpisodes,ae=j=>{const se=j.image||"https://imgur.com/chUgq4W.png",_e=Number.isFinite(Number(j.watchedEpisodes))?Number(j.watchedEpisodes):0,xe=Number.isFinite(Number(j.episodes))?Number(j.episodes):null,Ee=j.id||j.title,Fe=Ee?me[Ee]:void 0,ke=Ee?ne[Ee]:!1,He=xe?`Episode ${Math.min(_e,xe)}/${xe}`:`Episode ${_e}`,rt=Number.isFinite(Number(j.score))&&Number(j.score)>0?j.score:"Not rated";return c.jsxs("article",{className:"anime-card",onClick:()=>Z(j.synopsis?j:{...j,synopsis:$[j.id]}),children:[c.jsxs("div",{className:"anime-cover-wrap",children:[c.jsx("img",{className:"anime-cover",src:se,alt:j.title,loading:"lazy",decoding:"async"}),c.jsx("div",{className:`badge-status ${(j.status||"unknown").toLowerCase()}`,children:e(j.status)}),j.score!=null&&c.jsx("div",{className:"badge-score",children:rt})]}),c.jsxs("div",{className:"anime-meta",children:[c.jsx("div",{className:"anime-title",title:j.title,children:j.title}),c.jsx("div",{className:"anime-sub",children:j.episodes?`${j.episodes} episodes`:"Episodes: ?"}),c.jsx("div",{className:"anime-progress",children:He}),c.jsxs("div",{className:"anime-progress",children:["Status: ",e(j.status)]}),c.jsxs("div",{className:"anime-synopsis-preview",children:[c.jsx("div",{className:"anime-synopsis-label",children:"Synopsis"}),Fe!==void 0?c.jsx("p",{className:"anime-synopsis-text",children:Fe||"No synopsis available."}):c.jsx("button",{className:"anime-synopsis-btn",type:"button",onClick:Wt=>{if(Wt.stopPropagation(),!!Ee&&!me[Ee]){if($[Ee]!==void 0){Te(ht=>({...ht,[Ee]:$[Ee]||""}));return}oe(ht=>({...ht,[Ee]:!0})),bv(j.id).then(ht=>{re(Ft=>({...Ft,[Ee]:ht||""})),Te(Ft=>({...Ft,[Ee]:ht||""}))}).catch(()=>{re(ht=>({...ht,[Ee]:""})),Te(ht=>({...ht,[Ee]:""}))}).finally(()=>{oe(ht=>{const{[Ee]:Ft,...fn}=ht;return fn})})}},children:ke?"Loading...":"Reveal Synopsis"})]})]})]},j.id||j.title)},ue=j=>c.jsxs("article",{className:"anime-update-card",children:[c.jsx("div",{className:"anime-update-title",title:j.title,children:j.title}),c.jsxs("div",{className:"anime-update-meta",children:[c.jsx("span",{className:"anime-update-progress",children:ge(j)}),c.jsx("span",{className:"anime-update-dot","aria-hidden":"true",children:""}),c.jsx("span",{className:"anime-update-status",children:e(j.status)})]}),c.jsx("div",{className:"anime-update-time",children:A(j.updatedAt)})]},`update-${j.id||j.title}`);return c.jsxs("main",{className:"anime-page",children:[c.jsxs("div",{className:"anime-content",children:[c.jsxs("header",{className:"anime-header",style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%"},children:[c.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[c.jsx("h1",{className:"anime-title",style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Anime Library"}),c.jsx("p",{className:"anime-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"The Anime I've watched/watching synced directly from MAL (MyAnimeList)"})]}),n&&c.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:c.jsx("button",{className:"stat-link",type:"button",onClick:R,children:"Download Images"})})]}),c.jsxs("div",{className:"anime-stats",children:[c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Total Entries"}),c.jsx("div",{className:"anime-stat-value",children:Qe.total})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Episodes Watched"}),c.jsx("div",{className:"anime-stat-value",children:V})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Watching"}),c.jsx("div",{className:"anime-stat-value",children:Qe.byStatus.watching})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Completed"}),c.jsx("div",{className:"anime-stat-value",children:Qe.byStatus.completed})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Plan to Watch"}),c.jsx("div",{className:"anime-stat-value",children:Qe.byStatus.plan_to_watch})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Avg. Score"}),c.jsx("div",{className:"anime-stat-value",children:Qe.avgScore?Qe.avgScore.toFixed(1):"0.0"})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Days Watched"}),c.jsx("div",{className:"anime-stat-value",children:G.toFixed(1)})]})]}),c.jsxs("section",{className:"anime-toolbar",children:[c.jsx("input",{type:"text",placeholder:"Search anime by title...",value:h,onChange:j=>f(j.target.value),className:"anime-input"}),c.jsxs("select",{value:m,onChange:j=>v(j.target.value),className:"anime-select",children:[c.jsx("option",{value:"all",children:"All statuses"}),c.jsx("option",{value:"watching",children:"Watching"}),c.jsx("option",{value:"completed",children:"Completed"}),c.jsx("option",{value:"on_hold",children:"On Hold"}),c.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"}),c.jsx("option",{value:"dropped",children:"Dropped"})]})]}),w&&c.jsx("div",{className:"loading",children:"Loading anime list from MAL..."}),C&&c.jsx("div",{className:"error-state",children:C}),!w&&!C&&c.jsx(c.Fragment,{children:a.length===0?c.jsx("div",{className:"empty-state",children:"No results match your filters yet."}):c.jsx("section",{className:"anime-grid",children:a.map(j=>ae(j))})})]}),Ke.length>0&&c.jsxs("aside",{className:"anime-updates-float",children:[c.jsxs("div",{className:"anime-updates-header",children:[c.jsx("h3",{children:"Recent Updates"}),c.jsx("span",{className:"anime-updates-caption",children:"Last list activity"})]}),c.jsx("div",{className:"anime-updates-list",children:Ke.map(j=>ue(j))})]}),K&&c.jsx("div",{className:"modal-backdrop visible",onClick:j=>{j.target===j.currentTarget&&Z(null)},children:c.jsxs("div",{className:"anime-modal",children:[c.jsxs("div",{className:"anime-modal-header",children:[c.jsx("h2",{style:{color:"#ffb6c1",margin:0},children:K.title}),c.jsx("button",{className:"anime-modal-close",onClick:()=>Z(null),type:"button",children:"Close"})]}),c.jsxs("div",{className:"anime-modal-body",children:[c.jsx("div",{children:c.jsx("img",{className:"anime-modal-cover",src:K.image||"https://imgur.com/chUgq4W.png",alt:K.title})}),c.jsxs("div",{className:"anime-modal-meta",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Status:"})," ",e(K.status)]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Episodes:"})," ",K.episodes?K.episodes:"Unknown"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Progress:"})," ",Number.isFinite(Number(K.watchedEpisodes))?`Episode ${K.watchedEpisodes}${Number.isFinite(Number(K.episodes))?`/${K.episodes}`:""}`:"Unknown"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Score:"})," ",Number.isFinite(Number(K.score))&&Number(K.score)>0?K.score:"Not rated"]})]}),c.jsxs("div",{className:"anime-modal-summary",children:[c.jsx("h3",{children:"Synopsis"}),c.jsx("p",{className:"anime-modal-summary-text",children:pe&&!K.synopsis?"Loading synopsis...":((L=K.synopsis)==null?void 0:L.trim())||"No synopsis available."})]})]})]})})]})}function ub(){const n={game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:"",image:"",productURL:"",notes:""},{admin:e}=Po(),[t,s]=M.useState([]),[a,l]=M.useState(!0),[h,f]=M.useState(""),[m,v]=M.useState("all"),[w,E]=M.useState("name"),[C,W]=M.useState(!1),[K,Z]=M.useState([]),[$,re]=M.useState(""),[ne,oe]=M.useState(null),[me,Te]=M.useState(!1),[pe,D]=M.useState(n);M.useEffect(()=>{document.title="TCG | Collection"},[]),M.useEffect(()=>{let G=!1;async function V(){try{const ae=tr(nt,"tcg"),ue=await zs(ae),L=[];ue.forEach(j=>L.push({id:j.id,...j.data()})),G||s(L)}catch(ae){console.error("Error loading TCG:",ae);try{const L=await fetch("/base/tcg-collection.json",{cache:"no-cache"});if(!L.ok)throw new Error("fallback fetch failed");const j=await L.json(),se=Array.isArray(j.tcg)?j.tcg:[];G||s(se.map((_e,xe)=>({id:_e.id||`offline-${xe}`,..._e})))}catch(ue){console.error("TCG offline fallback failed",ue)}}finally{G||l(!1)}}return V(),()=>{G=!0}},[]);const P=t.filter(G=>{if(m!=="all"&&G.game!==m)return!1;if(!h)return!0;const V=h.toLowerCase();return(G.name||"").toLowerCase().includes(V)||(G.setName||"").toLowerCase().includes(V)||(G.number||"").toLowerCase().includes(V)}),k=[...P].sort((G,V)=>{const ae=(G.name||"").toLowerCase(),ue=(V.name||"").toLowerCase(),L=(G.setName||"").toLowerCase(),j=(V.setName||"").toLowerCase(),se=(G.rarity||"").toLowerCase(),_e=(V.rarity||"").toLowerCase(),xe=Number(G.quantity||0),Ee=Number(V.quantity||0),Fe=Number(G.estimatedValue||0)*Math.max(1,xe),ke=Number(V.estimatedValue||0)*Math.max(1,Ee);switch(w){case"set":return L.localeCompare(j)||ae.localeCompare(ue);case"rarity":return se.localeCompare(_e)||ae.localeCompare(ue);case"quantity":return Ee-xe||ae.localeCompare(ue);case"value":return ke-Fe||ae.localeCompare(ue);case"name":default:return ae.localeCompare(ue)}}),A=t.reduce((G,V)=>{const ae=Number(V.quantity||1),ue=Number(V.pricePaid||0),L=Number(V.estimatedValue||0);return G.totalCards+=ae,G.totalPaid+=ae*ue,G.totalValue+=ae*L,V.game==="pokemon"&&(G.pokemon+=ae),V.game==="onepiece"&&(G.onepiece+=ae),G},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),F=A.totalValue-A.totalPaid,R=(G,V)=>{D(ae=>({...ae,[G]:V}))},b=async()=>{if(!e)return;if(!pe.name.trim()){alert("Card name is required.");return}const G={game:pe.game,name:pe.name.trim(),setName:pe.setName.trim(),number:pe.number.trim(),rarity:pe.rarity.trim(),condition:pe.condition.trim(),quantity:Number(pe.quantity||1),pricePaid:Number(pe.pricePaid||0),estimatedValue:Number(pe.estimatedValue||0),image:pe.image.trim(),productURL:pe.productURL.trim(),notes:pe.notes.trim()},V=L=>({game:(L.game||"").toLowerCase().trim(),name:(L.name||"").toLowerCase().trim(),setName:(L.setName||"").toLowerCase().trim(),number:(L.number||"").toLowerCase().trim(),rarity:(L.rarity||"").toLowerCase().trim(),condition:(L.condition||"").toLowerCase().trim(),pricePaid:Number(L.pricePaid||0),estimatedValue:Number(L.estimatedValue||0),image:(L.image||"").trim(),productURL:(L.productURL||"").trim(),notes:(L.notes||"").trim()}),ae=V(G),ue=t.find(L=>{const j=V(L);return j.game===ae.game&&j.name===ae.name&&j.setName===ae.setName&&j.number===ae.number&&j.rarity===ae.rarity&&j.condition===ae.condition&&j.pricePaid===ae.pricePaid&&j.estimatedValue===ae.estimatedValue&&j.image===ae.image&&j.productURL===ae.productURL&&j.notes===ae.notes});try{const L=tr(nt,"tcg");if(ue!=null&&ue.id){const j=Number(ue.quantity||1)+G.quantity;await hs(It(nt,"tcg",ue.id),{quantity:j}),s(se=>se.map(_e=>_e.id===ue.id?{..._e,quantity:j}:_e))}else{await io(L,G);const j=await zs(L),se=[];j.forEach(_e=>se.push({id:_e.id,..._e.data()})),s(se)}D(n),Te(!1)}catch(L){console.error("Error adding card:",L),alert("Failed to save card.")}},ge=async()=>{if(!e||!ne)return;if(!ne.name.trim()){alert("Card name is required.");return}const G={game:ne.game,name:ne.name.trim(),setName:ne.setName.trim(),number:ne.number.trim(),rarity:ne.rarity.trim(),condition:ne.condition.trim(),quantity:Number(ne.quantity||1),pricePaid:Number(ne.pricePaid||0),estimatedValue:Number(ne.estimatedValue||0),image:ne.image?ne.image.trim():"",productURL:ne.productURL?ne.productURL.trim():"",notes:ne.notes?ne.notes.trim():""};try{await hs(It(nt,"tcg",ne.id),G),s(V=>V.map(ae=>ae.id===ne.id?{...ae,...G}:ae)),oe(null)}catch(V){console.error("Error updating card:",V),alert("Failed to update card.")}},Ke=async G=>{if(e&&window.confirm("Delete this card?"))try{await _i(It(nt,"tcg",G)),s(V=>V.filter(ae=>ae.id!==G))}catch(V){console.error("Delete error:",V),alert("Failed to delete card.")}},Qe=()=>{if(!t.length){alert("No cards to export.");return}const G=new Blob([JSON.stringify({tcg:t},null,2)],{type:"application/json"}),V=URL.createObjectURL(G),ae=document.createElement("a");ae.href=V,ae.download="tcg-collection.json",ae.click(),URL.revokeObjectURL(V)};return c.jsxs("main",{className:"page",children:[c.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"6px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's TCG Collection"}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Check out my TCG Collection with all the data of how much I spent (Under construction) and how much my collection is worth in total!"}),c.jsx("div",{style:{marginTop:"10px"},children:c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:Qe,children:"Export JSON"})})]}),e&&c.jsx("button",{className:"manga-btn",type:"button","aria-label":"Add card",onClick:()=>Te(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"56px",height:"56px",borderRadius:"50%",padding:0,fontSize:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),e&&me&&c.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:G=>{G.target===G.currentTarget&&Te(!1)},children:c.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:G=>G.stopPropagation(),children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Add card"}),c.jsx("button",{className:"dashboard-close",onClick:()=>Te(!1),type:"button",children:"Close"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[c.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:pe.image?c.jsx("img",{src:pe.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",c.jsxs("select",{value:pe.game,onChange:G=>R("game",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[c.jsx("option",{value:"pokemon",children:"Pokemon"}),c.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",c.jsx("input",{type:"text",value:pe.name,onChange:G=>R("name",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",c.jsx("input",{type:"text",value:pe.setName,onChange:G=>R("setName",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",c.jsx("input",{type:"text",value:pe.number,onChange:G=>R("number",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",c.jsx("input",{type:"text",value:pe.rarity,onChange:G=>R("rarity",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",c.jsx("input",{type:"text",value:pe.condition,onChange:G=>R("condition",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",c.jsx("input",{type:"number",min:"1",value:pe.quantity,onChange:G=>R("quantity",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",c.jsx("input",{type:"number",step:"0.01",min:"0",value:pe.pricePaid,onChange:G=>R("pricePaid",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",c.jsx("input",{type:"number",step:"0.01",min:"0",value:pe.estimatedValue,onChange:G=>R("estimatedValue",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",c.jsx("input",{type:"text",value:pe.image||"",onChange:G=>R("image",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Product URL (backend only)",c.jsx("input",{type:"text",value:pe.productURL||"",onChange:G=>R("productURL",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{gridColumn:"1 / -1",fontSize:"0.8rem",color:"var(--text-soft)"},children:["Notes",c.jsx("textarea",{value:pe.notes,onChange:G=>R("notes",G.target.value),rows:3,style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff",resize:"vertical"}})]})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[c.jsx("button",{onClick:()=>{D(n),Te(!1)},style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:b,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})]})]})}),e&&ne&&c.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:G=>{G.target===G.currentTarget&&oe(null)},children:c.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:G=>G.stopPropagation(),children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Edit card"}),c.jsx("button",{className:"dashboard-close",onClick:()=>oe(null),type:"button",children:"Close"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[c.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:ne.image?c.jsx("img",{src:ne.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",c.jsxs("select",{value:ne.game,onChange:G=>oe(V=>({...V,game:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[c.jsx("option",{value:"pokemon",children:"Pokemon"}),c.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",c.jsx("input",{type:"text",value:ne.name,onChange:G=>oe(V=>({...V,name:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",c.jsx("input",{type:"text",value:ne.setName,onChange:G=>oe(V=>({...V,setName:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",c.jsx("input",{type:"text",value:ne.number,onChange:G=>oe(V=>({...V,number:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",c.jsx("input",{type:"text",value:ne.rarity,onChange:G=>oe(V=>({...V,rarity:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",c.jsx("input",{type:"text",value:ne.condition,onChange:G=>oe(V=>({...V,condition:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",c.jsx("input",{type:"number",value:ne.quantity,onChange:G=>oe(V=>({...V,quantity:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (each)",c.jsx("input",{type:"number",value:ne.pricePaid,onChange:G=>oe(V=>({...V,pricePaid:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (each)",c.jsx("input",{type:"number",value:ne.estimatedValue,onChange:G=>oe(V=>({...V,estimatedValue:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",c.jsx("input",{type:"text",value:ne.image||"",onChange:G=>oe(V=>({...V,image:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Product URL (backend only)",c.jsx("input",{type:"text",value:ne.productURL||"",onChange:G=>oe(V=>({...V,productURL:G.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{gridColumn:"1 / -1",fontSize:"0.8rem",color:"var(--text-soft)"},children:["Notes",c.jsx("textarea",{value:ne.notes||"",onChange:G=>oe(V=>({...V,notes:G.target.value})),rows:3,style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff",resize:"vertical"}})]})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[c.jsx("button",{onClick:()=>oe(null),style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:ge,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save changes"})]})]})}),c.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:A.totalCards})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",A.totalPaid.toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",A.totalValue.toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:F>=0?"#00e676":"#ff8a80"},children:[F>=0?"+":"-","$",Math.abs(F).toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:A.pokemon})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:A.onepiece})]})]}),c.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[c.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:h,onChange:G=>f(G.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),c.jsxs("select",{value:m,onChange:G=>v(G.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[c.jsx("option",{value:"all",children:"All games"}),c.jsx("option",{value:"pokemon",children:"Pokemon only"}),c.jsx("option",{value:"onepiece",children:"One Piece only"})]}),c.jsxs("select",{value:w,onChange:G=>E(G.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[c.jsx("option",{value:"name",children:"Sort: Name (A-Z)"}),c.jsx("option",{value:"set",children:"Sort: Set (A-Z)"}),c.jsx("option",{value:"rarity",children:"Sort: Rarity (A-Z)"}),c.jsx("option",{value:"quantity",children:"Sort: Quantity (high to low)"}),c.jsx("option",{value:"value",children:"Sort: Value (high to low)"})]})]}),a?c.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):P.length===0?c.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):c.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:k.map(G=>{const V=Number(G.quantity||1),ae=V*Number(G.pricePaid||0),ue=V*Number(G.estimatedValue||0);return c.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem",display:"flex",flexDirection:"column",gap:"6px"},children:[G.image&&c.jsx("div",{style:{width:"100%",paddingTop:"140%",position:"relative",overflow:"hidden",borderRadius:"10px",background:"#1e0d14"},children:c.jsx("img",{src:G.image,alt:G.name||"card image",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"contain"}})}),c.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:G.name||"Unnamed card"}),c.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:G.setName||""}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[c.jsxs("span",{children:["#",G.number||"-"]}),c.jsx("span",{children:G.rarity||""})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[c.jsxs("span",{children:["Cond: ",G.condition||"N/A"]}),c.jsxs("span",{children:["Qty: ",V]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[c.jsxs("span",{children:["Paid: $",ae.toFixed(2)]}),c.jsxs("span",{children:["Value: $",ue.toFixed(2)]})]}),G.notes&&c.jsxs("div",{style:{color:"#9c8fa6",fontSize:"0.72rem",fontStyle:"italic",textAlign:"center",marginTop:"6px"},children:['"',G.notes,'"']}),c.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[c.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem",whiteSpace:"nowrap"},children:G.game==="pokemon"?"Pokemon":"One Piece"}),e&&c.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",marginLeft:"auto"},children:[c.jsx("button",{onClick:()=>oe({...G,pricePaid:G.pricePaid??"",estimatedValue:G.estimatedValue??"",quantity:G.quantity??1}),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"rgba(255,105,180,0.15)",color:"#ffb6c1",fontSize:"0.7rem",cursor:"pointer"},children:"Edit"}),c.jsx("button",{onClick:()=>Ke(G.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})]})]})]},G.id)})})]})}const ru="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",su="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",iu="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82",Av="mangaLibraryActivityLog";function Bl(n){const e=n==null?"":String(n);return e.trim()?e.replace(/\s*,?\s*(?:vol(?:ume)?\.?)\s+\d+.*$/i,"").trim():""}function ga(n){if(!n)return null;if(n instanceof Date)return n;if(n&&typeof n.toDate=="function")return n.toDate();const e=String(n).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,h,f]=t;return new Date(Number(l),Number(h)-1,Number(f))}const s=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(s){let[,l,h,f]=s;const m=f.length===2?+`20${f}`:Number(f);return new Date(m,Number(l)-1,Number(h))}const a=new Date(e);return isNaN(a.getTime())?null:a}function ld(n){const e=n.seriesKey||n.series||n.Series||n.title||n.Title||"",s=(Bl(e)||e).trim();return s?s.toLowerCase():""}function db(n){const e=(n==null?void 0:n.series)||(n==null?void 0:n.Series)||(n==null?void 0:n.title)||(n==null?void 0:n.Title)||"Unknown Series";return Bl(e)||"Unknown Series"}function Nv(n){const e=(n||"").trim(),t=e.match(/^(.*?)(?:,?\s*(?:vol\.|volume)\s*(\d+)(?:\s*[-]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),s=t?t[1].trim().toLowerCase():e.toLowerCase(),a=t&&t[2]?parseInt(t[2],10):0;return{name:s,vol:Number.isFinite(a)?a:0}}function hb(n,e){const t=(n==null?void 0:n.Title)||(n==null?void 0:n.title)||"",s=(e==null?void 0:e.Title)||(e==null?void 0:e.title)||"",a=Nv(t),l=Nv(s),h=a.name.localeCompare(l.name);return h!==0?h:a.vol!==l.vol?a.vol-l.vol:t.localeCompare(s)}function Qh(){return{publisher:"",demographic:"",genre:"",subGenre:"",datePurchased:"",msrp:"",initialPublisher:"",initialDemographic:"",initialGenre:"",initialSubGenre:"",initialDatePurchased:"",initialMsrp:"",dateMixed:!1,readChecked:!1,readIndeterminate:!1}}function kv(){return{read:!1,datePurchased:"",dateRead:"",pageCount:"",msrp:"",amountPaid:"",rating:"",special:!1,specialType:"",specialVolumes:"",collectiblePrice:""}}function jv(n,e={}){const t=e.ignoreShared,s=(n==null?void 0:n.amountPaid)??(n==null?void 0:n.AmountPaid)??(n==null?void 0:n.paid)??(n==null?void 0:n.Paid)??"",a=(n==null?void 0:n.msrp)??(n==null?void 0:n.MSRP)??"",l=((n==null?void 0:n.datePurchased)||(n==null?void 0:n.DatePurchased)||"").trim(),h=((n==null?void 0:n.publisher)||(n==null?void 0:n.Publisher)||"").trim(),f=((n==null?void 0:n.demographic)||(n==null?void 0:n.Demographic)||"").trim(),m=((n==null?void 0:n.genre)||(n==null?void 0:n.Genre)||"").trim(),v=((n==null?void 0:n.specialType)||(n==null?void 0:n.SpecialType)||"").trim(),w=(n==null?void 0:n.specialVolumes)??(n==null?void 0:n.SpecialVolumes)??(n==null?void 0:n.volumesContained)??"",E=(n==null?void 0:n.collectiblePrice)??(n==null?void 0:n.CollectiblePrice)??"",C=!!v,W=(n==null?void 0:n.pageCount)??(n==null?void 0:n.PageCount)??(n==null?void 0:n.pages)??(n==null?void 0:n.Pages)??"",K=W==null?"":String(W).trim(),Z=Number(K),$=!K||Number.isNaN(Z)||Z<=0;return!C&&(s===""||s===null)||$||!l||!t&&(a===""||!h||!f||!m)||C&&!v||C&&v.toLowerCase()==="collectible"&&(E===""||E===null)||C&&v.toLowerCase()==="specialedition"&&(w===""||w===null)}function fb(n){const e=(n==null?void 0:n.amountPaid)??"",t=((n==null?void 0:n.datePurchased)||"").trim(),s=!!(n!=null&&n.specialType)||!!(n!=null&&n.special),a=((n==null?void 0:n.specialType)||"").trim(),l=(n==null?void 0:n.specialVolumes)??"",h=(n==null?void 0:n.collectiblePrice)??"",f=(n==null?void 0:n.pageCount)??"",m=(n==null?void 0:n.msrp)??"",v=((n==null?void 0:n.publisher)||"").trim(),w=((n==null?void 0:n.demographic)||"").trim(),E=((n==null?void 0:n.genre)||"").trim(),C=!s&&(e===""||e===null),W=s&&!a,K=s&&a.toLowerCase()==="collectible"&&(h===""||h===null),Z=s&&a.toLowerCase()==="specialedition"&&(l===""||l===null),$=(()=>{const re=(f??"").toString().trim();if(re==="")return!0;const ne=Number(re);return Number.isNaN(ne)||ne<=0})();return{amountPaid:C,datePurchased:!t,specialType:W,collectiblePrice:K,specialVolumes:Z,pageCount:$,msrp:m===""||m===null,publisher:!v,demographic:!w,genre:!E}}function pb(n){return!n||!n.books||!n.books.length?!1:n.books.some(e=>{const t=(e==null?void 0:e.msrp)??(e==null?void 0:e.MSRP)??"",s=((e==null?void 0:e.publisher)||(e==null?void 0:e.Publisher)||"").trim(),a=((e==null?void 0:e.demographic)||(e==null?void 0:e.Demographic)||"").trim(),l=((e==null?void 0:e.genre)||(e==null?void 0:e.Genre)||"").trim();return t===""||!s||!a||!l})}function mb(n){const e=new Map;for(const t of n){const s=ld(t)||t.id;if(!e.has(s)){const m=Bl(t.series||t.Series||t.title||t.Title||"Unknown Series")||"Unknown Series";e.set(s,{key:s,title:m,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const a=e.get(s);a.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;a.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(a.readVolumes+=1,a.readPages+=l);const f=Number(t.rating||t.Rating);!isNaN(f)&&f>0&&(a.ratingSum+=f,a.ratingCount+=1)}return e}function eo(n,e,t=5){const s=new Map;for(const a of n.values()){const l=(a[e]||"").trim();if(!l)continue;const h=l.split(/[\/,]/).map(f=>f.trim()).filter(Boolean);for(const f of h)s.set(f,(s.get(f)||0)+1)}return[...s.entries()].sort((a,l)=>l[1]-a[1]).slice(0,t).map(([a,l])=>({name:a,count:l}))}function Dv(n,e){const t=Array.from({length:12},(s,a)=>{const l=new Date(e,a,1);return{key:`${e}-${a}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:a,value:0}});for(const s of n){const a=ga(s.dateRead||s.DateRead);!a||a.getFullYear()!==e||(t[a.getMonth()].value+=1)}return t}function dl(n){const e=n.getFullYear(),t=`${n.getMonth()+1}`.padStart(2,"0"),s=`${n.getDate()}`.padStart(2,"0");return`${e}-${t}-${s}`}async function Yh(n,e){try{await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function gb(n){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of n){const h=ga(l.dateRead||l.DateRead);h&&(t[h.getDay()]+=1)}if(!t.some(l=>l>0))return[];const a=t.reduce((l,h)=>Math.max(l,h),0)||1;return e.map((l,h)=>({label:l,value:t[h],pct:t[h]/a}))}function yb(n,e=8){const t=[...n.values()];t.sort((l,h)=>h.volumes-l.volumes);const s=t.slice(0,e),a=s.reduce((l,h)=>Math.max(l,h.volumes),0)||1;return s.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/a}))}function vb(n){const e=[];for(const t of n){const s=ga(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!s)continue;const a=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:s,title:a})}return e.sort((t,s)=>t.date-s.date),e}function _b(n){const e=new Date;for(const t of n)if(t.date>=e)return t;return n[n.length-1]||null}function wb(n){let e=0,t=0;for(const s of n){const a=ga(s.datePurchased||s.DatePurchased),l=ga(s.dateRead||s.DateRead);if(!a||!l)continue;const h=l-a;h<=0||(e+=h/(1e3*60*60*24),t+=1)}return t?e/t:null}function xb(n){const e=new Map;for(const t of n){const s=ga(t.datePurchased||t.DatePurchased),a=ga(t.dateRead||t.DateRead);if(!s||!a)continue;const l=a-s;if(l<=0)continue;const h=l/(1e3*60*60*24),f=ld(t)||t.id,m=Bl(t.series||t.Series||t.title||t.Title||"Untitled")||"Untitled";e.has(f)||e.set(f,{key:f,title:m,total:0,count:0,min:h,max:h});const v=e.get(f);v.total+=h,v.count+=1,v.min=Math.min(v.min,h),v.max=Math.max(v.max,h)}return[...e.values()].filter(t=>t.count>0).map(t=>({...t,avg:t.total/t.count})).sort((t,s)=>s.avg-t.avg)}function Eb(n){let e=0,t=0,s=0;for(const a of n){const l=Number(a.msrp||a.MSRP||0)||0,h=Number(a.amountPaid||a.AmountPaid||a.pricePaid||0)||l||0,f=Number(a.collectiblePrice||a.CollectiblePrice||0)||0;e+=l,t+=h,s+=f}return{msrpTotal:e,paidTotal:t,collectibleTotal:s}}function Tb(n){const e=new Map;for(const t of n){const s=ld(t)||t.id;if(!e.has(s)){const E=t.series||t.Series||t.title||t.Title||"Untitled";e.set(s,{key:s,title:Bl(E)||E.trim()||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]})}const a=e.get(s);a.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,h=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,f=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,m=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;a.msrp+=l,a.paid+=h,a.collectible+=f,a.pages+=m,v&&(a.readPages+=m);const w=Number(t.rating||t.Rating);!isNaN(w)&&w>0&&a.ratings.push(w)}return[...e.values()]}function Sb(n){let e=0,t=0;for(const s of n){const a=Number(s.pages||s.Pages||s.pageCount||0)||0;e+=a,(!!s.read||s.status==="Read"||s.Read===!0)&&(t+=a)}return{total:e,read:t}}function Ib(n){let e=0,t=0;for(const s of n.values())s.ratingCount>0&&(e+=s.ratingSum/s.ratingCount,t+=1);return t?e/t:null}function Cb({data:n}){if(!n||!n.length)return c.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=n.reduce((v,w)=>Math.max(v,w.value),0)||1,t=480,s=230,a=30,l=s-a*2,h=t/Math.max(n.length-1,1),f=n.map((v,w)=>{const E=w*h,C=s-a-v.value/e*l;return{...v,x:E,y:C}}),m=f.map((v,w)=>w===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return c.jsx("div",{className:"line-chart",children:c.jsxs("svg",{viewBox:`0 0 ${t} ${s}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,w)=>{const E=s-a-v*l;return c.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:E,y2:E},`h-${w}`)}),f.map((v,w)=>c.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:a/2,y2:s-a/2},`v-${w}`)),c.jsx("path",{className:"line-path",d:m}),f.map((v,w)=>c.jsxs("g",{children:[c.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),c.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),c.jsx("text",{className:"line-label",x:v.x,y:s-4,children:v.label})]},w))]})})}function Pb({data:n}){return!n||!n.length?c.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):c.jsx("div",{className:"weekday-bars",children:n.map(e=>c.jsxs("div",{className:"weekday-col",children:[c.jsx("div",{className:"weekday-count",children:e.value}),c.jsx("div",{className:"weekday-bar-vert",children:c.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),c.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function Rb(n,e,t){const s=n.getFullYear(),a=n.getMonth(),h=new Date(s,a,1).getDay(),f=new Date(s,a+1,0).getDate(),m=new Map;for(const E of e){const C=E.date;if(C.getFullYear()===s&&C.getMonth()===a){const W=C.getDate();m.has(W)||m.set(W,[]),m.get(W).push(E)}}const v=[];for(let E=0;E<h;E++)v.push({type:"pad"});for(let E=1;E<=f;E++){const C=dl(new Date(s,a,E));v.push({type:"day",day:E,releases:m.get(E)||[],dateKey:C,isToday:C===t})}const w=Math.ceil(v.length/7)*7;for(;v.length<w;)v.push({type:"pad"});return v}function bb(){const{user:n,admin:e,loading:t}=Po(),[s,a]=M.useState([]),[l,h]=M.useState([]),[f,m]=M.useState(!0),[v,w]=M.useState(null),[E,C]=M.useState("-"),[W,K]=M.useState({yearly:ru,release:su,activity:iu}),[Z,$]=M.useState(new Set),[re,ne]=M.useState(null),[oe,me]=M.useState(null),[Te,pe]=M.useState(new Set),[D,P]=M.useState(null),[k,A]=M.useState(""),F=M.useRef(null),[R,b]=M.useState(()=>Qh()),[ge,Ke]=M.useState(()=>kv()),[Qe,G]=M.useState([]),[V,ae]=M.useState(!1),[ue,L]=M.useState(""),[j,se]=M.useState([]),[_e,xe]=M.useState(!1),[Ee,Fe]=M.useState(null),[ke,He]=M.useState(null),rt=async()=>{if(e)try{xe(!0);const U=(await zs(tr(nt,"admins"))).docs.map(Y=>({uid:Y.id,...Y.data()}));se(U)}catch(S){console.error("Failed to refresh admins",S)}finally{xe(!1)}},Wt=async()=>{const S=ue.trim();if(!S){alert("Enter a UID to grant admin.");return}try{await nu(It(nt,"admins",S),{uid:S,role:"admin",grantedBy:(n==null?void 0:n.uid)||"manual",grantedAt:new Date().toISOString()},{merge:!0});try{await nu(It(nt,"roles",S),{admin:!0,updatedAt:new Date().toISOString()},{merge:!0})}catch(U){console.warn("Legacy roles write skipped (no permission):",U==null?void 0:U.message)}L(""),await rt()}catch(U){console.error("Grant admin failed",U),alert("Failed to grant admin.")}},ht=async S=>{const U=(S||ue).trim();if(!U){alert("Enter a UID to revoke admin.");return}try{await _i(It(nt,"admins",U)),await _i(It(nt,"roles",U)),S||L(""),await rt()}catch(Y){console.error("Revoke admin failed",Y),alert("Failed to revoke admin.")}},[Ft,fn]=M.useState(!1),[Je,Mn]=M.useState(()=>new Date),[Ht,ws]=M.useState({open:!1,type:null}),In=new Date().getFullYear(),pn=M.useRef(null),Cn=M.useRef(null);M.useEffect(()=>{document.title="Dashboard"},[]),M.useEffect(()=>(Ft||Ht.open||V||!!ke?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[Ft,Ht.open,V,ke]),M.useEffect(()=>{typeof window>"u"||(pn.current=localStorage.getItem("dashboard-yearly-posted"),Cn.current=localStorage.getItem("dashboard-release-posted"))},[]),M.useEffect(()=>{if(!e)return;const S=It(nt,"settings","webhooks");(async()=>{try{const U=await Rf(S);if(U.exists()){const Y=U.data();K({yearly:Y.yearly||ru,release:Y.release||su,activity:Y.activity||iu})}else await nu(S,{yearly:ru,release:su,activity:iu})}catch(U){console.error("Failed to load webhook settings",U)}})()},[e]),M.useEffect(()=>{if(!e)return;let S=!1;return(async()=>{try{xe(!0);const U=await zs(tr(nt,"admins"));if(S)return;const Y=U.docs.map(ve=>({uid:ve.id,...ve.data()}));se(Y)}catch(U){console.error("Failed to load admins",U)}finally{S||xe(!1)}})(),()=>{S=!0}},[e]),M.useEffect(()=>{let S=!1;async function U(){if(!n||!e){a([]),h([]),w(null),m(!1);return}try{m(!0);const[Y,ve]=await Promise.all([zs(tr(nt,"library")),zs(tr(nt,"wishlist"))]);if(S)return;a(Y.docs.map(Ne=>({id:Ne.id,...Ne.data()}))),h(ve.docs.map(Ne=>({id:Ne.id,...Ne.data()}))),w(null)}catch(Y){console.error(Y),S||w("Failed to load dashboard data.")}finally{S||m(!1)}}return U(),()=>{S=!0}},[n,e]);const rr=M.useMemo(()=>{const S=s.length,U=s.filter(Ze=>!!Ze.read||Ze.status==="Read"||Ze.Read===!0).length,Y=S-U,ve=S?Math.round(U/S*100):0,Ne=l.length,Xe=mb(s),Ie=Dv(s,In),ft=Dv(s,In-1),kt=Ie.reduce((Ze,es)=>Ze+es.value,0),bt=gb(s),xt=yb(Xe),Et=vb(l),Xt=_b(Et),jt=wb(s),ct=Eb(s),bn=Sb(s),_t=Ib(Xe),Un=xb(s),pr=eo(Xe,"publisher",5),Xr=eo(Xe,"genre",5),yt=eo(Xe,"demographic",5),Zr=Tb(s);return{totalLibrary:S,readCount:U,unreadCount:Y,readPct:ve,wishlistCount:Ne,seriesMap:Xe,monthlyReads:Ie,prevYearReads:ft,currentYearReadsTotal:kt,weekdayBreakdown:bt,topSeriesBars:xt,releases:Et,nextRelease:Xt,avgDays:jt,purchaseToReadSeries:Un,collectionValue:ct,pages:bn,avgRating:_t,topPublishers:pr,topGenres:Xr,topDemographics:yt,seriesAggregates:Zr}},[s,l,In]),{totalLibrary:Wn,readCount:qr,unreadCount:Gr,readPct:Rt,wishlistCount:qe,seriesMap:Pn,monthlyReads:xs,prevYearReads:Rn,currentYearReadsTotal:Cr,weekdayBreakdown:sr,topSeriesBars:Es,releases:mn,nextRelease:Fn,avgDays:fr,purchaseToReadSeries:Ts,collectionValue:Ot,pages:Ut,avgRating:sn,topPublishers:I,topGenres:ee,topDemographics:le,seriesAggregates:B}=rr,Q=Fn?Fn.date:null,be=!!v,Le=M.useMemo(()=>{if(!s||!s.length)return[];const S=new Map;s.forEach(Y=>{const ve=ld(Y)||Y.id,Ne=db(Y);S.has(ve)||S.set(ve,{seriesKey:ve,displayName:Ne,books:[]}),S.get(ve).books.push(Y)});const U=Array.from(S.values()).map(Y=>({...Y,books:[...Y.books].sort(hb)}));return U.sort((Y,ve)=>Y.displayName.localeCompare(ve.displayName)),U},[s]),mt=M.useMemo(()=>Le.flatMap(S=>S.books.map(U=>U.id)),[Le]);M.useEffect(()=>{oe&&(s.some(S=>S.id===oe)||me(null))},[s,oe]),M.useEffect(()=>{re&&(Le.some(S=>S.seriesKey===re)||ne(null))},[Le,re]),M.useEffect(()=>{if(!Te.size)return;const S=new Set(s.map(Y=>Y.id)),U=Array.from(Te).filter(Y=>!S.has(Y));U.length&&pe(Y=>{const ve=new Set(Y);return U.forEach(Ne=>ve.delete(Ne)),ve})},[s,Te]),M.useEffect(()=>{const S=Array.from(Te);if(!S.length){A("");return}const U=Array.from(new Set(S.map(Y=>s.find(ve=>ve.id===Y)).filter(Boolean).map(Y=>{const ve=Y.amountPaid??Y.AmountPaid??"";return ve==null?"":String(ve)})));A(U.length===1?U[0]:"")},[Te,s]),M.useEffect(()=>{const S=Le.find(ct=>ct.seriesKey===re);if(!S){b(Qh());return}const U=S.books,Y=ct=>{const bn=Array.from(new Set(U.map(_t=>{const Un=ct(_t);return Un==null?"":String(Un).trim()})));return bn.length===1?bn[0]:""},ve=Y(ct=>ct.publisher||ct.Publisher),Ne=Y(ct=>ct.demographic||ct.Demographic),Xe=Y(ct=>ct.genre||ct.Genre),Ie=Y(ct=>ct.subGenre||ct.SubGenre),ft=Y(ct=>ct.msrp??ct.MSRP),kt=Array.from(new Set(U.map(ct=>(ct.datePurchased||ct.DatePurchased||"").trim()).filter(Boolean))),bt=kt.length>1,xt=bt?"":kt[0]||"",Et=U.filter(ct=>!!ct.read||ct.status==="Read"||ct.Read===!0).length,Xt=Et===U.length&&U.length>0;b({publisher:ve,demographic:Ne,genre:Xe,subGenre:Ie,datePurchased:xt,msrp:ft,initialPublisher:ve,initialDemographic:Ne,initialGenre:Xe,initialSubGenre:Ie,initialDatePurchased:xt,initialMsrp:ft,dateMixed:bt,readChecked:Xt,readIndeterminate:!Xt&&!(Et===0)})},[Le,re]),M.useEffect(()=>{F.current&&(F.current.indeterminate=R.readIndeterminate)},[R.readIndeterminate]),M.useEffect(()=>{const S=s.find(Y=>Y.id===oe);if(!S){Ke(kv());return}const U=!!S.read||S.status==="Read"||S.Read===!0;Ke({read:U,datePurchased:S.datePurchased||S.DatePurchased||"",dateRead:U&&(S.dateRead||S.DateRead)||"",pageCount:S.pageCount??S.PageCount??S.pages??S.Pages??"",msrp:S.msrp??S.MSRP??"",amountPaid:S.amountPaid??S.AmountPaid??"",rating:U?S.rating??S.Rating??"":"",special:!!(S.specialType||S.SpecialType),specialType:S.specialType??S.SpecialType??"",specialVolumes:S.specialVolumes??S.SpecialVolumes??"",collectiblePrice:S.collectiblePrice??S.CollectiblePrice??"",publisher:S.publisher||S.Publisher||"",demographic:S.demographic||S.Demographic||"",genre:S.genre||S.Genre||""})},[oe,s]),M.useEffect(()=>{if(!Rn||!Rn.length)return;const S=In-1,U=Rn.reduce((Xe,Ie)=>Xe+Ie.value,0);if(!U||(pn.current?parseInt(pn.current,10):null)===S)return;const ve=Rn.map(Xe=>`${Xe.label}: ${Xe.value}`).join(", "),Ne=`Yearly reads summary for ${S}: ${U} total. Breakdown: ${ve}`;Yh(W.yearly,Ne).then(()=>{pn.current=String(S),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String(S))})},[Rn,In]),M.useEffect(()=>{if(!Fn||!mn.length)return;const S=dl(Fn.date),U=dl(new Date);if(S>U||Cn.current===S)return;const Y=mn.filter(Ne=>dl(Ne.date)===S);if(!Y.length)return;const ve=`Wishlist releases for ${S}:
${Y.map(Ne=>`- ${Ne.title}`).join(`
`)}`;Yh(W.release,ve).then(()=>{Cn.current=S,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",S)})},[Fn,mn]),M.useEffect(()=>{if(!Q){C("-");return}const S=()=>{const Y=Q-new Date;if(Y<=0){C("Released");return}const ve=Math.floor(Y/1e3),Ne=Math.floor(ve/86400),Xe=Math.floor(ve%86400/3600).toString().padStart(2,"0"),Ie=Math.floor(ve%3600/60).toString().padStart(2,"0"),ft=Math.floor(ve%60).toString().padStart(2,"0");C(`${Ne}d ${Xe}:${Ie}:${ft}`)};S();const U=setInterval(S,1e3);return()=>clearInterval(U)},[Q]),M.useEffect(()=>{if(!(typeof window>"u"))try{const S=localStorage.getItem(Av);if(!S)return;const U=JSON.parse(S);if(!Array.isArray(U))return;const Y=U.map(ve=>({message:ve.message,ts:ve.ts?new Date(ve.ts):new Date})).filter(ve=>ve.message);Y.length&&G(Y)}catch(S){console.warn("Failed to load activity log",S)}},[]);const Se=async()=>{try{const S=await zs(tr(nt,"library"));a(S.docs.map(U=>({id:U.id,...U.data()})))}catch(S){console.error("Failed to refresh library",S),w(U=>U||"Failed to refresh library data.")}},Oe=S=>{const U=(S??"").toString().trim();if(U==="")return"";const Y=parseFloat(U);return Number.isFinite(Y)?Y:""},qt=S=>{const U=(S??"").toString().trim();if(U==="")return"";const Y=parseInt(U,10);return Number.isFinite(Y)?Y:""},an=S=>{try{const U=S.slice(0,100).map(Y=>({message:Y.message,ts:Y.ts instanceof Date?Y.ts.toISOString():Y.ts}));typeof window<"u"&&localStorage.setItem(Av,JSON.stringify(U))}catch(U){console.warn("Failed to persist activity log",U)}},on=S=>{if(!S)return;const U={message:S,ts:new Date};G(Ne=>{const Xe=[U,...Ne].slice(0,100);return an(Xe),Xe});const Y=(n==null?void 0:n.email)||"anonymous",ve=`Activity: ${S}
User: ${Y}
Time: ${new Date().toLocaleString()}`;Yh(W.activity,ve).catch(Ne=>console.warn("Activity webhook failed",Ne))},Pr=S=>{$(U=>{const Y=new Set(U);return Y.has(S)?Y.delete(S):Y.add(S),Y}),ne(S),me(null)},Rr=(S,U,Y)=>{const ve=S.metaKey||S.ctrlKey,Ne=S.shiftKey,Xe=mt.indexOf(U);let Ie=new Set(Te);if(Ne&&D!==null&&Xe!==-1){const ft=Math.min(D,Xe),kt=Math.max(D,Xe);for(let bt=ft;bt<=kt;bt+=1){const xt=mt[bt];xt&&Ie.add(xt)}}else ve?Ie.has(U)?Ie.delete(U):Ie.add(U):Ie=new Set;pe(Ie),P(Xe),me(U),ne(Y),$(ft=>{const kt=new Set(ft);return kt.add(Y),kt})},gn=()=>{pe(new Set),P(null)},Ss=async()=>{if(!e){alert("Dashboard is read-only for your account.");return}const S=Array.from(Te);if(!S.length){alert("Select books in Library Manager (use Ctrl/Cmd or Shift) before bulk editing.");return}const U=(k||"").toString().trim(),Y=U!=="",ve=Oe(U);if(Y&&ve===""){alert("Enter a valid number for Amount Paid.");return}try{await Promise.all(S.map(Ne=>hs(It(nt,"library",Ne),{amountPaid:Y?ve:""}))),await Se(),gn(),on(`Updated amount paid for ${S.length} book${S.length===1?"":"s"} in library`),alert(`Applied Amount Paid to ${S.length} selection${S.length===1?"":"s"}.`)}catch(Ne){console.error("Failed to apply Amount Paid",Ne),alert("Failed to apply Amount Paid to selection.")}},br=async()=>{if(!e){alert("Dashboard is read-only for your account.");return}const S=Le.find(Et=>Et.seriesKey===re);if(!S||!S.books.length)return;const U=!R.readIndeterminate,Y=!!R.readChecked,ve=R.datePurchased!==R.initialDatePurchased,Ne=R.msrp!==R.initialMsrp,Xe=R.publisher!==R.initialPublisher,Ie=R.demographic!==R.initialDemographic,ft=R.genre!==R.initialGenre,kt=R.subGenre!==R.initialSubGenre;if(!U&&!ve&&!Ne&&!Xe&&!Ie&&!ft&&!kt)return;const bt=String(R.msrp??"").trim(),xt=Ne?Oe(bt):"";if(Ne&&bt!==""&&xt===""){alert("Enter a valid number for MSRP.");return}try{const Et=[];if(S.books.forEach(Xt=>{const jt={};U&&(jt.read=Y,jt.dateRead=Y?Xt.dateRead||Xt.DateRead||new Date().toISOString().slice(0,10):""),ve&&(jt.datePurchased=R.datePurchased||""),Ne&&(jt.msrp=R.msrp===""?"":xt),Xe&&(jt.publisher=R.publisher||""),Ie&&(jt.demographic=R.demographic||""),ft&&(jt.genre=R.genre||""),kt&&(jt.subGenre=R.subGenre||""),Object.keys(jt).length&&Et.push(hs(It(nt,"library",Xt.id),jt))}),!Et.length)return;await Promise.all(Et),await Se(),me(null),on(`Updated series "${S.displayName||"Series"}" (${S.books.length} book${S.books.length===1?"":"s"})`),alert("Series updated.")}catch(Et){console.error("Failed to save series changes",Et),alert("Failed to update series.")}},Kr=async()=>{if(!e){alert("Dashboard is read-only for your account.");return}if(!oe)return;const S=!!ge.read,U=String(ge.msrp??"").trim(),Y=String(ge.amountPaid??"").trim(),ve=String(ge.pageCount??"").trim(),Ne=String(ge.rating??"").trim(),Xe=Oe(U),Ie=Oe(Y),ft=qt(ve),kt=Oe(Ne);if(U!==""&&Xe===""){alert("Enter a valid number for MSRP.");return}if(Y!==""&&Ie===""){alert("Enter a valid number for Amount Paid.");return}if(ve!==""&&ft===""){alert("Enter a valid page count.");return}if(S&&Ne!==""&&kt===""){alert("Enter a valid rating.");return}const bt=!!ge.special,xt=qt(ge.specialVolumes),Et=Oe(ge.collectiblePrice),Xt=String(ge.specialVolumes??"").trim(),jt=String(ge.collectiblePrice??"").trim();if(bt&&ge.specialType==="specialEdition"&&Xt!==""&&xt===""){alert("Enter a valid number for volumes contained.");return}if(bt&&ge.specialType==="collectible"&&jt!==""&&Et===""){alert("Enter a valid collectible price.");return}const ct=S?ge.dateRead||new Date().toISOString().slice(0,10):"",bn={read:S,datePurchased:ge.datePurchased||"",dateRead:ct,msrp:ge.msrp===""?"":Xe,amountPaid:ge.amountPaid===""?"":Ie,pageCount:ge.pageCount===""?"":ft,rating:S?ge.rating===""?"":kt:"",specialType:bt&&ge.specialType||"",specialVolumes:bt&&ge.specialType==="specialEdition"?ge.specialVolumes===""?"":xt:"",collectiblePrice:bt&&ge.specialType==="collectible"?ge.collectiblePrice===""?"":Et:""};try{await hs(It(nt,"library",oe),bn),await Se();const _t=s.find(pr=>pr.id===oe)||at,Un=(_t==null?void 0:_t.Title)||(_t==null?void 0:_t.title)||"Untitled";on(`Updated "${Un}" in library`),alert("Saved changes.")}catch(_t){console.error("Failed to save book changes",_t),alert("Failed to save changes.")}},wa=()=>{ne(null),me(null),gn(),b(Qh())},ir=()=>{me(null),P(null)},Qr=Le.find(S=>S.seriesKey===re)||null,at=s.find(S=>S.id===oe)||null,Yr=re?{msrp:!R.msrp,datePurchased:!R.datePurchased&&!R.dateMixed,publisher:!R.publisher,demographic:!R.demographic,genre:!R.genre}:{},Hn=oe?fb({amountPaid:ge.amountPaid,msrp:ge.msrp,datePurchased:ge.datePurchased,publisher:(at==null?void 0:at.publisher)||(at==null?void 0:at.Publisher)||"",demographic:(at==null?void 0:at.demographic)||(at==null?void 0:at.Demographic)||"",genre:(at==null?void 0:at.genre)||(at==null?void 0:at.Genre)||"",special:ge.special,specialType:ge.specialType,specialVolumes:ge.specialVolumes,collectiblePrice:ge.collectiblePrice,pageCount:ge.pageCount}):{};if(t)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-loading",children:[c.jsx("h1",{children:"Dashboard"}),c.jsx("p",{children:"Checking permissions..."})]})});if(!n||!e)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-locked",children:[c.jsx("h1",{children:"Dashboard"}),c.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(f)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-loading",children:[c.jsx("h1",{children:"Dashboard"}),v?c.jsx("p",{className:"error",children:v}):c.jsx("p",{children:"Loading stats..."})]})});const Is=Wn+qe,Cs=Is?Math.round(Wn/Is*100):0,Js=[...Pn.values()].filter(S=>S.ratingCount>0).map(S=>({title:S.title,avg:S.ratingSum/S.ratingCount,count:S.ratingCount})).sort((S,U)=>U.avg-S.avg||U.count-S.count).slice(0,3);function xa(){if(Q)Mn(new Date(Q.getFullYear(),Q.getMonth(),1));else if(mn.length){const S=mn[0].date;Mn(new Date(S.getFullYear(),S.getMonth(),1))}fn(!0)}function Ar(S){ws({open:!0,type:S})}function gt(){ws({open:!1,type:null})}const Ea=dl(new Date),Ps=Rb(Je,mn,Ea);function Jr(){const S=Ht.type;if(!S)return null;if(S==="publishers"){const U=[...eo(Pn,"publisher",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Publishers by Series"}),U.length===0?c.jsx("p",{children:"No publisher data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Publisher"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:U.map((Y,ve)=>c.jsxs("tr",{children:[c.jsx("td",{children:ve+1}),c.jsx("td",{children:Y.name}),c.jsx("td",{children:Y.count})]},Y.name+ve))})]})]})}if(S==="genres"){const U=[...eo(Pn,"genre",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Genres by Series"}),U.length===0?c.jsx("p",{children:"No genre data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Genre"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:U.map((Y,ve)=>c.jsxs("tr",{children:[c.jsx("td",{children:ve+1}),c.jsx("td",{children:Y.name}),c.jsx("td",{children:Y.count})]},Y.name+ve))})]})]})}if(S==="demographics"){const U=[...eo(Pn,"demographic",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Demographics by Series"}),U.length===0?c.jsx("p",{children:"No demographic data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Demographic"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:U.map((Y,ve)=>c.jsxs("tr",{children:[c.jsx("td",{children:ve+1}),c.jsx("td",{children:Y.name}),c.jsx("td",{children:Y.count})]},Y.name+ve))})]})]})}if(S==="timeToRead"){const U=Ts||[];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Average Time From Purchase to Read"}),fr==null?c.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["On average, it takes"," ",c.jsxs("strong",{children:[fr.toFixed(1)," days"]})," from purchase to finishing a volume."]}),U.length>0?c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Series"}),c.jsx("th",{children:"Avg Days"}),c.jsx("th",{children:"Longest"}),c.jsx("th",{children:"Shortest"}),c.jsx("th",{children:"Reads Count"})]})}),c.jsx("tbody",{children:U.map(Y=>c.jsxs("tr",{children:[c.jsx("td",{children:Y.title}),c.jsxs("td",{children:[Y.avg.toFixed(1)," days"]}),c.jsxs("td",{children:[Math.round(Y.max)," days"]}),c.jsxs("td",{children:[Math.round(Y.min)," days"]}),c.jsx("td",{children:Y.count})]},Y.key))})]}):c.jsx("p",{style:{marginTop:8},children:"No series-level data yet."})]})]})}if(S==="collectionValue"){const{msrpTotal:U,paidTotal:Y}=Ot,ve=U-Y,Ne=U>0?(Y/U*100).toFixed(1):"-",Xe=[...B].filter(Ie=>Ie.msrp||Ie.paid||Ie.collectible).sort((Ie,ft)=>ft.msrp+ft.collectible-(Ie.msrp+Ie.collectible));return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Collection Value Breakdown"}),c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("th",{children:"Total MSRP"}),c.jsxs("td",{children:["$",U.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Total Paid"}),c.jsxs("td",{children:["$",Y.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Difference"}),c.jsxs("td",{children:["$",ve.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Paid vs MSRP"}),c.jsx("td",{children:Ne==="-"?"-":`${Ne}%`})]})]})}),Xe.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"MSRP"}),c.jsx("th",{children:"Paid"}),c.jsx("th",{children:"Collectible"}),c.jsx("th",{children:"Books"})]})}),c.jsx("tbody",{children:Xe.map((Ie,ft)=>c.jsxs("tr",{children:[c.jsx("td",{children:Ie.title}),c.jsxs("td",{children:["$",Ie.msrp.toFixed(2)]}),c.jsxs("td",{children:["$",Ie.paid.toFixed(2)]}),c.jsx("td",{children:Ie.collectible?`$${Ie.collectible.toFixed(2)}`:"--"}),c.jsx("td",{children:Ie.books})]},Ie.title+ft))})]})]})]})}if(S==="pages"){const U=[...B].filter(Y=>Y.pages>0).map(Y=>({...Y,pct:Y.pages?Math.round(Y.readPages/Y.pages*100):0})).sort((Y,ve)=>ve.pages-Y.pages);return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Pages Read vs Total"}),c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("th",{children:"Total Pages"}),c.jsx("td",{children:Ut.total.toLocaleString()})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Pages Read"}),c.jsx("td",{children:Ut.read.toLocaleString()})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Completion"}),c.jsx("td",{children:Ut.total?`${(Ut.read/Ut.total*100).toFixed(1)}%`:"-"})]})]})}),U.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Read Pages"}),c.jsx("th",{children:"Total Pages"}),c.jsx("th",{children:"% Read"}),c.jsx("th",{children:"Books"})]})}),c.jsx("tbody",{children:U.map((Y,ve)=>c.jsxs("tr",{children:[c.jsx("td",{children:Y.title}),c.jsx("td",{children:Y.readPages.toLocaleString()}),c.jsx("td",{children:Y.pages.toLocaleString()}),c.jsxs("td",{children:[Y.pct,"%"]}),c.jsx("td",{children:Y.books})]},Y.title+ve))})]})]})]})}if(S==="ratings"){const U=[...B].map(Y=>{if(!Y.ratings.length)return null;const ve=Y.ratings.reduce((Ne,Xe)=>Ne+Xe,0)/Y.ratings.length;return{title:Y.title,avg:ve,count:Y.ratings.length}}).filter(Boolean).sort((Y,ve)=>ve.avg-Y.avg||ve.count-Y.count);return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Ratings Overview"}),sn==null?c.jsx("p",{children:"No ratings have been recorded yet."}):c.jsxs("p",{children:["Average series rating across rated series is"," ",c.jsx("strong",{children:sn.toFixed(2)}),"."]}),U.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Avg"}),c.jsx("th",{children:"Ratings"})]})}),c.jsx("tbody",{children:U.map((Y,ve)=>c.jsxs("tr",{children:[c.jsx("td",{children:Y.title}),c.jsx("td",{children:Y.avg.toFixed(2)}),c.jsx("td",{children:Y.count})]},Y.title+ve))})]})]})]})}return S==="releases"?c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Wishlist Releases"}),mn.length===0?c.jsx("p",{children:"No wishlist releases found."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Date"}),c.jsx("th",{children:"Title"})]})}),c.jsx("tbody",{children:mn.map((U,Y)=>c.jsxs("tr",{children:[c.jsx("td",{children:U.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),c.jsx("td",{children:U.title})]},Y))})]})]}):null}return c.jsxs("div",{className:"page dashboard-page",children:[c.jsxs("header",{className:"dashboard-header",style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",textAlign:"center",width:"100%"},children:[c.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Dashboard"}),c.jsx("p",{className:"dashboard-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"My Entire Statistics dashboard for my Manga. I still use Excel though."})]}),e&&c.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:c.jsx("button",{className:"stat-link",onClick:()=>ae(!0),type:"button",children:"Admin Settings"})})]}),c.jsx("section",{id:"dashboardSection",className:"page-section active",children:c.jsxs("div",{className:"dashboard-grid",children:[c.jsxs("div",{className:"stat-stack",children:[c.jsxs("div",{className:"stat-card mini",children:[c.jsx("h3",{children:"Total Library Books"}),c.jsx("div",{className:"stat-value",children:Wn}),c.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),c.jsxs("div",{className:"stat-card mini",children:[c.jsx("h3",{children:"Wishlist Items"}),c.jsx("div",{className:"stat-value",children:qe}),c.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Read / Unread"}),c.jsx("div",{className:"pie",style:{"--pct":`${Rt*3.6}deg`},children:c.jsxs("div",{className:"pie-label",children:[Rt,"%"]})}),c.jsxs("div",{className:"stat-value",children:[qr," read / ",Gr," unread"]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("ratings"),children:[c.jsx("h3",{children:"Ratings"}),c.jsx("div",{className:"stat-value",children:sn==null?"-":sn.toFixed(2)}),c.jsx("div",{className:"stat-sub",children:"Average across rated series."}),c.jsx("div",{className:"stat-list compact",children:Js.length?Js.map((S,U)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:U+1}),c.jsx("span",{className:"stat-name",children:S.title}),c.jsx("span",{className:"stat-count",children:S.avg.toFixed(2)})]},S.title+U)):c.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("pages"),children:[c.jsx("h3",{children:"Page Count Read / Total"}),c.jsxs("div",{className:"stat-value",children:[Ut.read.toLocaleString()," / ",Ut.total.toLocaleString()]}),c.jsx("div",{className:"stat-sub",children:Ut.total?`${(Ut.read/Ut.total*100).toFixed(1)}% read`:"-"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Library vs Wishlist"}),c.jsx("div",{className:"pie",style:{"--pct":`${Cs*3.6}deg`},children:c.jsxs("div",{className:"pie-label",children:[Cs,"%"]})}),c.jsxs("div",{className:"stat-value",children:[Wn," / ",qe]}),c.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("demographics"),children:[c.jsx("h3",{children:"Top Demographics"}),c.jsx("div",{className:"stat-list",children:le.length?le.slice(0,3).map((S,U)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:U+1}),c.jsx("span",{className:"stat-name",children:S.name}),c.jsx("span",{className:"stat-count",children:S.count})]},S.name)):c.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("publishers"),children:[c.jsx("h3",{children:"Top Publishers"}),c.jsx("div",{className:"stat-list",children:I.length?I.slice(0,3).map((S,U)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:U+1}),c.jsx("span",{className:"stat-name",children:S.name}),c.jsx("span",{className:"stat-count",children:S.count})]},S.name)):c.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("genres"),children:[c.jsx("h3",{children:"Top Genres"}),c.jsx("div",{className:"stat-list",children:ee.length?ee.slice(0,3).map((S,U)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:U+1}),c.jsx("span",{className:"stat-name",children:S.name}),c.jsx("span",{className:"stat-count",children:S.count})]},S.name)):c.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>{xa()},children:[c.jsx("h3",{children:"Next Wishlist Release"}),c.jsx("div",{className:"stat-value next-release",children:Fn?Fn.title:"No upcoming releases"}),c.jsxs("div",{className:"stat-sub",children:[Q?Q.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",c.jsx("br",{}),c.jsx("span",{id:"statNextCountdown",children:E})]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("collectionValue"),style:{textAlign:"center"},children:[c.jsx("h3",{children:"Collection Pricing"}),c.jsxs("div",{className:"stat-value stat-msrp",children:["$",Ot.msrpTotal.toFixed(2)]}),c.jsxs("div",{className:"stat-value stat-paid",children:["$",Ot.paidTotal.toFixed(2),Ot.msrpTotal>0&&c.jsxs("span",{className:"stat-paid-pct",children:["(",((1-Ot.paidTotal/Ot.msrpTotal)*100).toFixed(1),"% off)"]})]}),c.jsxs("div",{className:"stat-value stat-collectible",children:["$",Ot.collectibleTotal.toFixed(2)]}),c.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Current Year Reads"}),c.jsx("div",{className:"stat-value",children:Cr}),c.jsxs("div",{className:"stat-sub",children:["Reads in ",In]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("timeToRead"),children:[c.jsx("h3",{children:"Avg Days From Purchase to Read"}),c.jsx("div",{className:"stat-value",children:fr==null?"-":`${fr.toFixed(1)} days`}),c.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),c.jsxs("div",{className:"stat-duo",children:[c.jsxs("div",{className:"stat-card tall",children:[c.jsxs("h3",{children:["Reads Per Month (",In,")"]}),c.jsx(Cb,{data:xs})]}),c.jsxs("div",{className:"stat-card tall",children:[c.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),c.jsx(Pb,{data:sr}),c.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),c.jsxs("div",{className:"stat-card wide",children:[c.jsx("h3",{children:"Activity Log"}),be&&c.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),c.jsx("div",{className:"activity-log scrollable",children:Qe.length?Qe.map((S,U)=>{const Y=S.ts?new Date(S.ts):null;return c.jsxs("div",{className:"activity-row",children:[c.jsx("span",{className:"activity-title",children:S.message}),c.jsx("span",{className:"activity-date",children:Y?Y.toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):""})]},(S.message||"activity")+U)}):c.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]}),c.jsxs("div",{className:"stat-card wide",children:[c.jsx("h3",{children:"Library Manager"}),Le.length?c.jsxs("div",{className:"dash-library",children:[c.jsxs("div",{className:"dash-library-list",children:[Le.map(S=>{const U=S.books.filter(Ie=>!!Ie.read||Ie.status==="Read"||Ie.Read===!0).length,Y=Z.has(S.seriesKey),ve=re===S.seriesKey&&!oe,Ne=pb(S),Xe=S.books.some(Ie=>jv(Ie));return c.jsxs("div",{style:{marginBottom:"8px"},children:[c.jsxs("button",{type:"button",onClick:()=>Pr(S.seriesKey),style:{width:"100%",textAlign:"left",background:Ne?"rgba(255,179,71,0.08)":"transparent",border:`1px solid ${ve?"#ff69b4":Ne?"rgba(255,179,71,0.6)":"rgba(255,182,193,0.25)"}`,color:"#ffb6c1",padding:"8px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",position:"relative",boxShadow:Ne?"0 0 10px rgba(255,179,71,0.5)":ve?"0 0 8px rgba(255,105,180,0.5)":"none"},children:[c.jsx("span",{style:{transition:"transform 0.2s ease",transform:Y?"rotate(90deg)":"none"},children:">"}),c.jsx("span",{style:{flex:1},children:S.displayName}),c.jsxs("span",{style:{fontSize:"11px",color:"#f8d1d8"},children:[S.books.length," book",S.books.length===1?"":"s",S.books.length?`  ${U} read`:""]}),Xe&&c.jsx("span",{title:"Some volumes are missing required data",style:{width:"12px",height:"12px",borderRadius:"999px",background:"#ffb347",border:"1px solid rgba(255,255,255,0.25)",boxShadow:"0 0 10px rgba(255,179,71,0.6)"}})]}),c.jsx("div",{style:{margin:"6px 0 10px 10px",paddingLeft:"10px",borderLeft:"1px solid rgba(255,182,193,0.25)",display:Y?"block":"none"},children:S.books.map(Ie=>{const ft=oe===Ie.id,kt=Te.has(Ie.id),bt=!!Ie.read||Ie.status==="Read"||Ie.Read===!0,xt=jv(Ie,{ignoreShared:!0});return c.jsxs("button",{type:"button",onClick:Et=>Rr(Et,Ie.id,S.seriesKey),style:{width:"100%",textAlign:"left",background:xt?"rgba(255,179,71,0.1)":"transparent",border:`1px solid ${ft?"#ff69b4":kt?"#fff59d":xt?"rgba(255,179,71,0.6)":"rgba(255,182,193,0.25)"}`,color:"#ffb6c1",padding:"8px",borderRadius:"8px",marginBottom:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",boxShadow:ft?"0 0 8px rgba(255,105,180,0.5)":kt?"0 0 10px rgba(255,255,180,0.65)":xt?"0 0 10px rgba(255,179,71,0.5)":"none"},children:[c.jsx("span",{style:{flex:1,minWidth:0},children:(Ie.Title||Ie.title||"Untitled")+(bt?" ?":"")}),xt&&c.jsx("span",{style:{flexShrink:0,padding:"2px 8px",borderRadius:"999px",background:"rgba(255,179,71,0.18)",border:"1px solid rgba(255,179,71,0.6)",color:"#ffd8a1",fontSize:"11px",fontWeight:700,whiteSpace:"nowrap"},children:"Missing data"})]},Ie.id)})})]},S.seriesKey)}),Le.length>0&&Te.size>0&&c.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:c.jsx("button",{type:"button",style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid #ffb6c1",background:"transparent",color:"#ffb6c1",cursor:"pointer"},onClick:gn,children:"Clear Selection"})})]}),c.jsxs("div",{className:"dash-library-details",children:[Te.size>0&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"10px",marginBottom:"10px",border:"1px dashed rgba(255,182,193,0.45)",borderRadius:"10px",background:"rgba(255,182,193,0.08)"},children:[c.jsxs("div",{children:["Apply Amount Paid to ",Te.size," selected book",Te.size===1?"":"s"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[c.jsx("input",{type:"number",step:"0.01",min:"0",value:k,onChange:S=>A(S.target.value),style:{maxWidth:"140px"}}),c.jsx("button",{type:"button",className:"dash-btn primary",onClick:Ss,children:"Apply to Selected"})]})]}),!re&&!oe&&c.jsx("div",{className:"stat-sub",style:{marginTop:6},children:"Select a series or book to edit"}),re&&!oe&&Qr&&c.jsxs("div",{children:[c.jsx("div",{className:"dash-detail-title",children:Qr.displayName}),c.jsx("div",{className:"dash-detail-row",children:c.jsxs("label",{className:"inline-checkbox",children:[c.jsx("input",{ref:F,type:"checkbox",checked:R.readChecked,onChange:S=>b(U=>({...U,readChecked:S.target.checked,readIndeterminate:!1}))}),c.jsx("span",{children:"Mark series as read"})]})}),c.jsxs("div",{className:`dash-detail-row${Yr.publisher?" missing-row":""}`,children:[c.jsx("span",{children:"Publisher"}),c.jsx("input",{type:"text",value:R.publisher,onChange:S=>b(U=>({...U,publisher:S.target.value})),placeholder:"Set publisher for series"})]}),c.jsxs("div",{className:`dash-detail-row${Yr.demographic?" missing-row":""}`,children:[c.jsx("span",{children:"Demographic"}),c.jsxs("select",{value:R.demographic,onChange:S=>b(U=>({...U,demographic:S.target.value})),children:[c.jsx("option",{value:"",children:"Select Demographic"}),c.jsx("option",{value:"Shounen",children:"Shounen"}),c.jsx("option",{value:"Seinen",children:"Seinen"}),c.jsx("option",{value:"Shoujo",children:"Shoujo"}),c.jsx("option",{value:"Josei",children:"Josei"})]})]}),c.jsxs("div",{className:`dash-detail-row${Yr.genre?" missing-row":""}`,children:[c.jsx("span",{children:"Genre"}),c.jsx("input",{type:"text",value:R.genre,onChange:S=>b(U=>({...U,genre:S.target.value})),placeholder:"Primary genre"})]}),c.jsxs("div",{className:"dash-detail-row",children:[c.jsx("span",{children:"Sub-Genre"}),c.jsx("input",{type:"text",value:R.subGenre,onChange:S=>b(U=>({...U,subGenre:S.target.value})),placeholder:"Secondary genre / theme"})]}),c.jsxs("div",{className:`dash-detail-row${Yr.datePurchased?" missing-row":""}`,children:[c.jsx("span",{children:"Date Purchased"}),c.jsx("input",{type:"date",value:R.datePurchased,onChange:S=>b(U=>({...U,datePurchased:S.target.value}))}),R.dateMixed&&c.jsx("span",{className:"stat-sub",style:{marginTop:4},children:"Volumes have different purchase dates. Setting a date will overwrite all."})]}),c.jsxs("div",{className:`dash-detail-row${Yr.msrp?" missing-row":""}`,children:[c.jsx("span",{children:"MSRP (per book)"}),c.jsx("input",{type:"number",step:"0.01",min:"0",value:R.msrp,onChange:S=>b(U=>({...U,msrp:S.target.value})),placeholder:"0.00"})]}),c.jsxs("div",{className:"dash-detail-actions",children:[c.jsx("button",{type:"button",className:"dash-btn secondary",onClick:wa,children:"Cancel"}),c.jsx("button",{type:"button",className:"dash-btn primary",onClick:br,children:"Save Series"})]})]}),oe&&at&&c.jsxs("div",{children:[c.jsx("div",{className:"dash-detail-title",children:at.Title||at.title||"Untitled"}),c.jsx("div",{className:"dash-detail-row",children:c.jsxs("label",{className:"inline-checkbox",children:[c.jsx("input",{type:"checkbox",checked:!!ge.read,onChange:S=>Ke(U=>({...U,read:S.target.checked,dateRead:S.target.checked?U.dateRead||new Date().toISOString().slice(0,10):"",rating:S.target.checked?U.rating:""}))}),c.jsx("span",{children:"Mark as read"})]})}),c.jsxs("div",{className:`dash-detail-row${Hn.datePurchased?" missing-row":""}`,children:[c.jsx("span",{children:"Date Purchased"}),c.jsx("input",{type:"date",value:ge.datePurchased,onChange:S=>Ke(U=>({...U,datePurchased:S.target.value}))})]}),ge.read&&c.jsxs("div",{className:"dash-detail-row",children:[c.jsx("span",{children:"Date Read"}),c.jsx("input",{type:"date",value:ge.dateRead,onChange:S=>Ke(U=>({...U,dateRead:S.target.value}))})]}),c.jsxs("div",{className:`dash-detail-row${Hn.pageCount?" missing-row":""}`,children:[c.jsx("span",{children:"Page Count"}),c.jsx("input",{type:"number",min:"0",step:"1",value:ge.pageCount,onChange:S=>Ke(U=>({...U,pageCount:S.target.value}))})]}),c.jsxs("div",{className:`dash-detail-row${Hn.msrp?" missing-row":""}`,children:[c.jsx("span",{children:"MSRP (per book)"}),c.jsx("input",{type:"number",step:"0.01",min:"0",value:ge.msrp,onChange:S=>Ke(U=>({...U,msrp:S.target.value})),placeholder:"0.00"})]}),!(ge.special&&ge.specialType==="collectible")&&c.jsxs("div",{className:`dash-detail-row${Hn.amountPaid?" missing-row":""}`,children:[c.jsx("span",{children:"Amount Paid"}),c.jsx("input",{type:"number",step:"0.01",min:"0",value:ge.amountPaid,onChange:S=>Ke(U=>({...U,amountPaid:S.target.value})),placeholder:"0.00"})]}),ge.read&&c.jsxs("div",{className:"dash-detail-row",children:[c.jsx("span",{children:"Star Rating"}),c.jsx("input",{type:"number",min:"0",max:"5",step:"0.5",value:ge.rating,onChange:S=>Ke(U=>({...U,rating:S.target.value})),placeholder:"0-5"})]}),c.jsx("div",{className:`dash-detail-row${Hn.specialType?" missing-row":""}`,children:c.jsxs("label",{className:"inline-checkbox",style:{width:"100%"},children:[c.jsx("input",{type:"checkbox",checked:!!ge.special,onChange:S=>Ke(U=>({...U,special:S.target.checked,specialType:S.target.checked?U.specialType:"",specialVolumes:S.target.checked?U.specialVolumes:"",collectiblePrice:S.target.checked?U.collectiblePrice:""}))}),c.jsx("span",{children:"Special?"})]})}),ge.special&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`dash-detail-row${Hn.specialType?" missing-row":""}`,children:[c.jsx("span",{children:"Special Type"}),c.jsxs("select",{value:ge.specialType,onChange:S=>Ke(U=>({...U,specialType:S.target.value,specialVolumes:S.target.value==="specialEdition"?U.specialVolumes:"",collectiblePrice:S.target.value==="collectible"?U.collectiblePrice:""})),children:[c.jsx("option",{value:"",children:"Select type"}),c.jsx("option",{value:"specialEdition",children:"Special Edition"}),c.jsx("option",{value:"collectible",children:"Collectible"})]})]}),ge.specialType==="specialEdition"&&c.jsxs("div",{className:`dash-detail-row${Hn.specialVolumes?" missing-row":""}`,children:[c.jsx("span",{children:"Volumes Contained"}),c.jsx("input",{type:"number",min:"1",step:"1",value:ge.specialVolumes,onChange:S=>Ke(U=>({...U,specialVolumes:S.target.value}))})]}),ge.specialType==="collectible"&&c.jsxs("div",{className:`dash-detail-row${Hn.collectiblePrice?" missing-row":""}`,children:[c.jsx("span",{children:"Collectible Price"}),c.jsx("input",{type:"number",min:"0",step:"0.01",value:ge.collectiblePrice,onChange:S=>Ke(U=>({...U,collectiblePrice:S.target.value})),placeholder:"0.00"})]})]}),c.jsxs("div",{className:"dash-detail-actions",children:[c.jsx("button",{type:"button",className:"dash-btn secondary",onClick:ir,children:"Cancel"}),c.jsx("button",{type:"button",className:"dash-btn primary",onClick:Kr,children:"Save Changes"})]})]})]})]}):c.jsx("div",{className:"stat-sub",children:"No library items."})]})]})}),Ft&&c.jsx("div",{id:"calendarOverlay",onClick:()=>fn(!1),children:c.jsxs("div",{id:"calendarCard",onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:"calendar-header",children:[c.jsx("div",{className:"calendar-title",children:Je.toLocaleString(void 0,{month:"long",year:"numeric"})}),c.jsxs("div",{className:"calendar-nav",children:[c.jsx("button",{className:"calendar-nav-btn",onClick:()=>Mn(new Date(Je.getFullYear(),Je.getMonth()-1,1)),children:"<"}),c.jsx("button",{className:"calendar-nav-btn",onClick:()=>Mn(new Date(Je.getFullYear(),Je.getMonth()+1,1)),children:">"})]})]}),c.jsxs("div",{className:"calendar-weekdays",children:[c.jsx("div",{children:"Sun"}),c.jsx("div",{children:"Mon"}),c.jsx("div",{children:"Tue"}),c.jsx("div",{children:"Wed"}),c.jsx("div",{children:"Thu"}),c.jsx("div",{children:"Fri"}),c.jsx("div",{children:"Sat"})]}),c.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:Ps.map((S,U)=>S.type==="pad"?c.jsx("div",{className:"calendar-day pad"},U):c.jsxs("div",{className:"calendar-day"+(S.isToday?" today":""),children:[c.jsx("div",{className:"day-num",children:S.day}),c.jsxs("div",{className:"calendar-releases",children:[(Ee===S.dateKey?S.releases:S.releases.slice(0,2)).map((Y,ve)=>c.jsx("div",{className:"calendar-release",title:Y.title,children:Y.title},ve)),S.releases.length>2&&c.jsxs("button",{className:"calendar-more-btn",onClick:()=>{const Y=new Date(Je.getFullYear(),Je.getMonth(),S.day);He({dateLabel:Y.toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}),releases:S.releases})},children:["+",S.releases.length-2," more"]})]})]},U))}),!mn.length&&c.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),c.jsx("button",{id:"calendarClose",onClick:()=>fn(!1),children:"x"})]})}),Ht.open&&c.jsx("div",{id:"statDetailOverlay",onClick:gt,children:c.jsxs("div",{id:"statDetailCard",onClick:S=>S.stopPropagation(),children:[c.jsx("button",{id:"statDetailClose",onClick:gt,children:"x"}),c.jsxs("h2",{id:"statDetailTitle",children:[Ht.type==="publishers"&&"Top Publishers",Ht.type==="genres"&&"Top Genres",Ht.type==="demographics"&&"Top Demographics",Ht.type==="timeToRead"&&"Avg Time From Purchase to Read",Ht.type==="collectionValue"&&"Collection Value",Ht.type==="pages"&&"Pages Read vs Total",Ht.type==="ratings"&&"Ratings",Ht.type==="releases"&&"Wishlist Releases"]}),c.jsx("div",{id:"statDetailBody",children:Jr()})]})}),ke&&c.jsx("div",{id:"calendarOverlay",onClick:()=>He(null),style:{zIndex:10080},children:c.jsxs("div",{id:"calendarCard",onClick:S=>S.stopPropagation(),style:{maxWidth:"520px"},children:[c.jsxs("div",{className:"calendar-header",children:[c.jsx("div",{className:"calendar-title",children:ke.dateLabel}),c.jsx("button",{className:"calendar-close-btn",onClick:()=>He(null),type:"button",children:"Close"})]}),c.jsx("div",{className:"calendar-releases",children:ke.releases.map((S,U)=>c.jsx("div",{className:"calendar-release",title:S.title,children:S.title},U))})]})}),e&&V&&c.jsx("div",{className:"dashboard-modal-backdrop visible",onClick:S=>{S.target===S.currentTarget&&ae(!1)},children:c.jsxs("div",{className:"dashboard-modal",children:[c.jsxs("div",{className:"dashboard-modal-header",children:[c.jsx("h3",{children:"Webhook Settings"}),c.jsx("button",{className:"dashboard-close",onClick:()=>ae(!1),type:"button",children:"Close"})]}),c.jsxs("div",{className:"dashboard-modal-body",children:[c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Yearly summary webhook"}),c.jsx("input",{type:"text",value:W.yearly,onChange:S=>K(U=>({...U,yearly:S.target.value}))})]}),c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Release timer webhook"}),c.jsx("input",{type:"text",value:W.release,onChange:S=>K(U=>({...U,release:S.target.value}))})]}),c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Activity webhook"}),c.jsx("input",{type:"text",value:W.activity,onChange:S=>K(U=>({...U,activity:S.target.value}))})]}),c.jsxs("div",{className:"dashboard-input",style:{borderTop:"1px solid rgba(255,182,193,0.2)",paddingTop:8},children:[c.jsx("span",{children:"Admin UIDs"}),c.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[c.jsx("input",{type:"text",placeholder:"Enter UID",value:ue,onChange:S=>L(S.target.value),style:{flex:"1 1 220px",padding:"8px 10px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.75)",color:"#ffffff"}}),c.jsx("button",{className:"stat-link",type:"button",onClick:Wt,children:"Grant"}),c.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>ht(),children:"Revoke"})]}),c.jsx("div",{style:{marginTop:8,fontSize:"0.85rem",color:"var(--text-soft)"},children:_e?c.jsx("span",{children:"Loading admins"}):j.length===0?c.jsx("span",{children:"No admins found."}):c.jsx("ul",{style:{listStyle:"none",margin:"6px 0 0",padding:0,display:"flex",gap:6,flexDirection:"column"},children:j.map(S=>c.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,background:"rgba(24,5,18,0.7)",border:"1px solid rgba(255,182,193,0.18)",borderRadius:10,padding:"6px 8px"},children:[c.jsx("span",{style:{wordBreak:"break-all"},children:S.uid}),c.jsx("button",{className:"dashboard-close",type:"button",onClick:()=>ht(S.uid),style:{padding:"4px 10px"},children:"Revoke"})]},S.uid))})})]})]}),c.jsxs("div",{className:"dashboard-modal-footer",children:[c.jsx("button",{className:"stat-link",type:"button",onClick:async()=>{try{await nu(It(nt,"settings","webhooks"),{yearly:W.yearly||ru,release:W.release||su,activity:W.activity||iu}),ae(!1)}catch(S){console.error("Failed to save webhooks",S),alert("Failed to save webhooks.")}},children:"Save"}),c.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>ae(!1),children:"Cancel"})]})]})})]})}function Ab(){const[n,e]=M.useState(!0),[t,s]=M.useState(""),[a,l]=M.useState(0),[h,f]=M.useState([]),[m,v]=M.useState(0),w=M.useRef(null);M.useEffect(()=>{document.title="Music | im.ok"},[]),M.useEffect(()=>{let me=!1;async function Te(){e(!0),s("");try{const pe=await fetch("https://music-api-worker.imokissick.workers.dev/music");if(!pe.ok)throw new Error("Worker fetch failed");const D=await pe.json();if(me)return;const P=Array.isArray(D.combined)?D.combined:[],k=Array.isArray(D.spotify)?D.spotify:[],A=Array.isArray(D.soundcloud)?D.soundcloud:[],R=[...P,...k,...A].reduce((b,ge)=>{const Ke=(ge.title||"").toLowerCase().trim();if(!Ke)return b;const Qe=b.findIndex(G=>(G.title||"").toLowerCase().trim()===Ke);return Qe>=0?(b[Qe].source!=="spotify"&&ge.source==="spotify"&&(b[Qe]=ge),b):(b.push(ge),b)},[]).map(b=>({...b,releaseDate:b.releaseDate?new Date(b.releaseDate):new Date}));f(R)}catch(pe){console.error(pe),me||s("Failed to load music feeds.")}finally{me||e(!1)}}return Te(),()=>{me=!0}},[]);const E=Math.min(4,Math.max(1,h.length)),C=E?Math.ceil(h.length/E):0,W=()=>{w.current&&clearInterval(w.current),h.length&&(v(me=>me+1),w.current=setInterval(()=>{l(me=>(Math.floor(me/E)+1)%C*E%h.length),v(me=>me+1)},15e3))};M.useEffect(()=>{if(h.length)return W(),()=>{w.current&&clearInterval(w.current)}},[h,E]);const K=me=>{h.length&&(l(Te=>(Math.floor(Te/E)+me+C)%C*E%h.length),W())},Z=me=>{h.length&&(l(me*E%h.length),W())},$=me=>Te=>{Te.preventDefault();const D=me.source==="spotify"?`spotify:album:${me.id}`:me.url,P=me.url;try{const k=setTimeout(()=>{window.open(P,"_blank","noopener,noreferrer")},600);window.location.href=D,setTimeout(()=>clearTimeout(k),800)}catch{window.open(P,"_blank","noopener,noreferrer")}},re=h[0],ne=me=>me?{backgroundImage:`url(${me})`,backgroundSize:"cover",backgroundPosition:"center"}:{},oe=re?re.source==="spotify"?"Spotify":"SoundCloud":"";return c.jsxs("main",{className:"page music-page",children:[c.jsxs("header",{className:"music-hero",children:[c.jsxs("div",{className:"music-hero-content",children:[c.jsx("p",{className:"music-pill",children:"im.ok  Artist"}),c.jsx("h1",{children:re?re.title:"Latest & Greatest"}),c.jsx("p",{className:"music-sub",children:"Check out my latest song. I know it's been almost a whole year since I've released. I have been on a much needed hiatus. I felt the whole world crumbling around me and had no time to breathe so this is why I took a break. Here's to 2026!"}),re&&c.jsx("div",{className:"music-badges",children:c.jsx("span",{children:oe})})]}),c.jsx("div",{className:"music-hero-embed",children:c.jsxs("div",{className:"music-hero-art",style:ne(re==null?void 0:re.artwork),children:[!(re!=null&&re.artwork)&&c.jsx("div",{className:"music-hero-art-fallback",children:"Artwork"}),re&&c.jsx("button",{className:"music-link music-play hero-play","aria-label":`Play ${re.title}`,onClick:$(re)})]})})]}),c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"Releases"})}),t&&c.jsx("div",{className:"music-error",children:t}),n&&c.jsx("div",{className:"music-loading",children:"Loading music feeds..."}),!n&&h.length===0&&c.jsx("div",{className:"music-empty",children:"Connect Spotify/SoundCloud tokens to see live releases."}),!n&&h.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"music-carousel-wrap",children:[c.jsx("button",{className:"music-nav left",onClick:()=>K(-1),"aria-label":"Previous releases",children:""}),c.jsx("div",{className:"music-carousel",children:Array.from({length:E}).map((me,Te)=>{const pe=h[(a+Te)%h.length];return pe?c.jsxs("div",{className:"music-card",children:[c.jsx("div",{className:"music-card-art",style:ne(pe.artwork)}),c.jsxs("div",{className:"music-card-body",children:[c.jsx("div",{className:"music-card-title",children:pe.title}),c.jsx("div",{className:"music-card-actions",children:c.jsx("button",{className:"music-link music-play","aria-label":`Play ${pe.title}`,onClick:$(pe)})})]})]},`${pe.id}-${Te}`):null})}),c.jsx("button",{className:"music-nav right",onClick:()=>K(1),"aria-label":"Next releases",children:""})]}),c.jsx("div",{className:"music-dots",children:Array.from({length:C}).map((me,Te)=>{const pe=Math.floor(a/E)===Te,D=pe?`${Te}-${m}`:`${Te}-idle`;return c.jsx("button",{className:`dot ${pe?"active":""}`,onClick:()=>Z(Te),"aria-label":`Go to set ${Te+1}`,children:c.jsx("span",{className:"dot-fill"},D)},Te)})})]})]}),c.jsxs("div",{className:"music-feeds-row",children:[c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"Spotify"})}),c.jsx("div",{className:"music-embed-card",children:c.jsx("iframe",{title:"Spotify Artist",src:"https://open.spotify.com/embed/artist/00sbWLxYLDs8i5BLQL9Qdo?utm_source=generator&theme=0",width:"100%",height:"400",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})})]}),c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"SoundCloud"})}),c.jsx("div",{className:"music-embed-card",children:c.jsx("iframe",{title:"SoundCloud Player",width:"100%",height:"400",scrolling:"no",frameBorder:"no",allow:"autoplay",src:"https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/imxk&color=%23ff69b4&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"})})]})]})]})}function Nb(){const n=Fu(),{user:e}=Po();e&&n("/");async function t(){try{const s=new ds;await z_(Ri,s),n("/")}catch(s){console.error(s),alert("Google Sign-In failed.")}}return c.jsx("div",{className:"signin-page",children:c.jsxs("div",{className:"signin-card",children:[c.jsx("h2",{className:"signin-title",children:"Welcome Back"}),c.jsx("p",{className:"signin-sub",children:"Sign in to access the dashboard & edit collections."}),c.jsxs("button",{className:"google-btn",onClick:t,children:[c.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),c.jsxs("button",{className:"signin-cancel",onClick:()=>n("/"),children:["<"," Back to Home"]})]})})}const kb=M.lazy(()=>zl(()=>import("./SteamCard-BiEVKsFr.js"),[])),jb=M.lazy(()=>zl(()=>import("./SteamRecents-DhkLf58j.js"),[])),Db=M.lazy(()=>zl(()=>import("./SteamGames-Bv6dTYmI.js"),[]));function Vb(){return M.useEffect(()=>{document.title="Tyler's Gaming Lounge"},[]),c.jsxs("div",{className:"steam-page page",children:[c.jsxs("header",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"6px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Gaming Lounge"}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"This will be the home to all of my gaming collections, this is still being worked on, but thought it was cool with just steam for now."})]}),c.jsx(Jh,{minHeight:260,children:c.jsx(M.Suspense,{fallback:c.jsx(gu,{label:"Profile"}),children:c.jsx(kb,{})})}),c.jsx(Jh,{minHeight:240,children:c.jsx(M.Suspense,{fallback:c.jsx(gu,{label:"Recently played"}),children:c.jsx(jb,{})})}),c.jsx(Jh,{minHeight:400,children:c.jsx(M.Suspense,{fallback:c.jsx(gu,{label:"Library & Achievements"}),children:c.jsx(Db,{})})})]})}function Jh({children:n,minHeight:e=200}){const[t,s]=M.useState(!1),a=M.useRef(null);M.useEffect(()=>{const h=new IntersectionObserver(f=>{f[0].isIntersecting&&(s(!0),h.disconnect())},{rootMargin:"200px 0px"});return a.current&&h.observe(a.current),()=>h.disconnect()},[]);const l=t?void 0:{minHeight:e};return c.jsx("div",{ref:a,style:l,children:t?n:c.jsx(gu,{})})}function gu({label:n="Loading section"}){return c.jsxs("div",{className:"steam-skeleton",children:[c.jsx("div",{className:"steam-skeleton-bar"}),c.jsx("div",{className:"steam-skeleton-bar short"}),c.jsx("p",{className:"steam-skeleton-label",children:n})]})}function Lb(){return c.jsxs(QR,{children:[c.jsx(JR,{}),c.jsxs(NE,{children:[c.jsx(Br,{path:"/",element:c.jsx(Iv,{})}),c.jsx(Br,{path:"/home",element:c.jsx(Iv,{})}),c.jsx(Br,{path:"/manga",element:c.jsx(eb,{})}),c.jsx(Br,{path:"/anime",element:c.jsx(cb,{})}),c.jsx(Br,{path:"/tcg",element:c.jsx(ub,{})}),c.jsx(Br,{path:"/music",element:c.jsx(Ab,{})}),c.jsx(Br,{path:"/dashboard",element:c.jsx(bb,{})}),c.jsx(Br,{path:"/signin",element:c.jsx(Nb,{})}),c.jsx(Br,{path:"/steam",element:c.jsx(Vb,{})}),c.jsx(Br,{path:"*",element:c.jsx(bE,{to:"/home",replace:!0})})]})]})}Mx.createRoot(document.getElementById("root")).render(c.jsx(Lv.StrictMode,{children:c.jsx(ME,{basename:"/base",children:c.jsx(Lb,{})})}));export{c as j,M as r};
