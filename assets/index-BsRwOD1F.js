function vx(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Iv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ph={exports:{}},Qa={},kh={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function _x(){if(kg)return qe;kg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function I(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,X={};function V(M,Z,Ie){this.props=M,this.context=Z,this.refs=X,this.updater=Ie||F}V.prototype.isReactComponent={},V.prototype.setState=function(M,Z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Z,"setState")},V.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function te(){}te.prototype=V.prototype;function pe(M,Z,Ie){this.props=M,this.context=Z,this.refs=X,this.updater=Ie||F}var de=pe.prototype=new te;de.constructor=pe,Q(de,V.prototype),de.isPureReactComponent=!0;var re=Array.isArray,le=Object.prototype.hasOwnProperty,ue={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function C(M,Z,Ie){var Me,Fe={},We=null,Qe=null;if(Z!=null)for(Me in Z.ref!==void 0&&(Qe=Z.ref),Z.key!==void 0&&(We=""+Z.key),Z)le.call(Z,Me)&&!b.hasOwnProperty(Me)&&(Fe[Me]=Z[Me]);var Be=arguments.length-2;if(Be===1)Fe.children=Ie;else if(1<Be){for(var nt=Array(Be),at=0;at<Be;at++)nt[at]=arguments[at+2];Fe.children=nt}if(M&&M.defaultProps)for(Me in Be=M.defaultProps,Be)Fe[Me]===void 0&&(Fe[Me]=Be[Me]);return{$$typeof:r,type:M,key:We,ref:Qe,props:Fe,_owner:ue.current}}function R(M,Z){return{$$typeof:r,type:M.type,key:Z,ref:M.ref,props:M.props,_owner:M._owner}}function P(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function D(M){var Z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Ie){return Z[Ie]})}var N=/\/+/g;function A(M,Z){return typeof M=="object"&&M!==null&&M.key!=null?D(""+M.key):Z.toString(36)}function Y(M,Z,Ie,Me,Fe){var We=typeof M;(We==="undefined"||We==="boolean")&&(M=null);var Qe=!1;if(M===null)Qe=!0;else switch(We){case"string":case"number":Qe=!0;break;case"object":switch(M.$$typeof){case r:case e:Qe=!0}}if(Qe)return Qe=M,Fe=Fe(Qe),M=Me===""?"."+A(Qe,0):Me,re(Fe)?(Ie="",M!=null&&(Ie=M.replace(N,"$&/")+"/"),Y(Fe,Z,Ie,"",function(at){return at})):Fe!=null&&(P(Fe)&&(Fe=R(Fe,Ie+(!Fe.key||Qe&&Qe.key===Fe.key?"":(""+Fe.key).replace(N,"$&/")+"/")+M)),Z.push(Fe)),1;if(Qe=0,Me=Me===""?".":Me+":",re(M))for(var Be=0;Be<M.length;Be++){We=M[Be];var nt=Me+A(We,Be);Qe+=Y(We,Z,Ie,nt,Fe)}else if(nt=I(M),typeof nt=="function")for(M=nt.call(M),Be=0;!(We=M.next()).done;)We=We.value,nt=Me+A(We,Be++),Qe+=Y(We,Z,Ie,nt,Fe);else if(We==="object")throw Z=String(M),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Qe}function me(M,Z,Ie){if(M==null)return M;var Me=[],Fe=0;return Y(M,Me,"","",function(We){return Z.call(Ie,We,Fe++)}),Me}function Se(M){if(M._status===-1){var Z=M._result;Z=Z(),Z.then(function(Ie){(M._status===0||M._status===-1)&&(M._status=1,M._result=Ie)},function(Ie){(M._status===0||M._status===-1)&&(M._status=2,M._result=Ie)}),M._status===-1&&(M._status=0,M._result=Z)}if(M._status===1)return M._result.default;throw M._result}var ke={current:null},W={transition:null},ve={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:W,ReactCurrentOwner:ue};function fe(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:me,forEach:function(M,Z,Ie){me(M,function(){Z.apply(this,arguments)},Ie)},count:function(M){var Z=0;return me(M,function(){Z++}),Z},toArray:function(M){return me(M,function(Z){return Z})||[]},only:function(M){if(!P(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},qe.Component=V,qe.Fragment=t,qe.Profiler=o,qe.PureComponent=pe,qe.StrictMode=i,qe.Suspense=m,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,qe.act=fe,qe.cloneElement=function(M,Z,Ie){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Me=Q({},M.props),Fe=M.key,We=M.ref,Qe=M._owner;if(Z!=null){if(Z.ref!==void 0&&(We=Z.ref,Qe=ue.current),Z.key!==void 0&&(Fe=""+Z.key),M.type&&M.type.defaultProps)var Be=M.type.defaultProps;for(nt in Z)le.call(Z,nt)&&!b.hasOwnProperty(nt)&&(Me[nt]=Z[nt]===void 0&&Be!==void 0?Be[nt]:Z[nt])}var nt=arguments.length-2;if(nt===1)Me.children=Ie;else if(1<nt){Be=Array(nt);for(var at=0;at<nt;at++)Be[at]=arguments[at+2];Me.children=Be}return{$$typeof:r,type:M.type,key:Fe,ref:We,props:Me,_owner:Qe}},qe.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},qe.createElement=C,qe.createFactory=function(M){var Z=C.bind(null,M);return Z.type=M,Z},qe.createRef=function(){return{current:null}},qe.forwardRef=function(M){return{$$typeof:p,render:M}},qe.isValidElement=P,qe.lazy=function(M){return{$$typeof:w,_payload:{_status:-1,_result:M},_init:Se}},qe.memo=function(M,Z){return{$$typeof:v,type:M,compare:Z===void 0?null:Z}},qe.startTransition=function(M){var Z=W.transition;W.transition={};try{M()}finally{W.transition=Z}},qe.unstable_act=fe,qe.useCallback=function(M,Z){return ke.current.useCallback(M,Z)},qe.useContext=function(M){return ke.current.useContext(M)},qe.useDebugValue=function(){},qe.useDeferredValue=function(M){return ke.current.useDeferredValue(M)},qe.useEffect=function(M,Z){return ke.current.useEffect(M,Z)},qe.useId=function(){return ke.current.useId()},qe.useImperativeHandle=function(M,Z,Ie){return ke.current.useImperativeHandle(M,Z,Ie)},qe.useInsertionEffect=function(M,Z){return ke.current.useInsertionEffect(M,Z)},qe.useLayoutEffect=function(M,Z){return ke.current.useLayoutEffect(M,Z)},qe.useMemo=function(M,Z){return ke.current.useMemo(M,Z)},qe.useReducer=function(M,Z,Ie){return ke.current.useReducer(M,Z,Ie)},qe.useRef=function(M){return ke.current.useRef(M)},qe.useState=function(M){return ke.current.useState(M)},qe.useSyncExternalStore=function(M,Z,Ie){return ke.current.useSyncExternalStore(M,Z,Ie)},qe.useTransition=function(){return ke.current.useTransition()},qe.version="18.3.1",qe}var Ag;function Tf(){return Ag||(Ag=1,kh.exports=_x()),kh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function wx(){if(bg)return Qa;bg=1;var r=Tf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,v){var w,T={},I=null,F=null;v!==void 0&&(I=""+v),m.key!==void 0&&(I=""+m.key),m.ref!==void 0&&(F=m.ref);for(w in m)i.call(m,w)&&!l.hasOwnProperty(w)&&(T[w]=m[w]);if(p&&p.defaultProps)for(w in m=p.defaultProps,m)T[w]===void 0&&(T[w]=m[w]);return{$$typeof:e,type:p,key:I,ref:F,props:T,_owner:o.current}}return Qa.Fragment=t,Qa.jsx=h,Qa.jsxs=h,Qa}var Ng;function xx(){return Ng||(Ng=1,Ph.exports=wx()),Ph.exports}var c=xx(),z=Tf();const Cv=Iv(z),Ex=vx({__proto__:null,default:Cv},[z]);var Hu={},Ah={exports:{}},Nn={},bh={exports:{}},Nh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function Tx(){return jg||(jg=1,(function(r){function e(W,ve){var fe=W.length;W.push(ve);e:for(;0<fe;){var M=fe-1>>>1,Z=W[M];if(0<o(Z,ve))W[M]=ve,W[fe]=Z,fe=M;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ve=W[0],fe=W.pop();if(fe!==ve){W[0]=fe;e:for(var M=0,Z=W.length,Ie=Z>>>1;M<Ie;){var Me=2*(M+1)-1,Fe=W[Me],We=Me+1,Qe=W[We];if(0>o(Fe,fe))We<Z&&0>o(Qe,Fe)?(W[M]=Qe,W[We]=fe,M=We):(W[M]=Fe,W[Me]=fe,M=Me);else if(We<Z&&0>o(Qe,fe))W[M]=Qe,W[We]=fe,M=We;else break e}}return ve}function o(W,ve){var fe=W.sortIndex-ve.sortIndex;return fe!==0?fe:W.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var m=[],v=[],w=1,T=null,I=3,F=!1,Q=!1,X=!1,V=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function de(W){for(var ve=t(v);ve!==null;){if(ve.callback===null)i(v);else if(ve.startTime<=W)i(v),ve.sortIndex=ve.expirationTime,e(m,ve);else break;ve=t(v)}}function re(W){if(X=!1,de(W),!Q)if(t(m)!==null)Q=!0,Se(le);else{var ve=t(v);ve!==null&&ke(re,ve.startTime-W)}}function le(W,ve){Q=!1,X&&(X=!1,te(C),C=-1),F=!0;var fe=I;try{for(de(ve),T=t(m);T!==null&&(!(T.expirationTime>ve)||W&&!D());){var M=T.callback;if(typeof M=="function"){T.callback=null,I=T.priorityLevel;var Z=M(T.expirationTime<=ve);ve=r.unstable_now(),typeof Z=="function"?T.callback=Z:T===t(m)&&i(m),de(ve)}else i(m);T=t(m)}if(T!==null)var Ie=!0;else{var Me=t(v);Me!==null&&ke(re,Me.startTime-ve),Ie=!1}return Ie}finally{T=null,I=fe,F=!1}}var ue=!1,b=null,C=-1,R=5,P=-1;function D(){return!(r.unstable_now()-P<R)}function N(){if(b!==null){var W=r.unstable_now();P=W;var ve=!0;try{ve=b(!0,W)}finally{ve?A():(ue=!1,b=null)}}else ue=!1}var A;if(typeof pe=="function")A=function(){pe(N)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,me=Y.port2;Y.port1.onmessage=N,A=function(){me.postMessage(null)}}else A=function(){V(N,0)};function Se(W){b=W,ue||(ue=!0,A())}function ke(W,ve){C=V(function(){W(r.unstable_now())},ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){Q||F||(Q=!0,Se(le))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(W){switch(I){case 1:case 2:case 3:var ve=3;break;default:ve=I}var fe=I;I=ve;try{return W()}finally{I=fe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,ve){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var fe=I;I=W;try{return ve()}finally{I=fe}},r.unstable_scheduleCallback=function(W,ve,fe){var M=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?M+fe:M):fe=M,W){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=fe+Z,W={id:w++,callback:ve,priorityLevel:W,startTime:fe,expirationTime:Z,sortIndex:-1},fe>M?(W.sortIndex=fe,e(v,W),t(m)===null&&W===t(v)&&(X?(te(C),C=-1):X=!0,ke(re,fe-M))):(W.sortIndex=Z,e(m,W),Q||F||(Q=!0,Se(le))),W},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(W){var ve=I;return function(){var fe=I;I=ve;try{return W.apply(this,arguments)}finally{I=fe}}}})(Nh)),Nh}var Dg;function Sx(){return Dg||(Dg=1,bh.exports=Tx()),bh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function Ix(){if(Vg)return Nn;Vg=1;var r=Tf(),e=Sx();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function I(n){return m.call(T,n)?!0:m.call(w,n)?!1:v.test(n)?T[n]=!0:(w[n]=!0,!1)}function F(n,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Q(n,s,a,d){if(s===null||typeof s>"u"||F(n,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function X(n,s,a,d,f,y,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=x}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){V[n]=new X(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];V[s]=new X(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){V[n]=new X(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){V[n]=new X(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){V[n]=new X(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){V[n]=new X(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){V[n]=new X(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){V[n]=new X(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){V[n]=new X(n,5,!1,n.toLowerCase(),null,!1,!1)});var te=/[\-:]([a-z])/g;function pe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(te,pe);V[s]=new X(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(te,pe);V[s]=new X(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(te,pe);V[s]=new X(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){V[n]=new X(n,1,!1,n.toLowerCase(),null,!1,!1)}),V.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){V[n]=new X(n,1,!1,n.toLowerCase(),null,!0,!0)});function de(n,s,a,d){var f=V.hasOwnProperty(s)?V[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Q(s,a,f,d)&&(a=null),d||f===null?I(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?n.setAttributeNS(d,s,a):n.setAttribute(s,a))))}var re=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),ue=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),D=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),W=Symbol.iterator;function ve(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var fe=Object.assign,M;function Z(n){if(M===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+n}var Ie=!1;function Me(n,s){if(!n||Ie)return"";Ie=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var d=K}Reflect.construct(n,[],s)}else{try{s.call()}catch(K){d=K}n.call(s.prototype)}else{try{throw Error()}catch(K){d=K}n()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var f=K.stack.split(`
`),y=d.stack.split(`
`),x=f.length-1,k=y.length-1;1<=x&&0<=k&&f[x]!==y[k];)k--;for(;1<=x&&0<=k;x--,k--)if(f[x]!==y[k]){if(x!==1||k!==1)do if(x--,k--,0>k||f[x]!==y[k]){var j=`
`+f[x].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=x&&0<=k);break}}}finally{Ie=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Z(n):""}function Fe(n){switch(n.tag){case 5:return Z(n.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return n=Me(n.type,!1),n;case 11:return n=Me(n.type.render,!1),n;case 1:return n=Me(n.type,!0),n;default:return""}}function We(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case ue:return"Portal";case R:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case Y:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case me:return s=n.displayName||null,s!==null?s:We(n.type)||"Memo";case Se:s=n._payload,n=n._init;try{return We(n(s))}catch{}}return null}function Qe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function nt(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function at(n){var s=nt(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),d=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(x){d=""+x,y.call(this,x)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function sn(n){n._valueTracker||(n._valueTracker=at(n))}function Qt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return n&&(d=nt(n)?n.checked?"true":"false":n.value),n=d,n!==a?(s.setValue(n),!0):!1}function Gn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function lr(n,s){var a=s.checked;return fe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ye(n,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=Be(s.value!=null?s.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function zt(n,s){s=s.checked,s!=null&&de(n,"checked",s,!1)}function yn(n,s){zt(n,s);var a=Be(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?kr(n,s.type,a):s.hasOwnProperty("defaultValue")&&kr(n,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ur(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function kr(n,s,a){(s!=="number"||Gn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Pt=Array.isArray;function _t(n,s,a,d){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&d&&(n[a].defaultSelected=!0)}else{for(a=""+Be(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,d&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function on(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return fe({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Kn(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Pt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Be(a)}}function cr(n,s){var a=Be(s.value),d=Be(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function dr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ht(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ht(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var kt,Xr=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,d,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(kt=kt||document.createElement("div"),kt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=kt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Vn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sn=["Webkit","ms","Moz","O"];Object.keys(Qn).forEach(function(n){Sn.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Qn[s]=Qn[n]})});function Ar(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Qn.hasOwnProperty(n)&&Qn[n]?(""+s).trim():s+"px"}function vn(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=Ar(a,s[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,f):n[a]=f}}var br=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zr(n,s){if(s){if(br[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ei(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=null;function G(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var oe=null,E=null,U=null;function ee(n){if(n=Da(n)){if(typeof oe!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ou(s),oe(n.stateNode,n.type,s))}}function L(n){E?U?U.push(n):U=[n]:E=n}function q(){if(E){var n=E,s=U;if(U=E=null,ee(n),s)for(n=0;n<s.length;n++)ee(s[n])}}function we(n,s){return n(s)}function He(){}var ot=!1;function ye(n,s,a){if(ot)return n(s,a);ot=!0;try{return we(n,s,a)}finally{ot=!1,(E!==null||U!==null)&&(He(),q())}}function Ae(n,s){var a=n.stateNode;if(a===null)return null;var d=ou(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Vt=!1;if(p)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{Vt=!1}function ln(n,s,a,d,f,y,x,k,j){var K=Array.prototype.slice.call(arguments,3);try{s.apply(a,K)}catch(ae){this.onError(ae)}}var hr=!1,fr=null,_n=!1,ti=null,pr={onError:function(n){hr=!0,fr=n}};function Nr(n,s,a,d,f,y,x,k,j){hr=!1,fr=null,ln.apply(pr,arguments)}function ro(n,s,a,d,f,y,x,k,j){if(Nr.apply(this,arguments),hr){if(hr){var K=fr;hr=!1,fr=null}else throw Error(t(198));_n||(_n=!0,ti=K)}}function Ln(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ut(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function $t(n){if(Ln(n)!==n)throw Error(t(188))}function Nl(n){var s=n.alternate;if(!s){if(s=Ln(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,d=s;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return $t(f),n;if(y===d)return $t(f),s;y=y.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=y;else{for(var x=!1,k=f.child;k;){if(k===a){x=!0,a=f,d=y;break}if(k===d){x=!0,d=f,a=y;break}k=k.sibling}if(!x){for(k=y.child;k;){if(k===a){x=!0,a=y,d=f;break}if(k===d){x=!0,d=y,a=f;break}k=k.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function ma(n){return n=Nl(n),n!==null?io(n):null}function io(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=io(n);if(s!==null)return s;n=n.sibling}return null}var so=e.unstable_scheduleCallback,ga=e.unstable_cancelCallback,jl=e.unstable_shouldYield,rd=e.unstable_requestPaint,ct=e.unstable_now,Dl=e.unstable_getCurrentPriorityLevel,Ss=e.unstable_ImmediatePriority,Ci=e.unstable_UserBlockingPriority,Yn=e.unstable_NormalPriority,ya=e.unstable_LowPriority,Vl=e.unstable_IdlePriority,Is=null,On=null;function Ll(n){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Is,n,void 0,(n.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:Ml,va=Math.log,Ol=Math.LN2;function Ml(n){return n>>>=0,n===0?32:31-(va(n)/Ol|0)|0}var oo=64,ao=4194304;function Ri(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Cs(n,s){var a=n.pendingLanes;if(a===0)return 0;var d=0,f=n.suspendedLanes,y=n.pingedLanes,x=a&268435455;if(x!==0){var k=x&~f;k!==0?d=Ri(k):(y&=x,y!==0&&(d=Ri(y)))}else x=a&~f,x!==0?d=Ri(x):y!==0&&(d=Ri(y));if(d===0)return 0;if(s!==0&&s!==d&&(s&f)===0&&(f=d&-d,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if((d&4)!==0&&(d|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=d;0<s;)a=31-wn(s),f=1<<a,d|=n[a],s&=~f;return d}function id(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ni(n,s){for(var a=n.suspendedLanes,d=n.pingedLanes,f=n.expirationTimes,y=n.pendingLanes;0<y;){var x=31-wn(y),k=1<<x,j=f[x];j===-1?((k&a)===0||(k&d)!==0)&&(f[x]=id(k,s)):j<=s&&(n.expiredLanes|=k),y&=~k}}function Mn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Rs(){var n=oo;return oo<<=1,(oo&4194240)===0&&(oo=64),n}function Pi(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function ki(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-wn(s),n[s]=a}function lt(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-wn(a),y=1<<f;s[f]=0,d[f]=-1,n[f]=-1,a&=~y}}function Ai(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var d=31-wn(a),f=1<<d;f&s|n[d]&s&&(n[d]|=s),a&=~f}}var Je=0;function bi(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Fl,lo,Ul,zl,Bl,_a=!1,jr=[],Yt=null,mr=null,gr=null,Ni=new Map,Jn=new Map,Dr=[],sd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $l(n,s){switch(n){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Ni.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jn.delete(s.pointerId)}}function In(n,s,a,d,f,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:y,targetContainers:[f]},s!==null&&(s=Da(s),s!==null&&lo(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function od(n,s,a,d,f){switch(s){case"focusin":return Yt=In(Yt,n,s,a,d,f),!0;case"dragenter":return mr=In(mr,n,s,a,d,f),!0;case"mouseover":return gr=In(gr,n,s,a,d,f),!0;case"pointerover":var y=f.pointerId;return Ni.set(y,In(Ni.get(y)||null,n,s,a,d,f)),!0;case"gotpointercapture":return y=f.pointerId,Jn.set(y,In(Jn.get(y)||null,n,s,a,d,f)),!0}return!1}function Wl(n){var s=Ns(n.target);if(s!==null){var a=Ln(s);if(a!==null){if(s=a.tag,s===13){if(s=ut(a),s!==null){n.blockedOn=s,Bl(n.priority,function(){Ul(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ri(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=uo(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);an=d,a.target.dispatchEvent(d),an=null}else return s=Da(a),s!==null&&lo(s),n.blockedOn=a,!1;s.shift()}return!0}function Ps(n,s,a){ri(n)&&a.delete(s)}function Hl(){_a=!1,Yt!==null&&ri(Yt)&&(Yt=null),mr!==null&&ri(mr)&&(mr=null),gr!==null&&ri(gr)&&(gr=null),Ni.forEach(Ps),Jn.forEach(Ps)}function yr(n,s){n.blockedOn===s&&(n.blockedOn=null,_a||(_a=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hl)))}function vr(n){function s(f){return yr(f,n)}if(0<jr.length){yr(jr[0],n);for(var a=1;a<jr.length;a++){var d=jr[a];d.blockedOn===n&&(d.blockedOn=null)}}for(Yt!==null&&yr(Yt,n),mr!==null&&yr(mr,n),gr!==null&&yr(gr,n),Ni.forEach(s),Jn.forEach(s),a=0;a<Dr.length;a++)d=Dr[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<Dr.length&&(a=Dr[0],a.blockedOn===null);)Wl(a),a.blockedOn===null&&Dr.shift()}var ii=re.ReactCurrentBatchConfig,ji=!0;function yt(n,s,a,d){var f=Je,y=ii.transition;ii.transition=null;try{Je=1,wa(n,s,a,d)}finally{Je=f,ii.transition=y}}function ad(n,s,a,d){var f=Je,y=ii.transition;ii.transition=null;try{Je=4,wa(n,s,a,d)}finally{Je=f,ii.transition=y}}function wa(n,s,a,d){if(ji){var f=uo(n,s,a,d);if(f===null)vd(n,s,d,ks,a),$l(n,d);else if(od(f,n,s,a,d))d.stopPropagation();else if($l(n,d),s&4&&-1<sd.indexOf(n)){for(;f!==null;){var y=Da(f);if(y!==null&&Fl(y),y=uo(n,s,a,d),y===null&&vd(n,s,d,ks,a),y===f)break;f=y}f!==null&&d.stopPropagation()}else vd(n,s,d,null,a)}}var ks=null;function uo(n,s,a,d){if(ks=null,n=G(d),n=Ns(n),n!==null)if(s=Ln(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ut(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ks=n,null}function xa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dl()){case Ss:return 1;case Ci:return 4;case Yn:case ya:return 16;case Vl:return 536870912;default:return 16}default:return 16}}var Fn=null,co=null,Cn=null;function Ea(){if(Cn)return Cn;var n,s=co,a=s.length,d,f="value"in Fn?Fn.value:Fn.textContent,y=f.length;for(n=0;n<a&&s[n]===f[n];n++);var x=a-n;for(d=1;d<=x&&s[a-d]===f[y-d];d++);return Cn=f.slice(n,1<d?1-d:void 0)}function ho(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Vr(){return!0}function Ta(){return!1}function Jt(n){function s(a,d,f,y,x){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Vr:Ta,this.isPropagationStopped=Ta,this}return fe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vr)},persist:function(){},isPersistent:Vr}),s}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fo=Jt(_r),Lr=fe({},_r,{view:0,detail:0}),ld=Jt(Lr),po,si,Di,As=fe({},Lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Or,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Di&&(Di&&n.type==="mousemove"?(po=n.screenX-Di.screenX,si=n.screenY-Di.screenY):si=po=0,Di=n),po)},movementY:function(n){return"movementY"in n?n.movementY:si}}),mo=Jt(As),Sa=fe({},As,{dataTransfer:0}),ql=Jt(Sa),go=fe({},Lr,{relatedTarget:0}),yo=Jt(go),Gl=fe({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),oi=Jt(Gl),Kl=fe({},_r,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ql=Jt(Kl),Yl=fe({},_r,{data:0}),Ia=Jt(Yl),vo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Jl[n])?!!s[n]:!1}function Or(){return Xl}var u=fe({},Lr,{key:function(n){if(n.key){var s=vo[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ho(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?xn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Or,charCode:function(n){return n.type==="keypress"?ho(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ho(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),g=Jt(u),_=fe({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Jt(_),B=fe({},Lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Or}),J=Jt(B),ge=fe({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),st=Jt(ge),Lt=fe({},As,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Xe=Jt(Lt),Wt=[9,13,27,32],At=p&&"CompositionEvent"in window,Xn=null;p&&"documentMode"in document&&(Xn=document.documentMode);var Un=p&&"TextEvent"in window&&!Xn,bs=p&&(!At||Xn&&8<Xn&&11>=Xn),_o=" ",Tp=!1;function Sp(n,s){switch(n){case"keyup":return Wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wo=!1;function mw(n,s){switch(n){case"compositionend":return Ip(s);case"keypress":return s.which!==32?null:(Tp=!0,_o);case"textInput":return n=s.data,n===_o&&Tp?null:n;default:return null}}function gw(n,s){if(wo)return n==="compositionend"||!At&&Sp(n,s)?(n=Ea(),Cn=co=Fn=null,wo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return bs&&s.locale!=="ko"?null:s.data;default:return null}}var yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!yw[n.type]:s==="textarea"}function Rp(n,s,a,d){L(d),s=ru(s,"onChange"),0<s.length&&(a=new fo("onChange","change",null,a,d),n.push({event:a,listeners:s}))}var Ca=null,Ra=null;function vw(n){Hp(n,0)}function Zl(n){var s=Io(n);if(Qt(s))return n}function _w(n,s){if(n==="change")return s}var Pp=!1;if(p){var ud;if(p){var cd="oninput"in document;if(!cd){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),cd=typeof kp.oninput=="function"}ud=cd}else ud=!1;Pp=ud&&(!document.documentMode||9<document.documentMode)}function Ap(){Ca&&(Ca.detachEvent("onpropertychange",bp),Ra=Ca=null)}function bp(n){if(n.propertyName==="value"&&Zl(Ra)){var s=[];Rp(s,Ra,n,G(n)),ye(vw,s)}}function ww(n,s,a){n==="focusin"?(Ap(),Ca=s,Ra=a,Ca.attachEvent("onpropertychange",bp)):n==="focusout"&&Ap()}function xw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zl(Ra)}function Ew(n,s){if(n==="click")return Zl(s)}function Tw(n,s){if(n==="input"||n==="change")return Zl(s)}function Sw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var wr=typeof Object.is=="function"?Object.is:Sw;function Pa(n,s){if(wr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!m.call(s,f)||!wr(n[f],s[f]))return!1}return!0}function Np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jp(n,s){var a=Np(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=s&&d>=s)return{node:a,offset:s-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Np(a)}}function Dp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Dp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Vp(){for(var n=window,s=Gn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Gn(n.document)}return s}function dd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Iw(n){var s=Vp(),a=n.focusedElem,d=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Dp(a.ownerDocument.documentElement,a)){if(d!==null&&dd(a)){if(s=d.start,n=d.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,y=Math.min(d.start,f);d=d.end===void 0?y:Math.min(d.end,f),!n.extend&&y>d&&(f=d,d=y,y=f),f=jp(a,y);var x=jp(a,d);f&&x&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),y>d?(n.addRange(s),n.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Cw=p&&"documentMode"in document&&11>=document.documentMode,xo=null,hd=null,ka=null,fd=!1;function Lp(n,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fd||xo==null||xo!==Gn(d)||(d=xo,"selectionStart"in d&&dd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ka&&Pa(ka,d)||(ka=d,d=ru(hd,"onSelect"),0<d.length&&(s=new fo("onSelect","select",null,s,a),n.push({event:s,listeners:d}),s.target=xo)))}function eu(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Eo={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},pd={},Op={};p&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function tu(n){if(pd[n])return pd[n];if(!Eo[n])return n;var s=Eo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Op)return pd[n]=s[a];return n}var Mp=tu("animationend"),Fp=tu("animationiteration"),Up=tu("animationstart"),zp=tu("transitionend"),Bp=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vi(n,s){Bp.set(n,s),l(s,[n])}for(var md=0;md<$p.length;md++){var gd=$p[md],Rw=gd.toLowerCase(),Pw=gd[0].toUpperCase()+gd.slice(1);Vi(Rw,"on"+Pw)}Vi(Mp,"onAnimationEnd"),Vi(Fp,"onAnimationIteration"),Vi(Up,"onAnimationStart"),Vi("dblclick","onDoubleClick"),Vi("focusin","onFocus"),Vi("focusout","onBlur"),Vi(zp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function Wp(n,s,a){var d=n.type||"unknown-event";n.currentTarget=a,ro(d,s,void 0,n),n.currentTarget=null}function Hp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],f=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var x=d.length-1;0<=x;x--){var k=d[x],j=k.instance,K=k.currentTarget;if(k=k.listener,j!==y&&f.isPropagationStopped())break e;Wp(f,k,K),y=j}else for(x=0;x<d.length;x++){if(k=d[x],j=k.instance,K=k.currentTarget,k=k.listener,j!==y&&f.isPropagationStopped())break e;Wp(f,k,K),y=j}}}if(_n)throw n=ti,_n=!1,ti=null,n}function ft(n,s){var a=s[Sd];a===void 0&&(a=s[Sd]=new Set);var d=n+"__bubble";a.has(d)||(qp(s,n,2,!1),a.add(d))}function yd(n,s,a){var d=0;s&&(d|=4),qp(a,n,d,s)}var nu="_reactListening"+Math.random().toString(36).slice(2);function ba(n){if(!n[nu]){n[nu]=!0,i.forEach(function(a){a!=="selectionchange"&&(kw.has(a)||yd(a,!1,n),yd(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[nu]||(s[nu]=!0,yd("selectionchange",!1,s))}}function qp(n,s,a,d){switch(xa(s)){case 1:var f=yt;break;case 4:f=ad;break;default:f=wa}a=f.bind(null,s,a,n),f=void 0,!Vt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function vd(n,s,a,d,f){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var k=d.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(x===4)for(x=d.return;x!==null;){var j=x.tag;if((j===3||j===4)&&(j=x.stateNode.containerInfo,j===f||j.nodeType===8&&j.parentNode===f))return;x=x.return}for(;k!==null;){if(x=Ns(k),x===null)return;if(j=x.tag,j===5||j===6){d=y=x;continue e}k=k.parentNode}}d=d.return}ye(function(){var K=y,ae=G(a),ce=[];e:{var se=Bp.get(n);if(se!==void 0){var _e=fo,Te=n;switch(n){case"keypress":if(ho(a)===0)break e;case"keydown":case"keyup":_e=g;break;case"focusin":Te="focus",_e=yo;break;case"focusout":Te="blur",_e=yo;break;case"beforeblur":case"afterblur":_e=yo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=J;break;case Mp:case Fp:case Up:_e=oi;break;case zp:_e=st;break;case"scroll":_e=ld;break;case"wheel":_e=Xe;break;case"copy":case"cut":case"paste":_e=Ql;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=S}var Ce=(s&4)!==0,St=!Ce&&n==="scroll",$=Ce?se!==null?se+"Capture":null:se;Ce=[];for(var O=K,H;O!==null;){H=O;var he=H.stateNode;if(H.tag===5&&he!==null&&(H=he,$!==null&&(he=Ae(O,$),he!=null&&Ce.push(Na(O,he,H)))),St)break;O=O.return}0<Ce.length&&(se=new _e(se,Te,null,a,ae),ce.push({event:se,listeners:Ce}))}}if((s&7)===0){e:{if(se=n==="mouseover"||n==="pointerover",_e=n==="mouseout"||n==="pointerout",se&&a!==an&&(Te=a.relatedTarget||a.fromElement)&&(Ns(Te)||Te[ai]))break e;if((_e||se)&&(se=ae.window===ae?ae:(se=ae.ownerDocument)?se.defaultView||se.parentWindow:window,_e?(Te=a.relatedTarget||a.toElement,_e=K,Te=Te?Ns(Te):null,Te!==null&&(St=Ln(Te),Te!==St||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(_e=null,Te=K),_e!==Te)){if(Ce=mo,he="onMouseLeave",$="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Ce=S,he="onPointerLeave",$="onPointerEnter",O="pointer"),St=_e==null?se:Io(_e),H=Te==null?se:Io(Te),se=new Ce(he,O+"leave",_e,a,ae),se.target=St,se.relatedTarget=H,he=null,Ns(ae)===K&&(Ce=new Ce($,O+"enter",Te,a,ae),Ce.target=H,Ce.relatedTarget=St,he=Ce),St=he,_e&&Te)t:{for(Ce=_e,$=Te,O=0,H=Ce;H;H=To(H))O++;for(H=0,he=$;he;he=To(he))H++;for(;0<O-H;)Ce=To(Ce),O--;for(;0<H-O;)$=To($),H--;for(;O--;){if(Ce===$||$!==null&&Ce===$.alternate)break t;Ce=To(Ce),$=To($)}Ce=null}else Ce=null;_e!==null&&Gp(ce,se,_e,Ce,!1),Te!==null&&St!==null&&Gp(ce,St,Te,Ce,!0)}}e:{if(se=K?Io(K):window,_e=se.nodeName&&se.nodeName.toLowerCase(),_e==="select"||_e==="input"&&se.type==="file")var Pe=_w;else if(Cp(se))if(Pp)Pe=Tw;else{Pe=xw;var Ne=ww}else(_e=se.nodeName)&&_e.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Pe=Ew);if(Pe&&(Pe=Pe(n,K))){Rp(ce,Pe,a,ae);break e}Ne&&Ne(n,se,K),n==="focusout"&&(Ne=se._wrapperState)&&Ne.controlled&&se.type==="number"&&kr(se,"number",se.value)}switch(Ne=K?Io(K):window,n){case"focusin":(Cp(Ne)||Ne.contentEditable==="true")&&(xo=Ne,hd=K,ka=null);break;case"focusout":ka=hd=xo=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,Lp(ce,a,ae);break;case"selectionchange":if(Cw)break;case"keydown":case"keyup":Lp(ce,a,ae)}var je;if(At)e:{switch(n){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else wo?Sp(n,a)&&(Oe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(bs&&a.locale!=="ko"&&(wo||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&wo&&(je=Ea()):(Fn=ae,co="value"in Fn?Fn.value:Fn.textContent,wo=!0)),Ne=ru(K,Oe),0<Ne.length&&(Oe=new Ia(Oe,n,null,a,ae),ce.push({event:Oe,listeners:Ne}),je?Oe.data=je:(je=Ip(a),je!==null&&(Oe.data=je)))),(je=Un?mw(n,a):gw(n,a))&&(K=ru(K,"onBeforeInput"),0<K.length&&(ae=new Ia("onBeforeInput","beforeinput",null,a,ae),ce.push({event:ae,listeners:K}),ae.data=je))}Hp(ce,s)})}function Na(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ru(n,s){for(var a=s+"Capture",d=[];n!==null;){var f=n,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=Ae(n,a),y!=null&&d.unshift(Na(n,y,f)),y=Ae(n,s),y!=null&&d.push(Na(n,y,f))),n=n.return}return d}function To(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gp(n,s,a,d,f){for(var y=s._reactName,x=[];a!==null&&a!==d;){var k=a,j=k.alternate,K=k.stateNode;if(j!==null&&j===d)break;k.tag===5&&K!==null&&(k=K,f?(j=Ae(a,y),j!=null&&x.unshift(Na(a,j,k))):f||(j=Ae(a,y),j!=null&&x.push(Na(a,j,k)))),a=a.return}x.length!==0&&n.push({event:s,listeners:x})}var Aw=/\r\n?/g,bw=/\u0000|\uFFFD/g;function Kp(n){return(typeof n=="string"?n:""+n).replace(Aw,`
`).replace(bw,"")}function iu(n,s,a){if(s=Kp(s),Kp(n)!==s&&a)throw Error(t(425))}function su(){}var _d=null,wd=null;function xd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,Nw=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(n){return Qp.resolve(null).then(n).catch(Dw)}:Ed;function Dw(n){setTimeout(function(){throw n})}function Td(n,s){var a=s,d=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){n.removeChild(f),vr(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);vr(s)}function Li(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Yp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var So=Math.random().toString(36).slice(2),Mr="__reactFiber$"+So,ja="__reactProps$"+So,ai="__reactContainer$"+So,Sd="__reactEvents$"+So,Vw="__reactListeners$"+So,Lw="__reactHandles$"+So;function Ns(n){var s=n[Mr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[ai]||a[Mr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Yp(n);n!==null;){if(a=n[Mr])return a;n=Yp(n)}return s}n=a,a=n.parentNode}return null}function Da(n){return n=n[Mr]||n[ai],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Io(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ou(n){return n[ja]||null}var Id=[],Co=-1;function Oi(n){return{current:n}}function pt(n){0>Co||(n.current=Id[Co],Id[Co]=null,Co--)}function dt(n,s){Co++,Id[Co]=n.current,n.current=s}var Mi={},un=Oi(Mi),Rn=Oi(!1),js=Mi;function Ro(n,s){var a=n.type.contextTypes;if(!a)return Mi;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in a)f[y]=s[y];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Pn(n){return n=n.childContextTypes,n!=null}function au(){pt(Rn),pt(un)}function Jp(n,s,a){if(un.current!==Mi)throw Error(t(168));dt(un,s),dt(Rn,a)}function Xp(n,s,a){var d=n.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,Qe(n)||"Unknown",f));return fe({},a,d)}function lu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Mi,js=un.current,dt(un,n),dt(Rn,Rn.current),!0}function Zp(n,s,a){var d=n.stateNode;if(!d)throw Error(t(169));a?(n=Xp(n,s,js),d.__reactInternalMemoizedMergedChildContext=n,pt(Rn),pt(un),dt(un,n)):pt(Rn),dt(Rn,a)}var li=null,uu=!1,Cd=!1;function em(n){li===null?li=[n]:li.push(n)}function Ow(n){uu=!0,em(n)}function Fi(){if(!Cd&&li!==null){Cd=!0;var n=0,s=Je;try{var a=li;for(Je=1;n<a.length;n++){var d=a[n];do d=d(!0);while(d!==null)}li=null,uu=!1}catch(f){throw li!==null&&(li=li.slice(n+1)),so(Ss,Fi),f}finally{Je=s,Cd=!1}}return null}var Po=[],ko=0,cu=null,du=0,Zn=[],er=0,Ds=null,ui=1,ci="";function Vs(n,s){Po[ko++]=du,Po[ko++]=cu,cu=n,du=s}function tm(n,s,a){Zn[er++]=ui,Zn[er++]=ci,Zn[er++]=Ds,Ds=n;var d=ui;n=ci;var f=32-wn(d)-1;d&=~(1<<f),a+=1;var y=32-wn(s)+f;if(30<y){var x=f-f%5;y=(d&(1<<x)-1).toString(32),d>>=x,f-=x,ui=1<<32-wn(s)+f|a<<f|d,ci=y+n}else ui=1<<y|a<<f|d,ci=n}function Rd(n){n.return!==null&&(Vs(n,1),tm(n,1,0))}function Pd(n){for(;n===cu;)cu=Po[--ko],Po[ko]=null,du=Po[--ko],Po[ko]=null;for(;n===Ds;)Ds=Zn[--er],Zn[er]=null,ci=Zn[--er],Zn[er]=null,ui=Zn[--er],Zn[er]=null}var zn=null,Bn=null,vt=!1,xr=null;function nm(n,s){var a=ir(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function rm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,zn=n,Bn=Li(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,zn=n,Bn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ds!==null?{id:ui,overflow:ci}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=ir(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,zn=n,Bn=null,!0):!1;default:return!1}}function kd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ad(n){if(vt){var s=Bn;if(s){var a=s;if(!rm(n,s)){if(kd(n))throw Error(t(418));s=Li(a.nextSibling);var d=zn;s&&rm(n,s)?nm(d,a):(n.flags=n.flags&-4097|2,vt=!1,zn=n)}}else{if(kd(n))throw Error(t(418));n.flags=n.flags&-4097|2,vt=!1,zn=n}}}function im(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;zn=n}function hu(n){if(n!==zn)return!1;if(!vt)return im(n),vt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!xd(n.type,n.memoizedProps)),s&&(s=Bn)){if(kd(n))throw sm(),Error(t(418));for(;s;)nm(n,s),s=Li(s.nextSibling)}if(im(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Bn=Li(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Bn=null}}else Bn=zn?Li(n.stateNode.nextSibling):null;return!0}function sm(){for(var n=Bn;n;)n=Li(n.nextSibling)}function Ao(){Bn=zn=null,vt=!1}function bd(n){xr===null?xr=[n]:xr.push(n)}var Mw=re.ReactCurrentBatchConfig;function Va(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,n));var f=d,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(x){var k=f.refs;x===null?delete k[y]:k[y]=x},s._stringRef=y,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function fu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function om(n){var s=n._init;return s(n._payload)}function am(n){function s($,O){if(n){var H=$.deletions;H===null?($.deletions=[O],$.flags|=16):H.push(O)}}function a($,O){if(!n)return null;for(;O!==null;)s($,O),O=O.sibling;return null}function d($,O){for($=new Map;O!==null;)O.key!==null?$.set(O.key,O):$.set(O.index,O),O=O.sibling;return $}function f($,O){return $=Gi($,O),$.index=0,$.sibling=null,$}function y($,O,H){return $.index=H,n?(H=$.alternate,H!==null?(H=H.index,H<O?($.flags|=2,O):H):($.flags|=2,O)):($.flags|=1048576,O)}function x($){return n&&$.alternate===null&&($.flags|=2),$}function k($,O,H,he){return O===null||O.tag!==6?(O=Eh(H,$.mode,he),O.return=$,O):(O=f(O,H),O.return=$,O)}function j($,O,H,he){var Pe=H.type;return Pe===b?ae($,O,H.props.children,he,H.key):O!==null&&(O.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===Se&&om(Pe)===O.type)?(he=f(O,H.props),he.ref=Va($,O,H),he.return=$,he):(he=Ou(H.type,H.key,H.props,null,$.mode,he),he.ref=Va($,O,H),he.return=$,he)}function K($,O,H,he){return O===null||O.tag!==4||O.stateNode.containerInfo!==H.containerInfo||O.stateNode.implementation!==H.implementation?(O=Th(H,$.mode,he),O.return=$,O):(O=f(O,H.children||[]),O.return=$,O)}function ae($,O,H,he,Pe){return O===null||O.tag!==7?(O=$s(H,$.mode,he,Pe),O.return=$,O):(O=f(O,H),O.return=$,O)}function ce($,O,H){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Eh(""+O,$.mode,H),O.return=$,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case le:return H=Ou(O.type,O.key,O.props,null,$.mode,H),H.ref=Va($,null,O),H.return=$,H;case ue:return O=Th(O,$.mode,H),O.return=$,O;case Se:var he=O._init;return ce($,he(O._payload),H)}if(Pt(O)||ve(O))return O=$s(O,$.mode,H,null),O.return=$,O;fu($,O)}return null}function se($,O,H,he){var Pe=O!==null?O.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return Pe!==null?null:k($,O,""+H,he);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case le:return H.key===Pe?j($,O,H,he):null;case ue:return H.key===Pe?K($,O,H,he):null;case Se:return Pe=H._init,se($,O,Pe(H._payload),he)}if(Pt(H)||ve(H))return Pe!==null?null:ae($,O,H,he,null);fu($,H)}return null}function _e($,O,H,he,Pe){if(typeof he=="string"&&he!==""||typeof he=="number")return $=$.get(H)||null,k(O,$,""+he,Pe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case le:return $=$.get(he.key===null?H:he.key)||null,j(O,$,he,Pe);case ue:return $=$.get(he.key===null?H:he.key)||null,K(O,$,he,Pe);case Se:var Ne=he._init;return _e($,O,H,Ne(he._payload),Pe)}if(Pt(he)||ve(he))return $=$.get(H)||null,ae(O,$,he,Pe,null);fu(O,he)}return null}function Te($,O,H,he){for(var Pe=null,Ne=null,je=O,Oe=O=0,Gt=null;je!==null&&Oe<H.length;Oe++){je.index>Oe?(Gt=je,je=null):Gt=je.sibling;var rt=se($,je,H[Oe],he);if(rt===null){je===null&&(je=Gt);break}n&&je&&rt.alternate===null&&s($,je),O=y(rt,O,Oe),Ne===null?Pe=rt:Ne.sibling=rt,Ne=rt,je=Gt}if(Oe===H.length)return a($,je),vt&&Vs($,Oe),Pe;if(je===null){for(;Oe<H.length;Oe++)je=ce($,H[Oe],he),je!==null&&(O=y(je,O,Oe),Ne===null?Pe=je:Ne.sibling=je,Ne=je);return vt&&Vs($,Oe),Pe}for(je=d($,je);Oe<H.length;Oe++)Gt=_e(je,$,Oe,H[Oe],he),Gt!==null&&(n&&Gt.alternate!==null&&je.delete(Gt.key===null?Oe:Gt.key),O=y(Gt,O,Oe),Ne===null?Pe=Gt:Ne.sibling=Gt,Ne=Gt);return n&&je.forEach(function(Ki){return s($,Ki)}),vt&&Vs($,Oe),Pe}function Ce($,O,H,he){var Pe=ve(H);if(typeof Pe!="function")throw Error(t(150));if(H=Pe.call(H),H==null)throw Error(t(151));for(var Ne=Pe=null,je=O,Oe=O=0,Gt=null,rt=H.next();je!==null&&!rt.done;Oe++,rt=H.next()){je.index>Oe?(Gt=je,je=null):Gt=je.sibling;var Ki=se($,je,rt.value,he);if(Ki===null){je===null&&(je=Gt);break}n&&je&&Ki.alternate===null&&s($,je),O=y(Ki,O,Oe),Ne===null?Pe=Ki:Ne.sibling=Ki,Ne=Ki,je=Gt}if(rt.done)return a($,je),vt&&Vs($,Oe),Pe;if(je===null){for(;!rt.done;Oe++,rt=H.next())rt=ce($,rt.value,he),rt!==null&&(O=y(rt,O,Oe),Ne===null?Pe=rt:Ne.sibling=rt,Ne=rt);return vt&&Vs($,Oe),Pe}for(je=d($,je);!rt.done;Oe++,rt=H.next())rt=_e(je,$,Oe,rt.value,he),rt!==null&&(n&&rt.alternate!==null&&je.delete(rt.key===null?Oe:rt.key),O=y(rt,O,Oe),Ne===null?Pe=rt:Ne.sibling=rt,Ne=rt);return n&&je.forEach(function(yx){return s($,yx)}),vt&&Vs($,Oe),Pe}function St($,O,H,he){if(typeof H=="object"&&H!==null&&H.type===b&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case le:e:{for(var Pe=H.key,Ne=O;Ne!==null;){if(Ne.key===Pe){if(Pe=H.type,Pe===b){if(Ne.tag===7){a($,Ne.sibling),O=f(Ne,H.props.children),O.return=$,$=O;break e}}else if(Ne.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===Se&&om(Pe)===Ne.type){a($,Ne.sibling),O=f(Ne,H.props),O.ref=Va($,Ne,H),O.return=$,$=O;break e}a($,Ne);break}else s($,Ne);Ne=Ne.sibling}H.type===b?(O=$s(H.props.children,$.mode,he,H.key),O.return=$,$=O):(he=Ou(H.type,H.key,H.props,null,$.mode,he),he.ref=Va($,O,H),he.return=$,$=he)}return x($);case ue:e:{for(Ne=H.key;O!==null;){if(O.key===Ne)if(O.tag===4&&O.stateNode.containerInfo===H.containerInfo&&O.stateNode.implementation===H.implementation){a($,O.sibling),O=f(O,H.children||[]),O.return=$,$=O;break e}else{a($,O);break}else s($,O);O=O.sibling}O=Th(H,$.mode,he),O.return=$,$=O}return x($);case Se:return Ne=H._init,St($,O,Ne(H._payload),he)}if(Pt(H))return Te($,O,H,he);if(ve(H))return Ce($,O,H,he);fu($,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,O!==null&&O.tag===6?(a($,O.sibling),O=f(O,H),O.return=$,$=O):(a($,O),O=Eh(H,$.mode,he),O.return=$,$=O),x($)):a($,O)}return St}var bo=am(!0),lm=am(!1),pu=Oi(null),mu=null,No=null,Nd=null;function jd(){Nd=No=mu=null}function Dd(n){var s=pu.current;pt(pu),n._currentValue=s}function Vd(n,s,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===a)break;n=n.return}}function jo(n,s){mu=n,Nd=No=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(kn=!0),n.firstContext=null)}function tr(n){var s=n._currentValue;if(Nd!==n)if(n={context:n,memoizedValue:s,next:null},No===null){if(mu===null)throw Error(t(308));No=n,mu.dependencies={lanes:0,firstContext:n}}else No=No.next=n;return s}var Ls=null;function Ld(n){Ls===null?Ls=[n]:Ls.push(n)}function um(n,s,a,d){var f=s.interleaved;return f===null?(a.next=a,Ld(s)):(a.next=f.next,f.next=a),s.interleaved=a,di(n,d)}function di(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ui=!1;function Od(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function hi(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function zi(n,s,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(et&2)!==0){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,di(n,a)}return f=d.interleaved,f===null?(s.next=s,Ld(d)):(s.next=f.next,f.next=s),d.interleaved=s,di(n,a)}function gu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=n.pendingLanes,a|=d,s.lanes=a,Ai(n,a)}}function dm(n,s){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?f=y=x:y=y.next=x,a=a.next}while(a!==null);y===null?f=y=s:y=y.next=s}else f=y=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function yu(n,s,a,d){var f=n.updateQueue;Ui=!1;var y=f.firstBaseUpdate,x=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var j=k,K=j.next;j.next=null,x===null?y=K:x.next=K,x=j;var ae=n.alternate;ae!==null&&(ae=ae.updateQueue,k=ae.lastBaseUpdate,k!==x&&(k===null?ae.firstBaseUpdate=K:k.next=K,ae.lastBaseUpdate=j))}if(y!==null){var ce=f.baseState;x=0,ae=K=j=null,k=y;do{var se=k.lane,_e=k.eventTime;if((d&se)===se){ae!==null&&(ae=ae.next={eventTime:_e,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var Te=n,Ce=k;switch(se=s,_e=a,Ce.tag){case 1:if(Te=Ce.payload,typeof Te=="function"){ce=Te.call(_e,ce,se);break e}ce=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ce.payload,se=typeof Te=="function"?Te.call(_e,ce,se):Te,se==null)break e;ce=fe({},ce,se);break e;case 2:Ui=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,se=f.effects,se===null?f.effects=[k]:se.push(k))}else _e={eventTime:_e,lane:se,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ae===null?(K=ae=_e,j=ce):ae=ae.next=_e,x|=se;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;se=k,k=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);if(ae===null&&(j=ce),f.baseState=j,f.firstBaseUpdate=K,f.lastBaseUpdate=ae,s=f.shared.interleaved,s!==null){f=s;do x|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);Fs|=x,n.lanes=x,n.memoizedState=ce}}function hm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var d=n[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var La={},Fr=Oi(La),Oa=Oi(La),Ma=Oi(La);function Os(n){if(n===La)throw Error(t(174));return n}function Md(n,s){switch(dt(Ma,s),dt(Oa,n),dt(Fr,La),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Le(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Le(s,n)}pt(Fr),dt(Fr,s)}function Do(){pt(Fr),pt(Oa),pt(Ma)}function fm(n){Os(Ma.current);var s=Os(Fr.current),a=Le(s,n.type);s!==a&&(dt(Oa,n),dt(Fr,a))}function Fd(n){Oa.current===n&&(pt(Fr),pt(Oa))}var wt=Oi(0);function vu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ud=[];function zd(){for(var n=0;n<Ud.length;n++)Ud[n]._workInProgressVersionPrimary=null;Ud.length=0}var _u=re.ReactCurrentDispatcher,Bd=re.ReactCurrentBatchConfig,Ms=0,xt=null,Ot=null,Ht=null,wu=!1,Fa=!1,Ua=0,Fw=0;function cn(){throw Error(t(321))}function $d(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!wr(n[a],s[a]))return!1;return!0}function Wd(n,s,a,d,f,y){if(Ms=y,xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,_u.current=n===null||n.memoizedState===null?$w:Ww,n=a(d,f),Fa){y=0;do{if(Fa=!1,Ua=0,25<=y)throw Error(t(301));y+=1,Ht=Ot=null,s.updateQueue=null,_u.current=Hw,n=a(d,f)}while(Fa)}if(_u.current=Tu,s=Ot!==null&&Ot.next!==null,Ms=0,Ht=Ot=xt=null,wu=!1,s)throw Error(t(300));return n}function Hd(){var n=Ua!==0;return Ua=0,n}function Ur(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?xt.memoizedState=Ht=n:Ht=Ht.next=n,Ht}function nr(){if(Ot===null){var n=xt.alternate;n=n!==null?n.memoizedState:null}else n=Ot.next;var s=Ht===null?xt.memoizedState:Ht.next;if(s!==null)Ht=s,Ot=n;else{if(n===null)throw Error(t(310));Ot=n,n={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ht===null?xt.memoizedState=Ht=n:Ht=Ht.next=n}return Ht}function za(n,s){return typeof s=="function"?s(n):s}function qd(n){var s=nr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=Ot,f=d.baseQueue,y=a.pending;if(y!==null){if(f!==null){var x=f.next;f.next=y.next,y.next=x}d.baseQueue=f=y,a.pending=null}if(f!==null){y=f.next,d=d.baseState;var k=x=null,j=null,K=y;do{var ae=K.lane;if((Ms&ae)===ae)j!==null&&(j=j.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:n(d,K.action);else{var ce={lane:ae,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};j===null?(k=j=ce,x=d):j=j.next=ce,xt.lanes|=ae,Fs|=ae}K=K.next}while(K!==null&&K!==y);j===null?x=d:j.next=k,wr(d,s.memoizedState)||(kn=!0),s.memoizedState=d,s.baseState=x,s.baseQueue=j,a.lastRenderedState=d}if(n=a.interleaved,n!==null){f=n;do y=f.lane,xt.lanes|=y,Fs|=y,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Gd(n){var s=nr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=a.dispatch,f=a.pending,y=s.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do y=n(y,x.action),x=x.next;while(x!==f);wr(y,s.memoizedState)||(kn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,d]}function pm(){}function mm(n,s){var a=xt,d=nr(),f=s(),y=!wr(d.memoizedState,f);if(y&&(d.memoizedState=f,kn=!0),d=d.queue,Kd(vm.bind(null,a,d,n),[n]),d.getSnapshot!==s||y||Ht!==null&&Ht.memoizedState.tag&1){if(a.flags|=2048,Ba(9,ym.bind(null,a,d,f,s),void 0,null),qt===null)throw Error(t(349));(Ms&30)!==0||gm(a,s,f)}return f}function gm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=xt.updateQueue,s===null?(s={lastEffect:null,stores:null},xt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function ym(n,s,a,d){s.value=a,s.getSnapshot=d,_m(s)&&wm(n)}function vm(n,s,a){return a(function(){_m(s)&&wm(n)})}function _m(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!wr(n,a)}catch{return!0}}function wm(n){var s=di(n,1);s!==null&&Ir(s,n,1,-1)}function xm(n){var s=Ur();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:n},s.queue=n,n=n.dispatch=Bw.bind(null,xt,n),[s.memoizedState,n]}function Ba(n,s,a,d){return n={tag:n,create:s,destroy:a,deps:d,next:null},s=xt.updateQueue,s===null?(s={lastEffect:null,stores:null},xt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,s.lastEffect=n)),n}function Em(){return nr().memoizedState}function xu(n,s,a,d){var f=Ur();xt.flags|=n,f.memoizedState=Ba(1|s,a,void 0,d===void 0?null:d)}function Eu(n,s,a,d){var f=nr();d=d===void 0?null:d;var y=void 0;if(Ot!==null){var x=Ot.memoizedState;if(y=x.destroy,d!==null&&$d(d,x.deps)){f.memoizedState=Ba(s,a,y,d);return}}xt.flags|=n,f.memoizedState=Ba(1|s,a,y,d)}function Tm(n,s){return xu(8390656,8,n,s)}function Kd(n,s){return Eu(2048,8,n,s)}function Sm(n,s){return Eu(4,2,n,s)}function Im(n,s){return Eu(4,4,n,s)}function Cm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Rm(n,s,a){return a=a!=null?a.concat([n]):null,Eu(4,4,Cm.bind(null,s,n),a)}function Qd(){}function Pm(n,s){var a=nr();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&$d(s,d[1])?d[0]:(a.memoizedState=[n,s],n)}function km(n,s){var a=nr();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&$d(s,d[1])?d[0]:(n=n(),a.memoizedState=[n,s],n)}function Am(n,s,a){return(Ms&21)===0?(n.baseState&&(n.baseState=!1,kn=!0),n.memoizedState=a):(wr(a,s)||(a=Rs(),xt.lanes|=a,Fs|=a,n.baseState=!0),s)}function Uw(n,s){var a=Je;Je=a!==0&&4>a?a:4,n(!0);var d=Bd.transition;Bd.transition={};try{n(!1),s()}finally{Je=a,Bd.transition=d}}function bm(){return nr().memoizedState}function zw(n,s,a){var d=Hi(n);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},Nm(n))jm(s,a);else if(a=um(n,s,a,d),a!==null){var f=Tn();Ir(a,n,d,f),Dm(a,s,d)}}function Bw(n,s,a){var d=Hi(n),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nm(n))jm(s,f);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var x=s.lastRenderedState,k=y(x,a);if(f.hasEagerState=!0,f.eagerState=k,wr(k,x)){var j=s.interleaved;j===null?(f.next=f,Ld(s)):(f.next=j.next,j.next=f),s.interleaved=f;return}}catch{}finally{}a=um(n,s,f,d),a!==null&&(f=Tn(),Ir(a,n,d,f),Dm(a,s,d))}}function Nm(n){var s=n.alternate;return n===xt||s!==null&&s===xt}function jm(n,s){Fa=wu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Dm(n,s,a){if((a&4194240)!==0){var d=s.lanes;d&=n.pendingLanes,a|=d,s.lanes=a,Ai(n,a)}}var Tu={readContext:tr,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},$w={readContext:tr,useCallback:function(n,s){return Ur().memoizedState=[n,s===void 0?null:s],n},useContext:tr,useEffect:Tm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,xu(4194308,4,Cm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return xu(4194308,4,n,s)},useInsertionEffect:function(n,s){return xu(4,2,n,s)},useMemo:function(n,s){var a=Ur();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var d=Ur();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},d.queue=n,n=n.dispatch=zw.bind(null,xt,n),[d.memoizedState,n]},useRef:function(n){var s=Ur();return n={current:n},s.memoizedState=n},useState:xm,useDebugValue:Qd,useDeferredValue:function(n){return Ur().memoizedState=n},useTransition:function(){var n=xm(!1),s=n[0];return n=Uw.bind(null,n[1]),Ur().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var d=xt,f=Ur();if(vt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),qt===null)throw Error(t(349));(Ms&30)!==0||gm(d,s,a)}f.memoizedState=a;var y={value:a,getSnapshot:s};return f.queue=y,Tm(vm.bind(null,d,y,n),[n]),d.flags|=2048,Ba(9,ym.bind(null,d,y,a,s),void 0,null),a},useId:function(){var n=Ur(),s=qt.identifierPrefix;if(vt){var a=ci,d=ui;a=(d&~(1<<32-wn(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ua++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Fw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Ww={readContext:tr,useCallback:Pm,useContext:tr,useEffect:Kd,useImperativeHandle:Rm,useInsertionEffect:Sm,useLayoutEffect:Im,useMemo:km,useReducer:qd,useRef:Em,useState:function(){return qd(za)},useDebugValue:Qd,useDeferredValue:function(n){var s=nr();return Am(s,Ot.memoizedState,n)},useTransition:function(){var n=qd(za)[0],s=nr().memoizedState;return[n,s]},useMutableSource:pm,useSyncExternalStore:mm,useId:bm,unstable_isNewReconciler:!1},Hw={readContext:tr,useCallback:Pm,useContext:tr,useEffect:Kd,useImperativeHandle:Rm,useInsertionEffect:Sm,useLayoutEffect:Im,useMemo:km,useReducer:Gd,useRef:Em,useState:function(){return Gd(za)},useDebugValue:Qd,useDeferredValue:function(n){var s=nr();return Ot===null?s.memoizedState=n:Am(s,Ot.memoizedState,n)},useTransition:function(){var n=Gd(za)[0],s=nr().memoizedState;return[n,s]},useMutableSource:pm,useSyncExternalStore:mm,useId:bm,unstable_isNewReconciler:!1};function Er(n,s){if(n&&n.defaultProps){s=fe({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Yd(n,s,a,d){s=n.memoizedState,a=a(d,s),a=a==null?s:fe({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Su={isMounted:function(n){return(n=n._reactInternals)?Ln(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var d=Tn(),f=Hi(n),y=hi(d,f);y.payload=s,a!=null&&(y.callback=a),s=zi(n,y,f),s!==null&&(Ir(s,n,f,d),gu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var d=Tn(),f=Hi(n),y=hi(d,f);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=zi(n,y,f),s!==null&&(Ir(s,n,f,d),gu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Tn(),d=Hi(n),f=hi(a,d);f.tag=2,s!=null&&(f.callback=s),s=zi(n,f,d),s!==null&&(Ir(s,n,d,a),gu(s,n,d))}};function Vm(n,s,a,d,f,y,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,x):s.prototype&&s.prototype.isPureReactComponent?!Pa(a,d)||!Pa(f,y):!0}function Lm(n,s,a){var d=!1,f=Mi,y=s.contextType;return typeof y=="object"&&y!==null?y=tr(y):(f=Pn(s)?js:un.current,d=s.contextTypes,y=(d=d!=null)?Ro(n,f):Mi),s=new s(a,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Su,n.stateNode=s,s._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=y),s}function Om(n,s,a,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==n&&Su.enqueueReplaceState(s,s.state,null)}function Jd(n,s,a,d){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Od(n);var y=s.contextType;typeof y=="object"&&y!==null?f.context=tr(y):(y=Pn(s)?js:un.current,f.context=Ro(n,y)),f.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Yd(n,s,y,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Su.enqueueReplaceState(f,f.state,null),yu(n,a,f,d),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Vo(n,s){try{var a="",d=s;do a+=Fe(d),d=d.return;while(d);var f=a}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:f,digest:null}}function Xd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Zd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var qw=typeof WeakMap=="function"?WeakMap:Map;function Mm(n,s,a){a=hi(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){bu||(bu=!0,ph=d),Zd(n,s)},a}function Fm(n,s,a){a=hi(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){Zd(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){Zd(n,s),typeof d!="function"&&($i===null?$i=new Set([this]):$i.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),a}function Um(n,s,a){var d=n.pingCache;if(d===null){d=n.pingCache=new qw;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),n=ox.bind(null,n,s,a),s.then(n,n))}function zm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Bm(n,s,a,d,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=hi(-1,1),s.tag=2,zi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Gw=re.ReactCurrentOwner,kn=!1;function En(n,s,a,d){s.child=n===null?lm(s,null,a,d):bo(s,n.child,a,d)}function $m(n,s,a,d,f){a=a.render;var y=s.ref;return jo(s,f),d=Wd(n,s,a,d,y,f),a=Hd(),n!==null&&!kn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,fi(n,s,f)):(vt&&a&&Rd(s),s.flags|=1,En(n,s,d,f),s.child)}function Wm(n,s,a,d,f){if(n===null){var y=a.type;return typeof y=="function"&&!xh(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,Hm(n,s,y,d,f)):(n=Ou(a.type,null,d,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,(n.lanes&f)===0){var x=y.memoizedProps;if(a=a.compare,a=a!==null?a:Pa,a(x,d)&&n.ref===s.ref)return fi(n,s,f)}return s.flags|=1,n=Gi(y,d),n.ref=s.ref,n.return=s,s.child=n}function Hm(n,s,a,d,f){if(n!==null){var y=n.memoizedProps;if(Pa(y,d)&&n.ref===s.ref)if(kn=!1,s.pendingProps=d=y,(n.lanes&f)!==0)(n.flags&131072)!==0&&(kn=!0);else return s.lanes=n.lanes,fi(n,s,f)}return eh(n,s,a,d,f)}function qm(n,s,a){var d=s.pendingProps,f=d.children,y=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Oo,$n),$n|=a;else{if((a&1073741824)===0)return n=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,dt(Oo,$n),$n|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:a,dt(Oo,$n),$n|=d}else y!==null?(d=y.baseLanes|a,s.memoizedState=null):d=a,dt(Oo,$n),$n|=d;return En(n,s,f,a),s.child}function Gm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function eh(n,s,a,d,f){var y=Pn(a)?js:un.current;return y=Ro(s,y),jo(s,f),a=Wd(n,s,a,d,y,f),d=Hd(),n!==null&&!kn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,fi(n,s,f)):(vt&&d&&Rd(s),s.flags|=1,En(n,s,a,f),s.child)}function Km(n,s,a,d,f){if(Pn(a)){var y=!0;lu(s)}else y=!1;if(jo(s,f),s.stateNode===null)Cu(n,s),Lm(s,a,d),Jd(s,a,d,f),d=!0;else if(n===null){var x=s.stateNode,k=s.memoizedProps;x.props=k;var j=x.context,K=a.contextType;typeof K=="object"&&K!==null?K=tr(K):(K=Pn(a)?js:un.current,K=Ro(s,K));var ae=a.getDerivedStateFromProps,ce=typeof ae=="function"||typeof x.getSnapshotBeforeUpdate=="function";ce||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==d||j!==K)&&Om(s,x,d,K),Ui=!1;var se=s.memoizedState;x.state=se,yu(s,d,x,f),j=s.memoizedState,k!==d||se!==j||Rn.current||Ui?(typeof ae=="function"&&(Yd(s,a,ae,d),j=s.memoizedState),(k=Ui||Vm(s,a,k,d,se,j,K))?(ce||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=j),x.props=d,x.state=j,x.context=K,d=k):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{x=s.stateNode,cm(n,s),k=s.memoizedProps,K=s.type===s.elementType?k:Er(s.type,k),x.props=K,ce=s.pendingProps,se=x.context,j=a.contextType,typeof j=="object"&&j!==null?j=tr(j):(j=Pn(a)?js:un.current,j=Ro(s,j));var _e=a.getDerivedStateFromProps;(ae=typeof _e=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==ce||se!==j)&&Om(s,x,d,j),Ui=!1,se=s.memoizedState,x.state=se,yu(s,d,x,f);var Te=s.memoizedState;k!==ce||se!==Te||Rn.current||Ui?(typeof _e=="function"&&(Yd(s,a,_e,d),Te=s.memoizedState),(K=Ui||Vm(s,a,K,d,se,Te,j)||!1)?(ae||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,Te,j),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,Te,j)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||k===n.memoizedProps&&se===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&se===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Te),x.props=d,x.state=Te,x.context=j,d=K):(typeof x.componentDidUpdate!="function"||k===n.memoizedProps&&se===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&se===n.memoizedState||(s.flags|=1024),d=!1)}return th(n,s,a,d,y,f)}function th(n,s,a,d,f,y){Gm(n,s);var x=(s.flags&128)!==0;if(!d&&!x)return f&&Zp(s,a,!1),fi(n,s,y);d=s.stateNode,Gw.current=s;var k=x&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,n!==null&&x?(s.child=bo(s,n.child,null,y),s.child=bo(s,null,k,y)):En(n,s,k,y),s.memoizedState=d.state,f&&Zp(s,a,!0),s.child}function Qm(n){var s=n.stateNode;s.pendingContext?Jp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Jp(n,s.context,!1),Md(n,s.containerInfo)}function Ym(n,s,a,d,f){return Ao(),bd(f),s.flags|=256,En(n,s,a,d),s.child}var nh={dehydrated:null,treeContext:null,retryLane:0};function rh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Jm(n,s,a){var d=s.pendingProps,f=wt.current,y=!1,x=(s.flags&128)!==0,k;if((k=x)||(k=n!==null&&n.memoizedState===null?!1:(f&2)!==0),k?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),dt(wt,f&1),n===null)return Ad(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(x=d.children,n=d.fallback,y?(d=s.mode,y=s.child,x={mode:"hidden",children:x},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=x):y=Mu(x,d,0,null),n=$s(n,d,a,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=rh(a),s.memoizedState=nh,n):ih(s,x));if(f=n.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return Kw(n,s,x,d,k,f,a);if(y){y=d.fallback,x=s.mode,f=n.child,k=f.sibling;var j={mode:"hidden",children:d.children};return(x&1)===0&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=j,s.deletions=null):(d=Gi(f,j),d.subtreeFlags=f.subtreeFlags&14680064),k!==null?y=Gi(k,y):(y=$s(y,x,a,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,x=n.child.memoizedState,x=x===null?rh(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=n.childLanes&~a,s.memoizedState=nh,d}return y=n.child,n=y.sibling,d=Gi(y,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=a),d.return=s,d.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=d,s.memoizedState=null,d}function ih(n,s){return s=Mu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Iu(n,s,a,d){return d!==null&&bd(d),bo(s,n.child,null,a),n=ih(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Kw(n,s,a,d,f,y,x){if(a)return s.flags&256?(s.flags&=-257,d=Xd(Error(t(422))),Iu(n,s,x,d)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=d.fallback,f=s.mode,d=Mu({mode:"visible",children:d.children},f,0,null),y=$s(y,f,x,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,(s.mode&1)!==0&&bo(s,n.child,null,x),s.child.memoizedState=rh(x),s.memoizedState=nh,y);if((s.mode&1)===0)return Iu(n,s,x,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var k=d.dgst;return d=k,y=Error(t(419)),d=Xd(y,d,void 0),Iu(n,s,x,d)}if(k=(x&n.childLanes)!==0,kn||k){if(d=qt,d!==null){switch(x&-x){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|x))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,di(n,f),Ir(d,n,f,-1))}return wh(),d=Xd(Error(t(421))),Iu(n,s,x,d)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=ax.bind(null,n),f._reactRetry=s,null):(n=y.treeContext,Bn=Li(f.nextSibling),zn=s,vt=!0,xr=null,n!==null&&(Zn[er++]=ui,Zn[er++]=ci,Zn[er++]=Ds,ui=n.id,ci=n.overflow,Ds=s),s=ih(s,d.children),s.flags|=4096,s)}function Xm(n,s,a){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),Vd(n.return,s,a)}function sh(n,s,a,d,f){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=a,y.tailMode=f)}function Zm(n,s,a){var d=s.pendingProps,f=d.revealOrder,y=d.tail;if(En(n,s,d.children,a),d=wt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xm(n,a,s);else if(n.tag===19)Xm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(dt(wt,d),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&vu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),sh(s,!1,f,a,y);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&vu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}sh(s,!0,a,null,y);break;case"together":sh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Cu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function fi(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Fs|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Gi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Gi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Qw(n,s,a){switch(s.tag){case 3:Qm(s),Ao();break;case 5:fm(s);break;case 1:Pn(s.type)&&lu(s);break;case 4:Md(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;dt(pu,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(dt(wt,wt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Jm(n,s,a):(dt(wt,wt.current&1),n=fi(n,s,a),n!==null?n.sibling:null);dt(wt,wt.current&1);break;case 19:if(d=(a&s.childLanes)!==0,(n.flags&128)!==0){if(d)return Zm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),dt(wt,wt.current),d)break;return null;case 22:case 23:return s.lanes=0,qm(n,s,a)}return fi(n,s,a)}var eg,oh,tg,ng;eg=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},oh=function(){},tg=function(n,s,a,d){var f=n.memoizedProps;if(f!==d){n=s.stateNode,Os(Fr.current);var y=null;switch(a){case"input":f=lr(n,f),d=lr(n,d),y=[];break;case"select":f=fe({},f,{value:void 0}),d=fe({},d,{value:void 0}),y=[];break;case"textarea":f=on(n,f),d=on(n,d),y=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=su)}Zr(a,d);var x;a=null;for(K in f)if(!d.hasOwnProperty(K)&&f.hasOwnProperty(K)&&f[K]!=null)if(K==="style"){var k=f[K];for(x in k)k.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?y||(y=[]):(y=y||[]).push(K,null));for(K in d){var j=d[K];if(k=f!=null?f[K]:void 0,d.hasOwnProperty(K)&&j!==k&&(j!=null||k!=null))if(K==="style")if(k){for(x in k)!k.hasOwnProperty(x)||j&&j.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in j)j.hasOwnProperty(x)&&k[x]!==j[x]&&(a||(a={}),a[x]=j[x])}else a||(y||(y=[]),y.push(K,a)),a=j;else K==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,k=k?k.__html:void 0,j!=null&&k!==j&&(y=y||[]).push(K,j)):K==="children"?typeof j!="string"&&typeof j!="number"||(y=y||[]).push(K,""+j):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(j!=null&&K==="onScroll"&&ft("scroll",n),y||k===j||(y=[])):(y=y||[]).push(K,j))}a&&(y=y||[]).push("style",a);var K=y;(s.updateQueue=K)&&(s.flags|=4)}},ng=function(n,s,a,d){a!==d&&(s.flags|=4)};function $a(n,s){if(!vt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function dn(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=d,n.childLanes=a,s}function Yw(n,s,a){var d=s.pendingProps;switch(Pd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(s),null;case 1:return Pn(s.type)&&au(),dn(s),null;case 3:return d=s.stateNode,Do(),pt(Rn),pt(un),zd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(hu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xr!==null&&(yh(xr),xr=null))),oh(n,s),dn(s),null;case 5:Fd(s);var f=Os(Ma.current);if(a=s.type,n!==null&&s.stateNode!=null)tg(n,s,a,d,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return dn(s),null}if(n=Os(Fr.current),hu(s)){d=s.stateNode,a=s.type;var y=s.memoizedProps;switch(d[Mr]=s,d[ja]=y,n=(s.mode&1)!==0,a){case"dialog":ft("cancel",d),ft("close",d);break;case"iframe":case"object":case"embed":ft("load",d);break;case"video":case"audio":for(f=0;f<Aa.length;f++)ft(Aa[f],d);break;case"source":ft("error",d);break;case"img":case"image":case"link":ft("error",d),ft("load",d);break;case"details":ft("toggle",d);break;case"input":Ye(d,y),ft("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},ft("invalid",d);break;case"textarea":Kn(d,y),ft("invalid",d)}Zr(a,y),f=null;for(var x in y)if(y.hasOwnProperty(x)){var k=y[x];x==="children"?typeof k=="string"?d.textContent!==k&&(y.suppressHydrationWarning!==!0&&iu(d.textContent,k,n),f=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(y.suppressHydrationWarning!==!0&&iu(d.textContent,k,n),f=["children",""+k]):o.hasOwnProperty(x)&&k!=null&&x==="onScroll"&&ft("scroll",d)}switch(a){case"input":sn(d),ur(d,y,!0);break;case"textarea":sn(d),dr(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=su)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{x=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ht(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=x.createElement(a,{is:d.is}):(n=x.createElement(a),a==="select"&&(x=n,d.multiple?x.multiple=!0:d.size&&(x.size=d.size))):n=x.createElementNS(n,a),n[Mr]=s,n[ja]=d,eg(n,s,!1,!1),s.stateNode=n;e:{switch(x=ei(a,d),a){case"dialog":ft("cancel",n),ft("close",n),f=d;break;case"iframe":case"object":case"embed":ft("load",n),f=d;break;case"video":case"audio":for(f=0;f<Aa.length;f++)ft(Aa[f],n);f=d;break;case"source":ft("error",n),f=d;break;case"img":case"image":case"link":ft("error",n),ft("load",n),f=d;break;case"details":ft("toggle",n),f=d;break;case"input":Ye(n,d),f=lr(n,d),ft("invalid",n);break;case"option":f=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},f=fe({},d,{value:void 0}),ft("invalid",n);break;case"textarea":Kn(n,d),f=on(n,d),ft("invalid",n);break;default:f=d}Zr(a,f),k=f;for(y in k)if(k.hasOwnProperty(y)){var j=k[y];y==="style"?vn(n,j):y==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Xr(n,j)):y==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&Vn(n,j):typeof j=="number"&&Vn(n,""+j):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?j!=null&&y==="onScroll"&&ft("scroll",n):j!=null&&de(n,y,j,x))}switch(a){case"input":sn(n),ur(n,d,!1);break;case"textarea":sn(n),dr(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Be(d.value));break;case"select":n.multiple=!!d.multiple,y=d.value,y!=null?_t(n,!!d.multiple,y,!1):d.defaultValue!=null&&_t(n,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=su)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return dn(s),null;case 6:if(n&&s.stateNode!=null)ng(n,s,n.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=Os(Ma.current),Os(Fr.current),hu(s)){if(d=s.stateNode,a=s.memoizedProps,d[Mr]=s,(y=d.nodeValue!==a)&&(n=zn,n!==null))switch(n.tag){case 3:iu(d.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&iu(d.nodeValue,a,(n.mode&1)!==0)}y&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Mr]=s,s.stateNode=d}return dn(s),null;case 13:if(pt(wt),d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(vt&&Bn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)sm(),Ao(),s.flags|=98560,y=!1;else if(y=hu(s),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Mr]=s}else Ao(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dn(s),y=!1}else xr!==null&&(yh(xr),xr=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(wt.current&1)!==0?Mt===0&&(Mt=3):wh())),s.updateQueue!==null&&(s.flags|=4),dn(s),null);case 4:return Do(),oh(n,s),n===null&&ba(s.stateNode.containerInfo),dn(s),null;case 10:return Dd(s.type._context),dn(s),null;case 17:return Pn(s.type)&&au(),dn(s),null;case 19:if(pt(wt),y=s.memoizedState,y===null)return dn(s),null;if(d=(s.flags&128)!==0,x=y.rendering,x===null)if(d)$a(y,!1);else{if(Mt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(x=vu(n),x!==null){for(s.flags|=128,$a(y,!1),d=x.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)y=a,n=d,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,n=x.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return dt(wt,wt.current&1|2),s.child}n=n.sibling}y.tail!==null&&ct()>Mo&&(s.flags|=128,d=!0,$a(y,!1),s.lanes=4194304)}else{if(!d)if(n=vu(x),n!==null){if(s.flags|=128,d=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),$a(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!vt)return dn(s),null}else 2*ct()-y.renderingStartTime>Mo&&a!==1073741824&&(s.flags|=128,d=!0,$a(y,!1),s.lanes=4194304);y.isBackwards?(x.sibling=s.child,s.child=x):(a=y.last,a!==null?a.sibling=x:s.child=x,y.last=x)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=ct(),s.sibling=null,a=wt.current,dt(wt,d?a&1|2:a&1),s):(dn(s),null);case 22:case 23:return _h(),d=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?($n&1073741824)!==0&&(dn(s),s.subtreeFlags&6&&(s.flags|=8192)):dn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Jw(n,s){switch(Pd(s),s.tag){case 1:return Pn(s.type)&&au(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Do(),pt(Rn),pt(un),zd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Fd(s),null;case 13:if(pt(wt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ao()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return pt(wt),null;case 4:return Do(),null;case 10:return Dd(s.type._context),null;case 22:case 23:return _h(),null;case 24:return null;default:return null}}var Ru=!1,hn=!1,Xw=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Lo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){Tt(n,s,d)}else a.current=null}function ah(n,s,a){try{a()}catch(d){Tt(n,s,d)}}var rg=!1;function Zw(n,s){if(_d=ji,n=Vp(),dd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var x=0,k=-1,j=-1,K=0,ae=0,ce=n,se=null;t:for(;;){for(var _e;ce!==a||f!==0&&ce.nodeType!==3||(k=x+f),ce!==y||d!==0&&ce.nodeType!==3||(j=x+d),ce.nodeType===3&&(x+=ce.nodeValue.length),(_e=ce.firstChild)!==null;)se=ce,ce=_e;for(;;){if(ce===n)break t;if(se===a&&++K===f&&(k=x),se===y&&++ae===d&&(j=x),(_e=ce.nextSibling)!==null)break;ce=se,se=ce.parentNode}ce=_e}a=k===-1||j===-1?null:{start:k,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(wd={focusedElem:n,selectionRange:a},ji=!1,Ee=s;Ee!==null;)if(s=Ee,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ee=n;else for(;Ee!==null;){s=Ee;try{var Te=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ce=Te.memoizedProps,St=Te.memoizedState,$=s.stateNode,O=$.getSnapshotBeforeUpdate(s.elementType===s.type?Ce:Er(s.type,Ce),St);$.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var H=s.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(he){Tt(s,s.return,he)}if(n=s.sibling,n!==null){n.return=s.return,Ee=n;break}Ee=s.return}return Te=rg,rg=!1,Te}function Wa(n,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&n)===n){var y=f.destroy;f.destroy=void 0,y!==void 0&&ah(s,a,y)}f=f.next}while(f!==d)}}function Pu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function lh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ig(n){var s=n.alternate;s!==null&&(n.alternate=null,ig(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Mr],delete s[ja],delete s[Sd],delete s[Vw],delete s[Lw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function sg(n){return n.tag===5||n.tag===3||n.tag===4}function og(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function uh(n,s,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=su));else if(d!==4&&(n=n.child,n!==null))for(uh(n,s,a),n=n.sibling;n!==null;)uh(n,s,a),n=n.sibling}function ch(n,s,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(ch(n,s,a),n=n.sibling;n!==null;)ch(n,s,a),n=n.sibling}var Xt=null,Tr=!1;function Bi(n,s,a){for(a=a.child;a!==null;)ag(n,s,a),a=a.sibling}function ag(n,s,a){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Is,a)}catch{}switch(a.tag){case 5:hn||Lo(a,s);case 6:var d=Xt,f=Tr;Xt=null,Bi(n,s,a),Xt=d,Tr=f,Xt!==null&&(Tr?(n=Xt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Xt.removeChild(a.stateNode));break;case 18:Xt!==null&&(Tr?(n=Xt,a=a.stateNode,n.nodeType===8?Td(n.parentNode,a):n.nodeType===1&&Td(n,a),vr(n)):Td(Xt,a.stateNode));break;case 4:d=Xt,f=Tr,Xt=a.stateNode.containerInfo,Tr=!0,Bi(n,s,a),Xt=d,Tr=f;break;case 0:case 11:case 14:case 15:if(!hn&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var y=f,x=y.destroy;y=y.tag,x!==void 0&&((y&2)!==0||(y&4)!==0)&&ah(a,s,x),f=f.next}while(f!==d)}Bi(n,s,a);break;case 1:if(!hn&&(Lo(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(k){Tt(a,s,k)}Bi(n,s,a);break;case 21:Bi(n,s,a);break;case 22:a.mode&1?(hn=(d=hn)||a.memoizedState!==null,Bi(n,s,a),hn=d):Bi(n,s,a);break;default:Bi(n,s,a)}}function lg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Xw),s.forEach(function(d){var f=lx.bind(null,n,d);a.has(d)||(a.add(d),d.then(f,f))})}}function Sr(n,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var y=n,x=s,k=x;e:for(;k!==null;){switch(k.tag){case 5:Xt=k.stateNode,Tr=!1;break e;case 3:Xt=k.stateNode.containerInfo,Tr=!0;break e;case 4:Xt=k.stateNode.containerInfo,Tr=!0;break e}k=k.return}if(Xt===null)throw Error(t(160));ag(y,x,f),Xt=null,Tr=!1;var j=f.alternate;j!==null&&(j.return=null),f.return=null}catch(K){Tt(f,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ug(s,n),s=s.sibling}function ug(n,s){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Sr(s,n),zr(n),d&4){try{Wa(3,n,n.return),Pu(3,n)}catch(Ce){Tt(n,n.return,Ce)}try{Wa(5,n,n.return)}catch(Ce){Tt(n,n.return,Ce)}}break;case 1:Sr(s,n),zr(n),d&512&&a!==null&&Lo(a,a.return);break;case 5:if(Sr(s,n),zr(n),d&512&&a!==null&&Lo(a,a.return),n.flags&32){var f=n.stateNode;try{Vn(f,"")}catch(Ce){Tt(n,n.return,Ce)}}if(d&4&&(f=n.stateNode,f!=null)){var y=n.memoizedProps,x=a!==null?a.memoizedProps:y,k=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{k==="input"&&y.type==="radio"&&y.name!=null&&zt(f,y),ei(k,x);var K=ei(k,y);for(x=0;x<j.length;x+=2){var ae=j[x],ce=j[x+1];ae==="style"?vn(f,ce):ae==="dangerouslySetInnerHTML"?Xr(f,ce):ae==="children"?Vn(f,ce):de(f,ae,ce,K)}switch(k){case"input":yn(f,y);break;case"textarea":cr(f,y);break;case"select":var se=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var _e=y.value;_e!=null?_t(f,!!y.multiple,_e,!1):se!==!!y.multiple&&(y.defaultValue!=null?_t(f,!!y.multiple,y.defaultValue,!0):_t(f,!!y.multiple,y.multiple?[]:"",!1))}f[ja]=y}catch(Ce){Tt(n,n.return,Ce)}}break;case 6:if(Sr(s,n),zr(n),d&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,y=n.memoizedProps;try{f.nodeValue=y}catch(Ce){Tt(n,n.return,Ce)}}break;case 3:if(Sr(s,n),zr(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{vr(s.containerInfo)}catch(Ce){Tt(n,n.return,Ce)}break;case 4:Sr(s,n),zr(n);break;case 13:Sr(s,n),zr(n),f=n.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(fh=ct())),d&4&&lg(n);break;case 22:if(ae=a!==null&&a.memoizedState!==null,n.mode&1?(hn=(K=hn)||ae,Sr(s,n),hn=K):Sr(s,n),zr(n),d&8192){if(K=n.memoizedState!==null,(n.stateNode.isHidden=K)&&!ae&&(n.mode&1)!==0)for(Ee=n,ae=n.child;ae!==null;){for(ce=Ee=ae;Ee!==null;){switch(se=Ee,_e=se.child,se.tag){case 0:case 11:case 14:case 15:Wa(4,se,se.return);break;case 1:Lo(se,se.return);var Te=se.stateNode;if(typeof Te.componentWillUnmount=="function"){d=se,a=se.return;try{s=d,Te.props=s.memoizedProps,Te.state=s.memoizedState,Te.componentWillUnmount()}catch(Ce){Tt(d,a,Ce)}}break;case 5:Lo(se,se.return);break;case 22:if(se.memoizedState!==null){hg(ce);continue}}_e!==null?(_e.return=se,Ee=_e):hg(ce)}ae=ae.sibling}e:for(ae=null,ce=n;;){if(ce.tag===5){if(ae===null){ae=ce;try{f=ce.stateNode,K?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(k=ce.stateNode,j=ce.memoizedProps.style,x=j!=null&&j.hasOwnProperty("display")?j.display:null,k.style.display=Ar("display",x))}catch(Ce){Tt(n,n.return,Ce)}}}else if(ce.tag===6){if(ae===null)try{ce.stateNode.nodeValue=K?"":ce.memoizedProps}catch(Ce){Tt(n,n.return,Ce)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===n)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===n)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===n)break e;ae===ce&&(ae=null),ce=ce.return}ae===ce&&(ae=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:Sr(s,n),zr(n),d&4&&lg(n);break;case 21:break;default:Sr(s,n),zr(n)}}function zr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(sg(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(Vn(f,""),d.flags&=-33);var y=og(n);ch(n,y,f);break;case 3:case 4:var x=d.stateNode.containerInfo,k=og(n);uh(n,k,x);break;default:throw Error(t(161))}}catch(j){Tt(n,n.return,j)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function ex(n,s,a){Ee=n,cg(n)}function cg(n,s,a){for(var d=(n.mode&1)!==0;Ee!==null;){var f=Ee,y=f.child;if(f.tag===22&&d){var x=f.memoizedState!==null||Ru;if(!x){var k=f.alternate,j=k!==null&&k.memoizedState!==null||hn;k=Ru;var K=hn;if(Ru=x,(hn=j)&&!K)for(Ee=f;Ee!==null;)x=Ee,j=x.child,x.tag===22&&x.memoizedState!==null?fg(f):j!==null?(j.return=x,Ee=j):fg(f);for(;y!==null;)Ee=y,cg(y),y=y.sibling;Ee=f,Ru=k,hn=K}dg(n)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,Ee=y):dg(n)}}function dg(n){for(;Ee!==null;){var s=Ee;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:hn||Pu(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!hn)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Er(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&hm(s,y,d);break;case 3:var x=s.updateQueue;if(x!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}hm(s,x,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var ae=K.memoizedState;if(ae!==null){var ce=ae.dehydrated;ce!==null&&vr(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}hn||s.flags&512&&lh(s)}catch(se){Tt(s,s.return,se)}}if(s===n){Ee=null;break}if(a=s.sibling,a!==null){a.return=s.return,Ee=a;break}Ee=s.return}}function hg(n){for(;Ee!==null;){var s=Ee;if(s===n){Ee=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Ee=a;break}Ee=s.return}}function fg(n){for(;Ee!==null;){var s=Ee;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Pu(4,s)}catch(j){Tt(s,a,j)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(j){Tt(s,f,j)}}var y=s.return;try{lh(s)}catch(j){Tt(s,y,j)}break;case 5:var x=s.return;try{lh(s)}catch(j){Tt(s,x,j)}}}catch(j){Tt(s,s.return,j)}if(s===n){Ee=null;break}var k=s.sibling;if(k!==null){k.return=s.return,Ee=k;break}Ee=s.return}}var tx=Math.ceil,ku=re.ReactCurrentDispatcher,dh=re.ReactCurrentOwner,rr=re.ReactCurrentBatchConfig,et=0,qt=null,bt=null,Zt=0,$n=0,Oo=Oi(0),Mt=0,Ha=null,Fs=0,Au=0,hh=0,qa=null,An=null,fh=0,Mo=1/0,pi=null,bu=!1,ph=null,$i=null,Nu=!1,Wi=null,ju=0,Ga=0,mh=null,Du=-1,Vu=0;function Tn(){return(et&6)!==0?ct():Du!==-1?Du:Du=ct()}function Hi(n){return(n.mode&1)===0?1:(et&2)!==0&&Zt!==0?Zt&-Zt:Mw.transition!==null?(Vu===0&&(Vu=Rs()),Vu):(n=Je,n!==0||(n=window.event,n=n===void 0?16:xa(n.type)),n)}function Ir(n,s,a,d){if(50<Ga)throw Ga=0,mh=null,Error(t(185));ki(n,a,d),((et&2)===0||n!==qt)&&(n===qt&&((et&2)===0&&(Au|=a),Mt===4&&qi(n,Zt)),bn(n,d),a===1&&et===0&&(s.mode&1)===0&&(Mo=ct()+500,uu&&Fi()))}function bn(n,s){var a=n.callbackNode;ni(n,s);var d=Cs(n,n===qt?Zt:0);if(d===0)a!==null&&ga(a),n.callbackNode=null,n.callbackPriority=0;else if(s=d&-d,n.callbackPriority!==s){if(a!=null&&ga(a),s===1)n.tag===0?Ow(mg.bind(null,n)):em(mg.bind(null,n)),jw(function(){(et&6)===0&&Fi()}),a=null;else{switch(bi(d)){case 1:a=Ss;break;case 4:a=Ci;break;case 16:a=Yn;break;case 536870912:a=Vl;break;default:a=Yn}a=Tg(a,pg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function pg(n,s){if(Du=-1,Vu=0,(et&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Fo()&&n.callbackNode!==a)return null;var d=Cs(n,n===qt?Zt:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||s)s=Lu(n,d);else{s=d;var f=et;et|=2;var y=yg();(qt!==n||Zt!==s)&&(pi=null,Mo=ct()+500,zs(n,s));do try{ix();break}catch(k){gg(n,k)}while(!0);jd(),ku.current=y,et=f,bt!==null?s=0:(qt=null,Zt=0,s=Mt)}if(s!==0){if(s===2&&(f=Mn(n),f!==0&&(d=f,s=gh(n,f))),s===1)throw a=Ha,zs(n,0),qi(n,d),bn(n,ct()),a;if(s===6)qi(n,d);else{if(f=n.current.alternate,(d&30)===0&&!nx(f)&&(s=Lu(n,d),s===2&&(y=Mn(n),y!==0&&(d=y,s=gh(n,y))),s===1))throw a=Ha,zs(n,0),qi(n,d),bn(n,ct()),a;switch(n.finishedWork=f,n.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:Bs(n,An,pi);break;case 3:if(qi(n,d),(d&130023424)===d&&(s=fh+500-ct(),10<s)){if(Cs(n,0)!==0)break;if(f=n.suspendedLanes,(f&d)!==d){Tn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Ed(Bs.bind(null,n,An,pi),s);break}Bs(n,An,pi);break;case 4:if(qi(n,d),(d&4194240)===d)break;for(s=n.eventTimes,f=-1;0<d;){var x=31-wn(d);y=1<<x,x=s[x],x>f&&(f=x),d&=~y}if(d=f,d=ct()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*tx(d/1960))-d,10<d){n.timeoutHandle=Ed(Bs.bind(null,n,An,pi),d);break}Bs(n,An,pi);break;case 5:Bs(n,An,pi);break;default:throw Error(t(329))}}}return bn(n,ct()),n.callbackNode===a?pg.bind(null,n):null}function gh(n,s){var a=qa;return n.current.memoizedState.isDehydrated&&(zs(n,s).flags|=256),n=Lu(n,s),n!==2&&(s=An,An=a,s!==null&&yh(s)),n}function yh(n){An===null?An=n:An.push.apply(An,n)}function nx(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],y=f.getSnapshot;f=f.value;try{if(!wr(y(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function qi(n,s){for(s&=~hh,s&=~Au,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-wn(s),d=1<<a;n[a]=-1,s&=~d}}function mg(n){if((et&6)!==0)throw Error(t(327));Fo();var s=Cs(n,0);if((s&1)===0)return bn(n,ct()),null;var a=Lu(n,s);if(n.tag!==0&&a===2){var d=Mn(n);d!==0&&(s=d,a=gh(n,d))}if(a===1)throw a=Ha,zs(n,0),qi(n,s),bn(n,ct()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Bs(n,An,pi),bn(n,ct()),null}function vh(n,s){var a=et;et|=1;try{return n(s)}finally{et=a,et===0&&(Mo=ct()+500,uu&&Fi())}}function Us(n){Wi!==null&&Wi.tag===0&&(et&6)===0&&Fo();var s=et;et|=1;var a=rr.transition,d=Je;try{if(rr.transition=null,Je=1,n)return n()}finally{Je=d,rr.transition=a,et=s,(et&6)===0&&Fi()}}function _h(){$n=Oo.current,pt(Oo)}function zs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Nw(a)),bt!==null)for(a=bt.return;a!==null;){var d=a;switch(Pd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&au();break;case 3:Do(),pt(Rn),pt(un),zd();break;case 5:Fd(d);break;case 4:Do();break;case 13:pt(wt);break;case 19:pt(wt);break;case 10:Dd(d.type._context);break;case 22:case 23:_h()}a=a.return}if(qt=n,bt=n=Gi(n.current,null),Zt=$n=s,Mt=0,Ha=null,hh=Au=Fs=0,An=qa=null,Ls!==null){for(s=0;s<Ls.length;s++)if(a=Ls[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,y=a.pending;if(y!==null){var x=y.next;y.next=f,d.next=x}a.pending=d}Ls=null}return n}function gg(n,s){do{var a=bt;try{if(jd(),_u.current=Tu,wu){for(var d=xt.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}wu=!1}if(Ms=0,Ht=Ot=xt=null,Fa=!1,Ua=0,dh.current=null,a===null||a.return===null){Mt=1,Ha=s,bt=null;break}e:{var y=n,x=a.return,k=a,j=s;if(s=Zt,k.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var K=j,ae=k,ce=ae.tag;if((ae.mode&1)===0&&(ce===0||ce===11||ce===15)){var se=ae.alternate;se?(ae.updateQueue=se.updateQueue,ae.memoizedState=se.memoizedState,ae.lanes=se.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var _e=zm(x);if(_e!==null){_e.flags&=-257,Bm(_e,x,k,y,s),_e.mode&1&&Um(y,K,s),s=_e,j=K;var Te=s.updateQueue;if(Te===null){var Ce=new Set;Ce.add(j),s.updateQueue=Ce}else Te.add(j);break e}else{if((s&1)===0){Um(y,K,s),wh();break e}j=Error(t(426))}}else if(vt&&k.mode&1){var St=zm(x);if(St!==null){(St.flags&65536)===0&&(St.flags|=256),Bm(St,x,k,y,s),bd(Vo(j,k));break e}}y=j=Vo(j,k),Mt!==4&&(Mt=2),qa===null?qa=[y]:qa.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var $=Mm(y,j,s);dm(y,$);break e;case 1:k=j;var O=y.type,H=y.stateNode;if((y.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&($i===null||!$i.has(H)))){y.flags|=65536,s&=-s,y.lanes|=s;var he=Fm(y,k,s);dm(y,he);break e}}y=y.return}while(y!==null)}_g(a)}catch(Pe){s=Pe,bt===a&&a!==null&&(bt=a=a.return);continue}break}while(!0)}function yg(){var n=ku.current;return ku.current=Tu,n===null?Tu:n}function wh(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),qt===null||(Fs&268435455)===0&&(Au&268435455)===0||qi(qt,Zt)}function Lu(n,s){var a=et;et|=2;var d=yg();(qt!==n||Zt!==s)&&(pi=null,zs(n,s));do try{rx();break}catch(f){gg(n,f)}while(!0);if(jd(),et=a,ku.current=d,bt!==null)throw Error(t(261));return qt=null,Zt=0,Mt}function rx(){for(;bt!==null;)vg(bt)}function ix(){for(;bt!==null&&!jl();)vg(bt)}function vg(n){var s=Eg(n.alternate,n,$n);n.memoizedProps=n.pendingProps,s===null?_g(n):bt=s,dh.current=null}function _g(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Yw(a,s,$n),a!==null){bt=a;return}}else{if(a=Jw(a,s),a!==null){a.flags&=32767,bt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Mt=6,bt=null;return}}if(s=s.sibling,s!==null){bt=s;return}bt=s=n}while(s!==null);Mt===0&&(Mt=5)}function Bs(n,s,a){var d=Je,f=rr.transition;try{rr.transition=null,Je=1,sx(n,s,a,d)}finally{rr.transition=f,Je=d}return null}function sx(n,s,a,d){do Fo();while(Wi!==null);if((et&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=a.lanes|a.childLanes;if(lt(n,y),n===qt&&(bt=qt=null,Zt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Nu||(Nu=!0,Tg(Yn,function(){return Fo(),null})),y=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||y){y=rr.transition,rr.transition=null;var x=Je;Je=1;var k=et;et|=4,dh.current=null,Zw(n,a),ug(a,n),Iw(wd),ji=!!_d,wd=_d=null,n.current=a,ex(a),rd(),et=k,Je=x,rr.transition=y}else n.current=a;if(Nu&&(Nu=!1,Wi=n,ju=f),y=n.pendingLanes,y===0&&($i=null),Ll(a.stateNode),bn(n,ct()),s!==null)for(d=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(bu)throw bu=!1,n=ph,ph=null,n;return(ju&1)!==0&&n.tag!==0&&Fo(),y=n.pendingLanes,(y&1)!==0?n===mh?Ga++:(Ga=0,mh=n):Ga=0,Fi(),null}function Fo(){if(Wi!==null){var n=bi(ju),s=rr.transition,a=Je;try{if(rr.transition=null,Je=16>n?16:n,Wi===null)var d=!1;else{if(n=Wi,Wi=null,ju=0,(et&6)!==0)throw Error(t(331));var f=et;for(et|=4,Ee=n.current;Ee!==null;){var y=Ee,x=y.child;if((Ee.flags&16)!==0){var k=y.deletions;if(k!==null){for(var j=0;j<k.length;j++){var K=k[j];for(Ee=K;Ee!==null;){var ae=Ee;switch(ae.tag){case 0:case 11:case 15:Wa(8,ae,y)}var ce=ae.child;if(ce!==null)ce.return=ae,Ee=ce;else for(;Ee!==null;){ae=Ee;var se=ae.sibling,_e=ae.return;if(ig(ae),ae===K){Ee=null;break}if(se!==null){se.return=_e,Ee=se;break}Ee=_e}}}var Te=y.alternate;if(Te!==null){var Ce=Te.child;if(Ce!==null){Te.child=null;do{var St=Ce.sibling;Ce.sibling=null,Ce=St}while(Ce!==null)}}Ee=y}}if((y.subtreeFlags&2064)!==0&&x!==null)x.return=y,Ee=x;else e:for(;Ee!==null;){if(y=Ee,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Wa(9,y,y.return)}var $=y.sibling;if($!==null){$.return=y.return,Ee=$;break e}Ee=y.return}}var O=n.current;for(Ee=O;Ee!==null;){x=Ee;var H=x.child;if((x.subtreeFlags&2064)!==0&&H!==null)H.return=x,Ee=H;else e:for(x=O;Ee!==null;){if(k=Ee,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Pu(9,k)}}catch(Pe){Tt(k,k.return,Pe)}if(k===x){Ee=null;break e}var he=k.sibling;if(he!==null){he.return=k.return,Ee=he;break e}Ee=k.return}}if(et=f,Fi(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Is,n)}catch{}d=!0}return d}finally{Je=a,rr.transition=s}}return!1}function wg(n,s,a){s=Vo(a,s),s=Mm(n,s,1),n=zi(n,s,1),s=Tn(),n!==null&&(ki(n,1,s),bn(n,s))}function Tt(n,s,a){if(n.tag===3)wg(n,n,a);else for(;s!==null;){if(s.tag===3){wg(s,n,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&($i===null||!$i.has(d))){n=Vo(a,n),n=Fm(s,n,1),s=zi(s,n,1),n=Tn(),s!==null&&(ki(s,1,n),bn(s,n));break}}s=s.return}}function ox(n,s,a){var d=n.pingCache;d!==null&&d.delete(s),s=Tn(),n.pingedLanes|=n.suspendedLanes&a,qt===n&&(Zt&a)===a&&(Mt===4||Mt===3&&(Zt&130023424)===Zt&&500>ct()-fh?zs(n,0):hh|=a),bn(n,s)}function xg(n,s){s===0&&((n.mode&1)===0?s=1:(s=ao,ao<<=1,(ao&130023424)===0&&(ao=4194304)));var a=Tn();n=di(n,s),n!==null&&(ki(n,s,a),bn(n,a))}function ax(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),xg(n,a)}function lx(n,s){var a=0;switch(n.tag){case 13:var d=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),xg(n,a)}var Eg;Eg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Rn.current)kn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return kn=!1,Qw(n,s,a);kn=(n.flags&131072)!==0}else kn=!1,vt&&(s.flags&1048576)!==0&&tm(s,du,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Cu(n,s),n=s.pendingProps;var f=Ro(s,un.current);jo(s,a),f=Wd(null,s,d,n,f,a);var y=Hd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Pn(d)?(y=!0,lu(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Od(s),f.updater=Su,s.stateNode=f,f._reactInternals=s,Jd(s,d,n,a),s=th(null,s,d,!0,y,a)):(s.tag=0,vt&&y&&Rd(s),En(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(Cu(n,s),n=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=cx(d),n=Er(d,n),f){case 0:s=eh(null,s,d,n,a);break e;case 1:s=Km(null,s,d,n,a);break e;case 11:s=$m(null,s,d,n,a);break e;case 14:s=Wm(null,s,d,Er(d.type,n),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Er(d,f),eh(n,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Er(d,f),Km(n,s,d,f,a);case 3:e:{if(Qm(s),n===null)throw Error(t(387));d=s.pendingProps,y=s.memoizedState,f=y.element,cm(n,s),yu(s,d,null,a);var x=s.memoizedState;if(d=x.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=Vo(Error(t(423)),s),s=Ym(n,s,d,a,f);break e}else if(d!==f){f=Vo(Error(t(424)),s),s=Ym(n,s,d,a,f);break e}else for(Bn=Li(s.stateNode.containerInfo.firstChild),zn=s,vt=!0,xr=null,a=lm(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ao(),d===f){s=fi(n,s,a);break e}En(n,s,d,a)}s=s.child}return s;case 5:return fm(s),n===null&&Ad(s),d=s.type,f=s.pendingProps,y=n!==null?n.memoizedProps:null,x=f.children,xd(d,f)?x=null:y!==null&&xd(d,y)&&(s.flags|=32),Gm(n,s),En(n,s,x,a),s.child;case 6:return n===null&&Ad(s),null;case 13:return Jm(n,s,a);case 4:return Md(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=bo(s,null,d,a):En(n,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Er(d,f),$m(n,s,d,f,a);case 7:return En(n,s,s.pendingProps,a),s.child;case 8:return En(n,s,s.pendingProps.children,a),s.child;case 12:return En(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,y=s.memoizedProps,x=f.value,dt(pu,d._currentValue),d._currentValue=x,y!==null)if(wr(y.value,x)){if(y.children===f.children&&!Rn.current){s=fi(n,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var k=y.dependencies;if(k!==null){x=y.child;for(var j=k.firstContext;j!==null;){if(j.context===d){if(y.tag===1){j=hi(-1,a&-a),j.tag=2;var K=y.updateQueue;if(K!==null){K=K.shared;var ae=K.pending;ae===null?j.next=j:(j.next=ae.next,ae.next=j),K.pending=j}}y.lanes|=a,j=y.alternate,j!==null&&(j.lanes|=a),Vd(y.return,a,s),k.lanes|=a;break}j=j.next}}else if(y.tag===10)x=y.type===s.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=a,k=x.alternate,k!==null&&(k.lanes|=a),Vd(x,a,s),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===s){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}En(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,jo(s,a),f=tr(f),d=d(f),s.flags|=1,En(n,s,d,a),s.child;case 14:return d=s.type,f=Er(d,s.pendingProps),f=Er(d.type,f),Wm(n,s,d,f,a);case 15:return Hm(n,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Er(d,f),Cu(n,s),s.tag=1,Pn(d)?(n=!0,lu(s)):n=!1,jo(s,a),Lm(s,d,f),Jd(s,d,f,a),th(null,s,d,!0,n,a);case 19:return Zm(n,s,a);case 22:return qm(n,s,a)}throw Error(t(156,s.tag))};function Tg(n,s){return so(n,s)}function ux(n,s,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(n,s,a,d){return new ux(n,s,a,d)}function xh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cx(n){if(typeof n=="function")return xh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===N)return 11;if(n===me)return 14}return 2}function Gi(n,s){var a=n.alternate;return a===null?(a=ir(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Ou(n,s,a,d,f,y){var x=2;if(d=n,typeof n=="function")xh(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case b:return $s(a.children,f,y,s);case C:x=8,f|=8;break;case R:return n=ir(12,a,s,f|2),n.elementType=R,n.lanes=y,n;case A:return n=ir(13,a,s,f),n.elementType=A,n.lanes=y,n;case Y:return n=ir(19,a,s,f),n.elementType=Y,n.lanes=y,n;case ke:return Mu(a,f,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:x=10;break e;case D:x=9;break e;case N:x=11;break e;case me:x=14;break e;case Se:x=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=ir(x,a,s,f),s.elementType=n,s.type=d,s.lanes=y,s}function $s(n,s,a,d){return n=ir(7,n,d,s),n.lanes=a,n}function Mu(n,s,a,d){return n=ir(22,n,d,s),n.elementType=ke,n.lanes=a,n.stateNode={isHidden:!1},n}function Eh(n,s,a){return n=ir(6,n,null,s),n.lanes=a,n}function Th(n,s,a){return s=ir(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function dx(n,s,a,d,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pi(0),this.expirationTimes=Pi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Sh(n,s,a,d,f,y,x,k,j){return n=new dx(n,s,a,k,j),s===1?(s=1,y===!0&&(s|=8)):s=0,y=ir(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Od(y),n}function hx(n,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:d==null?null:""+d,children:n,containerInfo:s,implementation:a}}function Sg(n){if(!n)return Mi;n=n._reactInternals;e:{if(Ln(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Pn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Pn(a))return Xp(n,a,s)}return s}function Ig(n,s,a,d,f,y,x,k,j){return n=Sh(a,d,!0,n,f,y,x,k,j),n.context=Sg(null),a=n.current,d=Tn(),f=Hi(a),y=hi(d,f),y.callback=s??null,zi(a,y,f),n.current.lanes=f,ki(n,f,d),bn(n,d),n}function Fu(n,s,a,d){var f=s.current,y=Tn(),x=Hi(f);return a=Sg(a),s.context===null?s.context=a:s.pendingContext=a,s=hi(y,x),s.payload={element:n},d=d===void 0?null:d,d!==null&&(s.callback=d),n=zi(f,s,x),n!==null&&(Ir(n,f,x,y),gu(n,f,x)),x}function Uu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Ih(n,s){Cg(n,s),(n=n.alternate)&&Cg(n,s)}function fx(){return null}var Rg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ch(n){this._internalRoot=n}zu.prototype.render=Ch.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Fu(n,s,null,null)},zu.prototype.unmount=Ch.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Us(function(){Fu(null,n,null,null)}),s[ai]=null}};function zu(n){this._internalRoot=n}zu.prototype.unstable_scheduleHydration=function(n){if(n){var s=zl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Dr.length&&s!==0&&s<Dr[a].priority;a++);Dr.splice(a,0,n),a===0&&Wl(n)}};function Rh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Pg(){}function px(n,s,a,d,f){if(f){if(typeof d=="function"){var y=d;d=function(){var K=Uu(x);y.call(K)}}var x=Ig(s,d,n,0,null,!1,!1,"",Pg);return n._reactRootContainer=x,n[ai]=x.current,ba(n.nodeType===8?n.parentNode:n),Us(),x}for(;f=n.lastChild;)n.removeChild(f);if(typeof d=="function"){var k=d;d=function(){var K=Uu(j);k.call(K)}}var j=Sh(n,0,!1,null,null,!1,!1,"",Pg);return n._reactRootContainer=j,n[ai]=j.current,ba(n.nodeType===8?n.parentNode:n),Us(function(){Fu(s,j,a,d)}),j}function $u(n,s,a,d,f){var y=a._reactRootContainer;if(y){var x=y;if(typeof f=="function"){var k=f;f=function(){var j=Uu(x);k.call(j)}}Fu(s,x,n,f)}else x=px(a,s,n,f,d);return Uu(x)}Fl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ri(s.pendingLanes);a!==0&&(Ai(s,a|1),bn(s,ct()),(et&6)===0&&(Mo=ct()+500,Fi()))}break;case 13:Us(function(){var d=di(n,1);if(d!==null){var f=Tn();Ir(d,n,1,f)}}),Ih(n,1)}},lo=function(n){if(n.tag===13){var s=di(n,134217728);if(s!==null){var a=Tn();Ir(s,n,134217728,a)}Ih(n,134217728)}},Ul=function(n){if(n.tag===13){var s=Hi(n),a=di(n,s);if(a!==null){var d=Tn();Ir(a,n,s,d)}Ih(n,s)}},zl=function(){return Je},Bl=function(n,s){var a=Je;try{return Je=n,s()}finally{Je=a}},oe=function(n,s,a){switch(s){case"input":if(yn(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==n&&d.form===n.form){var f=ou(d);if(!f)throw Error(t(90));Qt(d),yn(d,f)}}}break;case"textarea":cr(n,a);break;case"select":s=a.value,s!=null&&_t(n,!!a.multiple,s,!1)}},we=vh,He=Us;var mx={usingClientEntryPoint:!1,Events:[Da,Io,ou,L,q,vh]},Ka={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gx={bundleType:Ka.bundleType,version:Ka.version,rendererPackageName:Ka.rendererPackageName,rendererConfig:Ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ma(n),n===null?null:n.stateNode},findFiberByHostInstance:Ka.findFiberByHostInstance||fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{Is=Wu.inject(gx),On=Wu}catch{}}return Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx,Nn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rh(s))throw Error(t(200));return hx(n,s,null,a)},Nn.createRoot=function(n,s){if(!Rh(n))throw Error(t(299));var a=!1,d="",f=Rg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Sh(n,1,!1,null,null,a,!1,d,f),n[ai]=s.current,ba(n.nodeType===8?n.parentNode:n),new Ch(s)},Nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ma(s),n=n===null?null:n.stateNode,n},Nn.flushSync=function(n){return Us(n)},Nn.hydrate=function(n,s,a){if(!Bu(s))throw Error(t(200));return $u(null,n,s,!0,a)},Nn.hydrateRoot=function(n,s,a){if(!Rh(n))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,y="",x=Rg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),s=Ig(s,null,n,1,a??null,f,!1,y,x),n[ai]=s.current,ba(n),d)for(n=0;n<d.length;n++)a=d[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new zu(s)},Nn.render=function(n,s,a){if(!Bu(s))throw Error(t(200));return $u(null,n,s,!1,a)},Nn.unmountComponentAtNode=function(n){if(!Bu(n))throw Error(t(40));return n._reactRootContainer?(Us(function(){$u(null,null,n,!1,function(){n._reactRootContainer=null,n[ai]=null})}),!0):!1},Nn.unstable_batchedUpdates=vh,Nn.unstable_renderSubtreeIntoContainer=function(n,s,a,d){if(!Bu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return $u(n,s,a,!1,d)},Nn.version="18.3.1-next-f1338f8080-20240426",Nn}var Lg;function Rv(){if(Lg)return Ah.exports;Lg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ah.exports=Ix(),Ah.exports}var Og;function Cx(){if(Og)return Hu;Og=1;var r=Rv();return Hu.createRoot=r.createRoot,Hu.hydrateRoot=r.hydrateRoot,Hu}var Rx=Cx();const Px=Iv(Rx);Rv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ul.apply(this,arguments)}var es;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(es||(es={}));const Mg="popstate";function kx(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:h,hash:p}=i.location;return qh("",{pathname:l,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:hc(o)}return bx(e,t,null,r)}function Rt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Sf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ax(){return Math.random().toString(36).substr(2,8)}function Fg(r,e){return{usr:r.state,key:r.key,idx:e}}function qh(r,e,t,i){return t===void 0&&(t=null),ul({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?sa(e):e,{state:t,key:e&&e.key||i||Ax()})}function hc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function sa(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function bx(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,p=es.Pop,m=null,v=w();v==null&&(v=0,h.replaceState(ul({},h.state,{idx:v}),""));function w(){return(h.state||{idx:null}).idx}function T(){p=es.Pop;let V=w(),te=V==null?null:V-v;v=V,m&&m({action:p,location:X.location,delta:te})}function I(V,te){p=es.Push;let pe=qh(X.location,V,te);v=w()+1;let de=Fg(pe,v),re=X.createHref(pe);try{h.pushState(de,"",re)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(re)}l&&m&&m({action:p,location:X.location,delta:1})}function F(V,te){p=es.Replace;let pe=qh(X.location,V,te);v=w();let de=Fg(pe,v),re=X.createHref(pe);h.replaceState(de,"",re),l&&m&&m({action:p,location:X.location,delta:0})}function Q(V){let te=o.location.origin!=="null"?o.location.origin:o.location.href,pe=typeof V=="string"?V:hc(V);return pe=pe.replace(/ $/,"%20"),Rt(te,"No window.location.(origin|href) available to create URL for href: "+pe),new URL(pe,te)}let X={get action(){return p},get location(){return r(o,h)},listen(V){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Mg,T),m=V,()=>{o.removeEventListener(Mg,T),m=null}},createHref(V){return e(o,V)},createURL:Q,encodeLocation(V){let te=Q(V);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:I,replace:F,go(V){return h.go(V)}};return X}var Ug;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ug||(Ug={}));function Nx(r,e,t){return t===void 0&&(t="/"),jx(r,e,t)}function jx(r,e,t,i){let o=typeof e=="string"?sa(e):e,l=If(o.pathname||"/",t);if(l==null)return null;let h=Pv(r);Dx(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let v=qx(l);p=$x(h[m],v)}return p}function Pv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(Rt(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let v=rs([i,m.relativePath]),w=t.concat(m);l.children&&l.children.length>0&&(Rt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Pv(l.children,e,w,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:zx(v,l.index),routesMeta:w})};return r.forEach((l,h)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,h);else for(let m of kv(l.path))o(l,h,m)}),e}function kv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=kv(i.join("/")),p=[];return p.push(...h.map(m=>m===""?l:[l,m].join("/"))),o&&p.push(...h),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function Dx(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Bx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const Vx=/^:[\w-]+$/,Lx=3,Ox=2,Mx=1,Fx=10,Ux=-2,zg=r=>r==="*";function zx(r,e){let t=r.split("/"),i=t.length;return t.some(zg)&&(i+=Ux),e&&(i+=Ox),t.filter(o=>!zg(o)).reduce((o,l)=>o+(Vx.test(l)?Lx:l===""?Mx:Fx),i)}function Bx(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function $x(r,e,t){let{routesMeta:i}=r,o={},l="/",h=[];for(let p=0;p<i.length;++p){let m=i[p],v=p===i.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=Wx({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},w),I=m.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:rs([l,T.pathname]),pathnameBase:Jx(rs([l,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(l=rs([l,T.pathnameBase]))}return h}function Wx(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=Hx(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((v,w,T)=>{let{paramName:I,isOptional:F}=w;if(I==="*"){let X=p[T]||"";h=l.slice(0,l.length-X.length).replace(/(.)\/+$/,"$1")}const Q=p[T];return F&&!Q?v[I]=void 0:v[I]=(Q||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:r}}function Hx(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Sf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function qx(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function If(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const Gx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kx=r=>Gx.test(r);function Qx(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?sa(r):r,l;if(t)if(Kx(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Sf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Bg(t.substring(1),"/"):l=Bg(t,e)}else l=e;return{pathname:l,search:Xx(i),hash:Zx(o)}}function Bg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function jh(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Yx(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Cf(r,e){let t=Yx(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Rf(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=sa(r):(o=ul({},r),Rt(!o.pathname||!o.pathname.includes("?"),jh("?","pathname","search",o)),Rt(!o.pathname||!o.pathname.includes("#"),jh("#","pathname","hash",o)),Rt(!o.search||!o.search.includes("#"),jh("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,p;if(h==null)p=t;else{let T=e.length-1;if(!i&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),T-=1;o.pathname=I.join("/")}p=T>=0?e[T]:"/"}let m=Qx(o,p),v=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(v||w)&&(m.pathname+="/"),m}const rs=r=>r.join("/").replace(/\/\/+/g,"/"),Jx=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Xx=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Zx=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function eE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Av=["post","put","patch","delete"];new Set(Av);const tE=["get",...Av];new Set(tE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},cl.apply(this,arguments)}const Pf=z.createContext(null),nE=z.createContext(null),ys=z.createContext(null),jc=z.createContext(null),vs=z.createContext({outlet:null,matches:[],isDataRoute:!1}),bv=z.createContext(null);function rE(r,e){let{relative:t}=e===void 0?{}:e;oa()||Rt(!1);let{basename:i,navigator:o}=z.useContext(ys),{hash:l,pathname:h,search:p}=jv(r,{relative:t}),m=h;return i!=="/"&&(m=h==="/"?i:rs([i,h])),o.createHref({pathname:m,search:p,hash:l})}function oa(){return z.useContext(jc)!=null}function wl(){return oa()||Rt(!1),z.useContext(jc).location}function Nv(r){z.useContext(ys).static||z.useLayoutEffect(r)}function Dc(){let{isDataRoute:r}=z.useContext(vs);return r?gE():iE()}function iE(){oa()||Rt(!1);let r=z.useContext(Pf),{basename:e,future:t,navigator:i}=z.useContext(ys),{matches:o}=z.useContext(vs),{pathname:l}=wl(),h=JSON.stringify(Cf(o,t.v7_relativeSplatPath)),p=z.useRef(!1);return Nv(()=>{p.current=!0}),z.useCallback(function(v,w){if(w===void 0&&(w={}),!p.current)return;if(typeof v=="number"){i.go(v);return}let T=Rf(v,JSON.parse(h),l,w.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:rs([e,T.pathname])),(w.replace?i.replace:i.push)(T,w.state,w)},[e,i,h,l,r])}function jv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=z.useContext(ys),{matches:o}=z.useContext(vs),{pathname:l}=wl(),h=JSON.stringify(Cf(o,i.v7_relativeSplatPath));return z.useMemo(()=>Rf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function sE(r,e){return oE(r,e)}function oE(r,e,t,i){oa()||Rt(!1);let{navigator:o}=z.useContext(ys),{matches:l}=z.useContext(vs),h=l[l.length-1],p=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let v=wl(),w;if(e){var T;let V=typeof e=="string"?sa(e):e;m==="/"||(T=V.pathname)!=null&&T.startsWith(m)||Rt(!1),w=V}else w=v;let I=w.pathname||"/",F=I;if(m!=="/"){let V=m.replace(/^\//,"").split("/");F="/"+I.replace(/^\//,"").split("/").slice(V.length).join("/")}let Q=Nx(r,{pathname:F}),X=dE(Q&&Q.map(V=>Object.assign({},V,{params:Object.assign({},p,V.params),pathname:rs([m,o.encodeLocation?o.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?m:rs([m,o.encodeLocation?o.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),l,t,i);return e&&X?z.createElement(jc.Provider,{value:{location:cl({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:es.Pop}},X):X}function aE(){let r=mE(),e=eE(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:o},t):null,null)}const lE=z.createElement(aE,null);class uE extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(vs.Provider,{value:this.props.routeContext},z.createElement(bv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cE(r){let{routeContext:e,match:t,children:i}=r,o=z.useContext(Pf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(vs.Provider,{value:e},i)}function dE(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let w=h.findIndex(T=>T.route.id&&(p==null?void 0:p[T.route.id])!==void 0);w>=0||Rt(!1),h=h.slice(0,Math.min(h.length,w+1))}let m=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let w=0;w<h.length;w++){let T=h[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(v=w),T.route.id){let{loaderData:I,errors:F}=t,Q=T.route.loader&&I[T.route.id]===void 0&&(!F||F[T.route.id]===void 0);if(T.route.lazy||Q){m=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((w,T,I)=>{let F,Q=!1,X=null,V=null;t&&(F=p&&T.route.id?p[T.route.id]:void 0,X=T.route.errorElement||lE,m&&(v<0&&I===0?(yE("route-fallback"),Q=!0,V=null):v===I&&(Q=!0,V=T.route.hydrateFallbackElement||null)));let te=e.concat(h.slice(0,I+1)),pe=()=>{let de;return F?de=X:Q?de=V:T.route.Component?de=z.createElement(T.route.Component,null):T.route.element?de=T.route.element:de=w,z.createElement(cE,{match:T,routeContext:{outlet:w,matches:te,isDataRoute:t!=null},children:de})};return t&&(T.route.ErrorBoundary||T.route.errorElement||I===0)?z.createElement(uE,{location:t.location,revalidation:t.revalidation,component:X,error:F,children:pe(),routeContext:{outlet:null,matches:te,isDataRoute:!0}}):pe()},null)}var Dv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Dv||{}),Vv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Vv||{});function hE(r){let e=z.useContext(Pf);return e||Rt(!1),e}function fE(r){let e=z.useContext(nE);return e||Rt(!1),e}function pE(r){let e=z.useContext(vs);return e||Rt(!1),e}function Lv(r){let e=pE(),t=e.matches[e.matches.length-1];return t.route.id||Rt(!1),t.route.id}function mE(){var r;let e=z.useContext(bv),t=fE(),i=Lv();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function gE(){let{router:r}=hE(Dv.UseNavigateStable),e=Lv(Vv.UseNavigateStable),t=z.useRef(!1);return Nv(()=>{t.current=!0}),z.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,cl({fromRouteId:e},l)))},[r,e])}const $g={};function yE(r,e,t){$g[r]||($g[r]=!0)}function vE(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function _E(r){let{to:e,replace:t,state:i,relative:o}=r;oa()||Rt(!1);let{future:l,static:h}=z.useContext(ys),{matches:p}=z.useContext(vs),{pathname:m}=wl(),v=Dc(),w=Rf(e,Cf(p,l.v7_relativeSplatPath),m,o==="path"),T=JSON.stringify(w);return z.useEffect(()=>v(JSON.parse(T),{replace:t,state:i,relative:o}),[v,T,o,t,i]),null}function Br(r){Rt(!1)}function wE(r){let{basename:e="/",children:t=null,location:i,navigationType:o=es.Pop,navigator:l,static:h=!1,future:p}=r;oa()&&Rt(!1);let m=e.replace(/^\/*/,"/"),v=z.useMemo(()=>({basename:m,navigator:l,static:h,future:cl({v7_relativeSplatPath:!1},p)}),[m,p,l,h]);typeof i=="string"&&(i=sa(i));let{pathname:w="/",search:T="",hash:I="",state:F=null,key:Q="default"}=i,X=z.useMemo(()=>{let V=If(w,m);return V==null?null:{location:{pathname:V,search:T,hash:I,state:F,key:Q},navigationType:o}},[m,w,T,I,F,Q,o]);return X==null?null:z.createElement(ys.Provider,{value:v},z.createElement(jc.Provider,{children:t,value:X}))}function xE(r){let{children:e,location:t}=r;return sE(Gh(e),t)}new Promise(()=>{});function Gh(r,e){e===void 0&&(e=[]);let t=[];return z.Children.forEach(r,(i,o)=>{if(!z.isValidElement(i))return;let l=[...e,o];if(i.type===z.Fragment){t.push.apply(t,Gh(i.props.children,l));return}i.type!==Br&&Rt(!1),!i.props.index||!i.props.children||Rt(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Gh(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kh(){return Kh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Kh.apply(this,arguments)}function EE(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function TE(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function SE(r,e){return r.button===0&&(!e||e==="_self")&&!TE(r)}const IE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CE="6";try{window.__reactRouterVersion=CE}catch{}const RE="startTransition",Wg=Ex[RE];function PE(r){let{basename:e,children:t,future:i,window:o}=r,l=z.useRef();l.current==null&&(l.current=kx({window:o,v5Compat:!0}));let h=l.current,[p,m]=z.useState({action:h.action,location:h.location}),{v7_startTransition:v}=i||{},w=z.useCallback(T=>{v&&Wg?Wg(()=>m(T)):m(T)},[m,v]);return z.useLayoutEffect(()=>h.listen(w),[h,w]),z.useEffect(()=>vE(i),[i]),z.createElement(wE,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:h,future:i})}const kE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uo=z.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:p,target:m,to:v,preventScrollReset:w,viewTransition:T}=e,I=EE(e,IE),{basename:F}=z.useContext(ys),Q,X=!1;if(typeof v=="string"&&AE.test(v)&&(Q=v,kE))try{let de=new URL(window.location.href),re=v.startsWith("//")?new URL(de.protocol+v):new URL(v),le=If(re.pathname,F);re.origin===de.origin&&le!=null?v=le+re.search+re.hash:X=!0}catch{}let V=rE(v,{relative:o}),te=bE(v,{replace:h,state:p,target:m,preventScrollReset:w,relative:o,viewTransition:T});function pe(de){i&&i(de),de.defaultPrevented||te(de)}return z.createElement("a",Kh({},I,{href:Q||V,onClick:X||l?i:pe,ref:t,target:m}))});var Hg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Hg||(Hg={}));var qg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(qg||(qg={}));function bE(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:p}=e===void 0?{}:e,m=Dc(),v=wl(),w=jv(r,{relative:h});return z.useCallback(T=>{if(SE(T,t)){T.preventDefault();let I=i!==void 0?i:hc(v)===hc(w);m(r,{replace:I,state:o,preventScrollReset:l,relative:h,viewTransition:p})}},[v,m,w,i,o,t,r,l,h,p])}const NE=()=>{};var Gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},jE=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],p=r[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Mv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,p=h?r[o+1]:0,m=o+2<r.length,v=m?r[o+2]:0,w=l>>2,T=(l&3)<<4|p>>4;let I=(p&15)<<2|v>>6,F=v&63;m||(F=64,h||(I=64)),i.push(t[w],t[T],t[I],t[F])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Ov(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):jE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||T==null)throw new DE;const I=l<<2|p>>4;if(i.push(I),v!==64){const F=p<<4&240|v>>2;if(i.push(F),T!==64){const Q=v<<6&192|T;i.push(Q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class DE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VE=function(r){const e=Ov(r);return Mv.encodeByteArray(e,!0)},fc=function(r){return VE(r).replace(/\./g,"")},Fv=function(r){try{return Mv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=()=>LE().__FIREBASE_DEFAULTS__,ME=()=>{if(typeof process>"u"||typeof Gg>"u")return;const r=Gg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},FE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Fv(r[1]);return e&&JSON.parse(e)},Vc=()=>{try{return NE()||OE()||ME()||FE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Uv=r=>{var e,t;return(t=(e=Vc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},UE=r=>{const e=Uv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},zv=()=>{var r;return(r=Vc())===null||r===void 0?void 0:r.config},Bv=r=>{var e;return(e=Vc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $v(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[fc(JSON.stringify(t)),fc(JSON.stringify(h)),""].join(".")}const rl={};function $E(){const r={prod:[],emulator:[]};for(const e of Object.keys(rl))rl[e]?r.emulator.push(e):r.prod.push(e);return r}function WE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Kg=!1;function Wv(r,e){if(typeof window>"u"||typeof document>"u"||!aa(window.location.host)||rl[r]===e||rl[r]||Kg)return;rl[r]=e;function t(I){return`__firebase__banner__${I}`}const i="__firebase__banner",l=$E().prod.length>0;function h(){const I=document.getElementById(i);I&&I.remove()}function p(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function m(I,F){I.setAttribute("width","24"),I.setAttribute("id",F),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function v(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Kg=!0,h()},I}function w(I,F){I.setAttribute("id",F),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function T(){const I=WE(i),F=t("text"),Q=document.getElementById(F)||document.createElement("span"),X=t("learnmore"),V=document.getElementById(X)||document.createElement("a"),te=t("preprendIcon"),pe=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const de=I.element;p(de),w(V,X);const re=v();m(pe,te),de.append(pe,Q,V,re),document.body.appendChild(de)}l?(Q.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function qE(){var r;const e=(r=Vc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function QE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YE(){const r=gn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function JE(){return!qE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XE(){try{return typeof indexedDB=="object"}catch{return!1}}function ZE(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="FirebaseError";class Ii extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=eT,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xl.prototype.create)}}class xl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?tT(l,i):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Ii(o,p,i)}}function tT(r,e){return r.replace(nT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const nT=/\{\$([^}]+)}/g;function rT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ks(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Qg(l)&&Qg(h)){if(!Ks(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Qg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ya(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ja(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function iT(r,e){const t=new sT(r,e);return t.subscribe.bind(t)}class sT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");oT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Dh),o.error===void 0&&(o.error=Dh),o.complete===void 0&&(o.complete=Dh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Dh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(r){return r&&r._delegate?r._delegate:r}class Qs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new zE;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uT(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lT(r){return r===Ws?void 0:r}function uT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ge||(Ge={}));const dT={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},hT=Ge.INFO,fT={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},pT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=fT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kf{constructor(e){this.name=e,this._logLevel=hT,this._logHandler=pT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const mT=(r,e)=>e.some(t=>r instanceof t);let Yg,Jg;function gT(){return Yg||(Yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yT(){return Jg||(Jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hv=new WeakMap,Qh=new WeakMap,qv=new WeakMap,Vh=new WeakMap,Af=new WeakMap;function vT(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(is(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Hv.set(t,r)}).catch(()=>{}),Af.set(e,r),e}function _T(r){if(Qh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Qh.set(r,e)}let Yh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Qh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||qv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return is(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function wT(r){Yh=r(Yh)}function xT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Lh(this),e,...t);return qv.set(i,e.sort?e.sort():[e]),is(i)}:yT().includes(r)?function(...e){return r.apply(Lh(this),e),is(Hv.get(this))}:function(...e){return is(r.apply(Lh(this),e))}}function ET(r){return typeof r=="function"?xT(r):(r instanceof IDBTransaction&&_T(r),mT(r,gT())?new Proxy(r,Yh):r)}function is(r){if(r instanceof IDBRequest)return vT(r);if(Vh.has(r))return Vh.get(r);const e=ET(r);return e!==r&&(Vh.set(r,e),Af.set(e,r)),e}const Lh=r=>Af.get(r);function TT(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),p=is(h);return i&&h.addEventListener("upgradeneeded",m=>{i(is(h.result),m.oldVersion,m.newVersion,is(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const ST=["get","getKey","getAll","getAllKeys","count"],IT=["put","add","delete","clear"],Oh=new Map;function Xg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Oh.get(e))return Oh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=IT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||ST.includes(t)))return;const l=async function(h,...p){const m=this.transaction(h,o?"readwrite":"readonly");let v=m.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&m.done]))[0]};return Oh.set(e,l),l}wT(r=>({...r,get:(e,t,i)=>Xg(e,t)||r.get(e,t,i),has:(e,t)=>!!Xg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function RT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jh="@firebase/app",Zg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new kf("@firebase/app"),PT="@firebase/app-compat",kT="@firebase/analytics-compat",AT="@firebase/analytics",bT="@firebase/app-check-compat",NT="@firebase/app-check",jT="@firebase/auth",DT="@firebase/auth-compat",VT="@firebase/database",LT="@firebase/data-connect",OT="@firebase/database-compat",MT="@firebase/functions",FT="@firebase/functions-compat",UT="@firebase/installations",zT="@firebase/installations-compat",BT="@firebase/messaging",$T="@firebase/messaging-compat",WT="@firebase/performance",HT="@firebase/performance-compat",qT="@firebase/remote-config",GT="@firebase/remote-config-compat",KT="@firebase/storage",QT="@firebase/storage-compat",YT="@firebase/firestore",JT="@firebase/ai",XT="@firebase/firestore-compat",ZT="firebase",eS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="[DEFAULT]",tS={[Jh]:"fire-core",[PT]:"fire-core-compat",[AT]:"fire-analytics",[kT]:"fire-analytics-compat",[NT]:"fire-app-check",[bT]:"fire-app-check-compat",[jT]:"fire-auth",[DT]:"fire-auth-compat",[VT]:"fire-rtdb",[LT]:"fire-data-connect",[OT]:"fire-rtdb-compat",[MT]:"fire-fn",[FT]:"fire-fn-compat",[UT]:"fire-iid",[zT]:"fire-iid-compat",[BT]:"fire-fcm",[$T]:"fire-fcm-compat",[WT]:"fire-perf",[HT]:"fire-perf-compat",[qT]:"fire-rc",[GT]:"fire-rc-compat",[KT]:"fire-gcs",[QT]:"fire-gcs-compat",[YT]:"fire-fst",[XT]:"fire-fst-compat",[JT]:"fire-vertex","fire-js":"fire-js",[ZT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new Map,nS=new Map,Zh=new Map;function ey(r,e){try{r.container.addComponent(e)}catch(t){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Zo(r){const e=r.name;if(Zh.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;Zh.set(e,r);for(const t of pc.values())ey(t,r);for(const t of nS.values())ey(t,r);return!0}function bf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Hn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new xl("app","Firebase",rS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=eS;function Gv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Xh,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw ss.create("bad-app-name",{appName:String(o)});if(t||(t=zv()),!t)throw ss.create("no-options");const l=pc.get(o);if(l){if(Ks(t,l.options)&&Ks(i,l.config))return l;throw ss.create("duplicate-app",{appName:o})}const h=new cT(o);for(const m of Zh.values())h.addComponent(m);const p=new iS(t,i,h);return pc.set(o,p),p}function Kv(r=Xh){const e=pc.get(r);if(!e&&r===Xh&&zv())return Gv();if(!e)throw ss.create("no-app",{appName:r});return e}function os(r,e,t){var i;let o=(i=tS[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(p.join(" "));return}Zo(new Qs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="firebase-heartbeat-database",oS=1,dl="firebase-heartbeat-store";let Mh=null;function Qv(){return Mh||(Mh=TT(sS,oS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(dl)}catch(t){console.warn(t)}}}}).catch(r=>{throw ss.create("idb-open",{originalErrorMessage:r.message})})),Mh}async function aS(r){try{const t=(await Qv()).transaction(dl),i=await t.objectStore(dl).get(Yv(r));return await t.done,i}catch(e){if(e instanceof Ii)wi.warn(e.message);else{const t=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(t.message)}}}async function ty(r,e){try{const i=(await Qv()).transaction(dl,"readwrite");await i.objectStore(dl).put(e,Yv(r)),await i.done}catch(t){if(t instanceof Ii)wi.warn(t.message);else{const i=ss.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});wi.warn(i.message)}}}function Yv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=1024,uS=30;class cS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ny();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>uS){const h=fS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){wi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ny(),{heartbeatsToSend:i,unsentEntries:o}=dS(this._heartbeatsCache.heartbeats),l=fc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return wi.warn(t),""}}}function ny(){return new Date().toISOString().substring(0,10)}function dS(r,e=lS){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),ry(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ry(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class hS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XE()?ZE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ty(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ty(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ry(r){return fc(JSON.stringify({version:2,heartbeats:r})).length}function fS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(r){Zo(new Qs("platform-logger",e=>new CT(e),"PRIVATE")),Zo(new Qs("heartbeat",e=>new cS(e),"PRIVATE")),os(Jh,Zg,r),os(Jh,Zg,"esm2017"),os("fire-js","")}pS("");var mS="firebase",gS="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os(mS,gS,"app");function Nf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Jv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yS=Jv,Xv=new xl("auth","Firebase",Jv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new kf("@firebase/auth");function vS(r,...e){mc.logLevel<=Ge.WARN&&mc.warn(`Auth (${la}): ${r}`,...e)}function nc(r,...e){mc.logLevel<=Ge.ERROR&&mc.error(`Auth (${la}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(r,...e){throw Df(r,...e)}function Rr(r,...e){return Df(r,...e)}function jf(r,e,t){const i=Object.assign(Object.assign({},yS()),{[e]:t});return new xl("auth","Firebase",i).create(e,{appName:r.name})}function vi(r){return jf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _S(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ar(r,"argument-error"),jf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Df(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Xv.create(r,...e)}function De(r,e,...t){if(!r)throw Df(e,...t)}function gi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw nc(e),new Error(e)}function xi(r,e){r||gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function wS(){return iy()==="http:"||iy()==="https:"}function iy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wS()||KE()||"connection"in navigator)?navigator.onLine:!0}function ES(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t){this.shortDelay=e,this.longDelay=t,xi(t>e,"Short delay should be less than long delay!"),this.isMobile=HE()||QE()}get(){return xS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(r,e){xi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IS=new Tl(3e4,6e4);function _s(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function ws(r,e,t,i,o={}){return e_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const p=El(Object.assign({key:r.config.apiKey},h)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:m},l);return GE()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&aa(r.emulatorConfig.host)&&(v.credentials="include"),Zv.fetch()(await t_(r,r.config.apiHost,t,p),v)})}async function e_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},TS),e);try{const o=new RS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw qu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[m,v]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(r,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw qu(r,"email-already-in-use",h);if(m==="USER_DISABLED")throw qu(r,"user-disabled",h);const w=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw jf(r,w,v);ar(r,w)}}catch(o){if(o instanceof Ii)throw o;ar(r,"network-request-failed",{message:String(o)})}}async function Sl(r,e,t,i,o={}){const l=await ws(r,e,t,i,o);return"mfaPendingCredential"in l&&ar(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function t_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?Vf(r.config,o):`${r.config.apiScheme}://${o}`;return SS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function CS(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Rr(this.auth,"network-request-failed")),IS.get())})}}function qu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Rr(r,e,i);return o.customData._tokenResponse=t,o}function sy(r){return r!==void 0&&r.enterprise!==void 0}class PS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return CS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kS(r,e){return ws(r,"GET","/v2/recaptchaConfig",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(r,e){return ws(r,"POST","/v1/accounts:delete",e)}async function gc(r,e){return ws(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bS(r,e=!1){const t=nn(r),i=await t.getIdToken(e),o=Lf(i);De(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:il(Fh(o.auth_time)),issuedAtTime:il(Fh(o.iat)),expirationTime:il(Fh(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Fh(r){return Number(r)*1e3}function Lf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return nc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Fv(t);return o?JSON.parse(o):(nc("Failed to decode base64 JWT payload"),null)}catch(o){return nc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function oy(r){const e=Lf(r);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ii&&NS(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function NS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=il(this.lastLoginAt),this.creationTime=il(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await hl(r,gc(t,{idToken:i}));De(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?n_(l.providerUserInfo):[],p=VS(r.providerData,h),m=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),w=m?v:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new tf(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,T)}async function DS(r){const e=nn(r);await yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VS(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function n_(r){return r.map(e=>{var{providerId:t}=e,i=Nf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(r,e){const t=await e_(r,{},async()=>{const i=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await t_(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:i};return r.emulatorConfig&&aa(r.emulatorConfig.host)&&(m.credentials="include"),Zv.fetch()(h,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function OS(r,e){return ws(r,"POST","/v2/accounts:revokeToken",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=oy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await LS(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Ko;return i&&(De(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(De(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(De(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(r,e){De(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Nf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new tf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await hl(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bS(this,e)}reload(){return DS(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await yc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await hl(this,AS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,p,m,v,w;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,F=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,Q=(h=t.photoURL)!==null&&h!==void 0?h:void 0,X=(p=t.tenantId)!==null&&p!==void 0?p:void 0,V=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,te=(v=t.createdAt)!==null&&v!==void 0?v:void 0,pe=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:de,emailVerified:re,isAnonymous:le,providerData:ue,stsTokenManager:b}=t;De(de&&b,e,"internal-error");const C=Ko.fromJSON(this.name,b);De(typeof de=="string",e,"internal-error"),Qi(T,e.name),Qi(I,e.name),De(typeof re=="boolean",e,"internal-error"),De(typeof le=="boolean",e,"internal-error"),Qi(F,e.name),Qi(Q,e.name),Qi(X,e.name),Qi(V,e.name),Qi(te,e.name),Qi(pe,e.name);const R=new Cr({uid:de,auth:e,email:I,emailVerified:re,displayName:T,isAnonymous:le,photoURL:Q,phoneNumber:F,tenantId:X,stsTokenManager:C,createdAt:te,lastLoginAt:pe});return ue&&Array.isArray(ue)&&(R.providerData=ue.map(P=>Object.assign({},P))),V&&(R._redirectEventId=V),R}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ko;o.updateFromServerResponse(t);const l=new Cr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await yc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];De(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?n_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Ko;p.updateFromIdToken(i);const m=new Cr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new tf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new Map;function yi(r){xi(r instanceof Function,"Expected a class definition");let e=ay.get(r);return e?(xi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ay.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}r_.type="NONE";const ly=r_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(r,e,t){return`firebase:${r}:${e}:${t}`}class Qo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=rc(this.userKey,o.apiKey,l),this.fullPersistenceKey=rc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gc(this.auth,{idToken:e}).catch(()=>{});return t?Cr._fromGetAccountInfoResponse(this.auth,t,e):null}return Cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Qo(yi(ly),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||yi(ly);const h=rc(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const w=await v._get(h);if(w){let T;if(typeof w=="string"){const I=await gc(e,{idToken:w}).catch(()=>{});if(!I)break;T=await Cr._fromGetAccountInfoResponse(e,I,w)}else T=Cr._fromJSON(e,w);v!==l&&(p=T),l=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Qo(l,e,i):(l=m[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Qo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(a_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u_(e))return"Blackberry";if(c_(e))return"Webos";if(s_(e))return"Safari";if((e.includes("chrome/")||o_(e))&&!e.includes("edge/"))return"Chrome";if(l_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function i_(r=gn()){return/firefox\//i.test(r)}function s_(r=gn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o_(r=gn()){return/crios\//i.test(r)}function a_(r=gn()){return/iemobile/i.test(r)}function l_(r=gn()){return/android/i.test(r)}function u_(r=gn()){return/blackberry/i.test(r)}function c_(r=gn()){return/webos/i.test(r)}function Of(r=gn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function MS(r=gn()){var e;return Of(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FS(){return YE()&&document.documentMode===10}function d_(r=gn()){return Of(r)||l_(r)||c_(r)||u_(r)||/windows phone/i.test(r)||a_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(r,e=[]){let t;switch(r){case"Browser":t=uy(gn());break;case"Worker":t=`${uy(gn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${la}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,p)=>{try{const m=e(l);h(m)}catch(m){p(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(r,e={}){return ws(r,"GET","/v2/passwordPolicy",_s(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=6;class $S{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:BS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cy(this),this.idTokenSubscription=new cy(this),this.beforeStateQueue=new US(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gc(this,{idToken:e}),i=await Cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Hn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===p)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ES()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(vi(this));const t=e?nn(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zS(this),t=new $S(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await OS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yi(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&vS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xs(r){return nn(r)}class cy{constructor(e){this.auth=e,this.observer=null,this.addObserver=iT(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HS(r){Lc=r}function f_(r){return Lc.loadJS(r)}function qS(){return Lc.recaptchaEnterpriseScript}function GS(){return Lc.gapiScript}function KS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class QS{constructor(){this.enterprise=new YS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class YS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const JS="recaptcha-enterprise",p_="NO_RECAPTCHA";class XS{constructor(e){this.type=JS,this.auth=xs(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,p)=>{kS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new PS(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(m=>{p(m)})})}function o(l,h,p){const m=window.grecaptcha;sy(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(p_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QS().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(p=>{if(!t&&sy(window.grecaptcha))o(p,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=qS();m.length!==0&&(m+=p),f_(m).then(()=>{o(p,l,h)}).catch(v=>{h(v)})}}).catch(p=>{h(p)})})}}async function dy(r,e,t,i=!1,o=!1){const l=new XS(r);let h;if(o)h=p_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function nf(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await dy(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await dy(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r,e){const t=bf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ks(l,e??{}))return o;ar(o,"already-initialized")}return t.initialize({options:e})}function e1(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(yi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function t1(r,e,t){const i=xs(r);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=m_(e),{host:h,port:p}=n1(e),m=p===null?"":`:${p}`,v={url:`${l}//${h}${m}/`},w=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Ks(v,i.config.emulator)&&Ks(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,aa(h)?($v(`${l}//${h}${m}`),Wv("Auth",!0)):r1()}function m_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function n1(r){const e=m_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:hy(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:hy(h)}}}function hy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function r1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,t){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}async function i1(r,e){return ws(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(r,e){return Sl(r,"POST","/v1/accounts:signInWithPassword",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(r,e){return Sl(r,"POST","/v1/accounts:signInWithEmailLink",_s(r,e))}async function a1(r,e){return Sl(r,"POST","/v1/accounts:signInWithEmailLink",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Mf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new fl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new fl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nf(e,t,"signInWithPassword",s1);case"emailLink":return o1(e,{email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nf(e,i,"signUpPassword",i1);case"emailLink":return a1(e,{idToken:t,email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(r,e){return Sl(r,"POST","/v1/accounts:signInWithIdp",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="http://localhost";class Ys extends Mf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Nf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new Ys(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Yo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Yo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yo(e,t)}buildRequest(){const e={requestUri:l1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=El(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function c1(r){const e=Ya(Ja(r)).link,t=e?Ya(Ja(e)).deep_link_id:null,i=Ya(Ja(r)).deep_link_id;return(i?Ya(Ja(i)).link:null)||i||t||e||r}class Ff{constructor(e){var t,i,o,l,h,p;const m=Ya(Ja(e)),v=(t=m.apiKey)!==null&&t!==void 0?t:null,w=(i=m.oobCode)!==null&&i!==void 0?i:null,T=u1((o=m.mode)!==null&&o!==void 0?o:null);De(v&&w&&T,"argument-error"),this.apiKey=v,this.operation=T,this.code=w,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=m.lang)!==null&&h!==void 0?h:null,this.tenantId=(p=m.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=c1(e);try{return new Ff(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.providerId=ua.PROVIDER_ID}static credential(e,t){return fl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ff.parseLink(t);return De(i,"argument-error"),fl._fromEmailAndCode(e,i.code,i.tenantId)}}ua.PROVIDER_ID="password";ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends Uf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Il{constructor(){super("facebook.com")}static credential(e){return Ys._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Il{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ys._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Wr.credential(t,i)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Il{constructor(){super("github.com")}static credential(e){return Ys._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Il{constructor(){super("twitter.com")}static credential(e,t){return Ys._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Xi.credential(t,i)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(r,e){return Sl(r,"POST","/v1/accounts:signUp",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Cr._fromIdTokenResponse(e,i,o),h=fy(i);return new Js({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=fy(i);return new Js({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function fy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Ii{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,vc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new vc(e,t,i,o)}}function g_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?vc._fromErrorAndOperation(r,l,e,i):l})}async function h1(r,e,t=!1){const i=await hl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Js._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(r,e,t=!1){const{auth:i}=r;if(Hn(i.app))return Promise.reject(vi(i));const o="reauthenticate";try{const l=await hl(r,g_(i,o,e,r),t);De(l.idToken,i,"internal-error");const h=Lf(l.idToken);De(h,i,"internal-error");const{sub:p}=h;return De(r.uid===p,i,"user-mismatch"),Js._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ar(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y_(r,e,t=!1){if(Hn(r.app))return Promise.reject(vi(r));const i="signIn",o=await g_(r,i,e),l=await Js._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function p1(r,e){return y_(xs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v_(r){const e=xs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function m1(r,e,t){if(Hn(r.app))return Promise.reject(vi(r));const i=xs(r),h=await nf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",d1).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&v_(r),m}),p=await Js._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function __(r,e,t){return Hn(r.app)?Promise.reject(vi(r)):p1(nn(r),ua.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&v_(r),i})}function g1(r,e,t,i){return nn(r).onIdTokenChanged(e,t,i)}function y1(r,e,t){return nn(r).beforeAuthStateChanged(e,t)}function v1(r,e,t,i){return nn(r).onAuthStateChanged(e,t,i)}function w_(r){return nn(r).signOut()}const _c="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_c,"1"),this.storage.removeItem(_c),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=1e3,w1=10;class E_ extends x_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);FS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,w1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},_1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}E_.type="LOCAL";const x1=E_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends x_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}T_.type="SESSION";const S_=T_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Oc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(h).map(async v=>v(t.origin,l)),m=await E1(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,m)=>{const v=zf("",20);o.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===v)switch(I.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(I.data.response);break;default:clearTimeout(w),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return window}function S1(r){Hr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(){return typeof Hr().WorkerGlobalScope<"u"&&typeof Hr().importScripts=="function"}async function I1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function R1(){return I_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="firebaseLocalStorageDb",P1=1,wc="firebaseLocalStorage",R_="fbase_key";class Cl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mc(r,e){return r.transaction([wc],e?"readwrite":"readonly").objectStore(wc)}function k1(){const r=indexedDB.deleteDatabase(C_);return new Cl(r).toPromise()}function rf(){const r=indexedDB.open(C_,P1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(wc,{keyPath:R_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(wc)?e(i):(i.close(),await k1(),e(await rf()))})})}async function py(r,e,t){const i=Mc(r,!0).put({[R_]:e,value:t});return new Cl(i).toPromise()}async function A1(r,e){const t=Mc(r,!1).get(e),i=await new Cl(t).toPromise();return i===void 0?null:i.value}function my(r,e){const t=Mc(r,!0).delete(e);return new Cl(t).toPromise()}const b1=800,N1=3;class P_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>N1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oc._getInstance(R1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await I1(),!this.activeServiceWorker)return;this.sender=new T1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||C1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rf();return await py(e,_c,"1"),await my(e,_c),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>py(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>A1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>my(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Mc(o,!1).getAll();return new Cl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}P_.type="LOCAL";const j1=P_;new Tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(r,e){return e?yi(e):(De(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Mf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function D1(r){return y_(r.auth,new Bf(r),r.bypassAuthState)}function V1(r){const{auth:e,user:t}=r;return De(t,e,"internal-error"),f1(t,new Bf(r),r.bypassAuthState)}async function L1(r){const{auth:e,user:t}=r;return De(t,e,"internal-error"),h1(t,new Bf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D1;case"linkViaPopup":case"linkViaRedirect":return L1;case"reauthViaPopup":case"reauthViaRedirect":return V1;default:ar(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=new Tl(2e3,1e4);async function b_(r,e,t){if(Hn(r.app))return Promise.reject(Rr(r,"operation-not-supported-in-this-environment"));const i=xs(r);_S(r,e,Uf);const o=k_(i,t);return new Hs(i,"signInViaPopup",e,o).executeNotNull()}class Hs extends A_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Hs.currentPopupAction&&Hs.currentPopupAction.cancel(),Hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=zf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O1.get())};e()}}Hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="pendingRedirect",ic=new Map;class F1 extends A_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ic.get(this.auth._key());if(!e){try{const i=await U1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ic.set(this.auth._key(),e)}return this.bypassAuthState||ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U1(r,e){const t=$1(e),i=B1(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function z1(r,e){ic.set(r._key(),e)}function B1(r){return yi(r._redirectPersistence)}function $1(r){return rc(M1,r.config.apiKey,r.name)}async function W1(r,e,t=!1){if(Hn(r.app))return Promise.reject(vi(r));const i=xs(r),o=k_(i,e),h=await new F1(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=600*1e3;class q1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!N_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Rr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H1&&this.cachedEventUids.clear(),this.cachedEventUids.has(gy(e))}saveEventToCache(e){this.cachedEventUids.add(gy(e)),this.lastProcessedEventTime=Date.now()}}function gy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function N_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function G1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(r,e={}){return ws(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y1=/^https?/;async function J1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await K1(r);for(const t of e)try{if(X1(t))return}catch{}ar(r,"unauthorized-domain")}function X1(r){const e=ef(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!Y1.test(t))return!1;if(Q1.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new Tl(3e4,6e4);function yy(){const r=Hr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function eI(r){return new Promise((e,t)=>{var i,o,l;function h(){yy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yy(),t(Rr(r,"network-request-failed"))},timeout:Z1.get()})}if(!((o=(i=Hr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Hr().gapi)===null||l===void 0)&&l.load)h();else{const p=KS("iframefcb");return Hr()[p]=()=>{gapi.load?h():t(Rr(r,"network-request-failed"))},f_(`${GS()}?onload=${p}`).catch(m=>t(m))}}).catch(e=>{throw sc=null,e})}let sc=null;function tI(r){return sc=sc||eI(r),sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new Tl(5e3,15e3),rI="__/auth/iframe",iI="emulator/auth/iframe",sI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aI(r){const e=r.config;De(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Vf(e,iI):`https://${r.config.authDomain}/${rI}`,i={apiKey:e.apiKey,appName:r.name,v:la},o=oI.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${El(i).slice(1)}`}async function lI(r){const e=await tI(r),t=Hr().gapi;return De(t,r,"internal-error"),e.open({where:document.body,url:aI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sI,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Rr(r,"network-request-failed"),p=Hr().setTimeout(()=>{l(h)},nI.get());function m(){Hr().clearTimeout(p),o(i)}i.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cI=500,dI=600,hI="_blank",fI="http://localhost";class vy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pI(r,e,t,i=cI,o=dI){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const m=Object.assign(Object.assign({},uI),{width:i.toString(),height:o.toString(),top:l,left:h}),v=gn().toLowerCase();t&&(p=o_(v)?hI:t),i_(v)&&(e=e||fI,m.scrollbars="yes");const w=Object.entries(m).reduce((I,[F,Q])=>`${I}${F}=${Q},`,"");if(MS(v)&&p!=="_self")return mI(e||"",p),new vy(null);const T=window.open(e||"",p,w);De(T,r,"popup-blocked");try{T.focus()}catch{}return new vy(T)}function mI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="__/auth/handler",yI="emulator/auth/handler",vI=encodeURIComponent("fac");async function _y(r,e,t,i,o,l){De(r.config.authDomain,r,"auth-domain-config-required"),De(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:la,eventId:o};if(e instanceof Uf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",rT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof Il){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const m=await r._getAppCheckToken(),v=m?`#${vI}=${encodeURIComponent(m)}`:"";return`${_I(r)}?${El(p).slice(1)}${v}`}function _I({config:r}){return r.emulator?Vf(r,yI):`https://${r.authDomain}/${gI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="webStorageSupport";class wI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S_,this._completeRedirectFn=W1,this._overrideRedirectResult=z1}async _openPopup(e,t,i,o){var l;xi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await _y(e,t,i,ef(),o);return pI(e,h,zf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await _y(e,t,i,ef(),o);return S1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(xi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await lI(e),i=new q1(e);return t.register("authEvent",o=>(De(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Uh,{type:Uh},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Uh];h!==void 0&&t(!!h),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=J1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return d_()||s_()||Of()}}const xI=wI;var wy="@firebase/auth",xy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SI(r){Zo(new Qs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;De(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h_(r)},v=new WS(i,o,l,m);return e1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Zo(new Qs("auth-internal",e=>{const t=xs(e.getProvider("auth").getImmediate());return(i=>new EI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),os(wy,xy,TI(r)),os(wy,xy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=300,CI=Bv("authIdTokenMaxAge")||II;let Ey=null;const RI=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>CI)return;const o=t==null?void 0:t.token;Ey!==o&&(Ey=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function PI(r=Kv()){const e=bf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=ZS(r,{popupRedirectResolver:xI,persistence:[j1,x1,S_]}),i=Bv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=RI(l.toString());y1(t,h,()=>h(t.currentUser)),g1(t,p=>h(p))}}const o=Uv("auth");return o&&t1(t,`http://${o}`),t}function kI(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}HS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Rr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",kI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SI("Browser");var Ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,j_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,C){function R(){}R.prototype=C.prototype,b.D=C.prototype,b.prototype=new R,b.prototype.constructor=b,b.C=function(P,D,N){for(var A=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)A[Y-2]=arguments[Y];return C.prototype[D].apply(P,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,C,R){R||(R=0);var P=Array(16);if(typeof C=="string")for(var D=0;16>D;++D)P[D]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(D=0;16>D;++D)P[D]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=b.g[0],R=b.g[1],D=b.g[2];var N=b.g[3],A=C+(N^R&(D^N))+P[0]+3614090360&4294967295;C=R+(A<<7&4294967295|A>>>25),A=N+(D^C&(R^D))+P[1]+3905402710&4294967295,N=C+(A<<12&4294967295|A>>>20),A=D+(R^N&(C^R))+P[2]+606105819&4294967295,D=N+(A<<17&4294967295|A>>>15),A=R+(C^D&(N^C))+P[3]+3250441966&4294967295,R=D+(A<<22&4294967295|A>>>10),A=C+(N^R&(D^N))+P[4]+4118548399&4294967295,C=R+(A<<7&4294967295|A>>>25),A=N+(D^C&(R^D))+P[5]+1200080426&4294967295,N=C+(A<<12&4294967295|A>>>20),A=D+(R^N&(C^R))+P[6]+2821735955&4294967295,D=N+(A<<17&4294967295|A>>>15),A=R+(C^D&(N^C))+P[7]+4249261313&4294967295,R=D+(A<<22&4294967295|A>>>10),A=C+(N^R&(D^N))+P[8]+1770035416&4294967295,C=R+(A<<7&4294967295|A>>>25),A=N+(D^C&(R^D))+P[9]+2336552879&4294967295,N=C+(A<<12&4294967295|A>>>20),A=D+(R^N&(C^R))+P[10]+4294925233&4294967295,D=N+(A<<17&4294967295|A>>>15),A=R+(C^D&(N^C))+P[11]+2304563134&4294967295,R=D+(A<<22&4294967295|A>>>10),A=C+(N^R&(D^N))+P[12]+1804603682&4294967295,C=R+(A<<7&4294967295|A>>>25),A=N+(D^C&(R^D))+P[13]+4254626195&4294967295,N=C+(A<<12&4294967295|A>>>20),A=D+(R^N&(C^R))+P[14]+2792965006&4294967295,D=N+(A<<17&4294967295|A>>>15),A=R+(C^D&(N^C))+P[15]+1236535329&4294967295,R=D+(A<<22&4294967295|A>>>10),A=C+(D^N&(R^D))+P[1]+4129170786&4294967295,C=R+(A<<5&4294967295|A>>>27),A=N+(R^D&(C^R))+P[6]+3225465664&4294967295,N=C+(A<<9&4294967295|A>>>23),A=D+(C^R&(N^C))+P[11]+643717713&4294967295,D=N+(A<<14&4294967295|A>>>18),A=R+(N^C&(D^N))+P[0]+3921069994&4294967295,R=D+(A<<20&4294967295|A>>>12),A=C+(D^N&(R^D))+P[5]+3593408605&4294967295,C=R+(A<<5&4294967295|A>>>27),A=N+(R^D&(C^R))+P[10]+38016083&4294967295,N=C+(A<<9&4294967295|A>>>23),A=D+(C^R&(N^C))+P[15]+3634488961&4294967295,D=N+(A<<14&4294967295|A>>>18),A=R+(N^C&(D^N))+P[4]+3889429448&4294967295,R=D+(A<<20&4294967295|A>>>12),A=C+(D^N&(R^D))+P[9]+568446438&4294967295,C=R+(A<<5&4294967295|A>>>27),A=N+(R^D&(C^R))+P[14]+3275163606&4294967295,N=C+(A<<9&4294967295|A>>>23),A=D+(C^R&(N^C))+P[3]+4107603335&4294967295,D=N+(A<<14&4294967295|A>>>18),A=R+(N^C&(D^N))+P[8]+1163531501&4294967295,R=D+(A<<20&4294967295|A>>>12),A=C+(D^N&(R^D))+P[13]+2850285829&4294967295,C=R+(A<<5&4294967295|A>>>27),A=N+(R^D&(C^R))+P[2]+4243563512&4294967295,N=C+(A<<9&4294967295|A>>>23),A=D+(C^R&(N^C))+P[7]+1735328473&4294967295,D=N+(A<<14&4294967295|A>>>18),A=R+(N^C&(D^N))+P[12]+2368359562&4294967295,R=D+(A<<20&4294967295|A>>>12),A=C+(R^D^N)+P[5]+4294588738&4294967295,C=R+(A<<4&4294967295|A>>>28),A=N+(C^R^D)+P[8]+2272392833&4294967295,N=C+(A<<11&4294967295|A>>>21),A=D+(N^C^R)+P[11]+1839030562&4294967295,D=N+(A<<16&4294967295|A>>>16),A=R+(D^N^C)+P[14]+4259657740&4294967295,R=D+(A<<23&4294967295|A>>>9),A=C+(R^D^N)+P[1]+2763975236&4294967295,C=R+(A<<4&4294967295|A>>>28),A=N+(C^R^D)+P[4]+1272893353&4294967295,N=C+(A<<11&4294967295|A>>>21),A=D+(N^C^R)+P[7]+4139469664&4294967295,D=N+(A<<16&4294967295|A>>>16),A=R+(D^N^C)+P[10]+3200236656&4294967295,R=D+(A<<23&4294967295|A>>>9),A=C+(R^D^N)+P[13]+681279174&4294967295,C=R+(A<<4&4294967295|A>>>28),A=N+(C^R^D)+P[0]+3936430074&4294967295,N=C+(A<<11&4294967295|A>>>21),A=D+(N^C^R)+P[3]+3572445317&4294967295,D=N+(A<<16&4294967295|A>>>16),A=R+(D^N^C)+P[6]+76029189&4294967295,R=D+(A<<23&4294967295|A>>>9),A=C+(R^D^N)+P[9]+3654602809&4294967295,C=R+(A<<4&4294967295|A>>>28),A=N+(C^R^D)+P[12]+3873151461&4294967295,N=C+(A<<11&4294967295|A>>>21),A=D+(N^C^R)+P[15]+530742520&4294967295,D=N+(A<<16&4294967295|A>>>16),A=R+(D^N^C)+P[2]+3299628645&4294967295,R=D+(A<<23&4294967295|A>>>9),A=C+(D^(R|~N))+P[0]+4096336452&4294967295,C=R+(A<<6&4294967295|A>>>26),A=N+(R^(C|~D))+P[7]+1126891415&4294967295,N=C+(A<<10&4294967295|A>>>22),A=D+(C^(N|~R))+P[14]+2878612391&4294967295,D=N+(A<<15&4294967295|A>>>17),A=R+(N^(D|~C))+P[5]+4237533241&4294967295,R=D+(A<<21&4294967295|A>>>11),A=C+(D^(R|~N))+P[12]+1700485571&4294967295,C=R+(A<<6&4294967295|A>>>26),A=N+(R^(C|~D))+P[3]+2399980690&4294967295,N=C+(A<<10&4294967295|A>>>22),A=D+(C^(N|~R))+P[10]+4293915773&4294967295,D=N+(A<<15&4294967295|A>>>17),A=R+(N^(D|~C))+P[1]+2240044497&4294967295,R=D+(A<<21&4294967295|A>>>11),A=C+(D^(R|~N))+P[8]+1873313359&4294967295,C=R+(A<<6&4294967295|A>>>26),A=N+(R^(C|~D))+P[15]+4264355552&4294967295,N=C+(A<<10&4294967295|A>>>22),A=D+(C^(N|~R))+P[6]+2734768916&4294967295,D=N+(A<<15&4294967295|A>>>17),A=R+(N^(D|~C))+P[13]+1309151649&4294967295,R=D+(A<<21&4294967295|A>>>11),A=C+(D^(R|~N))+P[4]+4149444226&4294967295,C=R+(A<<6&4294967295|A>>>26),A=N+(R^(C|~D))+P[11]+3174756917&4294967295,N=C+(A<<10&4294967295|A>>>22),A=D+(C^(N|~R))+P[2]+718787259&4294967295,D=N+(A<<15&4294967295|A>>>17),A=R+(N^(D|~C))+P[9]+3951481745&4294967295,b.g[0]=b.g[0]+C&4294967295,b.g[1]=b.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+N&4294967295}i.prototype.u=function(b,C){C===void 0&&(C=b.length);for(var R=C-this.blockSize,P=this.B,D=this.h,N=0;N<C;){if(D==0)for(;N<=R;)o(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<C;)if(P[D++]=b.charCodeAt(N++),D==this.blockSize){o(this,P),D=0;break}}else for(;N<C;)if(P[D++]=b[N++],D==this.blockSize){o(this,P),D=0;break}}this.h=D,this.o+=C},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var C=1;C<b.length-8;++C)b[C]=0;var R=8*this.o;for(C=b.length-8;C<b.length;++C)b[C]=R&255,R/=256;for(this.u(b),b=Array(16),C=R=0;4>C;++C)for(var P=0;32>P;P+=8)b[R++]=this.g[C]>>>P&255;return b};function l(b,C){var R=p;return Object.prototype.hasOwnProperty.call(R,b)?R[b]:R[b]=C(b)}function h(b,C){this.h=C;for(var R=[],P=!0,D=b.length-1;0<=D;D--){var N=b[D]|0;P&&N==C||(R[D]=N,P=!1)}this.g=R}var p={};function m(b){return-128<=b&&128>b?l(b,function(C){return new h([C|0],0>C?-1:0)}):new h([b|0],0>b?-1:0)}function v(b){if(isNaN(b)||!isFinite(b))return T;if(0>b)return V(v(-b));for(var C=[],R=1,P=0;b>=R;P++)C[P]=b/R|0,R*=4294967296;return new h(C,0)}function w(b,C){if(b.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b.charAt(0)=="-")return V(w(b.substring(1),C));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(C,8)),P=T,D=0;D<b.length;D+=8){var N=Math.min(8,b.length-D),A=parseInt(b.substring(D,D+N),C);8>N?(N=v(Math.pow(C,N)),P=P.j(N).add(v(A))):(P=P.j(R),P=P.add(v(A)))}return P}var T=m(0),I=m(1),F=m(16777216);r=h.prototype,r.m=function(){if(X(this))return-V(this).m();for(var b=0,C=1,R=0;R<this.g.length;R++){var P=this.i(R);b+=(0<=P?P:4294967296+P)*C,C*=4294967296}return b},r.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(Q(this))return"0";if(X(this))return"-"+V(this).toString(b);for(var C=v(Math.pow(b,6)),R=this,P="";;){var D=re(R,C).g;R=te(R,D.j(C));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(b);if(R=D,Q(R))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},r.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function Q(b){if(b.h!=0)return!1;for(var C=0;C<b.g.length;C++)if(b.g[C]!=0)return!1;return!0}function X(b){return b.h==-1}r.l=function(b){return b=te(this,b),X(b)?-1:Q(b)?0:1};function V(b){for(var C=b.g.length,R=[],P=0;P<C;P++)R[P]=~b.g[P];return new h(R,~b.h).add(I)}r.abs=function(){return X(this)?V(this):this},r.add=function(b){for(var C=Math.max(this.g.length,b.g.length),R=[],P=0,D=0;D<=C;D++){var N=P+(this.i(D)&65535)+(b.i(D)&65535),A=(N>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);P=A>>>16,N&=65535,A&=65535,R[D]=A<<16|N}return new h(R,R[R.length-1]&-2147483648?-1:0)};function te(b,C){return b.add(V(C))}r.j=function(b){if(Q(this)||Q(b))return T;if(X(this))return X(b)?V(this).j(V(b)):V(V(this).j(b));if(X(b))return V(this.j(V(b)));if(0>this.l(F)&&0>b.l(F))return v(this.m()*b.m());for(var C=this.g.length+b.g.length,R=[],P=0;P<2*C;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<b.g.length;D++){var N=this.i(P)>>>16,A=this.i(P)&65535,Y=b.i(D)>>>16,me=b.i(D)&65535;R[2*P+2*D]+=A*me,pe(R,2*P+2*D),R[2*P+2*D+1]+=N*me,pe(R,2*P+2*D+1),R[2*P+2*D+1]+=A*Y,pe(R,2*P+2*D+1),R[2*P+2*D+2]+=N*Y,pe(R,2*P+2*D+2)}for(P=0;P<C;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=C;P<2*C;P++)R[P]=0;return new h(R,0)};function pe(b,C){for(;(b[C]&65535)!=b[C];)b[C+1]+=b[C]>>>16,b[C]&=65535,C++}function de(b,C){this.g=b,this.h=C}function re(b,C){if(Q(C))throw Error("division by zero");if(Q(b))return new de(T,T);if(X(b))return C=re(V(b),C),new de(V(C.g),V(C.h));if(X(C))return C=re(b,V(C)),new de(V(C.g),C.h);if(30<b.g.length){if(X(b)||X(C))throw Error("slowDivide_ only works with positive integers.");for(var R=I,P=C;0>=P.l(b);)R=le(R),P=le(P);var D=ue(R,1),N=ue(P,1);for(P=ue(P,2),R=ue(R,2);!Q(P);){var A=N.add(P);0>=A.l(b)&&(D=D.add(R),N=A),P=ue(P,1),R=ue(R,1)}return C=te(b,D.j(C)),new de(D,C)}for(D=T;0<=b.l(C);){for(R=Math.max(1,Math.floor(b.m()/C.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=v(R),A=N.j(C);X(A)||0<A.l(b);)R-=P,N=v(R),A=N.j(C);Q(N)&&(N=I),D=D.add(N),b=te(b,A)}return new de(D,b)}r.A=function(b){return re(this,b).h},r.and=function(b){for(var C=Math.max(this.g.length,b.g.length),R=[],P=0;P<C;P++)R[P]=this.i(P)&b.i(P);return new h(R,this.h&b.h)},r.or=function(b){for(var C=Math.max(this.g.length,b.g.length),R=[],P=0;P<C;P++)R[P]=this.i(P)|b.i(P);return new h(R,this.h|b.h)},r.xor=function(b){for(var C=Math.max(this.g.length,b.g.length),R=[],P=0;P<C;P++)R[P]=this.i(P)^b.i(P);return new h(R,this.h^b.h)};function le(b){for(var C=b.g.length+1,R=[],P=0;P<C;P++)R[P]=b.i(P)<<1|b.i(P-1)>>>31;return new h(R,b.h)}function ue(b,C){var R=C>>5;C%=32;for(var P=b.g.length-R,D=[],N=0;N<P;N++)D[N]=0<C?b.i(N+R)>>>C|b.i(N+R+1)<<32-C:b.i(N+R);return new h(D,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,j_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,as=h}).apply(typeof Ty<"u"?Ty:typeof self<"u"?self:typeof window<"u"?window:{});var Gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D_,Xa,V_,oc,sf,L_,O_,M_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gu=="object"&&Gu];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var _=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in _))break e;_=_[B]}u=u[u.length-1],S=_[u],g=g(S),g!=S&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function l(u,g){u instanceof String&&(u+="");var _=0,S=!1,B={next:function(){if(!S&&_<u.length){var J=_++;return{value:g(J,u[J]),done:!1}}return S=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(u){return u||function(){return l(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function m(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function v(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function w(u,g,_){return u.call.apply(u.bind,arguments)}function T(u,g,_){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,S),u.apply(g,B)}}return function(){return u.apply(g,arguments)}}function I(u,g,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,I.apply(null,arguments)}function F(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function Q(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(S,B,J){for(var ge=Array(arguments.length-2),st=2;st<arguments.length;st++)ge[st-2]=arguments[st];return g.prototype[B].apply(S,ge)}}function X(u){const g=u.length;if(0<g){const _=Array(g);for(let S=0;S<g;S++)_[S]=u[S];return _}return[]}function V(u,g){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(m(S)){const B=u.length||0,J=S.length||0;u.length=B+J;for(let ge=0;ge<J;ge++)u[B+ge]=S[ge]}else u.push(S)}}class te{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function pe(u){return/^[\s\xa0]*$/.test(u)}function de(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function re(u){return re[" "](u),u}re[" "]=function(){};var le=de().indexOf("Gecko")!=-1&&!(de().toLowerCase().indexOf("webkit")!=-1&&de().indexOf("Edge")==-1)&&!(de().indexOf("Trident")!=-1||de().indexOf("MSIE")!=-1)&&de().indexOf("Edge")==-1;function ue(u,g,_){for(const S in u)g.call(_,u[S],S,u)}function b(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function C(u){const g={};for(const _ in u)g[_]=u[_];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,g){let _,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(_ in S)u[_]=S[_];for(let J=0;J<R.length;J++)_=R[J],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function D(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function N(u){p.setTimeout(()=>{throw u},0)}function A(){var u=ve;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Y{constructor(){this.h=this.g=null}add(g,_){const S=me.get();S.set(g,_),this.h?this.h.next=S:this.g=S,this.h=S}}var me=new te(()=>new Se,u=>u.reset());class Se{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,W=!1,ve=new Y,fe=()=>{const u=p.Promise.resolve(void 0);ke=()=>{u.then(M)}};var M=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){N(_)}var g=me;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}W=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Me=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,g),p.removeEventListener("test",_,g)}catch{}return u})();function Fe(u,g){if(Ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(le){e:{try{re(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:We[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Fe.aa.h.call(this)}}Q(Fe,Ie);var We={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),Be=0;function nt(u,g,_,S,B){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!S,this.ha=B,this.key=++Be,this.da=this.fa=!1}function at(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function sn(u){this.src=u,this.g={},this.h=0}sn.prototype.add=function(u,g,_,S,B){var J=u.toString();u=this.g[J],u||(u=this.g[J]=[],this.h++);var ge=Gn(u,g,S,B);return-1<ge?(g=u[ge],_||(g.fa=!1)):(g=new nt(g,this.src,J,!!S,B),g.fa=_,u.push(g)),g};function Qt(u,g){var _=g.type;if(_ in u.g){var S=u.g[_],B=Array.prototype.indexOf.call(S,g,void 0),J;(J=0<=B)&&Array.prototype.splice.call(S,B,1),J&&(at(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Gn(u,g,_,S){for(var B=0;B<u.length;++B){var J=u[B];if(!J.da&&J.listener==g&&J.capture==!!_&&J.ha==S)return B}return-1}var lr="closure_lm_"+(1e6*Math.random()|0),Ye={};function zt(u,g,_,S,B){if(Array.isArray(g)){for(var J=0;J<g.length;J++)zt(u,g[J],_,S,B);return null}return _=dr(_),u&&u[Qe]?u.K(g,_,v(S)?!!S.capture:!1,B):yn(u,g,_,!1,S,B)}function yn(u,g,_,S,B,J){if(!g)throw Error("Invalid event type");var ge=v(B)?!!B.capture:!!B,st=Kn(u);if(st||(u[lr]=st=new sn(u)),_=st.add(g,_,S,ge,J),_.proxy)return _;if(S=ur(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)Me||(B=ge),B===void 0&&(B=!1),u.addEventListener(g.toString(),S,B);else if(u.attachEvent)u.attachEvent(_t(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ur(){function u(_){return g.call(u.src,u.listener,_)}const g=on;return u}function kr(u,g,_,S,B){if(Array.isArray(g))for(var J=0;J<g.length;J++)kr(u,g[J],_,S,B);else S=v(S)?!!S.capture:!!S,_=dr(_),u&&u[Qe]?(u=u.i,g=String(g).toString(),g in u.g&&(J=u.g[g],_=Gn(J,_,S,B),-1<_&&(at(J[_]),Array.prototype.splice.call(J,_,1),J.length==0&&(delete u.g[g],u.h--)))):u&&(u=Kn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Gn(g,_,S,B)),(_=-1<u?g[u]:null)&&Pt(_))}function Pt(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Qe])Qt(g.i,u);else{var _=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(_,S,u.capture):g.detachEvent?g.detachEvent(_t(_),S):g.addListener&&g.removeListener&&g.removeListener(S),(_=Kn(g))?(Qt(_,u),_.h==0&&(_.src=null,g[lr]=null)):at(u)}}}function _t(u){return u in Ye?Ye[u]:Ye[u]="on"+u}function on(u,g){if(u.da)u=!0;else{g=new Fe(g,this);var _=u.listener,S=u.ha||u.src;u.fa&&Pt(u),u=_.call(S,g)}return u}function Kn(u){return u=u[lr],u instanceof sn?u:null}var cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function dr(u){return typeof u=="function"?u:(u[cr]||(u[cr]=function(g){return u.handleEvent(g)}),u[cr])}function ht(){Z.call(this),this.i=new sn(this),this.M=this,this.F=null}Q(ht,Z),ht.prototype[Qe]=!0,ht.prototype.removeEventListener=function(u,g,_,S){kr(this,u,g,_,S)};function Le(u,g){var _,S=u.F;if(S)for(_=[];S;S=S.F)_.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new Ie(g,u);else if(g instanceof Ie)g.target=g.target||u;else{var B=g;g=new Ie(S,u),P(g,B)}if(B=!0,_)for(var J=_.length-1;0<=J;J--){var ge=g.g=_[J];B=kt(ge,S,!0,g)&&B}if(ge=g.g=u,B=kt(ge,S,!0,g)&&B,B=kt(ge,S,!1,g)&&B,_)for(J=0;J<_.length;J++)ge=g.g=_[J],B=kt(ge,S,!1,g)&&B}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],S=0;S<_.length;S++)at(_[S]);delete u.g[g],u.h--}}this.F=null},ht.prototype.K=function(u,g,_,S){return this.i.add(String(u),g,!1,_,S)},ht.prototype.L=function(u,g,_,S){return this.i.add(String(u),g,!0,_,S)};function kt(u,g,_,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,J=0;J<g.length;++J){var ge=g[J];if(ge&&!ge.da&&ge.capture==_){var st=ge.listener,Lt=ge.ha||ge.src;ge.fa&&Qt(u.i,ge),B=st.call(Lt,S)!==!1&&B}}return B&&!S.defaultPrevented}function Xr(u,g,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:p.setTimeout(u,g||0)}function Vn(u){u.g=Xr(()=>{u.g=null,u.i&&(u.i=!1,Vn(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Qn extends Z{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Vn(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sn(u){Z.call(this),this.h=u,this.g={}}Q(Sn,Z);var Ar=[];function vn(u){ue(u.g,function(g,_){this.g.hasOwnProperty(_)&&Pt(g)},u),u.g={}}Sn.prototype.N=function(){Sn.aa.N.call(this),vn(this)},Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var br=p.JSON.stringify,Zr=p.JSON.parse,ei=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function an(){}an.prototype.h=null;function G(u){return u.h||(u.h=u.i())}function oe(){}var E={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function U(){Ie.call(this,"d")}Q(U,Ie);function ee(){Ie.call(this,"c")}Q(ee,Ie);var L={},q=null;function we(){return q=q||new ht}L.La="serverreachability";function He(u){Ie.call(this,L.La,u)}Q(He,Ie);function ot(u){const g=we();Le(g,new He(g))}L.STAT_EVENT="statevent";function ye(u,g){Ie.call(this,L.STAT_EVENT,u),this.stat=g}Q(ye,Ie);function Ae(u){const g=we();Le(g,new ye(g,u))}L.Ma="timingevent";function Vt(u,g){Ie.call(this,L.Ma,u),this.size=g}Q(Vt,Ie);function Bt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},g)}function ln(){this.g=!0}ln.prototype.xa=function(){this.g=!1};function hr(u,g,_,S,B,J){u.info(function(){if(u.g)if(J)for(var ge="",st=J.split("&"),Lt=0;Lt<st.length;Lt++){var Xe=st[Lt].split("=");if(1<Xe.length){var Wt=Xe[0];Xe=Xe[1];var At=Wt.split("_");ge=2<=At.length&&At[1]=="type"?ge+(Wt+"="+Xe+"&"):ge+(Wt+"=redacted&")}}else ge=null;else ge=J;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+g+`
`+_+`
`+ge})}function fr(u,g,_,S,B,J,ge){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+g+`
`+_+`
`+J+" "+ge})}function _n(u,g,_,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+pr(u,_)+(S?" "+S:"")})}function ti(u,g){u.info(function(){return"TIMEOUT: "+g})}ln.prototype.info=function(){};function pr(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var S=_[u];if(!(2>S.length)){var B=S[1];if(Array.isArray(B)&&!(1>B.length)){var J=B[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ge=1;ge<B.length;ge++)B[ge]=""}}}}return br(_)}catch{return g}}var Nr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ro={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ln;function ut(){}Q(ut,an),ut.prototype.g=function(){return new XMLHttpRequest},ut.prototype.i=function(){return{}},Ln=new ut;function $t(u,g,_,S){this.j=u,this.i=g,this.l=_,this.R=S||1,this.U=new Sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nl}function Nl(){this.i=null,this.g="",this.h=!1}var ma={},io={};function so(u,g,_){u.L=1,u.v=Ai(Mn(g)),u.m=_,u.P=!0,ga(u,null)}function ga(u,g){u.F=Date.now(),ct(u),u.A=Mn(u.v);var _=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Ni(_.i,"t",S),u.C=0,_=u.j.J,u.h=new Nl,u.g=Yl(u.j,_?g:null,!u.m),0<u.O&&(u.M=new Qn(I(u.Y,u,u.g),u.O)),g=u.U,_=u.g,S=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(Ar[0]=B.toString()),B=Ar);for(var J=0;J<B.length;J++){var ge=zt(_,B[J],S||g.handleEvent,!1,g.h||g);if(!ge)break;g.g[ge.key]=ge}g=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ot(),hr(u.i,u.u,u.A,u.l,u.R,u.m)}$t.prototype.ca=function(u){u=u.target;const g=this.M;g&&Cn(u)==3?g.j():this.Y(u)},$t.prototype.Y=function(u){try{if(u==this.g)e:{const At=Cn(this.g);var g=this.g.Ba();const Xn=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||Ea(this.g)))){this.J||At!=4||g==7||(g==8||0>=Xn?ot(3):ot(2)),Ss(this);var _=this.g.Z();this.X=_;t:if(jl(this)){var S=Ea(this.g);u="";var B=S.length,J=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),Ci(this);var ge="";break t}this.h.i=new p.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,u+=this.h.i.decode(S[g],{stream:!(J&&g==B-1)});S.length=0,this.h.g+=u,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=_==200,fr(this.i,this.u,this.A,this.l,this.R,At,_),this.o){if(this.T&&!this.K){t:{if(this.g){var st,Lt=this.g;if((st=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pe(st)){var Xe=st;break t}}Xe=null}if(_=Xe)_n(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ya(this,_);else{this.o=!1,this.s=3,Ae(12),Yn(this),Ci(this);break e}}if(this.P){_=!0;let Un;for(;!this.J&&this.C<ge.length;)if(Un=rd(this,ge),Un==io){At==4&&(this.s=4,Ae(14),_=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==ma){this.s=4,Ae(15),_n(this.i,this.l,ge,"[Invalid Chunk]"),_=!1;break}else _n(this.i,this.l,Un,null),ya(this,Un);if(jl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||ge.length!=0||this.h.h||(this.s=1,Ae(16),_=!1),this.o=this.o&&_,!_)_n(this.i,this.l,ge,"[Invalid Chunked Response]"),Yn(this),Ci(this);else if(0<ge.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Sa(Wt),Wt.M=!0,Ae(11))}}else _n(this.i,this.l,ge,null),ya(this,ge);At==4&&Yn(this),this.o&&!this.J&&(At==4?yo(this.j,this):(this.o=!1,ct(this)))}else ho(this.g),_==400&&0<ge.indexOf("Unknown SID")?(this.s=3,Ae(12)):(this.s=0,Ae(13)),Yn(this),Ci(this)}}}catch{}finally{}};function jl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function rd(u,g){var _=u.C,S=g.indexOf(`
`,_);return S==-1?io:(_=Number(g.substring(_,S)),isNaN(_)?ma:(S+=1,S+_>g.length?io:(g=g.slice(S,S+_),u.C=S+_,g)))}$t.prototype.cancel=function(){this.J=!0,Yn(this)};function ct(u){u.S=Date.now()+u.I,Dl(u,u.I)}function Dl(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Bt(I(u.ba,u),g)}function Ss(u){u.B&&(p.clearTimeout(u.B),u.B=null)}$t.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ti(this.i,this.A),this.L!=2&&(ot(),Ae(17)),Yn(this),this.s=2,Ci(this)):Dl(this,this.S-u)};function Ci(u){u.j.G==0||u.J||yo(u.j,u)}function Yn(u){Ss(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,vn(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function ya(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||wn(_.h,u))){if(!u.K&&wn(_.h,u)&&_.G==3){try{var S=_.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)go(_),_r(_);else break e;mo(_),Ae(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=Bt(I(_.Za,_),6e3));if(1>=Ll(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else oi(_,11)}else if((u.K||_.g==u)&&go(_),!pe(g))for(B=_.Da.g.parse(g),g=0;g<B.length;g++){let Xe=B[g];if(_.T=Xe[0],Xe=Xe[1],_.G==2)if(Xe[0]=="c"){_.K=Xe[1],_.ia=Xe[2];const Wt=Xe[3];Wt!=null&&(_.la=Wt,_.j.info("VER="+_.la));const At=Xe[4];At!=null&&(_.Aa=At,_.j.info("SVER="+_.Aa));const Xn=Xe[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(S=1.5*Xn,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Un=u.g;if(Un){const bs=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bs){var J=S.h;J.g||bs.indexOf("spdy")==-1&&bs.indexOf("quic")==-1&&bs.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(va(J,J.h),J.h=null))}if(S.D){const _o=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(S.ya=_o,lt(S.I,S.D,_o))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ge=u;if(S.qa=Ql(S,S.J?S.ia:null,S.W),ge.K){Ol(S.h,ge);var st=ge,Lt=S.L;Lt&&(st.I=Lt),st.B&&(Ss(st),ct(st)),S.g=ge}else As(S);0<_.i.length&&Lr(_)}else Xe[0]!="stop"&&Xe[0]!="close"||oi(_,7);else _.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?oi(_,7):Jt(_):Xe[0]!="noop"&&_.l&&_.l.ta(Xe),_.v=0)}}ot(4)}catch{}}var Vl=class{constructor(u,g){this.g=u,this.map=g}};function Is(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function On(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ll(u){return u.h?1:u.g?u.g.size:0}function wn(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function va(u,g){u.g?u.g.add(g):u.h=g}function Ol(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Is.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ml(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return X(u.i)}function oo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var g=[],_=u.length,S=0;S<_;S++)g.push(u[S]);return g}g=[],_=0;for(S in u)g[_++]=u[S];return g}function ao(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const S in u)g[_++]=S;return g}}}function Ri(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=ao(u),S=oo(u),B=S.length,J=0;J<B;J++)g.call(void 0,S[J],_&&_[J],u)}var Cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function id(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var S=u[_].indexOf("="),B=null;if(0<=S){var J=u[_].substring(0,S);B=u[_].substring(S+1)}else J=u[_];g(J,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function ni(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ni){this.h=u.h,Rs(this,u.j),this.o=u.o,this.g=u.g,Pi(this,u.s),this.l=u.l;var g=u.i,_=new jr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),ki(this,_),this.m=u.m}else u&&(g=String(u).match(Cs))?(this.h=!1,Rs(this,g[1]||"",!0),this.o=Je(g[2]||""),this.g=Je(g[3]||"",!0),Pi(this,g[4]),this.l=Je(g[5]||"",!0),ki(this,g[6]||"",!0),this.m=Je(g[7]||"")):(this.h=!1,this.i=new jr(null,this.h))}ni.prototype.toString=function(){var u=[],g=this.j;g&&u.push(bi(g,lo,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(bi(g,lo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(bi(_,_.charAt(0)=="/"?zl:Ul,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",bi(_,_a)),u.join("")};function Mn(u){return new ni(u)}function Rs(u,g,_){u.j=_?Je(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Pi(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function ki(u,g,_){g instanceof jr?(u.i=g,Dr(u.i,u.h)):(_||(g=bi(g,Bl)),u.i=new jr(g,u.h))}function lt(u,g,_){u.i.set(g,_)}function Ai(u){return lt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Je(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bi(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Fl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var lo=/[#\/\?@]/g,Ul=/[#\?:]/g,zl=/[#\?]/g,Bl=/[#\?@]/g,_a=/#/g;function jr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Yt(u){u.g||(u.g=new Map,u.h=0,u.i&&id(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=jr.prototype,r.add=function(u,g){Yt(this),this.i=null,u=Jn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function mr(u,g){Yt(u),g=Jn(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function gr(u,g){return Yt(u),g=Jn(u,g),u.g.has(g)}r.forEach=function(u,g){Yt(this),this.g.forEach(function(_,S){_.forEach(function(B){u.call(g,B,S,this)},this)},this)},r.na=function(){Yt(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let S=0;S<g.length;S++){const B=u[S];for(let J=0;J<B.length;J++)_.push(g[S])}return _},r.V=function(u){Yt(this);let g=[];if(typeof u=="string")gr(this,u)&&(g=g.concat(this.g.get(Jn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},r.set=function(u,g){return Yt(this),this.i=null,u=Jn(this,u),gr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Ni(u,g,_){mr(u,g),0<_.length&&(u.i=null,u.g.set(Jn(u,g),X(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var S=g[_];const J=encodeURIComponent(String(S)),ge=this.V(S);for(S=0;S<ge.length;S++){var B=J;ge[S]!==""&&(B+="="+encodeURIComponent(String(ge[S]))),u.push(B)}}return this.i=u.join("&")};function Jn(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Dr(u,g){g&&!u.j&&(Yt(u),u.i=null,u.g.forEach(function(_,S){var B=S.toLowerCase();S!=B&&(mr(this,S),Ni(this,B,_))},u)),u.j=g}function sd(u,g){const _=new ln;if(p.Image){const S=new Image;S.onload=F(In,_,"TestLoadImage: loaded",!0,g,S),S.onerror=F(In,_,"TestLoadImage: error",!1,g,S),S.onabort=F(In,_,"TestLoadImage: abort",!1,g,S),S.ontimeout=F(In,_,"TestLoadImage: timeout",!1,g,S),p.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function $l(u,g){const _=new ln,S=new AbortController,B=setTimeout(()=>{S.abort(),In(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(J=>{clearTimeout(B),J.ok?In(_,"TestPingServer: ok",!0,g):In(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),In(_,"TestPingServer: error",!1,g)})}function In(u,g,_,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(_)}catch{}}function od(){this.g=new ei}function Wl(u,g,_){const S=_||"";try{Ri(u,function(B,J){let ge=B;v(B)&&(ge=br(B)),g.push(S+J+"="+encodeURIComponent(ge))})}catch(B){throw g.push(S+"type="+encodeURIComponent("_badmap")),B}}function ri(u){this.l=u.Ub||null,this.j=u.eb||!1}Q(ri,an),ri.prototype.g=function(){return new Ps(this.l,this.j)},ri.prototype.i=(function(u){return function(){return u}})({});function Ps(u,g){ht.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q(Ps,ht),r=Ps.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,vr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||p).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?yr(this):vr(this),this.readyState==3&&Hl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,yr(this))},r.Qa=function(u){this.g&&(this.response=u,yr(this))},r.ga=function(){this.g&&yr(this)};function yr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,vr(u)}r.setRequestHeader=function(u,g){this.u.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function vr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ps.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ii(u){let g="";return ue(u,function(_,S){g+=S,g+=":",g+=_,g+=`\r
`}),g}function ji(u,g,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=ii(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):lt(u,g,_))}function yt(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(yt,ht);var ad=/^https?$/i,wa=["POST","PUT"];r=yt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,g,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ln.g(),this.v=this.o?G(this.o):G(Ln),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(J){ks(this,J);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)_.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())_.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),B=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(wa,g,void 0))||S||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ge]of _)this.g.setRequestHeader(J,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{co(this),this.u=!0,this.g.send(u),this.u=!1}catch(J){ks(this,J)}};function ks(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,uo(u),Fn(u)}function uo(u){u.A||(u.A=!0,Le(u,"complete"),Le(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Le(this,"complete"),Le(this,"abort"),Fn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fn(this,!0)),yt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?xa(this):this.bb())},r.bb=function(){xa(this)};function xa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Cn(u)!=4||u.Z()!=2)){if(u.u&&Cn(u)==4)Xr(u.Ea,0,u);else if(Le(u,"readystatechange"),Cn(u)==4){u.h=!1;try{const ge=u.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var S;if(S=ge===0){var B=String(u.D).match(Cs)[1]||null;!B&&p.self&&p.self.location&&(B=p.self.location.protocol.slice(0,-1)),S=!ad.test(B?B.toLowerCase():"")}_=S}if(_)Le(u,"complete"),Le(u,"success");else{u.m=6;try{var J=2<Cn(u)?u.g.statusText:""}catch{J=""}u.l=J+" ["+u.Z()+"]",uo(u)}}finally{Fn(u)}}}}function Fn(u,g){if(u.g){co(u);const _=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||Le(u,"ready");try{_.onreadystatechange=S}catch{}}}function co(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Cn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Zr(g)}};function Ea(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ho(u){const g={};u=(u.g&&2<=Cn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(pe(u[S]))continue;var _=D(u[S]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=g[B]||[];g[B]=J,J.push(_)}b(g,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function Ta(u){this.Aa=0,this.i=[],this.j=new ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,u),this.cb=Vr("retryDelaySeedMs",1e4,u),this.Wa=Vr("forwardChannelMaxRetries",2,u),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Is(u&&u.concurrentRequestLimit),this.Da=new od,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ta.prototype,r.la=8,r.G=1,r.connect=function(u,g,_,S){Ae(0),this.W=u,this.H=g||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=Ql(this,null,this.W),Lr(this)};function Jt(u){if(fo(u),u.G==3){var g=u.U++,_=Mn(u.I);if(lt(_,"SID",u.K),lt(_,"RID",g),lt(_,"TYPE","terminate"),si(u,_),g=new $t(u,u.j,g),g.L=2,g.v=Ai(Mn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=g.v,_=!0),_||(g.g=Yl(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ct(g)}Kl(u)}function _r(u){u.g&&(Sa(u),u.g.cancel(),u.g=null)}function fo(u){_r(u),u.u&&(p.clearTimeout(u.u),u.u=null),go(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function Lr(u){if(!On(u.h)&&!u.s){u.s=!0;var g=u.Ga;ke||fe(),W||(ke(),W=!0),ve.add(g,u),u.B=0}}function ld(u,g){return Ll(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Bt(I(u.Ga,u,g),Gl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new $t(this,this.j,u);let J=this.o;if(this.S&&(J?(J=C(J),P(J,this.S)):J=this.S),this.m!==null||this.O||(B.H=J,J=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Di(this,B,g),_=Mn(this.I),lt(_,"RID",u),lt(_,"CVER",22),this.D&&lt(_,"X-HTTP-Session-Id",this.D),si(this,_),J&&(this.O?g="headers="+encodeURIComponent(String(ii(J)))+"&"+g:this.m&&ji(_,this.m,J)),va(this.h,B),this.Ua&&lt(_,"TYPE","init"),this.P?(lt(_,"$req",g),lt(_,"SID","null"),B.T=!0,so(B,_,null)):so(B,_,g),this.G=2}}else this.G==3&&(u?po(this,u):this.i.length==0||On(this.h)||po(this))};function po(u,g){var _;g?_=g.l:_=u.U++;const S=Mn(u.I);lt(S,"SID",u.K),lt(S,"RID",_),lt(S,"AID",u.T),si(u,S),u.m&&u.o&&ji(S,u.m,u.o),_=new $t(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Di(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),va(u.h,_),so(_,S,g)}function si(u,g){u.H&&ue(u.H,function(_,S){lt(g,S,_)}),u.l&&Ri({},function(_,S){lt(g,S,_)})}function Di(u,g,_){_=Math.min(u.i.length,_);var S=u.l?I(u.l.Na,u.l,u):null;e:{var B=u.i;let J=-1;for(;;){const ge=["count="+_];J==-1?0<_?(J=B[0].g,ge.push("ofs="+J)):J=0:ge.push("ofs="+J);let st=!0;for(let Lt=0;Lt<_;Lt++){let Xe=B[Lt].g;const Wt=B[Lt].map;if(Xe-=J,0>Xe)J=Math.max(0,B[Lt].g-100),st=!1;else try{Wl(Wt,ge,"req"+Xe+"_")}catch{S&&S(Wt)}}if(st){S=ge.join("&");break e}}}return u=u.i.splice(0,_),g.D=u,S}function As(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;ke||fe(),W||(ke(),W=!0),ve.add(g,u),u.v=0}}function mo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Bt(I(u.Fa,u),Gl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Bt(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ae(10),_r(this),ql(this))};function Sa(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function ql(u){u.g=new $t(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Mn(u.qa);lt(g,"RID","rpc"),lt(g,"SID",u.K),lt(g,"AID",u.T),lt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&lt(g,"TO",u.ja),lt(g,"TYPE","xmlhttp"),si(u,g),u.m&&u.o&&ji(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Ai(Mn(g)),_.m=null,_.P=!0,ga(_,u)}r.Za=function(){this.C!=null&&(this.C=null,_r(this),mo(this),Ae(19))};function go(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function yo(u,g){var _=null;if(u.g==g){go(u),Sa(u),u.g=null;var S=2}else if(wn(u.h,g))_=g.D,Ol(u.h,g),S=1;else return;if(u.G!=0){if(g.o)if(S==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var B=u.B;S=we(),Le(S,new Vt(S,_)),Lr(u)}else As(u);else if(B=g.s,B==3||B==0&&0<g.X||!(S==1&&ld(u,g)||S==2&&mo(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),B){case 1:oi(u,5);break;case 4:oi(u,10);break;case 3:oi(u,6);break;default:oi(u,2)}}}function Gl(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function oi(u,g){if(u.j.info("Error code "+g),g==2){var _=I(u.fb,u),S=u.Xa;const B=!S;S=new ni(S||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Rs(S,"https"),Ai(S),B?sd(S.toString(),_):$l(S.toString(),_)}else Ae(2);u.G=0,u.l&&u.l.sa(g),Kl(u),fo(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function Kl(u){if(u.G=0,u.ka=[],u.l){const g=Ml(u.h);(g.length!=0||u.i.length!=0)&&(V(u.ka,g),V(u.ka,u.i),u.h.i.length=0,X(u.i),u.i.length=0),u.l.ra()}}function Ql(u,g,_){var S=_ instanceof ni?Mn(_):new ni(_);if(S.g!="")g&&(S.g=g+"."+S.g),Pi(S,S.s);else{var B=p.location;S=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var J=new ni(null);S&&Rs(J,S),g&&(J.g=g),B&&Pi(J,B),_&&(J.l=_),S=J}return _=u.D,g=u.ya,_&&g&&lt(S,_,g),lt(S,"VER",u.la),si(u,S),S}function Yl(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new yt(new ri({eb:_})):new yt(u.pa),g.Ha(u.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ia(){}r=Ia.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function vo(){}vo.prototype.g=function(u,g){return new xn(u,g)};function xn(u,g){ht.call(this),this.g=new Ta(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!pe(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!pe(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Or(this)}Q(xn,ht),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Jt(this.g)},xn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=br(u),u=_);g.i.push(new Vl(g.Ya++,u)),g.G==3&&Lr(g)},xn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,xn.aa.N.call(this)};function Jl(u){U.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}Q(Jl,U);function Xl(){ee.call(this),this.status=1}Q(Xl,ee);function Or(u){this.g=u}Q(Or,Ia),Or.prototype.ua=function(){Le(this.g,"a")},Or.prototype.ta=function(u){Le(this.g,new Jl(u))},Or.prototype.sa=function(u){Le(this.g,new Xl)},Or.prototype.ra=function(){Le(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,M_=function(){return new vo},O_=function(){return we()},L_=L,sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,oc=Nr,ro.COMPLETE="complete",V_=ro,oe.EventType=E,E.OPEN="a",E.CLOSE="b",E.ERROR="c",E.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Xa=oe,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,D_=yt}).apply(typeof Gu<"u"?Gu:typeof self<"u"?self:typeof window<"u"?window:{});const Sy="@firebase/firestore",Iy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new kf("@firebase/firestore");function Bo(){return Xs.logLevel}function xe(r,...e){if(Xs.logLevel<=Ge.DEBUG){const t=e.map($f);Xs.debug(`Firestore (${ca}): ${r}`,...t)}}function Ei(r,...e){if(Xs.logLevel<=Ge.ERROR){const t=e.map($f);Xs.error(`Firestore (${ca}): ${r}`,...t)}}function cs(r,...e){if(Xs.logLevel<=Ge.WARN){const t=e.map($f);Xs.warn(`Firestore (${ca}): ${r}`,...t)}}function $f(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,F_(r,i,t)}function F_(r,e,t){let i=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ei(i),new Error(i)}function it(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||F_(e,o,i)}function ze(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Ii{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(pn.UNAUTHENTICATED)))}shutdown(){}}class bI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class NI{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _i,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _i)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it(typeof i.accessToken=="string",31837,{l:i}),new U_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class jI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new jI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const i=l=>{l.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,xe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=LI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function $e(r,e){return r<e?-1:r>e?1:0}function of(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return $e(i,o);{const l=z_(),h=OI(l.encode(Ry(r,t)),l.encode(Ry(e,t)));return h!==0?h:$e(i,o)}}t+=i>65535?2:1}return $e(r.length,e.length)}function Ry(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function OI(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return $e(r[t],e[t]);return $e(r.length,e.length)}function ea(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="__name__";class $r{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ve(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return $r.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $r?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=$r.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return $e(e.length,t.length)}static compareSegments(e,t){const i=$r.isNumericId(e),o=$r.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?$r.extractNumericId(e).compare($r.extractNumericId(t)):of(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return as.fromString(e.substring(4,e.length-2))}}class mt extends $r{construct(e,t,i){return new mt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Re(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const MI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends $r{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return MI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Py}static keyField(){return new tn([Py])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Re(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Re(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Re(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(i+=p,o++):(l(),o++)}if(l(),h)throw new Re(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(mt.fromString(e))}static fromName(e){return new be(mt.fromString(e).popFirst(5))}static empty(){return new be(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(r,e,t){if(!t)throw new Re(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function FI(r,e,t,i){if(e===!0&&i===!0)throw new Re(ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ky(r){if(!be.isDocumentKey(r))throw new Re(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ay(r){if(be.isDocumentKey(r))throw new Re(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Hf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ve(12329,{type:typeof r})}function Pr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Re(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hf(r);throw new Re(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Rl(r,e){if(!$_(r))throw new Re(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Re(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=-62135596800,Ny=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ny);return new gt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<by)throw new Re(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ny}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rl(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-by;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:jt("string",gt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new gt(0,0))}static max(){return new Ue(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function UI(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ue.fromTimestamp(i===1e9?new gt(t+1,0):new gt(t,i));return new ds(o,be.empty(),e)}function zI(r){return new ds(r.readTime,r.key,pl)}class ds{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ds(Ue.min(),be.empty(),pl)}static max(){return new ds(Ue.max(),be.empty(),pl)}}function BI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(r.documentKey,e.documentKey),t!==0?t:$e(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==$I)throw r;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,i)=>{t(e)}))}static reject(e){return new ne(((t,i)=>{i(e)}))}static waitFor(e){return new ne(((t,i)=>{let o=0,l=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++l,h&&l===o&&t()}),(m=>i(m)))})),h=!0,l===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next((o=>o?ne.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new ne(((i,o)=>{const l=e.length,h=new Array(l);let p=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((w=>{h[v]=w,++p,p===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new ne(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function HI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ha(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Fc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=-1;function Uc(r){return r==null}function xc(r){return r===0&&1/r==-1/0}function qI(r){return typeof r=="number"&&Number.isInteger(r)&&!xc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="";function GI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=jy(e)),e=KI(r.get(t),e);return jy(e)}function KI(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case W_:t+="";break;default:t+=l}}return t}function jy(r){return r+W_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Es(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function H_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}}class Ku{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??en.RED,this.left=o??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new en(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vy(this.data.getIterator())}getIteratorFrom(e){return new Vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class Vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new qn([])}unionWith(e){let t=new Ut(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new q_("Invalid base64 string: "+l):l}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const QI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(r){if(it(!!r,39018),typeof r=="string"){let e=0;const t=QI.exec(r);if(it(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(r.seconds),nanos:Ct(r.nanos)}}function Ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function fs(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="server_timestamp",K_="__type__",Q_="__previous_value__",Y_="__local_write_time__";function Gf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[K_])===null||t===void 0?void 0:t.stringValue)===G_}function zc(r){const e=r.mapValue.fields[Q_];return Gf(e)?zc(e):e}function ml(r){const e=hs(r.mapValue.fields[Y_].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t,i,o,l,h,p,m,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=w}}const Ec="(default)";class gl{constructor(e,t){this.projectId=e,this.database=t||Ec}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database===Ec}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="__type__",JI="__max__",Qu={mapValue:{}},X_="__vector__",Tc="value";function ps(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Gf(r)?4:ZI(r)?9007199254740991:XI(r)?10:11:Ve(28295,{value:r})}function Yr(r,e){if(r===e)return!0;const t=ps(r);if(t!==ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ml(r).isEqual(ml(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=hs(o.timestampValue),p=hs(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return fs(o.bytesValue).isEqual(fs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return Ct(o.geoPointValue.latitude)===Ct(l.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Ct(o.integerValue)===Ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Ct(o.doubleValue),p=Ct(l.doubleValue);return h===p?xc(h)===xc(p):isNaN(h)&&isNaN(p)}return!1})(r,e);case 9:return ea(r.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Dy(h)!==Dy(p))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(p[m]===void 0||!Yr(h[m],p[m])))return!1;return!0})(r,e);default:return Ve(52216,{left:r})}}function yl(r,e){return(r.values||[]).find((t=>Yr(t,e)))!==void 0}function ta(r,e){if(r===e)return 0;const t=ps(r),i=ps(e);if(t!==i)return $e(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const p=Ct(l.integerValue||l.doubleValue),m=Ct(h.integerValue||h.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(r,e);case 3:return Ly(r.timestampValue,e.timestampValue);case 4:return Ly(ml(r),ml(e));case 5:return of(r.stringValue,e.stringValue);case 6:return(function(l,h){const p=fs(l),m=fs(h);return p.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const p=l.split("/"),m=h.split("/");for(let v=0;v<p.length&&v<m.length;v++){const w=$e(p[v],m[v]);if(w!==0)return w}return $e(p.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const p=$e(Ct(l.latitude),Ct(h.latitude));return p!==0?p:$e(Ct(l.longitude),Ct(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Oy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var p,m,v,w;const T=l.fields||{},I=h.fields||{},F=(p=T[Tc])===null||p===void 0?void 0:p.arrayValue,Q=(m=I[Tc])===null||m===void 0?void 0:m.arrayValue,X=$e(((v=F==null?void 0:F.values)===null||v===void 0?void 0:v.length)||0,((w=Q==null?void 0:Q.values)===null||w===void 0?void 0:w.length)||0);return X!==0?X:Oy(F,Q)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Qu.mapValue&&h===Qu.mapValue)return 0;if(l===Qu.mapValue)return 1;if(h===Qu.mapValue)return-1;const p=l.fields||{},m=Object.keys(p),v=h.fields||{},w=Object.keys(v);m.sort(),w.sort();for(let T=0;T<m.length&&T<w.length;++T){const I=of(m[T],w[T]);if(I!==0)return I;const F=ta(p[m[T]],v[w[T]]);if(F!==0)return F}return $e(m.length,w.length)})(r.mapValue,e.mapValue);default:throw Ve(23264,{le:t})}}function Ly(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return $e(r,e);const t=hs(r),i=hs(e),o=$e(t.seconds,i.seconds);return o!==0?o:$e(t.nanos,i.nanos)}function Oy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=ta(t[o],i[o]);if(l)return l}return $e(t.length,i.length)}function na(r){return af(r)}function af(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=hs(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return fs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return be.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=af(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${af(t.fields[h])}`;return o+"}"})(r.mapValue):Ve(61005,{value:r})}function ac(r){switch(ps(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zc(r);return e?16+ac(e):16;case 5:return 2*r.stringValue.length;case 6:return fs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+ac(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Es(i.fields,((l,h)=>{o+=l.length+ac(h)})),o})(r.mapValue);default:throw Ve(13486,{value:r})}}function lf(r){return!!r&&"integerValue"in r}function Kf(r){return!!r&&"arrayValue"in r}function My(r){return!!r&&"nullValue"in r}function Fy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function lc(r){return!!r&&"mapValue"in r}function XI(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[J_])===null||t===void 0?void 0:t.stringValue)===X_}function sl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Es(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=sl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function ZI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===JI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!lc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sl(t)}setAll(e){let t=tn.emptyPath(),i={},o=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=p.popLast()}h?i[p.lastSegment()]=sl(h):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());lc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];lc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Es(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Dn(sl(this.value))}}function Z_(r){const e=[];return Es(r.fields,((t,i)=>{const o=new tn([t]);if(lc(i)){const l=Z_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,i,o,l,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new mn(e,0,Ue.min(),Ue.min(),Ue.min(),Dn.empty(),0)}static newFoundDocument(e,t,i,o){return new mn(e,1,t,Ue.min(),i,o,0)}static newNoDocument(e,t){return new mn(e,2,t,Ue.min(),Ue.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Ue.min(),Ue.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t){this.position=e,this.inclusive=t}}function Uy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=be.comparator(be.fromName(h.referenceValue),t.key):i=ta(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function zy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Yr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function eC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{}class Ft extends e0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new nC(e,t,i):t==="array-contains"?new sC(e,i):t==="in"?new oC(e,i):t==="not-in"?new aC(e,i):t==="array-contains-any"?new lC(e,i):new Ft(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new rC(e,i):new iC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ta(t,this.value)):t!==null&&ps(this.value)===ps(t)&&this.matchesComparison(ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jr extends e0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Jr(e,t)}matches(e){return t0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function t0(r){return r.op==="and"}function n0(r){return tC(r)&&t0(r)}function tC(r){for(const e of r.filters)if(e instanceof Jr)return!1;return!0}function uf(r){if(r instanceof Ft)return r.field.canonicalString()+r.op.toString()+na(r.value);if(n0(r))return r.filters.map((e=>uf(e))).join(",");{const e=r.filters.map((t=>uf(t))).join(",");return`${r.op}(${e})`}}function r0(r,e){return r instanceof Ft?(function(i,o){return o instanceof Ft&&i.op===o.op&&i.field.isEqual(o.field)&&Yr(i.value,o.value)})(r,e):r instanceof Jr?(function(i,o){return o instanceof Jr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,p)=>l&&r0(h,o.filters[p])),!0):!1})(r,e):void Ve(19439)}function i0(r){return r instanceof Ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${na(t.value)}`})(r):r instanceof Jr?(function(t){return t.op.toString()+" {"+t.getFilters().map(i0).join(" ,")+"}"})(r):"Filter"}class nC extends Ft{constructor(e,t,i){super(e,t,i),this.key=be.fromName(i.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class rC extends Ft{constructor(e,t){super(e,"in",t),this.keys=s0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iC extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=s0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function s0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>be.fromName(i.referenceValue)))}class sC extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kf(t)&&yl(t.arrayValue,this.value)}}class oC extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yl(this.value.arrayValue,t)}}class aC extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yl(this.value.arrayValue,t)}}class lC extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>yl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t=null,i=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.Pe=null}}function By(r,e=null,t=[],i=[],o=null,l=null,h=null){return new uC(r,e,t,i,o,l,h)}function Qf(r){const e=ze(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>uf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Uc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>na(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>na(i))).join(",")),e.Pe=t}return e.Pe}function Yf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!eC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!r0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!zy(r.startAt,e.startAt)&&zy(r.endAt,e.endAt)}function cf(r){return be.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t=null,i=[],o=[],l=null,h="F",p=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function cC(r,e,t,i,o,l,h,p){return new Bc(r,e,t,i,o,l,h,p)}function Jf(r){return new Bc(r)}function $y(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function dC(r){return r.collectionGroup!==null}function ol(r){const e=ze(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Ut(tn.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Ic(l,i))})),t.has(tn.keyField().canonicalString())||e.Te.push(new Ic(tn.keyField(),i))}return e.Te}function qr(r){const e=ze(r);return e.Ie||(e.Ie=hC(e,ol(r))),e.Ie}function hC(r,e){if(r.limitType==="F")return By(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ic(o.field,l)}));const t=r.endAt?new Sc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Sc(r.startAt.position,r.startAt.inclusive):null;return By(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function df(r,e,t){return new Bc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function $c(r,e){return Yf(qr(r),qr(e))&&r.limitType===e.limitType}function o0(r){return`${Qf(qr(r))}|lt:${r.limitType}`}function $o(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>i0(o))).join(", ")}]`),Uc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>na(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>na(o))).join(",")),`Target(${i})`})(qr(r))}; limitType=${r.limitType})`}function Wc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):be.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of ol(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,p,m){const v=Uy(h,p,m);return h.inclusive?v<=0:v<0})(i.startAt,ol(i),o)||i.endAt&&!(function(h,p,m){const v=Uy(h,p,m);return h.inclusive?v>=0:v>0})(i.endAt,ol(i),o))})(r,e)}function fC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function a0(r){return(e,t)=>{let i=!1;for(const o of ol(r)){const l=pC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function pC(r,e,t){const i=r.field.isKeyField()?be.comparator(e.key,t.key):(function(l,h,p){const m=h.data.field(l),v=p.data.field(l);return m!==null&&v!==null?ta(m,v):Ve(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ve(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return H_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Et(be.comparator);function Ti(){return mC}const l0=new Et(be.comparator);function Za(...r){let e=l0;for(const t of r)e=e.insert(t.key,t);return e}function u0(r){let e=l0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function qs(){return al()}function c0(){return al()}function al(){return new eo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const gC=new Et(be.comparator),yC=new Ut(be.comparator);function Ke(...r){let e=yC;for(const t of r)e=e.add(t);return e}const vC=new Ut($e);function _C(){return vC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xc(e)?"-0":e}}function d0(r){return{integerValue:""+r}}function wC(r,e){return qI(e)?d0(e):Xf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this._=void 0}}function xC(r,e,t){return r instanceof Cc?(function(o,l){const h={fields:{[K_]:{stringValue:G_},[Y_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Gf(l)&&(l=zc(l)),l&&(h.fields[Q_]=l),{mapValue:h}})(t,e):r instanceof vl?f0(r,e):r instanceof _l?p0(r,e):(function(o,l){const h=h0(o,l),p=Wy(h)+Wy(o.Ee);return lf(h)&&lf(o.Ee)?d0(p):Xf(o.serializer,p)})(r,e)}function EC(r,e,t){return r instanceof vl?f0(r,e):r instanceof _l?p0(r,e):t}function h0(r,e){return r instanceof Rc?(function(i){return lf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Cc extends Hc{}class vl extends Hc{constructor(e){super(),this.elements=e}}function f0(r,e){const t=m0(e);for(const i of r.elements)t.some((o=>Yr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class _l extends Hc{constructor(e){super(),this.elements=e}}function p0(r,e){let t=m0(e);for(const i of r.elements)t=t.filter((o=>!Yr(o,i)));return{arrayValue:{values:t}}}class Rc extends Hc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Wy(r){return Ct(r.integerValue||r.doubleValue)}function m0(r){return Kf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function TC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof vl&&o instanceof vl||i instanceof _l&&o instanceof _l?ea(i.elements,o.elements,Yr):i instanceof Rc&&o instanceof Rc?Yr(i.Ee,o.Ee):i instanceof Cc&&o instanceof Cc})(r.transform,e.transform)}class SC{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class qc{}function g0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Zf(r.key,or.none()):new Pl(r.key,r.data,or.none());{const t=r.data,i=Dn.empty();let o=new Ut(tn.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ts(r.key,i,new qn(o.toArray()),or.none())}}function IC(r,e,t){r instanceof Pl?(function(o,l,h){const p=o.value.clone(),m=qy(o.fieldTransforms,l,h.transformResults);p.setAll(m),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):r instanceof Ts?(function(o,l,h){if(!uc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=qy(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(y0(o)),m.setAll(p),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ll(r,e,t,i){return r instanceof Pl?(function(l,h,p,m){if(!uc(l.precondition,h))return p;const v=l.value.clone(),w=Gy(l.fieldTransforms,m,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Ts?(function(l,h,p,m){if(!uc(l.precondition,h))return p;const v=Gy(l.fieldTransforms,m,h),w=h.data;return w.setAll(y0(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,h,p){return uc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(r,e,t)}function CC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=h0(i.transform,o||null);l!=null&&(t===null&&(t=Dn.empty()),t.set(i.field,l))}return t||null}function Hy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ea(i,o,((l,h)=>TC(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Pl extends qc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ts extends qc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function y0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function qy(r,e,t){const i=new Map;it(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,p=e.data.field(l.field);i.set(l.field,EC(h,p,t[o]))}return i}function Gy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,xC(l,h,e))}return i}class Zf extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RC extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&IC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ll(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ll(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=c0();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const m=g0(h,p);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,((t,i)=>Hy(t,i)))&&ea(this.baseMutations,e.baseMutations,((t,i)=>Hy(t,i)))}}class ep{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){it(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return gC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new ep(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ze;function bC(r){switch(r){case ie.OK:return Ve(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ve(15467,{code:r})}}function v0(r){if(r===void 0)return Ei("GRPC error has no .code"),ie.UNKNOWN;switch(r){case Nt.OK:return ie.OK;case Nt.CANCELLED:return ie.CANCELLED;case Nt.UNKNOWN:return ie.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ie.INTERNAL;case Nt.UNAVAILABLE:return ie.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ie.NOT_FOUND;case Nt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Nt.ABORTED:return ie.ABORTED;case Nt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Nt.DATA_LOSS:return ie.DATA_LOSS;default:return Ve(39323,{code:r})}}(Ze=Nt||(Nt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new as([4294967295,4294967295],0);function Ky(r){const e=z_().encode(r),t=new j_;return t.update(e),new Uint8Array(t.digest())}function Qy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new as([t,i],0),new as([o,l],0)]}class tp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new el(`Invalid padding: ${t}`);if(i<0)throw new el(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new el(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new el(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=as.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(as.fromNumber(i)));return o.compare(NC)===1&&(o=new as([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ky(e),[i,o]=Qy(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new tp(l,o,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.fe===0)return;const t=Ky(e),[i,o]=Qy(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class el extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,kl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Gc(Ue.min(),o,new Et($e),Ti(),Ke())}}class kl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new kl(i,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class _0{constructor(e,t){this.targetId=e,this.De=t}}class w0{constructor(e,t,i=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Yy{constructor(){this.ve=0,this.Ce=Jy(),this.Fe=rn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ke(),t=Ke(),i=Ke();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ve(38017,{changeType:l})}})),new kl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Jy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class jC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ti(),this.je=Yu(),this.Je=Yu(),this.He=new Et($e)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(cf(l))if(i===0){const h=new be(l.path);this.Xe(t,h,mn.newNoDocument(h,Ue.min()))}else it(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const p=this._t(e),m=p?this.ut(p,e,h):1;if(m!==0){this.rt(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=fs(i).toUint8Array()}catch(m){if(m instanceof q_)return cs("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new tp(h,o,l)}catch(m){return cs(m instanceof el?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.fe===0?null:p}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.We.lt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const p=this.st(h);if(p){if(l.current&&cf(p.target)){const m=new be(p.target.path);this.Tt(m).has(h)||this.It(h,m)||this.Xe(h,m,mn.newNoDocument(m,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let i=Ke();this.Je.forEach(((l,h)=>{let p=!0;h.forEachWhile((m=>{const v=this.st(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const o=new Gc(e,t,this.He,this.ze,i);return this.ze=Ti(),this.je=Yu(),this.Je=Yu(),this.He=new Et($e),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Yy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ut($e),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ut($e),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yy),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Yu(){return new Et(be.comparator)}function Jy(){return new Et(be.comparator)}const DC={asc:"ASCENDING",desc:"DESCENDING"},VC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LC={and:"AND",or:"OR"};class OC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hf(r,e){return r.useProto3Json||Uc(e)?e:{value:e}}function Pc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function x0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function MC(r,e){return Pc(r,e.toTimestamp())}function Gr(r){return it(!!r,49232),Ue.fromTimestamp((function(t){const i=hs(t);return new gt(i.seconds,i.nanos)})(r))}function np(r,e){return ff(r,e).canonicalString()}function ff(r,e){const t=(function(o){return new mt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function E0(r){const e=mt.fromString(r);return it(R0(e),10190,{key:e.toString()}),e}function pf(r,e){return np(r.databaseId,e.path)}function zh(r,e){const t=E0(e);if(t.get(1)!==r.databaseId.projectId)throw new Re(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Re(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new be(S0(t))}function T0(r,e){return np(r.databaseId,e)}function FC(r){const e=E0(r);return e.length===4?mt.emptyPath():S0(e)}function mf(r){return new mt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function S0(r){return it(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Xy(r,e,t){return{name:pf(r,e),fields:t.value.mapValue.fields}}function UC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ve(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(it(w===void 0||typeof w=="string",58123),rn.fromBase64String(w||"")):(it(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),rn.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(v){const w=v.code===void 0?ie.UNKNOWN:v0(v.code);return new Re(w,v.message||"")})(h);t=new w0(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=zh(r,i.document.name),l=Gr(i.document.updateTime),h=i.document.createTime?Gr(i.document.createTime):Ue.min(),p=new Dn({mapValue:{fields:i.document.fields}}),m=mn.newFoundDocument(o,l,h,p),v=i.targetIds||[],w=i.removedTargetIds||[];t=new cc(v,w,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=zh(r,i.document),l=i.readTime?Gr(i.readTime):Ue.min(),h=mn.newNoDocument(o,l),p=i.removedTargetIds||[];t=new cc([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=zh(r,i.document),l=i.removedTargetIds||[];t=new cc([],l,o,null)}else{if(!("filter"in e))return Ve(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new AC(o,l),p=i.targetId;t=new _0(p,h)}}return t}function zC(r,e){let t;if(e instanceof Pl)t={update:Xy(r,e.key,e.value)};else if(e instanceof Zf)t={delete:pf(r,e.key)};else if(e instanceof Ts)t={update:Xy(r,e.key,e.data),updateMask:YC(e.fieldMask)};else{if(!(e instanceof RC))return Ve(16599,{Rt:e.type});t={verify:pf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const p=h.transform;if(p instanceof Cc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof vl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof _l)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Rc)return{fieldPath:h.field.canonicalString(),increment:p.Ee};throw Ve(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:MC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ve(27497)})(r,e.precondition)),t}function BC(r,e){return r&&r.length>0?(it(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?Gr(o.updateTime):Gr(l);return h.isEqual(Ue.min())&&(h=Gr(l)),new SC(h,o.transformResults||[])})(t,e)))):[]}function $C(r,e){return{documents:[T0(r,e.path)]}}function WC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=T0(r,o);const l=(function(v){if(v.length!==0)return C0(Jr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((w=>(function(I){return{field:Wo(I.field),direction:GC(I.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=hf(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function HC(r){let e=FC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){it(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(T){const I=I0(T);return I instanceof Jr&&n0(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((I=>(function(Q){return new Ic(Ho(Q.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(I)))})(t.orderBy));let p=null;t.limit&&(p=(function(T){let I;return I=typeof T=="object"?T.value:T,Uc(I)?null:I})(t.limit));let m=null;t.startAt&&(m=(function(T){const I=!!T.before,F=T.values||[];return new Sc(F,I)})(t.startAt));let v=null;return t.endAt&&(v=(function(T){const I=!T.before,F=T.values||[];return new Sc(F,I)})(t.endAt)),cC(e,o,h,l,p,"F",m,v)}function qC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function I0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ho(t.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ho(t.unaryFilter.field);return Ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ho(t.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ho(t.unaryFilter.field);return Ft.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ft.create(Ho(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Jr.create(t.compositeFilter.filters.map((i=>I0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(t.compositeFilter.op))})(r):Ve(30097,{filter:r})}function GC(r){return DC[r]}function KC(r){return VC[r]}function QC(r){return LC[r]}function Wo(r){return{fieldPath:r.canonicalString()}}function Ho(r){return tn.fromServerFormat(r.fieldPath)}function C0(r){return r instanceof Ft?(function(t){if(t.op==="=="){if(Fy(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NAN"}};if(My(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fy(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NOT_NAN"}};if(My(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wo(t.field),op:KC(t.op),value:t.value}}})(r):r instanceof Jr?(function(t){const i=t.getFilters().map((o=>C0(o)));return i.length===1?i[0]:{compositeFilter:{op:QC(t.op),filters:i}}})(r):Ve(54877,{filter:r})}function YC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function R0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t,i,o,l=Ue.min(),h=Ue.min(),p=rn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.gt=e}}function XC(r){const e=HC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?df(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Dn=new eR}addToCollectionParentIndex(e,t){return this.Dn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ds.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class eR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ut(mt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ut(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P0=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(P0,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ra(0)}static ur(){return new ra(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LruGarbageCollector",tR=1048576;function tv([r,e],[t,i]){const o=$e(r,t);return o===0?$e(e,i):o}class nR{constructor(e){this.Tr=e,this.buffer=new Ut(tv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();tv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){xe(ev,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ha(t)?xe(ev,"Ignoring IndexedDB error during garbage collection: ",t):await da(t)}await this.Rr(3e5)}))}}class iR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Fc.ue);const i=new nR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Zy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,p,m,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,p=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(v=Date.now(),Bo()<=Ge.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${l} targets in `+(m-p)+`ms
	Removed ${T} documents in `+(v-m)+`ms
Total Duration: ${v-w}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function sR(r,e){return new iR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.changes=new eo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ll(i.mutation,o,qn.empty(),gt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ke()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ke()){const o=qs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Za();return l.forEach(((p,m)=>{h=h.insert(p,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=qs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ke())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,o){let l=Ti();const h=al(),p=(function(){return al()})();return t.forEach(((m,v)=>{const w=i.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof Ts)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),ll(w.mutation,v,w.mutation.getFieldMask(),gt.now())):h.set(v.key,qn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,w)=>h.set(v,w))),t.forEach(((v,w)=>{var T;return p.set(v,new aR(w,(T=h.get(v))!==null&&T!==void 0?T:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=al();let o=new Et(((h,p)=>h-p)),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let w=i.get(m)||qn.empty();w=p.applyToLocalView(v,w),i.set(m,w);const T=(o.get(p.batchId)||Ke()).add(m);o=o.insert(p.batchId,T)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),v=m.key,w=m.value,T=c0();w.forEach((I=>{if(!l.has(I)){const F=g0(t.get(I),i.get(I));F!==null&&T.set(I,F),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,T))}return ne.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return be.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ne.resolve(qs());let p=pl,m=l;return h.next((v=>ne.forEach(v,((w,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),l.get(w)?ne.resolve():this.remoteDocumentCache.getEntry(e,w).next((I=>{m=m.insert(w,I)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,Ke()))).next((w=>({batchId:p,changes:u0(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((i=>{let o=Za();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Za();return this.indexManager.getCollectionParents(e,l).next((p=>ne.forEach(p,(m=>{const v=(function(T,I){return new Bc(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((w=>{w.forEach(((T,I)=>{h=h.insert(T,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((m,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,mn.newInvalidDocument(w)))}));let p=Za();return h.forEach(((m,v)=>{const w=l.get(m);w!==void 0&&ll(w.mutation,v,qn.empty(),gt.now()),Wc(t,v)&&(p=p.insert(m,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Gr(o.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:XC(o.bundledQuery),readTime:Gr(o.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.overlays=new Et(be.comparator),this.kr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=qs();return ne.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const o=qs(),l=t.length+1,h=new be(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const m=p.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new Et(((v,w)=>v-w));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let w=l.get(v.largestBatchId);w===null&&(w=qs(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const p=qs(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,w)=>p.set(v,w))),!(p.size()>=o)););return ne.resolve(p)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new kC(t,i));let l=this.kr.get(t);l===void 0&&(l=Ke(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this.qr=new Ut(Kt.Qr),this.$r=new Ut(Kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Kt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Kt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new be(new mt([])),i=new Kt(t,e),o=new Kt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new be(new mt([])),i=new Kt(t,e),o=new Kt(t,e+1);let l=Ke();return this.$r.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Kt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Kt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return be.comparator(e.key,t.key)||$e(e.Hr,t.Hr)}static Ur(e,t){return $e(e.Hr,t.Hr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ut(Kt.Qr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new PC(l,t,i,o);this.mutationQueue.push(h);for(const p of o)this.Yr=this.Yr.add(new Kt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ne.resolve(h)}lookupMutationBatch(e,t){return ne.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?qf:this.er-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Kt(t,0),o=new Kt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(h=>{const p=this.Zr(h.Hr);l.push(p)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ut($e);return t.forEach((o=>{const l=new Kt(o,0),h=new Kt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(p=>{i=i.add(p.Hr)}))})),ne.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;be.isDocumentKey(l)||(l=l.child(""));const h=new Kt(new be(l),0);let p=new Ut($e);return this.Yr.forEachWhile((m=>{const v=m.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(m.Hr)),!0)}),h),ne.resolve(this.ei(p))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){it(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ne.forEach(t.mutations,(o=>{const l=new Kt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Kt(t,0),o=this.Yr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.ni=e,this.docs=(function(){return new Et(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let i=Ti();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():mn.newInvalidDocument(o))})),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Ti();const h=t.path,p=new be(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:v,value:{document:w}}=m.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||BI(zI(w),i)<=0||(o.has(w.key)||Wc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ve(9500)}ri(e,t){return ne.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new pR(this)}getSize(e){return ne.resolve(this.size)}}class pR extends oR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),ne.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.persistence=e,this.ii=new eo((t=>Qf(t)),Yf),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.si=0,this.oi=new rp,this.targetCount=0,this._i=ra.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ne.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ra(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.hr(t),ne.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ne.waitFor(l).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Fc(0),this.ci=!1,this.ci=!0,this.li=new dR,this.referenceDelegate=e(this),this.hi=new mR(this),this.indexManager=new ZC,this.remoteDocumentCache=(function(o){return new fR(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new JC(t),this.Ti=new uR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new hR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){xe("MemoryPersistence","Starting transaction:",e);const o=new gR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ne.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class gR extends WI{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Ai=new rp,this.Ri=null}static Vi(e){return new ip(e)}get mi(){if(this.Ri)return this.Ri;throw Ve(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.mi,(i=>{const o=be.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ue.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ne.or([()=>ne.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class kc{constructor(e,t){this.persistence=e,this.gi=new eo((i=>GI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=sR(this,t)}static Vi(e,t){return new kc(e,t)}Ii(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return ne.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?ne.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((p=>{p||(i++,l.removeEntry(h,Ue.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ne.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ac(e.data.value)),t}Sr(e,t,i){return ne.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return ne.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Ke(),o=Ke();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new sp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return JE()?8:HI(gn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new yR;return this.ws(e,t,h).next((p=>{if(l.result=p,this.Rs)return this.Ss(e,t,h,p.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Bo()<=Ge.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",$o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ne.resolve()):(Bo()<=Ge.DEBUG&&xe("QueryEngine","Query:",$o(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Bo()<=Ge.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",$o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(t))):ne.resolve())}ps(e,t){if($y(t))return ne.resolve(null);let i=qr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=df(t,null,"F"),i=qr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Ke(...l);return this.gs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((m=>{const v=this.bs(t,p);return this.Ds(t,v,h,m.readTime)?this.ps(e,df(t,null,"F")):this.vs(e,v,t,m)}))))})))))}ys(e,t,i,o){return $y(t)||o.isEqual(Ue.min())?ne.resolve(null):this.gs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?ne.resolve(null):(Bo()<=Ge.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),$o(t)),this.vs(e,h,t,UI(o,pl)).next((p=>p)))}))}bs(e,t){let i=new Ut(a0(e));return t.forEach(((o,l)=>{Wc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Bo()<=Ge.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",$o(t)),this.gs.getDocumentsMatchingQuery(e,t,ds.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="LocalStore",_R=3e8;class wR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new Et($e),this.Ms=new eo((l=>Qf(l)),Yf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function xR(r,e,t,i){return new wR(r,e,t,i)}async function A0(r,e){const t=ze(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],p=[];let m=Ke();for(const v of o){h.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}for(const v of l){p.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(i,m).next((v=>({Bs:v,removedBatchIds:h,addedBatchIds:p})))}))}))}function ER(r,e){const t=ze(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(p,m,v,w){const T=v.batch,I=T.keys();let F=ne.resolve();return I.forEach((Q=>{F=F.next((()=>w.getEntry(m,Q))).next((X=>{const V=v.docVersions.get(Q);it(V!==null,48541),X.version.compareTo(V)<0&&(T.applyToRemoteDocument(X,v),X.isValidDocument()&&(X.setReadTime(v.commitVersion),w.addEntry(X)))}))})),F.next((()=>p.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let m=Ke();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(m=m.add(p.batch.mutations[v].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function b0(r){const e=ze(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function TR(r,e){const t=ze(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const p=[];e.targetChanges.forEach(((w,T)=>{const I=o.get(T);if(!I)return;p.push(t.hi.removeMatchingKeys(l,w.removedDocuments,T).next((()=>t.hi.addMatchingKeys(l,w.addedDocuments,T))));let F=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?F=F.withResumeToken(rn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):w.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(w.resumeToken,i)),o=o.insert(T,F),(function(X,V,te){return X.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=_R?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(I,F,w)&&p.push(t.hi.updateTargetData(l,F))}));let m=Ti(),v=Ke();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),p.push(SR(l,h,e.documentUpdates).next((w=>{m=w.Ls,v=w.ks}))),!i.isEqual(Ue.min())){const w=t.hi.getLastRemoteSnapshotVersion(l).next((T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(w)}return ne.waitFor(p).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.Fs=o,l)))}function SR(r,e,t){let i=Ke(),o=Ke();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Ti();return t.forEach(((p,m)=>{const v=l.get(p);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Ue.min())?(e.removeEntry(p,m.readTime),h=h.insert(p,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),h=h.insert(p,m)):xe(op,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",m.version)})),{Ls:h,ks:o}}))}function IR(r,e){const t=ze(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=qf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function CR(r,e){const t=ze(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,ne.resolve(o)):t.hi.allocateTargetId(i).next((h=>(o=new ts(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function gf(r,e,t){const i=ze(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ha(h))throw h;xe(op,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function nv(r,e,t){const i=ze(r);let o=Ue.min(),l=Ke();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,v,w){const T=ze(m),I=T.Ms.get(w);return I!==void 0?ne.resolve(T.Fs.get(I)):T.hi.getTargetData(v,w)})(i,h,qr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,p.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Ue.min(),t?l:Ke()))).next((p=>(RR(i,fC(e),p),{documents:p,qs:l})))))}function RR(r,e,t){let i=r.xs.get(e)||Ue.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class rv{constructor(){this.activeTargetIds=_C()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PR{constructor(){this.Fo=new rv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new rv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="ConnectivityMonitor";class sv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){xe(iv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){xe(iv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function yf(){return Ju===null?Ju=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="RestConnection",AR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Ec?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=yf(),p=this.Go(e,t.toUriEncodedString());xe(Bh,`Sending RPC '${e}' ${h}:`,p,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,o,l);const{host:v}=new URL(p),w=aa(v);return this.jo(e,p,m,i,w).then((T=>(xe(Bh,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw cs(Bh,`RPC '${e}' ${h} failed with error: `,T,"url: ",p,"request:",i),T}))}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ca})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=AR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class jR extends bR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=yf();return new Promise(((p,m)=>{const v=new D_;v.setWithCredentials(!0),v.listenOnce(V_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case oc.NO_ERROR:const T=v.getResponseJson();xe(fn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),p(T);break;case oc.TIMEOUT:xe(fn,`RPC '${e}' ${h} timed out`),m(new Re(ie.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:const I=v.getStatus();if(xe(fn,`RPC '${e}' ${h} failed with status:`,I,"response text:",v.getResponseText()),I>0){let F=v.getResponseJson();Array.isArray(F)&&(F=F[0]);const Q=F==null?void 0:F.error;if(Q&&Q.status&&Q.message){const X=(function(te){const pe=te.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(pe)>=0?pe:ie.UNKNOWN})(Q.status);m(new Re(X,Q.message))}else m(new Re(ie.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new Re(ie.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{c_:e,streamId:h,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{xe(fn,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);xe(fn,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",w,i,15)}))}P_(e,t,i){const o=yf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=M_(),p=O_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const w=l.join("");xe(fn,`Creating RPC '${e}' stream ${o}: ${w}`,m);const T=h.createWebChannel(w,m);this.T_(T);let I=!1,F=!1;const Q=new NR({Ho:V=>{F?xe(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(I||(xe(fn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),xe(fn,`RPC '${e}' stream ${o} sending:`,V),T.send(V))},Yo:()=>T.close()}),X=(V,te,pe)=>{V.listen(te,(de=>{try{pe(de)}catch(re){setTimeout((()=>{throw re}),0)}}))};return X(T,Xa.EventType.OPEN,(()=>{F||(xe(fn,`RPC '${e}' stream ${o} transport opened.`),Q.s_())})),X(T,Xa.EventType.CLOSE,(()=>{F||(F=!0,xe(fn,`RPC '${e}' stream ${o} transport closed`),Q.__(),this.I_(T))})),X(T,Xa.EventType.ERROR,(V=>{F||(F=!0,cs(fn,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),Q.__(new Re(ie.UNAVAILABLE,"The operation could not be completed")))})),X(T,Xa.EventType.MESSAGE,(V=>{var te;if(!F){const pe=V.data[0];it(!!pe,16349);const de=pe,re=(de==null?void 0:de.error)||((te=de[0])===null||te===void 0?void 0:te.error);if(re){xe(fn,`RPC '${e}' stream ${o} received error:`,re);const le=re.status;let ue=(function(R){const P=Nt[R];if(P!==void 0)return v0(P)})(le),b=re.message;ue===void 0&&(ue=ie.INTERNAL,b="Unknown error status: "+le+" with message "+re.message),F=!0,Q.__(new Re(ue,b)),T.close()}else xe(fn,`RPC '${e}' stream ${o} received:`,pe),Q.a_(pe)}})),X(p,L_.STAT_EVENT,(V=>{V.stat===sf.PROXY?xe(fn,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===sf.NOPROXY&&xe(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Q.o_()}),0),Q}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(r){return new OC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="PersistentStream";class j0{constructor(e,t,i,o,l,h,p,m){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new N0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ei(t.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new Re(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return xe(ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(xe(ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DR extends j0{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=UC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ue.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ue.min():h.readTime?Gr(h.readTime):Ue.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=mf(this.serializer),t.addTarget=(function(l,h){let p;const m=h.target;if(p=cf(m)?{documents:$C(l,m)}:{query:WC(l,m).Vt},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=x0(l,h.resumeToken);const v=hf(l,h.expectedCount);v!==null&&(p.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ue.min())>0){p.readTime=Pc(l,h.snapshotVersion.toTimestamp());const v=hf(l,h.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=qC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=mf(this.serializer),t.removeTarget=e,this.k_(t)}}class VR extends j0{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=BC(e.writeResults,e.commitTime),i=Gr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=mf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>zC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{}class OR extends LR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Re(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,ff(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Re(ie.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Jo(e,ff(t,i),o,h,p,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Re(ie.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class MR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ei(t),this._a=!1):xe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="RemoteStore";class FR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{i.enqueueAndForget((async()=>{to(this)&&(xe(Zs,"Restarting streams for network reachability change."),await(async function(m){const v=ze(m);v.Ia.add(4),await Al(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Qc(v)})(this))}))})),this.Aa=new MR(i,o)}}async function Qc(r){if(to(r))for(const e of r.da)await e(!0)}async function Al(r){for(const e of r.da)await e(!1)}function D0(r,e){const t=ze(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),cp(t)?up(t):fa(t).x_()&&lp(t,e))}function ap(r,e){const t=ze(r),i=fa(t);t.Ta.delete(e),i.x_()&&V0(t,e),t.Ta.size===0&&(i.x_()?i.B_():to(t)&&t.Aa.set("Unknown"))}function lp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fa(r).H_(e)}function V0(r,e){r.Ra.$e(e),fa(r).Y_(e)}function up(r){r.Ra=new jC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),fa(r).start(),r.Aa.aa()}function cp(r){return to(r)&&!fa(r).M_()&&r.Ta.size>0}function to(r){return ze(r).Ia.size===0}function L0(r){r.Ra=void 0}async function UR(r){r.Aa.set("Online")}async function zR(r){r.Ta.forEach(((e,t)=>{lp(r,e)}))}async function BR(r,e){L0(r),cp(r)?(r.Aa.la(e),up(r)):r.Aa.set("Unknown")}async function $R(r,e,t){if(r.Aa.set("Online"),e instanceof w0&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const p of l.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ta.delete(p),o.Ra.removeTarget(p))})(r,e)}catch(i){xe(Zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ac(r,i)}else if(e instanceof cc?r.Ra.Ye(e):e instanceof _0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Ue.min()))try{const i=await b0(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const p=l.Ra.Pt(h);return p.targetChanges.forEach(((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const w=l.Ta.get(v);w&&l.Ta.set(v,w.withResumeToken(m.resumeToken,h))}})),p.targetMismatches.forEach(((m,v)=>{const w=l.Ta.get(m);if(!w)return;l.Ta.set(m,w.withResumeToken(rn.EMPTY_BYTE_STRING,w.snapshotVersion)),V0(l,m);const T=new ts(w.target,m,v,w.sequenceNumber);lp(l,T)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){xe(Zs,"Failed to raise snapshot:",i),await Ac(r,i)}}async function Ac(r,e,t){if(!ha(e))throw e;r.Ia.add(1),await Al(r),r.Aa.set("Offline"),t||(t=()=>b0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{xe(Zs,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Qc(r)}))}function O0(r,e){return e().catch((t=>Ac(r,t,e)))}async function Yc(r){const e=ze(r),t=ms(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qf;for(;WR(e);)try{const o=await IR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,HR(e,o)}catch(o){await Ac(e,o)}M0(e)&&F0(e)}function WR(r){return to(r)&&r.Pa.length<10}function HR(r,e){r.Pa.push(e);const t=ms(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function M0(r){return to(r)&&!ms(r).M_()&&r.Pa.length>0}function F0(r){ms(r).start()}async function qR(r){ms(r).na()}async function GR(r){const e=ms(r);for(const t of r.Pa)e.X_(t.mutations)}async function KR(r,e,t){const i=r.Pa.shift(),o=ep.from(i,e,t);await O0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Yc(r)}async function QR(r,e){e&&ms(r).Z_&&await(async function(i,o){if((function(h){return bC(h)&&h!==ie.ABORTED})(o.code)){const l=i.Pa.shift();ms(i).N_(),await O0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Yc(i)}})(r,e),M0(r)&&F0(r)}async function av(r,e){const t=ze(r);t.asyncQueue.verifyOperationInProgress(),xe(Zs,"RemoteStore received new credentials");const i=to(t);t.Ia.add(3),await Al(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Qc(t)}async function YR(r,e){const t=ze(r);e?(t.Ia.delete(2),await Qc(t)):e||(t.Ia.add(2),await Al(t),t.Aa.set("Unknown"))}function fa(r){return r.Va||(r.Va=(function(t,i,o){const l=ze(t);return l.ia(),new DR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:UR.bind(null,r),e_:zR.bind(null,r),n_:BR.bind(null,r),J_:$R.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),cp(r)?up(r):r.Aa.set("Unknown")):(await r.Va.stop(),L0(r))}))),r.Va}function ms(r){return r.ma||(r.ma=(function(t,i,o){const l=ze(t);return l.ia(),new VR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:qR.bind(null,r),n_:QR.bind(null,r),ea:GR.bind(null,r),ta:KR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await Yc(r)):(await r.ma.stop(),r.Pa.length>0&&(xe(Zs,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,p=new dp(e,t,h,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(r,e){if(Ei("AsyncQueue",`${e}: ${r}`),ha(r))return new Re(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{static emptySet(e){return new Jo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||be.comparator(t.key,i.key):(t,i)=>be.comparator(t.key,i.key),this.keyedMap=Za(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Jo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.fa=new Et(be.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ve(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ia{constructor(e,t,i,o,l,h,p,m,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new ia(e,t,Jo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class XR{constructor(){this.queries=uv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=ze(t),l=o.queries;o.queries=uv(),l.forEach(((h,p)=>{for(const m of p.wa)m.onError(i)}))})(this,new Re(ie.ABORTED,"Firestore shutting down"))}}function uv(){return new eo((r=>o0(r)),$c)}async function U0(r,e){const t=ze(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new JR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=hp(h,`Initialization of query '${$o(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&fp(t)}async function z0(r,e){const t=ze(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ZR(r,e){const t=ze(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.wa)p.Ca(o)&&(i=!0);h.ya=o}}i&&fp(t)}function eP(r,e,t){const i=ze(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function fp(r){r.Da.forEach((e=>{e.next()}))}var vf,cv;(cv=vf||(vf={})).Fa="default",cv.Cache="cache";class B0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ia(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==vf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.key=e}}class W0{constructor(e){this.key=e}}class tP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ke(),this.mutatedKeys=Ke(),this.Xa=a0(e),this.eu=new Jo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new lv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,T)=>{const I=o.get(w),F=Wc(this.query,T)?T:null,Q=!!I&&this.mutatedKeys.has(I.key),X=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let V=!1;I&&F?I.data.isEqual(F.data)?Q!==X&&(i.track({type:3,doc:F}),V=!0):this.iu(I,F)||(i.track({type:2,doc:F}),V=!0,(m&&this.Xa(F,m)>0||v&&this.Xa(F,v)<0)&&(p=!0)):!I&&F?(i.track({type:0,doc:F}),V=!0):I&&!F&&(i.track({type:1,doc:I}),V=!0,(m||v)&&(p=!0)),V&&(F?(h=h.add(F),l=X?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{eu:h,ru:i,Ds:p,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((w,T)=>(function(F,Q){const X=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{At:V})}};return X(F)-X(Q)})(w.type,T.type)||this.Xa(w.doc,T.doc))),this.su(i),o=o!=null&&o;const p=t&&!o?this.ou():[],m=this.Za.size===0&&this.current&&!o?1:0,v=m!==this.Ya;return this.Ya=m,h.length!==0||v?{snapshot:new ia(this.query,e.eu,l,h,e.mutatedKeys,m===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new lv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ke(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new W0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new $0(i))})),t}uu(e){this.Ha=e.qs,this.Za=Ke();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ia.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const pp="SyncEngine";class nP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class rP{constructor(e){this.key=e,this.lu=!1}}class iP{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new eo((p=>o0(p)),$c),this.Tu=new Map,this.Iu=new Set,this.du=new Et(be.comparator),this.Eu=new Map,this.Au=new rp,this.Ru={},this.Vu=new Map,this.mu=ra.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function sP(r,e,t=!0){const i=Y0(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await H0(i,e,t,!0),o}async function oP(r,e){const t=Y0(r);await H0(t,e,!0,!1)}async function H0(r,e,t,i){const o=await CR(r.localStore,qr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await aP(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&D0(r.remoteStore,o),p}async function aP(r,e,t,i,o){r.gu=(T,I,F)=>(async function(X,V,te,pe){let de=V.view.nu(te);de.Ds&&(de=await nv(X.localStore,V.query,!1).then((({documents:b})=>V.view.nu(b,de))));const re=pe&&pe.targetChanges.get(V.targetId),le=pe&&pe.targetMismatches.get(V.targetId)!=null,ue=V.view.applyChanges(de,X.isPrimaryClient,re,le);return hv(X,V.targetId,ue._u),ue.snapshot})(r,T,I,F);const l=await nv(r.localStore,e,!0),h=new tP(e,l.qs),p=h.nu(l.documents),m=kl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(p,r.isPrimaryClient,m);hv(r,t,v._u);const w=new nP(e,t,h);return r.Pu.set(e,w),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function lP(r,e,t){const i=ze(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((h=>!$c(h,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await gf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ap(i.remoteStore,o.targetId),_f(i,o.targetId)})).catch(da)):(_f(i,o.targetId),await gf(i.localStore,o.targetId,!0))}async function uP(r,e){const t=ze(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ap(t.remoteStore,i.targetId))}async function cP(r,e,t){const i=yP(r);try{const o=await(function(h,p){const m=ze(h),v=gt.now(),w=p.reduce(((F,Q)=>F.add(Q.key)),Ke());let T,I;return m.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let Q=Ti(),X=Ke();return m.Os.getEntries(F,w).next((V=>{Q=V,Q.forEach(((te,pe)=>{pe.isValidDocument()||(X=X.add(te))}))})).next((()=>m.localDocuments.getOverlayedDocuments(F,Q))).next((V=>{T=V;const te=[];for(const pe of p){const de=CC(pe,T.get(pe.key).overlayedDocument);de!=null&&te.push(new Ts(pe.key,de,Z_(de.value.mapValue),or.exists(!0)))}return m.mutationQueue.addMutationBatch(F,v,te,p)})).next((V=>{I=V;const te=V.applyToLocalDocumentSet(T,X);return m.documentOverlayCache.saveOverlays(F,V.batchId,te)}))})).then((()=>({batchId:I.batchId,changes:u0(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,p,m){let v=h.Ru[h.currentUser.toKey()];v||(v=new Et($e)),v=v.insert(p,m),h.Ru[h.currentUser.toKey()]=v})(i,o.batchId,t),await bl(i,o.changes),await Yc(i.remoteStore)}catch(o){const l=hp(o,"Failed to persist write");t.reject(l)}}async function q0(r,e){const t=ze(r);try{const i=await TR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Eu.get(l);h&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?it(h.lu,14607):o.removedDocuments.size>0&&(it(h.lu,42227),h.lu=!1))})),await bl(t,i,e)}catch(i){await da(i)}}function dv(r,e,t){const i=ze(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const m=ze(h);m.onlineState=p;let v=!1;m.queries.forEach(((w,T)=>{for(const I of T.wa)I.va(p)&&(v=!0)})),v&&fp(m)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dP(r,e,t){const i=ze(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new Et(be.comparator);h=h.insert(l,mn.newNoDocument(l,Ue.min()));const p=Ke().add(l),m=new Gc(Ue.min(),new Map,new Et($e),h,p);await q0(i,m),i.du=i.du.remove(l),i.Eu.delete(e),mp(i)}else await gf(i.localStore,e,!1).then((()=>_f(i,e,t))).catch(da)}async function hP(r,e){const t=ze(r),i=e.batch.batchId;try{const o=await ER(t.localStore,e);K0(t,i,null),G0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await bl(t,o)}catch(o){await da(o)}}async function fP(r,e,t){const i=ze(r);try{const o=await(function(h,p){const m=ze(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return m.mutationQueue.lookupMutationBatch(v,p).next((T=>(it(T!==null,37113),w=T.keys(),m.mutationQueue.removeMutationBatch(v,T)))).next((()=>m.mutationQueue.performConsistencyCheck(v))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(v,w,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>m.localDocuments.getDocuments(v,w)))}))})(i.localStore,e);K0(i,e,t),G0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await bl(i,o)}catch(o){await da(o)}}function G0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function K0(r,e,t){const i=ze(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function _f(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||Q0(r,i)}))}function Q0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(ap(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),mp(r))}function hv(r,e,t){for(const i of t)i instanceof $0?(r.Au.addReference(i.key,e),pP(r,i)):i instanceof W0?(xe(pp,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||Q0(r,i.key)):Ve(19791,{yu:i})}function pP(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(xe(pp,"New document in limbo: "+t),r.Iu.add(i),mp(r))}function mp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new be(mt.fromString(e)),i=r.mu.next();r.Eu.set(i,new rP(t)),r.du=r.du.insert(t,i),D0(r.remoteStore,new ts(qr(Jf(t.path)),i,"TargetPurposeLimboResolution",Fc.ue))}}async function bl(r,e,t){const i=ze(r),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach(((p,m)=>{h.push(i.gu(m,e,t).then((v=>{var w;if((v||t)&&i.isPrimaryClient){const T=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(m.targetId))===null||w===void 0?void 0:w.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(v){o.push(v);const T=sp.Es(m.targetId,v);l.push(T)}})))})),await Promise.all(h),i.hu.J_(o),await(async function(m,v){const w=ze(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ne.forEach(v,(I=>ne.forEach(I.Is,(F=>w.persistence.referenceDelegate.addReference(T,I.targetId,F))).next((()=>ne.forEach(I.ds,(F=>w.persistence.referenceDelegate.removeReference(T,I.targetId,F)))))))))}catch(T){if(!ha(T))throw T;xe(op,"Failed to update sequence numbers: "+T)}for(const T of v){const I=T.targetId;if(!T.fromCache){const F=w.Fs.get(I),Q=F.snapshotVersion,X=F.withLastLimboFreeSnapshotVersion(Q);w.Fs=w.Fs.insert(I,X)}}})(i.localStore,l))}async function mP(r,e){const t=ze(r);if(!t.currentUser.isEqual(e)){xe(pp,"User change. New user:",e.toKey());const i=await A0(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((p=>{p.forEach((m=>{m.reject(new Re(ie.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bl(t,i.Bs)}}function gP(r,e){const t=ze(r),i=t.Eu.get(e);if(i&&i.lu)return Ke().add(i.key);{let o=Ke();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const p=t.Pu.get(h);o=o.unionWith(p.view.tu)}return o}}function Y0(r){const e=ze(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=q0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dP.bind(null,e),e.hu.J_=ZR.bind(null,e.eventManager),e.hu.pu=eP.bind(null,e.eventManager),e}function yP(r){const e=ze(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fP.bind(null,e),e}class bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return xR(this.persistence,new vR,e.initialUser,this.serializer)}Du(e){return new k0(ip.Vi,this.serializer)}bu(e){return new PR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bc.provider={build:()=>new bc};class vP extends bc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){it(this.persistence.referenceDelegate instanceof kc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new rR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new k0((i=>kc.Vi(i,t)),this.serializer)}}class wf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mP.bind(null,this.syncEngine),await YR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XR})()}createDatastore(e){const t=Kc(e.databaseInfo.databaseId),i=(function(l){return new jR(l)})(e.databaseInfo);return(function(l,h,p,m){return new OR(l,h,p,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,p){return new FR(i,o,l,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>dv(this.syncEngine,t,0)),(function(){return sv.C()?new sv:new kR})())}createSyncEngine(e,t){return(function(o,l,h,p,m,v,w){const T=new iP(o,l,h,p,m,v);return w&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=ze(o);xe(Zs,"RemoteStore shutting down."),l.Ia.add(5),await Al(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}wf.provider={build:()=>new wf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class _P{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=pn.UNAUTHENTICATED,this.clientId=Wf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{xe(gs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(xe(gs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=hp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Wh(r,e){r.asyncQueue.verifyOperationInProgress(),xe(gs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await A0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{cs("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{xe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{cs("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function fv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await wP(r);xe(gs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>av(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>av(e.remoteStore,o))),r._onlineComponents=e}async function wP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){xe(gs,"Using user provided OfflineComponentProvider");try{await Wh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;cs("Error using user provided cache. Falling back to memory cache: "+t),await Wh(r,new bc)}}else xe(gs,"Using default OfflineComponentProvider"),await Wh(r,new vP(void 0));return r._offlineComponents}async function X0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(xe(gs,"Using user provided OnlineComponentProvider"),await fv(r,r._uninitializedComponentsProvider._online)):(xe(gs,"Using default OnlineComponentProvider"),await fv(r,new wf))),r._onlineComponents}function xP(r){return X0(r).then((e=>e.syncEngine))}async function Z0(r){const e=await X0(r),t=e.eventManager;return t.onListen=sP.bind(null,e.syncEngine),t.onUnlisten=lP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uP.bind(null,e.syncEngine),t}function EP(r,e,t={}){const i=new _i;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,m,v){const w=new J0({next:I=>{w.Ou(),h.enqueueAndForget((()=>z0(l,T)));const F=I.docs.has(p);!F&&I.fromCache?v.reject(new Re(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&I.fromCache&&m&&m.source==="server"?v.reject(new Re(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(I)},error:I=>v.reject(I)}),T=new B0(Jf(p.path),w,{includeMetadataChanges:!0,ka:!0});return U0(l,T)})(await Z0(r),r.asyncQueue,e,t,i))),i.promise}function TP(r,e,t={}){const i=new _i;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,m,v){const w=new J0({next:I=>{w.Ou(),h.enqueueAndForget((()=>z0(l,T))),I.fromCache&&m.source==="server"?v.reject(new Re(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(I)},error:I=>v.reject(I)}),T=new B0(p,w,{includeMetadataChanges:!0,ka:!0});return U0(l,T)})(await Z0(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="firestore.googleapis.com",mv=!0;class gv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tw,this.ssl=mv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:mv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tR)throw new Re(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ew((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Re(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Re(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Re(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new AI;switch(i.type){case"firstParty":return new DI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Re(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=pv.get(t);i&&(xe("ComponentProvider","Removing Datastore"),pv.delete(t),i.terminate())})(this),Promise.resolve()}}function SP(r,e,t,i={}){var o;r=Pr(r,Jc);const l=aa(e),h=r._getSettings(),p=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${t}`;l&&($v(`https://${m}`),Wv("Firestore",!0)),h.host!==tw&&h.host!==m&&cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:m,ssl:l,emulatorOptions:i});if(!Ks(v,p)&&(r._setSettings(v),i.mockUserToken)){let w,T;if(typeof i.mockUserToken=="string")w=i.mockUserToken,T=pn.MOCK_USER;else{w=BE(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new Re(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new pn(I)}r._authCredentials=new bI(new U_(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Xc(this.firestore,e,this._query)}}class Dt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}toJSON(){return{type:Dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Rl(t,Dt._jsonSchema))return new Dt(e,i||null,new be(mt.fromString(t.referencePath)))}}Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:jt("string",Dt._jsonSchemaVersion),referencePath:jt("string")};class ls extends Xc{constructor(e,t,i){super(e,t,Jf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new be(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function Wn(r,e,...t){if(r=nn(r),B_("collection","path",e),r instanceof Jc){const i=mt.fromString(e,...t);return Ay(i),new ls(r,null,i)}{if(!(r instanceof Dt||r instanceof ls))throw new Re(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(mt.fromString(e,...t));return Ay(i),new ls(r.firestore,null,i)}}function It(r,e,...t){if(r=nn(r),arguments.length===1&&(e=Wf.newId()),B_("doc","path",e),r instanceof Jc){const i=mt.fromString(e,...t);return ky(i),new Dt(r,null,new be(i))}{if(!(r instanceof Dt||r instanceof ls))throw new Re(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(mt.fromString(e,...t));return ky(i),new Dt(r.firestore,r instanceof ls?r.converter:null,new be(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="AsyncQueue";class vv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new N0(this,"async_queue_retry"),this.oc=()=>{const i=$h();i&&xe(yv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=$h();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=$h();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new _i;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ha(e))throw e;xe(yv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Ei("INTERNAL UNHANDLED ERROR: ",_v(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=dp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Ve(47125,{hc:_v(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function _v(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class no extends Jc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new vv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,await e}}}function IP(r,e){const t=typeof r=="object"?r:Kv(),i=typeof r=="string"?r:Ec,o=bf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=UE("firestore");l&&SP(o,...l)}return o}function gp(r){if(r._terminated)throw new Re(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CP(r),r._firestoreClient}function CP(r){var e,t,i;const o=r._freezeSettings(),l=(function(p,m,v,w){return new YI(p,m,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,ew(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new _P(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(p){const m=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(m),_online:m}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sr(rn.fromBase64String(e))}catch(t){throw new Re(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sr(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rl(e,sr._jsonSchema))return sr.fromBase64String(e.bytes)}}sr._jsonSchemaVersion="firestore/bytes/1.0",sr._jsonSchema={type:jt("string",sr._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kr._jsonSchemaVersion}}static fromJSON(e){if(Rl(e,Kr._jsonSchema))return new Kr(e.latitude,e.longitude)}}Kr._jsonSchemaVersion="firestore/geoPoint/1.0",Kr._jsonSchema={type:jt("string",Kr._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rl(e,Qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Qr(e.vectorValues);throw new Re(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qr._jsonSchemaVersion="firestore/vectorValue/1.0",Qr._jsonSchema={type:jt("string",Qr._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^__.*__$/;class PP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}class nw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ec:r})}}class vp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Nc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(rw(this.Ec)&&RP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class kP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Kc(e)}Dc(e,t,i,o=!1){return new vp({Ec:e,methodName:t,bc:i,path:tn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _p(r){const e=r._freezeSettings(),t=Kc(r._databaseId);return new kP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function iw(r,e,t,i,o,l={}){const h=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);wp("Data must be an object, but it was:",h,i);const p=sw(i,h);let m,v;if(l.merge)m=new qn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const I=xf(e,T,t);if(!h.contains(I))throw new Re(ie.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);aw(w,I)||w.push(I)}m=new qn(w),v=h.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,v=h.fieldTransforms;return new PP(new Dn(p),m,v)}class ed extends yp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ed}}function AP(r,e,t,i){const o=r.Dc(1,e,t);wp("Data must be an object, but it was:",o,i);const l=[],h=Dn.empty();Es(i,((m,v)=>{const w=xp(e,m,t);v=nn(v);const T=o.gc(w);if(v instanceof ed)l.push(w);else{const I=td(v,T);I!=null&&(l.push(w),h.set(w,I))}}));const p=new qn(l);return new nw(h,p,o.fieldTransforms)}function bP(r,e,t,i,o,l){const h=r.Dc(1,e,t),p=[xf(e,i,t)],m=[o];if(l.length%2!=0)throw new Re(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)p.push(xf(e,l[I])),m.push(l[I+1]);const v=[],w=Dn.empty();for(let I=p.length-1;I>=0;--I)if(!aw(v,p[I])){const F=p[I];let Q=m[I];Q=nn(Q);const X=h.gc(F);if(Q instanceof ed)v.push(F);else{const V=td(Q,X);V!=null&&(v.push(F),w.set(F,V))}}const T=new qn(v);return new nw(w,T,h.fieldTransforms)}function td(r,e){if(ow(r=nn(r)))return wp("Unsupported field value:",e,r),sw(r,e);if(r instanceof yp)return(function(i,o){if(!rw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const p of i){let m=td(p,o.yc(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=nn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=gt.fromDate(i);return{timestampValue:Pc(o.serializer,l)}}if(i instanceof gt){const l=new gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pc(o.serializer,l)}}if(i instanceof Kr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sr)return{bytesValue:x0(o.serializer,i._byteString)};if(i instanceof Dt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:np(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Qr)return(function(h,p){return{mapValue:{fields:{[J_]:{stringValue:X_},[Tc]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw p.wc("VectorValues must only contain numeric values.");return Xf(p.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Hf(i)}`)})(r,e)}function sw(r,e){const t={};return H_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(r,((i,o)=>{const l=td(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function ow(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gt||r instanceof Kr||r instanceof sr||r instanceof Dt||r instanceof yp||r instanceof Qr)}function wp(r,e,t){if(!ow(t)||!$_(t)){const i=Hf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function xf(r,e,t){if((e=nn(e))instanceof Zc)return e._internalPath;if(typeof e=="string")return xp(r,e);throw Nc("Field path arguments must be of type string or ",r,!1,void 0,t)}const NP=new RegExp("[~\\*/\\[\\]]");function xp(r,e,t){if(e.search(NP)>=0)throw Nc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Zc(...e.split("."))._internalPath}catch{throw Nc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Nc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new Re(ie.INVALID_ARGUMENT,p+r+m)}function aw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jP extends lw{data(){return super.data()}}function uw(r,e){return typeof e=="string"?xp(r,e):e instanceof Zc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Re(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VP{convertValue(e,t="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Es(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Tc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>Ct(h.doubleValue)));return new Qr(l)}convertGeoPoint(e){return new Kr(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=zc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const t=hs(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=mt.fromString(e);it(R0(i),9688,{name:e});const o=new gl(i.get(1),i.get(3)),l=new be(i.popFirst(5));return o.isEqual(t)||Ei(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gs extends lw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(uw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Gs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gs._jsonSchema={type:jt("string",Gs._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class dc extends Gs{data(e={}){return super.data(e)}}class Xo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new tl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new dc(this._firestore,this._userDataWriter,i.key,i,new tl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const m=new dc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new tl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const m=new dc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new tl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return p.type!==0&&(v=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:LP(p.type),doc:m,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(r){r=Pr(r,Dt);const e=Pr(r.firestore,no);return EP(gp(e),r._key).then((t=>OP(e,r,t)))}Xo._jsonSchemaVersion="firestore/querySnapshot/1.0",Xo._jsonSchema={type:jt("string",Xo._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class dw extends VP{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,t)}}function ns(r){r=Pr(r,Xc);const e=Pr(r.firestore,no),t=gp(e),i=new dw(e);return DP(r._query),TP(t,r._query).then((o=>new Xo(e,i,r,o)))}function Xu(r,e,t){r=Pr(r,Dt);const i=Pr(r.firestore,no),o=cw(r.converter,e,t);return nd(i,[iw(_p(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,or.none())])}function qo(r,e,t,...i){r=Pr(r,Dt);const o=Pr(r.firestore,no),l=_p(o);let h;return h=typeof(e=nn(e))=="string"||e instanceof Zc?bP(l,"updateDoc",r._key,e,t,i):AP(l,"updateDoc",r._key,e),nd(o,[h.toMutation(r._key,or.exists(!0))])}function Zi(r){return nd(Pr(r.firestore,no),[new Zf(r._key,or.none())])}function Go(r,e){const t=Pr(r.firestore,no),i=It(r),o=cw(r.converter,e);return nd(t,[iw(_p(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,or.exists(!1))]).then((()=>i))}function nd(r,e){return(function(i,o){const l=new _i;return i.asyncQueue.enqueueAndForget((async()=>cP(await xP(i),o,l))),l.promise})(gp(r),e)}function OP(r,e,t){const i=t.docs.get(e._key),o=new dw(r);return new Gs(r,o,e._key,i,new tl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ca=o})(la),Zo(new Qs("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),p=new no(new NI(i.getProvider("auth-internal")),new VI(h,i.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Re(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(v.options.projectId,w)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),os(Sy,Iy,e),os(Sy,Iy,"esm2017")})();const MP={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},hw=Gv(MP),us=PI(hw),tt=IP(hw),fw=z.createContext(null);function FP({children:r}){const[e,t]=z.useState(null),[i,o]=z.useState(!1),[l,h]=z.useState(!0);z.useEffect(()=>{const v=v1(us,async w=>{if(t(w),w)try{const T=It(tt,"admins",w.uid);if((await Ef(T)).exists())o(!0);else{const F=It(tt,"roles",w.uid),Q=await Ef(F);Q.exists()&&Q.data().admin===!0?o(!0):o(!1)}}catch(T){console.error("Error checking admin role:",T),o(!1)}else o(!1);h(!1)});return()=>v()},[]);const p=async(v,w)=>{await __(us,v,w)},m=async()=>{await w_(us)};return c.jsx(fw.Provider,{value:{user:e,admin:i,loading:l,login:p,logout:m},children:r})}function pa(){return z.useContext(fw)}function UP({onClose:r}){const[e,t]=z.useState("login"),[i,o]=z.useState(""),[l,h]=z.useState("");async function p(){try{await b_(us,new Wr),r()}catch(w){alert(w.message)}}async function m(w){w.preventDefault();try{await __(us,i,l),r()}catch(T){alert(T.message)}}async function v(w){w.preventDefault();try{await m1(us,i,l),r()}catch(T){alert(T.message)}}return c.jsx("div",{className:"auth-modal-backdrop",onClick:r,children:c.jsxs("div",{className:"auth-modal",onClick:w=>w.stopPropagation(),children:[c.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),c.jsxs("button",{className:"google-btn",onClick:p,children:[c.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),c.jsx("div",{className:"auth-divider",children:c.jsx("span",{children:"or"})}),c.jsxs("form",{onSubmit:e==="login"?m:v,className:"auth-form",children:[c.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:i,onChange:w=>o(w.target.value),required:!0}),c.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:w=>h(w.target.value),required:!0}),c.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),c.jsx("div",{className:"auth-switcher",children:e==="login"?c.jsxs("p",{children:["No account?"," ",c.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):c.jsxs("p",{children:["Already have an account?"," ",c.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),c.jsx("button",{className:"auth-close",onClick:r,children:"Close"})]})})}function zP(){const[r,e]=z.useState(!1),[t,i]=z.useState(!1),{user:o,admin:l}=pa(),h=Dc();async function p(){try{await w_(us),e(!1),h("/")}catch(m){console.error(m),alert("Logout failed.")}}return c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:`menu-toggle ${r?"active":""}`,onClick:()=>e(!r),children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]}),c.jsxs("nav",{className:`menu-panel ${r?"open":""}`,children:[c.jsx(Uo,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),c.jsx(Uo,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),c.jsx(Uo,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),c.jsx(Uo,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),c.jsx(Uo,{to:"/music",className:"menu-item",onClick:()=>e(!1),children:"Music"}),l&&c.jsx(Uo,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),c.jsxs("div",{className:"auth-section",children:[c.jsx("p",{className:"auth-section-status",children:o?`Signed in as ${o.email||o.uid}`:"Not signed in"}),c.jsxs("div",{children:[!o&&c.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),i(!0)},children:"Sign in"}),o&&c.jsx("button",{className:"auth-btn secondary",onClick:p,children:"Sign out"})]})]})]}),t&&c.jsx(UP,{onClose:()=>i(!1)})]})}function wv(){const r="Tyler's Collection Homepage",e="",[t,i]=z.useState(""),[o,l]=z.useState(!0),h=z.useRef(null),[p,m]=z.useState("jp"),[v,w]=z.useState(1);return z.useEffect(()=>{document.title="Tyler's Collection"},[]),z.useEffect(()=>(h.current=setInterval(()=>l(T=>!T),450),()=>{h.current&&clearInterval(h.current)}),[]),z.useEffect(()=>{let T=!1;const I=X=>new Promise(V=>setTimeout(V,X)),F=async(X,V=120)=>{for(let te=1;te<=X.length;te+=1){if(T)return;i(X.slice(0,te)),await I(V)}},Q=async(X,V=70)=>{for(let te=X.length;te>=0;te-=1){if(T)return;i(X.slice(0,te)),await I(V)}};return(async()=>{if(localStorage.getItem("homeTitleTyped")==="1"){m("en"),i(r),l(!1),h.current&&clearInterval(h.current);return}await I(250),m("jp"),await F(e,140),await I(6e3),await Q(e,80),await I(320);const V=r;for(let te=1;te<=V.length;te+=1){if(T)return;i(V.slice(0,te)),te===4&&m("en"),await I(110)}m("en"),await I(2e3),l(!1),localStorage.setItem("homeTitleTyped","1"),h.current&&clearInterval(h.current)})(),()=>{T=!0}},[]),c.jsxs("main",{className:"page",children:[c.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[c.jsxs("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",display:"inline-flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:t||" "}),c.jsx("span",{style:{width:"6px",height:"1.1em",background:"#ffb6c1",opacity:o?1:0,transition:"opacity 0.15s ease"}})]}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem",opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"This is my personal webpage to see what is on my shelves, wishlists, and TCG collections."}),c.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"8px 14px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"linear-gradient(135deg, rgba(255,182,193,0.18), rgba(43,15,29,0.9))",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"14px",fontSize:"0.78rem",color:"#ffe6ed",letterSpacing:"0.05em",textTransform:"uppercase",fontWeight:700,opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?c.jsxs(c.Fragment,{children:[c.jsx("span",{role:"img","aria-label":"manga",children:""})," ",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"anime",children:""})," ",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{role:"img","aria-label":"manga",children:""})," Manga",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"anime",children:""})," Anime",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]})})]}),c.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[c.jsxs("article",{className:"card",children:[c.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:c.jsx("span",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"About Me"})}),c.jsx("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5,opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"im.okTCG":"Hey, I am Tyler and I go by im.ok. I hoard manga, binge anime, and collect trading cards."}),c.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem",opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"This site is where I track everything: volumes on my shelves, finished shows, and my TCG collection as they all slowly grow."}),c.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px",opacity:v,transition:"opacity 0.25s ease"},children:[c.jsx("span",{className:"pill",children:p==="jp"?"":"Manga library"}),c.jsx("span",{className:"pill",children:p==="jp"?"":"My Anime List (MAL)"}),c.jsx("span",{className:"pill",children:p==="jp"?" & TCG":"Pokemon & One Piece TCG"}),c.jsx("span",{className:"pill",children:p==="jp"?"":"Data Nerd"})]})]}),c.jsxs("article",{className:"card",children:[c.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:c.jsx("span",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Explore these pages"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[c.jsxs("a",{href:"/base/manga",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Manga Library"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Full manga collection & wishlist."}),c.jsx("div",{className:"section-chip-row",children:c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Library & wishlist"})})]}),c.jsxs("a",{href:"/base/music",className:"section-card",style:{justifySelf:"end",alignSelf:"end",order:99},children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Music"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"If you are here for my music, this is the page for you! Catch all the latest releases."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Latest tracks"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:"Spotify & SoundCloud"})]})]}),c.jsxs("a",{href:"/base/anime",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Anime Library"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"MAL":"The entire watched, plan to watch, and watching list synced directly from MyAnimeList."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"MAL":"MAL synced"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Status filters"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Quick stats"})]})]}),c.jsxs("a",{href:"/base/tcg",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"TCG Collection"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Full Collection"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Still Under-Construction"})]})]})]})]})]}),c.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"@ 2025 im.ok. All rights reserved."})]})}const BP="modulepreload",$P=function(r){return"/base/"+r},xv={},pw=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let h=function(v){return Promise.all(v.map(w=>Promise.resolve(w).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),m=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=h(t.map(v=>{if(v=$P(v),v in xv)return;xv[v]=!0;const w=v.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${T}`))return;const I=document.createElement("link");if(I.rel=w?"stylesheet":BP,w||(I.as="script"),I.crossOrigin="",I.href=v,m&&I.setAttribute("nonce",m),document.head.appendChild(I),w)return new Promise((F,Q)=>{I.addEventListener("load",F),I.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return o.then(h=>{for(const p of h||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})};function mi(r){let e=(r||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),i=t?t[1].trim().toLowerCase():e.toLowerCase(),o=t&&t[2]?parseInt(t[2],10):0;return{name:i,vol:Number.isFinite(o)?o:0}}function WP(){const{admin:r}=pa(),e=r,[t,i]=z.useState("library");z.useEffect(()=>{document.title="Manga | Library"},[]);const[o,l]=z.useState([]),[h,p]=z.useState([]),[m,v]=z.useState([]),[w,T]=z.useState([]),[I,F]=z.useState(!1),[Q,X]=z.useState(!0),[V,te]=z.useState(""),[pe,de]=z.useState(""),[re,le]=z.useState(""),[ue,b]=z.useState(!1),[C,R]=z.useState(()=>new Set),[P,D]=z.useState(null),[N,A]=z.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[Y,me]=z.useState([]),[Se,ke]=z.useState(0),[W,ve]=z.useState({open:!1,index:0,items:[]});async function fe(){const E=await ns(Wn(tt,"library")),U=[];E.forEach(ee=>{const L=ee.data();U.push({id:ee.id,title:L.title||"",authors:L.authors||"Unknown",publisher:L.publisher||"Unknown",demographic:L.demographic||"",genre:L.genre||"",subGenre:L.subGenre||"",date:L.date||"Unknown",cover:L.cover||"",isbn:L.isbn||"",pageCount:L.pageCount!==void 0&&L.pageCount!==null?L.pageCount:"",rating:L.rating!==void 0&&L.rating!==null?L.rating:"",amountPaid:L.amountPaid!==void 0&&L.amountPaid!==null?L.amountPaid:"",dateRead:L.dateRead||"",datePurchased:L.datePurchased||"",msrp:L.msrp!==void 0&&L.msrp!==null?L.msrp:"",specialType:L.specialType||"",specialVolumes:L.specialVolumes!==void 0&&L.specialVolumes!==null?L.specialVolumes:"",collectiblePrice:L.collectiblePrice!==void 0&&L.collectiblePrice!==null?L.collectiblePrice:"",read:!!L.read,amazonURL:L.amazonURL||"",hidden:!!L.hidden,kind:"library"})}),U.sort((ee,L)=>{const q=mi(ee.title),we=mi(L.title),He=q.name.localeCompare(we.name);return He!==0?He:q.vol-we.vol}),l(U),v(ee=>{const L=new Set(ee);return U.forEach(q=>L.add(q.title||"")),Array.from(L).filter(Boolean).sort()})}async function M(){const E=await ns(Wn(tt,"wishlist")),U=[];E.forEach(ee=>{const L=ee.data();U.push({id:ee.id,title:L.title||"",authors:L.authors||"Unknown",publisher:L.publisher||"Unknown",date:L.date||"Unknown",cover:L.cover||"",isbn:L.isbn||"",pageCount:L.pageCount!==void 0&&L.pageCount!==null?L.pageCount:"",rating:L.rating!==void 0&&L.rating!==null?L.rating:"",amountPaid:L.amountPaid!==void 0&&L.amountPaid!==null?L.amountPaid:"",specialType:L.specialType||"",specialVolumes:L.specialVolumes!==void 0&&L.specialVolumes!==null?L.specialVolumes:"",collectiblePrice:L.collectiblePrice!==void 0&&L.collectiblePrice!==null?L.collectiblePrice:"",amazonURL:L.amazonURL||"",hidden:!!L.hidden,kind:"wishlist"})}),U.sort((ee,L)=>{const q=mi(ee.title),we=mi(L.title),He=q.name.localeCompare(we.name);return He!==0?He:q.vol-we.vol}),p(U),v(ee=>{const L=new Set(ee);return U.forEach(q=>L.add(q.title||"")),Array.from(L).filter(Boolean).sort()})}z.useEffect(()=>{let E=!1;async function U(){X(!0),te("");try{await Promise.all([fe(),M()]),E||X(!1)}catch(ee){if(console.error(ee),!E){console.warn("Falling back to offline JSON for manga.");try{const q=await fetch("/base/manga-library-wishlist.json",{cache:"no-cache"});if(!q.ok)throw new Error("fallback fetch failed");const we=await q.json(),He=Array.isArray(we.library)?we.library:[],ot=Array.isArray(we.wishlist)?we.wishlist:[];l(He.map((ye,Ae)=>({id:ye.id||`offline-lib-${Ae}`,title:ye.title||"",authors:ye.authors||"Unknown",publisher:ye.publisher||"Unknown",demographic:ye.demographic||"",genre:ye.genre||"",subGenre:ye.subGenre||"",date:ye.date||"Unknown",cover:ye.cover||"",isbn:ye.isbn||"",pageCount:ye.pageCount??"",rating:ye.rating??"",amountPaid:ye.amountPaid??"",dateRead:ye.dateRead||"",datePurchased:ye.datePurchased||"",msrp:ye.msrp??"",specialType:ye.specialType||"",specialVolumes:ye.specialVolumes??"",collectiblePrice:ye.collectiblePrice??"",amazonURL:ye.amazonURL||"",read:!!ye.read,hidden:!!ye.hidden,kind:"library"}))),p(ot.map((ye,Ae)=>({id:ye.id||`offline-wish-${Ae}`,title:ye.title||"",authors:ye.authors||"Unknown",publisher:ye.publisher||"Unknown",demographic:ye.demographic||"",genre:ye.genre||"",subGenre:ye.subGenre||"",date:ye.date||"Unknown",cover:ye.cover||"",isbn:ye.isbn||"",pageCount:ye.pageCount??"",rating:ye.rating??"",amountPaid:ye.amountPaid??"",dateRead:ye.dateRead||"",datePurchased:ye.datePurchased||"",msrp:ye.msrp??"",specialType:ye.specialType||"",specialVolumes:ye.specialVolumes??"",collectiblePrice:ye.collectiblePrice??"",amazonURL:ye.amazonURL||"",read:!!ye.read,hidden:!!ye.hidden,kind:"wishlist"}))),X(!1),te("Loaded offline data (Firestore unavailable).")}catch(L){console.error("Offline fallback failed",L),te("Failed to load manga data from Firestore."),X(!1)}}}}return U(),()=>{E=!0}},[]);const Z=z.useMemo(()=>{const E=pe.trim().toLowerCase();return E?o.filter(U=>[U.title,U.authors,U.publisher,U.isbn,U.date,String(U.pageCount??"")].join(" ").toLowerCase().includes(E)):o},[o,pe]),Ie=z.useMemo(()=>e&&I?Z:Z.filter(E=>!E.hidden),[Z,e,I]),Me=z.useMemo(()=>{const E=re.trim().toLowerCase();return E?h.filter(U=>[U.title,U.authors,U.publisher,U.isbn,U.date,String(U.pageCount??"")].join(" ").toLowerCase().includes(E)):h},[h,re]),Fe=z.useMemo(()=>e&&I?Me:Me.filter(E=>!E.hidden),[Me,e,I]);function We(){e&&(b(E=>!E),R(new Set))}function Qe(E){R(U=>{const ee=new Set(U);return ee.has(E)?ee.delete(E):ee.add(E),ee})}async function Be(E){if(!e){alert("Multi-select actions require admin access.");return}const U=Array.from(C);if(!U.length){alert("Select at least one item first.");return}const ee=t==="library";try{if(E==="move")if(ee){if(!window.confirm(`Move ${U.length} item(s) to Wishlist?`))return;for(const L of U){const q=o.find(He=>He.id===L);if(!q)continue;const we={title:q.title,authors:q.authors,publisher:q.publisher,date:q.date,pageCount:q.pageCount||"",cover:q.cover,amazonURL:q.amazonURL||"",hidden:!!q.hidden};await Go(Wn(tt,"wishlist"),we),await Zi(It(tt,"library",L))}}else{if(!window.confirm(`Move ${U.length} item(s) to Library?`))return;for(const L of U){const q=h.find(He=>He.id===L);if(!q)continue;const we={title:q.title,authors:q.authors,publisher:q.publisher,date:q.date,pageCount:q.pageCount||"",cover:q.cover,amountPaid:"",read:!1,rating:"",msrp:"",collectiblePrice:"",specialType:"",specialVolumes:"",isbn:"",demographic:"",genre:"",subGenre:"",hidden:!!q.hidden};await Go(Wn(tt,"library"),we),await Zi(It(tt,"wishlist",L))}}else if(E==="markRead"&&ee)for(const L of U)await qo(It(tt,"library",L),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(E==="markUnread"&&ee)for(const L of U)await qo(It(tt,"library",L),{read:!1,dateRead:"",rating:""});else if(E==="delete"){const L=ee?"library":"wishlist";if(!window.confirm(`Delete ${U.length} item(s) from ${ee?"Library":"Wishlist"}?`))return;for(const q of U)await Zi(It(tt,L,q))}await Promise.all([fe(),M()]),R(new Set),b(!1)}catch(L){console.error(L),alert("Failed to apply multi-select action.")}}function nt(E){D(E)}function at(){D(null)}const sn=()=>{A(E=>({...E,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1,hidden:!1},multiAdd:!1,startVol:"",endVol:""})),me([]),ke(0)},Qt=z.useMemo(()=>{const E=new Map;return[...o,...h].forEach(U=>{const ee=mi(U.title||"");if(!ee.name)return;const L=(U.title||"").replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||U.title||ee.name;if(!E.has(ee.name))E.set(ee.name,{display:L,maxVol:ee.vol,authors:U.authors||"",publisher:U.publisher||"",demographic:U.demographic||""});else{const q=E.get(ee.name);q.maxVol=Math.max(q.maxVol,ee.vol),!q.authors&&U.authors&&(q.authors=U.authors),!q.publisher&&U.publisher&&(q.publisher=U.publisher),!q.demographic&&U.demographic&&(q.demographic=U.demographic)}}),E},[o,h]),Gn=E=>{A(U=>({...U,open:!0,mode:"add",list:E,editingId:null,data:{...U.data,title:"",list:E}})),me([{kind:"new",id:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1}}]),ke(0)},lr=E=>{const U={open:!0,mode:"edit",list:E.kind==="wishlist"?"wishlist":"library",editingId:E.id,data:{title:E.title||"",authors:E.authors||"",publisher:E.publisher||"",demographic:E.demographic||"",genre:E.genre||"",subGenre:E.subGenre||"",date:E.date||"",cover:E.cover||"",isbn:E.isbn||"",pageCount:E.pageCount||"",rating:E.rating||"",amountPaid:E.amountPaid||"",dateRead:E.dateRead||"",datePurchased:E.datePurchased||"",msrp:E.msrp||"",specialType:E.specialType||"",specialVolumes:E.specialVolumes||"",collectiblePrice:E.collectiblePrice||"",amazonURL:E.amazonURL||"",read:!!E.read,hidden:!!E.hidden}};A(U),me([{kind:"edit",id:E.id,data:{...U.data}}]),ke(0)},Ye=(E,U,ee="text")=>{if(A(L=>{const q={...L.data,[E]:ee==="checkbox"?!!U:U};if(E==="title"){const we=mi(U||"");if(we.name&&Qt.has(we.name)){const He=Qt.get(we.name);q.authors=He.authors||q.authors,q.publisher=He.publisher||q.publisher,q.demographic=He.demographic||q.demographic}}return{...L,data:q}}),me(L=>{if(!L.length)return L;const q=[...L],we={...q[Se]};return we.data={...we.data,[E]:ee==="checkbox"?!!U:U},q[Se]=we,q}),E==="title"){const L=String(U||"").trim().toLowerCase();if(!L)T([]);else{const q=[];Qt.forEach(we=>{if(we.display.toLowerCase().includes(L)){const He=we.maxVol>0?we.maxVol+1:1;q.push(`${we.display}, Vol. ${He}`)}}),T(q.slice(0,6))}}},zt=E=>{Y[E]&&(ke(E),A(U=>{const ee=Y[E];return{...U,data:{...ee.data}}}))},yn=()=>{const E=N.data.title||"",U=mi(E);if(!U.name){alert("Provide a title with a volume number first (e.g., Series, Vol. 1).");return}const ee=E.replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||E;let L=U.vol||0;const q=Qt.get(U.name);q&&q.maxVol>L&&(L=q.maxVol),Y.forEach(ye=>{const Ae=mi(ye.data.title||"");Ae.name===U.name&&(L=Math.max(L,Ae.vol||0))});const we=(L||0)+1,ot={title:`${ee}, Vol. ${we}`,authors:N.data.authors,publisher:N.data.publisher,demographic:N.data.demographic,genre:N.data.genre,subGenre:N.data.subGenre,msrp:N.data.msrp,hidden:N.data.hidden,cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",date:"",dateRead:"",datePurchased:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1};me(ye=>{const Ae=[...ye,{kind:"new",id:null,data:ot}];return ke(Ae.length-1),Ae}),A(ye=>({...ye,mode:"add",data:ot}))};async function ur(){if(!e)return;const{list:E}=N,U=E||"library",ee=Y.length>0?Y:[{kind:N.mode,id:N.editingId,data:N.data}],L=q=>({title:(q.title||"").trim(),authors:(q.authors||"").trim(),publisher:(q.publisher||"").trim(),demographic:(q.demographic||"").trim(),genre:(q.genre||"").trim(),subGenre:(q.subGenre||"").trim(),date:(q.date||"").trim(),cover:(q.cover||"").trim(),isbn:U==="wishlist"?"":(q.isbn||"").trim(),pageCount:q.pageCount===""?"":Number(q.pageCount),rating:U==="wishlist"||q.rating===""?"":Math.max(.5,Math.min(5,Number(q.rating))),amountPaid:q.amountPaid===""?"":Number(q.amountPaid),dateRead:(q.dateRead||"").trim(),datePurchased:(q.datePurchased||"").trim(),msrp:U==="wishlist"||q.msrp===""?"":Number(q.msrp),specialType:U==="wishlist"?"":(q.specialType||"").trim(),specialVolumes:U==="wishlist"||q.specialVolumes===""?"":Number(q.specialVolumes),collectiblePrice:U==="wishlist"||q.collectiblePrice===""?"":Number(q.collectiblePrice),amazonURL:(q.amazonURL||"").trim(),read:U==="wishlist"?!1:!!q.read,hidden:!!q.hidden,kind:E});try{const q=[];for(const we of ee){const He=L(we.data);if(!He.title){alert("Title is required for every entry.");return}we.kind==="edit"&&we.id?q.push(qo(It(tt,U,we.id),He)):q.push(Go(Wn(tt,U),He))}await Promise.all(q),await Promise.all([fe(),M()]),sn()}catch(q){console.error(q),alert("Failed to save entry.")}}async function kr(E,U){if(e&&window.confirm("Delete this entry?"))try{await Zi(It(tt,U,E)),await Promise.all([fe(),M()])}catch(ee){console.error(ee),alert("Failed to delete entry.")}}const[Pt,_t]=z.useState(!1),on=()=>ve({open:!1,index:0,items:[]});async function Kn(E,U){if(!(E!=null&&E.id))return;const ee=E.kind==="wishlist"?"wishlist":"library";_t(!0);try{await qo(It(tt,ee,E.id),U),await Promise.all([fe(),M()]),D(L=>L&&L.id===E.id?{...L,...U}:L)}catch(L){console.error(L),alert("Failed to update entry.")}finally{_t(!1)}}const cr=(E,U)=>{const ee=U===""?"":Math.max(.5,Math.min(5,Number(U)));Kn(E,{rating:ee})},dr=(E,U)=>{if(!E)return;const ee=U?{read:!0,dateRead:new Date().toISOString().slice(0,10)}:{read:!1,dateRead:""};Kn(E,ee)},ht=()=>{if(!C.size){alert("Select at least one entry first.");return}const U=[...o,...h].filter(L=>C.has(L.id));if(!U.length){alert("No items selected.");return}const ee=U.map(L=>({id:L.id,kind:L.kind||(t==="wishlist"?"wishlist":"library"),data:{title:L.title||"",authors:L.authors||"",publisher:L.publisher||"",demographic:L.demographic||"",genre:L.genre||"",subGenre:L.subGenre||"",date:L.date||"",cover:L.cover||"",isbn:L.isbn||"",pageCount:L.pageCount||"",rating:L.rating||"",amountPaid:L.amountPaid||"",dateRead:L.dateRead||"",datePurchased:L.datePurchased||"",msrp:L.msrp||"",specialType:L.specialType||"",specialVolumes:L.specialVolumes||"",collectiblePrice:L.collectiblePrice||"",amazonURL:L.amazonURL||"",read:!!L.read,hidden:!!L.hidden}}));ve({open:!0,index:0,items:ee})},Le=(E,U,ee="text")=>{ve(L=>{const q=[...L.items],we={...q[L.index]};return we.data={...we.data,[E]:ee==="checkbox"?!!U:U},q[L.index]=we,{...L,items:q}})},kt=()=>{ve(E=>({...E,index:Math.min(E.index+1,E.items.length-1)}))},Xr=()=>{ve(E=>({...E,index:Math.max(E.index-1,0)}))};async function Vn(){if(!e)return;const E=W.items;if(!E.length){on();return}try{const U=E.map(ee=>{const L={...ee.data,pageCount:ee.data.pageCount===""?"":Number(ee.data.pageCount),rating:ee.data.rating===""?"":Math.max(.5,Math.min(5,Number(ee.data.rating))),amountPaid:ee.data.amountPaid===""?"":Number(ee.data.amountPaid),msrp:ee.data.msrp===""?"":Number(ee.data.msrp),collectiblePrice:ee.data.collectiblePrice===""?"":Number(ee.data.collectiblePrice),specialVolumes:ee.data.specialVolumes===""?"":Number(ee.data.specialVolumes),read:!!ee.data.read},q=ee.kind==="wishlist"?"wishlist":"library";return qo(It(tt,q,ee.id),L)});await Promise.all(U),await Promise.all([fe(),M()]),R(new Set),b(!1),on()}catch(U){console.error(U),alert("Failed to save bulk edits.")}}function Qn(E){const U=C.has(E.id),ee=E.kind==="library",L=()=>{ue&&e?Qe(E.id):nt(E)};return c.jsxs("div",{className:"manga-card"+(E.read&&ee?" read":"")+(U?" multiselect-selected":""),onClick:L,children:[c.jsx("div",{className:"manga-card-cover-wrap",children:c.jsx("img",{src:E.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),c.jsxs("div",{className:"manga-card-body",children:[c.jsx("div",{className:"manga-card-title",children:E.title||"Untitled"}),c.jsxs("div",{className:"manga-card-meta",children:[E.authors&&E.authors!=="Unknown"&&c.jsxs(c.Fragment,{children:[E.authors,c.jsx("br",{})]}),E.publisher&&E.publisher!=="Unknown"&&c.jsxs(c.Fragment,{children:[E.publisher,c.jsx("br",{})]}),E.date&&E.date!=="Unknown"&&E.date]}),E.isbn&&c.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",E.isbn]}),e&&c.jsxs("div",{className:"manga-card-actions",children:[c.jsx("button",{type:"button",className:"manga-btn mini",onClick:q=>{q.stopPropagation(),lr(E)},children:"Edit"}),c.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:q=>{q.stopPropagation(),kr(E.id,E.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},E.id)}const Sn=({value:E,onChange:U})=>{const[ee,L]=z.useState(null),q=Math.max(0,Math.min(5,Number(E)||0)),we=ee??q,He=Array.from({length:10},(Ae,Vt)=>(Vt+1)*.5),ot=5,ye=Array.from({length:ot},(Ae,Vt)=>Math.max(0,Math.min(1,we-Vt)));return c.jsxs("div",{className:"star-shell",role:"group","aria-label":"Rating",children:[c.jsxs("div",{className:"star-visual",style:{"--star-count":ot},children:[c.jsx("div",{className:"star-row",children:ye.map((Ae,Vt)=>c.jsxs("div",{className:"star-icon",children:[c.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"star-base",children:c.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})}),c.jsx("div",{className:"star-fill",style:{"--pct":`${(Math.max(0,Math.min(1,Ae))*100).toFixed(1)}%`},children:c.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:c.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})})})]},Vt))}),c.jsx("div",{className:"star-hit",children:He.map(Ae=>c.jsx("button",{type:"button","aria-label":`${Ae} stars`,onMouseEnter:()=>L(Ae),onMouseLeave:()=>L(null),onClick:()=>U(Ae)},Ae))})]}),c.jsx("div",{className:"star-value",children:we?we.toFixed(1):"--"}),c.jsx("button",{type:"button",className:"star-clear",onClick:()=>U(""),"aria-label":"Clear rating",children:"clear"})]})},Ar=t==="library"?Ie:Fe,vn=(E,U)=>{if(!E.length)return;const ee=Array.from(E.reduce((ye,Ae)=>(Object.keys(Ae).forEach(Vt=>ye.add(Vt)),ye),new Set)),L=ye=>{const Ae=ye==null?"":String(ye);return/[",\n]/.test(Ae)?`"${Ae.replace(/"/g,'""')}"`:Ae},q=[ee.join(",")].concat(E.map(ye=>ee.map(Ae=>L(ye[Ae])).join(","))),we=new Blob([q.join(`
`)],{type:"text/csv"}),He=URL.createObjectURL(we),ot=document.createElement("a");ot.href=He,ot.download=U,ot.click(),URL.revokeObjectURL(He)},br=async(E,U)=>{const ee=(q,we="image")=>(q||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)||we,L=E.filter(q=>q.cover).map((q,we)=>({url:q.cover,name:ee(q.title||`manga-${we+1}`,`manga-${we+1}`)}));if(!L.length){alert("No images found to download.");return}try{const q=(await pw(async()=>{const{default:ln}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:ln}},[])).default,we=new q,He=we.folder("images"),ot={},ye=L.map(async(ln,hr)=>{try{const _n=await(await fetch(ln.url)).blob(),ti=(ln.url.split(".").pop()||"jpg").split(/[?#]/)[0],pr=ln.name||`image-${hr+1}`;ot[pr]=(ot[pr]||0)+1;const Nr=ot[pr]>1?`-${ot[pr]}`:"";He.file(`${pr}${Nr}.${ti}`,_n)}catch(fr){console.warn("Failed to fetch image",ln.url,fr)}});await Promise.all(ye);const Ae=await we.generateAsync({type:"blob"}),Vt=URL.createObjectURL(Ae),Bt=document.createElement("a");Bt.href=Vt,Bt.download=U,Bt.click(),URL.revokeObjectURL(Vt)}catch(q){console.error("Zip download failed",q),alert("Failed to create zip. Please try again.")}},Zr=(E,U)=>{const ee=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),L=URL.createObjectURL(ee),q=document.createElement("a");q.href=L,q.download=U,q.click(),URL.revokeObjectURL(L)},ei=async E=>{if(!e||!(E!=null&&E.id))return;const U=E.kind==="wishlist"?"wishlist":"library",ee=U==="library"?"wishlist":"library";try{if(U==="library"){const L={title:E.title,authors:E.authors,publisher:E.publisher,date:E.date,pageCount:E.pageCount||"",cover:E.cover||"",amazonURL:E.amazonURL||"",hidden:!!E.hidden};await Go(Wn(tt,ee),L)}else{const L={title:E.title,authors:E.authors,publisher:E.publisher,date:E.date,pageCount:E.pageCount||"",cover:E.cover||"",amountPaid:"",read:!1,rating:"",msrp:"",collectiblePrice:"",specialType:"",specialVolumes:"",isbn:"",demographic:"",genre:"",subGenre:"",amazonURL:E.amazonURL||"",hidden:!!E.hidden};await Go(Wn(tt,ee),L)}await Zi(It(tt,U,E.id)),await Promise.all([fe(),M()]),at()}catch(L){console.error("Move failed",L),alert("Failed to move item.")}},an=N.list==="wishlist",G=W.items[W.index]||null,oe=(G==null?void 0:G.kind)==="wishlist";return c.jsxs("div",{className:"manga-page",children:[c.jsxs("header",{className:"manga-header",style:{flexDirection:"column",alignItems:"center",textAlign:"center"},children:[c.jsx("div",{className:"manga-header-title",style:{justifyContent:"center",gap:"0.6rem",fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Manga Library"}),c.jsx("div",{className:"manga-header-sub",style:{textAlign:"center"},children:"Library & Wishlist are managed via Firestore. This React port reuses the same collections as your original index.html."})]}),c.jsxs("div",{className:"manga-tabs",children:[c.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{i("library"),b(!1),R(new Set)},children:"Library"}),c.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{i("wishlist"),b(!1),R(new Set)},children:"Wishlist"})]}),t!=="dashboard"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"manga-toolbar",children:[c.jsxs("div",{className:"manga-toolbar-left",children:[c.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?pe:re,onChange:E=>t==="library"?de(E.target.value):le(E.target.value)}),c.jsx("div",{className:"manga-counter",children:t==="library"?c.jsxs(c.Fragment,{children:["Library: ",Z.length," / ",o.length]}):c.jsxs(c.Fragment,{children:["Wishlist: ",Me.length," / ",h.length]})})]}),c.jsxs("div",{className:"manga-toolbar-right",children:[e&&c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>F(E=>!E),children:I?"Hide Hidden":"Show Hidden"}),e&&c.jsx("button",{className:"manga-btn secondary"+(ue?" active":""),onClick:We,children:ue?"Exit Multi-select":"Multi-select"})]})]}),e&&ue&&c.jsxs("div",{className:"manga-multiselect-bar",children:[c.jsxs("span",{children:["Selected: ",c.jsx("strong",{children:C.size})]}),c.jsx("button",{className:"manga-btn",onClick:ht,children:"Bulk Edit"}),c.jsxs("button",{className:"manga-btn secondary",onClick:()=>Be("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"manga-btn",onClick:()=>Be("markRead"),children:"Mark Read"}),c.jsx("button",{className:"manga-btn secondary",onClick:()=>Be("markUnread"),children:"Mark Unread"})]}),c.jsx("button",{className:"manga-btn danger",onClick:()=>Be("delete"),children:"Delete"})]})]}),Q?c.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):V?c.jsx("div",{className:"manga-empty-state",children:V}):Ar.length===0?c.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):c.jsx("div",{className:"manga-grid",children:Ar.map(E=>Qn(E))}),e&&c.jsxs("div",{className:"manga-floating-actions",children:[c.jsxs("button",{className:"manga-btn",type:"button","aria-label":"Add item",onClick:()=>Gn(t==="wishlist"?"wishlist":"library"),children:["+ ",t==="wishlist"?"Wishlist":"Library"]}),c.jsxs("div",{className:"manga-export-actions",children:[c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Zr({library:o,wishlist:h},"manga-library-wishlist.json"),children:"Export JSON"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>vn(t==="library"?o:h,t==="library"?"manga-library.csv":"manga-wishlist.csv"),children:"Export CSV"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>br(t==="library"?o:h,t==="library"?"manga-library-images.zip":"manga-wishlist-images.zip"),children:"Download Images"})]})]}),P&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:E=>{E.target===E.currentTarget&&at()},children:c.jsxs("div",{className:"manga-modal",children:[c.jsx("div",{className:"manga-modal-cover-wrap",children:c.jsx("img",{src:P.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsx("div",{className:"manga-modal-title",children:P.title||"Untitled"}),c.jsx("button",{className:"manga-modal-close",onClick:at,type:"button",children:"Close"})]}),c.jsxs("div",{className:"manga-modal-meta",children:[P.authors&&P.authors!=="Unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Author(s):"})," ",P.authors,c.jsx("br",{})]}),P.publisher&&P.publisher!=="Unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Publisher:"})," ",P.publisher,c.jsx("br",{})]}),P.date&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Release:"})," ",P.date,c.jsx("br",{})]}),P.isbn&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"ISBN:"})," ",P.isbn,c.jsx("br",{})]})]}),c.jsxs("div",{className:"manga-modal-details",children:[P.pageCount&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Pages:"})," ",P.pageCount,c.jsx("br",{})]}),c.jsxs("div",{style:{margin:"6px 0"},children:[c.jsx("strong",{children:"Rating:"})," ",c.jsx(Sn,{value:P.rating||"",onChange:E=>cr(P,E)})]}),P.amountPaid&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Amount Paid:"})," $",P.amountPaid,c.jsx("br",{})]}),P.msrp&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"MSRP:"})," $",P.msrp,c.jsx("br",{})]}),P.collectiblePrice&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Collectible:"})," $",P.collectiblePrice,c.jsx("br",{})]}),P.read&&P.dateRead&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Date Read:"})," ",P.dateRead,c.jsx("br",{})]}),P.amazonURL&&c.jsx("div",{style:{marginTop:"6px"},children:c.jsx("a",{href:P.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),c.jsxs("div",{className:"manga-modal-footer",style:{gap:"10px",alignItems:"center"},children:[c.jsx("div",{children:P.kind==="library"&&P.read?"Marked as read in your library.":P.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."}),c.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[P.kind==="library"&&c.jsx(c.Fragment,{children:P.read?c.jsx("button",{className:"manga-btn mini secondary",disabled:Pt,onClick:()=>dr(P,!1),type:"button",children:"Mark as unread"}):c.jsx("button",{className:"manga-btn mini",disabled:Pt,onClick:()=>dr(P,!0),type:"button",children:"Mark as read"})}),e&&c.jsxs("button",{className:"manga-btn mini",type:"button",onClick:()=>ei(P),children:["Move to ",P.kind==="library"?"Wishlist":"Library"]})]})]})]})]})}),e&&N.open&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:E=>{E.target===E.currentTarget&&sn()},children:c.jsx("div",{className:"manga-modal admin",children:c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsx("div",{className:"manga-modal-title",children:N.mode==="add"?"Add Entry":"Edit Entry"}),c.jsx("button",{className:"manga-modal-close",onClick:sn,type:"button",children:"Close"})]}),c.jsxs("div",{className:"admin-form-layout",children:[c.jsx("div",{className:"admin-cover-frame",children:c.jsx("img",{src:N.data.cover||"https://imgur.com/chUgq4W.png",alt:"Cover preview"})}),c.jsxs("div",{className:"admin-form-fields",children:[c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Title",c.jsx("input",{type:"text",value:N.data.title,onChange:E=>Ye("title",E.target.value)})]})}),w.length>0&&c.jsx("div",{className:"title-suggestions",children:w.map((E,U)=>c.jsx("button",{type:"button",className:"manga-btn mini",onClick:()=>Ye("title",E),children:E},E+U))}),c.jsxs("div",{className:"admin-row two",style:{alignItems:"flex-end",marginTop:"-8px"},children:[c.jsxs("div",{children:[c.jsxs("div",{className:"manga-modal-subtitle",style:{marginBottom:"6px"},children:["Entry ",Se+1," / ",Math.max(1,Y.length||1)]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Se>0&&zt(Se-1),disabled:Se===0,children:"Previous"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Y.length&&Se<Y.length-1?zt(Se+1):null,disabled:!Y.length||Se===Y.length-1,children:"Next"})]})]}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("button",{className:"manga-btn",type:"button",onClick:yn,disabled:!mi(N.data.title||"").vol,children:"Add New Volume"}),c.jsx("div",{className:"manga-stat-sub",style:{marginTop:"4px"},children:"Auto-fills the next volume number for this series."})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Authors",c.jsx("input",{type:"text",value:N.data.authors,onChange:E=>Ye("authors",E.target.value)})]})}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Publisher",c.jsx("input",{type:"text",value:N.data.publisher,onChange:E=>Ye("publisher",E.target.value)})]})}),c.jsxs("div",{className:"admin-row three",children:[c.jsxs("label",{children:["Release Date",c.jsx("input",{type:"date",value:N.data.date,onChange:E=>Ye("date",E.target.value)})]}),!an&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Date Purchased",c.jsx("input",{type:"date",value:N.data.datePurchased,onChange:E=>Ye("datePurchased",E.target.value)})]}),c.jsxs("label",{children:["Date Read",c.jsx("input",{type:"date",value:N.data.dateRead,onChange:E=>Ye("dateRead",E.target.value)})]})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Page Count",c.jsx("input",{type:"number",placeholder:"e.g. 192",value:N.data.pageCount,onChange:E=>Ye("pageCount",E.target.value)})]}),!an&&c.jsxs("label",{children:["ISBN (library only)",c.jsx("input",{type:"text",value:N.data.isbn,onChange:E=>Ye("isbn",E.target.value)})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Cover URL",c.jsx("input",{type:"text",placeholder:"Paste image URL here",value:N.data.cover,onChange:E=>Ye("cover",E.target.value)})]})}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Page Count",c.jsx("input",{type:"number",placeholder:"e.g. 192",value:N.data.pageCount,onChange:E=>Ye("pageCount",E.target.value)})]}),c.jsxs("label",{children:["ISBN (library only)",c.jsx("input",{type:"text",value:N.data.isbn,onChange:E=>Ye("isbn",E.target.value)})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Cover URL",c.jsx("input",{type:"text",placeholder:"Paste image URL here",value:N.data.cover,onChange:E=>Ye("cover",E.target.value)})]})}),!an&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Amount Paid",c.jsx("input",{type:"number",step:"0.01",value:N.data.amountPaid,onChange:E=>Ye("amountPaid",E.target.value)})]}),c.jsxs("label",{children:["MSRP",c.jsx("input",{type:"number",step:"0.01",value:N.data.msrp,onChange:E=>Ye("msrp",E.target.value)})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Collectible Price",c.jsx("input",{type:"number",step:"0.01",value:N.data.collectiblePrice,onChange:E=>Ye("collectiblePrice",E.target.value)})]}),c.jsxs("label",{children:["Special Volumes",c.jsx("input",{type:"number",min:"0",value:N.data.specialVolumes,onChange:E=>Ye("specialVolumes",E.target.value)})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Special Type",c.jsx("input",{type:"text",value:N.data.specialType,onChange:E=>Ye("specialType",E.target.value)})]}),c.jsxs("label",{children:["Amazon URL",c.jsx("input",{type:"text",value:N.data.amazonURL,onChange:E=>Ye("amazonURL",E.target.value)})]})]})]}),an&&c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Amazon URL",c.jsx("input",{type:"text",value:N.data.amazonURL,onChange:E=>Ye("amazonURL",E.target.value)})]})}),!an&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Demographic",c.jsxs("select",{value:N.data.demographic,onChange:E=>Ye("demographic",E.target.value),children:[c.jsx("option",{value:"",children:"Select"}),c.jsx("option",{value:"Shounen",children:"Shounen"}),c.jsx("option",{value:"Seinen",children:"Seinen"}),c.jsx("option",{value:"Shoujo",children:"Shoujo"}),c.jsx("option",{value:"Josei",children:"Josei"})]})]}),c.jsxs("label",{children:["Genre",c.jsx("input",{type:"text",value:N.data.genre,onChange:E=>Ye("genre",E.target.value)})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Sub Genre",c.jsx("input",{type:"text",value:N.data.subGenre,onChange:E=>Ye("subGenre",E.target.value)})]}),c.jsxs("label",{children:["Rating (1-5 stars)",c.jsx(Sn,{value:N.data.rating,onChange:E=>Ye("rating",E)})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:N.data.read,onChange:E=>Ye("read",E.target.checked,"checkbox")}),c.jsx("span",{children:"Mark as read"})]}),c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:!!N.data.hidden,onChange:E=>Ye("hidden",E.target.checked,"checkbox")}),c.jsx("span",{children:"Hide from public"})]})]})]}),an&&c.jsx("div",{className:"admin-row",children:c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:!!N.data.hidden,onChange:E=>Ye("hidden",E.target.checked,"checkbox")}),c.jsx("span",{children:"Hide from public"})]})})]})]}),c.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[c.jsx("button",{className:"manga-btn secondary",onClick:sn,type:"button",children:"Cancel"}),c.jsx("button",{className:"manga-btn",onClick:ur,type:"button",children:N.mode==="add"?"Add":"Save"})]})]})})}),e&&W.open&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:E=>{E.target===E.currentTarget&&on()},children:c.jsx("div",{className:"manga-modal admin",children:c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",W.index+1," / ",W.items.length,")"]}),c.jsx("button",{className:"manga-modal-close",onClick:on,type:"button",children:"Close"})]}),W.items.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",W.items[W.index].data.title||"Untitled"]}),c.jsxs("div",{className:"admin-form-grid",children:[c.jsxs("label",{children:["Title",c.jsx("input",{type:"text",value:W.items[W.index].data.title,onChange:E=>Le("title",E.target.value)})]}),c.jsxs("label",{children:["Authors",c.jsx("input",{type:"text",value:W.items[W.index].data.authors,onChange:E=>Le("authors",E.target.value)})]}),c.jsxs("label",{children:["Publisher",c.jsx("input",{type:"text",value:W.items[W.index].data.publisher,onChange:E=>Le("publisher",E.target.value)})]}),!oe&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Demographic",c.jsxs("select",{value:W.items[W.index].data.demographic,onChange:E=>Le("demographic",E.target.value),children:[c.jsx("option",{value:"",children:"Select"}),c.jsx("option",{value:"Shounen",children:"Shounen"}),c.jsx("option",{value:"Seinen",children:"Seinen"}),c.jsx("option",{value:"Shoujo",children:"Shoujo"}),c.jsx("option",{value:"Josei",children:"Josei"})]})]}),c.jsxs("label",{children:["Genre",c.jsx("input",{type:"text",value:W.items[W.index].data.genre,onChange:E=>Le("genre",E.target.value)})]}),c.jsxs("label",{children:["Sub Genre",c.jsx("input",{type:"text",value:W.items[W.index].data.subGenre,onChange:E=>Le("subGenre",E.target.value)})]})]}),c.jsxs("label",{children:["Release Date",c.jsx("input",{type:"date",value:W.items[W.index].data.date,onChange:E=>Le("date",E.target.value)})]}),!oe&&c.jsxs("label",{children:["ISBN",c.jsx("input",{type:"text",value:W.items[W.index].data.isbn,onChange:E=>Le("isbn",E.target.value)})]}),c.jsxs("label",{children:["Cover URL",c.jsx("input",{type:"text",value:W.items[W.index].data.cover,onChange:E=>Le("cover",E.target.value)})]}),c.jsxs("label",{children:["Page Count",c.jsx("input",{type:"number",value:W.items[W.index].data.pageCount,onChange:E=>Le("pageCount",E.target.value)})]}),!oe&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Rating (1-5 stars)",c.jsx(Sn,{value:W.items[W.index].data.rating,onChange:E=>Le("rating",E)})]}),c.jsxs("label",{children:["Amount Paid",c.jsx("input",{type:"number",step:"0.01",value:W.items[W.index].data.amountPaid,onChange:E=>Le("amountPaid",E.target.value)})]}),c.jsxs("label",{children:["MSRP",c.jsx("input",{type:"number",step:"0.01",value:W.items[W.index].data.msrp,onChange:E=>Le("msrp",E.target.value)})]}),c.jsxs("label",{children:["Collectible Price",c.jsx("input",{type:"number",step:"0.01",value:W.items[W.index].data.collectiblePrice,onChange:E=>Le("collectiblePrice",E.target.value)})]})]}),!oe&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Date Purchased",c.jsx("input",{type:"date",value:W.items[W.index].data.datePurchased,onChange:E=>Le("datePurchased",E.target.value)})]}),c.jsxs("label",{children:["Date Read",c.jsx("input",{type:"date",value:W.items[W.index].data.dateRead,onChange:E=>Le("dateRead",E.target.value)})]})]}),!oe&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Special Type",c.jsx("input",{type:"text",value:W.items[W.index].data.specialType,onChange:E=>Le("specialType",E.target.value)})]}),c.jsxs("label",{children:["Special Volumes",c.jsx("input",{type:"number",value:W.items[W.index].data.specialVolumes,onChange:E=>Le("specialVolumes",E.target.value)})]})]}),c.jsxs("label",{children:["Amazon URL",c.jsx("input",{type:"text",value:W.items[W.index].data.amazonURL,onChange:E=>Le("amazonURL",E.target.value)})]}),!oe&&c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:W.items[W.index].data.read,onChange:E=>Le("read",E.target.checked,"checkbox")}),c.jsx("span",{children:"Marked as read"})]}),c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:!!W.items[W.index].data.hidden,onChange:E=>Le("hidden",E.target.checked,"checkbox")}),c.jsx("span",{children:"Hidden from public"})]})]}),c.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[c.jsxs("div",{children:[c.jsx("button",{className:"manga-btn secondary",onClick:Xr,type:"button",disabled:W.index===0,children:"Previous"}),c.jsx("button",{className:"manga-btn secondary",onClick:kt,type:"button",disabled:W.index===W.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{className:"manga-btn secondary",onClick:on,type:"button",children:"Cancel"}),c.jsx("button",{className:"manga-btn",onClick:Vn,type:"button",children:"Save Edits"})]})]})]})]})})}),c.jsx("datalist",{id:"adminTitleSuggestions",children:m.map(E=>c.jsx("option",{value:E},E))})]})}const HP="https://imokmalworker.imokissick.workers.dev/?url=",qP="im_ok",Ev=300,GP={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function KP(r){const e=GP[r.status]||(typeof r.status=="string"?r.status.toLowerCase():"unknown");return{id:r.anime_id||r.id,title:r.anime_title||r.title||"Untitled",episodes:r.anime_num_episodes??r.episodes??null,status:e,score:r.score??null,image:r.anime_image_path||r.image_url||r.anime_img||r.picture||null}}function Tv(){return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null}]}async function QP(r,e){const t=`https://myanimelist.net/animelist/${r}/load.json?status=7&offset=${e}`,i=await fetch(`${HP}${encodeURIComponent(t)}`);if(!i.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return i.json()}async function YP(r=qP){const e=[];try{let t=0;for(;;){const i=await QP(r,t);if(!Array.isArray(i)||i.length===0||(e.push(...i),i.length<Ev))break;t+=Ev}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),Tv()}return e.length?e.map(KP):Tv()}function JP(){const{admin:r}=pa(),e=le=>le?le.toString().replace(/_/g," ").replace(/\b\w/g,ue=>ue.toUpperCase()):"Unknown",[t,i]=z.useState([]),[o,l]=z.useState([]),[h,p]=z.useState(""),[m,v]=z.useState("all"),[w,T]=z.useState(!0),[I,F]=z.useState(""),[Q,X]=z.useState(null);z.useEffect(()=>{document.title="Anime | Library"},[]);const V=(le,ue="image")=>(le||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80)||ue,te=async()=>{const le=t.filter(ue=>ue.image).map((ue,b)=>({url:ue.image,name:V(ue.title||`anime-${b+1}`,`anime-${b+1}`)}));if(!le.length){alert("No images found to download.");return}try{const ue=(await pw(async()=>{const{default:A}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:A}},[])).default,b=new ue,C=b.folder("images"),R={};await Promise.all(le.map(async(A,Y)=>{try{const Se=await(await fetch(A.url)).blob(),ke=(A.url.split(".").pop()||"jpg").split(/[?#]/)[0],W=A.name||`image-${Y+1}`;R[W]=(R[W]||0)+1;const ve=R[W]>1?`-${R[W]}`:"";C.file(`${W}${ve}.${ke}`,Se)}catch(me){console.warn("Failed to fetch image",A.url,me)}}));const P=await b.generateAsync({type:"blob"}),D=URL.createObjectURL(P),N=document.createElement("a");N.href=D,N.download="anime-images.zip",N.click(),URL.revokeObjectURL(D)}catch(ue){console.error("Zip download failed",ue),alert("Failed to create zip. Please try again.")}};z.useEffect(()=>{async function le(){try{const ue=await YP();i(ue),l(ue)}catch(ue){console.error(ue),F("Failed to load data from MAL.")}finally{T(!1)}}le()},[]);const pe=le=>{switch((le||"unknown").toLowerCase()){case"watching":return 0;case"completed":return 1;case"on_hold":return 2;case"plan_to_watch":return 3;case"dropped":return 4;default:return 5}};z.useEffect(()=>{let le=[...t];if(m!=="all"&&(le=le.filter(ue=>(ue.status||"").toLowerCase()===m)),h){const ue=h.toLowerCase();le=le.filter(b=>(b.title||"").toLowerCase().includes(ue))}le.sort((ue,b)=>{const C=pe(ue.status),R=pe(b.status);return C!==R?C-R:(ue.title||"").localeCompare(b.title||"")}),l(le)},[t,m,h]);const de=z.useMemo(()=>{const le=t.length,b=t.reduce((P,D)=>P+(Number.isFinite(D.episodes)?Number(D.episodes):0),0)*.4,C={watching:0,completed:0,on_hold:0,dropped:0,plan_to_watch:0,unknown:0};t.forEach(P=>{const D=(P.status||"unknown").toLowerCase();C[D]!=null?C[D]+=1:C.unknown+=1});const R=t.reduce((P,D)=>Number.isFinite(D.score)?P+D.score:P,0)/Math.max(1,t.filter(P=>Number.isFinite(P.score)).length||1);return{total:le,byStatus:C,avgScore:Number.isFinite(R)?R:0,totalHours:b}},[t]),re=le=>{const ue=le.image||"https://imgur.com/chUgq4W.png";return c.jsxs("article",{className:"anime-card",onClick:()=>X(le),children:[c.jsxs("div",{className:"anime-cover-wrap",children:[c.jsx("img",{className:"anime-cover",src:ue,alt:le.title,loading:"lazy",decoding:"async"}),c.jsx("div",{className:`badge-status ${(le.status||"unknown").toLowerCase()}`,children:e(le.status)}),le.score!=null&&c.jsx("div",{className:"badge-score",children:le.score})]}),c.jsxs("div",{className:"anime-meta",children:[c.jsx("div",{className:"anime-title",children:le.title}),c.jsx("div",{className:"anime-sub",children:le.episodes?`${le.episodes} episodes`:"Episodes: ?"}),c.jsxs("div",{className:"anime-progress",children:["Status: ",e(le.status)]})]})]},le.id||le.title)};return c.jsxs("main",{className:"anime-page",children:[c.jsxs("div",{className:"anime-content",children:[c.jsxs("header",{className:"anime-header",style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%"},children:[c.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[c.jsx("h1",{className:"anime-title",style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Anime Library"}),c.jsx("p",{className:"anime-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"MAL-synced overview of your shows"})]}),r&&c.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:c.jsx("button",{className:"stat-link",type:"button",onClick:te,children:"Download Images"})})]}),c.jsxs("div",{className:"anime-stats",children:[c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Total Entries"}),c.jsx("div",{className:"anime-stat-value",children:de.total})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Watching"}),c.jsx("div",{className:"anime-stat-value",children:de.byStatus.watching})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Completed"}),c.jsx("div",{className:"anime-stat-value",children:de.byStatus.completed})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Plan to Watch"}),c.jsx("div",{className:"anime-stat-value",children:de.byStatus.plan_to_watch})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Avg. Score"}),c.jsx("div",{className:"anime-stat-value",children:de.avgScore?de.avgScore.toFixed(1):""})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Hours Watched (est.)"}),c.jsx("div",{className:"anime-stat-value",children:de.totalHours?de.totalHours.toFixed(1):"0.0"})]})]}),c.jsxs("section",{className:"anime-toolbar",children:[c.jsx("input",{type:"text",placeholder:"Search anime by title...",value:h,onChange:le=>p(le.target.value),className:"anime-input"}),c.jsxs("select",{value:m,onChange:le=>v(le.target.value),className:"anime-select",children:[c.jsx("option",{value:"all",children:"All statuses"}),c.jsx("option",{value:"watching",children:"Watching"}),c.jsx("option",{value:"completed",children:"Completed"}),c.jsx("option",{value:"on_hold",children:"On Hold"}),c.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"}),c.jsx("option",{value:"dropped",children:"Dropped"})]})]}),w&&c.jsx("div",{className:"loading",children:"Loading anime list from MAL..."}),I&&c.jsx("div",{className:"error-state",children:I}),!w&&!I&&c.jsx(c.Fragment,{children:o.length===0?c.jsx("div",{className:"empty-state",children:"No results match your filters yet."}):c.jsx("section",{className:"anime-grid",children:o.map(le=>re(le))})})]}),Q&&c.jsx("div",{className:"modal-backdrop visible",onClick:le=>{le.target===le.currentTarget&&X(null)},children:c.jsxs("div",{className:"anime-modal",children:[c.jsxs("div",{className:"anime-modal-header",children:[c.jsx("h2",{style:{color:"#ffb6c1",margin:0},children:Q.title}),c.jsx("button",{className:"anime-modal-close",onClick:()=>X(null),type:"button",children:"Close"})]}),c.jsxs("div",{className:"anime-modal-body",children:[c.jsx("div",{children:c.jsx("img",{className:"anime-modal-cover",src:Q.image||"https://imgur.com/chUgq4W.png",alt:Q.title})}),c.jsxs("div",{className:"anime-modal-meta",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Status:"})," ",e(Q.status)]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Episodes:"})," ",Q.episodes?Q.episodes:"Unknown"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Score:"})," ",Q.score!=null?Q.score:"N/A"]})]})]})]})})]})}function XP(){const r={game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:"",image:""},{admin:e}=pa(),[t,i]=z.useState([]),[o,l]=z.useState(!0),[h,p]=z.useState(""),[m,v]=z.useState("all"),[w,T]=z.useState(!1),[I,F]=z.useState([]),[Q,X]=z.useState(""),[V,te]=z.useState(null),[pe,de]=z.useState(!1),[re,le]=z.useState(r);z.useEffect(()=>{document.title="TCG | Collection"},[]),z.useEffect(()=>{let Y=!1;async function me(){try{const Se=Wn(tt,"tcg"),ke=await ns(Se),W=[];ke.forEach(ve=>W.push({id:ve.id,...ve.data()})),Y||i(W)}catch(Se){console.error("Error loading TCG:",Se);try{const W=await fetch("/base/tcg-collection.json",{cache:"no-cache"});if(!W.ok)throw new Error("fallback fetch failed");const ve=await W.json(),fe=Array.isArray(ve.tcg)?ve.tcg:[];Y||i(fe.map((M,Z)=>({id:M.id||`offline-${Z}`,...M})))}catch(ke){console.error("TCG offline fallback failed",ke)}}finally{Y||l(!1)}}return me(),()=>{Y=!0}},[]);const ue=t.filter(Y=>{if(m!=="all"&&Y.game!==m)return!1;if(!h)return!0;const me=h.toLowerCase();return(Y.name||"").toLowerCase().includes(me)||(Y.setName||"").toLowerCase().includes(me)||(Y.number||"").toLowerCase().includes(me)}),b=t.reduce((Y,me)=>{const Se=Number(me.quantity||1),ke=Number(me.pricePaid||0),W=Number(me.estimatedValue||0);return Y.totalCards+=Se,Y.totalPaid+=Se*ke,Y.totalValue+=Se*W,me.game==="pokemon"&&(Y.pokemon+=Se),me.game==="onepiece"&&(Y.onepiece+=Se),Y},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),C=b.totalValue-b.totalPaid,R=(Y,me)=>{le(Se=>({...Se,[Y]:me}))},P=async()=>{if(!e)return;if(!re.name.trim()){alert("Card name is required.");return}const Y={game:re.game,name:re.name.trim(),setName:re.setName.trim(),number:re.number.trim(),rarity:re.rarity.trim(),condition:re.condition.trim(),quantity:Number(re.quantity||1),pricePaid:Number(re.pricePaid||0),estimatedValue:Number(re.estimatedValue||0),image:re.image.trim()};try{const me=Wn(tt,"tcg");await Go(me,Y),le(r),de(!1);const Se=await ns(me),ke=[];Se.forEach(W=>ke.push({id:W.id,...W.data()})),i(ke)}catch(me){console.error("Error adding card:",me),alert("Failed to save card.")}},D=async()=>{if(!e||!V)return;if(!V.name.trim()){alert("Card name is required.");return}const Y={game:V.game,name:V.name.trim(),setName:V.setName.trim(),number:V.number.trim(),rarity:V.rarity.trim(),condition:V.condition.trim(),quantity:Number(V.quantity||1),pricePaid:Number(V.pricePaid||0),estimatedValue:Number(V.estimatedValue||0),image:V.image?V.image.trim():""};try{await qo(It(tt,"tcg",V.id),Y),i(me=>me.map(Se=>Se.id===V.id?{...Se,...Y}:Se)),te(null)}catch(me){console.error("Error updating card:",me),alert("Failed to update card.")}},N=async Y=>{if(e&&window.confirm("Delete this card?"))try{await Zi(It(tt,"tcg",Y)),i(me=>me.filter(Se=>Se.id!==Y))}catch(me){console.error("Delete error:",me),alert("Failed to delete card.")}},A=()=>{if(!t.length){alert("No cards to export.");return}const Y=new Blob([JSON.stringify({tcg:t},null,2)],{type:"application/json"}),me=URL.createObjectURL(Y),Se=document.createElement("a");Se.href=me,Se.download="tcg-collection.json",Se.click(),URL.revokeObjectURL(me)};return c.jsxs("main",{className:"page",children:[c.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"6px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"TCG Collection"}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Pokemon & One Piece TCG cards with quantities, prices, and collection value."}),c.jsx("div",{style:{marginTop:"10px"},children:c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:A,children:"Export JSON"})})]}),e&&c.jsx("button",{className:"manga-btn",type:"button","aria-label":"Add card",onClick:()=>de(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"56px",height:"56px",borderRadius:"50%",padding:0,fontSize:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),e&&pe&&c.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:Y=>{Y.target===Y.currentTarget&&de(!1)},children:c.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:Y=>Y.stopPropagation(),children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Add card"}),c.jsx("button",{className:"dashboard-close",onClick:()=>de(!1),type:"button",children:"Close"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[c.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:re.image?c.jsx("img",{src:re.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",c.jsxs("select",{value:re.game,onChange:Y=>R("game",Y.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[c.jsx("option",{value:"pokemon",children:"Pokemon"}),c.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",c.jsx("input",{type:"text",value:re.name,onChange:Y=>R("name",Y.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",c.jsx("input",{type:"text",value:re.setName,onChange:Y=>R("setName",Y.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",c.jsx("input",{type:"text",value:re.number,onChange:Y=>R("number",Y.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",c.jsx("input",{type:"text",value:re.rarity,onChange:Y=>R("rarity",Y.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",c.jsx("input",{type:"text",value:re.condition,onChange:Y=>R("condition",Y.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",c.jsx("input",{type:"number",min:"1",value:re.quantity,onChange:Y=>R("quantity",Y.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",c.jsx("input",{type:"number",step:"0.01",min:"0",value:re.pricePaid,onChange:Y=>R("pricePaid",Y.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",c.jsx("input",{type:"number",step:"0.01",min:"0",value:re.estimatedValue,onChange:Y=>R("estimatedValue",Y.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",c.jsx("input",{type:"text",value:re.image||"",onChange:Y=>R("image",Y.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[c.jsx("button",{onClick:()=>{le(r),de(!1)},style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:P,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})]})]})}),e&&V&&c.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:Y=>{Y.target===Y.currentTarget&&te(null)},children:c.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:Y=>Y.stopPropagation(),children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Edit card"}),c.jsx("button",{className:"dashboard-close",onClick:()=>te(null),type:"button",children:"Close"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[c.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:V.image?c.jsx("img",{src:V.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",c.jsxs("select",{value:V.game,onChange:Y=>te(me=>({...me,game:Y.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[c.jsx("option",{value:"pokemon",children:"Pokemon"}),c.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",c.jsx("input",{type:"text",value:V.name,onChange:Y=>te(me=>({...me,name:Y.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",c.jsx("input",{type:"text",value:V.setName,onChange:Y=>te(me=>({...me,setName:Y.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",c.jsx("input",{type:"text",value:V.number,onChange:Y=>te(me=>({...me,number:Y.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",c.jsx("input",{type:"text",value:V.rarity,onChange:Y=>te(me=>({...me,rarity:Y.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",c.jsx("input",{type:"text",value:V.condition,onChange:Y=>te(me=>({...me,condition:Y.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",c.jsx("input",{type:"number",value:V.quantity,onChange:Y=>te(me=>({...me,quantity:Y.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (each)",c.jsx("input",{type:"number",value:V.pricePaid,onChange:Y=>te(me=>({...me,pricePaid:Y.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (each)",c.jsx("input",{type:"number",value:V.estimatedValue,onChange:Y=>te(me=>({...me,estimatedValue:Y.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",c.jsx("input",{type:"text",value:V.image||"",onChange:Y=>te(me=>({...me,image:Y.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[c.jsx("button",{onClick:()=>te(null),style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:D,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save changes"})]})]})}),c.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:b.totalCards})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",b.totalPaid.toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",b.totalValue.toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:C>=0?"#00e676":"#ff8a80"},children:[C>=0?"+":"-","$",Math.abs(C).toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:b.pokemon})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:b.onepiece})]})]}),c.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[c.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:h,onChange:Y=>p(Y.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),c.jsxs("select",{value:m,onChange:Y=>v(Y.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[c.jsx("option",{value:"all",children:"All games"}),c.jsx("option",{value:"pokemon",children:"Pokemon only"}),c.jsx("option",{value:"onepiece",children:"One Piece only"})]})]}),o?c.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):ue.length===0?c.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):c.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:ue.map(Y=>{const me=Number(Y.quantity||1),Se=me*Number(Y.pricePaid||0),ke=me*Number(Y.estimatedValue||0);return c.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem",display:"flex",flexDirection:"column",gap:"6px"},children:[Y.image&&c.jsx("div",{style:{width:"100%",paddingTop:"120%",position:"relative",overflow:"hidden",borderRadius:"10px",background:"#1e0d14"},children:c.jsx("img",{src:Y.image,alt:Y.name||"card image",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"}})}),c.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:Y.name||"Unnamed card"}),c.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:Y.setName||""}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[c.jsxs("span",{children:["#",Y.number||"-"]}),c.jsx("span",{children:Y.rarity||""})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[c.jsxs("span",{children:["Cond: ",Y.condition||"N/A"]}),c.jsxs("span",{children:["Qty: ",me]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[c.jsxs("span",{children:["Paid: $",Se.toFixed(2)]}),c.jsxs("span",{children:["Value: $",ke.toFixed(2)]})]}),c.jsxs("div",{style:{marginTop:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem"},children:Y.game==="pokemon"?"Pokemon":"One Piece"}),e&&c.jsx("button",{onClick:()=>te({...Y,pricePaid:Y.pricePaid??"",estimatedValue:Y.estimatedValue??"",quantity:Y.quantity??1}),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"rgba(255,105,180,0.15)",color:"#ffb6c1",fontSize:"0.7rem",cursor:"pointer"},children:"Edit"})]}),e&&c.jsx("div",{style:{marginTop:"4px",display:"flex",justifyContent:"flex-end"},children:c.jsx("button",{onClick:()=>N(Y.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})})]},Y.id)})})]})}const Zu="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",ec="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",tc="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82";function Si(r){if(!r)return null;if(r instanceof Date)return r;if(r&&typeof r.toDate=="function")return r.toDate();const e=String(r).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,h,p]=t;return new Date(Number(l),Number(h)-1,Number(p))}const i=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(i){let[,l,h,p]=i;const m=p.length===2?+`20${p}`:Number(p);return new Date(m,Number(l)-1,Number(h))}const o=new Date(e);return isNaN(o.getTime())?null:o}function Ep(r){const e=(r.seriesKey||r.series||r.Series||r.title||r.Title||"").trim();return e?e.replace(/\bvolume\s+\d+.*$/i,"").replace(/\bvol\.?\s+\d+.*$/i,"").trim().toLowerCase():""}function ZP(r){const e=new Map;for(const t of r){const i=Ep(t)||t.id;if(!e.has(i)){const m=(t.series||t.Series||t.title||t.Title||"Unknown Series").trim();e.set(i,{key:i,title:m,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const o=e.get(i);o.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;o.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(o.readVolumes+=1,o.readPages+=l);const p=Number(t.rating||t.Rating);!isNaN(p)&&p>0&&(o.ratingSum+=p,o.ratingCount+=1)}return e}function zo(r,e,t=5){const i=new Map;for(const o of r.values()){const l=(o[e]||"").trim();if(!l)continue;const h=l.split(/[\/,]/).map(p=>p.trim()).filter(Boolean);for(const p of h)i.set(p,(i.get(p)||0)+1)}return[...i.entries()].sort((o,l)=>l[1]-o[1]).slice(0,t).map(([o,l])=>({name:o,count:l}))}function Sv(r,e){const t=Array.from({length:12},(i,o)=>{const l=new Date(e,o,1);return{key:`${e}-${o}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:o,value:0}});for(const i of r){const o=Si(i.dateRead||i.DateRead);!o||o.getFullYear()!==e||(t[o.getMonth()].value+=1)}return t}function nl(r){const e=r.getFullYear(),t=`${r.getMonth()+1}`.padStart(2,"0"),i=`${r.getDate()}`.padStart(2,"0");return`${e}-${t}-${i}`}async function Hh(r,e){try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function ek(r){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of r){const h=Si(l.dateRead||l.DateRead);h&&(t[h.getDay()]+=1)}if(!t.some(l=>l>0))return[];const o=t.reduce((l,h)=>Math.max(l,h),0)||1;return e.map((l,h)=>({label:l,value:t[h],pct:t[h]/o}))}function tk(r,e=8){const t=[...r.values()];t.sort((l,h)=>h.volumes-l.volumes);const i=t.slice(0,e),o=i.reduce((l,h)=>Math.max(l,h.volumes),0)||1;return i.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/o}))}function nk(r){const e=[];for(const t of r){const i=Si(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!i)continue;const o=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:i,title:o})}return e.sort((t,i)=>t.date-i.date),e}function rk(r){const e=new Date;for(const t of r)if(t.date>=e)return t;return r[r.length-1]||null}function ik(r){let e=0,t=0;for(const i of r){const o=Si(i.datePurchased||i.DatePurchased),l=Si(i.dateRead||i.DateRead);if(!o||!l)continue;const h=l-o;h<=0||(e+=h/(1e3*60*60*24),t+=1)}return t?e/t:null}function sk(r){const e=new Map;for(const t of r){const i=Si(t.datePurchased||t.DatePurchased),o=Si(t.dateRead||t.DateRead);if(!i||!o)continue;const l=o-i;if(l<=0)continue;const h=l/(1e3*60*60*24),p=Ep(t)||t.id;e.has(p)||e.set(p,{key:p,title:t.series||t.Series||t.title||t.Title||"Untitled",total:0,count:0,min:h,max:h});const m=e.get(p);m.total+=h,m.count+=1,m.min=Math.min(m.min,h),m.max=Math.max(m.max,h)}return[...e.values()].filter(t=>t.count>0).map(t=>({...t,avg:t.total/t.count})).sort((t,i)=>i.avg-t.avg)}function ok(r){let e=0,t=0,i=0;for(const o of r){const l=Number(o.msrp||o.MSRP||0)||0,h=Number(o.amountPaid||o.AmountPaid||o.pricePaid||0)||l||0,p=Number(o.collectiblePrice||o.CollectiblePrice||0)||0;e+=l,t+=h,i+=p}return{msrpTotal:e,paidTotal:t,collectibleTotal:i}}function ak(r){const e=new Map;for(const t of r){const i=Ep(t)||t.id;e.has(i)||e.set(i,{key:i,title:t.series||t.Series||t.title||t.Title||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]});const o=e.get(i);o.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,h=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,p=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,m=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;o.msrp+=l,o.paid+=h,o.collectible+=p,o.pages+=m,v&&(o.readPages+=m);const w=Number(t.rating||t.Rating);!isNaN(w)&&w>0&&o.ratings.push(w)}return[...e.values()]}function lk(r){let e=0,t=0;for(const i of r){const o=Number(i.pages||i.Pages||i.pageCount||0)||0;e+=o,(!!i.read||i.status==="Read"||i.Read===!0)&&(t+=o)}return{total:e,read:t}}function uk(r){let e=0,t=0;for(const i of r.values())i.ratingCount>0&&(e+=i.ratingSum/i.ratingCount,t+=1);return t?e/t:null}function ck({data:r}){if(!r||!r.length)return c.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=r.reduce((v,w)=>Math.max(v,w.value),0)||1,t=480,i=230,o=30,l=i-o*2,h=t/Math.max(r.length-1,1),p=r.map((v,w)=>{const T=w*h,I=i-o-v.value/e*l;return{...v,x:T,y:I}}),m=p.map((v,w)=>w===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return c.jsx("div",{className:"line-chart",children:c.jsxs("svg",{viewBox:`0 0 ${t} ${i}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,w)=>{const T=i-o-v*l;return c.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:T,y2:T},`h-${w}`)}),p.map((v,w)=>c.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:o/2,y2:i-o/2},`v-${w}`)),c.jsx("path",{className:"line-path",d:m}),p.map((v,w)=>c.jsxs("g",{children:[c.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),c.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),c.jsx("text",{className:"line-label",x:v.x,y:i-4,children:v.label})]},w))]})})}function dk({data:r}){return!r||!r.length?c.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):c.jsx("div",{className:"weekday-bars",children:r.map(e=>c.jsxs("div",{className:"weekday-col",children:[c.jsx("div",{className:"weekday-count",children:e.value}),c.jsx("div",{className:"weekday-bar-vert",children:c.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),c.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function hk(r,e,t){const i=r.getFullYear(),o=r.getMonth(),h=new Date(i,o,1).getDay(),p=new Date(i,o+1,0).getDate(),m=new Map;for(const T of e){const I=T.date;if(I.getFullYear()===i&&I.getMonth()===o){const F=I.getDate();m.has(F)||m.set(F,[]),m.get(F).push(T)}}const v=[];for(let T=0;T<h;T++)v.push({type:"pad"});for(let T=1;T<=p;T++){const I=nl(new Date(i,o,T));v.push({type:"day",day:T,releases:m.get(T)||[],dateKey:I,isToday:I===t})}const w=Math.ceil(v.length/7)*7;for(;v.length<w;)v.push({type:"pad"});return v}function fk(){const{user:r,admin:e,loading:t}=pa(),[i,o]=z.useState([]),[l,h]=z.useState([]),[p,m]=z.useState(!0),[v,w]=z.useState(null),[T,I]=z.useState("-"),[F,Q]=z.useState({yearly:Zu,release:ec,activity:tc}),[X,V]=z.useState(!1),[te,pe]=z.useState(""),[de,re]=z.useState([]),[le,ue]=z.useState(!1),[b,C]=z.useState(null),[R,P]=z.useState(null),D=async()=>{if(e)try{ue(!0);const oe=(await ns(Wn(tt,"admins"))).docs.map(E=>({uid:E.id,...E.data()}));re(oe)}catch(G){console.error("Failed to refresh admins",G)}finally{ue(!1)}},N=async()=>{const G=te.trim();if(!G){alert("Enter a UID to grant admin.");return}try{await Xu(It(tt,"admins",G),{uid:G,role:"admin",grantedBy:(r==null?void 0:r.uid)||"manual",grantedAt:new Date().toISOString()},{merge:!0});try{await Xu(It(tt,"roles",G),{admin:!0,updatedAt:new Date().toISOString()},{merge:!0})}catch(oe){console.warn("Legacy roles write skipped (no permission):",oe==null?void 0:oe.message)}pe(""),await D()}catch(oe){console.error("Grant admin failed",oe),alert("Failed to grant admin.")}},A=async G=>{const oe=(G||te).trim();if(!oe){alert("Enter a UID to revoke admin.");return}try{await Zi(It(tt,"admins",oe)),await Zi(It(tt,"roles",oe)),G||pe(""),await D()}catch(E){console.error("Revoke admin failed",E),alert("Failed to revoke admin.")}},[Y,me]=z.useState(!1),[Se,ke]=z.useState(()=>new Date),[W,ve]=z.useState({open:!1,type:null}),fe=new Date().getFullYear(),M=z.useRef(null),Z=z.useRef(null),Ie=z.useRef("");z.useEffect(()=>{document.title="Dashboard"},[]),z.useEffect(()=>(Y||W.open||X||!!R?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[Y,W.open,X,R]),z.useEffect(()=>{typeof window>"u"||(M.current=localStorage.getItem("dashboard-yearly-posted"),Z.current=localStorage.getItem("dashboard-release-posted"),Ie.current=localStorage.getItem("dashboard-activity-posted")||"")},[]),z.useEffect(()=>{if(!e)return;const G=It(tt,"settings","webhooks");(async()=>{try{const oe=await Ef(G);if(oe.exists()){const E=oe.data();Q({yearly:E.yearly||Zu,release:E.release||ec,activity:E.activity||tc})}else await Xu(G,{yearly:Zu,release:ec,activity:tc})}catch(oe){console.error("Failed to load webhook settings",oe)}})()},[e]),z.useEffect(()=>{if(!e)return;let G=!1;return(async()=>{try{ue(!0);const oe=await ns(Wn(tt,"admins"));if(G)return;const E=oe.docs.map(U=>({uid:U.id,...U.data()}));re(E)}catch(oe){console.error("Failed to load admins",oe)}finally{G||ue(!1)}})(),()=>{G=!0}},[e]),z.useEffect(()=>{let G=!1;async function oe(){if(!r||!e){o([]),h([]),w(null),m(!1);return}try{m(!0);const[E,U]=await Promise.all([ns(Wn(tt,"library")),ns(Wn(tt,"wishlist"))]);if(G)return;o(E.docs.map(ee=>({id:ee.id,...ee.data()}))),h(U.docs.map(ee=>({id:ee.id,...ee.data()}))),w(null)}catch(E){console.error(E),G||w("Failed to load dashboard data.")}finally{G||m(!1)}}return oe(),()=>{G=!0}},[r,e]);const Me=z.useMemo(()=>{const G=i.length,oe=i.filter(ut=>!!ut.read||ut.status==="Read"||ut.Read===!0).length,E=G-oe,U=G?Math.round(oe/G*100):0,ee=l.length,L=ZP(i),q=Sv(i,fe),we=Sv(i,fe-1),He=q.reduce((ut,$t)=>ut+$t.value,0),ot=ek(i),ye=tk(L),Ae=nk(l),Vt=rk(Ae),Bt=ik(i),ln=ok(i),hr=lk(i),fr=uk(L),_n=sk(i),ti=zo(L,"publisher",5),pr=zo(L,"genre",5),Nr=zo(L,"demographic",5),ro=ak(i),Ln=[...i].map(ut=>{const $t=Si(ut.dateRead||ut.DateRead)||Si(ut.datePurchased||ut.DatePurchased);return $t?{title:ut.title||ut.Title||ut.series||ut.Series||"Untitled",type:ut.dateRead||ut.DateRead?"Read":"Purchased",date:$t}:null}).filter(Boolean).sort((ut,$t)=>$t.date-ut.date).slice(0,12);return{totalLibrary:G,readCount:oe,unreadCount:E,readPct:U,wishlistCount:ee,seriesMap:L,monthlyReads:q,prevYearReads:we,currentYearReadsTotal:He,weekdayBreakdown:ot,topSeriesBars:ye,releases:Ae,nextRelease:Vt,avgDays:Bt,purchaseToReadSeries:_n,collectionValue:ln,pages:hr,avgRating:fr,topPublishers:ti,topGenres:pr,topDemographics:Nr,seriesAggregates:ro,activity:Ln}},[i,l,fe]),{totalLibrary:Fe,readCount:We,unreadCount:Qe,readPct:Be,wishlistCount:nt,seriesMap:at,monthlyReads:sn,prevYearReads:Qt,currentYearReadsTotal:Gn,weekdayBreakdown:lr,topSeriesBars:Ye,releases:zt,nextRelease:yn,avgDays:ur,purchaseToReadSeries:kr,collectionValue:Pt,pages:_t,avgRating:on,topPublishers:Kn,topGenres:cr,topDemographics:dr,seriesAggregates:ht,activity:Le}=Me,kt=yn?yn.date:null,Xr=!!v;if(z.useEffect(()=>{if(!Qt||!Qt.length)return;const G=fe-1,oe=Qt.reduce((L,q)=>L+q.value,0);if(!oe||(M.current?parseInt(M.current,10):null)===G)return;const U=Qt.map(L=>`${L.label}: ${L.value}`).join(", "),ee=`Yearly reads summary for ${G}: ${oe} total. Breakdown: ${U}`;Hh(F.yearly,ee).then(()=>{M.current=String(G),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String(G))})},[Qt,fe]),z.useEffect(()=>{if(!yn||!zt.length)return;const G=nl(yn.date),oe=nl(new Date);if(G>oe||Z.current===G)return;const E=zt.filter(ee=>nl(ee.date)===G);if(!E.length)return;const U=`Wishlist releases for ${G}:
${E.map(ee=>`- ${ee.title}`).join(`
`)}`;Hh(F.release,U).then(()=>{Z.current=G,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",G)})},[yn,zt]),z.useEffect(()=>{var U,ee;if(!e||!Le||!Le.length)return;const G=Le[0];if(!G||!G.date)return;const oe=`${G.type}-${G.title}-${((ee=(U=G.date).toISOString)==null?void 0:ee.call(U))||G.date}`;if(Ie.current===oe)return;Ie.current=oe;const E=`Activity: ${G.type}  ${G.title} (${G.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})`;Hh(F.activity,E).then(()=>{typeof window<"u"&&localStorage.setItem("dashboard-activity-posted",oe)})},[Le,e,F]),z.useEffect(()=>{if(!kt){I("-");return}const G=()=>{const E=kt-new Date;if(E<=0){I("Released");return}const U=Math.floor(E/1e3),ee=Math.floor(U/86400),L=Math.floor(U%86400/3600).toString().padStart(2,"0"),q=Math.floor(U%3600/60).toString().padStart(2,"0"),we=Math.floor(U%60).toString().padStart(2,"0");I(`${ee}d ${L}:${q}:${we}`)};G();const oe=setInterval(G,1e3);return()=>clearInterval(oe)},[kt]),t)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-loading",children:[c.jsx("h1",{children:"Dashboard"}),c.jsx("p",{children:"Checking permissions..."})]})});if(!r||!e)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-locked",children:[c.jsx("h1",{children:"Dashboard"}),c.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(p)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-loading",children:[c.jsx("h1",{children:"Dashboard"}),v?c.jsx("p",{className:"error",children:v}):c.jsx("p",{children:"Loading stats..."})]})});const Vn=Fe+nt,Qn=Vn?Math.round(Fe/Vn*100):0,Sn=[...at.values()].filter(G=>G.ratingCount>0).map(G=>({title:G.title,avg:G.ratingSum/G.ratingCount,count:G.ratingCount})).sort((G,oe)=>oe.avg-G.avg||oe.count-G.count).slice(0,3);function Ar(){if(kt)ke(new Date(kt.getFullYear(),kt.getMonth(),1));else if(zt.length){const G=zt[0].date;ke(new Date(G.getFullYear(),G.getMonth(),1))}me(!0)}function vn(G){ve({open:!0,type:G})}function br(){ve({open:!1,type:null})}const Zr=nl(new Date),ei=hk(Se,zt,Zr);function an(){const G=W.type;if(!G)return null;if(G==="publishers"){const oe=[...zo(at,"publisher",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Publishers by Series"}),oe.length===0?c.jsx("p",{children:"No publisher data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Publisher"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:oe.map((E,U)=>c.jsxs("tr",{children:[c.jsx("td",{children:U+1}),c.jsx("td",{children:E.name}),c.jsx("td",{children:E.count})]},E.name+U))})]})]})}if(G==="genres"){const oe=[...zo(at,"genre",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Genres by Series"}),oe.length===0?c.jsx("p",{children:"No genre data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Genre"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:oe.map((E,U)=>c.jsxs("tr",{children:[c.jsx("td",{children:U+1}),c.jsx("td",{children:E.name}),c.jsx("td",{children:E.count})]},E.name+U))})]})]})}if(G==="demographics"){const oe=[...zo(at,"demographic",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Demographics by Series"}),oe.length===0?c.jsx("p",{children:"No demographic data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Demographic"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:oe.map((E,U)=>c.jsxs("tr",{children:[c.jsx("td",{children:U+1}),c.jsx("td",{children:E.name}),c.jsx("td",{children:E.count})]},E.name+U))})]})]})}if(G==="timeToRead"){const oe=kr||[];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Average Time From Purchase to Read"}),ur==null?c.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["On average, it takes"," ",c.jsxs("strong",{children:[ur.toFixed(1)," days"]})," from purchase to finishing a volume."]}),oe.length>0?c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Series"}),c.jsx("th",{children:"Avg Days"}),c.jsx("th",{children:"Longest"}),c.jsx("th",{children:"Shortest"}),c.jsx("th",{children:"Reads Count"})]})}),c.jsx("tbody",{children:oe.map(E=>c.jsxs("tr",{children:[c.jsx("td",{children:E.title}),c.jsxs("td",{children:[E.avg.toFixed(1)," days"]}),c.jsxs("td",{children:[Math.round(E.max)," days"]}),c.jsxs("td",{children:[Math.round(E.min)," days"]}),c.jsx("td",{children:E.count})]},E.key))})]}):c.jsx("p",{style:{marginTop:8},children:"No series-level data yet."})]})]})}if(G==="collectionValue"){const{msrpTotal:oe,paidTotal:E}=Pt,U=oe-E,ee=oe>0?(E/oe*100).toFixed(1):"-",L=[...ht].filter(q=>q.msrp||q.paid||q.collectible).sort((q,we)=>we.msrp+we.collectible-(q.msrp+q.collectible));return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Collection Value Breakdown"}),c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("th",{children:"Total MSRP"}),c.jsxs("td",{children:["$",oe.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Total Paid"}),c.jsxs("td",{children:["$",E.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Difference"}),c.jsxs("td",{children:["$",U.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Paid vs MSRP"}),c.jsx("td",{children:ee==="-"?"-":`${ee}%`})]})]})}),L.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"MSRP"}),c.jsx("th",{children:"Paid"}),c.jsx("th",{children:"Collectible"}),c.jsx("th",{children:"Books"})]})}),c.jsx("tbody",{children:L.map((q,we)=>c.jsxs("tr",{children:[c.jsx("td",{children:q.title}),c.jsxs("td",{children:["$",q.msrp.toFixed(2)]}),c.jsxs("td",{children:["$",q.paid.toFixed(2)]}),c.jsx("td",{children:q.collectible?`$${q.collectible.toFixed(2)}`:"--"}),c.jsx("td",{children:q.books})]},q.title+we))})]})]})]})}if(G==="pages"){const oe=[...ht].filter(E=>E.pages>0).map(E=>({...E,pct:E.pages?Math.round(E.readPages/E.pages*100):0})).sort((E,U)=>U.pages-E.pages);return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Pages Read vs Total"}),c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("th",{children:"Total Pages"}),c.jsx("td",{children:_t.total.toLocaleString()})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Pages Read"}),c.jsx("td",{children:_t.read.toLocaleString()})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Completion"}),c.jsx("td",{children:_t.total?`${(_t.read/_t.total*100).toFixed(1)}%`:"-"})]})]})}),oe.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Read Pages"}),c.jsx("th",{children:"Total Pages"}),c.jsx("th",{children:"% Read"}),c.jsx("th",{children:"Books"})]})}),c.jsx("tbody",{children:oe.map((E,U)=>c.jsxs("tr",{children:[c.jsx("td",{children:E.title}),c.jsx("td",{children:E.readPages.toLocaleString()}),c.jsx("td",{children:E.pages.toLocaleString()}),c.jsxs("td",{children:[E.pct,"%"]}),c.jsx("td",{children:E.books})]},E.title+U))})]})]})]})}if(G==="ratings"){const oe=[...ht].map(E=>{if(!E.ratings.length)return null;const U=E.ratings.reduce((ee,L)=>ee+L,0)/E.ratings.length;return{title:E.title,avg:U,count:E.ratings.length}}).filter(Boolean).sort((E,U)=>U.avg-E.avg||U.count-E.count);return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Ratings Overview"}),on==null?c.jsx("p",{children:"No ratings have been recorded yet."}):c.jsxs("p",{children:["Average series rating across rated series is"," ",c.jsx("strong",{children:on.toFixed(2)}),"."]}),oe.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Avg"}),c.jsx("th",{children:"Ratings"})]})}),c.jsx("tbody",{children:oe.map((E,U)=>c.jsxs("tr",{children:[c.jsx("td",{children:E.title}),c.jsx("td",{children:E.avg.toFixed(2)}),c.jsx("td",{children:E.count})]},E.title+U))})]})]})]})}return G==="releases"?c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Wishlist Releases"}),zt.length===0?c.jsx("p",{children:"No wishlist releases found."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Date"}),c.jsx("th",{children:"Title"})]})}),c.jsx("tbody",{children:zt.map((oe,E)=>c.jsxs("tr",{children:[c.jsx("td",{children:oe.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),c.jsx("td",{children:oe.title})]},E))})]})]}):null}return c.jsxs("div",{className:"page dashboard-page",children:[c.jsxs("header",{className:"dashboard-header",style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",textAlign:"center",width:"100%"},children:[c.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Dashboard"}),c.jsx("p",{className:"dashboard-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"Admin-only analytics for your manga library and wishlist."})]}),e&&c.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:c.jsx("button",{className:"stat-link",onClick:()=>V(!0),type:"button",children:"Admin Settings"})})]}),c.jsx("section",{id:"dashboardSection",className:"page-section active",children:c.jsxs("div",{className:"dashboard-grid",children:[c.jsxs("div",{className:"stat-stack",children:[c.jsxs("div",{className:"stat-card mini",children:[c.jsx("h3",{children:"Total Library Books"}),c.jsx("div",{className:"stat-value",children:Fe}),c.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),c.jsxs("div",{className:"stat-card mini",children:[c.jsx("h3",{children:"Wishlist Items"}),c.jsx("div",{className:"stat-value",children:nt}),c.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Read / Unread"}),c.jsx("div",{className:"pie",style:{"--pct":`${Be*3.6}deg`},children:c.jsxs("div",{className:"pie-label",children:[Be,"%"]})}),c.jsxs("div",{className:"stat-value",children:[We," read / ",Qe," unread"]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("ratings"),children:[c.jsx("h3",{children:"Ratings"}),c.jsx("div",{className:"stat-value",children:on==null?"-":on.toFixed(2)}),c.jsx("div",{className:"stat-sub",children:"Average across rated series."}),c.jsx("div",{className:"stat-list compact",children:Sn.length?Sn.map((G,oe)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:oe+1}),c.jsx("span",{className:"stat-name",children:G.title}),c.jsx("span",{className:"stat-count",children:G.avg.toFixed(2)})]},G.title+oe)):c.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("pages"),children:[c.jsx("h3",{children:"Page Count Read / Total"}),c.jsxs("div",{className:"stat-value",children:[_t.read.toLocaleString()," / ",_t.total.toLocaleString()]}),c.jsx("div",{className:"stat-sub",children:_t.total?`${(_t.read/_t.total*100).toFixed(1)}% read`:"-"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Library vs Wishlist"}),c.jsx("div",{className:"pie",style:{"--pct":`${Qn*3.6}deg`},children:c.jsxs("div",{className:"pie-label",children:[Qn,"%"]})}),c.jsxs("div",{className:"stat-value",children:[Fe," / ",nt]}),c.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("demographics"),children:[c.jsx("h3",{children:"Top Demographics"}),c.jsx("div",{className:"stat-list",children:dr.length?dr.slice(0,3).map((G,oe)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:oe+1}),c.jsx("span",{className:"stat-name",children:G.name}),c.jsx("span",{className:"stat-count",children:G.count})]},G.name)):c.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("publishers"),children:[c.jsx("h3",{children:"Top Publishers"}),c.jsx("div",{className:"stat-list",children:Kn.length?Kn.slice(0,3).map((G,oe)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:oe+1}),c.jsx("span",{className:"stat-name",children:G.name}),c.jsx("span",{className:"stat-count",children:G.count})]},G.name)):c.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("genres"),children:[c.jsx("h3",{children:"Top Genres"}),c.jsx("div",{className:"stat-list",children:cr.length?cr.slice(0,3).map((G,oe)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:oe+1}),c.jsx("span",{className:"stat-name",children:G.name}),c.jsx("span",{className:"stat-count",children:G.count})]},G.name)):c.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>{Ar()},children:[c.jsx("h3",{children:"Next Wishlist Release"}),c.jsx("div",{className:"stat-value next-release",children:yn?yn.title:"No upcoming releases"}),c.jsxs("div",{className:"stat-sub",children:[kt?kt.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",c.jsx("br",{}),c.jsx("span",{id:"statNextCountdown",children:T})]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("collectionValue"),style:{textAlign:"center"},children:[c.jsx("h3",{children:"Collection Pricing"}),c.jsxs("div",{className:"stat-value stat-msrp",children:["$",Pt.msrpTotal.toFixed(2)]}),c.jsxs("div",{className:"stat-value stat-paid",children:["$",Pt.paidTotal.toFixed(2),Pt.msrpTotal>0&&c.jsxs("span",{className:"stat-paid-pct",children:["(",((1-Pt.paidTotal/Pt.msrpTotal)*100).toFixed(1),"% off)"]})]}),c.jsxs("div",{className:"stat-value stat-collectible",children:["$",Pt.collectibleTotal.toFixed(2)]}),c.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Current Year Reads"}),c.jsx("div",{className:"stat-value",children:Gn}),c.jsxs("div",{className:"stat-sub",children:["Reads in ",fe]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("timeToRead"),children:[c.jsx("h3",{children:"Avg Days From Purchase to Read"}),c.jsx("div",{className:"stat-value",children:ur==null?"-":`${ur.toFixed(1)} days`}),c.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),c.jsxs("div",{className:"stat-duo",children:[c.jsxs("div",{className:"stat-card tall",children:[c.jsxs("h3",{children:["Reads Per Month (",fe,")"]}),c.jsx(ck,{data:sn})]}),c.jsxs("div",{className:"stat-card tall",children:[c.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),c.jsx(dk,{data:lr}),c.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),c.jsxs("div",{className:"stat-card wide",children:[c.jsx("h3",{children:"Activity Log"}),Xr&&c.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),c.jsx("div",{className:"activity-log",children:Le.length?Le.map((G,oe)=>c.jsxs("div",{className:"activity-row",children:[c.jsx("span",{className:"activity-type",children:G.type}),c.jsx("span",{className:"activity-title",children:G.title}),c.jsx("span",{className:"activity-date",children:G.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]},G.title+oe)):c.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]})]})}),Y&&c.jsx("div",{id:"calendarOverlay",onClick:()=>me(!1),children:c.jsxs("div",{id:"calendarCard",onClick:G=>G.stopPropagation(),children:[c.jsxs("div",{className:"calendar-header",children:[c.jsx("div",{className:"calendar-title",children:Se.toLocaleString(void 0,{month:"long",year:"numeric"})}),c.jsxs("div",{className:"calendar-nav",children:[c.jsx("button",{className:"calendar-nav-btn",onClick:()=>ke(new Date(Se.getFullYear(),Se.getMonth()-1,1)),children:"<"}),c.jsx("button",{className:"calendar-nav-btn",onClick:()=>ke(new Date(Se.getFullYear(),Se.getMonth()+1,1)),children:">"})]})]}),c.jsxs("div",{className:"calendar-weekdays",children:[c.jsx("div",{children:"Sun"}),c.jsx("div",{children:"Mon"}),c.jsx("div",{children:"Tue"}),c.jsx("div",{children:"Wed"}),c.jsx("div",{children:"Thu"}),c.jsx("div",{children:"Fri"}),c.jsx("div",{children:"Sat"})]}),c.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:ei.map((G,oe)=>G.type==="pad"?c.jsx("div",{className:"calendar-day pad"},oe):c.jsxs("div",{className:"calendar-day"+(G.isToday?" today":""),children:[c.jsx("div",{className:"day-num",children:G.day}),c.jsxs("div",{className:"calendar-releases",children:[(b===G.dateKey?G.releases:G.releases.slice(0,2)).map((E,U)=>c.jsx("div",{className:"calendar-release",title:E.title,children:E.title},U)),G.releases.length>2&&c.jsxs("button",{className:"calendar-more-btn",onClick:()=>{const E=new Date(Se.getFullYear(),Se.getMonth(),G.day);P({dateLabel:E.toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}),releases:G.releases})},children:["+",G.releases.length-2," more"]})]})]},oe))}),!zt.length&&c.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),c.jsx("button",{id:"calendarClose",onClick:()=>me(!1),children:"x"})]})}),W.open&&c.jsx("div",{id:"statDetailOverlay",onClick:br,children:c.jsxs("div",{id:"statDetailCard",onClick:G=>G.stopPropagation(),children:[c.jsx("button",{id:"statDetailClose",onClick:br,children:"x"}),c.jsxs("h2",{id:"statDetailTitle",children:[W.type==="publishers"&&"Top Publishers",W.type==="genres"&&"Top Genres",W.type==="demographics"&&"Top Demographics",W.type==="timeToRead"&&"Avg Time From Purchase to Read",W.type==="collectionValue"&&"Collection Value",W.type==="pages"&&"Pages Read vs Total",W.type==="ratings"&&"Ratings",W.type==="releases"&&"Wishlist Releases"]}),c.jsx("div",{id:"statDetailBody",children:an()})]})}),R&&c.jsx("div",{id:"calendarOverlay",onClick:()=>P(null),style:{zIndex:10080},children:c.jsxs("div",{id:"calendarCard",onClick:G=>G.stopPropagation(),style:{maxWidth:"520px"},children:[c.jsxs("div",{className:"calendar-header",children:[c.jsx("div",{className:"calendar-title",children:R.dateLabel}),c.jsx("button",{className:"calendar-close-btn",onClick:()=>P(null),type:"button",children:"Close"})]}),c.jsx("div",{className:"calendar-releases",children:R.releases.map((G,oe)=>c.jsx("div",{className:"calendar-release",title:G.title,children:G.title},oe))})]})}),e&&X&&c.jsx("div",{className:"dashboard-modal-backdrop visible",onClick:G=>{G.target===G.currentTarget&&V(!1)},children:c.jsxs("div",{className:"dashboard-modal",children:[c.jsxs("div",{className:"dashboard-modal-header",children:[c.jsx("h3",{children:"Webhook Settings"}),c.jsx("button",{className:"dashboard-close",onClick:()=>V(!1),type:"button",children:"Close"})]}),c.jsxs("div",{className:"dashboard-modal-body",children:[c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Yearly summary webhook"}),c.jsx("input",{type:"text",value:F.yearly,onChange:G=>Q(oe=>({...oe,yearly:G.target.value}))})]}),c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Release timer webhook"}),c.jsx("input",{type:"text",value:F.release,onChange:G=>Q(oe=>({...oe,release:G.target.value}))})]}),c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Activity webhook"}),c.jsx("input",{type:"text",value:F.activity,onChange:G=>Q(oe=>({...oe,activity:G.target.value}))})]}),c.jsxs("div",{className:"dashboard-input",style:{borderTop:"1px solid rgba(255,182,193,0.2)",paddingTop:8},children:[c.jsx("span",{children:"Admin UIDs"}),c.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[c.jsx("input",{type:"text",placeholder:"Enter UID",value:te,onChange:G=>pe(G.target.value),style:{flex:"1 1 220px",padding:"8px 10px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.75)",color:"#ffffff"}}),c.jsx("button",{className:"stat-link",type:"button",onClick:N,children:"Grant"}),c.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>A(),children:"Revoke"})]}),c.jsx("div",{style:{marginTop:8,fontSize:"0.85rem",color:"var(--text-soft)"},children:le?c.jsx("span",{children:"Loading admins"}):de.length===0?c.jsx("span",{children:"No admins found."}):c.jsx("ul",{style:{listStyle:"none",margin:"6px 0 0",padding:0,display:"flex",gap:6,flexDirection:"column"},children:de.map(G=>c.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,background:"rgba(24,5,18,0.7)",border:"1px solid rgba(255,182,193,0.18)",borderRadius:10,padding:"6px 8px"},children:[c.jsx("span",{style:{wordBreak:"break-all"},children:G.uid}),c.jsx("button",{className:"dashboard-close",type:"button",onClick:()=>A(G.uid),style:{padding:"4px 10px"},children:"Revoke"})]},G.uid))})})]})]}),c.jsxs("div",{className:"dashboard-modal-footer",children:[c.jsx("button",{className:"stat-link",type:"button",onClick:async()=>{try{await Xu(It(tt,"settings","webhooks"),{yearly:F.yearly||Zu,release:F.release||ec,activity:F.activity||tc}),V(!1)}catch(G){console.error("Failed to save webhooks",G),alert("Failed to save webhooks.")}},children:"Save"}),c.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>V(!1),children:"Cancel"})]})]})})]})}function pk(){const[r,e]=z.useState(!0),[t,i]=z.useState(""),[o,l]=z.useState(0),[h,p]=z.useState([]),[m,v]=z.useState(0),w=z.useRef(null);z.useEffect(()=>{document.title="Music | im.ok"},[]),z.useEffect(()=>{let re=!1;async function le(){e(!0),i("");try{const ue=await fetch("https://music-api-worker.imokissick.workers.dev/music");if(!ue.ok)throw new Error("Worker fetch failed");const b=await ue.json();if(re)return;const C=(Array.isArray(b.combined)?b.combined:[]).map(R=>({...R,releaseDate:R.releaseDate?new Date(R.releaseDate):new Date}));p(C)}catch(ue){console.error(ue),re||i("Failed to load music feeds.")}finally{re||e(!1)}}return le(),()=>{re=!0}},[]);const T=Math.min(4,Math.max(1,h.length)),I=T?Math.ceil(h.length/T):0,F=()=>{w.current&&clearInterval(w.current),h.length&&(v(re=>re+1),w.current=setInterval(()=>{l(re=>(Math.floor(re/T)+1)%I*T%h.length),v(re=>re+1)},15e3))};z.useEffect(()=>{if(h.length)return F(),()=>{w.current&&clearInterval(w.current)}},[h,T]);const Q=re=>{h.length&&(l(le=>(Math.floor(le/T)+re+I)%I*T%h.length),F())},X=re=>{h.length&&(l(re*T%h.length),F())},V=re=>le=>{le.preventDefault();const b=re.source==="spotify"?`spotify:album:${re.id}`:re.url,C=re.url;try{const R=setTimeout(()=>{window.open(C,"_blank","noopener,noreferrer")},600);window.location.href=b,setTimeout(()=>clearTimeout(R),800)}catch{window.open(C,"_blank","noopener,noreferrer")}},te=h[0],pe=re=>re?{backgroundImage:`url(${re})`,backgroundSize:"cover",backgroundPosition:"center"}:{},de=te?te.source==="spotify"?"Spotify":"SoundCloud":"";return c.jsxs("main",{className:"page music-page",children:[c.jsxs("header",{className:"music-hero",children:[c.jsxs("div",{className:"music-hero-content",children:[c.jsx("p",{className:"music-pill",children:"im.ok  Artist"}),c.jsx("h1",{children:te?te.title:"Latest & Greatest"}),c.jsx("p",{className:"music-sub",children:"Check out my latest song. I know it's been almost a whole year since I've released. I have been on a much needed hiatus. I felt the whole world crumbling around me and had no time to breathe so this is why I took a break. Here's to 2026!"}),te&&c.jsx("div",{className:"music-badges",children:c.jsx("span",{children:de})})]}),c.jsx("div",{className:"music-hero-embed",children:c.jsxs("div",{className:"music-hero-art",style:pe(te==null?void 0:te.artwork),children:[!(te!=null&&te.artwork)&&c.jsx("div",{className:"music-hero-art-fallback",children:"Artwork"}),te&&c.jsx("button",{className:"music-link music-play hero-play","aria-label":`Play ${te.title}`,onClick:V(te)})]})})]}),c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"Releases"})}),t&&c.jsx("div",{className:"music-error",children:t}),r&&c.jsx("div",{className:"music-loading",children:"Loading music feeds..."}),!r&&h.length===0&&c.jsx("div",{className:"music-empty",children:"Connect Spotify/SoundCloud tokens to see live releases."}),!r&&h.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"music-carousel-wrap",children:[c.jsx("button",{className:"music-nav left",onClick:()=>Q(-1),"aria-label":"Previous releases",children:""}),c.jsx("div",{className:"music-carousel",children:Array.from({length:T}).map((re,le)=>{const ue=h[(o+le)%h.length];return ue?c.jsxs("div",{className:"music-card",children:[c.jsx("div",{className:"music-card-art",style:pe(ue.artwork)}),c.jsxs("div",{className:"music-card-body",children:[c.jsx("div",{className:"music-card-title",children:ue.title}),c.jsx("div",{className:"music-card-actions",children:c.jsx("button",{className:"music-link music-play","aria-label":`Play ${ue.title}`,onClick:V(ue)})})]})]},`${ue.id}-${le}`):null})}),c.jsx("button",{className:"music-nav right",onClick:()=>Q(1),"aria-label":"Next releases",children:""})]}),c.jsx("div",{className:"music-dots",children:Array.from({length:I}).map((re,le)=>{const ue=Math.floor(o/T)===le,b=ue?`${le}-${m}`:`${le}-idle`;return c.jsx("button",{className:`dot ${ue?"active":""}`,onClick:()=>X(le),"aria-label":`Go to set ${le+1}`,children:c.jsx("span",{className:"dot-fill"},b)},le)})})]})]}),c.jsxs("div",{className:"music-feeds-row",children:[c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"Spotify"})}),c.jsx("div",{className:"music-embed-card",children:c.jsx("iframe",{title:"Spotify Artist",src:"https://open.spotify.com/embed/artist/00sbWLxYLDs8i5BLQL9Qdo?utm_source=generator&theme=0",width:"100%",height:"400",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})})]}),c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"SoundCloud"})}),c.jsx("div",{className:"music-embed-card",children:c.jsx("iframe",{title:"SoundCloud Player",width:"100%",height:"400",scrolling:"no",frameBorder:"no",allow:"autoplay",src:"https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/imxk&color=%23ff69b4&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"})})]})]})]})}function mk(){const r=Dc(),{user:e}=pa();e&&r("/");async function t(){try{const i=new Wr;await b_(us,i),r("/")}catch(i){console.error(i),alert("Google Sign-In failed.")}}return c.jsx("div",{className:"signin-page",children:c.jsxs("div",{className:"signin-card",children:[c.jsx("h2",{className:"signin-title",children:"Welcome Back"}),c.jsx("p",{className:"signin-sub",children:"Sign in to access your dashboard & collections."}),c.jsxs("button",{className:"google-btn",onClick:t,children:[c.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),c.jsxs("button",{className:"signin-cancel",onClick:()=>r("/"),children:["<"," Back to Home"]})]})})}function gk(){return c.jsxs(FP,{children:[c.jsx(zP,{}),c.jsxs(xE,{children:[c.jsx(Br,{path:"/",element:c.jsx(wv,{})}),c.jsx(Br,{path:"/home",element:c.jsx(wv,{})}),c.jsx(Br,{path:"/manga",element:c.jsx(WP,{})}),c.jsx(Br,{path:"/anime",element:c.jsx(JP,{})}),c.jsx(Br,{path:"/tcg",element:c.jsx(XP,{})}),c.jsx(Br,{path:"/music",element:c.jsx(pk,{})}),c.jsx(Br,{path:"/dashboard",element:c.jsx(fk,{})}),c.jsx(Br,{path:"/signin",element:c.jsx(mk,{})}),c.jsx(Br,{path:"*",element:c.jsx(_E,{to:"/home",replace:!0})})]})]})}Px.createRoot(document.getElementById("root")).render(c.jsx(Cv.StrictMode,{children:c.jsx(PE,{basename:"/base",children:c.jsx(gk,{})})}));
