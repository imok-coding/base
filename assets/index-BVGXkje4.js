function Px(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Dv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var kh={exports:{}},sl={},jh={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function Rx(){if(Dg)return Xe;Dg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function C(k){return k===null||typeof k!="object"?null:(k=E&&k[E]||k["@@iterator"],typeof k=="function"?k:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,te={};function W(k,H,ve){this.props=k,this.context=H,this.refs=te,this.updater=ve||$}W.prototype.isReactComponent={},W.prototype.setState=function(k,H){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,H,"setState")},W.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function ie(){}ie.prototype=W.prototype;function se(k,H,ve){this.props=k,this.context=H,this.refs=te,this.updater=ve||$}var oe=se.prototype=new ie;oe.constructor=se,Q(oe,W.prototype),oe.isPureReactComponent=!0;var me=Array.isArray,we=Object.prototype.hasOwnProperty,he={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function R(k,H,ve){var Ee,Ce={},Le=null,$e=null;if(H!=null)for(Ee in H.ref!==void 0&&($e=H.ref),H.key!==void 0&&(Le=""+H.key),H)we.call(H,Ee)&&!V.hasOwnProperty(Ee)&&(Ce[Ee]=H[Ee]);var We=arguments.length-2;if(We===1)Ce.children=ve;else if(1<We){for(var st=Array(We),yt=0;yt<We;yt++)st[yt]=arguments[yt+2];Ce.children=st}if(k&&k.defaultProps)for(Ee in We=k.defaultProps,We)Ce[Ee]===void 0&&(Ce[Ee]=We[Ee]);return{$$typeof:n,type:k,key:Le,ref:$e,props:Ce,_owner:he.current}}function j(k,H){return{$$typeof:n,type:k.type,key:H,ref:k.ref,props:k.props,_owner:k._owner}}function A(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function M(k){var H={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ve){return H[ve]})}var P=/\/+/g;function b(k,H){return typeof k=="object"&&k!==null&&k.key!=null?M(""+k.key):H.toString(36)}function fe(k,H,ve,Ee,Ce){var Le=typeof k;(Le==="undefined"||Le==="boolean")&&(k=null);var $e=!1;if(k===null)$e=!0;else switch(Le){case"string":case"number":$e=!0;break;case"object":switch(k.$$typeof){case n:case e:$e=!0}}if($e)return $e=k,Ce=Ce($e),k=Ee===""?"."+b($e,0):Ee,me(Ce)?(ve="",k!=null&&(ve=k.replace(P,"$&/")+"/"),fe(Ce,H,ve,"",function(yt){return yt})):Ce!=null&&(A(Ce)&&(Ce=j(Ce,ve+(!Ce.key||$e&&$e.key===Ce.key?"":(""+Ce.key).replace(P,"$&/")+"/")+k)),H.push(Ce)),1;if($e=0,Ee=Ee===""?".":Ee+":",me(k))for(var We=0;We<k.length;We++){Le=k[We];var st=Ee+b(Le,We);$e+=fe(Le,H,ve,st,Ce)}else if(st=C(k),typeof st=="function")for(k=st.call(k),We=0;!(Le=k.next()).done;)Le=Le.value,st=Ee+b(Le,We++),$e+=fe(Le,H,ve,st,Ce);else if(Le==="object")throw H=String(k),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return $e}function Ke(k,H,ve){if(k==null)return k;var Ee=[],Ce=0;return fe(k,Ee,"","",function(Le){return H.call(ve,Le,Ce++)}),Ee}function et(k){if(k._status===-1){var H=k._result;H=H(),H.then(function(ve){(k._status===0||k._status===-1)&&(k._status=1,k._result=ve)},function(ve){(k._status===0||k._status===-1)&&(k._status=2,k._result=ve)}),k._status===-1&&(k._status=0,k._result=H)}if(k._status===1)return k._result.default;throw k._result}var K={current:null},D={transition:null},z={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:D,ReactCurrentOwner:he};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:Ke,forEach:function(k,H,ve){Ke(k,function(){H.apply(this,arguments)},ve)},count:function(k){var H=0;return Ke(k,function(){H++}),H},toArray:function(k){return Ke(k,function(H){return H})||[]},only:function(k){if(!A(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Xe.Component=W,Xe.Fragment=t,Xe.Profiler=a,Xe.PureComponent=se,Xe.StrictMode=s,Xe.Suspense=m,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,Xe.act=ee,Xe.cloneElement=function(k,H,ve){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var Ee=Q({},k.props),Ce=k.key,Le=k.ref,$e=k._owner;if(H!=null){if(H.ref!==void 0&&(Le=H.ref,$e=he.current),H.key!==void 0&&(Ce=""+H.key),k.type&&k.type.defaultProps)var We=k.type.defaultProps;for(st in H)we.call(H,st)&&!V.hasOwnProperty(st)&&(Ee[st]=H[st]===void 0&&We!==void 0?We[st]:H[st])}var st=arguments.length-2;if(st===1)Ee.children=ve;else if(1<st){We=Array(st);for(var yt=0;yt<st;yt++)We[yt]=arguments[yt+2];Ee.children=We}return{$$typeof:n,type:k.type,key:Ce,ref:Le,props:Ee,_owner:$e}},Xe.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:l,_context:k},k.Consumer=k},Xe.createElement=R,Xe.createFactory=function(k){var H=R.bind(null,k);return H.type=k,H},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(k){return{$$typeof:f,render:k}},Xe.isValidElement=A,Xe.lazy=function(k){return{$$typeof:w,_payload:{_status:-1,_result:k},_init:et}},Xe.memo=function(k,H){return{$$typeof:v,type:k,compare:H===void 0?null:H}},Xe.startTransition=function(k){var H=D.transition;D.transition={};try{k()}finally{D.transition=H}},Xe.unstable_act=ee,Xe.useCallback=function(k,H){return K.current.useCallback(k,H)},Xe.useContext=function(k){return K.current.useContext(k)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(k){return K.current.useDeferredValue(k)},Xe.useEffect=function(k,H){return K.current.useEffect(k,H)},Xe.useId=function(){return K.current.useId()},Xe.useImperativeHandle=function(k,H,ve){return K.current.useImperativeHandle(k,H,ve)},Xe.useInsertionEffect=function(k,H){return K.current.useInsertionEffect(k,H)},Xe.useLayoutEffect=function(k,H){return K.current.useLayoutEffect(k,H)},Xe.useMemo=function(k,H){return K.current.useMemo(k,H)},Xe.useReducer=function(k,H,ve){return K.current.useReducer(k,H,ve)},Xe.useRef=function(k){return K.current.useRef(k)},Xe.useState=function(k){return K.current.useState(k)},Xe.useSyncExternalStore=function(k,H,ve){return K.current.useSyncExternalStore(k,H,ve)},Xe.useTransition=function(){return K.current.useTransition()},Xe.version="18.3.1",Xe}var Vg;function bf(){return Vg||(Vg=1,jh.exports=Rx()),jh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function bx(){if(Lg)return sl;Lg=1;var n=bf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,v){var w,E={},C=null,$=null;v!==void 0&&(C=""+v),m.key!==void 0&&(C=""+m.key),m.ref!==void 0&&($=m.ref);for(w in m)s.call(m,w)&&!l.hasOwnProperty(w)&&(E[w]=m[w]);if(f&&f.defaultProps)for(w in m=f.defaultProps,m)E[w]===void 0&&(E[w]=m[w]);return{$$typeof:e,type:f,key:C,ref:$,props:E,_owner:a.current}}return sl.Fragment=t,sl.jsx=d,sl.jsxs=d,sl}var Og;function Ax(){return Og||(Og=1,kh.exports=bx()),kh.exports}var c=Ax(),L=bf();const Vv=Dv(L),Nx=Px({__proto__:null,default:Vv},[L]);var Qc={},Dh={exports:{}},Jn={},Vh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function kx(){return Mg||(Mg=1,(function(n){function e(D,z){var ee=D.length;D.push(z);e:for(;0<ee;){var k=ee-1>>>1,H=D[k];if(0<a(H,z))D[k]=z,D[ee]=H,ee=k;else break e}}function t(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var z=D[0],ee=D.pop();if(ee!==z){D[0]=ee;e:for(var k=0,H=D.length,ve=H>>>1;k<ve;){var Ee=2*(k+1)-1,Ce=D[Ee],Le=Ee+1,$e=D[Le];if(0>a(Ce,ee))Le<H&&0>a($e,Ce)?(D[k]=$e,D[Le]=ee,k=Le):(D[k]=Ce,D[Ee]=ee,k=Ee);else if(Le<H&&0>a($e,ee))D[k]=$e,D[Le]=ee,k=Le;else break e}}return z}function a(D,z){var ee=D.sortIndex-z.sortIndex;return ee!==0?ee:D.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();n.unstable_now=function(){return d.now()-f}}var m=[],v=[],w=1,E=null,C=3,$=!1,Q=!1,te=!1,W=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(D){for(var z=t(v);z!==null;){if(z.callback===null)s(v);else if(z.startTime<=D)s(v),z.sortIndex=z.expirationTime,e(m,z);else break;z=t(v)}}function me(D){if(te=!1,oe(D),!Q)if(t(m)!==null)Q=!0,et(we);else{var z=t(v);z!==null&&K(me,z.startTime-D)}}function we(D,z){Q=!1,te&&(te=!1,ie(R),R=-1),$=!0;var ee=C;try{for(oe(z),E=t(m);E!==null&&(!(E.expirationTime>z)||D&&!M());){var k=E.callback;if(typeof k=="function"){E.callback=null,C=E.priorityLevel;var H=k(E.expirationTime<=z);z=n.unstable_now(),typeof H=="function"?E.callback=H:E===t(m)&&s(m),oe(z)}else s(m);E=t(m)}if(E!==null)var ve=!0;else{var Ee=t(v);Ee!==null&&K(me,Ee.startTime-z),ve=!1}return ve}finally{E=null,C=ee,$=!1}}var he=!1,V=null,R=-1,j=5,A=-1;function M(){return!(n.unstable_now()-A<j)}function P(){if(V!==null){var D=n.unstable_now();A=D;var z=!0;try{z=V(!0,D)}finally{z?b():(he=!1,V=null)}}else he=!1}var b;if(typeof se=="function")b=function(){se(P)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Ke=fe.port2;fe.port1.onmessage=P,b=function(){Ke.postMessage(null)}}else b=function(){W(P,0)};function et(D){V=D,he||(he=!0,b())}function K(D,z){R=W(function(){D(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){Q||$||(Q=!0,et(we))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(D){switch(C){case 1:case 2:case 3:var z=3;break;default:z=C}var ee=C;C=z;try{return D()}finally{C=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,z){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var ee=C;C=D;try{return z()}finally{C=ee}},n.unstable_scheduleCallback=function(D,z,ee){var k=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?k+ee:k):ee=k,D){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ee+H,D={id:w++,callback:z,priorityLevel:D,startTime:ee,expirationTime:H,sortIndex:-1},ee>k?(D.sortIndex=ee,e(v,D),t(m)===null&&D===t(v)&&(te?(ie(R),R=-1):te=!0,K(me,ee-k))):(D.sortIndex=H,e(m,D),Q||$||(Q=!0,et(we))),D},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(D){var z=C;return function(){var ee=C;C=z;try{return D.apply(this,arguments)}finally{C=ee}}}})(Lh)),Lh}var Fg;function jx(){return Fg||(Fg=1,Vh.exports=kx()),Vh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function Dx(){if(Ug)return Jn;Ug=1;var n=bf(),e=jx();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,o=1;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(r,i){d(r,i),d(r+"Capture",i)}function d(r,i){for(a[r]=i,r=0;r<i.length;r++)s.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function C(r){return m.call(E,r)?!0:m.call(w,r)?!1:v.test(r)?E[r]=!0:(w[r]=!0,!1)}function $(r,i,o,h){if(o!==null&&o.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:o!==null?!o.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function Q(r,i,o,h){if(i===null||typeof i>"u"||$(r,i,o,h))return!0;if(h)return!1;if(o!==null)switch(o.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function te(r,i,o,h,p,y,x){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=o,this.propertyName=r,this.type=i,this.sanitizeURL=y,this.removeEmptyString=x}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){W[r]=new te(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];W[i]=new te(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){W[r]=new te(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){W[r]=new te(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){W[r]=new te(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){W[r]=new te(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){W[r]=new te(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){W[r]=new te(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){W[r]=new te(r,5,!1,r.toLowerCase(),null,!1,!1)});var ie=/[\-:]([a-z])/g;function se(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(ie,se);W[i]=new te(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(ie,se);W[i]=new te(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(ie,se);W[i]=new te(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){W[r]=new te(r,1,!1,r.toLowerCase(),null,!1,!1)}),W.xlinkHref=new te("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){W[r]=new te(r,1,!1,r.toLowerCase(),null,!0,!0)});function oe(r,i,o,h){var p=W.hasOwnProperty(i)?W[i]:null;(p!==null?p.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(Q(i,o,p,h)&&(o=null),h||p===null?C(i)&&(o===null?r.removeAttribute(i):r.setAttribute(i,""+o)):p.mustUseProperty?r[p.propertyName]=o===null?p.type===3?!1:"":o:(i=p.attributeName,h=p.attributeNamespace,o===null?r.removeAttribute(i):(p=p.type,o=p===3||p===4&&o===!0?"":""+o,h?r.setAttributeNS(h,i,o):r.setAttribute(i,o))))}var me=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,we=Symbol.for("react.element"),he=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),M=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),D=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=D&&r[D]||r["@@iterator"],typeof r=="function"?r:null)}var ee=Object.assign,k;function H(r){if(k===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);k=i&&i[1]||""}return`
`+k+r}var ve=!1;function Ee(r,i){if(!r||ve)return"";ve=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Z){var h=Z}Reflect.construct(r,[],i)}else{try{i.call()}catch(Z){h=Z}r.call(i.prototype)}else{try{throw Error()}catch(Z){h=Z}r()}}catch(Z){if(Z&&h&&typeof Z.stack=="string"){for(var p=Z.stack.split(`
`),y=h.stack.split(`
`),x=p.length-1,N=y.length-1;1<=x&&0<=N&&p[x]!==y[N];)N--;for(;1<=x&&0<=N;x--,N--)if(p[x]!==y[N]){if(x!==1||N!==1)do if(x--,N--,0>N||p[x]!==y[N]){var O=`
`+p[x].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=x&&0<=N);break}}}finally{ve=!1,Error.prepareStackTrace=o}return(r=r?r.displayName||r.name:"")?H(r):""}function Ce(r){switch(r.tag){case 5:return H(r.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return r=Ee(r.type,!1),r;case 11:return r=Ee(r.type.render,!1),r;case 1:return r=Ee(r.type,!0),r;default:return""}}function Le(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case V:return"Fragment";case he:return"Portal";case j:return"Profiler";case R:return"StrictMode";case b:return"Suspense";case fe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case M:return(r.displayName||"Context")+".Consumer";case A:return(r._context.displayName||"Context")+".Provider";case P:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ke:return i=r.displayName||null,i!==null?i:Le(r.type)||"Memo";case et:i=r._payload,r=r._init;try{return Le(r(i))}catch{}}return null}function $e(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(i);case 8:return i===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function We(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function st(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function yt(r){var i=st(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,y=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return p.call(this)},set:function(x){h=""+x,y.call(this,x)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function nn(r){r._valueTracker||(r._valueTracker=yt(r))}function Bt(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),h="";return r&&(h=st(r)?r.checked?"true":"false":r.value),r=h,r!==o?(i.setValue(r),!0):!1}function Tn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function tr(r,i){var o=i.checked;return ee({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??r._wrapperState.initialChecked})}function tt(r,i){var o=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;o=We(i.value!=null?i.value:o),r._wrapperState={initialChecked:h,initialValue:o,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function nr(r,i){i=i.checked,i!=null&&oe(r,"checked",i,!1)}function $t(r,i){nr(r,i);var o=We(i.value),h=i.type;if(o!=null)h==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+o):r.value!==""+o&&(r.value=""+o);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?Sn(r,i.type,o):i.hasOwnProperty("defaultValue")&&Sn(r,i.type,We(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function ws(r,i,o){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,o||i===r.value||(r.value=i),r.defaultValue=i}o=r.name,o!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,o!==""&&(r.name=o)}function Sn(r,i,o){(i!=="number"||Tn(r.ownerDocument)!==r)&&(o==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+o&&(r.defaultValue=""+o))}var hn=Array.isArray;function In(r,i,o,h){if(r=r.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<r.length;o++)p=i.hasOwnProperty("$"+r[o].value),r[o].selected!==p&&(r[o].selected=p),p&&h&&(r[o].defaultSelected=!0)}else{for(o=""+We(o),i=null,p=0;p<r.length;p++){if(r[p].value===o){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}i!==null||r[p].disabled||(i=r[p])}i!==null&&(i.selected=!0)}}function rr(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Bn(r,i){var o=i.value;if(o==null){if(o=i.children,i=i.defaultValue,o!=null){if(i!=null)throw Error(t(92));if(hn(o)){if(1<o.length)throw Error(t(93));o=o[0]}i=o}i==null&&(i=""),o=i}r._wrapperState={initialValue:We(o)}}function qr(r,i){var o=We(i.value),h=We(i.defaultValue);o!=null&&(o=""+o,o!==r.value&&(r.value=o),i.defaultValue==null&&r.defaultValue!==o&&(r.defaultValue=o)),h!=null&&(r.defaultValue=""+h)}function Gr(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Pt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Pt(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Cn,xs=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,o,h,p){MSApp.execUnsafeLocalFunction(function(){return r(i,o,h,p)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Cn=Cn||document.createElement("div"),Cn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Cn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Pn(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sr=["Webkit","ms","Moz","O"];Object.keys(Cr).forEach(function(r){sr.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Cr[i]=Cr[r]})});function Es(r,i,o){return i==null||typeof i=="boolean"||i===""?"":o||typeof i!="number"||i===0||Cr.hasOwnProperty(r)&&Cr[r]?(""+i).trim():i+"px"}function fn(r,i){r=r.style;for(var o in i)if(i.hasOwnProperty(o)){var h=o.indexOf("--")===0,p=Es(o,i[o],h);o==="float"&&(o="cssFloat"),h?r.setProperty(o,p):r[o]=p}}var On=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fr(r,i){if(i){if(On[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ts(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lt=null;function Mt(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var rn=null,I=null,ne=null;function le(r){if(r=$o(r)){if(typeof rn!="function")throw Error(t(280));var i=r.stateNode;i&&(i=uc(i),rn(r.stateNode,r.type,i))}}function B(r){I?ne?ne.push(r):ne=[r]:I=r}function Y(){if(I){var r=I,i=ne;if(ne=I=null,le(r),i)for(r=0;r<i.length;r++)le(i[r])}}function Re(r,i){return r(i)}function De(){}var ft=!1;function xe(r,i,o){if(ft)return r(i,o);ft=!0;try{return Re(r,i,o)}finally{ft=!1,(I!==null||ne!==null)&&(De(),Y())}}function Ve(r,i){var o=r.stateNode;if(o===null)return null;var h=uc(o);if(h===null)return null;o=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(t(231,i,typeof o));return o}var Wt=!1;if(f)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{Wt=!1}function an(r,i,o,h,p,y,x,N,O){var Z=Array.prototype.slice.call(arguments,3);try{i.apply(o,Z)}catch(de){this.onError(de)}}var Pr=!1,Rr=null,pn=!1,Ss=null,br={onError:function(r){Pr=!0,Rr=r}};function Kr(r,i,o,h,p,y,x,N,O){Pr=!1,Rr=null,an.apply(br,arguments)}function wa(r,i,o,h,p,y,x,N,O){if(Kr.apply(this,arguments),Pr){if(Pr){var Z=Rr;Pr=!1,Rr=null}else throw Error(t(198));pn||(pn=!0,Ss=Z)}}function ir(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function Qr(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function it(r){if(ir(r)!==r)throw Error(t(188))}function Yr(r){var i=r.alternate;if(!i){if(i=ir(r),i===null)throw Error(t(188));return i!==r?null:r}for(var o=r,h=i;;){var p=o.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){o=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===o)return it(p),r;if(y===h)return it(p),i;y=y.sibling}throw Error(t(188))}if(o.return!==h.return)o=p,h=y;else{for(var x=!1,N=p.child;N;){if(N===o){x=!0,o=p,h=y;break}if(N===h){x=!0,h=p,o=y;break}N=N.sibling}if(!x){for(N=y.child;N;){if(N===o){x=!0,o=y,h=p;break}if(N===h){x=!0,h=y,o=p;break}N=N.sibling}if(!x)throw Error(t(189))}}if(o.alternate!==h)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?r:i}function $n(r){return r=Yr(r),r!==null?Is(r):null}function Is(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Is(r);if(i!==null)return i;r=r.sibling}return null}var Cs=e.unstable_scheduleCallback,Js=e.unstable_cancelCallback,xa=e.unstable_shouldYield,Ar=e.unstable_requestPaint,pt=e.unstable_now,Ea=e.unstable_getCurrentPriorityLevel,Ps=e.unstable_ImmediatePriority,Jr=e.unstable_UserBlockingPriority,S=e.unstable_NormalPriority,F=e.unstable_LowPriority,J=e.unstable_IdlePriority,ye=null,Ae=null;function Qe(r){if(Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(ye,r,void 0,(r.current.flags&128)===128)}catch{}}var Te=Math.clz32?Math.clz32:Rt,dt=Math.log,Nt=Math.LN2;function Rt(r){return r>>>=0,r===0?32:31-(dt(r)/Nt|0)|0}var wt=64,xt=4194304;function Yt(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function kt(r,i){var o=r.pendingLanes;if(o===0)return 0;var h=0,p=r.suspendedLanes,y=r.pingedLanes,x=o&268435455;if(x!==0){var N=x&~p;N!==0?h=Yt(N):(y&=x,y!==0&&(h=Yt(y)))}else x=o&~p,x!==0?h=Yt(x):y!==0&&(h=Yt(y));if(h===0)return 0;if(i!==0&&i!==h&&(i&p)===0&&(p=h&-h,y=i&-i,p>=y||p===16&&(y&4194240)!==0))return i;if((h&4)!==0&&(h|=o&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)o=31-Te(i),p=1<<o,h|=r[o],i&=~p;return h}function lt(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rn(r,i){for(var o=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes;0<y;){var x=31-Te(y),N=1<<x,O=p[x];O===-1?((N&o)===0||(N&h)!==0)&&(p[x]=lt(N,i)):O<=i&&(r.expiredLanes|=N),y&=~N}}function vt(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Mn(){var r=wt;return wt<<=1,(wt&4194240)===0&&(wt=64),r}function pr(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Xr(r,i,o){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Te(i),r[i]=o}function mt(r,i){var o=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<o;){var p=31-Te(o),y=1<<p;i[p]=0,h[p]=-1,r[p]=-1,o&=~y}}function Zr(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var h=31-Te(o),p=1<<h;p&i|r[h]&i&&(r[h]|=i),o&=~p}}var Ye=0;function es(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var $l,Ta,Wl,Hl,ql,Ro=!1,ts=[],mn=null,Nr=null,kr=null,Xs=new Map,mr=new Map,ns=[],cd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gl(r,i){switch(r){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Xs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":mr.delete(i.pointerId)}}function Wn(r,i,o,h,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:o,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},i!==null&&(i=$o(i),i!==null&&Ta(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),r)}function ud(r,i,o,h,p){switch(i){case"focusin":return mn=Wn(mn,r,i,o,h,p),!0;case"dragenter":return Nr=Wn(Nr,r,i,o,h,p),!0;case"mouseover":return kr=Wn(kr,r,i,o,h,p),!0;case"pointerover":var y=p.pointerId;return Xs.set(y,Wn(Xs.get(y)||null,r,i,o,h,p)),!0;case"gotpointercapture":return y=p.pointerId,mr.set(y,Wn(mr.get(y)||null,r,i,o,h,p)),!0}return!1}function Kl(r){var i=Gi(r.target);if(i!==null){var o=ir(i);if(o!==null){if(i=o.tag,i===13){if(i=Qr(o),i!==null){r.blockedOn=i,ql(r.priority,function(){Wl(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Rs(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Sa(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(o===null){o=r.nativeEvent;var h=new o.constructor(o.type,o);Lt=h,o.target.dispatchEvent(h),Lt=null}else return i=$o(o),i!==null&&Ta(i),r.blockedOn=o,!1;i.shift()}return!0}function $i(r,i,o){Rs(r)&&o.delete(i)}function Ql(){Ro=!1,mn!==null&&Rs(mn)&&(mn=null),Nr!==null&&Rs(Nr)&&(Nr=null),kr!==null&&Rs(kr)&&(kr=null),Xs.forEach($i),mr.forEach($i)}function jr(r,i){r.blockedOn===i&&(r.blockedOn=null,Ro||(Ro=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ql)))}function Dr(r){function i(p){return jr(p,r)}if(0<ts.length){jr(ts[0],r);for(var o=1;o<ts.length;o++){var h=ts[o];h.blockedOn===r&&(h.blockedOn=null)}}for(mn!==null&&jr(mn,r),Nr!==null&&jr(Nr,r),kr!==null&&jr(kr,r),Xs.forEach(i),mr.forEach(i),o=0;o<ns.length;o++)h=ns[o],h.blockedOn===r&&(h.blockedOn=null);for(;0<ns.length&&(o=ns[0],o.blockedOn===null);)Kl(o),o.blockedOn===null&&ns.shift()}var bs=me.ReactCurrentBatchConfig,Zs=!0;function bt(r,i,o,h){var p=Ye,y=bs.transition;bs.transition=null;try{Ye=1,bo(r,i,o,h)}finally{Ye=p,bs.transition=y}}function dd(r,i,o,h){var p=Ye,y=bs.transition;bs.transition=null;try{Ye=4,bo(r,i,o,h)}finally{Ye=p,bs.transition=y}}function bo(r,i,o,h){if(Zs){var p=Sa(r,i,o,h);if(p===null)Ed(r,i,h,Wi,o),Gl(r,h);else if(ud(p,r,i,o,h))h.stopPropagation();else if(Gl(r,h),i&4&&-1<cd.indexOf(r)){for(;p!==null;){var y=$o(p);if(y!==null&&$l(y),y=Sa(r,i,o,h),y===null&&Ed(r,i,h,Wi,o),y===p)break;p=y}p!==null&&h.stopPropagation()}else Ed(r,i,h,null,o)}}var Wi=null;function Sa(r,i,o,h){if(Wi=null,r=Mt(h),r=Gi(r),r!==null)if(i=ir(r),i===null)r=null;else if(o=i.tag,o===13){if(r=Qr(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Wi=r,null}function Ao(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ea()){case Ps:return 1;case Jr:return 4;case S:case F:return 16;case J:return 536870912;default:return 16}default:return 16}}var ar=null,Ia=null,Hn=null;function No(){if(Hn)return Hn;var r,i=Ia,o=i.length,h,p="value"in ar?ar.value:ar.textContent,y=p.length;for(r=0;r<o&&i[r]===p[r];r++);var x=o-r;for(h=1;h<=x&&i[o-h]===p[y-h];h++);return Hn=p.slice(r,1<h?1-h:void 0)}function Ca(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function rs(){return!0}function ko(){return!1}function gn(r){function i(o,h,p,y,x){this._reactName=o,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(o=r[N],this[N]=o?o(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?rs:ko,this.isPropagationStopped=ko,this}return ee(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=rs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=rs)},persist:function(){},isPersistent:rs}),i}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pa=gn(Vr),ss=ee({},Vr,{view:0,detail:0}),hd=gn(ss),Ra,As,ei,Hi=ee({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:is,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ei&&(ei&&r.type==="mousemove"?(Ra=r.screenX-ei.screenX,As=r.screenY-ei.screenY):As=Ra=0,ei=r),Ra)},movementY:function(r){return"movementY"in r?r.movementY:As}}),ba=gn(Hi),jo=ee({},Hi,{dataTransfer:0}),Yl=gn(jo),Aa=ee({},ss,{relatedTarget:0}),Na=gn(Aa),Jl=ee({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ns=gn(Jl),Xl=ee({},Vr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Zl=gn(Xl),ec=ee({},Vr,{data:0}),Do=gn(ec),ka={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=tc[r])?!!i[r]:!1}function is(){return nc}var u=ee({},ss,{key:function(r){if(r.key){var i=ka[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ca(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Fn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:is,charCode:function(r){return r.type==="keypress"?Ca(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ca(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=gn(u),_=ee({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=gn(_),q=ee({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:is}),re=gn(q),_e=ee({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gt=gn(_e),Jt=ee({},Hi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),at=gn(Jt),on=[9,13,27,32],Ht=f&&"CompositionEvent"in window,gr=null;f&&"documentMode"in document&&(gr=document.documentMode);var or=f&&"TextEvent"in window&&!gr,qi=f&&(!Ht||gr&&8<gr&&11>=gr),ja=" ",Rp=!1;function bp(r,i){switch(r){case"keyup":return on.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Da=!1;function Sw(r,i){switch(r){case"compositionend":return Ap(i);case"keypress":return i.which!==32?null:(Rp=!0,ja);case"textInput":return r=i.data,r===ja&&Rp?null:r;default:return null}}function Iw(r,i){if(Da)return r==="compositionend"||!Ht&&bp(r,i)?(r=No(),Hn=Ia=ar=null,Da=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return qi&&i.locale!=="ko"?null:i.data;default:return null}}var Cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Cw[r.type]:i==="textarea"}function kp(r,i,o,h){B(h),i=oc(i,"onChange"),0<i.length&&(o=new Pa("onChange","change",null,o,h),r.push({event:o,listeners:i}))}var Vo=null,Lo=null;function Pw(r){Yp(r,0)}function rc(r){var i=Fa(r);if(Bt(i))return r}function Rw(r,i){if(r==="change")return i}var jp=!1;if(f){var fd;if(f){var pd="oninput"in document;if(!pd){var Dp=document.createElement("div");Dp.setAttribute("oninput","return;"),pd=typeof Dp.oninput=="function"}fd=pd}else fd=!1;jp=fd&&(!document.documentMode||9<document.documentMode)}function Vp(){Vo&&(Vo.detachEvent("onpropertychange",Lp),Lo=Vo=null)}function Lp(r){if(r.propertyName==="value"&&rc(Lo)){var i=[];kp(i,Lo,r,Mt(r)),xe(Pw,i)}}function bw(r,i,o){r==="focusin"?(Vp(),Vo=i,Lo=o,Vo.attachEvent("onpropertychange",Lp)):r==="focusout"&&Vp()}function Aw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return rc(Lo)}function Nw(r,i){if(r==="click")return rc(i)}function kw(r,i){if(r==="input"||r==="change")return rc(i)}function jw(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Lr=typeof Object.is=="function"?Object.is:jw;function Oo(r,i){if(Lr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),h=Object.keys(i);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var p=o[h];if(!m.call(i,p)||!Lr(r[p],i[p]))return!1}return!0}function Op(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Mp(r,i){var o=Op(r);r=0;for(var h;o;){if(o.nodeType===3){if(h=r+o.textContent.length,r<=i&&h>=i)return{node:o,offset:i-r};r=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Op(o)}}function Fp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Fp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Up(){for(var r=window,i=Tn();i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=Tn(r.document)}return i}function md(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function Dw(r){var i=Up(),o=r.focusedElem,h=r.selectionRange;if(i!==o&&o&&o.ownerDocument&&Fp(o.ownerDocument.documentElement,o)){if(h!==null&&md(o)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in o)o.selectionStart=i,o.selectionEnd=Math.min(r,o.value.length);else if(r=(i=o.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var p=o.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!r.extend&&y>h&&(p=h,h=y,y=p),p=Mp(o,y);var x=Mp(o,h);p&&x&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==x.node||r.focusOffset!==x.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),r.removeAllRanges(),y>h?(r.addRange(i),r.extend(x.node,x.offset)):(i.setEnd(x.node,x.offset),r.addRange(i)))}}for(i=[],r=o;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<i.length;o++)r=i[o],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Vw=f&&"documentMode"in document&&11>=document.documentMode,Va=null,gd=null,Mo=null,yd=!1;function zp(r,i,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;yd||Va==null||Va!==Tn(h)||(h=Va,"selectionStart"in h&&md(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Mo&&Oo(Mo,h)||(Mo=h,h=oc(gd,"onSelect"),0<h.length&&(i=new Pa("onSelect","select",null,i,o),r.push({event:i,listeners:h}),i.target=Va)))}function sc(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var La={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},vd={},Bp={};f&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function ic(r){if(vd[r])return vd[r];if(!La[r])return r;var i=La[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Bp)return vd[r]=i[o];return r}var $p=ic("animationend"),Wp=ic("animationiteration"),Hp=ic("animationstart"),qp=ic("transitionend"),Gp=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(r,i){Gp.set(r,i),l(i,[r])}for(var _d=0;_d<Kp.length;_d++){var wd=Kp[_d],Lw=wd.toLowerCase(),Ow=wd[0].toUpperCase()+wd.slice(1);ti(Lw,"on"+Ow)}ti($p,"onAnimationEnd"),ti(Wp,"onAnimationIteration"),ti(Hp,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(qp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fo));function Qp(r,i,o){var h=r.type||"unknown-event";r.currentTarget=o,wa(h,i,void 0,r),r.currentTarget=null}function Yp(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var h=r[o],p=h.event;h=h.listeners;e:{var y=void 0;if(i)for(var x=h.length-1;0<=x;x--){var N=h[x],O=N.instance,Z=N.currentTarget;if(N=N.listener,O!==y&&p.isPropagationStopped())break e;Qp(p,N,Z),y=O}else for(x=0;x<h.length;x++){if(N=h[x],O=N.instance,Z=N.currentTarget,N=N.listener,O!==y&&p.isPropagationStopped())break e;Qp(p,N,Z),y=O}}}if(pn)throw r=Ss,pn=!1,Ss=null,r}function Et(r,i){var o=i[Rd];o===void 0&&(o=i[Rd]=new Set);var h=r+"__bubble";o.has(h)||(Jp(i,r,2,!1),o.add(h))}function xd(r,i,o){var h=0;i&&(h|=4),Jp(o,r,h,i)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Uo(r){if(!r[ac]){r[ac]=!0,s.forEach(function(o){o!=="selectionchange"&&(Mw.has(o)||xd(o,!1,r),xd(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[ac]||(i[ac]=!0,xd("selectionchange",!1,i))}}function Jp(r,i,o,h){switch(Ao(i)){case 1:var p=bt;break;case 4:p=dd;break;default:p=bo}o=p.bind(null,i,o,r),p=void 0,!Wt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(i,o,{capture:!0,passive:p}):r.addEventListener(i,o,!0):p!==void 0?r.addEventListener(i,o,{passive:p}):r.addEventListener(i,o,!1)}function Ed(r,i,o,h,p){var y=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var N=h.stateNode.containerInfo;if(N===p||N.nodeType===8&&N.parentNode===p)break;if(x===4)for(x=h.return;x!==null;){var O=x.tag;if((O===3||O===4)&&(O=x.stateNode.containerInfo,O===p||O.nodeType===8&&O.parentNode===p))return;x=x.return}for(;N!==null;){if(x=Gi(N),x===null)return;if(O=x.tag,O===5||O===6){h=y=x;continue e}N=N.parentNode}}h=h.return}xe(function(){var Z=y,de=Mt(o),pe=[];e:{var ue=Gp.get(r);if(ue!==void 0){var Se=Pa,be=r;switch(r){case"keypress":if(Ca(o)===0)break e;case"keydown":case"keyup":Se=g;break;case"focusin":be="focus",Se=Na;break;case"focusout":be="blur",Se=Na;break;case"beforeblur":case"afterblur":Se=Na;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=Yl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=re;break;case $p:case Wp:case Hp:Se=Ns;break;case qp:Se=gt;break;case"scroll":Se=hd;break;case"wheel":Se=at;break;case"copy":case"cut":case"paste":Se=Zl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=T}var Ne=(i&4)!==0,Ft=!Ne&&r==="scroll",G=Ne?ue!==null?ue+"Capture":null:ue;Ne=[];for(var U=Z,X;U!==null;){X=U;var ge=X.stateNode;if(X.tag===5&&ge!==null&&(X=ge,G!==null&&(ge=Ve(U,G),ge!=null&&Ne.push(zo(U,ge,X)))),Ft)break;U=U.return}0<Ne.length&&(ue=new Se(ue,be,null,o,de),pe.push({event:ue,listeners:Ne}))}}if((i&7)===0){e:{if(ue=r==="mouseover"||r==="pointerover",Se=r==="mouseout"||r==="pointerout",ue&&o!==Lt&&(be=o.relatedTarget||o.fromElement)&&(Gi(be)||be[ks]))break e;if((Se||ue)&&(ue=de.window===de?de:(ue=de.ownerDocument)?ue.defaultView||ue.parentWindow:window,Se?(be=o.relatedTarget||o.toElement,Se=Z,be=be?Gi(be):null,be!==null&&(Ft=ir(be),be!==Ft||be.tag!==5&&be.tag!==6)&&(be=null)):(Se=null,be=Z),Se!==be)){if(Ne=ba,ge="onMouseLeave",G="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(Ne=T,ge="onPointerLeave",G="onPointerEnter",U="pointer"),Ft=Se==null?ue:Fa(Se),X=be==null?ue:Fa(be),ue=new Ne(ge,U+"leave",Se,o,de),ue.target=Ft,ue.relatedTarget=X,ge=null,Gi(de)===Z&&(Ne=new Ne(G,U+"enter",be,o,de),Ne.target=X,Ne.relatedTarget=Ft,ge=Ne),Ft=ge,Se&&be)t:{for(Ne=Se,G=be,U=0,X=Ne;X;X=Oa(X))U++;for(X=0,ge=G;ge;ge=Oa(ge))X++;for(;0<U-X;)Ne=Oa(Ne),U--;for(;0<X-U;)G=Oa(G),X--;for(;U--;){if(Ne===G||G!==null&&Ne===G.alternate)break t;Ne=Oa(Ne),G=Oa(G)}Ne=null}else Ne=null;Se!==null&&Xp(pe,ue,Se,Ne,!1),be!==null&&Ft!==null&&Xp(pe,Ft,be,Ne,!0)}}e:{if(ue=Z?Fa(Z):window,Se=ue.nodeName&&ue.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ue.type==="file")var je=Rw;else if(Np(ue))if(jp)je=kw;else{je=Aw;var Me=bw}else(Se=ue.nodeName)&&Se.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(je=Nw);if(je&&(je=je(r,Z))){kp(pe,je,o,de);break e}Me&&Me(r,ue,Z),r==="focusout"&&(Me=ue._wrapperState)&&Me.controlled&&ue.type==="number"&&Sn(ue,"number",ue.value)}switch(Me=Z?Fa(Z):window,r){case"focusin":(Np(Me)||Me.contentEditable==="true")&&(Va=Me,gd=Z,Mo=null);break;case"focusout":Mo=gd=Va=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,zp(pe,o,de);break;case"selectionchange":if(Vw)break;case"keydown":case"keyup":zp(pe,o,de)}var Fe;if(Ht)e:{switch(r){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Da?bp(r,o)&&(Be="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Be="onCompositionStart");Be&&(qi&&o.locale!=="ko"&&(Da||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Da&&(Fe=No()):(ar=de,Ia="value"in ar?ar.value:ar.textContent,Da=!0)),Me=oc(Z,Be),0<Me.length&&(Be=new Do(Be,r,null,o,de),pe.push({event:Be,listeners:Me}),Fe?Be.data=Fe:(Fe=Ap(o),Fe!==null&&(Be.data=Fe)))),(Fe=or?Sw(r,o):Iw(r,o))&&(Z=oc(Z,"onBeforeInput"),0<Z.length&&(de=new Do("onBeforeInput","beforeinput",null,o,de),pe.push({event:de,listeners:Z}),de.data=Fe))}Yp(pe,i)})}function zo(r,i,o){return{instance:r,listener:i,currentTarget:o}}function oc(r,i){for(var o=i+"Capture",h=[];r!==null;){var p=r,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Ve(r,o),y!=null&&h.unshift(zo(r,y,p)),y=Ve(r,i),y!=null&&h.push(zo(r,y,p))),r=r.return}return h}function Oa(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Xp(r,i,o,h,p){for(var y=i._reactName,x=[];o!==null&&o!==h;){var N=o,O=N.alternate,Z=N.stateNode;if(O!==null&&O===h)break;N.tag===5&&Z!==null&&(N=Z,p?(O=Ve(o,y),O!=null&&x.unshift(zo(o,O,N))):p||(O=Ve(o,y),O!=null&&x.push(zo(o,O,N)))),o=o.return}x.length!==0&&r.push({event:i,listeners:x})}var Fw=/\r\n?/g,Uw=/\u0000|\uFFFD/g;function Zp(r){return(typeof r=="string"?r:""+r).replace(Fw,`
`).replace(Uw,"")}function lc(r,i,o){if(i=Zp(i),Zp(r)!==i&&o)throw Error(t(425))}function cc(){}var Td=null,Sd=null;function Id(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,zw=typeof clearTimeout=="function"?clearTimeout:void 0,em=typeof Promise=="function"?Promise:void 0,Bw=typeof queueMicrotask=="function"?queueMicrotask:typeof em<"u"?function(r){return em.resolve(null).then(r).catch($w)}:Cd;function $w(r){setTimeout(function(){throw r})}function Pd(r,i){var o=i,h=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(h===0){r.removeChild(p),Dr(i);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=p}while(o);Dr(i)}function ni(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function tm(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),as="__reactFiber$"+Ma,Bo="__reactProps$"+Ma,ks="__reactContainer$"+Ma,Rd="__reactEvents$"+Ma,Ww="__reactListeners$"+Ma,Hw="__reactHandles$"+Ma;function Gi(r){var i=r[as];if(i)return i;for(var o=r.parentNode;o;){if(i=o[ks]||o[as]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=tm(r);r!==null;){if(o=r[as])return o;r=tm(r)}return i}r=o,o=r.parentNode}return null}function $o(r){return r=r[as]||r[ks],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Fa(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function uc(r){return r[Bo]||null}var bd=[],Ua=-1;function ri(r){return{current:r}}function Tt(r){0>Ua||(r.current=bd[Ua],bd[Ua]=null,Ua--)}function _t(r,i){Ua++,bd[Ua]=r.current,r.current=i}var si={},bn=ri(si),qn=ri(!1),Ki=si;function za(r,i){var o=r.type.contextTypes;if(!o)return si;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in o)p[y]=i[y];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=p),p}function Gn(r){return r=r.childContextTypes,r!=null}function dc(){Tt(qn),Tt(bn)}function nm(r,i,o){if(bn.current!==si)throw Error(t(168));_t(bn,i),_t(qn,o)}function rm(r,i,o){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return o;h=h.getChildContext();for(var p in h)if(!(p in i))throw Error(t(108,$e(r)||"Unknown",p));return ee({},o,h)}function hc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||si,Ki=bn.current,_t(bn,r),_t(qn,qn.current),!0}function sm(r,i,o){var h=r.stateNode;if(!h)throw Error(t(169));o?(r=rm(r,i,Ki),h.__reactInternalMemoizedMergedChildContext=r,Tt(qn),Tt(bn),_t(bn,r)):Tt(qn),_t(qn,o)}var js=null,fc=!1,Ad=!1;function im(r){js===null?js=[r]:js.push(r)}function qw(r){fc=!0,im(r)}function ii(){if(!Ad&&js!==null){Ad=!0;var r=0,i=Ye;try{var o=js;for(Ye=1;r<o.length;r++){var h=o[r];do h=h(!0);while(h!==null)}js=null,fc=!1}catch(p){throw js!==null&&(js=js.slice(r+1)),Cs(Ps,ii),p}finally{Ye=i,Ad=!1}}return null}var Ba=[],$a=0,pc=null,mc=0,yr=[],vr=0,Qi=null,Ds=1,Vs="";function Yi(r,i){Ba[$a++]=mc,Ba[$a++]=pc,pc=r,mc=i}function am(r,i,o){yr[vr++]=Ds,yr[vr++]=Vs,yr[vr++]=Qi,Qi=r;var h=Ds;r=Vs;var p=32-Te(h)-1;h&=~(1<<p),o+=1;var y=32-Te(i)+p;if(30<y){var x=p-p%5;y=(h&(1<<x)-1).toString(32),h>>=x,p-=x,Ds=1<<32-Te(i)+p|o<<p|h,Vs=y+r}else Ds=1<<y|o<<p|h,Vs=r}function Nd(r){r.return!==null&&(Yi(r,1),am(r,1,0))}function kd(r){for(;r===pc;)pc=Ba[--$a],Ba[$a]=null,mc=Ba[--$a],Ba[$a]=null;for(;r===Qi;)Qi=yr[--vr],yr[vr]=null,Vs=yr[--vr],yr[vr]=null,Ds=yr[--vr],yr[vr]=null}var lr=null,cr=null,At=!1,Or=null;function om(r,i){var o=Er(5,null,null,0);o.elementType="DELETED",o.stateNode=i,o.return=r,i=r.deletions,i===null?(r.deletions=[o],r.flags|=16):i.push(o)}function lm(r,i){switch(r.tag){case 5:var o=r.type;return i=i.nodeType!==1||o.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,lr=r,cr=ni(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,lr=r,cr=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(o=Qi!==null?{id:Ds,overflow:Vs}:null,r.memoizedState={dehydrated:i,treeContext:o,retryLane:1073741824},o=Er(18,null,null,0),o.stateNode=i,o.return=r,r.child=o,lr=r,cr=null,!0):!1;default:return!1}}function jd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Dd(r){if(At){var i=cr;if(i){var o=i;if(!lm(r,i)){if(jd(r))throw Error(t(418));i=ni(o.nextSibling);var h=lr;i&&lm(r,i)?om(h,o):(r.flags=r.flags&-4097|2,At=!1,lr=r)}}else{if(jd(r))throw Error(t(418));r.flags=r.flags&-4097|2,At=!1,lr=r}}}function cm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;lr=r}function gc(r){if(r!==lr)return!1;if(!At)return cm(r),At=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Id(r.type,r.memoizedProps)),i&&(i=cr)){if(jd(r))throw um(),Error(t(418));for(;i;)om(r,i),i=ni(i.nextSibling)}if(cm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"){if(i===0){cr=ni(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++}r=r.nextSibling}cr=null}}else cr=lr?ni(r.stateNode.nextSibling):null;return!0}function um(){for(var r=cr;r;)r=ni(r.nextSibling)}function Wa(){cr=lr=null,At=!1}function Vd(r){Or===null?Or=[r]:Or.push(r)}var Gw=me.ReactCurrentBatchConfig;function Wo(r,i,o){if(r=o.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var h=o.stateNode}if(!h)throw Error(t(147,r));var p=h,y=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(x){var N=p.refs;x===null?delete N[y]:N[y]=x},i._stringRef=y,i)}if(typeof r!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,r))}return r}function yc(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function dm(r){var i=r._init;return i(r._payload)}function hm(r){function i(G,U){if(r){var X=G.deletions;X===null?(G.deletions=[U],G.flags|=16):X.push(U)}}function o(G,U){if(!r)return null;for(;U!==null;)i(G,U),U=U.sibling;return null}function h(G,U){for(G=new Map;U!==null;)U.key!==null?G.set(U.key,U):G.set(U.index,U),U=U.sibling;return G}function p(G,U){return G=fi(G,U),G.index=0,G.sibling=null,G}function y(G,U,X){return G.index=X,r?(X=G.alternate,X!==null?(X=X.index,X<U?(G.flags|=2,U):X):(G.flags|=2,U)):(G.flags|=1048576,U)}function x(G){return r&&G.alternate===null&&(G.flags|=2),G}function N(G,U,X,ge){return U===null||U.tag!==6?(U=Ch(X,G.mode,ge),U.return=G,U):(U=p(U,X),U.return=G,U)}function O(G,U,X,ge){var je=X.type;return je===V?de(G,U,X.props.children,ge,X.key):U!==null&&(U.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===et&&dm(je)===U.type)?(ge=p(U,X.props),ge.ref=Wo(G,U,X),ge.return=G,ge):(ge=zc(X.type,X.key,X.props,null,G.mode,ge),ge.ref=Wo(G,U,X),ge.return=G,ge)}function Z(G,U,X,ge){return U===null||U.tag!==4||U.stateNode.containerInfo!==X.containerInfo||U.stateNode.implementation!==X.implementation?(U=Ph(X,G.mode,ge),U.return=G,U):(U=p(U,X.children||[]),U.return=G,U)}function de(G,U,X,ge,je){return U===null||U.tag!==7?(U=sa(X,G.mode,ge,je),U.return=G,U):(U=p(U,X),U.return=G,U)}function pe(G,U,X){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Ch(""+U,G.mode,X),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case we:return X=zc(U.type,U.key,U.props,null,G.mode,X),X.ref=Wo(G,null,U),X.return=G,X;case he:return U=Ph(U,G.mode,X),U.return=G,U;case et:var ge=U._init;return pe(G,ge(U._payload),X)}if(hn(U)||z(U))return U=sa(U,G.mode,X,null),U.return=G,U;yc(G,U)}return null}function ue(G,U,X,ge){var je=U!==null?U.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return je!==null?null:N(G,U,""+X,ge);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case we:return X.key===je?O(G,U,X,ge):null;case he:return X.key===je?Z(G,U,X,ge):null;case et:return je=X._init,ue(G,U,je(X._payload),ge)}if(hn(X)||z(X))return je!==null?null:de(G,U,X,ge,null);yc(G,X)}return null}function Se(G,U,X,ge,je){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return G=G.get(X)||null,N(U,G,""+ge,je);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case we:return G=G.get(ge.key===null?X:ge.key)||null,O(U,G,ge,je);case he:return G=G.get(ge.key===null?X:ge.key)||null,Z(U,G,ge,je);case et:var Me=ge._init;return Se(G,U,X,Me(ge._payload),je)}if(hn(ge)||z(ge))return G=G.get(X)||null,de(U,G,ge,je,null);yc(U,ge)}return null}function be(G,U,X,ge){for(var je=null,Me=null,Fe=U,Be=U=0,un=null;Fe!==null&&Be<X.length;Be++){Fe.index>Be?(un=Fe,Fe=null):un=Fe.sibling;var ut=ue(G,Fe,X[Be],ge);if(ut===null){Fe===null&&(Fe=un);break}r&&Fe&&ut.alternate===null&&i(G,Fe),U=y(ut,U,Be),Me===null?je=ut:Me.sibling=ut,Me=ut,Fe=un}if(Be===X.length)return o(G,Fe),At&&Yi(G,Be),je;if(Fe===null){for(;Be<X.length;Be++)Fe=pe(G,X[Be],ge),Fe!==null&&(U=y(Fe,U,Be),Me===null?je=Fe:Me.sibling=Fe,Me=Fe);return At&&Yi(G,Be),je}for(Fe=h(G,Fe);Be<X.length;Be++)un=Se(Fe,G,Be,X[Be],ge),un!==null&&(r&&un.alternate!==null&&Fe.delete(un.key===null?Be:un.key),U=y(un,U,Be),Me===null?je=un:Me.sibling=un,Me=un);return r&&Fe.forEach(function(pi){return i(G,pi)}),At&&Yi(G,Be),je}function Ne(G,U,X,ge){var je=z(X);if(typeof je!="function")throw Error(t(150));if(X=je.call(X),X==null)throw Error(t(151));for(var Me=je=null,Fe=U,Be=U=0,un=null,ut=X.next();Fe!==null&&!ut.done;Be++,ut=X.next()){Fe.index>Be?(un=Fe,Fe=null):un=Fe.sibling;var pi=ue(G,Fe,ut.value,ge);if(pi===null){Fe===null&&(Fe=un);break}r&&Fe&&pi.alternate===null&&i(G,Fe),U=y(pi,U,Be),Me===null?je=pi:Me.sibling=pi,Me=pi,Fe=un}if(ut.done)return o(G,Fe),At&&Yi(G,Be),je;if(Fe===null){for(;!ut.done;Be++,ut=X.next())ut=pe(G,ut.value,ge),ut!==null&&(U=y(ut,U,Be),Me===null?je=ut:Me.sibling=ut,Me=ut);return At&&Yi(G,Be),je}for(Fe=h(G,Fe);!ut.done;Be++,ut=X.next())ut=Se(Fe,G,Be,ut.value,ge),ut!==null&&(r&&ut.alternate!==null&&Fe.delete(ut.key===null?Be:ut.key),U=y(ut,U,Be),Me===null?je=ut:Me.sibling=ut,Me=ut);return r&&Fe.forEach(function(Cx){return i(G,Cx)}),At&&Yi(G,Be),je}function Ft(G,U,X,ge){if(typeof X=="object"&&X!==null&&X.type===V&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case we:e:{for(var je=X.key,Me=U;Me!==null;){if(Me.key===je){if(je=X.type,je===V){if(Me.tag===7){o(G,Me.sibling),U=p(Me,X.props.children),U.return=G,G=U;break e}}else if(Me.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===et&&dm(je)===Me.type){o(G,Me.sibling),U=p(Me,X.props),U.ref=Wo(G,Me,X),U.return=G,G=U;break e}o(G,Me);break}else i(G,Me);Me=Me.sibling}X.type===V?(U=sa(X.props.children,G.mode,ge,X.key),U.return=G,G=U):(ge=zc(X.type,X.key,X.props,null,G.mode,ge),ge.ref=Wo(G,U,X),ge.return=G,G=ge)}return x(G);case he:e:{for(Me=X.key;U!==null;){if(U.key===Me)if(U.tag===4&&U.stateNode.containerInfo===X.containerInfo&&U.stateNode.implementation===X.implementation){o(G,U.sibling),U=p(U,X.children||[]),U.return=G,G=U;break e}else{o(G,U);break}else i(G,U);U=U.sibling}U=Ph(X,G.mode,ge),U.return=G,G=U}return x(G);case et:return Me=X._init,Ft(G,U,Me(X._payload),ge)}if(hn(X))return be(G,U,X,ge);if(z(X))return Ne(G,U,X,ge);yc(G,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,U!==null&&U.tag===6?(o(G,U.sibling),U=p(U,X),U.return=G,G=U):(o(G,U),U=Ch(X,G.mode,ge),U.return=G,G=U),x(G)):o(G,U)}return Ft}var Ha=hm(!0),fm=hm(!1),vc=ri(null),_c=null,qa=null,Ld=null;function Od(){Ld=qa=_c=null}function Md(r){var i=vc.current;Tt(vc),r._currentValue=i}function Fd(r,i,o){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===o)break;r=r.return}}function Ga(r,i){_c=r,Ld=qa=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Kn=!0),r.firstContext=null)}function _r(r){var i=r._currentValue;if(Ld!==r)if(r={context:r,memoizedValue:i,next:null},qa===null){if(_c===null)throw Error(t(308));qa=r,_c.dependencies={lanes:0,firstContext:r}}else qa=qa.next=r;return i}var Ji=null;function Ud(r){Ji===null?Ji=[r]:Ji.push(r)}function pm(r,i,o,h){var p=i.interleaved;return p===null?(o.next=o,Ud(i)):(o.next=p.next,p.next=o),i.interleaved=o,Ls(r,h)}function Ls(r,i){r.lanes|=i;var o=r.alternate;for(o!==null&&(o.lanes|=i),o=r,r=r.return;r!==null;)r.childLanes|=i,o=r.alternate,o!==null&&(o.childLanes|=i),o=r,r=r.return;return o.tag===3?o.stateNode:null}var ai=!1;function zd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Os(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function oi(r,i,o){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(ct&2)!==0){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,Ls(r,o)}return p=h.interleaved,p===null?(i.next=i,Ud(h)):(i.next=p.next,p.next=i),h.interleaved=i,Ls(r,o)}function wc(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,o|=h,i.lanes=o,Zr(r,o)}}function gm(r,i){var o=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var p=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var x={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};y===null?p=y=x:y=y.next=x,o=o.next}while(o!==null);y===null?p=y=i:y=y.next=i}else p=y=i;o={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}function xc(r,i,o,h){var p=r.updateQueue;ai=!1;var y=p.firstBaseUpdate,x=p.lastBaseUpdate,N=p.shared.pending;if(N!==null){p.shared.pending=null;var O=N,Z=O.next;O.next=null,x===null?y=Z:x.next=Z,x=O;var de=r.alternate;de!==null&&(de=de.updateQueue,N=de.lastBaseUpdate,N!==x&&(N===null?de.firstBaseUpdate=Z:N.next=Z,de.lastBaseUpdate=O))}if(y!==null){var pe=p.baseState;x=0,de=Z=O=null,N=y;do{var ue=N.lane,Se=N.eventTime;if((h&ue)===ue){de!==null&&(de=de.next={eventTime:Se,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var be=r,Ne=N;switch(ue=i,Se=o,Ne.tag){case 1:if(be=Ne.payload,typeof be=="function"){pe=be.call(Se,pe,ue);break e}pe=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ne.payload,ue=typeof be=="function"?be.call(Se,pe,ue):be,ue==null)break e;pe=ee({},pe,ue);break e;case 2:ai=!0}}N.callback!==null&&N.lane!==0&&(r.flags|=64,ue=p.effects,ue===null?p.effects=[N]:ue.push(N))}else Se={eventTime:Se,lane:ue,tag:N.tag,payload:N.payload,callback:N.callback,next:null},de===null?(Z=de=Se,O=pe):de=de.next=Se,x|=ue;if(N=N.next,N===null){if(N=p.shared.pending,N===null)break;ue=N,N=ue.next,ue.next=null,p.lastBaseUpdate=ue,p.shared.pending=null}}while(!0);if(de===null&&(O=pe),p.baseState=O,p.firstBaseUpdate=Z,p.lastBaseUpdate=de,i=p.shared.interleaved,i!==null){p=i;do x|=p.lane,p=p.next;while(p!==i)}else y===null&&(p.shared.lanes=0);ea|=x,r.lanes=x,r.memoizedState=pe}}function ym(r,i,o){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],p=h.callback;if(p!==null){if(h.callback=null,h=o,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Ho={},os=ri(Ho),qo=ri(Ho),Go=ri(Ho);function Xi(r){if(r===Ho)throw Error(t(174));return r}function Bd(r,i){switch(_t(Go,i),_t(qo,r),_t(os,Ho),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:He(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=He(i,r)}Tt(os),_t(os,i)}function Ka(){Tt(os),Tt(qo),Tt(Go)}function vm(r){Xi(Go.current);var i=Xi(os.current),o=He(i,r.type);i!==o&&(_t(qo,r),_t(os,o))}function $d(r){qo.current===r&&(Tt(os),Tt(qo))}var jt=ri(0);function Ec(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wd=[];function Hd(){for(var r=0;r<Wd.length;r++)Wd[r]._workInProgressVersionPrimary=null;Wd.length=0}var Tc=me.ReactCurrentDispatcher,qd=me.ReactCurrentBatchConfig,Zi=0,Dt=null,Xt=null,ln=null,Sc=!1,Ko=!1,Qo=0,Kw=0;function An(){throw Error(t(321))}function Gd(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Lr(r[o],i[o]))return!1;return!0}function Kd(r,i,o,h,p,y){if(Zi=y,Dt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Tc.current=r===null||r.memoizedState===null?Xw:Zw,r=o(h,p),Ko){y=0;do{if(Ko=!1,Qo=0,25<=y)throw Error(t(301));y+=1,ln=Xt=null,i.updateQueue=null,Tc.current=ex,r=o(h,p)}while(Ko)}if(Tc.current=Pc,i=Xt!==null&&Xt.next!==null,Zi=0,ln=Xt=Dt=null,Sc=!1,i)throw Error(t(300));return r}function Qd(){var r=Qo!==0;return Qo=0,r}function ls(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Dt.memoizedState=ln=r:ln=ln.next=r,ln}function wr(){if(Xt===null){var r=Dt.alternate;r=r!==null?r.memoizedState:null}else r=Xt.next;var i=ln===null?Dt.memoizedState:ln.next;if(i!==null)ln=i,Xt=r;else{if(r===null)throw Error(t(310));Xt=r,r={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},ln===null?Dt.memoizedState=ln=r:ln=ln.next=r}return ln}function Yo(r,i){return typeof i=="function"?i(r):i}function Yd(r){var i=wr(),o=i.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=r;var h=Xt,p=h.baseQueue,y=o.pending;if(y!==null){if(p!==null){var x=p.next;p.next=y.next,y.next=x}h.baseQueue=p=y,o.pending=null}if(p!==null){y=p.next,h=h.baseState;var N=x=null,O=null,Z=y;do{var de=Z.lane;if((Zi&de)===de)O!==null&&(O=O.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),h=Z.hasEagerState?Z.eagerState:r(h,Z.action);else{var pe={lane:de,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};O===null?(N=O=pe,x=h):O=O.next=pe,Dt.lanes|=de,ea|=de}Z=Z.next}while(Z!==null&&Z!==y);O===null?x=h:O.next=N,Lr(h,i.memoizedState)||(Kn=!0),i.memoizedState=h,i.baseState=x,i.baseQueue=O,o.lastRenderedState=h}if(r=o.interleaved,r!==null){p=r;do y=p.lane,Dt.lanes|=y,ea|=y,p=p.next;while(p!==r)}else p===null&&(o.lanes=0);return[i.memoizedState,o.dispatch]}function Jd(r){var i=wr(),o=i.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=r;var h=o.dispatch,p=o.pending,y=i.memoizedState;if(p!==null){o.pending=null;var x=p=p.next;do y=r(y,x.action),x=x.next;while(x!==p);Lr(y,i.memoizedState)||(Kn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,h]}function _m(){}function wm(r,i){var o=Dt,h=wr(),p=i(),y=!Lr(h.memoizedState,p);if(y&&(h.memoizedState=p,Kn=!0),h=h.queue,Xd(Tm.bind(null,o,h,r),[r]),h.getSnapshot!==i||y||ln!==null&&ln.memoizedState.tag&1){if(o.flags|=2048,Jo(9,Em.bind(null,o,h,p,i),void 0,null),cn===null)throw Error(t(349));(Zi&30)!==0||xm(o,i,p)}return p}function xm(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=Dt.updateQueue,i===null?(i={lastEffect:null,stores:null},Dt.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Em(r,i,o,h){i.value=o,i.getSnapshot=h,Sm(i)&&Im(r)}function Tm(r,i,o){return o(function(){Sm(i)&&Im(r)})}function Sm(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Lr(r,o)}catch{return!0}}function Im(r){var i=Ls(r,1);i!==null&&zr(i,r,1,-1)}function Cm(r){var i=ls();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:r},i.queue=r,r=r.dispatch=Jw.bind(null,Dt,r),[i.memoizedState,r]}function Jo(r,i,o,h){return r={tag:r,create:i,destroy:o,deps:h,next:null},i=Dt.updateQueue,i===null?(i={lastEffect:null,stores:null},Dt.updateQueue=i,i.lastEffect=r.next=r):(o=i.lastEffect,o===null?i.lastEffect=r.next=r:(h=o.next,o.next=r,r.next=h,i.lastEffect=r)),r}function Pm(){return wr().memoizedState}function Ic(r,i,o,h){var p=ls();Dt.flags|=r,p.memoizedState=Jo(1|i,o,void 0,h===void 0?null:h)}function Cc(r,i,o,h){var p=wr();h=h===void 0?null:h;var y=void 0;if(Xt!==null){var x=Xt.memoizedState;if(y=x.destroy,h!==null&&Gd(h,x.deps)){p.memoizedState=Jo(i,o,y,h);return}}Dt.flags|=r,p.memoizedState=Jo(1|i,o,y,h)}function Rm(r,i){return Ic(8390656,8,r,i)}function Xd(r,i){return Cc(2048,8,r,i)}function bm(r,i){return Cc(4,2,r,i)}function Am(r,i){return Cc(4,4,r,i)}function Nm(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function km(r,i,o){return o=o!=null?o.concat([r]):null,Cc(4,4,Nm.bind(null,i,r),o)}function Zd(){}function jm(r,i){var o=wr();i=i===void 0?null:i;var h=o.memoizedState;return h!==null&&i!==null&&Gd(i,h[1])?h[0]:(o.memoizedState=[r,i],r)}function Dm(r,i){var o=wr();i=i===void 0?null:i;var h=o.memoizedState;return h!==null&&i!==null&&Gd(i,h[1])?h[0]:(r=r(),o.memoizedState=[r,i],r)}function Vm(r,i,o){return(Zi&21)===0?(r.baseState&&(r.baseState=!1,Kn=!0),r.memoizedState=o):(Lr(o,i)||(o=Mn(),Dt.lanes|=o,ea|=o,r.baseState=!0),i)}function Qw(r,i){var o=Ye;Ye=o!==0&&4>o?o:4,r(!0);var h=qd.transition;qd.transition={};try{r(!1),i()}finally{Ye=o,qd.transition=h}}function Lm(){return wr().memoizedState}function Yw(r,i,o){var h=di(r);if(o={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null},Om(r))Mm(i,o);else if(o=pm(r,i,o,h),o!==null){var p=zn();zr(o,r,h,p),Fm(o,i,h)}}function Jw(r,i,o){var h=di(r),p={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null};if(Om(r))Mm(i,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var x=i.lastRenderedState,N=y(x,o);if(p.hasEagerState=!0,p.eagerState=N,Lr(N,x)){var O=i.interleaved;O===null?(p.next=p,Ud(i)):(p.next=O.next,O.next=p),i.interleaved=p;return}}catch{}finally{}o=pm(r,i,p,h),o!==null&&(p=zn(),zr(o,r,h,p),Fm(o,i,h))}}function Om(r){var i=r.alternate;return r===Dt||i!==null&&i===Dt}function Mm(r,i){Ko=Sc=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function Fm(r,i,o){if((o&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,o|=h,i.lanes=o,Zr(r,o)}}var Pc={readContext:_r,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},Xw={readContext:_r,useCallback:function(r,i){return ls().memoizedState=[r,i===void 0?null:i],r},useContext:_r,useEffect:Rm,useImperativeHandle:function(r,i,o){return o=o!=null?o.concat([r]):null,Ic(4194308,4,Nm.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Ic(4194308,4,r,i)},useInsertionEffect:function(r,i){return Ic(4,2,r,i)},useMemo:function(r,i){var o=ls();return i=i===void 0?null:i,r=r(),o.memoizedState=[r,i],r},useReducer:function(r,i,o){var h=ls();return i=o!==void 0?o(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=Yw.bind(null,Dt,r),[h.memoizedState,r]},useRef:function(r){var i=ls();return r={current:r},i.memoizedState=r},useState:Cm,useDebugValue:Zd,useDeferredValue:function(r){return ls().memoizedState=r},useTransition:function(){var r=Cm(!1),i=r[0];return r=Qw.bind(null,r[1]),ls().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,o){var h=Dt,p=ls();if(At){if(o===void 0)throw Error(t(407));o=o()}else{if(o=i(),cn===null)throw Error(t(349));(Zi&30)!==0||xm(h,i,o)}p.memoizedState=o;var y={value:o,getSnapshot:i};return p.queue=y,Rm(Tm.bind(null,h,y,r),[r]),h.flags|=2048,Jo(9,Em.bind(null,h,y,o,i),void 0,null),o},useId:function(){var r=ls(),i=cn.identifierPrefix;if(At){var o=Vs,h=Ds;o=(h&~(1<<32-Te(h)-1)).toString(32)+o,i=":"+i+"R"+o,o=Qo++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=Kw++,i=":"+i+"r"+o.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},Zw={readContext:_r,useCallback:jm,useContext:_r,useEffect:Xd,useImperativeHandle:km,useInsertionEffect:bm,useLayoutEffect:Am,useMemo:Dm,useReducer:Yd,useRef:Pm,useState:function(){return Yd(Yo)},useDebugValue:Zd,useDeferredValue:function(r){var i=wr();return Vm(i,Xt.memoizedState,r)},useTransition:function(){var r=Yd(Yo)[0],i=wr().memoizedState;return[r,i]},useMutableSource:_m,useSyncExternalStore:wm,useId:Lm,unstable_isNewReconciler:!1},ex={readContext:_r,useCallback:jm,useContext:_r,useEffect:Xd,useImperativeHandle:km,useInsertionEffect:bm,useLayoutEffect:Am,useMemo:Dm,useReducer:Jd,useRef:Pm,useState:function(){return Jd(Yo)},useDebugValue:Zd,useDeferredValue:function(r){var i=wr();return Xt===null?i.memoizedState=r:Vm(i,Xt.memoizedState,r)},useTransition:function(){var r=Jd(Yo)[0],i=wr().memoizedState;return[r,i]},useMutableSource:_m,useSyncExternalStore:wm,useId:Lm,unstable_isNewReconciler:!1};function Mr(r,i){if(r&&r.defaultProps){i=ee({},i),r=r.defaultProps;for(var o in r)i[o]===void 0&&(i[o]=r[o]);return i}return i}function eh(r,i,o,h){i=r.memoizedState,o=o(h,i),o=o==null?i:ee({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Rc={isMounted:function(r){return(r=r._reactInternals)?ir(r)===r:!1},enqueueSetState:function(r,i,o){r=r._reactInternals;var h=zn(),p=di(r),y=Os(h,p);y.payload=i,o!=null&&(y.callback=o),i=oi(r,y,p),i!==null&&(zr(i,r,p,h),wc(i,r,p))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var h=zn(),p=di(r),y=Os(h,p);y.tag=1,y.payload=i,o!=null&&(y.callback=o),i=oi(r,y,p),i!==null&&(zr(i,r,p,h),wc(i,r,p))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=zn(),h=di(r),p=Os(o,h);p.tag=2,i!=null&&(p.callback=i),i=oi(r,p,h),i!==null&&(zr(i,r,h,o),wc(i,r,h))}};function Um(r,i,o,h,p,y,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,x):i.prototype&&i.prototype.isPureReactComponent?!Oo(o,h)||!Oo(p,y):!0}function zm(r,i,o){var h=!1,p=si,y=i.contextType;return typeof y=="object"&&y!==null?y=_r(y):(p=Gn(i)?Ki:bn.current,h=i.contextTypes,y=(h=h!=null)?za(r,p):si),i=new i(o,y),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Rc,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=y),i}function Bm(r,i,o,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,h),i.state!==r&&Rc.enqueueReplaceState(i,i.state,null)}function th(r,i,o,h){var p=r.stateNode;p.props=o,p.state=r.memoizedState,p.refs={},zd(r);var y=i.contextType;typeof y=="object"&&y!==null?p.context=_r(y):(y=Gn(i)?Ki:bn.current,p.context=za(r,y)),p.state=r.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(eh(r,i,y,o),p.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&Rc.enqueueReplaceState(p,p.state,null),xc(r,o,p,h),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function Qa(r,i){try{var o="",h=i;do o+=Ce(h),h=h.return;while(h);var p=o}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:i,stack:p,digest:null}}function nh(r,i,o){return{value:r,source:null,stack:o??null,digest:i??null}}function rh(r,i){try{console.error(i.value)}catch(o){setTimeout(function(){throw o})}}var tx=typeof WeakMap=="function"?WeakMap:Map;function $m(r,i,o){o=Os(-1,o),o.tag=3,o.payload={element:null};var h=i.value;return o.callback=function(){Vc||(Vc=!0,vh=h),rh(r,i)},o}function Wm(r,i,o){o=Os(-1,o),o.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=i.value;o.payload=function(){return h(p)},o.callback=function(){rh(r,i)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(o.callback=function(){rh(r,i),typeof h!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var x=i.stack;this.componentDidCatch(i.value,{componentStack:x!==null?x:""})}),o}function Hm(r,i,o){var h=r.pingCache;if(h===null){h=r.pingCache=new tx;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(o)||(p.add(o),r=mx.bind(null,r,i,o),i.then(r,r))}function qm(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Gm(r,i,o,h,p){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(i=Os(-1,1),i.tag=2,oi(o,i,1))),o.lanes|=1),r):(r.flags|=65536,r.lanes=p,r)}var nx=me.ReactCurrentOwner,Kn=!1;function Un(r,i,o,h){i.child=r===null?fm(i,null,o,h):Ha(i,r.child,o,h)}function Km(r,i,o,h,p){o=o.render;var y=i.ref;return Ga(i,p),h=Kd(r,i,o,h,y,p),o=Qd(),r!==null&&!Kn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~p,Ms(r,i,p)):(At&&o&&Nd(i),i.flags|=1,Un(r,i,h,p),i.child)}function Qm(r,i,o,h,p){if(r===null){var y=o.type;return typeof y=="function"&&!Ih(y)&&y.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(i.tag=15,i.type=y,Ym(r,i,y,h,p)):(r=zc(o.type,null,h,i,i.mode,p),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,(r.lanes&p)===0){var x=y.memoizedProps;if(o=o.compare,o=o!==null?o:Oo,o(x,h)&&r.ref===i.ref)return Ms(r,i,p)}return i.flags|=1,r=fi(y,h),r.ref=i.ref,r.return=i,i.child=r}function Ym(r,i,o,h,p){if(r!==null){var y=r.memoizedProps;if(Oo(y,h)&&r.ref===i.ref)if(Kn=!1,i.pendingProps=h=y,(r.lanes&p)!==0)(r.flags&131072)!==0&&(Kn=!0);else return i.lanes=r.lanes,Ms(r,i,p)}return sh(r,i,o,h,p)}function Jm(r,i,o){var h=i.pendingProps,p=h.children,y=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Ja,ur),ur|=o;else{if((o&1073741824)===0)return r=y!==null?y.baseLanes|o:o,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,_t(Ja,ur),ur|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:o,_t(Ja,ur),ur|=h}else y!==null?(h=y.baseLanes|o,i.memoizedState=null):h=o,_t(Ja,ur),ur|=h;return Un(r,i,p,o),i.child}function Xm(r,i){var o=i.ref;(r===null&&o!==null||r!==null&&r.ref!==o)&&(i.flags|=512,i.flags|=2097152)}function sh(r,i,o,h,p){var y=Gn(o)?Ki:bn.current;return y=za(i,y),Ga(i,p),o=Kd(r,i,o,h,y,p),h=Qd(),r!==null&&!Kn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~p,Ms(r,i,p)):(At&&h&&Nd(i),i.flags|=1,Un(r,i,o,p),i.child)}function Zm(r,i,o,h,p){if(Gn(o)){var y=!0;hc(i)}else y=!1;if(Ga(i,p),i.stateNode===null)Ac(r,i),zm(i,o,h),th(i,o,h,p),h=!0;else if(r===null){var x=i.stateNode,N=i.memoizedProps;x.props=N;var O=x.context,Z=o.contextType;typeof Z=="object"&&Z!==null?Z=_r(Z):(Z=Gn(o)?Ki:bn.current,Z=za(i,Z));var de=o.getDerivedStateFromProps,pe=typeof de=="function"||typeof x.getSnapshotBeforeUpdate=="function";pe||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==h||O!==Z)&&Bm(i,x,h,Z),ai=!1;var ue=i.memoizedState;x.state=ue,xc(i,h,x,p),O=i.memoizedState,N!==h||ue!==O||qn.current||ai?(typeof de=="function"&&(eh(i,o,de,h),O=i.memoizedState),(N=ai||Um(i,o,N,h,ue,O,Z))?(pe||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=O),x.props=h,x.state=O,x.context=Z,h=N):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{x=i.stateNode,mm(r,i),N=i.memoizedProps,Z=i.type===i.elementType?N:Mr(i.type,N),x.props=Z,pe=i.pendingProps,ue=x.context,O=o.contextType,typeof O=="object"&&O!==null?O=_r(O):(O=Gn(o)?Ki:bn.current,O=za(i,O));var Se=o.getDerivedStateFromProps;(de=typeof Se=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==pe||ue!==O)&&Bm(i,x,h,O),ai=!1,ue=i.memoizedState,x.state=ue,xc(i,h,x,p);var be=i.memoizedState;N!==pe||ue!==be||qn.current||ai?(typeof Se=="function"&&(eh(i,o,Se,h),be=i.memoizedState),(Z=ai||Um(i,o,Z,h,ue,be,O)||!1)?(de||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,be,O),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,be,O)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||N===r.memoizedProps&&ue===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&ue===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=be),x.props=h,x.state=be,x.context=O,h=Z):(typeof x.componentDidUpdate!="function"||N===r.memoizedProps&&ue===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&ue===r.memoizedState||(i.flags|=1024),h=!1)}return ih(r,i,o,h,y,p)}function ih(r,i,o,h,p,y){Xm(r,i);var x=(i.flags&128)!==0;if(!h&&!x)return p&&sm(i,o,!1),Ms(r,i,y);h=i.stateNode,nx.current=i;var N=x&&typeof o.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&x?(i.child=Ha(i,r.child,null,y),i.child=Ha(i,null,N,y)):Un(r,i,N,y),i.memoizedState=h.state,p&&sm(i,o,!0),i.child}function eg(r){var i=r.stateNode;i.pendingContext?nm(r,i.pendingContext,i.pendingContext!==i.context):i.context&&nm(r,i.context,!1),Bd(r,i.containerInfo)}function tg(r,i,o,h,p){return Wa(),Vd(p),i.flags|=256,Un(r,i,o,h),i.child}var ah={dehydrated:null,treeContext:null,retryLane:0};function oh(r){return{baseLanes:r,cachePool:null,transitions:null}}function ng(r,i,o){var h=i.pendingProps,p=jt.current,y=!1,x=(i.flags&128)!==0,N;if((N=x)||(N=r!==null&&r.memoizedState===null?!1:(p&2)!==0),N?(y=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),_t(jt,p&1),r===null)return Dd(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(x=h.children,r=h.fallback,y?(h=i.mode,y=i.child,x={mode:"hidden",children:x},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=x):y=Bc(x,h,0,null),r=sa(r,h,o,null),y.return=i,r.return=i,y.sibling=r,i.child=y,i.child.memoizedState=oh(o),i.memoizedState=ah,r):lh(i,x));if(p=r.memoizedState,p!==null&&(N=p.dehydrated,N!==null))return rx(r,i,x,h,N,p,o);if(y){y=h.fallback,x=i.mode,p=r.child,N=p.sibling;var O={mode:"hidden",children:h.children};return(x&1)===0&&i.child!==p?(h=i.child,h.childLanes=0,h.pendingProps=O,i.deletions=null):(h=fi(p,O),h.subtreeFlags=p.subtreeFlags&14680064),N!==null?y=fi(N,y):(y=sa(y,x,o,null),y.flags|=2),y.return=i,h.return=i,h.sibling=y,i.child=h,h=y,y=i.child,x=r.child.memoizedState,x=x===null?oh(o):{baseLanes:x.baseLanes|o,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=r.childLanes&~o,i.memoizedState=ah,h}return y=r.child,r=y.sibling,h=fi(y,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=o),h.return=i,h.sibling=null,r!==null&&(o=i.deletions,o===null?(i.deletions=[r],i.flags|=16):o.push(r)),i.child=h,i.memoizedState=null,h}function lh(r,i){return i=Bc({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function bc(r,i,o,h){return h!==null&&Vd(h),Ha(i,r.child,null,o),r=lh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function rx(r,i,o,h,p,y,x){if(o)return i.flags&256?(i.flags&=-257,h=nh(Error(t(422))),bc(r,i,x,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(y=h.fallback,p=i.mode,h=Bc({mode:"visible",children:h.children},p,0,null),y=sa(y,p,x,null),y.flags|=2,h.return=i,y.return=i,h.sibling=y,i.child=h,(i.mode&1)!==0&&Ha(i,r.child,null,x),i.child.memoizedState=oh(x),i.memoizedState=ah,y);if((i.mode&1)===0)return bc(r,i,x,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var N=h.dgst;return h=N,y=Error(t(419)),h=nh(y,h,void 0),bc(r,i,x,h)}if(N=(x&r.childLanes)!==0,Kn||N){if(h=cn,h!==null){switch(x&-x){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|x))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Ls(r,p),zr(h,r,p,-1))}return Sh(),h=nh(Error(t(421))),bc(r,i,x,h)}return p.data==="$?"?(i.flags|=128,i.child=r.child,i=gx.bind(null,r),p._reactRetry=i,null):(r=y.treeContext,cr=ni(p.nextSibling),lr=i,At=!0,Or=null,r!==null&&(yr[vr++]=Ds,yr[vr++]=Vs,yr[vr++]=Qi,Ds=r.id,Vs=r.overflow,Qi=i),i=lh(i,h.children),i.flags|=4096,i)}function rg(r,i,o){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),Fd(r.return,i,o)}function ch(r,i,o,h,p){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:p}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=o,y.tailMode=p)}function sg(r,i,o){var h=i.pendingProps,p=h.revealOrder,y=h.tail;if(Un(r,i,h.children,o),h=jt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&rg(r,o,i);else if(r.tag===19)rg(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(_t(jt,h),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(o=i.child,p=null;o!==null;)r=o.alternate,r!==null&&Ec(r)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),ch(i,!1,p,o,y);break;case"backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(r=p.alternate,r!==null&&Ec(r)===null){i.child=p;break}r=p.sibling,p.sibling=o,o=p,p=r}ch(i,!0,o,null,y);break;case"together":ch(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ac(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Ms(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),ea|=i.lanes,(o&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,o=fi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=fi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function sx(r,i,o){switch(i.tag){case 3:eg(i),Wa();break;case 5:vm(i);break;case 1:Gn(i.type)&&hc(i);break;case 4:Bd(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,p=i.memoizedProps.value;_t(vc,h._currentValue),h._currentValue=p;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(_t(jt,jt.current&1),i.flags|=128,null):(o&i.child.childLanes)!==0?ng(r,i,o):(_t(jt,jt.current&1),r=Ms(r,i,o),r!==null?r.sibling:null);_t(jt,jt.current&1);break;case 19:if(h=(o&i.childLanes)!==0,(r.flags&128)!==0){if(h)return sg(r,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),_t(jt,jt.current),h)break;return null;case 22:case 23:return i.lanes=0,Jm(r,i,o)}return Ms(r,i,o)}var ig,uh,ag,og;ig=function(r,i){for(var o=i.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},uh=function(){},ag=function(r,i,o,h){var p=r.memoizedProps;if(p!==h){r=i.stateNode,Xi(os.current);var y=null;switch(o){case"input":p=tr(r,p),h=tr(r,h),y=[];break;case"select":p=ee({},p,{value:void 0}),h=ee({},h,{value:void 0}),y=[];break;case"textarea":p=rr(r,p),h=rr(r,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=cc)}fr(o,h);var x;o=null;for(Z in p)if(!h.hasOwnProperty(Z)&&p.hasOwnProperty(Z)&&p[Z]!=null)if(Z==="style"){var N=p[Z];for(x in N)N.hasOwnProperty(x)&&(o||(o={}),o[x]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(a.hasOwnProperty(Z)?y||(y=[]):(y=y||[]).push(Z,null));for(Z in h){var O=h[Z];if(N=p!=null?p[Z]:void 0,h.hasOwnProperty(Z)&&O!==N&&(O!=null||N!=null))if(Z==="style")if(N){for(x in N)!N.hasOwnProperty(x)||O&&O.hasOwnProperty(x)||(o||(o={}),o[x]="");for(x in O)O.hasOwnProperty(x)&&N[x]!==O[x]&&(o||(o={}),o[x]=O[x])}else o||(y||(y=[]),y.push(Z,o)),o=O;else Z==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,N=N?N.__html:void 0,O!=null&&N!==O&&(y=y||[]).push(Z,O)):Z==="children"?typeof O!="string"&&typeof O!="number"||(y=y||[]).push(Z,""+O):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(a.hasOwnProperty(Z)?(O!=null&&Z==="onScroll"&&Et("scroll",r),y||N===O||(y=[])):(y=y||[]).push(Z,O))}o&&(y=y||[]).push("style",o);var Z=y;(i.updateQueue=Z)&&(i.flags|=4)}},og=function(r,i,o,h){o!==h&&(i.flags|=4)};function Xo(r,i){if(!At)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Nn(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,h=0;if(i)for(var p=r.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=o,i}function ix(r,i,o){var h=i.pendingProps;switch(kd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(i),null;case 1:return Gn(i.type)&&dc(),Nn(i),null;case 3:return h=i.stateNode,Ka(),Tt(qn),Tt(bn),Hd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(gc(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Or!==null&&(xh(Or),Or=null))),uh(r,i),Nn(i),null;case 5:$d(i);var p=Xi(Go.current);if(o=i.type,r!==null&&i.stateNode!=null)ag(r,i,o,h,p),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Nn(i),null}if(r=Xi(os.current),gc(i)){h=i.stateNode,o=i.type;var y=i.memoizedProps;switch(h[as]=i,h[Bo]=y,r=(i.mode&1)!==0,o){case"dialog":Et("cancel",h),Et("close",h);break;case"iframe":case"object":case"embed":Et("load",h);break;case"video":case"audio":for(p=0;p<Fo.length;p++)Et(Fo[p],h);break;case"source":Et("error",h);break;case"img":case"image":case"link":Et("error",h),Et("load",h);break;case"details":Et("toggle",h);break;case"input":tt(h,y),Et("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Et("invalid",h);break;case"textarea":Bn(h,y),Et("invalid",h)}fr(o,y),p=null;for(var x in y)if(y.hasOwnProperty(x)){var N=y[x];x==="children"?typeof N=="string"?h.textContent!==N&&(y.suppressHydrationWarning!==!0&&lc(h.textContent,N,r),p=["children",N]):typeof N=="number"&&h.textContent!==""+N&&(y.suppressHydrationWarning!==!0&&lc(h.textContent,N,r),p=["children",""+N]):a.hasOwnProperty(x)&&N!=null&&x==="onScroll"&&Et("scroll",h)}switch(o){case"input":nn(h),ws(h,y,!0);break;case"textarea":nn(h),Gr(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=cc)}h=p,i.updateQueue=h,h!==null&&(i.flags|=4)}else{x=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Pt(o)),r==="http://www.w3.org/1999/xhtml"?o==="script"?(r=x.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=x.createElement(o,{is:h.is}):(r=x.createElement(o),o==="select"&&(x=r,h.multiple?x.multiple=!0:h.size&&(x.size=h.size))):r=x.createElementNS(r,o),r[as]=i,r[Bo]=h,ig(r,i,!1,!1),i.stateNode=r;e:{switch(x=Ts(o,h),o){case"dialog":Et("cancel",r),Et("close",r),p=h;break;case"iframe":case"object":case"embed":Et("load",r),p=h;break;case"video":case"audio":for(p=0;p<Fo.length;p++)Et(Fo[p],r);p=h;break;case"source":Et("error",r),p=h;break;case"img":case"image":case"link":Et("error",r),Et("load",r),p=h;break;case"details":Et("toggle",r),p=h;break;case"input":tt(r,h),p=tr(r,h),Et("invalid",r);break;case"option":p=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},p=ee({},h,{value:void 0}),Et("invalid",r);break;case"textarea":Bn(r,h),p=rr(r,h),Et("invalid",r);break;default:p=h}fr(o,p),N=p;for(y in N)if(N.hasOwnProperty(y)){var O=N[y];y==="style"?fn(r,O):y==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&xs(r,O)):y==="children"?typeof O=="string"?(o!=="textarea"||O!=="")&&Pn(r,O):typeof O=="number"&&Pn(r,""+O):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(a.hasOwnProperty(y)?O!=null&&y==="onScroll"&&Et("scroll",r):O!=null&&oe(r,y,O,x))}switch(o){case"input":nn(r),ws(r,h,!1);break;case"textarea":nn(r),Gr(r);break;case"option":h.value!=null&&r.setAttribute("value",""+We(h.value));break;case"select":r.multiple=!!h.multiple,y=h.value,y!=null?In(r,!!h.multiple,y,!1):h.defaultValue!=null&&In(r,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=cc)}switch(o){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Nn(i),null;case 6:if(r&&i.stateNode!=null)og(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(o=Xi(Go.current),Xi(os.current),gc(i)){if(h=i.stateNode,o=i.memoizedProps,h[as]=i,(y=h.nodeValue!==o)&&(r=lr,r!==null))switch(r.tag){case 3:lc(h.nodeValue,o,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&lc(h.nodeValue,o,(r.mode&1)!==0)}y&&(i.flags|=4)}else h=(o.nodeType===9?o:o.ownerDocument).createTextNode(h),h[as]=i,i.stateNode=h}return Nn(i),null;case 13:if(Tt(jt),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(At&&cr!==null&&(i.mode&1)!==0&&(i.flags&128)===0)um(),Wa(),i.flags|=98560,y=!1;else if(y=gc(i),h!==null&&h.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[as]=i}else Wa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nn(i),y=!1}else Or!==null&&(xh(Or),Or=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=o,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(jt.current&1)!==0?Zt===0&&(Zt=3):Sh())),i.updateQueue!==null&&(i.flags|=4),Nn(i),null);case 4:return Ka(),uh(r,i),r===null&&Uo(i.stateNode.containerInfo),Nn(i),null;case 10:return Md(i.type._context),Nn(i),null;case 17:return Gn(i.type)&&dc(),Nn(i),null;case 19:if(Tt(jt),y=i.memoizedState,y===null)return Nn(i),null;if(h=(i.flags&128)!==0,x=y.rendering,x===null)if(h)Xo(y,!1);else{if(Zt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(x=Ec(r),x!==null){for(i.flags|=128,Xo(y,!1),h=x.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=o,o=i.child;o!==null;)y=o,r=h,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,r=x.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),o=o.sibling;return _t(jt,jt.current&1|2),i.child}r=r.sibling}y.tail!==null&&pt()>Xa&&(i.flags|=128,h=!0,Xo(y,!1),i.lanes=4194304)}else{if(!h)if(r=Ec(x),r!==null){if(i.flags|=128,h=!0,o=r.updateQueue,o!==null&&(i.updateQueue=o,i.flags|=4),Xo(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!At)return Nn(i),null}else 2*pt()-y.renderingStartTime>Xa&&o!==1073741824&&(i.flags|=128,h=!0,Xo(y,!1),i.lanes=4194304);y.isBackwards?(x.sibling=i.child,i.child=x):(o=y.last,o!==null?o.sibling=x:i.child=x,y.last=x)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=pt(),i.sibling=null,o=jt.current,_t(jt,h?o&1|2:o&1),i):(Nn(i),null);case 22:case 23:return Th(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(ur&1073741824)!==0&&(Nn(i),i.subtreeFlags&6&&(i.flags|=8192)):Nn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function ax(r,i){switch(kd(i),i.tag){case 1:return Gn(i.type)&&dc(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ka(),Tt(qn),Tt(bn),Hd(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return $d(i),null;case 13:if(Tt(jt),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Wa()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Tt(jt),null;case 4:return Ka(),null;case 10:return Md(i.type._context),null;case 22:case 23:return Th(),null;case 24:return null;default:return null}}var Nc=!1,kn=!1,ox=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function Ya(r,i){var o=r.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(h){Ot(r,i,h)}else o.current=null}function dh(r,i,o){try{o()}catch(h){Ot(r,i,h)}}var lg=!1;function lx(r,i){if(Td=Zs,r=Up(),md(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var x=0,N=-1,O=-1,Z=0,de=0,pe=r,ue=null;t:for(;;){for(var Se;pe!==o||p!==0&&pe.nodeType!==3||(N=x+p),pe!==y||h!==0&&pe.nodeType!==3||(O=x+h),pe.nodeType===3&&(x+=pe.nodeValue.length),(Se=pe.firstChild)!==null;)ue=pe,pe=Se;for(;;){if(pe===r)break t;if(ue===o&&++Z===p&&(N=x),ue===y&&++de===h&&(O=x),(Se=pe.nextSibling)!==null)break;pe=ue,ue=pe.parentNode}pe=Se}o=N===-1||O===-1?null:{start:N,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Sd={focusedElem:r,selectionRange:o},Zs=!1,Pe=i;Pe!==null;)if(i=Pe,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Pe=r;else for(;Pe!==null;){i=Pe;try{var be=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var Ne=be.memoizedProps,Ft=be.memoizedState,G=i.stateNode,U=G.getSnapshotBeforeUpdate(i.elementType===i.type?Ne:Mr(i.type,Ne),Ft);G.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var X=i.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ge){Ot(i,i.return,ge)}if(r=i.sibling,r!==null){r.return=i.return,Pe=r;break}Pe=i.return}return be=lg,lg=!1,be}function Zo(r,i,o){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&r)===r){var y=p.destroy;p.destroy=void 0,y!==void 0&&dh(i,o,y)}p=p.next}while(p!==h)}}function kc(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&r)===r){var h=o.create;o.destroy=h()}o=o.next}while(o!==i)}}function hh(r){var i=r.ref;if(i!==null){var o=r.stateNode;switch(r.tag){case 5:r=o;break;default:r=o}typeof i=="function"?i(r):i.current=r}}function cg(r){var i=r.alternate;i!==null&&(r.alternate=null,cg(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[as],delete i[Bo],delete i[Rd],delete i[Ww],delete i[Hw])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ug(r){return r.tag===5||r.tag===3||r.tag===4}function dg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ug(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function fh(r,i,o){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(r,i):o.insertBefore(r,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(r,o)):(i=o,i.appendChild(r)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=cc));else if(h!==4&&(r=r.child,r!==null))for(fh(r,i,o),r=r.sibling;r!==null;)fh(r,i,o),r=r.sibling}function ph(r,i,o){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(ph(r,i,o),r=r.sibling;r!==null;)ph(r,i,o),r=r.sibling}var yn=null,Fr=!1;function li(r,i,o){for(o=o.child;o!==null;)hg(r,i,o),o=o.sibling}function hg(r,i,o){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(ye,o)}catch{}switch(o.tag){case 5:kn||Ya(o,i);case 6:var h=yn,p=Fr;yn=null,li(r,i,o),yn=h,Fr=p,yn!==null&&(Fr?(r=yn,o=o.stateNode,r.nodeType===8?r.parentNode.removeChild(o):r.removeChild(o)):yn.removeChild(o.stateNode));break;case 18:yn!==null&&(Fr?(r=yn,o=o.stateNode,r.nodeType===8?Pd(r.parentNode,o):r.nodeType===1&&Pd(r,o),Dr(r)):Pd(yn,o.stateNode));break;case 4:h=yn,p=Fr,yn=o.stateNode.containerInfo,Fr=!0,li(r,i,o),yn=h,Fr=p;break;case 0:case 11:case 14:case 15:if(!kn&&(h=o.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,x=y.destroy;y=y.tag,x!==void 0&&((y&2)!==0||(y&4)!==0)&&dh(o,i,x),p=p.next}while(p!==h)}li(r,i,o);break;case 1:if(!kn&&(Ya(o,i),h=o.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=o.memoizedProps,h.state=o.memoizedState,h.componentWillUnmount()}catch(N){Ot(o,i,N)}li(r,i,o);break;case 21:li(r,i,o);break;case 22:o.mode&1?(kn=(h=kn)||o.memoizedState!==null,li(r,i,o),kn=h):li(r,i,o);break;default:li(r,i,o)}}function fg(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var o=r.stateNode;o===null&&(o=r.stateNode=new ox),i.forEach(function(h){var p=yx.bind(null,r,h);o.has(h)||(o.add(h),h.then(p,p))})}}function Ur(r,i){var o=i.deletions;if(o!==null)for(var h=0;h<o.length;h++){var p=o[h];try{var y=r,x=i,N=x;e:for(;N!==null;){switch(N.tag){case 5:yn=N.stateNode,Fr=!1;break e;case 3:yn=N.stateNode.containerInfo,Fr=!0;break e;case 4:yn=N.stateNode.containerInfo,Fr=!0;break e}N=N.return}if(yn===null)throw Error(t(160));hg(y,x,p),yn=null,Fr=!1;var O=p.alternate;O!==null&&(O.return=null),p.return=null}catch(Z){Ot(p,i,Z)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)pg(i,r),i=i.sibling}function pg(r,i){var o=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ur(i,r),cs(r),h&4){try{Zo(3,r,r.return),kc(3,r)}catch(Ne){Ot(r,r.return,Ne)}try{Zo(5,r,r.return)}catch(Ne){Ot(r,r.return,Ne)}}break;case 1:Ur(i,r),cs(r),h&512&&o!==null&&Ya(o,o.return);break;case 5:if(Ur(i,r),cs(r),h&512&&o!==null&&Ya(o,o.return),r.flags&32){var p=r.stateNode;try{Pn(p,"")}catch(Ne){Ot(r,r.return,Ne)}}if(h&4&&(p=r.stateNode,p!=null)){var y=r.memoizedProps,x=o!==null?o.memoizedProps:y,N=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{N==="input"&&y.type==="radio"&&y.name!=null&&nr(p,y),Ts(N,x);var Z=Ts(N,y);for(x=0;x<O.length;x+=2){var de=O[x],pe=O[x+1];de==="style"?fn(p,pe):de==="dangerouslySetInnerHTML"?xs(p,pe):de==="children"?Pn(p,pe):oe(p,de,pe,Z)}switch(N){case"input":$t(p,y);break;case"textarea":qr(p,y);break;case"select":var ue=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var Se=y.value;Se!=null?In(p,!!y.multiple,Se,!1):ue!==!!y.multiple&&(y.defaultValue!=null?In(p,!!y.multiple,y.defaultValue,!0):In(p,!!y.multiple,y.multiple?[]:"",!1))}p[Bo]=y}catch(Ne){Ot(r,r.return,Ne)}}break;case 6:if(Ur(i,r),cs(r),h&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,y=r.memoizedProps;try{p.nodeValue=y}catch(Ne){Ot(r,r.return,Ne)}}break;case 3:if(Ur(i,r),cs(r),h&4&&o!==null&&o.memoizedState.isDehydrated)try{Dr(i.containerInfo)}catch(Ne){Ot(r,r.return,Ne)}break;case 4:Ur(i,r),cs(r);break;case 13:Ur(i,r),cs(r),p=r.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(yh=pt())),h&4&&fg(r);break;case 22:if(de=o!==null&&o.memoizedState!==null,r.mode&1?(kn=(Z=kn)||de,Ur(i,r),kn=Z):Ur(i,r),cs(r),h&8192){if(Z=r.memoizedState!==null,(r.stateNode.isHidden=Z)&&!de&&(r.mode&1)!==0)for(Pe=r,de=r.child;de!==null;){for(pe=Pe=de;Pe!==null;){switch(ue=Pe,Se=ue.child,ue.tag){case 0:case 11:case 14:case 15:Zo(4,ue,ue.return);break;case 1:Ya(ue,ue.return);var be=ue.stateNode;if(typeof be.componentWillUnmount=="function"){h=ue,o=ue.return;try{i=h,be.props=i.memoizedProps,be.state=i.memoizedState,be.componentWillUnmount()}catch(Ne){Ot(h,o,Ne)}}break;case 5:Ya(ue,ue.return);break;case 22:if(ue.memoizedState!==null){yg(pe);continue}}Se!==null?(Se.return=ue,Pe=Se):yg(pe)}de=de.sibling}e:for(de=null,pe=r;;){if(pe.tag===5){if(de===null){de=pe;try{p=pe.stateNode,Z?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(N=pe.stateNode,O=pe.memoizedProps.style,x=O!=null&&O.hasOwnProperty("display")?O.display:null,N.style.display=Es("display",x))}catch(Ne){Ot(r,r.return,Ne)}}}else if(pe.tag===6){if(de===null)try{pe.stateNode.nodeValue=Z?"":pe.memoizedProps}catch(Ne){Ot(r,r.return,Ne)}}else if((pe.tag!==22&&pe.tag!==23||pe.memoizedState===null||pe===r)&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===r)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===r)break e;de===pe&&(de=null),pe=pe.return}de===pe&&(de=null),pe.sibling.return=pe.return,pe=pe.sibling}}break;case 19:Ur(i,r),cs(r),h&4&&fg(r);break;case 21:break;default:Ur(i,r),cs(r)}}function cs(r){var i=r.flags;if(i&2){try{e:{for(var o=r.return;o!==null;){if(ug(o)){var h=o;break e}o=o.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Pn(p,""),h.flags&=-33);var y=dg(r);ph(r,y,p);break;case 3:case 4:var x=h.stateNode.containerInfo,N=dg(r);fh(r,N,x);break;default:throw Error(t(161))}}catch(O){Ot(r,r.return,O)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function cx(r,i,o){Pe=r,mg(r)}function mg(r,i,o){for(var h=(r.mode&1)!==0;Pe!==null;){var p=Pe,y=p.child;if(p.tag===22&&h){var x=p.memoizedState!==null||Nc;if(!x){var N=p.alternate,O=N!==null&&N.memoizedState!==null||kn;N=Nc;var Z=kn;if(Nc=x,(kn=O)&&!Z)for(Pe=p;Pe!==null;)x=Pe,O=x.child,x.tag===22&&x.memoizedState!==null?vg(p):O!==null?(O.return=x,Pe=O):vg(p);for(;y!==null;)Pe=y,mg(y),y=y.sibling;Pe=p,Nc=N,kn=Z}gg(r)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,Pe=y):gg(r)}}function gg(r){for(;Pe!==null;){var i=Pe;if((i.flags&8772)!==0){var o=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:kn||kc(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!kn)if(o===null)h.componentDidMount();else{var p=i.elementType===i.type?o.memoizedProps:Mr(i.type,o.memoizedProps);h.componentDidUpdate(p,o.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&ym(i,y,h);break;case 3:var x=i.updateQueue;if(x!==null){if(o=null,i.child!==null)switch(i.child.tag){case 5:o=i.child.stateNode;break;case 1:o=i.child.stateNode}ym(i,x,o)}break;case 5:var N=i.stateNode;if(o===null&&i.flags&4){o=N;var O=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&o.focus();break;case"img":O.src&&(o.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Z=i.alternate;if(Z!==null){var de=Z.memoizedState;if(de!==null){var pe=de.dehydrated;pe!==null&&Dr(pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}kn||i.flags&512&&hh(i)}catch(ue){Ot(i,i.return,ue)}}if(i===r){Pe=null;break}if(o=i.sibling,o!==null){o.return=i.return,Pe=o;break}Pe=i.return}}function yg(r){for(;Pe!==null;){var i=Pe;if(i===r){Pe=null;break}var o=i.sibling;if(o!==null){o.return=i.return,Pe=o;break}Pe=i.return}}function vg(r){for(;Pe!==null;){var i=Pe;try{switch(i.tag){case 0:case 11:case 15:var o=i.return;try{kc(4,i)}catch(O){Ot(i,o,O)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var p=i.return;try{h.componentDidMount()}catch(O){Ot(i,p,O)}}var y=i.return;try{hh(i)}catch(O){Ot(i,y,O)}break;case 5:var x=i.return;try{hh(i)}catch(O){Ot(i,x,O)}}}catch(O){Ot(i,i.return,O)}if(i===r){Pe=null;break}var N=i.sibling;if(N!==null){N.return=i.return,Pe=N;break}Pe=i.return}}var ux=Math.ceil,jc=me.ReactCurrentDispatcher,mh=me.ReactCurrentOwner,xr=me.ReactCurrentBatchConfig,ct=0,cn=null,qt=null,vn=0,ur=0,Ja=ri(0),Zt=0,el=null,ea=0,Dc=0,gh=0,tl=null,Qn=null,yh=0,Xa=1/0,Fs=null,Vc=!1,vh=null,ci=null,Lc=!1,ui=null,Oc=0,nl=0,_h=null,Mc=-1,Fc=0;function zn(){return(ct&6)!==0?pt():Mc!==-1?Mc:Mc=pt()}function di(r){return(r.mode&1)===0?1:(ct&2)!==0&&vn!==0?vn&-vn:Gw.transition!==null?(Fc===0&&(Fc=Mn()),Fc):(r=Ye,r!==0||(r=window.event,r=r===void 0?16:Ao(r.type)),r)}function zr(r,i,o,h){if(50<nl)throw nl=0,_h=null,Error(t(185));Xr(r,o,h),((ct&2)===0||r!==cn)&&(r===cn&&((ct&2)===0&&(Dc|=o),Zt===4&&hi(r,vn)),Yn(r,h),o===1&&ct===0&&(i.mode&1)===0&&(Xa=pt()+500,fc&&ii()))}function Yn(r,i){var o=r.callbackNode;Rn(r,i);var h=kt(r,r===cn?vn:0);if(h===0)o!==null&&Js(o),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(o!=null&&Js(o),i===1)r.tag===0?qw(wg.bind(null,r)):im(wg.bind(null,r)),Bw(function(){(ct&6)===0&&ii()}),o=null;else{switch(es(h)){case 1:o=Ps;break;case 4:o=Jr;break;case 16:o=S;break;case 536870912:o=J;break;default:o=S}o=Rg(o,_g.bind(null,r))}r.callbackPriority=i,r.callbackNode=o}}function _g(r,i){if(Mc=-1,Fc=0,(ct&6)!==0)throw Error(t(327));var o=r.callbackNode;if(Za()&&r.callbackNode!==o)return null;var h=kt(r,r===cn?vn:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=Uc(r,h);else{i=h;var p=ct;ct|=2;var y=Eg();(cn!==r||vn!==i)&&(Fs=null,Xa=pt()+500,na(r,i));do try{fx();break}catch(N){xg(r,N)}while(!0);Od(),jc.current=y,ct=p,qt!==null?i=0:(cn=null,vn=0,i=Zt)}if(i!==0){if(i===2&&(p=vt(r),p!==0&&(h=p,i=wh(r,p))),i===1)throw o=el,na(r,0),hi(r,h),Yn(r,pt()),o;if(i===6)hi(r,h);else{if(p=r.current.alternate,(h&30)===0&&!dx(p)&&(i=Uc(r,h),i===2&&(y=vt(r),y!==0&&(h=y,i=wh(r,y))),i===1))throw o=el,na(r,0),hi(r,h),Yn(r,pt()),o;switch(r.finishedWork=p,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:ra(r,Qn,Fs);break;case 3:if(hi(r,h),(h&130023424)===h&&(i=yh+500-pt(),10<i)){if(kt(r,0)!==0)break;if(p=r.suspendedLanes,(p&h)!==h){zn(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=Cd(ra.bind(null,r,Qn,Fs),i);break}ra(r,Qn,Fs);break;case 4:if(hi(r,h),(h&4194240)===h)break;for(i=r.eventTimes,p=-1;0<h;){var x=31-Te(h);y=1<<x,x=i[x],x>p&&(p=x),h&=~y}if(h=p,h=pt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*ux(h/1960))-h,10<h){r.timeoutHandle=Cd(ra.bind(null,r,Qn,Fs),h);break}ra(r,Qn,Fs);break;case 5:ra(r,Qn,Fs);break;default:throw Error(t(329))}}}return Yn(r,pt()),r.callbackNode===o?_g.bind(null,r):null}function wh(r,i){var o=tl;return r.current.memoizedState.isDehydrated&&(na(r,i).flags|=256),r=Uc(r,i),r!==2&&(i=Qn,Qn=o,i!==null&&xh(i)),r}function xh(r){Qn===null?Qn=r:Qn.push.apply(Qn,r)}function dx(r){for(var i=r;;){if(i.flags&16384){var o=i.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var h=0;h<o.length;h++){var p=o[h],y=p.getSnapshot;p=p.value;try{if(!Lr(y(),p))return!1}catch{return!1}}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function hi(r,i){for(i&=~gh,i&=~Dc,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var o=31-Te(i),h=1<<o;r[o]=-1,i&=~h}}function wg(r){if((ct&6)!==0)throw Error(t(327));Za();var i=kt(r,0);if((i&1)===0)return Yn(r,pt()),null;var o=Uc(r,i);if(r.tag!==0&&o===2){var h=vt(r);h!==0&&(i=h,o=wh(r,h))}if(o===1)throw o=el,na(r,0),hi(r,i),Yn(r,pt()),o;if(o===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,ra(r,Qn,Fs),Yn(r,pt()),null}function Eh(r,i){var o=ct;ct|=1;try{return r(i)}finally{ct=o,ct===0&&(Xa=pt()+500,fc&&ii())}}function ta(r){ui!==null&&ui.tag===0&&(ct&6)===0&&Za();var i=ct;ct|=1;var o=xr.transition,h=Ye;try{if(xr.transition=null,Ye=1,r)return r()}finally{Ye=h,xr.transition=o,ct=i,(ct&6)===0&&ii()}}function Th(){ur=Ja.current,Tt(Ja)}function na(r,i){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;if(o!==-1&&(r.timeoutHandle=-1,zw(o)),qt!==null)for(o=qt.return;o!==null;){var h=o;switch(kd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&dc();break;case 3:Ka(),Tt(qn),Tt(bn),Hd();break;case 5:$d(h);break;case 4:Ka();break;case 13:Tt(jt);break;case 19:Tt(jt);break;case 10:Md(h.type._context);break;case 22:case 23:Th()}o=o.return}if(cn=r,qt=r=fi(r.current,null),vn=ur=i,Zt=0,el=null,gh=Dc=ea=0,Qn=tl=null,Ji!==null){for(i=0;i<Ji.length;i++)if(o=Ji[i],h=o.interleaved,h!==null){o.interleaved=null;var p=h.next,y=o.pending;if(y!==null){var x=y.next;y.next=p,h.next=x}o.pending=h}Ji=null}return r}function xg(r,i){do{var o=qt;try{if(Od(),Tc.current=Pc,Sc){for(var h=Dt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Sc=!1}if(Zi=0,ln=Xt=Dt=null,Ko=!1,Qo=0,mh.current=null,o===null||o.return===null){Zt=1,el=i,qt=null;break}e:{var y=r,x=o.return,N=o,O=i;if(i=vn,N.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=O,de=N,pe=de.tag;if((de.mode&1)===0&&(pe===0||pe===11||pe===15)){var ue=de.alternate;ue?(de.updateQueue=ue.updateQueue,de.memoizedState=ue.memoizedState,de.lanes=ue.lanes):(de.updateQueue=null,de.memoizedState=null)}var Se=qm(x);if(Se!==null){Se.flags&=-257,Gm(Se,x,N,y,i),Se.mode&1&&Hm(y,Z,i),i=Se,O=Z;var be=i.updateQueue;if(be===null){var Ne=new Set;Ne.add(O),i.updateQueue=Ne}else be.add(O);break e}else{if((i&1)===0){Hm(y,Z,i),Sh();break e}O=Error(t(426))}}else if(At&&N.mode&1){var Ft=qm(x);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),Gm(Ft,x,N,y,i),Vd(Qa(O,N));break e}}y=O=Qa(O,N),Zt!==4&&(Zt=2),tl===null?tl=[y]:tl.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var G=$m(y,O,i);gm(y,G);break e;case 1:N=O;var U=y.type,X=y.stateNode;if((y.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(ci===null||!ci.has(X)))){y.flags|=65536,i&=-i,y.lanes|=i;var ge=Wm(y,N,i);gm(y,ge);break e}}y=y.return}while(y!==null)}Sg(o)}catch(je){i=je,qt===o&&o!==null&&(qt=o=o.return);continue}break}while(!0)}function Eg(){var r=jc.current;return jc.current=Pc,r===null?Pc:r}function Sh(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),cn===null||(ea&268435455)===0&&(Dc&268435455)===0||hi(cn,vn)}function Uc(r,i){var o=ct;ct|=2;var h=Eg();(cn!==r||vn!==i)&&(Fs=null,na(r,i));do try{hx();break}catch(p){xg(r,p)}while(!0);if(Od(),ct=o,jc.current=h,qt!==null)throw Error(t(261));return cn=null,vn=0,Zt}function hx(){for(;qt!==null;)Tg(qt)}function fx(){for(;qt!==null&&!xa();)Tg(qt)}function Tg(r){var i=Pg(r.alternate,r,ur);r.memoizedProps=r.pendingProps,i===null?Sg(r):qt=i,mh.current=null}function Sg(r){var i=r;do{var o=i.alternate;if(r=i.return,(i.flags&32768)===0){if(o=ix(o,i,ur),o!==null){qt=o;return}}else{if(o=ax(o,i),o!==null){o.flags&=32767,qt=o;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Zt=6,qt=null;return}}if(i=i.sibling,i!==null){qt=i;return}qt=i=r}while(i!==null);Zt===0&&(Zt=5)}function ra(r,i,o){var h=Ye,p=xr.transition;try{xr.transition=null,Ye=1,px(r,i,o,h)}finally{xr.transition=p,Ye=h}return null}function px(r,i,o,h){do Za();while(ui!==null);if((ct&6)!==0)throw Error(t(327));o=r.finishedWork;var p=r.finishedLanes;if(o===null)return null;if(r.finishedWork=null,r.finishedLanes=0,o===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=o.lanes|o.childLanes;if(mt(r,y),r===cn&&(qt=cn=null,vn=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Lc||(Lc=!0,Rg(S,function(){return Za(),null})),y=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||y){y=xr.transition,xr.transition=null;var x=Ye;Ye=1;var N=ct;ct|=4,mh.current=null,lx(r,o),pg(o,r),Dw(Sd),Zs=!!Td,Sd=Td=null,r.current=o,cx(o),Ar(),ct=N,Ye=x,xr.transition=y}else r.current=o;if(Lc&&(Lc=!1,ui=r,Oc=p),y=r.pendingLanes,y===0&&(ci=null),Qe(o.stateNode),Yn(r,pt()),i!==null)for(h=r.onRecoverableError,o=0;o<i.length;o++)p=i[o],h(p.value,{componentStack:p.stack,digest:p.digest});if(Vc)throw Vc=!1,r=vh,vh=null,r;return(Oc&1)!==0&&r.tag!==0&&Za(),y=r.pendingLanes,(y&1)!==0?r===_h?nl++:(nl=0,_h=r):nl=0,ii(),null}function Za(){if(ui!==null){var r=es(Oc),i=xr.transition,o=Ye;try{if(xr.transition=null,Ye=16>r?16:r,ui===null)var h=!1;else{if(r=ui,ui=null,Oc=0,(ct&6)!==0)throw Error(t(331));var p=ct;for(ct|=4,Pe=r.current;Pe!==null;){var y=Pe,x=y.child;if((Pe.flags&16)!==0){var N=y.deletions;if(N!==null){for(var O=0;O<N.length;O++){var Z=N[O];for(Pe=Z;Pe!==null;){var de=Pe;switch(de.tag){case 0:case 11:case 15:Zo(8,de,y)}var pe=de.child;if(pe!==null)pe.return=de,Pe=pe;else for(;Pe!==null;){de=Pe;var ue=de.sibling,Se=de.return;if(cg(de),de===Z){Pe=null;break}if(ue!==null){ue.return=Se,Pe=ue;break}Pe=Se}}}var be=y.alternate;if(be!==null){var Ne=be.child;if(Ne!==null){be.child=null;do{var Ft=Ne.sibling;Ne.sibling=null,Ne=Ft}while(Ne!==null)}}Pe=y}}if((y.subtreeFlags&2064)!==0&&x!==null)x.return=y,Pe=x;else e:for(;Pe!==null;){if(y=Pe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Zo(9,y,y.return)}var G=y.sibling;if(G!==null){G.return=y.return,Pe=G;break e}Pe=y.return}}var U=r.current;for(Pe=U;Pe!==null;){x=Pe;var X=x.child;if((x.subtreeFlags&2064)!==0&&X!==null)X.return=x,Pe=X;else e:for(x=U;Pe!==null;){if(N=Pe,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:kc(9,N)}}catch(je){Ot(N,N.return,je)}if(N===x){Pe=null;break e}var ge=N.sibling;if(ge!==null){ge.return=N.return,Pe=ge;break e}Pe=N.return}}if(ct=p,ii(),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(ye,r)}catch{}h=!0}return h}finally{Ye=o,xr.transition=i}}return!1}function Ig(r,i,o){i=Qa(o,i),i=$m(r,i,1),r=oi(r,i,1),i=zn(),r!==null&&(Xr(r,1,i),Yn(r,i))}function Ot(r,i,o){if(r.tag===3)Ig(r,r,o);else for(;i!==null;){if(i.tag===3){Ig(i,r,o);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ci===null||!ci.has(h))){r=Qa(o,r),r=Wm(i,r,1),i=oi(i,r,1),r=zn(),i!==null&&(Xr(i,1,r),Yn(i,r));break}}i=i.return}}function mx(r,i,o){var h=r.pingCache;h!==null&&h.delete(i),i=zn(),r.pingedLanes|=r.suspendedLanes&o,cn===r&&(vn&o)===o&&(Zt===4||Zt===3&&(vn&130023424)===vn&&500>pt()-yh?na(r,0):gh|=o),Yn(r,i)}function Cg(r,i){i===0&&((r.mode&1)===0?i=1:(i=xt,xt<<=1,(xt&130023424)===0&&(xt=4194304)));var o=zn();r=Ls(r,i),r!==null&&(Xr(r,i,o),Yn(r,o))}function gx(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),Cg(r,o)}function yx(r,i){var o=0;switch(r.tag){case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(o=p.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Cg(r,o)}var Pg;Pg=function(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps||qn.current)Kn=!0;else{if((r.lanes&o)===0&&(i.flags&128)===0)return Kn=!1,sx(r,i,o);Kn=(r.flags&131072)!==0}else Kn=!1,At&&(i.flags&1048576)!==0&&am(i,mc,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Ac(r,i),r=i.pendingProps;var p=za(i,bn.current);Ga(i,o),p=Kd(null,i,h,r,p,o);var y=Qd();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Gn(h)?(y=!0,hc(i)):y=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,zd(i),p.updater=Rc,i.stateNode=p,p._reactInternals=i,th(i,h,r,o),i=ih(null,i,h,!0,y,o)):(i.tag=0,At&&y&&Nd(i),Un(null,i,p,o),i=i.child),i;case 16:h=i.elementType;e:{switch(Ac(r,i),r=i.pendingProps,p=h._init,h=p(h._payload),i.type=h,p=i.tag=_x(h),r=Mr(h,r),p){case 0:i=sh(null,i,h,r,o);break e;case 1:i=Zm(null,i,h,r,o);break e;case 11:i=Km(null,i,h,r,o);break e;case 14:i=Qm(null,i,h,Mr(h.type,r),o);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Mr(h,p),sh(r,i,h,p,o);case 1:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Mr(h,p),Zm(r,i,h,p,o);case 3:e:{if(eg(i),r===null)throw Error(t(387));h=i.pendingProps,y=i.memoizedState,p=y.element,mm(r,i),xc(i,h,null,o);var x=i.memoizedState;if(h=x.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){p=Qa(Error(t(423)),i),i=tg(r,i,h,o,p);break e}else if(h!==p){p=Qa(Error(t(424)),i),i=tg(r,i,h,o,p);break e}else for(cr=ni(i.stateNode.containerInfo.firstChild),lr=i,At=!0,Or=null,o=fm(i,null,h,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Wa(),h===p){i=Ms(r,i,o);break e}Un(r,i,h,o)}i=i.child}return i;case 5:return vm(i),r===null&&Dd(i),h=i.type,p=i.pendingProps,y=r!==null?r.memoizedProps:null,x=p.children,Id(h,p)?x=null:y!==null&&Id(h,y)&&(i.flags|=32),Xm(r,i),Un(r,i,x,o),i.child;case 6:return r===null&&Dd(i),null;case 13:return ng(r,i,o);case 4:return Bd(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=Ha(i,null,h,o):Un(r,i,h,o),i.child;case 11:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Mr(h,p),Km(r,i,h,p,o);case 7:return Un(r,i,i.pendingProps,o),i.child;case 8:return Un(r,i,i.pendingProps.children,o),i.child;case 12:return Un(r,i,i.pendingProps.children,o),i.child;case 10:e:{if(h=i.type._context,p=i.pendingProps,y=i.memoizedProps,x=p.value,_t(vc,h._currentValue),h._currentValue=x,y!==null)if(Lr(y.value,x)){if(y.children===p.children&&!qn.current){i=Ms(r,i,o);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var N=y.dependencies;if(N!==null){x=y.child;for(var O=N.firstContext;O!==null;){if(O.context===h){if(y.tag===1){O=Os(-1,o&-o),O.tag=2;var Z=y.updateQueue;if(Z!==null){Z=Z.shared;var de=Z.pending;de===null?O.next=O:(O.next=de.next,de.next=O),Z.pending=O}}y.lanes|=o,O=y.alternate,O!==null&&(O.lanes|=o),Fd(y.return,o,i),N.lanes|=o;break}O=O.next}}else if(y.tag===10)x=y.type===i.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=o,N=x.alternate,N!==null&&(N.lanes|=o),Fd(x,o,i),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===i){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}Un(r,i,p.children,o),i=i.child}return i;case 9:return p=i.type,h=i.pendingProps.children,Ga(i,o),p=_r(p),h=h(p),i.flags|=1,Un(r,i,h,o),i.child;case 14:return h=i.type,p=Mr(h,i.pendingProps),p=Mr(h.type,p),Qm(r,i,h,p,o);case 15:return Ym(r,i,i.type,i.pendingProps,o);case 17:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Mr(h,p),Ac(r,i),i.tag=1,Gn(h)?(r=!0,hc(i)):r=!1,Ga(i,o),zm(i,h,p),th(i,h,p,o),ih(null,i,h,!0,r,o);case 19:return sg(r,i,o);case 22:return Jm(r,i,o)}throw Error(t(156,i.tag))};function Rg(r,i){return Cs(r,i)}function vx(r,i,o,h){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(r,i,o,h){return new vx(r,i,o,h)}function Ih(r){return r=r.prototype,!(!r||!r.isReactComponent)}function _x(r){if(typeof r=="function")return Ih(r)?1:0;if(r!=null){if(r=r.$$typeof,r===P)return 11;if(r===Ke)return 14}return 2}function fi(r,i){var o=r.alternate;return o===null?(o=Er(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&14680064,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o}function zc(r,i,o,h,p,y){var x=2;if(h=r,typeof r=="function")Ih(r)&&(x=1);else if(typeof r=="string")x=5;else e:switch(r){case V:return sa(o.children,p,y,i);case R:x=8,p|=8;break;case j:return r=Er(12,o,i,p|2),r.elementType=j,r.lanes=y,r;case b:return r=Er(13,o,i,p),r.elementType=b,r.lanes=y,r;case fe:return r=Er(19,o,i,p),r.elementType=fe,r.lanes=y,r;case K:return Bc(o,p,y,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case A:x=10;break e;case M:x=9;break e;case P:x=11;break e;case Ke:x=14;break e;case et:x=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Er(x,o,i,p),i.elementType=r,i.type=h,i.lanes=y,i}function sa(r,i,o,h){return r=Er(7,r,h,i),r.lanes=o,r}function Bc(r,i,o,h){return r=Er(22,r,h,i),r.elementType=K,r.lanes=o,r.stateNode={isHidden:!1},r}function Ch(r,i,o){return r=Er(6,r,null,i),r.lanes=o,r}function Ph(r,i,o){return i=Er(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function wx(r,i,o,h,p){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pr(0),this.expirationTimes=pr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pr(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Rh(r,i,o,h,p,y,x,N,O){return r=new wx(r,i,o,N,O),i===1?(i=1,y===!0&&(i|=8)):i=0,y=Er(3,null,null,i),r.current=y,y.stateNode=r,y.memoizedState={element:h,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},zd(y),r}function xx(r,i,o){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:h==null?null:""+h,children:r,containerInfo:i,implementation:o}}function bg(r){if(!r)return si;r=r._reactInternals;e:{if(ir(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Gn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var o=r.type;if(Gn(o))return rm(r,o,i)}return i}function Ag(r,i,o,h,p,y,x,N,O){return r=Rh(o,h,!0,r,p,y,x,N,O),r.context=bg(null),o=r.current,h=zn(),p=di(o),y=Os(h,p),y.callback=i??null,oi(o,y,p),r.current.lanes=p,Xr(r,p,h),Yn(r,h),r}function $c(r,i,o,h){var p=i.current,y=zn(),x=di(p);return o=bg(o),i.context===null?i.context=o:i.pendingContext=o,i=Os(y,x),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=oi(p,i,x),r!==null&&(zr(r,p,x,y),wc(r,p,x)),x}function Wc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ng(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function bh(r,i){Ng(r,i),(r=r.alternate)&&Ng(r,i)}function Ex(){return null}var kg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Ah(r){this._internalRoot=r}Hc.prototype.render=Ah.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));$c(r,i,null,null)},Hc.prototype.unmount=Ah.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;ta(function(){$c(null,r,null,null)}),i[ks]=null}};function Hc(r){this._internalRoot=r}Hc.prototype.unstable_scheduleHydration=function(r){if(r){var i=Hl();r={blockedOn:null,target:r,priority:i};for(var o=0;o<ns.length&&i!==0&&i<ns[o].priority;o++);ns.splice(o,0,r),o===0&&Kl(r)}};function Nh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function qc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function jg(){}function Tx(r,i,o,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var Z=Wc(x);y.call(Z)}}var x=Ag(i,h,r,0,null,!1,!1,"",jg);return r._reactRootContainer=x,r[ks]=x.current,Uo(r.nodeType===8?r.parentNode:r),ta(),x}for(;p=r.lastChild;)r.removeChild(p);if(typeof h=="function"){var N=h;h=function(){var Z=Wc(O);N.call(Z)}}var O=Rh(r,0,!1,null,null,!1,!1,"",jg);return r._reactRootContainer=O,r[ks]=O.current,Uo(r.nodeType===8?r.parentNode:r),ta(function(){$c(i,O,o,h)}),O}function Gc(r,i,o,h,p){var y=o._reactRootContainer;if(y){var x=y;if(typeof p=="function"){var N=p;p=function(){var O=Wc(x);N.call(O)}}$c(i,x,r,p)}else x=Tx(o,i,r,p,h);return Wc(x)}$l=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var o=Yt(i.pendingLanes);o!==0&&(Zr(i,o|1),Yn(i,pt()),(ct&6)===0&&(Xa=pt()+500,ii()))}break;case 13:ta(function(){var h=Ls(r,1);if(h!==null){var p=zn();zr(h,r,1,p)}}),bh(r,1)}},Ta=function(r){if(r.tag===13){var i=Ls(r,134217728);if(i!==null){var o=zn();zr(i,r,134217728,o)}bh(r,134217728)}},Wl=function(r){if(r.tag===13){var i=di(r),o=Ls(r,i);if(o!==null){var h=zn();zr(o,r,i,h)}bh(r,i)}},Hl=function(){return Ye},ql=function(r,i){var o=Ye;try{return Ye=r,i()}finally{Ye=o}},rn=function(r,i,o){switch(i){case"input":if($t(r,o),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<o.length;i++){var h=o[i];if(h!==r&&h.form===r.form){var p=uc(h);if(!p)throw Error(t(90));Bt(h),$t(h,p)}}}break;case"textarea":qr(r,o);break;case"select":i=o.value,i!=null&&In(r,!!o.multiple,i,!1)}},Re=Eh,De=ta;var Sx={usingClientEntryPoint:!1,Events:[$o,Fa,uc,B,Y,Eh]},rl={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ix={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:me.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=$n(r),r===null?null:r.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||Ex,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{ye=Kc.inject(Ix),Ae=Kc}catch{}}return Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sx,Jn.createPortal=function(r,i){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nh(i))throw Error(t(200));return xx(r,i,null,o)},Jn.createRoot=function(r,i){if(!Nh(r))throw Error(t(299));var o=!1,h="",p=kg;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=Rh(r,1,!1,null,null,o,!1,h,p),r[ks]=i.current,Uo(r.nodeType===8?r.parentNode:r),new Ah(i)},Jn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=$n(i),r=r===null?null:r.stateNode,r},Jn.flushSync=function(r){return ta(r)},Jn.hydrate=function(r,i,o){if(!qc(i))throw Error(t(200));return Gc(null,r,i,!0,o)},Jn.hydrateRoot=function(r,i,o){if(!Nh(r))throw Error(t(405));var h=o!=null&&o.hydratedSources||null,p=!1,y="",x=kg;if(o!=null&&(o.unstable_strictMode===!0&&(p=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),i=Ag(i,null,r,1,o??null,p,!1,y,x),r[ks]=i.current,Uo(r),h)for(r=0;r<h.length;r++)o=h[r],p=o._getVersion,p=p(o._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[o,p]:i.mutableSourceEagerHydrationData.push(o,p);return new Hc(i)},Jn.render=function(r,i,o){if(!qc(i))throw Error(t(200));return Gc(null,r,i,!1,o)},Jn.unmountComponentAtNode=function(r){if(!qc(r))throw Error(t(40));return r._reactRootContainer?(ta(function(){Gc(null,null,r,!1,function(){r._reactRootContainer=null,r[ks]=null})}),!0):!1},Jn.unstable_batchedUpdates=Eh,Jn.unstable_renderSubtreeIntoContainer=function(r,i,o,h){if(!qc(o))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Gc(r,i,o,!1,h)},Jn.version="18.3.1-next-f1338f8080-20240426",Jn}var zg;function Lv(){if(zg)return Dh.exports;zg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Dh.exports=Dx(),Dh.exports}var Bg;function Vx(){if(Bg)return Qc;Bg=1;var n=Lv();return Qc.createRoot=n.createRoot,Qc.hydrateRoot=n.hydrateRoot,Qc}var Lx=Vx();const Ox=Dv(Lx);Lv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},vl.apply(this,arguments)}var wi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(wi||(wi={}));const $g="popstate";function Mx(n){n===void 0&&(n={});function e(s,a){let{pathname:l,search:d,hash:f}=s.location;return Xh("",{pathname:l,search:d,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:yu(a)}return Ux(e,t,null,n)}function zt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Af(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Fx(){return Math.random().toString(36).substr(2,8)}function Wg(n,e){return{usr:n.state,key:n.key,idx:e}}function Xh(n,e,t,s){return t===void 0&&(t=null),vl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?vo(e):e,{state:t,key:e&&e.key||s||Fx()})}function yu(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function vo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function Ux(n,e,t,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,d=a.history,f=wi.Pop,m=null,v=w();v==null&&(v=0,d.replaceState(vl({},d.state,{idx:v}),""));function w(){return(d.state||{idx:null}).idx}function E(){f=wi.Pop;let W=w(),ie=W==null?null:W-v;v=W,m&&m({action:f,location:te.location,delta:ie})}function C(W,ie){f=wi.Push;let se=Xh(te.location,W,ie);v=w()+1;let oe=Wg(se,v),me=te.createHref(se);try{d.pushState(oe,"",me)}catch(we){if(we instanceof DOMException&&we.name==="DataCloneError")throw we;a.location.assign(me)}l&&m&&m({action:f,location:te.location,delta:1})}function $(W,ie){f=wi.Replace;let se=Xh(te.location,W,ie);v=w();let oe=Wg(se,v),me=te.createHref(se);d.replaceState(oe,"",me),l&&m&&m({action:f,location:te.location,delta:0})}function Q(W){let ie=a.location.origin!=="null"?a.location.origin:a.location.href,se=typeof W=="string"?W:yu(W);return se=se.replace(/ $/,"%20"),zt(ie,"No window.location.(origin|href) available to create URL for href: "+se),new URL(se,ie)}let te={get action(){return f},get location(){return n(a,d)},listen(W){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener($g,E),m=W,()=>{a.removeEventListener($g,E),m=null}},createHref(W){return e(a,W)},createURL:Q,encodeLocation(W){let ie=Q(W);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:C,replace:$,go(W){return d.go(W)}};return te}var Hg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Hg||(Hg={}));function zx(n,e,t){return t===void 0&&(t="/"),Bx(n,e,t)}function Bx(n,e,t,s){let a=typeof e=="string"?vo(e):e,l=Nf(a.pathname||"/",t);if(l==null)return null;let d=Ov(n);$x(d);let f=null;for(let m=0;f==null&&m<d.length;++m){let v=tE(l);f=Xx(d[m],v)}return f}function Ov(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let a=(l,d,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};m.relativePath.startsWith("/")&&(zt(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let v=Ei([s,m.relativePath]),w=t.concat(m);l.children&&l.children.length>0&&(zt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Ov(l.children,e,w,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:Yx(v,l.index),routesMeta:w})};return n.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,d);else for(let m of Mv(l.path))a(l,d,m)}),e}function Mv(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let d=Mv(s.join("/")),f=[];return f.push(...d.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...d),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function $x(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Jx(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const Wx=/^:[\w-]+$/,Hx=3,qx=2,Gx=1,Kx=10,Qx=-2,qg=n=>n==="*";function Yx(n,e){let t=n.split("/"),s=t.length;return t.some(qg)&&(s+=Qx),e&&(s+=qx),t.filter(a=>!qg(a)).reduce((a,l)=>a+(Wx.test(l)?Hx:l===""?Gx:Kx),s)}function Jx(n,e){return n.length===e.length&&n.slice(0,-1).every((s,a)=>s===e[a])?n[n.length-1]-e[e.length-1]:0}function Xx(n,e,t){let{routesMeta:s}=n,a={},l="/",d=[];for(let f=0;f<s.length;++f){let m=s[f],v=f===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",E=Zx({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},w),C=m.route;if(!E)return null;Object.assign(a,E.params),d.push({params:a,pathname:Ei([l,E.pathname]),pathnameBase:aE(Ei([l,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(l=Ei([l,E.pathnameBase]))}return d}function Zx(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=eE(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],d=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:s.reduce((v,w,E)=>{let{paramName:C,isOptional:$}=w;if(C==="*"){let te=f[E]||"";d=l.slice(0,l.length-te.length).replace(/(.)\/+$/,"$1")}const Q=f[E];return $&&!Q?v[C]=void 0:v[C]=(Q||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:n}}function eE(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Af(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,m)=>(s.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function tE(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Af(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Nf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const nE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rE=n=>nE.test(n);function sE(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:a=""}=typeof n=="string"?vo(n):n,l;if(t)if(rE(t))l=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),Af(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+t))}t.startsWith("/")?l=Gg(t.substring(1),"/"):l=Gg(t,e)}else l=e;return{pathname:l,search:oE(s),hash:lE(a)}}function Gg(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Oh(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function kf(n,e){let t=iE(n);return e?t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function jf(n,e,t,s){s===void 0&&(s=!1);let a;typeof n=="string"?a=vo(n):(a=vl({},n),zt(!a.pathname||!a.pathname.includes("?"),Oh("?","pathname","search",a)),zt(!a.pathname||!a.pathname.includes("#"),Oh("#","pathname","hash",a)),zt(!a.search||!a.search.includes("#"),Oh("#","search","hash",a)));let l=n===""||a.pathname==="",d=l?"/":a.pathname,f;if(d==null)f=t;else{let E=e.length-1;if(!s&&d.startsWith("..")){let C=d.split("/");for(;C[0]==="..";)C.shift(),E-=1;a.pathname=C.join("/")}f=E>=0?e[E]:"/"}let m=sE(a,f),v=d&&d!=="/"&&d.endsWith("/"),w=(l||d===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(v||w)&&(m.pathname+="/"),m}const Ei=n=>n.join("/").replace(/\/\/+/g,"/"),aE=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),oE=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,lE=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function cE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Fv=["post","put","patch","delete"];new Set(Fv);const uE=["get",...Fv];new Set(uE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _l(){return _l=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},_l.apply(this,arguments)}const Df=L.createContext(null),dE=L.createContext(null),Li=L.createContext(null),Mu=L.createContext(null),Oi=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Uv=L.createContext(null);function hE(n,e){let{relative:t}=e===void 0?{}:e;_o()||zt(!1);let{basename:s,navigator:a}=L.useContext(Li),{hash:l,pathname:d,search:f}=Bv(n,{relative:t}),m=d;return s!=="/"&&(m=d==="/"?s:Ei([s,d])),a.createHref({pathname:m,search:f,hash:l})}function _o(){return L.useContext(Mu)!=null}function bl(){return _o()||zt(!1),L.useContext(Mu).location}function zv(n){L.useContext(Li).static||L.useLayoutEffect(n)}function Fu(){let{isDataRoute:n}=L.useContext(Oi);return n?IE():fE()}function fE(){_o()||zt(!1);let n=L.useContext(Df),{basename:e,future:t,navigator:s}=L.useContext(Li),{matches:a}=L.useContext(Oi),{pathname:l}=bl(),d=JSON.stringify(kf(a,t.v7_relativeSplatPath)),f=L.useRef(!1);return zv(()=>{f.current=!0}),L.useCallback(function(v,w){if(w===void 0&&(w={}),!f.current)return;if(typeof v=="number"){s.go(v);return}let E=jf(v,JSON.parse(d),l,w.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ei([e,E.pathname])),(w.replace?s.replace:s.push)(E,w.state,w)},[e,s,d,l,n])}function Bv(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=L.useContext(Li),{matches:a}=L.useContext(Oi),{pathname:l}=bl(),d=JSON.stringify(kf(a,s.v7_relativeSplatPath));return L.useMemo(()=>jf(n,JSON.parse(d),l,t==="path"),[n,d,l,t])}function pE(n,e){return mE(n,e)}function mE(n,e,t,s){_o()||zt(!1);let{navigator:a}=L.useContext(Li),{matches:l}=L.useContext(Oi),d=l[l.length-1],f=d?d.params:{};d&&d.pathname;let m=d?d.pathnameBase:"/";d&&d.route;let v=bl(),w;if(e){var E;let W=typeof e=="string"?vo(e):e;m==="/"||(E=W.pathname)!=null&&E.startsWith(m)||zt(!1),w=W}else w=v;let C=w.pathname||"/",$=C;if(m!=="/"){let W=m.replace(/^\//,"").split("/");$="/"+C.replace(/^\//,"").split("/").slice(W.length).join("/")}let Q=zx(n,{pathname:$}),te=wE(Q&&Q.map(W=>Object.assign({},W,{params:Object.assign({},f,W.params),pathname:Ei([m,a.encodeLocation?a.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?m:Ei([m,a.encodeLocation?a.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),l,t,s);return e&&te?L.createElement(Mu.Provider,{value:{location:_l({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:wi.Pop}},te):te}function gE(){let n=SE(),e=cE(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:a},t):null,null)}const yE=L.createElement(gE,null);class vE extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?L.createElement(Oi.Provider,{value:this.props.routeContext},L.createElement(Uv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _E(n){let{routeContext:e,match:t,children:s}=n,a=L.useContext(Df);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(Oi.Provider,{value:e},s)}function wE(n,e,t,s){var a;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let d=n,f=(a=t)==null?void 0:a.errors;if(f!=null){let w=d.findIndex(E=>E.route.id&&(f==null?void 0:f[E.route.id])!==void 0);w>=0||zt(!1),d=d.slice(0,Math.min(d.length,w+1))}let m=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<d.length;w++){let E=d[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(v=w),E.route.id){let{loaderData:C,errors:$}=t,Q=E.route.loader&&C[E.route.id]===void 0&&(!$||$[E.route.id]===void 0);if(E.route.lazy||Q){m=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((w,E,C)=>{let $,Q=!1,te=null,W=null;t&&($=f&&E.route.id?f[E.route.id]:void 0,te=E.route.errorElement||yE,m&&(v<0&&C===0?(CE("route-fallback"),Q=!0,W=null):v===C&&(Q=!0,W=E.route.hydrateFallbackElement||null)));let ie=e.concat(d.slice(0,C+1)),se=()=>{let oe;return $?oe=te:Q?oe=W:E.route.Component?oe=L.createElement(E.route.Component,null):E.route.element?oe=E.route.element:oe=w,L.createElement(_E,{match:E,routeContext:{outlet:w,matches:ie,isDataRoute:t!=null},children:oe})};return t&&(E.route.ErrorBoundary||E.route.errorElement||C===0)?L.createElement(vE,{location:t.location,revalidation:t.revalidation,component:te,error:$,children:se(),routeContext:{outlet:null,matches:ie,isDataRoute:!0}}):se()},null)}var $v=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})($v||{}),Wv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Wv||{});function xE(n){let e=L.useContext(Df);return e||zt(!1),e}function EE(n){let e=L.useContext(dE);return e||zt(!1),e}function TE(n){let e=L.useContext(Oi);return e||zt(!1),e}function Hv(n){let e=TE(),t=e.matches[e.matches.length-1];return t.route.id||zt(!1),t.route.id}function SE(){var n;let e=L.useContext(Uv),t=EE(),s=Hv();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function IE(){let{router:n}=xE($v.UseNavigateStable),e=Hv(Wv.UseNavigateStable),t=L.useRef(!1);return zv(()=>{t.current=!0}),L.useCallback(function(a,l){l===void 0&&(l={}),t.current&&(typeof a=="number"?n.navigate(a):n.navigate(a,_l({fromRouteId:e},l)))},[n,e])}const Kg={};function CE(n,e,t){Kg[n]||(Kg[n]=!0)}function PE(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function RE(n){let{to:e,replace:t,state:s,relative:a}=n;_o()||zt(!1);let{future:l,static:d}=L.useContext(Li),{matches:f}=L.useContext(Oi),{pathname:m}=bl(),v=Fu(),w=jf(e,kf(f,l.v7_relativeSplatPath),m,a==="path"),E=JSON.stringify(w);return L.useEffect(()=>v(JSON.parse(E),{replace:t,state:s,relative:a}),[v,E,a,t,s]),null}function Br(n){zt(!1)}function bE(n){let{basename:e="/",children:t=null,location:s,navigationType:a=wi.Pop,navigator:l,static:d=!1,future:f}=n;_o()&&zt(!1);let m=e.replace(/^\/*/,"/"),v=L.useMemo(()=>({basename:m,navigator:l,static:d,future:_l({v7_relativeSplatPath:!1},f)}),[m,f,l,d]);typeof s=="string"&&(s=vo(s));let{pathname:w="/",search:E="",hash:C="",state:$=null,key:Q="default"}=s,te=L.useMemo(()=>{let W=Nf(w,m);return W==null?null:{location:{pathname:W,search:E,hash:C,state:$,key:Q},navigationType:a}},[m,w,E,C,$,Q,a]);return te==null?null:L.createElement(Li.Provider,{value:v},L.createElement(Mu.Provider,{children:t,value:te}))}function AE(n){let{children:e,location:t}=n;return pE(Zh(e),t)}new Promise(()=>{});function Zh(n,e){e===void 0&&(e=[]);let t=[];return L.Children.forEach(n,(s,a)=>{if(!L.isValidElement(s))return;let l=[...e,a];if(s.type===L.Fragment){t.push.apply(t,Zh(s.props.children,l));return}s.type!==Br&&zt(!1),!s.props.index||!s.props.children||zt(!1);let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Zh(s.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ef(){return ef=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ef.apply(this,arguments)}function NE(n,e){if(n==null)return{};var t={},s=Object.keys(n),a,l;for(l=0;l<s.length;l++)a=s[l],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}function kE(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function jE(n,e){return n.button===0&&(!e||e==="_self")&&!kE(n)}const DE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VE="6";try{window.__reactRouterVersion=VE}catch{}const LE="startTransition",Qg=Nx[LE];function OE(n){let{basename:e,children:t,future:s,window:a}=n,l=L.useRef();l.current==null&&(l.current=Mx({window:a,v5Compat:!0}));let d=l.current,[f,m]=L.useState({action:d.action,location:d.location}),{v7_startTransition:v}=s||{},w=L.useCallback(E=>{v&&Qg?Qg(()=>m(E)):m(E)},[m,v]);return L.useLayoutEffect(()=>d.listen(w),[d,w]),L.useEffect(()=>PE(s),[s]),L.createElement(bE,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:d,future:s})}const ME=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ia=L.forwardRef(function(e,t){let{onClick:s,relative:a,reloadDocument:l,replace:d,state:f,target:m,to:v,preventScrollReset:w,viewTransition:E}=e,C=NE(e,DE),{basename:$}=L.useContext(Li),Q,te=!1;if(typeof v=="string"&&FE.test(v)&&(Q=v,ME))try{let oe=new URL(window.location.href),me=v.startsWith("//")?new URL(oe.protocol+v):new URL(v),we=Nf(me.pathname,$);me.origin===oe.origin&&we!=null?v=we+me.search+me.hash:te=!0}catch{}let W=hE(v,{relative:a}),ie=UE(v,{replace:d,state:f,target:m,preventScrollReset:w,relative:a,viewTransition:E});function se(oe){s&&s(oe),oe.defaultPrevented||ie(oe)}return L.createElement("a",ef({},C,{href:Q||W,onClick:te||l?s:se,ref:t,target:m}))});var Yg;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Yg||(Yg={}));var Jg;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Jg||(Jg={}));function UE(n,e){let{target:t,replace:s,state:a,preventScrollReset:l,relative:d,viewTransition:f}=e===void 0?{}:e,m=Fu(),v=bl(),w=Bv(n,{relative:d});return L.useCallback(E=>{if(jE(E,t)){E.preventDefault();let C=s!==void 0?s:yu(v)===yu(w);m(n,{replace:C,state:a,preventScrollReset:l,relative:d,viewTransition:f})}},[v,m,w,s,a,t,n,l,d,f])}const zE=()=>{};var Xg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},BE=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],d=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],d=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Gv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],d=a+1<n.length,f=d?n[a+1]:0,m=a+2<n.length,v=m?n[a+2]:0,w=l>>2,E=(l&3)<<4|f>>4;let C=(f&15)<<2|v>>6,$=v&63;m||($=64,d||(C=64)),s.push(t[w],t[E],t[C],t[$])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(qv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BE(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const v=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||v==null||E==null)throw new $E;const C=l<<2|f>>4;if(s.push(C),v!==64){const $=f<<4&240|v>>2;if(s.push($),E!==64){const Q=v<<6&192|E;s.push(Q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $E extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WE=function(n){const e=qv(n);return Gv.encodeByteArray(e,!0)},vu=function(n){return WE(n).replace(/\./g,"")},Kv=function(n){try{return Gv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=()=>HE().__FIREBASE_DEFAULTS__,GE=()=>{if(typeof process>"u"||typeof Xg>"u")return;const n=Xg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KE=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Kv(n[1]);return e&&JSON.parse(e)},Uu=()=>{try{return zE()||qE()||GE()||KE()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qv=n=>{var e,t;return(t=(e=Uu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},QE=n=>{const e=Qv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Yv=()=>{var n;return(n=Uu())===null||n===void 0?void 0:n.config},Jv=n=>{var e;return(e=Uu())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[vu(JSON.stringify(t)),vu(JSON.stringify(d)),""].join(".")}const hl={};function XE(){const n={prod:[],emulator:[]};for(const e of Object.keys(hl))hl[e]?n.emulator.push(e):n.prod.push(e);return n}function ZE(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Zg=!1;function Zv(n,e){if(typeof window>"u"||typeof document>"u"||!wo(window.location.host)||hl[n]===e||hl[n]||Zg)return;hl[n]=e;function t(C){return`__firebase__banner__${C}`}const s="__firebase__banner",l=XE().prod.length>0;function d(){const C=document.getElementById(s);C&&C.remove()}function f(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function m(C,$){C.setAttribute("width","24"),C.setAttribute("id",$),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function v(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Zg=!0,d()},C}function w(C,$){C.setAttribute("id",$),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=ZE(s),$=t("text"),Q=document.getElementById($)||document.createElement("span"),te=t("learnmore"),W=document.getElementById(te)||document.createElement("a"),ie=t("preprendIcon"),se=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const oe=C.element;f(oe),w(W,te);const me=v();m(se,ie),oe.append(se,Q,W,me),document.body.appendChild(oe)}l?(Q.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function tT(){var n;const e=(n=Uu())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iT(){const n=Ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function aT(){return!tT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oT(){try{return typeof indexedDB=="object"}catch{return!1}}function lT(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="FirebaseError";class Ys extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=cT,Object.setPrototypeOf(this,Ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],d=l?uT(l,s):"Error",f=`${this.serviceName}: ${d} (${a}).`;return new Ys(a,f,s)}}function uT(n,e){return n.replace(dT,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const dT=/\{\$([^}]+)}/g;function hT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ua(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],d=e[a];if(ey(l)&&ey(d)){if(!ua(l,d))return!1}else if(l!==d)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function ey(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function il(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function al(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function fT(n,e){const t=new pT(n,e);return t.subscribe.bind(t)}class pT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");mT(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Mh),a.error===void 0&&(a.error=Mh),a.complete===void 0&&(a.complete=Mh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Mh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class da{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new YE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vT(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&d.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(a,l);const d=this.instances.get(a);return d&&e(d,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:yT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yT(n){return n===aa?void 0:n}function vT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const wT={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},xT=nt.INFO,ET={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},TT=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=ET[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vf{constructor(e){this.name=e,this._logLevel=xT,this._logHandler=TT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const ST=(n,e)=>e.some(t=>n instanceof t);let ty,ny;function IT(){return ty||(ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CT(){return ny||(ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e_=new WeakMap,tf=new WeakMap,t_=new WeakMap,Fh=new WeakMap,Lf=new WeakMap;function PT(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",d)},l=()=>{t(Ti(n.result)),a()},d=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&e_.set(t,n)}).catch(()=>{}),Lf.set(e,n),e}function RT(n){if(tf.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",d),n.removeEventListener("abort",d)},l=()=>{t(),a()},d=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",d),n.addEventListener("abort",d)});tf.set(n,e)}let nf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return tf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||t_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ti(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bT(n){nf=n(nf)}function AT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Uh(this),e,...t);return t_.set(s,e.sort?e.sort():[e]),Ti(s)}:CT().includes(n)?function(...e){return n.apply(Uh(this),e),Ti(e_.get(this))}:function(...e){return Ti(n.apply(Uh(this),e))}}function NT(n){return typeof n=="function"?AT(n):(n instanceof IDBTransaction&&RT(n),ST(n,IT())?new Proxy(n,nf):n)}function Ti(n){if(n instanceof IDBRequest)return PT(n);if(Fh.has(n))return Fh.get(n);const e=NT(n);return e!==n&&(Fh.set(n,e),Lf.set(e,n)),e}const Uh=n=>Lf.get(n);function kT(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const d=indexedDB.open(n,e),f=Ti(d);return s&&d.addEventListener("upgradeneeded",m=>{s(Ti(d.result),m.oldVersion,m.newVersion,Ti(d.transaction),m)}),t&&d.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const jT=["get","getKey","getAll","getAllKeys","count"],DT=["put","add","delete","clear"],zh=new Map;function ry(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zh.get(e))return zh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=DT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||jT.includes(t)))return;const l=async function(d,...f){const m=this.transaction(d,a?"readwrite":"readonly");let v=m.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),a&&m.done]))[0]};return zh.set(e,l),l}bT(n=>({...n,get:(e,t,s)=>ry(e,t)||n.get(e,t,s),has:(e,t)=>!!ry(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function LT(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rf="@firebase/app",sy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new Vf("@firebase/app"),OT="@firebase/app-compat",MT="@firebase/analytics-compat",FT="@firebase/analytics",UT="@firebase/app-check-compat",zT="@firebase/app-check",BT="@firebase/auth",$T="@firebase/auth-compat",WT="@firebase/database",HT="@firebase/data-connect",qT="@firebase/database-compat",GT="@firebase/functions",KT="@firebase/functions-compat",QT="@firebase/installations",YT="@firebase/installations-compat",JT="@firebase/messaging",XT="@firebase/messaging-compat",ZT="@firebase/performance",eS="@firebase/performance-compat",tS="@firebase/remote-config",nS="@firebase/remote-config-compat",rS="@firebase/storage",sS="@firebase/storage-compat",iS="@firebase/firestore",aS="@firebase/ai",oS="@firebase/firestore-compat",lS="firebase",cS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",uS={[rf]:"fire-core",[OT]:"fire-core-compat",[FT]:"fire-analytics",[MT]:"fire-analytics-compat",[zT]:"fire-app-check",[UT]:"fire-app-check-compat",[BT]:"fire-auth",[$T]:"fire-auth-compat",[WT]:"fire-rtdb",[HT]:"fire-data-connect",[qT]:"fire-rtdb-compat",[GT]:"fire-fn",[KT]:"fire-fn-compat",[QT]:"fire-iid",[YT]:"fire-iid-compat",[JT]:"fire-fcm",[XT]:"fire-fcm-compat",[ZT]:"fire-perf",[eS]:"fire-perf-compat",[tS]:"fire-rc",[nS]:"fire-rc-compat",[rS]:"fire-gcs",[sS]:"fire-gcs-compat",[iS]:"fire-fst",[oS]:"fire-fst-compat",[aS]:"fire-vertex","fire-js":"fire-js",[lS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Map,dS=new Map,af=new Map;function iy(n,e){try{n.container.addComponent(e)}catch(t){qs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ho(n){const e=n.name;if(af.has(e))return qs.debug(`There were multiple attempts to register component ${e}.`),!1;af.set(e,n);for(const t of _u.values())iy(t,n);for(const t of dS.values())iy(t,n);return!0}function Of(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Si=new Al("app","Firebase",hS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=cS;function n_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:sf,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw Si.create("bad-app-name",{appName:String(a)});if(t||(t=Yv()),!t)throw Si.create("no-options");const l=_u.get(a);if(l){if(ua(t,l.options)&&ua(s,l.config))return l;throw Si.create("duplicate-app",{appName:a})}const d=new _T(a);for(const m of af.values())d.addComponent(m);const f=new fS(t,s,d);return _u.set(a,f),f}function r_(n=sf){const e=_u.get(n);if(!e&&n===sf&&Yv())return n_();if(!e)throw Si.create("no-app",{appName:n});return e}function Ii(n,e,t){var s;let a=(s=uS[n])!==null&&s!==void 0?s:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qs.warn(f.join(" "));return}ho(new da(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="firebase-heartbeat-database",mS=1,wl="firebase-heartbeat-store";let Bh=null;function s_(){return Bh||(Bh=kT(pS,mS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Si.create("idb-open",{originalErrorMessage:n.message})})),Bh}async function gS(n){try{const t=(await s_()).transaction(wl),s=await t.objectStore(wl).get(i_(n));return await t.done,s}catch(e){if(e instanceof Ys)qs.warn(e.message);else{const t=Si.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qs.warn(t.message)}}}async function ay(n,e){try{const s=(await s_()).transaction(wl,"readwrite");await s.objectStore(wl).put(e,i_(n)),await s.done}catch(t){if(t instanceof Ys)qs.warn(t.message);else{const s=Si.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qs.warn(s.message)}}}function i_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=1024,vS=30;class _S{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=oy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>vS){const d=ES(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){qs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=oy(),{heartbeatsToSend:s,unsentEntries:a}=wS(this._heartbeatsCache.heartbeats),l=vu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return qs.warn(t),""}}}function oy(){return new Date().toISOString().substring(0,10)}function wS(n,e=yS){const t=[];let s=n.slice();for(const a of n){const l=t.find(d=>d.agent===a.agent);if(l){if(l.dates.push(a.date),ly(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),ly(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class xS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oT()?lT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ay(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ay(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function ly(n){return vu(JSON.stringify({version:2,heartbeats:n})).length}function ES(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(n){ho(new da("platform-logger",e=>new VT(e),"PRIVATE")),ho(new da("heartbeat",e=>new _S(e),"PRIVATE")),Ii(rf,sy,n),Ii(rf,sy,"esm2017"),Ii("fire-js","")}TS("");var SS="firebase",IS="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(SS,IS,"app");function Mf(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function a_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CS=a_,o_=new Al("auth","Firebase",a_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new Vf("@firebase/auth");function PS(n,...e){wu.logLevel<=nt.WARN&&wu.warn(`Auth (${xo}): ${n}`,...e)}function au(n,...e){wu.logLevel<=nt.ERROR&&wu.error(`Auth (${xo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(n,...e){throw Uf(n,...e)}function Wr(n,...e){return Uf(n,...e)}function Ff(n,e,t){const s=Object.assign(Object.assign({},CS()),{[e]:t});return new Al("auth","Firebase",s).create(e,{appName:n.name})}function Ws(n){return Ff(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RS(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ir(n,"argument-error"),Ff(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uf(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return o_.create(n,...e)}function Ue(n,e,...t){if(!n)throw Uf(e,...t)}function Bs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw au(e),new Error(e)}function Gs(n,e){n||Bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function bS(){return cy()==="http:"||cy()==="https:"}function cy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bS()||rT()||"connection"in navigator)?navigator.onLine:!0}function NS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gs(t>e,"Short delay should be less than long delay!"),this.isMobile=eT()||sT()}get(){return AS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n,e){Gs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DS=new kl(3e4,6e4);function Mi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Fi(n,e,t,s,a={}){return c_(n,a,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const f=Nl(Object.assign({key:n.config.apiKey},d)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const v=Object.assign({method:e,headers:m},l);return nT()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&wo(n.emulatorConfig.host)&&(v.credentials="include"),l_.fetch()(await u_(n,n.config.apiHost,t,f),v)})}async function c_(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},kS),e);try{const a=new LS(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Yc(n,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const f=l.ok?d.errorMessage:d.error.message,[m,v]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(n,"credential-already-in-use",d);if(m==="EMAIL_EXISTS")throw Yc(n,"email-already-in-use",d);if(m==="USER_DISABLED")throw Yc(n,"user-disabled",d);const w=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Ff(n,w,v);Ir(n,w)}}catch(a){if(a instanceof Ys)throw a;Ir(n,"network-request-failed",{message:String(a)})}}async function jl(n,e,t,s,a={}){const l=await Fi(n,e,t,s,a);return"mfaPendingCredential"in l&&Ir(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function u_(n,e,t,s){const a=`${e}${t}?${s}`,l=n,d=l.config.emulator?zf(n.config,a):`${n.config.apiScheme}://${a}`;return jS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function VS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Wr(this.auth,"network-request-failed")),DS.get())})}}function Yc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Wr(n,e,s);return a.customData._tokenResponse=t,a}function uy(n){return n!==void 0&&n.enterprise!==void 0}class OS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return VS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MS(n,e){return Fi(n,"GET","/v2/recaptchaConfig",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(n,e){return Fi(n,"POST","/v1/accounts:delete",e)}async function xu(n,e){return Fi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function US(n,e=!1){const t=xn(n),s=await t.getIdToken(e),a=Bf(s);Ue(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:fl($h(a.auth_time)),issuedAtTime:fl($h(a.iat)),expirationTime:fl($h(a.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function $h(n){return Number(n)*1e3}function Bf(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return au("JWT malformed, contained fewer than 3 sections"),null;try{const a=Kv(t);return a?JSON.parse(a):(au("Failed to decode base64 JWT payload"),null)}catch(a){return au("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function dy(n){const e=Bf(n);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ys&&zS(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function zS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fl(this.lastLoginAt),this.creationTime=fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(n){var e;const t=n.auth,s=await n.getIdToken(),a=await xl(n,xu(t,{idToken:s}));Ue(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?d_(l.providerUserInfo):[],f=WS(n.providerData,d),m=n.isAnonymous,v=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),w=m?v:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new lf(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(n,E)}async function $S(n){const e=xn(n);await Eu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WS(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function d_(n){return n.map(e=>{var{providerId:t}=e,s=Mf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(n,e){const t=await c_(n,{},async()=>{const s=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,d=await u_(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return n.emulatorConfig&&wo(n.emulatorConfig.host)&&(m.credentials="include"),l_.fetch()(d,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qS(n,e){return Fi(n,"POST","/v2/accounts:revokeToken",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=dy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await HS(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,d=new ao;return s&&(Ue(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),a&&(Ue(typeof a=="string","internal-error",{appName:e}),d.accessToken=a),l&&(Ue(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ao,this.toJSON())}_performRefresh(){return Bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n,e){Ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class $r{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,l=Mf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new lf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await xl(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return US(this,e)}reload(){return $S(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Eu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await xl(this,FS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,l,d,f,m,v,w;const E=(s=t.displayName)!==null&&s!==void 0?s:void 0,C=(a=t.email)!==null&&a!==void 0?a:void 0,$=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,Q=(d=t.photoURL)!==null&&d!==void 0?d:void 0,te=(f=t.tenantId)!==null&&f!==void 0?f:void 0,W=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,ie=(v=t.createdAt)!==null&&v!==void 0?v:void 0,se=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:oe,emailVerified:me,isAnonymous:we,providerData:he,stsTokenManager:V}=t;Ue(oe&&V,e,"internal-error");const R=ao.fromJSON(this.name,V);Ue(typeof oe=="string",e,"internal-error"),mi(E,e.name),mi(C,e.name),Ue(typeof me=="boolean",e,"internal-error"),Ue(typeof we=="boolean",e,"internal-error"),mi($,e.name),mi(Q,e.name),mi(te,e.name),mi(W,e.name),mi(ie,e.name),mi(se,e.name);const j=new $r({uid:oe,auth:e,email:C,emailVerified:me,displayName:E,isAnonymous:we,photoURL:Q,phoneNumber:$,tenantId:te,stsTokenManager:R,createdAt:ie,lastLoginAt:se});return he&&Array.isArray(he)&&(j.providerData=he.map(A=>Object.assign({},A))),W&&(j._redirectEventId=W),j}static async _fromIdTokenResponse(e,t,s=!1){const a=new ao;a.updateFromServerResponse(t);const l=new $r({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Eu(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Ue(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?d_(a.providerUserInfo):[],d=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new ao;f.updateFromIdToken(s);const m=new $r({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:d}),v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new lf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map;function $s(n){Gs(n instanceof Function,"Expected a class definition");let e=hy.get(n);return e?(Gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}h_.type="NONE";const fy=h_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n,e,t){return`firebase:${n}:${e}:${t}`}class oo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=ou(this.userKey,a.apiKey,l),this.fullPersistenceKey=ou("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xu(this.auth,{idToken:e}).catch(()=>{});return t?$r._fromGetAccountInfoResponse(this.auth,t,e):null}return $r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new oo($s(fy),e,s);const a=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=a[0]||$s(fy);const d=ou(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const w=await v._get(d);if(w){let E;if(typeof w=="string"){const C=await xu(e,{idToken:w}).catch(()=>{});if(!C)break;E=await $r._fromGetAccountInfoResponse(e,C,w)}else E=$r._fromJSON(e,w);v!==l&&(f=E),l=v;break}}catch{}const m=a.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new oo(l,e,s):(l=m[0],f&&await l._set(d,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new oo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v_(e))return"Blackberry";if(__(e))return"Webos";if(p_(e))return"Safari";if((e.includes("chrome/")||m_(e))&&!e.includes("edge/"))return"Chrome";if(y_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function f_(n=Ln()){return/firefox\//i.test(n)}function p_(n=Ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m_(n=Ln()){return/crios\//i.test(n)}function g_(n=Ln()){return/iemobile/i.test(n)}function y_(n=Ln()){return/android/i.test(n)}function v_(n=Ln()){return/blackberry/i.test(n)}function __(n=Ln()){return/webos/i.test(n)}function $f(n=Ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function GS(n=Ln()){var e;return $f(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KS(){return iT()&&document.documentMode===10}function w_(n=Ln()){return $f(n)||y_(n)||__(n)||v_(n)||/windows phone/i.test(n)||g_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n,e=[]){let t;switch(n){case"Browser":t=py(Ln());break;case"Worker":t=`${py(Ln())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,f)=>{try{const m=e(l);d(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(n,e={}){return Fi(n,"GET","/v2/passwordPolicy",Mi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=6;class XS{constructor(e){var t,s,a,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:JS,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,l,d,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(d=m.containsNumericCharacter)!==null&&d!==void 0?d:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new my(this),this.idTokenSubscription=new my(this),this.beforeStateQueue=new QS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$s(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await oo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xu(this,{idToken:e}),s=await $r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(dr(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!d||d===f)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(d){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Eu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(Ws(this));const t=e?xn(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YS(this),t=new XS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Al("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await qS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$s(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await oo.create(this,[$s(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(f,this,"internal-error"),f.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,a);return()=>{d=!0,m()}}else{const m=e.addObserver(t);return()=>{d=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&PS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ui(n){return xn(n)}class my{constructor(e){this.auth=e,this.observer=null,this.addObserver=fT(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e1(n){zu=n}function E_(n){return zu.loadJS(n)}function t1(){return zu.recaptchaEnterpriseScript}function n1(){return zu.gapiScript}function r1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class s1{constructor(){this.enterprise=new i1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class i1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const a1="recaptcha-enterprise",T_="NO_RECAPTCHA";class o1{constructor(e){this.type=a1,this.auth=Ui(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,f)=>{MS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new OS(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(m=>{f(m)})})}function a(l,d,f){const m=window.grecaptcha;uy(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(T_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new s1().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{s(this.auth).then(f=>{if(!t&&uy(window.grecaptcha))a(f,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let m=t1();m.length!==0&&(m+=f),E_(m).then(()=>{a(f,l,d)}).catch(v=>{d(v)})}}).catch(f=>{d(f)})})}}async function gy(n,e,t,s=!1,a=!1){const l=new o1(n);let d;if(a)d=T_;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function cf(n,e,t,s,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await gy(n,e,t,t==="getOobCode");return s(n,d)}else return s(n,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await gy(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(n,e){const t=Of(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ua(l,e??{}))return a;Ir(a,"already-initialized")}return t.initialize({options:e})}function c1(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map($s);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function u1(n,e,t){const s=Ui(n);Ue(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=S_(e),{host:d,port:f}=d1(e),m=f===null?"":`:${f}`,v={url:`${l}//${d}${m}/`},w=Object.freeze({host:d,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Ue(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ue(ua(v,s.config.emulator)&&ua(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,wo(d)?(Xv(`${l}//${d}${m}`),Zv("Auth",!0)):h1()}function S_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function d1(n){const e=S_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:yy(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:yy(d)}}}function yy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function h1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bs("not implemented")}_getIdTokenResponse(e){return Bs("not implemented")}_linkToIdToken(e,t){return Bs("not implemented")}_getReauthenticationResolver(e){return Bs("not implemented")}}async function f1(n,e){return Fi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(n,e){return jl(n,"POST","/v1/accounts:signInWithPassword",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(n,e){return jl(n,"POST","/v1/accounts:signInWithEmailLink",Mi(n,e))}async function g1(n,e){return jl(n,"POST","/v1/accounts:signInWithEmailLink",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Wf{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new El(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new El(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cf(e,t,"signInWithPassword",p1);case"emailLink":return m1(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cf(e,s,"signUpPassword",f1);case"emailLink":return g1(e,{idToken:t,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(n,e){return jl(n,"POST","/v1/accounts:signInWithIdp",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="http://localhost";class ha extends Wf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,l=Mf(t,["providerId","signInMethod"]);if(!s||!a)return null;const d=new ha(s,a);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return lo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,lo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,lo(e,t)}buildRequest(){const e={requestUri:y1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _1(n){const e=il(al(n)).link,t=e?il(al(e)).deep_link_id:null,s=il(al(n)).deep_link_id;return(s?il(al(s)).link:null)||s||t||e||n}class Hf{constructor(e){var t,s,a,l,d,f;const m=il(al(e)),v=(t=m.apiKey)!==null&&t!==void 0?t:null,w=(s=m.oobCode)!==null&&s!==void 0?s:null,E=v1((a=m.mode)!==null&&a!==void 0?a:null);Ue(v&&w&&E,"argument-error"),this.apiKey=v,this.operation=E,this.code=w,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=m.lang)!==null&&d!==void 0?d:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=_1(e);try{return new Hf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.providerId=Eo.PROVIDER_ID}static credential(e,t){return El._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Hf.parseLink(t);return Ue(s,"argument-error"),El._fromEmailAndCode(e,s.code,s.tenantId)}}Eo.PROVIDER_ID="password";Eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends qf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Dl{constructor(){super("facebook.com")}static credential(e){return ha._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ha._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ds.credential(t,s)}catch{return null}}}ds.GOOGLE_SIGN_IN_METHOD="google.com";ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Dl{constructor(){super("github.com")}static credential(e){return ha._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Dl{constructor(){super("twitter.com")}static credential(e,t){return ha._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return vi.credential(t,s)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(n,e){return jl(n,"POST","/v1/accounts:signUp",Mi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await $r._fromIdTokenResponse(e,s,a),d=vy(s);return new fa({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=vy(s);return new fa({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function vy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends Ys{constructor(e,t,s,a){var l;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Tu.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Tu(e,t,s,a)}}function I_(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Tu._fromErrorAndOperation(n,l,e,s):l})}async function x1(n,e,t=!1){const s=await xl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fa._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(n,e,t=!1){const{auth:s}=n;if(dr(s.app))return Promise.reject(Ws(s));const a="reauthenticate";try{const l=await xl(n,I_(s,a,e,n),t);Ue(l.idToken,s,"internal-error");const d=Bf(l.idToken);Ue(d,s,"internal-error");const{sub:f}=d;return Ue(n.uid===f,s,"user-mismatch"),fa._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ir(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C_(n,e,t=!1){if(dr(n.app))return Promise.reject(Ws(n));const s="signIn",a=await I_(n,s,e),l=await fa._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function T1(n,e){return C_(Ui(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(n){const e=Ui(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function S1(n,e,t){if(dr(n.app))return Promise.reject(Ws(n));const s=Ui(n),d=await cf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w1).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&P_(n),m}),f=await fa._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function R_(n,e,t){return dr(n.app)?Promise.reject(Ws(n)):T1(xn(n),Eo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&P_(n),s})}function I1(n,e,t,s){return xn(n).onIdTokenChanged(e,t,s)}function C1(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}function P1(n,e,t,s){return xn(n).onAuthStateChanged(e,t,s)}function b_(n){return xn(n).signOut()}const Su="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Su,"1"),this.storage.removeItem(Su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=1e3,b1=10;class N_ extends A_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,m)=>{this.notifyListeners(d,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);KS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,b1):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},R1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}N_.type="LOCAL";const A1=N_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends A_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}k_.type="SESSION";const j_=k_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Bu(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,d=this.handlersMap[a];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(d).map(async v=>v(t.origin,l)),m=await N1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,d;return new Promise((f,m)=>{const v=Gf("",20);a.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},s);d={messageChannel:a,onMessage(E){const C=E;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(C.data.response);break;default:clearTimeout(w),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(d),a.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[a.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(){return window}function j1(n){fs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){return typeof fs().WorkerGlobalScope<"u"&&typeof fs().importScripts=="function"}async function D1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V1(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function L1(){return D_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="firebaseLocalStorageDb",O1=1,Iu="firebaseLocalStorage",L_="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $u(n,e){return n.transaction([Iu],e?"readwrite":"readonly").objectStore(Iu)}function M1(){const n=indexedDB.deleteDatabase(V_);return new Vl(n).toPromise()}function uf(){const n=indexedDB.open(V_,O1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Iu,{keyPath:L_})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Iu)?e(s):(s.close(),await M1(),e(await uf()))})})}async function _y(n,e,t){const s=$u(n,!0).put({[L_]:e,value:t});return new Vl(s).toPromise()}async function F1(n,e){const t=$u(n,!1).get(e),s=await new Vl(t).toPromise();return s===void 0?null:s.value}function wy(n,e){const t=$u(n,!0).delete(e);return new Vl(t).toPromise()}const U1=800,z1=3;class O_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>z1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return D_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bu._getInstance(L1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await D1(),!this.activeServiceWorker)return;this.sender=new k1(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uf();return await _y(e,Su,"1"),await wy(e,Su),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>_y(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>F1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=$u(a,!1).getAll();return new Vl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}O_.type="LOCAL";const B1=O_;new kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(n,e){return e?$s(e):(Ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends Wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $1(n){return C_(n.auth,new Kf(n),n.bypassAuthState)}function W1(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),E1(t,new Kf(n),n.bypassAuthState)}async function H1(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),x1(t,new Kf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:d,type:f}=e;if(d){this.reject(d);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $1;case"linkViaPopup":case"linkViaRedirect":return H1;case"reauthViaPopup":case"reauthViaRedirect":return W1;default:Ir(this.auth,"internal-error")}}resolve(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=new kl(2e3,1e4);async function U_(n,e,t){if(dr(n.app))return Promise.reject(Wr(n,"operation-not-supported-in-this-environment"));const s=Ui(n);RS(n,e,qf);const a=M_(s,t);return new oa(s,"signInViaPopup",e,a).executeNotNull()}class oa extends F_{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Gs(this.filter.length===1,"Popup operations only handle one event");const e=Gf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q1.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="pendingRedirect",lu=new Map;class K1 extends F_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=lu.get(this.auth._key());if(!e){try{const s=await Q1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}lu.set(this.auth._key(),e)}return this.bypassAuthState||lu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q1(n,e){const t=X1(e),s=J1(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function Y1(n,e){lu.set(n._key(),e)}function J1(n){return $s(n._redirectPersistence)}function X1(n){return ou(G1,n.config.apiKey,n.name)}async function Z1(n,e,t=!1){if(dr(n.app))return Promise.reject(Ws(n));const s=Ui(n),a=M_(s,e),d=await new K1(s,a,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=600*1e3;class tI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!z_(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Wr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eI&&this.cachedEventUids.clear(),this.cachedEventUids.has(xy(e))}saveEventToCache(e){this.cachedEventUids.add(xy(e)),this.lastProcessedEventTime=Date.now()}}function xy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function z_({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rI(n,e={}){return Fi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iI=/^https?/;async function aI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rI(n);for(const t of e)try{if(oI(t))return}catch{}Ir(n,"unauthorized-domain")}function oI(n){const e=of(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!iI.test(t))return!1;if(sI.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new kl(3e4,6e4);function Ey(){const n=fs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cI(n){return new Promise((e,t)=>{var s,a,l;function d(){Ey(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ey(),t(Wr(n,"network-request-failed"))},timeout:lI.get()})}if(!((a=(s=fs().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=fs().gapi)===null||l===void 0)&&l.load)d();else{const f=r1("iframefcb");return fs()[f]=()=>{gapi.load?d():t(Wr(n,"network-request-failed"))},E_(`${n1()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw cu=null,e})}let cu=null;function uI(n){return cu=cu||cI(n),cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new kl(5e3,15e3),hI="__/auth/iframe",fI="emulator/auth/iframe",pI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gI(n){const e=n.config;Ue(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zf(e,fI):`https://${n.config.authDomain}/${hI}`,s={apiKey:e.apiKey,appName:n.name,v:xo},a=mI.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Nl(s).slice(1)}`}async function yI(n){const e=await uI(n),t=fs().gapi;return Ue(t,n,"internal-error"),e.open({where:document.body,url:gI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pI,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const d=Wr(n,"network-request-failed"),f=fs().setTimeout(()=>{l(d)},dI.get());function m(){fs().clearTimeout(f),a(s)}s.ping(m).then(m,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_I=500,wI=600,xI="_blank",EI="http://localhost";class Ty{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TI(n,e,t,s=_I,a=wI){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m=Object.assign(Object.assign({},vI),{width:s.toString(),height:a.toString(),top:l,left:d}),v=Ln().toLowerCase();t&&(f=m_(v)?xI:t),f_(v)&&(e=e||EI,m.scrollbars="yes");const w=Object.entries(m).reduce((C,[$,Q])=>`${C}${$}=${Q},`,"");if(GS(v)&&f!=="_self")return SI(e||"",f),new Ty(null);const E=window.open(e||"",f,w);Ue(E,n,"popup-blocked");try{E.focus()}catch{}return new Ty(E)}function SI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="__/auth/handler",CI="emulator/auth/handler",PI=encodeURIComponent("fac");async function Sy(n,e,t,s,a,l){Ue(n.config.authDomain,n,"auth-domain-config-required"),Ue(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:xo,eventId:a};if(e instanceof qf){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",hT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))d[w]=E}if(e instanceof Dl){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(d.scopes=w.join(","))}n.tenantId&&(d.tid=n.tenantId);const f=d;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const m=await n._getAppCheckToken(),v=m?`#${PI}=${encodeURIComponent(m)}`:"";return`${RI(n)}?${Nl(f).slice(1)}${v}`}function RI({config:n}){return n.emulator?zf(n,CI):`https://${n.authDomain}/${II}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="webStorageSupport";class bI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j_,this._completeRedirectFn=Z1,this._overrideRedirectResult=Y1}async _openPopup(e,t,s,a){var l;Gs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await Sy(e,t,s,of(),a);return TI(e,d,Gf())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await Sy(e,t,s,of(),a);return j1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Gs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await yI(e),s=new tI(e);return t.register("authEvent",a=>(Ue(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wh,{type:Wh},a=>{var l;const d=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Wh];d!==void 0&&t(!!d),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return w_()||p_()||$f()}}const AI=bI;var Iy="@firebase/auth",Cy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jI(n){ho(new da("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Ue(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:d,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x_(n)},v=new ZS(s,a,l,m);return c1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ho(new da("auth-internal",e=>{const t=Ui(e.getProvider("auth").getImmediate());return(s=>new NI(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(Iy,Cy,kI(n)),Ii(Iy,Cy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=300,VI=Jv("authIdTokenMaxAge")||DI;let Py=null;const LI=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>VI)return;const a=t==null?void 0:t.token;Py!==a&&(Py=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function OI(n=r_()){const e=Of(n,"auth");if(e.isInitialized())return e.getImmediate();const t=l1(n,{popupRedirectResolver:AI,persistence:[B1,A1,j_]}),s=Jv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=LI(l.toString());C1(t,d,()=>d(t.currentUser)),I1(t,f=>d(f))}}const a=Qv("auth");return a&&u1(t,`http://${a}`),t}function MI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}e1({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Wr("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",MI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jI("Browser");var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,B_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,R){function j(){}j.prototype=R.prototype,V.D=R.prototype,V.prototype=new j,V.prototype.constructor=V,V.C=function(A,M,P){for(var b=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)b[fe-2]=arguments[fe];return R.prototype[M].apply(A,b)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,R,j){j||(j=0);var A=Array(16);if(typeof R=="string")for(var M=0;16>M;++M)A[M]=R.charCodeAt(j++)|R.charCodeAt(j++)<<8|R.charCodeAt(j++)<<16|R.charCodeAt(j++)<<24;else for(M=0;16>M;++M)A[M]=R[j++]|R[j++]<<8|R[j++]<<16|R[j++]<<24;R=V.g[0],j=V.g[1],M=V.g[2];var P=V.g[3],b=R+(P^j&(M^P))+A[0]+3614090360&4294967295;R=j+(b<<7&4294967295|b>>>25),b=P+(M^R&(j^M))+A[1]+3905402710&4294967295,P=R+(b<<12&4294967295|b>>>20),b=M+(j^P&(R^j))+A[2]+606105819&4294967295,M=P+(b<<17&4294967295|b>>>15),b=j+(R^M&(P^R))+A[3]+3250441966&4294967295,j=M+(b<<22&4294967295|b>>>10),b=R+(P^j&(M^P))+A[4]+4118548399&4294967295,R=j+(b<<7&4294967295|b>>>25),b=P+(M^R&(j^M))+A[5]+1200080426&4294967295,P=R+(b<<12&4294967295|b>>>20),b=M+(j^P&(R^j))+A[6]+2821735955&4294967295,M=P+(b<<17&4294967295|b>>>15),b=j+(R^M&(P^R))+A[7]+4249261313&4294967295,j=M+(b<<22&4294967295|b>>>10),b=R+(P^j&(M^P))+A[8]+1770035416&4294967295,R=j+(b<<7&4294967295|b>>>25),b=P+(M^R&(j^M))+A[9]+2336552879&4294967295,P=R+(b<<12&4294967295|b>>>20),b=M+(j^P&(R^j))+A[10]+4294925233&4294967295,M=P+(b<<17&4294967295|b>>>15),b=j+(R^M&(P^R))+A[11]+2304563134&4294967295,j=M+(b<<22&4294967295|b>>>10),b=R+(P^j&(M^P))+A[12]+1804603682&4294967295,R=j+(b<<7&4294967295|b>>>25),b=P+(M^R&(j^M))+A[13]+4254626195&4294967295,P=R+(b<<12&4294967295|b>>>20),b=M+(j^P&(R^j))+A[14]+2792965006&4294967295,M=P+(b<<17&4294967295|b>>>15),b=j+(R^M&(P^R))+A[15]+1236535329&4294967295,j=M+(b<<22&4294967295|b>>>10),b=R+(M^P&(j^M))+A[1]+4129170786&4294967295,R=j+(b<<5&4294967295|b>>>27),b=P+(j^M&(R^j))+A[6]+3225465664&4294967295,P=R+(b<<9&4294967295|b>>>23),b=M+(R^j&(P^R))+A[11]+643717713&4294967295,M=P+(b<<14&4294967295|b>>>18),b=j+(P^R&(M^P))+A[0]+3921069994&4294967295,j=M+(b<<20&4294967295|b>>>12),b=R+(M^P&(j^M))+A[5]+3593408605&4294967295,R=j+(b<<5&4294967295|b>>>27),b=P+(j^M&(R^j))+A[10]+38016083&4294967295,P=R+(b<<9&4294967295|b>>>23),b=M+(R^j&(P^R))+A[15]+3634488961&4294967295,M=P+(b<<14&4294967295|b>>>18),b=j+(P^R&(M^P))+A[4]+3889429448&4294967295,j=M+(b<<20&4294967295|b>>>12),b=R+(M^P&(j^M))+A[9]+568446438&4294967295,R=j+(b<<5&4294967295|b>>>27),b=P+(j^M&(R^j))+A[14]+3275163606&4294967295,P=R+(b<<9&4294967295|b>>>23),b=M+(R^j&(P^R))+A[3]+4107603335&4294967295,M=P+(b<<14&4294967295|b>>>18),b=j+(P^R&(M^P))+A[8]+1163531501&4294967295,j=M+(b<<20&4294967295|b>>>12),b=R+(M^P&(j^M))+A[13]+2850285829&4294967295,R=j+(b<<5&4294967295|b>>>27),b=P+(j^M&(R^j))+A[2]+4243563512&4294967295,P=R+(b<<9&4294967295|b>>>23),b=M+(R^j&(P^R))+A[7]+1735328473&4294967295,M=P+(b<<14&4294967295|b>>>18),b=j+(P^R&(M^P))+A[12]+2368359562&4294967295,j=M+(b<<20&4294967295|b>>>12),b=R+(j^M^P)+A[5]+4294588738&4294967295,R=j+(b<<4&4294967295|b>>>28),b=P+(R^j^M)+A[8]+2272392833&4294967295,P=R+(b<<11&4294967295|b>>>21),b=M+(P^R^j)+A[11]+1839030562&4294967295,M=P+(b<<16&4294967295|b>>>16),b=j+(M^P^R)+A[14]+4259657740&4294967295,j=M+(b<<23&4294967295|b>>>9),b=R+(j^M^P)+A[1]+2763975236&4294967295,R=j+(b<<4&4294967295|b>>>28),b=P+(R^j^M)+A[4]+1272893353&4294967295,P=R+(b<<11&4294967295|b>>>21),b=M+(P^R^j)+A[7]+4139469664&4294967295,M=P+(b<<16&4294967295|b>>>16),b=j+(M^P^R)+A[10]+3200236656&4294967295,j=M+(b<<23&4294967295|b>>>9),b=R+(j^M^P)+A[13]+681279174&4294967295,R=j+(b<<4&4294967295|b>>>28),b=P+(R^j^M)+A[0]+3936430074&4294967295,P=R+(b<<11&4294967295|b>>>21),b=M+(P^R^j)+A[3]+3572445317&4294967295,M=P+(b<<16&4294967295|b>>>16),b=j+(M^P^R)+A[6]+76029189&4294967295,j=M+(b<<23&4294967295|b>>>9),b=R+(j^M^P)+A[9]+3654602809&4294967295,R=j+(b<<4&4294967295|b>>>28),b=P+(R^j^M)+A[12]+3873151461&4294967295,P=R+(b<<11&4294967295|b>>>21),b=M+(P^R^j)+A[15]+530742520&4294967295,M=P+(b<<16&4294967295|b>>>16),b=j+(M^P^R)+A[2]+3299628645&4294967295,j=M+(b<<23&4294967295|b>>>9),b=R+(M^(j|~P))+A[0]+4096336452&4294967295,R=j+(b<<6&4294967295|b>>>26),b=P+(j^(R|~M))+A[7]+1126891415&4294967295,P=R+(b<<10&4294967295|b>>>22),b=M+(R^(P|~j))+A[14]+2878612391&4294967295,M=P+(b<<15&4294967295|b>>>17),b=j+(P^(M|~R))+A[5]+4237533241&4294967295,j=M+(b<<21&4294967295|b>>>11),b=R+(M^(j|~P))+A[12]+1700485571&4294967295,R=j+(b<<6&4294967295|b>>>26),b=P+(j^(R|~M))+A[3]+2399980690&4294967295,P=R+(b<<10&4294967295|b>>>22),b=M+(R^(P|~j))+A[10]+4293915773&4294967295,M=P+(b<<15&4294967295|b>>>17),b=j+(P^(M|~R))+A[1]+2240044497&4294967295,j=M+(b<<21&4294967295|b>>>11),b=R+(M^(j|~P))+A[8]+1873313359&4294967295,R=j+(b<<6&4294967295|b>>>26),b=P+(j^(R|~M))+A[15]+4264355552&4294967295,P=R+(b<<10&4294967295|b>>>22),b=M+(R^(P|~j))+A[6]+2734768916&4294967295,M=P+(b<<15&4294967295|b>>>17),b=j+(P^(M|~R))+A[13]+1309151649&4294967295,j=M+(b<<21&4294967295|b>>>11),b=R+(M^(j|~P))+A[4]+4149444226&4294967295,R=j+(b<<6&4294967295|b>>>26),b=P+(j^(R|~M))+A[11]+3174756917&4294967295,P=R+(b<<10&4294967295|b>>>22),b=M+(R^(P|~j))+A[2]+718787259&4294967295,M=P+(b<<15&4294967295|b>>>17),b=j+(P^(M|~R))+A[9]+3951481745&4294967295,V.g[0]=V.g[0]+R&4294967295,V.g[1]=V.g[1]+(M+(b<<21&4294967295|b>>>11))&4294967295,V.g[2]=V.g[2]+M&4294967295,V.g[3]=V.g[3]+P&4294967295}s.prototype.u=function(V,R){R===void 0&&(R=V.length);for(var j=R-this.blockSize,A=this.B,M=this.h,P=0;P<R;){if(M==0)for(;P<=j;)a(this,V,P),P+=this.blockSize;if(typeof V=="string"){for(;P<R;)if(A[M++]=V.charCodeAt(P++),M==this.blockSize){a(this,A),M=0;break}}else for(;P<R;)if(A[M++]=V[P++],M==this.blockSize){a(this,A),M=0;break}}this.h=M,this.o+=R},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var R=1;R<V.length-8;++R)V[R]=0;var j=8*this.o;for(R=V.length-8;R<V.length;++R)V[R]=j&255,j/=256;for(this.u(V),V=Array(16),R=j=0;4>R;++R)for(var A=0;32>A;A+=8)V[j++]=this.g[R]>>>A&255;return V};function l(V,R){var j=f;return Object.prototype.hasOwnProperty.call(j,V)?j[V]:j[V]=R(V)}function d(V,R){this.h=R;for(var j=[],A=!0,M=V.length-1;0<=M;M--){var P=V[M]|0;A&&P==R||(j[M]=P,A=!1)}this.g=j}var f={};function m(V){return-128<=V&&128>V?l(V,function(R){return new d([R|0],0>R?-1:0)}):new d([V|0],0>V?-1:0)}function v(V){if(isNaN(V)||!isFinite(V))return E;if(0>V)return W(v(-V));for(var R=[],j=1,A=0;V>=j;A++)R[A]=V/j|0,j*=4294967296;return new d(R,0)}function w(V,R){if(V.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(V.charAt(0)=="-")return W(w(V.substring(1),R));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=v(Math.pow(R,8)),A=E,M=0;M<V.length;M+=8){var P=Math.min(8,V.length-M),b=parseInt(V.substring(M,M+P),R);8>P?(P=v(Math.pow(R,P)),A=A.j(P).add(v(b))):(A=A.j(j),A=A.add(v(b)))}return A}var E=m(0),C=m(1),$=m(16777216);n=d.prototype,n.m=function(){if(te(this))return-W(this).m();for(var V=0,R=1,j=0;j<this.g.length;j++){var A=this.i(j);V+=(0<=A?A:4294967296+A)*R,R*=4294967296}return V},n.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(Q(this))return"0";if(te(this))return"-"+W(this).toString(V);for(var R=v(Math.pow(V,6)),j=this,A="";;){var M=me(j,R).g;j=ie(j,M.j(R));var P=((0<j.g.length?j.g[0]:j.h)>>>0).toString(V);if(j=M,Q(j))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function Q(V){if(V.h!=0)return!1;for(var R=0;R<V.g.length;R++)if(V.g[R]!=0)return!1;return!0}function te(V){return V.h==-1}n.l=function(V){return V=ie(this,V),te(V)?-1:Q(V)?0:1};function W(V){for(var R=V.g.length,j=[],A=0;A<R;A++)j[A]=~V.g[A];return new d(j,~V.h).add(C)}n.abs=function(){return te(this)?W(this):this},n.add=function(V){for(var R=Math.max(this.g.length,V.g.length),j=[],A=0,M=0;M<=R;M++){var P=A+(this.i(M)&65535)+(V.i(M)&65535),b=(P>>>16)+(this.i(M)>>>16)+(V.i(M)>>>16);A=b>>>16,P&=65535,b&=65535,j[M]=b<<16|P}return new d(j,j[j.length-1]&-2147483648?-1:0)};function ie(V,R){return V.add(W(R))}n.j=function(V){if(Q(this)||Q(V))return E;if(te(this))return te(V)?W(this).j(W(V)):W(W(this).j(V));if(te(V))return W(this.j(W(V)));if(0>this.l($)&&0>V.l($))return v(this.m()*V.m());for(var R=this.g.length+V.g.length,j=[],A=0;A<2*R;A++)j[A]=0;for(A=0;A<this.g.length;A++)for(var M=0;M<V.g.length;M++){var P=this.i(A)>>>16,b=this.i(A)&65535,fe=V.i(M)>>>16,Ke=V.i(M)&65535;j[2*A+2*M]+=b*Ke,se(j,2*A+2*M),j[2*A+2*M+1]+=P*Ke,se(j,2*A+2*M+1),j[2*A+2*M+1]+=b*fe,se(j,2*A+2*M+1),j[2*A+2*M+2]+=P*fe,se(j,2*A+2*M+2)}for(A=0;A<R;A++)j[A]=j[2*A+1]<<16|j[2*A];for(A=R;A<2*R;A++)j[A]=0;return new d(j,0)};function se(V,R){for(;(V[R]&65535)!=V[R];)V[R+1]+=V[R]>>>16,V[R]&=65535,R++}function oe(V,R){this.g=V,this.h=R}function me(V,R){if(Q(R))throw Error("division by zero");if(Q(V))return new oe(E,E);if(te(V))return R=me(W(V),R),new oe(W(R.g),W(R.h));if(te(R))return R=me(V,W(R)),new oe(W(R.g),R.h);if(30<V.g.length){if(te(V)||te(R))throw Error("slowDivide_ only works with positive integers.");for(var j=C,A=R;0>=A.l(V);)j=we(j),A=we(A);var M=he(j,1),P=he(A,1);for(A=he(A,2),j=he(j,2);!Q(A);){var b=P.add(A);0>=b.l(V)&&(M=M.add(j),P=b),A=he(A,1),j=he(j,1)}return R=ie(V,M.j(R)),new oe(M,R)}for(M=E;0<=V.l(R);){for(j=Math.max(1,Math.floor(V.m()/R.m())),A=Math.ceil(Math.log(j)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=v(j),b=P.j(R);te(b)||0<b.l(V);)j-=A,P=v(j),b=P.j(R);Q(P)&&(P=C),M=M.add(P),V=ie(V,b)}return new oe(M,V)}n.A=function(V){return me(this,V).h},n.and=function(V){for(var R=Math.max(this.g.length,V.g.length),j=[],A=0;A<R;A++)j[A]=this.i(A)&V.i(A);return new d(j,this.h&V.h)},n.or=function(V){for(var R=Math.max(this.g.length,V.g.length),j=[],A=0;A<R;A++)j[A]=this.i(A)|V.i(A);return new d(j,this.h|V.h)},n.xor=function(V){for(var R=Math.max(this.g.length,V.g.length),j=[],A=0;A<R;A++)j[A]=this.i(A)^V.i(A);return new d(j,this.h^V.h)};function we(V){for(var R=V.g.length+1,j=[],A=0;A<R;A++)j[A]=V.i(A)<<1|V.i(A-1)>>>31;return new d(j,V.h)}function he(V,R){var j=R>>5;R%=32;for(var A=V.g.length-j,M=[],P=0;P<A;P++)M[P]=0<R?V.i(P+j)>>>R|V.i(P+j+1)<<32-R:V.i(P+j);return new d(M,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,B_=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=w,Ci=d}).apply(typeof Ry<"u"?Ry:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $_,ol,W_,uu,df,H_,q_,G_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function a(u,g){if(g)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var q=u[T];if(!(q in _))break e;_=_[q]}u=u[u.length-1],T=_[u],g=g(T),g!=T&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function l(u,g){u instanceof String&&(u+="");var _=0,T=!1,q={next:function(){if(!T&&_<u.length){var re=_++;return{value:g(re,u[re]),done:!1}}return T=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}a("Array.prototype.values",function(u){return u||function(){return l(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function m(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function v(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function w(u,g,_){return u.call.apply(u.bind,arguments)}function E(u,g,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,T),u.apply(g,q)}}return function(){return u.apply(g,arguments)}}function C(u,g,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:E,C.apply(null,arguments)}function $(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function Q(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,q,re){for(var _e=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)_e[gt-2]=arguments[gt];return g.prototype[q].apply(T,_e)}}function te(u){const g=u.length;if(0<g){const _=Array(g);for(let T=0;T<g;T++)_[T]=u[T];return _}return[]}function W(u,g){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(m(T)){const q=u.length||0,re=T.length||0;u.length=q+re;for(let _e=0;_e<re;_e++)u[q+_e]=T[_e]}else u.push(T)}}class ie{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function se(u){return/^[\s\xa0]*$/.test(u)}function oe(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function me(u){return me[" "](u),u}me[" "]=function(){};var we=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function he(u,g,_){for(const T in u)g.call(_,u[T],T,u)}function V(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function R(u){const g={};for(const _ in u)g[_]=u[_];return g}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,g){let _,T;for(let q=1;q<arguments.length;q++){T=arguments[q];for(_ in T)u[_]=T[_];for(let re=0;re<j.length;re++)_=j[re],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function M(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function P(u){f.setTimeout(()=>{throw u},0)}function b(){var u=z;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class fe{constructor(){this.h=this.g=null}add(g,_){const T=Ke.get();T.set(g,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Ke=new ie(()=>new et,u=>u.reset());class et{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let K,D=!1,z=new fe,ee=()=>{const u=f.Promise.resolve(void 0);K=()=>{u.then(k)}};var k=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(_){P(_)}var g=Ke;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}D=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ee=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,g),f.removeEventListener("test",_,g)}catch{}return u})();function Ce(u,g){if(ve.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(we){e:{try{me(g.nodeName);var q=!0;break e}catch{}q=!1}q||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Le[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}Q(Ce,ve);var Le={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),We=0;function st(u,g,_,T,q){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!T,this.ha=q,this.key=++We,this.da=this.fa=!1}function yt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function nn(u){this.src=u,this.g={},this.h=0}nn.prototype.add=function(u,g,_,T,q){var re=u.toString();u=this.g[re],u||(u=this.g[re]=[],this.h++);var _e=Tn(u,g,T,q);return-1<_e?(g=u[_e],_||(g.fa=!1)):(g=new st(g,this.src,re,!!T,q),g.fa=_,u.push(g)),g};function Bt(u,g){var _=g.type;if(_ in u.g){var T=u.g[_],q=Array.prototype.indexOf.call(T,g,void 0),re;(re=0<=q)&&Array.prototype.splice.call(T,q,1),re&&(yt(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Tn(u,g,_,T){for(var q=0;q<u.length;++q){var re=u[q];if(!re.da&&re.listener==g&&re.capture==!!_&&re.ha==T)return q}return-1}var tr="closure_lm_"+(1e6*Math.random()|0),tt={};function nr(u,g,_,T,q){if(Array.isArray(g)){for(var re=0;re<g.length;re++)nr(u,g[re],_,T,q);return null}return _=Gr(_),u&&u[$e]?u.K(g,_,v(T)?!!T.capture:!1,q):$t(u,g,_,!1,T,q)}function $t(u,g,_,T,q,re){if(!g)throw Error("Invalid event type");var _e=v(q)?!!q.capture:!!q,gt=Bn(u);if(gt||(u[tr]=gt=new nn(u)),_=gt.add(g,_,T,_e,re),_.proxy)return _;if(T=ws(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ee||(q=_e),q===void 0&&(q=!1),u.addEventListener(g.toString(),T,q);else if(u.attachEvent)u.attachEvent(In(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ws(){function u(_){return g.call(u.src,u.listener,_)}const g=rr;return u}function Sn(u,g,_,T,q){if(Array.isArray(g))for(var re=0;re<g.length;re++)Sn(u,g[re],_,T,q);else T=v(T)?!!T.capture:!!T,_=Gr(_),u&&u[$e]?(u=u.i,g=String(g).toString(),g in u.g&&(re=u.g[g],_=Tn(re,_,T,q),-1<_&&(yt(re[_]),Array.prototype.splice.call(re,_,1),re.length==0&&(delete u.g[g],u.h--)))):u&&(u=Bn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Tn(g,_,T,q)),(_=-1<u?g[u]:null)&&hn(_))}function hn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[$e])Bt(g.i,u);else{var _=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(_,T,u.capture):g.detachEvent?g.detachEvent(In(_),T):g.addListener&&g.removeListener&&g.removeListener(T),(_=Bn(g))?(Bt(_,u),_.h==0&&(_.src=null,g[tr]=null)):yt(u)}}}function In(u){return u in tt?tt[u]:tt[u]="on"+u}function rr(u,g){if(u.da)u=!0;else{g=new Ce(g,this);var _=u.listener,T=u.ha||u.src;u.fa&&hn(u),u=_.call(T,g)}return u}function Bn(u){return u=u[tr],u instanceof nn?u:null}var qr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gr(u){return typeof u=="function"?u:(u[qr]||(u[qr]=function(g){return u.handleEvent(g)}),u[qr])}function Pt(){H.call(this),this.i=new nn(this),this.M=this,this.F=null}Q(Pt,H),Pt.prototype[$e]=!0,Pt.prototype.removeEventListener=function(u,g,_,T){Sn(this,u,g,_,T)};function He(u,g){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new ve(g,u);else if(g instanceof ve)g.target=g.target||u;else{var q=g;g=new ve(T,u),A(g,q)}if(q=!0,_)for(var re=_.length-1;0<=re;re--){var _e=g.g=_[re];q=Cn(_e,T,!0,g)&&q}if(_e=g.g=u,q=Cn(_e,T,!0,g)&&q,q=Cn(_e,T,!1,g)&&q,_)for(re=0;re<_.length;re++)_e=g.g=_[re],q=Cn(_e,T,!1,g)&&q}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],T=0;T<_.length;T++)yt(_[T]);delete u.g[g],u.h--}}this.F=null},Pt.prototype.K=function(u,g,_,T){return this.i.add(String(u),g,!1,_,T)},Pt.prototype.L=function(u,g,_,T){return this.i.add(String(u),g,!0,_,T)};function Cn(u,g,_,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var q=!0,re=0;re<g.length;++re){var _e=g[re];if(_e&&!_e.da&&_e.capture==_){var gt=_e.listener,Jt=_e.ha||_e.src;_e.fa&&Bt(u.i,_e),q=gt.call(Jt,T)!==!1&&q}}return q&&!T.defaultPrevented}function xs(u,g,_){if(typeof u=="function")_&&(u=C(u,_));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:f.setTimeout(u,g||0)}function Pn(u){u.g=xs(()=>{u.g=null,u.i&&(u.i=!1,Pn(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Cr extends H{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Pn(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(u){H.call(this),this.h=u,this.g={}}Q(sr,H);var Es=[];function fn(u){he(u.g,function(g,_){this.g.hasOwnProperty(_)&&hn(g)},u),u.g={}}sr.prototype.N=function(){sr.aa.N.call(this),fn(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var On=f.JSON.stringify,fr=f.JSON.parse,Ts=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Lt(){}Lt.prototype.h=null;function Mt(u){return u.h||(u.h=u.i())}function rn(){}var I={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ne(){ve.call(this,"d")}Q(ne,ve);function le(){ve.call(this,"c")}Q(le,ve);var B={},Y=null;function Re(){return Y=Y||new Pt}B.La="serverreachability";function De(u){ve.call(this,B.La,u)}Q(De,ve);function ft(u){const g=Re();He(g,new De(g))}B.STAT_EVENT="statevent";function xe(u,g){ve.call(this,B.STAT_EVENT,u),this.stat=g}Q(xe,ve);function Ve(u){const g=Re();He(g,new xe(g,u))}B.Ma="timingevent";function Wt(u,g){ve.call(this,B.Ma,u),this.size=g}Q(Wt,ve);function sn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function an(){this.g=!0}an.prototype.xa=function(){this.g=!1};function Pr(u,g,_,T,q,re){u.info(function(){if(u.g)if(re)for(var _e="",gt=re.split("&"),Jt=0;Jt<gt.length;Jt++){var at=gt[Jt].split("=");if(1<at.length){var on=at[0];at=at[1];var Ht=on.split("_");_e=2<=Ht.length&&Ht[1]=="type"?_e+(on+"="+at+"&"):_e+(on+"=redacted&")}}else _e=null;else _e=re;return"XMLHTTP REQ ("+T+") [attempt "+q+"]: "+g+`
`+_+`
`+_e})}function Rr(u,g,_,T,q,re,_e){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+q+"]: "+g+`
`+_+`
`+re+" "+_e})}function pn(u,g,_,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+br(u,_)+(T?" "+T:"")})}function Ss(u,g){u.info(function(){return"TIMEOUT: "+g})}an.prototype.info=function(){};function br(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var q=T[1];if(Array.isArray(q)&&!(1>q.length)){var re=q[0];if(re!="noop"&&re!="stop"&&re!="close")for(var _e=1;_e<q.length;_e++)q[_e]=""}}}}return On(_)}catch{return g}}var Kr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ir;function Qr(){}Q(Qr,Lt),Qr.prototype.g=function(){return new XMLHttpRequest},Qr.prototype.i=function(){return{}},ir=new Qr;function it(u,g,_,T){this.j=u,this.i=g,this.l=_,this.R=T||1,this.U=new sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yr}function Yr(){this.i=null,this.g="",this.h=!1}var $n={},Is={};function Cs(u,g,_){u.L=1,u.v=Zr(vt(g)),u.m=_,u.P=!0,Js(u,null)}function Js(u,g){u.F=Date.now(),pt(u),u.A=vt(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Xs(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Yr,u.g=ec(u.j,_?g:null,!u.m),0<u.O&&(u.M=new Cr(C(u.Y,u,u.g),u.O)),g=u.U,_=u.g,T=u.ca;var q="readystatechange";Array.isArray(q)||(q&&(Es[0]=q.toString()),q=Es);for(var re=0;re<q.length;re++){var _e=nr(_,q[re],T||g.handleEvent,!1,g.h||g);if(!_e)break;g.g[_e.key]=_e}g=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ft(),Pr(u.i,u.u,u.A,u.l,u.R,u.m)}it.prototype.ca=function(u){u=u.target;const g=this.M;g&&Hn(u)==3?g.j():this.Y(u)},it.prototype.Y=function(u){try{if(u==this.g)e:{const Ht=Hn(this.g);var g=this.g.Ba();const gr=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||No(this.g)))){this.J||Ht!=4||g==7||(g==8||0>=gr?ft(3):ft(2)),Ps(this);var _=this.g.Z();this.X=_;t:if(xa(this)){var T=No(this.g);u="";var q=T.length,re=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){S(this),Jr(this);var _e="";break t}this.h.i=new f.TextDecoder}for(g=0;g<q;g++)this.h.h=!0,u+=this.h.i.decode(T[g],{stream:!(re&&g==q-1)});T.length=0,this.h.g+=u,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=_==200,Rr(this.i,this.u,this.A,this.l,this.R,Ht,_),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,Jt=this.g;if((gt=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(gt)){var at=gt;break t}}at=null}if(_=at)pn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,F(this,_);else{this.o=!1,this.s=3,Ve(12),S(this),Jr(this);break e}}if(this.P){_=!0;let or;for(;!this.J&&this.C<_e.length;)if(or=Ar(this,_e),or==Is){Ht==4&&(this.s=4,Ve(14),_=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(or==$n){this.s=4,Ve(15),pn(this.i,this.l,_e,"[Invalid Chunk]"),_=!1;break}else pn(this.i,this.l,or,null),F(this,or);if(xa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||_e.length!=0||this.h.h||(this.s=1,Ve(16),_=!1),this.o=this.o&&_,!_)pn(this.i,this.l,_e,"[Invalid Chunked Response]"),S(this),Jr(this);else if(0<_e.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),jo(on),on.M=!0,Ve(11))}}else pn(this.i,this.l,_e,null),F(this,_e);Ht==4&&S(this),this.o&&!this.J&&(Ht==4?Na(this.j,this):(this.o=!1,pt(this)))}else Ca(this.g),_==400&&0<_e.indexOf("Unknown SID")?(this.s=3,Ve(12)):(this.s=0,Ve(13)),S(this),Jr(this)}}}catch{}finally{}};function xa(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ar(u,g){var _=u.C,T=g.indexOf(`
`,_);return T==-1?Is:(_=Number(g.substring(_,T)),isNaN(_)?$n:(T+=1,T+_>g.length?Is:(g=g.slice(T,T+_),u.C=T+_,g)))}it.prototype.cancel=function(){this.J=!0,S(this)};function pt(u){u.S=Date.now()+u.I,Ea(u,u.I)}function Ea(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=sn(C(u.ba,u),g)}function Ps(u){u.B&&(f.clearTimeout(u.B),u.B=null)}it.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ss(this.i,this.A),this.L!=2&&(ft(),Ve(17)),S(this),this.s=2,Jr(this)):Ea(this,this.S-u)};function Jr(u){u.j.G==0||u.J||Na(u.j,u)}function S(u){Ps(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,fn(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function F(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||Te(_.h,u))){if(!u.K&&Te(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var q=T;if(q[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Aa(_),Vr(_);else break e;ba(_),Ve(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=sn(C(_.Za,_),6e3));if(1>=Qe(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ns(_,11)}else if((u.K||_.g==u)&&Aa(_),!se(g))for(q=_.Da.g.parse(g),g=0;g<q.length;g++){let at=q[g];if(_.T=at[0],at=at[1],_.G==2)if(at[0]=="c"){_.K=at[1],_.ia=at[2];const on=at[3];on!=null&&(_.la=on,_.j.info("VER="+_.la));const Ht=at[4];Ht!=null&&(_.Aa=Ht,_.j.info("SVER="+_.Aa));const gr=at[5];gr!=null&&typeof gr=="number"&&0<gr&&(T=1.5*gr,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const or=u.g;if(or){const qi=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qi){var re=T.h;re.g||qi.indexOf("spdy")==-1&&qi.indexOf("quic")==-1&&qi.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(dt(re,re.h),re.h=null))}if(T.D){const ja=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;ja&&(T.ya=ja,mt(T.I,T.D,ja))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var _e=u;if(T.qa=Zl(T,T.J?T.ia:null,T.W),_e.K){Nt(T.h,_e);var gt=_e,Jt=T.L;Jt&&(gt.I=Jt),gt.B&&(Ps(gt),pt(gt)),T.g=_e}else Hi(T);0<_.i.length&&ss(_)}else at[0]!="stop"&&at[0]!="close"||Ns(_,7);else _.G==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Ns(_,7):gn(_):at[0]!="noop"&&_.l&&_.l.ta(at),_.v=0)}}ft(4)}catch{}}var J=class{constructor(u,g){this.g=u,this.map=g}};function ye(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ae(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Qe(u){return u.h?1:u.g?u.g.size:0}function Te(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function dt(u,g){u.g?u.g.add(g):u.h=g}function Nt(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}ye.prototype.cancel=function(){if(this.i=Rt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Rt(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return te(u.i)}function wt(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var g=[],_=u.length,T=0;T<_;T++)g.push(u[T]);return g}g=[],_=0;for(T in u)g[_++]=u[T];return g}function xt(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const T in u)g[_++]=T;return g}}}function Yt(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=xt(u),T=wt(u),q=T.length,re=0;re<q;re++)g.call(void 0,T[re],_&&_[re],u)}var kt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lt(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),q=null;if(0<=T){var re=u[_].substring(0,T);q=u[_].substring(T+1)}else re=u[_];g(re,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Rn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Rn){this.h=u.h,Mn(this,u.j),this.o=u.o,this.g=u.g,pr(this,u.s),this.l=u.l;var g=u.i,_=new ts;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Xr(this,_),this.m=u.m}else u&&(g=String(u).match(kt))?(this.h=!1,Mn(this,g[1]||"",!0),this.o=Ye(g[2]||""),this.g=Ye(g[3]||"",!0),pr(this,g[4]),this.l=Ye(g[5]||"",!0),Xr(this,g[6]||"",!0),this.m=Ye(g[7]||"")):(this.h=!1,this.i=new ts(null,this.h))}Rn.prototype.toString=function(){var u=[],g=this.j;g&&u.push(es(g,Ta,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(es(g,Ta,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(es(_,_.charAt(0)=="/"?Hl:Wl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",es(_,Ro)),u.join("")};function vt(u){return new Rn(u)}function Mn(u,g,_){u.j=_?Ye(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function pr(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Xr(u,g,_){g instanceof ts?(u.i=g,ns(u.i,u.h)):(_||(g=es(g,ql)),u.i=new ts(g,u.h))}function mt(u,g,_){u.i.set(g,_)}function Zr(u){return mt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ye(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function es(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,$l),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function $l(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ta=/[#\/\?@]/g,Wl=/[#\?:]/g,Hl=/[#\?]/g,ql=/[#\?@]/g,Ro=/#/g;function ts(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function mn(u){u.g||(u.g=new Map,u.h=0,u.i&&lt(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=ts.prototype,n.add=function(u,g){mn(this),this.i=null,u=mr(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function Nr(u,g){mn(u),g=mr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function kr(u,g){return mn(u),g=mr(u,g),u.g.has(g)}n.forEach=function(u,g){mn(this),this.g.forEach(function(_,T){_.forEach(function(q){u.call(g,q,T,this)},this)},this)},n.na=function(){mn(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let T=0;T<g.length;T++){const q=u[T];for(let re=0;re<q.length;re++)_.push(g[T])}return _},n.V=function(u){mn(this);let g=[];if(typeof u=="string")kr(this,u)&&(g=g.concat(this.g.get(mr(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},n.set=function(u,g){return mn(this),this.i=null,u=mr(this,u),kr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Xs(u,g,_){Nr(u,g),0<_.length&&(u.i=null,u.g.set(mr(u,g),te(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var T=g[_];const re=encodeURIComponent(String(T)),_e=this.V(T);for(T=0;T<_e.length;T++){var q=re;_e[T]!==""&&(q+="="+encodeURIComponent(String(_e[T]))),u.push(q)}}return this.i=u.join("&")};function mr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ns(u,g){g&&!u.j&&(mn(u),u.i=null,u.g.forEach(function(_,T){var q=T.toLowerCase();T!=q&&(Nr(this,T),Xs(this,q,_))},u)),u.j=g}function cd(u,g){const _=new an;if(f.Image){const T=new Image;T.onload=$(Wn,_,"TestLoadImage: loaded",!0,g,T),T.onerror=$(Wn,_,"TestLoadImage: error",!1,g,T),T.onabort=$(Wn,_,"TestLoadImage: abort",!1,g,T),T.ontimeout=$(Wn,_,"TestLoadImage: timeout",!1,g,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function Gl(u,g){const _=new an,T=new AbortController,q=setTimeout(()=>{T.abort(),Wn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then(re=>{clearTimeout(q),re.ok?Wn(_,"TestPingServer: ok",!0,g):Wn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),Wn(_,"TestPingServer: error",!1,g)})}function Wn(u,g,_,T,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),T(_)}catch{}}function ud(){this.g=new Ts}function Kl(u,g,_){const T=_||"";try{Yt(u,function(q,re){let _e=q;v(q)&&(_e=On(q)),g.push(T+re+"="+encodeURIComponent(_e))})}catch(q){throw g.push(T+"type="+encodeURIComponent("_badmap")),q}}function Rs(u){this.l=u.Ub||null,this.j=u.eb||!1}Q(Rs,Lt),Rs.prototype.g=function(){return new $i(this.l,this.j)},Rs.prototype.i=(function(u){return function(){return u}})({});function $i(u,g){Pt.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q($i,Pt),n=$i.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Dr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||f).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Dr(this)),this.g&&(this.readyState=3,Dr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ql(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ql(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?jr(this):Dr(this),this.readyState==3&&Ql(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,jr(this))},n.Qa=function(u){this.g&&(this.response=u,jr(this))},n.ga=function(){this.g&&jr(this)};function jr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Dr(u)}n.setRequestHeader=function(u,g){this.u.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Dr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bs(u){let g="";return he(u,function(_,T){g+=T,g+=":",g+=_,g+=`\r
`}),g}function Zs(u,g,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=bs(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):mt(u,g,_))}function bt(u){Pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(bt,Pt);var dd=/^https?$/i,bo=["POST","PUT"];n=bt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,g,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ir.g(),this.v=this.o?Mt(this.o):Mt(ir),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(re){Wi(this,re);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var q in T)_.set(q,T[q]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const re of T.keys())_.set(re,T.get(re));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(re=>re.toLowerCase()=="content-type"),q=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(bo,g,void 0))||T||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,_e]of _)this.g.setRequestHeader(re,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ia(this),this.u=!0,this.g.send(u),this.u=!1}catch(re){Wi(this,re)}};function Wi(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Sa(u),ar(u)}function Sa(u){u.A||(u.A=!0,He(u,"complete"),He(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,He(this,"complete"),He(this,"abort"),ar(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),bt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ao(this):this.bb())},n.bb=function(){Ao(this)};function Ao(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Hn(u)!=4||u.Z()!=2)){if(u.u&&Hn(u)==4)xs(u.Ea,0,u);else if(He(u,"readystatechange"),Hn(u)==4){u.h=!1;try{const _e=u.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var T;if(T=_e===0){var q=String(u.D).match(kt)[1]||null;!q&&f.self&&f.self.location&&(q=f.self.location.protocol.slice(0,-1)),T=!dd.test(q?q.toLowerCase():"")}_=T}if(_)He(u,"complete"),He(u,"success");else{u.m=6;try{var re=2<Hn(u)?u.g.statusText:""}catch{re=""}u.l=re+" ["+u.Z()+"]",Sa(u)}}finally{ar(u)}}}}function ar(u,g){if(u.g){Ia(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||He(u,"ready");try{_.onreadystatechange=T}catch{}}}function Ia(u){u.I&&(f.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Hn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),fr(g)}};function No(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ca(u){const g={};u=(u.g&&2<=Hn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(se(u[T]))continue;var _=M(u[T]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const re=g[q]||[];g[q]=re,re.push(_)}V(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function ko(u){this.Aa=0,this.i=[],this.j=new an,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rs("baseRetryDelayMs",5e3,u),this.cb=rs("retryDelaySeedMs",1e4,u),this.Wa=rs("forwardChannelMaxRetries",2,u),this.wa=rs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ye(u&&u.concurrentRequestLimit),this.Da=new ud,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ko.prototype,n.la=8,n.G=1,n.connect=function(u,g,_,T){Ve(0),this.W=u,this.H=g||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Zl(this,null,this.W),ss(this)};function gn(u){if(Pa(u),u.G==3){var g=u.U++,_=vt(u.I);if(mt(_,"SID",u.K),mt(_,"RID",g),mt(_,"TYPE","terminate"),As(u,_),g=new it(u,u.j,g),g.L=2,g.v=Zr(vt(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=g.v,_=!0),_||(g.g=ec(g.j,null),g.g.ea(g.v)),g.F=Date.now(),pt(g)}Xl(u)}function Vr(u){u.g&&(jo(u),u.g.cancel(),u.g=null)}function Pa(u){Vr(u),u.u&&(f.clearTimeout(u.u),u.u=null),Aa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function ss(u){if(!Ae(u.h)&&!u.s){u.s=!0;var g=u.Ga;K||ee(),D||(K(),D=!0),z.add(g,u),u.B=0}}function hd(u,g){return Qe(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=sn(C(u.Ga,u,g),Jl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const q=new it(this,this.j,u);let re=this.o;if(this.S&&(re?(re=R(re),A(re,this.S)):re=this.S),this.m!==null||this.O||(q.H=re,re=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=ei(this,q,g),_=vt(this.I),mt(_,"RID",u),mt(_,"CVER",22),this.D&&mt(_,"X-HTTP-Session-Id",this.D),As(this,_),re&&(this.O?g="headers="+encodeURIComponent(String(bs(re)))+"&"+g:this.m&&Zs(_,this.m,re)),dt(this.h,q),this.Ua&&mt(_,"TYPE","init"),this.P?(mt(_,"$req",g),mt(_,"SID","null"),q.T=!0,Cs(q,_,null)):Cs(q,_,g),this.G=2}}else this.G==3&&(u?Ra(this,u):this.i.length==0||Ae(this.h)||Ra(this))};function Ra(u,g){var _;g?_=g.l:_=u.U++;const T=vt(u.I);mt(T,"SID",u.K),mt(T,"RID",_),mt(T,"AID",u.T),As(u,T),u.m&&u.o&&Zs(T,u.m,u.o),_=new it(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=ei(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),dt(u.h,_),Cs(_,T,g)}function As(u,g){u.H&&he(u.H,function(_,T){mt(g,T,_)}),u.l&&Yt({},function(_,T){mt(g,T,_)})}function ei(u,g,_){_=Math.min(u.i.length,_);var T=u.l?C(u.l.Na,u.l,u):null;e:{var q=u.i;let re=-1;for(;;){const _e=["count="+_];re==-1?0<_?(re=q[0].g,_e.push("ofs="+re)):re=0:_e.push("ofs="+re);let gt=!0;for(let Jt=0;Jt<_;Jt++){let at=q[Jt].g;const on=q[Jt].map;if(at-=re,0>at)re=Math.max(0,q[Jt].g-100),gt=!1;else try{Kl(on,_e,"req"+at+"_")}catch{T&&T(on)}}if(gt){T=_e.join("&");break e}}}return u=u.i.splice(0,_),g.D=u,T}function Hi(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;K||ee(),D||(K(),D=!0),z.add(g,u),u.v=0}}function ba(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=sn(C(u.Fa,u),Jl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Yl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=sn(C(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ve(10),Vr(this),Yl(this))};function jo(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Yl(u){u.g=new it(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=vt(u.qa);mt(g,"RID","rpc"),mt(g,"SID",u.K),mt(g,"AID",u.T),mt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&mt(g,"TO",u.ja),mt(g,"TYPE","xmlhttp"),As(u,g),u.m&&u.o&&Zs(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Zr(vt(g)),_.m=null,_.P=!0,Js(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Vr(this),ba(this),Ve(19))};function Aa(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Na(u,g){var _=null;if(u.g==g){Aa(u),jo(u),u.g=null;var T=2}else if(Te(u.h,g))_=g.D,Nt(u.h,g),T=1;else return;if(u.G!=0){if(g.o)if(T==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var q=u.B;T=Re(),He(T,new Wt(T,_)),ss(u)}else Hi(u);else if(q=g.s,q==3||q==0&&0<g.X||!(T==1&&hd(u,g)||T==2&&ba(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),q){case 1:Ns(u,5);break;case 4:Ns(u,10);break;case 3:Ns(u,6);break;default:Ns(u,2)}}}function Jl(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function Ns(u,g){if(u.j.info("Error code "+g),g==2){var _=C(u.fb,u),T=u.Xa;const q=!T;T=new Rn(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Mn(T,"https"),Zr(T),q?cd(T.toString(),_):Gl(T.toString(),_)}else Ve(2);u.G=0,u.l&&u.l.sa(g),Xl(u),Pa(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function Xl(u){if(u.G=0,u.ka=[],u.l){const g=Rt(u.h);(g.length!=0||u.i.length!=0)&&(W(u.ka,g),W(u.ka,u.i),u.h.i.length=0,te(u.i),u.i.length=0),u.l.ra()}}function Zl(u,g,_){var T=_ instanceof Rn?vt(_):new Rn(_);if(T.g!="")g&&(T.g=g+"."+T.g),pr(T,T.s);else{var q=f.location;T=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;var re=new Rn(null);T&&Mn(re,T),g&&(re.g=g),q&&pr(re,q),_&&(re.l=_),T=re}return _=u.D,g=u.ya,_&&g&&mt(T,_,g),mt(T,"VER",u.la),As(u,T),T}function ec(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new bt(new Rs({eb:_})):new bt(u.pa),g.Ha(u.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Do(){}n=Do.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ka(){}ka.prototype.g=function(u,g){return new Fn(u,g)};function Fn(u,g){Pt.call(this),this.g=new ko(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!se(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!se(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new is(this)}Q(Fn,Pt),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){gn(this.g)},Fn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=On(u),u=_);g.i.push(new J(g.Ya++,u)),g.G==3&&ss(g)},Fn.prototype.N=function(){this.g.l=null,delete this.j,gn(this.g),delete this.g,Fn.aa.N.call(this)};function tc(u){ne.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}Q(tc,ne);function nc(){le.call(this),this.status=1}Q(nc,le);function is(u){this.g=u}Q(is,Do),is.prototype.ua=function(){He(this.g,"a")},is.prototype.ta=function(u){He(this.g,new tc(u))},is.prototype.sa=function(u){He(this.g,new nc)},is.prototype.ra=function(){He(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,G_=function(){return new ka},q_=function(){return Re()},H_=B,df={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kr.NO_ERROR=0,Kr.TIMEOUT=8,Kr.HTTP_ERROR=6,uu=Kr,wa.COMPLETE="complete",W_=wa,rn.EventType=I,I.OPEN="a",I.CLOSE="b",I.ERROR="c",I.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,ol=rn,bt.prototype.listenOnce=bt.prototype.L,bt.prototype.getLastError=bt.prototype.Ka,bt.prototype.getLastErrorCode=bt.prototype.Ba,bt.prototype.getStatus=bt.prototype.Z,bt.prototype.getResponseJson=bt.prototype.Oa,bt.prototype.getResponseText=bt.prototype.oa,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Ha,$_=bt}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const by="@firebase/firestore",Ay="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Vf("@firebase/firestore");function to(){return pa.logLevel}function Ie(n,...e){if(pa.logLevel<=nt.DEBUG){const t=e.map(Qf);pa.debug(`Firestore (${To}): ${n}`,...t)}}function Ks(n,...e){if(pa.logLevel<=nt.ERROR){const t=e.map(Qf);pa.error(`Firestore (${To}): ${n}`,...t)}}function bi(n,...e){if(pa.logLevel<=nt.WARN){const t=e.map(Qf);pa.warn(`Firestore (${To}): ${n}`,...t)}}function Qf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,K_(n,s,t)}function K_(n,e,t){let s=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ks(s),new Error(s)}function ht(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||K_(e,a,s)}function Ge(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Dn.UNAUTHENTICATED)))}shutdown(){}}class UI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zI{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let s=this.i;const a=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Hs,e.enqueueRetryable((()=>a(this.currentUser)))};const d=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Hs)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ht(typeof s.accessToken=="string",31837,{l:s}),new Q_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}}class BI{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $I{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new BI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ny{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);const s=l=>{l.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,Ie("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ny(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ny(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=HI(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Je(n,e){return n<e?-1:n>e?1:0}function hf(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return Je(s,a);{const l=Y_(),d=qI(l.encode(ky(n,t)),l.encode(ky(e,t)));return d!==0?d:Je(s,a)}}t+=s>65535?2:1}return Je(n.length,e.length)}function ky(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function qI(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Je(n[t],e[t]);return Je(n.length,e.length)}function fo(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="__name__";class us{constructor(e,t,s){t===void 0?t=0:t>e.length&&ze(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ze(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return us.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof us?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=us.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Je(e.length,t.length)}static compareSegments(e,t){const s=us.isNumericId(e),a=us.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?us.extractNumericId(e).compare(us.extractNumericId(t)):hf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class It extends us{construct(e,t,s){return new It(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ke(ce.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new It(t)}static emptyPath(){return new It([])}}const GI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends us{construct(e,t,s){return new wn(e,t,s)}static isValidIdentifier(e){return GI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jy}static keyField(){return new wn([jy])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new ke(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new ke(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ke(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,a+=2}else f==="`"?(d=!d,a++):f!=="."||d?(s+=f,a++):(l(),a++)}if(l(),d)throw new ke(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(t)}static emptyPath(){return new wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(It.fromString(e))}static fromName(e){return new Oe(It.fromString(e).popFirst(5))}static empty(){return new Oe(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(n,e,t){if(!t)throw new ke(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KI(n,e,t,s){if(e===!0&&s===!0)throw new ke(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Dy(n){if(!Oe.isDocumentKey(n))throw new ke(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Vy(n){if(Oe.isDocumentKey(n))throw new ke(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function X_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ze(12329,{type:typeof n})}function Hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jf(n);throw new ke(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ll(n,e){if(!X_(n))throw new ke(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const d=n[s];if(a&&typeof d!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ke(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=-62135596800,Oy=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Oy);return new Ct(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ly)throw new ke(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Oy}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ll(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ly;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Kt("string",Ct._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Ct(0,0))}static max(){return new qe(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=-1;function QI(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=qe.fromTimestamp(s===1e9?new Ct(t+1,0):new Ct(t,s));return new Ai(a,Oe.empty(),e)}function YI(n){return new Ai(n.readTime,n.key,Tl)}class Ai{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ai(qe.min(),Oe.empty(),Tl)}static max(){return new Ai(qe.max(),Oe.empty(),Tl)}}function JI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==XI)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.reject(t)}static resolve(e){return new ae(((t,s)=>{t(e)}))}static reject(e){return new ae(((t,s)=>{s(e)}))}static waitFor(e){return new ae(((t,s)=>{let a=0,l=0,d=!1;e.forEach((f=>{++a,f.next((()=>{++l,d&&l===a&&t()}),(m=>s(m)))})),d=!0,l===a&&t()}))}static or(e){let t=ae.resolve(!1);for(const s of e)t=t.next((a=>a?ae.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new ae(((s,a)=>{const l=e.length,d=new Array(l);let f=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((w=>{d[v]=w,++f,f===l&&s(d)}),(w=>a(w)))}}))}static doWhile(e,t){return new ae(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function eC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Io(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Wu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=-1;function Hu(n){return n==null}function Cu(n){return n===0&&1/n==-1/0}function tC(n){return typeof n=="number"&&Number.isInteger(n)&&!Cu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="";function nC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=My(e)),e=rC(n.get(t),e);return My(e)}function rC(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Z_:t+="";break;default:t+=l}}return t}function My(n){return n+Z_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function e0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,t){this.comparator=e,this.root=t||_n.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xc(this.root,e,this.comparator,!0)}}class Xc{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??_n.RED,this.left=a??_n.EMPTY,this.right=l??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new _n(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return _n.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new _n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uy(this.data.getIterator())}getIteratorFrom(e){return new Uy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class Uy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new hr([])}unionWith(e){let t=new tn(wn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new hr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new t0("Invalid base64 string: "+l):l}})(e);return new En(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let d=0;d<a.length;++d)l+=String.fromCharCode(a[d]);return l})(e);return new En(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}En.EMPTY_BYTE_STRING=new En("");const sC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(n){if(ht(!!n,39018),typeof n=="string"){let e=0;const t=sC.exec(n);if(ht(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ut(n.seconds),nanos:Ut(n.nanos)}}function Ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ki(n){return typeof n=="string"?En.fromBase64String(n):En.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="server_timestamp",r0="__type__",s0="__previous_value__",i0="__local_write_time__";function Zf(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[r0])===null||t===void 0?void 0:t.stringValue)===n0}function qu(n){const e=n.mapValue.fields[s0];return Zf(e)?qu(e):e}function Sl(n){const e=Ni(n.mapValue.fields[i0].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t,s,a,l,d,f,m,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=w}}const Pu="(default)";class Il{constructor(e,t){this.projectId=e,this.database=t||Pu}static empty(){return new Il("","")}get isDefaultDatabase(){return this.database===Pu}isEqual(e){return e instanceof Il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="__type__",aC="__max__",Zc={mapValue:{}},o0="__vector__",Ru="value";function ji(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zf(n)?4:lC(n)?9007199254740991:oC(n)?10:11:ze(28295,{value:n})}function vs(n,e){if(n===e)return!0;const t=ji(n);if(t!==ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sl(n).isEqual(Sl(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const d=Ni(a.timestampValue),f=Ni(l.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return ki(a.bytesValue).isEqual(ki(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Ut(a.geoPointValue.latitude)===Ut(l.geoPointValue.latitude)&&Ut(a.geoPointValue.longitude)===Ut(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Ut(a.integerValue)===Ut(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const d=Ut(a.doubleValue),f=Ut(l.doubleValue);return d===f?Cu(d)===Cu(f):isNaN(d)&&isNaN(f)}return!1})(n,e);case 9:return fo(n.arrayValue.values||[],e.arrayValue.values||[],vs);case 10:case 11:return(function(a,l){const d=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Fy(d)!==Fy(f))return!1;for(const m in d)if(d.hasOwnProperty(m)&&(f[m]===void 0||!vs(d[m],f[m])))return!1;return!0})(n,e);default:return ze(52216,{left:n})}}function Cl(n,e){return(n.values||[]).find((t=>vs(t,e)))!==void 0}function po(n,e){if(n===e)return 0;const t=ji(n),s=ji(e);if(t!==s)return Je(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return(function(l,d){const f=Ut(l.integerValue||l.doubleValue),m=Ut(d.integerValue||d.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return zy(n.timestampValue,e.timestampValue);case 4:return zy(Sl(n),Sl(e));case 5:return hf(n.stringValue,e.stringValue);case 6:return(function(l,d){const f=ki(l),m=ki(d);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,d){const f=l.split("/"),m=d.split("/");for(let v=0;v<f.length&&v<m.length;v++){const w=Je(f[v],m[v]);if(w!==0)return w}return Je(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,d){const f=Je(Ut(l.latitude),Ut(d.latitude));return f!==0?f:Je(Ut(l.longitude),Ut(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return By(n.arrayValue,e.arrayValue);case 10:return(function(l,d){var f,m,v,w;const E=l.fields||{},C=d.fields||{},$=(f=E[Ru])===null||f===void 0?void 0:f.arrayValue,Q=(m=C[Ru])===null||m===void 0?void 0:m.arrayValue,te=Je(((v=$==null?void 0:$.values)===null||v===void 0?void 0:v.length)||0,((w=Q==null?void 0:Q.values)===null||w===void 0?void 0:w.length)||0);return te!==0?te:By($,Q)})(n.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Zc.mapValue&&d===Zc.mapValue)return 0;if(l===Zc.mapValue)return 1;if(d===Zc.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),v=d.fields||{},w=Object.keys(v);m.sort(),w.sort();for(let E=0;E<m.length&&E<w.length;++E){const C=hf(m[E],w[E]);if(C!==0)return C;const $=po(f[m[E]],v[w[E]]);if($!==0)return $}return Je(m.length,w.length)})(n.mapValue,e.mapValue);default:throw ze(23264,{le:t})}}function zy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=Ni(n),s=Ni(e),a=Je(t.seconds,s.seconds);return a!==0?a:Je(t.nanos,s.nanos)}function By(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=po(t[a],s[a]);if(l)return l}return Je(t.length,s.length)}function mo(n){return ff(n)}function ff(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ni(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ki(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Oe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=ff(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const d of s)l?l=!1:a+=",",a+=`${d}:${ff(t.fields[d])}`;return a+"}"})(n.mapValue):ze(61005,{value:n})}function du(n){switch(ji(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qu(n);return e?16+du(e):16;case 5:return 2*n.stringValue.length;case 6:return ki(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+du(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return zi(s.fields,((l,d)=>{a+=l.length+du(d)})),a})(n.mapValue);default:throw ze(13486,{value:n})}}function pf(n){return!!n&&"integerValue"in n}function ep(n){return!!n&&"arrayValue"in n}function $y(n){return!!n&&"nullValue"in n}function Wy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hu(n){return!!n&&"mapValue"in n}function oC(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[a0])===null||t===void 0?void 0:t.stringValue)===o0}function pl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zi(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=pl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function lC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===aC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.value=e}static empty(){return new er({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!hu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(t)}setAll(e){let t=wn.emptyPath(),s={},a=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,a),s={},a=[],t=f.popLast()}d?s[f.lastSegment()]=pl(d):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());hu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];hu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){zi(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new er(pl(this.value))}}function l0(n){const e=[];return zi(n.fields,((t,s)=>{const a=new wn([t]);if(hu(s)){const l=l0(s.mapValue).fields;if(l.length===0)e.push(a);else for(const d of l)e.push(a.child(d))}else e.push(a)})),new hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t,s,a,l,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=d,this.documentState=f}static newInvalidDocument(e){return new Vn(e,0,qe.min(),qe.min(),qe.min(),er.empty(),0)}static newFoundDocument(e,t,s,a){return new Vn(e,1,t,qe.min(),s,a,0)}static newNoDocument(e,t){return new Vn(e,2,t,qe.min(),qe.min(),er.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,qe.min(),qe.min(),er.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.position=e,this.inclusive=t}}function Hy(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],d=n.position[a];if(l.field.isKeyField()?s=Oe.comparator(Oe.fromName(d.referenceValue),t.key):s=po(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function qy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t="asc"){this.field=e,this.dir=t}}function cC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{}class en extends c0{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new dC(e,t,s):t==="array-contains"?new pC(e,s):t==="in"?new mC(e,s):t==="not-in"?new gC(e,s):t==="array-contains-any"?new yC(e,s):new en(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new hC(e,s):new fC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(po(t,this.value)):t!==null&&ji(this.value)===ji(t)&&this.matchesComparison(po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _s extends c0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new _s(e,t)}matches(e){return u0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function u0(n){return n.op==="and"}function d0(n){return uC(n)&&u0(n)}function uC(n){for(const e of n.filters)if(e instanceof _s)return!1;return!0}function mf(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+mo(n.value);if(d0(n))return n.filters.map((e=>mf(e))).join(",");{const e=n.filters.map((t=>mf(t))).join(",");return`${n.op}(${e})`}}function h0(n,e){return n instanceof en?(function(s,a){return a instanceof en&&s.op===a.op&&s.field.isEqual(a.field)&&vs(s.value,a.value)})(n,e):n instanceof _s?(function(s,a){return a instanceof _s&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,d,f)=>l&&h0(d,a.filters[f])),!0):!1})(n,e):void ze(19439)}function f0(n){return n instanceof en?(function(t){return`${t.field.canonicalString()} ${t.op} ${mo(t.value)}`})(n):n instanceof _s?(function(t){return t.op.toString()+" {"+t.getFilters().map(f0).join(" ,")+"}"})(n):"Filter"}class dC extends en{constructor(e,t,s){super(e,t,s),this.key=Oe.fromName(s.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class hC extends en{constructor(e,t){super(e,"in",t),this.keys=p0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fC extends en{constructor(e,t){super(e,"not-in",t),this.keys=p0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function p0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Oe.fromName(s.referenceValue)))}class pC extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ep(t)&&Cl(t.arrayValue,this.value)}}class mC extends en{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cl(this.value.arrayValue,t)}}class gC extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cl(this.value.arrayValue,t)}}class yC extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ep(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Cl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t=null,s=[],a=[],l=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=d,this.endAt=f,this.Pe=null}}function Gy(n,e=null,t=[],s=[],a=null,l=null,d=null){return new vC(n,e,t,s,a,l,d)}function tp(n){const e=Ge(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>mf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Hu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>mo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>mo(s))).join(",")),e.Pe=t}return e.Pe}function np(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!h0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qy(n.startAt,e.startAt)&&qy(n.endAt,e.endAt)}function gf(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t=null,s=[],a=[],l=null,d="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function _C(n,e,t,s,a,l,d,f){return new Gu(n,e,t,s,a,l,d,f)}function rp(n){return new Gu(n)}function Ky(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wC(n){return n.collectionGroup!==null}function ml(n){const e=Ge(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new tn(wn.comparator);return d.filters.forEach((m=>{m.getFlattenedFilters().forEach((v=>{v.isInequality()&&(f=f.add(v.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Au(l,s))})),t.has(wn.keyField().canonicalString())||e.Te.push(new Au(wn.keyField(),s))}return e.Te}function ps(n){const e=Ge(n);return e.Ie||(e.Ie=xC(e,ml(n))),e.Ie}function xC(n,e){if(n.limitType==="F")return Gy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Au(a.field,l)}));const t=n.endAt?new bu(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new bu(n.startAt.position,n.startAt.inclusive):null;return Gy(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function yf(n,e,t){return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ku(n,e){return np(ps(n),ps(e))&&n.limitType===e.limitType}function m0(n){return`${tp(ps(n))}|lt:${n.limitType}`}function no(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>f0(a))).join(", ")}]`),Hu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>mo(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>mo(a))).join(",")),`Target(${s})`})(ps(n))}; limitType=${n.limitType})`}function Qu(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Oe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of ml(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(d,f,m){const v=Hy(d,f,m);return d.inclusive?v<=0:v<0})(s.startAt,ml(s),a)||s.endAt&&!(function(d,f,m){const v=Hy(d,f,m);return d.inclusive?v>=0:v>0})(s.endAt,ml(s),a))})(n,e)}function EC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function g0(n){return(e,t)=>{let s=!1;for(const a of ml(n)){const l=TC(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function TC(n,e,t){const s=n.field.isKeyField()?Oe.comparator(e.key,t.key):(function(l,d,f){const m=d.data.field(l),v=f.data.field(l);return m!==null&&v!==null?po(m,v):ze(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ze(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return e0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new Vt(Oe.comparator);function Qs(){return SC}const y0=new Vt(Oe.comparator);function ll(...n){let e=y0;for(const t of n)e=e.insert(t.key,t);return e}function v0(n){let e=y0;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function la(){return gl()}function _0(){return gl()}function gl(){return new ya((n=>n.toString()),((n,e)=>n.isEqual(e)))}const IC=new Vt(Oe.comparator),CC=new tn(Oe.comparator);function rt(...n){let e=CC;for(const t of n)e=e.add(t);return e}const PC=new tn(Je);function RC(){return PC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function w0(n){return{integerValue:""+n}}function bC(n,e){return tC(e)?w0(e):sp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(){this._=void 0}}function AC(n,e,t){return n instanceof Nu?(function(a,l){const d={fields:{[r0]:{stringValue:n0},[i0]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Zf(l)&&(l=qu(l)),l&&(d.fields[s0]=l),{mapValue:d}})(t,e):n instanceof Pl?E0(n,e):n instanceof Rl?T0(n,e):(function(a,l){const d=x0(a,l),f=Qy(d)+Qy(a.Ee);return pf(d)&&pf(a.Ee)?w0(f):sp(a.serializer,f)})(n,e)}function NC(n,e,t){return n instanceof Pl?E0(n,e):n instanceof Rl?T0(n,e):t}function x0(n,e){return n instanceof ku?(function(s){return pf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Nu extends Yu{}class Pl extends Yu{constructor(e){super(),this.elements=e}}function E0(n,e){const t=S0(e);for(const s of n.elements)t.some((a=>vs(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Rl extends Yu{constructor(e){super(),this.elements=e}}function T0(n,e){let t=S0(e);for(const s of n.elements)t=t.filter((a=>!vs(a,s)));return{arrayValue:{values:t}}}class ku extends Yu{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Qy(n){return Ut(n.integerValue||n.doubleValue)}function S0(n){return ep(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function kC(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof Pl&&a instanceof Pl||s instanceof Rl&&a instanceof Rl?fo(s.elements,a.elements,vs):s instanceof ku&&a instanceof ku?vs(s.Ee,a.Ee):s instanceof Nu&&a instanceof Nu})(n.transform,e.transform)}class jC{constructor(e,t){this.version=e,this.transformResults=t}}class Sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ju{}function I0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ip(n.key,Sr.none()):new Ol(n.key,n.data,Sr.none());{const t=n.data,s=er.empty();let a=new tn(wn.comparator);for(let l of e.fields)if(!a.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),a=a.add(l)}return new Bi(n.key,s,new hr(a.toArray()),Sr.none())}}function DC(n,e,t){n instanceof Ol?(function(a,l,d){const f=a.value.clone(),m=Jy(a.fieldTransforms,l,d.transformResults);f.setAll(m),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Bi?(function(a,l,d){if(!fu(a.precondition,l))return void l.convertToUnknownDocument(d.version);const f=Jy(a.fieldTransforms,l,d.transformResults),m=l.data;m.setAll(C0(a)),m.setAll(f),l.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function yl(n,e,t,s){return n instanceof Ol?(function(l,d,f,m){if(!fu(l.precondition,d))return f;const v=l.value.clone(),w=Xy(l.fieldTransforms,m,d);return v.setAll(w),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(n,e,t,s):n instanceof Bi?(function(l,d,f,m){if(!fu(l.precondition,d))return f;const v=Xy(l.fieldTransforms,m,d),w=d.data;return w.setAll(C0(l)),w.setAll(v),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,d,f){return fu(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(n,e,t)}function VC(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=x0(s.transform,a||null);l!=null&&(t===null&&(t=er.empty()),t.set(s.field,l))}return t||null}function Yy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&fo(s,a,((l,d)=>kC(l,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ol extends Ju{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Bi extends Ju{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function C0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Jy(n,e,t){const s=new Map;ht(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const l=n[a],d=l.transform,f=e.data.field(l.field);s.set(l.field,NC(d,f,t[a]))}return s}function Xy(n,e,t){const s=new Map;for(const a of n){const l=a.transform,d=t.data.field(a.field);s.set(a.field,AC(l,d,e))}return s}class ip extends Ju{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LC extends Ju{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&DC(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=yl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=yl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=_0();return this.mutations.forEach((a=>{const l=e.get(a.key),d=l.overlayedDocument;let f=this.applyToLocalView(d,l.mutatedFields);f=t.has(a.key)?null:f;const m=I0(d,f);m!==null&&s.set(a.key,m),d.isValidDocument()||d.convertToNoDocument(qe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),rt())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,((t,s)=>Yy(t,s)))&&fo(this.baseMutations,e.baseMutations,((t,s)=>Yy(t,s)))}}class ap{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){ht(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=(function(){return IC})();const l=e.mutations;for(let d=0;d<l.length;d++)a=a.insert(l[d].key,s[d].version);return new ap(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,ot;function UC(n){switch(n){case ce.OK:return ze(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return ze(15467,{code:n})}}function P0(n){if(n===void 0)return Ks("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Gt.OK:return ce.OK;case Gt.CANCELLED:return ce.CANCELLED;case Gt.UNKNOWN:return ce.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ce.INTERNAL;case Gt.UNAVAILABLE:return ce.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ce.NOT_FOUND;case Gt.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Gt.ABORTED:return ce.ABORTED;case Gt.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Gt.DATA_LOSS:return ce.DATA_LOSS;default:return ze(39323,{code:n})}}(ot=Gt||(Gt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new Ci([4294967295,4294967295],0);function Zy(n){const e=Y_().encode(n),t=new B_;return t.update(e),new Uint8Array(t.digest())}function ev(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ci([t,s],0),new Ci([a,l],0)]}class op{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new cl(`Invalid padding: ${t}`);if(s<0)throw new cl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new cl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ci.fromNumber(this.fe)}pe(e,t,s){let a=e.add(t.multiply(Ci.fromNumber(s)));return a.compare(zC)===1&&(a=new Ci([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Zy(e),[s,a]=ev(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(s,a,l);if(!this.ye(d))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new op(l,a,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.fe===0)return;const t=Zy(e),[s,a]=ev(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(s,a,l);this.we(d)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Xu(qe.min(),a,new Vt(Je),Qs(),rt())}}class Ml{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ml(s,t,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=a}}class R0{constructor(e,t){this.targetId=e,this.De=t}}class b0{constructor(e,t,s=En.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class tv{constructor(){this.ve=0,this.Ce=nv(),this.Fe=En.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=rt(),t=rt(),s=rt();return this.Ce.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:ze(38017,{changeType:l})}})),new Ml(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=nv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class BC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Qs(),this.je=eu(),this.Je=eu(),this.He=new Vt(Je)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,a)=>{this.nt(a)&&t(a)}))}it(e){const t=e.targetId,s=e.De.count,a=this.st(t);if(a){const l=a.target;if(gf(l))if(s===0){const d=new Oe(l.path);this.Xe(t,d,Vn.newNoDocument(d,qe.min()))}else ht(s===1,20013,{expectedCount:s});else{const d=this.ot(t);if(d!==s){const f=this._t(e),m=f?this.ut(f,e,d):1;if(m!==0){this.rt(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let d,f;try{d=ki(s).toUint8Array()}catch(m){if(m instanceof t0)return bi("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new op(d,a,l)}catch(m){return bi(m instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.fe===0?null:f}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const d=this.We.lt(),f=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),a++)})),a}Pt(e){const t=new Map;this.Ge.forEach(((l,d)=>{const f=this.st(d);if(f){if(l.current&&gf(f.target)){const m=new Oe(f.target.path);this.Tt(m).has(d)||this.It(d,m)||this.Xe(d,m,Vn.newNoDocument(m,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}}));let s=rt();this.Je.forEach(((l,d)=>{let f=!0;d.forEachWhile((m=>{const v=this.st(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.ze.forEach(((l,d)=>d.setReadTime(e)));const a=new Xu(e,t,this.He,this.ze,s);return this.ze=Qs(),this.je=eu(),this.Je=eu(),this.He=new Vt(Je),a}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new tv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new tn(Je),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new tn(Je),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new tv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function eu(){return new Vt(Oe.comparator)}function nv(){return new Vt(Oe.comparator)}const $C={asc:"ASCENDING",desc:"DESCENDING"},WC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HC={and:"AND",or:"OR"};class qC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vf(n,e){return n.useProto3Json||Hu(e)?e:{value:e}}function ju(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function GC(n,e){return ju(n,e.toTimestamp())}function ms(n){return ht(!!n,49232),qe.fromTimestamp((function(t){const s=Ni(t);return new Ct(s.seconds,s.nanos)})(n))}function lp(n,e){return _f(n,e).canonicalString()}function _f(n,e){const t=(function(a){return new It(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function N0(n){const e=It.fromString(n);return ht(L0(e),10190,{key:e.toString()}),e}function wf(n,e){return lp(n.databaseId,e.path)}function Hh(n,e){const t=N0(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(j0(t))}function k0(n,e){return lp(n.databaseId,e)}function KC(n){const e=N0(n);return e.length===4?It.emptyPath():j0(e)}function xf(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function j0(n){return ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function rv(n,e,t){return{name:wf(n,e),fields:t.value.mapValue.fields}}function QC(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ze(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(ht(w===void 0||typeof w=="string",58123),En.fromBase64String(w||"")):(ht(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),En.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(v){const w=v.code===void 0?ce.UNKNOWN:P0(v.code);return new ke(w,v.message||"")})(d);t=new b0(s,a,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Hh(n,s.document.name),l=ms(s.document.updateTime),d=s.document.createTime?ms(s.document.createTime):qe.min(),f=new er({mapValue:{fields:s.document.fields}}),m=Vn.newFoundDocument(a,l,d,f),v=s.targetIds||[],w=s.removedTargetIds||[];t=new pu(v,w,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Hh(n,s.document),l=s.readTime?ms(s.readTime):qe.min(),d=Vn.newNoDocument(a,l),f=s.removedTargetIds||[];t=new pu([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Hh(n,s.document),l=s.removedTargetIds||[];t=new pu([],l,a,null)}else{if(!("filter"in e))return ze(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,d=new FC(a,l),f=s.targetId;t=new R0(f,d)}}return t}function YC(n,e){let t;if(e instanceof Ol)t={update:rv(n,e.key,e.value)};else if(e instanceof ip)t={delete:wf(n,e.key)};else if(e instanceof Bi)t={update:rv(n,e.key,e.data),updateMask:iP(e.fieldMask)};else{if(!(e instanceof LC))return ze(16599,{Rt:e.type});t={verify:wf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,d){const f=d.transform;if(f instanceof Nu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Pl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Rl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ku)return{fieldPath:d.field.canonicalString(),increment:f.Ee};throw ze(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:GC(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ze(27497)})(n,e.precondition)),t}function JC(n,e){return n&&n.length>0?(ht(e!==void 0,14353),n.map((t=>(function(a,l){let d=a.updateTime?ms(a.updateTime):ms(l);return d.isEqual(qe.min())&&(d=ms(l)),new jC(d,a.transformResults||[])})(t,e)))):[]}function XC(n,e){return{documents:[k0(n,e.path)]}}function ZC(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=k0(n,a);const l=(function(v){if(v.length!==0)return V0(_s.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(v){if(v.length!==0)return v.map((w=>(function(C){return{field:ro(C.field),direction:nP(C.dir)}})(w)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=vf(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:a}}function eP(n){let e=KC(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){ht(s===1,65062);const w=t.from[0];w.allDescendants?a=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(E){const C=D0(E);return C instanceof _s&&d0(C)?C.getFilters():[C]})(t.where));let d=[];t.orderBy&&(d=(function(E){return E.map((C=>(function(Q){return new Au(so(Q.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(C)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let C;return C=typeof E=="object"?E.value:E,Hu(C)?null:C})(t.limit));let m=null;t.startAt&&(m=(function(E){const C=!!E.before,$=E.values||[];return new bu($,C)})(t.startAt));let v=null;return t.endAt&&(v=(function(E){const C=!E.before,$=E.values||[];return new bu($,C)})(t.endAt)),_C(e,a,d,l,f,"F",m,v)}function tP(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function D0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=so(t.unaryFilter.field);return en.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=so(t.unaryFilter.field);return en.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=so(t.unaryFilter.field);return en.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=so(t.unaryFilter.field);return en.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(n):n.fieldFilter!==void 0?(function(t){return en.create(so(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return _s.create(t.compositeFilter.filters.map((s=>D0(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(t.compositeFilter.op))})(n):ze(30097,{filter:n})}function nP(n){return $C[n]}function rP(n){return WC[n]}function sP(n){return HC[n]}function ro(n){return{fieldPath:n.canonicalString()}}function so(n){return wn.fromServerFormat(n.fieldPath)}function V0(n){return n instanceof en?(function(t){if(t.op==="=="){if(Wy(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NAN"}};if($y(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Wy(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NOT_NAN"}};if($y(t.value))return{unaryFilter:{field:ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(t.field),op:rP(t.op),value:t.value}}})(n):n instanceof _s?(function(t){const s=t.getFilters().map((a=>V0(a)));return s.length===1?s[0]:{compositeFilter:{op:sP(t.op),filters:s}}})(n):ze(54877,{filter:n})}function iP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function L0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t,s,a,l=qe.min(),d=qe.min(),f=En.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.gt=e}}function oP(n){const e=eP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.Dn=new cP}addToCollectionParentIndex(e,t){return this.Dn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Ai.min())}updateCollectionGroup(e,t,s){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class cP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new tn(It.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new tn(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O0=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(O0,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new go(0)}static ur(){return new go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="LruGarbageCollector",uP=1048576;function av([n,e],[t,s]){const a=Je(n,t);return a===0?Je(e,s):a}class dP{constructor(e){this.Tr=e,this.buffer=new tn(av),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();av(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ie(iv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Io(t)?Ie(iv,"Ignoring IndexedDB error during garbage collection: ",t):await So(t)}await this.Rr(3e5)}))}}class fP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(Wu.ue);const s=new dP(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(sv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,a,l,d,f,m,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,d=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(v=Date.now(),to()<=nt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${a} in `+(f-d)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(v-m)+`ms
Total Duration: ${v-w}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function pP(n,e){return new fP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.changes=new ya((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ae.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&yl(s.mutation,a,hr.empty(),Ct.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,rt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=rt()){const a=la();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let d=ll();return l.forEach(((f,m)=>{d=d.insert(f,m.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=la();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,rt())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,a){let l=Qs();const d=gl(),f=(function(){return gl()})();return t.forEach(((m,v)=>{const w=s.get(v.key);a.has(v.key)&&(w===void 0||w.mutation instanceof Bi)?l=l.insert(v.key,v):w!==void 0?(d.set(v.key,w.mutation.getFieldMask()),yl(w.mutation,v,w.mutation.getFieldMask(),Ct.now())):d.set(v.key,hr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,w)=>d.set(v,w))),t.forEach(((v,w)=>{var E;return f.set(v,new gP(w,(E=d.get(v))!==null&&E!==void 0?E:null))})),f)))}recalculateAndSaveOverlays(e,t){const s=gl();let a=new Vt(((d,f)=>d-f)),l=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let w=s.get(m)||hr.empty();w=f.applyToLocalView(v,w),s.set(m,w);const E=(a.get(f.batchId)||rt()).add(m);a=a.insert(f.batchId,E)}))})).next((()=>{const d=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,w=m.value,E=_0();w.forEach((C=>{if(!l.has(C)){const $=I0(t.get(C),s.get(C));$!==null&&E.set(C,$),l=l.add(C)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,E))}return ae.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(d){return Oe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const d=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ae.resolve(la());let f=Tl,m=l;return d.next((v=>ae.forEach(v,((w,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(w)?ae.resolve():this.remoteDocumentCache.getEntry(e,w).next((C=>{m=m.insert(w,C)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,rt()))).next((w=>({batchId:f,changes:v0(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next((s=>{let a=ll();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let d=ll();return this.indexManager.getCollectionParents(e,l).next((f=>ae.forEach(f,(m=>{const v=(function(E,C){return new Gu(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next((w=>{w.forEach(((E,C)=>{d=d.insert(E,C)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((d=>{l.forEach(((m,v)=>{const w=v.getKey();d.get(w)===null&&(d=d.insert(w,Vn.newInvalidDocument(w)))}));let f=ll();return d.forEach(((m,v)=>{const w=l.get(m);w!==void 0&&yl(w.mutation,v,hr.empty(),Ct.now()),Qu(t,v)&&(f=f.insert(m,v))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ms(a.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(a){return{name:a.name,query:oP(a.bundledQuery),readTime:ms(a.readTime)}})(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.overlays=new Vt(Oe.comparator),this.kr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const s=la();return ae.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.wt(e,t,l)})),ae.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(s)),ae.resolve()}getOverlaysForCollection(e,t,s){const a=la(),l=t.length+1,d=new Oe(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>s&&a.set(m.getKey(),m)}return ae.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Vt(((v,w)=>v-w));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let w=l.get(v.largestBatchId);w===null&&(w=la(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const f=la(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,w)=>f.set(v,w))),!(f.size()>=a)););return ae.resolve(f)}wt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const d=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new MC(t,s));let l=this.kr.get(t);l===void 0&&(l=rt(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.sessionToken=En.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.qr=new tn(dn.Qr),this.$r=new tn(dn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new dn(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new dn(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new Oe(new It([])),s=new dn(t,e),a=new dn(t,e+1),l=[];return this.$r.forEachInRange([s,a],(d=>{this.Wr(d),l.push(d.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Oe(new It([])),s=new dn(t,e),a=new dn(t,e+1);let l=rt();return this.$r.forEachInRange([s,a],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new dn(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class dn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Oe.comparator(e.key,t.key)||Je(e.Hr,t.Hr)}static Ur(e,t){return Je(e.Hr,t.Hr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new tn(dn.Qr)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new OC(l,t,s,a);this.mutationQueue.push(d);for(const f of a)this.Yr=this.Yr.add(new dn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ae.resolve(d)}lookupMutationBatch(e,t){return ae.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),l=a<0?0:a;return ae.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Xf:this.er-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new dn(t,0),a=new dn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,a],(d=>{const f=this.Zr(d.Hr);l.push(f)})),ae.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new tn(Je);return t.forEach((a=>{const l=new dn(a,0),d=new dn(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],(f=>{s=s.add(f.Hr)}))})),ae.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Oe.isDocumentKey(l)||(l=l.child(""));const d=new dn(new Oe(l),0);let f=new tn(Je);return this.Yr.forEachWhile((m=>{const v=m.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(f=f.add(m.Hr)),!0)}),d),ae.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ht(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return ae.forEach(t.mutations,(a=>{const l=new dn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new dn(t,0),a=this.Yr.firstAfterOrEqual(s);return ae.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.ni=e,this.docs=(function(){return new Vt(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,d=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ae.resolve(s?s.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let s=Qs();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Vn.newInvalidDocument(a))})),ae.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=Qs();const d=t.path,f=new Oe(d.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:w}}=m.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||JI(YI(w),s)<=0||(a.has(w.key)||Qu(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return ae.resolve(l)}getAllFromCollectionGroup(e,t,s,a){ze(9500)}ri(e,t){return ae.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new TP(this)}getSize(e){return ae.resolve(this.size)}}class TP extends mP{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)})),ae.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.persistence=e,this.ii=new ya((t=>tp(t)),np),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.si=0,this.oi=new cp,this.targetCount=0,this._i=go.ar()}forEachTarget(e,t){return this.ii.forEach(((s,a)=>t(a))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),ae.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new go(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.hr(t),ae.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.ii.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),ae.waitFor(l).next((()=>a))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return ae.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),ae.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((d=>{l.push(a.markPotentiallyOrphaned(e,d))})),ae.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return ae.resolve(s)}containsKey(e,t){return ae.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Wu(0),this.ci=!1,this.ci=!0,this.li=new wP,this.referenceDelegate=e(this),this.hi=new SP(this),this.indexManager=new lP,this.remoteDocumentCache=(function(a){return new EP(a)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new aP(t),this.Ti=new vP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _P,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new xP(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){Ie("MemoryPersistence","Starting transaction:",e);const a=new IP(this.ui.next());return this.referenceDelegate.Ii(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return ae.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class IP extends ZI{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Ai=new cp,this.Ri=null}static Vi(e){return new up(e)}get mi(){if(this.Ri)return this.Ri;throw ze(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),ae.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((a=>this.mi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.mi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.mi,(s=>{const a=Oe.fromPath(s);return this.fi(e,a).next((l=>{l||t.removeEntry(a,qe.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ae.or([()=>ae.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Du{constructor(e,t){this.persistence=e,this.gi=new ya((s=>nC(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=pP(this,t)}static Vi(e,t){return new Du(e,t)}Ii(){}di(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return ae.forEach(this.gi,((s,a)=>this.Sr(e,s,a).next((l=>l?ae.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,(d=>this.Sr(e,d,t).next((f=>{f||(s++,l.removeEntry(d,qe.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ae.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=du(e.data.value)),t}Sr(e,t,s){return ae.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return ae.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=a}static Es(e,t){let s=rt(),a=rt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new dp(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return aT()?8:eC(Ln())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ps(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ys(e,t,a,s).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new CP;return this.ws(e,t,d).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,d,f.size)}))})).next((()=>l.result))}Ss(e,t,s,a){return s.documentReadCount<this.Vs?(to()<=nt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",no(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ae.resolve()):(to()<=nt.DEBUG&&Ie("QueryEngine","Query:",no(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(to()<=nt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",no(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(t))):ae.resolve())}ps(e,t){if(Ky(t))return ae.resolve(null);let s=ps(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=yf(t,null,"F"),s=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const d=rt(...l);return this.gs.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((m=>{const v=this.bs(t,f);return this.Ds(t,v,d,m.readTime)?this.ps(e,yf(t,null,"F")):this.vs(e,v,t,m)}))))})))))}ys(e,t,s,a){return Ky(t)||a.isEqual(qe.min())?ae.resolve(null):this.gs.getDocuments(e,s).next((l=>{const d=this.bs(t,l);return this.Ds(t,d,s,a)?ae.resolve(null):(to()<=nt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),no(t)),this.vs(e,d,t,QI(a,Tl)).next((f=>f)))}))}bs(e,t){let s=new tn(g0(e));return t.forEach(((a,l)=>{Qu(e,l)&&(s=s.add(l))})),s}Ds(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,t,s){return to()<=nt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",no(t)),this.gs.getDocumentsMatchingQuery(e,t,Ai.min(),s)}vs(e,t,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="LocalStore",RP=3e8;class bP{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new Vt(Je),this.Ms=new ya((l=>tp(l)),np),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function AP(n,e,t,s){return new bP(n,e,t,s)}async function F0(n,e){const t=Ge(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const d=[],f=[];let m=rt();for(const v of a){d.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}for(const v of l){f.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(s,m).next((v=>({Bs:v,removedBatchIds:d,addedBatchIds:f})))}))}))}function NP(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,m,v,w){const E=v.batch,C=E.keys();let $=ae.resolve();return C.forEach((Q=>{$=$.next((()=>w.getEntry(m,Q))).next((te=>{const W=v.docVersions.get(Q);ht(W!==null,48541),te.version.compareTo(W)<0&&(E.applyToRemoteDocument(te,v),te.isValidDocument()&&(te.setReadTime(v.commitVersion),w.addEntry(te)))}))})),$.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let m=rt();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(m=m.add(f.batch.mutations[v].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function U0(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function kP(n,e){const t=Ge(n),s=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const f=[];e.targetChanges.forEach(((w,E)=>{const C=a.get(E);if(!C)return;f.push(t.hi.removeMatchingKeys(l,w.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,w.addedDocuments,E))));let $=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?$=$.withResumeToken(En.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):w.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(w.resumeToken,s)),a=a.insert(E,$),(function(te,W,ie){return te.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=RP?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(C,$,w)&&f.push(t.hi.updateTargetData(l,$))}));let m=Qs(),v=rt();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(jP(l,d,e.documentUpdates).next((w=>{m=w.Ls,v=w.ks}))),!s.isEqual(qe.min())){const w=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(w)}return ae.waitFor(f).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.Fs=a,l)))}function jP(n,e,t){let s=rt(),a=rt();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let d=Qs();return t.forEach(((f,m)=>{const v=l.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(qe.min())?(e.removeEntry(f,m.readTime),d=d.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),d=d.insert(f,m)):Ie(hp,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)})),{Ls:d,ks:a}}))}function DP(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Xf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function VP(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.hi.getTargetData(s,e).next((l=>l?(a=l,ae.resolve(a)):t.hi.allocateTargetId(s).next((d=>(a=new xi(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function Ef(n,e,t){const s=Ge(n),a=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(d=>s.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!Io(d))throw d;Ie(hp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function ov(n,e,t){const s=Ge(n);let a=qe.min(),l=rt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(m,v,w){const E=Ge(m),C=E.Ms.get(w);return C!==void 0?ae.resolve(E.Fs.get(C)):E.hi.getTargetData(v,w)})(s,d,ps(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(d,f.targetId).next((m=>{l=m}))})).next((()=>s.Cs.getDocumentsMatchingQuery(d,e,t?a:qe.min(),t?l:rt()))).next((f=>(LP(s,EC(e),f),{documents:f,qs:l})))))}function LP(n,e,t){let s=n.xs.get(e)||qe.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.xs.set(e,s)}class lv{constructor(){this.activeTargetIds=RC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OP{constructor(){this.Fo=new lv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new lv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="ConnectivityMonitor";class uv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ie(cv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ie(cv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function Tf(){return tu===null?tu=(function(){return 268435456+Math.round(2147483648*Math.random())})():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="RestConnection",FP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===Pu?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,l){const d=Tf(),f=this.Go(e,t.toUriEncodedString());Ie(qh,`Sending RPC '${e}' ${d}:`,f,s);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,a,l);const{host:v}=new URL(f),w=wo(v);return this.jo(e,f,m,s,w).then((E=>(Ie(qh,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw bi(qh,`RPC '${e}' ${d} failed with error: `,E,"url: ",f,"request:",s),E}))}Jo(e,t,s,a,l,d){return this.Wo(e,t,s,a,l)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+To})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}Go(e,t){const s=FP[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class BP extends UP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,a,l){const d=Tf();return new Promise(((f,m)=>{const v=new $_;v.setWithCredentials(!0),v.listenOnce(W_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case uu.NO_ERROR:const E=v.getResponseJson();Ie(jn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),f(E);break;case uu.TIMEOUT:Ie(jn,`RPC '${e}' ${d} timed out`),m(new ke(ce.DEADLINE_EXCEEDED,"Request time out"));break;case uu.HTTP_ERROR:const C=v.getStatus();if(Ie(jn,`RPC '${e}' ${d} failed with status:`,C,"response text:",v.getResponseText()),C>0){let $=v.getResponseJson();Array.isArray($)&&($=$[0]);const Q=$==null?void 0:$.error;if(Q&&Q.status&&Q.message){const te=(function(ie){const se=ie.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(se)>=0?se:ce.UNKNOWN})(Q.status);m(new ke(te,Q.message))}else m(new ke(ce.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new ke(ce.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{Ie(jn,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(a);Ie(jn,`RPC '${e}' ${d} sending request:`,a),v.send(t,"POST",w,s,15)}))}P_(e,t,s){const a=Tf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=G_(),f=q_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const w=l.join("");Ie(jn,`Creating RPC '${e}' stream ${a}: ${w}`,m);const E=d.createWebChannel(w,m);this.T_(E);let C=!1,$=!1;const Q=new zP({Ho:W=>{$?Ie(jn,`Not sending because RPC '${e}' stream ${a} is closed:`,W):(C||(Ie(jn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),C=!0),Ie(jn,`RPC '${e}' stream ${a} sending:`,W),E.send(W))},Yo:()=>E.close()}),te=(W,ie,se)=>{W.listen(ie,(oe=>{try{se(oe)}catch(me){setTimeout((()=>{throw me}),0)}}))};return te(E,ol.EventType.OPEN,(()=>{$||(Ie(jn,`RPC '${e}' stream ${a} transport opened.`),Q.s_())})),te(E,ol.EventType.CLOSE,(()=>{$||($=!0,Ie(jn,`RPC '${e}' stream ${a} transport closed`),Q.__(),this.I_(E))})),te(E,ol.EventType.ERROR,(W=>{$||($=!0,bi(jn,`RPC '${e}' stream ${a} transport errored. Name:`,W.name,"Message:",W.message),Q.__(new ke(ce.UNAVAILABLE,"The operation could not be completed")))})),te(E,ol.EventType.MESSAGE,(W=>{var ie;if(!$){const se=W.data[0];ht(!!se,16349);const oe=se,me=(oe==null?void 0:oe.error)||((ie=oe[0])===null||ie===void 0?void 0:ie.error);if(me){Ie(jn,`RPC '${e}' stream ${a} received error:`,me);const we=me.status;let he=(function(j){const A=Gt[j];if(A!==void 0)return P0(A)})(we),V=me.message;he===void 0&&(he=ce.INTERNAL,V="Unknown error status: "+we+" with message "+me.message),$=!0,Q.__(new ke(he,V)),E.close()}else Ie(jn,`RPC '${e}' stream ${a} received:`,se),Q.a_(se)}})),te(f,H_.STAT_EVENT,(W=>{W.stat===df.PROXY?Ie(jn,`RPC '${e}' stream ${a} detected buffering proxy`):W.stat===df.NOPROXY&&Ie(jn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{Q.o_()}),0),Q}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(n){return new qC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-s);a>0&&Ie("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="PersistentStream";class B0{constructor(e,t,s,a,l,d,f,m){this.Fi=e,this.w_=s,this.S_=a,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new z0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Ks(t.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.b_===t&&this.W_(s,a)}),(s=>{e((()=>{const a=new ke(ce.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{s((()=>this.G_(a)))})),this.stream.onMessage((a=>{s((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ie(dv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Ie(dv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $P extends B0{constructor(e,t,s,a,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=QC(this.serializer,e),s=(function(l){if(!("targetChange"in l))return qe.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?qe.min():d.readTime?ms(d.readTime):qe.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=xf(this.serializer),t.addTarget=(function(l,d){let f;const m=d.target;if(f=gf(m)?{documents:XC(l,m)}:{query:ZC(l,m).Vt},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=A0(l,d.resumeToken);const v=vf(l,d.expectedCount);v!==null&&(f.expectedCount=v)}else if(d.snapshotVersion.compareTo(qe.min())>0){f.readTime=ju(l,d.snapshotVersion.toTimestamp());const v=vf(l,d.expectedCount);v!==null&&(f.expectedCount=v)}return f})(this.serializer,e);const s=tP(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=xf(this.serializer),t.removeTarget=e,this.k_(t)}}class WP extends B0{constructor(e,t,s,a,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=JC(e.writeResults,e.commitTime),s=ms(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=xf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>YC(this.serializer,s)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{}class qP extends HP{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new ke(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,_f(t,s),a,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(ce.UNKNOWN,l.toString())}))}Jo(e,t,s,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Jo(e,_f(t,s),a,d,f,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ke(ce.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class GP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ks(t),this._a=!1):Ie("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="RemoteStore";class KP{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((d=>{s.enqueueAndForget((async()=>{va(this)&&(Ie(ma,"Restarting streams for network reachability change."),await(async function(m){const v=Ge(m);v.Ia.add(4),await Fl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await ed(v)})(this))}))})),this.Aa=new GP(s,a)}}async function ed(n){if(va(n))for(const e of n.da)await e(!0)}async function Fl(n){for(const e of n.da)await e(!1)}function $0(n,e){const t=Ge(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),gp(t)?mp(t):Co(t).x_()&&pp(t,e))}function fp(n,e){const t=Ge(n),s=Co(t);t.Ta.delete(e),s.x_()&&W0(t,e),t.Ta.size===0&&(s.x_()?s.B_():va(t)&&t.Aa.set("Unknown"))}function pp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Co(n).H_(e)}function W0(n,e){n.Ra.$e(e),Co(n).Y_(e)}function mp(n){n.Ra=new BC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Co(n).start(),n.Aa.aa()}function gp(n){return va(n)&&!Co(n).M_()&&n.Ta.size>0}function va(n){return Ge(n).Ia.size===0}function H0(n){n.Ra=void 0}async function QP(n){n.Aa.set("Online")}async function YP(n){n.Ta.forEach(((e,t)=>{pp(n,e)}))}async function JP(n,e){H0(n),gp(n)?(n.Aa.la(e),mp(n)):n.Aa.set("Unknown")}async function XP(n,e,t){if(n.Aa.set("Online"),e instanceof b0&&e.state===2&&e.cause)try{await(async function(a,l){const d=l.cause;for(const f of l.targetIds)a.Ta.has(f)&&(await a.remoteSyncer.rejectListen(f,d),a.Ta.delete(f),a.Ra.removeTarget(f))})(n,e)}catch(s){Ie(ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vu(n,s)}else if(e instanceof pu?n.Ra.Ye(e):e instanceof R0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(qe.min()))try{const s=await U0(n.localStore);t.compareTo(s)>=0&&await(function(l,d){const f=l.Ra.Pt(d);return f.targetChanges.forEach(((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const w=l.Ta.get(v);w&&l.Ta.set(v,w.withResumeToken(m.resumeToken,d))}})),f.targetMismatches.forEach(((m,v)=>{const w=l.Ta.get(m);if(!w)return;l.Ta.set(m,w.withResumeToken(En.EMPTY_BYTE_STRING,w.snapshotVersion)),W0(l,m);const E=new xi(w.target,m,v,w.sequenceNumber);pp(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){Ie(ma,"Failed to raise snapshot:",s),await Vu(n,s)}}async function Vu(n,e,t){if(!Io(e))throw e;n.Ia.add(1),await Fl(n),n.Aa.set("Offline"),t||(t=()=>U0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ie(ma,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await ed(n)}))}function q0(n,e){return e().catch((t=>Vu(n,t,e)))}async function td(n){const e=Ge(n),t=Di(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Xf;for(;ZP(e);)try{const a=await DP(e.localStore,s);if(a===null){e.Pa.length===0&&t.B_();break}s=a.batchId,eR(e,a)}catch(a){await Vu(e,a)}G0(e)&&K0(e)}function ZP(n){return va(n)&&n.Pa.length<10}function eR(n,e){n.Pa.push(e);const t=Di(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function G0(n){return va(n)&&!Di(n).M_()&&n.Pa.length>0}function K0(n){Di(n).start()}async function tR(n){Di(n).na()}async function nR(n){const e=Di(n);for(const t of n.Pa)e.X_(t.mutations)}async function rR(n,e,t){const s=n.Pa.shift(),a=ap.from(s,e,t);await q0(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await td(n)}async function sR(n,e){e&&Di(n).Z_&&await(async function(s,a){if((function(d){return UC(d)&&d!==ce.ABORTED})(a.code)){const l=s.Pa.shift();Di(s).N_(),await q0(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await td(s)}})(n,e),G0(n)&&K0(n)}async function hv(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Ie(ma,"RemoteStore received new credentials");const s=va(t);t.Ia.add(3),await Fl(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await ed(t)}async function iR(n,e){const t=Ge(n);e?(t.Ia.delete(2),await ed(t)):e||(t.Ia.add(2),await Fl(t),t.Aa.set("Unknown"))}function Co(n){return n.Va||(n.Va=(function(t,s,a){const l=Ge(t);return l.ia(),new $P(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:QP.bind(null,n),e_:YP.bind(null,n),n_:JP.bind(null,n),J_:XP.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),gp(n)?mp(n):n.Aa.set("Unknown")):(await n.Va.stop(),H0(n))}))),n.Va}function Di(n){return n.ma||(n.ma=(function(t,s,a){const l=Ge(t);return l.ia(),new WP(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:tR.bind(null,n),n_:sR.bind(null,n),ea:nR.bind(null,n),ta:rR.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await td(n)):(await n.ma.stop(),n.Pa.length>0&&(Ie(ma,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const d=Date.now()+s,f=new yp(e,t,d,a,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(n,e){if(Ks("AsyncQueue",`${e}: ${n}`),Io(n))return new ke(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{static emptySet(e){return new co(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Oe.comparator(t.key,s.key):(t,s)=>Oe.comparator(t.key,s.key),this.keyedMap=ll(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(){this.fa=new Vt(Oe.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ze(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class yo{constructor(e,t,s,a,l,d,f,m,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,a,l){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new yo(e,t,co.emptySet(t),d,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class oR{constructor(){this.queries=pv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const a=Ge(t),l=a.queries;a.queries=pv(),l.forEach(((d,f)=>{for(const m of f.wa)m.onError(s)}))})(this,new ke(ce.ABORTED,"Firestore shutting down"))}}function pv(){return new ya((n=>m0(n)),Ku)}async function Q0(n,e){const t=Ge(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.ba()&&(s=2):(l=new aR,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(a,!0);break;case 1:l.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(d){const f=vp(d,`Initialization of query '${no(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&_p(t)}async function Y0(n,e){const t=Ge(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function lR(n,e){const t=Ge(n);let s=!1;for(const a of e){const l=a.query,d=t.queries.get(l);if(d){for(const f of d.wa)f.Ca(a)&&(s=!0);d.ya=a}}s&&_p(t)}function cR(n,e,t){const s=Ge(n),a=s.queries.get(e);if(a)for(const l of a.wa)l.onError(t);s.queries.delete(e)}function _p(n){n.Da.forEach((e=>{e.next()}))}var Sf,mv;(mv=Sf||(Sf={})).Fa="default",mv.Cache="cache";class J0{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new yo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e){this.key=e}}class Z0{constructor(e){this.key=e}}class uR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=rt(),this.mutatedKeys=rt(),this.Xa=g0(e),this.eu=new co(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new fv,a=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((w,E)=>{const C=a.get(w),$=Qu(this.query,E)?E:null,Q=!!C&&this.mutatedKeys.has(C.key),te=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let W=!1;C&&$?C.data.isEqual($.data)?Q!==te&&(s.track({type:3,doc:$}),W=!0):this.iu(C,$)||(s.track({type:2,doc:$}),W=!0,(m&&this.Xa($,m)>0||v&&this.Xa($,v)<0)&&(f=!0)):!C&&$?(s.track({type:0,doc:$}),W=!0):C&&!$&&(s.track({type:1,doc:C}),W=!0,(m||v)&&(f=!0)),W&&($?(d=d.add($),l=te?l.add(w):l.delete(w)):(d=d.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{eu:d,ru:s,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((w,E)=>(function($,Q){const te=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{At:W})}};return te($)-te(Q)})(w.type,E.type)||this.Xa(w.doc,E.doc))),this.su(s),a=a!=null&&a;const f=t&&!a?this.ou():[],m=this.Za.size===0&&this.current&&!a?1:0,v=m!==this.Ya;return this.Ya=m,d.length!==0||v?{snapshot:new yo(this.query,e.eu,l,d,e.mutatedKeys,m===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new fv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=rt(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new Z0(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new X0(s))})),t}uu(e){this.Ha=e.qs,this.Za=rt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return yo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const wp="SyncEngine";class dR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class hR{constructor(e){this.key=e,this.lu=!1}}class fR{constructor(e,t,s,a,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new ya((f=>m0(f)),Ku),this.Tu=new Map,this.Iu=new Set,this.du=new Vt(Oe.comparator),this.Eu=new Map,this.Au=new cp,this.Ru={},this.Vu=new Map,this.mu=go.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function pR(n,e,t=!0){const s=iw(n);let a;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await ew(s,e,t,!0),a}async function mR(n,e){const t=iw(n);await ew(t,e,!0,!1)}async function ew(n,e,t,s){const a=await VP(n.localStore,ps(e)),l=a.targetId,d=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await gR(n,e,l,d==="current",a.resumeToken)),n.isPrimaryClient&&t&&$0(n.remoteStore,a),f}async function gR(n,e,t,s,a){n.gu=(E,C,$)=>(async function(te,W,ie,se){let oe=W.view.nu(ie);oe.Ds&&(oe=await ov(te.localStore,W.query,!1).then((({documents:V})=>W.view.nu(V,oe))));const me=se&&se.targetChanges.get(W.targetId),we=se&&se.targetMismatches.get(W.targetId)!=null,he=W.view.applyChanges(oe,te.isPrimaryClient,me,we);return yv(te,W.targetId,he._u),he.snapshot})(n,E,C,$);const l=await ov(n.localStore,e,!0),d=new uR(e,l.qs),f=d.nu(l.documents),m=Ml.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),v=d.applyChanges(f,n.isPrimaryClient,m);yv(n,t,v._u);const w=new dR(e,t,d);return n.Pu.set(e,w),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),v.snapshot}async function yR(n,e,t){const s=Ge(n),a=s.Pu.get(e),l=s.Tu.get(a.targetId);if(l.length>1)return s.Tu.set(a.targetId,l.filter((d=>!Ku(d,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Ef(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&fp(s.remoteStore,a.targetId),If(s,a.targetId)})).catch(So)):(If(s,a.targetId),await Ef(s.localStore,a.targetId,!0))}async function vR(n,e){const t=Ge(n),s=t.Pu.get(e),a=t.Tu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),fp(t.remoteStore,s.targetId))}async function _R(n,e,t){const s=CR(n);try{const a=await(function(d,f){const m=Ge(d),v=Ct.now(),w=f.reduce((($,Q)=>$.add(Q.key)),rt());let E,C;return m.persistence.runTransaction("Locally write mutations","readwrite",($=>{let Q=Qs(),te=rt();return m.Os.getEntries($,w).next((W=>{Q=W,Q.forEach(((ie,se)=>{se.isValidDocument()||(te=te.add(ie))}))})).next((()=>m.localDocuments.getOverlayedDocuments($,Q))).next((W=>{E=W;const ie=[];for(const se of f){const oe=VC(se,E.get(se.key).overlayedDocument);oe!=null&&ie.push(new Bi(se.key,oe,l0(oe.value.mapValue),Sr.exists(!0)))}return m.mutationQueue.addMutationBatch($,v,ie,f)})).next((W=>{C=W;const ie=W.applyToLocalDocumentSet(E,te);return m.documentOverlayCache.saveOverlays($,W.batchId,ie)}))})).then((()=>({batchId:C.batchId,changes:v0(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(d,f,m){let v=d.Ru[d.currentUser.toKey()];v||(v=new Vt(Je)),v=v.insert(f,m),d.Ru[d.currentUser.toKey()]=v})(s,a.batchId,t),await Ul(s,a.changes),await td(s.remoteStore)}catch(a){const l=vp(a,"Failed to persist write");t.reject(l)}}async function tw(n,e){const t=Ge(n);try{const s=await kP(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const d=t.Eu.get(l);d&&(ht(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?d.lu=!0:a.modifiedDocuments.size>0?ht(d.lu,14607):a.removedDocuments.size>0&&(ht(d.lu,42227),d.lu=!1))})),await Ul(t,s,e)}catch(s){await So(s)}}function gv(n,e,t){const s=Ge(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Pu.forEach(((l,d)=>{const f=d.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(d,f){const m=Ge(d);m.onlineState=f;let v=!1;m.queries.forEach(((w,E)=>{for(const C of E.wa)C.va(f)&&(v=!0)})),v&&_p(m)})(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function wR(n,e,t){const s=Ge(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Eu.get(e),l=a&&a.key;if(l){let d=new Vt(Oe.comparator);d=d.insert(l,Vn.newNoDocument(l,qe.min()));const f=rt().add(l),m=new Xu(qe.min(),new Map,new Vt(Je),d,f);await tw(s,m),s.du=s.du.remove(l),s.Eu.delete(e),xp(s)}else await Ef(s.localStore,e,!1).then((()=>If(s,e,t))).catch(So)}async function xR(n,e){const t=Ge(n),s=e.batch.batchId;try{const a=await NP(t.localStore,e);rw(t,s,null),nw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ul(t,a)}catch(a){await So(a)}}async function ER(n,e,t){const s=Ge(n);try{const a=await(function(d,f){const m=Ge(d);return m.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return m.mutationQueue.lookupMutationBatch(v,f).next((E=>(ht(E!==null,37113),w=E.keys(),m.mutationQueue.removeMutationBatch(v,E)))).next((()=>m.mutationQueue.performConsistencyCheck(v))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(v,w,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>m.localDocuments.getDocuments(v,w)))}))})(s.localStore,e);rw(s,e,t),nw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ul(s,a)}catch(a){await So(a)}}function nw(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function rw(n,e,t){const s=Ge(n);let a=s.Ru[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function If(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((s=>{n.Au.containsKey(s)||sw(n,s)}))}function sw(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(fp(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),xp(n))}function yv(n,e,t){for(const s of t)s instanceof X0?(n.Au.addReference(s.key,e),TR(n,s)):s instanceof Z0?(Ie(wp,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||sw(n,s.key)):ze(19791,{yu:s})}function TR(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(Ie(wp,"New document in limbo: "+t),n.Iu.add(s),xp(n))}function xp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Oe(It.fromString(e)),s=n.mu.next();n.Eu.set(s,new hR(t)),n.du=n.du.insert(t,s),$0(n.remoteStore,new xi(ps(rp(t.path)),s,"TargetPurposeLimboResolution",Wu.ue))}}async function Ul(n,e,t){const s=Ge(n),a=[],l=[],d=[];s.Pu.isEmpty()||(s.Pu.forEach(((f,m)=>{d.push(s.gu(m,e,t).then((v=>{var w;if((v||t)&&s.isPrimaryClient){const E=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(m.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(v){a.push(v);const E=dp.Es(m.targetId,v);l.push(E)}})))})),await Promise.all(d),s.hu.J_(a),await(async function(m,v){const w=Ge(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ae.forEach(v,(C=>ae.forEach(C.Is,($=>w.persistence.referenceDelegate.addReference(E,C.targetId,$))).next((()=>ae.forEach(C.ds,($=>w.persistence.referenceDelegate.removeReference(E,C.targetId,$)))))))))}catch(E){if(!Io(E))throw E;Ie(hp,"Failed to update sequence numbers: "+E)}for(const E of v){const C=E.targetId;if(!E.fromCache){const $=w.Fs.get(C),Q=$.snapshotVersion,te=$.withLastLimboFreeSnapshotVersion(Q);w.Fs=w.Fs.insert(C,te)}}})(s.localStore,l))}async function SR(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Ie(wp,"User change. New user:",e.toKey());const s=await F0(t.localStore,e);t.currentUser=e,(function(l,d){l.Vu.forEach((f=>{f.forEach((m=>{m.reject(new ke(ce.CANCELLED,d))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ul(t,s.Bs)}}function IR(n,e){const t=Ge(n),s=t.Eu.get(e);if(s&&s.lu)return rt().add(s.key);{let a=rt();const l=t.Tu.get(e);if(!l)return a;for(const d of l){const f=t.Pu.get(d);a=a.unionWith(f.view.tu)}return a}}function iw(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wR.bind(null,e),e.hu.J_=lR.bind(null,e.eventManager),e.hu.pu=cR.bind(null,e.eventManager),e}function CR(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ER.bind(null,e),e}class Lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return AP(this.persistence,new PP,e.initialUser,this.serializer)}Du(e){return new M0(up.Vi,this.serializer)}bu(e){return new OP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lu.provider={build:()=>new Lu};class PR extends Lu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ht(this.persistence.referenceDelegate instanceof Du,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new hP(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new M0((s=>Du.Vi(s,t)),this.serializer)}}class Cf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=SR.bind(null,this.syncEngine),await iR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oR})()}createDatastore(e){const t=Zu(e.databaseInfo.databaseId),s=(function(l){return new BP(l)})(e.databaseInfo);return(function(l,d,f,m){return new qP(l,d,f,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,d,f){return new KP(s,a,l,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>gv(this.syncEngine,t,0)),(function(){return uv.C()?new uv:new MP})())}createSyncEngine(e,t){return(function(a,l,d,f,m,v,w){const E=new fR(a,l,d,f,m,v);return w&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ge(a);Ie(ma,"RemoteStore shutting down."),l.Ia.add(5),await Fl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Cf.provider={build:()=>new Cf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ks("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class RR{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Dn.UNAUTHENTICATED,this.clientId=Yf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async d=>{Ie(Vi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Ie(Vi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=vp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Kh(n,e){n.asyncQueue.verifyOperationInProgress(),Ie(Vi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await F0(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>{bi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Ie("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{bi("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),n._offlineComponents=e}async function vv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await bR(n);Ie(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>hv(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>hv(e.remoteStore,a))),n._onlineComponents=e}async function bR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(Vi,"Using user provided OfflineComponentProvider");try{await Kh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;bi("Error using user provided cache. Falling back to memory cache: "+t),await Kh(n,new Lu)}}else Ie(Vi,"Using default OfflineComponentProvider"),await Kh(n,new PR(void 0));return n._offlineComponents}async function ow(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(Vi,"Using user provided OnlineComponentProvider"),await vv(n,n._uninitializedComponentsProvider._online)):(Ie(Vi,"Using default OnlineComponentProvider"),await vv(n,new Cf))),n._onlineComponents}function AR(n){return ow(n).then((e=>e.syncEngine))}async function lw(n){const e=await ow(n),t=e.eventManager;return t.onListen=pR.bind(null,e.syncEngine),t.onUnlisten=yR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vR.bind(null,e.syncEngine),t}function NR(n,e,t={}){const s=new Hs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,f,m,v){const w=new aw({next:C=>{w.Ou(),d.enqueueAndForget((()=>Y0(l,E)));const $=C.docs.has(f);!$&&C.fromCache?v.reject(new ke(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&C.fromCache&&m&&m.source==="server"?v.reject(new ke(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),E=new J0(rp(f.path),w,{includeMetadataChanges:!0,ka:!0});return Q0(l,E)})(await lw(n),n.asyncQueue,e,t,s))),s.promise}function kR(n,e,t={}){const s=new Hs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,f,m,v){const w=new aw({next:C=>{w.Ou(),d.enqueueAndForget((()=>Y0(l,E))),C.fromCache&&m.source==="server"?v.reject(new ke(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(C)},error:C=>v.reject(C)}),E=new J0(f,w,{includeMetadataChanges:!0,ka:!0});return Q0(l,E)})(await lw(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="firestore.googleapis.com",wv=!0;class xv{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uw,this.ssl=wv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:wv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uP)throw new ke(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ke(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ke(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ke(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new FI;switch(s.type){case"firstParty":return new $I(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ke(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=_v.get(t);s&&(Ie("ComponentProvider","Removing Datastore"),_v.delete(t),s.terminate())})(this),Promise.resolve()}}function jR(n,e,t,s={}){var a;n=Hr(n,nd);const l=wo(e),d=n._getSettings(),f=Object.assign(Object.assign({},d),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;l&&(Xv(`https://${m}`),Zv("Firestore",!0)),d.host!==uw&&d.host!==m&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:m,ssl:l,emulatorOptions:s});if(!ua(v,f)&&(n._setSettings(v),s.mockUserToken)){let w,E;if(typeof s.mockUserToken=="string")w=s.mockUserToken,E=Dn.MOCK_USER;else{w=JE(s.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new ke(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Dn(C)}n._authCredentials=new UI(new Q_(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new rd(this.firestore,e,this._query)}}class Qt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}toJSON(){return{type:Qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ll(t,Qt._jsonSchema))return new Qt(e,s||null,new Oe(It.fromString(t.referencePath)))}}Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:Kt("string",Qt._jsonSchemaVersion),referencePath:Kt("string")};class Pi extends rd{constructor(e,t,s){super(e,t,rp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Oe(e))}withConverter(e){return new Pi(this.firestore,e,this._path)}}function Zn(n,e,...t){if(n=xn(n),J_("collection","path",e),n instanceof nd){const s=It.fromString(e,...t);return Vy(s),new Pi(n,null,s)}{if(!(n instanceof Qt||n instanceof Pi))throw new ke(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(It.fromString(e,...t));return Vy(s),new Pi(n.firestore,null,s)}}function St(n,e,...t){if(n=xn(n),arguments.length===1&&(e=Yf.newId()),J_("doc","path",e),n instanceof nd){const s=It.fromString(e,...t);return Dy(s),new Qt(n,null,new Oe(s))}{if(!(n instanceof Qt||n instanceof Pi))throw new ke(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(It.fromString(e,...t));return Dy(s),new Qt(n.firestore,n instanceof Pi?n.converter:null,new Oe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="AsyncQueue";class Tv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new z0(this,"async_queue_retry"),this.oc=()=>{const s=Gh();s&&Ie(Ev,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Gh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Gh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Hs;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Io(e))throw e;Ie(Ev,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,Ks("INTERNAL UNHANDLED ERROR: ",Sv(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=yp.createAndSchedule(this,e,t,s,(l=>this.lc(l)));return this.ec.push(a),a}ac(){this.tc&&ze(47125,{hc:Sv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Sv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class _a extends nd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Tv,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tv(e),this._firestoreClient=void 0,await e}}}function DR(n,e){const t=typeof n=="object"?n:r_(),s=typeof n=="string"?n:Pu,a=Of(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=QE("firestore");l&&jR(a,...l)}return a}function Ep(n){if(n._terminated)throw new ke(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||VR(n),n._firestoreClient}function VR(n){var e,t,s;const a=n._freezeSettings(),l=(function(f,m,v,w){return new iC(f,m,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,cw(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new RR(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(En.fromBase64String(e))}catch(t){throw new ke(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tr(En.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ll(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:Kt("string",Tr._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gs._jsonSchemaVersion}}static fromJSON(e){if(Ll(e,gs._jsonSchema))return new gs(e.latitude,e.longitude)}}gs._jsonSchemaVersion="firestore/geoPoint/1.0",gs._jsonSchema={type:Kt("string",gs._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ys._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ll(e,ys._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ys(e.vectorValues);throw new ke(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ys._jsonSchemaVersion="firestore/vectorValue/1.0",ys._jsonSchema={type:Kt("string",ys._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=/^__.*__$/;class OR{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ol(e,this.data,t,this.fieldTransforms)}}class dw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ec:n})}}class Sp{constructor(e,t,s,a,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ou(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(hw(this.Ec)&&LR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class MR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Zu(e)}Dc(e,t,s,a=!1){return new Sp({Ec:e,methodName:t,bc:s,path:wn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ip(n){const e=n._freezeSettings(),t=Zu(n._databaseId);return new MR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fw(n,e,t,s,a,l={}){const d=n.Dc(l.merge||l.mergeFields?2:0,e,t,a);Cp("Data must be an object, but it was:",d,s);const f=pw(s,d);let m,v;if(l.merge)m=new hr(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const w=[];for(const E of l.mergeFields){const C=Pf(e,E,t);if(!d.contains(C))throw new ke(ce.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);gw(w,C)||w.push(C)}m=new hr(w),v=d.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,v=d.fieldTransforms;return new OR(new er(f),m,v)}class id extends Tp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof id}}function FR(n,e,t,s){const a=n.Dc(1,e,t);Cp("Data must be an object, but it was:",a,s);const l=[],d=er.empty();zi(s,((m,v)=>{const w=Pp(e,m,t);v=xn(v);const E=a.gc(w);if(v instanceof id)l.push(w);else{const C=ad(v,E);C!=null&&(l.push(w),d.set(w,C))}}));const f=new hr(l);return new dw(d,f,a.fieldTransforms)}function UR(n,e,t,s,a,l){const d=n.Dc(1,e,t),f=[Pf(e,s,t)],m=[a];if(l.length%2!=0)throw new ke(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)f.push(Pf(e,l[C])),m.push(l[C+1]);const v=[],w=er.empty();for(let C=f.length-1;C>=0;--C)if(!gw(v,f[C])){const $=f[C];let Q=m[C];Q=xn(Q);const te=d.gc($);if(Q instanceof id)v.push($);else{const W=ad(Q,te);W!=null&&(v.push($),w.set($,W))}}const E=new hr(v);return new dw(w,E,d.fieldTransforms)}function ad(n,e){if(mw(n=xn(n)))return Cp("Unsupported field value:",e,n),pw(n,e);if(n instanceof Tp)return(function(s,a){if(!hw(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,a){const l=[];let d=0;for(const f of s){let m=ad(f,a.yc(d));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),d++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=xn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return bC(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Ct.fromDate(s);return{timestampValue:ju(a.serializer,l)}}if(s instanceof Ct){const l=new Ct(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ju(a.serializer,l)}}if(s instanceof gs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Tr)return{bytesValue:A0(a.serializer,s._byteString)};if(s instanceof Qt){const l=a.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw a.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:lp(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ys)return(function(d,f){return{mapValue:{fields:{[a0]:{stringValue:o0},[Ru]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw f.wc("VectorValues must only contain numeric values.");return sp(f.serializer,v)}))}}}}}})(s,a);throw a.wc(`Unsupported field value: ${Jf(s)}`)})(n,e)}function pw(n,e){const t={};return e0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(n,((s,a)=>{const l=ad(a,e.Vc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function mw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof gs||n instanceof Tr||n instanceof Qt||n instanceof Tp||n instanceof ys)}function Cp(n,e,t){if(!mw(t)||!X_(t)){const s=Jf(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function Pf(n,e,t){if((e=xn(e))instanceof sd)return e._internalPath;if(typeof e=="string")return Pp(n,e);throw Ou("Field path arguments must be of type string or ",n,!1,void 0,t)}const zR=new RegExp("[~\\*/\\[\\]]");function Pp(n,e,t){if(e.search(zR)>=0)throw Ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sd(...e.split("."))._internalPath}catch{throw Ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ou(n,e,t,s,a){const l=s&&!s.isEmpty(),d=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||d)&&(m+=" (found",l&&(m+=` in field ${s}`),d&&(m+=` in document ${a}`),m+=")"),new ke(ce.INVALID_ARGUMENT,f+n+m)}function gw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class BR extends yw{data(){return super.data()}}function vw(n,e){return typeof e=="string"?Pp(n,e):e instanceof sd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ke(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class WR{convertValue(e,t="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return zi(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,a;const l=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[Ru].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map((d=>Ut(d.doubleValue)));return new ys(l)}convertGeoPoint(e){return new gs(Ut(e.latitude),Ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=qu(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){const t=Ni(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=It.fromString(e);ht(L0(s),9688,{name:e});const a=new Il(s.get(1),s.get(3)),l=new Oe(s.popFirst(5));return a.isEqual(t)||Ks(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class ul{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ca extends yw{constructor(e,t,s,a,l,d){super(e,t,s,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(vw("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ca._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",ca._jsonSchema={type:Kt("string",ca._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class mu extends ca{data(e={}){return super.data(e)}}class uo{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ul(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new mu(this._firestore,this._userDataWriter,s.key,s,new ul(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map((f=>{const m=new mu(a._firestore,a._userDataWriter,f.doc.key,f.doc,new ul(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:d++}}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new mu(a._firestore,a._userDataWriter,f.doc.key,f.doc,new ul(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,w=-1;return f.type!==0&&(v=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),w=d.indexOf(f.doc.key)),{type:HR(f.type),doc:m,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n){n=Hr(n,Qt);const e=Hr(n.firestore,_a);return NR(Ep(e),n._key).then((t=>qR(e,n,t)))}uo._jsonSchemaVersion="firestore/querySnapshot/1.0",uo._jsonSchema={type:Kt("string",uo._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class ww extends WR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function zs(n){n=Hr(n,rd);const e=Hr(n.firestore,_a),t=Ep(e),s=new ww(e);return $R(n._query),kR(t,n._query).then((a=>new uo(e,s,n,a)))}function nu(n,e,t){n=Hr(n,Qt);const s=Hr(n.firestore,_a),a=_w(n.converter,e,t);return od(s,[fw(Ip(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Sr.none())])}function hs(n,e,t,...s){n=Hr(n,Qt);const a=Hr(n.firestore,_a),l=Ip(a);let d;return d=typeof(e=xn(e))=="string"||e instanceof sd?UR(l,"updateDoc",n._key,e,t,s):FR(l,"updateDoc",n._key,e),od(a,[d.toMutation(n._key,Sr.exists(!0))])}function _i(n){return od(Hr(n.firestore,_a),[new ip(n._key,Sr.none())])}function io(n,e){const t=Hr(n.firestore,_a),s=St(n),a=_w(n.converter,e);return od(t,[fw(Ip(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,Sr.exists(!1))]).then((()=>s))}function od(n,e){return(function(s,a){const l=new Hs;return s.asyncQueue.enqueueAndForget((async()=>_R(await AR(s),a,l))),l.promise})(Ep(n),e)}function qR(n,e,t){const s=t.docs.get(e._key),a=new ww(n);return new ca(n,a,e._key,s,new ul(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){To=a})(xo),ho(new da("firestore",((s,{instanceIdentifier:a,options:l})=>{const d=s.getProvider("app").getImmediate(),f=new _a(new zI(s.getProvider("auth-internal")),new WI(d,s.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ke(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(v.options.projectId,w)})(d,a),d);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ii(by,Ay,e),Ii(by,Ay,"esm2017")})();const GR={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},xw=n_(GR),Ri=OI(xw),Ze=DR(xw),Ew=L.createContext(null);function KR({children:n}){const[e,t]=L.useState(null),[s,a]=L.useState(!1),[l,d]=L.useState(!0);L.useEffect(()=>{const v=P1(Ri,async w=>{if(t(w),w)try{const E=St(Ze,"admins",w.uid);if((await Rf(E)).exists())a(!0);else{const $=St(Ze,"roles",w.uid),Q=await Rf($);Q.exists()&&Q.data().admin===!0?a(!0):a(!1)}}catch(E){console.error("Error checking admin role:",E),a(!1)}else a(!1);d(!1)});return()=>v()},[]);const f=async(v,w)=>{await R_(Ri,v,w)},m=async()=>{await b_(Ri)};return c.jsx(Ew.Provider,{value:{user:e,admin:s,loading:l,login:f,logout:m},children:n})}function Po(){return L.useContext(Ew)}function QR({onClose:n}){const[e,t]=L.useState("login"),[s,a]=L.useState(""),[l,d]=L.useState("");async function f(){try{await U_(Ri,new ds),n()}catch(w){alert(w.message)}}async function m(w){w.preventDefault();try{await R_(Ri,s,l),n()}catch(E){alert(E.message)}}async function v(w){w.preventDefault();try{await S1(Ri,s,l),n()}catch(E){alert(E.message)}}return c.jsx("div",{className:"auth-modal-backdrop",onClick:n,children:c.jsxs("div",{className:"auth-modal",onClick:w=>w.stopPropagation(),children:[c.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),c.jsxs("button",{className:"google-btn",onClick:f,children:[c.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),c.jsx("div",{className:"auth-divider",children:c.jsx("span",{children:"or"})}),c.jsxs("form",{onSubmit:e==="login"?m:v,className:"auth-form",children:[c.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:s,onChange:w=>a(w.target.value),required:!0}),c.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:w=>d(w.target.value),required:!0}),c.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),c.jsx("div",{className:"auth-switcher",children:e==="login"?c.jsxs("p",{children:["No account?"," ",c.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):c.jsxs("p",{children:["Already have an account?"," ",c.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),c.jsx("button",{className:"auth-close",onClick:n,children:"Close"})]})})}function YR(){const[n,e]=L.useState(!1),[t,s]=L.useState(!1),{user:a,admin:l}=Po(),d=Fu();async function f(){try{await b_(Ri),e(!1),d("/")}catch(m){console.error(m),alert("Logout failed.")}}return c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:`menu-toggle ${n?"active":""}`,onClick:()=>e(!n),children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]}),c.jsxs("nav",{className:`menu-panel ${n?"open":""}`,children:[c.jsx(ia,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),c.jsx(ia,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),c.jsx(ia,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),c.jsx(ia,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),c.jsx(ia,{to:"/music",className:"menu-item",onClick:()=>e(!1),children:"Music"}),c.jsx(ia,{to:"/steam",className:"menu-item",onClick:()=>e(!1),children:"Gaming"}),l&&c.jsx(ia,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),c.jsxs("div",{className:"auth-section",children:[c.jsx("p",{className:"auth-section-status",children:a?`Signed in as ${a.email||a.uid}`:"Not signed in"}),c.jsxs("div",{children:[!a&&c.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),s(!0)},children:"Sign in"}),a&&c.jsx("button",{className:"auth-btn secondary",onClick:f,children:"Sign out"})]})]})]}),t&&c.jsx(QR,{onClose:()=>s(!1)})]})}function Iv(){const n="Tyler's Collection's and Hobbies",e="",[t,s]=L.useState(""),[a,l]=L.useState(!0),d=L.useRef(null),[f,m]=L.useState("jp"),[v,w]=L.useState(1);return L.useEffect(()=>{document.title="Tyler's Collection"},[]),L.useEffect(()=>(d.current=setInterval(()=>l(E=>!E),450),()=>{d.current&&clearInterval(d.current)}),[]),L.useEffect(()=>{let E=!1;const C=te=>new Promise(W=>setTimeout(W,te)),$=async(te,W=120)=>{for(let ie=1;ie<=te.length;ie+=1){if(E)return;s(te.slice(0,ie)),await C(W)}},Q=async(te,W=70)=>{for(let ie=te.length;ie>=0;ie-=1){if(E)return;s(te.slice(0,ie)),await C(W)}};return(async()=>{if(localStorage.getItem("homeTitleTyped")==="1"){m("en"),s(n),l(!1),d.current&&clearInterval(d.current);return}await C(250),m("jp"),await $(e,140),await C(6e3),await Q(e,80),await C(320);const W=n;for(let ie=1;ie<=W.length;ie+=1){if(E)return;s(W.slice(0,ie)),ie===4&&m("en"),await C(110)}m("en"),await C(2e3),l(!1),localStorage.setItem("homeTitleTyped","1"),d.current&&clearInterval(d.current)})(),()=>{E=!0}},[]),c.jsxs("main",{className:"page",children:[c.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[c.jsxs("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",display:"inline-flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:t||" "}),c.jsx("span",{style:{width:"6px",height:"1.1em",background:"#ffb6c1",opacity:a?1:0,transition:"opacity 0.15s ease"}})]}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem",opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"TCG":"This is my personal webpage to see what is on my shelves, wishlists, and TCG collections."}),c.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"8px 14px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"linear-gradient(135deg, rgba(255,182,193,0.18), rgba(43,15,29,0.9))",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"14px",fontSize:"0.78rem",color:"#ffe6ed",letterSpacing:"0.05em",textTransform:"uppercase",fontWeight:700,opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?c.jsxs(c.Fragment,{children:[c.jsx("span",{role:"img","aria-label":"manga",children:""})," ",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"anime",children:""})," ",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{role:"img","aria-label":"manga",children:""})," Manga",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"anime",children:""})," Anime",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]})})]}),c.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[c.jsxs("article",{className:"card",children:[c.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:c.jsx("span",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"About Me"})}),c.jsx("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5,opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"im.okTCG":"Hey, I am Tyler and I go by im.ok. I hoard manga, binge anime, and collect trading cards."}),c.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem",opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"TCG":"This site is where I track everything: volumes on my shelves, finished shows, and my TCG collection as they all slowly grow."}),c.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px",opacity:v,transition:"opacity 0.25s ease"},children:[c.jsx("span",{className:"pill",children:f==="jp"?"":"Manga library"}),c.jsx("span",{className:"pill",children:f==="jp"?"":"My Anime List (MAL)"}),c.jsx("span",{className:"pill",children:f==="jp"?" & TCG":"Pokemon & One Piece TCG"}),c.jsx("span",{className:"pill",children:f==="jp"?"":"Data Nerd"})]})]}),c.jsxs("article",{className:"card",children:[c.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:c.jsx("span",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Explore these pages"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[c.jsxs("a",{href:"/base/manga",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Manga Library"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Full manga collection & wishlist."}),c.jsx("div",{className:"section-chip-row",children:c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Library & wishlist"})})]}),c.jsxs("a",{href:"/base/music",className:"section-card",style:{justifySelf:"end",alignSelf:"end",order:99},children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Music"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"If you are here for my music, this is the page for you! Catch all the latest releases."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Latest tracks"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:"Spotify & SoundCloud"})]})]}),c.jsxs("a",{href:"/base/anime",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Anime Library"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"MAL":"The entire watched, plan to watch, and watching list synced directly from MyAnimeList."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"MAL":"MAL synced"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Status filters"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Quick stats"})]})]}),c.jsxs("a",{href:"/base/tcg",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"TCG":"TCG Collection"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"TCG":"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Full Collection"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:f==="jp"?"":"Still Under-Construction"})]})]})]})]})]}),c.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"@ 2025 im.ok. All rights reserved."})]})}const JR="modulepreload",XR=function(n){return"/base/"+n},Cv={},zl=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let d=function(v){return Promise.all(v.map(w=>Promise.resolve(w).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=d(t.map(v=>{if(v=XR(v),v in Cv)return;Cv[v]=!0;const w=v.endsWith(".css"),E=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${E}`))return;const C=document.createElement("link");if(C.rel=w?"stylesheet":JR,w||(C.as="script"),C.crossOrigin="",C.href=v,m&&C.setAttribute("nonce",m),document.head.appendChild(C),w)return new Promise(($,Q)=>{C.addEventListener("load",$),C.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return a.then(d=>{for(const f of d||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})};function Us(n){let e=(n||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),s=t?t[1].trim().toLowerCase():e.toLowerCase(),a=t&&t[2]?parseInt(t[2],10):0;return{name:s,vol:Number.isFinite(a)?a:0}}function ZR(){const{admin:n}=Po(),e=n,[t,s]=L.useState("library");L.useEffect(()=>{document.title="Manga | Library"},[]);const[a,l]=L.useState([]),[d,f]=L.useState([]),[m,v]=L.useState([]),[w,E]=L.useState([]),[C,$]=L.useState(!1),[Q,te]=L.useState(!0),[W,ie]=L.useState(""),[se,oe]=L.useState(""),[me,we]=L.useState(""),[he,V]=L.useState(!1),[R,j]=L.useState(()=>new Set),[A,M]=L.useState(null),[P,b]=L.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",special:!1,specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[fe,Ke]=L.useState([]),[et,K]=L.useState(0),[D,z]=L.useState({open:!1,index:0,items:[]});async function ee(){const I=await zs(Zn(Ze,"library")),ne=[];I.forEach(le=>{const B=le.data();ne.push({id:le.id,title:B.title||"",authors:B.authors||"Unknown",publisher:B.publisher||"Unknown",demographic:B.demographic||"",genre:B.genre||"",subGenre:B.subGenre||"",date:B.date||"Unknown",cover:B.cover||"",isbn:B.isbn||"",pageCount:B.pageCount!==void 0&&B.pageCount!==null?B.pageCount:"",rating:B.rating!==void 0&&B.rating!==null?B.rating:"",amountPaid:B.amountPaid!==void 0&&B.amountPaid!==null?B.amountPaid:"",dateRead:B.dateRead||"",datePurchased:B.datePurchased||"",msrp:B.msrp!==void 0&&B.msrp!==null?B.msrp:"",specialType:B.specialType||"",specialVolumes:B.specialVolumes!==void 0&&B.specialVolumes!==null?B.specialVolumes:"",collectiblePrice:B.collectiblePrice!==void 0&&B.collectiblePrice!==null?B.collectiblePrice:"",read:!!B.read,amazonURL:B.amazonURL||"",hidden:!!B.hidden,kind:"library"})}),ne.sort((le,B)=>{const Y=Us(le.title),Re=Us(B.title),De=Y.name.localeCompare(Re.name);return De!==0?De:Y.vol-Re.vol}),l(ne),v(le=>{const B=new Set(le);return ne.forEach(Y=>B.add(Y.title||"")),Array.from(B).filter(Boolean).sort()})}async function k(){const I=await zs(Zn(Ze,"wishlist")),ne=[];I.forEach(le=>{const B=le.data();ne.push({id:le.id,title:B.title||"",authors:B.authors||"Unknown",publisher:B.publisher||"Unknown",date:B.date||"Unknown",cover:B.cover||"",isbn:B.isbn||"",pageCount:B.pageCount!==void 0&&B.pageCount!==null?B.pageCount:"",rating:B.rating!==void 0&&B.rating!==null?B.rating:"",amountPaid:B.amountPaid!==void 0&&B.amountPaid!==null?B.amountPaid:"",specialType:B.specialType||"",specialVolumes:B.specialVolumes!==void 0&&B.specialVolumes!==null?B.specialVolumes:"",collectiblePrice:B.collectiblePrice!==void 0&&B.collectiblePrice!==null?B.collectiblePrice:"",amazonURL:B.amazonURL||"",hidden:!!B.hidden,kind:"wishlist"})}),ne.sort((le,B)=>{const Y=Us(le.title),Re=Us(B.title),De=Y.name.localeCompare(Re.name);return De!==0?De:Y.vol-Re.vol}),f(ne),v(le=>{const B=new Set(le);return ne.forEach(Y=>B.add(Y.title||"")),Array.from(B).filter(Boolean).sort()})}L.useEffect(()=>{let I=!1;async function ne(){te(!0),ie("");try{await Promise.all([ee(),k()]),I||te(!1)}catch(le){if(console.error(le),!I){console.warn("Falling back to offline JSON for manga.");try{const Y=await fetch("/base/manga-library-wishlist.json",{cache:"no-cache"});if(!Y.ok)throw new Error("fallback fetch failed");const Re=await Y.json(),De=Array.isArray(Re.library)?Re.library:[],ft=Array.isArray(Re.wishlist)?Re.wishlist:[];l(De.map((xe,Ve)=>({id:xe.id||`offline-lib-${Ve}`,title:xe.title||"",authors:xe.authors||"Unknown",publisher:xe.publisher||"Unknown",demographic:xe.demographic||"",genre:xe.genre||"",subGenre:xe.subGenre||"",date:xe.date||"Unknown",cover:xe.cover||"",isbn:xe.isbn||"",pageCount:xe.pageCount??"",rating:xe.rating??"",amountPaid:xe.amountPaid??"",dateRead:xe.dateRead||"",datePurchased:xe.datePurchased||"",msrp:xe.msrp??"",specialType:xe.specialType||"",specialVolumes:xe.specialVolumes??"",collectiblePrice:xe.collectiblePrice??"",amazonURL:xe.amazonURL||"",read:!!xe.read,hidden:!!xe.hidden,kind:"library"}))),f(ft.map((xe,Ve)=>({id:xe.id||`offline-wish-${Ve}`,title:xe.title||"",authors:xe.authors||"Unknown",publisher:xe.publisher||"Unknown",demographic:xe.demographic||"",genre:xe.genre||"",subGenre:xe.subGenre||"",date:xe.date||"Unknown",cover:xe.cover||"",isbn:xe.isbn||"",pageCount:xe.pageCount??"",rating:xe.rating??"",amountPaid:xe.amountPaid??"",dateRead:xe.dateRead||"",datePurchased:xe.datePurchased||"",msrp:xe.msrp??"",specialType:xe.specialType||"",specialVolumes:xe.specialVolumes??"",collectiblePrice:xe.collectiblePrice??"",amazonURL:xe.amazonURL||"",read:!!xe.read,hidden:!!xe.hidden,kind:"wishlist"}))),te(!1),ie("Loaded offline data (Firestore unavailable).")}catch(B){console.error("Offline fallback failed",B),ie("Failed to load manga data from Firestore."),te(!1)}}}}return ne(),()=>{I=!0}},[]);const H=L.useMemo(()=>{const I=se.trim().toLowerCase();return I?a.filter(ne=>[ne.title,ne.authors,ne.publisher,ne.isbn,ne.date,String(ne.pageCount??"")].join(" ").toLowerCase().includes(I)):a},[a,se]),ve=L.useMemo(()=>e&&C?H:H.filter(I=>!I.hidden),[H,e,C]),Ee=L.useMemo(()=>{const I=me.trim().toLowerCase();return I?d.filter(ne=>[ne.title,ne.authors,ne.publisher,ne.isbn,ne.date,String(ne.pageCount??"")].join(" ").toLowerCase().includes(I)):d},[d,me]),Ce=L.useMemo(()=>e&&C?Ee:Ee.filter(I=>!I.hidden),[Ee,e,C]);function Le(){e&&(V(I=>!I),j(new Set))}function $e(I){j(ne=>{const le=new Set(ne);return le.has(I)?le.delete(I):le.add(I),le})}async function We(I){if(!e){alert("Multi-select actions require admin access.");return}const ne=Array.from(R);if(!ne.length){alert("Select at least one item first.");return}const le=t==="library";try{if(I==="move")if(le){if(!window.confirm(`Move ${ne.length} item(s) to Wishlist?`))return;for(const B of ne){const Y=a.find(De=>De.id===B);if(!Y)continue;const Re={title:Y.title,authors:Y.authors,publisher:Y.publisher,date:Y.date,pageCount:Y.pageCount||"",cover:Y.cover,amazonURL:Y.amazonURL||"",hidden:!!Y.hidden};await io(Zn(Ze,"wishlist"),Re),await _i(St(Ze,"library",B))}}else{if(!window.confirm(`Move ${ne.length} item(s) to Library?`))return;for(const B of ne){const Y=d.find(De=>De.id===B);if(!Y)continue;const Re={title:Y.title,authors:Y.authors,publisher:Y.publisher,date:Y.date,pageCount:Y.pageCount||"",cover:Y.cover,amountPaid:"",read:!1,rating:"",msrp:"",collectiblePrice:"",specialType:"",specialVolumes:"",isbn:"",demographic:"",genre:"",subGenre:"",hidden:!!Y.hidden};await io(Zn(Ze,"library"),Re),await _i(St(Ze,"wishlist",B))}}else if(I==="markRead"&&le)for(const B of ne)await hs(St(Ze,"library",B),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(I==="markUnread"&&le)for(const B of ne)await hs(St(Ze,"library",B),{read:!1,dateRead:"",rating:""});else if(I==="delete"){const B=le?"library":"wishlist";if(!window.confirm(`Delete ${ne.length} item(s) from ${le?"Library":"Wishlist"}?`))return;for(const Y of ne)await _i(St(Ze,B,Y))}await Promise.all([ee(),k()]),j(new Set),V(!1)}catch(B){console.error(B),alert("Failed to apply multi-select action.")}}function st(I){M(I)}function yt(){M(null)}const nn=()=>{b(I=>({...I,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",special:!1,specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1,hidden:!1},multiAdd:!1,startVol:"",endVol:""})),Ke([]),K(0)},Bt=L.useMemo(()=>{const I=new Map;return[...a,...d].forEach(ne=>{const le=Us(ne.title||"");if(!le.name)return;const B=(ne.title||"").replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||ne.title||le.name;if(!I.has(le.name))I.set(le.name,{display:B,maxVol:le.vol,authors:ne.authors||"",publisher:ne.publisher||"",demographic:ne.demographic||""});else{const Y=I.get(le.name);Y.maxVol=Math.max(Y.maxVol,le.vol),!Y.authors&&ne.authors&&(Y.authors=ne.authors),!Y.publisher&&ne.publisher&&(Y.publisher=ne.publisher),!Y.demographic&&ne.demographic&&(Y.demographic=ne.demographic)}}),I},[a,d]),Tn=I=>{b(ne=>({...ne,open:!0,mode:"add",list:I,editingId:null,data:{...ne.data,title:"",list:I}})),Ke([{kind:"new",id:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1}}]),K(0)},tr=I=>{const ne={open:!0,mode:"edit",list:I.kind==="wishlist"?"wishlist":"library",editingId:I.id,data:{title:I.title||"",authors:I.authors||"",publisher:I.publisher||"",demographic:I.demographic||"",genre:I.genre||"",subGenre:I.subGenre||"",date:I.date||"",cover:I.cover||"",isbn:I.isbn||"",pageCount:I.pageCount||"",rating:I.rating||"",amountPaid:I.amountPaid||"",dateRead:I.dateRead||"",datePurchased:I.datePurchased||"",msrp:I.msrp||"",special:!!(I.specialType||I.specialVolumes||I.collectiblePrice),specialType:I.specialType||"",specialVolumes:I.specialVolumes||"",collectiblePrice:I.collectiblePrice||"",amazonURL:I.amazonURL||"",read:!!I.read,hidden:!!I.hidden}};b(ne),Ke([{kind:"edit",id:I.id,data:{...ne.data}}]),K(0)},tt=(I,ne,le="text")=>{if(b(B=>{const Y={...B.data,[I]:le==="checkbox"?!!ne:ne};if(I==="special"&&!ne&&(Y.specialType="",Y.specialVolumes="",Y.collectiblePrice=""),I==="specialType"&&(ne==="collectible"?Y.specialVolumes="":(ne==="specialEdition"||(Y.specialVolumes=""),Y.collectiblePrice="")),I==="title"){const Re=Us(ne||"");if(Re.name&&Bt.has(Re.name)){const De=Bt.get(Re.name);Y.authors=De.authors||Y.authors,Y.publisher=De.publisher||Y.publisher,Y.demographic=De.demographic||Y.demographic}}return{...B,data:Y}}),Ke(B=>{if(!B.length)return B;const Y=[...B],Re={...Y[et]};return Re.data={...Re.data,[I]:le==="checkbox"?!!ne:ne},Y[et]=Re,Y}),I==="title"){const B=String(ne||"").trim().toLowerCase();if(!B)E([]);else{const Y=[];Bt.forEach(Re=>{if(Re.display.toLowerCase().includes(B)){const De=Re.maxVol>0?Re.maxVol+1:1;Y.push(`${Re.display}, Vol. ${De}`)}}),E(Y.slice(0,6))}}},nr=I=>{fe[I]&&(K(I),b(ne=>{const le=fe[I];return{...ne,data:{...le.data}}}))},$t=()=>{const I=P.data.title||"",ne=Us(I);if(!ne.name){alert("Provide a title with a volume number first (e.g., Series, Vol. 1).");return}const le=I.replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||I;let B=ne.vol||0;const Y=Bt.get(ne.name);Y&&Y.maxVol>B&&(B=Y.maxVol),fe.forEach(xe=>{const Ve=Us(xe.data.title||"");Ve.name===ne.name&&(B=Math.max(B,Ve.vol||0))});const Re=(B||0)+1,ft={title:`${le}, Vol. ${Re}`,authors:P.data.authors,publisher:P.data.publisher,demographic:P.data.demographic,genre:P.data.genre,subGenre:P.data.subGenre,msrp:P.data.msrp,hidden:P.data.hidden,cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",date:"",dateRead:"",datePurchased:"",special:!1,specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1};Ke(xe=>{const Ve=[...xe,{kind:"new",id:null,data:ft}];return K(Ve.length-1),Ve}),b(xe=>({...xe,mode:"add",data:ft}))};async function ws(){if(!e)return;const{list:I}=P,ne=I||"library",le=fe.length>0?fe:[{kind:P.mode,id:P.editingId,data:P.data}],B=Y=>({title:(Y.title||"").trim(),authors:(Y.authors||"").trim(),publisher:(Y.publisher||"").trim(),demographic:(Y.demographic||"").trim(),genre:(Y.genre||"").trim(),subGenre:(Y.subGenre||"").trim(),date:(Y.date||"").trim(),cover:(Y.cover||"").trim(),isbn:ne==="wishlist"?"":(Y.isbn||"").trim(),pageCount:Y.pageCount===""?"":Number(Y.pageCount),rating:ne==="wishlist"||Y.rating===""?"":Math.max(.5,Math.min(5,Number(Y.rating))),amountPaid:Y.amountPaid===""?"":Number(Y.amountPaid),dateRead:(Y.dateRead||"").trim(),datePurchased:(Y.datePurchased||"").trim(),msrp:ne==="wishlist"||Y.msrp===""?"":Number(Y.msrp),special:ne==="wishlist"?!1:!!(Y.special&&(Y.specialType||"").trim()),specialType:ne==="wishlist"||!(Y.special&&(Y.specialType||"").trim())?"":(Y.specialType||"").trim(),specialVolumes:ne==="wishlist"?"":Y.special&&Y.specialType==="specialEdition"?Y.specialVolumes===""?"":Number(Y.specialVolumes):"",collectiblePrice:ne==="wishlist"?"":Y.special&&Y.specialType==="collectible"?Y.collectiblePrice===""?"":Number(Y.collectiblePrice):"",amazonURL:(Y.amazonURL||"").trim(),read:ne==="wishlist"?!1:!!Y.read,hidden:!!Y.hidden,kind:I});try{const Y=[];for(const Re of le){const De=B(Re.data);if(!De.title){alert("Title is required for every entry.");return}Re.kind==="edit"&&Re.id?Y.push(hs(St(Ze,ne,Re.id),De)):Y.push(io(Zn(Ze,ne),De))}await Promise.all(Y),await Promise.all([ee(),k()]),nn()}catch(Y){console.error(Y),alert("Failed to save entry.")}}async function Sn(I,ne){if(e&&window.confirm("Delete this entry?"))try{await _i(St(Ze,ne,I)),await Promise.all([ee(),k()])}catch(le){console.error(le),alert("Failed to delete entry.")}}const[hn,In]=L.useState(!1),rr=()=>z({open:!1,index:0,items:[]});async function Bn(I,ne){if(!(I!=null&&I.id))return;const le=I.kind==="wishlist"?"wishlist":"library";In(!0);try{await hs(St(Ze,le,I.id),ne),await Promise.all([ee(),k()]),M(B=>B&&B.id===I.id?{...B,...ne}:B)}catch(B){console.error(B),alert("Failed to update entry.")}finally{In(!1)}}const qr=(I,ne)=>{const le=ne===""?"":Math.max(.5,Math.min(5,Number(ne)));Bn(I,{rating:le})},Gr=(I,ne)=>{if(!I)return;const le=ne?{read:!0,dateRead:new Date().toISOString().slice(0,10)}:{read:!1,dateRead:""};Bn(I,le)},Pt=()=>{if(!R.size){alert("Select at least one entry first.");return}const ne=[...a,...d].filter(B=>R.has(B.id));if(!ne.length){alert("No items selected.");return}const le=ne.map(B=>({id:B.id,kind:B.kind||(t==="wishlist"?"wishlist":"library"),data:{title:B.title||"",authors:B.authors||"",publisher:B.publisher||"",demographic:B.demographic||"",genre:B.genre||"",subGenre:B.subGenre||"",date:B.date||"",cover:B.cover||"",isbn:B.isbn||"",pageCount:B.pageCount||"",rating:B.rating||"",amountPaid:B.amountPaid||"",dateRead:B.dateRead||"",datePurchased:B.datePurchased||"",msrp:B.msrp||"",special:!!(B.specialType||B.specialVolumes||B.collectiblePrice),specialType:B.specialType||"",specialVolumes:B.specialVolumes||"",collectiblePrice:B.collectiblePrice||"",amazonURL:B.amazonURL||"",read:!!B.read,hidden:!!B.hidden}}));z({open:!0,index:0,items:le})},He=(I,ne,le="text")=>{z(B=>{const Y=[...B.items],Re={...Y[B.index]},De={...Re.data,[I]:le==="checkbox"?!!ne:ne};return I==="special"&&!ne&&(De.specialType="",De.specialVolumes="",De.collectiblePrice=""),I==="specialType"&&(ne==="collectible"?De.specialVolumes="":(ne==="specialEdition"||(De.specialVolumes=""),De.collectiblePrice="")),Re.data=De,Y[B.index]=Re,{...B,items:Y}})},Cn=()=>{z(I=>({...I,index:Math.min(I.index+1,I.items.length-1)}))},xs=()=>{z(I=>({...I,index:Math.max(I.index-1,0)}))};async function Pn(){if(!e)return;const I=D.items;if(!I.length){rr();return}try{const ne=I.map(le=>{const Y=!(le.kind==="wishlist")&&!!(le.data.special&&(le.data.specialType||"").trim()),Re={...le.data,pageCount:le.data.pageCount===""?"":Number(le.data.pageCount),rating:le.data.rating===""?"":Math.max(.5,Math.min(5,Number(le.data.rating))),amountPaid:le.data.amountPaid===""?"":Number(le.data.amountPaid),msrp:le.data.msrp===""?"":Number(le.data.msrp),special:Y,specialType:Y?le.data.specialType:"",collectiblePrice:Y&&le.data.specialType==="collectible"?le.data.collectiblePrice===""?"":Number(le.data.collectiblePrice):"",specialVolumes:Y&&le.data.specialType==="specialEdition"?le.data.specialVolumes===""?"":Number(le.data.specialVolumes):"",amazonURL:le.data.amazonURL||"",read:!!le.data.read},De=le.kind==="wishlist"?"wishlist":"library";return hs(St(Ze,De,le.id),Re)});await Promise.all(ne),await Promise.all([ee(),k()]),j(new Set),V(!1),rr()}catch(ne){console.error(ne),alert("Failed to save bulk edits.")}}function Cr(I){const ne=R.has(I.id),le=I.kind==="library",B=()=>{he&&e?$e(I.id):st(I)};return c.jsxs("div",{className:"manga-card"+(I.read&&le?" read":"")+(ne?" multiselect-selected":""),onClick:B,children:[c.jsx("div",{className:"manga-card-cover-wrap",children:c.jsx("img",{src:I.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),c.jsxs("div",{className:"manga-card-body",children:[c.jsx("div",{className:"manga-card-title",children:I.title||"Untitled"}),c.jsxs("div",{className:"manga-card-meta",children:[I.authors&&I.authors!=="Unknown"&&c.jsxs(c.Fragment,{children:[I.authors,c.jsx("br",{})]}),I.publisher&&I.publisher!=="Unknown"&&c.jsxs(c.Fragment,{children:[I.publisher,c.jsx("br",{})]}),I.date&&I.date!=="Unknown"&&I.date]}),I.isbn&&c.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",I.isbn]}),e&&c.jsxs("div",{className:"manga-card-actions",children:[c.jsx("button",{type:"button",className:"manga-btn mini",onClick:Y=>{Y.stopPropagation(),tr(I)},children:"Edit"}),c.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:Y=>{Y.stopPropagation(),Sn(I.id,I.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},I.id)}const sr=({value:I,onChange:ne})=>{const[le,B]=L.useState(null),Y=Math.max(0,Math.min(5,Number(I)||0)),Re=le??Y,De=Array.from({length:10},(Ve,Wt)=>(Wt+1)*.5),ft=5,xe=Array.from({length:ft},(Ve,Wt)=>Math.max(0,Math.min(1,Re-Wt)));return c.jsxs("div",{className:"star-shell",role:"group","aria-label":"Rating",children:[c.jsxs("div",{className:"star-visual",style:{"--star-count":ft},children:[c.jsx("div",{className:"star-row",children:xe.map((Ve,Wt)=>c.jsxs("div",{className:"star-icon",children:[c.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"star-base",children:c.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})}),c.jsx("div",{className:"star-fill",style:{"--pct":`${(Math.max(0,Math.min(1,Ve))*100).toFixed(1)}%`},children:c.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:c.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})})})]},Wt))}),c.jsx("div",{className:"star-hit",children:De.map(Ve=>c.jsx("button",{type:"button","aria-label":`${Ve} stars`,onMouseEnter:()=>B(Ve),onMouseLeave:()=>B(null),onClick:()=>ne(Ve)},Ve))})]}),c.jsx("div",{className:"star-value",children:Re?Re.toFixed(1):"--"}),c.jsx("button",{type:"button",className:"star-clear",onClick:()=>ne(""),"aria-label":"Clear rating",children:"clear"})]})},Es=t==="library"?ve:Ce,fn=(I,ne)=>{if(!I.length)return;const le=Array.from(I.reduce((xe,Ve)=>(Object.keys(Ve).forEach(Wt=>xe.add(Wt)),xe),new Set)),B=xe=>{const Ve=xe==null?"":String(xe);return/[",\n]/.test(Ve)?`"${Ve.replace(/"/g,'""')}"`:Ve},Y=[le.join(",")].concat(I.map(xe=>le.map(Ve=>B(xe[Ve])).join(","))),Re=new Blob([Y.join(`
`)],{type:"text/csv"}),De=URL.createObjectURL(Re),ft=document.createElement("a");ft.href=De,ft.download=ne,ft.click(),URL.revokeObjectURL(De)},On=async(I,ne)=>{const le=(Y,Re="image")=>(Y||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)||Re,B=I.filter(Y=>Y.cover).map((Y,Re)=>({url:Y.cover,name:le(Y.title||`manga-${Re+1}`,`manga-${Re+1}`)}));if(!B.length){alert("No images found to download.");return}try{const Y=(await zl(async()=>{const{default:an}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:an}},[])).default,Re=new Y,De=Re.folder("images"),ft={},xe=B.map(async(an,Pr)=>{try{const pn=await(await fetch(an.url)).blob(),Ss=(an.url.split(".").pop()||"jpg").split(/[?#]/)[0],br=an.name||`image-${Pr+1}`;ft[br]=(ft[br]||0)+1;const Kr=ft[br]>1?`-${ft[br]}`:"";De.file(`${br}${Kr}.${Ss}`,pn)}catch(Rr){console.warn("Failed to fetch image",an.url,Rr)}});await Promise.all(xe);const Ve=await Re.generateAsync({type:"blob"}),Wt=URL.createObjectURL(Ve),sn=document.createElement("a");sn.href=Wt,sn.download=ne,sn.click(),URL.revokeObjectURL(Wt)}catch(Y){console.error("Zip download failed",Y),alert("Failed to create zip. Please try again.")}},fr=(I,ne)=>{const le=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),B=URL.createObjectURL(le),Y=document.createElement("a");Y.href=B,Y.download=ne,Y.click(),URL.revokeObjectURL(B)},Ts=async I=>{if(!e||!(I!=null&&I.id))return;const ne=I.kind==="wishlist"?"wishlist":"library",le=ne==="library"?"wishlist":"library";try{if(ne==="library"){const B={title:I.title,authors:I.authors,publisher:I.publisher,date:I.date,pageCount:I.pageCount||"",cover:I.cover||"",amazonURL:I.amazonURL||"",hidden:!!I.hidden};await io(Zn(Ze,le),B)}else{const B={title:I.title,authors:I.authors,publisher:I.publisher,date:I.date,pageCount:I.pageCount||"",cover:I.cover||"",amountPaid:"",read:!1,rating:"",msrp:"",collectiblePrice:"",specialType:"",specialVolumes:"",isbn:"",demographic:"",genre:"",subGenre:"",amazonURL:I.amazonURL||"",hidden:!!I.hidden};await io(Zn(Ze,le),B)}await _i(St(Ze,ne,I.id)),await Promise.all([ee(),k()]),yt()}catch(B){console.error("Move failed",B),alert("Failed to move item.")}},Lt=P.list==="wishlist",Mt=D.items[D.index]||null,rn=(Mt==null?void 0:Mt.kind)==="wishlist";return c.jsxs("div",{className:"manga-page",children:[c.jsxs("header",{className:"manga-header",style:{flexDirection:"column",alignItems:"center",textAlign:"center"},children:[c.jsx("div",{className:"manga-header-title",style:{justifyContent:"center",gap:"0.6rem",fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Manga Library"}),c.jsx("div",{className:"manga-header-sub",style:{textAlign:"center"},children:"This is my Manga Library and Wishlist. Check and see all the Manga I have in my possession!"})]}),c.jsxs("div",{className:"manga-tabs",children:[c.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{s("library"),V(!1),j(new Set)},children:"Library"}),c.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{s("wishlist"),V(!1),j(new Set)},children:"Wishlist"})]}),t!=="dashboard"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"manga-toolbar",children:[c.jsxs("div",{className:"manga-toolbar-left",children:[c.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?se:me,onChange:I=>t==="library"?oe(I.target.value):we(I.target.value)}),c.jsx("div",{className:"manga-counter",children:t==="library"?c.jsxs(c.Fragment,{children:["Library: ",H.length," / ",a.length]}):c.jsxs(c.Fragment,{children:["Wishlist: ",Ee.length," / ",d.length]})})]}),c.jsxs("div",{className:"manga-toolbar-right",children:[e&&c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>$(I=>!I),children:C?"Hide Hidden":"Show Hidden"}),e&&c.jsx("button",{className:"manga-btn secondary"+(he?" active":""),onClick:Le,children:he?"Exit Multi-select":"Multi-select"})]})]}),e&&he&&c.jsxs("div",{className:"manga-multiselect-bar",children:[c.jsxs("span",{children:["Selected: ",c.jsx("strong",{children:R.size})]}),c.jsx("button",{className:"manga-btn",onClick:Pt,children:"Bulk Edit"}),c.jsxs("button",{className:"manga-btn secondary",onClick:()=>We("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"manga-btn",onClick:()=>We("markRead"),children:"Mark Read"}),c.jsx("button",{className:"manga-btn secondary",onClick:()=>We("markUnread"),children:"Mark Unread"})]}),c.jsx("button",{className:"manga-btn danger",onClick:()=>We("delete"),children:"Delete"})]})]}),Q?c.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):W?c.jsx("div",{className:"manga-empty-state",children:W}):Es.length===0?c.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):c.jsx("div",{className:"manga-grid",children:Es.map(I=>Cr(I))}),e&&c.jsxs("div",{className:"manga-floating-actions",children:[c.jsxs("button",{className:"manga-btn",type:"button","aria-label":"Add item",onClick:()=>Tn(t==="wishlist"?"wishlist":"library"),children:["+ ",t==="wishlist"?"Wishlist":"Library"]}),c.jsxs("div",{className:"manga-export-actions",children:[c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>fr({library:a,wishlist:d},"manga-library-wishlist.json"),children:"Export JSON"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>fn(t==="library"?a:d,t==="library"?"manga-library.csv":"manga-wishlist.csv"),children:"Export CSV"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>On(t==="library"?a:d,t==="library"?"manga-library-images.zip":"manga-wishlist-images.zip"),children:"Download Images"})]})]}),A&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:I=>{I.target===I.currentTarget&&yt()},children:c.jsxs("div",{className:"manga-modal",children:[c.jsx("div",{className:"manga-modal-cover-wrap",children:c.jsx("img",{src:A.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsx("div",{className:"manga-modal-title",children:A.title||"Untitled"}),c.jsx("button",{className:"manga-modal-close",onClick:yt,type:"button",children:"Close"})]}),c.jsxs("div",{className:"manga-modal-meta",children:[A.authors&&A.authors!=="Unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Author(s):"})," ",A.authors,c.jsx("br",{})]}),A.publisher&&A.publisher!=="Unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Publisher:"})," ",A.publisher,c.jsx("br",{})]}),A.date&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Release:"})," ",A.date,c.jsx("br",{})]}),A.isbn&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"ISBN:"})," ",A.isbn,c.jsx("br",{})]})]}),c.jsxs("div",{className:"manga-modal-details",children:[A.pageCount&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Pages:"})," ",A.pageCount,c.jsx("br",{})]}),c.jsxs("div",{style:{margin:"6px 0"},children:[c.jsx("strong",{children:"Rating:"})," ",c.jsx(sr,{value:A.rating||"",onChange:I=>qr(A,I)})]}),A.amountPaid&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Amount Paid:"})," $",A.amountPaid,c.jsx("br",{})]}),A.msrp&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"MSRP:"})," $",A.msrp,c.jsx("br",{})]}),A.collectiblePrice&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Collectible:"})," $",A.collectiblePrice,c.jsx("br",{})]}),A.read&&A.dateRead&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Date Read:"})," ",A.dateRead,c.jsx("br",{})]}),A.amazonURL&&c.jsx("div",{style:{marginTop:"6px"},children:c.jsx("a",{href:A.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),c.jsxs("div",{className:"manga-modal-footer",style:{gap:"10px",alignItems:"center"},children:[c.jsx("div",{children:A.kind==="library"&&A.read?"Marked as read in your library.":A.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."}),c.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[A.kind==="library"&&c.jsx(c.Fragment,{children:A.read?c.jsx("button",{className:"manga-btn mini secondary",disabled:hn,onClick:()=>Gr(A,!1),type:"button",children:"Mark as unread"}):c.jsx("button",{className:"manga-btn mini",disabled:hn,onClick:()=>Gr(A,!0),type:"button",children:"Mark as read"})}),e&&c.jsxs("button",{className:"manga-btn mini",type:"button",onClick:()=>Ts(A),children:["Move to ",A.kind==="library"?"Wishlist":"Library"]})]})]})]})]})}),e&&P.open&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:I=>{I.target===I.currentTarget&&nn()},children:c.jsx("div",{className:"manga-modal admin",children:c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsx("div",{className:"manga-modal-title",children:P.mode==="add"?"Add Entry":"Edit Entry"}),c.jsx("button",{className:"manga-modal-close",onClick:nn,type:"button",children:"Close"})]}),c.jsxs("div",{className:"admin-form-layout",children:[c.jsx("div",{className:"admin-cover-frame",children:c.jsx("img",{src:P.data.cover||"https://imgur.com/chUgq4W.png",alt:"Cover preview"})}),c.jsxs("div",{className:"admin-form-fields",children:[c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Title",c.jsx("input",{type:"text",value:P.data.title,onChange:I=>tt("title",I.target.value)})]})}),w.length>0&&c.jsx("div",{className:"title-suggestions",children:w.map((I,ne)=>c.jsx("button",{type:"button",className:"manga-btn mini",onClick:()=>tt("title",I),children:I},I+ne))}),c.jsxs("div",{className:"admin-row two",style:{alignItems:"flex-end",marginTop:"-8px"},children:[c.jsxs("div",{children:[c.jsxs("div",{className:"manga-modal-subtitle",style:{marginBottom:"6px"},children:["Entry ",et+1," / ",Math.max(1,fe.length||1)]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>et>0&&nr(et-1),disabled:et===0,children:"Previous"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>fe.length&&et<fe.length-1?nr(et+1):null,disabled:!fe.length||et===fe.length-1,children:"Next"})]})]}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("button",{className:"manga-btn",type:"button",onClick:$t,disabled:!Us(P.data.title||"").vol,children:"Add New Volume"}),c.jsx("div",{className:"manga-stat-sub",style:{marginTop:"4px"},children:"Auto-fills the next volume number for this series."})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Authors",c.jsx("input",{type:"text",value:P.data.authors,onChange:I=>tt("authors",I.target.value)})]})}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Publisher",c.jsx("input",{type:"text",value:P.data.publisher,onChange:I=>tt("publisher",I.target.value)})]})}),c.jsxs("div",{className:"admin-row three",children:[c.jsxs("label",{children:["Release Date",c.jsx("input",{type:"date",value:P.data.date,onChange:I=>tt("date",I.target.value)})]}),!Lt&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Date Purchased",c.jsx("input",{type:"date",value:P.data.datePurchased,onChange:I=>tt("datePurchased",I.target.value)})]}),c.jsxs("label",{children:["Date Read",c.jsx("input",{type:"date",value:P.data.dateRead,onChange:I=>tt("dateRead",I.target.value)})]})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Page Count",c.jsx("input",{type:"number",placeholder:"e.g. 192",value:P.data.pageCount,onChange:I=>tt("pageCount",I.target.value)})]}),!Lt&&c.jsxs("label",{children:["ISBN (library only)",c.jsx("input",{type:"text",value:P.data.isbn,onChange:I=>tt("isbn",I.target.value)})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Cover URL",c.jsx("input",{type:"text",placeholder:"Paste image URL here",value:P.data.cover,onChange:I=>tt("cover",I.target.value)})]})}),!Lt&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-row two",children:[!(P.data.special&&P.data.specialType==="collectible")&&c.jsxs("label",{children:["Amount Paid",c.jsx("input",{type:"number",step:"0.01",value:P.data.amountPaid,onChange:I=>tt("amountPaid",I.target.value)})]}),c.jsxs("label",{children:["MSRP",c.jsx("input",{type:"number",step:"0.01",value:P.data.msrp,onChange:I=>tt("msrp",I.target.value)})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:!!P.data.special,onChange:I=>tt("special",I.target.checked,"checkbox")}),c.jsx("span",{children:"Special item?"})]})}),P.data.special&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Special Type",c.jsxs("select",{value:P.data.specialType,onChange:I=>tt("specialType",I.target.value),children:[c.jsx("option",{value:"",children:"Select type"}),c.jsx("option",{value:"specialEdition",children:"Special Edition"}),c.jsx("option",{value:"collectible",children:"Collectible"})]})]}),P.data.specialType==="collectible"&&c.jsxs("label",{children:["Collectible Price",c.jsx("input",{type:"number",step:"0.01",value:P.data.collectiblePrice,onChange:I=>tt("collectiblePrice",I.target.value)})]})]}),P.data.specialType==="specialEdition"&&c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Special Volumes",c.jsx("input",{type:"number",min:"0",value:P.data.specialVolumes,onChange:I=>tt("specialVolumes",I.target.value)})]})})]})]}),Lt&&c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Amazon URL",c.jsx("input",{type:"text",value:P.data.amazonURL,onChange:I=>tt("amazonURL",I.target.value)})]})}),!Lt&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Rating (1-5 stars)",c.jsx(sr,{value:P.data.rating,onChange:I=>tt("rating",I)})]})}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:P.data.read,onChange:I=>tt("read",I.target.checked,"checkbox")}),c.jsx("span",{children:"Mark as read"})]}),c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:!!P.data.hidden,onChange:I=>tt("hidden",I.target.checked,"checkbox")}),c.jsx("span",{children:"Hide from public"})]})]})]}),Lt&&c.jsx("div",{className:"admin-row",children:c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:!!P.data.hidden,onChange:I=>tt("hidden",I.target.checked,"checkbox")}),c.jsx("span",{children:"Hide from public"})]})})]})]}),c.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[c.jsx("button",{className:"manga-btn secondary",onClick:nn,type:"button",children:"Cancel"}),c.jsx("button",{className:"manga-btn",onClick:ws,type:"button",children:P.mode==="add"?"Add":"Save"})]})]})})}),e&&D.open&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:I=>{I.target===I.currentTarget&&rr()},children:c.jsx("div",{className:"manga-modal admin",children:c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",D.index+1," / ",D.items.length,")"]}),c.jsx("button",{className:"manga-modal-close",onClick:rr,type:"button",children:"Close"})]}),D.items.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",D.items[D.index].data.title||"Untitled"]}),c.jsxs("div",{className:"admin-form-grid",children:[c.jsxs("label",{children:["Title",c.jsx("input",{type:"text",value:D.items[D.index].data.title,onChange:I=>He("title",I.target.value)})]}),c.jsxs("label",{children:["Authors",c.jsx("input",{type:"text",value:D.items[D.index].data.authors,onChange:I=>He("authors",I.target.value)})]}),c.jsxs("label",{children:["Publisher",c.jsx("input",{type:"text",value:D.items[D.index].data.publisher,onChange:I=>He("publisher",I.target.value)})]}),c.jsxs("label",{children:["Release Date",c.jsx("input",{type:"date",value:D.items[D.index].data.date,onChange:I=>He("date",I.target.value)})]}),!rn&&c.jsxs("label",{children:["ISBN",c.jsx("input",{type:"text",value:D.items[D.index].data.isbn,onChange:I=>He("isbn",I.target.value)})]}),c.jsxs("label",{children:["Cover URL",c.jsx("input",{type:"text",value:D.items[D.index].data.cover,onChange:I=>He("cover",I.target.value)})]}),c.jsxs("label",{children:["Page Count",c.jsx("input",{type:"number",value:D.items[D.index].data.pageCount,onChange:I=>He("pageCount",I.target.value)})]}),!rn&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Rating (1-5 stars)",c.jsx(sr,{value:D.items[D.index].data.rating,onChange:I=>He("rating",I)})]}),!(D.items[D.index].data.special&&D.items[D.index].data.specialType==="collectible")&&c.jsxs("label",{children:["Amount Paid",c.jsx("input",{type:"number",step:"0.01",value:D.items[D.index].data.amountPaid,onChange:I=>He("amountPaid",I.target.value)})]}),!(D.items[D.index].data.special&&D.items[D.index].data.specialType==="collectible")&&c.jsxs("label",{children:["Amount Paid",c.jsx("input",{type:"number",step:"0.01",value:D.items[D.index].data.amountPaid,onChange:I=>He("amountPaid",I.target.value)})]}),c.jsxs("label",{children:["MSRP",c.jsx("input",{type:"number",step:"0.01",value:D.items[D.index].data.msrp,onChange:I=>He("msrp",I.target.value)})]}),D.items[D.index].data.special&&D.items[D.index].data.specialType==="collectible"&&c.jsxs("label",{children:["Collectible Price",c.jsx("input",{type:"number",step:"0.01",value:D.items[D.index].data.collectiblePrice,onChange:I=>He("collectiblePrice",I.target.value)})]})]}),!rn&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Date Purchased",c.jsx("input",{type:"date",value:D.items[D.index].data.datePurchased,onChange:I=>He("datePurchased",I.target.value)})]}),c.jsxs("label",{children:["Date Read",c.jsx("input",{type:"date",value:D.items[D.index].data.dateRead,onChange:I=>He("dateRead",I.target.value)})]})]}),!rn&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:!!D.items[D.index].data.special,onChange:I=>He("special",I.target.checked,"checkbox")}),c.jsx("span",{children:"Special item?"})]}),D.items[D.index].data.special&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Special Type",c.jsxs("select",{value:D.items[D.index].data.specialType,onChange:I=>He("specialType",I.target.value),children:[c.jsx("option",{value:"",children:"Select type"}),c.jsx("option",{value:"specialEdition",children:"Special Edition"}),c.jsx("option",{value:"collectible",children:"Collectible"})]})]}),D.items[D.index].data.specialType==="specialEdition"&&c.jsxs("label",{children:["Special Volumes",c.jsx("input",{type:"number",value:D.items[D.index].data.specialVolumes,onChange:I=>He("specialVolumes",I.target.value)})]}),D.items[D.index].data.specialType==="collectible"&&c.jsxs("label",{children:["Collectible Price",c.jsx("input",{type:"number",step:"0.01",value:D.items[D.index].data.collectiblePrice,onChange:I=>He("collectiblePrice",I.target.value)})]})]})]}),rn&&c.jsxs("label",{children:["Amazon URL",c.jsx("input",{type:"text",value:D.items[D.index].data.amazonURL,onChange:I=>He("amazonURL",I.target.value)})]}),!rn&&c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:D.items[D.index].data.read,onChange:I=>He("read",I.target.checked,"checkbox")}),c.jsx("span",{children:"Marked as read"})]}),c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:!!D.items[D.index].data.hidden,onChange:I=>He("hidden",I.target.checked,"checkbox")}),c.jsx("span",{children:"Hidden from public"})]})]}),c.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[c.jsxs("div",{children:[c.jsx("button",{className:"manga-btn secondary",onClick:xs,type:"button",disabled:D.index===0,children:"Previous"}),c.jsx("button",{className:"manga-btn secondary",onClick:Cn,type:"button",disabled:D.index===D.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{className:"manga-btn secondary",onClick:rr,type:"button",children:"Cancel"}),c.jsx("button",{className:"manga-btn",onClick:Pn,type:"button",children:"Save Edits"})]})]})]})]})})}),c.jsx("datalist",{id:"adminTitleSuggestions",children:m.map(I=>c.jsx("option",{value:I},I))})]})}const eb="https://imokmalworker.imokissick.workers.dev/?url=",Tw="im_ok",Pv=300,tb={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function nb(n){const e=n==null?void 0:n.title_localized,t=typeof e=="string"?e:(e==null?void 0:e.en)||(e==null?void 0:e.english);return(n==null?void 0:n.anime_title_eng)||(n==null?void 0:n.title_english)||t||(n==null?void 0:n.anime_title)||(n==null?void 0:n.title)||"Untitled"}function rb(n){const e=(n==null?void 0:n.updated_at)??(n==null?void 0:n.updatedAt)??(n==null?void 0:n.updated_at_ms)??null;if(e==null)return null;const t=Number(e);if(Number.isFinite(t))return t<1e12?t*1e3:t;const s=Date.parse(e);return Number.isNaN(s)?null:s}function sb(n){const e=tb[n.status]||(typeof n.status=="string"?n.status.toLowerCase():"unknown");return{id:n.anime_id||n.id,title:nb(n),updatedAt:rb(n),episodes:n.anime_num_episodes??n.episodes??null,watchedEpisodes:n.num_watched_episodes??n.my_watched_episodes??n.watched_episodes??n.num_watched??0,status:e,score:n.score??null,image:n.anime_image_path||n.image_url||n.anime_img||n.picture||null,synopsis:n.anime_synopsis||n.synopsis||null}}function Rv(){const n=Date.now();return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10,updatedAt:n-1e3*60*60*24*3,synopsis:"In 2071, bounty hunters Spike and Jet roam the solar system looking for their next payout and a place to belong."},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10,updatedAt:n-1e3*60*60*24*6,synopsis:"Brothers Edward and Alphonse Elric search for the Philosopher's Stone to restore their bodies after a failed alchemy ritual."},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9,updatedAt:n-1e3*60*60*8,synopsis:"An elven mage retraces the steps of a past adventure to understand humanity and the passage of time."},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8,updatedAt:n-1e3*60*60*24*14,synopsis:"Monkey D. Luffy sails toward the Grand Line seeking the One Piece and a crew to make his dream real."},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null,updatedAt:n-1e3*60*30,synopsis:"A middle-aged worker gains kaiju powers and joins the Defense Force to fight monsters from the inside."}]}async function ib(n,e){const t=`https://myanimelist.net/animelist/${n}/load.json?status=7&offset=${e}`,s=await fetch(`${eb}${encodeURIComponent(t)}`);if(!s.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return s.json()}async function ab(n=Tw){const e=[];try{let t=0;for(;;){const s=await ib(n,t);if(!Array.isArray(s)||s.length===0||(e.push(...s),s.length<Pv))break;t+=Pv}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),Rv()}return e.length?e.map(sb):Rv()}async function ob(n){var e,t;if(!n)return null;try{const s=await fetch(`https://api.jikan.moe/v4/anime/${n}`);if(!s.ok)throw new Error(`Failed to fetch Jikan summary for id ${n}`);const a=await s.json();return((e=a==null?void 0:a.data)==null?void 0:e.synopsis)||((t=a==null?void 0:a.data)==null?void 0:t.background)||null}catch(s){return console.error("Failed to load anime synopsis",n,s),null}}async function lb(n=Tw){var e;if(!n)return null;try{const t=await fetch(`https://api.jikan.moe/v4/users/${encodeURIComponent(n)}/statistics`);if(!t.ok)throw new Error(`Failed to fetch user stats for ${n}`);const s=await t.json(),a=((e=s==null?void 0:s.data)==null?void 0:e.anime)||{},l=Number(a.days_watched),d=Number(a.total_episodes??a.episodes_watched);return{daysWatched:Number.isFinite(l)?l:null,episodesWatched:Number.isFinite(d)?d:null}}catch(t){return console.error("Failed to load user stats",n,t),null}}function cb(){const{admin:n}=Po(),e=z=>z?z.toString().replace(/_/g," ").replace(/\b\w/g,ee=>ee.toUpperCase()):"Unknown",[t,s]=L.useState([]),[a,l]=L.useState([]),[d,f]=L.useState(""),[m,v]=L.useState("all"),[w,E]=L.useState(!0),[C,$]=L.useState(""),[Q,te]=L.useState(null),[W,ie]=L.useState({}),[se,oe]=L.useState(!1),[me,we]=L.useState(!1),[he,V]=L.useState(null);L.useEffect(()=>{document.title="Anime | Library"},[]);const R=z=>{if(!z)return"";const ee=Date.now()-z,k=Math.max(ee,0),H=Math.floor(k/6e4);if(H<1)return"just now";if(H<60)return`${H}m ago`;const ve=Math.floor(H/60);if(ve<48)return`${ve}h ago`;const Ee=Math.floor(ve/24);if(Ee<14)return`${Ee}d ago`;const Ce=Math.floor(Ee/7);return Ce<8?`${Ce}w ago`:`${Math.floor(Ee/30)}mo ago`},j=(z,ee="image")=>(z||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80)||ee,A=async()=>{const z=t.filter(ee=>ee.image).map((ee,k)=>({url:ee.image,name:j(ee.title||`anime-${k+1}`,`anime-${k+1}`)}));if(!z.length){alert("No images found to download.");return}try{const ee=(await zl(async()=>{const{default:$e}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:$e}},[])).default,k=new ee,H=k.folder("images"),ve={};await Promise.all(z.map(async($e,We)=>{try{const yt=await(await fetch($e.url)).blob(),nn=($e.url.split(".").pop()||"jpg").split(/[?#]/)[0],Bt=$e.name||`image-${We+1}`;ve[Bt]=(ve[Bt]||0)+1;const Tn=ve[Bt]>1?`-${ve[Bt]}`:"";H.file(`${Bt}${Tn}.${nn}`,yt)}catch(st){console.warn("Failed to fetch image",$e.url,st)}}));const Ee=await k.generateAsync({type:"blob"}),Ce=URL.createObjectURL(Ee),Le=document.createElement("a");Le.href=Ce,Le.download="anime-images.zip",Le.click(),URL.revokeObjectURL(Ce)}catch(ee){console.error("Zip download failed",ee),alert("Failed to create zip. Please try again.")}};L.useEffect(()=>{async function z(){try{const ee=await ab();s(ee),l(ee)}catch(ee){console.error(ee),$("Failed to load data from MAL.")}finally{E(!1)}}z()},[]),L.useEffect(()=>{lb().then(z=>{z&&V(z)}).catch(()=>{})},[]);const M=z=>{switch((z||"unknown").toLowerCase()){case"watching":return 0;case"completed":return 1;case"on_hold":return 2;case"plan_to_watch":return 3;case"dropped":return 4;default:return 5}},P=z=>{const ee=Number.isFinite(Number(z.watchedEpisodes))?Number(z.watchedEpisodes):0,k=Number.isFinite(Number(z.episodes))?Number(z.episodes):null;return k?`${Math.min(ee,k)}/${k} eps`:ee?`${ee} eps`:"No progress"};L.useEffect(()=>{let z=[...t];if(m!=="all"&&(z=z.filter(ee=>(ee.status||"").toLowerCase()===m)),d){const ee=d.toLowerCase();z=z.filter(k=>(k.title||"").toLowerCase().includes(ee))}z.sort((ee,k)=>{const H=M(ee.status),ve=M(k.status);return H!==ve?H-ve:(ee.title||"").localeCompare(k.title||"")}),l(z)},[t,m,d]);const b=L.useMemo(()=>[...t].filter(z=>Number.isFinite(z.updatedAt)).sort((z,ee)=>ee.updatedAt-z.updatedAt).slice(0,6),[t]);L.useEffect(()=>{if(!Q){we(!1),oe(!1);return}we(!!Q.synopsis),oe(!1)},[Q==null?void 0:Q.id]);const fe=L.useMemo(()=>{const z=t.length,ee=t.reduce((Ce,Le)=>{const $e=Number(Le.watchedEpisodes);return Number.isFinite($e)?Ce+$e:Ce},0),k=ee*.4,H=t.filter(Ce=>Number.isFinite(Ce.score)&&Ce.score>0),ve=H.reduce((Ce,Le)=>Ce+Le.score,0),Ee={watching:0,completed:0,on_hold:0,dropped:0,plan_to_watch:0,unknown:0};return t.forEach(Ce=>{const Le=(Ce.status||"unknown").toLowerCase();Ee[Le]!=null?Ee[Le]+=1:Ee.unknown+=1}),{total:z,totalWatchedEpisodes:ee,byStatus:Ee,avgScore:H.length?ve/H.length:0,totalHours:k}},[t]),Ke=(he==null?void 0:he.daysWatched)??(fe.totalHours||0)/24,et=(he==null?void 0:he.episodesWatched)??fe.totalWatchedEpisodes,K=z=>{const ee=z.image||"https://imgur.com/chUgq4W.png",k=Number.isFinite(Number(z.watchedEpisodes))?Number(z.watchedEpisodes):0,H=Number.isFinite(Number(z.episodes))?Number(z.episodes):null,ve=H?`Episode ${Math.min(k,H)}/${H}`:`Episode ${k}`,Ee=Number.isFinite(Number(z.score))&&Number(z.score)>0?z.score:"Not rated";return c.jsxs("article",{className:"anime-card",onClick:()=>te(z.synopsis?z:{...z,synopsis:W[z.id]}),children:[c.jsxs("div",{className:"anime-cover-wrap",children:[c.jsx("img",{className:"anime-cover",src:ee,alt:z.title,loading:"lazy",decoding:"async"}),c.jsx("div",{className:`badge-status ${(z.status||"unknown").toLowerCase()}`,children:e(z.status)}),z.score!=null&&c.jsx("div",{className:"badge-score",children:Ee})]}),c.jsxs("div",{className:"anime-meta",children:[c.jsx("div",{className:"anime-title",title:z.title,children:z.title}),c.jsx("div",{className:"anime-sub",children:z.episodes?`${z.episodes} episodes`:"Episodes: ?"}),c.jsx("div",{className:"anime-progress",children:ve}),c.jsxs("div",{className:"anime-progress",children:["Status: ",e(z.status)]})]})]},z.id||z.title)},D=z=>c.jsxs("article",{className:"anime-update-card",children:[c.jsx("div",{className:"anime-update-title",title:z.title,children:z.title}),c.jsxs("div",{className:"anime-update-meta",children:[c.jsx("span",{className:"anime-update-progress",children:P(z)}),c.jsx("span",{className:"anime-update-dot","aria-hidden":"true",children:""}),c.jsx("span",{className:"anime-update-status",children:e(z.status)})]}),c.jsx("div",{className:"anime-update-time",children:R(z.updatedAt)})]},`update-${z.id||z.title}`);return c.jsxs("main",{className:"anime-page",children:[c.jsxs("div",{className:"anime-content",children:[c.jsxs("header",{className:"anime-header",style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%"},children:[c.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[c.jsx("h1",{className:"anime-title",style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Anime Library"}),c.jsx("p",{className:"anime-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"The Anime I've watched/watching synced directly from MAL (MyAnimeList)"})]}),n&&c.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:c.jsx("button",{className:"stat-link",type:"button",onClick:A,children:"Download Images"})})]}),c.jsxs("div",{className:"anime-stats",children:[c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Total Entries"}),c.jsx("div",{className:"anime-stat-value",children:fe.total})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Episodes Watched"}),c.jsx("div",{className:"anime-stat-value",children:et})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Watching"}),c.jsx("div",{className:"anime-stat-value",children:fe.byStatus.watching})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Completed"}),c.jsx("div",{className:"anime-stat-value",children:fe.byStatus.completed})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Plan to Watch"}),c.jsx("div",{className:"anime-stat-value",children:fe.byStatus.plan_to_watch})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Avg. Score"}),c.jsx("div",{className:"anime-stat-value",children:fe.avgScore?fe.avgScore.toFixed(1):"0.0"})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Days Watched"}),c.jsx("div",{className:"anime-stat-value",children:Ke.toFixed(1)})]})]}),c.jsxs("section",{className:"anime-toolbar",children:[c.jsx("input",{type:"text",placeholder:"Search anime by title...",value:d,onChange:z=>f(z.target.value),className:"anime-input"}),c.jsxs("select",{value:m,onChange:z=>v(z.target.value),className:"anime-select",children:[c.jsx("option",{value:"all",children:"All statuses"}),c.jsx("option",{value:"watching",children:"Watching"}),c.jsx("option",{value:"completed",children:"Completed"}),c.jsx("option",{value:"on_hold",children:"On Hold"}),c.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"}),c.jsx("option",{value:"dropped",children:"Dropped"})]})]}),w&&c.jsx("div",{className:"loading",children:"Loading anime list from MAL..."}),C&&c.jsx("div",{className:"error-state",children:C}),!w&&!C&&c.jsx(c.Fragment,{children:a.length===0?c.jsx("div",{className:"empty-state",children:"No results match your filters yet."}):c.jsx("section",{className:"anime-grid",children:a.map(z=>K(z))})})]}),b.length>0&&c.jsxs("aside",{className:"anime-updates-float",children:[c.jsxs("div",{className:"anime-updates-header",children:[c.jsx("h3",{children:"Recent Updates"}),c.jsx("span",{className:"anime-updates-caption",children:"Last list activity"})]}),c.jsx("div",{className:"anime-updates-list",children:b.map(z=>D(z))})]}),Q&&c.jsx("div",{className:"modal-backdrop visible",onClick:z=>{z.target===z.currentTarget&&te(null)},children:c.jsxs("div",{className:"anime-modal",children:[c.jsxs("div",{className:"anime-modal-header",children:[c.jsx("h2",{style:{color:"#ffb6c1",margin:0},children:Q.title}),c.jsx("button",{className:"anime-modal-close",onClick:()=>te(null),type:"button",children:"Close"})]}),c.jsxs("div",{className:"anime-modal-body",children:[c.jsx("div",{children:c.jsx("img",{className:"anime-modal-cover",src:Q.image||"https://imgur.com/chUgq4W.png",alt:Q.title})}),c.jsxs("div",{className:"anime-modal-meta",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Status:"})," ",e(Q.status)]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Episodes:"})," ",Q.episodes?Q.episodes:"Unknown"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Progress:"})," ",Number.isFinite(Number(Q.watchedEpisodes))?`Episode ${Q.watchedEpisodes}${Number.isFinite(Number(Q.episodes))?`/${Q.episodes}`:""}`:"Unknown"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Score:"})," ",Number.isFinite(Number(Q.score))&&Number(Q.score)>0?Q.score:"Not rated"]})]}),c.jsx(ub,{modalItem:Q,modalLoading:se,modalSynopsisShown:me,onReveal:async()=>{if(!Q)return;we(!0);const z=Q.id;if(!z)return;const ee=W[z];if(ee!==void 0){te(k=>k&&{...k,synopsis:ee});return}oe(!0);try{const k=await ob(z);ie(H=>({...H,[z]:k||""})),te(H=>H&&{...H,synopsis:k||""})}catch{ie(H=>({...H,[z]:""})),te(H=>H&&{...H,synopsis:""})}finally{oe(!1)}}})]})]})})]})}function ub({modalItem:n,modalLoading:e,modalSynopsisShown:t,onReveal:s}){var w;const a=((w=n==null?void 0:n.synopsis)==null?void 0:w.trim())||"",[l,d]=L.useState(0),[f,m]=L.useState(!1),v=L.useRef(null);return L.useEffect(()=>{if(t&&v.current){const E=v.current.scrollHeight;d(E),m(!0)}else d(0),m(!1)},[t,a]),c.jsxs("div",{className:"anime-modal-summary",children:[c.jsxs("div",{className:"anime-modal-summary-header",children:[c.jsx("h3",{children:"Synopsis"}),!t&&c.jsx("button",{className:"anime-synopsis-btn",type:"button",onClick:s,children:e?"Loading...":"Reveal Synopsis"})]}),c.jsx("div",{className:`anime-modal-summary-body ${t?"is-open":""}`,style:{maxHeight:t?`${l}px`:0,opacity:t?1:0},children:c.jsx("div",{ref:v,children:c.jsx("p",{className:"anime-modal-summary-text",children:e&&!a?"Loading synopsis...":a||"No synopsis available."})})}),!t&&c.jsx("p",{className:"anime-modal-summary-text anime-modal-summary-hint",children:"Synopsis hidden. Click reveal to view."})]})}function db(){const n={game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:"",image:"",productURL:"",notes:""},{admin:e}=Po(),[t,s]=L.useState([]),[a,l]=L.useState(!0),[d,f]=L.useState(""),[m,v]=L.useState("all"),[w,E]=L.useState("name"),[C,$]=L.useState(!1),[Q,te]=L.useState([]),[W,ie]=L.useState(""),[se,oe]=L.useState(null),[me,we]=L.useState(!1),[he,V]=L.useState(n);L.useEffect(()=>{document.title="TCG | Collection"},[]),L.useEffect(()=>{let K=!1;async function D(){try{const z=Zn(Ze,"tcg"),ee=await zs(z),k=[];ee.forEach(H=>k.push({id:H.id,...H.data()})),K||s(k)}catch(z){console.error("Error loading TCG:",z);try{const k=await fetch("/base/tcg-collection.json",{cache:"no-cache"});if(!k.ok)throw new Error("fallback fetch failed");const H=await k.json(),ve=Array.isArray(H.tcg)?H.tcg:[];K||s(ve.map((Ee,Ce)=>({id:Ee.id||`offline-${Ce}`,...Ee})))}catch(ee){console.error("TCG offline fallback failed",ee)}}finally{K||l(!1)}}return D(),()=>{K=!0}},[]);const R=t.filter(K=>{if(m!=="all"&&K.game!==m)return!1;if(!d)return!0;const D=d.toLowerCase();return(K.name||"").toLowerCase().includes(D)||(K.setName||"").toLowerCase().includes(D)||(K.number||"").toLowerCase().includes(D)}),j=[...R].sort((K,D)=>{const z=(K.name||"").toLowerCase(),ee=(D.name||"").toLowerCase(),k=(K.setName||"").toLowerCase(),H=(D.setName||"").toLowerCase(),ve=(K.rarity||"").toLowerCase(),Ee=(D.rarity||"").toLowerCase(),Ce=Number(K.quantity||0),Le=Number(D.quantity||0),$e=Number(K.estimatedValue||0)*Math.max(1,Ce),We=Number(D.estimatedValue||0)*Math.max(1,Le);switch(w){case"set":return k.localeCompare(H)||z.localeCompare(ee);case"rarity":return ve.localeCompare(Ee)||z.localeCompare(ee);case"quantity":return Le-Ce||z.localeCompare(ee);case"value":return We-$e||z.localeCompare(ee);case"name":default:return z.localeCompare(ee)}}),A=t.reduce((K,D)=>{const z=Number(D.quantity||1),ee=Number(D.pricePaid||0),k=Number(D.estimatedValue||0);return K.totalCards+=z,K.totalPaid+=z*ee,K.totalValue+=z*k,D.game==="pokemon"&&(K.pokemon+=z),D.game==="onepiece"&&(K.onepiece+=z),K},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),M=A.totalValue-A.totalPaid,P=(K,D)=>{V(z=>({...z,[K]:D}))},b=async()=>{if(!e)return;if(!he.name.trim()){alert("Card name is required.");return}const K={game:he.game,name:he.name.trim(),setName:he.setName.trim(),number:he.number.trim(),rarity:he.rarity.trim(),condition:he.condition.trim(),quantity:Number(he.quantity||1),pricePaid:Number(he.pricePaid||0),estimatedValue:Number(he.estimatedValue||0),image:he.image.trim(),productURL:he.productURL.trim(),notes:he.notes.trim()},D=k=>({game:(k.game||"").toLowerCase().trim(),name:(k.name||"").toLowerCase().trim(),setName:(k.setName||"").toLowerCase().trim(),number:(k.number||"").toLowerCase().trim(),rarity:(k.rarity||"").toLowerCase().trim(),condition:(k.condition||"").toLowerCase().trim(),pricePaid:Number(k.pricePaid||0),estimatedValue:Number(k.estimatedValue||0),image:(k.image||"").trim(),productURL:(k.productURL||"").trim(),notes:(k.notes||"").trim()}),z=D(K),ee=t.find(k=>{const H=D(k);return H.game===z.game&&H.name===z.name&&H.setName===z.setName&&H.number===z.number&&H.rarity===z.rarity&&H.condition===z.condition&&H.pricePaid===z.pricePaid&&H.estimatedValue===z.estimatedValue&&H.image===z.image&&H.productURL===z.productURL&&H.notes===z.notes});try{const k=Zn(Ze,"tcg");if(ee!=null&&ee.id){const H=Number(ee.quantity||1)+K.quantity;await hs(St(Ze,"tcg",ee.id),{quantity:H}),s(ve=>ve.map(Ee=>Ee.id===ee.id?{...Ee,quantity:H}:Ee))}else{await io(k,K);const H=await zs(k),ve=[];H.forEach(Ee=>ve.push({id:Ee.id,...Ee.data()})),s(ve)}V(n),we(!1)}catch(k){console.error("Error adding card:",k),alert("Failed to save card.")}},fe=async()=>{if(!e||!se)return;if(!se.name.trim()){alert("Card name is required.");return}const K={game:se.game,name:se.name.trim(),setName:se.setName.trim(),number:se.number.trim(),rarity:se.rarity.trim(),condition:se.condition.trim(),quantity:Number(se.quantity||1),pricePaid:Number(se.pricePaid||0),estimatedValue:Number(se.estimatedValue||0),image:se.image?se.image.trim():"",productURL:se.productURL?se.productURL.trim():"",notes:se.notes?se.notes.trim():""};try{await hs(St(Ze,"tcg",se.id),K),s(D=>D.map(z=>z.id===se.id?{...z,...K}:z)),oe(null)}catch(D){console.error("Error updating card:",D),alert("Failed to update card.")}},Ke=async K=>{if(e&&window.confirm("Delete this card?"))try{await _i(St(Ze,"tcg",K)),s(D=>D.filter(z=>z.id!==K))}catch(D){console.error("Delete error:",D),alert("Failed to delete card.")}},et=()=>{if(!t.length){alert("No cards to export.");return}const K=new Blob([JSON.stringify({tcg:t},null,2)],{type:"application/json"}),D=URL.createObjectURL(K),z=document.createElement("a");z.href=D,z.download="tcg-collection.json",z.click(),URL.revokeObjectURL(D)};return c.jsxs("main",{className:"page",children:[c.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"6px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's TCG Collection"}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Check out my TCG Collection with all the data of how much I spent (Under construction) and how much my collection is worth in total!"}),c.jsx("div",{style:{marginTop:"10px"},children:c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:et,children:"Export JSON"})})]}),e&&c.jsx("button",{className:"manga-btn",type:"button","aria-label":"Add card",onClick:()=>we(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"56px",height:"56px",borderRadius:"50%",padding:0,fontSize:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),e&&me&&c.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:K=>{K.target===K.currentTarget&&we(!1)},children:c.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:K=>K.stopPropagation(),children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Add card"}),c.jsx("button",{className:"dashboard-close",onClick:()=>we(!1),type:"button",children:"Close"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[c.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:he.image?c.jsx("img",{src:he.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",c.jsxs("select",{value:he.game,onChange:K=>P("game",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[c.jsx("option",{value:"pokemon",children:"Pokemon"}),c.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",c.jsx("input",{type:"text",value:he.name,onChange:K=>P("name",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",c.jsx("input",{type:"text",value:he.setName,onChange:K=>P("setName",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",c.jsx("input",{type:"text",value:he.number,onChange:K=>P("number",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",c.jsx("input",{type:"text",value:he.rarity,onChange:K=>P("rarity",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",c.jsx("input",{type:"text",value:he.condition,onChange:K=>P("condition",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",c.jsx("input",{type:"number",min:"1",value:he.quantity,onChange:K=>P("quantity",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",c.jsx("input",{type:"number",step:"0.01",min:"0",value:he.pricePaid,onChange:K=>P("pricePaid",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",c.jsx("input",{type:"number",step:"0.01",min:"0",value:he.estimatedValue,onChange:K=>P("estimatedValue",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",c.jsx("input",{type:"text",value:he.image||"",onChange:K=>P("image",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Product URL (backend only)",c.jsx("input",{type:"text",value:he.productURL||"",onChange:K=>P("productURL",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{gridColumn:"1 / -1",fontSize:"0.8rem",color:"var(--text-soft)"},children:["Notes",c.jsx("textarea",{value:he.notes,onChange:K=>P("notes",K.target.value),rows:3,style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff",resize:"vertical"}})]})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[c.jsx("button",{onClick:()=>{V(n),we(!1)},style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:b,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})]})]})}),e&&se&&c.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:K=>{K.target===K.currentTarget&&oe(null)},children:c.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:K=>K.stopPropagation(),children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Edit card"}),c.jsx("button",{className:"dashboard-close",onClick:()=>oe(null),type:"button",children:"Close"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[c.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:se.image?c.jsx("img",{src:se.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",c.jsxs("select",{value:se.game,onChange:K=>oe(D=>({...D,game:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[c.jsx("option",{value:"pokemon",children:"Pokemon"}),c.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",c.jsx("input",{type:"text",value:se.name,onChange:K=>oe(D=>({...D,name:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",c.jsx("input",{type:"text",value:se.setName,onChange:K=>oe(D=>({...D,setName:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",c.jsx("input",{type:"text",value:se.number,onChange:K=>oe(D=>({...D,number:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",c.jsx("input",{type:"text",value:se.rarity,onChange:K=>oe(D=>({...D,rarity:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",c.jsx("input",{type:"text",value:se.condition,onChange:K=>oe(D=>({...D,condition:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",c.jsx("input",{type:"number",value:se.quantity,onChange:K=>oe(D=>({...D,quantity:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (each)",c.jsx("input",{type:"number",value:se.pricePaid,onChange:K=>oe(D=>({...D,pricePaid:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (each)",c.jsx("input",{type:"number",value:se.estimatedValue,onChange:K=>oe(D=>({...D,estimatedValue:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",c.jsx("input",{type:"text",value:se.image||"",onChange:K=>oe(D=>({...D,image:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Product URL (backend only)",c.jsx("input",{type:"text",value:se.productURL||"",onChange:K=>oe(D=>({...D,productURL:K.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{gridColumn:"1 / -1",fontSize:"0.8rem",color:"var(--text-soft)"},children:["Notes",c.jsx("textarea",{value:se.notes||"",onChange:K=>oe(D=>({...D,notes:K.target.value})),rows:3,style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff",resize:"vertical"}})]})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[c.jsx("button",{onClick:()=>oe(null),style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:fe,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save changes"})]})]})}),c.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:A.totalCards})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",A.totalPaid.toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",A.totalValue.toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:M>=0?"#00e676":"#ff8a80"},children:[M>=0?"+":"-","$",Math.abs(M).toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:A.pokemon})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:A.onepiece})]})]}),c.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[c.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:d,onChange:K=>f(K.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),c.jsxs("select",{value:m,onChange:K=>v(K.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[c.jsx("option",{value:"all",children:"All games"}),c.jsx("option",{value:"pokemon",children:"Pokemon only"}),c.jsx("option",{value:"onepiece",children:"One Piece only"})]}),c.jsxs("select",{value:w,onChange:K=>E(K.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[c.jsx("option",{value:"name",children:"Sort: Name (A-Z)"}),c.jsx("option",{value:"set",children:"Sort: Set (A-Z)"}),c.jsx("option",{value:"rarity",children:"Sort: Rarity (A-Z)"}),c.jsx("option",{value:"quantity",children:"Sort: Quantity (high to low)"}),c.jsx("option",{value:"value",children:"Sort: Value (high to low)"})]})]}),a?c.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):R.length===0?c.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):c.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:j.map(K=>{const D=Number(K.quantity||1),z=D*Number(K.pricePaid||0),ee=D*Number(K.estimatedValue||0);return c.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem",display:"flex",flexDirection:"column",gap:"6px"},children:[K.image&&c.jsx("div",{style:{width:"100%",paddingTop:"140%",position:"relative",overflow:"hidden",borderRadius:"10px",background:"#1e0d14"},children:c.jsx("img",{src:K.image,alt:K.name||"card image",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"contain"}})}),c.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:K.name||"Unnamed card"}),c.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:K.setName||""}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[c.jsxs("span",{children:["#",K.number||"-"]}),c.jsx("span",{children:K.rarity||""})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[c.jsxs("span",{children:["Cond: ",K.condition||"N/A"]}),c.jsxs("span",{children:["Qty: ",D]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[c.jsxs("span",{children:["Paid: $",z.toFixed(2)]}),c.jsxs("span",{children:["Value: $",ee.toFixed(2)]})]}),K.notes&&c.jsxs("div",{style:{color:"#9c8fa6",fontSize:"0.72rem",fontStyle:"italic",textAlign:"center",marginTop:"6px"},children:['"',K.notes,'"']}),c.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[c.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem",whiteSpace:"nowrap"},children:K.game==="pokemon"?"Pokemon":"One Piece"}),e&&c.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",marginLeft:"auto"},children:[c.jsx("button",{onClick:()=>oe({...K,pricePaid:K.pricePaid??"",estimatedValue:K.estimatedValue??"",quantity:K.quantity??1}),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"rgba(255,105,180,0.15)",color:"#ffb6c1",fontSize:"0.7rem",cursor:"pointer"},children:"Edit"}),c.jsx("button",{onClick:()=>Ke(K.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})]})]})]},K.id)})})]})}const ru="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",su="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",iu="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82",bv="mangaLibraryActivityLog";function Bl(n){const e=n==null?"":String(n);return e.trim()?e.replace(/\s*,?\s*(?:vol(?:ume)?\.?)\s+\d+.*$/i,"").trim():""}function ga(n){if(!n)return null;if(n instanceof Date)return n;if(n&&typeof n.toDate=="function")return n.toDate();const e=String(n).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,d,f]=t;return new Date(Number(l),Number(d)-1,Number(f))}const s=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(s){let[,l,d,f]=s;const m=f.length===2?+`20${f}`:Number(f);return new Date(m,Number(l)-1,Number(d))}const a=new Date(e);return isNaN(a.getTime())?null:a}function ld(n){const e=n.seriesKey||n.series||n.Series||n.title||n.Title||"",s=(Bl(e)||e).trim();return s?s.toLowerCase():""}function hb(n){const e=(n==null?void 0:n.series)||(n==null?void 0:n.Series)||(n==null?void 0:n.title)||(n==null?void 0:n.Title)||"Unknown Series";return Bl(e)||"Unknown Series"}function Av(n){const e=(n||"").trim(),t=e.match(/^(.*?)(?:,?\s*(?:vol\.|volume)\s*(\d+)(?:\s*[-]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),s=t?t[1].trim().toLowerCase():e.toLowerCase(),a=t&&t[2]?parseInt(t[2],10):0;return{name:s,vol:Number.isFinite(a)?a:0}}function fb(n,e){const t=(n==null?void 0:n.Title)||(n==null?void 0:n.title)||"",s=(e==null?void 0:e.Title)||(e==null?void 0:e.title)||"",a=Av(t),l=Av(s),d=a.name.localeCompare(l.name);return d!==0?d:a.vol!==l.vol?a.vol-l.vol:t.localeCompare(s)}function Qh(){return{publisher:"",demographic:"",genre:"",subGenre:"",datePurchased:"",msrp:"",initialPublisher:"",initialDemographic:"",initialGenre:"",initialSubGenre:"",initialDatePurchased:"",initialMsrp:"",dateMixed:!1,readChecked:!1,readIndeterminate:!1}}function Nv(){return{read:!1,datePurchased:"",dateRead:"",pageCount:"",msrp:"",amountPaid:"",rating:"",special:!1,specialType:"",specialVolumes:"",collectiblePrice:""}}function kv(n,e={}){const t=e.ignoreShared,s=(n==null?void 0:n.amountPaid)??(n==null?void 0:n.AmountPaid)??(n==null?void 0:n.paid)??(n==null?void 0:n.Paid)??"",a=(n==null?void 0:n.msrp)??(n==null?void 0:n.MSRP)??"",l=((n==null?void 0:n.datePurchased)||(n==null?void 0:n.DatePurchased)||"").trim(),d=((n==null?void 0:n.publisher)||(n==null?void 0:n.Publisher)||"").trim(),f=((n==null?void 0:n.demographic)||(n==null?void 0:n.Demographic)||"").trim(),m=((n==null?void 0:n.genre)||(n==null?void 0:n.Genre)||"").trim(),v=((n==null?void 0:n.specialType)||(n==null?void 0:n.SpecialType)||"").trim(),w=(n==null?void 0:n.specialVolumes)??(n==null?void 0:n.SpecialVolumes)??(n==null?void 0:n.volumesContained)??"",E=(n==null?void 0:n.collectiblePrice)??(n==null?void 0:n.CollectiblePrice)??"",C=!!v,$=(n==null?void 0:n.pageCount)??(n==null?void 0:n.PageCount)??(n==null?void 0:n.pages)??(n==null?void 0:n.Pages)??"",Q=$==null?"":String($).trim(),te=Number(Q),W=!Q||Number.isNaN(te)||te<=0;return!C&&(s===""||s===null)||W||!l||!t&&(a===""||!d||!f||!m)||C&&!v||C&&v.toLowerCase()==="collectible"&&(E===""||E===null)||C&&v.toLowerCase()==="specialedition"&&(w===""||w===null)}function pb(n){const e=(n==null?void 0:n.amountPaid)??"",t=((n==null?void 0:n.datePurchased)||"").trim(),s=!!(n!=null&&n.specialType)||!!(n!=null&&n.special),a=((n==null?void 0:n.specialType)||"").trim(),l=(n==null?void 0:n.specialVolumes)??"",d=(n==null?void 0:n.collectiblePrice)??"",f=(n==null?void 0:n.pageCount)??"",m=(n==null?void 0:n.msrp)??"",v=((n==null?void 0:n.publisher)||"").trim(),w=((n==null?void 0:n.demographic)||"").trim(),E=((n==null?void 0:n.genre)||"").trim(),C=!s&&(e===""||e===null),$=s&&!a,Q=s&&a.toLowerCase()==="collectible"&&(d===""||d===null),te=s&&a.toLowerCase()==="specialedition"&&(l===""||l===null),W=(()=>{const ie=(f??"").toString().trim();if(ie==="")return!0;const se=Number(ie);return Number.isNaN(se)||se<=0})();return{amountPaid:C,datePurchased:!t,specialType:$,collectiblePrice:Q,specialVolumes:te,pageCount:W,msrp:m===""||m===null,publisher:!v,demographic:!w,genre:!E}}function mb(n){return!n||!n.books||!n.books.length?!1:n.books.some(e=>{const t=(e==null?void 0:e.msrp)??(e==null?void 0:e.MSRP)??"",s=((e==null?void 0:e.publisher)||(e==null?void 0:e.Publisher)||"").trim(),a=((e==null?void 0:e.demographic)||(e==null?void 0:e.Demographic)||"").trim(),l=((e==null?void 0:e.genre)||(e==null?void 0:e.Genre)||"").trim();return t===""||!s||!a||!l})}function gb(n){const e=new Map;for(const t of n){const s=ld(t)||t.id;if(!e.has(s)){const m=Bl(t.series||t.Series||t.title||t.Title||"Unknown Series")||"Unknown Series";e.set(s,{key:s,title:m,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const a=e.get(s);a.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;a.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(a.readVolumes+=1,a.readPages+=l);const f=Number(t.rating||t.Rating);!isNaN(f)&&f>0&&(a.ratingSum+=f,a.ratingCount+=1)}return e}function eo(n,e,t=5){const s=new Map;for(const a of n.values()){const l=(a[e]||"").trim();if(!l)continue;const d=l.split(/[\/,]/).map(f=>f.trim()).filter(Boolean);for(const f of d)s.set(f,(s.get(f)||0)+1)}return[...s.entries()].sort((a,l)=>l[1]-a[1]).slice(0,t).map(([a,l])=>({name:a,count:l}))}function jv(n,e){const t=Array.from({length:12},(s,a)=>{const l=new Date(e,a,1);return{key:`${e}-${a}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:a,value:0}});for(const s of n){const a=ga(s.dateRead||s.DateRead);!a||a.getFullYear()!==e||(t[a.getMonth()].value+=1)}return t}function dl(n){const e=n.getFullYear(),t=`${n.getMonth()+1}`.padStart(2,"0"),s=`${n.getDate()}`.padStart(2,"0");return`${e}-${t}-${s}`}async function Yh(n,e){try{await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function yb(n){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of n){const d=ga(l.dateRead||l.DateRead);d&&(t[d.getDay()]+=1)}if(!t.some(l=>l>0))return[];const a=t.reduce((l,d)=>Math.max(l,d),0)||1;return e.map((l,d)=>({label:l,value:t[d],pct:t[d]/a}))}function vb(n,e=8){const t=[...n.values()];t.sort((l,d)=>d.volumes-l.volumes);const s=t.slice(0,e),a=s.reduce((l,d)=>Math.max(l,d.volumes),0)||1;return s.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/a}))}function _b(n){const e=[];for(const t of n){const s=ga(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!s)continue;const a=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:s,title:a})}return e.sort((t,s)=>t.date-s.date),e}function wb(n){const e=new Date;for(const t of n)if(t.date>=e)return t;return n[n.length-1]||null}function xb(n){let e=0,t=0;for(const s of n){const a=ga(s.datePurchased||s.DatePurchased),l=ga(s.dateRead||s.DateRead);if(!a||!l)continue;const d=l-a;d<=0||(e+=d/(1e3*60*60*24),t+=1)}return t?e/t:null}function Eb(n){const e=new Map;for(const t of n){const s=ga(t.datePurchased||t.DatePurchased),a=ga(t.dateRead||t.DateRead);if(!s||!a)continue;const l=a-s;if(l<=0)continue;const d=l/(1e3*60*60*24),f=ld(t)||t.id,m=Bl(t.series||t.Series||t.title||t.Title||"Untitled")||"Untitled";e.has(f)||e.set(f,{key:f,title:m,total:0,count:0,min:d,max:d});const v=e.get(f);v.total+=d,v.count+=1,v.min=Math.min(v.min,d),v.max=Math.max(v.max,d)}return[...e.values()].filter(t=>t.count>0).map(t=>({...t,avg:t.total/t.count})).sort((t,s)=>s.avg-t.avg)}function Tb(n){let e=0,t=0,s=0;for(const a of n){const l=Number(a.msrp||a.MSRP||0)||0,d=Number(a.amountPaid||a.AmountPaid||a.pricePaid||0)||l||0,f=Number(a.collectiblePrice||a.CollectiblePrice||0)||0;e+=l,t+=d,s+=f}return{msrpTotal:e,paidTotal:t,collectibleTotal:s}}function Sb(n){const e=new Map;for(const t of n){const s=ld(t)||t.id;if(!e.has(s)){const E=t.series||t.Series||t.title||t.Title||"Untitled";e.set(s,{key:s,title:Bl(E)||E.trim()||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]})}const a=e.get(s);a.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,d=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,f=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,m=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;a.msrp+=l,a.paid+=d,a.collectible+=f,a.pages+=m,v&&(a.readPages+=m);const w=Number(t.rating||t.Rating);!isNaN(w)&&w>0&&a.ratings.push(w)}return[...e.values()]}function Ib(n){let e=0,t=0;for(const s of n){const a=Number(s.pages||s.Pages||s.pageCount||0)||0;e+=a,(!!s.read||s.status==="Read"||s.Read===!0)&&(t+=a)}return{total:e,read:t}}function Cb(n){let e=0,t=0;for(const s of n.values())s.ratingCount>0&&(e+=s.ratingSum/s.ratingCount,t+=1);return t?e/t:null}function Pb({data:n}){if(!n||!n.length)return c.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=n.reduce((v,w)=>Math.max(v,w.value),0)||1,t=480,s=230,a=30,l=s-a*2,d=t/Math.max(n.length-1,1),f=n.map((v,w)=>{const E=w*d,C=s-a-v.value/e*l;return{...v,x:E,y:C}}),m=f.map((v,w)=>w===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return c.jsx("div",{className:"line-chart",children:c.jsxs("svg",{viewBox:`0 0 ${t} ${s}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,w)=>{const E=s-a-v*l;return c.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:E,y2:E},`h-${w}`)}),f.map((v,w)=>c.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:a/2,y2:s-a/2},`v-${w}`)),c.jsx("path",{className:"line-path",d:m}),f.map((v,w)=>c.jsxs("g",{children:[c.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),c.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),c.jsx("text",{className:"line-label",x:v.x,y:s-4,children:v.label})]},w))]})})}function Rb({data:n}){return!n||!n.length?c.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):c.jsx("div",{className:"weekday-bars",children:n.map(e=>c.jsxs("div",{className:"weekday-col",children:[c.jsx("div",{className:"weekday-count",children:e.value}),c.jsx("div",{className:"weekday-bar-vert",children:c.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),c.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function bb(n,e,t){const s=n.getFullYear(),a=n.getMonth(),d=new Date(s,a,1).getDay(),f=new Date(s,a+1,0).getDate(),m=new Map;for(const E of e){const C=E.date;if(C.getFullYear()===s&&C.getMonth()===a){const $=C.getDate();m.has($)||m.set($,[]),m.get($).push(E)}}const v=[];for(let E=0;E<d;E++)v.push({type:"pad"});for(let E=1;E<=f;E++){const C=dl(new Date(s,a,E));v.push({type:"day",day:E,releases:m.get(E)||[],dateKey:C,isToday:C===t})}const w=Math.ceil(v.length/7)*7;for(;v.length<w;)v.push({type:"pad"});return v}function Ab(){const{user:n,admin:e,loading:t}=Po(),[s,a]=L.useState([]),[l,d]=L.useState([]),[f,m]=L.useState(!0),[v,w]=L.useState(null),[E,C]=L.useState("-"),[$,Q]=L.useState({yearly:ru,release:su,activity:iu}),[te,W]=L.useState(new Set),[ie,se]=L.useState(null),[oe,me]=L.useState(null),[we,he]=L.useState(new Set),[V,R]=L.useState(null),[j,A]=L.useState(""),M=L.useRef(null),[P,b]=L.useState(()=>Qh()),[fe,Ke]=L.useState(()=>Nv()),[et,K]=L.useState([]),[D,z]=L.useState(!1),[ee,k]=L.useState(""),[H,ve]=L.useState([]),[Ee,Ce]=L.useState(!1),[Le,$e]=L.useState(null),[We,st]=L.useState(null),yt=async()=>{if(e)try{Ce(!0);const F=(await zs(Zn(Ze,"admins"))).docs.map(J=>({uid:J.id,...J.data()}));ve(F)}catch(S){console.error("Failed to refresh admins",S)}finally{Ce(!1)}},nn=async()=>{const S=ee.trim();if(!S){alert("Enter a UID to grant admin.");return}try{await nu(St(Ze,"admins",S),{uid:S,role:"admin",grantedBy:(n==null?void 0:n.uid)||"manual",grantedAt:new Date().toISOString()},{merge:!0});try{await nu(St(Ze,"roles",S),{admin:!0,updatedAt:new Date().toISOString()},{merge:!0})}catch(F){console.warn("Legacy roles write skipped (no permission):",F==null?void 0:F.message)}k(""),await yt()}catch(F){console.error("Grant admin failed",F),alert("Failed to grant admin.")}},Bt=async S=>{const F=(S||ee).trim();if(!F){alert("Enter a UID to revoke admin.");return}try{await _i(St(Ze,"admins",F)),await _i(St(Ze,"roles",F)),S||k(""),await yt()}catch(J){console.error("Revoke admin failed",J),alert("Failed to revoke admin.")}},[Tn,tr]=L.useState(!1),[tt,nr]=L.useState(()=>new Date),[$t,ws]=L.useState({open:!1,type:null}),Sn=new Date().getFullYear(),hn=L.useRef(null),In=L.useRef(null);L.useEffect(()=>{document.title="Dashboard"},[]),L.useEffect(()=>(Tn||$t.open||D||!!We?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[Tn,$t.open,D,We]),L.useEffect(()=>{typeof window>"u"||(hn.current=localStorage.getItem("dashboard-yearly-posted"),In.current=localStorage.getItem("dashboard-release-posted"))},[]),L.useEffect(()=>{if(!e)return;const S=St(Ze,"settings","webhooks");(async()=>{try{const F=await Rf(S);if(F.exists()){const J=F.data();Q({yearly:J.yearly||ru,release:J.release||su,activity:J.activity||iu})}else await nu(S,{yearly:ru,release:su,activity:iu})}catch(F){console.error("Failed to load webhook settings",F)}})()},[e]),L.useEffect(()=>{if(!e)return;let S=!1;return(async()=>{try{Ce(!0);const F=await zs(Zn(Ze,"admins"));if(S)return;const J=F.docs.map(ye=>({uid:ye.id,...ye.data()}));ve(J)}catch(F){console.error("Failed to load admins",F)}finally{S||Ce(!1)}})(),()=>{S=!0}},[e]),L.useEffect(()=>{let S=!1;async function F(){if(!n||!e){a([]),d([]),w(null),m(!1);return}try{m(!0);const[J,ye]=await Promise.all([zs(Zn(Ze,"library")),zs(Zn(Ze,"wishlist"))]);if(S)return;a(J.docs.map(Ae=>({id:Ae.id,...Ae.data()}))),d(ye.docs.map(Ae=>({id:Ae.id,...Ae.data()}))),w(null)}catch(J){console.error(J),S||w("Failed to load dashboard data.")}finally{S||m(!1)}}return F(),()=>{S=!0}},[n,e]);const rr=L.useMemo(()=>{const S=s.length,F=s.filter(Ye=>!!Ye.read||Ye.status==="Read"||Ye.Read===!0).length,J=S-F,ye=S?Math.round(F/S*100):0,Ae=l.length,Qe=gb(s),Te=jv(s,Sn),dt=jv(s,Sn-1),Nt=Te.reduce((Ye,es)=>Ye+es.value,0),Rt=yb(s),wt=vb(Qe),xt=_b(l),Yt=wb(xt),kt=xb(s),lt=Tb(s),Rn=Ib(s),vt=Cb(Qe),Mn=Eb(s),pr=eo(Qe,"publisher",5),Xr=eo(Qe,"genre",5),mt=eo(Qe,"demographic",5),Zr=Sb(s);return{totalLibrary:S,readCount:F,unreadCount:J,readPct:ye,wishlistCount:Ae,seriesMap:Qe,monthlyReads:Te,prevYearReads:dt,currentYearReadsTotal:Nt,weekdayBreakdown:Rt,topSeriesBars:wt,releases:xt,nextRelease:Yt,avgDays:kt,purchaseToReadSeries:Mn,collectionValue:lt,pages:Rn,avgRating:vt,topPublishers:pr,topGenres:Xr,topDemographics:mt,seriesAggregates:Zr}},[s,l,Sn]),{totalLibrary:Bn,readCount:qr,unreadCount:Gr,readPct:Pt,wishlistCount:He,seriesMap:Cn,monthlyReads:xs,prevYearReads:Pn,currentYearReadsTotal:Cr,weekdayBreakdown:sr,topSeriesBars:Es,releases:fn,nextRelease:On,avgDays:fr,purchaseToReadSeries:Ts,collectionValue:Lt,pages:Mt,avgRating:rn,topPublishers:I,topGenres:ne,topDemographics:le,seriesAggregates:B}=rr,Y=On?On.date:null,Re=!!v,De=L.useMemo(()=>{if(!s||!s.length)return[];const S=new Map;s.forEach(J=>{const ye=ld(J)||J.id,Ae=hb(J);S.has(ye)||S.set(ye,{seriesKey:ye,displayName:Ae,books:[]}),S.get(ye).books.push(J)});const F=Array.from(S.values()).map(J=>({...J,books:[...J.books].sort(fb)}));return F.sort((J,ye)=>J.displayName.localeCompare(ye.displayName)),F},[s]),ft=L.useMemo(()=>De.flatMap(S=>S.books.map(F=>F.id)),[De]);L.useEffect(()=>{oe&&(s.some(S=>S.id===oe)||me(null))},[s,oe]),L.useEffect(()=>{ie&&(De.some(S=>S.seriesKey===ie)||se(null))},[De,ie]),L.useEffect(()=>{if(!we.size)return;const S=new Set(s.map(J=>J.id)),F=Array.from(we).filter(J=>!S.has(J));F.length&&he(J=>{const ye=new Set(J);return F.forEach(Ae=>ye.delete(Ae)),ye})},[s,we]),L.useEffect(()=>{const S=Array.from(we);if(!S.length){A("");return}const F=Array.from(new Set(S.map(J=>s.find(ye=>ye.id===J)).filter(Boolean).map(J=>{const ye=J.amountPaid??J.AmountPaid??"";return ye==null?"":String(ye)})));A(F.length===1?F[0]:"")},[we,s]),L.useEffect(()=>{const S=De.find(lt=>lt.seriesKey===ie);if(!S){b(Qh());return}const F=S.books,J=lt=>{const Rn=Array.from(new Set(F.map(vt=>{const Mn=lt(vt);return Mn==null?"":String(Mn).trim()})));return Rn.length===1?Rn[0]:""},ye=J(lt=>lt.publisher||lt.Publisher),Ae=J(lt=>lt.demographic||lt.Demographic),Qe=J(lt=>lt.genre||lt.Genre),Te=J(lt=>lt.subGenre||lt.SubGenre),dt=J(lt=>lt.msrp??lt.MSRP),Nt=Array.from(new Set(F.map(lt=>(lt.datePurchased||lt.DatePurchased||"").trim()).filter(Boolean))),Rt=Nt.length>1,wt=Rt?"":Nt[0]||"",xt=F.filter(lt=>!!lt.read||lt.status==="Read"||lt.Read===!0).length,Yt=xt===F.length&&F.length>0;b({publisher:ye,demographic:Ae,genre:Qe,subGenre:Te,datePurchased:wt,msrp:dt,initialPublisher:ye,initialDemographic:Ae,initialGenre:Qe,initialSubGenre:Te,initialDatePurchased:wt,initialMsrp:dt,dateMixed:Rt,readChecked:Yt,readIndeterminate:!Yt&&!(xt===0)})},[De,ie]),L.useEffect(()=>{M.current&&(M.current.indeterminate=P.readIndeterminate)},[P.readIndeterminate]),L.useEffect(()=>{const S=s.find(J=>J.id===oe);if(!S){Ke(Nv());return}const F=!!S.read||S.status==="Read"||S.Read===!0;Ke({read:F,datePurchased:S.datePurchased||S.DatePurchased||"",dateRead:F&&(S.dateRead||S.DateRead)||"",pageCount:S.pageCount??S.PageCount??S.pages??S.Pages??"",msrp:S.msrp??S.MSRP??"",amountPaid:S.amountPaid??S.AmountPaid??"",rating:F?S.rating??S.Rating??"":"",special:!!(S.specialType||S.SpecialType),specialType:S.specialType??S.SpecialType??"",specialVolumes:S.specialVolumes??S.SpecialVolumes??"",collectiblePrice:S.collectiblePrice??S.CollectiblePrice??"",publisher:S.publisher||S.Publisher||"",demographic:S.demographic||S.Demographic||"",genre:S.genre||S.Genre||""})},[oe,s]),L.useEffect(()=>{if(!Pn||!Pn.length)return;const S=Sn-1,F=Pn.reduce((Qe,Te)=>Qe+Te.value,0);if(!F||(hn.current?parseInt(hn.current,10):null)===S)return;const ye=Pn.map(Qe=>`${Qe.label}: ${Qe.value}`).join(", "),Ae=`Yearly reads summary for ${S}: ${F} total. Breakdown: ${ye}`;Yh($.yearly,Ae).then(()=>{hn.current=String(S),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String(S))})},[Pn,Sn]),L.useEffect(()=>{if(!On||!fn.length)return;const S=dl(On.date),F=dl(new Date);if(S>F||In.current===S)return;const J=fn.filter(Ae=>dl(Ae.date)===S);if(!J.length)return;const ye=`Wishlist releases for ${S}:
${J.map(Ae=>`- ${Ae.title}`).join(`
`)}`;Yh($.release,ye).then(()=>{In.current=S,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",S)})},[On,fn]),L.useEffect(()=>{if(!Y){C("-");return}const S=()=>{const J=Y-new Date;if(J<=0){C("Released");return}const ye=Math.floor(J/1e3),Ae=Math.floor(ye/86400),Qe=Math.floor(ye%86400/3600).toString().padStart(2,"0"),Te=Math.floor(ye%3600/60).toString().padStart(2,"0"),dt=Math.floor(ye%60).toString().padStart(2,"0");C(`${Ae}d ${Qe}:${Te}:${dt}`)};S();const F=setInterval(S,1e3);return()=>clearInterval(F)},[Y]),L.useEffect(()=>{if(!(typeof window>"u"))try{const S=localStorage.getItem(bv);if(!S)return;const F=JSON.parse(S);if(!Array.isArray(F))return;const J=F.map(ye=>({message:ye.message,ts:ye.ts?new Date(ye.ts):new Date})).filter(ye=>ye.message);J.length&&K(J)}catch(S){console.warn("Failed to load activity log",S)}},[]);const xe=async()=>{try{const S=await zs(Zn(Ze,"library"));a(S.docs.map(F=>({id:F.id,...F.data()})))}catch(S){console.error("Failed to refresh library",S),w(F=>F||"Failed to refresh library data.")}},Ve=S=>{const F=(S??"").toString().trim();if(F==="")return"";const J=parseFloat(F);return Number.isFinite(J)?J:""},Wt=S=>{const F=(S??"").toString().trim();if(F==="")return"";const J=parseInt(F,10);return Number.isFinite(J)?J:""},sn=S=>{try{const F=S.slice(0,100).map(J=>({message:J.message,ts:J.ts instanceof Date?J.ts.toISOString():J.ts}));typeof window<"u"&&localStorage.setItem(bv,JSON.stringify(F))}catch(F){console.warn("Failed to persist activity log",F)}},an=S=>{if(!S)return;const F={message:S,ts:new Date};K(Ae=>{const Qe=[F,...Ae].slice(0,100);return sn(Qe),Qe});const J=(n==null?void 0:n.email)||"anonymous",ye=`Activity: ${S}
User: ${J}
Time: ${new Date().toLocaleString()}`;Yh($.activity,ye).catch(Ae=>console.warn("Activity webhook failed",Ae))},Pr=S=>{W(F=>{const J=new Set(F);return J.has(S)?J.delete(S):J.add(S),J}),se(S),me(null)},Rr=(S,F,J)=>{const ye=S.metaKey||S.ctrlKey,Ae=S.shiftKey,Qe=ft.indexOf(F);let Te=new Set(we);if(Ae&&V!==null&&Qe!==-1){const dt=Math.min(V,Qe),Nt=Math.max(V,Qe);for(let Rt=dt;Rt<=Nt;Rt+=1){const wt=ft[Rt];wt&&Te.add(wt)}}else ye?Te.has(F)?Te.delete(F):Te.add(F):Te=new Set;he(Te),R(Qe),me(F),se(J),W(dt=>{const Nt=new Set(dt);return Nt.add(J),Nt})},pn=()=>{he(new Set),R(null)},Ss=async()=>{if(!e){alert("Dashboard is read-only for your account.");return}const S=Array.from(we);if(!S.length){alert("Select books in Library Manager (use Ctrl/Cmd or Shift) before bulk editing.");return}const F=(j||"").toString().trim(),J=F!=="",ye=Ve(F);if(J&&ye===""){alert("Enter a valid number for Amount Paid.");return}try{await Promise.all(S.map(Ae=>hs(St(Ze,"library",Ae),{amountPaid:J?ye:""}))),await xe(),pn(),an(`Updated amount paid for ${S.length} book${S.length===1?"":"s"} in library`),alert(`Applied Amount Paid to ${S.length} selection${S.length===1?"":"s"}.`)}catch(Ae){console.error("Failed to apply Amount Paid",Ae),alert("Failed to apply Amount Paid to selection.")}},br=async()=>{if(!e){alert("Dashboard is read-only for your account.");return}const S=De.find(xt=>xt.seriesKey===ie);if(!S||!S.books.length)return;const F=!P.readIndeterminate,J=!!P.readChecked,ye=P.datePurchased!==P.initialDatePurchased,Ae=P.msrp!==P.initialMsrp,Qe=P.publisher!==P.initialPublisher,Te=P.demographic!==P.initialDemographic,dt=P.genre!==P.initialGenre,Nt=P.subGenre!==P.initialSubGenre;if(!F&&!ye&&!Ae&&!Qe&&!Te&&!dt&&!Nt)return;const Rt=String(P.msrp??"").trim(),wt=Ae?Ve(Rt):"";if(Ae&&Rt!==""&&wt===""){alert("Enter a valid number for MSRP.");return}try{const xt=[];if(S.books.forEach(Yt=>{const kt={};F&&(kt.read=J,kt.dateRead=J?Yt.dateRead||Yt.DateRead||new Date().toISOString().slice(0,10):""),ye&&(kt.datePurchased=P.datePurchased||""),Ae&&(kt.msrp=P.msrp===""?"":wt),Qe&&(kt.publisher=P.publisher||""),Te&&(kt.demographic=P.demographic||""),dt&&(kt.genre=P.genre||""),Nt&&(kt.subGenre=P.subGenre||""),Object.keys(kt).length&&xt.push(hs(St(Ze,"library",Yt.id),kt))}),!xt.length)return;await Promise.all(xt),await xe(),me(null),an(`Updated series "${S.displayName||"Series"}" (${S.books.length} book${S.books.length===1?"":"s"})`),alert("Series updated.")}catch(xt){console.error("Failed to save series changes",xt),alert("Failed to update series.")}},Kr=async()=>{if(!e){alert("Dashboard is read-only for your account.");return}if(!oe)return;const S=!!fe.read,F=String(fe.msrp??"").trim(),J=String(fe.amountPaid??"").trim(),ye=String(fe.pageCount??"").trim(),Ae=String(fe.rating??"").trim(),Qe=Ve(F),Te=Ve(J),dt=Wt(ye),Nt=Ve(Ae);if(F!==""&&Qe===""){alert("Enter a valid number for MSRP.");return}if(J!==""&&Te===""){alert("Enter a valid number for Amount Paid.");return}if(ye!==""&&dt===""){alert("Enter a valid page count.");return}if(S&&Ae!==""&&Nt===""){alert("Enter a valid rating.");return}const Rt=!!fe.special,wt=Wt(fe.specialVolumes),xt=Ve(fe.collectiblePrice),Yt=String(fe.specialVolumes??"").trim(),kt=String(fe.collectiblePrice??"").trim();if(Rt&&fe.specialType==="specialEdition"&&Yt!==""&&wt===""){alert("Enter a valid number for volumes contained.");return}if(Rt&&fe.specialType==="collectible"&&kt!==""&&xt===""){alert("Enter a valid collectible price.");return}const lt=S?fe.dateRead||new Date().toISOString().slice(0,10):"",Rn={read:S,datePurchased:fe.datePurchased||"",dateRead:lt,msrp:fe.msrp===""?"":Qe,amountPaid:fe.amountPaid===""?"":Te,pageCount:fe.pageCount===""?"":dt,rating:S?fe.rating===""?"":Nt:"",specialType:Rt&&fe.specialType||"",specialVolumes:Rt&&fe.specialType==="specialEdition"?fe.specialVolumes===""?"":wt:"",collectiblePrice:Rt&&fe.specialType==="collectible"?fe.collectiblePrice===""?"":xt:""};try{await hs(St(Ze,"library",oe),Rn),await xe();const vt=s.find(pr=>pr.id===oe)||it,Mn=(vt==null?void 0:vt.Title)||(vt==null?void 0:vt.title)||"Untitled";an(`Updated "${Mn}" in library`),alert("Saved changes.")}catch(vt){console.error("Failed to save book changes",vt),alert("Failed to save changes.")}},wa=()=>{se(null),me(null),pn(),b(Qh())},ir=()=>{me(null),R(null)},Qr=De.find(S=>S.seriesKey===ie)||null,it=s.find(S=>S.id===oe)||null,Yr=ie?{msrp:!P.msrp,datePurchased:!P.datePurchased&&!P.dateMixed,publisher:!P.publisher,demographic:!P.demographic,genre:!P.genre}:{},$n=oe?pb({amountPaid:fe.amountPaid,msrp:fe.msrp,datePurchased:fe.datePurchased,publisher:(it==null?void 0:it.publisher)||(it==null?void 0:it.Publisher)||"",demographic:(it==null?void 0:it.demographic)||(it==null?void 0:it.Demographic)||"",genre:(it==null?void 0:it.genre)||(it==null?void 0:it.Genre)||"",special:fe.special,specialType:fe.specialType,specialVolumes:fe.specialVolumes,collectiblePrice:fe.collectiblePrice,pageCount:fe.pageCount}):{};if(t)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-loading",children:[c.jsx("h1",{children:"Dashboard"}),c.jsx("p",{children:"Checking permissions..."})]})});if(!n||!e)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-locked",children:[c.jsx("h1",{children:"Dashboard"}),c.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(f)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-loading",children:[c.jsx("h1",{children:"Dashboard"}),v?c.jsx("p",{className:"error",children:v}):c.jsx("p",{children:"Loading stats..."})]})});const Is=Bn+He,Cs=Is?Math.round(Bn/Is*100):0,Js=[...Cn.values()].filter(S=>S.ratingCount>0).map(S=>({title:S.title,avg:S.ratingSum/S.ratingCount,count:S.ratingCount})).sort((S,F)=>F.avg-S.avg||F.count-S.count).slice(0,3);function xa(){if(Y)nr(new Date(Y.getFullYear(),Y.getMonth(),1));else if(fn.length){const S=fn[0].date;nr(new Date(S.getFullYear(),S.getMonth(),1))}tr(!0)}function Ar(S){ws({open:!0,type:S})}function pt(){ws({open:!1,type:null})}const Ea=dl(new Date),Ps=bb(tt,fn,Ea);function Jr(){const S=$t.type;if(!S)return null;if(S==="publishers"){const F=[...eo(Cn,"publisher",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Publishers by Series"}),F.length===0?c.jsx("p",{children:"No publisher data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Publisher"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:F.map((J,ye)=>c.jsxs("tr",{children:[c.jsx("td",{children:ye+1}),c.jsx("td",{children:J.name}),c.jsx("td",{children:J.count})]},J.name+ye))})]})]})}if(S==="genres"){const F=[...eo(Cn,"genre",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Genres by Series"}),F.length===0?c.jsx("p",{children:"No genre data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Genre"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:F.map((J,ye)=>c.jsxs("tr",{children:[c.jsx("td",{children:ye+1}),c.jsx("td",{children:J.name}),c.jsx("td",{children:J.count})]},J.name+ye))})]})]})}if(S==="demographics"){const F=[...eo(Cn,"demographic",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Demographics by Series"}),F.length===0?c.jsx("p",{children:"No demographic data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Demographic"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:F.map((J,ye)=>c.jsxs("tr",{children:[c.jsx("td",{children:ye+1}),c.jsx("td",{children:J.name}),c.jsx("td",{children:J.count})]},J.name+ye))})]})]})}if(S==="timeToRead"){const F=Ts||[];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Average Time From Purchase to Read"}),fr==null?c.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["On average, it takes"," ",c.jsxs("strong",{children:[fr.toFixed(1)," days"]})," from purchase to finishing a volume."]}),F.length>0?c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Series"}),c.jsx("th",{children:"Avg Days"}),c.jsx("th",{children:"Longest"}),c.jsx("th",{children:"Shortest"}),c.jsx("th",{children:"Reads Count"})]})}),c.jsx("tbody",{children:F.map(J=>c.jsxs("tr",{children:[c.jsx("td",{children:J.title}),c.jsxs("td",{children:[J.avg.toFixed(1)," days"]}),c.jsxs("td",{children:[Math.round(J.max)," days"]}),c.jsxs("td",{children:[Math.round(J.min)," days"]}),c.jsx("td",{children:J.count})]},J.key))})]}):c.jsx("p",{style:{marginTop:8},children:"No series-level data yet."})]})]})}if(S==="collectionValue"){const{msrpTotal:F,paidTotal:J}=Lt,ye=F-J,Ae=F>0?(J/F*100).toFixed(1):"-",Qe=[...B].filter(Te=>Te.msrp||Te.paid||Te.collectible).sort((Te,dt)=>dt.msrp+dt.collectible-(Te.msrp+Te.collectible));return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Collection Value Breakdown"}),c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("th",{children:"Total MSRP"}),c.jsxs("td",{children:["$",F.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Total Paid"}),c.jsxs("td",{children:["$",J.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Difference"}),c.jsxs("td",{children:["$",ye.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Paid vs MSRP"}),c.jsx("td",{children:Ae==="-"?"-":`${Ae}%`})]})]})}),Qe.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"MSRP"}),c.jsx("th",{children:"Paid"}),c.jsx("th",{children:"Collectible"}),c.jsx("th",{children:"Books"})]})}),c.jsx("tbody",{children:Qe.map((Te,dt)=>c.jsxs("tr",{children:[c.jsx("td",{children:Te.title}),c.jsxs("td",{children:["$",Te.msrp.toFixed(2)]}),c.jsxs("td",{children:["$",Te.paid.toFixed(2)]}),c.jsx("td",{children:Te.collectible?`$${Te.collectible.toFixed(2)}`:"--"}),c.jsx("td",{children:Te.books})]},Te.title+dt))})]})]})]})}if(S==="pages"){const F=[...B].filter(J=>J.pages>0).map(J=>({...J,pct:J.pages?Math.round(J.readPages/J.pages*100):0})).sort((J,ye)=>ye.pages-J.pages);return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Pages Read vs Total"}),c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("th",{children:"Total Pages"}),c.jsx("td",{children:Mt.total.toLocaleString()})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Pages Read"}),c.jsx("td",{children:Mt.read.toLocaleString()})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Completion"}),c.jsx("td",{children:Mt.total?`${(Mt.read/Mt.total*100).toFixed(1)}%`:"-"})]})]})}),F.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Read Pages"}),c.jsx("th",{children:"Total Pages"}),c.jsx("th",{children:"% Read"}),c.jsx("th",{children:"Books"})]})}),c.jsx("tbody",{children:F.map((J,ye)=>c.jsxs("tr",{children:[c.jsx("td",{children:J.title}),c.jsx("td",{children:J.readPages.toLocaleString()}),c.jsx("td",{children:J.pages.toLocaleString()}),c.jsxs("td",{children:[J.pct,"%"]}),c.jsx("td",{children:J.books})]},J.title+ye))})]})]})]})}if(S==="ratings"){const F=[...B].map(J=>{if(!J.ratings.length)return null;const ye=J.ratings.reduce((Ae,Qe)=>Ae+Qe,0)/J.ratings.length;return{title:J.title,avg:ye,count:J.ratings.length}}).filter(Boolean).sort((J,ye)=>ye.avg-J.avg||ye.count-J.count);return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Ratings Overview"}),rn==null?c.jsx("p",{children:"No ratings have been recorded yet."}):c.jsxs("p",{children:["Average series rating across rated series is"," ",c.jsx("strong",{children:rn.toFixed(2)}),"."]}),F.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Avg"}),c.jsx("th",{children:"Ratings"})]})}),c.jsx("tbody",{children:F.map((J,ye)=>c.jsxs("tr",{children:[c.jsx("td",{children:J.title}),c.jsx("td",{children:J.avg.toFixed(2)}),c.jsx("td",{children:J.count})]},J.title+ye))})]})]})]})}return S==="releases"?c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Wishlist Releases"}),fn.length===0?c.jsx("p",{children:"No wishlist releases found."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Date"}),c.jsx("th",{children:"Title"})]})}),c.jsx("tbody",{children:fn.map((F,J)=>c.jsxs("tr",{children:[c.jsx("td",{children:F.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),c.jsx("td",{children:F.title})]},J))})]})]}):null}return c.jsxs("div",{className:"page dashboard-page",children:[c.jsxs("header",{className:"dashboard-header",style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",textAlign:"center",width:"100%"},children:[c.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Dashboard"}),c.jsx("p",{className:"dashboard-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"My Entire Statistics dashboard for my Manga. I still use Excel though."})]}),e&&c.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:c.jsx("button",{className:"stat-link",onClick:()=>z(!0),type:"button",children:"Admin Settings"})})]}),c.jsx("section",{id:"dashboardSection",className:"page-section active",children:c.jsxs("div",{className:"dashboard-grid",children:[c.jsxs("div",{className:"stat-stack",children:[c.jsxs("div",{className:"stat-card mini",children:[c.jsx("h3",{children:"Total Library Books"}),c.jsx("div",{className:"stat-value",children:Bn}),c.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),c.jsxs("div",{className:"stat-card mini",children:[c.jsx("h3",{children:"Wishlist Items"}),c.jsx("div",{className:"stat-value",children:He}),c.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Read / Unread"}),c.jsx("div",{className:"pie",style:{"--pct":`${Pt*3.6}deg`},children:c.jsxs("div",{className:"pie-label",children:[Pt,"%"]})}),c.jsxs("div",{className:"stat-value",children:[qr," read / ",Gr," unread"]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("ratings"),children:[c.jsx("h3",{children:"Ratings"}),c.jsx("div",{className:"stat-value",children:rn==null?"-":rn.toFixed(2)}),c.jsx("div",{className:"stat-sub",children:"Average across rated series."}),c.jsx("div",{className:"stat-list compact",children:Js.length?Js.map((S,F)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:F+1}),c.jsx("span",{className:"stat-name",children:S.title}),c.jsx("span",{className:"stat-count",children:S.avg.toFixed(2)})]},S.title+F)):c.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("pages"),children:[c.jsx("h3",{children:"Page Count Read / Total"}),c.jsxs("div",{className:"stat-value",children:[Mt.read.toLocaleString()," / ",Mt.total.toLocaleString()]}),c.jsx("div",{className:"stat-sub",children:Mt.total?`${(Mt.read/Mt.total*100).toFixed(1)}% read`:"-"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Library vs Wishlist"}),c.jsx("div",{className:"pie",style:{"--pct":`${Cs*3.6}deg`},children:c.jsxs("div",{className:"pie-label",children:[Cs,"%"]})}),c.jsxs("div",{className:"stat-value",children:[Bn," / ",He]}),c.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("demographics"),children:[c.jsx("h3",{children:"Top Demographics"}),c.jsx("div",{className:"stat-list",children:le.length?le.slice(0,3).map((S,F)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:F+1}),c.jsx("span",{className:"stat-name",children:S.name}),c.jsx("span",{className:"stat-count",children:S.count})]},S.name)):c.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("publishers"),children:[c.jsx("h3",{children:"Top Publishers"}),c.jsx("div",{className:"stat-list",children:I.length?I.slice(0,3).map((S,F)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:F+1}),c.jsx("span",{className:"stat-name",children:S.name}),c.jsx("span",{className:"stat-count",children:S.count})]},S.name)):c.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("genres"),children:[c.jsx("h3",{children:"Top Genres"}),c.jsx("div",{className:"stat-list",children:ne.length?ne.slice(0,3).map((S,F)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:F+1}),c.jsx("span",{className:"stat-name",children:S.name}),c.jsx("span",{className:"stat-count",children:S.count})]},S.name)):c.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>{xa()},children:[c.jsx("h3",{children:"Next Wishlist Release"}),c.jsx("div",{className:"stat-value next-release",children:On?On.title:"No upcoming releases"}),c.jsxs("div",{className:"stat-sub",children:[Y?Y.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",c.jsx("br",{}),c.jsx("span",{id:"statNextCountdown",children:E})]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("collectionValue"),style:{textAlign:"center"},children:[c.jsx("h3",{children:"Collection Pricing"}),c.jsxs("div",{className:"stat-value stat-msrp",children:["$",Lt.msrpTotal.toFixed(2)]}),c.jsxs("div",{className:"stat-value stat-paid",children:["$",Lt.paidTotal.toFixed(2),Lt.msrpTotal>0&&c.jsxs("span",{className:"stat-paid-pct",children:["(",((1-Lt.paidTotal/Lt.msrpTotal)*100).toFixed(1),"% off)"]})]}),c.jsxs("div",{className:"stat-value stat-collectible",children:["$",Lt.collectibleTotal.toFixed(2)]}),c.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Current Year Reads"}),c.jsx("div",{className:"stat-value",children:Cr}),c.jsxs("div",{className:"stat-sub",children:["Reads in ",Sn]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>Ar("timeToRead"),children:[c.jsx("h3",{children:"Avg Days From Purchase to Read"}),c.jsx("div",{className:"stat-value",children:fr==null?"-":`${fr.toFixed(1)} days`}),c.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),c.jsxs("div",{className:"stat-duo",children:[c.jsxs("div",{className:"stat-card tall",children:[c.jsxs("h3",{children:["Reads Per Month (",Sn,")"]}),c.jsx(Pb,{data:xs})]}),c.jsxs("div",{className:"stat-card tall",children:[c.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),c.jsx(Rb,{data:sr}),c.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),c.jsxs("div",{className:"stat-card wide",children:[c.jsx("h3",{children:"Activity Log"}),Re&&c.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),c.jsx("div",{className:"activity-log scrollable",children:et.length?et.map((S,F)=>{const J=S.ts?new Date(S.ts):null;return c.jsxs("div",{className:"activity-row",children:[c.jsx("span",{className:"activity-title",children:S.message}),c.jsx("span",{className:"activity-date",children:J?J.toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):""})]},(S.message||"activity")+F)}):c.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]}),c.jsxs("div",{className:"stat-card wide",children:[c.jsx("h3",{children:"Library Manager"}),De.length?c.jsxs("div",{className:"dash-library",children:[c.jsxs("div",{className:"dash-library-list",children:[De.map(S=>{const F=S.books.filter(Te=>!!Te.read||Te.status==="Read"||Te.Read===!0).length,J=te.has(S.seriesKey),ye=ie===S.seriesKey&&!oe,Ae=mb(S),Qe=S.books.some(Te=>kv(Te));return c.jsxs("div",{style:{marginBottom:"8px"},children:[c.jsxs("button",{type:"button",onClick:()=>Pr(S.seriesKey),style:{width:"100%",textAlign:"left",background:Ae?"rgba(255,179,71,0.08)":"transparent",border:`1px solid ${ye?"#ff69b4":Ae?"rgba(255,179,71,0.6)":"rgba(255,182,193,0.25)"}`,color:"#ffb6c1",padding:"8px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",position:"relative",boxShadow:Ae?"0 0 10px rgba(255,179,71,0.5)":ye?"0 0 8px rgba(255,105,180,0.5)":"none"},children:[c.jsx("span",{style:{transition:"transform 0.2s ease",transform:J?"rotate(90deg)":"none"},children:">"}),c.jsx("span",{style:{flex:1},children:S.displayName}),c.jsxs("span",{style:{fontSize:"11px",color:"#f8d1d8"},children:[S.books.length," book",S.books.length===1?"":"s",S.books.length?`  ${F} read`:""]}),Qe&&c.jsx("span",{title:"Some volumes are missing required data",style:{width:"12px",height:"12px",borderRadius:"999px",background:"#ffb347",border:"1px solid rgba(255,255,255,0.25)",boxShadow:"0 0 10px rgba(255,179,71,0.6)"}})]}),c.jsx("div",{style:{margin:"6px 0 10px 10px",paddingLeft:"10px",borderLeft:"1px solid rgba(255,182,193,0.25)",display:J?"block":"none"},children:S.books.map(Te=>{const dt=oe===Te.id,Nt=we.has(Te.id),Rt=!!Te.read||Te.status==="Read"||Te.Read===!0,wt=kv(Te,{ignoreShared:!0});return c.jsxs("button",{type:"button",onClick:xt=>Rr(xt,Te.id,S.seriesKey),style:{width:"100%",textAlign:"left",background:wt?"rgba(255,179,71,0.1)":"transparent",border:`1px solid ${dt?"#ff69b4":Nt?"#fff59d":wt?"rgba(255,179,71,0.6)":"rgba(255,182,193,0.25)"}`,color:"#ffb6c1",padding:"8px",borderRadius:"8px",marginBottom:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",boxShadow:dt?"0 0 8px rgba(255,105,180,0.5)":Nt?"0 0 10px rgba(255,255,180,0.65)":wt?"0 0 10px rgba(255,179,71,0.5)":"none"},children:[c.jsx("span",{style:{flex:1,minWidth:0},children:(Te.Title||Te.title||"Untitled")+(Rt?" ?":"")}),wt&&c.jsx("span",{style:{flexShrink:0,padding:"2px 8px",borderRadius:"999px",background:"rgba(255,179,71,0.18)",border:"1px solid rgba(255,179,71,0.6)",color:"#ffd8a1",fontSize:"11px",fontWeight:700,whiteSpace:"nowrap"},children:"Missing data"})]},Te.id)})})]},S.seriesKey)}),De.length>0&&we.size>0&&c.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:c.jsx("button",{type:"button",style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid #ffb6c1",background:"transparent",color:"#ffb6c1",cursor:"pointer"},onClick:pn,children:"Clear Selection"})})]}),c.jsxs("div",{className:"dash-library-details",children:[we.size>0&&c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"10px",marginBottom:"10px",border:"1px dashed rgba(255,182,193,0.45)",borderRadius:"10px",background:"rgba(255,182,193,0.08)"},children:[c.jsxs("div",{children:["Apply Amount Paid to ",we.size," selected book",we.size===1?"":"s"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[c.jsx("input",{type:"number",step:"0.01",min:"0",value:j,onChange:S=>A(S.target.value),style:{maxWidth:"140px"}}),c.jsx("button",{type:"button",className:"dash-btn primary",onClick:Ss,children:"Apply to Selected"})]})]}),!ie&&!oe&&c.jsx("div",{className:"stat-sub",style:{marginTop:6},children:"Select a series or book to edit"}),ie&&!oe&&Qr&&c.jsxs("div",{children:[c.jsx("div",{className:"dash-detail-title",children:Qr.displayName}),c.jsx("div",{className:"dash-detail-row",children:c.jsxs("label",{className:"inline-checkbox",children:[c.jsx("input",{ref:M,type:"checkbox",checked:P.readChecked,onChange:S=>b(F=>({...F,readChecked:S.target.checked,readIndeterminate:!1}))}),c.jsx("span",{children:"Mark series as read"})]})}),c.jsxs("div",{className:`dash-detail-row${Yr.publisher?" missing-row":""}`,children:[c.jsx("span",{children:"Publisher"}),c.jsx("input",{type:"text",value:P.publisher,onChange:S=>b(F=>({...F,publisher:S.target.value})),placeholder:"Set publisher for series"})]}),c.jsxs("div",{className:`dash-detail-row${Yr.demographic?" missing-row":""}`,children:[c.jsx("span",{children:"Demographic"}),c.jsxs("select",{value:P.demographic,onChange:S=>b(F=>({...F,demographic:S.target.value})),children:[c.jsx("option",{value:"",children:"Select Demographic"}),c.jsx("option",{value:"Shounen",children:"Shounen"}),c.jsx("option",{value:"Seinen",children:"Seinen"}),c.jsx("option",{value:"Shoujo",children:"Shoujo"}),c.jsx("option",{value:"Josei",children:"Josei"})]})]}),c.jsxs("div",{className:`dash-detail-row${Yr.genre?" missing-row":""}`,children:[c.jsx("span",{children:"Genre"}),c.jsx("input",{type:"text",value:P.genre,onChange:S=>b(F=>({...F,genre:S.target.value})),placeholder:"Primary genre"})]}),c.jsxs("div",{className:"dash-detail-row",children:[c.jsx("span",{children:"Sub-Genre"}),c.jsx("input",{type:"text",value:P.subGenre,onChange:S=>b(F=>({...F,subGenre:S.target.value})),placeholder:"Secondary genre / theme"})]}),c.jsxs("div",{className:`dash-detail-row${Yr.datePurchased?" missing-row":""}`,children:[c.jsx("span",{children:"Date Purchased"}),c.jsx("input",{type:"date",value:P.datePurchased,onChange:S=>b(F=>({...F,datePurchased:S.target.value}))}),P.dateMixed&&c.jsx("span",{className:"stat-sub",style:{marginTop:4},children:"Volumes have different purchase dates. Setting a date will overwrite all."})]}),c.jsxs("div",{className:`dash-detail-row${Yr.msrp?" missing-row":""}`,children:[c.jsx("span",{children:"MSRP (per book)"}),c.jsx("input",{type:"number",step:"0.01",min:"0",value:P.msrp,onChange:S=>b(F=>({...F,msrp:S.target.value})),placeholder:"0.00"})]}),c.jsxs("div",{className:"dash-detail-actions",children:[c.jsx("button",{type:"button",className:"dash-btn secondary",onClick:wa,children:"Cancel"}),c.jsx("button",{type:"button",className:"dash-btn primary",onClick:br,children:"Save Series"})]})]}),oe&&it&&c.jsxs("div",{children:[c.jsx("div",{className:"dash-detail-title",children:it.Title||it.title||"Untitled"}),c.jsx("div",{className:"dash-detail-row",children:c.jsxs("label",{className:"inline-checkbox",children:[c.jsx("input",{type:"checkbox",checked:!!fe.read,onChange:S=>Ke(F=>({...F,read:S.target.checked,dateRead:S.target.checked?F.dateRead||new Date().toISOString().slice(0,10):"",rating:S.target.checked?F.rating:""}))}),c.jsx("span",{children:"Mark as read"})]})}),c.jsxs("div",{className:`dash-detail-row${$n.datePurchased?" missing-row":""}`,children:[c.jsx("span",{children:"Date Purchased"}),c.jsx("input",{type:"date",value:fe.datePurchased,onChange:S=>Ke(F=>({...F,datePurchased:S.target.value}))})]}),fe.read&&c.jsxs("div",{className:"dash-detail-row",children:[c.jsx("span",{children:"Date Read"}),c.jsx("input",{type:"date",value:fe.dateRead,onChange:S=>Ke(F=>({...F,dateRead:S.target.value}))})]}),c.jsxs("div",{className:`dash-detail-row${$n.pageCount?" missing-row":""}`,children:[c.jsx("span",{children:"Page Count"}),c.jsx("input",{type:"number",min:"0",step:"1",value:fe.pageCount,onChange:S=>Ke(F=>({...F,pageCount:S.target.value}))})]}),c.jsxs("div",{className:`dash-detail-row${$n.msrp?" missing-row":""}`,children:[c.jsx("span",{children:"MSRP (per book)"}),c.jsx("input",{type:"number",step:"0.01",min:"0",value:fe.msrp,onChange:S=>Ke(F=>({...F,msrp:S.target.value})),placeholder:"0.00"})]}),!(fe.special&&fe.specialType==="collectible")&&c.jsxs("div",{className:`dash-detail-row${$n.amountPaid?" missing-row":""}`,children:[c.jsx("span",{children:"Amount Paid"}),c.jsx("input",{type:"number",step:"0.01",min:"0",value:fe.amountPaid,onChange:S=>Ke(F=>({...F,amountPaid:S.target.value})),placeholder:"0.00"})]}),fe.read&&c.jsxs("div",{className:"dash-detail-row",children:[c.jsx("span",{children:"Star Rating"}),c.jsx("input",{type:"number",min:"0",max:"5",step:"0.5",value:fe.rating,onChange:S=>Ke(F=>({...F,rating:S.target.value})),placeholder:"0-5"})]}),c.jsx("div",{className:`dash-detail-row${$n.specialType?" missing-row":""}`,children:c.jsxs("label",{className:"inline-checkbox",style:{width:"100%"},children:[c.jsx("input",{type:"checkbox",checked:!!fe.special,onChange:S=>Ke(F=>({...F,special:S.target.checked,specialType:S.target.checked?F.specialType:"",specialVolumes:S.target.checked?F.specialVolumes:"",collectiblePrice:S.target.checked?F.collectiblePrice:""}))}),c.jsx("span",{children:"Special?"})]})}),fe.special&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`dash-detail-row${$n.specialType?" missing-row":""}`,children:[c.jsx("span",{children:"Special Type"}),c.jsxs("select",{value:fe.specialType,onChange:S=>Ke(F=>({...F,specialType:S.target.value,specialVolumes:S.target.value==="specialEdition"?F.specialVolumes:"",collectiblePrice:S.target.value==="collectible"?F.collectiblePrice:""})),children:[c.jsx("option",{value:"",children:"Select type"}),c.jsx("option",{value:"specialEdition",children:"Special Edition"}),c.jsx("option",{value:"collectible",children:"Collectible"})]})]}),fe.specialType==="specialEdition"&&c.jsxs("div",{className:`dash-detail-row${$n.specialVolumes?" missing-row":""}`,children:[c.jsx("span",{children:"Volumes Contained"}),c.jsx("input",{type:"number",min:"1",step:"1",value:fe.specialVolumes,onChange:S=>Ke(F=>({...F,specialVolumes:S.target.value}))})]}),fe.specialType==="collectible"&&c.jsxs("div",{className:`dash-detail-row${$n.collectiblePrice?" missing-row":""}`,children:[c.jsx("span",{children:"Collectible Price"}),c.jsx("input",{type:"number",min:"0",step:"0.01",value:fe.collectiblePrice,onChange:S=>Ke(F=>({...F,collectiblePrice:S.target.value})),placeholder:"0.00"})]})]}),c.jsxs("div",{className:"dash-detail-actions",children:[c.jsx("button",{type:"button",className:"dash-btn secondary",onClick:ir,children:"Cancel"}),c.jsx("button",{type:"button",className:"dash-btn primary",onClick:Kr,children:"Save Changes"})]})]})]})]}):c.jsx("div",{className:"stat-sub",children:"No library items."})]})]})}),Tn&&c.jsx("div",{id:"calendarOverlay",onClick:()=>tr(!1),children:c.jsxs("div",{id:"calendarCard",onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:"calendar-header",children:[c.jsx("div",{className:"calendar-title",children:tt.toLocaleString(void 0,{month:"long",year:"numeric"})}),c.jsxs("div",{className:"calendar-nav",children:[c.jsx("button",{className:"calendar-nav-btn",onClick:()=>nr(new Date(tt.getFullYear(),tt.getMonth()-1,1)),children:"<"}),c.jsx("button",{className:"calendar-nav-btn",onClick:()=>nr(new Date(tt.getFullYear(),tt.getMonth()+1,1)),children:">"})]})]}),c.jsxs("div",{className:"calendar-weekdays",children:[c.jsx("div",{children:"Sun"}),c.jsx("div",{children:"Mon"}),c.jsx("div",{children:"Tue"}),c.jsx("div",{children:"Wed"}),c.jsx("div",{children:"Thu"}),c.jsx("div",{children:"Fri"}),c.jsx("div",{children:"Sat"})]}),c.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:Ps.map((S,F)=>S.type==="pad"?c.jsx("div",{className:"calendar-day pad"},F):c.jsxs("div",{className:"calendar-day"+(S.isToday?" today":""),children:[c.jsx("div",{className:"day-num",children:S.day}),c.jsxs("div",{className:"calendar-releases",children:[(Le===S.dateKey?S.releases:S.releases.slice(0,2)).map((J,ye)=>c.jsx("div",{className:"calendar-release",title:J.title,children:J.title},ye)),S.releases.length>2&&c.jsxs("button",{className:"calendar-more-btn",onClick:()=>{const J=new Date(tt.getFullYear(),tt.getMonth(),S.day);st({dateLabel:J.toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}),releases:S.releases})},children:["+",S.releases.length-2," more"]})]})]},F))}),!fn.length&&c.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),c.jsx("button",{id:"calendarClose",onClick:()=>tr(!1),children:"x"})]})}),$t.open&&c.jsx("div",{id:"statDetailOverlay",onClick:pt,children:c.jsxs("div",{id:"statDetailCard",onClick:S=>S.stopPropagation(),children:[c.jsx("button",{id:"statDetailClose",onClick:pt,children:"x"}),c.jsxs("h2",{id:"statDetailTitle",children:[$t.type==="publishers"&&"Top Publishers",$t.type==="genres"&&"Top Genres",$t.type==="demographics"&&"Top Demographics",$t.type==="timeToRead"&&"Avg Time From Purchase to Read",$t.type==="collectionValue"&&"Collection Value",$t.type==="pages"&&"Pages Read vs Total",$t.type==="ratings"&&"Ratings",$t.type==="releases"&&"Wishlist Releases"]}),c.jsx("div",{id:"statDetailBody",children:Jr()})]})}),We&&c.jsx("div",{id:"calendarOverlay",onClick:()=>st(null),style:{zIndex:10080},children:c.jsxs("div",{id:"calendarCard",onClick:S=>S.stopPropagation(),style:{maxWidth:"520px"},children:[c.jsxs("div",{className:"calendar-header",children:[c.jsx("div",{className:"calendar-title",children:We.dateLabel}),c.jsx("button",{className:"calendar-close-btn",onClick:()=>st(null),type:"button",children:"Close"})]}),c.jsx("div",{className:"calendar-releases",children:We.releases.map((S,F)=>c.jsx("div",{className:"calendar-release",title:S.title,children:S.title},F))})]})}),e&&D&&c.jsx("div",{className:"dashboard-modal-backdrop visible",onClick:S=>{S.target===S.currentTarget&&z(!1)},children:c.jsxs("div",{className:"dashboard-modal",children:[c.jsxs("div",{className:"dashboard-modal-header",children:[c.jsx("h3",{children:"Webhook Settings"}),c.jsx("button",{className:"dashboard-close",onClick:()=>z(!1),type:"button",children:"Close"})]}),c.jsxs("div",{className:"dashboard-modal-body",children:[c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Yearly summary webhook"}),c.jsx("input",{type:"text",value:$.yearly,onChange:S=>Q(F=>({...F,yearly:S.target.value}))})]}),c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Release timer webhook"}),c.jsx("input",{type:"text",value:$.release,onChange:S=>Q(F=>({...F,release:S.target.value}))})]}),c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Activity webhook"}),c.jsx("input",{type:"text",value:$.activity,onChange:S=>Q(F=>({...F,activity:S.target.value}))})]}),c.jsxs("div",{className:"dashboard-input",style:{borderTop:"1px solid rgba(255,182,193,0.2)",paddingTop:8},children:[c.jsx("span",{children:"Admin UIDs"}),c.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[c.jsx("input",{type:"text",placeholder:"Enter UID",value:ee,onChange:S=>k(S.target.value),style:{flex:"1 1 220px",padding:"8px 10px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.75)",color:"#ffffff"}}),c.jsx("button",{className:"stat-link",type:"button",onClick:nn,children:"Grant"}),c.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>Bt(),children:"Revoke"})]}),c.jsx("div",{style:{marginTop:8,fontSize:"0.85rem",color:"var(--text-soft)"},children:Ee?c.jsx("span",{children:"Loading admins"}):H.length===0?c.jsx("span",{children:"No admins found."}):c.jsx("ul",{style:{listStyle:"none",margin:"6px 0 0",padding:0,display:"flex",gap:6,flexDirection:"column"},children:H.map(S=>c.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,background:"rgba(24,5,18,0.7)",border:"1px solid rgba(255,182,193,0.18)",borderRadius:10,padding:"6px 8px"},children:[c.jsx("span",{style:{wordBreak:"break-all"},children:S.uid}),c.jsx("button",{className:"dashboard-close",type:"button",onClick:()=>Bt(S.uid),style:{padding:"4px 10px"},children:"Revoke"})]},S.uid))})})]})]}),c.jsxs("div",{className:"dashboard-modal-footer",children:[c.jsx("button",{className:"stat-link",type:"button",onClick:async()=>{try{await nu(St(Ze,"settings","webhooks"),{yearly:$.yearly||ru,release:$.release||su,activity:$.activity||iu}),z(!1)}catch(S){console.error("Failed to save webhooks",S),alert("Failed to save webhooks.")}},children:"Save"}),c.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>z(!1),children:"Cancel"})]})]})})]})}function Nb(){const[n,e]=L.useState(!0),[t,s]=L.useState(""),[a,l]=L.useState(0),[d,f]=L.useState([]),[m,v]=L.useState(0),w=L.useRef(null);L.useEffect(()=>{document.title="Music | im.ok"},[]),L.useEffect(()=>{let me=!1;async function we(){e(!0),s("");try{const he=await fetch("https://music-api-worker.imokissick.workers.dev/music");if(!he.ok)throw new Error("Worker fetch failed");const V=await he.json();if(me)return;const R=Array.isArray(V.combined)?V.combined:[],j=Array.isArray(V.spotify)?V.spotify:[],A=Array.isArray(V.soundcloud)?V.soundcloud:[],P=[...R,...j,...A].reduce((b,fe)=>{const Ke=(fe.title||"").toLowerCase().trim();if(!Ke)return b;const et=b.findIndex(K=>(K.title||"").toLowerCase().trim()===Ke);return et>=0?(b[et].source!=="spotify"&&fe.source==="spotify"&&(b[et]=fe),b):(b.push(fe),b)},[]).map(b=>({...b,releaseDate:b.releaseDate?new Date(b.releaseDate):new Date}));f(P)}catch(he){console.error(he),me||s("Failed to load music feeds.")}finally{me||e(!1)}}return we(),()=>{me=!0}},[]);const E=Math.min(4,Math.max(1,d.length)),C=E?Math.ceil(d.length/E):0,$=()=>{w.current&&clearInterval(w.current),d.length&&(v(me=>me+1),w.current=setInterval(()=>{l(me=>(Math.floor(me/E)+1)%C*E%d.length),v(me=>me+1)},15e3))};L.useEffect(()=>{if(d.length)return $(),()=>{w.current&&clearInterval(w.current)}},[d,E]);const Q=me=>{d.length&&(l(we=>(Math.floor(we/E)+me+C)%C*E%d.length),$())},te=me=>{d.length&&(l(me*E%d.length),$())},W=me=>we=>{we.preventDefault();const V=me.source==="spotify"?`spotify:album:${me.id}`:me.url,R=me.url;try{const j=setTimeout(()=>{window.open(R,"_blank","noopener,noreferrer")},600);window.location.href=V,setTimeout(()=>clearTimeout(j),800)}catch{window.open(R,"_blank","noopener,noreferrer")}},ie=d[0],se=me=>me?{backgroundImage:`url(${me})`,backgroundSize:"cover",backgroundPosition:"center"}:{},oe=ie?ie.source==="spotify"?"Spotify":"SoundCloud":"";return c.jsxs("main",{className:"page music-page",children:[c.jsxs("header",{className:"music-hero",children:[c.jsxs("div",{className:"music-hero-content",children:[c.jsx("p",{className:"music-pill",children:"im.ok  Artist"}),c.jsx("h1",{children:ie?ie.title:"Latest & Greatest"}),c.jsx("p",{className:"music-sub",children:"Check out my latest song. I know it's been almost a whole year since I've released. I have been on a much needed hiatus. I felt the whole world crumbling around me and had no time to breathe so this is why I took a break. Here's to 2026!"}),ie&&c.jsx("div",{className:"music-badges",children:c.jsx("span",{children:oe})})]}),c.jsx("div",{className:"music-hero-embed",children:c.jsxs("div",{className:"music-hero-art",style:se(ie==null?void 0:ie.artwork),children:[!(ie!=null&&ie.artwork)&&c.jsx("div",{className:"music-hero-art-fallback",children:"Artwork"}),ie&&c.jsx("button",{className:"music-link music-play hero-play","aria-label":`Play ${ie.title}`,onClick:W(ie)})]})})]}),c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"Releases"})}),t&&c.jsx("div",{className:"music-error",children:t}),n&&c.jsx("div",{className:"music-loading",children:"Loading music feeds..."}),!n&&d.length===0&&c.jsx("div",{className:"music-empty",children:"Connect Spotify/SoundCloud tokens to see live releases."}),!n&&d.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"music-carousel-wrap",children:[c.jsx("button",{className:"music-nav left",onClick:()=>Q(-1),"aria-label":"Previous releases",children:""}),c.jsx("div",{className:"music-carousel",children:Array.from({length:E}).map((me,we)=>{const he=d[(a+we)%d.length];return he?c.jsxs("div",{className:"music-card",children:[c.jsx("div",{className:"music-card-art",style:se(he.artwork)}),c.jsxs("div",{className:"music-card-body",children:[c.jsx("div",{className:"music-card-title",children:he.title}),c.jsx("div",{className:"music-card-actions",children:c.jsx("button",{className:"music-link music-play","aria-label":`Play ${he.title}`,onClick:W(he)})})]})]},`${he.id}-${we}`):null})}),c.jsx("button",{className:"music-nav right",onClick:()=>Q(1),"aria-label":"Next releases",children:""})]}),c.jsx("div",{className:"music-dots",children:Array.from({length:C}).map((me,we)=>{const he=Math.floor(a/E)===we,V=he?`${we}-${m}`:`${we}-idle`;return c.jsx("button",{className:`dot ${he?"active":""}`,onClick:()=>te(we),"aria-label":`Go to set ${we+1}`,children:c.jsx("span",{className:"dot-fill"},V)},we)})})]})]}),c.jsxs("div",{className:"music-feeds-row",children:[c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"Spotify"})}),c.jsx("div",{className:"music-embed-card",children:c.jsx("iframe",{title:"Spotify Artist",src:"https://open.spotify.com/embed/artist/00sbWLxYLDs8i5BLQL9Qdo?utm_source=generator&theme=0",width:"100%",height:"400",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})})]}),c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"SoundCloud"})}),c.jsx("div",{className:"music-embed-card",children:c.jsx("iframe",{title:"SoundCloud Player",width:"100%",height:"400",scrolling:"no",frameBorder:"no",allow:"autoplay",src:"https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/imxk&color=%23ff69b4&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"})})]})]})]})}function kb(){const n=Fu(),{user:e}=Po();e&&n("/");async function t(){try{const s=new ds;await U_(Ri,s),n("/")}catch(s){console.error(s),alert("Google Sign-In failed.")}}return c.jsx("div",{className:"signin-page",children:c.jsxs("div",{className:"signin-card",children:[c.jsx("h2",{className:"signin-title",children:"Welcome Back"}),c.jsx("p",{className:"signin-sub",children:"Sign in to access the dashboard & edit collections."}),c.jsxs("button",{className:"google-btn",onClick:t,children:[c.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),c.jsxs("button",{className:"signin-cancel",onClick:()=>n("/"),children:["<"," Back to Home"]})]})})}const jb=L.lazy(()=>zl(()=>import("./SteamCard-BnQ55TdL.js"),[])),Db=L.lazy(()=>zl(()=>import("./SteamRecents-BB-vSwFk.js"),[])),Vb=L.lazy(()=>zl(()=>import("./SteamGames-D8iwi-nh.js"),[]));function Lb(){return L.useEffect(()=>{document.title="Tyler's Gaming Lounge"},[]),c.jsxs("div",{className:"steam-page page",children:[c.jsxs("header",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"6px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Gaming Lounge"}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"This will be the home to all of my gaming collections, this is still being worked on, but thought it was cool with just steam for now."})]}),c.jsx(Jh,{minHeight:260,children:c.jsx(L.Suspense,{fallback:c.jsx(gu,{label:"Profile"}),children:c.jsx(jb,{})})}),c.jsx(Jh,{minHeight:240,children:c.jsx(L.Suspense,{fallback:c.jsx(gu,{label:"Recently played"}),children:c.jsx(Db,{})})}),c.jsx(Jh,{minHeight:400,children:c.jsx(L.Suspense,{fallback:c.jsx(gu,{label:"Library & Achievements"}),children:c.jsx(Vb,{})})})]})}function Jh({children:n,minHeight:e=200}){const[t,s]=L.useState(!1),a=L.useRef(null);L.useEffect(()=>{const d=new IntersectionObserver(f=>{f[0].isIntersecting&&(s(!0),d.disconnect())},{rootMargin:"200px 0px"});return a.current&&d.observe(a.current),()=>d.disconnect()},[]);const l=t?void 0:{minHeight:e};return c.jsx("div",{ref:a,style:l,children:t?n:c.jsx(gu,{})})}function gu({label:n="Loading section"}){return c.jsxs("div",{className:"steam-skeleton",children:[c.jsx("div",{className:"steam-skeleton-bar"}),c.jsx("div",{className:"steam-skeleton-bar short"}),c.jsx("p",{className:"steam-skeleton-label",children:n})]})}function Ob(){return c.jsxs(KR,{children:[c.jsx(YR,{}),c.jsxs(AE,{children:[c.jsx(Br,{path:"/",element:c.jsx(Iv,{})}),c.jsx(Br,{path:"/home",element:c.jsx(Iv,{})}),c.jsx(Br,{path:"/manga",element:c.jsx(ZR,{})}),c.jsx(Br,{path:"/anime",element:c.jsx(cb,{})}),c.jsx(Br,{path:"/tcg",element:c.jsx(db,{})}),c.jsx(Br,{path:"/music",element:c.jsx(Nb,{})}),c.jsx(Br,{path:"/dashboard",element:c.jsx(Ab,{})}),c.jsx(Br,{path:"/signin",element:c.jsx(kb,{})}),c.jsx(Br,{path:"/steam",element:c.jsx(Lb,{})}),c.jsx(Br,{path:"*",element:c.jsx(RE,{to:"/home",replace:!0})})]})]})}Ox.createRoot(document.getElementById("root")).render(c.jsx(Vv.StrictMode,{children:c.jsx(OE,{basename:"/base",children:c.jsx(Ob,{})})}));export{c as j,L as r};
