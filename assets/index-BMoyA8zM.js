function vE(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Sv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Rh={exports:{}},Ha={},Ph={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function _E(){if(Ag)return qe;Ag=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.iterator;function C(L){return L===null||typeof L!="object"?null:(L=I&&L[I]||L["@@iterator"],typeof L=="function"?L:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,K={};function O(L,J,Ee){this.props=L,this.context=J,this.refs=K,this.updater=Ee||U}O.prototype.isReactComponent={},O.prototype.setState=function(L,J){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,J,"setState")},O.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ce(){}ce.prototype=O.prototype;function pe(L,J,Ee){this.props=L,this.context=J,this.refs=K,this.updater=Ee||U}var le=pe.prototype=new ce;le.constructor=pe,q(le,O.prototype),le.isPureReactComponent=!0;var de=Array.isArray,ue=Object.prototype.hasOwnProperty,me={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(L,J,Ee){var Le,Me={},ze=null,Re=null;if(J!=null)for(Le in J.ref!==void 0&&(Re=J.ref),J.key!==void 0&&(ze=""+J.key),J)ue.call(J,Le)&&!N.hasOwnProperty(Le)&&(Me[Le]=J[Le]);var $e=arguments.length-2;if($e===1)Me.children=Ee;else if(1<$e){for(var it=Array($e),wt=0;wt<$e;wt++)it[wt]=arguments[wt+2];Me.children=it}if(L&&L.defaultProps)for(Le in $e=L.defaultProps,$e)Me[Le]===void 0&&(Me[Le]=$e[Le]);return{$$typeof:r,type:L,key:ze,ref:Re,props:Me,_owner:me.current}}function P(L,J){return{$$typeof:r,type:L.type,key:J,ref:L.ref,props:L.props,_owner:L._owner}}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function D(L){var J={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Ee){return J[Ee]})}var b=/\/+/g;function x(L,J){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):J.toString(36)}function se(L,J,Ee,Le,Me){var ze=typeof L;(ze==="undefined"||ze==="boolean")&&(L=null);var Re=!1;if(L===null)Re=!0;else switch(ze){case"string":case"number":Re=!0;break;case"object":switch(L.$$typeof){case r:case e:Re=!0}}if(Re)return Re=L,Me=Me(Re),L=Le===""?"."+x(Re,0):Le,de(Me)?(Ee="",L!=null&&(Ee=L.replace(b,"$&/")+"/"),se(Me,J,Ee,"",function(wt){return wt})):Me!=null&&(k(Me)&&(Me=P(Me,Ee+(!Me.key||Re&&Re.key===Me.key?"":(""+Me.key).replace(b,"$&/")+"/")+L)),J.push(Me)),1;if(Re=0,Le=Le===""?".":Le+":",de(L))for(var $e=0;$e<L.length;$e++){ze=L[$e];var it=Le+x(ze,$e);Re+=se(ze,J,Ee,it,Me)}else if(it=C(L),typeof it=="function")for(L=it.call(L),$e=0;!(ze=L.next()).done;)ze=ze.value,it=Le+x(ze,$e++),Re+=se(ze,J,Ee,it,Me);else if(ze==="object")throw J=String(L),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Re}function be(L,J,Ee){if(L==null)return L;var Le=[],Me=0;return se(L,Le,"","",function(ze){return J.call(Ee,ze,Me++)}),Le}function Be(L){if(L._status===-1){var J=L._result;J=J(),J.then(function(Ee){(L._status===0||L._status===-1)&&(L._status=1,L._result=Ee)},function(Ee){(L._status===0||L._status===-1)&&(L._status=2,L._result=Ee)}),L._status===-1&&(L._status=0,L._result=J)}if(L._status===1)return L._result.default;throw L._result}var Ve={current:null},oe={transition:null},Se={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:oe,ReactCurrentOwner:me};function ge(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:be,forEach:function(L,J,Ee){be(L,function(){J.apply(this,arguments)},Ee)},count:function(L){var J=0;return be(L,function(){J++}),J},toArray:function(L){return be(L,function(J){return J})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},qe.Component=O,qe.Fragment=t,qe.Profiler=o,qe.PureComponent=pe,qe.StrictMode=i,qe.Suspense=g,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Se,qe.act=ge,qe.cloneElement=function(L,J,Ee){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Le=q({},L.props),Me=L.key,ze=L.ref,Re=L._owner;if(J!=null){if(J.ref!==void 0&&(ze=J.ref,Re=me.current),J.key!==void 0&&(Me=""+J.key),L.type&&L.type.defaultProps)var $e=L.type.defaultProps;for(it in J)ue.call(J,it)&&!N.hasOwnProperty(it)&&(Le[it]=J[it]===void 0&&$e!==void 0?$e[it]:J[it])}var it=arguments.length-2;if(it===1)Le.children=Ee;else if(1<it){$e=Array(it);for(var wt=0;wt<it;wt++)$e[wt]=arguments[wt+2];Le.children=$e}return{$$typeof:r,type:L.type,key:Me,ref:ze,props:Le,_owner:Re}},qe.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},qe.createElement=S,qe.createFactory=function(L){var J=S.bind(null,L);return J.type=L,J},qe.createRef=function(){return{current:null}},qe.forwardRef=function(L){return{$$typeof:p,render:L}},qe.isValidElement=k,qe.lazy=function(L){return{$$typeof:w,_payload:{_status:-1,_result:L},_init:Be}},qe.memo=function(L,J){return{$$typeof:v,type:L,compare:J===void 0?null:J}},qe.startTransition=function(L){var J=oe.transition;oe.transition={};try{L()}finally{oe.transition=J}},qe.unstable_act=ge,qe.useCallback=function(L,J){return Ve.current.useCallback(L,J)},qe.useContext=function(L){return Ve.current.useContext(L)},qe.useDebugValue=function(){},qe.useDeferredValue=function(L){return Ve.current.useDeferredValue(L)},qe.useEffect=function(L,J){return Ve.current.useEffect(L,J)},qe.useId=function(){return Ve.current.useId()},qe.useImperativeHandle=function(L,J,Ee){return Ve.current.useImperativeHandle(L,J,Ee)},qe.useInsertionEffect=function(L,J){return Ve.current.useInsertionEffect(L,J)},qe.useLayoutEffect=function(L,J){return Ve.current.useLayoutEffect(L,J)},qe.useMemo=function(L,J){return Ve.current.useMemo(L,J)},qe.useReducer=function(L,J,Ee){return Ve.current.useReducer(L,J,Ee)},qe.useRef=function(L){return Ve.current.useRef(L)},qe.useState=function(L){return Ve.current.useState(L)},qe.useSyncExternalStore=function(L,J,Ee){return Ve.current.useSyncExternalStore(L,J,Ee)},qe.useTransition=function(){return Ve.current.useTransition()},qe.version="18.3.1",qe}var kg;function Tf(){return kg||(kg=1,Ph.exports=_E()),Ph.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function wE(){if(bg)return Ha;bg=1;var r=Tf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(p,g,v){var w,I={},C=null,U=null;v!==void 0&&(C=""+v),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(U=g.ref);for(w in g)i.call(g,w)&&!l.hasOwnProperty(w)&&(I[w]=g[w]);if(p&&p.defaultProps)for(w in g=p.defaultProps,g)I[w]===void 0&&(I[w]=g[w]);return{$$typeof:e,type:p,key:C,ref:U,props:I,_owner:o.current}}return Ha.Fragment=t,Ha.jsx=d,Ha.jsxs=d,Ha}var Ng;function EE(){return Ng||(Ng=1,Rh.exports=wE()),Rh.exports}var h=EE(),W=Tf();const Cv=Sv(W),xE=vE({__proto__:null,default:Cv},[W]);var Wu={},Ah={exports:{}},An={},kh={exports:{}},bh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function TE(){return jg||(jg=1,(function(r){function e(oe,Se){var ge=oe.length;oe.push(Se);e:for(;0<ge;){var L=ge-1>>>1,J=oe[L];if(0<o(J,Se))oe[L]=Se,oe[ge]=J,ge=L;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var Se=oe[0],ge=oe.pop();if(ge!==Se){oe[0]=ge;e:for(var L=0,J=oe.length,Ee=J>>>1;L<Ee;){var Le=2*(L+1)-1,Me=oe[Le],ze=Le+1,Re=oe[ze];if(0>o(Me,ge))ze<J&&0>o(Re,Me)?(oe[L]=Re,oe[ze]=ge,L=ze):(oe[L]=Me,oe[Le]=ge,L=Le);else if(ze<J&&0>o(Re,ge))oe[L]=Re,oe[ze]=ge,L=ze;else break e}}return Se}function o(oe,Se){var ge=oe.sortIndex-Se.sortIndex;return ge!==0?ge:oe.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],v=[],w=1,I=null,C=3,U=!1,q=!1,K=!1,O=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function le(oe){for(var Se=t(v);Se!==null;){if(Se.callback===null)i(v);else if(Se.startTime<=oe)i(v),Se.sortIndex=Se.expirationTime,e(g,Se);else break;Se=t(v)}}function de(oe){if(K=!1,le(oe),!q)if(t(g)!==null)q=!0,Be(ue);else{var Se=t(v);Se!==null&&Ve(de,Se.startTime-oe)}}function ue(oe,Se){q=!1,K&&(K=!1,ce(S),S=-1),U=!0;var ge=C;try{for(le(Se),I=t(g);I!==null&&(!(I.expirationTime>Se)||oe&&!D());){var L=I.callback;if(typeof L=="function"){I.callback=null,C=I.priorityLevel;var J=L(I.expirationTime<=Se);Se=r.unstable_now(),typeof J=="function"?I.callback=J:I===t(g)&&i(g),le(Se)}else i(g);I=t(g)}if(I!==null)var Ee=!0;else{var Le=t(v);Le!==null&&Ve(de,Le.startTime-Se),Ee=!1}return Ee}finally{I=null,C=ge,U=!1}}var me=!1,N=null,S=-1,P=5,k=-1;function D(){return!(r.unstable_now()-k<P)}function b(){if(N!==null){var oe=r.unstable_now();k=oe;var Se=!0;try{Se=N(!0,oe)}finally{Se?x():(me=!1,N=null)}}else me=!1}var x;if(typeof pe=="function")x=function(){pe(b)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,be=se.port2;se.port1.onmessage=b,x=function(){be.postMessage(null)}}else x=function(){O(b,0)};function Be(oe){N=oe,me||(me=!0,x())}function Ve(oe,Se){S=O(function(){oe(r.unstable_now())},Se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(oe){oe.callback=null},r.unstable_continueExecution=function(){q||U||(q=!0,Be(ue))},r.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<oe?Math.floor(1e3/oe):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(oe){switch(C){case 1:case 2:case 3:var Se=3;break;default:Se=C}var ge=C;C=Se;try{return oe()}finally{C=ge}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(oe,Se){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ge=C;C=oe;try{return Se()}finally{C=ge}},r.unstable_scheduleCallback=function(oe,Se,ge){var L=r.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?L+ge:L):ge=L,oe){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ge+J,oe={id:w++,callback:Se,priorityLevel:oe,startTime:ge,expirationTime:J,sortIndex:-1},ge>L?(oe.sortIndex=ge,e(v,oe),t(g)===null&&oe===t(v)&&(K?(ce(S),S=-1):K=!0,Ve(de,ge-L))):(oe.sortIndex=J,e(g,oe),q||U||(q=!0,Be(ue))),oe},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(oe){var Se=C;return function(){var ge=C;C=Se;try{return oe.apply(this,arguments)}finally{C=ge}}}})(bh)),bh}var Dg;function IE(){return Dg||(Dg=1,kh.exports=TE()),kh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function SE(){if(Vg)return An;Vg=1;var r=Tf(),e=IE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},I={};function C(n){return g.call(I,n)?!0:g.call(w,n)?!1:v.test(n)?I[n]=!0:(w[n]=!0,!1)}function U(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,s,a,c){if(s===null||typeof s>"u"||U(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function K(n,s,a,c,f,y,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=E}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){O[n]=new K(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];O[s]=new K(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){O[n]=new K(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){O[n]=new K(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){O[n]=new K(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){O[n]=new K(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){O[n]=new K(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){O[n]=new K(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){O[n]=new K(n,5,!1,n.toLowerCase(),null,!1,!1)});var ce=/[\-:]([a-z])/g;function pe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(ce,pe);O[s]=new K(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(ce,pe);O[s]=new K(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(ce,pe);O[s]=new K(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){O[n]=new K(n,1,!1,n.toLowerCase(),null,!1,!1)}),O.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){O[n]=new K(n,1,!1,n.toLowerCase(),null,!0,!0)});function le(n,s,a,c){var f=O.hasOwnProperty(s)?O[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(q(s,a,f,c)&&(a=null),c||f===null?C(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var de=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ue=Symbol.for("react.element"),me=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),oe=Symbol.iterator;function Se(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var ge=Object.assign,L;function J(n){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+n}var Ee=!1;function Le(n,s){if(!n||Ee)return"";Ee=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(H){var c=H}Reflect.construct(n,[],s)}else{try{s.call()}catch(H){c=H}n.call(s.prototype)}else{try{throw Error()}catch(H){c=H}n()}}catch(H){if(H&&c&&typeof H.stack=="string"){for(var f=H.stack.split(`
`),y=c.stack.split(`
`),E=f.length-1,A=y.length-1;1<=E&&0<=A&&f[E]!==y[A];)A--;for(;1<=E&&0<=A;E--,A--)if(f[E]!==y[A]){if(E!==1||A!==1)do if(E--,A--,0>A||f[E]!==y[A]){var j=`
`+f[E].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=E&&0<=A);break}}}finally{Ee=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?J(n):""}function Me(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=Le(n.type,!1),n;case 11:return n=Le(n.type.render,!1),n;case 1:return n=Le(n.type,!0),n;default:return""}}function ze(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case me:return"Portal";case P:return"Profiler";case S:return"StrictMode";case x:return"Suspense";case se:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case b:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case be:return s=n.displayName||null,s!==null?s:ze(n.type)||"Memo";case Be:s=n._payload,n=n._init;try{return ze(n(s))}catch{}}return null}function Re(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function $e(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function it(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wt(n){var s=it(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){c=""+E,y.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Nn(n){n._valueTracker||(n._valueTracker=wt(n))}function St(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=it(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Ot(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function vn(n,s){var a=s.checked;return ge({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ir(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=$e(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function fn(n,s){s=s.checked,s!=null&&le(n,"checked",s,!1)}function Ge(n,s){fn(n,s);var a=$e(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?or(n,s.type,a):s.hasOwnProperty("defaultValue")&&or(n,s.type,$e(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function sr(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function or(n,s,a){(s!=="number"||Ot(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var _n=Array.isArray;function wn(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+$e(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function jn(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ge({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function rn(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(_n(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:$e(a)}}function Kt(n,s){var a=$e(s.value),c=$e(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Hr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function mt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function R(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?mt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var te,Y=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(te=te||document.createElement("div"),te.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=te.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function z(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fe=["Webkit","ms","Moz","O"];Object.keys(fe).forEach(function(n){Fe.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),fe[s]=fe[n]})});function at(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||fe.hasOwnProperty(n)&&fe[n]?(""+s).trim():s+"px"}function $(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=at(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var Z=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q(n,s){if(s){if(Z[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function xe(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var We=null;function Ke(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var tt=null,gt=null,En=null;function Ir(n){if(n=ka(n)){if(typeof tt!="function")throw Error(t(280));var s=n.stateNode;s&&(s=su(s),tt(n.stateNode,n.type,s))}}function Bt(n){gt?En?En.push(n):En=[n]:gt=n}function Sr(){if(gt){var n=gt,s=En;if(En=gt=null,Ir(n),s)for(n=0;n<s.length;n++)Ir(s[n])}}function qr(n,s){return n(s)}function vs(){}var ar=!1;function _s(n,s,a){if(ar)return n(s,a);ar=!0;try{return qr(n,s,a)}finally{ar=!1,(gt!==null||En!==null)&&(vs(),Sr())}}function Et(n,s){var a=n.stateNode;if(a===null)return null;var c=su(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var _i=!1;if(p)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){_i=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{_i=!1}function Gr(n,s,a,c,f,y,E,A,j){var H=Array.prototype.slice.call(arguments,3);try{s.apply(a,H)}catch(re){this.onError(re)}}var Kr=!1,wi=null,Vn=!1,yt=null,Cr={onError:function(n){Kr=!0,wi=n}};function to(n,s,a,c,f,y,E,A,j){Kr=!1,wi=null,Gr.apply(Cr,arguments)}function kl(n,s,a,c,f,y,E,A,j){if(to.apply(this,arguments),Kr){if(Kr){var H=wi;Kr=!1,wi=null}else throw Error(t(198));Vn||(Vn=!0,yt=H)}}function lr(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ws(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function ur(n){if(lr(n)!==n)throw Error(t(188))}function bl(n){var s=n.alternate;if(!s){if(s=lr(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return ur(f),n;if(y===c)return ur(f),s;y=y.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=y;else{for(var E=!1,A=f.child;A;){if(A===a){E=!0,a=f,c=y;break}if(A===c){E=!0,c=f,a=y;break}A=A.sibling}if(!E){for(A=y.child;A;){if(A===a){E=!0,a=y,c=f;break}if(A===c){E=!0,c=y,a=f;break}A=A.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function da(n){return n=bl(n),n!==null?no(n):null}function no(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=no(n);if(s!==null)return s;n=n.sibling}return null}var ro=e.unstable_scheduleCallback,ha=e.unstable_cancelCallback,Nl=e.unstable_shouldYield,nd=e.unstable_requestPaint,ut=e.unstable_now,jl=e.unstable_getCurrentPriorityLevel,Es=e.unstable_ImmediatePriority,Ei=e.unstable_UserBlockingPriority,Hn=e.unstable_NormalPriority,fa=e.unstable_LowPriority,Dl=e.unstable_IdlePriority,xs=null,On=null;function Vl(n){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(xs,n,void 0,(n.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:Ll,pa=Math.log,Ol=Math.LN2;function Ll(n){return n>>>=0,n===0?32:31-(pa(n)/Ol|0)|0}var io=64,so=4194304;function xi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ts(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,y=n.pingedLanes,E=a&268435455;if(E!==0){var A=E&~f;A!==0?c=xi(A):(y&=E,y!==0&&(c=xi(y)))}else E=a&~f,E!==0?c=xi(E):y!==0&&(c=xi(y));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-pn(s),f=1<<a,c|=n[a],s&=~f;return c}function rd(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,y=n.pendingLanes;0<y;){var E=31-pn(y),A=1<<E,j=f[E];j===-1?((A&a)===0||(A&c)!==0)&&(f[E]=rd(A,s)):j<=s&&(n.expiredLanes|=A),y&=~A}}function Ln(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Is(){var n=io;return io<<=1,(io&4194240)===0&&(io=64),n}function Ti(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Ii(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-pn(s),n[s]=a}function lt(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-pn(a),y=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~y}}function Si(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-pn(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var Je=0;function Ci(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ml,oo,Fl,Ul,zl,ma=!1,Rr=[],Qt=null,cr=null,dr=null,Ri=new Map,qn=new Map,Pr=[],id="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bl(n,s){switch(n){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Ri.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":qn.delete(s.pointerId)}}function xn(n,s,a,c,f,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:y,targetContainers:[f]},s!==null&&(s=ka(s),s!==null&&oo(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function sd(n,s,a,c,f){switch(s){case"focusin":return Qt=xn(Qt,n,s,a,c,f),!0;case"dragenter":return cr=xn(cr,n,s,a,c,f),!0;case"mouseover":return dr=xn(dr,n,s,a,c,f),!0;case"pointerover":var y=f.pointerId;return Ri.set(y,xn(Ri.get(y)||null,n,s,a,c,f)),!0;case"gotpointercapture":return y=f.pointerId,qn.set(y,xn(qn.get(y)||null,n,s,a,c,f)),!0}return!1}function $l(n){var s=As(n.target);if(s!==null){var a=lr(s);if(a!==null){if(s=a.tag,s===13){if(s=ws(a),s!==null){n.blockedOn=s,zl(n.priority,function(){Fl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Yr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=ao(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);We=c,a.target.dispatchEvent(c),We=null}else return s=ka(a),s!==null&&oo(s),n.blockedOn=a,!1;s.shift()}return!0}function Ss(n,s,a){Yr(n)&&a.delete(s)}function Wl(){ma=!1,Qt!==null&&Yr(Qt)&&(Qt=null),cr!==null&&Yr(cr)&&(cr=null),dr!==null&&Yr(dr)&&(dr=null),Ri.forEach(Ss),qn.forEach(Ss)}function hr(n,s){n.blockedOn===s&&(n.blockedOn=null,ma||(ma=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wl)))}function fr(n){function s(f){return hr(f,n)}if(0<Rr.length){hr(Rr[0],n);for(var a=1;a<Rr.length;a++){var c=Rr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Qt!==null&&hr(Qt,n),cr!==null&&hr(cr,n),dr!==null&&hr(dr,n),Ri.forEach(s),qn.forEach(s),a=0;a<Pr.length;a++)c=Pr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Pr.length&&(a=Pr[0],a.blockedOn===null);)$l(a),a.blockedOn===null&&Pr.shift()}var Jr=de.ReactCurrentBatchConfig,Pi=!0;function vt(n,s,a,c){var f=Je,y=Jr.transition;Jr.transition=null;try{Je=1,ga(n,s,a,c)}finally{Je=f,Jr.transition=y}}function od(n,s,a,c){var f=Je,y=Jr.transition;Jr.transition=null;try{Je=4,ga(n,s,a,c)}finally{Je=f,Jr.transition=y}}function ga(n,s,a,c){if(Pi){var f=ao(n,s,a,c);if(f===null)yd(n,s,c,Cs,a),Bl(n,c);else if(sd(f,n,s,a,c))c.stopPropagation();else if(Bl(n,c),s&4&&-1<id.indexOf(n)){for(;f!==null;){var y=ka(f);if(y!==null&&Ml(y),y=ao(n,s,a,c),y===null&&yd(n,s,c,Cs,a),y===f)break;f=y}f!==null&&c.stopPropagation()}else yd(n,s,c,null,a)}}var Cs=null;function ao(n,s,a,c){if(Cs=null,n=Ke(c),n=As(n),n!==null)if(s=lr(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ws(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Cs=n,null}function ya(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jl()){case Es:return 1;case Ei:return 4;case Hn:case fa:return 16;case Dl:return 536870912;default:return 16}default:return 16}}var Mn=null,lo=null,Tn=null;function va(){if(Tn)return Tn;var n,s=lo,a=s.length,c,f="value"in Mn?Mn.value:Mn.textContent,y=f.length;for(n=0;n<a&&s[n]===f[n];n++);var E=a-n;for(c=1;c<=E&&s[a-c]===f[y-c];c++);return Tn=f.slice(n,1<c?1-c:void 0)}function uo(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ar(){return!0}function _a(){return!1}function Yt(n){function s(a,c,f,y,E){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ar:_a,this.isPropagationStopped=_a,this}return ge(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ar)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ar)},persist:function(){},isPersistent:Ar}),s}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},co=Yt(pr),kr=ge({},pr,{view:0,detail:0}),ad=Yt(kr),ho,Xr,Ai,Rs=ge({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:br,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ai&&(Ai&&n.type==="mousemove"?(ho=n.screenX-Ai.screenX,Xr=n.screenY-Ai.screenY):Xr=ho=0,Ai=n),ho)},movementY:function(n){return"movementY"in n?n.movementY:Xr}}),fo=Yt(Rs),wa=ge({},Rs,{dataTransfer:0}),Hl=Yt(wa),po=ge({},kr,{relatedTarget:0}),mo=Yt(po),ql=ge({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Zr=Yt(ql),Gl=ge({},pr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Kl=Yt(Gl),Ql=ge({},pr,{data:0}),Ea=Yt(Ql),go={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Yl[n])?!!s[n]:!1}function br(){return Jl}var u=ge({},kr,{key:function(n){if(n.key){var s=go[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=uo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:br,charCode:function(n){return n.type==="keypress"?uo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?uo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Yt(u),_=ge({},Rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Yt(_),M=ge({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:br}),G=Yt(M),he=ge({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ot=Yt(he),Lt=ge({},Rs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Xe=Yt(Lt),$t=[9,13,27,32],kt=p&&"CompositionEvent"in window,Gn=null;p&&"documentMode"in document&&(Gn=document.documentMode);var Fn=p&&"TextEvent"in window&&!Gn,Ps=p&&(!kt||Gn&&8<Gn&&11>=Gn),yo=" ",Tp=!1;function Ip(n,s){switch(n){case"keyup":return $t.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vo=!1;function mw(n,s){switch(n){case"compositionend":return Sp(s);case"keypress":return s.which!==32?null:(Tp=!0,yo);case"textInput":return n=s.data,n===yo&&Tp?null:n;default:return null}}function gw(n,s){if(vo)return n==="compositionend"||!kt&&Ip(n,s)?(n=va(),Tn=lo=Mn=null,vo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ps&&s.locale!=="ko"?null:s.data;default:return null}}var yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!yw[n.type]:s==="textarea"}function Rp(n,s,a,c){Bt(c),s=nu(s,"onChange"),0<s.length&&(a=new co("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var xa=null,Ta=null;function vw(n){Hp(n,0)}function Xl(n){var s=To(n);if(St(s))return n}function _w(n,s){if(n==="change")return s}var Pp=!1;if(p){var ld;if(p){var ud="oninput"in document;if(!ud){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),ud=typeof Ap.oninput=="function"}ld=ud}else ld=!1;Pp=ld&&(!document.documentMode||9<document.documentMode)}function kp(){xa&&(xa.detachEvent("onpropertychange",bp),Ta=xa=null)}function bp(n){if(n.propertyName==="value"&&Xl(Ta)){var s=[];Rp(s,Ta,n,Ke(n)),_s(vw,s)}}function ww(n,s,a){n==="focusin"?(kp(),xa=s,Ta=a,xa.attachEvent("onpropertychange",bp)):n==="focusout"&&kp()}function Ew(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xl(Ta)}function xw(n,s){if(n==="click")return Xl(s)}function Tw(n,s){if(n==="input"||n==="change")return Xl(s)}function Iw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var mr=typeof Object.is=="function"?Object.is:Iw;function Ia(n,s){if(mr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!g.call(s,f)||!mr(n[f],s[f]))return!1}return!0}function Np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jp(n,s){var a=Np(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Np(a)}}function Dp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Dp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Vp(){for(var n=window,s=Ot();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Ot(n.document)}return s}function cd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Sw(n){var s=Vp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Dp(a.ownerDocument.documentElement,a)){if(c!==null&&cd(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,y=Math.min(c.start,f);c=c.end===void 0?y:Math.min(c.end,f),!n.extend&&y>c&&(f=c,c=y,y=f),f=jp(a,y);var E=jp(a,c);f&&E&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),y>c?(n.addRange(s),n.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Cw=p&&"documentMode"in document&&11>=document.documentMode,_o=null,dd=null,Sa=null,hd=!1;function Op(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hd||_o==null||_o!==Ot(c)||(c=_o,"selectionStart"in c&&cd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Sa&&Ia(Sa,c)||(Sa=c,c=nu(dd,"onSelect"),0<c.length&&(s=new co("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=_o)))}function Zl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var wo={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},fd={},Lp={};p&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function eu(n){if(fd[n])return fd[n];if(!wo[n])return n;var s=wo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Lp)return fd[n]=s[a];return n}var Mp=eu("animationend"),Fp=eu("animationiteration"),Up=eu("animationstart"),zp=eu("transitionend"),Bp=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(n,s){Bp.set(n,s),l(s,[n])}for(var pd=0;pd<$p.length;pd++){var md=$p[pd],Rw=md.toLowerCase(),Pw=md[0].toUpperCase()+md.slice(1);ki(Rw,"on"+Pw)}ki(Mp,"onAnimationEnd"),ki(Fp,"onAnimationIteration"),ki(Up,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(zp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function Wp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,kl(c,s,void 0,n),n.currentTarget=null}function Hp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var y=void 0;if(s)for(var E=c.length-1;0<=E;E--){var A=c[E],j=A.instance,H=A.currentTarget;if(A=A.listener,j!==y&&f.isPropagationStopped())break e;Wp(f,A,H),y=j}else for(E=0;E<c.length;E++){if(A=c[E],j=A.instance,H=A.currentTarget,A=A.listener,j!==y&&f.isPropagationStopped())break e;Wp(f,A,H),y=j}}}if(Vn)throw n=yt,Vn=!1,yt=null,n}function dt(n,s){var a=s[Td];a===void 0&&(a=s[Td]=new Set);var c=n+"__bubble";a.has(c)||(qp(s,n,2,!1),a.add(c))}function gd(n,s,a){var c=0;s&&(c|=4),qp(a,n,c,s)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Ra(n){if(!n[tu]){n[tu]=!0,i.forEach(function(a){a!=="selectionchange"&&(Aw.has(a)||gd(a,!1,n),gd(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[tu]||(s[tu]=!0,gd("selectionchange",!1,s))}}function qp(n,s,a,c){switch(ya(s)){case 1:var f=vt;break;case 4:f=od;break;default:f=ga}a=f.bind(null,s,a,n),f=void 0,!_i||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function yd(n,s,a,c,f){var y=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var A=c.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(E===4)for(E=c.return;E!==null;){var j=E.tag;if((j===3||j===4)&&(j=E.stateNode.containerInfo,j===f||j.nodeType===8&&j.parentNode===f))return;E=E.return}for(;A!==null;){if(E=As(A),E===null)return;if(j=E.tag,j===5||j===6){c=y=E;continue e}A=A.parentNode}}c=c.return}_s(function(){var H=y,re=Ke(a),ie=[];e:{var ne=Bp.get(n);if(ne!==void 0){var ye=co,we=n;switch(n){case"keypress":if(uo(a)===0)break e;case"keydown":case"keyup":ye=m;break;case"focusin":we="focus",ye=mo;break;case"focusout":we="blur",ye=mo;break;case"beforeblur":case"afterblur":ye=mo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=G;break;case Mp:case Fp:case Up:ye=Zr;break;case zp:ye=ot;break;case"scroll":ye=ad;break;case"wheel":ye=Xe;break;case"copy":case"cut":case"paste":ye=Kl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=T}var Te=(s&4)!==0,Rt=!Te&&n==="scroll",F=Te?ne!==null?ne+"Capture":null:ne;Te=[];for(var V=H,B;V!==null;){B=V;var ae=B.stateNode;if(B.tag===5&&ae!==null&&(B=ae,F!==null&&(ae=Et(V,F),ae!=null&&Te.push(Pa(V,ae,B)))),Rt)break;V=V.return}0<Te.length&&(ne=new ye(ne,we,null,a,re),ie.push({event:ne,listeners:Te}))}}if((s&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",ye=n==="mouseout"||n==="pointerout",ne&&a!==We&&(we=a.relatedTarget||a.fromElement)&&(As(we)||we[ei]))break e;if((ye||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,ye?(we=a.relatedTarget||a.toElement,ye=H,we=we?As(we):null,we!==null&&(Rt=lr(we),we!==Rt||we.tag!==5&&we.tag!==6)&&(we=null)):(ye=null,we=H),ye!==we)){if(Te=fo,ae="onMouseLeave",F="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Te=T,ae="onPointerLeave",F="onPointerEnter",V="pointer"),Rt=ye==null?ne:To(ye),B=we==null?ne:To(we),ne=new Te(ae,V+"leave",ye,a,re),ne.target=Rt,ne.relatedTarget=B,ae=null,As(re)===H&&(Te=new Te(F,V+"enter",we,a,re),Te.target=B,Te.relatedTarget=Rt,ae=Te),Rt=ae,ye&&we)t:{for(Te=ye,F=we,V=0,B=Te;B;B=Eo(B))V++;for(B=0,ae=F;ae;ae=Eo(ae))B++;for(;0<V-B;)Te=Eo(Te),V--;for(;0<B-V;)F=Eo(F),B--;for(;V--;){if(Te===F||F!==null&&Te===F.alternate)break t;Te=Eo(Te),F=Eo(F)}Te=null}else Te=null;ye!==null&&Gp(ie,ne,ye,Te,!1),we!==null&&Rt!==null&&Gp(ie,Rt,we,Te,!0)}}e:{if(ne=H?To(H):window,ye=ne.nodeName&&ne.nodeName.toLowerCase(),ye==="select"||ye==="input"&&ne.type==="file")var Ce=_w;else if(Cp(ne))if(Pp)Ce=Tw;else{Ce=Ew;var Ae=ww}else(ye=ne.nodeName)&&ye.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Ce=xw);if(Ce&&(Ce=Ce(n,H))){Rp(ie,Ce,a,re);break e}Ae&&Ae(n,ne,H),n==="focusout"&&(Ae=ne._wrapperState)&&Ae.controlled&&ne.type==="number"&&or(ne,"number",ne.value)}switch(Ae=H?To(H):window,n){case"focusin":(Cp(Ae)||Ae.contentEditable==="true")&&(_o=Ae,dd=H,Sa=null);break;case"focusout":Sa=dd=_o=null;break;case"mousedown":hd=!0;break;case"contextmenu":case"mouseup":case"dragend":hd=!1,Op(ie,a,re);break;case"selectionchange":if(Cw)break;case"keydown":case"keyup":Op(ie,a,re)}var ke;if(kt)e:{switch(n){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else vo?Ip(n,a)&&(De="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(Ps&&a.locale!=="ko"&&(vo||De!=="onCompositionStart"?De==="onCompositionEnd"&&vo&&(ke=va()):(Mn=re,lo="value"in Mn?Mn.value:Mn.textContent,vo=!0)),Ae=nu(H,De),0<Ae.length&&(De=new Ea(De,n,null,a,re),ie.push({event:De,listeners:Ae}),ke?De.data=ke:(ke=Sp(a),ke!==null&&(De.data=ke)))),(ke=Fn?mw(n,a):gw(n,a))&&(H=nu(H,"onBeforeInput"),0<H.length&&(re=new Ea("onBeforeInput","beforeinput",null,a,re),ie.push({event:re,listeners:H}),re.data=ke))}Hp(ie,s)})}function Pa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function nu(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=Et(n,a),y!=null&&c.unshift(Pa(n,y,f)),y=Et(n,s),y!=null&&c.push(Pa(n,y,f))),n=n.return}return c}function Eo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gp(n,s,a,c,f){for(var y=s._reactName,E=[];a!==null&&a!==c;){var A=a,j=A.alternate,H=A.stateNode;if(j!==null&&j===c)break;A.tag===5&&H!==null&&(A=H,f?(j=Et(a,y),j!=null&&E.unshift(Pa(a,j,A))):f||(j=Et(a,y),j!=null&&E.push(Pa(a,j,A)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var kw=/\r\n?/g,bw=/\u0000|\uFFFD/g;function Kp(n){return(typeof n=="string"?n:""+n).replace(kw,`
`).replace(bw,"")}function ru(n,s,a){if(s=Kp(s),Kp(n)!==s&&a)throw Error(t(425))}function iu(){}var vd=null,_d=null;function wd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,Nw=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(n){return Qp.resolve(null).then(n).catch(Dw)}:Ed;function Dw(n){setTimeout(function(){throw n})}function xd(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),fr(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);fr(s)}function bi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Yp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var xo=Math.random().toString(36).slice(2),Nr="__reactFiber$"+xo,Aa="__reactProps$"+xo,ei="__reactContainer$"+xo,Td="__reactEvents$"+xo,Vw="__reactListeners$"+xo,Ow="__reactHandles$"+xo;function As(n){var s=n[Nr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[ei]||a[Nr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Yp(n);n!==null;){if(a=n[Nr])return a;n=Yp(n)}return s}n=a,a=n.parentNode}return null}function ka(n){return n=n[Nr]||n[ei],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function To(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function su(n){return n[Aa]||null}var Id=[],Io=-1;function Ni(n){return{current:n}}function ht(n){0>Io||(n.current=Id[Io],Id[Io]=null,Io--)}function ct(n,s){Io++,Id[Io]=n.current,n.current=s}var ji={},sn=Ni(ji),In=Ni(!1),ks=ji;function So(n,s){var a=n.type.contextTypes;if(!a)return ji;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in a)f[y]=s[y];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Sn(n){return n=n.childContextTypes,n!=null}function ou(){ht(In),ht(sn)}function Jp(n,s,a){if(sn.current!==ji)throw Error(t(168));ct(sn,s),ct(In,a)}function Xp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,Re(n)||"Unknown",f));return ge({},a,c)}function au(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ji,ks=sn.current,ct(sn,n),ct(In,In.current),!0}function Zp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Xp(n,s,ks),c.__reactInternalMemoizedMergedChildContext=n,ht(In),ht(sn),ct(sn,n)):ht(In),ct(In,a)}var ti=null,lu=!1,Sd=!1;function em(n){ti===null?ti=[n]:ti.push(n)}function Lw(n){lu=!0,em(n)}function Di(){if(!Sd&&ti!==null){Sd=!0;var n=0,s=Je;try{var a=ti;for(Je=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}ti=null,lu=!1}catch(f){throw ti!==null&&(ti=ti.slice(n+1)),ro(Es,Di),f}finally{Je=s,Sd=!1}}return null}var Co=[],Ro=0,uu=null,cu=0,Kn=[],Qn=0,bs=null,ni=1,ri="";function Ns(n,s){Co[Ro++]=cu,Co[Ro++]=uu,uu=n,cu=s}function tm(n,s,a){Kn[Qn++]=ni,Kn[Qn++]=ri,Kn[Qn++]=bs,bs=n;var c=ni;n=ri;var f=32-pn(c)-1;c&=~(1<<f),a+=1;var y=32-pn(s)+f;if(30<y){var E=f-f%5;y=(c&(1<<E)-1).toString(32),c>>=E,f-=E,ni=1<<32-pn(s)+f|a<<f|c,ri=y+n}else ni=1<<y|a<<f|c,ri=n}function Cd(n){n.return!==null&&(Ns(n,1),tm(n,1,0))}function Rd(n){for(;n===uu;)uu=Co[--Ro],Co[Ro]=null,cu=Co[--Ro],Co[Ro]=null;for(;n===bs;)bs=Kn[--Qn],Kn[Qn]=null,ri=Kn[--Qn],Kn[Qn]=null,ni=Kn[--Qn],Kn[Qn]=null}var Un=null,zn=null,_t=!1,gr=null;function nm(n,s){var a=Zn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function rm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Un=n,zn=bi(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Un=n,zn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=bs!==null?{id:ni,overflow:ri}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Zn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Un=n,zn=null,!0):!1;default:return!1}}function Pd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ad(n){if(_t){var s=zn;if(s){var a=s;if(!rm(n,s)){if(Pd(n))throw Error(t(418));s=bi(a.nextSibling);var c=Un;s&&rm(n,s)?nm(c,a):(n.flags=n.flags&-4097|2,_t=!1,Un=n)}}else{if(Pd(n))throw Error(t(418));n.flags=n.flags&-4097|2,_t=!1,Un=n}}}function im(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Un=n}function du(n){if(n!==Un)return!1;if(!_t)return im(n),_t=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!wd(n.type,n.memoizedProps)),s&&(s=zn)){if(Pd(n))throw sm(),Error(t(418));for(;s;)nm(n,s),s=bi(s.nextSibling)}if(im(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){zn=bi(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}zn=null}}else zn=Un?bi(n.stateNode.nextSibling):null;return!0}function sm(){for(var n=zn;n;)n=bi(n.nextSibling)}function Po(){zn=Un=null,_t=!1}function kd(n){gr===null?gr=[n]:gr.push(n)}var Mw=de.ReactCurrentBatchConfig;function ba(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(E){var A=f.refs;E===null?delete A[y]:A[y]=E},s._stringRef=y,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function hu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function om(n){var s=n._init;return s(n._payload)}function am(n){function s(F,V){if(n){var B=F.deletions;B===null?(F.deletions=[V],F.flags|=16):B.push(V)}}function a(F,V){if(!n)return null;for(;V!==null;)s(F,V),V=V.sibling;return null}function c(F,V){for(F=new Map;V!==null;)V.key!==null?F.set(V.key,V):F.set(V.index,V),V=V.sibling;return F}function f(F,V){return F=Bi(F,V),F.index=0,F.sibling=null,F}function y(F,V,B){return F.index=B,n?(B=F.alternate,B!==null?(B=B.index,B<V?(F.flags|=2,V):B):(F.flags|=2,V)):(F.flags|=1048576,V)}function E(F){return n&&F.alternate===null&&(F.flags|=2),F}function A(F,V,B,ae){return V===null||V.tag!==6?(V=Eh(B,F.mode,ae),V.return=F,V):(V=f(V,B),V.return=F,V)}function j(F,V,B,ae){var Ce=B.type;return Ce===N?re(F,V,B.props.children,ae,B.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Be&&om(Ce)===V.type)?(ae=f(V,B.props),ae.ref=ba(F,V,B),ae.return=F,ae):(ae=Ou(B.type,B.key,B.props,null,F.mode,ae),ae.ref=ba(F,V,B),ae.return=F,ae)}function H(F,V,B,ae){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=xh(B,F.mode,ae),V.return=F,V):(V=f(V,B.children||[]),V.return=F,V)}function re(F,V,B,ae,Ce){return V===null||V.tag!==7?(V=Us(B,F.mode,ae,Ce),V.return=F,V):(V=f(V,B),V.return=F,V)}function ie(F,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Eh(""+V,F.mode,B),V.return=F,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ue:return B=Ou(V.type,V.key,V.props,null,F.mode,B),B.ref=ba(F,null,V),B.return=F,B;case me:return V=xh(V,F.mode,B),V.return=F,V;case Be:var ae=V._init;return ie(F,ae(V._payload),B)}if(_n(V)||Se(V))return V=Us(V,F.mode,B,null),V.return=F,V;hu(F,V)}return null}function ne(F,V,B,ae){var Ce=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return Ce!==null?null:A(F,V,""+B,ae);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ue:return B.key===Ce?j(F,V,B,ae):null;case me:return B.key===Ce?H(F,V,B,ae):null;case Be:return Ce=B._init,ne(F,V,Ce(B._payload),ae)}if(_n(B)||Se(B))return Ce!==null?null:re(F,V,B,ae,null);hu(F,B)}return null}function ye(F,V,B,ae,Ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return F=F.get(B)||null,A(V,F,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case ue:return F=F.get(ae.key===null?B:ae.key)||null,j(V,F,ae,Ce);case me:return F=F.get(ae.key===null?B:ae.key)||null,H(V,F,ae,Ce);case Be:var Ae=ae._init;return ye(F,V,B,Ae(ae._payload),Ce)}if(_n(ae)||Se(ae))return F=F.get(B)||null,re(V,F,ae,Ce,null);hu(V,ae)}return null}function we(F,V,B,ae){for(var Ce=null,Ae=null,ke=V,De=V=0,qt=null;ke!==null&&De<B.length;De++){ke.index>De?(qt=ke,ke=null):qt=ke.sibling;var nt=ne(F,ke,B[De],ae);if(nt===null){ke===null&&(ke=qt);break}n&&ke&&nt.alternate===null&&s(F,ke),V=y(nt,V,De),Ae===null?Ce=nt:Ae.sibling=nt,Ae=nt,ke=qt}if(De===B.length)return a(F,ke),_t&&Ns(F,De),Ce;if(ke===null){for(;De<B.length;De++)ke=ie(F,B[De],ae),ke!==null&&(V=y(ke,V,De),Ae===null?Ce=ke:Ae.sibling=ke,Ae=ke);return _t&&Ns(F,De),Ce}for(ke=c(F,ke);De<B.length;De++)qt=ye(ke,F,De,B[De],ae),qt!==null&&(n&&qt.alternate!==null&&ke.delete(qt.key===null?De:qt.key),V=y(qt,V,De),Ae===null?Ce=qt:Ae.sibling=qt,Ae=qt);return n&&ke.forEach(function($i){return s(F,$i)}),_t&&Ns(F,De),Ce}function Te(F,V,B,ae){var Ce=Se(B);if(typeof Ce!="function")throw Error(t(150));if(B=Ce.call(B),B==null)throw Error(t(151));for(var Ae=Ce=null,ke=V,De=V=0,qt=null,nt=B.next();ke!==null&&!nt.done;De++,nt=B.next()){ke.index>De?(qt=ke,ke=null):qt=ke.sibling;var $i=ne(F,ke,nt.value,ae);if($i===null){ke===null&&(ke=qt);break}n&&ke&&$i.alternate===null&&s(F,ke),V=y($i,V,De),Ae===null?Ce=$i:Ae.sibling=$i,Ae=$i,ke=qt}if(nt.done)return a(F,ke),_t&&Ns(F,De),Ce;if(ke===null){for(;!nt.done;De++,nt=B.next())nt=ie(F,nt.value,ae),nt!==null&&(V=y(nt,V,De),Ae===null?Ce=nt:Ae.sibling=nt,Ae=nt);return _t&&Ns(F,De),Ce}for(ke=c(F,ke);!nt.done;De++,nt=B.next())nt=ye(ke,F,De,nt.value,ae),nt!==null&&(n&&nt.alternate!==null&&ke.delete(nt.key===null?De:nt.key),V=y(nt,V,De),Ae===null?Ce=nt:Ae.sibling=nt,Ae=nt);return n&&ke.forEach(function(yE){return s(F,yE)}),_t&&Ns(F,De),Ce}function Rt(F,V,B,ae){if(typeof B=="object"&&B!==null&&B.type===N&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case ue:e:{for(var Ce=B.key,Ae=V;Ae!==null;){if(Ae.key===Ce){if(Ce=B.type,Ce===N){if(Ae.tag===7){a(F,Ae.sibling),V=f(Ae,B.props.children),V.return=F,F=V;break e}}else if(Ae.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Be&&om(Ce)===Ae.type){a(F,Ae.sibling),V=f(Ae,B.props),V.ref=ba(F,Ae,B),V.return=F,F=V;break e}a(F,Ae);break}else s(F,Ae);Ae=Ae.sibling}B.type===N?(V=Us(B.props.children,F.mode,ae,B.key),V.return=F,F=V):(ae=Ou(B.type,B.key,B.props,null,F.mode,ae),ae.ref=ba(F,V,B),ae.return=F,F=ae)}return E(F);case me:e:{for(Ae=B.key;V!==null;){if(V.key===Ae)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(F,V.sibling),V=f(V,B.children||[]),V.return=F,F=V;break e}else{a(F,V);break}else s(F,V);V=V.sibling}V=xh(B,F.mode,ae),V.return=F,F=V}return E(F);case Be:return Ae=B._init,Rt(F,V,Ae(B._payload),ae)}if(_n(B))return we(F,V,B,ae);if(Se(B))return Te(F,V,B,ae);hu(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(a(F,V.sibling),V=f(V,B),V.return=F,F=V):(a(F,V),V=Eh(B,F.mode,ae),V.return=F,F=V),E(F)):a(F,V)}return Rt}var Ao=am(!0),lm=am(!1),fu=Ni(null),pu=null,ko=null,bd=null;function Nd(){bd=ko=pu=null}function jd(n){var s=fu.current;ht(fu),n._currentValue=s}function Dd(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function bo(n,s){pu=n,bd=ko=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Cn=!0),n.firstContext=null)}function Yn(n){var s=n._currentValue;if(bd!==n)if(n={context:n,memoizedValue:s,next:null},ko===null){if(pu===null)throw Error(t(308));ko=n,pu.dependencies={lanes:0,firstContext:n}}else ko=ko.next=n;return s}var js=null;function Vd(n){js===null?js=[n]:js.push(n)}function um(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Vd(s)):(a.next=f.next,f.next=a),s.interleaved=a,ii(n,c)}function ii(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Vi=!1;function Od(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function si(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Oi(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(et&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,ii(n,a)}return f=c.interleaved,f===null?(s.next=s,Vd(c)):(s.next=f.next,f.next=s),c.interleaved=s,ii(n,a)}function mu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Si(n,a)}}function dm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?f=y=E:y=y.next=E,a=a.next}while(a!==null);y===null?f=y=s:y=y.next=s}else f=y=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function gu(n,s,a,c){var f=n.updateQueue;Vi=!1;var y=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var j=A,H=j.next;j.next=null,E===null?y=H:E.next=H,E=j;var re=n.alternate;re!==null&&(re=re.updateQueue,A=re.lastBaseUpdate,A!==E&&(A===null?re.firstBaseUpdate=H:A.next=H,re.lastBaseUpdate=j))}if(y!==null){var ie=f.baseState;E=0,re=H=j=null,A=y;do{var ne=A.lane,ye=A.eventTime;if((c&ne)===ne){re!==null&&(re=re.next={eventTime:ye,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var we=n,Te=A;switch(ne=s,ye=a,Te.tag){case 1:if(we=Te.payload,typeof we=="function"){ie=we.call(ye,ie,ne);break e}ie=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Te.payload,ne=typeof we=="function"?we.call(ye,ie,ne):we,ne==null)break e;ie=ge({},ie,ne);break e;case 2:Vi=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,ne=f.effects,ne===null?f.effects=[A]:ne.push(A))}else ye={eventTime:ye,lane:ne,tag:A.tag,payload:A.payload,callback:A.callback,next:null},re===null?(H=re=ye,j=ie):re=re.next=ye,E|=ne;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ne=A,A=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);if(re===null&&(j=ie),f.baseState=j,f.firstBaseUpdate=H,f.lastBaseUpdate=re,s=f.shared.interleaved,s!==null){f=s;do E|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);Os|=E,n.lanes=E,n.memoizedState=ie}}function hm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Na={},jr=Ni(Na),ja=Ni(Na),Da=Ni(Na);function Ds(n){if(n===Na)throw Error(t(174));return n}function Ld(n,s){switch(ct(Da,s),ct(ja,n),ct(jr,Na),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:R(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=R(s,n)}ht(jr),ct(jr,s)}function No(){ht(jr),ht(ja),ht(Da)}function fm(n){Ds(Da.current);var s=Ds(jr.current),a=R(s,n.type);s!==a&&(ct(ja,n),ct(jr,a))}function Md(n){ja.current===n&&(ht(jr),ht(ja))}var xt=Ni(0);function yu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Fd=[];function Ud(){for(var n=0;n<Fd.length;n++)Fd[n]._workInProgressVersionPrimary=null;Fd.length=0}var vu=de.ReactCurrentDispatcher,zd=de.ReactCurrentBatchConfig,Vs=0,Tt=null,Mt=null,Wt=null,_u=!1,Va=!1,Oa=0,Fw=0;function on(){throw Error(t(321))}function Bd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!mr(n[a],s[a]))return!1;return!0}function $d(n,s,a,c,f,y){if(Vs=y,Tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,vu.current=n===null||n.memoizedState===null?$w:Ww,n=a(c,f),Va){y=0;do{if(Va=!1,Oa=0,25<=y)throw Error(t(301));y+=1,Wt=Mt=null,s.updateQueue=null,vu.current=Hw,n=a(c,f)}while(Va)}if(vu.current=xu,s=Mt!==null&&Mt.next!==null,Vs=0,Wt=Mt=Tt=null,_u=!1,s)throw Error(t(300));return n}function Wd(){var n=Oa!==0;return Oa=0,n}function Dr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Tt.memoizedState=Wt=n:Wt=Wt.next=n,Wt}function Jn(){if(Mt===null){var n=Tt.alternate;n=n!==null?n.memoizedState:null}else n=Mt.next;var s=Wt===null?Tt.memoizedState:Wt.next;if(s!==null)Wt=s,Mt=n;else{if(n===null)throw Error(t(310));Mt=n,n={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Wt===null?Tt.memoizedState=Wt=n:Wt=Wt.next=n}return Wt}function La(n,s){return typeof s=="function"?s(n):s}function Hd(n){var s=Jn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Mt,f=c.baseQueue,y=a.pending;if(y!==null){if(f!==null){var E=f.next;f.next=y.next,y.next=E}c.baseQueue=f=y,a.pending=null}if(f!==null){y=f.next,c=c.baseState;var A=E=null,j=null,H=y;do{var re=H.lane;if((Vs&re)===re)j!==null&&(j=j.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),c=H.hasEagerState?H.eagerState:n(c,H.action);else{var ie={lane:re,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};j===null?(A=j=ie,E=c):j=j.next=ie,Tt.lanes|=re,Os|=re}H=H.next}while(H!==null&&H!==y);j===null?E=c:j.next=A,mr(c,s.memoizedState)||(Cn=!0),s.memoizedState=c,s.baseState=E,s.baseQueue=j,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do y=f.lane,Tt.lanes|=y,Os|=y,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function qd(n){var s=Jn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,y=s.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do y=n(y,E.action),E=E.next;while(E!==f);mr(y,s.memoizedState)||(Cn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,c]}function pm(){}function mm(n,s){var a=Tt,c=Jn(),f=s(),y=!mr(c.memoizedState,f);if(y&&(c.memoizedState=f,Cn=!0),c=c.queue,Gd(vm.bind(null,a,c,n),[n]),c.getSnapshot!==s||y||Wt!==null&&Wt.memoizedState.tag&1){if(a.flags|=2048,Ma(9,ym.bind(null,a,c,f,s),void 0,null),Ht===null)throw Error(t(349));(Vs&30)!==0||gm(a,s,f)}return f}function gm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Tt.updateQueue,s===null?(s={lastEffect:null,stores:null},Tt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function ym(n,s,a,c){s.value=a,s.getSnapshot=c,_m(s)&&wm(n)}function vm(n,s,a){return a(function(){_m(s)&&wm(n)})}function _m(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!mr(n,a)}catch{return!0}}function wm(n){var s=ii(n,1);s!==null&&wr(s,n,1,-1)}function Em(n){var s=Dr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:n},s.queue=n,n=n.dispatch=Bw.bind(null,Tt,n),[s.memoizedState,n]}function Ma(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=Tt.updateQueue,s===null?(s={lastEffect:null,stores:null},Tt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function xm(){return Jn().memoizedState}function wu(n,s,a,c){var f=Dr();Tt.flags|=n,f.memoizedState=Ma(1|s,a,void 0,c===void 0?null:c)}function Eu(n,s,a,c){var f=Jn();c=c===void 0?null:c;var y=void 0;if(Mt!==null){var E=Mt.memoizedState;if(y=E.destroy,c!==null&&Bd(c,E.deps)){f.memoizedState=Ma(s,a,y,c);return}}Tt.flags|=n,f.memoizedState=Ma(1|s,a,y,c)}function Tm(n,s){return wu(8390656,8,n,s)}function Gd(n,s){return Eu(2048,8,n,s)}function Im(n,s){return Eu(4,2,n,s)}function Sm(n,s){return Eu(4,4,n,s)}function Cm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Rm(n,s,a){return a=a!=null?a.concat([n]):null,Eu(4,4,Cm.bind(null,s,n),a)}function Kd(){}function Pm(n,s){var a=Jn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Bd(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Am(n,s){var a=Jn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Bd(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function km(n,s,a){return(Vs&21)===0?(n.baseState&&(n.baseState=!1,Cn=!0),n.memoizedState=a):(mr(a,s)||(a=Is(),Tt.lanes|=a,Os|=a,n.baseState=!0),s)}function Uw(n,s){var a=Je;Je=a!==0&&4>a?a:4,n(!0);var c=zd.transition;zd.transition={};try{n(!1),s()}finally{Je=a,zd.transition=c}}function bm(){return Jn().memoizedState}function zw(n,s,a){var c=Ui(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Nm(n))jm(s,a);else if(a=um(n,s,a,c),a!==null){var f=yn();wr(a,n,c,f),Dm(a,s,c)}}function Bw(n,s,a){var c=Ui(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nm(n))jm(s,f);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var E=s.lastRenderedState,A=y(E,a);if(f.hasEagerState=!0,f.eagerState=A,mr(A,E)){var j=s.interleaved;j===null?(f.next=f,Vd(s)):(f.next=j.next,j.next=f),s.interleaved=f;return}}catch{}finally{}a=um(n,s,f,c),a!==null&&(f=yn(),wr(a,n,c,f),Dm(a,s,c))}}function Nm(n){var s=n.alternate;return n===Tt||s!==null&&s===Tt}function jm(n,s){Va=_u=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Dm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Si(n,a)}}var xu={readContext:Yn,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},$w={readContext:Yn,useCallback:function(n,s){return Dr().memoizedState=[n,s===void 0?null:s],n},useContext:Yn,useEffect:Tm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,wu(4194308,4,Cm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return wu(4194308,4,n,s)},useInsertionEffect:function(n,s){return wu(4,2,n,s)},useMemo:function(n,s){var a=Dr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Dr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=zw.bind(null,Tt,n),[c.memoizedState,n]},useRef:function(n){var s=Dr();return n={current:n},s.memoizedState=n},useState:Em,useDebugValue:Kd,useDeferredValue:function(n){return Dr().memoizedState=n},useTransition:function(){var n=Em(!1),s=n[0];return n=Uw.bind(null,n[1]),Dr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=Tt,f=Dr();if(_t){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Ht===null)throw Error(t(349));(Vs&30)!==0||gm(c,s,a)}f.memoizedState=a;var y={value:a,getSnapshot:s};return f.queue=y,Tm(vm.bind(null,c,y,n),[n]),c.flags|=2048,Ma(9,ym.bind(null,c,y,a,s),void 0,null),a},useId:function(){var n=Dr(),s=Ht.identifierPrefix;if(_t){var a=ri,c=ni;a=(c&~(1<<32-pn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Oa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Fw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Ww={readContext:Yn,useCallback:Pm,useContext:Yn,useEffect:Gd,useImperativeHandle:Rm,useInsertionEffect:Im,useLayoutEffect:Sm,useMemo:Am,useReducer:Hd,useRef:xm,useState:function(){return Hd(La)},useDebugValue:Kd,useDeferredValue:function(n){var s=Jn();return km(s,Mt.memoizedState,n)},useTransition:function(){var n=Hd(La)[0],s=Jn().memoizedState;return[n,s]},useMutableSource:pm,useSyncExternalStore:mm,useId:bm,unstable_isNewReconciler:!1},Hw={readContext:Yn,useCallback:Pm,useContext:Yn,useEffect:Gd,useImperativeHandle:Rm,useInsertionEffect:Im,useLayoutEffect:Sm,useMemo:Am,useReducer:qd,useRef:xm,useState:function(){return qd(La)},useDebugValue:Kd,useDeferredValue:function(n){var s=Jn();return Mt===null?s.memoizedState=n:km(s,Mt.memoizedState,n)},useTransition:function(){var n=qd(La)[0],s=Jn().memoizedState;return[n,s]},useMutableSource:pm,useSyncExternalStore:mm,useId:bm,unstable_isNewReconciler:!1};function yr(n,s){if(n&&n.defaultProps){s=ge({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Qd(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ge({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tu={isMounted:function(n){return(n=n._reactInternals)?lr(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=yn(),f=Ui(n),y=si(c,f);y.payload=s,a!=null&&(y.callback=a),s=Oi(n,y,f),s!==null&&(wr(s,n,f,c),mu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=yn(),f=Ui(n),y=si(c,f);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=Oi(n,y,f),s!==null&&(wr(s,n,f,c),mu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=yn(),c=Ui(n),f=si(a,c);f.tag=2,s!=null&&(f.callback=s),s=Oi(n,f,c),s!==null&&(wr(s,n,c,a),mu(s,n,c))}};function Vm(n,s,a,c,f,y,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,y,E):s.prototype&&s.prototype.isPureReactComponent?!Ia(a,c)||!Ia(f,y):!0}function Om(n,s,a){var c=!1,f=ji,y=s.contextType;return typeof y=="object"&&y!==null?y=Yn(y):(f=Sn(s)?ks:sn.current,c=s.contextTypes,y=(c=c!=null)?So(n,f):ji),s=new s(a,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=y),s}function Lm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Tu.enqueueReplaceState(s,s.state,null)}function Yd(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Od(n);var y=s.contextType;typeof y=="object"&&y!==null?f.context=Yn(y):(y=Sn(s)?ks:sn.current,f.context=So(n,y)),f.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Qd(n,s,y,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Tu.enqueueReplaceState(f,f.state,null),gu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function jo(n,s){try{var a="",c=s;do a+=Me(c),c=c.return;while(c);var f=a}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:f,digest:null}}function Jd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Xd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var qw=typeof WeakMap=="function"?WeakMap:Map;function Mm(n,s,a){a=si(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){ku||(ku=!0,fh=c),Xd(n,s)},a}function Fm(n,s,a){a=si(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){Xd(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){Xd(n,s),typeof c!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function Um(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new qw;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=oE.bind(null,n,s,a),s.then(n,n))}function zm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Bm(n,s,a,c,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=si(-1,1),s.tag=2,Oi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Gw=de.ReactCurrentOwner,Cn=!1;function gn(n,s,a,c){s.child=n===null?lm(s,null,a,c):Ao(s,n.child,a,c)}function $m(n,s,a,c,f){a=a.render;var y=s.ref;return bo(s,f),c=$d(n,s,a,c,y,f),a=Wd(),n!==null&&!Cn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,oi(n,s,f)):(_t&&a&&Cd(s),s.flags|=1,gn(n,s,c,f),s.child)}function Wm(n,s,a,c,f){if(n===null){var y=a.type;return typeof y=="function"&&!wh(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,Hm(n,s,y,c,f)):(n=Ou(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,(n.lanes&f)===0){var E=y.memoizedProps;if(a=a.compare,a=a!==null?a:Ia,a(E,c)&&n.ref===s.ref)return oi(n,s,f)}return s.flags|=1,n=Bi(y,c),n.ref=s.ref,n.return=s,s.child=n}function Hm(n,s,a,c,f){if(n!==null){var y=n.memoizedProps;if(Ia(y,c)&&n.ref===s.ref)if(Cn=!1,s.pendingProps=c=y,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Cn=!0);else return s.lanes=n.lanes,oi(n,s,f)}return Zd(n,s,a,c,f)}function qm(n,s,a){var c=s.pendingProps,f=c.children,y=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Vo,Bn),Bn|=a;else{if((a&1073741824)===0)return n=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,ct(Vo,Bn),Bn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=y!==null?y.baseLanes:a,ct(Vo,Bn),Bn|=c}else y!==null?(c=y.baseLanes|a,s.memoizedState=null):c=a,ct(Vo,Bn),Bn|=c;return gn(n,s,f,a),s.child}function Gm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Zd(n,s,a,c,f){var y=Sn(a)?ks:sn.current;return y=So(s,y),bo(s,f),a=$d(n,s,a,c,y,f),c=Wd(),n!==null&&!Cn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,oi(n,s,f)):(_t&&c&&Cd(s),s.flags|=1,gn(n,s,a,f),s.child)}function Km(n,s,a,c,f){if(Sn(a)){var y=!0;au(s)}else y=!1;if(bo(s,f),s.stateNode===null)Su(n,s),Om(s,a,c),Yd(s,a,c,f),c=!0;else if(n===null){var E=s.stateNode,A=s.memoizedProps;E.props=A;var j=E.context,H=a.contextType;typeof H=="object"&&H!==null?H=Yn(H):(H=Sn(a)?ks:sn.current,H=So(s,H));var re=a.getDerivedStateFromProps,ie=typeof re=="function"||typeof E.getSnapshotBeforeUpdate=="function";ie||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==c||j!==H)&&Lm(s,E,c,H),Vi=!1;var ne=s.memoizedState;E.state=ne,gu(s,c,E,f),j=s.memoizedState,A!==c||ne!==j||In.current||Vi?(typeof re=="function"&&(Qd(s,a,re,c),j=s.memoizedState),(A=Vi||Vm(s,a,A,c,ne,j,H))?(ie||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=j),E.props=c,E.state=j,E.context=H,c=A):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{E=s.stateNode,cm(n,s),A=s.memoizedProps,H=s.type===s.elementType?A:yr(s.type,A),E.props=H,ie=s.pendingProps,ne=E.context,j=a.contextType,typeof j=="object"&&j!==null?j=Yn(j):(j=Sn(a)?ks:sn.current,j=So(s,j));var ye=a.getDerivedStateFromProps;(re=typeof ye=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==ie||ne!==j)&&Lm(s,E,c,j),Vi=!1,ne=s.memoizedState,E.state=ne,gu(s,c,E,f);var we=s.memoizedState;A!==ie||ne!==we||In.current||Vi?(typeof ye=="function"&&(Qd(s,a,ye,c),we=s.memoizedState),(H=Vi||Vm(s,a,H,c,ne,we,j)||!1)?(re||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,we,j),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,we,j)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=we),E.props=c,E.state=we,E.context=j,c=H):(typeof E.componentDidUpdate!="function"||A===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),c=!1)}return eh(n,s,a,c,y,f)}function eh(n,s,a,c,f,y){Gm(n,s);var E=(s.flags&128)!==0;if(!c&&!E)return f&&Zp(s,a,!1),oi(n,s,y);c=s.stateNode,Gw.current=s;var A=E&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&E?(s.child=Ao(s,n.child,null,y),s.child=Ao(s,null,A,y)):gn(n,s,A,y),s.memoizedState=c.state,f&&Zp(s,a,!0),s.child}function Qm(n){var s=n.stateNode;s.pendingContext?Jp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Jp(n,s.context,!1),Ld(n,s.containerInfo)}function Ym(n,s,a,c,f){return Po(),kd(f),s.flags|=256,gn(n,s,a,c),s.child}var th={dehydrated:null,treeContext:null,retryLane:0};function nh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Jm(n,s,a){var c=s.pendingProps,f=xt.current,y=!1,E=(s.flags&128)!==0,A;if((A=E)||(A=n!==null&&n.memoizedState===null?!1:(f&2)!==0),A?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),ct(xt,f&1),n===null)return Ad(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=c.children,n=c.fallback,y?(c=s.mode,y=s.child,E={mode:"hidden",children:E},(c&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Lu(E,c,0,null),n=Us(n,c,a,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=nh(a),s.memoizedState=th,n):rh(s,E));if(f=n.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return Kw(n,s,E,c,A,f,a);if(y){y=c.fallback,E=s.mode,f=n.child,A=f.sibling;var j={mode:"hidden",children:c.children};return(E&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=j,s.deletions=null):(c=Bi(f,j),c.subtreeFlags=f.subtreeFlags&14680064),A!==null?y=Bi(A,y):(y=Us(y,E,a,null),y.flags|=2),y.return=s,c.return=s,c.sibling=y,s.child=c,c=y,y=s.child,E=n.child.memoizedState,E=E===null?nh(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=n.childLanes&~a,s.memoizedState=th,c}return y=n.child,n=y.sibling,c=Bi(y,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function rh(n,s){return s=Lu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Iu(n,s,a,c){return c!==null&&kd(c),Ao(s,n.child,null,a),n=rh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Kw(n,s,a,c,f,y,E){if(a)return s.flags&256?(s.flags&=-257,c=Jd(Error(t(422))),Iu(n,s,E,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=c.fallback,f=s.mode,c=Lu({mode:"visible",children:c.children},f,0,null),y=Us(y,f,E,null),y.flags|=2,c.return=s,y.return=s,c.sibling=y,s.child=c,(s.mode&1)!==0&&Ao(s,n.child,null,E),s.child.memoizedState=nh(E),s.memoizedState=th,y);if((s.mode&1)===0)return Iu(n,s,E,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var A=c.dgst;return c=A,y=Error(t(419)),c=Jd(y,c,void 0),Iu(n,s,E,c)}if(A=(E&n.childLanes)!==0,Cn||A){if(c=Ht,c!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|E))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,ii(n,f),wr(c,n,f,-1))}return _h(),c=Jd(Error(t(421))),Iu(n,s,E,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=aE.bind(null,n),f._reactRetry=s,null):(n=y.treeContext,zn=bi(f.nextSibling),Un=s,_t=!0,gr=null,n!==null&&(Kn[Qn++]=ni,Kn[Qn++]=ri,Kn[Qn++]=bs,ni=n.id,ri=n.overflow,bs=s),s=rh(s,c.children),s.flags|=4096,s)}function Xm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Dd(n.return,s,a)}function ih(n,s,a,c,f){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=a,y.tailMode=f)}function Zm(n,s,a){var c=s.pendingProps,f=c.revealOrder,y=c.tail;if(gn(n,s,c.children,a),c=xt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xm(n,a,s);else if(n.tag===19)Xm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(ct(xt,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&yu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),ih(s,!1,f,a,y);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&yu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}ih(s,!0,a,null,y);break;case"together":ih(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Su(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function oi(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Os|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Bi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Bi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Qw(n,s,a){switch(s.tag){case 3:Qm(s),Po();break;case 5:fm(s);break;case 1:Sn(s.type)&&au(s);break;case 4:Ld(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;ct(fu,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(ct(xt,xt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Jm(n,s,a):(ct(xt,xt.current&1),n=oi(n,s,a),n!==null?n.sibling:null);ct(xt,xt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Zm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ct(xt,xt.current),c)break;return null;case 22:case 23:return s.lanes=0,qm(n,s,a)}return oi(n,s,a)}var eg,sh,tg,ng;eg=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},sh=function(){},tg=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Ds(jr.current);var y=null;switch(a){case"input":f=vn(n,f),c=vn(n,c),y=[];break;case"select":f=ge({},f,{value:void 0}),c=ge({},c,{value:void 0}),y=[];break;case"textarea":f=jn(n,f),c=jn(n,c),y=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=iu)}Q(a,c);var E;a=null;for(H in f)if(!c.hasOwnProperty(H)&&f.hasOwnProperty(H)&&f[H]!=null)if(H==="style"){var A=f[H];for(E in A)A.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?y||(y=[]):(y=y||[]).push(H,null));for(H in c){var j=c[H];if(A=f!=null?f[H]:void 0,c.hasOwnProperty(H)&&j!==A&&(j!=null||A!=null))if(H==="style")if(A){for(E in A)!A.hasOwnProperty(E)||j&&j.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in j)j.hasOwnProperty(E)&&A[E]!==j[E]&&(a||(a={}),a[E]=j[E])}else a||(y||(y=[]),y.push(H,a)),a=j;else H==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,A=A?A.__html:void 0,j!=null&&A!==j&&(y=y||[]).push(H,j)):H==="children"?typeof j!="string"&&typeof j!="number"||(y=y||[]).push(H,""+j):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(j!=null&&H==="onScroll"&&dt("scroll",n),y||A===j||(y=[])):(y=y||[]).push(H,j))}a&&(y=y||[]).push("style",a);var H=y;(s.updateQueue=H)&&(s.flags|=4)}},ng=function(n,s,a,c){a!==c&&(s.flags|=4)};function Fa(n,s){if(!_t)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function an(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Yw(n,s,a){var c=s.pendingProps;switch(Rd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(s),null;case 1:return Sn(s.type)&&ou(),an(s),null;case 3:return c=s.stateNode,No(),ht(In),ht(sn),Ud(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(du(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,gr!==null&&(gh(gr),gr=null))),sh(n,s),an(s),null;case 5:Md(s);var f=Ds(Da.current);if(a=s.type,n!==null&&s.stateNode!=null)tg(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return an(s),null}if(n=Ds(jr.current),du(s)){c=s.stateNode,a=s.type;var y=s.memoizedProps;switch(c[Nr]=s,c[Aa]=y,n=(s.mode&1)!==0,a){case"dialog":dt("cancel",c),dt("close",c);break;case"iframe":case"object":case"embed":dt("load",c);break;case"video":case"audio":for(f=0;f<Ca.length;f++)dt(Ca[f],c);break;case"source":dt("error",c);break;case"img":case"image":case"link":dt("error",c),dt("load",c);break;case"details":dt("toggle",c);break;case"input":ir(c,y),dt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!y.multiple},dt("invalid",c);break;case"textarea":rn(c,y),dt("invalid",c)}Q(a,y),f=null;for(var E in y)if(y.hasOwnProperty(E)){var A=y[E];E==="children"?typeof A=="string"?c.textContent!==A&&(y.suppressHydrationWarning!==!0&&ru(c.textContent,A,n),f=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(y.suppressHydrationWarning!==!0&&ru(c.textContent,A,n),f=["children",""+A]):o.hasOwnProperty(E)&&A!=null&&E==="onScroll"&&dt("scroll",c)}switch(a){case"input":Nn(c),sr(c,y,!0);break;case"textarea":Nn(c),Hr(c);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(c.onclick=iu)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=mt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=E.createElement(a,{is:c.is}):(n=E.createElement(a),a==="select"&&(E=n,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):n=E.createElementNS(n,a),n[Nr]=s,n[Aa]=c,eg(n,s,!1,!1),s.stateNode=n;e:{switch(E=xe(a,c),a){case"dialog":dt("cancel",n),dt("close",n),f=c;break;case"iframe":case"object":case"embed":dt("load",n),f=c;break;case"video":case"audio":for(f=0;f<Ca.length;f++)dt(Ca[f],n);f=c;break;case"source":dt("error",n),f=c;break;case"img":case"image":case"link":dt("error",n),dt("load",n),f=c;break;case"details":dt("toggle",n),f=c;break;case"input":ir(n,c),f=vn(n,c),dt("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=ge({},c,{value:void 0}),dt("invalid",n);break;case"textarea":rn(n,c),f=jn(n,c),dt("invalid",n);break;default:f=c}Q(a,f),A=f;for(y in A)if(A.hasOwnProperty(y)){var j=A[y];y==="style"?$(n,j):y==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Y(n,j)):y==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&z(n,j):typeof j=="number"&&z(n,""+j):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?j!=null&&y==="onScroll"&&dt("scroll",n):j!=null&&le(n,y,j,E))}switch(a){case"input":Nn(n),sr(n,c,!1);break;case"textarea":Nn(n),Hr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+$e(c.value));break;case"select":n.multiple=!!c.multiple,y=c.value,y!=null?wn(n,!!c.multiple,y,!1):c.defaultValue!=null&&wn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=iu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return an(s),null;case 6:if(n&&s.stateNode!=null)ng(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Ds(Da.current),Ds(jr.current),du(s)){if(c=s.stateNode,a=s.memoizedProps,c[Nr]=s,(y=c.nodeValue!==a)&&(n=Un,n!==null))switch(n.tag){case 3:ru(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ru(c.nodeValue,a,(n.mode&1)!==0)}y&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Nr]=s,s.stateNode=c}return an(s),null;case 13:if(ht(xt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_t&&zn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)sm(),Po(),s.flags|=98560,y=!1;else if(y=du(s),c!==null&&c.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Nr]=s}else Po(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;an(s),y=!1}else gr!==null&&(gh(gr),gr=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(xt.current&1)!==0?Ft===0&&(Ft=3):_h())),s.updateQueue!==null&&(s.flags|=4),an(s),null);case 4:return No(),sh(n,s),n===null&&Ra(s.stateNode.containerInfo),an(s),null;case 10:return jd(s.type._context),an(s),null;case 17:return Sn(s.type)&&ou(),an(s),null;case 19:if(ht(xt),y=s.memoizedState,y===null)return an(s),null;if(c=(s.flags&128)!==0,E=y.rendering,E===null)if(c)Fa(y,!1);else{if(Ft!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(E=yu(n),E!==null){for(s.flags|=128,Fa(y,!1),c=E.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)y=a,n=c,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,n=E.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return ct(xt,xt.current&1|2),s.child}n=n.sibling}y.tail!==null&&ut()>Oo&&(s.flags|=128,c=!0,Fa(y,!1),s.lanes=4194304)}else{if(!c)if(n=yu(E),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Fa(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!_t)return an(s),null}else 2*ut()-y.renderingStartTime>Oo&&a!==1073741824&&(s.flags|=128,c=!0,Fa(y,!1),s.lanes=4194304);y.isBackwards?(E.sibling=s.child,s.child=E):(a=y.last,a!==null?a.sibling=E:s.child=E,y.last=E)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=ut(),s.sibling=null,a=xt.current,ct(xt,c?a&1|2:a&1),s):(an(s),null);case 22:case 23:return vh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Bn&1073741824)!==0&&(an(s),s.subtreeFlags&6&&(s.flags|=8192)):an(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Jw(n,s){switch(Rd(s),s.tag){case 1:return Sn(s.type)&&ou(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return No(),ht(In),ht(sn),Ud(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Md(s),null;case 13:if(ht(xt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Po()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ht(xt),null;case 4:return No(),null;case 10:return jd(s.type._context),null;case 22:case 23:return vh(),null;case 24:return null;default:return null}}var Cu=!1,ln=!1,Xw=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Do(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Ct(n,s,c)}else a.current=null}function oh(n,s,a){try{a()}catch(c){Ct(n,s,c)}}var rg=!1;function Zw(n,s){if(vd=Pi,n=Vp(),cd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var E=0,A=-1,j=-1,H=0,re=0,ie=n,ne=null;t:for(;;){for(var ye;ie!==a||f!==0&&ie.nodeType!==3||(A=E+f),ie!==y||c!==0&&ie.nodeType!==3||(j=E+c),ie.nodeType===3&&(E+=ie.nodeValue.length),(ye=ie.firstChild)!==null;)ne=ie,ie=ye;for(;;){if(ie===n)break t;if(ne===a&&++H===f&&(A=E),ne===y&&++re===c&&(j=E),(ye=ie.nextSibling)!==null)break;ie=ne,ne=ie.parentNode}ie=ye}a=A===-1||j===-1?null:{start:A,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(_d={focusedElem:n,selectionRange:a},Pi=!1,_e=s;_e!==null;)if(s=_e,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,_e=n;else for(;_e!==null;){s=_e;try{var we=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Te=we.memoizedProps,Rt=we.memoizedState,F=s.stateNode,V=F.getSnapshotBeforeUpdate(s.elementType===s.type?Te:yr(s.type,Te),Rt);F.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){Ct(s,s.return,ae)}if(n=s.sibling,n!==null){n.return=s.return,_e=n;break}_e=s.return}return we=rg,rg=!1,we}function Ua(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var y=f.destroy;f.destroy=void 0,y!==void 0&&oh(s,a,y)}f=f.next}while(f!==c)}}function Ru(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function ah(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ig(n){var s=n.alternate;s!==null&&(n.alternate=null,ig(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Nr],delete s[Aa],delete s[Td],delete s[Vw],delete s[Ow])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function sg(n){return n.tag===5||n.tag===3||n.tag===4}function og(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function lh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=iu));else if(c!==4&&(n=n.child,n!==null))for(lh(n,s,a),n=n.sibling;n!==null;)lh(n,s,a),n=n.sibling}function uh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(uh(n,s,a),n=n.sibling;n!==null;)uh(n,s,a),n=n.sibling}var Jt=null,vr=!1;function Li(n,s,a){for(a=a.child;a!==null;)ag(n,s,a),a=a.sibling}function ag(n,s,a){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(xs,a)}catch{}switch(a.tag){case 5:ln||Do(a,s);case 6:var c=Jt,f=vr;Jt=null,Li(n,s,a),Jt=c,vr=f,Jt!==null&&(vr?(n=Jt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Jt.removeChild(a.stateNode));break;case 18:Jt!==null&&(vr?(n=Jt,a=a.stateNode,n.nodeType===8?xd(n.parentNode,a):n.nodeType===1&&xd(n,a),fr(n)):xd(Jt,a.stateNode));break;case 4:c=Jt,f=vr,Jt=a.stateNode.containerInfo,vr=!0,Li(n,s,a),Jt=c,vr=f;break;case 0:case 11:case 14:case 15:if(!ln&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var y=f,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&oh(a,s,E),f=f.next}while(f!==c)}Li(n,s,a);break;case 1:if(!ln&&(Do(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){Ct(a,s,A)}Li(n,s,a);break;case 21:Li(n,s,a);break;case 22:a.mode&1?(ln=(c=ln)||a.memoizedState!==null,Li(n,s,a),ln=c):Li(n,s,a);break;default:Li(n,s,a)}}function lg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Xw),s.forEach(function(c){var f=lE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function _r(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var y=n,E=s,A=E;e:for(;A!==null;){switch(A.tag){case 5:Jt=A.stateNode,vr=!1;break e;case 3:Jt=A.stateNode.containerInfo,vr=!0;break e;case 4:Jt=A.stateNode.containerInfo,vr=!0;break e}A=A.return}if(Jt===null)throw Error(t(160));ag(y,E,f),Jt=null,vr=!1;var j=f.alternate;j!==null&&(j.return=null),f.return=null}catch(H){Ct(f,s,H)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ug(s,n),s=s.sibling}function ug(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(_r(s,n),Vr(n),c&4){try{Ua(3,n,n.return),Ru(3,n)}catch(Te){Ct(n,n.return,Te)}try{Ua(5,n,n.return)}catch(Te){Ct(n,n.return,Te)}}break;case 1:_r(s,n),Vr(n),c&512&&a!==null&&Do(a,a.return);break;case 5:if(_r(s,n),Vr(n),c&512&&a!==null&&Do(a,a.return),n.flags&32){var f=n.stateNode;try{z(f,"")}catch(Te){Ct(n,n.return,Te)}}if(c&4&&(f=n.stateNode,f!=null)){var y=n.memoizedProps,E=a!==null?a.memoizedProps:y,A=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{A==="input"&&y.type==="radio"&&y.name!=null&&fn(f,y),xe(A,E);var H=xe(A,y);for(E=0;E<j.length;E+=2){var re=j[E],ie=j[E+1];re==="style"?$(f,ie):re==="dangerouslySetInnerHTML"?Y(f,ie):re==="children"?z(f,ie):le(f,re,ie,H)}switch(A){case"input":Ge(f,y);break;case"textarea":Kt(f,y);break;case"select":var ne=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var ye=y.value;ye!=null?wn(f,!!y.multiple,ye,!1):ne!==!!y.multiple&&(y.defaultValue!=null?wn(f,!!y.multiple,y.defaultValue,!0):wn(f,!!y.multiple,y.multiple?[]:"",!1))}f[Aa]=y}catch(Te){Ct(n,n.return,Te)}}break;case 6:if(_r(s,n),Vr(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,y=n.memoizedProps;try{f.nodeValue=y}catch(Te){Ct(n,n.return,Te)}}break;case 3:if(_r(s,n),Vr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{fr(s.containerInfo)}catch(Te){Ct(n,n.return,Te)}break;case 4:_r(s,n),Vr(n);break;case 13:_r(s,n),Vr(n),f=n.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(hh=ut())),c&4&&lg(n);break;case 22:if(re=a!==null&&a.memoizedState!==null,n.mode&1?(ln=(H=ln)||re,_r(s,n),ln=H):_r(s,n),Vr(n),c&8192){if(H=n.memoizedState!==null,(n.stateNode.isHidden=H)&&!re&&(n.mode&1)!==0)for(_e=n,re=n.child;re!==null;){for(ie=_e=re;_e!==null;){switch(ne=_e,ye=ne.child,ne.tag){case 0:case 11:case 14:case 15:Ua(4,ne,ne.return);break;case 1:Do(ne,ne.return);var we=ne.stateNode;if(typeof we.componentWillUnmount=="function"){c=ne,a=ne.return;try{s=c,we.props=s.memoizedProps,we.state=s.memoizedState,we.componentWillUnmount()}catch(Te){Ct(c,a,Te)}}break;case 5:Do(ne,ne.return);break;case 22:if(ne.memoizedState!==null){hg(ie);continue}}ye!==null?(ye.return=ne,_e=ye):hg(ie)}re=re.sibling}e:for(re=null,ie=n;;){if(ie.tag===5){if(re===null){re=ie;try{f=ie.stateNode,H?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(A=ie.stateNode,j=ie.memoizedProps.style,E=j!=null&&j.hasOwnProperty("display")?j.display:null,A.style.display=at("display",E))}catch(Te){Ct(n,n.return,Te)}}}else if(ie.tag===6){if(re===null)try{ie.stateNode.nodeValue=H?"":ie.memoizedProps}catch(Te){Ct(n,n.return,Te)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===n)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===n)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===n)break e;re===ie&&(re=null),ie=ie.return}re===ie&&(re=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:_r(s,n),Vr(n),c&4&&lg(n);break;case 21:break;default:_r(s,n),Vr(n)}}function Vr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(sg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(z(f,""),c.flags&=-33);var y=og(n);uh(n,y,f);break;case 3:case 4:var E=c.stateNode.containerInfo,A=og(n);lh(n,A,E);break;default:throw Error(t(161))}}catch(j){Ct(n,n.return,j)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function eE(n,s,a){_e=n,cg(n)}function cg(n,s,a){for(var c=(n.mode&1)!==0;_e!==null;){var f=_e,y=f.child;if(f.tag===22&&c){var E=f.memoizedState!==null||Cu;if(!E){var A=f.alternate,j=A!==null&&A.memoizedState!==null||ln;A=Cu;var H=ln;if(Cu=E,(ln=j)&&!H)for(_e=f;_e!==null;)E=_e,j=E.child,E.tag===22&&E.memoizedState!==null?fg(f):j!==null?(j.return=E,_e=j):fg(f);for(;y!==null;)_e=y,cg(y),y=y.sibling;_e=f,Cu=A,ln=H}dg(n)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,_e=y):dg(n)}}function dg(n){for(;_e!==null;){var s=_e;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:ln||Ru(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!ln)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:yr(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&hm(s,y,c);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}hm(s,E,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var H=s.alternate;if(H!==null){var re=H.memoizedState;if(re!==null){var ie=re.dehydrated;ie!==null&&fr(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ln||s.flags&512&&ah(s)}catch(ne){Ct(s,s.return,ne)}}if(s===n){_e=null;break}if(a=s.sibling,a!==null){a.return=s.return,_e=a;break}_e=s.return}}function hg(n){for(;_e!==null;){var s=_e;if(s===n){_e=null;break}var a=s.sibling;if(a!==null){a.return=s.return,_e=a;break}_e=s.return}}function fg(n){for(;_e!==null;){var s=_e;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Ru(4,s)}catch(j){Ct(s,a,j)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(j){Ct(s,f,j)}}var y=s.return;try{ah(s)}catch(j){Ct(s,y,j)}break;case 5:var E=s.return;try{ah(s)}catch(j){Ct(s,E,j)}}}catch(j){Ct(s,s.return,j)}if(s===n){_e=null;break}var A=s.sibling;if(A!==null){A.return=s.return,_e=A;break}_e=s.return}}var tE=Math.ceil,Pu=de.ReactCurrentDispatcher,ch=de.ReactCurrentOwner,Xn=de.ReactCurrentBatchConfig,et=0,Ht=null,bt=null,Xt=0,Bn=0,Vo=Ni(0),Ft=0,za=null,Os=0,Au=0,dh=0,Ba=null,Rn=null,hh=0,Oo=1/0,ai=null,ku=!1,fh=null,Mi=null,bu=!1,Fi=null,Nu=0,$a=0,ph=null,ju=-1,Du=0;function yn(){return(et&6)!==0?ut():ju!==-1?ju:ju=ut()}function Ui(n){return(n.mode&1)===0?1:(et&2)!==0&&Xt!==0?Xt&-Xt:Mw.transition!==null?(Du===0&&(Du=Is()),Du):(n=Je,n!==0||(n=window.event,n=n===void 0?16:ya(n.type)),n)}function wr(n,s,a,c){if(50<$a)throw $a=0,ph=null,Error(t(185));Ii(n,a,c),((et&2)===0||n!==Ht)&&(n===Ht&&((et&2)===0&&(Au|=a),Ft===4&&zi(n,Xt)),Pn(n,c),a===1&&et===0&&(s.mode&1)===0&&(Oo=ut()+500,lu&&Di()))}function Pn(n,s){var a=n.callbackNode;Qr(n,s);var c=Ts(n,n===Ht?Xt:0);if(c===0)a!==null&&ha(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&ha(a),s===1)n.tag===0?Lw(mg.bind(null,n)):em(mg.bind(null,n)),jw(function(){(et&6)===0&&Di()}),a=null;else{switch(Ci(c)){case 1:a=Es;break;case 4:a=Ei;break;case 16:a=Hn;break;case 536870912:a=Dl;break;default:a=Hn}a=Tg(a,pg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function pg(n,s){if(ju=-1,Du=0,(et&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Lo()&&n.callbackNode!==a)return null;var c=Ts(n,n===Ht?Xt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Vu(n,c);else{s=c;var f=et;et|=2;var y=yg();(Ht!==n||Xt!==s)&&(ai=null,Oo=ut()+500,Ms(n,s));do try{iE();break}catch(A){gg(n,A)}while(!0);Nd(),Pu.current=y,et=f,bt!==null?s=0:(Ht=null,Xt=0,s=Ft)}if(s!==0){if(s===2&&(f=Ln(n),f!==0&&(c=f,s=mh(n,f))),s===1)throw a=za,Ms(n,0),zi(n,c),Pn(n,ut()),a;if(s===6)zi(n,c);else{if(f=n.current.alternate,(c&30)===0&&!nE(f)&&(s=Vu(n,c),s===2&&(y=Ln(n),y!==0&&(c=y,s=mh(n,y))),s===1))throw a=za,Ms(n,0),zi(n,c),Pn(n,ut()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Fs(n,Rn,ai);break;case 3:if(zi(n,c),(c&130023424)===c&&(s=hh+500-ut(),10<s)){if(Ts(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){yn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Ed(Fs.bind(null,n,Rn,ai),s);break}Fs(n,Rn,ai);break;case 4:if(zi(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var E=31-pn(c);y=1<<E,E=s[E],E>f&&(f=E),c&=~y}if(c=f,c=ut()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*tE(c/1960))-c,10<c){n.timeoutHandle=Ed(Fs.bind(null,n,Rn,ai),c);break}Fs(n,Rn,ai);break;case 5:Fs(n,Rn,ai);break;default:throw Error(t(329))}}}return Pn(n,ut()),n.callbackNode===a?pg.bind(null,n):null}function mh(n,s){var a=Ba;return n.current.memoizedState.isDehydrated&&(Ms(n,s).flags|=256),n=Vu(n,s),n!==2&&(s=Rn,Rn=a,s!==null&&gh(s)),n}function gh(n){Rn===null?Rn=n:Rn.push.apply(Rn,n)}function nE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],y=f.getSnapshot;f=f.value;try{if(!mr(y(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zi(n,s){for(s&=~dh,s&=~Au,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-pn(s),c=1<<a;n[a]=-1,s&=~c}}function mg(n){if((et&6)!==0)throw Error(t(327));Lo();var s=Ts(n,0);if((s&1)===0)return Pn(n,ut()),null;var a=Vu(n,s);if(n.tag!==0&&a===2){var c=Ln(n);c!==0&&(s=c,a=mh(n,c))}if(a===1)throw a=za,Ms(n,0),zi(n,s),Pn(n,ut()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Fs(n,Rn,ai),Pn(n,ut()),null}function yh(n,s){var a=et;et|=1;try{return n(s)}finally{et=a,et===0&&(Oo=ut()+500,lu&&Di())}}function Ls(n){Fi!==null&&Fi.tag===0&&(et&6)===0&&Lo();var s=et;et|=1;var a=Xn.transition,c=Je;try{if(Xn.transition=null,Je=1,n)return n()}finally{Je=c,Xn.transition=a,et=s,(et&6)===0&&Di()}}function vh(){Bn=Vo.current,ht(Vo)}function Ms(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Nw(a)),bt!==null)for(a=bt.return;a!==null;){var c=a;switch(Rd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ou();break;case 3:No(),ht(In),ht(sn),Ud();break;case 5:Md(c);break;case 4:No();break;case 13:ht(xt);break;case 19:ht(xt);break;case 10:jd(c.type._context);break;case 22:case 23:vh()}a=a.return}if(Ht=n,bt=n=Bi(n.current,null),Xt=Bn=s,Ft=0,za=null,dh=Au=Os=0,Rn=Ba=null,js!==null){for(s=0;s<js.length;s++)if(a=js[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,y=a.pending;if(y!==null){var E=y.next;y.next=f,c.next=E}a.pending=c}js=null}return n}function gg(n,s){do{var a=bt;try{if(Nd(),vu.current=xu,_u){for(var c=Tt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}_u=!1}if(Vs=0,Wt=Mt=Tt=null,Va=!1,Oa=0,ch.current=null,a===null||a.return===null){Ft=1,za=s,bt=null;break}e:{var y=n,E=a.return,A=a,j=s;if(s=Xt,A.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var H=j,re=A,ie=re.tag;if((re.mode&1)===0&&(ie===0||ie===11||ie===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var ye=zm(E);if(ye!==null){ye.flags&=-257,Bm(ye,E,A,y,s),ye.mode&1&&Um(y,H,s),s=ye,j=H;var we=s.updateQueue;if(we===null){var Te=new Set;Te.add(j),s.updateQueue=Te}else we.add(j);break e}else{if((s&1)===0){Um(y,H,s),_h();break e}j=Error(t(426))}}else if(_t&&A.mode&1){var Rt=zm(E);if(Rt!==null){(Rt.flags&65536)===0&&(Rt.flags|=256),Bm(Rt,E,A,y,s),kd(jo(j,A));break e}}y=j=jo(j,A),Ft!==4&&(Ft=2),Ba===null?Ba=[y]:Ba.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var F=Mm(y,j,s);dm(y,F);break e;case 1:A=j;var V=y.type,B=y.stateNode;if((y.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Mi===null||!Mi.has(B)))){y.flags|=65536,s&=-s,y.lanes|=s;var ae=Fm(y,A,s);dm(y,ae);break e}}y=y.return}while(y!==null)}_g(a)}catch(Ce){s=Ce,bt===a&&a!==null&&(bt=a=a.return);continue}break}while(!0)}function yg(){var n=Pu.current;return Pu.current=xu,n===null?xu:n}function _h(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Ht===null||(Os&268435455)===0&&(Au&268435455)===0||zi(Ht,Xt)}function Vu(n,s){var a=et;et|=2;var c=yg();(Ht!==n||Xt!==s)&&(ai=null,Ms(n,s));do try{rE();break}catch(f){gg(n,f)}while(!0);if(Nd(),et=a,Pu.current=c,bt!==null)throw Error(t(261));return Ht=null,Xt=0,Ft}function rE(){for(;bt!==null;)vg(bt)}function iE(){for(;bt!==null&&!Nl();)vg(bt)}function vg(n){var s=xg(n.alternate,n,Bn);n.memoizedProps=n.pendingProps,s===null?_g(n):bt=s,ch.current=null}function _g(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Yw(a,s,Bn),a!==null){bt=a;return}}else{if(a=Jw(a,s),a!==null){a.flags&=32767,bt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ft=6,bt=null;return}}if(s=s.sibling,s!==null){bt=s;return}bt=s=n}while(s!==null);Ft===0&&(Ft=5)}function Fs(n,s,a){var c=Je,f=Xn.transition;try{Xn.transition=null,Je=1,sE(n,s,a,c)}finally{Xn.transition=f,Je=c}return null}function sE(n,s,a,c){do Lo();while(Fi!==null);if((et&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=a.lanes|a.childLanes;if(lt(n,y),n===Ht&&(bt=Ht=null,Xt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||bu||(bu=!0,Tg(Hn,function(){return Lo(),null})),y=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||y){y=Xn.transition,Xn.transition=null;var E=Je;Je=1;var A=et;et|=4,ch.current=null,Zw(n,a),ug(a,n),Sw(_d),Pi=!!vd,_d=vd=null,n.current=a,eE(a),nd(),et=A,Je=E,Xn.transition=y}else n.current=a;if(bu&&(bu=!1,Fi=n,Nu=f),y=n.pendingLanes,y===0&&(Mi=null),Vl(a.stateNode),Pn(n,ut()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(ku)throw ku=!1,n=fh,fh=null,n;return(Nu&1)!==0&&n.tag!==0&&Lo(),y=n.pendingLanes,(y&1)!==0?n===ph?$a++:($a=0,ph=n):$a=0,Di(),null}function Lo(){if(Fi!==null){var n=Ci(Nu),s=Xn.transition,a=Je;try{if(Xn.transition=null,Je=16>n?16:n,Fi===null)var c=!1;else{if(n=Fi,Fi=null,Nu=0,(et&6)!==0)throw Error(t(331));var f=et;for(et|=4,_e=n.current;_e!==null;){var y=_e,E=y.child;if((_e.flags&16)!==0){var A=y.deletions;if(A!==null){for(var j=0;j<A.length;j++){var H=A[j];for(_e=H;_e!==null;){var re=_e;switch(re.tag){case 0:case 11:case 15:Ua(8,re,y)}var ie=re.child;if(ie!==null)ie.return=re,_e=ie;else for(;_e!==null;){re=_e;var ne=re.sibling,ye=re.return;if(ig(re),re===H){_e=null;break}if(ne!==null){ne.return=ye,_e=ne;break}_e=ye}}}var we=y.alternate;if(we!==null){var Te=we.child;if(Te!==null){we.child=null;do{var Rt=Te.sibling;Te.sibling=null,Te=Rt}while(Te!==null)}}_e=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,_e=E;else e:for(;_e!==null;){if(y=_e,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ua(9,y,y.return)}var F=y.sibling;if(F!==null){F.return=y.return,_e=F;break e}_e=y.return}}var V=n.current;for(_e=V;_e!==null;){E=_e;var B=E.child;if((E.subtreeFlags&2064)!==0&&B!==null)B.return=E,_e=B;else e:for(E=V;_e!==null;){if(A=_e,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Ru(9,A)}}catch(Ce){Ct(A,A.return,Ce)}if(A===E){_e=null;break e}var ae=A.sibling;if(ae!==null){ae.return=A.return,_e=ae;break e}_e=A.return}}if(et=f,Di(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(xs,n)}catch{}c=!0}return c}finally{Je=a,Xn.transition=s}}return!1}function wg(n,s,a){s=jo(a,s),s=Mm(n,s,1),n=Oi(n,s,1),s=yn(),n!==null&&(Ii(n,1,s),Pn(n,s))}function Ct(n,s,a){if(n.tag===3)wg(n,n,a);else for(;s!==null;){if(s.tag===3){wg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Mi===null||!Mi.has(c))){n=jo(a,n),n=Fm(s,n,1),s=Oi(s,n,1),n=yn(),s!==null&&(Ii(s,1,n),Pn(s,n));break}}s=s.return}}function oE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=yn(),n.pingedLanes|=n.suspendedLanes&a,Ht===n&&(Xt&a)===a&&(Ft===4||Ft===3&&(Xt&130023424)===Xt&&500>ut()-hh?Ms(n,0):dh|=a),Pn(n,s)}function Eg(n,s){s===0&&((n.mode&1)===0?s=1:(s=so,so<<=1,(so&130023424)===0&&(so=4194304)));var a=yn();n=ii(n,s),n!==null&&(Ii(n,s,a),Pn(n,a))}function aE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Eg(n,a)}function lE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Eg(n,a)}var xg;xg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||In.current)Cn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Cn=!1,Qw(n,s,a);Cn=(n.flags&131072)!==0}else Cn=!1,_t&&(s.flags&1048576)!==0&&tm(s,cu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Su(n,s),n=s.pendingProps;var f=So(s,sn.current);bo(s,a),f=$d(null,s,c,n,f,a);var y=Wd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Sn(c)?(y=!0,au(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Od(s),f.updater=Tu,s.stateNode=f,f._reactInternals=s,Yd(s,c,n,a),s=eh(null,s,c,!0,y,a)):(s.tag=0,_t&&y&&Cd(s),gn(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Su(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=cE(c),n=yr(c,n),f){case 0:s=Zd(null,s,c,n,a);break e;case 1:s=Km(null,s,c,n,a);break e;case 11:s=$m(null,s,c,n,a);break e;case 14:s=Wm(null,s,c,yr(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:yr(c,f),Zd(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:yr(c,f),Km(n,s,c,f,a);case 3:e:{if(Qm(s),n===null)throw Error(t(387));c=s.pendingProps,y=s.memoizedState,f=y.element,cm(n,s),gu(s,c,null,a);var E=s.memoizedState;if(c=E.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=jo(Error(t(423)),s),s=Ym(n,s,c,a,f);break e}else if(c!==f){f=jo(Error(t(424)),s),s=Ym(n,s,c,a,f);break e}else for(zn=bi(s.stateNode.containerInfo.firstChild),Un=s,_t=!0,gr=null,a=lm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Po(),c===f){s=oi(n,s,a);break e}gn(n,s,c,a)}s=s.child}return s;case 5:return fm(s),n===null&&Ad(s),c=s.type,f=s.pendingProps,y=n!==null?n.memoizedProps:null,E=f.children,wd(c,f)?E=null:y!==null&&wd(c,y)&&(s.flags|=32),Gm(n,s),gn(n,s,E,a),s.child;case 6:return n===null&&Ad(s),null;case 13:return Jm(n,s,a);case 4:return Ld(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Ao(s,null,c,a):gn(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:yr(c,f),$m(n,s,c,f,a);case 7:return gn(n,s,s.pendingProps,a),s.child;case 8:return gn(n,s,s.pendingProps.children,a),s.child;case 12:return gn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,y=s.memoizedProps,E=f.value,ct(fu,c._currentValue),c._currentValue=E,y!==null)if(mr(y.value,E)){if(y.children===f.children&&!In.current){s=oi(n,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var A=y.dependencies;if(A!==null){E=y.child;for(var j=A.firstContext;j!==null;){if(j.context===c){if(y.tag===1){j=si(-1,a&-a),j.tag=2;var H=y.updateQueue;if(H!==null){H=H.shared;var re=H.pending;re===null?j.next=j:(j.next=re.next,re.next=j),H.pending=j}}y.lanes|=a,j=y.alternate,j!==null&&(j.lanes|=a),Dd(y.return,a,s),A.lanes|=a;break}j=j.next}}else if(y.tag===10)E=y.type===s.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=a,A=E.alternate,A!==null&&(A.lanes|=a),Dd(E,a,s),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===s){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}gn(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,bo(s,a),f=Yn(f),c=c(f),s.flags|=1,gn(n,s,c,a),s.child;case 14:return c=s.type,f=yr(c,s.pendingProps),f=yr(c.type,f),Wm(n,s,c,f,a);case 15:return Hm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:yr(c,f),Su(n,s),s.tag=1,Sn(c)?(n=!0,au(s)):n=!1,bo(s,a),Om(s,c,f),Yd(s,c,f,a),eh(null,s,c,!0,n,a);case 19:return Zm(n,s,a);case 22:return qm(n,s,a)}throw Error(t(156,s.tag))};function Tg(n,s){return ro(n,s)}function uE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(n,s,a,c){return new uE(n,s,a,c)}function wh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cE(n){if(typeof n=="function")return wh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===b)return 11;if(n===be)return 14}return 2}function Bi(n,s){var a=n.alternate;return a===null?(a=Zn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Ou(n,s,a,c,f,y){var E=2;if(c=n,typeof n=="function")wh(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case N:return Us(a.children,f,y,s);case S:E=8,f|=8;break;case P:return n=Zn(12,a,s,f|2),n.elementType=P,n.lanes=y,n;case x:return n=Zn(13,a,s,f),n.elementType=x,n.lanes=y,n;case se:return n=Zn(19,a,s,f),n.elementType=se,n.lanes=y,n;case Ve:return Lu(a,f,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:E=10;break e;case D:E=9;break e;case b:E=11;break e;case be:E=14;break e;case Be:E=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Zn(E,a,s,f),s.elementType=n,s.type=c,s.lanes=y,s}function Us(n,s,a,c){return n=Zn(7,n,c,s),n.lanes=a,n}function Lu(n,s,a,c){return n=Zn(22,n,c,s),n.elementType=Ve,n.lanes=a,n.stateNode={isHidden:!1},n}function Eh(n,s,a){return n=Zn(6,n,null,s),n.lanes=a,n}function xh(n,s,a){return s=Zn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function dE(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ti(0),this.expirationTimes=Ti(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Th(n,s,a,c,f,y,E,A,j){return n=new dE(n,s,a,A,j),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Zn(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Od(y),n}function hE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Ig(n){if(!n)return ji;n=n._reactInternals;e:{if(lr(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Sn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Sn(a))return Xp(n,a,s)}return s}function Sg(n,s,a,c,f,y,E,A,j){return n=Th(a,c,!0,n,f,y,E,A,j),n.context=Ig(null),a=n.current,c=yn(),f=Ui(a),y=si(c,f),y.callback=s??null,Oi(a,y,f),n.current.lanes=f,Ii(n,f,c),Pn(n,c),n}function Mu(n,s,a,c){var f=s.current,y=yn(),E=Ui(f);return a=Ig(a),s.context===null?s.context=a:s.pendingContext=a,s=si(y,E),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Oi(f,s,E),n!==null&&(wr(n,f,E,y),mu(n,f,E)),E}function Fu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Ih(n,s){Cg(n,s),(n=n.alternate)&&Cg(n,s)}function fE(){return null}var Rg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Sh(n){this._internalRoot=n}Uu.prototype.render=Sh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Mu(n,s,null,null)},Uu.prototype.unmount=Sh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ls(function(){Mu(null,n,null,null)}),s[ei]=null}};function Uu(n){this._internalRoot=n}Uu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ul();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Pr.length&&s!==0&&s<Pr[a].priority;a++);Pr.splice(a,0,n),a===0&&$l(n)}};function Ch(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Pg(){}function pE(n,s,a,c,f){if(f){if(typeof c=="function"){var y=c;c=function(){var H=Fu(E);y.call(H)}}var E=Sg(s,c,n,0,null,!1,!1,"",Pg);return n._reactRootContainer=E,n[ei]=E.current,Ra(n.nodeType===8?n.parentNode:n),Ls(),E}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var A=c;c=function(){var H=Fu(j);A.call(H)}}var j=Th(n,0,!1,null,null,!1,!1,"",Pg);return n._reactRootContainer=j,n[ei]=j.current,Ra(n.nodeType===8?n.parentNode:n),Ls(function(){Mu(s,j,a,c)}),j}function Bu(n,s,a,c,f){var y=a._reactRootContainer;if(y){var E=y;if(typeof f=="function"){var A=f;f=function(){var j=Fu(E);A.call(j)}}Mu(s,E,n,f)}else E=pE(a,s,n,f,c);return Fu(E)}Ml=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=xi(s.pendingLanes);a!==0&&(Si(s,a|1),Pn(s,ut()),(et&6)===0&&(Oo=ut()+500,Di()))}break;case 13:Ls(function(){var c=ii(n,1);if(c!==null){var f=yn();wr(c,n,1,f)}}),Ih(n,1)}},oo=function(n){if(n.tag===13){var s=ii(n,134217728);if(s!==null){var a=yn();wr(s,n,134217728,a)}Ih(n,134217728)}},Fl=function(n){if(n.tag===13){var s=Ui(n),a=ii(n,s);if(a!==null){var c=yn();wr(a,n,s,c)}Ih(n,s)}},Ul=function(){return Je},zl=function(n,s){var a=Je;try{return Je=n,s()}finally{Je=a}},tt=function(n,s,a){switch(s){case"input":if(Ge(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=su(c);if(!f)throw Error(t(90));St(c),Ge(c,f)}}}break;case"textarea":Kt(n,a);break;case"select":s=a.value,s!=null&&wn(n,!!a.multiple,s,!1)}},qr=yh,vs=Ls;var mE={usingClientEntryPoint:!1,Events:[ka,To,su,Bt,Sr,yh]},Wa={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gE={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=da(n),n===null?null:n.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||fE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{xs=$u.inject(gE),On=$u}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mE,An.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ch(s))throw Error(t(200));return hE(n,s,null,a)},An.createRoot=function(n,s){if(!Ch(n))throw Error(t(299));var a=!1,c="",f=Rg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Th(n,1,!1,null,null,a,!1,c,f),n[ei]=s.current,Ra(n.nodeType===8?n.parentNode:n),new Sh(s)},An.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=da(s),n=n===null?null:n.stateNode,n},An.flushSync=function(n){return Ls(n)},An.hydrate=function(n,s,a){if(!zu(s))throw Error(t(200));return Bu(null,n,s,!0,a)},An.hydrateRoot=function(n,s,a){if(!Ch(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,y="",E=Rg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=Sg(s,null,n,1,a??null,f,!1,y,E),n[ei]=s.current,Ra(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Uu(s)},An.render=function(n,s,a){if(!zu(s))throw Error(t(200));return Bu(null,n,s,!1,a)},An.unmountComponentAtNode=function(n){if(!zu(n))throw Error(t(40));return n._reactRootContainer?(Ls(function(){Bu(null,null,n,!1,function(){n._reactRootContainer=null,n[ei]=null})}),!0):!1},An.unstable_batchedUpdates=yh,An.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!zu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Bu(n,s,a,!1,c)},An.version="18.3.1-next-f1338f8080-20240426",An}var Og;function Rv(){if(Og)return Ah.exports;Og=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ah.exports=SE(),Ah.exports}var Lg;function CE(){if(Lg)return Wu;Lg=1;var r=Rv();return Wu.createRoot=r.createRoot,Wu.hydrateRoot=r.hydrateRoot,Wu}var RE=CE();const PE=Sv(RE);Rv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},al.apply(this,arguments)}var Ki;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ki||(Ki={}));const Mg="popstate";function AE(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:d,hash:p}=i.location;return qh("",{pathname:l,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:dc(o)}return bE(e,t,null,r)}function At(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function If(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kE(){return Math.random().toString(36).substr(2,8)}function Fg(r,e){return{usr:r.state,key:r.key,idx:e}}function qh(r,e,t,i){return t===void 0&&(t=null),al({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ta(e):e,{state:t,key:e&&e.key||i||kE()})}function dc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ta(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function bE(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,p=Ki.Pop,g=null,v=w();v==null&&(v=0,d.replaceState(al({},d.state,{idx:v}),""));function w(){return(d.state||{idx:null}).idx}function I(){p=Ki.Pop;let O=w(),ce=O==null?null:O-v;v=O,g&&g({action:p,location:K.location,delta:ce})}function C(O,ce){p=Ki.Push;let pe=qh(K.location,O,ce);v=w()+1;let le=Fg(pe,v),de=K.createHref(pe);try{d.pushState(le,"",de)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;o.location.assign(de)}l&&g&&g({action:p,location:K.location,delta:1})}function U(O,ce){p=Ki.Replace;let pe=qh(K.location,O,ce);v=w();let le=Fg(pe,v),de=K.createHref(pe);d.replaceState(le,"",de),l&&g&&g({action:p,location:K.location,delta:0})}function q(O){let ce=o.location.origin!=="null"?o.location.origin:o.location.href,pe=typeof O=="string"?O:dc(O);return pe=pe.replace(/ $/,"%20"),At(ce,"No window.location.(origin|href) available to create URL for href: "+pe),new URL(pe,ce)}let K={get action(){return p},get location(){return r(o,d)},listen(O){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Mg,I),g=O,()=>{o.removeEventListener(Mg,I),g=null}},createHref(O){return e(o,O)},createURL:q,encodeLocation(O){let ce=q(O);return{pathname:ce.pathname,search:ce.search,hash:ce.hash}},push:C,replace:U,go(O){return d.go(O)}};return K}var Ug;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ug||(Ug={}));function NE(r,e,t){return t===void 0&&(t="/"),jE(r,e,t)}function jE(r,e,t,i){let o=typeof e=="string"?ta(e):e,l=Sf(o.pathname||"/",t);if(l==null)return null;let d=Pv(r);DE(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let v=qE(l);p=$E(d[g],v)}return p}function Pv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,d,p)=>{let g={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};g.relativePath.startsWith("/")&&(At(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let v=Ji([i,g.relativePath]),w=t.concat(g);l.children&&l.children.length>0&&(At(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Pv(l.children,e,w,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:zE(v,l.index),routesMeta:w})};return r.forEach((l,d)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,d);else for(let g of Av(l.path))o(l,d,g)}),e}function Av(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=Av(i.join("/")),p=[];return p.push(...d.map(g=>g===""?l:[l,g].join("/"))),o&&p.push(...d),p.map(g=>r.startsWith("/")&&g===""?"/":g)}function DE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:BE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const VE=/^:[\w-]+$/,OE=3,LE=2,ME=1,FE=10,UE=-2,zg=r=>r==="*";function zE(r,e){let t=r.split("/"),i=t.length;return t.some(zg)&&(i+=UE),e&&(i+=LE),t.filter(o=>!zg(o)).reduce((o,l)=>o+(VE.test(l)?OE:l===""?ME:FE),i)}function BE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function $E(r,e,t){let{routesMeta:i}=r,o={},l="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],v=p===i.length-1,w=l==="/"?e:e.slice(l.length)||"/",I=WE({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},w),C=g.route;if(!I)return null;Object.assign(o,I.params),d.push({params:o,pathname:Ji([l,I.pathname]),pathnameBase:JE(Ji([l,I.pathnameBase])),route:C}),I.pathnameBase!=="/"&&(l=Ji([l,I.pathnameBase]))}return d}function WE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=HE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((v,w,I)=>{let{paramName:C,isOptional:U}=w;if(C==="*"){let K=p[I]||"";d=l.slice(0,l.length-K.length).replace(/(.)\/+$/,"$1")}const q=p[I];return U&&!q?v[C]=void 0:v[C]=(q||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function HE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),If(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function qE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return If(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Sf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const GE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KE=r=>GE.test(r);function QE(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?ta(r):r,l;if(t)if(KE(t))l=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),If(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+t))}t.startsWith("/")?l=Bg(t.substring(1),"/"):l=Bg(t,e)}else l=e;return{pathname:l,search:XE(i),hash:ZE(o)}}function Bg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Nh(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Cf(r,e){let t=YE(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Rf(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=ta(r):(o=al({},r),At(!o.pathname||!o.pathname.includes("?"),Nh("?","pathname","search",o)),At(!o.pathname||!o.pathname.includes("#"),Nh("#","pathname","hash",o)),At(!o.search||!o.search.includes("#"),Nh("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,p;if(d==null)p=t;else{let I=e.length-1;if(!i&&d.startsWith("..")){let C=d.split("/");for(;C[0]==="..";)C.shift(),I-=1;o.pathname=C.join("/")}p=I>=0?e[I]:"/"}let g=QE(o,p),v=d&&d!=="/"&&d.endsWith("/"),w=(l||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(v||w)&&(g.pathname+="/"),g}const Ji=r=>r.join("/").replace(/\/\/+/g,"/"),JE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),XE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ZE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function ex(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const kv=["post","put","patch","delete"];new Set(kv);const tx=["get",...kv];new Set(tx);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ll.apply(this,arguments)}const Pf=W.createContext(null),nx=W.createContext(null),ds=W.createContext(null),Nc=W.createContext(null),hs=W.createContext({outlet:null,matches:[],isDataRoute:!1}),bv=W.createContext(null);function rx(r,e){let{relative:t}=e===void 0?{}:e;na()||At(!1);let{basename:i,navigator:o}=W.useContext(ds),{hash:l,pathname:d,search:p}=jv(r,{relative:t}),g=d;return i!=="/"&&(g=d==="/"?i:Ji([i,d])),o.createHref({pathname:g,search:p,hash:l})}function na(){return W.useContext(Nc)!=null}function vl(){return na()||At(!1),W.useContext(Nc).location}function Nv(r){W.useContext(ds).static||W.useLayoutEffect(r)}function jc(){let{isDataRoute:r}=W.useContext(hs);return r?gx():ix()}function ix(){na()||At(!1);let r=W.useContext(Pf),{basename:e,future:t,navigator:i}=W.useContext(ds),{matches:o}=W.useContext(hs),{pathname:l}=vl(),d=JSON.stringify(Cf(o,t.v7_relativeSplatPath)),p=W.useRef(!1);return Nv(()=>{p.current=!0}),W.useCallback(function(v,w){if(w===void 0&&(w={}),!p.current)return;if(typeof v=="number"){i.go(v);return}let I=Rf(v,JSON.parse(d),l,w.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:Ji([e,I.pathname])),(w.replace?i.replace:i.push)(I,w.state,w)},[e,i,d,l,r])}function jv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=W.useContext(ds),{matches:o}=W.useContext(hs),{pathname:l}=vl(),d=JSON.stringify(Cf(o,i.v7_relativeSplatPath));return W.useMemo(()=>Rf(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function sx(r,e){return ox(r,e)}function ox(r,e,t,i){na()||At(!1);let{navigator:o}=W.useContext(ds),{matches:l}=W.useContext(hs),d=l[l.length-1],p=d?d.params:{};d&&d.pathname;let g=d?d.pathnameBase:"/";d&&d.route;let v=vl(),w;if(e){var I;let O=typeof e=="string"?ta(e):e;g==="/"||(I=O.pathname)!=null&&I.startsWith(g)||At(!1),w=O}else w=v;let C=w.pathname||"/",U=C;if(g!=="/"){let O=g.replace(/^\//,"").split("/");U="/"+C.replace(/^\//,"").split("/").slice(O.length).join("/")}let q=NE(r,{pathname:U}),K=dx(q&&q.map(O=>Object.assign({},O,{params:Object.assign({},p,O.params),pathname:Ji([g,o.encodeLocation?o.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?g:Ji([g,o.encodeLocation?o.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),l,t,i);return e&&K?W.createElement(Nc.Provider,{value:{location:ll({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Ki.Pop}},K):K}function ax(){let r=mx(),e=ex(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:o},t):null,null)}const lx=W.createElement(ax,null);class ux extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?W.createElement(hs.Provider,{value:this.props.routeContext},W.createElement(bv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cx(r){let{routeContext:e,match:t,children:i}=r,o=W.useContext(Pf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),W.createElement(hs.Provider,{value:e},i)}function dx(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let w=d.findIndex(I=>I.route.id&&(p==null?void 0:p[I.route.id])!==void 0);w>=0||At(!1),d=d.slice(0,Math.min(d.length,w+1))}let g=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let w=0;w<d.length;w++){let I=d[w];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(v=w),I.route.id){let{loaderData:C,errors:U}=t,q=I.route.loader&&C[I.route.id]===void 0&&(!U||U[I.route.id]===void 0);if(I.route.lazy||q){g=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((w,I,C)=>{let U,q=!1,K=null,O=null;t&&(U=p&&I.route.id?p[I.route.id]:void 0,K=I.route.errorElement||lx,g&&(v<0&&C===0?(yx("route-fallback"),q=!0,O=null):v===C&&(q=!0,O=I.route.hydrateFallbackElement||null)));let ce=e.concat(d.slice(0,C+1)),pe=()=>{let le;return U?le=K:q?le=O:I.route.Component?le=W.createElement(I.route.Component,null):I.route.element?le=I.route.element:le=w,W.createElement(cx,{match:I,routeContext:{outlet:w,matches:ce,isDataRoute:t!=null},children:le})};return t&&(I.route.ErrorBoundary||I.route.errorElement||C===0)?W.createElement(ux,{location:t.location,revalidation:t.revalidation,component:K,error:U,children:pe(),routeContext:{outlet:null,matches:ce,isDataRoute:!0}}):pe()},null)}var Dv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Dv||{}),Vv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Vv||{});function hx(r){let e=W.useContext(Pf);return e||At(!1),e}function fx(r){let e=W.useContext(nx);return e||At(!1),e}function px(r){let e=W.useContext(hs);return e||At(!1),e}function Ov(r){let e=px(),t=e.matches[e.matches.length-1];return t.route.id||At(!1),t.route.id}function mx(){var r;let e=W.useContext(bv),t=fx(),i=Ov();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function gx(){let{router:r}=hx(Dv.UseNavigateStable),e=Ov(Vv.UseNavigateStable),t=W.useRef(!1);return Nv(()=>{t.current=!0}),W.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,ll({fromRouteId:e},l)))},[r,e])}const $g={};function yx(r,e,t){$g[r]||($g[r]=!0)}function vx(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function _x(r){let{to:e,replace:t,state:i,relative:o}=r;na()||At(!1);let{future:l,static:d}=W.useContext(ds),{matches:p}=W.useContext(hs),{pathname:g}=vl(),v=jc(),w=Rf(e,Cf(p,l.v7_relativeSplatPath),g,o==="path"),I=JSON.stringify(w);return W.useEffect(()=>v(JSON.parse(I),{replace:t,state:i,relative:o}),[v,I,o,t,i]),null}function li(r){At(!1)}function wx(r){let{basename:e="/",children:t=null,location:i,navigationType:o=Ki.Pop,navigator:l,static:d=!1,future:p}=r;na()&&At(!1);let g=e.replace(/^\/*/,"/"),v=W.useMemo(()=>({basename:g,navigator:l,static:d,future:ll({v7_relativeSplatPath:!1},p)}),[g,p,l,d]);typeof i=="string"&&(i=ta(i));let{pathname:w="/",search:I="",hash:C="",state:U=null,key:q="default"}=i,K=W.useMemo(()=>{let O=Sf(w,g);return O==null?null:{location:{pathname:O,search:I,hash:C,state:U,key:q},navigationType:o}},[g,w,I,C,U,q,o]);return K==null?null:W.createElement(ds.Provider,{value:v},W.createElement(Nc.Provider,{children:t,value:K}))}function Ex(r){let{children:e,location:t}=r;return sx(Gh(e),t)}new Promise(()=>{});function Gh(r,e){e===void 0&&(e=[]);let t=[];return W.Children.forEach(r,(i,o)=>{if(!W.isValidElement(i))return;let l=[...e,o];if(i.type===W.Fragment){t.push.apply(t,Gh(i.props.children,l));return}i.type!==li&&At(!1),!i.props.index||!i.props.children||At(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Gh(i.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kh(){return Kh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Kh.apply(this,arguments)}function xx(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function Tx(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Ix(r,e){return r.button===0&&(!e||e==="_self")&&!Tx(r)}const Sx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Cx="6";try{window.__reactRouterVersion=Cx}catch{}const Rx="startTransition",Wg=xE[Rx];function Px(r){let{basename:e,children:t,future:i,window:o}=r,l=W.useRef();l.current==null&&(l.current=AE({window:o,v5Compat:!0}));let d=l.current,[p,g]=W.useState({action:d.action,location:d.location}),{v7_startTransition:v}=i||{},w=W.useCallback(I=>{v&&Wg?Wg(()=>g(I)):g(I)},[g,v]);return W.useLayoutEffect(()=>d.listen(w),[d,w]),W.useEffect(()=>vx(i),[i]),W.createElement(wx,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:d,future:i})}const Ax=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qa=W.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:p,target:g,to:v,preventScrollReset:w,viewTransition:I}=e,C=xx(e,Sx),{basename:U}=W.useContext(ds),q,K=!1;if(typeof v=="string"&&kx.test(v)&&(q=v,Ax))try{let le=new URL(window.location.href),de=v.startsWith("//")?new URL(le.protocol+v):new URL(v),ue=Sf(de.pathname,U);de.origin===le.origin&&ue!=null?v=ue+de.search+de.hash:K=!0}catch{}let O=rx(v,{relative:o}),ce=bx(v,{replace:d,state:p,target:g,preventScrollReset:w,relative:o,viewTransition:I});function pe(le){i&&i(le),le.defaultPrevented||ce(le)}return W.createElement("a",Kh({},C,{href:q||O,onClick:K||l?i:pe,ref:t,target:g}))});var Hg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Hg||(Hg={}));var qg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(qg||(qg={}));function bx(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:p}=e===void 0?{}:e,g=jc(),v=vl(),w=jv(r,{relative:d});return W.useCallback(I=>{if(Ix(I,t)){I.preventDefault();let C=i!==void 0?i:dc(v)===dc(w);g(r,{replace:C,state:o,preventScrollReset:l,relative:d,viewTransition:p})}},[v,g,w,i,o,t,r,l,d,p])}const Nx=()=>{};var Gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},jx=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],p=r[t++],g=((o&7)<<18|(l&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Mv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,p=d?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,w=l>>2,I=(l&3)<<4|p>>4;let C=(p&15)<<2|v>>6,U=v&63;g||(U=64,d||(C=64)),i.push(t[w],t[I],t[C],t[U])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Lv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):jx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||I==null)throw new Dx;const C=l<<2|p>>4;if(i.push(C),v!==64){const U=p<<4&240|v>>2;if(i.push(U),I!==64){const q=v<<6&192|I;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Dx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vx=function(r){const e=Lv(r);return Mv.encodeByteArray(e,!0)},hc=function(r){return Vx(r).replace(/\./g,"")},Fv=function(r){try{return Mv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=()=>Ox().__FIREBASE_DEFAULTS__,Mx=()=>{if(typeof process>"u"||typeof Gg>"u")return;const r=Gg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Fx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Fv(r[1]);return e&&JSON.parse(e)},Dc=()=>{try{return Nx()||Lx()||Mx()||Fx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Uv=r=>{var e,t;return(t=(e=Dc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Ux=r=>{const e=Uv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},zv=()=>{var r;return(r=Dc())===null||r===void 0?void 0:r.config},Bv=r=>{var e;return(e=Dc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $v(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[hc(JSON.stringify(t)),hc(JSON.stringify(d)),""].join(".")}const tl={};function $x(){const r={prod:[],emulator:[]};for(const e of Object.keys(tl))tl[e]?r.emulator.push(e):r.prod.push(e);return r}function Wx(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Kg=!1;function Wv(r,e){if(typeof window>"u"||typeof document>"u"||!ra(window.location.host)||tl[r]===e||tl[r]||Kg)return;tl[r]=e;function t(C){return`__firebase__banner__${C}`}const i="__firebase__banner",l=$x().prod.length>0;function d(){const C=document.getElementById(i);C&&C.remove()}function p(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function g(C,U){C.setAttribute("width","24"),C.setAttribute("id",U),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function v(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Kg=!0,d()},C}function w(C,U){C.setAttribute("id",U),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function I(){const C=Wx(i),U=t("text"),q=document.getElementById(U)||document.createElement("span"),K=t("learnmore"),O=document.getElementById(K)||document.createElement("a"),ce=t("preprendIcon"),pe=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const le=C.element;p(le),w(O,K);const de=v();g(pe,ce),le.append(pe,q,O,de),document.body.appendChild(le)}l?(q.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function qx(){var r;const e=(r=Dc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Qx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yx(){const r=hn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Jx(){return!qx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xx(){try{return typeof indexedDB=="object"}catch{return!1}}function Zx(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="FirebaseError";class vi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=eT,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_l.prototype.create)}}class _l{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?tT(l,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new vi(o,p,i)}}function tT(r,e){return r.replace(nT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const nT=/\{\$([^}]+)}/g;function rT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function qs(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],d=e[o];if(Qg(l)&&Qg(d)){if(!qs(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Qg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ka(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Qa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function iT(r,e){const t=new sT(r,e);return t.subscribe.bind(t)}class sT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");oT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=jh),o.error===void 0&&(o.error=jh),o.complete===void 0&&(o.complete=jh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function jh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(r){return r&&r._delegate?r._delegate:r}class Gs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new zx;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uT(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lT(r){return r===zs?void 0:r}function uT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Qe||(Qe={}));const dT={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},hT=Qe.INFO,fT={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},pT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=fT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Af{constructor(e){this.name=e,this._logLevel=hT,this._logHandler=pT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const mT=(r,e)=>e.some(t=>r instanceof t);let Yg,Jg;function gT(){return Yg||(Yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yT(){return Jg||(Jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hv=new WeakMap,Qh=new WeakMap,qv=new WeakMap,Dh=new WeakMap,kf=new WeakMap;function vT(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(Xi(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Hv.set(t,r)}).catch(()=>{}),kf.set(e,r),e}function _T(r){if(Qh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Qh.set(r,e)}let Yh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Qh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||qv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function wT(r){Yh=r(Yh)}function ET(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Vh(this),e,...t);return qv.set(i,e.sort?e.sort():[e]),Xi(i)}:yT().includes(r)?function(...e){return r.apply(Vh(this),e),Xi(Hv.get(this))}:function(...e){return Xi(r.apply(Vh(this),e))}}function xT(r){return typeof r=="function"?ET(r):(r instanceof IDBTransaction&&_T(r),mT(r,gT())?new Proxy(r,Yh):r)}function Xi(r){if(r instanceof IDBRequest)return vT(r);if(Dh.has(r))return Dh.get(r);const e=xT(r);return e!==r&&(Dh.set(r,e),kf.set(e,r)),e}const Vh=r=>kf.get(r);function TT(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),p=Xi(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Xi(d.result),g.oldVersion,g.newVersion,Xi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const IT=["get","getKey","getAll","getAllKeys","count"],ST=["put","add","delete","clear"],Oh=new Map;function Xg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Oh.get(e))return Oh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=ST.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||IT.includes(t)))return;const l=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let v=g.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&g.done]))[0]};return Oh.set(e,l),l}wT(r=>({...r,get:(e,t,i)=>Xg(e,t)||r.get(e,t,i),has:(e,t)=>!!Xg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function RT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jh="@firebase/app",Zg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Af("@firebase/app"),PT="@firebase/app-compat",AT="@firebase/analytics-compat",kT="@firebase/analytics",bT="@firebase/app-check-compat",NT="@firebase/app-check",jT="@firebase/auth",DT="@firebase/auth-compat",VT="@firebase/database",OT="@firebase/data-connect",LT="@firebase/database-compat",MT="@firebase/functions",FT="@firebase/functions-compat",UT="@firebase/installations",zT="@firebase/installations-compat",BT="@firebase/messaging",$T="@firebase/messaging-compat",WT="@firebase/performance",HT="@firebase/performance-compat",qT="@firebase/remote-config",GT="@firebase/remote-config-compat",KT="@firebase/storage",QT="@firebase/storage-compat",YT="@firebase/firestore",JT="@firebase/ai",XT="@firebase/firestore-compat",ZT="firebase",e1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="[DEFAULT]",t1={[Jh]:"fire-core",[PT]:"fire-core-compat",[kT]:"fire-analytics",[AT]:"fire-analytics-compat",[NT]:"fire-app-check",[bT]:"fire-app-check-compat",[jT]:"fire-auth",[DT]:"fire-auth-compat",[VT]:"fire-rtdb",[OT]:"fire-data-connect",[LT]:"fire-rtdb-compat",[MT]:"fire-fn",[FT]:"fire-fn-compat",[UT]:"fire-iid",[zT]:"fire-iid-compat",[BT]:"fire-fcm",[$T]:"fire-fcm-compat",[WT]:"fire-perf",[HT]:"fire-perf-compat",[qT]:"fire-rc",[GT]:"fire-rc-compat",[KT]:"fire-gcs",[QT]:"fire-gcs-compat",[YT]:"fire-fst",[XT]:"fire-fst-compat",[JT]:"fire-vertex","fire-js":"fire-js",[ZT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new Map,n1=new Map,Zh=new Map;function ey(r,e){try{r.container.addComponent(e)}catch(t){fi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Qo(r){const e=r.name;if(Zh.has(e))return fi.debug(`There were multiple attempts to register component ${e}.`),!1;Zh.set(e,r);for(const t of fc.values())ey(t,r);for(const t of n1.values())ey(t,r);return!0}function bf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function $n(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new _l("app","Firebase",r1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=e1;function Gv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Xh,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Zi.create("bad-app-name",{appName:String(o)});if(t||(t=zv()),!t)throw Zi.create("no-options");const l=fc.get(o);if(l){if(qs(t,l.options)&&qs(i,l.config))return l;throw Zi.create("duplicate-app",{appName:o})}const d=new cT(o);for(const g of Zh.values())d.addComponent(g);const p=new i1(t,i,d);return fc.set(o,p),p}function Kv(r=Xh){const e=fc.get(r);if(!e&&r===Xh&&zv())return Gv();if(!e)throw Zi.create("no-app",{appName:r});return e}function es(r,e,t){var i;let o=(i=t1[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fi.warn(p.join(" "));return}Qo(new Gs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="firebase-heartbeat-database",o1=1,ul="firebase-heartbeat-store";let Lh=null;function Qv(){return Lh||(Lh=TT(s1,o1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ul)}catch(t){console.warn(t)}}}}).catch(r=>{throw Zi.create("idb-open",{originalErrorMessage:r.message})})),Lh}async function a1(r){try{const t=(await Qv()).transaction(ul),i=await t.objectStore(ul).get(Yv(r));return await t.done,i}catch(e){if(e instanceof vi)fi.warn(e.message);else{const t=Zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fi.warn(t.message)}}}async function ty(r,e){try{const i=(await Qv()).transaction(ul,"readwrite");await i.objectStore(ul).put(e,Yv(r)),await i.done}catch(t){if(t instanceof vi)fi.warn(t.message);else{const i=Zi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fi.warn(i.message)}}}function Yv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=1024,u1=30;class c1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new h1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ny();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>u1){const d=f1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){fi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ny(),{heartbeatsToSend:i,unsentEntries:o}=d1(this._heartbeatsCache.heartbeats),l=hc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return fi.warn(t),""}}}function ny(){return new Date().toISOString().substring(0,10)}function d1(r,e=l1){const t=[];let i=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),ry(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ry(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class h1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xx()?Zx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await a1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ty(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ty(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ry(r){return hc(JSON.stringify({version:2,heartbeats:r})).length}function f1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(r){Qo(new Gs("platform-logger",e=>new CT(e),"PRIVATE")),Qo(new Gs("heartbeat",e=>new c1(e),"PRIVATE")),es(Jh,Zg,r),es(Jh,Zg,"esm2017"),es("fire-js","")}p1("");var m1="firebase",g1="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(m1,g1,"app");function Nf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Jv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y1=Jv,Xv=new _l("auth","Firebase",Jv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new Af("@firebase/auth");function v1(r,...e){pc.logLevel<=Qe.WARN&&pc.warn(`Auth (${ia}): ${r}`,...e)}function tc(r,...e){pc.logLevel<=Qe.ERROR&&pc.error(`Auth (${ia}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(r,...e){throw Df(r,...e)}function xr(r,...e){return Df(r,...e)}function jf(r,e,t){const i=Object.assign(Object.assign({},y1()),{[e]:t});return new _l("auth","Firebase",i).create(e,{appName:r.name})}function di(r){return jf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _1(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&rr(r,"argument-error"),jf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Df(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Xv.create(r,...e)}function Ne(r,e,...t){if(!r)throw Df(e,...t)}function ui(r){const e="INTERNAL ASSERTION FAILED: "+r;throw tc(e),new Error(e)}function pi(r,e){r||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function w1(){return iy()==="http:"||iy()==="https:"}function iy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w1()||Kx()||"connection"in navigator)?navigator.onLine:!0}function x1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile=Hx()||Qx()}get(){return E1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(r,e){pi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],S1=new El(3e4,6e4);function fs(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function ps(r,e,t,i,o={}){return e_(r,o,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const p=wl(Object.assign({key:r.config.apiKey},d)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:g},l);return Gx()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&ra(r.emulatorConfig.host)&&(v.credentials="include"),Zv.fetch()(await t_(r,r.config.apiHost,t,p),v)})}async function e_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},T1),e);try{const o=new R1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Hu(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const p=l.ok?d.errorMessage:d.error.message,[g,v]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Hu(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Hu(r,"user-disabled",d);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw jf(r,w,v);rr(r,w)}}catch(o){if(o instanceof vi)throw o;rr(r,"network-request-failed",{message:String(o)})}}async function xl(r,e,t,i,o={}){const l=await ps(r,e,t,i,o);return"mfaPendingCredential"in l&&rr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function t_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,d=l.config.emulator?Vf(r.config,o):`${r.config.apiScheme}://${o}`;return I1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function C1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(xr(this.auth,"network-request-failed")),S1.get())})}}function Hu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=xr(r,e,i);return o.customData._tokenResponse=t,o}function sy(r){return r!==void 0&&r.enterprise!==void 0}class P1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return C1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function A1(r,e){return ps(r,"GET","/v2/recaptchaConfig",fs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(r,e){return ps(r,"POST","/v1/accounts:delete",e)}async function mc(r,e){return ps(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b1(r,e=!1){const t=tn(r),i=await t.getIdToken(e),o=Of(i);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:nl(Mh(o.auth_time)),issuedAtTime:nl(Mh(o.iat)),expirationTime:nl(Mh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Mh(r){return Number(r)*1e3}function Of(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return tc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Fv(t);return o?JSON.parse(o):(tc("Failed to decode base64 JWT payload"),null)}catch(o){return tc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function oy(r){const e=Of(r);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof vi&&N1(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function N1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await cl(r,mc(t,{idToken:i}));Ne(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?n_(l.providerUserInfo):[],p=V1(r.providerData,d),g=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),w=g?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new tf(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,I)}async function D1(r){const e=tn(r);await gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V1(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function n_(r){return r.map(e=>{var{providerId:t}=e,i=Nf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(r,e){const t=await e_(r,{},async()=>{const i=wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await t_(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return r.emulatorConfig&&ra(r.emulatorConfig.host)&&(g.credentials="include"),Zv.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function L1(r,e){return ps(r,"POST","/v2/accounts:revokeToken",fs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=oy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await O1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,d=new Wo;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Ne(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(Ne(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wo,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(r,e){Ne(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Er{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Nf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new tf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await cl(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return b1(this,e)}reload(){return D1(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await gc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(di(this.auth));const e=await this.getIdToken();return await cl(this,k1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,d,p,g,v,w;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,C=(o=t.email)!==null&&o!==void 0?o:void 0,U=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(d=t.photoURL)!==null&&d!==void 0?d:void 0,K=(p=t.tenantId)!==null&&p!==void 0?p:void 0,O=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,ce=(v=t.createdAt)!==null&&v!==void 0?v:void 0,pe=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:le,emailVerified:de,isAnonymous:ue,providerData:me,stsTokenManager:N}=t;Ne(le&&N,e,"internal-error");const S=Wo.fromJSON(this.name,N);Ne(typeof le=="string",e,"internal-error"),Wi(I,e.name),Wi(C,e.name),Ne(typeof de=="boolean",e,"internal-error"),Ne(typeof ue=="boolean",e,"internal-error"),Wi(U,e.name),Wi(q,e.name),Wi(K,e.name),Wi(O,e.name),Wi(ce,e.name),Wi(pe,e.name);const P=new Er({uid:le,auth:e,email:C,emailVerified:de,displayName:I,isAnonymous:ue,photoURL:q,phoneNumber:U,tenantId:K,stsTokenManager:S,createdAt:ce,lastLoginAt:pe});return me&&Array.isArray(me)&&(P.providerData=me.map(k=>Object.assign({},k))),O&&(P._redirectEventId=O),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new Wo;o.updateFromServerResponse(t);const l=new Er({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await gc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?n_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Wo;p.updateFromIdToken(i);const g=new Er({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new tf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new Map;function ci(r){pi(r instanceof Function,"Expected a class definition");let e=ay.get(r);return e?(pi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ay.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}r_.type="NONE";const ly=r_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(r,e,t){return`firebase:${r}:${e}:${t}`}class Ho{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=nc(this.userKey,o.apiKey,l),this.fullPersistenceKey=nc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mc(this.auth,{idToken:e}).catch(()=>{});return t?Er._fromGetAccountInfoResponse(this.auth,t,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ho(ci(ly),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||ci(ly);const d=nc(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const w=await v._get(d);if(w){let I;if(typeof w=="string"){const C=await mc(e,{idToken:w}).catch(()=>{});if(!C)break;I=await Er._fromGetAccountInfoResponse(e,C,w)}else I=Er._fromJSON(e,w);v!==l&&(p=I),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ho(l,e,i):(l=g[0],p&&await l._set(d,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Ho(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(a_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u_(e))return"Blackberry";if(c_(e))return"Webos";if(s_(e))return"Safari";if((e.includes("chrome/")||o_(e))&&!e.includes("edge/"))return"Chrome";if(l_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function i_(r=hn()){return/firefox\//i.test(r)}function s_(r=hn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o_(r=hn()){return/crios\//i.test(r)}function a_(r=hn()){return/iemobile/i.test(r)}function l_(r=hn()){return/android/i.test(r)}function u_(r=hn()){return/blackberry/i.test(r)}function c_(r=hn()){return/webos/i.test(r)}function Lf(r=hn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function M1(r=hn()){var e;return Lf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function F1(){return Yx()&&document.documentMode===10}function d_(r=hn()){return Lf(r)||l_(r)||c_(r)||u_(r)||/windows phone/i.test(r)||a_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(r,e=[]){let t;switch(r){case"Browser":t=uy(hn());break;case"Worker":t=`${uy(hn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ia}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,p)=>{try{const g=e(l);d(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(r,e={}){return ps(r,"GET","/v2/passwordPolicy",fs(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=6;class $1{constructor(e){var t,i,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:B1,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,d,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cy(this),this.idTokenSubscription=new cy(this),this.beforeStateQueue=new U1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ci(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mc(this,{idToken:e}),i=await Er._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($n(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===p)&&(g!=null&&g.user)&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=x1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(di(this));const t=e?tn(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z1(this),t=new $1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _l("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await L1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ci(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[ci(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(p,this,"internal-error"),p.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&v1(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ms(r){return tn(r)}class cy{constructor(e){this.auth=e,this.observer=null,this.addObserver=iT(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H1(r){Vc=r}function f_(r){return Vc.loadJS(r)}function q1(){return Vc.recaptchaEnterpriseScript}function G1(){return Vc.gapiScript}function K1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Q1{constructor(){this.enterprise=new Y1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Y1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const J1="recaptcha-enterprise",p_="NO_RECAPTCHA";class X1{constructor(e){this.type=J1,this.auth=ms(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,p)=>{A1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new P1(g);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(g=>{p(g)})})}function o(l,d,p){const g=window.grecaptcha;sy(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(p_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Q1().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{i(this.auth).then(p=>{if(!t&&sy(window.grecaptcha))o(p,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=q1();g.length!==0&&(g+=p),f_(g).then(()=>{o(p,l,d)}).catch(v=>{d(v)})}}).catch(p=>{d(p)})})}}async function dy(r,e,t,i=!1,o=!1){const l=new X1(r);let d;if(o)d=p_;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function nf(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await dy(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await dy(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(r,e){const t=bf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(qs(l,e??{}))return o;rr(o,"already-initialized")}return t.initialize({options:e})}function eI(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ci);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function tI(r,e,t){const i=ms(r);Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=m_(e),{host:d,port:p}=nI(e),g=p===null?"":`:${p}`,v={url:`${l}//${d}${g}/`},w=Object.freeze({host:d,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ne(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ne(qs(v,i.config.emulator)&&qs(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,ra(d)?($v(`${l}//${d}${g}`),Wv("Auth",!0)):rI()}function m_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function nI(r){const e=m_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:hy(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:hy(d)}}}function hy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function rI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,t){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function iI(r,e){return ps(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(r,e){return xl(r,"POST","/v1/accounts:signInWithPassword",fs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(r,e){return xl(r,"POST","/v1/accounts:signInWithEmailLink",fs(r,e))}async function aI(r,e){return xl(r,"POST","/v1/accounts:signInWithEmailLink",fs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Mf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new dl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new dl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nf(e,t,"signInWithPassword",sI);case"emailLink":return oI(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nf(e,i,"signUpPassword",iI);case"emailLink":return aI(e,{idToken:t,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(r,e){return xl(r,"POST","/v1/accounts:signInWithIdp",fs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="http://localhost";class Ks extends Mf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Nf(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new Ks(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return qo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,qo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qo(e,t)}buildRequest(){const e={requestUri:lI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cI(r){const e=Ka(Qa(r)).link,t=e?Ka(Qa(e)).deep_link_id:null,i=Ka(Qa(r)).deep_link_id;return(i?Ka(Qa(i)).link:null)||i||t||e||r}class Ff{constructor(e){var t,i,o,l,d,p;const g=Ka(Qa(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,w=(i=g.oobCode)!==null&&i!==void 0?i:null,I=uI((o=g.mode)!==null&&o!==void 0?o:null);Ne(v&&w&&I,"argument-error"),this.apiKey=v,this.operation=I,this.code=w,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=g.lang)!==null&&d!==void 0?d:null,this.tenantId=(p=g.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=cI(e);try{return new Ff(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.providerId=sa.PROVIDER_ID}static credential(e,t){return dl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ff.parseLink(t);return Ne(i,"argument-error"),dl._fromEmailAndCode(e,i.code,i.tenantId)}}sa.PROVIDER_ID="password";sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Uf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Tl{constructor(){super("facebook.com")}static credential(e){return Ks._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ks._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Lr.credential(t,i)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Tl{constructor(){super("github.com")}static credential(e){return Ks._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Tl{constructor(){super("twitter.com")}static credential(e,t){return Ks._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Gi.credential(t,i)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(r,e){return xl(r,"POST","/v1/accounts:signUp",fs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Er._fromIdTokenResponse(e,i,o),d=fy(i);return new Qs({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=fy(i);return new Qs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function fy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends vi{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,yc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new yc(e,t,i,o)}}function g_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?yc._fromErrorAndOperation(r,l,e,i):l})}async function hI(r,e,t=!1){const i=await cl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Qs._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(r,e,t=!1){const{auth:i}=r;if($n(i.app))return Promise.reject(di(i));const o="reauthenticate";try{const l=await cl(r,g_(i,o,e,r),t);Ne(l.idToken,i,"internal-error");const d=Of(l.idToken);Ne(d,i,"internal-error");const{sub:p}=d;return Ne(r.uid===p,i,"user-mismatch"),Qs._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&rr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y_(r,e,t=!1){if($n(r.app))return Promise.reject(di(r));const i="signIn",o=await g_(r,i,e),l=await Qs._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function pI(r,e){return y_(ms(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v_(r){const e=ms(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mI(r,e,t){if($n(r.app))return Promise.reject(di(r));const i=ms(r),d=await nf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dI).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&v_(r),g}),p=await Qs._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function __(r,e,t){return $n(r.app)?Promise.reject(di(r)):pI(tn(r),sa.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&v_(r),i})}function gI(r,e,t,i){return tn(r).onIdTokenChanged(e,t,i)}function yI(r,e,t){return tn(r).beforeAuthStateChanged(e,t)}function vI(r,e,t,i){return tn(r).onAuthStateChanged(e,t,i)}function w_(r){return tn(r).signOut()}const vc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vc,"1"),this.storage.removeItem(vc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=1e3,wI=10;class x_ extends E_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);F1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,wI):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},_I)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}x_.type="LOCAL";const EI=x_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends E_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}T_.type="SESSION";const I_=T_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Oc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async v=>v(t.origin,l)),g=await xI(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((p,g)=>{const v=zf("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(I){const C=I;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(C.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(){return window}function II(r){Mr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(){return typeof Mr().WorkerGlobalScope<"u"&&typeof Mr().importScripts=="function"}async function SI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function RI(){return S_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="firebaseLocalStorageDb",PI=1,_c="firebaseLocalStorage",R_="fbase_key";class Il{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lc(r,e){return r.transaction([_c],e?"readwrite":"readonly").objectStore(_c)}function AI(){const r=indexedDB.deleteDatabase(C_);return new Il(r).toPromise()}function rf(){const r=indexedDB.open(C_,PI);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(_c,{keyPath:R_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(_c)?e(i):(i.close(),await AI(),e(await rf()))})})}async function py(r,e,t){const i=Lc(r,!0).put({[R_]:e,value:t});return new Il(i).toPromise()}async function kI(r,e){const t=Lc(r,!1).get(e),i=await new Il(t).toPromise();return i===void 0?null:i.value}function my(r,e){const t=Lc(r,!0).delete(e);return new Il(t).toPromise()}const bI=800,NI=3;class P_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>NI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oc._getInstance(RI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await SI(),!this.activeServiceWorker)return;this.sender=new TI(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rf();return await py(e,vc,"1"),await my(e,vc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>py(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>kI(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>my(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Lc(o,!1).getAll();return new Il(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}P_.type="LOCAL";const jI=P_;new El(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(r,e){return e?ci(e):(Ne(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Mf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DI(r){return y_(r.auth,new Bf(r),r.bypassAuthState)}function VI(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),fI(t,new Bf(r),r.bypassAuthState)}async function OI(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),hI(t,new Bf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DI;case"linkViaPopup":case"linkViaRedirect":return OI;case"reauthViaPopup":case"reauthViaRedirect":return VI;default:rr(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new El(2e3,1e4);async function b_(r,e,t){if($n(r.app))return Promise.reject(xr(r,"operation-not-supported-in-this-environment"));const i=ms(r);_1(r,e,Uf);const o=A_(i,t);return new Bs(i,"signInViaPopup",e,o).executeNotNull()}class Bs extends k_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Bs.currentPopupAction&&Bs.currentPopupAction.cancel(),Bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=zf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LI.get())};e()}}Bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="pendingRedirect",rc=new Map;class FI extends k_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=rc.get(this.auth._key());if(!e){try{const i=await UI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}rc.set(this.auth._key(),e)}return this.bypassAuthState||rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UI(r,e){const t=$I(e),i=BI(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function zI(r,e){rc.set(r._key(),e)}function BI(r){return ci(r._redirectPersistence)}function $I(r){return nc(MI,r.config.apiKey,r.name)}async function WI(r,e,t=!1){if($n(r.app))return Promise.reject(di(r));const i=ms(r),o=A_(i,e),d=await new FI(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=600*1e3;class qI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!N_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(xr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HI&&this.cachedEventUids.clear(),this.cachedEventUids.has(gy(e))}saveEventToCache(e){this.cachedEventUids.add(gy(e)),this.lastProcessedEventTime=Date.now()}}function gy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function N_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(r,e={}){return ps(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YI=/^https?/;async function JI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await KI(r);for(const t of e)try{if(XI(t))return}catch{}rr(r,"unauthorized-domain")}function XI(r){const e=ef(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!YI.test(t))return!1;if(QI.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new El(3e4,6e4);function yy(){const r=Mr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function eS(r){return new Promise((e,t)=>{var i,o,l;function d(){yy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yy(),t(xr(r,"network-request-failed"))},timeout:ZI.get()})}if(!((o=(i=Mr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Mr().gapi)===null||l===void 0)&&l.load)d();else{const p=K1("iframefcb");return Mr()[p]=()=>{gapi.load?d():t(xr(r,"network-request-failed"))},f_(`${G1()}?onload=${p}`).catch(g=>t(g))}}).catch(e=>{throw ic=null,e})}let ic=null;function tS(r){return ic=ic||eS(r),ic}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=new El(5e3,15e3),rS="__/auth/iframe",iS="emulator/auth/iframe",sS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aS(r){const e=r.config;Ne(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Vf(e,iS):`https://${r.config.authDomain}/${rS}`,i={apiKey:e.apiKey,appName:r.name,v:ia},o=oS.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${wl(i).slice(1)}`}async function lS(r){const e=await tS(r),t=Mr().gapi;return Ne(t,r,"internal-error"),e.open({where:document.body,url:aS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sS,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=xr(r,"network-request-failed"),p=Mr().setTimeout(()=>{l(d)},nS.get());function g(){Mr().clearTimeout(p),o(i)}i.ping(g).then(g,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cS=500,dS=600,hS="_blank",fS="http://localhost";class vy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pS(r,e,t,i=cS,o=dS){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g=Object.assign(Object.assign({},uS),{width:i.toString(),height:o.toString(),top:l,left:d}),v=hn().toLowerCase();t&&(p=o_(v)?hS:t),i_(v)&&(e=e||fS,g.scrollbars="yes");const w=Object.entries(g).reduce((C,[U,q])=>`${C}${U}=${q},`,"");if(M1(v)&&p!=="_self")return mS(e||"",p),new vy(null);const I=window.open(e||"",p,w);Ne(I,r,"popup-blocked");try{I.focus()}catch{}return new vy(I)}function mS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="__/auth/handler",yS="emulator/auth/handler",vS=encodeURIComponent("fac");async function _y(r,e,t,i,o,l){Ne(r.config.authDomain,r,"auth-domain-config-required"),Ne(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ia,eventId:o};if(e instanceof Uf){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",rT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,I]of Object.entries({}))d[w]=I}if(e instanceof Tl){const w=e.getScopes().filter(I=>I!=="");w.length>0&&(d.scopes=w.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await r._getAppCheckToken(),v=g?`#${vS}=${encodeURIComponent(g)}`:"";return`${_S(r)}?${wl(p).slice(1)}${v}`}function _S({config:r}){return r.emulator?Vf(r,yS):`https://${r.authDomain}/${gS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="webStorageSupport";class wS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I_,this._completeRedirectFn=WI,this._overrideRedirectResult=zI}async _openPopup(e,t,i,o){var l;pi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await _y(e,t,i,ef(),o);return pS(e,d,zf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await _y(e,t,i,ef(),o);return II(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(pi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await lS(e),i=new qI(e);return t.register("authEvent",o=>(Ne(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fh,{type:Fh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Fh];d!==void 0&&t(!!d),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return d_()||s_()||Lf()}}const ES=wS;var wy="@firebase/auth",Ey="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IS(r){Qo(new Gs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;Ne(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h_(r)},v=new W1(i,o,l,g);return eI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Qo(new Gs("auth-internal",e=>{const t=ms(e.getProvider("auth").getImmediate());return(i=>new xS(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(wy,Ey,TS(r)),es(wy,Ey,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=300,CS=Bv("authIdTokenMaxAge")||SS;let xy=null;const RS=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>CS)return;const o=t==null?void 0:t.token;xy!==o&&(xy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function PS(r=Kv()){const e=bf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=Z1(r,{popupRedirectResolver:ES,persistence:[jI,EI,I_]}),i=Bv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=RS(l.toString());yI(t,d,()=>d(t.currentUser)),gI(t,p=>d(p))}}const o=Uv("auth");return o&&tI(t,`http://${o}`),t}function AS(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}H1({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=xr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",AS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IS("Browser");var Ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ts,j_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function P(){}P.prototype=S.prototype,N.D=S.prototype,N.prototype=new P,N.prototype.constructor=N,N.C=function(k,D,b){for(var x=Array(arguments.length-2),se=2;se<arguments.length;se++)x[se-2]=arguments[se];return S.prototype[D].apply(k,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,S,P){P||(P=0);var k=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)k[D]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(D=0;16>D;++D)k[D]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=N.g[0],P=N.g[1],D=N.g[2];var b=N.g[3],x=S+(b^P&(D^b))+k[0]+3614090360&4294967295;S=P+(x<<7&4294967295|x>>>25),x=b+(D^S&(P^D))+k[1]+3905402710&4294967295,b=S+(x<<12&4294967295|x>>>20),x=D+(P^b&(S^P))+k[2]+606105819&4294967295,D=b+(x<<17&4294967295|x>>>15),x=P+(S^D&(b^S))+k[3]+3250441966&4294967295,P=D+(x<<22&4294967295|x>>>10),x=S+(b^P&(D^b))+k[4]+4118548399&4294967295,S=P+(x<<7&4294967295|x>>>25),x=b+(D^S&(P^D))+k[5]+1200080426&4294967295,b=S+(x<<12&4294967295|x>>>20),x=D+(P^b&(S^P))+k[6]+2821735955&4294967295,D=b+(x<<17&4294967295|x>>>15),x=P+(S^D&(b^S))+k[7]+4249261313&4294967295,P=D+(x<<22&4294967295|x>>>10),x=S+(b^P&(D^b))+k[8]+1770035416&4294967295,S=P+(x<<7&4294967295|x>>>25),x=b+(D^S&(P^D))+k[9]+2336552879&4294967295,b=S+(x<<12&4294967295|x>>>20),x=D+(P^b&(S^P))+k[10]+4294925233&4294967295,D=b+(x<<17&4294967295|x>>>15),x=P+(S^D&(b^S))+k[11]+2304563134&4294967295,P=D+(x<<22&4294967295|x>>>10),x=S+(b^P&(D^b))+k[12]+1804603682&4294967295,S=P+(x<<7&4294967295|x>>>25),x=b+(D^S&(P^D))+k[13]+4254626195&4294967295,b=S+(x<<12&4294967295|x>>>20),x=D+(P^b&(S^P))+k[14]+2792965006&4294967295,D=b+(x<<17&4294967295|x>>>15),x=P+(S^D&(b^S))+k[15]+1236535329&4294967295,P=D+(x<<22&4294967295|x>>>10),x=S+(D^b&(P^D))+k[1]+4129170786&4294967295,S=P+(x<<5&4294967295|x>>>27),x=b+(P^D&(S^P))+k[6]+3225465664&4294967295,b=S+(x<<9&4294967295|x>>>23),x=D+(S^P&(b^S))+k[11]+643717713&4294967295,D=b+(x<<14&4294967295|x>>>18),x=P+(b^S&(D^b))+k[0]+3921069994&4294967295,P=D+(x<<20&4294967295|x>>>12),x=S+(D^b&(P^D))+k[5]+3593408605&4294967295,S=P+(x<<5&4294967295|x>>>27),x=b+(P^D&(S^P))+k[10]+38016083&4294967295,b=S+(x<<9&4294967295|x>>>23),x=D+(S^P&(b^S))+k[15]+3634488961&4294967295,D=b+(x<<14&4294967295|x>>>18),x=P+(b^S&(D^b))+k[4]+3889429448&4294967295,P=D+(x<<20&4294967295|x>>>12),x=S+(D^b&(P^D))+k[9]+568446438&4294967295,S=P+(x<<5&4294967295|x>>>27),x=b+(P^D&(S^P))+k[14]+3275163606&4294967295,b=S+(x<<9&4294967295|x>>>23),x=D+(S^P&(b^S))+k[3]+4107603335&4294967295,D=b+(x<<14&4294967295|x>>>18),x=P+(b^S&(D^b))+k[8]+1163531501&4294967295,P=D+(x<<20&4294967295|x>>>12),x=S+(D^b&(P^D))+k[13]+2850285829&4294967295,S=P+(x<<5&4294967295|x>>>27),x=b+(P^D&(S^P))+k[2]+4243563512&4294967295,b=S+(x<<9&4294967295|x>>>23),x=D+(S^P&(b^S))+k[7]+1735328473&4294967295,D=b+(x<<14&4294967295|x>>>18),x=P+(b^S&(D^b))+k[12]+2368359562&4294967295,P=D+(x<<20&4294967295|x>>>12),x=S+(P^D^b)+k[5]+4294588738&4294967295,S=P+(x<<4&4294967295|x>>>28),x=b+(S^P^D)+k[8]+2272392833&4294967295,b=S+(x<<11&4294967295|x>>>21),x=D+(b^S^P)+k[11]+1839030562&4294967295,D=b+(x<<16&4294967295|x>>>16),x=P+(D^b^S)+k[14]+4259657740&4294967295,P=D+(x<<23&4294967295|x>>>9),x=S+(P^D^b)+k[1]+2763975236&4294967295,S=P+(x<<4&4294967295|x>>>28),x=b+(S^P^D)+k[4]+1272893353&4294967295,b=S+(x<<11&4294967295|x>>>21),x=D+(b^S^P)+k[7]+4139469664&4294967295,D=b+(x<<16&4294967295|x>>>16),x=P+(D^b^S)+k[10]+3200236656&4294967295,P=D+(x<<23&4294967295|x>>>9),x=S+(P^D^b)+k[13]+681279174&4294967295,S=P+(x<<4&4294967295|x>>>28),x=b+(S^P^D)+k[0]+3936430074&4294967295,b=S+(x<<11&4294967295|x>>>21),x=D+(b^S^P)+k[3]+3572445317&4294967295,D=b+(x<<16&4294967295|x>>>16),x=P+(D^b^S)+k[6]+76029189&4294967295,P=D+(x<<23&4294967295|x>>>9),x=S+(P^D^b)+k[9]+3654602809&4294967295,S=P+(x<<4&4294967295|x>>>28),x=b+(S^P^D)+k[12]+3873151461&4294967295,b=S+(x<<11&4294967295|x>>>21),x=D+(b^S^P)+k[15]+530742520&4294967295,D=b+(x<<16&4294967295|x>>>16),x=P+(D^b^S)+k[2]+3299628645&4294967295,P=D+(x<<23&4294967295|x>>>9),x=S+(D^(P|~b))+k[0]+4096336452&4294967295,S=P+(x<<6&4294967295|x>>>26),x=b+(P^(S|~D))+k[7]+1126891415&4294967295,b=S+(x<<10&4294967295|x>>>22),x=D+(S^(b|~P))+k[14]+2878612391&4294967295,D=b+(x<<15&4294967295|x>>>17),x=P+(b^(D|~S))+k[5]+4237533241&4294967295,P=D+(x<<21&4294967295|x>>>11),x=S+(D^(P|~b))+k[12]+1700485571&4294967295,S=P+(x<<6&4294967295|x>>>26),x=b+(P^(S|~D))+k[3]+2399980690&4294967295,b=S+(x<<10&4294967295|x>>>22),x=D+(S^(b|~P))+k[10]+4293915773&4294967295,D=b+(x<<15&4294967295|x>>>17),x=P+(b^(D|~S))+k[1]+2240044497&4294967295,P=D+(x<<21&4294967295|x>>>11),x=S+(D^(P|~b))+k[8]+1873313359&4294967295,S=P+(x<<6&4294967295|x>>>26),x=b+(P^(S|~D))+k[15]+4264355552&4294967295,b=S+(x<<10&4294967295|x>>>22),x=D+(S^(b|~P))+k[6]+2734768916&4294967295,D=b+(x<<15&4294967295|x>>>17),x=P+(b^(D|~S))+k[13]+1309151649&4294967295,P=D+(x<<21&4294967295|x>>>11),x=S+(D^(P|~b))+k[4]+4149444226&4294967295,S=P+(x<<6&4294967295|x>>>26),x=b+(P^(S|~D))+k[11]+3174756917&4294967295,b=S+(x<<10&4294967295|x>>>22),x=D+(S^(b|~P))+k[2]+718787259&4294967295,D=b+(x<<15&4294967295|x>>>17),x=P+(b^(D|~S))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+b&4294967295}i.prototype.u=function(N,S){S===void 0&&(S=N.length);for(var P=S-this.blockSize,k=this.B,D=this.h,b=0;b<S;){if(D==0)for(;b<=P;)o(this,N,b),b+=this.blockSize;if(typeof N=="string"){for(;b<S;)if(k[D++]=N.charCodeAt(b++),D==this.blockSize){o(this,k),D=0;break}}else for(;b<S;)if(k[D++]=N[b++],D==this.blockSize){o(this,k),D=0;break}}this.h=D,this.o+=S},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;var P=8*this.o;for(S=N.length-8;S<N.length;++S)N[S]=P&255,P/=256;for(this.u(N),N=Array(16),S=P=0;4>S;++S)for(var k=0;32>k;k+=8)N[P++]=this.g[S]>>>k&255;return N};function l(N,S){var P=p;return Object.prototype.hasOwnProperty.call(P,N)?P[N]:P[N]=S(N)}function d(N,S){this.h=S;for(var P=[],k=!0,D=N.length-1;0<=D;D--){var b=N[D]|0;k&&b==S||(P[D]=b,k=!1)}this.g=P}var p={};function g(N){return-128<=N&&128>N?l(N,function(S){return new d([S|0],0>S?-1:0)}):new d([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return I;if(0>N)return O(v(-N));for(var S=[],P=1,k=0;N>=P;k++)S[k]=N/P|0,P*=4294967296;return new d(S,0)}function w(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return O(w(N.substring(1),S));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=v(Math.pow(S,8)),k=I,D=0;D<N.length;D+=8){var b=Math.min(8,N.length-D),x=parseInt(N.substring(D,D+b),S);8>b?(b=v(Math.pow(S,b)),k=k.j(b).add(v(x))):(k=k.j(P),k=k.add(v(x)))}return k}var I=g(0),C=g(1),U=g(16777216);r=d.prototype,r.m=function(){if(K(this))return-O(this).m();for(var N=0,S=1,P=0;P<this.g.length;P++){var k=this.i(P);N+=(0<=k?k:4294967296+k)*S,S*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(q(this))return"0";if(K(this))return"-"+O(this).toString(N);for(var S=v(Math.pow(N,6)),P=this,k="";;){var D=de(P,S).g;P=ce(P,D.j(S));var b=((0<P.g.length?P.g[0]:P.h)>>>0).toString(N);if(P=D,q(P))return b+k;for(;6>b.length;)b="0"+b;k=b+k}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function q(N){if(N.h!=0)return!1;for(var S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function K(N){return N.h==-1}r.l=function(N){return N=ce(this,N),K(N)?-1:q(N)?0:1};function O(N){for(var S=N.g.length,P=[],k=0;k<S;k++)P[k]=~N.g[k];return new d(P,~N.h).add(C)}r.abs=function(){return K(this)?O(this):this},r.add=function(N){for(var S=Math.max(this.g.length,N.g.length),P=[],k=0,D=0;D<=S;D++){var b=k+(this.i(D)&65535)+(N.i(D)&65535),x=(b>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);k=x>>>16,b&=65535,x&=65535,P[D]=x<<16|b}return new d(P,P[P.length-1]&-2147483648?-1:0)};function ce(N,S){return N.add(O(S))}r.j=function(N){if(q(this)||q(N))return I;if(K(this))return K(N)?O(this).j(O(N)):O(O(this).j(N));if(K(N))return O(this.j(O(N)));if(0>this.l(U)&&0>N.l(U))return v(this.m()*N.m());for(var S=this.g.length+N.g.length,P=[],k=0;k<2*S;k++)P[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<N.g.length;D++){var b=this.i(k)>>>16,x=this.i(k)&65535,se=N.i(D)>>>16,be=N.i(D)&65535;P[2*k+2*D]+=x*be,pe(P,2*k+2*D),P[2*k+2*D+1]+=b*be,pe(P,2*k+2*D+1),P[2*k+2*D+1]+=x*se,pe(P,2*k+2*D+1),P[2*k+2*D+2]+=b*se,pe(P,2*k+2*D+2)}for(k=0;k<S;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=S;k<2*S;k++)P[k]=0;return new d(P,0)};function pe(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function le(N,S){this.g=N,this.h=S}function de(N,S){if(q(S))throw Error("division by zero");if(q(N))return new le(I,I);if(K(N))return S=de(O(N),S),new le(O(S.g),O(S.h));if(K(S))return S=de(N,O(S)),new le(O(S.g),S.h);if(30<N.g.length){if(K(N)||K(S))throw Error("slowDivide_ only works with positive integers.");for(var P=C,k=S;0>=k.l(N);)P=ue(P),k=ue(k);var D=me(P,1),b=me(k,1);for(k=me(k,2),P=me(P,2);!q(k);){var x=b.add(k);0>=x.l(N)&&(D=D.add(P),b=x),k=me(k,1),P=me(P,1)}return S=ce(N,D.j(S)),new le(D,S)}for(D=I;0<=N.l(S);){for(P=Math.max(1,Math.floor(N.m()/S.m())),k=Math.ceil(Math.log(P)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),b=v(P),x=b.j(S);K(x)||0<x.l(N);)P-=k,b=v(P),x=b.j(S);q(b)&&(b=C),D=D.add(b),N=ce(N,x)}return new le(D,N)}r.A=function(N){return de(this,N).h},r.and=function(N){for(var S=Math.max(this.g.length,N.g.length),P=[],k=0;k<S;k++)P[k]=this.i(k)&N.i(k);return new d(P,this.h&N.h)},r.or=function(N){for(var S=Math.max(this.g.length,N.g.length),P=[],k=0;k<S;k++)P[k]=this.i(k)|N.i(k);return new d(P,this.h|N.h)},r.xor=function(N){for(var S=Math.max(this.g.length,N.g.length),P=[],k=0;k<S;k++)P[k]=this.i(k)^N.i(k);return new d(P,this.h^N.h)};function ue(N){for(var S=N.g.length+1,P=[],k=0;k<S;k++)P[k]=N.i(k)<<1|N.i(k-1)>>>31;return new d(P,N.h)}function me(N,S){var P=S>>5;S%=32;for(var k=N.g.length-P,D=[],b=0;b<k;b++)D[b]=0<S?N.i(b+P)>>>S|N.i(b+P+1)<<32-S:N.i(b+P);return new d(D,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,j_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=w,ts=d}).apply(typeof Ty<"u"?Ty:typeof self<"u"?self:typeof window<"u"?window:{});var qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D_,Ya,V_,sc,sf,O_,L_,M_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof qu=="object"&&qu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in _))break e;_=_[M]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,T=!1,M={next:function(){if(!T&&_<u.length){var G=_++;return{value:m(G,u[G]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function w(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function C(u,m,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:I,C.apply(null,arguments)}function U(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function q(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,M,G){for(var he=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)he[ot-2]=arguments[ot];return m.prototype[M].apply(T,he)}}function K(u){const m=u.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function O(u,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(g(T)){const M=u.length||0,G=T.length||0;u.length=M+G;for(let he=0;he<G;he++)u[M+he]=T[he]}else u.push(T)}}class ce{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function pe(u){return/^[\s\xa0]*$/.test(u)}function le(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function de(u){return de[" "](u),u}de[" "]=function(){};var ue=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function me(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function N(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let _,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(_ in T)u[_]=T[_];for(let G=0;G<P.length;G++)_=P[G],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function D(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function b(u){p.setTimeout(()=>{throw u},0)}function x(){var u=Se;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class se{constructor(){this.h=this.g=null}add(m,_){const T=be.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var be=new ce(()=>new Be,u=>u.reset());class Be{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,oe=!1,Se=new se,ge=()=>{const u=p.Promise.resolve(void 0);Ve=()=>{u.then(L)}};var L=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(_){b(_)}var m=be;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}oe=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Le=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function Me(u,m){if(Ee.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(ue){e:{try{de(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ze[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Me.aa.h.call(this)}}q(Me,Ee);var ze={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Re="closure_listenable_"+(1e6*Math.random()|0),$e=0;function it(u,m,_,T,M){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=M,this.key=++$e,this.da=this.fa=!1}function wt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Nn(u){this.src=u,this.g={},this.h=0}Nn.prototype.add=function(u,m,_,T,M){var G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);var he=Ot(u,m,T,M);return-1<he?(m=u[he],_||(m.fa=!1)):(m=new it(m,this.src,G,!!T,M),m.fa=_,u.push(m)),m};function St(u,m){var _=m.type;if(_ in u.g){var T=u.g[_],M=Array.prototype.indexOf.call(T,m,void 0),G;(G=0<=M)&&Array.prototype.splice.call(T,M,1),G&&(wt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ot(u,m,_,T){for(var M=0;M<u.length;++M){var G=u[M];if(!G.da&&G.listener==m&&G.capture==!!_&&G.ha==T)return M}return-1}var vn="closure_lm_"+(1e6*Math.random()|0),ir={};function fn(u,m,_,T,M){if(Array.isArray(m)){for(var G=0;G<m.length;G++)fn(u,m[G],_,T,M);return null}return _=Hr(_),u&&u[Re]?u.K(m,_,v(T)?!!T.capture:!1,M):Ge(u,m,_,!1,T,M)}function Ge(u,m,_,T,M,G){if(!m)throw Error("Invalid event type");var he=v(M)?!!M.capture:!!M,ot=rn(u);if(ot||(u[vn]=ot=new Nn(u)),_=ot.add(m,_,T,he,G),_.proxy)return _;if(T=sr(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Le||(M=he),M===void 0&&(M=!1),u.addEventListener(m.toString(),T,M);else if(u.attachEvent)u.attachEvent(wn(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function sr(){function u(_){return m.call(u.src,u.listener,_)}const m=jn;return u}function or(u,m,_,T,M){if(Array.isArray(m))for(var G=0;G<m.length;G++)or(u,m[G],_,T,M);else T=v(T)?!!T.capture:!!T,_=Hr(_),u&&u[Re]?(u=u.i,m=String(m).toString(),m in u.g&&(G=u.g[m],_=Ot(G,_,T,M),-1<_&&(wt(G[_]),Array.prototype.splice.call(G,_,1),G.length==0&&(delete u.g[m],u.h--)))):u&&(u=rn(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ot(m,_,T,M)),(_=-1<u?m[u]:null)&&_n(_))}function _n(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Re])St(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(wn(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=rn(m))?(St(_,u),_.h==0&&(_.src=null,m[vn]=null)):wt(u)}}}function wn(u){return u in ir?ir[u]:ir[u]="on"+u}function jn(u,m){if(u.da)u=!0;else{m=new Me(m,this);var _=u.listener,T=u.ha||u.src;u.fa&&_n(u),u=_.call(T,m)}return u}function rn(u){return u=u[vn],u instanceof Nn?u:null}var Kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(u){return typeof u=="function"?u:(u[Kt]||(u[Kt]=function(m){return u.handleEvent(m)}),u[Kt])}function mt(){J.call(this),this.i=new Nn(this),this.M=this,this.F=null}q(mt,J),mt.prototype[Re]=!0,mt.prototype.removeEventListener=function(u,m,_,T){or(this,u,m,_,T)};function R(u,m){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new Ee(m,u);else if(m instanceof Ee)m.target=m.target||u;else{var M=m;m=new Ee(T,u),k(m,M)}if(M=!0,_)for(var G=_.length-1;0<=G;G--){var he=m.g=_[G];M=te(he,T,!0,m)&&M}if(he=m.g=u,M=te(he,T,!0,m)&&M,M=te(he,T,!1,m)&&M,_)for(G=0;G<_.length;G++)he=m.g=_[G],M=te(he,T,!1,m)&&M}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],T=0;T<_.length;T++)wt(_[T]);delete u.g[m],u.h--}}this.F=null},mt.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},mt.prototype.L=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function te(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,G=0;G<m.length;++G){var he=m[G];if(he&&!he.da&&he.capture==_){var ot=he.listener,Lt=he.ha||he.src;he.fa&&St(u.i,he),M=ot.call(Lt,T)!==!1&&M}}return M&&!T.defaultPrevented}function Y(u,m,_){if(typeof u=="function")_&&(u=C(u,_));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function z(u){u.g=Y(()=>{u.g=null,u.i&&(u.i=!1,z(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class fe extends J{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:z(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(u){J.call(this),this.h=u,this.g={}}q(Fe,J);var at=[];function $(u){me(u.g,function(m,_){this.g.hasOwnProperty(_)&&_n(m)},u),u.g={}}Fe.prototype.N=function(){Fe.aa.N.call(this),$(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Z=p.JSON.stringify,Q=p.JSON.parse,xe=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function We(){}We.prototype.h=null;function Ke(u){return u.h||(u.h=u.i())}function tt(){}var gt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function En(){Ee.call(this,"d")}q(En,Ee);function Ir(){Ee.call(this,"c")}q(Ir,Ee);var Bt={},Sr=null;function qr(){return Sr=Sr||new mt}Bt.La="serverreachability";function vs(u){Ee.call(this,Bt.La,u)}q(vs,Ee);function ar(u){const m=qr();R(m,new vs(m))}Bt.STAT_EVENT="statevent";function _s(u,m){Ee.call(this,Bt.STAT_EVENT,u),this.stat=m}q(_s,Ee);function Et(u){const m=qr();R(m,new _s(m,u))}Bt.Ma="timingevent";function _i(u,m){Ee.call(this,Bt.Ma,u),this.size=m}q(_i,Ee);function Dn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function Gr(){this.g=!0}Gr.prototype.xa=function(){this.g=!1};function Kr(u,m,_,T,M,G){u.info(function(){if(u.g)if(G)for(var he="",ot=G.split("&"),Lt=0;Lt<ot.length;Lt++){var Xe=ot[Lt].split("=");if(1<Xe.length){var $t=Xe[0];Xe=Xe[1];var kt=$t.split("_");he=2<=kt.length&&kt[1]=="type"?he+($t+"="+Xe+"&"):he+($t+"=redacted&")}}else he=null;else he=G;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+m+`
`+_+`
`+he})}function wi(u,m,_,T,M,G,he){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+m+`
`+_+`
`+G+" "+he})}function Vn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Cr(u,_)+(T?" "+T:"")})}function yt(u,m){u.info(function(){return"TIMEOUT: "+m})}Gr.prototype.info=function(){};function Cr(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var G=M[0];if(G!="noop"&&G!="stop"&&G!="close")for(var he=1;he<M.length;he++)M[he]=""}}}}return Z(_)}catch{return m}}var to={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lr;function ws(){}q(ws,We),ws.prototype.g=function(){return new XMLHttpRequest},ws.prototype.i=function(){return{}},lr=new ws;function ur(u,m,_,T){this.j=u,this.i=m,this.l=_,this.R=T||1,this.U=new Fe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bl}function bl(){this.i=null,this.g="",this.h=!1}var da={},no={};function ro(u,m,_){u.L=1,u.v=Si(Ln(m)),u.m=_,u.P=!0,ha(u,null)}function ha(u,m){u.F=Date.now(),ut(u),u.A=Ln(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Ri(_.i,"t",T),u.C=0,_=u.j.J,u.h=new bl,u.g=Ql(u.j,_?m:null,!u.m),0<u.O&&(u.M=new fe(C(u.Y,u,u.g),u.O)),m=u.U,_=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(at[0]=M.toString()),M=at);for(var G=0;G<M.length;G++){var he=fn(_,M[G],T||m.handleEvent,!1,m.h||m);if(!he)break;m.g[he.key]=he}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ar(),Kr(u.i,u.u,u.A,u.l,u.R,u.m)}ur.prototype.ca=function(u){u=u.target;const m=this.M;m&&Tn(u)==3?m.j():this.Y(u)},ur.prototype.Y=function(u){try{if(u==this.g)e:{const kt=Tn(this.g);var m=this.g.Ba();const Gn=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||va(this.g)))){this.J||kt!=4||m==7||(m==8||0>=Gn?ar(3):ar(2)),Es(this);var _=this.g.Z();this.X=_;t:if(Nl(this)){var T=va(this.g);u="";var M=T.length,G=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hn(this),Ei(this);var he="";break t}this.h.i=new p.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(G&&m==M-1)});T.length=0,this.h.g+=u,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=_==200,wi(this.i,this.u,this.A,this.l,this.R,kt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,Lt=this.g;if((ot=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pe(ot)){var Xe=ot;break t}}Xe=null}if(_=Xe)Vn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fa(this,_);else{this.o=!1,this.s=3,Et(12),Hn(this),Ei(this);break e}}if(this.P){_=!0;let Fn;for(;!this.J&&this.C<he.length;)if(Fn=nd(this,he),Fn==no){kt==4&&(this.s=4,Et(14),_=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==da){this.s=4,Et(15),Vn(this.i,this.l,he,"[Invalid Chunk]"),_=!1;break}else Vn(this.i,this.l,Fn,null),fa(this,Fn);if(Nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||he.length!=0||this.h.h||(this.s=1,Et(16),_=!1),this.o=this.o&&_,!_)Vn(this.i,this.l,he,"[Invalid Chunked Response]"),Hn(this),Ei(this);else if(0<he.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),wa($t),$t.M=!0,Et(11))}}else Vn(this.i,this.l,he,null),fa(this,he);kt==4&&Hn(this),this.o&&!this.J&&(kt==4?mo(this.j,this):(this.o=!1,ut(this)))}else uo(this.g),_==400&&0<he.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),Hn(this),Ei(this)}}}catch{}finally{}};function Nl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function nd(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?no:(_=Number(m.substring(_,T)),isNaN(_)?da:(T+=1,T+_>m.length?no:(m=m.slice(T,T+_),u.C=T+_,m)))}ur.prototype.cancel=function(){this.J=!0,Hn(this)};function ut(u){u.S=Date.now()+u.I,jl(u,u.I)}function jl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Dn(C(u.ba,u),m)}function Es(u){u.B&&(p.clearTimeout(u.B),u.B=null)}ur.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(yt(this.i,this.A),this.L!=2&&(ar(),Et(17)),Hn(this),this.s=2,Ei(this)):jl(this,this.S-u)};function Ei(u){u.j.G==0||u.J||mo(u.j,u)}function Hn(u){Es(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,$(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function fa(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||pn(_.h,u))){if(!u.K&&pn(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)po(_),pr(_);else break e;fo(_),Et(18)}}else _.za=M[1],0<_.za-_.T&&37500>M[2]&&_.F&&_.v==0&&!_.C&&(_.C=Dn(C(_.Za,_),6e3));if(1>=Vl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Zr(_,11)}else if((u.K||_.g==u)&&po(_),!pe(m))for(M=_.Da.g.parse(m),m=0;m<M.length;m++){let Xe=M[m];if(_.T=Xe[0],Xe=Xe[1],_.G==2)if(Xe[0]=="c"){_.K=Xe[1],_.ia=Xe[2];const $t=Xe[3];$t!=null&&(_.la=$t,_.j.info("VER="+_.la));const kt=Xe[4];kt!=null&&(_.Aa=kt,_.j.info("SVER="+_.Aa));const Gn=Xe[5];Gn!=null&&typeof Gn=="number"&&0<Gn&&(T=1.5*Gn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Fn=u.g;if(Fn){const Ps=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ps){var G=T.h;G.g||Ps.indexOf("spdy")==-1&&Ps.indexOf("quic")==-1&&Ps.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(pa(G,G.h),G.h=null))}if(T.D){const yo=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(T.ya=yo,lt(T.I,T.D,yo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var he=u;if(T.qa=Kl(T,T.J?T.ia:null,T.W),he.K){Ol(T.h,he);var ot=he,Lt=T.L;Lt&&(ot.I=Lt),ot.B&&(Es(ot),ut(ot)),T.g=he}else Rs(T);0<_.i.length&&kr(_)}else Xe[0]!="stop"&&Xe[0]!="close"||Zr(_,7);else _.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Zr(_,7):Yt(_):Xe[0]!="noop"&&_.l&&_.l.ta(Xe),_.v=0)}}ar(4)}catch{}}var Dl=class{constructor(u,m){this.g=u,this.map=m}};function xs(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function On(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Vl(u){return u.h?1:u.g?u.g.size:0}function pn(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function pa(u,m){u.g?u.g.add(m):u.h=m}function Ol(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}xs.prototype.cancel=function(){if(this.i=Ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ll(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return K(u.i)}function io(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,T=0;T<_;T++)m.push(u[T]);return m}m=[],_=0;for(T in u)m[_++]=u[T];return m}function so(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const T in u)m[_++]=T;return m}}}function xi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=so(u),T=io(u),M=T.length,G=0;G<M;G++)m.call(void 0,T[G],_&&_[G],u)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rd(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),M=null;if(0<=T){var G=u[_].substring(0,T);M=u[_].substring(T+1)}else G=u[_];m(G,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Qr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Qr){this.h=u.h,Is(this,u.j),this.o=u.o,this.g=u.g,Ti(this,u.s),this.l=u.l;var m=u.i,_=new Rr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ii(this,_),this.m=u.m}else u&&(m=String(u).match(Ts))?(this.h=!1,Is(this,m[1]||"",!0),this.o=Je(m[2]||""),this.g=Je(m[3]||"",!0),Ti(this,m[4]),this.l=Je(m[5]||"",!0),Ii(this,m[6]||"",!0),this.m=Je(m[7]||"")):(this.h=!1,this.i=new Rr(null,this.h))}Qr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Ci(m,oo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ci(m,oo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ci(_,_.charAt(0)=="/"?Ul:Fl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ci(_,ma)),u.join("")};function Ln(u){return new Qr(u)}function Is(u,m,_){u.j=_?Je(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ti(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ii(u,m,_){m instanceof Rr?(u.i=m,Pr(u.i,u.h)):(_||(m=Ci(m,zl)),u.i=new Rr(m,u.h))}function lt(u,m,_){u.i.set(m,_)}function Si(u){return lt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Je(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ci(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Ml),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ml(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var oo=/[#\/\?@]/g,Fl=/[#\?:]/g,Ul=/[#\?]/g,zl=/[#\?@]/g,ma=/#/g;function Rr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Qt(u){u.g||(u.g=new Map,u.h=0,u.i&&rd(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Rr.prototype,r.add=function(u,m){Qt(this),this.i=null,u=qn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function cr(u,m){Qt(u),m=qn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function dr(u,m){return Qt(u),m=qn(u,m),u.g.has(m)}r.forEach=function(u,m){Qt(this),this.g.forEach(function(_,T){_.forEach(function(M){u.call(m,M,T,this)},this)},this)},r.na=function(){Qt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const M=u[T];for(let G=0;G<M.length;G++)_.push(m[T])}return _},r.V=function(u){Qt(this);let m=[];if(typeof u=="string")dr(this,u)&&(m=m.concat(this.g.get(qn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Qt(this),this.i=null,u=qn(this,u),dr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ri(u,m,_){cr(u,m),0<_.length&&(u.i=null,u.g.set(qn(u,m),K(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const G=encodeURIComponent(String(T)),he=this.V(T);for(T=0;T<he.length;T++){var M=G;he[T]!==""&&(M+="="+encodeURIComponent(String(he[T]))),u.push(M)}}return this.i=u.join("&")};function qn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Pr(u,m){m&&!u.j&&(Qt(u),u.i=null,u.g.forEach(function(_,T){var M=T.toLowerCase();T!=M&&(cr(this,T),Ri(this,M,_))},u)),u.j=m}function id(u,m){const _=new Gr;if(p.Image){const T=new Image;T.onload=U(xn,_,"TestLoadImage: loaded",!0,m,T),T.onerror=U(xn,_,"TestLoadImage: error",!1,m,T),T.onabort=U(xn,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=U(xn,_,"TestLoadImage: timeout",!1,m,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Bl(u,m){const _=new Gr,T=new AbortController,M=setTimeout(()=>{T.abort(),xn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(G=>{clearTimeout(M),G.ok?xn(_,"TestPingServer: ok",!0,m):xn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),xn(_,"TestPingServer: error",!1,m)})}function xn(u,m,_,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(_)}catch{}}function sd(){this.g=new xe}function $l(u,m,_){const T=_||"";try{xi(u,function(M,G){let he=M;v(M)&&(he=Z(M)),m.push(T+G+"="+encodeURIComponent(he))})}catch(M){throw m.push(T+"type="+encodeURIComponent("_badmap")),M}}function Yr(u){this.l=u.Ub||null,this.j=u.eb||!1}q(Yr,We),Yr.prototype.g=function(){return new Ss(this.l,this.j)},Yr.prototype.i=(function(u){return function(){return u}})({});function Ss(u,m){mt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Ss,mt),r=Ss.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,fr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,fr(this)),this.g&&(this.readyState=3,fr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?hr(this):fr(this),this.readyState==3&&Wl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,hr(this))},r.Qa=function(u){this.g&&(this.response=u,hr(this))},r.ga=function(){this.g&&hr(this)};function hr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,fr(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function fr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Jr(u){let m="";return me(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Pi(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Jr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):lt(u,m,_))}function vt(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(vt,mt);var od=/^https?$/i,ga=["POST","PUT"];r=vt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lr.g(),this.v=this.o?Ke(this.o):Ke(lr),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(G){Cs(this,G);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)_.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const G of T.keys())_.set(G,T.get(G));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),M=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(ga,m,void 0))||T||M||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,he]of _)this.g.setRequestHeader(G,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lo(this),this.u=!0,this.g.send(u),this.u=!1}catch(G){Cs(this,G)}};function Cs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ao(u),Mn(u)}function ao(u){u.A||(u.A=!0,R(u,"complete"),R(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,R(this,"complete"),R(this,"abort"),Mn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mn(this,!0)),vt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ya(this):this.bb())},r.bb=function(){ya(this)};function ya(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Tn(u)!=4||u.Z()!=2)){if(u.u&&Tn(u)==4)Y(u.Ea,0,u);else if(R(u,"readystatechange"),Tn(u)==4){u.h=!1;try{const he=u.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=he===0){var M=String(u.D).match(Ts)[1]||null;!M&&p.self&&p.self.location&&(M=p.self.location.protocol.slice(0,-1)),T=!od.test(M?M.toLowerCase():"")}_=T}if(_)R(u,"complete"),R(u,"success");else{u.m=6;try{var G=2<Tn(u)?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.Z()+"]",ao(u)}}finally{Mn(u)}}}}function Mn(u,m){if(u.g){lo(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||R(u,"ready");try{_.onreadystatechange=T}catch{}}}function lo(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Tn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Q(m)}};function va(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function uo(u){const m={};u=(u.g&&2<=Tn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(pe(u[T]))continue;var _=D(u[T]);const M=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=m[M]||[];m[M]=G,G.push(_)}N(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ar(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function _a(u){this.Aa=0,this.i=[],this.j=new Gr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ar("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ar("baseRetryDelayMs",5e3,u),this.cb=Ar("retryDelaySeedMs",1e4,u),this.Wa=Ar("forwardChannelMaxRetries",2,u),this.wa=Ar("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new xs(u&&u.concurrentRequestLimit),this.Da=new sd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=_a.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,T){Et(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Kl(this,null,this.W),kr(this)};function Yt(u){if(co(u),u.G==3){var m=u.U++,_=Ln(u.I);if(lt(_,"SID",u.K),lt(_,"RID",m),lt(_,"TYPE","terminate"),Xr(u,_),m=new ur(u,u.j,m),m.L=2,m.v=Si(Ln(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Ql(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ut(m)}Gl(u)}function pr(u){u.g&&(wa(u),u.g.cancel(),u.g=null)}function co(u){pr(u),u.u&&(p.clearTimeout(u.u),u.u=null),po(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function kr(u){if(!On(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ve||ge(),oe||(Ve(),oe=!0),Se.add(m,u),u.B=0}}function ad(u,m){return Vl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Dn(C(u.Ga,u,m),ql(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new ur(this,this.j,u);let G=this.o;if(this.S&&(G?(G=S(G),k(G,this.S)):G=this.S),this.m!==null||this.O||(M.H=G,G=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Ai(this,M,m),_=Ln(this.I),lt(_,"RID",u),lt(_,"CVER",22),this.D&&lt(_,"X-HTTP-Session-Id",this.D),Xr(this,_),G&&(this.O?m="headers="+encodeURIComponent(String(Jr(G)))+"&"+m:this.m&&Pi(_,this.m,G)),pa(this.h,M),this.Ua&&lt(_,"TYPE","init"),this.P?(lt(_,"$req",m),lt(_,"SID","null"),M.T=!0,ro(M,_,null)):ro(M,_,m),this.G=2}}else this.G==3&&(u?ho(this,u):this.i.length==0||On(this.h)||ho(this))};function ho(u,m){var _;m?_=m.l:_=u.U++;const T=Ln(u.I);lt(T,"SID",u.K),lt(T,"RID",_),lt(T,"AID",u.T),Xr(u,T),u.m&&u.o&&Pi(T,u.m,u.o),_=new ur(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ai(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),pa(u.h,_),ro(_,T,m)}function Xr(u,m){u.H&&me(u.H,function(_,T){lt(m,T,_)}),u.l&&xi({},function(_,T){lt(m,T,_)})}function Ai(u,m,_){_=Math.min(u.i.length,_);var T=u.l?C(u.l.Na,u.l,u):null;e:{var M=u.i;let G=-1;for(;;){const he=["count="+_];G==-1?0<_?(G=M[0].g,he.push("ofs="+G)):G=0:he.push("ofs="+G);let ot=!0;for(let Lt=0;Lt<_;Lt++){let Xe=M[Lt].g;const $t=M[Lt].map;if(Xe-=G,0>Xe)G=Math.max(0,M[Lt].g-100),ot=!1;else try{$l($t,he,"req"+Xe+"_")}catch{T&&T($t)}}if(ot){T=he.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,T}function Rs(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ve||ge(),oe||(Ve(),oe=!0),Se.add(m,u),u.v=0}}function fo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Dn(C(u.Fa,u),ql(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Hl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Dn(C(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),pr(this),Hl(this))};function wa(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Hl(u){u.g=new ur(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Ln(u.qa);lt(m,"RID","rpc"),lt(m,"SID",u.K),lt(m,"AID",u.T),lt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&lt(m,"TO",u.ja),lt(m,"TYPE","xmlhttp"),Xr(u,m),u.m&&u.o&&Pi(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Si(Ln(m)),_.m=null,_.P=!0,ha(_,u)}r.Za=function(){this.C!=null&&(this.C=null,pr(this),fo(this),Et(19))};function po(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function mo(u,m){var _=null;if(u.g==m){po(u),wa(u),u.g=null;var T=2}else if(pn(u.h,m))_=m.D,Ol(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;T=qr(),R(T,new _i(T,_)),kr(u)}else Rs(u);else if(M=m.s,M==3||M==0&&0<m.X||!(T==1&&ad(u,m)||T==2&&fo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),M){case 1:Zr(u,5);break;case 4:Zr(u,10);break;case 3:Zr(u,6);break;default:Zr(u,2)}}}function ql(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Zr(u,m){if(u.j.info("Error code "+m),m==2){var _=C(u.fb,u),T=u.Xa;const M=!T;T=new Qr(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Is(T,"https"),Si(T),M?id(T.toString(),_):Bl(T.toString(),_)}else Et(2);u.G=0,u.l&&u.l.sa(m),Gl(u),co(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Gl(u){if(u.G=0,u.ka=[],u.l){const m=Ll(u.h);(m.length!=0||u.i.length!=0)&&(O(u.ka,m),O(u.ka,u.i),u.h.i.length=0,K(u.i),u.i.length=0),u.l.ra()}}function Kl(u,m,_){var T=_ instanceof Qr?Ln(_):new Qr(_);if(T.g!="")m&&(T.g=m+"."+T.g),Ti(T,T.s);else{var M=p.location;T=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var G=new Qr(null);T&&Is(G,T),m&&(G.g=m),M&&Ti(G,M),_&&(G.l=_),T=G}return _=u.D,m=u.ya,_&&m&&lt(T,_,m),lt(T,"VER",u.la),Xr(u,T),T}function Ql(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new vt(new Yr({eb:_})):new vt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ea(){}r=Ea.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function go(){}go.prototype.g=function(u,m){return new mn(u,m)};function mn(u,m){mt.call(this),this.g=new _a(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!pe(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!pe(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new br(this)}q(mn,mt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Yt(this.g)},mn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Z(u),u=_);m.i.push(new Dl(m.Ya++,u)),m.G==3&&kr(m)},mn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,mn.aa.N.call(this)};function Yl(u){En.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}q(Yl,En);function Jl(){Ir.call(this),this.status=1}q(Jl,Ir);function br(u){this.g=u}q(br,Ea),br.prototype.ua=function(){R(this.g,"a")},br.prototype.ta=function(u){R(this.g,new Yl(u))},br.prototype.sa=function(u){R(this.g,new Jl)},br.prototype.ra=function(){R(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,M_=function(){return new go},L_=function(){return qr()},O_=Bt,sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},to.NO_ERROR=0,to.TIMEOUT=8,to.HTTP_ERROR=6,sc=to,kl.COMPLETE="complete",V_=kl,tt.EventType=gt,gt.OPEN="a",gt.CLOSE="b",gt.ERROR="c",gt.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Ya=tt,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,D_=vt}).apply(typeof qu<"u"?qu:typeof self<"u"?self:typeof window<"u"?window:{});const Iy="@firebase/firestore",Sy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Af("@firebase/firestore");function Fo(){return Ys.logLevel}function ve(r,...e){if(Ys.logLevel<=Qe.DEBUG){const t=e.map($f);Ys.debug(`Firestore (${oa}): ${r}`,...t)}}function mi(r,...e){if(Ys.logLevel<=Qe.ERROR){const t=e.map($f);Ys.error(`Firestore (${oa}): ${r}`,...t)}}function is(r,...e){if(Ys.logLevel<=Qe.WARN){const t=e.map($f);Ys.warn(`Firestore (${oa}): ${r}`,...t)}}function $f(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,F_(r,i,t)}function F_(r,e,t){let i=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw mi(i),new Error(i)}function st(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||F_(e,o,i)}function Ue(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends vi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cn.UNAUTHENTICATED)))}shutdown(){}}class bS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class NS{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new hi,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new hi)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(st(typeof i.accessToken=="string",31837,{l:i}),new U_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class jS{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DS{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new jS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);const i=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=OS(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function He(r,e){return r<e?-1:r>e?1:0}function of(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return He(i,o);{const l=z_(),d=LS(l.encode(Ry(r,t)),l.encode(Ry(e,t)));return d!==0?d:He(i,o)}}t+=i>65535?2:1}return He(r.length,e.length)}function Ry(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function LS(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return He(r[t],e[t]);return He(r.length,e.length)}function Yo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="__name__";class Or{constructor(e,t,i){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&je(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Or.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return He(e.length,t.length)}static compareSegments(e,t){const i=Or.isNumericId(e),o=Or.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Or.extractNumericId(e).compare(Or.extractNumericId(t)):of(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ts.fromString(e.substring(4,e.length-2))}}class ft extends Or{construct(e,t,i){return new ft(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ie(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const MS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Or{construct(e,t,i){return new en(e,t,i)}static isValidIdentifier(e){return MS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Py}static keyField(){return new en([Py])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Ie(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Ie(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ie(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(l(),o++)}if(l(),d)throw new Ie(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(ft.fromString(e))}static fromName(e){return new Pe(ft.fromString(e).popFirst(5))}static empty(){return new Pe(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(r,e,t){if(!t)throw new Ie(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function FS(r,e,t,i){if(e===!0&&i===!0)throw new Ie(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ay(r){if(!Pe.isDocumentKey(r))throw new Ie(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ky(r){if(Pe.isDocumentKey(r))throw new Ie(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Hf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":je(12329,{type:typeof r})}function Tr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ie(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hf(r);throw new Ie(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Sl(r,e){if(!$_(r))throw new Ie(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ie(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=-62135596800,Ny=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ny);return new pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<by)throw new Ie(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ny}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sl(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-by;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Dt("string",pt._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new pt(0,0))}static max(){return new Oe(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=-1;function US(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(i===1e9?new pt(t+1,0):new pt(t,i));return new ss(o,Pe.empty(),e)}function zS(r){return new ss(r.readTime,r.key,hl)}class ss{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ss(Oe.min(),Pe.empty(),hl)}static max(){return new ss(Oe.max(),Pe.empty(),hl)}}function BS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(r.documentKey,e.documentKey),t!==0?t:He(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==$S)throw r;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,i)=>{t(e)}))}static reject(e){return new X(((t,i)=>{i(e)}))}static waitFor(e){return new X(((t,i)=>{let o=0,l=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++l,d&&l===o&&t()}),(g=>i(g)))})),d=!0,l===o&&t()}))}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next((o=>o?X.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new X(((i,o)=>{const l=e.length,d=new Array(l);let p=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next((w=>{d[v]=w,++p,p===l&&i(d)}),(w=>o(w)))}}))}static doWhile(e,t){return new X(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function HS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function la(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Mc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=-1;function Fc(r){return r==null}function wc(r){return r===0&&1/r==-1/0}function qS(r){return typeof r=="number"&&Number.isInteger(r)&&!wc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="";function GS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=jy(e)),e=KS(r.get(t),e);return jy(e)}function KS(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case W_:t+="";break;default:t+=l}}return t}function jy(r){return r+W_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function gs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function H_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new It(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Zt.RED,this.left=o??Zt.EMPTY,this.right=l??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Zt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vy(this.data.getIterator())}getIteratorFrom(e){return new Vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class Vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Wn([])}unionWith(e){let t=new zt(en.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new q_("Invalid base64 string: "+l):l}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const QS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(r){if(st(!!r,39018),typeof r=="string"){let e=0;const t=QS.exec(r);if(st(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pt(r.seconds),nanos:Pt(r.nanos)}}function Pt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function as(r){return typeof r=="string"?nn.fromBase64String(r):nn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="server_timestamp",K_="__type__",Q_="__previous_value__",Y_="__local_write_time__";function Gf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[K_])===null||t===void 0?void 0:t.stringValue)===G_}function Uc(r){const e=r.mapValue.fields[Q_];return Gf(e)?Uc(e):e}function fl(r){const e=os(r.mapValue.fields[Y_].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,t,i,o,l,d,p,g,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=w}}const Ec="(default)";class pl{constructor(e,t){this.projectId=e,this.database=t||Ec}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database===Ec}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="__type__",JS="__max__",Ku={mapValue:{}},X_="__vector__",xc="value";function ls(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Gf(r)?4:ZS(r)?9007199254740991:XS(r)?10:11:je(28295,{value:r})}function $r(r,e){if(r===e)return!0;const t=ls(r);if(t!==ls(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return fl(r).isEqual(fl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=os(o.timestampValue),p=os(l.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return as(o.bytesValue).isEqual(as(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return Pt(o.geoPointValue.latitude)===Pt(l.geoPointValue.latitude)&&Pt(o.geoPointValue.longitude)===Pt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Pt(o.integerValue)===Pt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=Pt(o.doubleValue),p=Pt(l.doubleValue);return d===p?wc(d)===wc(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return Yo(r.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Dy(d)!==Dy(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!$r(d[g],p[g])))return!1;return!0})(r,e);default:return je(52216,{left:r})}}function ml(r,e){return(r.values||[]).find((t=>$r(t,e)))!==void 0}function Jo(r,e){if(r===e)return 0;const t=ls(r),i=ls(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const p=Pt(l.integerValue||l.doubleValue),g=Pt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return Oy(r.timestampValue,e.timestampValue);case 4:return Oy(fl(r),fl(e));case 5:return of(r.stringValue,e.stringValue);case 6:return(function(l,d){const p=as(l),g=as(d);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const p=l.split("/"),g=d.split("/");for(let v=0;v<p.length&&v<g.length;v++){const w=He(p[v],g[v]);if(w!==0)return w}return He(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const p=He(Pt(l.latitude),Pt(d.latitude));return p!==0?p:He(Pt(l.longitude),Pt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ly(r.arrayValue,e.arrayValue);case 10:return(function(l,d){var p,g,v,w;const I=l.fields||{},C=d.fields||{},U=(p=I[xc])===null||p===void 0?void 0:p.arrayValue,q=(g=C[xc])===null||g===void 0?void 0:g.arrayValue,K=He(((v=U==null?void 0:U.values)===null||v===void 0?void 0:v.length)||0,((w=q==null?void 0:q.values)===null||w===void 0?void 0:w.length)||0);return K!==0?K:Ly(U,q)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Ku.mapValue&&d===Ku.mapValue)return 0;if(l===Ku.mapValue)return 1;if(d===Ku.mapValue)return-1;const p=l.fields||{},g=Object.keys(p),v=d.fields||{},w=Object.keys(v);g.sort(),w.sort();for(let I=0;I<g.length&&I<w.length;++I){const C=of(g[I],w[I]);if(C!==0)return C;const U=Jo(p[g[I]],v[w[I]]);if(U!==0)return U}return He(g.length,w.length)})(r.mapValue,e.mapValue);default:throw je(23264,{le:t})}}function Oy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return He(r,e);const t=os(r),i=os(e),o=He(t.seconds,i.seconds);return o!==0?o:He(t.nanos,i.nanos)}function Ly(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Jo(t[o],i[o]);if(l)return l}return He(t.length,i.length)}function Xo(r){return af(r)}function af(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=os(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return as(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Pe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=af(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of i)l?l=!1:o+=",",o+=`${d}:${af(t.fields[d])}`;return o+"}"})(r.mapValue):je(61005,{value:r})}function oc(r){switch(ls(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uc(r);return e?16+oc(e):16;case 5:return 2*r.stringValue.length;case 6:return as(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+oc(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return gs(i.fields,((l,d)=>{o+=l.length+oc(d)})),o})(r.mapValue);default:throw je(13486,{value:r})}}function lf(r){return!!r&&"integerValue"in r}function Kf(r){return!!r&&"arrayValue"in r}function My(r){return!!r&&"nullValue"in r}function Fy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ac(r){return!!r&&"mapValue"in r}function XS(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[J_])===null||t===void 0?void 0:t.stringValue)===X_}function rl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return gs(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=rl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function ZS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===JS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(t)}setAll(e){let t=en.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=p.popLast()}d?i[p.lastSegment()]=rl(d):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ac(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){gs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new bn(rl(this.value))}}function Z_(r){const e=[];return gs(r.fields,((t,i)=>{const o=new en([t]);if(ac(i)){const l=Z_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,i,o,l,d,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=d,this.documentState=p}static newInvalidDocument(e){return new dn(e,0,Oe.min(),Oe.min(),Oe.min(),bn.empty(),0)}static newFoundDocument(e,t,i,o){return new dn(e,1,t,Oe.min(),i,o,0)}static newNoDocument(e,t){return new dn(e,2,t,Oe.min(),Oe.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Oe.min(),Oe.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.position=e,this.inclusive=t}}function Uy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?i=Pe.comparator(Pe.fromName(d.referenceValue),t.key):i=Jo(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function zy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!$r(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function eC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{}class Ut extends e0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new nC(e,t,i):t==="array-contains"?new sC(e,i):t==="in"?new oC(e,i):t==="not-in"?new aC(e,i):t==="array-contains-any"?new lC(e,i):new Ut(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new rC(e,i):new iC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Jo(t,this.value)):t!==null&&ls(this.value)===ls(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wr extends e0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Wr(e,t)}matches(e){return t0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function t0(r){return r.op==="and"}function n0(r){return tC(r)&&t0(r)}function tC(r){for(const e of r.filters)if(e instanceof Wr)return!1;return!0}function uf(r){if(r instanceof Ut)return r.field.canonicalString()+r.op.toString()+Xo(r.value);if(n0(r))return r.filters.map((e=>uf(e))).join(",");{const e=r.filters.map((t=>uf(t))).join(",");return`${r.op}(${e})`}}function r0(r,e){return r instanceof Ut?(function(i,o){return o instanceof Ut&&i.op===o.op&&i.field.isEqual(o.field)&&$r(i.value,o.value)})(r,e):r instanceof Wr?(function(i,o){return o instanceof Wr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,d,p)=>l&&r0(d,o.filters[p])),!0):!1})(r,e):void je(19439)}function i0(r){return r instanceof Ut?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xo(t.value)}`})(r):r instanceof Wr?(function(t){return t.op.toString()+" {"+t.getFilters().map(i0).join(" ,")+"}"})(r):"Filter"}class nC extends Ut{constructor(e,t,i){super(e,t,i),this.key=Pe.fromName(i.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class rC extends Ut{constructor(e,t){super(e,"in",t),this.keys=s0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iC extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=s0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function s0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Pe.fromName(i.referenceValue)))}class sC extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kf(t)&&ml(t.arrayValue,this.value)}}class oC extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ml(this.value.arrayValue,t)}}class aC extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ml(this.value.arrayValue,t)}}class lC extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>ml(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t=null,i=[],o=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=d,this.endAt=p,this.Pe=null}}function By(r,e=null,t=[],i=[],o=null,l=null,d=null){return new uC(r,e,t,i,o,l,d)}function Qf(r){const e=Ue(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>uf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Fc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Xo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Xo(i))).join(",")),e.Pe=t}return e.Pe}function Yf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!eC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!r0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!zy(r.startAt,e.startAt)&&zy(r.endAt,e.endAt)}function cf(r){return Pe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t=null,i=[],o=[],l=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function cC(r,e,t,i,o,l,d,p){return new zc(r,e,t,i,o,l,d,p)}function Jf(r){return new zc(r)}function $y(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function dC(r){return r.collectionGroup!==null}function il(r){const e=Ue(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new zt(en.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Ic(l,i))})),t.has(en.keyField().canonicalString())||e.Te.push(new Ic(en.keyField(),i))}return e.Te}function Fr(r){const e=Ue(r);return e.Ie||(e.Ie=hC(e,il(r))),e.Ie}function hC(r,e){if(r.limitType==="F")return By(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ic(o.field,l)}));const t=r.endAt?new Tc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Tc(r.startAt.position,r.startAt.inclusive):null;return By(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function df(r,e,t){return new zc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Bc(r,e){return Yf(Fr(r),Fr(e))&&r.limitType===e.limitType}function o0(r){return`${Qf(Fr(r))}|lt:${r.limitType}`}function Uo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>i0(o))).join(", ")}]`),Fc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Xo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Xo(o))).join(",")),`Target(${i})`})(Fr(r))}; limitType=${r.limitType})`}function $c(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Pe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of il(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,g){const v=Uy(d,p,g);return d.inclusive?v<=0:v<0})(i.startAt,il(i),o)||i.endAt&&!(function(d,p,g){const v=Uy(d,p,g);return d.inclusive?v>=0:v>0})(i.endAt,il(i),o))})(r,e)}function fC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function a0(r){return(e,t)=>{let i=!1;for(const o of il(r)){const l=pC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function pC(r,e,t){const i=r.field.isKeyField()?Pe.comparator(e.key,t.key):(function(l,d,p){const g=d.data.field(l),v=p.data.field(l);return g!==null&&v!==null?Jo(g,v):je(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return je(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return H_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new It(Pe.comparator);function gi(){return mC}const l0=new It(Pe.comparator);function Ja(...r){let e=l0;for(const t of r)e=e.insert(t.key,t);return e}function u0(r){let e=l0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function $s(){return sl()}function c0(){return sl()}function sl(){return new Xs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const gC=new It(Pe.comparator),yC=new zt(Pe.comparator);function Ye(...r){let e=yC;for(const t of r)e=e.add(t);return e}const vC=new zt(He);function _C(){return vC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function d0(r){return{integerValue:""+r}}function wC(r,e){return qS(e)?d0(e):Xf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this._=void 0}}function EC(r,e,t){return r instanceof Sc?(function(o,l){const d={fields:{[K_]:{stringValue:G_},[Y_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Gf(l)&&(l=Uc(l)),l&&(d.fields[Q_]=l),{mapValue:d}})(t,e):r instanceof gl?f0(r,e):r instanceof yl?p0(r,e):(function(o,l){const d=h0(o,l),p=Wy(d)+Wy(o.Ee);return lf(d)&&lf(o.Ee)?d0(p):Xf(o.serializer,p)})(r,e)}function xC(r,e,t){return r instanceof gl?f0(r,e):r instanceof yl?p0(r,e):t}function h0(r,e){return r instanceof Cc?(function(i){return lf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Sc extends Wc{}class gl extends Wc{constructor(e){super(),this.elements=e}}function f0(r,e){const t=m0(e);for(const i of r.elements)t.some((o=>$r(o,i)))||t.push(i);return{arrayValue:{values:t}}}class yl extends Wc{constructor(e){super(),this.elements=e}}function p0(r,e){let t=m0(e);for(const i of r.elements)t=t.filter((o=>!$r(o,i)));return{arrayValue:{values:t}}}class Cc extends Wc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Wy(r){return Pt(r.integerValue||r.doubleValue)}function m0(r){return Kf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function TC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof gl&&o instanceof gl||i instanceof yl&&o instanceof yl?Yo(i.elements,o.elements,$r):i instanceof Cc&&o instanceof Cc?$r(i.Ee,o.Ee):i instanceof Sc&&o instanceof Sc})(r.transform,e.transform)}class IC{constructor(e,t){this.version=e,this.transformResults=t}}class nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Hc{}function g0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Zf(r.key,nr.none()):new Cl(r.key,r.data,nr.none());{const t=r.data,i=bn.empty();let o=new zt(en.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),o=o.add(l)}return new ys(r.key,i,new Wn(o.toArray()),nr.none())}}function SC(r,e,t){r instanceof Cl?(function(o,l,d){const p=o.value.clone(),g=qy(o.fieldTransforms,l,d.transformResults);p.setAll(g),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,t):r instanceof ys?(function(o,l,d){if(!lc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const p=qy(o.fieldTransforms,l,d.transformResults),g=l.data;g.setAll(y0(o)),g.setAll(p),l.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function ol(r,e,t,i){return r instanceof Cl?(function(l,d,p,g){if(!lc(l.precondition,d))return p;const v=l.value.clone(),w=Gy(l.fieldTransforms,g,d);return v.setAll(w),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof ys?(function(l,d,p,g){if(!lc(l.precondition,d))return p;const v=Gy(l.fieldTransforms,g,d),w=d.data;return w.setAll(y0(l)),w.setAll(v),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(r,e,t,i):(function(l,d,p){return lc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,t)}function CC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=h0(i.transform,o||null);l!=null&&(t===null&&(t=bn.empty()),t.set(i.field,l))}return t||null}function Hy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Yo(i,o,((l,d)=>TC(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Cl extends Hc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ys extends Hc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function y0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function qy(r,e,t){const i=new Map;st(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,p=e.data.field(l.field);i.set(l.field,xC(d,p,t[o]))}return i}function Gy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);i.set(o.field,EC(l,d,e))}return i}class Zf extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RC extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&SC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ol(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ol(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=c0();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let p=this.applyToLocalView(d,l.mutatedFields);p=t.has(o.key)?null:p;const g=g0(d,p);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,((t,i)=>Hy(t,i)))&&Yo(this.baseMutations,e.baseMutations,((t,i)=>Hy(t,i)))}}class ep{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){st(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return gC})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,i[d].version);return new ep(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ze;function bC(r){switch(r){case ee.OK:return je(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return je(15467,{code:r})}}function v0(r){if(r===void 0)return mi("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Nt.OK:return ee.OK;case Nt.CANCELLED:return ee.CANCELLED;case Nt.UNKNOWN:return ee.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ee.INTERNAL;case Nt.UNAVAILABLE:return ee.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ee.NOT_FOUND;case Nt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Nt.ABORTED:return ee.ABORTED;case Nt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Nt.DATA_LOSS:return ee.DATA_LOSS;default:return je(39323,{code:r})}}(Ze=Nt||(Nt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new ts([4294967295,4294967295],0);function Ky(r){const e=z_().encode(r),t=new j_;return t.update(e),new Uint8Array(t.digest())}function Qy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ts([t,i],0),new ts([o,l],0)]}class tp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Xa(`Invalid padding: ${t}`);if(i<0)throw new Xa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ts.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(ts.fromNumber(i)));return o.compare(NC)===1&&(o=new ts([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ky(e),[i,o]=Qy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new tp(l,o,t);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.fe===0)return;const t=Ky(e),[i,o]=Qy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Rl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new qc(Oe.min(),o,new It(He),gi(),Ye())}}class Rl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Rl(i,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class _0{constructor(e,t){this.targetId=e,this.De=t}}class w0{constructor(e,t,i=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Yy{constructor(){this.ve=0,this.Ce=Jy(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ye(),t=Ye(),i=Ye();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:je(38017,{changeType:l})}})),new Rl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Jy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class jC{constructor(e){this.We=e,this.Ge=new Map,this.ze=gi(),this.je=Qu(),this.Je=Qu(),this.He=new It(He)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(cf(l))if(i===0){const d=new Pe(l.path);this.Xe(t,d,dn.newNoDocument(d,Oe.min()))}else st(i===1,20013,{expectedCount:i});else{const d=this.ot(t);if(d!==i){const p=this._t(e),g=p?this.ut(p,e,d):1;if(g!==0){this.rt(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let d,p;try{d=as(i).toUint8Array()}catch(g){if(g instanceof q_)return is("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new tp(d,o,l)}catch(g){return is(g instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.fe===0?null:p}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const d=this.We.lt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,d)=>{const p=this.st(d);if(p){if(l.current&&cf(p.target)){const g=new Pe(p.target.path);this.Tt(g).has(d)||this.It(d,g)||this.Xe(d,g,dn.newNoDocument(g,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}}));let i=Ye();this.Je.forEach(((l,d)=>{let p=!0;d.forEachWhile((g=>{const v=this.st(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ze.forEach(((l,d)=>d.setReadTime(e)));const o=new qc(e,t,this.He,this.ze,i);return this.ze=gi(),this.je=Qu(),this.Je=Qu(),this.He=new It(He),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Yy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new zt(He),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new zt(He),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yy),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Qu(){return new It(Pe.comparator)}function Jy(){return new It(Pe.comparator)}const DC={asc:"ASCENDING",desc:"DESCENDING"},VC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OC={and:"AND",or:"OR"};class LC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hf(r,e){return r.useProto3Json||Fc(e)?e:{value:e}}function Rc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function MC(r,e){return Rc(r,e.toTimestamp())}function Ur(r){return st(!!r,49232),Oe.fromTimestamp((function(t){const i=os(t);return new pt(i.seconds,i.nanos)})(r))}function np(r,e){return ff(r,e).canonicalString()}function ff(r,e){const t=(function(o){return new ft(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function x0(r){const e=ft.fromString(r);return st(R0(e),10190,{key:e.toString()}),e}function pf(r,e){return np(r.databaseId,e.path)}function Uh(r,e){const t=x0(e);if(t.get(1)!==r.databaseId.projectId)throw new Ie(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ie(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Pe(I0(t))}function T0(r,e){return np(r.databaseId,e)}function FC(r){const e=x0(r);return e.length===4?ft.emptyPath():I0(e)}function mf(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function I0(r){return st(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Xy(r,e,t){return{name:pf(r,e),fields:t.value.mapValue.fields}}function UC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:je(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(st(w===void 0||typeof w=="string",58123),nn.fromBase64String(w||"")):(st(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),nn.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const w=v.code===void 0?ee.UNKNOWN:v0(v.code);return new Ie(w,v.message||"")})(d);t=new w0(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Uh(r,i.document.name),l=Ur(i.document.updateTime),d=i.document.createTime?Ur(i.document.createTime):Oe.min(),p=new bn({mapValue:{fields:i.document.fields}}),g=dn.newFoundDocument(o,l,d,p),v=i.targetIds||[],w=i.removedTargetIds||[];t=new uc(v,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Uh(r,i.document),l=i.readTime?Ur(i.readTime):Oe.min(),d=dn.newNoDocument(o,l),p=i.removedTargetIds||[];t=new uc([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Uh(r,i.document),l=i.removedTargetIds||[];t=new uc([],l,o,null)}else{if(!("filter"in e))return je(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,d=new kC(o,l),p=i.targetId;t=new _0(p,d)}}return t}function zC(r,e){let t;if(e instanceof Cl)t={update:Xy(r,e.key,e.value)};else if(e instanceof Zf)t={delete:pf(r,e.key)};else if(e instanceof ys)t={update:Xy(r,e.key,e.data),updateMask:YC(e.fieldMask)};else{if(!(e instanceof RC))return je(16599,{Rt:e.type});t={verify:pf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const p=d.transform;if(p instanceof Sc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof gl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof yl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Cc)return{fieldPath:d.field.canonicalString(),increment:p.Ee};throw je(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:MC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:je(27497)})(r,e.precondition)),t}function BC(r,e){return r&&r.length>0?(st(e!==void 0,14353),r.map((t=>(function(o,l){let d=o.updateTime?Ur(o.updateTime):Ur(l);return d.isEqual(Oe.min())&&(d=Ur(l)),new IC(d,o.transformResults||[])})(t,e)))):[]}function $C(r,e){return{documents:[T0(r,e.path)]}}function WC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=T0(r,o);const l=(function(v){if(v.length!==0)return C0(Wr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(v){if(v.length!==0)return v.map((w=>(function(C){return{field:zo(C.field),direction:GC(C.dir)}})(w)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=hf(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function HC(r){let e=FC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){st(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(I){const C=S0(I);return C instanceof Wr&&n0(C)?C.getFilters():[C]})(t.where));let d=[];t.orderBy&&(d=(function(I){return I.map((C=>(function(q){return new Ic(Bo(q.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(C)))})(t.orderBy));let p=null;t.limit&&(p=(function(I){let C;return C=typeof I=="object"?I.value:I,Fc(C)?null:C})(t.limit));let g=null;t.startAt&&(g=(function(I){const C=!!I.before,U=I.values||[];return new Tc(U,C)})(t.startAt));let v=null;return t.endAt&&(v=(function(I){const C=!I.before,U=I.values||[];return new Tc(U,C)})(t.endAt)),cC(e,o,d,l,p,"F",g,v)}function qC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function S0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Bo(t.unaryFilter.field);return Ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Bo(t.unaryFilter.field);return Ut.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Bo(t.unaryFilter.field);return Ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Bo(t.unaryFilter.field);return Ut.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ut.create(Bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Wr.create(t.compositeFilter.filters.map((i=>S0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(r):je(30097,{filter:r})}function GC(r){return DC[r]}function KC(r){return VC[r]}function QC(r){return OC[r]}function zo(r){return{fieldPath:r.canonicalString()}}function Bo(r){return en.fromServerFormat(r.fieldPath)}function C0(r){return r instanceof Ut?(function(t){if(t.op==="=="){if(Fy(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(My(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fy(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(My(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:KC(t.op),value:t.value}}})(r):r instanceof Wr?(function(t){const i=t.getFilters().map((o=>C0(o)));return i.length===1?i[0]:{compositeFilter:{op:QC(t.op),filters:i}}})(r):je(54877,{filter:r})}function YC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function R0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t,i,o,l=Oe.min(),d=Oe.min(),p=nn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.gt=e}}function XC(r){const e=HC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?df(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Dn=new eR}addToCollectionParentIndex(e,t){return this.Dn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(ss.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class eR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new zt(ft.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new zt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P0=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(P0,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Zo(0)}static ur(){return new Zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LruGarbageCollector",tR=1048576;function tv([r,e],[t,i]){const o=He(r,t);return o===0?He(e,i):o}class nR{constructor(e){this.Tr=e,this.buffer=new zt(tv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();tv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ve(ev,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){la(t)?ve(ev,"Ignoring IndexedDB error during garbage collection: ",t):await aa(t)}await this.Rr(3e5)}))}}class iR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Mc.ue);const i=new nR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Zy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,d,p,g,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,d=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,p=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(v=Date.now(),Fo()<=Qe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${l} targets in `+(g-p)+`ms
	Removed ${I} documents in `+(v-g)+`ms
Total Duration: ${v-w}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function sR(r,e){return new iR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.changes=new Xs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ol(i.mutation,o,Wn.empty(),pt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ye()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ye()){const o=$s();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let d=Ja();return l.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=$s();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ye())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,i,o){let l=gi();const d=sl(),p=(function(){return sl()})();return t.forEach(((g,v)=>{const w=i.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof ys)?l=l.insert(v.key,v):w!==void 0?(d.set(v.key,w.mutation.getFieldMask()),ol(w.mutation,v,w.mutation.getFieldMask(),pt.now())):d.set(v.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((v,w)=>d.set(v,w))),t.forEach(((v,w)=>{var I;return p.set(v,new aR(w,(I=d.get(v))!==null&&I!==void 0?I:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=sl();let o=new It(((d,p)=>d-p)),l=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let w=i.get(g)||Wn.empty();w=p.applyToLocalView(v,w),i.set(g,w);const I=(o.get(p.batchId)||Ye()).add(g);o=o.insert(p.batchId,I)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),v=g.key,w=g.value,I=c0();w.forEach((C=>{if(!l.has(C)){const U=g0(t.get(C),i.get(C));U!==null&&I.set(C,U),l=l.add(C)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,I))}return X.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return Pe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):X.resolve($s());let p=hl,g=l;return d.next((v=>X.forEach(v,((w,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),l.get(w)?X.resolve():this.remoteDocumentCache.getEntry(e,w).next((C=>{g=g.insert(w,C)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,g,v,Ye()))).next((w=>({batchId:p,changes:u0(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next((i=>{let o=Ja();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let d=Ja();return this.indexManager.getCollectionParents(e,l).next((p=>X.forEach(p,(g=>{const v=(function(I,C){return new zc(C,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((w=>{w.forEach(((I,C)=>{d=d.insert(I,C)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((d=>{l.forEach(((g,v)=>{const w=v.getKey();d.get(w)===null&&(d=d.insert(w,dn.newInvalidDocument(w)))}));let p=Ja();return d.forEach(((g,v)=>{const w=l.get(g);w!==void 0&&ol(w.mutation,v,Wn.empty(),pt.now()),$c(t,v)&&(p=p.insert(g,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return X.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ur(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:XC(o.bundledQuery),readTime:Ur(o.readTime)}})(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.overlays=new It(Pe.comparator),this.kr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=$s();return X.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=$s(),l=t.length+1,d=new Pe(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new It(((v,w)=>v-w));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let w=l.get(v.largestBatchId);w===null&&(w=$s(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const p=$s(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,w)=>p.set(v,w))),!(p.size()>=o)););return X.resolve(p)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new AC(t,i));let l=this.kr.get(t);l===void 0&&(l=Ye(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this.qr=new zt(Gt.Qr),this.$r=new zt(Gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Gt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Gt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Pe(new ft([])),i=new Gt(t,e),o=new Gt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(d=>{this.Wr(d),l.push(d.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Pe(new ft([])),i=new Gt(t,e),o=new Gt(t,e+1);let l=Ye();return this.$r.forEachInRange([i,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Gt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Gt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Pe.comparator(e.key,t.key)||He(e.Hr,t.Hr)}static Ur(e,t){return He(e.Hr,t.Hr)||Pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new zt(Gt.Qr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new PC(l,t,i,o);this.mutationQueue.push(d);for(const p of o)this.Yr=this.Yr.add(new Gt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return X.resolve(d)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?qf:this.er-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(d=>{const p=this.Zr(d.Hr);l.push(p)})),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new zt(He);return t.forEach((o=>{const l=new Gt(o,0),d=new Gt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],(p=>{i=i.add(p.Hr)}))})),X.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Pe.isDocumentKey(l)||(l=l.child(""));const d=new Gt(new Pe(l),0);let p=new zt(He);return this.Yr.forEachWhile((g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(g.Hr)),!0)}),d),X.resolve(this.ei(p))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){st(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return X.forEach(t.mutations,(o=>{const l=new Gt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Gt(t,0),o=this.Yr.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.ni=e,this.docs=(function(){return new It(Pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let i=gi();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():dn.newInvalidDocument(o))})),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=gi();const d=t.path,p=new Pe(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:v,value:{document:w}}=g.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||BS(zS(w),i)<=0||(o.has(w.key)||$c(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,i,o){je(9500)}ri(e,t){return X.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new pR(this)}getSize(e){return X.resolve(this.size)}}class pR extends oR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),X.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.persistence=e,this.ii=new Xs((t=>Qf(t)),Yf),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.si=0,this.oi=new rp,this.targetCount=0,this._i=Zo.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),X.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Zo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.hr(t),X.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((d,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),X.waitFor(l).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Mc(0),this.ci=!1,this.ci=!0,this.li=new dR,this.referenceDelegate=e(this),this.hi=new mR(this),this.indexManager=new ZC,this.remoteDocumentCache=(function(o){return new fR(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new JC(t),this.Ti=new uR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new hR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const o=new gR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return X.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class gR extends WS{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Ai=new rp,this.Ri=null}static Vi(e){return new ip(e)}get mi(){if(this.Ri)return this.Ri;throw je(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.mi,(i=>{const o=Pe.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Oe.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return X.or([()=>X.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Pc{constructor(e,t){this.persistence=e,this.gi=new Xs((i=>GS(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=sR(this,t)}static Vi(e,t){return new Pc(e,t)}Ii(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return X.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?X.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(d=>this.Sr(e,d,t).next((p=>{p||(i++,l.removeEntry(d,Oe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),X.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=oc(e.data.value)),t}Sr(e,t,i){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return X.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Ye(),o=Ye();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new sp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Jx()?8:HS(hn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new yR;return this.ws(e,t,d).next((p=>{if(l.result=p,this.Rs)return this.Ss(e,t,d,p.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Fo()<=Qe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(Fo()<=Qe.DEBUG&&ve("QueryEngine","Query:",Uo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Fo()<=Qe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):X.resolve())}ps(e,t){if($y(t))return X.resolve(null);let i=Fr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=df(t,null,"F"),i=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=Ye(...l);return this.gs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const v=this.bs(t,p);return this.Ds(t,v,d,g.readTime)?this.ps(e,df(t,null,"F")):this.vs(e,v,t,g)}))))})))))}ys(e,t,i,o){return $y(t)||o.isEqual(Oe.min())?X.resolve(null):this.gs.getDocuments(e,i).next((l=>{const d=this.bs(t,l);return this.Ds(t,d,i,o)?X.resolve(null):(Fo()<=Qe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uo(t)),this.vs(e,d,t,US(o,hl)).next((p=>p)))}))}bs(e,t){let i=new zt(a0(e));return t.forEach(((o,l)=>{$c(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Fo()<=Qe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.gs.getDocumentsMatchingQuery(e,t,ss.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="LocalStore",_R=3e8;class wR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new It(He),this.Ms=new Xs((l=>Qf(l)),Yf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function ER(r,e,t,i){return new wR(r,e,t,i)}async function k0(r,e){const t=Ue(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],p=[];let g=Ye();for(const v of o){d.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}for(const v of l){p.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next((v=>({Bs:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function xR(r,e){const t=Ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(p,g,v,w){const I=v.batch,C=I.keys();let U=X.resolve();return C.forEach((q=>{U=U.next((()=>w.getEntry(g,q))).next((K=>{const O=v.docVersions.get(q);st(O!==null,48541),K.version.compareTo(O)<0&&(I.applyToRemoteDocument(K,v),K.isValidDocument()&&(K.setReadTime(v.commitVersion),w.addEntry(K)))}))})),U.next((()=>p.mutationQueue.removeMutationBatch(g,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Ye();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(g=g.add(p.batch.mutations[v].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function b0(r){const e=Ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function TR(r,e){const t=Ue(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const p=[];e.targetChanges.forEach(((w,I)=>{const C=o.get(I);if(!C)return;p.push(t.hi.removeMatchingKeys(l,w.removedDocuments,I).next((()=>t.hi.addMatchingKeys(l,w.addedDocuments,I))));let U=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?U=U.withResumeToken(nn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):w.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(w.resumeToken,i)),o=o.insert(I,U),(function(K,O,ce){return K.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=_R?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(C,U,w)&&p.push(t.hi.updateTargetData(l,U))}));let g=gi(),v=Ye();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),p.push(IR(l,d,e.documentUpdates).next((w=>{g=w.Ls,v=w.ks}))),!i.isEqual(Oe.min())){const w=t.hi.getLastRemoteSnapshotVersion(l).next((I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(w)}return X.waitFor(p).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,v))).next((()=>g))})).then((l=>(t.Fs=o,l)))}function IR(r,e,t){let i=Ye(),o=Ye();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let d=gi();return t.forEach(((p,g)=>{const v=l.get(p);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):ve(op,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",g.version)})),{Ls:d,ks:o}}))}function SR(r,e){const t=Ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=qf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function CR(r,e){const t=Ue(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,X.resolve(o)):t.hi.allocateTargetId(i).next((d=>(o=new Qi(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function gf(r,e,t){const i=Ue(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!la(d))throw d;ve(op,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function nv(r,e,t){const i=Ue(r);let o=Oe.min(),l=Ye();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,v,w){const I=Ue(g),C=I.Ms.get(w);return C!==void 0?X.resolve(I.Fs.get(C)):I.hi.getTargetData(v,w)})(i,d,Fr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{l=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,t?o:Oe.min(),t?l:Ye()))).next((p=>(RR(i,fC(e),p),{documents:p,qs:l})))))}function RR(r,e,t){let i=r.xs.get(e)||Oe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class rv{constructor(){this.activeTargetIds=_C()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PR{constructor(){this.Fo=new rv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new rv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="ConnectivityMonitor";class sv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ve(iv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ve(iv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function yf(){return Yu===null?Yu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="RestConnection",kR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Ec?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const d=yf(),p=this.Go(e,t.toUriEncodedString());ve(zh,`Sending RPC '${e}' ${d}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,l);const{host:v}=new URL(p),w=ra(v);return this.jo(e,p,g,i,w).then((I=>(ve(zh,`Received RPC '${e}' ${d}: `,I),I)),(I=>{throw is(zh,`RPC '${e}' ${d} failed with error: `,I,"url: ",p,"request:",i),I}))}Jo(e,t,i,o,l,d){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=kR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class jR extends bR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const d=yf();return new Promise(((p,g)=>{const v=new D_;v.setWithCredentials(!0),v.listenOnce(V_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case sc.NO_ERROR:const I=v.getResponseJson();ve(un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),p(I);break;case sc.TIMEOUT:ve(un,`RPC '${e}' ${d} timed out`),g(new Ie(ee.DEADLINE_EXCEEDED,"Request time out"));break;case sc.HTTP_ERROR:const C=v.getStatus();if(ve(un,`RPC '${e}' ${d} failed with status:`,C,"response text:",v.getResponseText()),C>0){let U=v.getResponseJson();Array.isArray(U)&&(U=U[0]);const q=U==null?void 0:U.error;if(q&&q.status&&q.message){const K=(function(ce){const pe=ce.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(pe)>=0?pe:ee.UNKNOWN})(q.status);g(new Ie(K,q.message))}else g(new Ie(ee.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new Ie(ee.UNAVAILABLE,"Connection failed."));break;default:je(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{ve(un,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(o);ve(un,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",w,i,15)}))}P_(e,t,i){const o=yf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=M_(),p=L_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const w=l.join("");ve(un,`Creating RPC '${e}' stream ${o}: ${w}`,g);const I=d.createWebChannel(w,g);this.T_(I);let C=!1,U=!1;const q=new NR({Ho:O=>{U?ve(un,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(C||(ve(un,`Opening RPC '${e}' stream ${o} transport.`),I.open(),C=!0),ve(un,`RPC '${e}' stream ${o} sending:`,O),I.send(O))},Yo:()=>I.close()}),K=(O,ce,pe)=>{O.listen(ce,(le=>{try{pe(le)}catch(de){setTimeout((()=>{throw de}),0)}}))};return K(I,Ya.EventType.OPEN,(()=>{U||(ve(un,`RPC '${e}' stream ${o} transport opened.`),q.s_())})),K(I,Ya.EventType.CLOSE,(()=>{U||(U=!0,ve(un,`RPC '${e}' stream ${o} transport closed`),q.__(),this.I_(I))})),K(I,Ya.EventType.ERROR,(O=>{U||(U=!0,is(un,`RPC '${e}' stream ${o} transport errored. Name:`,O.name,"Message:",O.message),q.__(new Ie(ee.UNAVAILABLE,"The operation could not be completed")))})),K(I,Ya.EventType.MESSAGE,(O=>{var ce;if(!U){const pe=O.data[0];st(!!pe,16349);const le=pe,de=(le==null?void 0:le.error)||((ce=le[0])===null||ce===void 0?void 0:ce.error);if(de){ve(un,`RPC '${e}' stream ${o} received error:`,de);const ue=de.status;let me=(function(P){const k=Nt[P];if(k!==void 0)return v0(k)})(ue),N=de.message;me===void 0&&(me=ee.INTERNAL,N="Unknown error status: "+ue+" with message "+de.message),U=!0,q.__(new Ie(me,N)),I.close()}else ve(un,`RPC '${e}' stream ${o} received:`,pe),q.a_(pe)}})),K(p,O_.STAT_EVENT,(O=>{O.stat===sf.PROXY?ve(un,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===sf.NOPROXY&&ve(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.o_()}),0),q}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(r){return new LC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="PersistentStream";class j0{constructor(e,t,i,o,l,d,p,g){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new N0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(mi(t.toString()),mi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new Ie(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ve(ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ve(ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DR extends j0{constructor(e,t,i,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=UC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Oe.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Oe.min():d.readTime?Ur(d.readTime):Oe.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=mf(this.serializer),t.addTarget=(function(l,d){let p;const g=d.target;if(p=cf(g)?{documents:$C(l,g)}:{query:WC(l,g).Vt},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=E0(l,d.resumeToken);const v=hf(l,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(Oe.min())>0){p.readTime=Rc(l,d.snapshotVersion.toTimestamp());const v=hf(l,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=qC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=mf(this.serializer),t.removeTarget=e,this.k_(t)}}class VR extends j0{constructor(e,t,i,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=BC(e.writeResults,e.commitTime),i=Ur(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=mf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>zC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{}class LR extends OR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Ie(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,ff(t,i),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ie(ee.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Jo(e,ff(t,i),o,d,p,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ie(ee.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class MR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(mi(t),this._a=!1):ve("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="RemoteStore";class FR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{Zs(this)&&(ve(Js,"Restarting streams for network reachability change."),await(async function(g){const v=Ue(g);v.Ia.add(4),await Pl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Kc(v)})(this))}))})),this.Aa=new MR(i,o)}}async function Kc(r){if(Zs(r))for(const e of r.da)await e(!0)}async function Pl(r){for(const e of r.da)await e(!1)}function D0(r,e){const t=Ue(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),cp(t)?up(t):ua(t).x_()&&lp(t,e))}function ap(r,e){const t=Ue(r),i=ua(t);t.Ta.delete(e),i.x_()&&V0(t,e),t.Ta.size===0&&(i.x_()?i.B_():Zs(t)&&t.Aa.set("Unknown"))}function lp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ua(r).H_(e)}function V0(r,e){r.Ra.$e(e),ua(r).Y_(e)}function up(r){r.Ra=new jC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),ua(r).start(),r.Aa.aa()}function cp(r){return Zs(r)&&!ua(r).M_()&&r.Ta.size>0}function Zs(r){return Ue(r).Ia.size===0}function O0(r){r.Ra=void 0}async function UR(r){r.Aa.set("Online")}async function zR(r){r.Ta.forEach(((e,t)=>{lp(r,e)}))}async function BR(r,e){O0(r),cp(r)?(r.Aa.la(e),up(r)):r.Aa.set("Unknown")}async function $R(r,e,t){if(r.Aa.set("Online"),e instanceof w0&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const p of l.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ta.delete(p),o.Ra.removeTarget(p))})(r,e)}catch(i){ve(Js,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ac(r,i)}else if(e instanceof uc?r.Ra.Ye(e):e instanceof _0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Oe.min()))try{const i=await b0(r.localStore);t.compareTo(i)>=0&&await(function(l,d){const p=l.Ra.Pt(d);return p.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ta.get(v);w&&l.Ta.set(v,w.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,v)=>{const w=l.Ta.get(g);if(!w)return;l.Ta.set(g,w.withResumeToken(nn.EMPTY_BYTE_STRING,w.snapshotVersion)),V0(l,g);const I=new Qi(w.target,g,v,w.sequenceNumber);lp(l,I)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){ve(Js,"Failed to raise snapshot:",i),await Ac(r,i)}}async function Ac(r,e,t){if(!la(e))throw e;r.Ia.add(1),await Pl(r),r.Aa.set("Offline"),t||(t=()=>b0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ve(Js,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Kc(r)}))}function L0(r,e){return e().catch((t=>Ac(r,t,e)))}async function Qc(r){const e=Ue(r),t=us(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qf;for(;WR(e);)try{const o=await SR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,HR(e,o)}catch(o){await Ac(e,o)}M0(e)&&F0(e)}function WR(r){return Zs(r)&&r.Pa.length<10}function HR(r,e){r.Pa.push(e);const t=us(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function M0(r){return Zs(r)&&!us(r).M_()&&r.Pa.length>0}function F0(r){us(r).start()}async function qR(r){us(r).na()}async function GR(r){const e=us(r);for(const t of r.Pa)e.X_(t.mutations)}async function KR(r,e,t){const i=r.Pa.shift(),o=ep.from(i,e,t);await L0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Qc(r)}async function QR(r,e){e&&us(r).Z_&&await(async function(i,o){if((function(d){return bC(d)&&d!==ee.ABORTED})(o.code)){const l=i.Pa.shift();us(i).N_(),await L0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Qc(i)}})(r,e),M0(r)&&F0(r)}async function av(r,e){const t=Ue(r);t.asyncQueue.verifyOperationInProgress(),ve(Js,"RemoteStore received new credentials");const i=Zs(t);t.Ia.add(3),await Pl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Kc(t)}async function YR(r,e){const t=Ue(r);e?(t.Ia.delete(2),await Kc(t)):e||(t.Ia.add(2),await Pl(t),t.Aa.set("Unknown"))}function ua(r){return r.Va||(r.Va=(function(t,i,o){const l=Ue(t);return l.ia(),new DR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:UR.bind(null,r),e_:zR.bind(null,r),n_:BR.bind(null,r),J_:$R.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),cp(r)?up(r):r.Aa.set("Unknown")):(await r.Va.stop(),O0(r))}))),r.Va}function us(r){return r.ma||(r.ma=(function(t,i,o){const l=Ue(t);return l.ia(),new VR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:qR.bind(null,r),n_:QR.bind(null,r),ea:GR.bind(null,r),ta:KR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await Qc(r)):(await r.ma.stop(),r.Pa.length>0&&(ve(Js,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const d=Date.now()+i,p=new dp(e,t,d,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(r,e){if(mi("AsyncQueue",`${e}: ${r}`),la(r))return new Ie(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{static emptySet(e){return new Go(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Pe.comparator(t.key,i.key):(t,i)=>Pe.comparator(t.key,i.key),this.keyedMap=Ja(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Go;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.fa=new It(Pe.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):je(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ea{constructor(e,t,i,o,l,d,p,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new ea(e,t,Go.emptySet(t),d,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class XR{constructor(){this.queries=uv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ue(t),l=o.queries;o.queries=uv(),l.forEach(((d,p)=>{for(const g of p.wa)g.onError(i)}))})(this,new Ie(ee.ABORTED,"Firestore shutting down"))}}function uv(){return new Xs((r=>o0(r)),Bc)}async function U0(r,e){const t=Ue(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new JR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=hp(d,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&fp(t)}async function z0(r,e){const t=Ue(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ZR(r,e){const t=Ue(r);let i=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const p of d.wa)p.Ca(o)&&(i=!0);d.ya=o}}i&&fp(t)}function eP(r,e,t){const i=Ue(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function fp(r){r.Da.forEach((e=>{e.next()}))}var vf,cv;(cv=vf||(vf={})).Fa="default",cv.Cache="cache";class B0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ea(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==vf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.key=e}}class W0{constructor(e){this.key=e}}class tP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ye(),this.mutatedKeys=Ye(),this.Xa=a0(e),this.eu=new Go(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new lv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,I)=>{const C=o.get(w),U=$c(this.query,I)?I:null,q=!!C&&this.mutatedKeys.has(C.key),K=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let O=!1;C&&U?C.data.isEqual(U.data)?q!==K&&(i.track({type:3,doc:U}),O=!0):this.iu(C,U)||(i.track({type:2,doc:U}),O=!0,(g&&this.Xa(U,g)>0||v&&this.Xa(U,v)<0)&&(p=!0)):!C&&U?(i.track({type:0,doc:U}),O=!0):C&&!U&&(i.track({type:1,doc:C}),O=!0,(g||v)&&(p=!0)),O&&(U?(d=d.add(U),l=K?l.add(w):l.delete(w)):(d=d.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{eu:d,ru:i,Ds:p,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((w,I)=>(function(U,q){const K=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{At:O})}};return K(U)-K(q)})(w.type,I.type)||this.Xa(w.doc,I.doc))),this.su(i),o=o!=null&&o;const p=t&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,v=g!==this.Ya;return this.Ya=g,d.length!==0||v?{snapshot:new ea(this.query,e.eu,l,d,e.mutatedKeys,g===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new lv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ye(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new W0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new $0(i))})),t}uu(e){this.Ha=e.qs,this.Za=Ye();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ea.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const pp="SyncEngine";class nP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class rP{constructor(e){this.key=e,this.lu=!1}}class iP{constructor(e,t,i,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Xs((p=>o0(p)),Bc),this.Tu=new Map,this.Iu=new Set,this.du=new It(Pe.comparator),this.Eu=new Map,this.Au=new rp,this.Ru={},this.Vu=new Map,this.mu=Zo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function sP(r,e,t=!0){const i=Y0(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await H0(i,e,t,!0),o}async function oP(r,e){const t=Y0(r);await H0(t,e,!0,!1)}async function H0(r,e,t,i){const o=await CR(r.localStore,Fr(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await aP(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&D0(r.remoteStore,o),p}async function aP(r,e,t,i,o){r.gu=(I,C,U)=>(async function(K,O,ce,pe){let le=O.view.nu(ce);le.Ds&&(le=await nv(K.localStore,O.query,!1).then((({documents:N})=>O.view.nu(N,le))));const de=pe&&pe.targetChanges.get(O.targetId),ue=pe&&pe.targetMismatches.get(O.targetId)!=null,me=O.view.applyChanges(le,K.isPrimaryClient,de,ue);return hv(K,O.targetId,me._u),me.snapshot})(r,I,C,U);const l=await nv(r.localStore,e,!0),d=new tP(e,l.qs),p=d.nu(l.documents),g=Rl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=d.applyChanges(p,r.isPrimaryClient,g);hv(r,t,v._u);const w=new nP(e,t,d);return r.Pu.set(e,w),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function lP(r,e,t){const i=Ue(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((d=>!Bc(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await gf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ap(i.remoteStore,o.targetId),_f(i,o.targetId)})).catch(aa)):(_f(i,o.targetId),await gf(i.localStore,o.targetId,!0))}async function uP(r,e){const t=Ue(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ap(t.remoteStore,i.targetId))}async function cP(r,e,t){const i=yP(r);try{const o=await(function(d,p){const g=Ue(d),v=pt.now(),w=p.reduce(((U,q)=>U.add(q.key)),Ye());let I,C;return g.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let q=gi(),K=Ye();return g.Os.getEntries(U,w).next((O=>{q=O,q.forEach(((ce,pe)=>{pe.isValidDocument()||(K=K.add(ce))}))})).next((()=>g.localDocuments.getOverlayedDocuments(U,q))).next((O=>{I=O;const ce=[];for(const pe of p){const le=CC(pe,I.get(pe.key).overlayedDocument);le!=null&&ce.push(new ys(pe.key,le,Z_(le.value.mapValue),nr.exists(!0)))}return g.mutationQueue.addMutationBatch(U,v,ce,p)})).next((O=>{C=O;const ce=O.applyToLocalDocumentSet(I,K);return g.documentOverlayCache.saveOverlays(U,O.batchId,ce)}))})).then((()=>({batchId:C.batchId,changes:u0(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let v=d.Ru[d.currentUser.toKey()];v||(v=new It(He)),v=v.insert(p,g),d.Ru[d.currentUser.toKey()]=v})(i,o.batchId,t),await Al(i,o.changes),await Qc(i.remoteStore)}catch(o){const l=hp(o,"Failed to persist write");t.reject(l)}}async function q0(r,e){const t=Ue(r);try{const i=await TR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Eu.get(l);d&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?st(d.lu,14607):o.removedDocuments.size>0&&(st(d.lu,42227),d.lu=!1))})),await Al(t,i,e)}catch(i){await aa(i)}}function dv(r,e,t){const i=Ue(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Ue(d);g.onlineState=p;let v=!1;g.queries.forEach(((w,I)=>{for(const C of I.wa)C.va(p)&&(v=!0)})),v&&fp(g)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dP(r,e,t){const i=Ue(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let d=new It(Pe.comparator);d=d.insert(l,dn.newNoDocument(l,Oe.min()));const p=Ye().add(l),g=new qc(Oe.min(),new Map,new It(He),d,p);await q0(i,g),i.du=i.du.remove(l),i.Eu.delete(e),mp(i)}else await gf(i.localStore,e,!1).then((()=>_f(i,e,t))).catch(aa)}async function hP(r,e){const t=Ue(r),i=e.batch.batchId;try{const o=await xR(t.localStore,e);K0(t,i,null),G0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Al(t,o)}catch(o){await aa(o)}}async function fP(r,e,t){const i=Ue(r);try{const o=await(function(d,p){const g=Ue(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return g.mutationQueue.lookupMutationBatch(v,p).next((I=>(st(I!==null,37113),w=I.keys(),g.mutationQueue.removeMutationBatch(v,I)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,w,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>g.localDocuments.getDocuments(v,w)))}))})(i.localStore,e);K0(i,e,t),G0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Al(i,o)}catch(o){await aa(o)}}function G0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function K0(r,e,t){const i=Ue(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function _f(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||Q0(r,i)}))}function Q0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(ap(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),mp(r))}function hv(r,e,t){for(const i of t)i instanceof $0?(r.Au.addReference(i.key,e),pP(r,i)):i instanceof W0?(ve(pp,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||Q0(r,i.key)):je(19791,{yu:i})}function pP(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(ve(pp,"New document in limbo: "+t),r.Iu.add(i),mp(r))}function mp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Pe(ft.fromString(e)),i=r.mu.next();r.Eu.set(i,new rP(t)),r.du=r.du.insert(t,i),D0(r.remoteStore,new Qi(Fr(Jf(t.path)),i,"TargetPurposeLimboResolution",Mc.ue))}}async function Al(r,e,t){const i=Ue(r),o=[],l=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((p,g)=>{d.push(i.gu(g,e,t).then((v=>{var w;if((v||t)&&i.isPrimaryClient){const I=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))===null||w===void 0?void 0:w.current;i.sharedClientState.updateQueryState(g.targetId,I?"current":"not-current")}if(v){o.push(v);const I=sp.Es(g.targetId,v);l.push(I)}})))})),await Promise.all(d),i.hu.J_(o),await(async function(g,v){const w=Ue(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>X.forEach(v,(C=>X.forEach(C.Is,(U=>w.persistence.referenceDelegate.addReference(I,C.targetId,U))).next((()=>X.forEach(C.ds,(U=>w.persistence.referenceDelegate.removeReference(I,C.targetId,U)))))))))}catch(I){if(!la(I))throw I;ve(op,"Failed to update sequence numbers: "+I)}for(const I of v){const C=I.targetId;if(!I.fromCache){const U=w.Fs.get(C),q=U.snapshotVersion,K=U.withLastLimboFreeSnapshotVersion(q);w.Fs=w.Fs.insert(C,K)}}})(i.localStore,l))}async function mP(r,e){const t=Ue(r);if(!t.currentUser.isEqual(e)){ve(pp,"User change. New user:",e.toKey());const i=await k0(t.localStore,e);t.currentUser=e,(function(l,d){l.Vu.forEach((p=>{p.forEach((g=>{g.reject(new Ie(ee.CANCELLED,d))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Al(t,i.Bs)}}function gP(r,e){const t=Ue(r),i=t.Eu.get(e);if(i&&i.lu)return Ye().add(i.key);{let o=Ye();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const p=t.Pu.get(d);o=o.unionWith(p.view.tu)}return o}}function Y0(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=q0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dP.bind(null,e),e.hu.J_=ZR.bind(null,e.eventManager),e.hu.pu=eP.bind(null,e.eventManager),e}function yP(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fP.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return ER(this.persistence,new vR,e.initialUser,this.serializer)}Du(e){return new A0(ip.Vi,this.serializer)}bu(e){return new PR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class vP extends kc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){st(this.persistence.referenceDelegate instanceof Pc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new rR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new A0((i=>Pc.Vi(i,t)),this.serializer)}}class wf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mP.bind(null,this.syncEngine),await YR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XR})()}createDatastore(e){const t=Gc(e.databaseInfo.databaseId),i=(function(l){return new jR(l)})(e.databaseInfo);return(function(l,d,p,g){return new LR(l,d,p,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,d,p){return new FR(i,o,l,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>dv(this.syncEngine,t,0)),(function(){return sv.C()?new sv:new AR})())}createSyncEngine(e,t){return(function(o,l,d,p,g,v,w){const I=new iP(o,l,d,p,g,v);return w&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ue(o);ve(Js,"RemoteStore shutting down."),l.Ia.add(5),await Pl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}wf.provider={build:()=>new wf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):mi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="FirestoreClient";class _P{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=Wf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{ve(cs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ve(cs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=hp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function $h(r,e){r.asyncQueue.verifyOperationInProgress(),ve(cs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await k0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{is("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{ve("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{is("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function fv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await wP(r);ve(cs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>av(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>av(e.remoteStore,o))),r._onlineComponents=e}async function wP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(cs,"Using user provided OfflineComponentProvider");try{await $h(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;is("Error using user provided cache. Falling back to memory cache: "+t),await $h(r,new kc)}}else ve(cs,"Using default OfflineComponentProvider"),await $h(r,new vP(void 0));return r._offlineComponents}async function X0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(cs,"Using user provided OnlineComponentProvider"),await fv(r,r._uninitializedComponentsProvider._online)):(ve(cs,"Using default OnlineComponentProvider"),await fv(r,new wf))),r._onlineComponents}function EP(r){return X0(r).then((e=>e.syncEngine))}async function Z0(r){const e=await X0(r),t=e.eventManager;return t.onListen=sP.bind(null,e.syncEngine),t.onUnlisten=lP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uP.bind(null,e.syncEngine),t}function xP(r,e,t={}){const i=new hi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,g,v){const w=new J0({next:C=>{w.Ou(),d.enqueueAndForget((()=>z0(l,I)));const U=C.docs.has(p);!U&&C.fromCache?v.reject(new Ie(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&C.fromCache&&g&&g.source==="server"?v.reject(new Ie(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),I=new B0(Jf(p.path),w,{includeMetadataChanges:!0,ka:!0});return U0(l,I)})(await Z0(r),r.asyncQueue,e,t,i))),i.promise}function TP(r,e,t={}){const i=new hi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,g,v){const w=new J0({next:C=>{w.Ou(),d.enqueueAndForget((()=>z0(l,I))),C.fromCache&&g.source==="server"?v.reject(new Ie(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(C)},error:C=>v.reject(C)}),I=new B0(p,w,{includeMetadataChanges:!0,ka:!0});return U0(l,I)})(await Z0(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="firestore.googleapis.com",mv=!0;class gv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tw,this.ssl=mv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:mv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tR)throw new Ie(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ew((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ie(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ie(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ie(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new kS;switch(i.type){case"firstParty":return new DS(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ie(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=pv.get(t);i&&(ve("ComponentProvider","Removing Datastore"),pv.delete(t),i.terminate())})(this),Promise.resolve()}}function IP(r,e,t,i={}){var o;r=Tr(r,Yc);const l=ra(e),d=r._getSettings(),p=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${t}`;l&&($v(`https://${g}`),Wv("Firestore",!0)),d.host!==tw&&d.host!==g&&is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:g,ssl:l,emulatorOptions:i});if(!qs(v,p)&&(r._setSettings(v),i.mockUserToken)){let w,I;if(typeof i.mockUserToken=="string")w=i.mockUserToken,I=cn.MOCK_USER;else{w=Bx(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new Ie(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new cn(C)}r._authCredentials=new bS(new U_(w,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Jc(this.firestore,e,this._query)}}class Vt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Sl(t,Vt._jsonSchema))return new Vt(e,i||null,new Pe(ft.fromString(t.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Dt("string",Vt._jsonSchemaVersion),referencePath:Dt("string")};class ns extends Jc{constructor(e,t,i){super(e,t,Jf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new Pe(e))}withConverter(e){return new ns(this.firestore,e,this._path)}}function er(r,e,...t){if(r=tn(r),B_("collection","path",e),r instanceof Yc){const i=ft.fromString(e,...t);return ky(i),new ns(r,null,i)}{if(!(r instanceof Vt||r instanceof ns))throw new Ie(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ft.fromString(e,...t));return ky(i),new ns(r.firestore,null,i)}}function jt(r,e,...t){if(r=tn(r),arguments.length===1&&(e=Wf.newId()),B_("doc","path",e),r instanceof Yc){const i=ft.fromString(e,...t);return Ay(i),new Vt(r,null,new Pe(i))}{if(!(r instanceof Vt||r instanceof ns))throw new Ie(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ft.fromString(e,...t));return Ay(i),new Vt(r.firestore,r instanceof ns?r.converter:null,new Pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="AsyncQueue";class vv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new N0(this,"async_queue_retry"),this.oc=()=>{const i=Bh();i&&ve(yv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Bh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Bh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new hi;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!la(e))throw e;ve(yv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,mi("INTERNAL UNHANDLED ERROR: ",_v(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=dp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&je(47125,{hc:_v(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function _v(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class eo extends Yc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new vv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,await e}}}function SP(r,e){const t=typeof r=="object"?r:Kv(),i=typeof r=="string"?r:Ec,o=bf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Ux("firestore");l&&IP(o,...l)}return o}function gp(r){if(r._terminated)throw new Ie(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CP(r),r._firestoreClient}function CP(r){var e,t,i;const o=r._freezeSettings(),l=(function(p,g,v,w){return new YS(p,g,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,ew(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new _P(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tr(nn.fromBase64String(e))}catch(t){throw new Ie(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tr(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sl(e,tr._jsonSchema))return tr.fromBase64String(e.bytes)}}tr._jsonSchemaVersion="firestore/bytes/1.0",tr._jsonSchema={type:Dt("string",tr._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ie(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zr._jsonSchemaVersion}}static fromJSON(e){if(Sl(e,zr._jsonSchema))return new zr(e.latitude,e.longitude)}}zr._jsonSchemaVersion="firestore/geoPoint/1.0",zr._jsonSchema={type:Dt("string",zr._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sl(e,Br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Br(e.vectorValues);throw new Ie(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Br._jsonSchemaVersion="firestore/vectorValue/1.0",Br._jsonSchema={type:Dt("string",Br._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^__.*__$/;class PP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cl(e,this.data,t,this.fieldTransforms)}}class nw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ys(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ec:r})}}class vp{constructor(e,t,i,o,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return bc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(rw(this.Ec)&&RP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class AP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Gc(e)}Dc(e,t,i,o=!1){return new vp({Ec:e,methodName:t,bc:i,path:en.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _p(r){const e=r._freezeSettings(),t=Gc(r._databaseId);return new AP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function iw(r,e,t,i,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);wp("Data must be an object, but it was:",d,i);const p=sw(i,d);let g,v;if(l.merge)g=new Wn(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const w=[];for(const I of l.mergeFields){const C=Ef(e,I,t);if(!d.contains(C))throw new Ie(ee.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);aw(w,C)||w.push(C)}g=new Wn(w),v=d.fieldTransforms.filter((I=>g.covers(I.field)))}else g=null,v=d.fieldTransforms;return new PP(new bn(p),g,v)}class Zc extends yp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zc}}function kP(r,e,t,i){const o=r.Dc(1,e,t);wp("Data must be an object, but it was:",o,i);const l=[],d=bn.empty();gs(i,((g,v)=>{const w=Ep(e,g,t);v=tn(v);const I=o.gc(w);if(v instanceof Zc)l.push(w);else{const C=ed(v,I);C!=null&&(l.push(w),d.set(w,C))}}));const p=new Wn(l);return new nw(d,p,o.fieldTransforms)}function bP(r,e,t,i,o,l){const d=r.Dc(1,e,t),p=[Ef(e,i,t)],g=[o];if(l.length%2!=0)throw new Ie(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)p.push(Ef(e,l[C])),g.push(l[C+1]);const v=[],w=bn.empty();for(let C=p.length-1;C>=0;--C)if(!aw(v,p[C])){const U=p[C];let q=g[C];q=tn(q);const K=d.gc(U);if(q instanceof Zc)v.push(U);else{const O=ed(q,K);O!=null&&(v.push(U),w.set(U,O))}}const I=new Wn(v);return new nw(w,I,d.fieldTransforms)}function ed(r,e){if(ow(r=tn(r)))return wp("Unsupported field value:",e,r),sw(r,e);if(r instanceof yp)return(function(i,o){if(!rw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let d=0;for(const p of i){let g=ed(p,o.yc(d));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),d++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=tn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=pt.fromDate(i);return{timestampValue:Rc(o.serializer,l)}}if(i instanceof pt){const l=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rc(o.serializer,l)}}if(i instanceof zr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof tr)return{bytesValue:E0(o.serializer,i._byteString)};if(i instanceof Vt){const l=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:np(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Br)return(function(d,p){return{mapValue:{fields:{[J_]:{stringValue:X_},[xc]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw p.wc("VectorValues must only contain numeric values.");return Xf(p.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Hf(i)}`)})(r,e)}function sw(r,e){const t={};return H_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(r,((i,o)=>{const l=ed(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function ow(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof pt||r instanceof zr||r instanceof tr||r instanceof Vt||r instanceof yp||r instanceof Br)}function wp(r,e,t){if(!ow(t)||!$_(t)){const i=Hf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function Ef(r,e,t){if((e=tn(e))instanceof Xc)return e._internalPath;if(typeof e=="string")return Ep(r,e);throw bc("Field path arguments must be of type string or ",r,!1,void 0,t)}const NP=new RegExp("[~\\*/\\[\\]]");function Ep(r,e,t){if(e.search(NP)>=0)throw bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Xc(...e.split("."))._internalPath}catch{throw bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function bc(r,e,t,i,o){const l=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new Ie(ee.INVALID_ARGUMENT,p+r+g)}function aw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jP extends lw{data(){return super.data()}}function uw(r,e){return typeof e=="string"?Ep(r,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ie(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VP{convertValue(e,t="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return gs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[xc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>Pt(d.doubleValue)));return new Br(l)}convertGeoPoint(e){return new zr(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Uc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const t=os(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ft.fromString(e);st(R0(i),9688,{name:e});const o=new pl(i.get(1),i.get(3)),l=new Pe(i.popFirst(5));return o.isEqual(t)||mi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hs extends lw{constructor(e,t,i,o,l,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(uw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hs._jsonSchema={type:Dt("string",Hs._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class cc extends Hs{data(e={}){return super.data(e)}}class Ko{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Za(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new cc(this._firestore,this._userDataWriter,i.key,i,new Za(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new cc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Za(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const g=new cc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Za(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),w=d.indexOf(p.doc.key)),{type:OP(p.type),doc:g,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(r){r=Tr(r,Vt);const e=Tr(r.firestore,eo);return xP(gp(e),r._key).then((t=>LP(e,r,t)))}Ko._jsonSchemaVersion="firestore/querySnapshot/1.0",Ko._jsonSchema={type:Dt("string",Ko._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class dw extends VP{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}function Yi(r){r=Tr(r,Jc);const e=Tr(r.firestore,eo),t=gp(e),i=new dw(e);return DP(r._query),TP(t,r._query).then((o=>new Ko(e,i,r,o)))}function Ju(r,e,t){r=Tr(r,Vt);const i=Tr(r.firestore,eo),o=cw(r.converter,e,t);return td(i,[iw(_p(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,nr.none())])}function $o(r,e,t,...i){r=Tr(r,Vt);const o=Tr(r.firestore,eo),l=_p(o);let d;return d=typeof(e=tn(e))=="string"||e instanceof Xc?bP(l,"updateDoc",r._key,e,t,i):kP(l,"updateDoc",r._key,e),td(o,[d.toMutation(r._key,nr.exists(!0))])}function Ws(r){return td(Tr(r.firestore,eo),[new Zf(r._key,nr.none())])}function el(r,e){const t=Tr(r.firestore,eo),i=jt(r),o=cw(r.converter,e);return td(t,[iw(_p(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,nr.exists(!1))]).then((()=>i))}function td(r,e){return(function(i,o){const l=new hi;return i.asyncQueue.enqueueAndForget((async()=>cP(await EP(i),o,l))),l.promise})(gp(r),e)}function LP(r,e,t){const i=t.docs.get(e._key),o=new dw(r);return new Hs(r,o,e._key,i,new Za(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){oa=o})(ia),Qo(new Gs("firestore",((i,{instanceIdentifier:o,options:l})=>{const d=i.getProvider("app").getImmediate(),p=new eo(new NS(i.getProvider("auth-internal")),new VS(d,i.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Ie(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(v.options.projectId,w)})(d,o),d);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),es(Iy,Sy,e),es(Iy,Sy,"esm2017")})();const MP={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},hw=Gv(MP),rs=PS(hw),rt=SP(hw),fw=W.createContext(null);function FP({children:r}){const[e,t]=W.useState(null),[i,o]=W.useState(!1),[l,d]=W.useState(!0);W.useEffect(()=>{const v=vI(rs,async w=>{if(t(w),w)try{const I=jt(rt,"admins",w.uid);if((await xf(I)).exists())o(!0);else{const U=jt(rt,"roles",w.uid),q=await xf(U);q.exists()&&q.data().admin===!0?o(!0):o(!1)}}catch(I){console.error("Error checking admin role:",I),o(!1)}else o(!1);d(!1)});return()=>v()},[]);const p=async(v,w)=>{await __(rs,v,w)},g=async()=>{await w_(rs)};return h.jsx(fw.Provider,{value:{user:e,admin:i,loading:l,login:p,logout:g},children:r})}function ca(){return W.useContext(fw)}function UP({onClose:r}){const[e,t]=W.useState("login"),[i,o]=W.useState(""),[l,d]=W.useState("");async function p(){try{await b_(rs,new Lr),r()}catch(w){alert(w.message)}}async function g(w){w.preventDefault();try{await __(rs,i,l),r()}catch(I){alert(I.message)}}async function v(w){w.preventDefault();try{await mI(rs,i,l),r()}catch(I){alert(I.message)}}return h.jsx("div",{className:"auth-modal-backdrop",onClick:r,children:h.jsxs("div",{className:"auth-modal",onClick:w=>w.stopPropagation(),children:[h.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),h.jsxs("button",{className:"google-btn",onClick:p,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsx("div",{className:"auth-divider",children:h.jsx("span",{children:"or"})}),h.jsxs("form",{onSubmit:e==="login"?g:v,className:"auth-form",children:[h.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:i,onChange:w=>o(w.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:w=>d(w.target.value),required:!0}),h.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),h.jsx("div",{className:"auth-switcher",children:e==="login"?h.jsxs("p",{children:["No account?"," ",h.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):h.jsxs("p",{children:["Already have an account?"," ",h.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),h.jsx("button",{className:"auth-close",onClick:r,children:"Close"})]})})}function zP(){const[r,e]=W.useState(!1),[t,i]=W.useState(!1),{user:o,admin:l}=ca(),d=jc();async function p(){try{await w_(rs),e(!1),d("/")}catch(g){console.error(g),alert("Logout failed.")}}return h.jsxs(h.Fragment,{children:[h.jsxs("button",{className:`menu-toggle ${r?"active":""}`,onClick:()=>e(!r),children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("nav",{className:`menu-panel ${r?"open":""}`,children:[h.jsx(qa,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),h.jsx(qa,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),h.jsx(qa,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),h.jsx(qa,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),l&&h.jsx(qa,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),h.jsxs("div",{className:"auth-section",children:[h.jsx("p",{className:"auth-section-status",children:o?`Signed in as ${o.email||o.uid}`:"Not signed in"}),h.jsxs("div",{children:[!o&&h.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),i(!0)},children:"Sign in"}),o&&h.jsx("button",{className:"auth-btn secondary",onClick:p,children:"Sign out"})]})]})]}),t&&h.jsx(UP,{onClose:()=>i(!1)})]})}function wv(){const[r,e]=W.useState("Tyler's Collection Homepage");return W.useEffect(()=>{const t="",i="Tyler's Collection Homepage",o=[],l=(p,g=0,v=70)=>{for(let w=0;w<=p.length;w+=1)o.push(setTimeout(()=>{e(p.slice(0,w)||" ")},g+w*v));return g+p.length*v};let d=0;return d=l(t,d,70),d+=500,o.push(setTimeout(()=>{e("")},d)),d+=200,l(i,d,70),()=>{o.forEach(p=>clearTimeout(p))}},[]),h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"Tyler's Collection Homepage"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem"},children:"This is my personal webpage to see what is on my shelves, wishlists, and TCG collections."}),h.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"8px 14px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"linear-gradient(135deg, rgba(255,182,193,0.18), rgba(43,15,29,0.9))",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"14px",fontSize:"0.78rem",color:"#ffe6ed",letterSpacing:"0.05em",textTransform:"uppercase",fontWeight:700},children:[h.jsx("span",{role:"img","aria-label":"manga",children:""})," Manga",h.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),h.jsx("span",{role:"img","aria-label":"anime",children:""})," Anime",h.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),h.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"About Me"}),h.jsxs("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5},children:["Hey, I am Tyler and I go by ",h.jsx("strong",{children:"im.ok"}),". I hoard manga, binge anime, and collect trading cards. This site is where I track everything: volumes on my shelves, finished shows, and my TCG collection as they all slowly grow."]}),h.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem"},children:"You'll find my reading history, and collection values across the different pages - it's basically my personal library dashboard."}),h.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px"},children:[h.jsx("span",{className:"pill",children:"Manga library"}),h.jsx("span",{className:"pill",children:"My Anime List (MAL)"}),h.jsx("span",{className:"pill",children:"Pokemon & One Piece TCG"}),h.jsx("span",{className:"pill",children:"Data Nerd"})]})]}),h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"Explore these pages"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[h.jsxs("a",{href:"/base/manga",className:"section-card",children:[h.jsx("h3",{children:"Manga Library"}),h.jsx("p",{children:"Full manga collection & wishlist."}),h.jsx("div",{className:"section-chip-row",children:h.jsx("span",{className:"section-chip accent",children:"Library & wishlist"})})]}),h.jsxs("a",{href:"/base/anime",className:"section-card",children:[h.jsx("h3",{children:"Anime Library"}),h.jsx("p",{children:"The entire watched, plan to watch, and watching list synced directly from MyAnimeList."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"MAL synced"}),h.jsx("span",{className:"section-chip",children:"Status filters"}),h.jsx("span",{className:"section-chip",children:"Quick stats"})]})]}),h.jsxs("a",{href:"/base/tcg",className:"section-card",children:[h.jsx("h3",{children:"TCG Collection"}),h.jsx("p",{children:"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Full Collection"}),h.jsx("span",{className:"section-chip",children:"Still Under-Construction"})]})]})]})]})]}),h.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"@ 2025 im.ok. All rights reserved."})]})}const BP="modulepreload",$P=function(r){return"/base/"+r},Ev={},pw=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let d=function(v){return Promise.all(v.map(w=>Promise.resolve(w).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=d(t.map(v=>{if(v=$P(v),v in Ev)return;Ev[v]=!0;const w=v.endsWith(".css"),I=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${I}`))return;const C=document.createElement("link");if(C.rel=w?"stylesheet":BP,w||(C.as="script"),C.crossOrigin="",C.href=v,g&&C.setAttribute("nonce",g),document.head.appendChild(C),w)return new Promise((U,q)=>{C.addEventListener("load",U),C.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})};function Ga(r){let e=(r||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),i=t?t[1].trim().toLowerCase():e.toLowerCase(),o=t&&t[2]?parseInt(t[2],10):0;return{name:i,vol:Number.isFinite(o)?o:0}}function WP(){const{admin:r}=ca(),e=r,[t,i]=W.useState("library");W.useEffect(()=>{document.title="Manga | Library"},[]);const[o,l]=W.useState([]),[d,p]=W.useState([]),[g,v]=W.useState([]),[w,I]=W.useState([]),[C,U]=W.useState(!0),[q,K]=W.useState(""),[O,ce]=W.useState(""),[pe,le]=W.useState(""),[de,ue]=W.useState(!1),[me,N]=W.useState(()=>new Set),[S,P]=W.useState(null),[k,D]=W.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[b,x]=W.useState({open:!1,index:0,items:[]});async function se(){const R=await Yi(er(rt,"library")),te=[];R.forEach(Y=>{const z=Y.data();te.push({id:Y.id,title:z.title||"",authors:z.authors||"Unknown",publisher:z.publisher||"Unknown",demographic:z.demographic||"",genre:z.genre||"",subGenre:z.subGenre||"",date:z.date||"Unknown",cover:z.cover||"",isbn:z.isbn||"",pageCount:z.pageCount!==void 0&&z.pageCount!==null?z.pageCount:"",rating:z.rating!==void 0&&z.rating!==null?z.rating:"",amountPaid:z.amountPaid!==void 0&&z.amountPaid!==null?z.amountPaid:"",dateRead:z.dateRead||"",datePurchased:z.datePurchased||"",msrp:z.msrp!==void 0&&z.msrp!==null?z.msrp:"",specialType:z.specialType||"",specialVolumes:z.specialVolumes!==void 0&&z.specialVolumes!==null?z.specialVolumes:"",collectiblePrice:z.collectiblePrice!==void 0&&z.collectiblePrice!==null?z.collectiblePrice:"",read:!!z.read,amazonURL:z.amazonURL||"",kind:"library"})}),te.sort((Y,z)=>{const fe=Ga(Y.title),Fe=Ga(z.title),at=fe.name.localeCompare(Fe.name);return at!==0?at:fe.vol-Fe.vol}),l(te),v(Y=>{const z=new Set(Y);return te.forEach(fe=>z.add(fe.title||"")),Array.from(z).filter(Boolean).sort()})}async function be(){const R=await Yi(er(rt,"wishlist")),te=[];R.forEach(Y=>{const z=Y.data();te.push({id:Y.id,title:z.title||"",authors:z.authors||"Unknown",publisher:z.publisher||"Unknown",date:z.date||"Unknown",cover:z.cover||"",isbn:z.isbn||"",pageCount:z.pageCount!==void 0&&z.pageCount!==null?z.pageCount:"",rating:z.rating!==void 0&&z.rating!==null?z.rating:"",amountPaid:z.amountPaid!==void 0&&z.amountPaid!==null?z.amountPaid:"",specialType:z.specialType||"",specialVolumes:z.specialVolumes!==void 0&&z.specialVolumes!==null?z.specialVolumes:"",collectiblePrice:z.collectiblePrice!==void 0&&z.collectiblePrice!==null?z.collectiblePrice:"",amazonURL:z.amazonURL||"",kind:"wishlist"})}),te.sort((Y,z)=>{const fe=Ga(Y.title),Fe=Ga(z.title),at=fe.name.localeCompare(Fe.name);return at!==0?at:fe.vol-Fe.vol}),p(te),v(Y=>{const z=new Set(Y);return te.forEach(fe=>z.add(fe.title||"")),Array.from(z).filter(Boolean).sort()})}W.useEffect(()=>{let R=!1;async function te(){U(!0),K("");try{await Promise.all([se(),be()]),R||U(!1)}catch(Y){console.error(Y),R||(K("Failed to load manga data from Firestore."),U(!1))}}return te(),()=>{R=!0}},[]);const Be=W.useMemo(()=>{const R=O.trim().toLowerCase();return R?o.filter(te=>[te.title,te.authors,te.publisher,te.isbn,te.date,String(te.pageCount??"")].join(" ").toLowerCase().includes(R)):o},[o,O]),Ve=W.useMemo(()=>{const R=pe.trim().toLowerCase();return R?d.filter(te=>[te.title,te.authors,te.publisher,te.isbn,te.date,String(te.pageCount??"")].join(" ").toLowerCase().includes(R)):d},[d,pe]);function oe(){e&&(ue(R=>!R),N(new Set))}function Se(R){N(te=>{const Y=new Set(te);return Y.has(R)?Y.delete(R):Y.add(R),Y})}async function ge(R){if(!e){alert("Multi-select actions require admin access.");return}const te=Array.from(me);if(!te.length){alert("Select at least one item first.");return}const Y=t==="library";try{if(R==="move")if(Y){if(!window.confirm(`Move ${te.length} item(s) to Wishlist?`))return;for(const z of te){const fe=o.find(at=>at.id===z);if(!fe)continue;const Fe={title:fe.title,authors:fe.authors,publisher:fe.publisher,date:fe.date,isbn:fe.isbn,pageCount:fe.pageCount||"",cover:fe.cover,amazonURL:fe.amazonURL||"",specialType:fe.specialType||"",specialVolumes:fe.specialVolumes||"",collectiblePrice:fe.collectiblePrice||"",rating:fe.rating||""};await el(er(rt,"wishlist"),Fe),await Ws(jt(rt,"library",z))}}else{if(!window.confirm(`Move ${te.length} item(s) to Library?`))return;for(const z of te){const fe=d.find(at=>at.id===z);if(!fe)continue;const Fe={title:fe.title,authors:fe.authors,publisher:fe.publisher,date:fe.date,isbn:fe.isbn,pageCount:fe.pageCount||"",cover:fe.cover,amountPaid:"",read:!1,rating:"",specialType:fe.specialType||"",specialVolumes:fe.specialVolumes||"",collectiblePrice:fe.collectiblePrice||""};await el(er(rt,"library"),Fe),await Ws(jt(rt,"wishlist",z))}}else if(R==="markRead"&&Y)for(const z of te)await $o(jt(rt,"library",z),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(R==="markUnread"&&Y)for(const z of te)await $o(jt(rt,"library",z),{read:!1,dateRead:"",rating:""});else if(R==="delete"){const z=Y?"library":"wishlist";if(!window.confirm(`Delete ${te.length} item(s) from ${Y?"Library":"Wishlist"}?`))return;for(const fe of te)await Ws(jt(rt,z,fe))}await Promise.all([se(),be()]),N(new Set),ue(!1)}catch(z){console.error(z),alert("Failed to apply multi-select action.")}}function L(R){P(R)}function J(){P(null)}const Ee=()=>D(R=>({...R,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},multiAdd:!1,startVol:"",endVol:""})),Le=W.useMemo(()=>{const R=new Map;return[...o,...d].forEach(te=>{const Y=Ga(te.title||"");if(Y.name)if(R.has(Y.name)){const z=R.get(Y.name);z.maxVol=Math.max(z.maxVol,Y.vol)}else{const z=(te.title||"").replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||te.title||Y.name;R.set(Y.name,{display:z,maxVol:Y.vol})}}),R},[o,d]),Me=R=>{D(te=>({...te,open:!0,mode:"add",list:R,editingId:null,data:{...te.data,title:"",list:R}}))},ze=R=>{D({open:!0,mode:"edit",list:R.kind==="wishlist"?"wishlist":"library",editingId:R.id,data:{title:R.title||"",authors:R.authors||"",publisher:R.publisher||"",demographic:R.demographic||"",genre:R.genre||"",subGenre:R.subGenre||"",date:R.date||"",cover:R.cover||"",isbn:R.isbn||"",pageCount:R.pageCount||"",rating:R.rating||"",amountPaid:R.amountPaid||"",dateRead:R.dateRead||"",datePurchased:R.datePurchased||"",msrp:R.msrp||"",specialType:R.specialType||"",specialVolumes:R.specialVolumes||"",collectiblePrice:R.collectiblePrice||"",amazonURL:R.amazonURL||"",read:!!R.read}})},Re=(R,te,Y="text")=>{if(D(z=>({...z,data:{...z.data,[R]:Y==="checkbox"?!!te:te}})),R==="title"){const z=String(te||"").trim().toLowerCase();if(!z)I([]);else{const fe=[];Le.forEach((Fe,at)=>{if(Fe.display.toLowerCase().includes(z)){const $=Fe.maxVol>0?Fe.maxVol+1:1;fe.push(`${Fe.display}, Vol. ${$}`)}}),I(fe.slice(0,6))}}};async function $e(){if(!e)return;const{mode:R,list:te,data:Y,editingId:z,multiAdd:fe,startVol:Fe,endVol:at}=k,$=te||"library";if(!Y.title.trim()){alert("Title is required.");return}const Z=Q=>({title:Q||Y.title.trim(),authors:Y.authors.trim(),publisher:Y.publisher.trim(),demographic:Y.demographic.trim(),genre:Y.genre.trim(),subGenre:Y.subGenre.trim(),date:Y.date.trim(),cover:Y.cover.trim(),isbn:Y.isbn.trim(),pageCount:Y.pageCount===""?"":Number(Y.pageCount),rating:Y.rating===""?"":Math.max(.5,Math.min(5,Number(Y.rating))),amountPaid:Y.amountPaid===""?"":Number(Y.amountPaid),dateRead:Y.dateRead.trim(),datePurchased:Y.datePurchased.trim(),msrp:Y.msrp===""?"":Number(Y.msrp),specialType:Y.specialType.trim(),specialVolumes:Y.specialVolumes===""?"":Number(Y.specialVolumes),collectiblePrice:Y.collectiblePrice===""?"":Number(Y.collectiblePrice),amazonURL:Y.amazonURL.trim(),read:!!Y.read,kind:te});try{if(R==="add"&&fe){const Q=Number(Fe||0),xe=Number(at||0);if(!Number.isFinite(Q)||!Number.isFinite(xe)||Q<=0||xe<Q){alert("Provide valid start/end volumes (start > 0, end >= start).");return}const We=[];for(let Ke=Q;Ke<=xe;Ke++){const tt=`${Y.title.trim()} Vol. ${Ke}`;We.push(el(er(rt,$),Z(tt)))}await Promise.all(We)}else R==="add"?await el(er(rt,$),Z()):R==="edit"&&z&&await $o(jt(rt,$,z),Z());await Promise.all([se(),be()]),Ee()}catch(Q){console.error(Q),alert("Failed to save entry.")}}async function it(R,te){if(e&&window.confirm("Delete this entry?"))try{await Ws(jt(rt,te,R)),await Promise.all([se(),be()])}catch(Y){console.error(Y),alert("Failed to delete entry.")}}const[wt,Nn]=W.useState(!1),St=()=>x({open:!1,index:0,items:[]});async function Ot(R,te){if(!(R!=null&&R.id))return;const Y=R.kind==="wishlist"?"wishlist":"library";Nn(!0);try{await $o(jt(rt,Y,R.id),te),await Promise.all([se(),be()]),P(z=>z&&z.id===R.id?{...z,...te}:z)}catch(z){console.error(z),alert("Failed to update entry.")}finally{Nn(!1)}}const vn=(R,te)=>{const Y=te===""?"":Math.max(.5,Math.min(5,Number(te)));Ot(R,{rating:Y})},ir=(R,te)=>{if(!R)return;const Y=te?{read:!0,dateRead:new Date().toISOString().slice(0,10)}:{read:!1,dateRead:""};Ot(R,Y)},fn=()=>{if(!me.size){alert("Select at least one entry first.");return}const te=[...o,...d].filter(z=>me.has(z.id));if(!te.length){alert("No items selected.");return}const Y=te.map(z=>({id:z.id,kind:z.kind||(t==="wishlist"?"wishlist":"library"),data:{title:z.title||"",authors:z.authors||"",publisher:z.publisher||"",demographic:z.demographic||"",genre:z.genre||"",subGenre:z.subGenre||"",date:z.date||"",cover:z.cover||"",isbn:z.isbn||"",pageCount:z.pageCount||"",rating:z.rating||"",amountPaid:z.amountPaid||"",dateRead:z.dateRead||"",datePurchased:z.datePurchased||"",msrp:z.msrp||"",specialType:z.specialType||"",specialVolumes:z.specialVolumes||"",collectiblePrice:z.collectiblePrice||"",amazonURL:z.amazonURL||"",read:!!z.read}}));x({open:!0,index:0,items:Y})},Ge=(R,te,Y="text")=>{x(z=>{const fe=[...z.items],Fe={...fe[z.index]};return Fe.data={...Fe.data,[R]:Y==="checkbox"?!!te:te},fe[z.index]=Fe,{...z,items:fe}})},sr=()=>{x(R=>({...R,index:Math.min(R.index+1,R.items.length-1)}))},or=()=>{x(R=>({...R,index:Math.max(R.index-1,0)}))};async function _n(){if(!e)return;const R=b.items;if(!R.length){St();return}try{const te=R.map(Y=>{const z={...Y.data,pageCount:Y.data.pageCount===""?"":Number(Y.data.pageCount),rating:Y.data.rating===""?"":Math.max(.5,Math.min(5,Number(Y.data.rating))),amountPaid:Y.data.amountPaid===""?"":Number(Y.data.amountPaid),msrp:Y.data.msrp===""?"":Number(Y.data.msrp),collectiblePrice:Y.data.collectiblePrice===""?"":Number(Y.data.collectiblePrice),specialVolumes:Y.data.specialVolumes===""?"":Number(Y.data.specialVolumes),read:!!Y.data.read},fe=Y.kind==="wishlist"?"wishlist":"library";return $o(jt(rt,fe,Y.id),z)});await Promise.all(te),await Promise.all([se(),be()]),N(new Set),ue(!1),St()}catch(te){console.error(te),alert("Failed to save bulk edits.")}}function wn(R){const te=me.has(R.id),Y=R.kind==="library",z=()=>{de&&e?Se(R.id):L(R)};return h.jsxs("div",{className:"manga-card"+(R.read&&Y?" read":"")+(te?" multiselect-selected":""),onClick:z,children:[h.jsx("div",{className:"manga-card-cover-wrap",children:h.jsx("img",{src:R.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),h.jsxs("div",{className:"manga-card-body",children:[h.jsx("div",{className:"manga-card-title",children:R.title||"Untitled"}),h.jsxs("div",{className:"manga-card-meta",children:[R.authors&&R.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[R.authors,h.jsx("br",{})]}),R.publisher&&R.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[R.publisher,h.jsx("br",{})]}),R.date&&R.date!=="Unknown"&&R.date]}),R.isbn&&h.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",R.isbn]}),e&&h.jsxs("div",{className:"manga-card-actions",children:[h.jsx("button",{type:"button",className:"manga-btn mini",onClick:fe=>{fe.stopPropagation(),ze(R)},children:"Edit"}),h.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:fe=>{fe.stopPropagation(),it(R.id,R.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},R.id)}const jn=({value:R,onChange:te})=>{const[Y,z]=W.useState(null),fe=Math.max(0,Math.min(5,Number(R)||0)),Fe=Y??fe,at=Array.from({length:10},(Q,xe)=>(xe+1)*.5),$=5,Z=Array.from({length:$},(Q,xe)=>Math.max(0,Math.min(1,Fe-xe)));return h.jsxs("div",{className:"star-shell",role:"group","aria-label":"Rating",children:[h.jsxs("div",{className:"star-visual",style:{"--star-count":$},children:[h.jsx("div",{className:"star-row",children:Z.map((Q,xe)=>h.jsxs("div",{className:"star-icon",children:[h.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"star-base",children:h.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})}),h.jsx("div",{className:"star-fill",style:{"--pct":`${(Math.max(0,Math.min(1,Q))*100).toFixed(1)}%`},children:h.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:h.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})})})]},xe))}),h.jsx("div",{className:"star-hit",children:at.map(Q=>h.jsx("button",{type:"button","aria-label":`${Q} stars`,onMouseEnter:()=>z(Q),onMouseLeave:()=>z(null),onClick:()=>te(Q)},Q))})]}),h.jsx("div",{className:"star-value",children:Fe?Fe.toFixed(1):"--"}),h.jsx("button",{type:"button",className:"star-clear",onClick:()=>te(""),"aria-label":"Clear rating",children:"clear"})]})},rn=t==="library"?Be:Ve,Kt=(R,te)=>{if(!R.length)return;const Y=Array.from(R.reduce((Z,Q)=>(Object.keys(Q).forEach(xe=>Z.add(xe)),Z),new Set)),z=Z=>{const Q=Z==null?"":String(Z);return/[",\n]/.test(Q)?`"${Q.replace(/"/g,'""')}"`:Q},fe=[Y.join(",")].concat(R.map(Z=>Y.map(Q=>z(Z[Q])).join(","))),Fe=new Blob([fe.join(`
`)],{type:"text/csv"}),at=URL.createObjectURL(Fe),$=document.createElement("a");$.href=at,$.download=te,$.click(),URL.revokeObjectURL(at)},Hr=(R,te)=>{const Y=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),z=URL.createObjectURL(Y),fe=document.createElement("a");fe.href=z,fe.download=te,fe.click(),URL.revokeObjectURL(z)},mt=async(R,te)=>{const Y=(fe,Fe="image")=>(fe||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)||Fe,z=R.filter(fe=>fe.cover).map((fe,Fe)=>({url:fe.cover,name:Y(fe.title||`manga-${Fe+1}`,`manga-${Fe+1}`)}));if(!z.length){alert("No images found to download.");return}try{const fe=(await pw(async()=>{const{default:Ke}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Ke}},[])).default,Fe=new fe,at=Fe.folder("images"),$={},Z=z.map(async(Ke,tt)=>{try{const En=await(await fetch(Ke.url)).blob(),Ir=(Ke.url.split(".").pop()||"jpg").split(/[?#]/)[0],Bt=Ke.name||`image-${tt+1}`;$[Bt]=($[Bt]||0)+1;const Sr=$[Bt]>1?`-${$[Bt]}`:"";at.file(`${Bt}${Sr}.${Ir}`,En)}catch(gt){console.warn("Failed to fetch image",Ke.url,gt)}});await Promise.all(Z);const Q=await Fe.generateAsync({type:"blob"}),xe=URL.createObjectURL(Q),We=document.createElement("a");We.href=xe,We.download=te,We.click(),URL.revokeObjectURL(xe)}catch(fe){console.error("Zip download failed",fe),alert("Failed to create zip. Please try again.")}};return h.jsxs("div",{className:"manga-page",children:[h.jsxs("header",{className:"manga-header",style:{flexDirection:"column",alignItems:"center",textAlign:"center"},children:[h.jsx("div",{className:"manga-header-title",style:{justifyContent:"center",gap:"0.6rem",fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Manga Library"}),h.jsx("div",{className:"manga-header-sub",style:{textAlign:"center"},children:"Library & Wishlist are managed via Firestore. This React port reuses the same collections as your original index.html."})]}),h.jsxs("div",{className:"manga-tabs",children:[h.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{i("library"),ue(!1),N(new Set)},children:"Library"}),h.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{i("wishlist"),ue(!1),N(new Set)},children:"Wishlist"})]}),t!=="dashboard"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-toolbar",children:[h.jsxs("div",{className:"manga-toolbar-left",children:[h.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?O:pe,onChange:R=>t==="library"?ce(R.target.value):le(R.target.value)}),h.jsx("div",{className:"manga-counter",children:t==="library"?h.jsxs(h.Fragment,{children:["Library: ",Be.length," / ",o.length]}):h.jsxs(h.Fragment,{children:["Wishlist: ",Ve.length," / ",d.length]})})]}),h.jsx("div",{className:"manga-toolbar-right",children:e&&h.jsx("button",{className:"manga-btn secondary"+(de?" active":""),onClick:oe,children:de?"Exit Multi-select":"Multi-select"})})]}),e&&de&&h.jsxs("div",{className:"manga-multiselect-bar",children:[h.jsxs("span",{children:["Selected: ",h.jsx("strong",{children:me.size})]}),h.jsx("button",{className:"manga-btn",onClick:fn,children:"Bulk Edit"}),h.jsxs("button",{className:"manga-btn secondary",onClick:()=>ge("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"manga-btn",onClick:()=>ge("markRead"),children:"Mark Read"}),h.jsx("button",{className:"manga-btn secondary",onClick:()=>ge("markUnread"),children:"Mark Unread"})]}),h.jsx("button",{className:"manga-btn danger",onClick:()=>ge("delete"),children:"Delete"})]})]}),C?h.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):q?h.jsx("div",{className:"manga-empty-state",children:q}):rn.length===0?h.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):h.jsx("div",{className:"manga-grid",children:rn.map(R=>wn(R))}),e&&h.jsxs("div",{className:"manga-floating-actions",children:[h.jsxs("button",{className:"manga-btn",type:"button","aria-label":"Add item",onClick:()=>Me(t==="wishlist"?"wishlist":"library"),children:["+ ",t==="wishlist"?"Wishlist":"Library"]}),h.jsxs("div",{className:"manga-export-actions",children:[h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Hr(t==="library"?o:d,t==="library"?"manga-library.json":"manga-wishlist.json"),children:"Export JSON"}),h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Kt(t==="library"?o:d,t==="library"?"manga-library.csv":"manga-wishlist.csv"),children:"Export CSV"}),h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>mt(t==="library"?o:d,t==="library"?"manga-library-images.zip":"manga-wishlist-images.zip"),children:"Download Images"})]})]}),S&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:R=>{R.target===R.currentTarget&&J()},children:h.jsxs("div",{className:"manga-modal",children:[h.jsx("div",{className:"manga-modal-cover-wrap",children:h.jsx("img",{src:S.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:S.title||"Untitled"}),h.jsx("button",{className:"manga-modal-close",onClick:J,type:"button",children:"Close"})]}),h.jsxs("div",{className:"manga-modal-meta",children:[S.authors&&S.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Author(s):"})," ",S.authors,h.jsx("br",{})]}),S.publisher&&S.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Publisher:"})," ",S.publisher,h.jsx("br",{})]}),S.date&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Release:"})," ",S.date,h.jsx("br",{})]}),S.isbn&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"ISBN:"})," ",S.isbn,h.jsx("br",{})]})]}),h.jsxs("div",{className:"manga-modal-details",children:[S.pageCount&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Pages:"})," ",S.pageCount,h.jsx("br",{})]}),h.jsxs("div",{style:{margin:"6px 0"},children:[h.jsx("strong",{children:"Rating:"})," ",h.jsx(jn,{value:S.rating||"",onChange:R=>vn(S,R)})]}),S.amountPaid&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Amount Paid:"})," $",S.amountPaid,h.jsx("br",{})]}),S.msrp&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"MSRP:"})," $",S.msrp,h.jsx("br",{})]}),S.collectiblePrice&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Collectible:"})," $",S.collectiblePrice,h.jsx("br",{})]}),S.read&&S.dateRead&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Date Read:"})," ",S.dateRead,h.jsx("br",{})]}),S.amazonURL&&h.jsx("div",{style:{marginTop:"6px"},children:h.jsx("a",{href:S.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),h.jsxs("div",{className:"manga-modal-footer",style:{gap:"10px",alignItems:"center"},children:[h.jsx("div",{children:S.kind==="library"&&S.read?"Marked as read in your library.":S.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."}),S.kind==="library"&&h.jsx(h.Fragment,{children:S.read?h.jsx("button",{className:"manga-btn mini secondary",disabled:wt,onClick:()=>ir(S,!1),type:"button",children:"Mark as unread"}):h.jsx("button",{className:"manga-btn mini",disabled:wt,onClick:()=>ir(S,!0),type:"button",children:"Mark as read"})})]})]})]})}),e&&k.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:R=>{R.target===R.currentTarget&&Ee()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:k.mode==="add"?"Add Entry":"Edit Entry"}),h.jsx("button",{className:"manga-modal-close",onClick:Ee,type:"button",children:"Close"})]}),h.jsxs("div",{className:"admin-form-layout",children:[h.jsx("div",{className:"admin-cover-frame",children:h.jsx("img",{src:k.data.cover||"https://imgur.com/chUgq4W.png",alt:"Cover preview"})}),h.jsxs("div",{className:"admin-form-fields",children:[h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:k.data.title,onChange:R=>Re("title",R.target.value)})]})}),w.length>0&&h.jsx("div",{className:"title-suggestions",children:w.map((R,te)=>h.jsx("button",{type:"button",className:"manga-btn mini",onClick:()=>Re("title",R),children:R},R+te))}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:k.data.authors,onChange:R=>Re("authors",R.target.value)})]})}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:k.data.publisher,onChange:R=>Re("publisher",R.target.value)})]})}),h.jsxs("div",{className:"admin-row three",children:[h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:k.data.date,onChange:R=>Re("date",R.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:k.data.datePurchased,onChange:R=>Re("datePurchased",R.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:k.data.dateRead,onChange:R=>Re("dateRead",R.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",placeholder:"e.g. 192",value:k.data.pageCount,onChange:R=>Re("pageCount",R.target.value)})]}),h.jsxs("label",{children:["ISBN (library only)",h.jsx("input",{type:"text",value:k.data.isbn,onChange:R=>Re("isbn",R.target.value)})]})]}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",placeholder:"Paste image URL here",value:k.data.cover,onChange:R=>Re("cover",R.target.value)})]})}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:k.data.amountPaid,onChange:R=>Re("amountPaid",R.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:k.data.msrp,onChange:R=>Re("msrp",R.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:k.data.collectiblePrice,onChange:R=>Re("collectiblePrice",R.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",min:"0",value:k.data.specialVolumes,onChange:R=>Re("specialVolumes",R.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:k.data.specialType,onChange:R=>Re("specialType",R.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:k.data.amazonURL,onChange:R=>Re("amazonURL",R.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:k.data.demographic,onChange:R=>Re("demographic",R.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:k.data.genre,onChange:R=>Re("genre",R.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:k.data.subGenre,onChange:R=>Re("subGenre",R.target.value)})]}),h.jsxs("label",{children:["Rating (1-5 stars)",h.jsx(jn,{value:k.data.rating,onChange:R=>Re("rating",R)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:k.data.read,onChange:R=>Re("read",R.target.checked,"checkbox")}),h.jsx("span",{children:"Mark as read"})]}),h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:k.multiAdd,onChange:R=>D(te=>({...te,multiAdd:R.target.checked}))}),h.jsx("span",{children:"Multi-create volumes"})]})]}),k.multiAdd&&h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Start Volume",h.jsx("input",{type:"number",min:"1",value:k.startVol,onChange:R=>D(te=>({...te,startVol:R.target.value}))})]}),h.jsxs("label",{children:["End Volume",h.jsx("input",{type:"number",min:"1",value:k.endVol,onChange:R=>D(te=>({...te,endVol:R.target.value}))})]})]})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:Ee,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:$e,type:"button",children:k.mode==="add"?"Add":"Save"})]})]})})}),e&&b.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:R=>{R.target===R.currentTarget&&St()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",b.index+1," / ",b.items.length,")"]}),h.jsx("button",{className:"manga-modal-close",onClick:St,type:"button",children:"Close"})]}),b.items.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",b.items[b.index].data.title||"Untitled"]}),h.jsxs("div",{className:"admin-form-grid",children:[h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:b.items[b.index].data.title,onChange:R=>Ge("title",R.target.value)})]}),h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:b.items[b.index].data.authors,onChange:R=>Ge("authors",R.target.value)})]}),h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:b.items[b.index].data.publisher,onChange:R=>Ge("publisher",R.target.value)})]}),h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:b.items[b.index].data.demographic,onChange:R=>Ge("demographic",R.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:b.items[b.index].data.genre,onChange:R=>Ge("genre",R.target.value)})]}),h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:b.items[b.index].data.subGenre,onChange:R=>Ge("subGenre",R.target.value)})]}),h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:b.items[b.index].data.date,onChange:R=>Ge("date",R.target.value)})]}),h.jsxs("label",{children:["ISBN",h.jsx("input",{type:"text",value:b.items[b.index].data.isbn,onChange:R=>Ge("isbn",R.target.value)})]}),h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",value:b.items[b.index].data.cover,onChange:R=>Ge("cover",R.target.value)})]}),h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",value:b.items[b.index].data.pageCount,onChange:R=>Ge("pageCount",R.target.value)})]}),h.jsxs("label",{children:["Rating (1-5 stars)",h.jsx(jn,{value:b.items[b.index].data.rating,onChange:R=>Ge("rating",R)})]}),h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:b.items[b.index].data.amountPaid,onChange:R=>Ge("amountPaid",R.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:b.items[b.index].data.msrp,onChange:R=>Ge("msrp",R.target.value)})]}),h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:b.items[b.index].data.collectiblePrice,onChange:R=>Ge("collectiblePrice",R.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:b.items[b.index].data.datePurchased,onChange:R=>Ge("datePurchased",R.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:b.items[b.index].data.dateRead,onChange:R=>Ge("dateRead",R.target.value)})]}),h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:b.items[b.index].data.specialType,onChange:R=>Ge("specialType",R.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",value:b.items[b.index].data.specialVolumes,onChange:R=>Ge("specialVolumes",R.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:b.items[b.index].data.amazonURL,onChange:R=>Ge("amazonURL",R.target.value)})]}),h.jsxs("label",{className:"checkbox-row",children:[h.jsx("input",{type:"checkbox",checked:b.items[b.index].data.read,onChange:R=>Ge("read",R.target.checked,"checkbox")}),h.jsx("span",{children:"Marked as read"})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[h.jsxs("div",{children:[h.jsx("button",{className:"manga-btn secondary",onClick:or,type:"button",disabled:b.index===0,children:"Previous"}),h.jsx("button",{className:"manga-btn secondary",onClick:sr,type:"button",disabled:b.index===b.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:St,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:_n,type:"button",children:"Save Edits"})]})]})]})]})})}),h.jsx("datalist",{id:"adminTitleSuggestions",children:g.map(R=>h.jsx("option",{value:R},R))})]})}const HP="https://imokmalworker.imokissick.workers.dev/?url=",qP="im_ok",xv=300,GP={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function KP(r){const e=GP[r.status]||(typeof r.status=="string"?r.status.toLowerCase():"unknown");return{id:r.anime_id||r.id,title:r.anime_title||r.title||"Untitled",episodes:r.anime_num_episodes??r.episodes??null,status:e,score:r.score??null,image:r.anime_image_path||r.image_url||r.anime_img||r.picture||null}}function Tv(){return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null}]}async function QP(r,e){const t=`https://myanimelist.net/animelist/${r}/load.json?status=7&offset=${e}`,i=await fetch(`${HP}${encodeURIComponent(t)}`);if(!i.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return i.json()}async function YP(r=qP){const e=[];try{let t=0;for(;;){const i=await QP(r,t);if(!Array.isArray(i)||i.length===0||(e.push(...i),i.length<xv))break;t+=xv}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),Tv()}return e.length?e.map(KP):Tv()}function JP(){const{admin:r}=ca(),e=ue=>ue?ue.toString().replace(/_/g," ").replace(/\b\w/g,me=>me.toUpperCase()):"Unknown",[t,i]=W.useState([]),[o,l]=W.useState([]),[d,p]=W.useState(""),[g,v]=W.useState("all"),[w,I]=W.useState(!0),[C,U]=W.useState(""),[q,K]=W.useState(null);W.useEffect(()=>{document.title="Anime | Library"},[]);const O=(ue,me="image")=>(ue||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80)||me,ce=async()=>{const ue=t.filter(me=>me.image).map((me,N)=>({url:me.image,name:O(me.title||`anime-${N+1}`,`anime-${N+1}`)}));if(!ue.length){alert("No images found to download.");return}try{const me=(await pw(async()=>{const{default:x}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:x}},[])).default,N=new me,S=N.folder("images"),P={};await Promise.all(ue.map(async(x,se)=>{try{const Be=await(await fetch(x.url)).blob(),Ve=(x.url.split(".").pop()||"jpg").split(/[?#]/)[0],oe=x.name||`image-${se+1}`;P[oe]=(P[oe]||0)+1;const Se=P[oe]>1?`-${P[oe]}`:"";S.file(`${oe}${Se}.${Ve}`,Be)}catch(be){console.warn("Failed to fetch image",x.url,be)}}));const k=await N.generateAsync({type:"blob"}),D=URL.createObjectURL(k),b=document.createElement("a");b.href=D,b.download="anime-images.zip",b.click(),URL.revokeObjectURL(D)}catch(me){console.error("Zip download failed",me),alert("Failed to create zip. Please try again.")}};W.useEffect(()=>{async function ue(){try{const me=await YP();i(me),l(me)}catch(me){console.error(me),U("Failed to load data from MAL.")}finally{I(!1)}}ue()},[]);const pe=ue=>{switch((ue||"unknown").toLowerCase()){case"watching":return 0;case"completed":return 1;case"on_hold":return 2;case"plan_to_watch":return 3;case"dropped":return 4;default:return 5}};W.useEffect(()=>{let ue=[...t];if(g!=="all"&&(ue=ue.filter(me=>(me.status||"").toLowerCase()===g)),d){const me=d.toLowerCase();ue=ue.filter(N=>(N.title||"").toLowerCase().includes(me))}ue.sort((me,N)=>{const S=pe(me.status),P=pe(N.status);return S!==P?S-P:(me.title||"").localeCompare(N.title||"")}),l(ue)},[t,g,d]);const le=W.useMemo(()=>{const ue=t.length,N=t.reduce((k,D)=>k+(Number.isFinite(D.episodes)?Number(D.episodes):0),0)*.4,S={watching:0,completed:0,on_hold:0,dropped:0,plan_to_watch:0,unknown:0};t.forEach(k=>{const D=(k.status||"unknown").toLowerCase();S[D]!=null?S[D]+=1:S.unknown+=1});const P=t.reduce((k,D)=>Number.isFinite(D.score)?k+D.score:k,0)/Math.max(1,t.filter(k=>Number.isFinite(k.score)).length||1);return{total:ue,byStatus:S,avgScore:Number.isFinite(P)?P:0,totalHours:N}},[t]),de=ue=>{const me=ue.image||"https://imgur.com/chUgq4W.png";return h.jsxs("article",{className:"anime-card",onClick:()=>K(ue),children:[h.jsxs("div",{className:"anime-cover-wrap",children:[h.jsx("img",{className:"anime-cover",src:me,alt:ue.title,loading:"lazy",decoding:"async"}),h.jsx("div",{className:`badge-status ${(ue.status||"unknown").toLowerCase()}`,children:e(ue.status)}),ue.score!=null&&h.jsx("div",{className:"badge-score",children:ue.score})]}),h.jsxs("div",{className:"anime-meta",children:[h.jsx("div",{className:"anime-title",children:ue.title}),h.jsx("div",{className:"anime-sub",children:ue.episodes?`${ue.episodes} episodes`:"Episodes: ?"}),h.jsxs("div",{className:"anime-progress",children:["Status: ",e(ue.status)]})]})]},ue.id||ue.title)};return h.jsxs("main",{className:"anime-page",children:[h.jsxs("div",{className:"anime-content",children:[h.jsxs("header",{className:"anime-header",style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%"},children:[h.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[h.jsx("h1",{className:"anime-title",style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Anime Library"}),h.jsx("p",{className:"anime-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"MAL-synced overview of your shows"})]}),r&&h.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:h.jsx("button",{className:"stat-link",type:"button",onClick:ce,children:"Download Images"})})]}),h.jsxs("div",{className:"anime-stats",children:[h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Total Entries"}),h.jsx("div",{className:"anime-stat-value",children:le.total})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Watching"}),h.jsx("div",{className:"anime-stat-value",children:le.byStatus.watching})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Completed"}),h.jsx("div",{className:"anime-stat-value",children:le.byStatus.completed})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Plan to Watch"}),h.jsx("div",{className:"anime-stat-value",children:le.byStatus.plan_to_watch})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Avg. Score"}),h.jsx("div",{className:"anime-stat-value",children:le.avgScore?le.avgScore.toFixed(1):""})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Hours Watched (est.)"}),h.jsx("div",{className:"anime-stat-value",children:le.totalHours?le.totalHours.toFixed(1):"0.0"})]})]}),h.jsxs("section",{className:"anime-toolbar",children:[h.jsx("input",{type:"text",placeholder:"Search anime by title...",value:d,onChange:ue=>p(ue.target.value),className:"anime-input"}),h.jsxs("select",{value:g,onChange:ue=>v(ue.target.value),className:"anime-select",children:[h.jsx("option",{value:"all",children:"All statuses"}),h.jsx("option",{value:"watching",children:"Watching"}),h.jsx("option",{value:"completed",children:"Completed"}),h.jsx("option",{value:"on_hold",children:"On Hold"}),h.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"}),h.jsx("option",{value:"dropped",children:"Dropped"})]})]}),w&&h.jsx("div",{className:"loading",children:"Loading anime list from MAL..."}),C&&h.jsx("div",{className:"error-state",children:C}),!w&&!C&&h.jsx(h.Fragment,{children:o.length===0?h.jsx("div",{className:"empty-state",children:"No results match your filters yet."}):h.jsx("section",{className:"anime-grid",children:o.map(ue=>de(ue))})})]}),q&&h.jsx("div",{className:"modal-backdrop visible",onClick:ue=>{ue.target===ue.currentTarget&&K(null)},children:h.jsxs("div",{className:"anime-modal",children:[h.jsxs("div",{className:"anime-modal-header",children:[h.jsx("h2",{style:{color:"#ffb6c1",margin:0},children:q.title}),h.jsx("button",{className:"anime-modal-close",onClick:()=>K(null),type:"button",children:"Close"})]}),h.jsxs("div",{className:"anime-modal-body",children:[h.jsx("div",{children:h.jsx("img",{className:"anime-modal-cover",src:q.image||"https://imgur.com/chUgq4W.png",alt:q.title})}),h.jsxs("div",{className:"anime-modal-meta",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Status:"})," ",e(q.status)]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Episodes:"})," ",q.episodes?q.episodes:"Unknown"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Score:"})," ",q.score!=null?q.score:"N/A"]})]})]})]})})]})}function XP(){const r={game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:"",image:""},{admin:e}=ca(),[t,i]=W.useState([]),[o,l]=W.useState(!0),[d,p]=W.useState(""),[g,v]=W.useState("all"),[w,I]=W.useState(!1),[C,U]=W.useState([]),[q,K]=W.useState(""),[O,ce]=W.useState(null),[pe,le]=W.useState(!1),[de,ue]=W.useState(r);W.useEffect(()=>{document.title="TCG | Collection"},[]),W.useEffect(()=>{async function x(){try{const se=er(rt,"tcg"),be=await Yi(se),Be=[];be.forEach(Ve=>Be.push({id:Ve.id,...Ve.data()})),i(Be)}catch(se){console.error("Error loading TCG:",se)}finally{l(!1)}}x()},[]);const me=t.filter(x=>{if(g!=="all"&&x.game!==g)return!1;if(!d)return!0;const se=d.toLowerCase();return(x.name||"").toLowerCase().includes(se)||(x.setName||"").toLowerCase().includes(se)||(x.number||"").toLowerCase().includes(se)}),N=t.reduce((x,se)=>{const be=Number(se.quantity||1),Be=Number(se.pricePaid||0),Ve=Number(se.estimatedValue||0);return x.totalCards+=be,x.totalPaid+=be*Be,x.totalValue+=be*Ve,se.game==="pokemon"&&(x.pokemon+=be),se.game==="onepiece"&&(x.onepiece+=be),x},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),S=N.totalValue-N.totalPaid,P=(x,se)=>{ue(be=>({...be,[x]:se}))},k=async()=>{if(!e)return;if(!de.name.trim()){alert("Card name is required.");return}const x={game:de.game,name:de.name.trim(),setName:de.setName.trim(),number:de.number.trim(),rarity:de.rarity.trim(),condition:de.condition.trim(),quantity:Number(de.quantity||1),pricePaid:Number(de.pricePaid||0),estimatedValue:Number(de.estimatedValue||0),image:de.image.trim()};try{const se=er(rt,"tcg");await el(se,x),ue(r),le(!1);const be=await Yi(se),Be=[];be.forEach(Ve=>Be.push({id:Ve.id,...Ve.data()})),i(Be)}catch(se){console.error("Error adding card:",se),alert("Failed to save card.")}},D=async()=>{if(!e||!O)return;if(!O.name.trim()){alert("Card name is required.");return}const x={game:O.game,name:O.name.trim(),setName:O.setName.trim(),number:O.number.trim(),rarity:O.rarity.trim(),condition:O.condition.trim(),quantity:Number(O.quantity||1),pricePaid:Number(O.pricePaid||0),estimatedValue:Number(O.estimatedValue||0),image:O.image?O.image.trim():""};try{await $o(jt(rt,"tcg",O.id),x),i(se=>se.map(be=>be.id===O.id?{...be,...x}:be)),ce(null)}catch(se){console.error("Error updating card:",se),alert("Failed to update card.")}},b=async x=>{if(e&&window.confirm("Delete this card?"))try{await Ws(jt(rt,"tcg",x)),i(se=>se.filter(be=>be.id!==x))}catch(se){console.error("Delete error:",se),alert("Failed to delete card.")}};return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"6px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"TCG Collection"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Pokemon & One Piece TCG cards with quantities, prices, and collection value."})]}),e&&h.jsx("button",{className:"manga-btn",type:"button","aria-label":"Add card",onClick:()=>le(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"56px",height:"56px",borderRadius:"50%",padding:0,fontSize:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),e&&pe&&h.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:x=>{x.target===x.currentTarget&&le(!1)},children:h.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:x=>x.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Add card"}),h.jsx("button",{className:"dashboard-close",onClick:()=>le(!1),type:"button",children:"Close"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[h.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:de.image?h.jsx("img",{src:de.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:de.game,onChange:x=>P("game",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:de.name,onChange:x=>P("name",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:de.setName,onChange:x=>P("setName",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:de.number,onChange:x=>P("number",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:de.rarity,onChange:x=>P("rarity",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:de.condition,onChange:x=>P("condition",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",min:"1",value:de.quantity,onChange:x=>P("quantity",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:de.pricePaid,onChange:x=>P("pricePaid",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:de.estimatedValue,onChange:x=>P("estimatedValue",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",h.jsx("input",{type:"text",value:de.image||"",onChange:x=>P("image",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[h.jsx("button",{onClick:()=>{ue(r),le(!1)},style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),h.jsx("button",{onClick:k,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})]})]})}),e&&O&&h.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:x=>{x.target===x.currentTarget&&ce(null)},children:h.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:x=>x.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Edit card"}),h.jsx("button",{className:"dashboard-close",onClick:()=>ce(null),type:"button",children:"Close"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[h.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:O.image?h.jsx("img",{src:O.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:O.game,onChange:x=>ce(se=>({...se,game:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:O.name,onChange:x=>ce(se=>({...se,name:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:O.setName,onChange:x=>ce(se=>({...se,setName:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:O.number,onChange:x=>ce(se=>({...se,number:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:O.rarity,onChange:x=>ce(se=>({...se,rarity:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:O.condition,onChange:x=>ce(se=>({...se,condition:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",value:O.quantity,onChange:x=>ce(se=>({...se,quantity:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (each)",h.jsx("input",{type:"number",value:O.pricePaid,onChange:x=>ce(se=>({...se,pricePaid:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (each)",h.jsx("input",{type:"number",value:O.estimatedValue,onChange:x=>ce(se=>({...se,estimatedValue:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",h.jsx("input",{type:"text",value:O.image||"",onChange:x=>ce(se=>({...se,image:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[h.jsx("button",{onClick:()=>ce(null),style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),h.jsx("button",{onClick:D,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save changes"})]})]})}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:N.totalCards})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",N.totalPaid.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",N.totalValue.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:S>=0?"#00e676":"#ff8a80"},children:[S>=0?"+":"-","$",Math.abs(S).toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:N.pokemon})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:N.onepiece})]})]}),h.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[h.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:d,onChange:x=>p(x.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),h.jsxs("select",{value:g,onChange:x=>v(x.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[h.jsx("option",{value:"all",children:"All games"}),h.jsx("option",{value:"pokemon",children:"Pokemon only"}),h.jsx("option",{value:"onepiece",children:"One Piece only"})]})]}),o?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):me.length===0?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):h.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:me.map(x=>{const se=Number(x.quantity||1),be=se*Number(x.pricePaid||0),Be=se*Number(x.estimatedValue||0);return h.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem",display:"flex",flexDirection:"column",gap:"6px"},children:[x.image&&h.jsx("div",{style:{width:"100%",paddingTop:"120%",position:"relative",overflow:"hidden",borderRadius:"10px",background:"#1e0d14"},children:h.jsx("img",{src:x.image,alt:x.name||"card image",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"}})}),h.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:x.name||"Unnamed card"}),h.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:x.setName||""}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[h.jsxs("span",{children:["#",x.number||"-"]}),h.jsx("span",{children:x.rarity||""})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Cond: ",x.condition||"N/A"]}),h.jsxs("span",{children:["Qty: ",se]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Paid: $",be.toFixed(2)]}),h.jsxs("span",{children:["Value: $",Be.toFixed(2)]})]}),h.jsxs("div",{style:{marginTop:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem"},children:x.game==="pokemon"?"Pokemon":"One Piece"}),e&&h.jsx("button",{onClick:()=>ce({...x,pricePaid:x.pricePaid??"",estimatedValue:x.estimatedValue??"",quantity:x.quantity??1}),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"rgba(255,105,180,0.15)",color:"#ffb6c1",fontSize:"0.7rem",cursor:"pointer"},children:"Edit"})]}),e&&h.jsx("div",{style:{marginTop:"4px",display:"flex",justifyContent:"flex-end"},children:h.jsx("button",{onClick:()=>b(x.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})})]},x.id)})})]})}const Xu="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",Zu="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",ec="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82";function yi(r){if(!r)return null;if(r instanceof Date)return r;if(r&&typeof r.toDate=="function")return r.toDate();const e=String(r).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,d,p]=t;return new Date(Number(l),Number(d)-1,Number(p))}const i=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(i){let[,l,d,p]=i;const g=p.length===2?+`20${p}`:Number(p);return new Date(g,Number(l)-1,Number(d))}const o=new Date(e);return isNaN(o.getTime())?null:o}function xp(r){const e=(r.seriesKey||r.series||r.Series||r.title||r.Title||"").trim();return e?e.replace(/\bvolume\s+\d+.*$/i,"").replace(/\bvol\.?\s+\d+.*$/i,"").trim().toLowerCase():""}function ZP(r){const e=new Map;for(const t of r){const i=xp(t)||t.id;if(!e.has(i)){const g=(t.series||t.Series||t.title||t.Title||"Unknown Series").trim();e.set(i,{key:i,title:g,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const o=e.get(i);o.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;o.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(o.readVolumes+=1,o.readPages+=l);const p=Number(t.rating||t.Rating);!isNaN(p)&&p>0&&(o.ratingSum+=p,o.ratingCount+=1)}return e}function Mo(r,e,t=5){const i=new Map;for(const o of r.values()){const l=(o[e]||"").trim();if(!l)continue;const d=l.split(/[\/,]/).map(p=>p.trim()).filter(Boolean);for(const p of d)i.set(p,(i.get(p)||0)+1)}return[...i.entries()].sort((o,l)=>l[1]-o[1]).slice(0,t).map(([o,l])=>({name:o,count:l}))}function Iv(r,e){const t=Array.from({length:12},(i,o)=>{const l=new Date(e,o,1);return{key:`${e}-${o}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:o,value:0}});for(const i of r){const o=yi(i.dateRead||i.DateRead);!o||o.getFullYear()!==e||(t[o.getMonth()].value+=1)}return t}function Wh(r){const e=r.getFullYear(),t=`${r.getMonth()+1}`.padStart(2,"0"),i=`${r.getDate()}`.padStart(2,"0");return`${e}-${t}-${i}`}async function Hh(r,e){try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function eA(r){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of r){const d=yi(l.dateRead||l.DateRead);d&&(t[d.getDay()]+=1)}if(!t.some(l=>l>0))return[];const o=t.reduce((l,d)=>Math.max(l,d),0)||1;return e.map((l,d)=>({label:l,value:t[d],pct:t[d]/o}))}function tA(r,e=8){const t=[...r.values()];t.sort((l,d)=>d.volumes-l.volumes);const i=t.slice(0,e),o=i.reduce((l,d)=>Math.max(l,d.volumes),0)||1;return i.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/o}))}function nA(r){const e=[];for(const t of r){const i=yi(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!i)continue;const o=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:i,title:o})}return e.sort((t,i)=>t.date-i.date),e}function rA(r){const e=new Date;for(const t of r)if(t.date>=e)return t;return r[r.length-1]||null}function iA(r){let e=0,t=0;for(const i of r){const o=yi(i.datePurchased||i.DatePurchased),l=yi(i.dateRead||i.DateRead);if(!o||!l)continue;const d=l-o;d<=0||(e+=d/(1e3*60*60*24),t+=1)}return t?e/t:null}function sA(r){const e=new Map;for(const t of r){const i=yi(t.datePurchased||t.DatePurchased),o=yi(t.dateRead||t.DateRead);if(!i||!o)continue;const l=o-i;if(l<=0)continue;const d=l/(1e3*60*60*24),p=xp(t)||t.id;e.has(p)||e.set(p,{key:p,title:t.series||t.Series||t.title||t.Title||"Untitled",total:0,count:0,min:d,max:d});const g=e.get(p);g.total+=d,g.count+=1,g.min=Math.min(g.min,d),g.max=Math.max(g.max,d)}return[...e.values()].filter(t=>t.count>0).map(t=>({...t,avg:t.total/t.count})).sort((t,i)=>i.avg-t.avg)}function oA(r){let e=0,t=0,i=0;for(const o of r){const l=Number(o.msrp||o.MSRP||0)||0,d=Number(o.amountPaid||o.AmountPaid||o.pricePaid||0)||l||0,p=Number(o.collectiblePrice||o.CollectiblePrice||0)||0;e+=l,t+=d,i+=p}return{msrpTotal:e,paidTotal:t,collectibleTotal:i}}function aA(r){const e=new Map;for(const t of r){const i=xp(t)||t.id;e.has(i)||e.set(i,{key:i,title:t.series||t.Series||t.title||t.Title||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]});const o=e.get(i);o.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,d=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,p=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,g=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;o.msrp+=l,o.paid+=d,o.collectible+=p,o.pages+=g,v&&(o.readPages+=g);const w=Number(t.rating||t.Rating);!isNaN(w)&&w>0&&o.ratings.push(w)}return[...e.values()]}function lA(r){let e=0,t=0;for(const i of r){const o=Number(i.pages||i.Pages||i.pageCount||0)||0;e+=o,(!!i.read||i.status==="Read"||i.Read===!0)&&(t+=o)}return{total:e,read:t}}function uA(r){let e=0,t=0;for(const i of r.values())i.ratingCount>0&&(e+=i.ratingSum/i.ratingCount,t+=1);return t?e/t:null}function cA({data:r}){if(!r||!r.length)return h.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=r.reduce((v,w)=>Math.max(v,w.value),0)||1,t=480,i=230,o=30,l=i-o*2,d=t/Math.max(r.length-1,1),p=r.map((v,w)=>{const I=w*d,C=i-o-v.value/e*l;return{...v,x:I,y:C}}),g=p.map((v,w)=>w===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return h.jsx("div",{className:"line-chart",children:h.jsxs("svg",{viewBox:`0 0 ${t} ${i}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,w)=>{const I=i-o-v*l;return h.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:I,y2:I},`h-${w}`)}),p.map((v,w)=>h.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:o/2,y2:i-o/2},`v-${w}`)),h.jsx("path",{className:"line-path",d:g}),p.map((v,w)=>h.jsxs("g",{children:[h.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),h.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),h.jsx("text",{className:"line-label",x:v.x,y:i-4,children:v.label})]},w))]})})}function dA({data:r}){return!r||!r.length?h.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):h.jsx("div",{className:"weekday-bars",children:r.map(e=>h.jsxs("div",{className:"weekday-col",children:[h.jsx("div",{className:"weekday-count",children:e.value}),h.jsx("div",{className:"weekday-bar-vert",children:h.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),h.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function hA(r,e){const t=r.getFullYear(),i=r.getMonth(),l=new Date(t,i,1).getDay(),d=new Date(t,i+1,0).getDate(),p=new Map;for(const v of e){const w=v.date;if(w.getFullYear()===t&&w.getMonth()===i){const I=w.getDate();p.has(I)||p.set(I,[]),p.get(I).push(v)}}const g=[];for(let v=0;v<l;v++)g.push({type:"pad"});for(let v=1;v<=d;v++)g.push({type:"day",day:v,releases:p.get(v)||[]});return g}function fA(){const{user:r,admin:e,loading:t}=ca(),[i,o]=W.useState([]),[l,d]=W.useState([]),[p,g]=W.useState(!0),[v,w]=W.useState(null),[I,C]=W.useState("-"),[U,q]=W.useState({yearly:Xu,release:Zu,activity:ec}),[K,O]=W.useState(!1),[ce,pe]=W.useState(""),[le,de]=W.useState([]),[ue,me]=W.useState(!1),N=async()=>{if(e)try{me(!0);const Z=(await Yi(er(rt,"admins"))).docs.map(Q=>({uid:Q.id,...Q.data()}));de(Z)}catch($){console.error("Failed to refresh admins",$)}finally{me(!1)}},S=async()=>{const $=ce.trim();if(!$){alert("Enter a UID to grant admin.");return}try{await Ju(jt(rt,"admins",$),{uid:$,role:"admin",grantedBy:(r==null?void 0:r.uid)||"manual",grantedAt:new Date().toISOString()},{merge:!0});try{await Ju(jt(rt,"roles",$),{admin:!0,updatedAt:new Date().toISOString()},{merge:!0})}catch(Z){console.warn("Legacy roles write skipped (no permission):",Z==null?void 0:Z.message)}pe(""),await N()}catch(Z){console.error("Grant admin failed",Z),alert("Failed to grant admin.")}},P=async $=>{const Z=($||ce).trim();if(!Z){alert("Enter a UID to revoke admin.");return}try{await Ws(jt(rt,"admins",Z)),await Ws(jt(rt,"roles",Z)),$||pe(""),await N()}catch(Q){console.error("Revoke admin failed",Q),alert("Failed to revoke admin.")}},[k,D]=W.useState(!1),[b,x]=W.useState(()=>new Date),[se,be]=W.useState({open:!1,type:null}),Be=new Date().getFullYear(),Ve=W.useRef(null),oe=W.useRef(null),Se=W.useRef("");W.useEffect(()=>{document.title="Dashboard"},[]),W.useEffect(()=>{typeof window>"u"||(Ve.current=localStorage.getItem("dashboard-yearly-posted"),oe.current=localStorage.getItem("dashboard-release-posted"),Se.current=localStorage.getItem("dashboard-activity-posted")||"")},[]),W.useEffect(()=>{if(!e)return;const $=jt(rt,"settings","webhooks");(async()=>{try{const Z=await xf($);if(Z.exists()){const Q=Z.data();q({yearly:Q.yearly||Xu,release:Q.release||Zu,activity:Q.activity||ec})}else await Ju($,{yearly:Xu,release:Zu,activity:ec})}catch(Z){console.error("Failed to load webhook settings",Z)}})()},[e]),W.useEffect(()=>{if(!e)return;let $=!1;return(async()=>{try{me(!0);const Z=await Yi(er(rt,"admins"));if($)return;const Q=Z.docs.map(xe=>({uid:xe.id,...xe.data()}));de(Q)}catch(Z){console.error("Failed to load admins",Z)}finally{$||me(!1)}})(),()=>{$=!0}},[e]),W.useEffect(()=>{let $=!1;async function Z(){if(!r||!e){o([]),d([]),w(null),g(!1);return}try{g(!0);const[Q,xe]=await Promise.all([Yi(er(rt,"library")),Yi(er(rt,"wishlist"))]);if($)return;o(Q.docs.map(We=>({id:We.id,...We.data()}))),d(xe.docs.map(We=>({id:We.id,...We.data()}))),w(null)}catch(Q){console.error(Q),$||w("Failed to load dashboard data.")}finally{$||g(!1)}}return Z(),()=>{$=!0}},[r,e]);const ge=W.useMemo(()=>{const $=i.length,Z=i.filter(yt=>!!yt.read||yt.status==="Read"||yt.Read===!0).length,Q=$-Z,xe=$?Math.round(Z/$*100):0,We=l.length,Ke=ZP(i),tt=Iv(i,Be),gt=Iv(i,Be-1),En=tt.reduce((yt,Cr)=>yt+Cr.value,0),Ir=eA(i),Bt=tA(Ke),Sr=nA(l),qr=rA(Sr),vs=iA(i),ar=oA(i),_s=lA(i),Et=uA(Ke),_i=sA(i),Dn=Mo(Ke,"publisher",5),Gr=Mo(Ke,"genre",5),Kr=Mo(Ke,"demographic",5),wi=aA(i),Vn=[...i].map(yt=>{const Cr=yi(yt.dateRead||yt.DateRead)||yi(yt.datePurchased||yt.DatePurchased);return Cr?{title:yt.title||yt.Title||yt.series||yt.Series||"Untitled",type:yt.dateRead||yt.DateRead?"Read":"Purchased",date:Cr}:null}).filter(Boolean).sort((yt,Cr)=>Cr.date-yt.date).slice(0,12);return{totalLibrary:$,readCount:Z,unreadCount:Q,readPct:xe,wishlistCount:We,seriesMap:Ke,monthlyReads:tt,prevYearReads:gt,currentYearReadsTotal:En,weekdayBreakdown:Ir,topSeriesBars:Bt,releases:Sr,nextRelease:qr,avgDays:vs,purchaseToReadSeries:_i,collectionValue:ar,pages:_s,avgRating:Et,topPublishers:Dn,topGenres:Gr,topDemographics:Kr,seriesAggregates:wi,activity:Vn}},[i,l,Be]),{totalLibrary:L,readCount:J,unreadCount:Ee,readPct:Le,wishlistCount:Me,seriesMap:ze,monthlyReads:Re,prevYearReads:$e,currentYearReadsTotal:it,weekdayBreakdown:wt,topSeriesBars:Nn,releases:St,nextRelease:Ot,avgDays:vn,purchaseToReadSeries:ir,collectionValue:fn,pages:Ge,avgRating:sr,topPublishers:or,topGenres:_n,topDemographics:wn,seriesAggregates:jn,activity:rn}=ge,Kt=Ot?Ot.date:null,Hr=!!v;if(W.useEffect(()=>{if(!$e||!$e.length)return;const $=Be-1,Z=$e.reduce((Ke,tt)=>Ke+tt.value,0);if(!Z||(Ve.current?parseInt(Ve.current,10):null)===$)return;const xe=$e.map(Ke=>`${Ke.label}: ${Ke.value}`).join(", "),We=`Yearly reads summary for ${$}: ${Z} total. Breakdown: ${xe}`;Hh(U.yearly,We).then(()=>{Ve.current=String($),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String($))})},[$e,Be]),W.useEffect(()=>{if(!Ot||!St.length)return;const $=Wh(Ot.date),Z=Wh(new Date);if($>Z||oe.current===$)return;const Q=St.filter(We=>Wh(We.date)===$);if(!Q.length)return;const xe=`Wishlist releases for ${$}:
${Q.map(We=>`- ${We.title}`).join(`
`)}`;Hh(U.release,xe).then(()=>{oe.current=$,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",$)})},[Ot,St]),W.useEffect(()=>{var xe,We;if(!e||!rn||!rn.length)return;const $=rn[0];if(!$||!$.date)return;const Z=`${$.type}-${$.title}-${((We=(xe=$.date).toISOString)==null?void 0:We.call(xe))||$.date}`;if(Se.current===Z)return;Se.current=Z;const Q=`Activity: ${$.type}  ${$.title} (${$.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})`;Hh(U.activity,Q).then(()=>{typeof window<"u"&&localStorage.setItem("dashboard-activity-posted",Z)})},[rn,e,U]),W.useEffect(()=>{if(!Kt){C("-");return}const $=()=>{const Q=Kt-new Date;if(Q<=0){C("Released");return}const xe=Math.floor(Q/1e3),We=Math.floor(xe/86400),Ke=Math.floor(xe%86400/3600).toString().padStart(2,"0"),tt=Math.floor(xe%3600/60).toString().padStart(2,"0"),gt=Math.floor(xe%60).toString().padStart(2,"0");C(`${We}d ${Ke}:${tt}:${gt}`)};$();const Z=setInterval($,1e3);return()=>clearInterval(Z)},[Kt]),t)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"Checking permissions..."})]})});if(!r||!e)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-locked",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(p)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),v?h.jsx("p",{className:"error",children:v}):h.jsx("p",{children:"Loading stats..."})]})});const mt=L+Me,R=mt?Math.round(L/mt*100):0,te=[...ze.values()].filter($=>$.ratingCount>0).map($=>({title:$.title,avg:$.ratingSum/$.ratingCount,count:$.ratingCount})).sort(($,Z)=>Z.avg-$.avg||Z.count-$.count).slice(0,3);function Y(){if(Kt)x(new Date(Kt.getFullYear(),Kt.getMonth(),1));else if(St.length){const $=St[0].date;x(new Date($.getFullYear(),$.getMonth(),1))}D(!0)}function z($){be({open:!0,type:$})}function fe(){be({open:!1,type:null})}const Fe=hA(b,St);function at(){const $=se.type;if(!$)return null;if($==="publishers"){const Z=[...Mo(ze,"publisher",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Publishers by Series"}),Z.length===0?h.jsx("p",{children:"No publisher data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Publisher"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:Z.map((Q,xe)=>h.jsxs("tr",{children:[h.jsx("td",{children:xe+1}),h.jsx("td",{children:Q.name}),h.jsx("td",{children:Q.count})]},Q.name+xe))})]})]})}if($==="genres"){const Z=[...Mo(ze,"genre",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Genres by Series"}),Z.length===0?h.jsx("p",{children:"No genre data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Genre"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:Z.map((Q,xe)=>h.jsxs("tr",{children:[h.jsx("td",{children:xe+1}),h.jsx("td",{children:Q.name}),h.jsx("td",{children:Q.count})]},Q.name+xe))})]})]})}if($==="demographics"){const Z=[...Mo(ze,"demographic",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Demographics by Series"}),Z.length===0?h.jsx("p",{children:"No demographic data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Demographic"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:Z.map((Q,xe)=>h.jsxs("tr",{children:[h.jsx("td",{children:xe+1}),h.jsx("td",{children:Q.name}),h.jsx("td",{children:Q.count})]},Q.name+xe))})]})]})}if($==="timeToRead"){const Z=ir||[];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Average Time From Purchase to Read"}),vn==null?h.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):h.jsxs(h.Fragment,{children:[h.jsxs("p",{children:["On average, it takes"," ",h.jsxs("strong",{children:[vn.toFixed(1)," days"]})," from purchase to finishing a volume."]}),Z.length>0?h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Series"}),h.jsx("th",{children:"Avg Days"}),h.jsx("th",{children:"Longest"}),h.jsx("th",{children:"Shortest"}),h.jsx("th",{children:"Reads Count"})]})}),h.jsx("tbody",{children:Z.map(Q=>h.jsxs("tr",{children:[h.jsx("td",{children:Q.title}),h.jsxs("td",{children:[Q.avg.toFixed(1)," days"]}),h.jsxs("td",{children:[Math.round(Q.max)," days"]}),h.jsxs("td",{children:[Math.round(Q.min)," days"]}),h.jsx("td",{children:Q.count})]},Q.key))})]}):h.jsx("p",{style:{marginTop:8},children:"No series-level data yet."})]})]})}if($==="collectionValue"){const{msrpTotal:Z,paidTotal:Q}=fn,xe=Z-Q,We=Z>0?(Q/Z*100).toFixed(1):"-",Ke=[...jn].filter(tt=>tt.msrp||tt.paid||tt.collectible).sort((tt,gt)=>gt.msrp+gt.collectible-(tt.msrp+tt.collectible));return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Collection Value Breakdown"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total MSRP"}),h.jsxs("td",{children:["$",Z.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Total Paid"}),h.jsxs("td",{children:["$",Q.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Difference"}),h.jsxs("td",{children:["$",xe.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Paid vs MSRP"}),h.jsx("td",{children:We==="-"?"-":`${We}%`})]})]})}),Ke.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"MSRP"}),h.jsx("th",{children:"Paid"}),h.jsx("th",{children:"Collectible"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:Ke.map((tt,gt)=>h.jsxs("tr",{children:[h.jsx("td",{children:tt.title}),h.jsxs("td",{children:["$",tt.msrp.toFixed(2)]}),h.jsxs("td",{children:["$",tt.paid.toFixed(2)]}),h.jsx("td",{children:tt.collectible?`$${tt.collectible.toFixed(2)}`:"--"}),h.jsx("td",{children:tt.books})]},tt.title+gt))})]})]})]})}if($==="pages"){const Z=[...jn].filter(Q=>Q.pages>0).map(Q=>({...Q,pct:Q.pages?Math.round(Q.readPages/Q.pages*100):0})).sort((Q,xe)=>xe.pages-Q.pages);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Pages Read vs Total"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total Pages"}),h.jsx("td",{children:Ge.total.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Pages Read"}),h.jsx("td",{children:Ge.read.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Completion"}),h.jsx("td",{children:Ge.total?`${(Ge.read/Ge.total*100).toFixed(1)}%`:"-"})]})]})}),Z.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Read Pages"}),h.jsx("th",{children:"Total Pages"}),h.jsx("th",{children:"% Read"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:Z.map((Q,xe)=>h.jsxs("tr",{children:[h.jsx("td",{children:Q.title}),h.jsx("td",{children:Q.readPages.toLocaleString()}),h.jsx("td",{children:Q.pages.toLocaleString()}),h.jsxs("td",{children:[Q.pct,"%"]}),h.jsx("td",{children:Q.books})]},Q.title+xe))})]})]})]})}if($==="ratings"){const Z=[...jn].map(Q=>{if(!Q.ratings.length)return null;const xe=Q.ratings.reduce((We,Ke)=>We+Ke,0)/Q.ratings.length;return{title:Q.title,avg:xe,count:Q.ratings.length}}).filter(Boolean).sort((Q,xe)=>xe.avg-Q.avg||xe.count-Q.count);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Ratings Overview"}),sr==null?h.jsx("p",{children:"No ratings have been recorded yet."}):h.jsxs("p",{children:["Average series rating across rated series is"," ",h.jsx("strong",{children:sr.toFixed(2)}),"."]}),Z.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Avg"}),h.jsx("th",{children:"Ratings"})]})}),h.jsx("tbody",{children:Z.map((Q,xe)=>h.jsxs("tr",{children:[h.jsx("td",{children:Q.title}),h.jsx("td",{children:Q.avg.toFixed(2)}),h.jsx("td",{children:Q.count})]},Q.title+xe))})]})]})]})}return $==="releases"?h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Wishlist Releases"}),St.length===0?h.jsx("p",{children:"No wishlist releases found."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Date"}),h.jsx("th",{children:"Title"})]})}),h.jsx("tbody",{children:St.map((Z,Q)=>h.jsxs("tr",{children:[h.jsx("td",{children:Z.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),h.jsx("td",{children:Z.title})]},Q))})]})]}):null}return h.jsxs("div",{className:"page dashboard-page",children:[h.jsxs("header",{className:"dashboard-header",style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",textAlign:"center",width:"100%"},children:[h.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Dashboard"}),h.jsx("p",{className:"dashboard-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"Admin-only analytics for your manga library and wishlist."})]}),e&&h.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:h.jsx("button",{className:"stat-link",onClick:()=>O(!0),type:"button",children:"Admin Settings"})})]}),h.jsx("section",{id:"dashboardSection",className:"page-section active",children:h.jsxs("div",{className:"dashboard-grid",children:[h.jsxs("div",{className:"stat-stack",children:[h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Total Library Books"}),h.jsx("div",{className:"stat-value",children:L}),h.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Wishlist Items"}),h.jsx("div",{className:"stat-value",children:Me}),h.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Read / Unread"}),h.jsx("div",{className:"pie",style:{"--pct":`${Le*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[Le,"%"]})}),h.jsxs("div",{className:"stat-value",children:[J," read / ",Ee," unread"]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>z("ratings"),children:[h.jsx("h3",{children:"Ratings"}),h.jsx("div",{className:"stat-value",children:sr==null?"-":sr.toFixed(2)}),h.jsx("div",{className:"stat-sub",children:"Average across rated series."}),h.jsx("div",{className:"stat-list compact",children:te.length?te.map(($,Z)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:Z+1}),h.jsx("span",{className:"stat-name",children:$.title}),h.jsx("span",{className:"stat-count",children:$.avg.toFixed(2)})]},$.title+Z)):h.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>z("pages"),children:[h.jsx("h3",{children:"Page Count Read / Total"}),h.jsxs("div",{className:"stat-value",children:[Ge.read.toLocaleString()," / ",Ge.total.toLocaleString()]}),h.jsx("div",{className:"stat-sub",children:Ge.total?`${(Ge.read/Ge.total*100).toFixed(1)}% read`:"-"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Library vs Wishlist"}),h.jsx("div",{className:"pie",style:{"--pct":`${R*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[R,"%"]})}),h.jsxs("div",{className:"stat-value",children:[L," / ",Me]}),h.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>z("demographics"),children:[h.jsx("h3",{children:"Top Demographics"}),h.jsx("div",{className:"stat-list",children:wn.length?wn.slice(0,3).map(($,Z)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:Z+1}),h.jsx("span",{className:"stat-name",children:$.name}),h.jsx("span",{className:"stat-count",children:$.count})]},$.name)):h.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>z("publishers"),children:[h.jsx("h3",{children:"Top Publishers"}),h.jsx("div",{className:"stat-list",children:or.length?or.slice(0,3).map(($,Z)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:Z+1}),h.jsx("span",{className:"stat-name",children:$.name}),h.jsx("span",{className:"stat-count",children:$.count})]},$.name)):h.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>z("genres"),children:[h.jsx("h3",{children:"Top Genres"}),h.jsx("div",{className:"stat-list",children:_n.length?_n.slice(0,3).map(($,Z)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:Z+1}),h.jsx("span",{className:"stat-name",children:$.name}),h.jsx("span",{className:"stat-count",children:$.count})]},$.name)):h.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>{Y()},children:[h.jsx("h3",{children:"Next Wishlist Release"}),h.jsx("div",{className:"stat-value next-release",children:Ot?Ot.title:"No upcoming releases"}),h.jsxs("div",{className:"stat-sub",children:[Kt?Kt.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",h.jsx("br",{}),h.jsx("span",{id:"statNextCountdown",children:I})]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>z("collectionValue"),style:{textAlign:"center"},children:[h.jsx("h3",{children:"Collection Pricing"}),h.jsxs("div",{className:"stat-value stat-msrp",children:["$",fn.msrpTotal.toFixed(2)]}),h.jsxs("div",{className:"stat-value stat-paid",children:["$",fn.paidTotal.toFixed(2),fn.msrpTotal>0&&h.jsxs("span",{className:"stat-paid-pct",children:["(",((1-fn.paidTotal/fn.msrpTotal)*100).toFixed(1),"% off)"]})]}),h.jsxs("div",{className:"stat-value stat-collectible",children:["$",fn.collectibleTotal.toFixed(2)]}),h.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Current Year Reads"}),h.jsx("div",{className:"stat-value",children:it}),h.jsxs("div",{className:"stat-sub",children:["Reads in ",Be]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>z("timeToRead"),children:[h.jsx("h3",{children:"Avg Days From Purchase to Read"}),h.jsx("div",{className:"stat-value",children:vn==null?"-":`${vn.toFixed(1)} days`}),h.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),h.jsxs("div",{className:"stat-duo",children:[h.jsxs("div",{className:"stat-card tall",children:[h.jsxs("h3",{children:["Reads Per Month (",Be,")"]}),h.jsx(cA,{data:Re})]}),h.jsxs("div",{className:"stat-card tall",children:[h.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),h.jsx(dA,{data:wt}),h.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),h.jsxs("div",{className:"stat-card wide",children:[h.jsx("h3",{children:"Activity Log"}),Hr&&h.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),h.jsx("div",{className:"activity-log",children:rn.length?rn.map(($,Z)=>h.jsxs("div",{className:"activity-row",children:[h.jsx("span",{className:"activity-type",children:$.type}),h.jsx("span",{className:"activity-title",children:$.title}),h.jsx("span",{className:"activity-date",children:$.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]},$.title+Z)):h.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]})]})}),k&&h.jsx("div",{id:"calendarOverlay",onClick:()=>D(!1),children:h.jsxs("div",{id:"calendarCard",onClick:$=>$.stopPropagation(),children:[h.jsxs("div",{className:"calendar-header",children:[h.jsx("div",{className:"calendar-title",children:b.toLocaleString(void 0,{month:"long",year:"numeric"})}),h.jsxs("div",{className:"calendar-nav",children:[h.jsx("button",{className:"calendar-nav-btn",onClick:()=>x(new Date(b.getFullYear(),b.getMonth()-1,1)),children:"<"}),h.jsx("button",{className:"calendar-nav-btn",onClick:()=>x(new Date(b.getFullYear(),b.getMonth()+1,1)),children:">"})]})]}),h.jsxs("div",{className:"calendar-weekdays",children:[h.jsx("div",{children:"Sun"}),h.jsx("div",{children:"Mon"}),h.jsx("div",{children:"Tue"}),h.jsx("div",{children:"Wed"}),h.jsx("div",{children:"Thu"}),h.jsx("div",{children:"Fri"}),h.jsx("div",{children:"Sat"})]}),h.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:Fe.map(($,Z)=>$.type==="pad"?h.jsx("div",{className:"calendar-day pad"},Z):h.jsxs("div",{className:"calendar-day",children:[h.jsx("div",{className:"day-num",children:$.day}),h.jsxs("div",{className:"calendar-releases",children:[$.releases.slice(0,2).map((Q,xe)=>h.jsx("div",{className:"calendar-release",title:Q.title,children:Q.title},xe)),$.releases.length>2&&h.jsxs("button",{className:"calendar-more-btn",children:["+",$.releases.length-2," more"]})]})]},Z))}),!St.length&&h.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),h.jsx("button",{id:"calendarClose",onClick:()=>D(!1),children:"x"})]})}),se.open&&h.jsx("div",{id:"statDetailOverlay",onClick:fe,children:h.jsxs("div",{id:"statDetailCard",onClick:$=>$.stopPropagation(),children:[h.jsx("button",{id:"statDetailClose",onClick:fe,children:"x"}),h.jsxs("h2",{id:"statDetailTitle",children:[se.type==="publishers"&&"Top Publishers",se.type==="genres"&&"Top Genres",se.type==="demographics"&&"Top Demographics",se.type==="timeToRead"&&"Avg Time From Purchase to Read",se.type==="collectionValue"&&"Collection Value",se.type==="pages"&&"Pages Read vs Total",se.type==="ratings"&&"Ratings",se.type==="releases"&&"Wishlist Releases"]}),h.jsx("div",{id:"statDetailBody",children:at()})]})}),e&&K&&h.jsx("div",{className:"dashboard-modal-backdrop visible",onClick:$=>{$.target===$.currentTarget&&O(!1)},children:h.jsxs("div",{className:"dashboard-modal",children:[h.jsxs("div",{className:"dashboard-modal-header",children:[h.jsx("h3",{children:"Webhook Settings"}),h.jsx("button",{className:"dashboard-close",onClick:()=>O(!1),type:"button",children:"Close"})]}),h.jsxs("div",{className:"dashboard-modal-body",children:[h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Yearly summary webhook"}),h.jsx("input",{type:"text",value:U.yearly,onChange:$=>q(Z=>({...Z,yearly:$.target.value}))})]}),h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Release timer webhook"}),h.jsx("input",{type:"text",value:U.release,onChange:$=>q(Z=>({...Z,release:$.target.value}))})]}),h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Activity webhook"}),h.jsx("input",{type:"text",value:U.activity,onChange:$=>q(Z=>({...Z,activity:$.target.value}))})]}),h.jsxs("div",{className:"dashboard-input",style:{borderTop:"1px solid rgba(255,182,193,0.2)",paddingTop:8},children:[h.jsx("span",{children:"Admin UIDs"}),h.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[h.jsx("input",{type:"text",placeholder:"Enter UID",value:ce,onChange:$=>pe($.target.value),style:{flex:"1 1 220px",padding:"8px 10px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.75)",color:"#ffffff"}}),h.jsx("button",{className:"stat-link",type:"button",onClick:S,children:"Grant"}),h.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>P(),children:"Revoke"})]}),h.jsx("div",{style:{marginTop:8,fontSize:"0.85rem",color:"var(--text-soft)"},children:ue?h.jsx("span",{children:"Loading admins"}):le.length===0?h.jsx("span",{children:"No admins found."}):h.jsx("ul",{style:{listStyle:"none",margin:"6px 0 0",padding:0,display:"flex",gap:6,flexDirection:"column"},children:le.map($=>h.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,background:"rgba(24,5,18,0.7)",border:"1px solid rgba(255,182,193,0.18)",borderRadius:10,padding:"6px 8px"},children:[h.jsx("span",{style:{wordBreak:"break-all"},children:$.uid}),h.jsx("button",{className:"dashboard-close",type:"button",onClick:()=>P($.uid),style:{padding:"4px 10px"},children:"Revoke"})]},$.uid))})})]})]}),h.jsxs("div",{className:"dashboard-modal-footer",children:[h.jsx("button",{className:"stat-link",type:"button",onClick:async()=>{try{await Ju(jt(rt,"settings","webhooks"),{yearly:U.yearly||Xu,release:U.release||Zu,activity:U.activity||ec}),O(!1)}catch($){console.error("Failed to save webhooks",$),alert("Failed to save webhooks.")}},children:"Save"}),h.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>O(!1),children:"Cancel"})]})]})})]})}function pA(){const r=jc(),{user:e}=ca();e&&r("/");async function t(){try{const i=new Lr;await b_(rs,i),r("/")}catch(i){console.error(i),alert("Google Sign-In failed.")}}return h.jsx("div",{className:"signin-page",children:h.jsxs("div",{className:"signin-card",children:[h.jsx("h2",{className:"signin-title",children:"Welcome Back"}),h.jsx("p",{className:"signin-sub",children:"Sign in to access your dashboard & collections."}),h.jsxs("button",{className:"google-btn",onClick:t,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsxs("button",{className:"signin-cancel",onClick:()=>r("/"),children:["<"," Back to Home"]})]})})}function mA(){return h.jsxs(FP,{children:[h.jsx(zP,{}),h.jsxs(Ex,{children:[h.jsx(li,{path:"/",element:h.jsx(wv,{})}),h.jsx(li,{path:"/home",element:h.jsx(wv,{})}),h.jsx(li,{path:"/manga",element:h.jsx(WP,{})}),h.jsx(li,{path:"/anime",element:h.jsx(JP,{})}),h.jsx(li,{path:"/tcg",element:h.jsx(XP,{})}),h.jsx(li,{path:"/dashboard",element:h.jsx(fA,{})}),h.jsx(li,{path:"/signin",element:h.jsx(pA,{})}),h.jsx(li,{path:"*",element:h.jsx(_x,{to:"/home",replace:!0})})]})]})}PE.createRoot(document.getElementById("root")).render(h.jsx(Cv.StrictMode,{children:h.jsx(Px,{basename:"/base",children:h.jsx(mA,{})})}));
