function vE(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Iv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ch={exports:{}},$a={},Rh={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function _E(){if(Rg)return $e;Rg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function R(M){return M===null||typeof M!="object"?null:(M=I&&M[I]||M["@@iterator"],typeof M=="function"?M:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,Y={};function O(M,J,ge){this.props=M,this.context=J,this.refs=Y,this.updater=ge||z}O.prototype.isReactComponent={},O.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},O.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ae(){}ae.prototype=O.prototype;function oe(M,J,ge){this.props=M,this.context=J,this.refs=Y,this.updater=ge||z}var ue=oe.prototype=new ae;ue.constructor=oe,W(ue,O.prototype),ue.isPureReactComponent=!0;var K=Array.isArray,fe=Object.prototype.hasOwnProperty,Te={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(M,J,ge){var ke,Ve={},Me=null,we=null;if(J!=null)for(ke in J.ref!==void 0&&(we=J.ref),J.key!==void 0&&(Me=""+J.key),J)fe.call(J,ke)&&!N.hasOwnProperty(ke)&&(Ve[ke]=J[ke]);var ze=arguments.length-2;if(ze===1)Ve.children=ge;else if(1<ze){for(var Ze=Array(ze),mt=0;mt<ze;mt++)Ze[mt]=arguments[mt+2];Ve.children=Ze}if(M&&M.defaultProps)for(ke in ze=M.defaultProps,ze)Ve[ke]===void 0&&(Ve[ke]=ze[ke]);return{$$typeof:r,type:M,key:Me,ref:we,props:Ve,_owner:Te.current}}function P(M,J){return{$$typeof:r,type:M.type,key:J,ref:M.ref,props:M.props,_owner:M._owner}}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function D(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ge){return J[ge]})}var b=/\/+/g;function T(M,J){return typeof M=="object"&&M!==null&&M.key!=null?D(""+M.key):J.toString(36)}function le(M,J,ge,ke,Ve){var Me=typeof M;(Me==="undefined"||Me==="boolean")&&(M=null);var we=!1;if(M===null)we=!0;else switch(Me){case"string":case"number":we=!0;break;case"object":switch(M.$$typeof){case r:case e:we=!0}}if(we)return we=M,Ve=Ve(we),M=ke===""?"."+T(we,0):ke,K(Ve)?(ge="",M!=null&&(ge=M.replace(b,"$&/")+"/"),le(Ve,J,ge,"",function(mt){return mt})):Ve!=null&&(k(Ve)&&(Ve=P(Ve,ge+(!Ve.key||we&&we.key===Ve.key?"":(""+Ve.key).replace(b,"$&/")+"/")+M)),J.push(Ve)),1;if(we=0,ke=ke===""?".":ke+":",K(M))for(var ze=0;ze<M.length;ze++){Me=M[ze];var Ze=ke+T(Me,ze);we+=le(Me,J,ge,Ze,Ve)}else if(Ze=R(M),typeof Ze=="function")for(M=Ze.call(M),ze=0;!(Me=M.next()).done;)Me=Me.value,Ze=ke+T(Me,ze++),we+=le(Me,J,ge,Ze,Ve);else if(Me==="object")throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return we}function je(M,J,ge){if(M==null)return M;var ke=[],Ve=0;return le(M,ke,"","",function(Me){return J.call(ge,Me,Ve++)}),ke}function Ye(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(ge){(M._status===0||M._status===-1)&&(M._status=1,M._result=ge)},function(ge){(M._status===0||M._status===-1)&&(M._status=2,M._result=ge)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var Le={current:null},de={transition:null},Se={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:de,ReactCurrentOwner:Te};function pe(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:je,forEach:function(M,J,ge){je(M,function(){J.apply(this,arguments)},ge)},count:function(M){var J=0;return je(M,function(){J++}),J},toArray:function(M){return je(M,function(J){return J})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},$e.Component=O,$e.Fragment=t,$e.Profiler=o,$e.PureComponent=oe,$e.StrictMode=i,$e.Suspense=y,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Se,$e.act=pe,$e.cloneElement=function(M,J,ge){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var ke=W({},M.props),Ve=M.key,Me=M.ref,we=M._owner;if(J!=null){if(J.ref!==void 0&&(Me=J.ref,we=Te.current),J.key!==void 0&&(Ve=""+J.key),M.type&&M.type.defaultProps)var ze=M.type.defaultProps;for(Ze in J)fe.call(J,Ze)&&!N.hasOwnProperty(Ze)&&(ke[Ze]=J[Ze]===void 0&&ze!==void 0?ze[Ze]:J[Ze])}var Ze=arguments.length-2;if(Ze===1)ke.children=ge;else if(1<Ze){ze=Array(Ze);for(var mt=0;mt<Ze;mt++)ze[mt]=arguments[mt+2];ke.children=ze}return{$$typeof:r,type:M.type,key:Ve,ref:Me,props:ke,_owner:we}},$e.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},$e.createElement=S,$e.createFactory=function(M){var J=S.bind(null,M);return J.type=M,J},$e.createRef=function(){return{current:null}},$e.forwardRef=function(M){return{$$typeof:p,render:M}},$e.isValidElement=k,$e.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:Ye}},$e.memo=function(M,J){return{$$typeof:v,type:M,compare:J===void 0?null:J}},$e.startTransition=function(M){var J=de.transition;de.transition={};try{M()}finally{de.transition=J}},$e.unstable_act=pe,$e.useCallback=function(M,J){return Le.current.useCallback(M,J)},$e.useContext=function(M){return Le.current.useContext(M)},$e.useDebugValue=function(){},$e.useDeferredValue=function(M){return Le.current.useDeferredValue(M)},$e.useEffect=function(M,J){return Le.current.useEffect(M,J)},$e.useId=function(){return Le.current.useId()},$e.useImperativeHandle=function(M,J,ge){return Le.current.useImperativeHandle(M,J,ge)},$e.useInsertionEffect=function(M,J){return Le.current.useInsertionEffect(M,J)},$e.useLayoutEffect=function(M,J){return Le.current.useLayoutEffect(M,J)},$e.useMemo=function(M,J){return Le.current.useMemo(M,J)},$e.useReducer=function(M,J,ge){return Le.current.useReducer(M,J,ge)},$e.useRef=function(M){return Le.current.useRef(M)},$e.useState=function(M){return Le.current.useState(M)},$e.useSyncExternalStore=function(M,J,ge){return Le.current.useSyncExternalStore(M,J,ge)},$e.useTransition=function(){return Le.current.useTransition()},$e.version="18.3.1",$e}var Pg;function Tf(){return Pg||(Pg=1,Rh.exports=_E()),Rh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function wE(){if(Ag)return $a;Ag=1;var r=Tf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(p,y,v){var E,I={},R=null,z=null;v!==void 0&&(R=""+v),y.key!==void 0&&(R=""+y.key),y.ref!==void 0&&(z=y.ref);for(E in y)i.call(y,E)&&!l.hasOwnProperty(E)&&(I[E]=y[E]);if(p&&p.defaultProps)for(E in y=p.defaultProps,y)I[E]===void 0&&(I[E]=y[E]);return{$$typeof:e,type:p,key:R,ref:z,props:I,_owner:o.current}}return $a.Fragment=t,$a.jsx=d,$a.jsxs=d,$a}var kg;function EE(){return kg||(kg=1,Ch.exports=wE()),Ch.exports}var h=EE(),H=Tf();const Sv=Iv(H),TE=vE({__proto__:null,default:Sv},[H]);var $u={},Ph={exports:{}},Cn={},Ah={exports:{}},kh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function xE(){return bg||(bg=1,(function(r){function e(de,Se){var pe=de.length;de.push(Se);e:for(;0<pe;){var M=pe-1>>>1,J=de[M];if(0<o(J,Se))de[M]=Se,de[pe]=J,pe=M;else break e}}function t(de){return de.length===0?null:de[0]}function i(de){if(de.length===0)return null;var Se=de[0],pe=de.pop();if(pe!==Se){de[0]=pe;e:for(var M=0,J=de.length,ge=J>>>1;M<ge;){var ke=2*(M+1)-1,Ve=de[ke],Me=ke+1,we=de[Me];if(0>o(Ve,pe))Me<J&&0>o(we,Ve)?(de[M]=we,de[Me]=pe,M=Me):(de[M]=Ve,de[ke]=pe,M=ke);else if(Me<J&&0>o(we,pe))de[M]=we,de[Me]=pe,M=Me;else break e}}return Se}function o(de,Se){var pe=de.sortIndex-Se.sortIndex;return pe!==0?pe:de.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var y=[],v=[],E=1,I=null,R=3,z=!1,W=!1,Y=!1,O=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ue(de){for(var Se=t(v);Se!==null;){if(Se.callback===null)i(v);else if(Se.startTime<=de)i(v),Se.sortIndex=Se.expirationTime,e(y,Se);else break;Se=t(v)}}function K(de){if(Y=!1,ue(de),!W)if(t(y)!==null)W=!0,Ye(fe);else{var Se=t(v);Se!==null&&Le(K,Se.startTime-de)}}function fe(de,Se){W=!1,Y&&(Y=!1,ae(S),S=-1),z=!0;var pe=R;try{for(ue(Se),I=t(y);I!==null&&(!(I.expirationTime>Se)||de&&!D());){var M=I.callback;if(typeof M=="function"){I.callback=null,R=I.priorityLevel;var J=M(I.expirationTime<=Se);Se=r.unstable_now(),typeof J=="function"?I.callback=J:I===t(y)&&i(y),ue(Se)}else i(y);I=t(y)}if(I!==null)var ge=!0;else{var ke=t(v);ke!==null&&Le(K,ke.startTime-Se),ge=!1}return ge}finally{I=null,R=pe,z=!1}}var Te=!1,N=null,S=-1,P=5,k=-1;function D(){return!(r.unstable_now()-k<P)}function b(){if(N!==null){var de=r.unstable_now();k=de;var Se=!0;try{Se=N(!0,de)}finally{Se?T():(Te=!1,N=null)}}else Te=!1}var T;if(typeof oe=="function")T=function(){oe(b)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,je=le.port2;le.port1.onmessage=b,T=function(){je.postMessage(null)}}else T=function(){O(b,0)};function Ye(de){N=de,Te||(Te=!0,T())}function Le(de,Se){S=O(function(){de(r.unstable_now())},Se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(de){de.callback=null},r.unstable_continueExecution=function(){W||z||(W=!0,Ye(fe))},r.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<de?Math.floor(1e3/de):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(de){switch(R){case 1:case 2:case 3:var Se=3;break;default:Se=R}var pe=R;R=Se;try{return de()}finally{R=pe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(de,Se){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var pe=R;R=de;try{return Se()}finally{R=pe}},r.unstable_scheduleCallback=function(de,Se,pe){var M=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?M+pe:M):pe=M,de){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=pe+J,de={id:E++,callback:Se,priorityLevel:de,startTime:pe,expirationTime:J,sortIndex:-1},pe>M?(de.sortIndex=pe,e(v,de),t(y)===null&&de===t(v)&&(Y?(ae(S),S=-1):Y=!0,Le(K,pe-M))):(de.sortIndex=J,e(y,de),W||z||(W=!0,Ye(fe))),de},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(de){var Se=R;return function(){var pe=R;R=Se;try{return de.apply(this,arguments)}finally{R=pe}}}})(kh)),kh}var Ng;function IE(){return Ng||(Ng=1,Ah.exports=xE()),Ah.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function SE(){if(jg)return Cn;jg=1;var r=Tf(),e=IE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function R(n){return y.call(I,n)?!0:y.call(E,n)?!1:v.test(n)?I[n]=!0:(E[n]=!0,!1)}function z(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,s,a,c){if(s===null||typeof s>"u"||z(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Y(n,s,a,c,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){O[n]=new Y(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];O[s]=new Y(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){O[n]=new Y(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){O[n]=new Y(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){O[n]=new Y(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){O[n]=new Y(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){O[n]=new Y(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){O[n]=new Y(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){O[n]=new Y(n,5,!1,n.toLowerCase(),null,!1,!1)});var ae=/[\-:]([a-z])/g;function oe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(ae,oe);O[s]=new Y(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(ae,oe);O[s]=new Y(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(ae,oe);O[s]=new Y(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){O[n]=new Y(n,1,!1,n.toLowerCase(),null,!1,!1)}),O.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){O[n]=new Y(n,1,!1,n.toLowerCase(),null,!0,!0)});function ue(n,s,a,c){var f=O.hasOwnProperty(s)?O[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(W(s,a,f,c)&&(a=null),c||f===null?R(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var K=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),Te=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),Ye=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),de=Symbol.iterator;function Se(n){return n===null||typeof n!="object"?null:(n=de&&n[de]||n["@@iterator"],typeof n=="function"?n:null)}var pe=Object.assign,M;function J(n){if(M===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+n}var ge=!1;function ke(n,s){if(!n||ge)return"";ge=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){c=$}n.call(s.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=c.stack.split(`
`),w=f.length-1,A=g.length-1;1<=w&&0<=A&&f[w]!==g[A];)A--;for(;1<=w&&0<=A;w--,A--)if(f[w]!==g[A]){if(w!==1||A!==1)do if(w--,A--,0>A||f[w]!==g[A]){var j=`
`+f[w].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=w&&0<=A);break}}}finally{ge=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?J(n):""}function Ve(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=ke(n.type,!1),n;case 11:return n=ke(n.type.render,!1),n;case 1:return n=ke(n.type,!0),n;default:return""}}function Me(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case Te:return"Portal";case P:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case le:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case b:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case je:return s=n.displayName||null,s!==null?s:Me(n.type)||"Memo";case Ye:s=n._payload,n=n._init;try{return Me(n(s))}catch{}}return null}function we(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ze(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ze(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function mt(n){var s=Ze(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function dn(n){n._valueTracker||(n._valueTracker=mt(n))}function Zt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Ze(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Mt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ft(n,s){var a=s.checked;return pe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function er(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=ze(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Er(n,s){s=s.checked,s!=null&&ue(n,"checked",s,!1)}function tt(n,s){Er(n,s);var a=ze(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Tr(n,s.type,a):s.hasOwnProperty("defaultValue")&&Tr(n,s.type,ze(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Br(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Tr(n,s,a){(s!=="number"||Mt(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Nt=Array.isArray;function vn(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+ze(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function tr(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return pe({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function nr(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Nt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:ze(a)}}function X(n,s){var a=ze(s.value),c=ze(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function me(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ie(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ie(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Q,G=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Q=Q||document.createElement("div"),Q.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Q.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function L(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Be=["Webkit","ms","Moz","O"];Object.keys(he).forEach(function(n){Be.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),he[s]=he[n]})});function rt(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||he.hasOwnProperty(n)&&he[n]?(""+s).trim():s+"px"}function Et(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=rt(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var lt=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function We(n,s){if(s){if(lt[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ut(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hn=null;function fn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Mn=null,en=null,Fn=null;function fi(n){if(n=Pa(n)){if(typeof Mn!="function")throw Error(t(280));var s=n.stateNode;s&&(s=iu(s),Mn(n.stateNode,n.type,s))}}function Un(n){en?Fn?Fn.push(n):Fn=[n]:en=n}function cs(){if(en){var n=en,s=Fn;if(Fn=en=null,fi(n),s)for(n=0;n<s.length;n++)fi(s[n])}}function st(n,s){return n(s)}function zn(){}var $r=!1;function aa(n,s,a){if($r)return n(s,a);$r=!0;try{return st(n,s,a)}finally{$r=!1,(en!==null||Fn!==null)&&(zn(),cs())}}function xt(n,s){var a=n.stateNode;if(a===null)return null;var c=iu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ks=!1;if(p)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{Ks=!1}function ds(n,s,a,c,f,g,w,A,j){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(ne){this.onError(ne)}}var hs=!1,Qs=null,ir=!1,la=null,ed={onError:function(n){hs=!0,Qs=n}};function Ys(n,s,a,c,f,g,w,A,j){hs=!1,Qs=null,ds.apply(ed,arguments)}function Al(n,s,a,c,f,g,w,A,j){if(Ys.apply(this,arguments),hs){if(hs){var $=Qs;hs=!1,Qs=null}else throw Error(t(198));ir||(ir=!0,la=$)}}function sr(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function fs(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function or(n){if(sr(n)!==n)throw Error(t(188))}function kl(n){var s=n.alternate;if(!s){if(s=sr(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return or(f),n;if(g===c)return or(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var w=!1,A=f.child;A;){if(A===a){w=!0,a=f,c=g;break}if(A===c){w=!0,c=f,a=g;break}A=A.sibling}if(!w){for(A=g.child;A;){if(A===a){w=!0,a=g,c=f;break}if(A===c){w=!0,c=g,a=f;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function ua(n){return n=kl(n),n!==null?Js(n):null}function Js(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Js(n);if(s!==null)return s;n=n.sibling}return null}var Xs=e.unstable_scheduleCallback,ca=e.unstable_cancelCallback,bl=e.unstable_shouldYield,td=e.unstable_requestPaint,ot=e.unstable_now,Nl=e.unstable_getCurrentPriorityLevel,ps=e.unstable_ImmediatePriority,pi=e.unstable_UserBlockingPriority,Bn=e.unstable_NormalPriority,da=e.unstable_LowPriority,jl=e.unstable_IdlePriority,ms=null,An=null;function Dl(n){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(ms,n,void 0,(n.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:Ol,ha=Math.log,Vl=Math.LN2;function Ol(n){return n>>>=0,n===0?32:31-(ha(n)/Vl|0)|0}var Zs=64,eo=4194304;function mi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gs(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var A=w&~f;A!==0?c=mi(A):(g&=w,g!==0&&(c=mi(g)))}else w=a&~f,w!==0?c=mi(w):g!==0&&(c=mi(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-pn(s),f=1<<a,c|=n[a],s&=~f;return c}function nd(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-pn(g),A=1<<w,j=f[w];j===-1?((A&a)===0||(A&c)!==0)&&(f[w]=nd(A,s)):j<=s&&(n.expiredLanes|=A),g&=~A}}function kn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ys(){var n=Zs;return Zs<<=1,(Zs&4194240)===0&&(Zs=64),n}function gi(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function yi(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-pn(s),n[s]=a}function it(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-pn(a),g=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function vi(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-pn(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var Ge=0;function _i(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ll,to,Ml,Fl,Ul,fa=!1,xr=[],Ht=null,ar=null,lr=null,wi=new Map,$n=new Map,Ir=[],rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zl(n,s){switch(n){case"focusin":case"focusout":Ht=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":wi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(s.pointerId)}}function _n(n,s,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Pa(s),s!==null&&to(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function id(n,s,a,c,f){switch(s){case"focusin":return Ht=_n(Ht,n,s,a,c,f),!0;case"dragenter":return ar=_n(ar,n,s,a,c,f),!0;case"mouseover":return lr=_n(lr,n,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return wi.set(g,_n(wi.get(g)||null,n,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,$n.set(g,_n($n.get(g)||null,n,s,a,c,f)),!0}return!1}function Bl(n){var s=Ts(n.target);if(s!==null){var a=sr(s);if(a!==null){if(s=a.tag,s===13){if(s=fs(a),s!==null){n.blockedOn=s,Ul(n.priority,function(){Ml(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=no(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);hn=c,a.target.dispatchEvent(c),hn=null}else return s=Pa(a),s!==null&&to(s),n.blockedOn=a,!1;s.shift()}return!0}function vs(n,s,a){Hr(n)&&a.delete(s)}function $l(){fa=!1,Ht!==null&&Hr(Ht)&&(Ht=null),ar!==null&&Hr(ar)&&(ar=null),lr!==null&&Hr(lr)&&(lr=null),wi.forEach(vs),$n.forEach(vs)}function ur(n,s){n.blockedOn===s&&(n.blockedOn=null,fa||(fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$l)))}function cr(n){function s(f){return ur(f,n)}if(0<xr.length){ur(xr[0],n);for(var a=1;a<xr.length;a++){var c=xr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Ht!==null&&ur(Ht,n),ar!==null&&ur(ar,n),lr!==null&&ur(lr,n),wi.forEach(s),$n.forEach(s),a=0;a<Ir.length;a++)c=Ir[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Ir.length&&(a=Ir[0],a.blockedOn===null);)Bl(a),a.blockedOn===null&&Ir.shift()}var qr=K.ReactCurrentBatchConfig,Ei=!0;function gt(n,s,a,c){var f=Ge,g=qr.transition;qr.transition=null;try{Ge=1,pa(n,s,a,c)}finally{Ge=f,qr.transition=g}}function sd(n,s,a,c){var f=Ge,g=qr.transition;qr.transition=null;try{Ge=4,pa(n,s,a,c)}finally{Ge=f,qr.transition=g}}function pa(n,s,a,c){if(Ei){var f=no(n,s,a,c);if(f===null)gd(n,s,c,_s,a),zl(n,c);else if(id(f,n,s,a,c))c.stopPropagation();else if(zl(n,c),s&4&&-1<rd.indexOf(n)){for(;f!==null;){var g=Pa(f);if(g!==null&&Ll(g),g=no(n,s,a,c),g===null&&gd(n,s,c,_s,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else gd(n,s,c,null,a)}}var _s=null;function no(n,s,a,c){if(_s=null,n=fn(c),n=Ts(n),n!==null)if(s=sr(n),s===null)n=null;else if(a=s.tag,a===13){if(n=fs(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return _s=n,null}function ma(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nl()){case ps:return 1;case pi:return 4;case Bn:case da:return 16;case jl:return 536870912;default:return 16}default:return 16}}var bn=null,ro=null,wn=null;function ga(){if(wn)return wn;var n,s=ro,a=s.length,c,f="value"in bn?bn.value:bn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===f[g-c];c++);return wn=f.slice(n,1<c?1-c:void 0)}function io(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Sr(){return!0}function ya(){return!1}function qt(n){function s(a,c,f,g,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Sr:ya,this.isPropagationStopped=ya,this}return pe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),s}var dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=qt(dr),Cr=pe({},dr,{view:0,detail:0}),od=qt(Cr),oo,Gr,Ti,ws=pe({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ti&&(Ti&&n.type==="mousemove"?(oo=n.screenX-Ti.screenX,Gr=n.screenY-Ti.screenY):Gr=oo=0,Ti=n),oo)},movementY:function(n){return"movementY"in n?n.movementY:Gr}}),ao=qt(ws),va=pe({},ws,{dataTransfer:0}),Wl=qt(va),lo=pe({},Cr,{relatedTarget:0}),uo=qt(lo),Hl=pe({},dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Kr=qt(Hl),ql=pe({},dr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gl=qt(ql),Kl=pe({},dr,{data:0}),_a=qt(Kl),co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ql[n])?!!s[n]:!1}function Rr(){return Yl}var u=pe({},Cr,{key:function(n){if(n.key){var s=co[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=io(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(n){return n.type==="keypress"?io(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?io(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=qt(u),_=pe({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x=qt(_),F=pe({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),q=qt(F),ce=pe({},dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),nt=qt(ce),jt=pe({},ws,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ke=qt(jt),Ut=[9,13,27,32],Rt=p&&"CompositionEvent"in window,Wn=null;p&&"documentMode"in document&&(Wn=document.documentMode);var Nn=p&&"TextEvent"in window&&!Wn,Es=p&&(!Rt||Wn&&8<Wn&&11>=Wn),ho=" ",Ep=!1;function Tp(n,s){switch(n){case"keyup":return Ut.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fo=!1;function mw(n,s){switch(n){case"compositionend":return xp(s);case"keypress":return s.which!==32?null:(Ep=!0,ho);case"textInput":return n=s.data,n===ho&&Ep?null:n;default:return null}}function gw(n,s){if(fo)return n==="compositionend"||!Rt&&Tp(n,s)?(n=ga(),wn=ro=bn=null,fo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Es&&s.locale!=="ko"?null:s.data;default:return null}}var yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ip(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!yw[n.type]:s==="textarea"}function Sp(n,s,a,c){Un(c),s=tu(s,"onChange"),0<s.length&&(a=new so("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var wa=null,Ea=null;function vw(n){$p(n,0)}function Jl(n){var s=vo(n);if(Zt(s))return n}function _w(n,s){if(n==="change")return s}var Cp=!1;if(p){var ad;if(p){var ld="oninput"in document;if(!ld){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),ld=typeof Rp.oninput=="function"}ad=ld}else ad=!1;Cp=ad&&(!document.documentMode||9<document.documentMode)}function Pp(){wa&&(wa.detachEvent("onpropertychange",Ap),Ea=wa=null)}function Ap(n){if(n.propertyName==="value"&&Jl(Ea)){var s=[];Sp(s,Ea,n,fn(n)),aa(vw,s)}}function ww(n,s,a){n==="focusin"?(Pp(),wa=s,Ea=a,wa.attachEvent("onpropertychange",Ap)):n==="focusout"&&Pp()}function Ew(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jl(Ea)}function Tw(n,s){if(n==="click")return Jl(s)}function xw(n,s){if(n==="input"||n==="change")return Jl(s)}function Iw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var hr=typeof Object.is=="function"?Object.is:Iw;function Ta(n,s){if(hr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!y.call(s,f)||!hr(n[f],s[f]))return!1}return!0}function kp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bp(n,s){var a=kp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=kp(a)}}function Np(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Np(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function jp(){for(var n=window,s=Mt();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Mt(n.document)}return s}function ud(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Sw(n){var s=jp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Np(a.ownerDocument.documentElement,a)){if(c!==null&&ud(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=bp(a,g);var w=bp(a,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Cw=p&&"documentMode"in document&&11>=document.documentMode,po=null,cd=null,xa=null,dd=!1;function Dp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;dd||po==null||po!==Mt(c)||(c=po,"selectionStart"in c&&ud(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),xa&&Ta(xa,c)||(xa=c,c=tu(cd,"onSelect"),0<c.length&&(s=new so("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=po)))}function Xl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var mo={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},hd={},Vp={};p&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Zl(n){if(hd[n])return hd[n];if(!mo[n])return n;var s=mo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Vp)return hd[n]=s[a];return n}var Op=Zl("animationend"),Lp=Zl("animationiteration"),Mp=Zl("animationstart"),Fp=Zl("transitionend"),Up=new Map,zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(n,s){Up.set(n,s),l(s,[n])}for(var fd=0;fd<zp.length;fd++){var pd=zp[fd],Rw=pd.toLowerCase(),Pw=pd[0].toUpperCase()+pd.slice(1);xi(Rw,"on"+Pw)}xi(Op,"onAnimationEnd"),xi(Lp,"onAnimationIteration"),xi(Mp,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(Fp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function Bp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Al(c,s,void 0,n),n.currentTarget=null}function $p(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var A=c[w],j=A.instance,$=A.currentTarget;if(A=A.listener,j!==g&&f.isPropagationStopped())break e;Bp(f,A,$),g=j}else for(w=0;w<c.length;w++){if(A=c[w],j=A.instance,$=A.currentTarget,A=A.listener,j!==g&&f.isPropagationStopped())break e;Bp(f,A,$),g=j}}}if(ir)throw n=la,ir=!1,la=null,n}function ct(n,s){var a=s[Td];a===void 0&&(a=s[Td]=new Set);var c=n+"__bubble";a.has(c)||(Wp(s,n,2,!1),a.add(c))}function md(n,s,a){var c=0;s&&(c|=4),Wp(a,n,c,s)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Sa(n){if(!n[eu]){n[eu]=!0,i.forEach(function(a){a!=="selectionchange"&&(Aw.has(a)||md(a,!1,n),md(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[eu]||(s[eu]=!0,md("selectionchange",!1,s))}}function Wp(n,s,a,c){switch(ma(s)){case 1:var f=gt;break;case 4:f=sd;break;default:f=pa}a=f.bind(null,s,a,n),f=void 0,!Ks||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function gd(n,s,a,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var j=w.tag;if((j===3||j===4)&&(j=w.stateNode.containerInfo,j===f||j.nodeType===8&&j.parentNode===f))return;w=w.return}for(;A!==null;){if(w=Ts(A),w===null)return;if(j=w.tag,j===5||j===6){c=g=w;continue e}A=A.parentNode}}c=c.return}aa(function(){var $=g,ne=fn(a),re=[];e:{var te=Up.get(n);if(te!==void 0){var ye=so,Ee=n;switch(n){case"keypress":if(io(a)===0)break e;case"keydown":case"keyup":ye=m;break;case"focusin":Ee="focus",ye=uo;break;case"focusout":Ee="blur",ye=uo;break;case"beforeblur":case"afterblur":ye=uo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=q;break;case Op:case Lp:case Mp:ye=Kr;break;case Fp:ye=nt;break;case"scroll":ye=od;break;case"wheel":ye=Ke;break;case"copy":case"cut":case"paste":ye=Gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=x}var xe=(s&4)!==0,It=!xe&&n==="scroll",U=xe?te!==null?te+"Capture":null:te;xe=[];for(var V=$,B;V!==null;){B=V;var se=B.stateNode;if(B.tag===5&&se!==null&&(B=se,U!==null&&(se=xt(V,U),se!=null&&xe.push(Ca(V,se,B)))),It)break;V=V.return}0<xe.length&&(te=new ye(te,Ee,null,a,ne),re.push({event:te,listeners:xe}))}}if((s&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",ye=n==="mouseout"||n==="pointerout",te&&a!==hn&&(Ee=a.relatedTarget||a.fromElement)&&(Ts(Ee)||Ee[Qr]))break e;if((ye||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,ye?(Ee=a.relatedTarget||a.toElement,ye=$,Ee=Ee?Ts(Ee):null,Ee!==null&&(It=sr(Ee),Ee!==It||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(ye=null,Ee=$),ye!==Ee)){if(xe=ao,se="onMouseLeave",U="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(xe=x,se="onPointerLeave",U="onPointerEnter",V="pointer"),It=ye==null?te:vo(ye),B=Ee==null?te:vo(Ee),te=new xe(se,V+"leave",ye,a,ne),te.target=It,te.relatedTarget=B,se=null,Ts(ne)===$&&(xe=new xe(U,V+"enter",Ee,a,ne),xe.target=B,xe.relatedTarget=It,se=xe),It=se,ye&&Ee)t:{for(xe=ye,U=Ee,V=0,B=xe;B;B=go(B))V++;for(B=0,se=U;se;se=go(se))B++;for(;0<V-B;)xe=go(xe),V--;for(;0<B-V;)U=go(U),B--;for(;V--;){if(xe===U||U!==null&&xe===U.alternate)break t;xe=go(xe),U=go(U)}xe=null}else xe=null;ye!==null&&Hp(re,te,ye,xe,!1),Ee!==null&&It!==null&&Hp(re,It,Ee,xe,!0)}}e:{if(te=$?vo($):window,ye=te.nodeName&&te.nodeName.toLowerCase(),ye==="select"||ye==="input"&&te.type==="file")var Ce=_w;else if(Ip(te))if(Cp)Ce=xw;else{Ce=Ew;var Pe=ww}else(ye=te.nodeName)&&ye.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Ce=Tw);if(Ce&&(Ce=Ce(n,$))){Sp(re,Ce,a,ne);break e}Pe&&Pe(n,te,$),n==="focusout"&&(Pe=te._wrapperState)&&Pe.controlled&&te.type==="number"&&Tr(te,"number",te.value)}switch(Pe=$?vo($):window,n){case"focusin":(Ip(Pe)||Pe.contentEditable==="true")&&(po=Pe,cd=$,xa=null);break;case"focusout":xa=cd=po=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,Dp(re,a,ne);break;case"selectionchange":if(Cw)break;case"keydown":case"keyup":Dp(re,a,ne)}var Ae;if(Rt)e:{switch(n){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else fo?Tp(n,a)&&(De="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(Es&&a.locale!=="ko"&&(fo||De!=="onCompositionStart"?De==="onCompositionEnd"&&fo&&(Ae=ga()):(bn=ne,ro="value"in bn?bn.value:bn.textContent,fo=!0)),Pe=tu($,De),0<Pe.length&&(De=new _a(De,n,null,a,ne),re.push({event:De,listeners:Pe}),Ae?De.data=Ae:(Ae=xp(a),Ae!==null&&(De.data=Ae)))),(Ae=Nn?mw(n,a):gw(n,a))&&($=tu($,"onBeforeInput"),0<$.length&&(ne=new _a("onBeforeInput","beforeinput",null,a,ne),re.push({event:ne,listeners:$}),ne.data=Ae))}$p(re,s)})}function Ca(n,s,a){return{instance:n,listener:s,currentTarget:a}}function tu(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=xt(n,a),g!=null&&c.unshift(Ca(n,g,f)),g=xt(n,s),g!=null&&c.push(Ca(n,g,f))),n=n.return}return c}function go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Hp(n,s,a,c,f){for(var g=s._reactName,w=[];a!==null&&a!==c;){var A=a,j=A.alternate,$=A.stateNode;if(j!==null&&j===c)break;A.tag===5&&$!==null&&(A=$,f?(j=xt(a,g),j!=null&&w.unshift(Ca(a,j,A))):f||(j=xt(a,g),j!=null&&w.push(Ca(a,j,A)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var kw=/\r\n?/g,bw=/\u0000|\uFFFD/g;function qp(n){return(typeof n=="string"?n:""+n).replace(kw,`
`).replace(bw,"")}function nu(n,s,a){if(s=qp(s),qp(n)!==s&&a)throw Error(t(425))}function ru(){}var yd=null,vd=null;function _d(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,Nw=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(n){return Gp.resolve(null).then(n).catch(Dw)}:wd;function Dw(n){setTimeout(function(){throw n})}function Ed(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),cr(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);cr(s)}function Ii(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Kp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var yo=Math.random().toString(36).slice(2),Pr="__reactFiber$"+yo,Ra="__reactProps$"+yo,Qr="__reactContainer$"+yo,Td="__reactEvents$"+yo,Vw="__reactListeners$"+yo,Ow="__reactHandles$"+yo;function Ts(n){var s=n[Pr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Qr]||a[Pr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Kp(n);n!==null;){if(a=n[Pr])return a;n=Kp(n)}return s}n=a,a=n.parentNode}return null}function Pa(n){return n=n[Pr]||n[Qr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function iu(n){return n[Ra]||null}var xd=[],_o=-1;function Si(n){return{current:n}}function dt(n){0>_o||(n.current=xd[_o],xd[_o]=null,_o--)}function at(n,s){_o++,xd[_o]=n.current,n.current=s}var Ci={},tn=Si(Ci),En=Si(!1),xs=Ci;function wo(n,s){var a=n.type.contextTypes;if(!a)return Ci;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Tn(n){return n=n.childContextTypes,n!=null}function su(){dt(En),dt(tn)}function Qp(n,s,a){if(tn.current!==Ci)throw Error(t(168));at(tn,s),at(En,a)}function Yp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,we(n)||"Unknown",f));return pe({},a,c)}function ou(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ci,xs=tn.current,at(tn,n),at(En,En.current),!0}function Jp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Yp(n,s,xs),c.__reactInternalMemoizedMergedChildContext=n,dt(En),dt(tn),at(tn,n)):dt(En),at(En,a)}var Yr=null,au=!1,Id=!1;function Xp(n){Yr===null?Yr=[n]:Yr.push(n)}function Lw(n){au=!0,Xp(n)}function Ri(){if(!Id&&Yr!==null){Id=!0;var n=0,s=Ge;try{var a=Yr;for(Ge=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Yr=null,au=!1}catch(f){throw Yr!==null&&(Yr=Yr.slice(n+1)),Xs(ps,Ri),f}finally{Ge=s,Id=!1}}return null}var Eo=[],To=0,lu=null,uu=0,Hn=[],qn=0,Is=null,Jr=1,Xr="";function Ss(n,s){Eo[To++]=uu,Eo[To++]=lu,lu=n,uu=s}function Zp(n,s,a){Hn[qn++]=Jr,Hn[qn++]=Xr,Hn[qn++]=Is,Is=n;var c=Jr;n=Xr;var f=32-pn(c)-1;c&=~(1<<f),a+=1;var g=32-pn(s)+f;if(30<g){var w=f-f%5;g=(c&(1<<w)-1).toString(32),c>>=w,f-=w,Jr=1<<32-pn(s)+f|a<<f|c,Xr=g+n}else Jr=1<<g|a<<f|c,Xr=n}function Sd(n){n.return!==null&&(Ss(n,1),Zp(n,1,0))}function Cd(n){for(;n===lu;)lu=Eo[--To],Eo[To]=null,uu=Eo[--To],Eo[To]=null;for(;n===Is;)Is=Hn[--qn],Hn[qn]=null,Xr=Hn[--qn],Hn[qn]=null,Jr=Hn[--qn],Hn[qn]=null}var jn=null,Dn=null,yt=!1,fr=null;function em(n,s){var a=Yn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function tm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,jn=n,Dn=Ii(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,jn=n,Dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Is!==null?{id:Jr,overflow:Xr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Yn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,jn=n,Dn=null,!0):!1;default:return!1}}function Rd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Pd(n){if(yt){var s=Dn;if(s){var a=s;if(!tm(n,s)){if(Rd(n))throw Error(t(418));s=Ii(a.nextSibling);var c=jn;s&&tm(n,s)?em(c,a):(n.flags=n.flags&-4097|2,yt=!1,jn=n)}}else{if(Rd(n))throw Error(t(418));n.flags=n.flags&-4097|2,yt=!1,jn=n}}}function nm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;jn=n}function cu(n){if(n!==jn)return!1;if(!yt)return nm(n),yt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!_d(n.type,n.memoizedProps)),s&&(s=Dn)){if(Rd(n))throw rm(),Error(t(418));for(;s;)em(n,s),s=Ii(s.nextSibling)}if(nm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Dn=Ii(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Dn=null}}else Dn=jn?Ii(n.stateNode.nextSibling):null;return!0}function rm(){for(var n=Dn;n;)n=Ii(n.nextSibling)}function xo(){Dn=jn=null,yt=!1}function Ad(n){fr===null?fr=[n]:fr.push(n)}var Mw=K.ReactCurrentBatchConfig;function Aa(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var A=f.refs;w===null?delete A[g]:A[g]=w},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function du(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function im(n){var s=n._init;return s(n._payload)}function sm(n){function s(U,V){if(n){var B=U.deletions;B===null?(U.deletions=[V],U.flags|=16):B.push(V)}}function a(U,V){if(!n)return null;for(;V!==null;)s(U,V),V=V.sibling;return null}function c(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function f(U,V){return U=Vi(U,V),U.index=0,U.sibling=null,U}function g(U,V,B){return U.index=B,n?(B=U.alternate,B!==null?(B=B.index,B<V?(U.flags|=2,V):B):(U.flags|=2,V)):(U.flags|=1048576,V)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function A(U,V,B,se){return V===null||V.tag!==6?(V=wh(B,U.mode,se),V.return=U,V):(V=f(V,B),V.return=U,V)}function j(U,V,B,se){var Ce=B.type;return Ce===N?ne(U,V,B.props.children,se,B.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Ye&&im(Ce)===V.type)?(se=f(V,B.props),se.ref=Aa(U,V,B),se.return=U,se):(se=Vu(B.type,B.key,B.props,null,U.mode,se),se.ref=Aa(U,V,B),se.return=U,se)}function $(U,V,B,se){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Eh(B,U.mode,se),V.return=U,V):(V=f(V,B.children||[]),V.return=U,V)}function ne(U,V,B,se,Ce){return V===null||V.tag!==7?(V=js(B,U.mode,se,Ce),V.return=U,V):(V=f(V,B),V.return=U,V)}function re(U,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=wh(""+V,U.mode,B),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case fe:return B=Vu(V.type,V.key,V.props,null,U.mode,B),B.ref=Aa(U,null,V),B.return=U,B;case Te:return V=Eh(V,U.mode,B),V.return=U,V;case Ye:var se=V._init;return re(U,se(V._payload),B)}if(Nt(V)||Se(V))return V=js(V,U.mode,B,null),V.return=U,V;du(U,V)}return null}function te(U,V,B,se){var Ce=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return Ce!==null?null:A(U,V,""+B,se);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case fe:return B.key===Ce?j(U,V,B,se):null;case Te:return B.key===Ce?$(U,V,B,se):null;case Ye:return Ce=B._init,te(U,V,Ce(B._payload),se)}if(Nt(B)||Se(B))return Ce!==null?null:ne(U,V,B,se,null);du(U,B)}return null}function ye(U,V,B,se,Ce){if(typeof se=="string"&&se!==""||typeof se=="number")return U=U.get(B)||null,A(V,U,""+se,Ce);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case fe:return U=U.get(se.key===null?B:se.key)||null,j(V,U,se,Ce);case Te:return U=U.get(se.key===null?B:se.key)||null,$(V,U,se,Ce);case Ye:var Pe=se._init;return ye(U,V,B,Pe(se._payload),Ce)}if(Nt(se)||Se(se))return U=U.get(B)||null,ne(V,U,se,Ce,null);du(V,se)}return null}function Ee(U,V,B,se){for(var Ce=null,Pe=null,Ae=V,De=V=0,$t=null;Ae!==null&&De<B.length;De++){Ae.index>De?($t=Ae,Ae=null):$t=Ae.sibling;var Xe=te(U,Ae,B[De],se);if(Xe===null){Ae===null&&(Ae=$t);break}n&&Ae&&Xe.alternate===null&&s(U,Ae),V=g(Xe,V,De),Pe===null?Ce=Xe:Pe.sibling=Xe,Pe=Xe,Ae=$t}if(De===B.length)return a(U,Ae),yt&&Ss(U,De),Ce;if(Ae===null){for(;De<B.length;De++)Ae=re(U,B[De],se),Ae!==null&&(V=g(Ae,V,De),Pe===null?Ce=Ae:Pe.sibling=Ae,Pe=Ae);return yt&&Ss(U,De),Ce}for(Ae=c(U,Ae);De<B.length;De++)$t=ye(Ae,U,De,B[De],se),$t!==null&&(n&&$t.alternate!==null&&Ae.delete($t.key===null?De:$t.key),V=g($t,V,De),Pe===null?Ce=$t:Pe.sibling=$t,Pe=$t);return n&&Ae.forEach(function(Oi){return s(U,Oi)}),yt&&Ss(U,De),Ce}function xe(U,V,B,se){var Ce=Se(B);if(typeof Ce!="function")throw Error(t(150));if(B=Ce.call(B),B==null)throw Error(t(151));for(var Pe=Ce=null,Ae=V,De=V=0,$t=null,Xe=B.next();Ae!==null&&!Xe.done;De++,Xe=B.next()){Ae.index>De?($t=Ae,Ae=null):$t=Ae.sibling;var Oi=te(U,Ae,Xe.value,se);if(Oi===null){Ae===null&&(Ae=$t);break}n&&Ae&&Oi.alternate===null&&s(U,Ae),V=g(Oi,V,De),Pe===null?Ce=Oi:Pe.sibling=Oi,Pe=Oi,Ae=$t}if(Xe.done)return a(U,Ae),yt&&Ss(U,De),Ce;if(Ae===null){for(;!Xe.done;De++,Xe=B.next())Xe=re(U,Xe.value,se),Xe!==null&&(V=g(Xe,V,De),Pe===null?Ce=Xe:Pe.sibling=Xe,Pe=Xe);return yt&&Ss(U,De),Ce}for(Ae=c(U,Ae);!Xe.done;De++,Xe=B.next())Xe=ye(Ae,U,De,Xe.value,se),Xe!==null&&(n&&Xe.alternate!==null&&Ae.delete(Xe.key===null?De:Xe.key),V=g(Xe,V,De),Pe===null?Ce=Xe:Pe.sibling=Xe,Pe=Xe);return n&&Ae.forEach(function(yE){return s(U,yE)}),yt&&Ss(U,De),Ce}function It(U,V,B,se){if(typeof B=="object"&&B!==null&&B.type===N&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case fe:e:{for(var Ce=B.key,Pe=V;Pe!==null;){if(Pe.key===Ce){if(Ce=B.type,Ce===N){if(Pe.tag===7){a(U,Pe.sibling),V=f(Pe,B.props.children),V.return=U,U=V;break e}}else if(Pe.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Ye&&im(Ce)===Pe.type){a(U,Pe.sibling),V=f(Pe,B.props),V.ref=Aa(U,Pe,B),V.return=U,U=V;break e}a(U,Pe);break}else s(U,Pe);Pe=Pe.sibling}B.type===N?(V=js(B.props.children,U.mode,se,B.key),V.return=U,U=V):(se=Vu(B.type,B.key,B.props,null,U.mode,se),se.ref=Aa(U,V,B),se.return=U,U=se)}return w(U);case Te:e:{for(Pe=B.key;V!==null;){if(V.key===Pe)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(U,V.sibling),V=f(V,B.children||[]),V.return=U,U=V;break e}else{a(U,V);break}else s(U,V);V=V.sibling}V=Eh(B,U.mode,se),V.return=U,U=V}return w(U);case Ye:return Pe=B._init,It(U,V,Pe(B._payload),se)}if(Nt(B))return Ee(U,V,B,se);if(Se(B))return xe(U,V,B,se);du(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(a(U,V.sibling),V=f(V,B),V.return=U,U=V):(a(U,V),V=wh(B,U.mode,se),V.return=U,U=V),w(U)):a(U,V)}return It}var Io=sm(!0),om=sm(!1),hu=Si(null),fu=null,So=null,kd=null;function bd(){kd=So=fu=null}function Nd(n){var s=hu.current;dt(hu),n._currentValue=s}function jd(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function Co(n,s){fu=n,kd=So=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(xn=!0),n.firstContext=null)}function Gn(n){var s=n._currentValue;if(kd!==n)if(n={context:n,memoizedValue:s,next:null},So===null){if(fu===null)throw Error(t(308));So=n,fu.dependencies={lanes:0,firstContext:n}}else So=So.next=n;return s}var Cs=null;function Dd(n){Cs===null?Cs=[n]:Cs.push(n)}function am(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Dd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Zr(n,c)}function Zr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Pi=!1;function Vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ei(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Ai(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Je&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Zr(n,a)}return f=c.interleaved,f===null?(s.next=s,Dd(c)):(s.next=f.next,f.next=s),c.interleaved=s,Zr(n,a)}function pu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,vi(n,a)}}function um(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function mu(n,s,a,c){var f=n.updateQueue;Pi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var j=A,$=j.next;j.next=null,w===null?g=$:w.next=$,w=j;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,A=ne.lastBaseUpdate,A!==w&&(A===null?ne.firstBaseUpdate=$:A.next=$,ne.lastBaseUpdate=j))}if(g!==null){var re=f.baseState;w=0,ne=$=j=null,A=g;do{var te=A.lane,ye=A.eventTime;if((c&te)===te){ne!==null&&(ne=ne.next={eventTime:ye,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Ee=n,xe=A;switch(te=s,ye=a,xe.tag){case 1:if(Ee=xe.payload,typeof Ee=="function"){re=Ee.call(ye,re,te);break e}re=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=xe.payload,te=typeof Ee=="function"?Ee.call(ye,re,te):Ee,te==null)break e;re=pe({},re,te);break e;case 2:Pi=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,te=f.effects,te===null?f.effects=[A]:te.push(A))}else ye={eventTime:ye,lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ne===null?($=ne=ye,j=re):ne=ne.next=ye,w|=te;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;te=A,A=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);if(ne===null&&(j=re),f.baseState=j,f.firstBaseUpdate=$,f.lastBaseUpdate=ne,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);As|=w,n.lanes=w,n.memoizedState=re}}function cm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var ka={},Ar=Si(ka),ba=Si(ka),Na=Si(ka);function Rs(n){if(n===ka)throw Error(t(174));return n}function Od(n,s){switch(at(Na,s),at(ba,n),at(Ar,ka),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:C(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=C(s,n)}dt(Ar),at(Ar,s)}function Ro(){dt(Ar),dt(ba),dt(Na)}function dm(n){Rs(Na.current);var s=Rs(Ar.current),a=C(s,n.type);s!==a&&(at(ba,n),at(Ar,a))}function Ld(n){ba.current===n&&(dt(Ar),dt(ba))}var vt=Si(0);function gu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Md=[];function Fd(){for(var n=0;n<Md.length;n++)Md[n]._workInProgressVersionPrimary=null;Md.length=0}var yu=K.ReactCurrentDispatcher,Ud=K.ReactCurrentBatchConfig,Ps=0,_t=null,Dt=null,zt=null,vu=!1,ja=!1,Da=0,Fw=0;function nn(){throw Error(t(321))}function zd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!hr(n[a],s[a]))return!1;return!0}function Bd(n,s,a,c,f,g){if(Ps=g,_t=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,yu.current=n===null||n.memoizedState===null?$w:Ww,n=a(c,f),ja){g=0;do{if(ja=!1,Da=0,25<=g)throw Error(t(301));g+=1,zt=Dt=null,s.updateQueue=null,yu.current=Hw,n=a(c,f)}while(ja)}if(yu.current=Eu,s=Dt!==null&&Dt.next!==null,Ps=0,zt=Dt=_t=null,vu=!1,s)throw Error(t(300));return n}function $d(){var n=Da!==0;return Da=0,n}function kr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?_t.memoizedState=zt=n:zt=zt.next=n,zt}function Kn(){if(Dt===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=Dt.next;var s=zt===null?_t.memoizedState:zt.next;if(s!==null)zt=s,Dt=n;else{if(n===null)throw Error(t(310));Dt=n,n={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},zt===null?_t.memoizedState=zt=n:zt=zt.next=n}return zt}function Va(n,s){return typeof s=="function"?s(n):s}function Wd(n){var s=Kn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Dt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var A=w=null,j=null,$=g;do{var ne=$.lane;if((Ps&ne)===ne)j!==null&&(j=j.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var re={lane:ne,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};j===null?(A=j=re,w=c):j=j.next=re,_t.lanes|=ne,As|=ne}$=$.next}while($!==null&&$!==g);j===null?w=c:j.next=A,hr(c,s.memoizedState)||(xn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=j,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,_t.lanes|=g,As|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Hd(n){var s=Kn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);hr(g,s.memoizedState)||(xn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function hm(){}function fm(n,s){var a=_t,c=Kn(),f=s(),g=!hr(c.memoizedState,f);if(g&&(c.memoizedState=f,xn=!0),c=c.queue,qd(gm.bind(null,a,c,n),[n]),c.getSnapshot!==s||g||zt!==null&&zt.memoizedState.tag&1){if(a.flags|=2048,Oa(9,mm.bind(null,a,c,f,s),void 0,null),Bt===null)throw Error(t(349));(Ps&30)!==0||pm(a,s,f)}return f}function pm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=_t.updateQueue,s===null?(s={lastEffect:null,stores:null},_t.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function mm(n,s,a,c){s.value=a,s.getSnapshot=c,ym(s)&&vm(n)}function gm(n,s,a){return a(function(){ym(s)&&vm(n)})}function ym(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!hr(n,a)}catch{return!0}}function vm(n){var s=Zr(n,1);s!==null&&yr(s,n,1,-1)}function _m(n){var s=kr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:n},s.queue=n,n=n.dispatch=Bw.bind(null,_t,n),[s.memoizedState,n]}function Oa(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=_t.updateQueue,s===null?(s={lastEffect:null,stores:null},_t.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function wm(){return Kn().memoizedState}function _u(n,s,a,c){var f=kr();_t.flags|=n,f.memoizedState=Oa(1|s,a,void 0,c===void 0?null:c)}function wu(n,s,a,c){var f=Kn();c=c===void 0?null:c;var g=void 0;if(Dt!==null){var w=Dt.memoizedState;if(g=w.destroy,c!==null&&zd(c,w.deps)){f.memoizedState=Oa(s,a,g,c);return}}_t.flags|=n,f.memoizedState=Oa(1|s,a,g,c)}function Em(n,s){return _u(8390656,8,n,s)}function qd(n,s){return wu(2048,8,n,s)}function Tm(n,s){return wu(4,2,n,s)}function xm(n,s){return wu(4,4,n,s)}function Im(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Sm(n,s,a){return a=a!=null?a.concat([n]):null,wu(4,4,Im.bind(null,s,n),a)}function Gd(){}function Cm(n,s){var a=Kn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&zd(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Rm(n,s){var a=Kn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&zd(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Pm(n,s,a){return(Ps&21)===0?(n.baseState&&(n.baseState=!1,xn=!0),n.memoizedState=a):(hr(a,s)||(a=ys(),_t.lanes|=a,As|=a,n.baseState=!0),s)}function Uw(n,s){var a=Ge;Ge=a!==0&&4>a?a:4,n(!0);var c=Ud.transition;Ud.transition={};try{n(!1),s()}finally{Ge=a,Ud.transition=c}}function Am(){return Kn().memoizedState}function zw(n,s,a){var c=ji(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},km(n))bm(s,a);else if(a=am(n,s,a,c),a!==null){var f=yn();yr(a,n,c,f),Nm(a,s,c)}}function Bw(n,s,a){var c=ji(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(km(n))bm(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,A=g(w,a);if(f.hasEagerState=!0,f.eagerState=A,hr(A,w)){var j=s.interleaved;j===null?(f.next=f,Dd(s)):(f.next=j.next,j.next=f),s.interleaved=f;return}}catch{}finally{}a=am(n,s,f,c),a!==null&&(f=yn(),yr(a,n,c,f),Nm(a,s,c))}}function km(n){var s=n.alternate;return n===_t||s!==null&&s===_t}function bm(n,s){ja=vu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Nm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,vi(n,a)}}var Eu={readContext:Gn,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},$w={readContext:Gn,useCallback:function(n,s){return kr().memoizedState=[n,s===void 0?null:s],n},useContext:Gn,useEffect:Em,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,_u(4194308,4,Im.bind(null,s,n),a)},useLayoutEffect:function(n,s){return _u(4194308,4,n,s)},useInsertionEffect:function(n,s){return _u(4,2,n,s)},useMemo:function(n,s){var a=kr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=kr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=zw.bind(null,_t,n),[c.memoizedState,n]},useRef:function(n){var s=kr();return n={current:n},s.memoizedState=n},useState:_m,useDebugValue:Gd,useDeferredValue:function(n){return kr().memoizedState=n},useTransition:function(){var n=_m(!1),s=n[0];return n=Uw.bind(null,n[1]),kr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=_t,f=kr();if(yt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Bt===null)throw Error(t(349));(Ps&30)!==0||pm(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Em(gm.bind(null,c,g,n),[n]),c.flags|=2048,Oa(9,mm.bind(null,c,g,a,s),void 0,null),a},useId:function(){var n=kr(),s=Bt.identifierPrefix;if(yt){var a=Xr,c=Jr;a=(c&~(1<<32-pn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Da++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Fw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Ww={readContext:Gn,useCallback:Cm,useContext:Gn,useEffect:qd,useImperativeHandle:Sm,useInsertionEffect:Tm,useLayoutEffect:xm,useMemo:Rm,useReducer:Wd,useRef:wm,useState:function(){return Wd(Va)},useDebugValue:Gd,useDeferredValue:function(n){var s=Kn();return Pm(s,Dt.memoizedState,n)},useTransition:function(){var n=Wd(Va)[0],s=Kn().memoizedState;return[n,s]},useMutableSource:hm,useSyncExternalStore:fm,useId:Am,unstable_isNewReconciler:!1},Hw={readContext:Gn,useCallback:Cm,useContext:Gn,useEffect:qd,useImperativeHandle:Sm,useInsertionEffect:Tm,useLayoutEffect:xm,useMemo:Rm,useReducer:Hd,useRef:wm,useState:function(){return Hd(Va)},useDebugValue:Gd,useDeferredValue:function(n){var s=Kn();return Dt===null?s.memoizedState=n:Pm(s,Dt.memoizedState,n)},useTransition:function(){var n=Hd(Va)[0],s=Kn().memoizedState;return[n,s]},useMutableSource:hm,useSyncExternalStore:fm,useId:Am,unstable_isNewReconciler:!1};function pr(n,s){if(n&&n.defaultProps){s=pe({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Kd(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:pe({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tu={isMounted:function(n){return(n=n._reactInternals)?sr(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=yn(),f=ji(n),g=ei(c,f);g.payload=s,a!=null&&(g.callback=a),s=Ai(n,g,f),s!==null&&(yr(s,n,f,c),pu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=yn(),f=ji(n),g=ei(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Ai(n,g,f),s!==null&&(yr(s,n,f,c),pu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=yn(),c=ji(n),f=ei(a,c);f.tag=2,s!=null&&(f.callback=s),s=Ai(n,f,c),s!==null&&(yr(s,n,c,a),pu(s,n,c))}};function jm(n,s,a,c,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!Ta(a,c)||!Ta(f,g):!0}function Dm(n,s,a){var c=!1,f=Ci,g=s.contextType;return typeof g=="object"&&g!==null?g=Gn(g):(f=Tn(s)?xs:tn.current,c=s.contextTypes,g=(c=c!=null)?wo(n,f):Ci),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Vm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Tu.enqueueReplaceState(s,s.state,null)}function Qd(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Vd(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Gn(g):(g=Tn(s)?xs:tn.current,f.context=wo(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Kd(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Tu.enqueueReplaceState(f,f.state,null),mu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Po(n,s){try{var a="",c=s;do a+=Ve(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Yd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Jd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var qw=typeof WeakMap=="function"?WeakMap:Map;function Om(n,s,a){a=ei(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Au||(Au=!0,hh=c),Jd(n,s)},a}function Lm(n,s,a){a=ei(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){Jd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Jd(n,s),typeof c!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Mm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new qw;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=oE.bind(null,n,s,a),s.then(n,n))}function Fm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Um(n,s,a,c,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ei(-1,1),s.tag=2,Ai(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Gw=K.ReactCurrentOwner,xn=!1;function gn(n,s,a,c){s.child=n===null?om(s,null,a,c):Io(s,n.child,a,c)}function zm(n,s,a,c,f){a=a.render;var g=s.ref;return Co(s,f),c=Bd(n,s,a,c,g,f),a=$d(),n!==null&&!xn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ti(n,s,f)):(yt&&a&&Sd(s),s.flags|=1,gn(n,s,c,f),s.child)}function Bm(n,s,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!_h(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,$m(n,s,g,c,f)):(n=Vu(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ta,a(w,c)&&n.ref===s.ref)return ti(n,s,f)}return s.flags|=1,n=Vi(g,c),n.ref=s.ref,n.return=s,s.child=n}function $m(n,s,a,c,f){if(n!==null){var g=n.memoizedProps;if(Ta(g,c)&&n.ref===s.ref)if(xn=!1,s.pendingProps=c=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(xn=!0);else return s.lanes=n.lanes,ti(n,s,f)}return Xd(n,s,a,c,f)}function Wm(n,s,a){var c=s.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(ko,Vn),Vn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,at(ko,Vn),Vn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,at(ko,Vn),Vn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,at(ko,Vn),Vn|=c;return gn(n,s,f,a),s.child}function Hm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Xd(n,s,a,c,f){var g=Tn(a)?xs:tn.current;return g=wo(s,g),Co(s,f),a=Bd(n,s,a,c,g,f),c=$d(),n!==null&&!xn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ti(n,s,f)):(yt&&c&&Sd(s),s.flags|=1,gn(n,s,a,f),s.child)}function qm(n,s,a,c,f){if(Tn(a)){var g=!0;ou(s)}else g=!1;if(Co(s,f),s.stateNode===null)Iu(n,s),Dm(s,a,c),Qd(s,a,c,f),c=!0;else if(n===null){var w=s.stateNode,A=s.memoizedProps;w.props=A;var j=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=Gn($):($=Tn(a)?xs:tn.current,$=wo(s,$));var ne=a.getDerivedStateFromProps,re=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function";re||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||j!==$)&&Vm(s,w,c,$),Pi=!1;var te=s.memoizedState;w.state=te,mu(s,c,w,f),j=s.memoizedState,A!==c||te!==j||En.current||Pi?(typeof ne=="function"&&(Kd(s,a,ne,c),j=s.memoizedState),(A=Pi||jm(s,a,A,c,te,j,$))?(re||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=j),w.props=c,w.state=j,w.context=$,c=A):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,lm(n,s),A=s.memoizedProps,$=s.type===s.elementType?A:pr(s.type,A),w.props=$,re=s.pendingProps,te=w.context,j=a.contextType,typeof j=="object"&&j!==null?j=Gn(j):(j=Tn(a)?xs:tn.current,j=wo(s,j));var ye=a.getDerivedStateFromProps;(ne=typeof ye=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==re||te!==j)&&Vm(s,w,c,j),Pi=!1,te=s.memoizedState,w.state=te,mu(s,c,w,f);var Ee=s.memoizedState;A!==re||te!==Ee||En.current||Pi?(typeof ye=="function"&&(Kd(s,a,ye,c),Ee=s.memoizedState),($=Pi||jm(s,a,$,c,te,Ee,j)||!1)?(ne||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,Ee,j),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,Ee,j)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Ee),w.props=c,w.state=Ee,w.context=j,c=$):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),c=!1)}return Zd(n,s,a,c,g,f)}function Zd(n,s,a,c,f,g){Hm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&Jp(s,a,!1),ti(n,s,g);c=s.stateNode,Gw.current=s;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=Io(s,n.child,null,g),s.child=Io(s,null,A,g)):gn(n,s,A,g),s.memoizedState=c.state,f&&Jp(s,a,!0),s.child}function Gm(n){var s=n.stateNode;s.pendingContext?Qp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Qp(n,s.context,!1),Od(n,s.containerInfo)}function Km(n,s,a,c,f){return xo(),Ad(f),s.flags|=256,gn(n,s,a,c),s.child}var eh={dehydrated:null,treeContext:null,retryLane:0};function th(n){return{baseLanes:n,cachePool:null,transitions:null}}function Qm(n,s,a){var c=s.pendingProps,f=vt.current,g=!1,w=(s.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(f&2)!==0),A?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),at(vt,f&1),n===null)return Pd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,g?(c=s.mode,g=s.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Ou(w,c,0,null),n=js(n,c,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=th(a),s.memoizedState=eh,n):nh(s,w));if(f=n.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return Kw(n,s,w,c,A,f,a);if(g){g=c.fallback,w=s.mode,f=n.child,A=f.sibling;var j={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=j,s.deletions=null):(c=Vi(f,j),c.subtreeFlags=f.subtreeFlags&14680064),A!==null?g=Vi(A,g):(g=js(g,w,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,w=n.child.memoizedState,w=w===null?th(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,s.memoizedState=eh,c}return g=n.child,n=g.sibling,c=Vi(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function nh(n,s){return s=Ou({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function xu(n,s,a,c){return c!==null&&Ad(c),Io(s,n.child,null,a),n=nh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Kw(n,s,a,c,f,g,w){if(a)return s.flags&256?(s.flags&=-257,c=Yd(Error(t(422))),xu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=Ou({mode:"visible",children:c.children},f,0,null),g=js(g,f,w,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&Io(s,n.child,null,w),s.child.memoizedState=th(w),s.memoizedState=eh,g);if((s.mode&1)===0)return xu(n,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var A=c.dgst;return c=A,g=Error(t(419)),c=Yd(g,c,void 0),xu(n,s,w,c)}if(A=(w&n.childLanes)!==0,xn||A){if(c=Bt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Zr(n,f),yr(c,n,f,-1))}return vh(),c=Yd(Error(t(421))),xu(n,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=aE.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,Dn=Ii(f.nextSibling),jn=s,yt=!0,fr=null,n!==null&&(Hn[qn++]=Jr,Hn[qn++]=Xr,Hn[qn++]=Is,Jr=n.id,Xr=n.overflow,Is=s),s=nh(s,c.children),s.flags|=4096,s)}function Ym(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),jd(n.return,s,a)}function rh(n,s,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Jm(n,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(gn(n,s,c.children,a),c=vt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ym(n,a,s);else if(n.tag===19)Ym(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(at(vt,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&gu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),rh(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&gu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}rh(s,!0,a,null,g);break;case"together":rh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Iu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ti(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),As|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Vi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Vi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Qw(n,s,a){switch(s.tag){case 3:Gm(s),xo();break;case 5:dm(s);break;case 1:Tn(s.type)&&ou(s);break;case 4:Od(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;at(hu,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(at(vt,vt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Qm(n,s,a):(at(vt,vt.current&1),n=ti(n,s,a),n!==null?n.sibling:null);at(vt,vt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Jm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),at(vt,vt.current),c)break;return null;case 22:case 23:return s.lanes=0,Wm(n,s,a)}return ti(n,s,a)}var Xm,ih,Zm,eg;Xm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ih=function(){},Zm=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Rs(Ar.current);var g=null;switch(a){case"input":f=Ft(n,f),c=Ft(n,c),g=[];break;case"select":f=pe({},f,{value:void 0}),c=pe({},c,{value:void 0}),g=[];break;case"textarea":f=tr(n,f),c=tr(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ru)}We(a,c);var w;a=null;for($ in f)if(!c.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var A=f[$];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in c){var j=c[$];if(A=f!=null?f[$]:void 0,c.hasOwnProperty($)&&j!==A&&(j!=null||A!=null))if($==="style")if(A){for(w in A)!A.hasOwnProperty(w)||j&&j.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in j)j.hasOwnProperty(w)&&A[w]!==j[w]&&(a||(a={}),a[w]=j[w])}else a||(g||(g=[]),g.push($,a)),a=j;else $==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,A=A?A.__html:void 0,j!=null&&A!==j&&(g=g||[]).push($,j)):$==="children"?typeof j!="string"&&typeof j!="number"||(g=g||[]).push($,""+j):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(j!=null&&$==="onScroll"&&ct("scroll",n),g||A===j||(g=[])):(g=g||[]).push($,j))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},eg=function(n,s,a,c){a!==c&&(s.flags|=4)};function La(n,s){if(!yt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function rn(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Yw(n,s,a){var c=s.pendingProps;switch(Cd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(s),null;case 1:return Tn(s.type)&&su(),rn(s),null;case 3:return c=s.stateNode,Ro(),dt(En),dt(tn),Fd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(cu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,fr!==null&&(mh(fr),fr=null))),ih(n,s),rn(s),null;case 5:Ld(s);var f=Rs(Na.current);if(a=s.type,n!==null&&s.stateNode!=null)Zm(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return rn(s),null}if(n=Rs(Ar.current),cu(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[Pr]=s,c[Ra]=g,n=(s.mode&1)!==0,a){case"dialog":ct("cancel",c),ct("close",c);break;case"iframe":case"object":case"embed":ct("load",c);break;case"video":case"audio":for(f=0;f<Ia.length;f++)ct(Ia[f],c);break;case"source":ct("error",c);break;case"img":case"image":case"link":ct("error",c),ct("load",c);break;case"details":ct("toggle",c);break;case"input":er(c,g),ct("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},ct("invalid",c);break;case"textarea":nr(c,g),ct("invalid",c)}We(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var A=g[w];w==="children"?typeof A=="string"?c.textContent!==A&&(g.suppressHydrationWarning!==!0&&nu(c.textContent,A,n),f=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&nu(c.textContent,A,n),f=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&ct("scroll",c)}switch(a){case"input":dn(c),Br(c,g,!0);break;case"textarea":dn(c),me(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=ru)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ie(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Pr]=s,n[Ra]=c,Xm(n,s,!1,!1),s.stateNode=n;e:{switch(w=ut(a,c),a){case"dialog":ct("cancel",n),ct("close",n),f=c;break;case"iframe":case"object":case"embed":ct("load",n),f=c;break;case"video":case"audio":for(f=0;f<Ia.length;f++)ct(Ia[f],n);f=c;break;case"source":ct("error",n),f=c;break;case"img":case"image":case"link":ct("error",n),ct("load",n),f=c;break;case"details":ct("toggle",n),f=c;break;case"input":er(n,c),f=Ft(n,c),ct("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=pe({},c,{value:void 0}),ct("invalid",n);break;case"textarea":nr(n,c),f=tr(n,c),ct("invalid",n);break;default:f=c}We(a,f),A=f;for(g in A)if(A.hasOwnProperty(g)){var j=A[g];g==="style"?Et(n,j):g==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&G(n,j)):g==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&L(n,j):typeof j=="number"&&L(n,""+j):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?j!=null&&g==="onScroll"&&ct("scroll",n):j!=null&&ue(n,g,j,w))}switch(a){case"input":dn(n),Br(n,c,!1);break;case"textarea":dn(n),me(n);break;case"option":c.value!=null&&n.setAttribute("value",""+ze(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?vn(n,!!c.multiple,g,!1):c.defaultValue!=null&&vn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=ru)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return rn(s),null;case 6:if(n&&s.stateNode!=null)eg(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Rs(Na.current),Rs(Ar.current),cu(s)){if(c=s.stateNode,a=s.memoizedProps,c[Pr]=s,(g=c.nodeValue!==a)&&(n=jn,n!==null))switch(n.tag){case 3:nu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nu(c.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Pr]=s,s.stateNode=c}return rn(s),null;case 13:if(dt(vt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(yt&&Dn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)rm(),xo(),s.flags|=98560,g=!1;else if(g=cu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Pr]=s}else xo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rn(s),g=!1}else fr!==null&&(mh(fr),fr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(vt.current&1)!==0?Vt===0&&(Vt=3):vh())),s.updateQueue!==null&&(s.flags|=4),rn(s),null);case 4:return Ro(),ih(n,s),n===null&&Sa(s.stateNode.containerInfo),rn(s),null;case 10:return Nd(s.type._context),rn(s),null;case 17:return Tn(s.type)&&su(),rn(s),null;case 19:if(dt(vt),g=s.memoizedState,g===null)return rn(s),null;if(c=(s.flags&128)!==0,w=g.rendering,w===null)if(c)La(g,!1);else{if(Vt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=gu(n),w!==null){for(s.flags|=128,La(g,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,n=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return at(vt,vt.current&1|2),s.child}n=n.sibling}g.tail!==null&&ot()>bo&&(s.flags|=128,c=!0,La(g,!1),s.lanes=4194304)}else{if(!c)if(n=gu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),La(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!yt)return rn(s),null}else 2*ot()-g.renderingStartTime>bo&&a!==1073741824&&(s.flags|=128,c=!0,La(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=ot(),s.sibling=null,a=vt.current,at(vt,c?a&1|2:a&1),s):(rn(s),null);case 22:case 23:return yh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Vn&1073741824)!==0&&(rn(s),s.subtreeFlags&6&&(s.flags|=8192)):rn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Jw(n,s){switch(Cd(s),s.tag){case 1:return Tn(s.type)&&su(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ro(),dt(En),dt(tn),Fd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Ld(s),null;case 13:if(dt(vt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));xo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return dt(vt),null;case 4:return Ro(),null;case 10:return Nd(s.type._context),null;case 22:case 23:return yh(),null;case 24:return null;default:return null}}var Su=!1,sn=!1,Xw=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Ao(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Tt(n,s,c)}else a.current=null}function sh(n,s,a){try{a()}catch(c){Tt(n,s,c)}}var tg=!1;function Zw(n,s){if(yd=Ei,n=jp(),ud(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,A=-1,j=-1,$=0,ne=0,re=n,te=null;t:for(;;){for(var ye;re!==a||f!==0&&re.nodeType!==3||(A=w+f),re!==g||c!==0&&re.nodeType!==3||(j=w+c),re.nodeType===3&&(w+=re.nodeValue.length),(ye=re.firstChild)!==null;)te=re,re=ye;for(;;){if(re===n)break t;if(te===a&&++$===f&&(A=w),te===g&&++ne===c&&(j=w),(ye=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=ye}a=A===-1||j===-1?null:{start:A,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(vd={focusedElem:n,selectionRange:a},Ei=!1,_e=s;_e!==null;)if(s=_e,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,_e=n;else for(;_e!==null;){s=_e;try{var Ee=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var xe=Ee.memoizedProps,It=Ee.memoizedState,U=s.stateNode,V=U.getSnapshotBeforeUpdate(s.elementType===s.type?xe:pr(s.type,xe),It);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){Tt(s,s.return,se)}if(n=s.sibling,n!==null){n.return=s.return,_e=n;break}_e=s.return}return Ee=tg,tg=!1,Ee}function Ma(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&sh(s,a,g)}f=f.next}while(f!==c)}}function Cu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function oh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ng(n){var s=n.alternate;s!==null&&(n.alternate=null,ng(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Pr],delete s[Ra],delete s[Td],delete s[Vw],delete s[Ow])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rg(n){return n.tag===5||n.tag===3||n.tag===4}function ig(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ah(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ru));else if(c!==4&&(n=n.child,n!==null))for(ah(n,s,a),n=n.sibling;n!==null;)ah(n,s,a),n=n.sibling}function lh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(lh(n,s,a),n=n.sibling;n!==null;)lh(n,s,a),n=n.sibling}var Gt=null,mr=!1;function ki(n,s,a){for(a=a.child;a!==null;)sg(n,s,a),a=a.sibling}function sg(n,s,a){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(ms,a)}catch{}switch(a.tag){case 5:sn||Ao(a,s);case 6:var c=Gt,f=mr;Gt=null,ki(n,s,a),Gt=c,mr=f,Gt!==null&&(mr?(n=Gt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Gt.removeChild(a.stateNode));break;case 18:Gt!==null&&(mr?(n=Gt,a=a.stateNode,n.nodeType===8?Ed(n.parentNode,a):n.nodeType===1&&Ed(n,a),cr(n)):Ed(Gt,a.stateNode));break;case 4:c=Gt,f=mr,Gt=a.stateNode.containerInfo,mr=!0,ki(n,s,a),Gt=c,mr=f;break;case 0:case 11:case 14:case 15:if(!sn&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&sh(a,s,w),f=f.next}while(f!==c)}ki(n,s,a);break;case 1:if(!sn&&(Ao(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){Tt(a,s,A)}ki(n,s,a);break;case 21:ki(n,s,a);break;case 22:a.mode&1?(sn=(c=sn)||a.memoizedState!==null,ki(n,s,a),sn=c):ki(n,s,a);break;default:ki(n,s,a)}}function og(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Xw),s.forEach(function(c){var f=lE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function gr(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,w=s,A=w;e:for(;A!==null;){switch(A.tag){case 5:Gt=A.stateNode,mr=!1;break e;case 3:Gt=A.stateNode.containerInfo,mr=!0;break e;case 4:Gt=A.stateNode.containerInfo,mr=!0;break e}A=A.return}if(Gt===null)throw Error(t(160));sg(g,w,f),Gt=null,mr=!1;var j=f.alternate;j!==null&&(j.return=null),f.return=null}catch($){Tt(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ag(s,n),s=s.sibling}function ag(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(gr(s,n),br(n),c&4){try{Ma(3,n,n.return),Cu(3,n)}catch(xe){Tt(n,n.return,xe)}try{Ma(5,n,n.return)}catch(xe){Tt(n,n.return,xe)}}break;case 1:gr(s,n),br(n),c&512&&a!==null&&Ao(a,a.return);break;case 5:if(gr(s,n),br(n),c&512&&a!==null&&Ao(a,a.return),n.flags&32){var f=n.stateNode;try{L(f,"")}catch(xe){Tt(n,n.return,xe)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,A=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Er(f,g),ut(A,w);var $=ut(A,g);for(w=0;w<j.length;w+=2){var ne=j[w],re=j[w+1];ne==="style"?Et(f,re):ne==="dangerouslySetInnerHTML"?G(f,re):ne==="children"?L(f,re):ue(f,ne,re,$)}switch(A){case"input":tt(f,g);break;case"textarea":X(f,g);break;case"select":var te=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ye=g.value;ye!=null?vn(f,!!g.multiple,ye,!1):te!==!!g.multiple&&(g.defaultValue!=null?vn(f,!!g.multiple,g.defaultValue,!0):vn(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ra]=g}catch(xe){Tt(n,n.return,xe)}}break;case 6:if(gr(s,n),br(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(xe){Tt(n,n.return,xe)}}break;case 3:if(gr(s,n),br(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{cr(s.containerInfo)}catch(xe){Tt(n,n.return,xe)}break;case 4:gr(s,n),br(n);break;case 13:gr(s,n),br(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(dh=ot())),c&4&&og(n);break;case 22:if(ne=a!==null&&a.memoizedState!==null,n.mode&1?(sn=($=sn)||ne,gr(s,n),sn=$):gr(s,n),br(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!ne&&(n.mode&1)!==0)for(_e=n,ne=n.child;ne!==null;){for(re=_e=ne;_e!==null;){switch(te=_e,ye=te.child,te.tag){case 0:case 11:case 14:case 15:Ma(4,te,te.return);break;case 1:Ao(te,te.return);var Ee=te.stateNode;if(typeof Ee.componentWillUnmount=="function"){c=te,a=te.return;try{s=c,Ee.props=s.memoizedProps,Ee.state=s.memoizedState,Ee.componentWillUnmount()}catch(xe){Tt(c,a,xe)}}break;case 5:Ao(te,te.return);break;case 22:if(te.memoizedState!==null){cg(re);continue}}ye!==null?(ye.return=te,_e=ye):cg(re)}ne=ne.sibling}e:for(ne=null,re=n;;){if(re.tag===5){if(ne===null){ne=re;try{f=re.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=re.stateNode,j=re.memoizedProps.style,w=j!=null&&j.hasOwnProperty("display")?j.display:null,A.style.display=rt("display",w))}catch(xe){Tt(n,n.return,xe)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=$?"":re.memoizedProps}catch(xe){Tt(n,n.return,xe)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===n)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===n)break e;for(;re.sibling===null;){if(re.return===null||re.return===n)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:gr(s,n),br(n),c&4&&og(n);break;case 21:break;default:gr(s,n),br(n)}}function br(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(rg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(L(f,""),c.flags&=-33);var g=ig(n);lh(n,g,f);break;case 3:case 4:var w=c.stateNode.containerInfo,A=ig(n);ah(n,A,w);break;default:throw Error(t(161))}}catch(j){Tt(n,n.return,j)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function eE(n,s,a){_e=n,lg(n)}function lg(n,s,a){for(var c=(n.mode&1)!==0;_e!==null;){var f=_e,g=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Su;if(!w){var A=f.alternate,j=A!==null&&A.memoizedState!==null||sn;A=Su;var $=sn;if(Su=w,(sn=j)&&!$)for(_e=f;_e!==null;)w=_e,j=w.child,w.tag===22&&w.memoizedState!==null?dg(f):j!==null?(j.return=w,_e=j):dg(f);for(;g!==null;)_e=g,lg(g),g=g.sibling;_e=f,Su=A,sn=$}ug(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,_e=g):ug(n)}}function ug(n){for(;_e!==null;){var s=_e;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:sn||Cu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!sn)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:pr(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&cm(s,g,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}cm(s,w,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var ne=$.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&cr(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}sn||s.flags&512&&oh(s)}catch(te){Tt(s,s.return,te)}}if(s===n){_e=null;break}if(a=s.sibling,a!==null){a.return=s.return,_e=a;break}_e=s.return}}function cg(n){for(;_e!==null;){var s=_e;if(s===n){_e=null;break}var a=s.sibling;if(a!==null){a.return=s.return,_e=a;break}_e=s.return}}function dg(n){for(;_e!==null;){var s=_e;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Cu(4,s)}catch(j){Tt(s,a,j)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(j){Tt(s,f,j)}}var g=s.return;try{oh(s)}catch(j){Tt(s,g,j)}break;case 5:var w=s.return;try{oh(s)}catch(j){Tt(s,w,j)}}}catch(j){Tt(s,s.return,j)}if(s===n){_e=null;break}var A=s.sibling;if(A!==null){A.return=s.return,_e=A;break}_e=s.return}}var tE=Math.ceil,Ru=K.ReactCurrentDispatcher,uh=K.ReactCurrentOwner,Qn=K.ReactCurrentBatchConfig,Je=0,Bt=null,Pt=null,Kt=0,Vn=0,ko=Si(0),Vt=0,Fa=null,As=0,Pu=0,ch=0,Ua=null,In=null,dh=0,bo=1/0,ni=null,Au=!1,hh=null,bi=null,ku=!1,Ni=null,bu=0,za=0,fh=null,Nu=-1,ju=0;function yn(){return(Je&6)!==0?ot():Nu!==-1?Nu:Nu=ot()}function ji(n){return(n.mode&1)===0?1:(Je&2)!==0&&Kt!==0?Kt&-Kt:Mw.transition!==null?(ju===0&&(ju=ys()),ju):(n=Ge,n!==0||(n=window.event,n=n===void 0?16:ma(n.type)),n)}function yr(n,s,a,c){if(50<za)throw za=0,fh=null,Error(t(185));yi(n,a,c),((Je&2)===0||n!==Bt)&&(n===Bt&&((Je&2)===0&&(Pu|=a),Vt===4&&Di(n,Kt)),Sn(n,c),a===1&&Je===0&&(s.mode&1)===0&&(bo=ot()+500,au&&Ri()))}function Sn(n,s){var a=n.callbackNode;Wr(n,s);var c=gs(n,n===Bt?Kt:0);if(c===0)a!==null&&ca(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&ca(a),s===1)n.tag===0?Lw(fg.bind(null,n)):Xp(fg.bind(null,n)),jw(function(){(Je&6)===0&&Ri()}),a=null;else{switch(_i(c)){case 1:a=ps;break;case 4:a=pi;break;case 16:a=Bn;break;case 536870912:a=jl;break;default:a=Bn}a=Eg(a,hg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function hg(n,s){if(Nu=-1,ju=0,(Je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(No()&&n.callbackNode!==a)return null;var c=gs(n,n===Bt?Kt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Du(n,c);else{s=c;var f=Je;Je|=2;var g=mg();(Bt!==n||Kt!==s)&&(ni=null,bo=ot()+500,bs(n,s));do try{iE();break}catch(A){pg(n,A)}while(!0);bd(),Ru.current=g,Je=f,Pt!==null?s=0:(Bt=null,Kt=0,s=Vt)}if(s!==0){if(s===2&&(f=kn(n),f!==0&&(c=f,s=ph(n,f))),s===1)throw a=Fa,bs(n,0),Di(n,c),Sn(n,ot()),a;if(s===6)Di(n,c);else{if(f=n.current.alternate,(c&30)===0&&!nE(f)&&(s=Du(n,c),s===2&&(g=kn(n),g!==0&&(c=g,s=ph(n,g))),s===1))throw a=Fa,bs(n,0),Di(n,c),Sn(n,ot()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Ns(n,In,ni);break;case 3:if(Di(n,c),(c&130023424)===c&&(s=dh+500-ot(),10<s)){if(gs(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){yn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=wd(Ns.bind(null,n,In,ni),s);break}Ns(n,In,ni);break;case 4:if(Di(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var w=31-pn(c);g=1<<w,w=s[w],w>f&&(f=w),c&=~g}if(c=f,c=ot()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*tE(c/1960))-c,10<c){n.timeoutHandle=wd(Ns.bind(null,n,In,ni),c);break}Ns(n,In,ni);break;case 5:Ns(n,In,ni);break;default:throw Error(t(329))}}}return Sn(n,ot()),n.callbackNode===a?hg.bind(null,n):null}function ph(n,s){var a=Ua;return n.current.memoizedState.isDehydrated&&(bs(n,s).flags|=256),n=Du(n,s),n!==2&&(s=In,In=a,s!==null&&mh(s)),n}function mh(n){In===null?In=n:In.push.apply(In,n)}function nE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!hr(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Di(n,s){for(s&=~ch,s&=~Pu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-pn(s),c=1<<a;n[a]=-1,s&=~c}}function fg(n){if((Je&6)!==0)throw Error(t(327));No();var s=gs(n,0);if((s&1)===0)return Sn(n,ot()),null;var a=Du(n,s);if(n.tag!==0&&a===2){var c=kn(n);c!==0&&(s=c,a=ph(n,c))}if(a===1)throw a=Fa,bs(n,0),Di(n,s),Sn(n,ot()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Ns(n,In,ni),Sn(n,ot()),null}function gh(n,s){var a=Je;Je|=1;try{return n(s)}finally{Je=a,Je===0&&(bo=ot()+500,au&&Ri())}}function ks(n){Ni!==null&&Ni.tag===0&&(Je&6)===0&&No();var s=Je;Je|=1;var a=Qn.transition,c=Ge;try{if(Qn.transition=null,Ge=1,n)return n()}finally{Ge=c,Qn.transition=a,Je=s,(Je&6)===0&&Ri()}}function yh(){Vn=ko.current,dt(ko)}function bs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Nw(a)),Pt!==null)for(a=Pt.return;a!==null;){var c=a;switch(Cd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&su();break;case 3:Ro(),dt(En),dt(tn),Fd();break;case 5:Ld(c);break;case 4:Ro();break;case 13:dt(vt);break;case 19:dt(vt);break;case 10:Nd(c.type._context);break;case 22:case 23:yh()}a=a.return}if(Bt=n,Pt=n=Vi(n.current,null),Kt=Vn=s,Vt=0,Fa=null,ch=Pu=As=0,In=Ua=null,Cs!==null){for(s=0;s<Cs.length;s++)if(a=Cs[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,c.next=w}a.pending=c}Cs=null}return n}function pg(n,s){do{var a=Pt;try{if(bd(),yu.current=Eu,vu){for(var c=_t.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}vu=!1}if(Ps=0,zt=Dt=_t=null,ja=!1,Da=0,uh.current=null,a===null||a.return===null){Vt=1,Fa=s,Pt=null;break}e:{var g=n,w=a.return,A=a,j=s;if(s=Kt,A.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var $=j,ne=A,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ye=Fm(w);if(ye!==null){ye.flags&=-257,Um(ye,w,A,g,s),ye.mode&1&&Mm(g,$,s),s=ye,j=$;var Ee=s.updateQueue;if(Ee===null){var xe=new Set;xe.add(j),s.updateQueue=xe}else Ee.add(j);break e}else{if((s&1)===0){Mm(g,$,s),vh();break e}j=Error(t(426))}}else if(yt&&A.mode&1){var It=Fm(w);if(It!==null){(It.flags&65536)===0&&(It.flags|=256),Um(It,w,A,g,s),Ad(Po(j,A));break e}}g=j=Po(j,A),Vt!==4&&(Vt=2),Ua===null?Ua=[g]:Ua.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var U=Om(g,j,s);um(g,U);break e;case 1:A=j;var V=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(bi===null||!bi.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var se=Lm(g,A,s);um(g,se);break e}}g=g.return}while(g!==null)}yg(a)}catch(Ce){s=Ce,Pt===a&&a!==null&&(Pt=a=a.return);continue}break}while(!0)}function mg(){var n=Ru.current;return Ru.current=Eu,n===null?Eu:n}function vh(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Bt===null||(As&268435455)===0&&(Pu&268435455)===0||Di(Bt,Kt)}function Du(n,s){var a=Je;Je|=2;var c=mg();(Bt!==n||Kt!==s)&&(ni=null,bs(n,s));do try{rE();break}catch(f){pg(n,f)}while(!0);if(bd(),Je=a,Ru.current=c,Pt!==null)throw Error(t(261));return Bt=null,Kt=0,Vt}function rE(){for(;Pt!==null;)gg(Pt)}function iE(){for(;Pt!==null&&!bl();)gg(Pt)}function gg(n){var s=wg(n.alternate,n,Vn);n.memoizedProps=n.pendingProps,s===null?yg(n):Pt=s,uh.current=null}function yg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Yw(a,s,Vn),a!==null){Pt=a;return}}else{if(a=Jw(a,s),a!==null){a.flags&=32767,Pt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Vt=6,Pt=null;return}}if(s=s.sibling,s!==null){Pt=s;return}Pt=s=n}while(s!==null);Vt===0&&(Vt=5)}function Ns(n,s,a){var c=Ge,f=Qn.transition;try{Qn.transition=null,Ge=1,sE(n,s,a,c)}finally{Qn.transition=f,Ge=c}return null}function sE(n,s,a,c){do No();while(Ni!==null);if((Je&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(it(n,g),n===Bt&&(Pt=Bt=null,Kt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ku||(ku=!0,Eg(Bn,function(){return No(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Qn.transition,Qn.transition=null;var w=Ge;Ge=1;var A=Je;Je|=4,uh.current=null,Zw(n,a),ag(a,n),Sw(vd),Ei=!!yd,vd=yd=null,n.current=a,eE(a),td(),Je=A,Ge=w,Qn.transition=g}else n.current=a;if(ku&&(ku=!1,Ni=n,bu=f),g=n.pendingLanes,g===0&&(bi=null),Dl(a.stateNode),Sn(n,ot()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Au)throw Au=!1,n=hh,hh=null,n;return(bu&1)!==0&&n.tag!==0&&No(),g=n.pendingLanes,(g&1)!==0?n===fh?za++:(za=0,fh=n):za=0,Ri(),null}function No(){if(Ni!==null){var n=_i(bu),s=Qn.transition,a=Ge;try{if(Qn.transition=null,Ge=16>n?16:n,Ni===null)var c=!1;else{if(n=Ni,Ni=null,bu=0,(Je&6)!==0)throw Error(t(331));var f=Je;for(Je|=4,_e=n.current;_e!==null;){var g=_e,w=g.child;if((_e.flags&16)!==0){var A=g.deletions;if(A!==null){for(var j=0;j<A.length;j++){var $=A[j];for(_e=$;_e!==null;){var ne=_e;switch(ne.tag){case 0:case 11:case 15:Ma(8,ne,g)}var re=ne.child;if(re!==null)re.return=ne,_e=re;else for(;_e!==null;){ne=_e;var te=ne.sibling,ye=ne.return;if(ng(ne),ne===$){_e=null;break}if(te!==null){te.return=ye,_e=te;break}_e=ye}}}var Ee=g.alternate;if(Ee!==null){var xe=Ee.child;if(xe!==null){Ee.child=null;do{var It=xe.sibling;xe.sibling=null,xe=It}while(xe!==null)}}_e=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,_e=w;else e:for(;_e!==null;){if(g=_e,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ma(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,_e=U;break e}_e=g.return}}var V=n.current;for(_e=V;_e!==null;){w=_e;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,_e=B;else e:for(w=V;_e!==null;){if(A=_e,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Cu(9,A)}}catch(Ce){Tt(A,A.return,Ce)}if(A===w){_e=null;break e}var se=A.sibling;if(se!==null){se.return=A.return,_e=se;break e}_e=A.return}}if(Je=f,Ri(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(ms,n)}catch{}c=!0}return c}finally{Ge=a,Qn.transition=s}}return!1}function vg(n,s,a){s=Po(a,s),s=Om(n,s,1),n=Ai(n,s,1),s=yn(),n!==null&&(yi(n,1,s),Sn(n,s))}function Tt(n,s,a){if(n.tag===3)vg(n,n,a);else for(;s!==null;){if(s.tag===3){vg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(bi===null||!bi.has(c))){n=Po(a,n),n=Lm(s,n,1),s=Ai(s,n,1),n=yn(),s!==null&&(yi(s,1,n),Sn(s,n));break}}s=s.return}}function oE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=yn(),n.pingedLanes|=n.suspendedLanes&a,Bt===n&&(Kt&a)===a&&(Vt===4||Vt===3&&(Kt&130023424)===Kt&&500>ot()-dh?bs(n,0):ch|=a),Sn(n,s)}function _g(n,s){s===0&&((n.mode&1)===0?s=1:(s=eo,eo<<=1,(eo&130023424)===0&&(eo=4194304)));var a=yn();n=Zr(n,s),n!==null&&(yi(n,s,a),Sn(n,a))}function aE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),_g(n,a)}function lE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),_g(n,a)}var wg;wg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||En.current)xn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return xn=!1,Qw(n,s,a);xn=(n.flags&131072)!==0}else xn=!1,yt&&(s.flags&1048576)!==0&&Zp(s,uu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Iu(n,s),n=s.pendingProps;var f=wo(s,tn.current);Co(s,a),f=Bd(null,s,c,n,f,a);var g=$d();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Tn(c)?(g=!0,ou(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Vd(s),f.updater=Tu,s.stateNode=f,f._reactInternals=s,Qd(s,c,n,a),s=Zd(null,s,c,!0,g,a)):(s.tag=0,yt&&g&&Sd(s),gn(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Iu(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=cE(c),n=pr(c,n),f){case 0:s=Xd(null,s,c,n,a);break e;case 1:s=qm(null,s,c,n,a);break e;case 11:s=zm(null,s,c,n,a);break e;case 14:s=Bm(null,s,c,pr(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:pr(c,f),Xd(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:pr(c,f),qm(n,s,c,f,a);case 3:e:{if(Gm(s),n===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,lm(n,s),mu(s,c,null,a);var w=s.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Po(Error(t(423)),s),s=Km(n,s,c,a,f);break e}else if(c!==f){f=Po(Error(t(424)),s),s=Km(n,s,c,a,f);break e}else for(Dn=Ii(s.stateNode.containerInfo.firstChild),jn=s,yt=!0,fr=null,a=om(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(xo(),c===f){s=ti(n,s,a);break e}gn(n,s,c,a)}s=s.child}return s;case 5:return dm(s),n===null&&Pd(s),c=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,w=f.children,_d(c,f)?w=null:g!==null&&_d(c,g)&&(s.flags|=32),Hm(n,s),gn(n,s,w,a),s.child;case 6:return n===null&&Pd(s),null;case 13:return Qm(n,s,a);case 4:return Od(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Io(s,null,c,a):gn(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:pr(c,f),zm(n,s,c,f,a);case 7:return gn(n,s,s.pendingProps,a),s.child;case 8:return gn(n,s,s.pendingProps.children,a),s.child;case 12:return gn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,at(hu,c._currentValue),c._currentValue=w,g!==null)if(hr(g.value,w)){if(g.children===f.children&&!En.current){s=ti(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var A=g.dependencies;if(A!==null){w=g.child;for(var j=A.firstContext;j!==null;){if(j.context===c){if(g.tag===1){j=ei(-1,a&-a),j.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var ne=$.pending;ne===null?j.next=j:(j.next=ne.next,ne.next=j),$.pending=j}}g.lanes|=a,j=g.alternate,j!==null&&(j.lanes|=a),jd(g.return,a,s),A.lanes|=a;break}j=j.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),jd(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}gn(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,Co(s,a),f=Gn(f),c=c(f),s.flags|=1,gn(n,s,c,a),s.child;case 14:return c=s.type,f=pr(c,s.pendingProps),f=pr(c.type,f),Bm(n,s,c,f,a);case 15:return $m(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:pr(c,f),Iu(n,s),s.tag=1,Tn(c)?(n=!0,ou(s)):n=!1,Co(s,a),Dm(s,c,f),Qd(s,c,f,a),Zd(null,s,c,!0,n,a);case 19:return Jm(n,s,a);case 22:return Wm(n,s,a)}throw Error(t(156,s.tag))};function Eg(n,s){return Xs(n,s)}function uE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(n,s,a,c){return new uE(n,s,a,c)}function _h(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cE(n){if(typeof n=="function")return _h(n)?1:0;if(n!=null){if(n=n.$$typeof,n===b)return 11;if(n===je)return 14}return 2}function Vi(n,s){var a=n.alternate;return a===null?(a=Yn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vu(n,s,a,c,f,g){var w=2;if(c=n,typeof n=="function")_h(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case N:return js(a.children,f,g,s);case S:w=8,f|=8;break;case P:return n=Yn(12,a,s,f|2),n.elementType=P,n.lanes=g,n;case T:return n=Yn(13,a,s,f),n.elementType=T,n.lanes=g,n;case le:return n=Yn(19,a,s,f),n.elementType=le,n.lanes=g,n;case Le:return Ou(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:w=10;break e;case D:w=9;break e;case b:w=11;break e;case je:w=14;break e;case Ye:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Yn(w,a,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function js(n,s,a,c){return n=Yn(7,n,c,s),n.lanes=a,n}function Ou(n,s,a,c){return n=Yn(22,n,c,s),n.elementType=Le,n.lanes=a,n.stateNode={isHidden:!1},n}function wh(n,s,a){return n=Yn(6,n,null,s),n.lanes=a,n}function Eh(n,s,a){return s=Yn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function dE(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gi(0),this.expirationTimes=gi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Th(n,s,a,c,f,g,w,A,j){return n=new dE(n,s,a,A,j),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Yn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vd(g),n}function hE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Tg(n){if(!n)return Ci;n=n._reactInternals;e:{if(sr(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Tn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Tn(a))return Yp(n,a,s)}return s}function xg(n,s,a,c,f,g,w,A,j){return n=Th(a,c,!0,n,f,g,w,A,j),n.context=Tg(null),a=n.current,c=yn(),f=ji(a),g=ei(c,f),g.callback=s??null,Ai(a,g,f),n.current.lanes=f,yi(n,f,c),Sn(n,c),n}function Lu(n,s,a,c){var f=s.current,g=yn(),w=ji(f);return a=Tg(a),s.context===null?s.context=a:s.pendingContext=a,s=ei(g,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Ai(f,s,w),n!==null&&(yr(n,f,w,g),pu(n,f,w)),w}function Mu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ig(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function xh(n,s){Ig(n,s),(n=n.alternate)&&Ig(n,s)}function fE(){return null}var Sg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ih(n){this._internalRoot=n}Fu.prototype.render=Ih.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Lu(n,s,null,null)},Fu.prototype.unmount=Ih.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ks(function(){Lu(null,n,null,null)}),s[Qr]=null}};function Fu(n){this._internalRoot=n}Fu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Fl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Ir.length&&s!==0&&s<Ir[a].priority;a++);Ir.splice(a,0,n),a===0&&Bl(n)}};function Sh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Cg(){}function pE(n,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var $=Mu(w);g.call($)}}var w=xg(s,c,n,0,null,!1,!1,"",Cg);return n._reactRootContainer=w,n[Qr]=w.current,Sa(n.nodeType===8?n.parentNode:n),ks(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var A=c;c=function(){var $=Mu(j);A.call($)}}var j=Th(n,0,!1,null,null,!1,!1,"",Cg);return n._reactRootContainer=j,n[Qr]=j.current,Sa(n.nodeType===8?n.parentNode:n),ks(function(){Lu(s,j,a,c)}),j}function zu(n,s,a,c,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var A=f;f=function(){var j=Mu(w);A.call(j)}}Lu(s,w,n,f)}else w=pE(a,s,n,f,c);return Mu(w)}Ll=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=mi(s.pendingLanes);a!==0&&(vi(s,a|1),Sn(s,ot()),(Je&6)===0&&(bo=ot()+500,Ri()))}break;case 13:ks(function(){var c=Zr(n,1);if(c!==null){var f=yn();yr(c,n,1,f)}}),xh(n,1)}},to=function(n){if(n.tag===13){var s=Zr(n,134217728);if(s!==null){var a=yn();yr(s,n,134217728,a)}xh(n,134217728)}},Ml=function(n){if(n.tag===13){var s=ji(n),a=Zr(n,s);if(a!==null){var c=yn();yr(a,n,s,c)}xh(n,s)}},Fl=function(){return Ge},Ul=function(n,s){var a=Ge;try{return Ge=n,s()}finally{Ge=a}},Mn=function(n,s,a){switch(s){case"input":if(tt(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=iu(c);if(!f)throw Error(t(90));Zt(c),tt(c,f)}}}break;case"textarea":X(n,a);break;case"select":s=a.value,s!=null&&vn(n,!!a.multiple,s,!1)}},st=gh,zn=ks;var mE={usingClientEntryPoint:!1,Events:[Pa,vo,iu,Un,cs,gh]},Ba={findFiberByHostInstance:Ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gE={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ua(n),n===null?null:n.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||fE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{ms=Bu.inject(gE),An=Bu}catch{}}return Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mE,Cn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sh(s))throw Error(t(200));return hE(n,s,null,a)},Cn.createRoot=function(n,s){if(!Sh(n))throw Error(t(299));var a=!1,c="",f=Sg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Th(n,1,!1,null,null,a,!1,c,f),n[Qr]=s.current,Sa(n.nodeType===8?n.parentNode:n),new Ih(s)},Cn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ua(s),n=n===null?null:n.stateNode,n},Cn.flushSync=function(n){return ks(n)},Cn.hydrate=function(n,s,a){if(!Uu(s))throw Error(t(200));return zu(null,n,s,!0,a)},Cn.hydrateRoot=function(n,s,a){if(!Sh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",w=Sg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=xg(s,null,n,1,a??null,f,!1,g,w),n[Qr]=s.current,Sa(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Fu(s)},Cn.render=function(n,s,a){if(!Uu(s))throw Error(t(200));return zu(null,n,s,!1,a)},Cn.unmountComponentAtNode=function(n){if(!Uu(n))throw Error(t(40));return n._reactRootContainer?(ks(function(){zu(null,null,n,!1,function(){n._reactRootContainer=null,n[Qr]=null})}),!0):!1},Cn.unstable_batchedUpdates=gh,Cn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Uu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return zu(n,s,a,!1,c)},Cn.version="18.3.1-next-f1338f8080-20240426",Cn}var Dg;function Cv(){if(Dg)return Ph.exports;Dg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ph.exports=SE(),Ph.exports}var Vg;function CE(){if(Vg)return $u;Vg=1;var r=Cv();return $u.createRoot=r.createRoot,$u.hydrateRoot=r.hydrateRoot,$u}var RE=CE();const PE=Iv(RE);Cv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ol.apply(this,arguments)}var zi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(zi||(zi={}));const Og="popstate";function AE(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:d,hash:p}=i.location;return Hh("",{pathname:l,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:uc(o)}return bE(e,t,null,r)}function Ct(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function xf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kE(){return Math.random().toString(36).substr(2,8)}function Lg(r,e){return{usr:r.state,key:r.key,idx:e}}function Hh(r,e,t,i){return t===void 0&&(t=null),ol({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Jo(e):e,{state:t,key:e&&e.key||i||kE()})}function uc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Jo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function bE(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,p=zi.Pop,y=null,v=E();v==null&&(v=0,d.replaceState(ol({},d.state,{idx:v}),""));function E(){return(d.state||{idx:null}).idx}function I(){p=zi.Pop;let O=E(),ae=O==null?null:O-v;v=O,y&&y({action:p,location:Y.location,delta:ae})}function R(O,ae){p=zi.Push;let oe=Hh(Y.location,O,ae);v=E()+1;let ue=Lg(oe,v),K=Y.createHref(oe);try{d.pushState(ue,"",K)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;o.location.assign(K)}l&&y&&y({action:p,location:Y.location,delta:1})}function z(O,ae){p=zi.Replace;let oe=Hh(Y.location,O,ae);v=E();let ue=Lg(oe,v),K=Y.createHref(oe);d.replaceState(ue,"",K),l&&y&&y({action:p,location:Y.location,delta:0})}function W(O){let ae=o.location.origin!=="null"?o.location.origin:o.location.href,oe=typeof O=="string"?O:uc(O);return oe=oe.replace(/ $/,"%20"),Ct(ae,"No window.location.(origin|href) available to create URL for href: "+oe),new URL(oe,ae)}let Y={get action(){return p},get location(){return r(o,d)},listen(O){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(Og,I),y=O,()=>{o.removeEventListener(Og,I),y=null}},createHref(O){return e(o,O)},createURL:W,encodeLocation(O){let ae=W(O);return{pathname:ae.pathname,search:ae.search,hash:ae.hash}},push:R,replace:z,go(O){return d.go(O)}};return Y}var Mg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Mg||(Mg={}));function NE(r,e,t){return t===void 0&&(t="/"),jE(r,e,t)}function jE(r,e,t,i){let o=typeof e=="string"?Jo(e):e,l=If(o.pathname||"/",t);if(l==null)return null;let d=Rv(r);DE(d);let p=null;for(let y=0;p==null&&y<d.length;++y){let v=qE(l);p=$E(d[y],v)}return p}function Rv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,d,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};y.relativePath.startsWith("/")&&(Ct(y.relativePath.startsWith(i),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(i.length));let v=$i([i,y.relativePath]),E=t.concat(y);l.children&&l.children.length>0&&(Ct(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Rv(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:zE(v,l.index),routesMeta:E})};return r.forEach((l,d)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,d);else for(let y of Pv(l.path))o(l,d,y)}),e}function Pv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=Pv(i.join("/")),p=[];return p.push(...d.map(y=>y===""?l:[l,y].join("/"))),o&&p.push(...d),p.map(y=>r.startsWith("/")&&y===""?"/":y)}function DE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:BE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const VE=/^:[\w-]+$/,OE=3,LE=2,ME=1,FE=10,UE=-2,Fg=r=>r==="*";function zE(r,e){let t=r.split("/"),i=t.length;return t.some(Fg)&&(i+=UE),e&&(i+=LE),t.filter(o=>!Fg(o)).reduce((o,l)=>o+(VE.test(l)?OE:l===""?ME:FE),i)}function BE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function $E(r,e,t){let{routesMeta:i}=r,o={},l="/",d=[];for(let p=0;p<i.length;++p){let y=i[p],v=p===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",I=WE({path:y.relativePath,caseSensitive:y.caseSensitive,end:v},E),R=y.route;if(!I)return null;Object.assign(o,I.params),d.push({params:o,pathname:$i([l,I.pathname]),pathnameBase:JE($i([l,I.pathnameBase])),route:R}),I.pathnameBase!=="/"&&(l=$i([l,I.pathnameBase]))}return d}function WE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=HE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((v,E,I)=>{let{paramName:R,isOptional:z}=E;if(R==="*"){let Y=p[I]||"";d=l.slice(0,l.length-Y.length).replace(/(.)\/+$/,"$1")}const W=p[I];return z&&!W?v[R]=void 0:v[R]=(W||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function HE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),xf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,y)=>(i.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function qE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function If(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const GE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KE=r=>GE.test(r);function QE(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?Jo(r):r,l;if(t)if(KE(t))l=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),xf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+t))}t.startsWith("/")?l=Ug(t.substring(1),"/"):l=Ug(t,e)}else l=e;return{pathname:l,search:XE(i),hash:ZE(o)}}function Ug(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function bh(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Sf(r,e){let t=YE(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Cf(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=Jo(r):(o=ol({},r),Ct(!o.pathname||!o.pathname.includes("?"),bh("?","pathname","search",o)),Ct(!o.pathname||!o.pathname.includes("#"),bh("#","pathname","hash",o)),Ct(!o.search||!o.search.includes("#"),bh("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,p;if(d==null)p=t;else{let I=e.length-1;if(!i&&d.startsWith("..")){let R=d.split("/");for(;R[0]==="..";)R.shift(),I-=1;o.pathname=R.join("/")}p=I>=0?e[I]:"/"}let y=QE(o,p),v=d&&d!=="/"&&d.endsWith("/"),E=(l||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(v||E)&&(y.pathname+="/"),y}const $i=r=>r.join("/").replace(/\/\/+/g,"/"),JE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),XE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ZE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function eT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Av=["post","put","patch","delete"];new Set(Av);const tT=["get",...Av];new Set(tT);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},al.apply(this,arguments)}const Rf=H.createContext(null),nT=H.createContext(null),rs=H.createContext(null),kc=H.createContext(null),is=H.createContext({outlet:null,matches:[],isDataRoute:!1}),kv=H.createContext(null);function rT(r,e){let{relative:t}=e===void 0?{}:e;Xo()||Ct(!1);let{basename:i,navigator:o}=H.useContext(rs),{hash:l,pathname:d,search:p}=Nv(r,{relative:t}),y=d;return i!=="/"&&(y=d==="/"?i:$i([i,d])),o.createHref({pathname:y,search:p,hash:l})}function Xo(){return H.useContext(kc)!=null}function yl(){return Xo()||Ct(!1),H.useContext(kc).location}function bv(r){H.useContext(rs).static||H.useLayoutEffect(r)}function bc(){let{isDataRoute:r}=H.useContext(is);return r?gT():iT()}function iT(){Xo()||Ct(!1);let r=H.useContext(Rf),{basename:e,future:t,navigator:i}=H.useContext(rs),{matches:o}=H.useContext(is),{pathname:l}=yl(),d=JSON.stringify(Sf(o,t.v7_relativeSplatPath)),p=H.useRef(!1);return bv(()=>{p.current=!0}),H.useCallback(function(v,E){if(E===void 0&&(E={}),!p.current)return;if(typeof v=="number"){i.go(v);return}let I=Cf(v,JSON.parse(d),l,E.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:$i([e,I.pathname])),(E.replace?i.replace:i.push)(I,E.state,E)},[e,i,d,l,r])}function Nv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=H.useContext(rs),{matches:o}=H.useContext(is),{pathname:l}=yl(),d=JSON.stringify(Sf(o,i.v7_relativeSplatPath));return H.useMemo(()=>Cf(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function sT(r,e){return oT(r,e)}function oT(r,e,t,i){Xo()||Ct(!1);let{navigator:o}=H.useContext(rs),{matches:l}=H.useContext(is),d=l[l.length-1],p=d?d.params:{};d&&d.pathname;let y=d?d.pathnameBase:"/";d&&d.route;let v=yl(),E;if(e){var I;let O=typeof e=="string"?Jo(e):e;y==="/"||(I=O.pathname)!=null&&I.startsWith(y)||Ct(!1),E=O}else E=v;let R=E.pathname||"/",z=R;if(y!=="/"){let O=y.replace(/^\//,"").split("/");z="/"+R.replace(/^\//,"").split("/").slice(O.length).join("/")}let W=NE(r,{pathname:z}),Y=dT(W&&W.map(O=>Object.assign({},O,{params:Object.assign({},p,O.params),pathname:$i([y,o.encodeLocation?o.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?y:$i([y,o.encodeLocation?o.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),l,t,i);return e&&Y?H.createElement(kc.Provider,{value:{location:al({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:zi.Pop}},Y):Y}function aT(){let r=mT(),e=eT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:o},t):null,null)}const lT=H.createElement(aT,null);class uT extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(is.Provider,{value:this.props.routeContext},H.createElement(kv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cT(r){let{routeContext:e,match:t,children:i}=r,o=H.useContext(Rf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(is.Provider,{value:e},i)}function dT(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let E=d.findIndex(I=>I.route.id&&(p==null?void 0:p[I.route.id])!==void 0);E>=0||Ct(!1),d=d.slice(0,Math.min(d.length,E+1))}let y=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<d.length;E++){let I=d[E];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(v=E),I.route.id){let{loaderData:R,errors:z}=t,W=I.route.loader&&R[I.route.id]===void 0&&(!z||z[I.route.id]===void 0);if(I.route.lazy||W){y=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((E,I,R)=>{let z,W=!1,Y=null,O=null;t&&(z=p&&I.route.id?p[I.route.id]:void 0,Y=I.route.errorElement||lT,y&&(v<0&&R===0?(yT("route-fallback"),W=!0,O=null):v===R&&(W=!0,O=I.route.hydrateFallbackElement||null)));let ae=e.concat(d.slice(0,R+1)),oe=()=>{let ue;return z?ue=Y:W?ue=O:I.route.Component?ue=H.createElement(I.route.Component,null):I.route.element?ue=I.route.element:ue=E,H.createElement(cT,{match:I,routeContext:{outlet:E,matches:ae,isDataRoute:t!=null},children:ue})};return t&&(I.route.ErrorBoundary||I.route.errorElement||R===0)?H.createElement(uT,{location:t.location,revalidation:t.revalidation,component:Y,error:z,children:oe(),routeContext:{outlet:null,matches:ae,isDataRoute:!0}}):oe()},null)}var jv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(jv||{}),Dv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Dv||{});function hT(r){let e=H.useContext(Rf);return e||Ct(!1),e}function fT(r){let e=H.useContext(nT);return e||Ct(!1),e}function pT(r){let e=H.useContext(is);return e||Ct(!1),e}function Vv(r){let e=pT(),t=e.matches[e.matches.length-1];return t.route.id||Ct(!1),t.route.id}function mT(){var r;let e=H.useContext(kv),t=fT(),i=Vv();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function gT(){let{router:r}=hT(jv.UseNavigateStable),e=Vv(Dv.UseNavigateStable),t=H.useRef(!1);return bv(()=>{t.current=!0}),H.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,al({fromRouteId:e},l)))},[r,e])}const zg={};function yT(r,e,t){zg[r]||(zg[r]=!0)}function vT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function _T(r){let{to:e,replace:t,state:i,relative:o}=r;Xo()||Ct(!1);let{future:l,static:d}=H.useContext(rs),{matches:p}=H.useContext(is),{pathname:y}=yl(),v=bc(),E=Cf(e,Sf(p,l.v7_relativeSplatPath),y,o==="path"),I=JSON.stringify(E);return H.useEffect(()=>v(JSON.parse(I),{replace:t,state:i,relative:o}),[v,I,o,t,i]),null}function ri(r){Ct(!1)}function wT(r){let{basename:e="/",children:t=null,location:i,navigationType:o=zi.Pop,navigator:l,static:d=!1,future:p}=r;Xo()&&Ct(!1);let y=e.replace(/^\/*/,"/"),v=H.useMemo(()=>({basename:y,navigator:l,static:d,future:al({v7_relativeSplatPath:!1},p)}),[y,p,l,d]);typeof i=="string"&&(i=Jo(i));let{pathname:E="/",search:I="",hash:R="",state:z=null,key:W="default"}=i,Y=H.useMemo(()=>{let O=If(E,y);return O==null?null:{location:{pathname:O,search:I,hash:R,state:z,key:W},navigationType:o}},[y,E,I,R,z,W,o]);return Y==null?null:H.createElement(rs.Provider,{value:v},H.createElement(kc.Provider,{children:t,value:Y}))}function ET(r){let{children:e,location:t}=r;return sT(qh(e),t)}new Promise(()=>{});function qh(r,e){e===void 0&&(e=[]);let t=[];return H.Children.forEach(r,(i,o)=>{if(!H.isValidElement(i))return;let l=[...e,o];if(i.type===H.Fragment){t.push.apply(t,qh(i.props.children,l));return}i.type!==ri&&Ct(!1),!i.props.index||!i.props.children||Ct(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=qh(i.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gh(){return Gh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Gh.apply(this,arguments)}function TT(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function xT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function IT(r,e){return r.button===0&&(!e||e==="_self")&&!xT(r)}const ST=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CT="6";try{window.__reactRouterVersion=CT}catch{}const RT="startTransition",Bg=TE[RT];function PT(r){let{basename:e,children:t,future:i,window:o}=r,l=H.useRef();l.current==null&&(l.current=AE({window:o,v5Compat:!0}));let d=l.current,[p,y]=H.useState({action:d.action,location:d.location}),{v7_startTransition:v}=i||{},E=H.useCallback(I=>{v&&Bg?Bg(()=>y(I)):y(I)},[y,v]);return H.useLayoutEffect(()=>d.listen(E),[d,E]),H.useEffect(()=>vT(i),[i]),H.createElement(wT,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:d,future:i})}const AT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wa=H.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:p,target:y,to:v,preventScrollReset:E,viewTransition:I}=e,R=TT(e,ST),{basename:z}=H.useContext(rs),W,Y=!1;if(typeof v=="string"&&kT.test(v)&&(W=v,AT))try{let ue=new URL(window.location.href),K=v.startsWith("//")?new URL(ue.protocol+v):new URL(v),fe=If(K.pathname,z);K.origin===ue.origin&&fe!=null?v=fe+K.search+K.hash:Y=!0}catch{}let O=rT(v,{relative:o}),ae=bT(v,{replace:d,state:p,target:y,preventScrollReset:E,relative:o,viewTransition:I});function oe(ue){i&&i(ue),ue.defaultPrevented||ae(ue)}return H.createElement("a",Gh({},R,{href:W||O,onClick:Y||l?i:oe,ref:t,target:y}))});var $g;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})($g||($g={}));var Wg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Wg||(Wg={}));function bT(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:p}=e===void 0?{}:e,y=bc(),v=yl(),E=Nv(r,{relative:d});return H.useCallback(I=>{if(IT(I,t)){I.preventDefault();let R=i!==void 0?i:uc(v)===uc(E);y(r,{replace:R,state:o,preventScrollReset:l,relative:d,viewTransition:p})}},[v,y,E,i,o,t,r,l,d,p])}const NT=()=>{};var Hg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},jT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],p=r[t++],y=((o&7)<<18|(l&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Lv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,p=d?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,E=l>>2,I=(l&3)<<4|p>>4;let R=(p&15)<<2|v>>6,z=v&63;y||(z=64,d||(R=64)),i.push(t[E],t[I],t[R],t[z])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Ov(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):jT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||I==null)throw new DT;const R=l<<2|p>>4;if(i.push(R),v!==64){const z=p<<4&240|v>>2;if(i.push(z),I!==64){const W=v<<6&192|I;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class DT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VT=function(r){const e=Ov(r);return Lv.encodeByteArray(e,!0)},cc=function(r){return VT(r).replace(/\./g,"")},Mv=function(r){try{return Lv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=()=>OT().__FIREBASE_DEFAULTS__,MT=()=>{if(typeof process>"u"||typeof Hg>"u")return;const r=Hg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},FT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Mv(r[1]);return e&&JSON.parse(e)},Nc=()=>{try{return NT()||LT()||MT()||FT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Fv=r=>{var e,t;return(t=(e=Nc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},UT=r=>{const e=Fv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Uv=()=>{var r;return(r=Nc())===null||r===void 0?void 0:r.config},zv=r=>{var e;return(e=Nc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[cc(JSON.stringify(t)),cc(JSON.stringify(d)),""].join(".")}const el={};function $T(){const r={prod:[],emulator:[]};for(const e of Object.keys(el))el[e]?r.emulator.push(e):r.prod.push(e);return r}function WT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let qg=!1;function $v(r,e){if(typeof window>"u"||typeof document>"u"||!Zo(window.location.host)||el[r]===e||el[r]||qg)return;el[r]=e;function t(R){return`__firebase__banner__${R}`}const i="__firebase__banner",l=$T().prod.length>0;function d(){const R=document.getElementById(i);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function y(R,z){R.setAttribute("width","24"),R.setAttribute("id",z),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function v(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{qg=!0,d()},R}function E(R,z){R.setAttribute("id",z),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function I(){const R=WT(i),z=t("text"),W=document.getElementById(z)||document.createElement("span"),Y=t("learnmore"),O=document.getElementById(Y)||document.createElement("a"),ae=t("preprendIcon"),oe=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const ue=R.element;p(ue),E(O,Y);const K=v();y(oe,ae),ue.append(oe,W,O,K),document.body.appendChild(ue)}l?(W.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function qT(){var r;const e=(r=Nc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function QT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YT(){const r=cn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function JT(){return!qT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XT(){try{return typeof indexedDB=="object"}catch{return!1}}function ZT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="FirebaseError";class hi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ex,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?tx(l,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new hi(o,p,i)}}function tx(r,e){return r.replace(nx,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const nx=/\{\$([^}]+)}/g;function rx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ms(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],d=e[o];if(Gg(l)&&Gg(d)){if(!Ms(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Gg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qa(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ga(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function ix(r,e){const t=new sx(r,e);return t.subscribe.bind(t)}class sx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ox(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Nh),o.error===void 0&&(o.error=Nh),o.complete===void 0&&(o.complete=Nh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ox(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Nh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(r){return r&&r._delegate?r._delegate:r}class Fs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new zT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ux(e))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ds){return this.instances.has(e)}getOptions(e=Ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ds){return this.component?this.component.multipleInstances?e:Ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lx(r){return r===Ds?void 0:r}function ux(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ax(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(He||(He={}));const dx={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},hx=He.INFO,fx={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},px=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=fx[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pf{constructor(e){this.name=e,this._logLevel=hx,this._logHandler=px,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const mx=(r,e)=>e.some(t=>r instanceof t);let Kg,Qg;function gx(){return Kg||(Kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yx(){return Qg||(Qg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wv=new WeakMap,Kh=new WeakMap,Hv=new WeakMap,jh=new WeakMap,Af=new WeakMap;function vx(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(Wi(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Wv.set(t,r)}).catch(()=>{}),Af.set(e,r),e}function _x(r){if(Kh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Kh.set(r,e)}let Qh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Kh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Hv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function wx(r){Qh=r(Qh)}function Ex(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Dh(this),e,...t);return Hv.set(i,e.sort?e.sort():[e]),Wi(i)}:yx().includes(r)?function(...e){return r.apply(Dh(this),e),Wi(Wv.get(this))}:function(...e){return Wi(r.apply(Dh(this),e))}}function Tx(r){return typeof r=="function"?Ex(r):(r instanceof IDBTransaction&&_x(r),mx(r,gx())?new Proxy(r,Qh):r)}function Wi(r){if(r instanceof IDBRequest)return vx(r);if(jh.has(r))return jh.get(r);const e=Tx(r);return e!==r&&(jh.set(r,e),Af.set(e,r)),e}const Dh=r=>Af.get(r);function xx(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),p=Wi(d);return i&&d.addEventListener("upgradeneeded",y=>{i(Wi(d.result),y.oldVersion,y.newVersion,Wi(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),p.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const Ix=["get","getKey","getAll","getAllKeys","count"],Sx=["put","add","delete","clear"],Vh=new Map;function Yg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Sx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Ix.includes(t)))return;const l=async function(d,...p){const y=this.transaction(d,o?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&y.done]))[0]};return Vh.set(e,l),l}wx(r=>({...r,get:(e,t,i)=>Yg(e,t)||r.get(e,t,i),has:(e,t)=>!!Yg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Rx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Rx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yh="@firebase/app",Jg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Pf("@firebase/app"),Px="@firebase/app-compat",Ax="@firebase/analytics-compat",kx="@firebase/analytics",bx="@firebase/app-check-compat",Nx="@firebase/app-check",jx="@firebase/auth",Dx="@firebase/auth-compat",Vx="@firebase/database",Ox="@firebase/data-connect",Lx="@firebase/database-compat",Mx="@firebase/functions",Fx="@firebase/functions-compat",Ux="@firebase/installations",zx="@firebase/installations-compat",Bx="@firebase/messaging",$x="@firebase/messaging-compat",Wx="@firebase/performance",Hx="@firebase/performance-compat",qx="@firebase/remote-config",Gx="@firebase/remote-config-compat",Kx="@firebase/storage",Qx="@firebase/storage-compat",Yx="@firebase/firestore",Jx="@firebase/ai",Xx="@firebase/firestore-compat",Zx="firebase",eI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="[DEFAULT]",tI={[Yh]:"fire-core",[Px]:"fire-core-compat",[kx]:"fire-analytics",[Ax]:"fire-analytics-compat",[Nx]:"fire-app-check",[bx]:"fire-app-check-compat",[jx]:"fire-auth",[Dx]:"fire-auth-compat",[Vx]:"fire-rtdb",[Ox]:"fire-data-connect",[Lx]:"fire-rtdb-compat",[Mx]:"fire-fn",[Fx]:"fire-fn-compat",[Ux]:"fire-iid",[zx]:"fire-iid-compat",[Bx]:"fire-fcm",[$x]:"fire-fcm-compat",[Wx]:"fire-perf",[Hx]:"fire-perf-compat",[qx]:"fire-rc",[Gx]:"fire-rc-compat",[Kx]:"fire-gcs",[Qx]:"fire-gcs-compat",[Yx]:"fire-fst",[Xx]:"fire-fst-compat",[Jx]:"fire-vertex","fire-js":"fire-js",[Zx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Map,nI=new Map,Xh=new Map;function Xg(r,e){try{r.container.addComponent(e)}catch(t){li.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Wo(r){const e=r.name;if(Xh.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,r);for(const t of dc.values())Xg(t,r);for(const t of nI.values())Xg(t,r);return!0}function kf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function On(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hi=new vl("app","Firebase",rI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=eI;function qv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Jh,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Hi.create("bad-app-name",{appName:String(o)});if(t||(t=Uv()),!t)throw Hi.create("no-options");const l=dc.get(o);if(l){if(Ms(t,l.options)&&Ms(i,l.config))return l;throw Hi.create("duplicate-app",{appName:o})}const d=new cx(o);for(const y of Xh.values())d.addComponent(y);const p=new iI(t,i,d);return dc.set(o,p),p}function Gv(r=Jh){const e=dc.get(r);if(!e&&r===Jh&&Uv())return qv();if(!e)throw Hi.create("no-app",{appName:r});return e}function qi(r,e,t){var i;let o=(i=tI[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(p.join(" "));return}Wo(new Fs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firebase-heartbeat-database",oI=1,ll="firebase-heartbeat-store";let Oh=null;function Kv(){return Oh||(Oh=xx(sI,oI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ll)}catch(t){console.warn(t)}}}}).catch(r=>{throw Hi.create("idb-open",{originalErrorMessage:r.message})})),Oh}async function aI(r){try{const t=(await Kv()).transaction(ll),i=await t.objectStore(ll).get(Qv(r));return await t.done,i}catch(e){if(e instanceof hi)li.warn(e.message);else{const t=Hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(t.message)}}}async function Zg(r,e){try{const i=(await Kv()).transaction(ll,"readwrite");await i.objectStore(ll).put(e,Qv(r)),await i.done}catch(t){if(t instanceof hi)li.warn(t.message);else{const i=Hi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});li.warn(i.message)}}}function Qv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=1024,uI=30;class cI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ey();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>uI){const d=fI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){li.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ey(),{heartbeatsToSend:i,unsentEntries:o}=dI(this._heartbeatsCache.heartbeats),l=cc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return li.warn(t),""}}}function ey(){return new Date().toISOString().substring(0,10)}function dI(r,e=lI){const t=[];let i=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),ty(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ty(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class hI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XT()?ZT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Zg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Zg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ty(r){return cc(JSON.stringify({version:2,heartbeats:r})).length}function fI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(r){Wo(new Fs("platform-logger",e=>new Cx(e),"PRIVATE")),Wo(new Fs("heartbeat",e=>new cI(e),"PRIVATE")),qi(Yh,Jg,r),qi(Yh,Jg,"esm2017"),qi("fire-js","")}pI("");var mI="firebase",gI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(mI,gI,"app");function bf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Yv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yI=Yv,Jv=new vl("auth","Firebase",Yv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Pf("@firebase/auth");function vI(r,...e){hc.logLevel<=He.WARN&&hc.warn(`Auth (${ea}): ${r}`,...e)}function Zu(r,...e){hc.logLevel<=He.ERROR&&hc.error(`Auth (${ea}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(r,...e){throw jf(r,...e)}function _r(r,...e){return jf(r,...e)}function Nf(r,e,t){const i=Object.assign(Object.assign({},yI()),{[e]:t});return new vl("auth","Firebase",i).create(e,{appName:r.name})}function oi(r){return Nf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _I(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Zn(r,"argument-error"),Nf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Jv.create(r,...e)}function be(r,e,...t){if(!r)throw jf(e,...t)}function ii(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Zu(e),new Error(e)}function ui(r,e){r||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function wI(){return ny()==="http:"||ny()==="https:"}function ny(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wI()||KT()||"connection"in navigator)?navigator.onLine:!0}function TI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ui(t>e,"Short delay should be less than long delay!"),this.isMobile=HT()||QT()}get(){return EI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(r,e){ui(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SI=new wl(3e4,6e4);function ss(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function os(r,e,t,i,o={}){return Zv(r,o,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const p=_l(Object.assign({key:r.config.apiKey},d)).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:y},l);return GT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Zo(r.emulatorConfig.host)&&(v.credentials="include"),Xv.fetch()(await e_(r,r.config.apiHost,t,p),v)})}async function Zv(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},xI),e);try{const o=new RI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Wu(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const p=l.ok?d.errorMessage:d.error.message,[y,v]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Wu(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw Wu(r,"user-disabled",d);const E=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Nf(r,E,v);Zn(r,E)}}catch(o){if(o instanceof hi)throw o;Zn(r,"network-request-failed",{message:String(o)})}}async function El(r,e,t,i,o={}){const l=await os(r,e,t,i,o);return"mfaPendingCredential"in l&&Zn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function e_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,d=l.config.emulator?Df(r.config,o):`${r.config.apiScheme}://${o}`;return II.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function CI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(_r(this.auth,"network-request-failed")),SI.get())})}}function Wu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=_r(r,e,i);return o.customData._tokenResponse=t,o}function ry(r){return r!==void 0&&r.enterprise!==void 0}class PI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return CI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AI(r,e){return os(r,"GET","/v2/recaptchaConfig",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(r,e){return os(r,"POST","/v1/accounts:delete",e)}async function fc(r,e){return os(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bI(r,e=!1){const t=Jt(r),i=await t.getIdToken(e),o=Vf(i);be(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:tl(Lh(o.auth_time)),issuedAtTime:tl(Lh(o.iat)),expirationTime:tl(Lh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Lh(r){return Number(r)*1e3}function Vf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Mv(t);return o?JSON.parse(o):(Zu("Failed to decode base64 JWT payload"),null)}catch(o){return Zu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function iy(r){const e=Vf(r);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof hi&&NI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function NI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await ul(r,fc(t,{idToken:i}));be(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?t_(l.providerUserInfo):[],p=VI(r.providerData,d),y=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),E=y?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new ef(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,I)}async function DI(r){const e=Jt(r);await pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function t_(r){return r.map(e=>{var{providerId:t}=e,i=bf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(r,e){const t=await Zv(r,{},async()=>{const i=_l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await e_(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:i};return r.emulatorConfig&&Zo(r.emulatorConfig.host)&&(y.credentials="include"),Xv.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LI(r,e){return os(r,"POST","/v2/accounts:revokeToken",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=iy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await OI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,d=new Fo;return i&&(be(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(be(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(be(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fo,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(r,e){be(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class vr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=bf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new ef(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ul(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bI(this,e)}reload(){return DI(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await pc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(oi(this.auth));const e=await this.getIdToken();return await ul(this,kI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,d,p,y,v,E;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,R=(o=t.email)!==null&&o!==void 0?o:void 0,z=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,W=(d=t.photoURL)!==null&&d!==void 0?d:void 0,Y=(p=t.tenantId)!==null&&p!==void 0?p:void 0,O=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,ae=(v=t.createdAt)!==null&&v!==void 0?v:void 0,oe=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ue,emailVerified:K,isAnonymous:fe,providerData:Te,stsTokenManager:N}=t;be(ue&&N,e,"internal-error");const S=Fo.fromJSON(this.name,N);be(typeof ue=="string",e,"internal-error"),Li(I,e.name),Li(R,e.name),be(typeof K=="boolean",e,"internal-error"),be(typeof fe=="boolean",e,"internal-error"),Li(z,e.name),Li(W,e.name),Li(Y,e.name),Li(O,e.name),Li(ae,e.name),Li(oe,e.name);const P=new vr({uid:ue,auth:e,email:R,emailVerified:K,displayName:I,isAnonymous:fe,photoURL:W,phoneNumber:z,tenantId:Y,stsTokenManager:S,createdAt:ae,lastLoginAt:oe});return Te&&Array.isArray(Te)&&(P.providerData=Te.map(k=>Object.assign({},k))),O&&(P._redirectEventId=O),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new Fo;o.updateFromServerResponse(t);const l=new vr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await pc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];be(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?t_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Fo;p.updateFromIdToken(i);const y=new vr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new ef(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Map;function si(r){ui(r instanceof Function,"Expected a class definition");let e=sy.get(r);return e?(ui(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,sy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}n_.type="NONE";const oy=n_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(r,e,t){return`firebase:${r}:${e}:${t}`}class Uo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=ec(this.userKey,o.apiKey,l),this.fullPersistenceKey=ec("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fc(this.auth,{idToken:e}).catch(()=>{});return t?vr._fromGetAccountInfoResponse(this.auth,t,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Uo(si(oy),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||si(oy);const d=ec(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const E=await v._get(d);if(E){let I;if(typeof E=="string"){const R=await fc(e,{idToken:E}).catch(()=>{});if(!R)break;I=await vr._fromGetAccountInfoResponse(e,R,E)}else I=vr._fromJSON(e,E);v!==l&&(p=I),l=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new Uo(l,e,i):(l=y[0],p&&await l._set(d,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Uo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(o_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(l_(e))return"Blackberry";if(u_(e))return"Webos";if(i_(e))return"Safari";if((e.includes("chrome/")||s_(e))&&!e.includes("edge/"))return"Chrome";if(a_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function r_(r=cn()){return/firefox\//i.test(r)}function i_(r=cn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function s_(r=cn()){return/crios\//i.test(r)}function o_(r=cn()){return/iemobile/i.test(r)}function a_(r=cn()){return/android/i.test(r)}function l_(r=cn()){return/blackberry/i.test(r)}function u_(r=cn()){return/webos/i.test(r)}function Of(r=cn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function MI(r=cn()){var e;return Of(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FI(){return YT()&&document.documentMode===10}function c_(r=cn()){return Of(r)||a_(r)||u_(r)||l_(r)||/windows phone/i.test(r)||o_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(r,e=[]){let t;switch(r){case"Browser":t=ay(cn());break;case"Worker":t=`${ay(cn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ea}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,p)=>{try{const y=e(l);d(y)}catch(y){p(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(r,e={}){return os(r,"GET","/v2/passwordPolicy",ss(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=6;class $I{constructor(e){var t,i,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:BI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,d,p;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(i=y.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),y.isValid&&(y.isValid=(o=y.containsLowercaseLetter)!==null&&o!==void 0?o:!0),y.isValid&&(y.isValid=(l=y.containsUppercaseLetter)!==null&&l!==void 0?l:!0),y.isValid&&(y.isValid=(d=y.containsNumericCharacter)!==null&&d!==void 0?d:!0),y.isValid&&(y.isValid=(p=y.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),y}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ly(this),this.idTokenSubscription=new ly(this),this.beforeStateQueue=new UI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=si(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Uo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fc(this,{idToken:e}),i=await vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(On(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===p)&&(y!=null&&y.user)&&(o=y.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(oi(this));const t=e?Jt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zI(this),t=new $I(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await LI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&si(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(p,this,"internal-error"),p.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&vI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function as(r){return Jt(r)}class ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=ix(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HI(r){jc=r}function h_(r){return jc.loadJS(r)}function qI(){return jc.recaptchaEnterpriseScript}function GI(){return jc.gapiScript}function KI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class QI{constructor(){this.enterprise=new YI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class YI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const JI="recaptcha-enterprise",f_="NO_RECAPTCHA";class XI{constructor(e){this.type=JI,this.auth=as(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,p)=>{AI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new PI(y);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(y=>{p(y)})})}function o(l,d,p){const y=window.grecaptcha;ry(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(f_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QI().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{i(this.auth).then(p=>{if(!t&&ry(window.grecaptcha))o(p,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=qI();y.length!==0&&(y+=p),h_(y).then(()=>{o(p,l,d)}).catch(v=>{d(v)})}}).catch(p=>{d(p)})})}}async function uy(r,e,t,i=!1,o=!1){const l=new XI(r);let d;if(o)d=f_;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function tf(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await uy(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await uy(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(r,e){const t=kf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ms(l,e??{}))return o;Zn(o,"already-initialized")}return t.initialize({options:e})}function eS(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(si);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function tS(r,e,t){const i=as(r);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=p_(e),{host:d,port:p}=nS(e),y=p===null?"":`:${p}`,v={url:`${l}//${d}${y}/`},E=Object.freeze({host:d,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(Ms(v,i.config.emulator)&&Ms(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,Zo(d)?(Bv(`${l}//${d}${y}`),$v("Auth",!0)):rS()}function p_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function nS(r){const e=p_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:cy(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:cy(d)}}}function cy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function rS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,t){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}async function iS(r,e){return os(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(r,e){return El(r,"POST","/v1/accounts:signInWithPassword",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(r,e){return El(r,"POST","/v1/accounts:signInWithEmailLink",ss(r,e))}async function aS(r,e){return El(r,"POST","/v1/accounts:signInWithEmailLink",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Lf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new cl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new cl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,t,"signInWithPassword",sS);case"emailLink":return oS(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,i,"signUpPassword",iS);case"emailLink":return aS(e,{idToken:t,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(r,e){return El(r,"POST","/v1/accounts:signInWithIdp",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="http://localhost";class Us extends Lf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=bf(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new Us(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return zo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,zo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zo(e,t)}buildRequest(){const e={requestUri:lS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_l(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cS(r){const e=qa(Ga(r)).link,t=e?qa(Ga(e)).deep_link_id:null,i=qa(Ga(r)).deep_link_id;return(i?qa(Ga(i)).link:null)||i||t||e||r}class Mf{constructor(e){var t,i,o,l,d,p;const y=qa(Ga(e)),v=(t=y.apiKey)!==null&&t!==void 0?t:null,E=(i=y.oobCode)!==null&&i!==void 0?i:null,I=uS((o=y.mode)!==null&&o!==void 0?o:null);be(v&&E&&I,"argument-error"),this.apiKey=v,this.operation=I,this.code=E,this.continueUrl=(l=y.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=y.lang)!==null&&d!==void 0?d:null,this.tenantId=(p=y.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=cS(e);try{return new Mf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,t){return cl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Mf.parseLink(t);return be(i,"argument-error"),cl._fromEmailAndCode(e,i.code,i.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Tl{constructor(){super("facebook.com")}static credential(e){return Us._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch{return null}}}Mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Us._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Dr.credential(t,i)}catch{return null}}}Dr.GOOGLE_SIGN_IN_METHOD="google.com";Dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Tl{constructor(){super("github.com")}static credential(e){return Us._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com";Fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Tl{constructor(){super("twitter.com")}static credential(e,t){return Us._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ui.credential(t,i)}catch{return null}}}Ui.TWITTER_SIGN_IN_METHOD="twitter.com";Ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(r,e){return El(r,"POST","/v1/accounts:signUp",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await vr._fromIdTokenResponse(e,i,o),d=dy(i);return new zs({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=dy(i);return new zs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function dy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends hi{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new mc(e,t,i,o)}}function m_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(r,l,e,i):l})}async function hS(r,e,t=!1){const i=await ul(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return zs._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(r,e,t=!1){const{auth:i}=r;if(On(i.app))return Promise.reject(oi(i));const o="reauthenticate";try{const l=await ul(r,m_(i,o,e,r),t);be(l.idToken,i,"internal-error");const d=Vf(l.idToken);be(d,i,"internal-error");const{sub:p}=d;return be(r.uid===p,i,"user-mismatch"),zs._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Zn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g_(r,e,t=!1){if(On(r.app))return Promise.reject(oi(r));const i="signIn",o=await m_(r,i,e),l=await zs._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function pS(r,e){return g_(as(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y_(r){const e=as(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mS(r,e,t){if(On(r.app))return Promise.reject(oi(r));const i=as(r),d=await tf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dS).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&y_(r),y}),p=await zs._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function v_(r,e,t){return On(r.app)?Promise.reject(oi(r)):pS(Jt(r),ta.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&y_(r),i})}function gS(r,e,t,i){return Jt(r).onIdTokenChanged(e,t,i)}function yS(r,e,t){return Jt(r).beforeAuthStateChanged(e,t)}function vS(r,e,t,i){return Jt(r).onAuthStateChanged(e,t,i)}function __(r){return Jt(r).signOut()}const gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gc,"1"),this.storage.removeItem(gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=1e3,wS=10;class E_ extends w_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=c_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);FI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,wS):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},_S)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}E_.type="LOCAL";const ES=E_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends w_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}T_.type="SESSION";const x_=T_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Dc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async v=>v(t.origin,l)),y=await TS(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((p,y)=>{const v=Uf("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(I){const R=I;if(R.data.eventId===v)switch(R.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(R.data.response);break;default:clearTimeout(E),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function IS(r){Vr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function SS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function RS(){return I_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="firebaseLocalStorageDb",PS=1,yc="firebaseLocalStorage",C_="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vc(r,e){return r.transaction([yc],e?"readwrite":"readonly").objectStore(yc)}function AS(){const r=indexedDB.deleteDatabase(S_);return new xl(r).toPromise()}function nf(){const r=indexedDB.open(S_,PS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(yc,{keyPath:C_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(yc)?e(i):(i.close(),await AS(),e(await nf()))})})}async function hy(r,e,t){const i=Vc(r,!0).put({[C_]:e,value:t});return new xl(i).toPromise()}async function kS(r,e){const t=Vc(r,!1).get(e),i=await new xl(t).toPromise();return i===void 0?null:i.value}function fy(r,e){const t=Vc(r,!0).delete(e);return new xl(t).toPromise()}const bS=800,NS=3;class R_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>NS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dc._getInstance(RS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await SS(),!this.activeServiceWorker)return;this.sender=new xS(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nf();return await hy(e,gc,"1"),await fy(e,gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>hy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>kS(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Vc(o,!1).getAll();return new xl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R_.type="LOCAL";const jS=R_;new wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(r,e){return e?si(e):(be(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends Lf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DS(r){return g_(r.auth,new zf(r),r.bypassAuthState)}function VS(r){const{auth:e,user:t}=r;return be(t,e,"internal-error"),fS(t,new zf(r),r.bypassAuthState)}async function OS(r){const{auth:e,user:t}=r;return be(t,e,"internal-error"),hS(t,new zf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DS;case"linkViaPopup":case"linkViaRedirect":return OS;case"reauthViaPopup":case"reauthViaRedirect":return VS;default:Zn(this.auth,"internal-error")}}resolve(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new wl(2e3,1e4);async function k_(r,e,t){if(On(r.app))return Promise.reject(_r(r,"operation-not-supported-in-this-environment"));const i=as(r);_I(r,e,Ff);const o=P_(i,t);return new Vs(i,"signInViaPopup",e,o).executeNotNull()}class Vs extends A_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Vs.currentPopupAction&&Vs.currentPopupAction.cancel(),Vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){ui(this.filter.length===1,"Popup operations only handle one event");const e=Uf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LS.get())};e()}}Vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="pendingRedirect",tc=new Map;class FS extends A_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=tc.get(this.auth._key());if(!e){try{const i=await US(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}tc.set(this.auth._key(),e)}return this.bypassAuthState||tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function US(r,e){const t=$S(e),i=BS(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function zS(r,e){tc.set(r._key(),e)}function BS(r){return si(r._redirectPersistence)}function $S(r){return ec(MS,r.config.apiKey,r.name)}async function WS(r,e,t=!1){if(On(r.app))return Promise.reject(oi(r));const i=as(r),o=P_(i,e),d=await new FS(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=600*1e3;class qS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!b_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(_r(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HS&&this.cachedEventUids.clear(),this.cachedEventUids.has(py(e))}saveEventToCache(e){this.cachedEventUids.add(py(e)),this.lastProcessedEventTime=Date.now()}}function py(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function b_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(r,e={}){return os(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YS=/^https?/;async function JS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await KS(r);for(const t of e)try{if(XS(t))return}catch{}Zn(r,"unauthorized-domain")}function XS(r){const e=Zh(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!YS.test(t))return!1;if(QS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=new wl(3e4,6e4);function my(){const r=Vr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function e1(r){return new Promise((e,t)=>{var i,o,l;function d(){my(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{my(),t(_r(r,"network-request-failed"))},timeout:ZS.get()})}if(!((o=(i=Vr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Vr().gapi)===null||l===void 0)&&l.load)d();else{const p=KI("iframefcb");return Vr()[p]=()=>{gapi.load?d():t(_r(r,"network-request-failed"))},h_(`${GI()}?onload=${p}`).catch(y=>t(y))}}).catch(e=>{throw nc=null,e})}let nc=null;function t1(r){return nc=nc||e1(r),nc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new wl(5e3,15e3),r1="__/auth/iframe",i1="emulator/auth/iframe",s1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a1(r){const e=r.config;be(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Df(e,i1):`https://${r.config.authDomain}/${r1}`,i={apiKey:e.apiKey,appName:r.name,v:ea},o=o1.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${_l(i).slice(1)}`}async function l1(r){const e=await t1(r),t=Vr().gapi;return be(t,r,"internal-error"),e.open({where:document.body,url:a1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s1,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=_r(r,"network-request-failed"),p=Vr().setTimeout(()=>{l(d)},n1.get());function y(){Vr().clearTimeout(p),o(i)}i.ping(y).then(y,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c1=500,d1=600,h1="_blank",f1="http://localhost";class gy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p1(r,e,t,i=c1,o=d1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const y=Object.assign(Object.assign({},u1),{width:i.toString(),height:o.toString(),top:l,left:d}),v=cn().toLowerCase();t&&(p=s_(v)?h1:t),r_(v)&&(e=e||f1,y.scrollbars="yes");const E=Object.entries(y).reduce((R,[z,W])=>`${R}${z}=${W},`,"");if(MI(v)&&p!=="_self")return m1(e||"",p),new gy(null);const I=window.open(e||"",p,E);be(I,r,"popup-blocked");try{I.focus()}catch{}return new gy(I)}function m1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="__/auth/handler",y1="emulator/auth/handler",v1=encodeURIComponent("fac");async function yy(r,e,t,i,o,l){be(r.config.authDomain,r,"auth-domain-config-required"),be(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ea,eventId:o};if(e instanceof Ff){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",rx(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))d[E]=I}if(e instanceof Tl){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const y=await r._getAppCheckToken(),v=y?`#${v1}=${encodeURIComponent(y)}`:"";return`${_1(r)}?${_l(p).slice(1)}${v}`}function _1({config:r}){return r.emulator?Df(r,y1):`https://${r.authDomain}/${g1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="webStorageSupport";class w1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x_,this._completeRedirectFn=WS,this._overrideRedirectResult=zS}async _openPopup(e,t,i,o){var l;ui((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await yy(e,t,i,Zh(),o);return p1(e,d,Uf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await yy(e,t,i,Zh(),o);return IS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ui(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await l1(e),i=new qS(e);return t.register("authEvent",o=>(be(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mh,{type:Mh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Mh];d!==void 0&&t(!!d),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return c_()||i_()||Of()}}const E1=w1;var vy="@firebase/auth",_y="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I1(r){Wo(new Fs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;be(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d_(r)},v=new WI(i,o,l,y);return eS(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Wo(new Fs("auth-internal",e=>{const t=as(e.getProvider("auth").getImmediate());return(i=>new T1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qi(vy,_y,x1(r)),qi(vy,_y,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=300,C1=zv("authIdTokenMaxAge")||S1;let wy=null;const R1=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>C1)return;const o=t==null?void 0:t.token;wy!==o&&(wy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function P1(r=Gv()){const e=kf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=ZI(r,{popupRedirectResolver:E1,persistence:[jS,ES,x_]}),i=zv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=R1(l.toString());yS(t,d,()=>d(t.currentUser)),gS(t,p=>d(p))}}const o=Fv("auth");return o&&tS(t,`http://${o}`),t}function A1(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}HI({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=_r("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",A1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I1("Browser");var Ey=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gi,N_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function P(){}P.prototype=S.prototype,N.D=S.prototype,N.prototype=new P,N.prototype.constructor=N,N.C=function(k,D,b){for(var T=Array(arguments.length-2),le=2;le<arguments.length;le++)T[le-2]=arguments[le];return S.prototype[D].apply(k,T)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,S,P){P||(P=0);var k=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)k[D]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(D=0;16>D;++D)k[D]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=N.g[0],P=N.g[1],D=N.g[2];var b=N.g[3],T=S+(b^P&(D^b))+k[0]+3614090360&4294967295;S=P+(T<<7&4294967295|T>>>25),T=b+(D^S&(P^D))+k[1]+3905402710&4294967295,b=S+(T<<12&4294967295|T>>>20),T=D+(P^b&(S^P))+k[2]+606105819&4294967295,D=b+(T<<17&4294967295|T>>>15),T=P+(S^D&(b^S))+k[3]+3250441966&4294967295,P=D+(T<<22&4294967295|T>>>10),T=S+(b^P&(D^b))+k[4]+4118548399&4294967295,S=P+(T<<7&4294967295|T>>>25),T=b+(D^S&(P^D))+k[5]+1200080426&4294967295,b=S+(T<<12&4294967295|T>>>20),T=D+(P^b&(S^P))+k[6]+2821735955&4294967295,D=b+(T<<17&4294967295|T>>>15),T=P+(S^D&(b^S))+k[7]+4249261313&4294967295,P=D+(T<<22&4294967295|T>>>10),T=S+(b^P&(D^b))+k[8]+1770035416&4294967295,S=P+(T<<7&4294967295|T>>>25),T=b+(D^S&(P^D))+k[9]+2336552879&4294967295,b=S+(T<<12&4294967295|T>>>20),T=D+(P^b&(S^P))+k[10]+4294925233&4294967295,D=b+(T<<17&4294967295|T>>>15),T=P+(S^D&(b^S))+k[11]+2304563134&4294967295,P=D+(T<<22&4294967295|T>>>10),T=S+(b^P&(D^b))+k[12]+1804603682&4294967295,S=P+(T<<7&4294967295|T>>>25),T=b+(D^S&(P^D))+k[13]+4254626195&4294967295,b=S+(T<<12&4294967295|T>>>20),T=D+(P^b&(S^P))+k[14]+2792965006&4294967295,D=b+(T<<17&4294967295|T>>>15),T=P+(S^D&(b^S))+k[15]+1236535329&4294967295,P=D+(T<<22&4294967295|T>>>10),T=S+(D^b&(P^D))+k[1]+4129170786&4294967295,S=P+(T<<5&4294967295|T>>>27),T=b+(P^D&(S^P))+k[6]+3225465664&4294967295,b=S+(T<<9&4294967295|T>>>23),T=D+(S^P&(b^S))+k[11]+643717713&4294967295,D=b+(T<<14&4294967295|T>>>18),T=P+(b^S&(D^b))+k[0]+3921069994&4294967295,P=D+(T<<20&4294967295|T>>>12),T=S+(D^b&(P^D))+k[5]+3593408605&4294967295,S=P+(T<<5&4294967295|T>>>27),T=b+(P^D&(S^P))+k[10]+38016083&4294967295,b=S+(T<<9&4294967295|T>>>23),T=D+(S^P&(b^S))+k[15]+3634488961&4294967295,D=b+(T<<14&4294967295|T>>>18),T=P+(b^S&(D^b))+k[4]+3889429448&4294967295,P=D+(T<<20&4294967295|T>>>12),T=S+(D^b&(P^D))+k[9]+568446438&4294967295,S=P+(T<<5&4294967295|T>>>27),T=b+(P^D&(S^P))+k[14]+3275163606&4294967295,b=S+(T<<9&4294967295|T>>>23),T=D+(S^P&(b^S))+k[3]+4107603335&4294967295,D=b+(T<<14&4294967295|T>>>18),T=P+(b^S&(D^b))+k[8]+1163531501&4294967295,P=D+(T<<20&4294967295|T>>>12),T=S+(D^b&(P^D))+k[13]+2850285829&4294967295,S=P+(T<<5&4294967295|T>>>27),T=b+(P^D&(S^P))+k[2]+4243563512&4294967295,b=S+(T<<9&4294967295|T>>>23),T=D+(S^P&(b^S))+k[7]+1735328473&4294967295,D=b+(T<<14&4294967295|T>>>18),T=P+(b^S&(D^b))+k[12]+2368359562&4294967295,P=D+(T<<20&4294967295|T>>>12),T=S+(P^D^b)+k[5]+4294588738&4294967295,S=P+(T<<4&4294967295|T>>>28),T=b+(S^P^D)+k[8]+2272392833&4294967295,b=S+(T<<11&4294967295|T>>>21),T=D+(b^S^P)+k[11]+1839030562&4294967295,D=b+(T<<16&4294967295|T>>>16),T=P+(D^b^S)+k[14]+4259657740&4294967295,P=D+(T<<23&4294967295|T>>>9),T=S+(P^D^b)+k[1]+2763975236&4294967295,S=P+(T<<4&4294967295|T>>>28),T=b+(S^P^D)+k[4]+1272893353&4294967295,b=S+(T<<11&4294967295|T>>>21),T=D+(b^S^P)+k[7]+4139469664&4294967295,D=b+(T<<16&4294967295|T>>>16),T=P+(D^b^S)+k[10]+3200236656&4294967295,P=D+(T<<23&4294967295|T>>>9),T=S+(P^D^b)+k[13]+681279174&4294967295,S=P+(T<<4&4294967295|T>>>28),T=b+(S^P^D)+k[0]+3936430074&4294967295,b=S+(T<<11&4294967295|T>>>21),T=D+(b^S^P)+k[3]+3572445317&4294967295,D=b+(T<<16&4294967295|T>>>16),T=P+(D^b^S)+k[6]+76029189&4294967295,P=D+(T<<23&4294967295|T>>>9),T=S+(P^D^b)+k[9]+3654602809&4294967295,S=P+(T<<4&4294967295|T>>>28),T=b+(S^P^D)+k[12]+3873151461&4294967295,b=S+(T<<11&4294967295|T>>>21),T=D+(b^S^P)+k[15]+530742520&4294967295,D=b+(T<<16&4294967295|T>>>16),T=P+(D^b^S)+k[2]+3299628645&4294967295,P=D+(T<<23&4294967295|T>>>9),T=S+(D^(P|~b))+k[0]+4096336452&4294967295,S=P+(T<<6&4294967295|T>>>26),T=b+(P^(S|~D))+k[7]+1126891415&4294967295,b=S+(T<<10&4294967295|T>>>22),T=D+(S^(b|~P))+k[14]+2878612391&4294967295,D=b+(T<<15&4294967295|T>>>17),T=P+(b^(D|~S))+k[5]+4237533241&4294967295,P=D+(T<<21&4294967295|T>>>11),T=S+(D^(P|~b))+k[12]+1700485571&4294967295,S=P+(T<<6&4294967295|T>>>26),T=b+(P^(S|~D))+k[3]+2399980690&4294967295,b=S+(T<<10&4294967295|T>>>22),T=D+(S^(b|~P))+k[10]+4293915773&4294967295,D=b+(T<<15&4294967295|T>>>17),T=P+(b^(D|~S))+k[1]+2240044497&4294967295,P=D+(T<<21&4294967295|T>>>11),T=S+(D^(P|~b))+k[8]+1873313359&4294967295,S=P+(T<<6&4294967295|T>>>26),T=b+(P^(S|~D))+k[15]+4264355552&4294967295,b=S+(T<<10&4294967295|T>>>22),T=D+(S^(b|~P))+k[6]+2734768916&4294967295,D=b+(T<<15&4294967295|T>>>17),T=P+(b^(D|~S))+k[13]+1309151649&4294967295,P=D+(T<<21&4294967295|T>>>11),T=S+(D^(P|~b))+k[4]+4149444226&4294967295,S=P+(T<<6&4294967295|T>>>26),T=b+(P^(S|~D))+k[11]+3174756917&4294967295,b=S+(T<<10&4294967295|T>>>22),T=D+(S^(b|~P))+k[2]+718787259&4294967295,D=b+(T<<15&4294967295|T>>>17),T=P+(b^(D|~S))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(D+(T<<21&4294967295|T>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+b&4294967295}i.prototype.u=function(N,S){S===void 0&&(S=N.length);for(var P=S-this.blockSize,k=this.B,D=this.h,b=0;b<S;){if(D==0)for(;b<=P;)o(this,N,b),b+=this.blockSize;if(typeof N=="string"){for(;b<S;)if(k[D++]=N.charCodeAt(b++),D==this.blockSize){o(this,k),D=0;break}}else for(;b<S;)if(k[D++]=N[b++],D==this.blockSize){o(this,k),D=0;break}}this.h=D,this.o+=S},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;var P=8*this.o;for(S=N.length-8;S<N.length;++S)N[S]=P&255,P/=256;for(this.u(N),N=Array(16),S=P=0;4>S;++S)for(var k=0;32>k;k+=8)N[P++]=this.g[S]>>>k&255;return N};function l(N,S){var P=p;return Object.prototype.hasOwnProperty.call(P,N)?P[N]:P[N]=S(N)}function d(N,S){this.h=S;for(var P=[],k=!0,D=N.length-1;0<=D;D--){var b=N[D]|0;k&&b==S||(P[D]=b,k=!1)}this.g=P}var p={};function y(N){return-128<=N&&128>N?l(N,function(S){return new d([S|0],0>S?-1:0)}):new d([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return I;if(0>N)return O(v(-N));for(var S=[],P=1,k=0;N>=P;k++)S[k]=N/P|0,P*=4294967296;return new d(S,0)}function E(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return O(E(N.substring(1),S));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=v(Math.pow(S,8)),k=I,D=0;D<N.length;D+=8){var b=Math.min(8,N.length-D),T=parseInt(N.substring(D,D+b),S);8>b?(b=v(Math.pow(S,b)),k=k.j(b).add(v(T))):(k=k.j(P),k=k.add(v(T)))}return k}var I=y(0),R=y(1),z=y(16777216);r=d.prototype,r.m=function(){if(Y(this))return-O(this).m();for(var N=0,S=1,P=0;P<this.g.length;P++){var k=this.i(P);N+=(0<=k?k:4294967296+k)*S,S*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(W(this))return"0";if(Y(this))return"-"+O(this).toString(N);for(var S=v(Math.pow(N,6)),P=this,k="";;){var D=K(P,S).g;P=ae(P,D.j(S));var b=((0<P.g.length?P.g[0]:P.h)>>>0).toString(N);if(P=D,W(P))return b+k;for(;6>b.length;)b="0"+b;k=b+k}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function W(N){if(N.h!=0)return!1;for(var S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function Y(N){return N.h==-1}r.l=function(N){return N=ae(this,N),Y(N)?-1:W(N)?0:1};function O(N){for(var S=N.g.length,P=[],k=0;k<S;k++)P[k]=~N.g[k];return new d(P,~N.h).add(R)}r.abs=function(){return Y(this)?O(this):this},r.add=function(N){for(var S=Math.max(this.g.length,N.g.length),P=[],k=0,D=0;D<=S;D++){var b=k+(this.i(D)&65535)+(N.i(D)&65535),T=(b>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);k=T>>>16,b&=65535,T&=65535,P[D]=T<<16|b}return new d(P,P[P.length-1]&-2147483648?-1:0)};function ae(N,S){return N.add(O(S))}r.j=function(N){if(W(this)||W(N))return I;if(Y(this))return Y(N)?O(this).j(O(N)):O(O(this).j(N));if(Y(N))return O(this.j(O(N)));if(0>this.l(z)&&0>N.l(z))return v(this.m()*N.m());for(var S=this.g.length+N.g.length,P=[],k=0;k<2*S;k++)P[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<N.g.length;D++){var b=this.i(k)>>>16,T=this.i(k)&65535,le=N.i(D)>>>16,je=N.i(D)&65535;P[2*k+2*D]+=T*je,oe(P,2*k+2*D),P[2*k+2*D+1]+=b*je,oe(P,2*k+2*D+1),P[2*k+2*D+1]+=T*le,oe(P,2*k+2*D+1),P[2*k+2*D+2]+=b*le,oe(P,2*k+2*D+2)}for(k=0;k<S;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=S;k<2*S;k++)P[k]=0;return new d(P,0)};function oe(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function ue(N,S){this.g=N,this.h=S}function K(N,S){if(W(S))throw Error("division by zero");if(W(N))return new ue(I,I);if(Y(N))return S=K(O(N),S),new ue(O(S.g),O(S.h));if(Y(S))return S=K(N,O(S)),new ue(O(S.g),S.h);if(30<N.g.length){if(Y(N)||Y(S))throw Error("slowDivide_ only works with positive integers.");for(var P=R,k=S;0>=k.l(N);)P=fe(P),k=fe(k);var D=Te(P,1),b=Te(k,1);for(k=Te(k,2),P=Te(P,2);!W(k);){var T=b.add(k);0>=T.l(N)&&(D=D.add(P),b=T),k=Te(k,1),P=Te(P,1)}return S=ae(N,D.j(S)),new ue(D,S)}for(D=I;0<=N.l(S);){for(P=Math.max(1,Math.floor(N.m()/S.m())),k=Math.ceil(Math.log(P)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),b=v(P),T=b.j(S);Y(T)||0<T.l(N);)P-=k,b=v(P),T=b.j(S);W(b)&&(b=R),D=D.add(b),N=ae(N,T)}return new ue(D,N)}r.A=function(N){return K(this,N).h},r.and=function(N){for(var S=Math.max(this.g.length,N.g.length),P=[],k=0;k<S;k++)P[k]=this.i(k)&N.i(k);return new d(P,this.h&N.h)},r.or=function(N){for(var S=Math.max(this.g.length,N.g.length),P=[],k=0;k<S;k++)P[k]=this.i(k)|N.i(k);return new d(P,this.h|N.h)},r.xor=function(N){for(var S=Math.max(this.g.length,N.g.length),P=[],k=0;k<S;k++)P[k]=this.i(k)^N.i(k);return new d(P,this.h^N.h)};function fe(N){for(var S=N.g.length+1,P=[],k=0;k<S;k++)P[k]=N.i(k)<<1|N.i(k-1)>>>31;return new d(P,N.h)}function Te(N,S){var P=S>>5;S%=32;for(var k=N.g.length-P,D=[],b=0;b<k;b++)D[b]=0<S?N.i(b+P)>>>S|N.i(b+P+1)<<32-S:N.i(b+P);return new d(D,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,N_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,Gi=d}).apply(typeof Ey<"u"?Ey:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j_,Ka,D_,rc,rf,V_,O_,L_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var x=0;x<u.length-1;x++){var F=u[x];if(!(F in _))break e;_=_[F]}u=u[u.length-1],x=_[u],m=m(x),m!=x&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,x=!1,F={next:function(){if(!x&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return x=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,x),u.apply(m,F)}}return function(){return u.apply(m,arguments)}}function R(u,m,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,R.apply(null,arguments)}function z(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var x=_.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function W(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(x,F,q){for(var ce=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)ce[nt-2]=arguments[nt];return m.prototype[F].apply(x,ce)}}function Y(u){const m=u.length;if(0<m){const _=Array(m);for(let x=0;x<m;x++)_[x]=u[x];return _}return[]}function O(u,m){for(let _=1;_<arguments.length;_++){const x=arguments[_];if(y(x)){const F=u.length||0,q=x.length||0;u.length=F+q;for(let ce=0;ce<q;ce++)u[F+ce]=x[ce]}else u.push(x)}}class ae{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function oe(u){return/^[\s\xa0]*$/.test(u)}function ue(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function K(u){return K[" "](u),u}K[" "]=function(){};var fe=ue().indexOf("Gecko")!=-1&&!(ue().toLowerCase().indexOf("webkit")!=-1&&ue().indexOf("Edge")==-1)&&!(ue().indexOf("Trident")!=-1||ue().indexOf("MSIE")!=-1)&&ue().indexOf("Edge")==-1;function Te(u,m,_){for(const x in u)m.call(_,u[x],x,u)}function N(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let _,x;for(let F=1;F<arguments.length;F++){x=arguments[F];for(_ in x)u[_]=x[_];for(let q=0;q<P.length;q++)_=P[q],Object.prototype.hasOwnProperty.call(x,_)&&(u[_]=x[_])}}function D(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function b(u){p.setTimeout(()=>{throw u},0)}function T(){var u=Se;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class le{constructor(){this.h=this.g=null}add(m,_){const x=je.get();x.set(m,_),this.h?this.h.next=x:this.g=x,this.h=x}}var je=new ae(()=>new Ye,u=>u.reset());class Ye{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,de=!1,Se=new le,pe=()=>{const u=p.Promise.resolve(void 0);Le=()=>{u.then(M)}};var M=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(_){b(_)}var m=je;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}de=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var ke=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function Ve(u,m){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(fe){e:{try{K(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ve.aa.h.call(this)}}W(Ve,ge);var Me={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Ze(u,m,_,x,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!x,this.ha=F,this.key=++ze,this.da=this.fa=!1}function mt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function dn(u){this.src=u,this.g={},this.h=0}dn.prototype.add=function(u,m,_,x,F){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var ce=Mt(u,m,x,F);return-1<ce?(m=u[ce],_||(m.fa=!1)):(m=new Ze(m,this.src,q,!!x,F),m.fa=_,u.push(m)),m};function Zt(u,m){var _=m.type;if(_ in u.g){var x=u.g[_],F=Array.prototype.indexOf.call(x,m,void 0),q;(q=0<=F)&&Array.prototype.splice.call(x,F,1),q&&(mt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Mt(u,m,_,x){for(var F=0;F<u.length;++F){var q=u[F];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==x)return F}return-1}var Ft="closure_lm_"+(1e6*Math.random()|0),er={};function Er(u,m,_,x,F){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Er(u,m[q],_,x,F);return null}return _=me(_),u&&u[we]?u.K(m,_,v(x)?!!x.capture:!1,F):tt(u,m,_,!1,x,F)}function tt(u,m,_,x,F,q){if(!m)throw Error("Invalid event type");var ce=v(F)?!!F.capture:!!F,nt=nr(u);if(nt||(u[Ft]=nt=new dn(u)),_=nt.add(m,_,x,ce,q),_.proxy)return _;if(x=Br(),_.proxy=x,x.src=u,x.listener=_,u.addEventListener)ke||(F=ce),F===void 0&&(F=!1),u.addEventListener(m.toString(),x,F);else if(u.attachEvent)u.attachEvent(vn(m.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Br(){function u(_){return m.call(u.src,u.listener,_)}const m=tr;return u}function Tr(u,m,_,x,F){if(Array.isArray(m))for(var q=0;q<m.length;q++)Tr(u,m[q],_,x,F);else x=v(x)?!!x.capture:!!x,_=me(_),u&&u[we]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=Mt(q,_,x,F),-1<_&&(mt(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=nr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Mt(m,_,x,F)),(_=-1<u?m[u]:null)&&Nt(_))}function Nt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[we])Zt(m.i,u);else{var _=u.type,x=u.proxy;m.removeEventListener?m.removeEventListener(_,x,u.capture):m.detachEvent?m.detachEvent(vn(_),x):m.addListener&&m.removeListener&&m.removeListener(x),(_=nr(m))?(Zt(_,u),_.h==0&&(_.src=null,m[Ft]=null)):mt(u)}}}function vn(u){return u in er?er[u]:er[u]="on"+u}function tr(u,m){if(u.da)u=!0;else{m=new Ve(m,this);var _=u.listener,x=u.ha||u.src;u.fa&&Nt(u),u=_.call(x,m)}return u}function nr(u){return u=u[Ft],u instanceof dn?u:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(u){return typeof u=="function"?u:(u[X]||(u[X]=function(m){return u.handleEvent(m)}),u[X])}function ie(){J.call(this),this.i=new dn(this),this.M=this,this.F=null}W(ie,J),ie.prototype[we]=!0,ie.prototype.removeEventListener=function(u,m,_,x){Tr(this,u,m,_,x)};function C(u,m){var _,x=u.F;if(x)for(_=[];x;x=x.F)_.push(x);if(u=u.M,x=m.type||m,typeof m=="string")m=new ge(m,u);else if(m instanceof ge)m.target=m.target||u;else{var F=m;m=new ge(x,u),k(m,F)}if(F=!0,_)for(var q=_.length-1;0<=q;q--){var ce=m.g=_[q];F=Q(ce,x,!0,m)&&F}if(ce=m.g=u,F=Q(ce,x,!0,m)&&F,F=Q(ce,x,!1,m)&&F,_)for(q=0;q<_.length;q++)ce=m.g=_[q],F=Q(ce,x,!1,m)&&F}ie.prototype.N=function(){if(ie.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],x=0;x<_.length;x++)mt(_[x]);delete u.g[m],u.h--}}this.F=null},ie.prototype.K=function(u,m,_,x){return this.i.add(String(u),m,!1,_,x)},ie.prototype.L=function(u,m,_,x){return this.i.add(String(u),m,!0,_,x)};function Q(u,m,_,x){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,q=0;q<m.length;++q){var ce=m[q];if(ce&&!ce.da&&ce.capture==_){var nt=ce.listener,jt=ce.ha||ce.src;ce.fa&&Zt(u.i,ce),F=nt.call(jt,x)!==!1&&F}}return F&&!x.defaultPrevented}function G(u,m,_){if(typeof u=="function")_&&(u=R(u,_));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function L(u){u.g=G(()=>{u.g=null,u.i&&(u.i=!1,L(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class he extends J{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:L(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Be(u){J.call(this),this.h=u,this.g={}}W(Be,J);var rt=[];function Et(u){Te(u.g,function(m,_){this.g.hasOwnProperty(_)&&Nt(m)},u),u.g={}}Be.prototype.N=function(){Be.aa.N.call(this),Et(this)},Be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lt=p.JSON.stringify,We=p.JSON.parse,ut=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function hn(){}hn.prototype.h=null;function fn(u){return u.h||(u.h=u.i())}function Mn(){}var en={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fn(){ge.call(this,"d")}W(Fn,ge);function fi(){ge.call(this,"c")}W(fi,ge);var Un={},cs=null;function st(){return cs=cs||new ie}Un.La="serverreachability";function zn(u){ge.call(this,Un.La,u)}W(zn,ge);function $r(u){const m=st();C(m,new zn(m))}Un.STAT_EVENT="statevent";function aa(u,m){ge.call(this,Un.STAT_EVENT,u),this.stat=m}W(aa,ge);function xt(u){const m=st();C(m,new aa(m,u))}Un.Ma="timingevent";function Ks(u,m){ge.call(this,Un.Ma,u),this.size=m}W(Ks,ge);function rr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function ds(){this.g=!0}ds.prototype.xa=function(){this.g=!1};function hs(u,m,_,x,F,q){u.info(function(){if(u.g)if(q)for(var ce="",nt=q.split("&"),jt=0;jt<nt.length;jt++){var Ke=nt[jt].split("=");if(1<Ke.length){var Ut=Ke[0];Ke=Ke[1];var Rt=Ut.split("_");ce=2<=Rt.length&&Rt[1]=="type"?ce+(Ut+"="+Ke+"&"):ce+(Ut+"=redacted&")}}else ce=null;else ce=q;return"XMLHTTP REQ ("+x+") [attempt "+F+"]: "+m+`
`+_+`
`+ce})}function Qs(u,m,_,x,F,q,ce){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+F+"]: "+m+`
`+_+`
`+q+" "+ce})}function ir(u,m,_,x){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ed(u,_)+(x?" "+x:"")})}function la(u,m){u.info(function(){return"TIMEOUT: "+m})}ds.prototype.info=function(){};function ed(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var x=_[u];if(!(2>x.length)){var F=x[1];if(Array.isArray(F)&&!(1>F.length)){var q=F[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ce=1;ce<F.length;ce++)F[ce]=""}}}}return lt(_)}catch{return m}}var Ys={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Al={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sr;function fs(){}W(fs,hn),fs.prototype.g=function(){return new XMLHttpRequest},fs.prototype.i=function(){return{}},sr=new fs;function or(u,m,_,x){this.j=u,this.i=m,this.l=_,this.R=x||1,this.U=new Be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kl}function kl(){this.i=null,this.g="",this.h=!1}var ua={},Js={};function Xs(u,m,_){u.L=1,u.v=vi(kn(m)),u.m=_,u.P=!0,ca(u,null)}function ca(u,m){u.F=Date.now(),ot(u),u.A=kn(u.v);var _=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),wi(_.i,"t",x),u.C=0,_=u.j.J,u.h=new kl,u.g=Kl(u.j,_?m:null,!u.m),0<u.O&&(u.M=new he(R(u.Y,u,u.g),u.O)),m=u.U,_=u.g,x=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(rt[0]=F.toString()),F=rt);for(var q=0;q<F.length;q++){var ce=Er(_,F[q],x||m.handleEvent,!1,m.h||m);if(!ce)break;m.g[ce.key]=ce}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),$r(),hs(u.i,u.u,u.A,u.l,u.R,u.m)}or.prototype.ca=function(u){u=u.target;const m=this.M;m&&wn(u)==3?m.j():this.Y(u)},or.prototype.Y=function(u){try{if(u==this.g)e:{const Rt=wn(this.g);var m=this.g.Ba();const Wn=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||ga(this.g)))){this.J||Rt!=4||m==7||(m==8||0>=Wn?$r(3):$r(2)),ps(this);var _=this.g.Z();this.X=_;t:if(bl(this)){var x=ga(this.g);u="";var F=x.length,q=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bn(this),pi(this);var ce="";break t}this.h.i=new p.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,u+=this.h.i.decode(x[m],{stream:!(q&&m==F-1)});x.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=_==200,Qs(this.i,this.u,this.A,this.l,this.R,Rt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,jt=this.g;if((nt=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(nt)){var Ke=nt;break t}}Ke=null}if(_=Ke)ir(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,da(this,_);else{this.o=!1,this.s=3,xt(12),Bn(this),pi(this);break e}}if(this.P){_=!0;let Nn;for(;!this.J&&this.C<ce.length;)if(Nn=td(this,ce),Nn==Js){Rt==4&&(this.s=4,xt(14),_=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==ua){this.s=4,xt(15),ir(this.i,this.l,ce,"[Invalid Chunk]"),_=!1;break}else ir(this.i,this.l,Nn,null),da(this,Nn);if(bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||ce.length!=0||this.h.h||(this.s=1,xt(16),_=!1),this.o=this.o&&_,!_)ir(this.i,this.l,ce,"[Invalid Chunked Response]"),Bn(this),pi(this);else if(0<ce.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),va(Ut),Ut.M=!0,xt(11))}}else ir(this.i,this.l,ce,null),da(this,ce);Rt==4&&Bn(this),this.o&&!this.J&&(Rt==4?uo(this.j,this):(this.o=!1,ot(this)))}else io(this.g),_==400&&0<ce.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Bn(this),pi(this)}}}catch{}finally{}};function bl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function td(u,m){var _=u.C,x=m.indexOf(`
`,_);return x==-1?Js:(_=Number(m.substring(_,x)),isNaN(_)?ua:(x+=1,x+_>m.length?Js:(m=m.slice(x,x+_),u.C=x+_,m)))}or.prototype.cancel=function(){this.J=!0,Bn(this)};function ot(u){u.S=Date.now()+u.I,Nl(u,u.I)}function Nl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=rr(R(u.ba,u),m)}function ps(u){u.B&&(p.clearTimeout(u.B),u.B=null)}or.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(la(this.i,this.A),this.L!=2&&($r(),xt(17)),Bn(this),this.s=2,pi(this)):Nl(this,this.S-u)};function pi(u){u.j.G==0||u.J||uo(u.j,u)}function Bn(u){ps(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Et(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function da(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||pn(_.h,u))){if(!u.K&&pn(_.h,u)&&_.G==3){try{var x=_.Da.g.parse(m)}catch{x=null}if(Array.isArray(x)&&x.length==3){var F=x;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)lo(_),dr(_);else break e;ao(_),xt(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=rr(R(_.Za,_),6e3));if(1>=Dl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Kr(_,11)}else if((u.K||_.g==u)&&lo(_),!oe(m))for(F=_.Da.g.parse(m),m=0;m<F.length;m++){let Ke=F[m];if(_.T=Ke[0],Ke=Ke[1],_.G==2)if(Ke[0]=="c"){_.K=Ke[1],_.ia=Ke[2];const Ut=Ke[3];Ut!=null&&(_.la=Ut,_.j.info("VER="+_.la));const Rt=Ke[4];Rt!=null&&(_.Aa=Rt,_.j.info("SVER="+_.Aa));const Wn=Ke[5];Wn!=null&&typeof Wn=="number"&&0<Wn&&(x=1.5*Wn,_.L=x,_.j.info("backChannelRequestTimeoutMs_="+x)),x=_;const Nn=u.g;if(Nn){const Es=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Es){var q=x.h;q.g||Es.indexOf("spdy")==-1&&Es.indexOf("quic")==-1&&Es.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ha(q,q.h),q.h=null))}if(x.D){const ho=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;ho&&(x.ya=ho,it(x.I,x.D,ho))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),x=_;var ce=u;if(x.qa=Gl(x,x.J?x.ia:null,x.W),ce.K){Vl(x.h,ce);var nt=ce,jt=x.L;jt&&(nt.I=jt),nt.B&&(ps(nt),ot(nt)),x.g=ce}else ws(x);0<_.i.length&&Cr(_)}else Ke[0]!="stop"&&Ke[0]!="close"||Kr(_,7);else _.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Kr(_,7):qt(_):Ke[0]!="noop"&&_.l&&_.l.ta(Ke),_.v=0)}}$r(4)}catch{}}var jl=class{constructor(u,m){this.g=u,this.map=m}};function ms(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function An(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Dl(u){return u.h?1:u.g?u.g.size:0}function pn(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ha(u,m){u.g?u.g.add(m):u.h=m}function Vl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ms.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ol(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return Y(u.i)}function Zs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],_=u.length,x=0;x<_;x++)m.push(u[x]);return m}m=[],_=0;for(x in u)m[_++]=u[x];return m}function eo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const x in u)m[_++]=x;return m}}}function mi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=eo(u),x=Zs(u),F=x.length,q=0;q<F;q++)m.call(void 0,x[q],_&&_[q],u)}var gs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nd(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var x=u[_].indexOf("="),F=null;if(0<=x){var q=u[_].substring(0,x);F=u[_].substring(x+1)}else q=u[_];m(q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Wr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Wr){this.h=u.h,ys(this,u.j),this.o=u.o,this.g=u.g,gi(this,u.s),this.l=u.l;var m=u.i,_=new xr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),yi(this,_),this.m=u.m}else u&&(m=String(u).match(gs))?(this.h=!1,ys(this,m[1]||"",!0),this.o=Ge(m[2]||""),this.g=Ge(m[3]||"",!0),gi(this,m[4]),this.l=Ge(m[5]||"",!0),yi(this,m[6]||"",!0),this.m=Ge(m[7]||"")):(this.h=!1,this.i=new xr(null,this.h))}Wr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(_i(m,to,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(_i(m,to,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(_i(_,_.charAt(0)=="/"?Fl:Ml,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",_i(_,fa)),u.join("")};function kn(u){return new Wr(u)}function ys(u,m,_){u.j=_?Ge(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function gi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function yi(u,m,_){m instanceof xr?(u.i=m,Ir(u.i,u.h)):(_||(m=_i(m,Ul)),u.i=new xr(m,u.h))}function it(u,m,_){u.i.set(m,_)}function vi(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ge(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _i(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Ll),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ll(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var to=/[#\/\?@]/g,Ml=/[#\?:]/g,Fl=/[#\?]/g,Ul=/[#\?@]/g,fa=/#/g;function xr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Ht(u){u.g||(u.g=new Map,u.h=0,u.i&&nd(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=xr.prototype,r.add=function(u,m){Ht(this),this.i=null,u=$n(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function ar(u,m){Ht(u),m=$n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function lr(u,m){return Ht(u),m=$n(u,m),u.g.has(m)}r.forEach=function(u,m){Ht(this),this.g.forEach(function(_,x){_.forEach(function(F){u.call(m,F,x,this)},this)},this)},r.na=function(){Ht(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let x=0;x<m.length;x++){const F=u[x];for(let q=0;q<F.length;q++)_.push(m[x])}return _},r.V=function(u){Ht(this);let m=[];if(typeof u=="string")lr(this,u)&&(m=m.concat(this.g.get($n(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Ht(this),this.i=null,u=$n(this,u),lr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function wi(u,m,_){ar(u,m),0<_.length&&(u.i=null,u.g.set($n(u,m),Y(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var x=m[_];const q=encodeURIComponent(String(x)),ce=this.V(x);for(x=0;x<ce.length;x++){var F=q;ce[x]!==""&&(F+="="+encodeURIComponent(String(ce[x]))),u.push(F)}}return this.i=u.join("&")};function $n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ir(u,m){m&&!u.j&&(Ht(u),u.i=null,u.g.forEach(function(_,x){var F=x.toLowerCase();x!=F&&(ar(this,x),wi(this,F,_))},u)),u.j=m}function rd(u,m){const _=new ds;if(p.Image){const x=new Image;x.onload=z(_n,_,"TestLoadImage: loaded",!0,m,x),x.onerror=z(_n,_,"TestLoadImage: error",!1,m,x),x.onabort=z(_n,_,"TestLoadImage: abort",!1,m,x),x.ontimeout=z(_n,_,"TestLoadImage: timeout",!1,m,x),p.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else m(!1)}function zl(u,m){const _=new ds,x=new AbortController,F=setTimeout(()=>{x.abort(),_n(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:x.signal}).then(q=>{clearTimeout(F),q.ok?_n(_,"TestPingServer: ok",!0,m):_n(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),_n(_,"TestPingServer: error",!1,m)})}function _n(u,m,_,x,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),x(_)}catch{}}function id(){this.g=new ut}function Bl(u,m,_){const x=_||"";try{mi(u,function(F,q){let ce=F;v(F)&&(ce=lt(F)),m.push(x+q+"="+encodeURIComponent(ce))})}catch(F){throw m.push(x+"type="+encodeURIComponent("_badmap")),F}}function Hr(u){this.l=u.Ub||null,this.j=u.eb||!1}W(Hr,hn),Hr.prototype.g=function(){return new vs(this.l,this.j)},Hr.prototype.i=(function(u){return function(){return u}})({});function vs(u,m){ie.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(vs,ie),r=vs.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,cr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ur(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ur(this):cr(this),this.readyState==3&&$l(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,ur(this))},r.Qa=function(u){this.g&&(this.response=u,ur(this))},r.ga=function(){this.g&&ur(this)};function ur(u){u.readyState=4,u.l=null,u.j=null,u.v=null,cr(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function cr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function qr(u){let m="";return Te(u,function(_,x){m+=x,m+=":",m+=_,m+=`\r
`}),m}function Ei(u,m,_){e:{for(x in _){var x=!1;break e}x=!0}x||(_=qr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):it(u,m,_))}function gt(u){ie.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(gt,ie);var sd=/^https?$/i,pa=["POST","PUT"];r=gt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sr.g(),this.v=this.o?fn(this.o):fn(sr),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){_s(this,q);return}if(u=_||"",_=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var F in x)_.set(F,x[F]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const q of x.keys())_.set(q,x.get(q));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),F=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(pa,m,void 0))||x||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ce]of _)this.g.setRequestHeader(q,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ro(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){_s(this,q)}};function _s(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,no(u),bn(u)}function no(u){u.A||(u.A=!0,C(u,"complete"),C(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,C(this,"complete"),C(this,"abort"),bn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bn(this,!0)),gt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ma(this):this.bb())},r.bb=function(){ma(this)};function ma(u){if(u.h&&typeof d<"u"&&(!u.v[1]||wn(u)!=4||u.Z()!=2)){if(u.u&&wn(u)==4)G(u.Ea,0,u);else if(C(u,"readystatechange"),wn(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var x;if(x=ce===0){var F=String(u.D).match(gs)[1]||null;!F&&p.self&&p.self.location&&(F=p.self.location.protocol.slice(0,-1)),x=!sd.test(F?F.toLowerCase():"")}_=x}if(_)C(u,"complete"),C(u,"success");else{u.m=6;try{var q=2<wn(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",no(u)}}finally{bn(u)}}}}function bn(u,m){if(u.g){ro(u);const _=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||C(u,"ready");try{_.onreadystatechange=x}catch{}}}function ro(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function wn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),We(m)}};function ga(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function io(u){const m={};u=(u.g&&2<=wn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(oe(u[x]))continue;var _=D(u[x]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[F]||[];m[F]=q,q.push(_)}N(m,function(x){return x.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ya(u){this.Aa=0,this.i=[],this.j=new ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sr("baseRetryDelayMs",5e3,u),this.cb=Sr("retryDelaySeedMs",1e4,u),this.Wa=Sr("forwardChannelMaxRetries",2,u),this.wa=Sr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ms(u&&u.concurrentRequestLimit),this.Da=new id,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ya.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,x){xt(0),this.W=u,this.H=m||{},_&&x!==void 0&&(this.H.OSID=_,this.H.OAID=x),this.F=this.X,this.I=Gl(this,null,this.W),Cr(this)};function qt(u){if(so(u),u.G==3){var m=u.U++,_=kn(u.I);if(it(_,"SID",u.K),it(_,"RID",m),it(_,"TYPE","terminate"),Gr(u,_),m=new or(u,u.j,m),m.L=2,m.v=vi(kn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Kl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ot(m)}ql(u)}function dr(u){u.g&&(va(u),u.g.cancel(),u.g=null)}function so(u){dr(u),u.u&&(p.clearTimeout(u.u),u.u=null),lo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function Cr(u){if(!An(u.h)&&!u.s){u.s=!0;var m=u.Ga;Le||pe(),de||(Le(),de=!0),Se.add(m,u),u.B=0}}function od(u,m){return Dl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=rr(R(u.Ga,u,m),Hl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new or(this,this.j,u);let q=this.o;if(this.S&&(q?(q=S(q),k(q,this.S)):q=this.S),this.m!==null||this.O||(F.H=q,q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var x=this.i[_];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(m+=x,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Ti(this,F,m),_=kn(this.I),it(_,"RID",u),it(_,"CVER",22),this.D&&it(_,"X-HTTP-Session-Id",this.D),Gr(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(qr(q)))+"&"+m:this.m&&Ei(_,this.m,q)),ha(this.h,F),this.Ua&&it(_,"TYPE","init"),this.P?(it(_,"$req",m),it(_,"SID","null"),F.T=!0,Xs(F,_,null)):Xs(F,_,m),this.G=2}}else this.G==3&&(u?oo(this,u):this.i.length==0||An(this.h)||oo(this))};function oo(u,m){var _;m?_=m.l:_=u.U++;const x=kn(u.I);it(x,"SID",u.K),it(x,"RID",_),it(x,"AID",u.T),Gr(u,x),u.m&&u.o&&Ei(x,u.m,u.o),_=new or(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ti(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ha(u.h,_),Xs(_,x,m)}function Gr(u,m){u.H&&Te(u.H,function(_,x){it(m,x,_)}),u.l&&mi({},function(_,x){it(m,x,_)})}function Ti(u,m,_){_=Math.min(u.i.length,_);var x=u.l?R(u.l.Na,u.l,u):null;e:{var F=u.i;let q=-1;for(;;){const ce=["count="+_];q==-1?0<_?(q=F[0].g,ce.push("ofs="+q)):q=0:ce.push("ofs="+q);let nt=!0;for(let jt=0;jt<_;jt++){let Ke=F[jt].g;const Ut=F[jt].map;if(Ke-=q,0>Ke)q=Math.max(0,F[jt].g-100),nt=!1;else try{Bl(Ut,ce,"req"+Ke+"_")}catch{x&&x(Ut)}}if(nt){x=ce.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,x}function ws(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Le||pe(),de||(Le(),de=!0),Se.add(m,u),u.v=0}}function ao(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=rr(R(u.Fa,u),Hl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=rr(R(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),dr(this),Wl(this))};function va(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Wl(u){u.g=new or(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=kn(u.qa);it(m,"RID","rpc"),it(m,"SID",u.K),it(m,"AID",u.T),it(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(m,"TO",u.ja),it(m,"TYPE","xmlhttp"),Gr(u,m),u.m&&u.o&&Ei(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=vi(kn(m)),_.m=null,_.P=!0,ca(_,u)}r.Za=function(){this.C!=null&&(this.C=null,dr(this),ao(this),xt(19))};function lo(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function uo(u,m){var _=null;if(u.g==m){lo(u),va(u),u.g=null;var x=2}else if(pn(u.h,m))_=m.D,Vl(u.h,m),x=1;else return;if(u.G!=0){if(m.o)if(x==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var F=u.B;x=st(),C(x,new Ks(x,_)),Cr(u)}else ws(u);else if(F=m.s,F==3||F==0&&0<m.X||!(x==1&&od(u,m)||x==2&&ao(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),F){case 1:Kr(u,5);break;case 4:Kr(u,10);break;case 3:Kr(u,6);break;default:Kr(u,2)}}}function Hl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Kr(u,m){if(u.j.info("Error code "+m),m==2){var _=R(u.fb,u),x=u.Xa;const F=!x;x=new Wr(x||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||ys(x,"https"),vi(x),F?rd(x.toString(),_):zl(x.toString(),_)}else xt(2);u.G=0,u.l&&u.l.sa(m),ql(u),so(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function ql(u){if(u.G=0,u.ka=[],u.l){const m=Ol(u.h);(m.length!=0||u.i.length!=0)&&(O(u.ka,m),O(u.ka,u.i),u.h.i.length=0,Y(u.i),u.i.length=0),u.l.ra()}}function Gl(u,m,_){var x=_ instanceof Wr?kn(_):new Wr(_);if(x.g!="")m&&(x.g=m+"."+x.g),gi(x,x.s);else{var F=p.location;x=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var q=new Wr(null);x&&ys(q,x),m&&(q.g=m),F&&gi(q,F),_&&(q.l=_),x=q}return _=u.D,m=u.ya,_&&m&&it(x,_,m),it(x,"VER",u.la),Gr(u,x),x}function Kl(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new gt(new Hr({eb:_})):new gt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function _a(){}r=_a.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function co(){}co.prototype.g=function(u,m){return new mn(u,m)};function mn(u,m){ie.call(this),this.g=new ya(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!oe(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!oe(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Rr(this)}W(mn,ie),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){qt(this.g)},mn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=lt(u),u=_);m.i.push(new jl(m.Ya++,u)),m.G==3&&Cr(m)},mn.prototype.N=function(){this.g.l=null,delete this.j,qt(this.g),delete this.g,mn.aa.N.call(this)};function Ql(u){Fn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}W(Ql,Fn);function Yl(){fi.call(this),this.status=1}W(Yl,fi);function Rr(u){this.g=u}W(Rr,_a),Rr.prototype.ua=function(){C(this.g,"a")},Rr.prototype.ta=function(u){C(this.g,new Ql(u))},Rr.prototype.sa=function(u){C(this.g,new Yl)},Rr.prototype.ra=function(){C(this.g,"b")},co.prototype.createWebChannel=co.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,L_=function(){return new co},O_=function(){return st()},V_=Un,rf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ys.NO_ERROR=0,Ys.TIMEOUT=8,Ys.HTTP_ERROR=6,rc=Ys,Al.COMPLETE="complete",D_=Al,Mn.EventType=en,en.OPEN="a",en.CLOSE="b",en.ERROR="c",en.MESSAGE="d",ie.prototype.listen=ie.prototype.K,Ka=Mn,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,j_=gt}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Ty="@firebase/firestore",xy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Pf("@firebase/firestore");function Do(){return Bs.logLevel}function ve(r,...e){if(Bs.logLevel<=He.DEBUG){const t=e.map(Bf);Bs.debug(`Firestore (${na}): ${r}`,...t)}}function ci(r,...e){if(Bs.logLevel<=He.ERROR){const t=e.map(Bf);Bs.error(`Firestore (${na}): ${r}`,...t)}}function Yi(r,...e){if(Bs.logLevel<=He.WARN){const t=e.map(Bf);Bs.warn(`Firestore (${na}): ${r}`,...t)}}function Bf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,M_(r,i,t)}function M_(r,e,t){let i=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ci(i),new Error(i)}function et(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||M_(e,o,i)}function Fe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends hi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ln.UNAUTHENTICATED)))}shutdown(){}}class b1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class N1{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ai,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ai)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string",31837,{l:i}),new F_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class j1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class D1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new j1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Iy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,On(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const i=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Iy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Iy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=O1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ue(r,e){return r<e?-1:r>e?1:0}function sf(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ue(i,o);{const l=U_(),d=L1(l.encode(Sy(r,t)),l.encode(Sy(e,t)));return d!==0?d:Ue(i,o)}}t+=i>65535?2:1}return Ue(r.length,e.length)}function Sy(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function L1(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Ue(r[t],e[t]);return Ue(r.length,e.length)}function Ho(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="__name__";class Nr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ne(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Nr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Nr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ue(e.length,t.length)}static compareSegments(e,t){const i=Nr.isNumericId(e),o=Nr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Nr.extractNumericId(e).compare(Nr.extractNumericId(t)):sf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gi.fromString(e.substring(4,e.length-2))}}class ft extends Nr{construct(e,t,i){return new ft(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ie(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const M1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Nr{construct(e,t,i){return new Yt(e,t,i)}static isValidIdentifier(e){return M1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cy}static keyField(){return new Yt([Cy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Ie(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Ie(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Ie(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(l(),o++)}if(l(),d)throw new Ie(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(ft.fromString(e))}static fromName(e){return new Re(ft.fromString(e).popFirst(5))}static empty(){return new Re(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(r,e,t){if(!t)throw new Ie(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function F1(r,e,t,i){if(e===!0&&i===!0)throw new Ie(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ry(r){if(!Re.isDocumentKey(r))throw new Ie(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Py(r){if(Re.isDocumentKey(r))throw new Ie(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function B_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Wf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ne(12329,{type:typeof r})}function wr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ie(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wf(r);throw new Ie(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Il(r,e){if(!B_(r))throw new Ie(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ie(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=-62135596800,ky=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ky);return new pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ay)throw new Ie(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ky}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Il(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ay;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:kt("string",pt._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new pt(0,0))}static max(){return new Oe(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=-1;function U1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(i===1e9?new pt(t+1,0):new pt(t,i));return new Ji(o,Re.empty(),e)}function z1(r){return new Ji(r.readTime,r.key,dl)}class Ji{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ji(Oe.min(),Re.empty(),dl)}static max(){return new Ji(Oe.max(),Re.empty(),dl)}}function B1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(r.documentKey,e.documentKey),t!==0?t:Ue(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class W1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==$1)throw r;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,i)=>{t(e)}))}static reject(e){return new Z(((t,i)=>{i(e)}))}static waitFor(e){return new Z(((t,i)=>{let o=0,l=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++l,d&&l===o&&t()}),(y=>i(y)))})),d=!0,l===o&&t()}))}static or(e){let t=Z.resolve(!1);for(const i of e)t=t.next((o=>o?Z.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new Z(((i,o)=>{const l=e.length,d=new Array(l);let p=0;for(let y=0;y<l;y++){const v=y;t(e[v]).next((E=>{d[v]=E,++p,p===l&&i(d)}),(E=>o(E)))}}))}static doWhile(e,t){return new Z(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function H1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ia(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Oc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf=-1;function Lc(r){return r==null}function vc(r){return r===0&&1/r==-1/0}function q1(r){return typeof r=="number"&&Number.isInteger(r)&&!vc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="";function G1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=by(e)),e=K1(r.get(t),e);return by(e)}function K1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case $_:t+="";break;default:t+=l}}return t}function by(r){return r+$_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ls(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function W_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Qt.RED,this.left=o??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Qt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jy(this.data.getIterator())}getIteratorFrom(e){return new jy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class jy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Ln([])}unionWith(e){let t=new Lt(Yt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new H_("Invalid base64 string: "+l):l}})(e);return new Xt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new Xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const Q1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(r){if(et(!!r,39018),typeof r=="string"){let e=0;const t=Q1.exec(r);if(et(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(r.seconds),nanos:St(r.nanos)}}function St(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Zi(r){return typeof r=="string"?Xt.fromBase64String(r):Xt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="server_timestamp",G_="__type__",K_="__previous_value__",Q_="__local_write_time__";function qf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[G_])===null||t===void 0?void 0:t.stringValue)===q_}function Mc(r){const e=r.mapValue.fields[K_];return qf(e)?Mc(e):e}function hl(r){const e=Xi(r.mapValue.fields[Q_].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t,i,o,l,d,p,y,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=E}}const _c="(default)";class fl{constructor(e,t){this.projectId=e,this.database=t||_c}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===_c}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="__type__",J1="__max__",Gu={mapValue:{}},J_="__vector__",wc="value";function es(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qf(r)?4:Z1(r)?9007199254740991:X1(r)?10:11:Ne(28295,{value:r})}function Ur(r,e){if(r===e)return!0;const t=es(r);if(t!==es(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return hl(r).isEqual(hl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Xi(o.timestampValue),p=Xi(l.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Zi(o.bytesValue).isEqual(Zi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return St(o.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(o.geoPointValue.longitude)===St(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return St(o.integerValue)===St(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=St(o.doubleValue),p=St(l.doubleValue);return d===p?vc(d)===vc(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return Ho(r.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Ny(d)!==Ny(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!Ur(d[y],p[y])))return!1;return!0})(r,e);default:return Ne(52216,{left:r})}}function pl(r,e){return(r.values||[]).find((t=>Ur(t,e)))!==void 0}function qo(r,e){if(r===e)return 0;const t=es(r),i=es(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const p=St(l.integerValue||l.doubleValue),y=St(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(r,e);case 3:return Dy(r.timestampValue,e.timestampValue);case 4:return Dy(hl(r),hl(e));case 5:return sf(r.stringValue,e.stringValue);case 6:return(function(l,d){const p=Zi(l),y=Zi(d);return p.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const p=l.split("/"),y=d.split("/");for(let v=0;v<p.length&&v<y.length;v++){const E=Ue(p[v],y[v]);if(E!==0)return E}return Ue(p.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const p=Ue(St(l.latitude),St(d.latitude));return p!==0?p:Ue(St(l.longitude),St(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Vy(r.arrayValue,e.arrayValue);case 10:return(function(l,d){var p,y,v,E;const I=l.fields||{},R=d.fields||{},z=(p=I[wc])===null||p===void 0?void 0:p.arrayValue,W=(y=R[wc])===null||y===void 0?void 0:y.arrayValue,Y=Ue(((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0,((E=W==null?void 0:W.values)===null||E===void 0?void 0:E.length)||0);return Y!==0?Y:Vy(z,W)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Gu.mapValue&&d===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(d===Gu.mapValue)return-1;const p=l.fields||{},y=Object.keys(p),v=d.fields||{},E=Object.keys(v);y.sort(),E.sort();for(let I=0;I<y.length&&I<E.length;++I){const R=sf(y[I],E[I]);if(R!==0)return R;const z=qo(p[y[I]],v[E[I]]);if(z!==0)return z}return Ue(y.length,E.length)})(r.mapValue,e.mapValue);default:throw Ne(23264,{le:t})}}function Dy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ue(r,e);const t=Xi(r),i=Xi(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function Vy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=qo(t[o],i[o]);if(l)return l}return Ue(t.length,i.length)}function Go(r){return of(r)}function of(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Xi(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Zi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Re.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=of(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of i)l?l=!1:o+=",",o+=`${d}:${of(t.fields[d])}`;return o+"}"})(r.mapValue):Ne(61005,{value:r})}function ic(r){switch(es(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mc(r);return e?16+ic(e):16;case 5:return 2*r.stringValue.length;case 6:return Zi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+ic(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return ls(i.fields,((l,d)=>{o+=l.length+ic(d)})),o})(r.mapValue);default:throw Ne(13486,{value:r})}}function af(r){return!!r&&"integerValue"in r}function Gf(r){return!!r&&"arrayValue"in r}function Oy(r){return!!r&&"nullValue"in r}function Ly(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function sc(r){return!!r&&"mapValue"in r}function X1(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Y_])===null||t===void 0?void 0:t.stringValue)===J_}function nl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ls(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=nl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Z1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===J1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!sc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(t)}setAll(e){let t=Yt.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=p.popLast()}d?i[p.lastSegment()]=nl(d):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());sc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];sc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ls(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Pn(nl(this.value))}}function X_(r){const e=[];return ls(r.fields,((t,i)=>{const o=new Yt([t]);if(sc(i)){const l=X_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,i,o,l,d,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=d,this.documentState=p}static newInvalidDocument(e){return new un(e,0,Oe.min(),Oe.min(),Oe.min(),Pn.empty(),0)}static newFoundDocument(e,t,i,o){return new un(e,1,t,Oe.min(),i,o,0)}static newNoDocument(e,t){return new un(e,2,t,Oe.min(),Oe.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Oe.min(),Oe.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t){this.position=e,this.inclusive=t}}function My(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?i=Re.comparator(Re.fromName(d.referenceValue),t.key):i=qo(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Fy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ur(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function eC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{}class Ot extends Z_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new nC(e,t,i):t==="array-contains"?new sC(e,i):t==="in"?new oC(e,i):t==="not-in"?new aC(e,i):t==="array-contains-any"?new lC(e,i):new Ot(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new rC(e,i):new iC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qo(t,this.value)):t!==null&&es(this.value)===es(t)&&this.matchesComparison(qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zr extends Z_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new zr(e,t)}matches(e){return e0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function e0(r){return r.op==="and"}function t0(r){return tC(r)&&e0(r)}function tC(r){for(const e of r.filters)if(e instanceof zr)return!1;return!0}function lf(r){if(r instanceof Ot)return r.field.canonicalString()+r.op.toString()+Go(r.value);if(t0(r))return r.filters.map((e=>lf(e))).join(",");{const e=r.filters.map((t=>lf(t))).join(",");return`${r.op}(${e})`}}function n0(r,e){return r instanceof Ot?(function(i,o){return o instanceof Ot&&i.op===o.op&&i.field.isEqual(o.field)&&Ur(i.value,o.value)})(r,e):r instanceof zr?(function(i,o){return o instanceof zr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,d,p)=>l&&n0(d,o.filters[p])),!0):!1})(r,e):void Ne(19439)}function r0(r){return r instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${Go(t.value)}`})(r):r instanceof zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(r0).join(" ,")+"}"})(r):"Filter"}class nC extends Ot{constructor(e,t,i){super(e,t,i),this.key=Re.fromName(i.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class rC extends Ot{constructor(e,t){super(e,"in",t),this.keys=i0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iC extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=i0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function i0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Re.fromName(i.referenceValue)))}class sC extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gf(t)&&pl(t.arrayValue,this.value)}}class oC extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pl(this.value.arrayValue,t)}}class aC extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pl(this.value.arrayValue,t)}}class lC extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>pl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t=null,i=[],o=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=d,this.endAt=p,this.Pe=null}}function Uy(r,e=null,t=[],i=[],o=null,l=null,d=null){return new uC(r,e,t,i,o,l,d)}function Kf(r){const e=Fe(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>lf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Lc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Go(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Go(i))).join(",")),e.Pe=t}return e.Pe}function Qf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!eC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!n0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Fy(r.startAt,e.startAt)&&Fy(r.endAt,e.endAt)}function uf(r){return Re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t=null,i=[],o=[],l=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=y,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function cC(r,e,t,i,o,l,d,p){return new Fc(r,e,t,i,o,l,d,p)}function Yf(r){return new Fc(r)}function zy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function dC(r){return r.collectionGroup!==null}function rl(r){const e=Fe(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Lt(Yt.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Tc(l,i))})),t.has(Yt.keyField().canonicalString())||e.Te.push(new Tc(Yt.keyField(),i))}return e.Te}function Or(r){const e=Fe(r);return e.Ie||(e.Ie=hC(e,rl(r))),e.Ie}function hC(r,e){if(r.limitType==="F")return Uy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Tc(o.field,l)}));const t=r.endAt?new Ec(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Ec(r.startAt.position,r.startAt.inclusive):null;return Uy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function cf(r,e,t){return new Fc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Uc(r,e){return Qf(Or(r),Or(e))&&r.limitType===e.limitType}function s0(r){return`${Kf(Or(r))}|lt:${r.limitType}`}function Vo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>r0(o))).join(", ")}]`),Lc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Go(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Go(o))).join(",")),`Target(${i})`})(Or(r))}; limitType=${r.limitType})`}function zc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Re.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of rl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,y){const v=My(d,p,y);return d.inclusive?v<=0:v<0})(i.startAt,rl(i),o)||i.endAt&&!(function(d,p,y){const v=My(d,p,y);return d.inclusive?v>=0:v>0})(i.endAt,rl(i),o))})(r,e)}function fC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function o0(r){return(e,t)=>{let i=!1;for(const o of rl(r)){const l=pC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function pC(r,e,t){const i=r.field.isKeyField()?Re.comparator(e.key,t.key):(function(l,d,p){const y=d.data.field(l),v=p.data.field(l);return y!==null&&v!==null?qo(y,v):Ne(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return W_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new wt(Re.comparator);function di(){return mC}const a0=new wt(Re.comparator);function Qa(...r){let e=a0;for(const t of r)e=e.insert(t.key,t);return e}function l0(r){let e=a0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Os(){return il()}function u0(){return il()}function il(){return new Hs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const gC=new wt(Re.comparator),yC=new Lt(Re.comparator);function qe(...r){let e=yC;for(const t of r)e=e.add(t);return e}const vC=new Lt(Ue);function _C(){return vC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}function c0(r){return{integerValue:""+r}}function wC(r,e){return q1(e)?c0(e):Jf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this._=void 0}}function EC(r,e,t){return r instanceof xc?(function(o,l){const d={fields:{[G_]:{stringValue:q_},[Q_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&qf(l)&&(l=Mc(l)),l&&(d.fields[K_]=l),{mapValue:d}})(t,e):r instanceof ml?h0(r,e):r instanceof gl?f0(r,e):(function(o,l){const d=d0(o,l),p=By(d)+By(o.Ee);return af(d)&&af(o.Ee)?c0(p):Jf(o.serializer,p)})(r,e)}function TC(r,e,t){return r instanceof ml?h0(r,e):r instanceof gl?f0(r,e):t}function d0(r,e){return r instanceof Ic?(function(i){return af(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class xc extends Bc{}class ml extends Bc{constructor(e){super(),this.elements=e}}function h0(r,e){const t=p0(e);for(const i of r.elements)t.some((o=>Ur(o,i)))||t.push(i);return{arrayValue:{values:t}}}class gl extends Bc{constructor(e){super(),this.elements=e}}function f0(r,e){let t=p0(e);for(const i of r.elements)t=t.filter((o=>!Ur(o,i)));return{arrayValue:{values:t}}}class Ic extends Bc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function By(r){return St(r.integerValue||r.doubleValue)}function p0(r){return Gf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function xC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof ml&&o instanceof ml||i instanceof gl&&o instanceof gl?Ho(i.elements,o.elements,Ur):i instanceof Ic&&o instanceof Ic?Ur(i.Ee,o.Ee):i instanceof xc&&o instanceof xc})(r.transform,e.transform)}class IC{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class $c{}function m0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Xf(r.key,Xn.none()):new Sl(r.key,r.data,Xn.none());{const t=r.data,i=Pn.empty();let o=new Lt(Yt.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),o=o.add(l)}return new us(r.key,i,new Ln(o.toArray()),Xn.none())}}function SC(r,e,t){r instanceof Sl?(function(o,l,d){const p=o.value.clone(),y=Wy(o.fieldTransforms,l,d.transformResults);p.setAll(y),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,t):r instanceof us?(function(o,l,d){if(!oc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const p=Wy(o.fieldTransforms,l,d.transformResults),y=l.data;y.setAll(g0(o)),y.setAll(p),l.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function sl(r,e,t,i){return r instanceof Sl?(function(l,d,p,y){if(!oc(l.precondition,d))return p;const v=l.value.clone(),E=Hy(l.fieldTransforms,y,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof us?(function(l,d,p,y){if(!oc(l.precondition,d))return p;const v=Hy(l.fieldTransforms,y,d),E=d.data;return E.setAll(g0(l)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(r,e,t,i):(function(l,d,p){return oc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,t)}function CC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=d0(i.transform,o||null);l!=null&&(t===null&&(t=Pn.empty()),t.set(i.field,l))}return t||null}function $y(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ho(i,o,((l,d)=>xC(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Sl extends $c{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class us extends $c{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function g0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Wy(r,e,t){const i=new Map;et(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,p=e.data.field(l.field);i.set(l.field,TC(d,p,t[o]))}return i}function Hy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);i.set(o.field,EC(l,d,e))}return i}class Xf extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RC extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&SC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=sl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=sl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=u0();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let p=this.applyToLocalView(d,l.mutatedFields);p=t.has(o.key)?null:p;const y=m0(d,p);y!==null&&i.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,((t,i)=>$y(t,i)))&&Ho(this.baseMutations,e.baseMutations,((t,i)=>$y(t,i)))}}class Zf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){et(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return gC})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,i[d].version);return new Zf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Qe;function bC(r){switch(r){case ee.OK:return Ne(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ne(15467,{code:r})}}function y0(r){if(r===void 0)return ci("GRPC error has no .code"),ee.UNKNOWN;switch(r){case At.OK:return ee.OK;case At.CANCELLED:return ee.CANCELLED;case At.UNKNOWN:return ee.UNKNOWN;case At.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case At.INTERNAL:return ee.INTERNAL;case At.UNAVAILABLE:return ee.UNAVAILABLE;case At.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case At.NOT_FOUND:return ee.NOT_FOUND;case At.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case At.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case At.ABORTED:return ee.ABORTED;case At.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case At.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case At.DATA_LOSS:return ee.DATA_LOSS;default:return Ne(39323,{code:r})}}(Qe=At||(At={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Gi([4294967295,4294967295],0);function qy(r){const e=U_().encode(r),t=new N_;return t.update(e),new Uint8Array(t.digest())}function Gy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Gi([t,i],0),new Gi([o,l],0)]}class ep{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ya(`Invalid padding: ${t}`);if(i<0)throw new Ya(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ya(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ya(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Gi.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Gi.fromNumber(i)));return o.compare(NC)===1&&(o=new Gi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=qy(e),[i,o]=Gy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new ep(l,o,t);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.fe===0)return;const t=qy(e),[i,o]=Gy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Wc(Oe.min(),o,new wt(Ue),di(),qe())}}class Cl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Cl(i,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class v0{constructor(e,t){this.targetId=e,this.De=t}}class _0{constructor(e,t,i=Xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Ky{constructor(){this.ve=0,this.Ce=Qy(),this.Fe=Xt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=qe(),t=qe(),i=qe();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ne(38017,{changeType:l})}})),new Cl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Qy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class jC{constructor(e){this.We=e,this.Ge=new Map,this.ze=di(),this.je=Ku(),this.Je=Ku(),this.He=new wt(Ue)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(uf(l))if(i===0){const d=new Re(l.path);this.Xe(t,d,un.newNoDocument(d,Oe.min()))}else et(i===1,20013,{expectedCount:i});else{const d=this.ot(t);if(d!==i){const p=this._t(e),y=p?this.ut(p,e,d):1;if(y!==0){this.rt(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let d,p;try{d=Zi(i).toUint8Array()}catch(y){if(y instanceof H_)return Yi("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new ep(d,o,l)}catch(y){return Yi(y instanceof Ya?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.fe===0?null:p}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const d=this.We.lt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,d)=>{const p=this.st(d);if(p){if(l.current&&uf(p.target)){const y=new Re(p.target.path);this.Tt(y).has(d)||this.It(d,y)||this.Xe(d,y,un.newNoDocument(y,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}}));let i=qe();this.Je.forEach(((l,d)=>{let p=!0;d.forEachWhile((y=>{const v=this.st(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ze.forEach(((l,d)=>d.setReadTime(e)));const o=new Wc(e,t,this.He,this.ze,i);return this.ze=di(),this.je=Ku(),this.Je=Ku(),this.He=new wt(Ue),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Ky,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Lt(Ue),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Lt(Ue),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ky),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ku(){return new wt(Re.comparator)}function Qy(){return new wt(Re.comparator)}const DC={asc:"ASCENDING",desc:"DESCENDING"},VC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OC={and:"AND",or:"OR"};class LC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function df(r,e){return r.useProto3Json||Lc(e)?e:{value:e}}function Sc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function MC(r,e){return Sc(r,e.toTimestamp())}function Lr(r){return et(!!r,49232),Oe.fromTimestamp((function(t){const i=Xi(t);return new pt(i.seconds,i.nanos)})(r))}function tp(r,e){return hf(r,e).canonicalString()}function hf(r,e){const t=(function(o){return new ft(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function E0(r){const e=ft.fromString(r);return et(C0(e),10190,{key:e.toString()}),e}function ff(r,e){return tp(r.databaseId,e.path)}function Fh(r,e){const t=E0(e);if(t.get(1)!==r.databaseId.projectId)throw new Ie(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ie(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Re(x0(t))}function T0(r,e){return tp(r.databaseId,e)}function FC(r){const e=E0(r);return e.length===4?ft.emptyPath():x0(e)}function pf(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function x0(r){return et(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Yy(r,e,t){return{name:ff(r,e),fields:t.value.mapValue.fields}}function UC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ne(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(et(E===void 0||typeof E=="string",58123),Xt.fromBase64String(E||"")):(et(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Xt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const E=v.code===void 0?ee.UNKNOWN:y0(v.code);return new Ie(E,v.message||"")})(d);t=new _0(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Fh(r,i.document.name),l=Lr(i.document.updateTime),d=i.document.createTime?Lr(i.document.createTime):Oe.min(),p=new Pn({mapValue:{fields:i.document.fields}}),y=un.newFoundDocument(o,l,d,p),v=i.targetIds||[],E=i.removedTargetIds||[];t=new ac(v,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Fh(r,i.document),l=i.readTime?Lr(i.readTime):Oe.min(),d=un.newNoDocument(o,l),p=i.removedTargetIds||[];t=new ac([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Fh(r,i.document),l=i.removedTargetIds||[];t=new ac([],l,o,null)}else{if(!("filter"in e))return Ne(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,d=new kC(o,l),p=i.targetId;t=new v0(p,d)}}return t}function zC(r,e){let t;if(e instanceof Sl)t={update:Yy(r,e.key,e.value)};else if(e instanceof Xf)t={delete:ff(r,e.key)};else if(e instanceof us)t={update:Yy(r,e.key,e.data),updateMask:YC(e.fieldMask)};else{if(!(e instanceof RC))return Ne(16599,{Rt:e.type});t={verify:ff(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const p=d.transform;if(p instanceof xc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ml)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof gl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Ic)return{fieldPath:d.field.canonicalString(),increment:p.Ee};throw Ne(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:MC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ne(27497)})(r,e.precondition)),t}function BC(r,e){return r&&r.length>0?(et(e!==void 0,14353),r.map((t=>(function(o,l){let d=o.updateTime?Lr(o.updateTime):Lr(l);return d.isEqual(Oe.min())&&(d=Lr(l)),new IC(d,o.transformResults||[])})(t,e)))):[]}function $C(r,e){return{documents:[T0(r,e.path)]}}function WC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=T0(r,o);const l=(function(v){if(v.length!==0)return S0(zr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(v){if(v.length!==0)return v.map((E=>(function(R){return{field:Oo(R.field),direction:GC(R.dir)}})(E)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=df(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function HC(r){let e=FC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){et(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(I){const R=I0(I);return R instanceof zr&&t0(R)?R.getFilters():[R]})(t.where));let d=[];t.orderBy&&(d=(function(I){return I.map((R=>(function(W){return new Tc(Lo(W.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(R)))})(t.orderBy));let p=null;t.limit&&(p=(function(I){let R;return R=typeof I=="object"?I.value:I,Lc(R)?null:R})(t.limit));let y=null;t.startAt&&(y=(function(I){const R=!!I.before,z=I.values||[];return new Ec(z,R)})(t.startAt));let v=null;return t.endAt&&(v=(function(I){const R=!I.before,z=I.values||[];return new Ec(z,R)})(t.endAt)),cC(e,o,d,l,p,"F",y,v)}function qC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function I0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Lo(t.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Lo(t.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Lo(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Lo(t.unaryFilter.field);return Ot.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ot.create(Lo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return zr.create(t.compositeFilter.filters.map((i=>I0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(r):Ne(30097,{filter:r})}function GC(r){return DC[r]}function KC(r){return VC[r]}function QC(r){return OC[r]}function Oo(r){return{fieldPath:r.canonicalString()}}function Lo(r){return Yt.fromServerFormat(r.fieldPath)}function S0(r){return r instanceof Ot?(function(t){if(t.op==="=="){if(Ly(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NAN"}};if(Oy(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ly(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NAN"}};if(Oy(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(t.field),op:KC(t.op),value:t.value}}})(r):r instanceof zr?(function(t){const i=t.getFilters().map((o=>S0(o)));return i.length===1?i[0]:{compositeFilter:{op:QC(t.op),filters:i}}})(r):Ne(54877,{filter:r})}function YC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function C0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t,i,o,l=Oe.min(),d=Oe.min(),p=Xt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.gt=e}}function XC(r){const e=HC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Dn=new eR}addToCollectionParentIndex(e,t){return this.Dn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Ji.min())}updateCollectionGroup(e,t,i){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class eR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Lt(ft.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Lt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R0=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(R0,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ko(0)}static ur(){return new Ko(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="LruGarbageCollector",tR=1048576;function Zy([r,e],[t,i]){const o=Ue(r,t);return o===0?Ue(e,i):o}class nR{constructor(e){this.Tr=e,this.buffer=new Lt(Zy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Zy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ve(Xy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ia(t)?ve(Xy,"Ignoring IndexedDB error during garbage collection: ",t):await ra(t)}await this.Rr(3e5)}))}}class iR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Oc.ue);const i=new nR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Jy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,d,p,y,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,d=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,p=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(v=Date.now(),Do()<=He.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${l} targets in `+(y-p)+`ms
	Removed ${I} documents in `+(v-y)+`ms
Total Duration: ${v-E}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function sR(r,e){return new iR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.changes=new Hs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Z.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&sl(i.mutation,o,Ln.empty(),pt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,qe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=qe()){const o=Os();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let d=Qa();return l.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=Os();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,qe())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,i,o){let l=di();const d=il(),p=(function(){return il()})();return t.forEach(((y,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof us)?l=l.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),sl(E.mutation,v,E.mutation.getFieldMask(),pt.now())):d.set(v.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((v,E)=>d.set(v,E))),t.forEach(((v,E)=>{var I;return p.set(v,new aR(E,(I=d.get(v))!==null&&I!==void 0?I:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=il();let o=new wt(((d,p)=>d-p)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let E=i.get(y)||Ln.empty();E=p.applyToLocalView(v,E),i.set(y,E);const I=(o.get(p.batchId)||qe()).add(y);o=o.insert(p.batchId,I)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),v=y.key,E=y.value,I=u0();E.forEach((R=>{if(!l.has(R)){const z=m0(t.get(R),i.get(R));z!==null&&I.set(R,z),l=l.add(R)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,I))}return Z.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return Re.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Z.resolve(Os());let p=dl,y=l;return d.next((v=>Z.forEach(v,((E,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),l.get(E)?Z.resolve():this.remoteDocumentCache.getEntry(e,E).next((R=>{y=y.insert(E,R)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,y,v,qe()))).next((E=>({batchId:p,changes:l0(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((i=>{let o=Qa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let d=Qa();return this.indexManager.getCollectionParents(e,l).next((p=>Z.forEach(p,(y=>{const v=(function(I,R){return new Fc(R,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((I,R)=>{d=d.insert(I,R)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((d=>{l.forEach(((y,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,un.newInvalidDocument(E)))}));let p=Qa();return d.forEach(((y,v)=>{const E=l.get(y);E!==void 0&&sl(E.mutation,v,Ln.empty(),pt.now()),zc(t,v)&&(p=p.insert(y,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Lr(o.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:XC(o.bundledQuery),readTime:Lr(o.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.overlays=new wt(Re.comparator),this.kr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Os();return Z.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),Z.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),Z.resolve()}getOverlaysForCollection(e,t,i){const o=Os(),l=t.length+1,d=new Re(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new wt(((v,E)=>v-E));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=Os(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const p=Os(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,E)=>p.set(v,E))),!(p.size()>=o)););return Z.resolve(p)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new AC(t,i));let l=this.kr.get(t);l===void 0&&(l=qe(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.qr=new Lt(Wt.Qr),this.$r=new Lt(Wt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Wt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Wt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Re(new ft([])),i=new Wt(t,e),o=new Wt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(d=>{this.Wr(d),l.push(d.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Re(new ft([])),i=new Wt(t,e),o=new Wt(t,e+1);let l=qe();return this.$r.forEachInRange([i,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Wt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Wt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Re.comparator(e.key,t.key)||Ue(e.Hr,t.Hr)}static Ur(e,t){return Ue(e.Hr,t.Hr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Lt(Wt.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new PC(l,t,i,o);this.mutationQueue.push(d);for(const p of o)this.Yr=this.Yr.add(new Wt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Z.resolve(d)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return Z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Hf:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Wt(t,0),o=new Wt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(d=>{const p=this.Zr(d.Hr);l.push(p)})),Z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lt(Ue);return t.forEach((o=>{const l=new Wt(o,0),d=new Wt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],(p=>{i=i.add(p.Hr)}))})),Z.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Re.isDocumentKey(l)||(l=l.child(""));const d=new Wt(new Re(l),0);let p=new Lt(Ue);return this.Yr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(y.Hr)),!0)}),d),Z.resolve(this.ei(p))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){et(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Z.forEach(t.mutations,(o=>{const l=new Wt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Wt(t,0),o=this.Yr.firstAfterOrEqual(i);return Z.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.ni=e,this.docs=(function(){return new wt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Z.resolve(i?i.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let i=di();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():un.newInvalidDocument(o))})),Z.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=di();const d=t.path,p=new Re(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:v,value:{document:E}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||B1(z1(E),i)<=0||(o.has(E.key)||zc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Z.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ne(9500)}ri(e,t){return Z.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new pR(this)}getSize(e){return Z.resolve(this.size)}}class pR extends oR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),Z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.persistence=e,this.ii=new Hs((t=>Kf(t)),Qf),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.si=0,this.oi=new np,this.targetCount=0,this._i=Ko.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Z.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ko(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.hr(t),Z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((d,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),Z.waitFor(l).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return Z.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Z.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),Z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return Z.resolve(i)}containsKey(e,t){return Z.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Oc(0),this.ci=!1,this.ci=!0,this.li=new dR,this.referenceDelegate=e(this),this.hi=new mR(this),this.indexManager=new ZC,this.remoteDocumentCache=(function(o){return new fR(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new JC(t),this.Ti=new uR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new hR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const o=new gR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return Z.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class gR extends W1{constructor(e){super(),this.currentSequenceNumber=e}}class rp{constructor(e){this.persistence=e,this.Ai=new np,this.Ri=null}static Vi(e){return new rp(e)}get mi(){if(this.Ri)return this.Ri;throw Ne(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Z.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,(i=>{const o=Re.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Oe.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return Z.or([()=>Z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Cc{constructor(e,t){this.persistence=e,this.gi=new Hs((i=>G1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=sR(this,t)}static Vi(e,t){return new Cc(e,t)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return Z.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?Z.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(d=>this.Sr(e,d,t).next((p=>{p||(i++,l.removeEntry(d,Oe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ic(e.data.value)),t}Sr(e,t,i){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return Z.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=qe(),o=qe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ip(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return JT()?8:H1(cn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new yR;return this.ws(e,t,d).next((p=>{if(l.result=p,this.Rs)return this.Ss(e,t,d,p.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Do()<=He.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(Do()<=He.DEBUG&&ve("QueryEngine","Query:",Vo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Do()<=He.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(t))):Z.resolve())}ps(e,t){if(zy(t))return Z.resolve(null);let i=Or(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=cf(t,null,"F"),i=Or(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=qe(...l);return this.gs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.bs(t,p);return this.Ds(t,v,d,y.readTime)?this.ps(e,cf(t,null,"F")):this.vs(e,v,t,y)}))))})))))}ys(e,t,i,o){return zy(t)||o.isEqual(Oe.min())?Z.resolve(null):this.gs.getDocuments(e,i).next((l=>{const d=this.bs(t,l);return this.Ds(t,d,i,o)?Z.resolve(null):(Do()<=He.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Vo(t)),this.vs(e,d,t,U1(o,dl)).next((p=>p)))}))}bs(e,t){let i=new Lt(o0(e));return t.forEach(((o,l)=>{zc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Do()<=He.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Vo(t)),this.gs.getDocumentsMatchingQuery(e,t,Ji.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="LocalStore",_R=3e8;class wR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new wt(Ue),this.Ms=new Hs((l=>Kf(l)),Qf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function ER(r,e,t,i){return new wR(r,e,t,i)}async function A0(r,e){const t=Fe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],p=[];let y=qe();for(const v of o){d.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}for(const v of l){p.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(i,y).next((v=>({Bs:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function TR(r,e){const t=Fe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(p,y,v,E){const I=v.batch,R=I.keys();let z=Z.resolve();return R.forEach((W=>{z=z.next((()=>E.getEntry(y,W))).next((Y=>{const O=v.docVersions.get(W);et(O!==null,48541),Y.version.compareTo(O)<0&&(I.applyToRemoteDocument(Y,v),Y.isValidDocument()&&(Y.setReadTime(v.commitVersion),E.addEntry(Y)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(y,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let y=qe();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(y=y.add(p.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function k0(r){const e=Fe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function xR(r,e){const t=Fe(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const p=[];e.targetChanges.forEach(((E,I)=>{const R=o.get(I);if(!R)return;p.push(t.hi.removeMatchingKeys(l,E.removedDocuments,I).next((()=>t.hi.addMatchingKeys(l,E.addedDocuments,I))));let z=R.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?z=z.withResumeToken(Xt.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):E.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(E.resumeToken,i)),o=o.insert(I,z),(function(Y,O,ae){return Y.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=_R?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0})(R,z,E)&&p.push(t.hi.updateTargetData(l,z))}));let y=di(),v=qe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),p.push(IR(l,d,e.documentUpdates).next((E=>{y=E.Ls,v=E.ks}))),!i.isEqual(Oe.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next((I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(E)}return Z.waitFor(p).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,v))).next((()=>y))})).then((l=>(t.Fs=o,l)))}function IR(r,e,t){let i=qe(),o=qe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let d=di();return t.forEach(((p,y)=>{const v=l.get(p);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(Oe.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):ve(sp,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",y.version)})),{Ls:d,ks:o}}))}function SR(r,e){const t=Fe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Hf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function CR(r,e){const t=Fe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,Z.resolve(o)):t.hi.allocateTargetId(i).next((d=>(o=new Bi(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function mf(r,e,t){const i=Fe(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ia(d))throw d;ve(sp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function ev(r,e,t){const i=Fe(r);let o=Oe.min(),l=qe();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,v,E){const I=Fe(y),R=I.Ms.get(E);return R!==void 0?Z.resolve(I.Fs.get(R)):I.hi.getTargetData(v,E)})(i,d,Or(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{l=y}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,t?o:Oe.min(),t?l:qe()))).next((p=>(RR(i,fC(e),p),{documents:p,qs:l})))))}function RR(r,e,t){let i=r.xs.get(e)||Oe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class tv{constructor(){this.activeTargetIds=_C()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PR{constructor(){this.Fo=new tv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new tv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="ConnectivityMonitor";class rv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ve(nv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ve(nv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function gf(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="RestConnection",kR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===_c?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const d=gf(),p=this.Go(e,t.toUriEncodedString());ve(Uh,`Sending RPC '${e}' ${d}:`,p,i);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(y,o,l);const{host:v}=new URL(p),E=Zo(v);return this.jo(e,p,y,i,E).then((I=>(ve(Uh,`Received RPC '${e}' ${d}: `,I),I)),(I=>{throw Yi(Uh,`RPC '${e}' ${d} failed with error: `,I,"url: ",p,"request:",i),I}))}Jo(e,t,i,o,l,d){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+na})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=kR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class jR extends bR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const d=gf();return new Promise(((p,y)=>{const v=new j_;v.setWithCredentials(!0),v.listenOnce(D_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case rc.NO_ERROR:const I=v.getResponseJson();ve(on,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),p(I);break;case rc.TIMEOUT:ve(on,`RPC '${e}' ${d} timed out`),y(new Ie(ee.DEADLINE_EXCEEDED,"Request time out"));break;case rc.HTTP_ERROR:const R=v.getStatus();if(ve(on,`RPC '${e}' ${d} failed with status:`,R,"response text:",v.getResponseText()),R>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const W=z==null?void 0:z.error;if(W&&W.status&&W.message){const Y=(function(ae){const oe=ae.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(oe)>=0?oe:ee.UNKNOWN})(W.status);y(new Ie(Y,W.message))}else y(new Ie(ee.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new Ie(ee.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{ve(on,`RPC '${e}' ${d} completed.`)}}));const E=JSON.stringify(o);ve(on,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",E,i,15)}))}P_(e,t,i){const o=gf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=L_(),p=O_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.zo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const E=l.join("");ve(on,`Creating RPC '${e}' stream ${o}: ${E}`,y);const I=d.createWebChannel(E,y);this.T_(I);let R=!1,z=!1;const W=new NR({Ho:O=>{z?ve(on,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(R||(ve(on,`Opening RPC '${e}' stream ${o} transport.`),I.open(),R=!0),ve(on,`RPC '${e}' stream ${o} sending:`,O),I.send(O))},Yo:()=>I.close()}),Y=(O,ae,oe)=>{O.listen(ae,(ue=>{try{oe(ue)}catch(K){setTimeout((()=>{throw K}),0)}}))};return Y(I,Ka.EventType.OPEN,(()=>{z||(ve(on,`RPC '${e}' stream ${o} transport opened.`),W.s_())})),Y(I,Ka.EventType.CLOSE,(()=>{z||(z=!0,ve(on,`RPC '${e}' stream ${o} transport closed`),W.__(),this.I_(I))})),Y(I,Ka.EventType.ERROR,(O=>{z||(z=!0,Yi(on,`RPC '${e}' stream ${o} transport errored. Name:`,O.name,"Message:",O.message),W.__(new Ie(ee.UNAVAILABLE,"The operation could not be completed")))})),Y(I,Ka.EventType.MESSAGE,(O=>{var ae;if(!z){const oe=O.data[0];et(!!oe,16349);const ue=oe,K=(ue==null?void 0:ue.error)||((ae=ue[0])===null||ae===void 0?void 0:ae.error);if(K){ve(on,`RPC '${e}' stream ${o} received error:`,K);const fe=K.status;let Te=(function(P){const k=At[P];if(k!==void 0)return y0(k)})(fe),N=K.message;Te===void 0&&(Te=ee.INTERNAL,N="Unknown error status: "+fe+" with message "+K.message),z=!0,W.__(new Ie(Te,N)),I.close()}else ve(on,`RPC '${e}' stream ${o} received:`,oe),W.a_(oe)}})),Y(p,V_.STAT_EVENT,(O=>{O.stat===rf.PROXY?ve(on,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===rf.NOPROXY&&ve(on,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.o_()}),0),W}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(r){return new LC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="PersistentStream";class N0{constructor(e,t,i,o,l,d,p,y){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new b0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(ci(t.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new Ie(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ve(iv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ve(iv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DR extends N0{constructor(e,t,i,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=UC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Oe.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Oe.min():d.readTime?Lr(d.readTime):Oe.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=pf(this.serializer),t.addTarget=(function(l,d){let p;const y=d.target;if(p=uf(y)?{documents:$C(l,y)}:{query:WC(l,y).Vt},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=w0(l,d.resumeToken);const v=df(l,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(Oe.min())>0){p.readTime=Sc(l,d.snapshotVersion.toTimestamp());const v=df(l,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=qC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=pf(this.serializer),t.removeTarget=e,this.k_(t)}}class VR extends N0{constructor(e,t,i,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=BC(e.writeResults,e.commitTime),i=Lr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=pf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>zC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{}class LR extends OR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Ie(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,hf(t,i),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ie(ee.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Jo(e,hf(t,i),o,d,p,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ie(ee.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class MR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ci(t),this._a=!1):ve("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="RemoteStore";class FR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{qs(this)&&(ve($s,"Restarting streams for network reachability change."),await(async function(y){const v=Fe(y);v.Ia.add(4),await Rl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await qc(v)})(this))}))})),this.Aa=new MR(i,o)}}async function qc(r){if(qs(r))for(const e of r.da)await e(!0)}async function Rl(r){for(const e of r.da)await e(!1)}function j0(r,e){const t=Fe(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),up(t)?lp(t):sa(t).x_()&&ap(t,e))}function op(r,e){const t=Fe(r),i=sa(t);t.Ta.delete(e),i.x_()&&D0(t,e),t.Ta.size===0&&(i.x_()?i.B_():qs(t)&&t.Aa.set("Unknown"))}function ap(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sa(r).H_(e)}function D0(r,e){r.Ra.$e(e),sa(r).Y_(e)}function lp(r){r.Ra=new jC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),sa(r).start(),r.Aa.aa()}function up(r){return qs(r)&&!sa(r).M_()&&r.Ta.size>0}function qs(r){return Fe(r).Ia.size===0}function V0(r){r.Ra=void 0}async function UR(r){r.Aa.set("Online")}async function zR(r){r.Ta.forEach(((e,t)=>{ap(r,e)}))}async function BR(r,e){V0(r),up(r)?(r.Aa.la(e),lp(r)):r.Aa.set("Unknown")}async function $R(r,e,t){if(r.Aa.set("Online"),e instanceof _0&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const p of l.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ta.delete(p),o.Ra.removeTarget(p))})(r,e)}catch(i){ve($s,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Rc(r,i)}else if(e instanceof ac?r.Ra.Ye(e):e instanceof v0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Oe.min()))try{const i=await k0(r.localStore);t.compareTo(i)>=0&&await(function(l,d){const p=l.Ra.Pt(d);return p.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const E=l.Ta.get(v);E&&l.Ta.set(v,E.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,v)=>{const E=l.Ta.get(y);if(!E)return;l.Ta.set(y,E.withResumeToken(Xt.EMPTY_BYTE_STRING,E.snapshotVersion)),D0(l,y);const I=new Bi(E.target,y,v,E.sequenceNumber);ap(l,I)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){ve($s,"Failed to raise snapshot:",i),await Rc(r,i)}}async function Rc(r,e,t){if(!ia(e))throw e;r.Ia.add(1),await Rl(r),r.Aa.set("Offline"),t||(t=()=>k0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ve($s,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await qc(r)}))}function O0(r,e){return e().catch((t=>Rc(r,t,e)))}async function Gc(r){const e=Fe(r),t=ts(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Hf;for(;WR(e);)try{const o=await SR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,HR(e,o)}catch(o){await Rc(e,o)}L0(e)&&M0(e)}function WR(r){return qs(r)&&r.Pa.length<10}function HR(r,e){r.Pa.push(e);const t=ts(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function L0(r){return qs(r)&&!ts(r).M_()&&r.Pa.length>0}function M0(r){ts(r).start()}async function qR(r){ts(r).na()}async function GR(r){const e=ts(r);for(const t of r.Pa)e.X_(t.mutations)}async function KR(r,e,t){const i=r.Pa.shift(),o=Zf.from(i,e,t);await O0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Gc(r)}async function QR(r,e){e&&ts(r).Z_&&await(async function(i,o){if((function(d){return bC(d)&&d!==ee.ABORTED})(o.code)){const l=i.Pa.shift();ts(i).N_(),await O0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Gc(i)}})(r,e),L0(r)&&M0(r)}async function sv(r,e){const t=Fe(r);t.asyncQueue.verifyOperationInProgress(),ve($s,"RemoteStore received new credentials");const i=qs(t);t.Ia.add(3),await Rl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await qc(t)}async function YR(r,e){const t=Fe(r);e?(t.Ia.delete(2),await qc(t)):e||(t.Ia.add(2),await Rl(t),t.Aa.set("Unknown"))}function sa(r){return r.Va||(r.Va=(function(t,i,o){const l=Fe(t);return l.ia(),new DR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:UR.bind(null,r),e_:zR.bind(null,r),n_:BR.bind(null,r),J_:$R.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),up(r)?lp(r):r.Aa.set("Unknown")):(await r.Va.stop(),V0(r))}))),r.Va}function ts(r){return r.ma||(r.ma=(function(t,i,o){const l=Fe(t);return l.ia(),new VR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:qR.bind(null,r),n_:QR.bind(null,r),ea:GR.bind(null,r),ta:KR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await Gc(r)):(await r.ma.stop(),r.Pa.length>0&&(ve($s,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const d=Date.now()+i,p=new cp(e,t,d,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dp(r,e){if(ci("AsyncQueue",`${e}: ${r}`),ia(r))return new Ie(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{static emptySet(e){return new Bo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Re.comparator(t.key,i.key):(t,i)=>Re.comparator(t.key,i.key),this.keyedMap=Qa(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Bo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.fa=new wt(Re.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ne(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Qo{constructor(e,t,i,o,l,d,p,y,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new Qo(e,t,Bo.emptySet(t),d,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class XR{constructor(){this.queries=av(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Fe(t),l=o.queries;o.queries=av(),l.forEach(((d,p)=>{for(const y of p.wa)y.onError(i)}))})(this,new Ie(ee.ABORTED,"Firestore shutting down"))}}function av(){return new Hs((r=>s0(r)),Uc)}async function F0(r,e){const t=Fe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new JR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=dp(d,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&hp(t)}async function U0(r,e){const t=Fe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ZR(r,e){const t=Fe(r);let i=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const p of d.wa)p.Ca(o)&&(i=!0);d.ya=o}}i&&hp(t)}function eP(r,e,t){const i=Fe(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function hp(r){r.Da.forEach((e=>{e.next()}))}var yf,lv;(lv=yf||(yf={})).Fa="default",lv.Cache="cache";class z0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Qo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){this.key=e}}class $0{constructor(e){this.key=e}}class tP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=qe(),this.mutatedKeys=qe(),this.Xa=o0(e),this.eu=new Bo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new ov,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,I)=>{const R=o.get(E),z=zc(this.query,I)?I:null,W=!!R&&this.mutatedKeys.has(R.key),Y=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let O=!1;R&&z?R.data.isEqual(z.data)?W!==Y&&(i.track({type:3,doc:z}),O=!0):this.iu(R,z)||(i.track({type:2,doc:z}),O=!0,(y&&this.Xa(z,y)>0||v&&this.Xa(z,v)<0)&&(p=!0)):!R&&z?(i.track({type:0,doc:z}),O=!0):R&&!z&&(i.track({type:1,doc:R}),O=!0,(y||v)&&(p=!0)),O&&(z?(d=d.add(z),l=Y?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{eu:d,ru:i,Ds:p,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((E,I)=>(function(z,W){const Y=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{At:O})}};return Y(z)-Y(W)})(E.type,I.type)||this.Xa(E.doc,I.doc))),this.su(i),o=o!=null&&o;const p=t&&!o?this.ou():[],y=this.Za.size===0&&this.current&&!o?1:0,v=y!==this.Ya;return this.Ya=y,d.length!==0||v?{snapshot:new Qo(this.query,e.eu,l,d,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ov,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=qe(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new $0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new B0(i))})),t}uu(e){this.Ha=e.qs,this.Za=qe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Qo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const fp="SyncEngine";class nP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class rP{constructor(e){this.key=e,this.lu=!1}}class iP{constructor(e,t,i,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Hs((p=>s0(p)),Uc),this.Tu=new Map,this.Iu=new Set,this.du=new wt(Re.comparator),this.Eu=new Map,this.Au=new np,this.Ru={},this.Vu=new Map,this.mu=Ko.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function sP(r,e,t=!0){const i=Q0(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await W0(i,e,t,!0),o}async function oP(r,e){const t=Q0(r);await W0(t,e,!0,!1)}async function W0(r,e,t,i){const o=await CR(r.localStore,Or(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await aP(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&j0(r.remoteStore,o),p}async function aP(r,e,t,i,o){r.gu=(I,R,z)=>(async function(Y,O,ae,oe){let ue=O.view.nu(ae);ue.Ds&&(ue=await ev(Y.localStore,O.query,!1).then((({documents:N})=>O.view.nu(N,ue))));const K=oe&&oe.targetChanges.get(O.targetId),fe=oe&&oe.targetMismatches.get(O.targetId)!=null,Te=O.view.applyChanges(ue,Y.isPrimaryClient,K,fe);return cv(Y,O.targetId,Te._u),Te.snapshot})(r,I,R,z);const l=await ev(r.localStore,e,!0),d=new tP(e,l.qs),p=d.nu(l.documents),y=Cl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=d.applyChanges(p,r.isPrimaryClient,y);cv(r,t,v._u);const E=new nP(e,t,d);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function lP(r,e,t){const i=Fe(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((d=>!Uc(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await mf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&op(i.remoteStore,o.targetId),vf(i,o.targetId)})).catch(ra)):(vf(i,o.targetId),await mf(i.localStore,o.targetId,!0))}async function uP(r,e){const t=Fe(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),op(t.remoteStore,i.targetId))}async function cP(r,e,t){const i=yP(r);try{const o=await(function(d,p){const y=Fe(d),v=pt.now(),E=p.reduce(((z,W)=>z.add(W.key)),qe());let I,R;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let W=di(),Y=qe();return y.Os.getEntries(z,E).next((O=>{W=O,W.forEach(((ae,oe)=>{oe.isValidDocument()||(Y=Y.add(ae))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,W))).next((O=>{I=O;const ae=[];for(const oe of p){const ue=CC(oe,I.get(oe.key).overlayedDocument);ue!=null&&ae.push(new us(oe.key,ue,X_(ue.value.mapValue),Xn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,v,ae,p)})).next((O=>{R=O;const ae=O.applyToLocalDocumentSet(I,Y);return y.documentOverlayCache.saveOverlays(z,O.batchId,ae)}))})).then((()=>({batchId:R.batchId,changes:l0(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,y){let v=d.Ru[d.currentUser.toKey()];v||(v=new wt(Ue)),v=v.insert(p,y),d.Ru[d.currentUser.toKey()]=v})(i,o.batchId,t),await Pl(i,o.changes),await Gc(i.remoteStore)}catch(o){const l=dp(o,"Failed to persist write");t.reject(l)}}async function H0(r,e){const t=Fe(r);try{const i=await xR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Eu.get(l);d&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?et(d.lu,14607):o.removedDocuments.size>0&&(et(d.lu,42227),d.lu=!1))})),await Pl(t,i,e)}catch(i){await ra(i)}}function uv(r,e,t){const i=Fe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const y=Fe(d);y.onlineState=p;let v=!1;y.queries.forEach(((E,I)=>{for(const R of I.wa)R.va(p)&&(v=!0)})),v&&hp(y)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dP(r,e,t){const i=Fe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let d=new wt(Re.comparator);d=d.insert(l,un.newNoDocument(l,Oe.min()));const p=qe().add(l),y=new Wc(Oe.min(),new Map,new wt(Ue),d,p);await H0(i,y),i.du=i.du.remove(l),i.Eu.delete(e),pp(i)}else await mf(i.localStore,e,!1).then((()=>vf(i,e,t))).catch(ra)}async function hP(r,e){const t=Fe(r),i=e.batch.batchId;try{const o=await TR(t.localStore,e);G0(t,i,null),q0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pl(t,o)}catch(o){await ra(o)}}async function fP(r,e,t){const i=Fe(r);try{const o=await(function(d,p){const y=Fe(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return y.mutationQueue.lookupMutationBatch(v,p).next((I=>(et(I!==null,37113),E=I.keys(),y.mutationQueue.removeMutationBatch(v,I)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,E,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>y.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);G0(i,e,t),q0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pl(i,o)}catch(o){await ra(o)}}function q0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function G0(r,e,t){const i=Fe(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function vf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||K0(r,i)}))}function K0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(op(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),pp(r))}function cv(r,e,t){for(const i of t)i instanceof B0?(r.Au.addReference(i.key,e),pP(r,i)):i instanceof $0?(ve(fp,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||K0(r,i.key)):Ne(19791,{yu:i})}function pP(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(ve(fp,"New document in limbo: "+t),r.Iu.add(i),pp(r))}function pp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Re(ft.fromString(e)),i=r.mu.next();r.Eu.set(i,new rP(t)),r.du=r.du.insert(t,i),j0(r.remoteStore,new Bi(Or(Yf(t.path)),i,"TargetPurposeLimboResolution",Oc.ue))}}async function Pl(r,e,t){const i=Fe(r),o=[],l=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((p,y)=>{d.push(i.gu(y,e,t).then((v=>{var E;if((v||t)&&i.isPrimaryClient){const I=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(y.targetId,I?"current":"not-current")}if(v){o.push(v);const I=ip.Es(y.targetId,v);l.push(I)}})))})),await Promise.all(d),i.hu.J_(o),await(async function(y,v){const E=Fe(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Z.forEach(v,(R=>Z.forEach(R.Is,(z=>E.persistence.referenceDelegate.addReference(I,R.targetId,z))).next((()=>Z.forEach(R.ds,(z=>E.persistence.referenceDelegate.removeReference(I,R.targetId,z)))))))))}catch(I){if(!ia(I))throw I;ve(sp,"Failed to update sequence numbers: "+I)}for(const I of v){const R=I.targetId;if(!I.fromCache){const z=E.Fs.get(R),W=z.snapshotVersion,Y=z.withLastLimboFreeSnapshotVersion(W);E.Fs=E.Fs.insert(R,Y)}}})(i.localStore,l))}async function mP(r,e){const t=Fe(r);if(!t.currentUser.isEqual(e)){ve(fp,"User change. New user:",e.toKey());const i=await A0(t.localStore,e);t.currentUser=e,(function(l,d){l.Vu.forEach((p=>{p.forEach((y=>{y.reject(new Ie(ee.CANCELLED,d))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pl(t,i.Bs)}}function gP(r,e){const t=Fe(r),i=t.Eu.get(e);if(i&&i.lu)return qe().add(i.key);{let o=qe();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const p=t.Pu.get(d);o=o.unionWith(p.view.tu)}return o}}function Q0(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=H0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dP.bind(null,e),e.hu.J_=ZR.bind(null,e.eventManager),e.hu.pu=eP.bind(null,e.eventManager),e}function yP(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fP.bind(null,e),e}class Pc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return ER(this.persistence,new vR,e.initialUser,this.serializer)}Du(e){return new P0(rp.Vi,this.serializer)}bu(e){return new PR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pc.provider={build:()=>new Pc};class vP extends Pc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){et(this.persistence.referenceDelegate instanceof Cc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new rR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new P0((i=>Cc.Vi(i,t)),this.serializer)}}class _f{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mP.bind(null,this.syncEngine),await YR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XR})()}createDatastore(e){const t=Hc(e.databaseInfo.databaseId),i=(function(l){return new jR(l)})(e.databaseInfo);return(function(l,d,p,y){return new LR(l,d,p,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,d,p){return new FR(i,o,l,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>uv(this.syncEngine,t,0)),(function(){return rv.C()?new rv:new AR})())}createSyncEngine(e,t){return(function(o,l,d,p,y,v,E){const I=new iP(o,l,d,p,y,v);return E&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Fe(o);ve($s,"RemoteStore shutting down."),l.Ia.add(5),await Rl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}_f.provider={build:()=>new _f};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="FirestoreClient";class _P{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=ln.UNAUTHENTICATED,this.clientId=$f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{ve(ns,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ve(ns,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=dp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Bh(r,e){r.asyncQueue.verifyOperationInProgress(),ve(ns,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await A0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Yi("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{ve("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Yi("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function dv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await wP(r);ve(ns,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>sv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>sv(e.remoteStore,o))),r._onlineComponents=e}async function wP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(ns,"Using user provided OfflineComponentProvider");try{await Bh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Yi("Error using user provided cache. Falling back to memory cache: "+t),await Bh(r,new Pc)}}else ve(ns,"Using default OfflineComponentProvider"),await Bh(r,new vP(void 0));return r._offlineComponents}async function J0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(ns,"Using user provided OnlineComponentProvider"),await dv(r,r._uninitializedComponentsProvider._online)):(ve(ns,"Using default OnlineComponentProvider"),await dv(r,new _f))),r._onlineComponents}function EP(r){return J0(r).then((e=>e.syncEngine))}async function X0(r){const e=await J0(r),t=e.eventManager;return t.onListen=sP.bind(null,e.syncEngine),t.onUnlisten=lP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uP.bind(null,e.syncEngine),t}function TP(r,e,t={}){const i=new ai;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const E=new Y0({next:R=>{E.Ou(),d.enqueueAndForget((()=>U0(l,I)));const z=R.docs.has(p);!z&&R.fromCache?v.reject(new Ie(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&R.fromCache&&y&&y.source==="server"?v.reject(new Ie(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(R)},error:R=>v.reject(R)}),I=new z0(Yf(p.path),E,{includeMetadataChanges:!0,ka:!0});return F0(l,I)})(await X0(r),r.asyncQueue,e,t,i))),i.promise}function xP(r,e,t={}){const i=new ai;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const E=new Y0({next:R=>{E.Ou(),d.enqueueAndForget((()=>U0(l,I))),R.fromCache&&y.source==="server"?v.reject(new Ie(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(R)},error:R=>v.reject(R)}),I=new z0(p,E,{includeMetadataChanges:!0,ka:!0});return F0(l,I)})(await X0(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="firestore.googleapis.com",fv=!0;class pv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ew,this.ssl=fv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:fv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tR)throw new Ie(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ie(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ie(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ie(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new k1;switch(i.type){case"firstParty":return new D1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ie(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=hv.get(t);i&&(ve("ComponentProvider","Removing Datastore"),hv.delete(t),i.terminate())})(this),Promise.resolve()}}function IP(r,e,t,i={}){var o;r=wr(r,Kc);const l=Zo(e),d=r._getSettings(),p=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),y=`${e}:${t}`;l&&(Bv(`https://${y}`),$v("Firestore",!0)),d.host!==ew&&d.host!==y&&Yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:y,ssl:l,emulatorOptions:i});if(!Ms(v,p)&&(r._setSettings(v),i.mockUserToken)){let E,I;if(typeof i.mockUserToken=="string")E=i.mockUserToken,I=ln.MOCK_USER;else{E=BT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const R=i.mockUserToken.sub||i.mockUserToken.user_id;if(!R)throw new Ie(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new ln(R)}r._authCredentials=new b1(new F_(E,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Qc(this.firestore,e,this._query)}}class bt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Il(t,bt._jsonSchema))return new bt(e,i||null,new Re(ft.fromString(t.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:kt("string",bt._jsonSchemaVersion),referencePath:kt("string")};class Ki extends Qc{constructor(e,t,i){super(e,t,Yf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new Re(e))}withConverter(e){return new Ki(this.firestore,e,this._path)}}function jr(r,e,...t){if(r=Jt(r),z_("collection","path",e),r instanceof Kc){const i=ft.fromString(e,...t);return Py(i),new Ki(r,null,i)}{if(!(r instanceof bt||r instanceof Ki))throw new Ie(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ft.fromString(e,...t));return Py(i),new Ki(r.firestore,null,i)}}function an(r,e,...t){if(r=Jt(r),arguments.length===1&&(e=$f.newId()),z_("doc","path",e),r instanceof Kc){const i=ft.fromString(e,...t);return Ry(i),new bt(r,null,new Re(i))}{if(!(r instanceof bt||r instanceof Ki))throw new Ie(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ft.fromString(e,...t));return Ry(i),new bt(r.firestore,r instanceof Ki?r.converter:null,new Re(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="AsyncQueue";class gv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new b0(this,"async_queue_retry"),this.oc=()=>{const i=zh();i&&ve(mv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=zh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new ai;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ia(e))throw e;ve(mv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,ci("INTERNAL UNHANDLED ERROR: ",yv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=cp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Ne(47125,{hc:yv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function yv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Gs extends Kc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new gv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gv(e),this._firestoreClient=void 0,await e}}}function SP(r,e){const t=typeof r=="object"?r:Gv(),i=typeof r=="string"?r:_c,o=kf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=UT("firestore");l&&IP(o,...l)}return o}function mp(r){if(r._terminated)throw new Ie(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CP(r),r._firestoreClient}function CP(r){var e,t,i;const o=r._freezeSettings(),l=(function(p,y,v,E){return new Y1(p,y,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Z0(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new _P(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(Xt.fromBase64String(e))}catch(t){throw new Ie(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Il(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:kt("string",Jn._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ie(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mr._jsonSchemaVersion}}static fromJSON(e){if(Il(e,Mr._jsonSchema))return new Mr(e.latitude,e.longitude)}}Mr._jsonSchemaVersion="firestore/geoPoint/1.0",Mr._jsonSchema={type:kt("string",Mr._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Il(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fr(e.vectorValues);throw new Ie(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:kt("string",Fr._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^__.*__$/;class PP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sl(e,this.data,t,this.fieldTransforms)}}class tw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ec:r})}}class yp{constructor(e,t,i,o,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new yp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ac(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(nw(this.Ec)&&RP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class AP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Hc(e)}Dc(e,t,i,o=!1){return new yp({Ec:e,methodName:t,bc:i,path:Yt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vp(r){const e=r._freezeSettings(),t=Hc(r._databaseId);return new AP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function rw(r,e,t,i,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);_p("Data must be an object, but it was:",d,i);const p=iw(i,d);let y,v;if(l.merge)y=new Ln(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const R=wf(e,I,t);if(!d.contains(R))throw new Ie(ee.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);ow(E,R)||E.push(R)}y=new Ln(E),v=d.fieldTransforms.filter((I=>y.covers(I.field)))}else y=null,v=d.fieldTransforms;return new PP(new Pn(p),y,v)}class Jc extends gp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jc}}function kP(r,e,t,i){const o=r.Dc(1,e,t);_p("Data must be an object, but it was:",o,i);const l=[],d=Pn.empty();ls(i,((y,v)=>{const E=wp(e,y,t);v=Jt(v);const I=o.gc(E);if(v instanceof Jc)l.push(E);else{const R=Xc(v,I);R!=null&&(l.push(E),d.set(E,R))}}));const p=new Ln(l);return new tw(d,p,o.fieldTransforms)}function bP(r,e,t,i,o,l){const d=r.Dc(1,e,t),p=[wf(e,i,t)],y=[o];if(l.length%2!=0)throw new Ie(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<l.length;R+=2)p.push(wf(e,l[R])),y.push(l[R+1]);const v=[],E=Pn.empty();for(let R=p.length-1;R>=0;--R)if(!ow(v,p[R])){const z=p[R];let W=y[R];W=Jt(W);const Y=d.gc(z);if(W instanceof Jc)v.push(z);else{const O=Xc(W,Y);O!=null&&(v.push(z),E.set(z,O))}}const I=new Ln(v);return new tw(E,I,d.fieldTransforms)}function Xc(r,e){if(sw(r=Jt(r)))return _p("Unsupported field value:",e,r),iw(r,e);if(r instanceof gp)return(function(i,o){if(!nw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let d=0;for(const p of i){let y=Xc(p,o.yc(d));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),d++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=pt.fromDate(i);return{timestampValue:Sc(o.serializer,l)}}if(i instanceof pt){const l=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sc(o.serializer,l)}}if(i instanceof Mr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Jn)return{bytesValue:w0(o.serializer,i._byteString)};if(i instanceof bt){const l=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:tp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Fr)return(function(d,p){return{mapValue:{fields:{[Y_]:{stringValue:J_},[wc]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw p.wc("VectorValues must only contain numeric values.");return Jf(p.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Wf(i)}`)})(r,e)}function iw(r,e){const t={};return W_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ls(r,((i,o)=>{const l=Xc(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function sw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof pt||r instanceof Mr||r instanceof Jn||r instanceof bt||r instanceof gp||r instanceof Fr)}function _p(r,e,t){if(!sw(t)||!B_(t)){const i=Wf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function wf(r,e,t){if((e=Jt(e))instanceof Yc)return e._internalPath;if(typeof e=="string")return wp(r,e);throw Ac("Field path arguments must be of type string or ",r,!1,void 0,t)}const NP=new RegExp("[~\\*/\\[\\]]");function wp(r,e,t){if(e.search(NP)>=0)throw Ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Yc(...e.split("."))._internalPath}catch{throw Ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ac(r,e,t,i,o){const l=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(l||d)&&(y+=" (found",l&&(y+=` in field ${i}`),d&&(y+=` in document ${o}`),y+=")"),new Ie(ee.INVALID_ARGUMENT,p+r+y)}function ow(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jP extends aw{data(){return super.data()}}function lw(r,e){return typeof e=="string"?wp(r,e):e instanceof Yc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ie(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VP{convertValue(e,t="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ls(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[wc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>St(d.doubleValue)));return new Fr(l)}convertGeoPoint(e){return new Mr(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Mc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const t=Xi(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ft.fromString(e);et(C0(i),9688,{name:e});const o=new fl(i.get(1),i.get(3)),l=new Re(i.popFirst(5));return o.isEqual(t)||ci(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ls extends aw{constructor(e,t,i,o,l,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(lw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ls._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ls._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ls._jsonSchema={type:kt("string",Ls._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class lc extends Ls{data(e={}){return super.data(e)}}class $o{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ja(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new lc(this._firestore,this._userDataWriter,i.key,i,new Ja(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const y=new lc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ja(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const y=new lc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ja(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),E=d.indexOf(p.doc.key)),{type:OP(p.type),doc:y,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$f.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(r){r=wr(r,bt);const e=wr(r.firestore,Gs);return TP(mp(e),r._key).then((t=>LP(e,r,t)))}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:kt("string",$o._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class cw extends VP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function Yo(r){r=wr(r,Qc);const e=wr(r.firestore,Gs),t=mp(e),i=new cw(e);return DP(r._query),xP(t,r._query).then((o=>new $o(e,i,r,o)))}function vv(r,e,t){r=wr(r,bt);const i=wr(r.firestore,Gs),o=uw(r.converter,e);return Zc(i,[rw(vp(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Xn.none())])}function Mo(r,e,t,...i){r=wr(r,bt);const o=wr(r.firestore,Gs),l=vp(o);let d;return d=typeof(e=Jt(e))=="string"||e instanceof Yc?bP(l,"updateDoc",r._key,e,t,i):kP(l,"updateDoc",r._key,e),Zc(o,[d.toMutation(r._key,Xn.exists(!0))])}function Xa(r){return Zc(wr(r.firestore,Gs),[new Xf(r._key,Xn.none())])}function Za(r,e){const t=wr(r.firestore,Gs),i=an(r),o=uw(r.converter,e);return Zc(t,[rw(vp(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Xn.exists(!1))]).then((()=>i))}function Zc(r,e){return(function(i,o){const l=new ai;return i.asyncQueue.enqueueAndForget((async()=>cP(await EP(i),o,l))),l.promise})(mp(r),e)}function LP(r,e,t){const i=t.docs.get(e._key),o=new cw(r);return new Ls(r,o,e._key,i,new Ja(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){na=o})(ea),Wo(new Fs("firestore",((i,{instanceIdentifier:o,options:l})=>{const d=i.getProvider("app").getImmediate(),p=new Gs(new N1(i.getProvider("auth-internal")),new V1(d,i.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Ie(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(v.options.projectId,E)})(d,o),d);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),qi(Ty,xy,e),qi(Ty,xy,"esm2017")})();const MP={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},dw=qv(MP),Qi=P1(dw),ht=SP(dw),hw=H.createContext(null);function FP({children:r}){const[e,t]=H.useState(null),[i,o]=H.useState(!1),[l,d]=H.useState(!0);H.useEffect(()=>{const v=vS(Qi,async E=>{if(t(E),E)try{const I=an(ht,"admins",E.uid);if((await Ef(I)).exists())o(!0);else{const z=an(ht,"roles",E.uid),W=await Ef(z);W.exists()&&W.data().admin===!0?o(!0):o(!1)}}catch(I){console.error("Error checking admin role:",I),o(!1)}else o(!1);d(!1)});return()=>v()},[]);const p=async(v,E)=>{await v_(Qi,v,E)},y=async()=>{await __(Qi)};return h.jsx(hw.Provider,{value:{user:e,admin:i,loading:l,login:p,logout:y},children:r})}function oa(){return H.useContext(hw)}function UP({onClose:r}){const[e,t]=H.useState("login"),[i,o]=H.useState(""),[l,d]=H.useState("");async function p(){try{await k_(Qi,new Dr),r()}catch(E){alert(E.message)}}async function y(E){E.preventDefault();try{await v_(Qi,i,l),r()}catch(I){alert(I.message)}}async function v(E){E.preventDefault();try{await mS(Qi,i,l),r()}catch(I){alert(I.message)}}return h.jsx("div",{className:"auth-modal-backdrop",onClick:r,children:h.jsxs("div",{className:"auth-modal",onClick:E=>E.stopPropagation(),children:[h.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),h.jsxs("button",{className:"google-btn",onClick:p,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsx("div",{className:"auth-divider",children:h.jsx("span",{children:"or"})}),h.jsxs("form",{onSubmit:e==="login"?y:v,className:"auth-form",children:[h.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:i,onChange:E=>o(E.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:E=>d(E.target.value),required:!0}),h.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),h.jsx("div",{className:"auth-switcher",children:e==="login"?h.jsxs("p",{children:["No account?"," ",h.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):h.jsxs("p",{children:["Already have an account?"," ",h.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),h.jsx("button",{className:"auth-close",onClick:r,children:"Close"})]})})}function zP(){const[r,e]=H.useState(!1),[t,i]=H.useState(!1),{user:o,admin:l}=oa(),d=bc();async function p(){try{await __(Qi),e(!1),d("/")}catch(y){console.error(y),alert("Logout failed.")}}return h.jsxs(h.Fragment,{children:[h.jsxs("button",{className:`menu-toggle ${r?"active":""}`,onClick:()=>e(!r),children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("nav",{className:`menu-panel ${r?"open":""}`,children:[h.jsx(Wa,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),h.jsx(Wa,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),h.jsx(Wa,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),h.jsx(Wa,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),l&&h.jsx(Wa,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),h.jsxs("div",{className:"auth-section",children:[h.jsx("p",{className:"auth-section-status",children:o?`Signed in as ${o.email||o.uid}`:"Not signed in"}),h.jsxs("div",{children:[!o&&h.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),i(!0)},children:"Sign in"}),o&&h.jsx("button",{className:"auth-btn secondary",onClick:p,children:"Sign out"})]})]})]}),t&&h.jsx(UP,{onClose:()=>i(!1)})]})}function _v(){return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"im_ok's Collection Hub"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem"},children:"A quiet little corner of the internet for my shelves, lists, and cardboard addictions."}),h.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.72)",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"12px",fontSize:"0.85rem",color:"var(--text-soft)"},children:"Manga | Anime | TCG"})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"About me"}),h.jsxs("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5},children:["Hey, I go by ",h.jsx("strong",{children:"im_ok"}),". I hoard manga, binge anime, and collect way too many trading cards. This site is where I track everything: volumes on my shelves, finished shows, and growing TCG binders."]}),h.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem"},children:"You'll find detailed stats, reading history, and collection values across the different pages - it's basically my personal library dashboard."}),h.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px"},children:[h.jsx("span",{className:"pill",children:"Manga library power user"}),h.jsx("span",{className:"pill",children:"MAL-synced anime list"}),h.jsx("span",{className:"pill",children:"Pokemon & One Piece TCG"}),h.jsx("span",{className:"pill",children:"Automation & data nerd"})]})]}),h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"Explore the site"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[h.jsxs("a",{href:"/base/manga",className:"section-card",children:[h.jsx("h3",{children:"Manga Library"}),h.jsx("p",{children:"Full manga collection & wishlist, with covers, stats, and release tracking."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Firestore-powered"}),h.jsx("span",{className:"section-chip",children:"Library & wishlist"}),h.jsx("span",{className:"section-chip",children:"Release calendar"})]})]}),h.jsxs("a",{href:"/base/anime",className:"section-card",children:[h.jsx("h3",{children:"Anime Library"}),h.jsx("p",{children:"Read-only mirror of my MAL list, with filters, stats, and pretty cards."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"MAL synced"}),h.jsx("span",{className:"section-chip",children:"Status filters"}),h.jsx("span",{className:"section-chip",children:"Quick stats"})]})]}),h.jsxs("a",{href:"/base/tcg",className:"section-card",children:[h.jsx("h3",{children:"TCG Collection"}),h.jsx("p",{children:"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Tracked in Firestore"}),h.jsx("span",{className:"section-chip",children:"Value vs paid"}),h.jsx("span",{className:"section-chip",children:"Per-game breakdown"})]})]})]})]})]}),h.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"Built as a static GitHub Pages site. Data lives in Firestore & MyAnimeList."})]})}const BP="modulepreload",$P=function(r){return"/base/"+r},wv={},fw=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let d=function(v){return Promise.all(v.map(E=>Promise.resolve(E).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),y=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=d(t.map(v=>{if(v=$P(v),v in wv)return;wv[v]=!0;const E=v.endsWith(".css"),I=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${I}`))return;const R=document.createElement("link");if(R.rel=E?"stylesheet":BP,E||(R.as="script"),R.crossOrigin="",R.href=v,y&&R.setAttribute("nonce",y),document.head.appendChild(R),E)return new Promise((z,W)=>{R.addEventListener("load",z),R.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})};function Ha(r){let e=(r||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),i=t?t[1].trim().toLowerCase():e.toLowerCase(),o=t&&t[2]?parseInt(t[2],10):0;return{name:i,vol:Number.isFinite(o)?o:0}}function WP(){const{admin:r}=oa(),e=r,[t,i]=H.useState("library"),[o,l]=H.useState([]),[d,p]=H.useState([]),[y,v]=H.useState([]),[E,I]=H.useState([]),[R,z]=H.useState(!0),[W,Y]=H.useState(""),[O,ae]=H.useState(""),[oe,ue]=H.useState(""),[K,fe]=H.useState(!1),[Te,N]=H.useState(()=>new Set),[S,P]=H.useState(null),[k,D]=H.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[b,T]=H.useState({open:!1,index:0,items:[]});async function le(){const C=await Yo(jr(ht,"library")),Q=[];C.forEach(G=>{const L=G.data();Q.push({id:G.id,title:L.title||"",authors:L.authors||"Unknown",publisher:L.publisher||"Unknown",demographic:L.demographic||"",genre:L.genre||"",subGenre:L.subGenre||"",date:L.date||"Unknown",cover:L.cover||"",isbn:L.isbn||"",pageCount:L.pageCount!==void 0&&L.pageCount!==null?L.pageCount:"",rating:L.rating!==void 0&&L.rating!==null?L.rating:"",amountPaid:L.amountPaid!==void 0&&L.amountPaid!==null?L.amountPaid:"",dateRead:L.dateRead||"",datePurchased:L.datePurchased||"",msrp:L.msrp!==void 0&&L.msrp!==null?L.msrp:"",specialType:L.specialType||"",specialVolumes:L.specialVolumes!==void 0&&L.specialVolumes!==null?L.specialVolumes:"",collectiblePrice:L.collectiblePrice!==void 0&&L.collectiblePrice!==null?L.collectiblePrice:"",read:!!L.read,amazonURL:L.amazonURL||"",kind:"library"})}),Q.sort((G,L)=>{const he=Ha(G.title),Be=Ha(L.title),rt=he.name.localeCompare(Be.name);return rt!==0?rt:he.vol-Be.vol}),l(Q),v(G=>{const L=new Set(G);return Q.forEach(he=>L.add(he.title||"")),Array.from(L).filter(Boolean).sort()})}async function je(){const C=await Yo(jr(ht,"wishlist")),Q=[];C.forEach(G=>{const L=G.data();Q.push({id:G.id,title:L.title||"",authors:L.authors||"Unknown",publisher:L.publisher||"Unknown",date:L.date||"Unknown",cover:L.cover||"",isbn:L.isbn||"",pageCount:L.pageCount!==void 0&&L.pageCount!==null?L.pageCount:"",rating:L.rating!==void 0&&L.rating!==null?L.rating:"",amountPaid:L.amountPaid!==void 0&&L.amountPaid!==null?L.amountPaid:"",specialType:L.specialType||"",specialVolumes:L.specialVolumes!==void 0&&L.specialVolumes!==null?L.specialVolumes:"",collectiblePrice:L.collectiblePrice!==void 0&&L.collectiblePrice!==null?L.collectiblePrice:"",amazonURL:L.amazonURL||"",kind:"wishlist"})}),Q.sort((G,L)=>{const he=Ha(G.title),Be=Ha(L.title),rt=he.name.localeCompare(Be.name);return rt!==0?rt:he.vol-Be.vol}),p(Q),v(G=>{const L=new Set(G);return Q.forEach(he=>L.add(he.title||"")),Array.from(L).filter(Boolean).sort()})}H.useEffect(()=>{let C=!1;async function Q(){z(!0),Y("");try{await Promise.all([le(),je()]),C||z(!1)}catch(G){console.error(G),C||(Y("Failed to load manga data from Firestore."),z(!1))}}return Q(),()=>{C=!0}},[]);const Ye=H.useMemo(()=>{const C=O.trim().toLowerCase();return C?o.filter(Q=>[Q.title,Q.authors,Q.publisher,Q.isbn,Q.date,String(Q.pageCount??"")].join(" ").toLowerCase().includes(C)):o},[o,O]),Le=H.useMemo(()=>{const C=oe.trim().toLowerCase();return C?d.filter(Q=>[Q.title,Q.authors,Q.publisher,Q.isbn,Q.date,String(Q.pageCount??"")].join(" ").toLowerCase().includes(C)):d},[d,oe]);function de(){e&&(fe(C=>!C),N(new Set))}function Se(C){N(Q=>{const G=new Set(Q);return G.has(C)?G.delete(C):G.add(C),G})}async function pe(C){if(!e){alert("Multi-select actions require admin access.");return}const Q=Array.from(Te);if(!Q.length){alert("Select at least one item first.");return}const G=t==="library";try{if(C==="move")if(G){if(!window.confirm(`Move ${Q.length} item(s) to Wishlist?`))return;for(const L of Q){const he=o.find(rt=>rt.id===L);if(!he)continue;const Be={title:he.title,authors:he.authors,publisher:he.publisher,date:he.date,isbn:he.isbn,pageCount:he.pageCount||"",cover:he.cover,amazonURL:he.amazonURL||"",specialType:he.specialType||"",specialVolumes:he.specialVolumes||"",collectiblePrice:he.collectiblePrice||"",rating:he.rating||""};await Za(jr(ht,"wishlist"),Be),await Xa(an(ht,"library",L))}}else{if(!window.confirm(`Move ${Q.length} item(s) to Library?`))return;for(const L of Q){const he=d.find(rt=>rt.id===L);if(!he)continue;const Be={title:he.title,authors:he.authors,publisher:he.publisher,date:he.date,isbn:he.isbn,pageCount:he.pageCount||"",cover:he.cover,amountPaid:"",read:!1,rating:"",specialType:he.specialType||"",specialVolumes:he.specialVolumes||"",collectiblePrice:he.collectiblePrice||""};await Za(jr(ht,"library"),Be),await Xa(an(ht,"wishlist",L))}}else if(C==="markRead"&&G)for(const L of Q)await Mo(an(ht,"library",L),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(C==="markUnread"&&G)for(const L of Q)await Mo(an(ht,"library",L),{read:!1,dateRead:"",rating:""});else if(C==="delete"){const L=G?"library":"wishlist";if(!window.confirm(`Delete ${Q.length} item(s) from ${G?"Library":"Wishlist"}?`))return;for(const he of Q)await Xa(an(ht,L,he))}await Promise.all([le(),je()]),N(new Set),fe(!1)}catch(L){console.error(L),alert("Failed to apply multi-select action.")}}function M(C){P(C)}function J(){P(null)}const ge=()=>D(C=>({...C,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},multiAdd:!1,startVol:"",endVol:""})),ke=H.useMemo(()=>{const C=new Map;return[...o,...d].forEach(Q=>{const G=Ha(Q.title||"");if(G.name)if(C.has(G.name)){const L=C.get(G.name);L.maxVol=Math.max(L.maxVol,G.vol)}else{const L=(Q.title||"").replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||Q.title||G.name;C.set(G.name,{display:L,maxVol:G.vol})}}),C},[o,d]),Ve=C=>{D(Q=>({...Q,open:!0,mode:"add",list:C,editingId:null,data:{...Q.data,title:"",list:C}}))},Me=C=>{D({open:!0,mode:"edit",list:C.kind==="wishlist"?"wishlist":"library",editingId:C.id,data:{title:C.title||"",authors:C.authors||"",publisher:C.publisher||"",demographic:C.demographic||"",genre:C.genre||"",subGenre:C.subGenre||"",date:C.date||"",cover:C.cover||"",isbn:C.isbn||"",pageCount:C.pageCount||"",rating:C.rating||"",amountPaid:C.amountPaid||"",dateRead:C.dateRead||"",datePurchased:C.datePurchased||"",msrp:C.msrp||"",specialType:C.specialType||"",specialVolumes:C.specialVolumes||"",collectiblePrice:C.collectiblePrice||"",amazonURL:C.amazonURL||"",read:!!C.read}})},we=(C,Q,G="text")=>{if(D(L=>({...L,data:{...L.data,[C]:G==="checkbox"?!!Q:Q}})),C==="title"){const L=String(Q||"").trim().toLowerCase();if(!L)I([]);else{const he=[];ke.forEach((Be,rt)=>{if(Be.display.toLowerCase().includes(L)){const Et=Be.maxVol>0?Be.maxVol+1:1;he.push(`${Be.display}, Vol. ${Et}`)}}),I(he.slice(0,6))}}};async function ze(){if(!e)return;const{mode:C,list:Q,data:G,editingId:L,multiAdd:he,startVol:Be,endVol:rt}=k,Et=Q||"library";if(!G.title.trim()){alert("Title is required.");return}const lt=We=>({title:We||G.title.trim(),authors:G.authors.trim(),publisher:G.publisher.trim(),demographic:G.demographic.trim(),genre:G.genre.trim(),subGenre:G.subGenre.trim(),date:G.date.trim(),cover:G.cover.trim(),isbn:G.isbn.trim(),pageCount:G.pageCount===""?"":Number(G.pageCount),rating:G.rating===""?"":Math.max(.5,Math.min(5,Number(G.rating))),amountPaid:G.amountPaid===""?"":Number(G.amountPaid),dateRead:G.dateRead.trim(),datePurchased:G.datePurchased.trim(),msrp:G.msrp===""?"":Number(G.msrp),specialType:G.specialType.trim(),specialVolumes:G.specialVolumes===""?"":Number(G.specialVolumes),collectiblePrice:G.collectiblePrice===""?"":Number(G.collectiblePrice),amazonURL:G.amazonURL.trim(),read:!!G.read,kind:Q});try{if(C==="add"&&he){const We=Number(Be||0),ut=Number(rt||0);if(!Number.isFinite(We)||!Number.isFinite(ut)||We<=0||ut<We){alert("Provide valid start/end volumes (start > 0, end >= start).");return}const hn=[];for(let fn=We;fn<=ut;fn++){const Mn=`${G.title.trim()} Vol. ${fn}`;hn.push(Za(jr(ht,Et),lt(Mn)))}await Promise.all(hn)}else C==="add"?await Za(jr(ht,Et),lt()):C==="edit"&&L&&await Mo(an(ht,Et,L),lt());await Promise.all([le(),je()]),ge()}catch(We){console.error(We),alert("Failed to save entry.")}}async function Ze(C,Q){if(e&&window.confirm("Delete this entry?"))try{await Xa(an(ht,Q,C)),await Promise.all([le(),je()])}catch(G){console.error(G),alert("Failed to delete entry.")}}const[mt,dn]=H.useState(!1),Zt=()=>T({open:!1,index:0,items:[]});async function Mt(C,Q){if(!(C!=null&&C.id))return;const G=C.kind==="wishlist"?"wishlist":"library";dn(!0);try{await Mo(an(ht,G,C.id),Q),await Promise.all([le(),je()]),P(L=>L&&L.id===C.id?{...L,...Q}:L)}catch(L){console.error(L),alert("Failed to update entry.")}finally{dn(!1)}}const Ft=(C,Q)=>{const G=Q===""?"":Math.max(.5,Math.min(5,Number(Q)));Mt(C,{rating:G})},er=(C,Q)=>{if(!C)return;const G=Q?{read:!0,dateRead:new Date().toISOString().slice(0,10)}:{read:!1,dateRead:""};Mt(C,G)},Er=()=>{if(!Te.size){alert("Select at least one entry first.");return}const Q=[...o,...d].filter(L=>Te.has(L.id));if(!Q.length){alert("No items selected.");return}const G=Q.map(L=>({id:L.id,kind:L.kind||(t==="wishlist"?"wishlist":"library"),data:{title:L.title||"",authors:L.authors||"",publisher:L.publisher||"",demographic:L.demographic||"",genre:L.genre||"",subGenre:L.subGenre||"",date:L.date||"",cover:L.cover||"",isbn:L.isbn||"",pageCount:L.pageCount||"",rating:L.rating||"",amountPaid:L.amountPaid||"",dateRead:L.dateRead||"",datePurchased:L.datePurchased||"",msrp:L.msrp||"",specialType:L.specialType||"",specialVolumes:L.specialVolumes||"",collectiblePrice:L.collectiblePrice||"",amazonURL:L.amazonURL||"",read:!!L.read}}));T({open:!0,index:0,items:G})},tt=(C,Q,G="text")=>{T(L=>{const he=[...L.items],Be={...he[L.index]};return Be.data={...Be.data,[C]:G==="checkbox"?!!Q:Q},he[L.index]=Be,{...L,items:he}})},Br=()=>{T(C=>({...C,index:Math.min(C.index+1,C.items.length-1)}))},Tr=()=>{T(C=>({...C,index:Math.max(C.index-1,0)}))};async function Nt(){if(!e)return;const C=b.items;if(!C.length){Zt();return}try{const Q=C.map(G=>{const L={...G.data,pageCount:G.data.pageCount===""?"":Number(G.data.pageCount),rating:G.data.rating===""?"":Math.max(.5,Math.min(5,Number(G.data.rating))),amountPaid:G.data.amountPaid===""?"":Number(G.data.amountPaid),msrp:G.data.msrp===""?"":Number(G.data.msrp),collectiblePrice:G.data.collectiblePrice===""?"":Number(G.data.collectiblePrice),specialVolumes:G.data.specialVolumes===""?"":Number(G.data.specialVolumes),read:!!G.data.read},he=G.kind==="wishlist"?"wishlist":"library";return Mo(an(ht,he,G.id),L)});await Promise.all(Q),await Promise.all([le(),je()]),N(new Set),fe(!1),Zt()}catch(Q){console.error(Q),alert("Failed to save bulk edits.")}}function vn(C){const Q=Te.has(C.id),G=C.kind==="library",L=()=>{K&&e?Se(C.id):M(C)};return h.jsxs("div",{className:"manga-card"+(C.read&&G?" read":"")+(Q?" multiselect-selected":""),onClick:L,children:[h.jsx("div",{className:"manga-card-cover-wrap",children:h.jsx("img",{src:C.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),h.jsxs("div",{className:"manga-card-body",children:[h.jsx("div",{className:"manga-card-title",children:C.title||"Untitled"}),h.jsxs("div",{className:"manga-card-meta",children:[C.authors&&C.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[C.authors,h.jsx("br",{})]}),C.publisher&&C.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[C.publisher,h.jsx("br",{})]}),C.date&&C.date!=="Unknown"&&C.date]}),C.isbn&&h.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",C.isbn]}),e&&h.jsxs("div",{className:"manga-card-actions",children:[h.jsx("button",{type:"button",className:"manga-btn mini",onClick:he=>{he.stopPropagation(),Me(C)},children:"Edit"}),h.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:he=>{he.stopPropagation(),Ze(C.id,C.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},C.id)}const tr=({value:C,onChange:Q})=>{const[G,L]=H.useState(null),he=Math.max(0,Math.min(5,Number(C)||0)),Be=G??he,rt=Array.from({length:10},(We,ut)=>(ut+1)*.5),Et=5,lt=Array.from({length:Et},(We,ut)=>Math.max(0,Math.min(1,Be-ut)));return h.jsxs("div",{className:"star-shell",role:"group","aria-label":"Rating",children:[h.jsxs("div",{className:"star-visual",style:{"--star-count":Et},children:[h.jsx("div",{className:"star-row",children:lt.map((We,ut)=>h.jsxs("div",{className:"star-icon",children:[h.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"star-base",children:h.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})}),h.jsx("div",{className:"star-fill",style:{"--pct":`${(Math.max(0,Math.min(1,We))*100).toFixed(1)}%`},children:h.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:h.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})})})]},ut))}),h.jsx("div",{className:"star-hit",children:rt.map(We=>h.jsx("button",{type:"button","aria-label":`${We} stars`,onMouseEnter:()=>L(We),onMouseLeave:()=>L(null),onClick:()=>Q(We)},We))})]}),h.jsx("div",{className:"star-value",children:Be?Be.toFixed(1):"--"}),h.jsx("button",{type:"button",className:"star-clear",onClick:()=>Q(""),"aria-label":"Clear rating",children:"clear"})]})},nr=t==="library"?Ye:Le,X=(C,Q)=>{if(!C.length)return;const G=Array.from(C.reduce((lt,We)=>(Object.keys(We).forEach(ut=>lt.add(ut)),lt),new Set)),L=lt=>{const We=lt==null?"":String(lt);return/[",\n]/.test(We)?`"${We.replace(/"/g,'""')}"`:We},he=[G.join(",")].concat(C.map(lt=>G.map(We=>L(lt[We])).join(","))),Be=new Blob([he.join(`
`)],{type:"text/csv"}),rt=URL.createObjectURL(Be),Et=document.createElement("a");Et.href=rt,Et.download=Q,Et.click(),URL.revokeObjectURL(rt)},me=(C,Q)=>{const G=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),L=URL.createObjectURL(G),he=document.createElement("a");he.href=L,he.download=Q,he.click(),URL.revokeObjectURL(L)},ie=async(C,Q)=>{const G=Array.from(new Set(C.map(L=>L.cover).filter(Boolean)));if(!G.length){alert("No images found to download.");return}try{const L=(await fw(async()=>{const{default:ut}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:ut}},[])).default,he=new L,Be=he.folder("images"),rt=G.map(async(ut,hn)=>{try{const Mn=await(await fetch(ut)).blob(),en=(ut.split(".").pop()||"jpg").split(/[?#]/)[0];Be.file(`image-${hn+1}.${en}`,Mn)}catch(fn){console.warn("Failed to fetch image",ut,fn)}});await Promise.all(rt);const Et=await he.generateAsync({type:"blob"}),lt=URL.createObjectURL(Et),We=document.createElement("a");We.href=lt,We.download=Q,We.click(),URL.revokeObjectURL(lt)}catch(L){console.error("Zip download failed",L),alert("Failed to create zip. Please try again.")}};return h.jsxs("div",{className:"manga-page",children:[h.jsx("header",{className:"manga-header",children:h.jsxs("div",{children:[h.jsxs("div",{className:"manga-header-title",children:["Tyler's Manga Library",h.jsx("span",{className:"manga-badge",children:"Firestore synced"})]}),h.jsx("div",{className:"manga-header-sub",children:"Library & Wishlist are managed via Firestore. This React port reuses the same collections as your original index.html."})]})}),h.jsxs("div",{className:"manga-tabs",children:[h.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{i("library"),fe(!1),N(new Set)},children:"Library"}),h.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{i("wishlist"),fe(!1),N(new Set)},children:"Wishlist"})]}),t!=="dashboard"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-toolbar",children:[h.jsxs("div",{className:"manga-toolbar-left",children:[h.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?O:oe,onChange:C=>t==="library"?ae(C.target.value):ue(C.target.value)}),h.jsx("div",{className:"manga-counter",children:t==="library"?h.jsxs(h.Fragment,{children:["Library: ",Ye.length," / ",o.length]}):h.jsxs(h.Fragment,{children:["Wishlist: ",Le.length," / ",d.length]})})]}),h.jsx("div",{className:"manga-toolbar-right",children:e&&h.jsx("button",{className:"manga-btn secondary"+(K?" active":""),onClick:de,children:K?"Exit Multi-select":"Multi-select"})})]}),e&&K&&h.jsxs("div",{className:"manga-multiselect-bar",children:[h.jsxs("span",{children:["Selected: ",h.jsx("strong",{children:Te.size})]}),h.jsx("button",{className:"manga-btn",onClick:Er,children:"Bulk Edit"}),h.jsxs("button",{className:"manga-btn secondary",onClick:()=>pe("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"manga-btn",onClick:()=>pe("markRead"),children:"Mark Read"}),h.jsx("button",{className:"manga-btn secondary",onClick:()=>pe("markUnread"),children:"Mark Unread"})]}),h.jsx("button",{className:"manga-btn danger",onClick:()=>pe("delete"),children:"Delete"})]})]}),R?h.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):W?h.jsx("div",{className:"manga-empty-state",children:W}):nr.length===0?h.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):h.jsx("div",{className:"manga-grid",children:nr.map(C=>vn(C))}),e&&h.jsxs("div",{className:"manga-floating-actions",children:[h.jsxs("button",{className:"manga-btn",type:"button","aria-label":"Add item",onClick:()=>Ve(t==="wishlist"?"wishlist":"library"),children:["+ ",t==="wishlist"?"Wishlist":"Library"]}),h.jsxs("div",{className:"manga-export-actions",children:[h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>me(t==="library"?o:d,t==="library"?"manga-library.json":"manga-wishlist.json"),children:"Export JSON"}),h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>X(t==="library"?o:d,t==="library"?"manga-library.csv":"manga-wishlist.csv"),children:"Export CSV"}),h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>ie(t==="library"?o:d,t==="library"?"manga-library-images.zip":"manga-wishlist-images.zip"),children:"Download Images"})]})]}),S&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:C=>{C.target===C.currentTarget&&J()},children:h.jsxs("div",{className:"manga-modal",children:[h.jsx("div",{className:"manga-modal-cover-wrap",children:h.jsx("img",{src:S.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:S.title||"Untitled"}),h.jsx("button",{className:"manga-modal-close",onClick:J,type:"button",children:"Close"})]}),h.jsxs("div",{className:"manga-modal-meta",children:[S.authors&&S.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Author(s):"})," ",S.authors,h.jsx("br",{})]}),S.publisher&&S.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Publisher:"})," ",S.publisher,h.jsx("br",{})]}),S.date&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Release:"})," ",S.date,h.jsx("br",{})]}),S.isbn&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"ISBN:"})," ",S.isbn,h.jsx("br",{})]})]}),h.jsxs("div",{className:"manga-modal-details",children:[S.pageCount&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Pages:"})," ",S.pageCount,h.jsx("br",{})]}),h.jsxs("div",{style:{margin:"6px 0"},children:[h.jsx("strong",{children:"Rating:"})," ",h.jsx(tr,{value:S.rating||"",onChange:C=>Ft(S,C)})]}),S.amountPaid&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Amount Paid:"})," $",S.amountPaid,h.jsx("br",{})]}),S.msrp&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"MSRP:"})," $",S.msrp,h.jsx("br",{})]}),S.collectiblePrice&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Collectible:"})," $",S.collectiblePrice,h.jsx("br",{})]}),S.read&&S.dateRead&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Date Read:"})," ",S.dateRead,h.jsx("br",{})]}),S.amazonURL&&h.jsx("div",{style:{marginTop:"6px"},children:h.jsx("a",{href:S.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),h.jsxs("div",{className:"manga-modal-footer",style:{gap:"10px",alignItems:"center"},children:[h.jsx("div",{children:S.kind==="library"&&S.read?"Marked as read in your library.":S.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."}),S.kind==="library"&&h.jsx(h.Fragment,{children:S.read?h.jsx("button",{className:"manga-btn mini secondary",disabled:mt,onClick:()=>er(S,!1),type:"button",children:"Mark as unread"}):h.jsx("button",{className:"manga-btn mini",disabled:mt,onClick:()=>er(S,!0),type:"button",children:"Mark as read"})})]})]})]})}),e&&k.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:C=>{C.target===C.currentTarget&&ge()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:k.mode==="add"?"Add Entry":"Edit Entry"}),h.jsx("button",{className:"manga-modal-close",onClick:ge,type:"button",children:"Close"})]}),h.jsxs("div",{className:"admin-form-layout",children:[h.jsx("div",{className:"admin-cover-frame",children:h.jsx("img",{src:k.data.cover||"https://imgur.com/chUgq4W.png",alt:"Cover preview"})}),h.jsxs("div",{className:"admin-form-fields",children:[h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:k.data.title,onChange:C=>we("title",C.target.value)})]})}),E.length>0&&h.jsx("div",{className:"title-suggestions",children:E.map((C,Q)=>h.jsx("button",{type:"button",className:"manga-btn mini",onClick:()=>we("title",C),children:C},C+Q))}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:k.data.authors,onChange:C=>we("authors",C.target.value)})]})}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:k.data.publisher,onChange:C=>we("publisher",C.target.value)})]})}),h.jsxs("div",{className:"admin-row three",children:[h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:k.data.date,onChange:C=>we("date",C.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:k.data.datePurchased,onChange:C=>we("datePurchased",C.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:k.data.dateRead,onChange:C=>we("dateRead",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",placeholder:"e.g. 192",value:k.data.pageCount,onChange:C=>we("pageCount",C.target.value)})]}),h.jsxs("label",{children:["ISBN (library only)",h.jsx("input",{type:"text",value:k.data.isbn,onChange:C=>we("isbn",C.target.value)})]})]}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",placeholder:"Paste image URL here",value:k.data.cover,onChange:C=>we("cover",C.target.value)})]})}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:k.data.amountPaid,onChange:C=>we("amountPaid",C.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:k.data.msrp,onChange:C=>we("msrp",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:k.data.collectiblePrice,onChange:C=>we("collectiblePrice",C.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",min:"0",value:k.data.specialVolumes,onChange:C=>we("specialVolumes",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:k.data.specialType,onChange:C=>we("specialType",C.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:k.data.amazonURL,onChange:C=>we("amazonURL",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:k.data.demographic,onChange:C=>we("demographic",C.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:k.data.genre,onChange:C=>we("genre",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:k.data.subGenre,onChange:C=>we("subGenre",C.target.value)})]}),h.jsxs("label",{children:["Rating (1-5 stars)",h.jsx(tr,{value:k.data.rating,onChange:C=>we("rating",C)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:k.data.read,onChange:C=>we("read",C.target.checked,"checkbox")}),h.jsx("span",{children:"Mark as read"})]}),h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:k.multiAdd,onChange:C=>D(Q=>({...Q,multiAdd:C.target.checked}))}),h.jsx("span",{children:"Multi-create volumes"})]})]}),k.multiAdd&&h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Start Volume",h.jsx("input",{type:"number",min:"1",value:k.startVol,onChange:C=>D(Q=>({...Q,startVol:C.target.value}))})]}),h.jsxs("label",{children:["End Volume",h.jsx("input",{type:"number",min:"1",value:k.endVol,onChange:C=>D(Q=>({...Q,endVol:C.target.value}))})]})]})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:ge,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:ze,type:"button",children:k.mode==="add"?"Add":"Save"})]})]})})}),e&&b.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:C=>{C.target===C.currentTarget&&Zt()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",b.index+1," / ",b.items.length,")"]}),h.jsx("button",{className:"manga-modal-close",onClick:Zt,type:"button",children:"Close"})]}),b.items.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",b.items[b.index].data.title||"Untitled"]}),h.jsxs("div",{className:"admin-form-grid",children:[h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:b.items[b.index].data.title,onChange:C=>tt("title",C.target.value)})]}),h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:b.items[b.index].data.authors,onChange:C=>tt("authors",C.target.value)})]}),h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:b.items[b.index].data.publisher,onChange:C=>tt("publisher",C.target.value)})]}),h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:b.items[b.index].data.demographic,onChange:C=>tt("demographic",C.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:b.items[b.index].data.genre,onChange:C=>tt("genre",C.target.value)})]}),h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:b.items[b.index].data.subGenre,onChange:C=>tt("subGenre",C.target.value)})]}),h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:b.items[b.index].data.date,onChange:C=>tt("date",C.target.value)})]}),h.jsxs("label",{children:["ISBN",h.jsx("input",{type:"text",value:b.items[b.index].data.isbn,onChange:C=>tt("isbn",C.target.value)})]}),h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",value:b.items[b.index].data.cover,onChange:C=>tt("cover",C.target.value)})]}),h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",value:b.items[b.index].data.pageCount,onChange:C=>tt("pageCount",C.target.value)})]}),h.jsxs("label",{children:["Rating (1-5 stars)",h.jsx(tr,{value:b.items[b.index].data.rating,onChange:C=>tt("rating",C)})]}),h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:b.items[b.index].data.amountPaid,onChange:C=>tt("amountPaid",C.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:b.items[b.index].data.msrp,onChange:C=>tt("msrp",C.target.value)})]}),h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:b.items[b.index].data.collectiblePrice,onChange:C=>tt("collectiblePrice",C.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:b.items[b.index].data.datePurchased,onChange:C=>tt("datePurchased",C.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:b.items[b.index].data.dateRead,onChange:C=>tt("dateRead",C.target.value)})]}),h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:b.items[b.index].data.specialType,onChange:C=>tt("specialType",C.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",value:b.items[b.index].data.specialVolumes,onChange:C=>tt("specialVolumes",C.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:b.items[b.index].data.amazonURL,onChange:C=>tt("amazonURL",C.target.value)})]}),h.jsxs("label",{className:"checkbox-row",children:[h.jsx("input",{type:"checkbox",checked:b.items[b.index].data.read,onChange:C=>tt("read",C.target.checked,"checkbox")}),h.jsx("span",{children:"Marked as read"})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[h.jsxs("div",{children:[h.jsx("button",{className:"manga-btn secondary",onClick:Tr,type:"button",disabled:b.index===0,children:"Previous"}),h.jsx("button",{className:"manga-btn secondary",onClick:Br,type:"button",disabled:b.index===b.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:Zt,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:Nt,type:"button",children:"Save Edits"})]})]})]})]})})}),h.jsx("datalist",{id:"adminTitleSuggestions",children:y.map(C=>h.jsx("option",{value:C},C))})]})}const HP="https://imokmalworker.imokissick.workers.dev/?url=",qP="im_ok",Ev=300,GP={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function KP(r){const e=GP[r.status]||(typeof r.status=="string"?r.status.toLowerCase():"unknown");return{id:r.anime_id||r.id,title:r.anime_title||r.title||"Untitled",episodes:r.anime_num_episodes??r.episodes??null,status:e,score:r.score??null,image:r.anime_image_path||r.image_url||r.anime_img||r.picture||null}}function Tv(){return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null}]}async function QP(r,e){const t=`https://myanimelist.net/animelist/${r}/load.json?status=7&offset=${e}`,i=await fetch(`${HP}${encodeURIComponent(t)}`);if(!i.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return i.json()}async function YP(r=qP){const e=[];try{let t=0;for(;;){const i=await QP(r,t);if(!Array.isArray(i)||i.length===0||(e.push(...i),i.length<Ev))break;t+=Ev}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),Tv()}return e.length?e.map(KP):Tv()}function JP(){const{admin:r}=oa(),e=K=>K?K.toString().replace(/_/g," ").replace(/\b\w/g,fe=>fe.toUpperCase()):"Unknown",[t,i]=H.useState([]),[o,l]=H.useState([]),[d,p]=H.useState(""),[y,v]=H.useState("all"),[E,I]=H.useState(!0),[R,z]=H.useState(""),[W,Y]=H.useState(null),O=async()=>{const K=Array.from(new Set(t.map(fe=>fe.image).filter(Boolean)));if(!K.length){alert("No images found to download.");return}try{const fe=(await fw(async()=>{const{default:D}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:D}},[])).default,Te=new fe,N=Te.folder("images");await Promise.all(K.map(async(D,b)=>{try{const le=await(await fetch(D)).blob(),je=(D.split(".").pop()||"jpg").split(/[?#]/)[0];N.file(`image-${b+1}.${je}`,le)}catch(T){console.warn("Failed to fetch image",D,T)}}));const S=await Te.generateAsync({type:"blob"}),P=URL.createObjectURL(S),k=document.createElement("a");k.href=P,k.download="anime-images.zip",k.click(),URL.revokeObjectURL(P)}catch(fe){console.error("Zip download failed",fe),alert("Failed to create zip. Please try again.")}};H.useEffect(()=>{async function K(){try{const fe=await YP();i(fe),l(fe)}catch(fe){console.error(fe),z("Failed to load data from MAL.")}finally{I(!1)}}K()},[]);const ae=K=>{switch((K||"unknown").toLowerCase()){case"watching":return 0;case"completed":return 1;case"on_hold":return 2;case"plan_to_watch":return 3;case"dropped":return 4;default:return 5}};H.useEffect(()=>{let K=[...t];if(y!=="all"&&(K=K.filter(fe=>(fe.status||"").toLowerCase()===y)),d){const fe=d.toLowerCase();K=K.filter(Te=>(Te.title||"").toLowerCase().includes(fe))}K.sort((fe,Te)=>{const N=ae(fe.status),S=ae(Te.status);return N!==S?N-S:(fe.title||"").localeCompare(Te.title||"")}),l(K)},[t,y,d]);const oe=H.useMemo(()=>{const K=t.length,Te=t.reduce((P,k)=>P+(Number.isFinite(k.episodes)?Number(k.episodes):0),0)*.4,N={watching:0,completed:0,on_hold:0,dropped:0,plan_to_watch:0,unknown:0};t.forEach(P=>{const k=(P.status||"unknown").toLowerCase();N[k]!=null?N[k]+=1:N.unknown+=1});const S=t.reduce((P,k)=>Number.isFinite(k.score)?P+k.score:P,0)/Math.max(1,t.filter(P=>Number.isFinite(P.score)).length||1);return{total:K,byStatus:N,avgScore:Number.isFinite(S)?S:0,totalHours:Te}},[t]),ue=K=>{const fe=K.image||"https://imgur.com/chUgq4W.png";return h.jsxs("article",{className:"anime-card",onClick:()=>Y(K),children:[h.jsxs("div",{className:"anime-cover-wrap",children:[h.jsx("img",{className:"anime-cover",src:fe,alt:K.title,loading:"lazy",decoding:"async"}),h.jsx("div",{className:`badge-status ${(K.status||"unknown").toLowerCase()}`,children:e(K.status)}),K.score!=null&&h.jsx("div",{className:"badge-score",children:K.score})]}),h.jsxs("div",{className:"anime-meta",children:[h.jsx("div",{className:"anime-title",children:K.title}),h.jsx("div",{className:"anime-sub",children:K.episodes?`${K.episodes} episodes`:"Episodes: ?"}),h.jsxs("div",{className:"anime-progress",children:["Status: ",e(K.status)]})]})]},K.id||K.title)};return h.jsxs("main",{className:"anime-page",children:[h.jsxs("div",{className:"anime-content",children:[h.jsxs("header",{className:"anime-header",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"anime-title",children:"Tyler's Anime Library"}),h.jsx("p",{className:"anime-sub",children:"MAL-synced overview of your shows"})]}),r&&h.jsx("button",{className:"stat-link",type:"button",onClick:()=>{const K=Array.from(new Set(t.map(S=>S.image).filter(Boolean))),fe=new Blob([K.join(`
`)],{type:"text/plain"}),Te=URL.createObjectURL(fe),N=document.createElement("a");N.href=Te,N.download="anime-images.txt",N.click(),URL.revokeObjectURL(Te)},children:"Download Images"})]}),h.jsxs("div",{className:"anime-stats",children:[h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Total Entries"}),h.jsx("div",{className:"anime-stat-value",children:oe.total})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Watching"}),h.jsx("div",{className:"anime-stat-value",children:oe.byStatus.watching})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Completed"}),h.jsx("div",{className:"anime-stat-value",children:oe.byStatus.completed})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Plan to Watch"}),h.jsx("div",{className:"anime-stat-value",children:oe.byStatus.plan_to_watch})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Avg. Score"}),h.jsx("div",{className:"anime-stat-value",children:oe.avgScore?oe.avgScore.toFixed(1):""})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Hours Watched (est.)"}),h.jsx("div",{className:"anime-stat-value",children:oe.totalHours?oe.totalHours.toFixed(1):"0.0"})]}),r&&h.jsx("div",{className:"anime-stat-card",children:h.jsx("button",{type:"button",className:"manga-btn secondary",style:{width:"100%"},onClick:O,children:"Download Images (zip)"})})]}),h.jsxs("section",{className:"anime-toolbar",children:[h.jsx("input",{type:"text",placeholder:"Search anime by title...",value:d,onChange:K=>p(K.target.value),className:"anime-input"}),h.jsxs("select",{value:y,onChange:K=>v(K.target.value),className:"anime-select",children:[h.jsx("option",{value:"all",children:"All statuses"}),h.jsx("option",{value:"watching",children:"Watching"}),h.jsx("option",{value:"completed",children:"Completed"}),h.jsx("option",{value:"on_hold",children:"On Hold"}),h.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"}),h.jsx("option",{value:"dropped",children:"Dropped"})]})]}),E&&h.jsx("div",{className:"loading",children:"Loading anime list from MAL..."}),R&&h.jsx("div",{className:"error-state",children:R}),!E&&!R&&h.jsx(h.Fragment,{children:o.length===0?h.jsx("div",{className:"empty-state",children:"No results match your filters yet."}):h.jsx("section",{className:"anime-grid",children:o.map(K=>ue(K))})})]}),W&&h.jsx("div",{className:"modal-backdrop visible",onClick:K=>{K.target===K.currentTarget&&Y(null)},children:h.jsxs("div",{className:"anime-modal",children:[h.jsxs("div",{className:"anime-modal-header",children:[h.jsx("h2",{style:{color:"#ffb6c1",margin:0},children:W.title}),h.jsx("button",{className:"anime-modal-close",onClick:()=>Y(null),type:"button",children:"Close"})]}),h.jsxs("div",{className:"anime-modal-body",children:[h.jsx("div",{children:h.jsx("img",{className:"anime-modal-cover",src:W.image||"https://imgur.com/chUgq4W.png",alt:W.title})}),h.jsxs("div",{className:"anime-modal-meta",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Status:"})," ",e(W.status)]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Episodes:"})," ",W.episodes?W.episodes:"Unknown"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Score:"})," ",W.score!=null?W.score:"N/A"]})]})]})]})})]})}function XP(){const r={game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:"",image:""},{admin:e}=oa(),[t,i]=H.useState([]),[o,l]=H.useState(!0),[d,p]=H.useState(""),[y,v]=H.useState("all"),[E,I]=H.useState(!1),[R,z]=H.useState([]),[W,Y]=H.useState(""),[O,ae]=H.useState(null),[oe,ue]=H.useState(!1),[K,fe]=H.useState(r);H.useEffect(()=>{async function T(){try{const le=jr(ht,"tcg"),je=await Yo(le),Ye=[];je.forEach(Le=>Ye.push({id:Le.id,...Le.data()})),i(Ye)}catch(le){console.error("Error loading TCG:",le)}finally{l(!1)}}T()},[]);const Te=t.filter(T=>{if(y!=="all"&&T.game!==y)return!1;if(!d)return!0;const le=d.toLowerCase();return(T.name||"").toLowerCase().includes(le)||(T.setName||"").toLowerCase().includes(le)||(T.number||"").toLowerCase().includes(le)}),N=t.reduce((T,le)=>{const je=Number(le.quantity||1),Ye=Number(le.pricePaid||0),Le=Number(le.estimatedValue||0);return T.totalCards+=je,T.totalPaid+=je*Ye,T.totalValue+=je*Le,le.game==="pokemon"&&(T.pokemon+=je),le.game==="onepiece"&&(T.onepiece+=je),T},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),S=N.totalValue-N.totalPaid,P=(T,le)=>{fe(je=>({...je,[T]:le}))},k=async()=>{if(!e)return;if(!K.name.trim()){alert("Card name is required.");return}const T={game:K.game,name:K.name.trim(),setName:K.setName.trim(),number:K.number.trim(),rarity:K.rarity.trim(),condition:K.condition.trim(),quantity:Number(K.quantity||1),pricePaid:Number(K.pricePaid||0),estimatedValue:Number(K.estimatedValue||0),image:K.image.trim()};try{const le=jr(ht,"tcg");await Za(le,T),fe(r),ue(!1);const je=await Yo(le),Ye=[];je.forEach(Le=>Ye.push({id:Le.id,...Le.data()})),i(Ye)}catch(le){console.error("Error adding card:",le),alert("Failed to save card.")}},D=async()=>{if(!e||!O)return;if(!O.name.trim()){alert("Card name is required.");return}const T={game:O.game,name:O.name.trim(),setName:O.setName.trim(),number:O.number.trim(),rarity:O.rarity.trim(),condition:O.condition.trim(),quantity:Number(O.quantity||1),pricePaid:Number(O.pricePaid||0),estimatedValue:Number(O.estimatedValue||0),image:O.image?O.image.trim():""};try{await Mo(an(ht,"tcg",O.id),T),i(le=>le.map(je=>je.id===O.id?{...je,...T}:je)),ae(null)}catch(le){console.error("Error updating card:",le),alert("Failed to update card.")}},b=async T=>{if(e&&window.confirm("Delete this card?"))try{await Xa(an(ht,"tcg",T)),i(le=>le.filter(je=>je.id!==T))}catch(le){console.error("Delete error:",le),alert("Failed to delete card.")}};return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"TCG Collection"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Pokemon & One Piece TCG cards with quantities, prices, and collection value."})]}),e&&h.jsx("button",{className:"manga-btn",type:"button","aria-label":"Add card",onClick:()=>ue(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"56px",height:"56px",borderRadius:"50%",padding:0,fontSize:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),e&&oe&&h.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:T=>{T.target===T.currentTarget&&ue(!1)},children:h.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:T=>T.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Add card"}),h.jsx("button",{className:"dashboard-close",onClick:()=>ue(!1),type:"button",children:"Close"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[h.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:K.image?h.jsx("img",{src:K.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:K.game,onChange:T=>P("game",T.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:K.name,onChange:T=>P("name",T.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:K.setName,onChange:T=>P("setName",T.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:K.number,onChange:T=>P("number",T.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:K.rarity,onChange:T=>P("rarity",T.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:K.condition,onChange:T=>P("condition",T.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",min:"1",value:K.quantity,onChange:T=>P("quantity",T.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:K.pricePaid,onChange:T=>P("pricePaid",T.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:K.estimatedValue,onChange:T=>P("estimatedValue",T.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",h.jsx("input",{type:"text",value:K.image||"",onChange:T=>P("image",T.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[h.jsx("button",{onClick:()=>{fe(r),ue(!1)},style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),h.jsx("button",{onClick:k,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})]})]})}),e&&O&&h.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:T=>{T.target===T.currentTarget&&ae(null)},children:h.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:T=>T.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Edit card"}),h.jsx("button",{className:"dashboard-close",onClick:()=>ae(null),type:"button",children:"Close"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[h.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:O.image?h.jsx("img",{src:O.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:O.game,onChange:T=>ae(le=>({...le,game:T.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:O.name,onChange:T=>ae(le=>({...le,name:T.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:O.setName,onChange:T=>ae(le=>({...le,setName:T.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:O.number,onChange:T=>ae(le=>({...le,number:T.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:O.rarity,onChange:T=>ae(le=>({...le,rarity:T.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:O.condition,onChange:T=>ae(le=>({...le,condition:T.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",value:O.quantity,onChange:T=>ae(le=>({...le,quantity:T.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (each)",h.jsx("input",{type:"number",value:O.pricePaid,onChange:T=>ae(le=>({...le,pricePaid:T.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (each)",h.jsx("input",{type:"number",value:O.estimatedValue,onChange:T=>ae(le=>({...le,estimatedValue:T.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",h.jsx("input",{type:"text",value:O.image||"",onChange:T=>ae(le=>({...le,image:T.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[h.jsx("button",{onClick:()=>ae(null),style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),h.jsx("button",{onClick:D,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save changes"})]})]})}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:N.totalCards})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",N.totalPaid.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",N.totalValue.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:S>=0?"#00e676":"#ff8a80"},children:[S>=0?"+":"-","$",Math.abs(S).toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:N.pokemon})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:N.onepiece})]})]}),h.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[h.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:d,onChange:T=>p(T.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),h.jsxs("select",{value:y,onChange:T=>v(T.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[h.jsx("option",{value:"all",children:"All games"}),h.jsx("option",{value:"pokemon",children:"Pokemon only"}),h.jsx("option",{value:"onepiece",children:"One Piece only"})]})]}),o?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):Te.length===0?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):h.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:Te.map(T=>{const le=Number(T.quantity||1),je=le*Number(T.pricePaid||0),Ye=le*Number(T.estimatedValue||0);return h.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem",display:"flex",flexDirection:"column",gap:"6px"},children:[T.image&&h.jsx("div",{style:{width:"100%",paddingTop:"120%",position:"relative",overflow:"hidden",borderRadius:"10px",background:"#1e0d14"},children:h.jsx("img",{src:T.image,alt:T.name||"card image",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"}})}),h.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:T.name||"Unnamed card"}),h.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:T.setName||""}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[h.jsxs("span",{children:["#",T.number||"-"]}),h.jsx("span",{children:T.rarity||""})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Cond: ",T.condition||"N/A"]}),h.jsxs("span",{children:["Qty: ",le]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Paid: $",je.toFixed(2)]}),h.jsxs("span",{children:["Value: $",Ye.toFixed(2)]})]}),h.jsxs("div",{style:{marginTop:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem"},children:T.game==="pokemon"?"Pokemon":"One Piece"}),e&&h.jsx("button",{onClick:()=>ae({...T,pricePaid:T.pricePaid??"",estimatedValue:T.estimatedValue??"",quantity:T.quantity??1}),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"rgba(255,105,180,0.15)",color:"#ffb6c1",fontSize:"0.7rem",cursor:"pointer"},children:"Edit"})]}),e&&h.jsx("div",{style:{marginTop:"4px",display:"flex",justifyContent:"flex-end"},children:h.jsx("button",{onClick:()=>b(T.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})})]},T.id)})})]})}const Yu="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",Ju="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",Xu="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82";function Ws(r){if(!r)return null;if(r instanceof Date)return r;if(r&&typeof r.toDate=="function")return r.toDate();const e=String(r).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,d,p]=t;return new Date(Number(l),Number(d)-1,Number(p))}const i=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(i){let[,l,d,p]=i;const y=p.length===2?+`20${p}`:Number(p);return new Date(y,Number(l)-1,Number(d))}const o=new Date(e);return isNaN(o.getTime())?null:o}function pw(r){const e=(r.seriesKey||r.series||r.Series||r.title||r.Title||"").trim();return e?e.replace(/\bvolume\s+\d+.*$/i,"").replace(/\bvol\.?\s+\d+.*$/i,"").trim().toLowerCase():""}function ZP(r){const e=new Map;for(const t of r){const i=pw(t)||t.id;if(!e.has(i)){const y=(t.series||t.Series||t.title||t.Title||"Unknown Series").trim();e.set(i,{key:i,title:y,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const o=e.get(i);o.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;o.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(o.readVolumes+=1,o.readPages+=l);const p=Number(t.rating||t.Rating);!isNaN(p)&&p>0&&(o.ratingSum+=p,o.ratingCount+=1)}return e}function jo(r,e,t=5){const i=new Map;for(const o of r.values()){const l=(o[e]||"").trim();if(!l)continue;const d=l.split(/[\/,]/).map(p=>p.trim()).filter(Boolean);for(const p of d)i.set(p,(i.get(p)||0)+1)}return[...i.entries()].sort((o,l)=>l[1]-o[1]).slice(0,t).map(([o,l])=>({name:o,count:l}))}function xv(r,e){const t=Array.from({length:12},(i,o)=>{const l=new Date(e,o,1);return{key:`${e}-${o}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:o,value:0}});for(const i of r){const o=Ws(i.dateRead||i.DateRead);!o||o.getFullYear()!==e||(t[o.getMonth()].value+=1)}return t}function $h(r){const e=r.getFullYear(),t=`${r.getMonth()+1}`.padStart(2,"0"),i=`${r.getDate()}`.padStart(2,"0");return`${e}-${t}-${i}`}async function Wh(r,e){try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function eA(r){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of r){const d=Ws(l.dateRead||l.DateRead);d&&(t[d.getDay()]+=1)}if(!t.some(l=>l>0))return[];const o=t.reduce((l,d)=>Math.max(l,d),0)||1;return e.map((l,d)=>({label:l,value:t[d],pct:t[d]/o}))}function tA(r,e=8){const t=[...r.values()];t.sort((l,d)=>d.volumes-l.volumes);const i=t.slice(0,e),o=i.reduce((l,d)=>Math.max(l,d.volumes),0)||1;return i.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/o}))}function nA(r){const e=[];for(const t of r){const i=Ws(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!i)continue;const o=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:i,title:o})}return e.sort((t,i)=>t.date-i.date),e}function rA(r){const e=new Date;for(const t of r)if(t.date>=e)return t;return r[r.length-1]||null}function iA(r){let e=0,t=0;for(const i of r){const o=Ws(i.datePurchased||i.DatePurchased),l=Ws(i.dateRead||i.DateRead);if(!o||!l)continue;const d=l-o;d<=0||(e+=d/(1e3*60*60*24),t+=1)}return t?e/t:null}function sA(r){let e=0,t=0,i=0;for(const o of r){const l=Number(o.msrp||o.MSRP||0)||0,d=Number(o.amountPaid||o.AmountPaid||o.pricePaid||0)||l||0,p=Number(o.collectiblePrice||o.CollectiblePrice||0)||0;e+=l,t+=d,i+=p}return{msrpTotal:e,paidTotal:t,collectibleTotal:i}}function oA(r){const e=new Map;for(const t of r){const i=pw(t)||t.id;e.has(i)||e.set(i,{key:i,title:t.series||t.Series||t.title||t.Title||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]});const o=e.get(i);o.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,d=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,p=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,y=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;o.msrp+=l,o.paid+=d,o.collectible+=p,o.pages+=y,v&&(o.readPages+=y);const E=Number(t.rating||t.Rating);!isNaN(E)&&E>0&&o.ratings.push(E)}return[...e.values()]}function aA(r){let e=0,t=0;for(const i of r){const o=Number(i.pages||i.Pages||i.pageCount||0)||0;e+=o,(!!i.read||i.status==="Read"||i.Read===!0)&&(t+=o)}return{total:e,read:t}}function lA(r){let e=0,t=0;for(const i of r.values())i.ratingCount>0&&(e+=i.ratingSum/i.ratingCount,t+=1);return t?e/t:null}function uA({data:r}){if(!r||!r.length)return h.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=r.reduce((v,E)=>Math.max(v,E.value),0)||1,t=480,i=230,o=30,l=i-o*2,d=t/Math.max(r.length-1,1),p=r.map((v,E)=>{const I=E*d,R=i-o-v.value/e*l;return{...v,x:I,y:R}}),y=p.map((v,E)=>E===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return h.jsx("div",{className:"line-chart",children:h.jsxs("svg",{viewBox:`0 0 ${t} ${i}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,E)=>{const I=i-o-v*l;return h.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:I,y2:I},`h-${E}`)}),p.map((v,E)=>h.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:o/2,y2:i-o/2},`v-${E}`)),h.jsx("path",{className:"line-path",d:y}),p.map((v,E)=>h.jsxs("g",{children:[h.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),h.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),h.jsx("text",{className:"line-label",x:v.x,y:i-4,children:v.label})]},E))]})})}function cA({data:r}){return!r||!r.length?h.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):h.jsx("div",{className:"weekday-bars",children:r.map(e=>h.jsxs("div",{className:"weekday-col",children:[h.jsx("div",{className:"weekday-count",children:e.value}),h.jsx("div",{className:"weekday-bar-vert",children:h.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),h.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function dA(r,e){const t=r.getFullYear(),i=r.getMonth(),l=new Date(t,i,1).getDay(),d=new Date(t,i+1,0).getDate(),p=new Map;for(const v of e){const E=v.date;if(E.getFullYear()===t&&E.getMonth()===i){const I=E.getDate();p.has(I)||p.set(I,[]),p.get(I).push(v)}}const y=[];for(let v=0;v<l;v++)y.push({type:"pad"});for(let v=1;v<=d;v++)y.push({type:"day",day:v,releases:p.get(v)||[]});return y}function hA(){const{user:r,admin:e,loading:t}=oa(),[i,o]=H.useState([]),[l,d]=H.useState([]),[p,y]=H.useState(!0),[v,E]=H.useState(null),[I,R]=H.useState("-"),[z,W]=H.useState({yearly:Yu,release:Ju,activity:Xu}),[Y,O]=H.useState(!1),[ae,oe]=H.useState(!1),[ue,K]=H.useState(()=>new Date),[fe,Te]=H.useState({open:!1,type:null}),N=new Date().getFullYear(),S=H.useRef(null),P=H.useRef(null),k=H.useRef("");H.useEffect(()=>{typeof window>"u"||(S.current=localStorage.getItem("dashboard-yearly-posted"),P.current=localStorage.getItem("dashboard-release-posted"),k.current=localStorage.getItem("dashboard-activity-posted")||"")},[]),H.useEffect(()=>{if(!e)return;const X=an(ht,"settings","webhooks");(async()=>{try{const me=await Ef(X);if(me.exists()){const ie=me.data();W({yearly:ie.yearly||Yu,release:ie.release||Ju,activity:ie.activity||Xu})}else await vv(X,{yearly:Yu,release:Ju,activity:Xu})}catch(me){console.error("Failed to load webhook settings",me)}})()},[e]),H.useEffect(()=>{let X=!1;async function me(){if(!r||!e){o([]),d([]),E(null),y(!1);return}try{y(!0);const[ie,C]=await Promise.all([Yo(jr(ht,"library")),Yo(jr(ht,"wishlist"))]);if(X)return;o(ie.docs.map(Q=>({id:Q.id,...Q.data()}))),d(C.docs.map(Q=>({id:Q.id,...Q.data()}))),E(null)}catch(ie){console.error(ie),X||E("Failed to load dashboard data.")}finally{X||y(!1)}}return me(),()=>{X=!0}},[r,e]);const D=H.useMemo(()=>{const X=i.length,me=i.filter(st=>!!st.read||st.status==="Read"||st.Read===!0).length,ie=X-me,C=X?Math.round(me/X*100):0,Q=l.length,G=ZP(i),L=xv(i,N),he=xv(i,N-1),Be=L.reduce((st,zn)=>st+zn.value,0),rt=eA(i),Et=tA(G),lt=nA(l),We=rA(lt),ut=iA(i),hn=sA(i),fn=aA(i),Mn=lA(G),en=jo(G,"publisher",5),Fn=jo(G,"genre",5),fi=jo(G,"demographic",5),Un=oA(i),cs=[...i].map(st=>{const zn=Ws(st.dateRead||st.DateRead)||Ws(st.datePurchased||st.DatePurchased);return zn?{title:st.title||st.Title||st.series||st.Series||"Untitled",type:st.dateRead||st.DateRead?"Read":"Purchased",date:zn}:null}).filter(Boolean).sort((st,zn)=>zn.date-st.date).slice(0,12);return{totalLibrary:X,readCount:me,unreadCount:ie,readPct:C,wishlistCount:Q,seriesMap:G,monthlyReads:L,prevYearReads:he,currentYearReadsTotal:Be,weekdayBreakdown:rt,topSeriesBars:Et,releases:lt,nextRelease:We,avgDays:ut,collectionValue:hn,pages:fn,avgRating:Mn,topPublishers:en,topGenres:Fn,topDemographics:fi,seriesAggregates:Un,activity:cs}},[i,l,N]),{totalLibrary:b,readCount:T,unreadCount:le,readPct:je,wishlistCount:Ye,seriesMap:Le,monthlyReads:de,prevYearReads:Se,currentYearReadsTotal:pe,weekdayBreakdown:M,topSeriesBars:J,releases:ge,nextRelease:ke,avgDays:Ve,collectionValue:Me,pages:we,avgRating:ze,topPublishers:Ze,topGenres:mt,topDemographics:dn,seriesAggregates:Zt,activity:Mt}=D,Ft=ke?ke.date:null,er=!!v;if(H.useEffect(()=>{if(!Se||!Se.length)return;const X=N-1,me=Se.reduce((G,L)=>G+L.value,0);if(!me||(S.current?parseInt(S.current,10):null)===X)return;const C=Se.map(G=>`${G.label}: ${G.value}`).join(", "),Q=`Yearly reads summary for ${X}: ${me} total. Breakdown: ${C}`;Wh(z.yearly,Q).then(()=>{S.current=String(X),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String(X))})},[Se,N]),H.useEffect(()=>{if(!ke||!ge.length)return;const X=$h(ke.date),me=$h(new Date);if(X>me||P.current===X)return;const ie=ge.filter(Q=>$h(Q.date)===X);if(!ie.length)return;const C=`Wishlist releases for ${X}:
${ie.map(Q=>`- ${Q.title}`).join(`
`)}`;Wh(z.release,C).then(()=>{P.current=X,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",X)})},[ke,ge]),H.useEffect(()=>{var C,Q;if(!e||!Mt||!Mt.length)return;const X=Mt[0];if(!X||!X.date)return;const me=`${X.type}-${X.title}-${((Q=(C=X.date).toISOString)==null?void 0:Q.call(C))||X.date}`;if(k.current===me)return;k.current=me;const ie=`Activity: ${X.type}  ${X.title} (${X.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})`;Wh(z.activity,ie).then(()=>{typeof window<"u"&&localStorage.setItem("dashboard-activity-posted",me)})},[Mt,e,z]),H.useEffect(()=>{if(!Ft){R("-");return}const X=()=>{const ie=Ft-new Date;if(ie<=0){R("Released");return}const C=Math.floor(ie/1e3),Q=Math.floor(C/86400),G=Math.floor(C%86400/3600).toString().padStart(2,"0"),L=Math.floor(C%3600/60).toString().padStart(2,"0"),he=Math.floor(C%60).toString().padStart(2,"0");R(`${Q}d ${G}:${L}:${he}`)};X();const me=setInterval(X,1e3);return()=>clearInterval(me)},[Ft]),t)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"Checking permissions..."})]})});if(!r||!e)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-locked",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(p)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),v?h.jsx("p",{className:"error",children:v}):h.jsx("p",{children:"Loading stats..."})]})});const Er=b+Ye,tt=Er?Math.round(b/Er*100):0,Br=[...Le.values()].filter(X=>X.ratingCount>0).map(X=>({title:X.title,avg:X.ratingSum/X.ratingCount,count:X.ratingCount})).sort((X,me)=>me.avg-X.avg||me.count-X.count).slice(0,3);function Tr(){if(Ft)K(new Date(Ft.getFullYear(),Ft.getMonth(),1));else if(ge.length){const X=ge[0].date;K(new Date(X.getFullYear(),X.getMonth(),1))}oe(!0)}function Nt(X){Te({open:!0,type:X})}function vn(){Te({open:!1,type:null})}const tr=dA(ue,ge);function nr(){const X=fe.type;if(!X)return null;if(X==="publishers"){const me=[...jo(Le,"publisher",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Publishers by Series"}),me.length===0?h.jsx("p",{children:"No publisher data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Publisher"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:me.map((ie,C)=>h.jsxs("tr",{children:[h.jsx("td",{children:C+1}),h.jsx("td",{children:ie.name}),h.jsx("td",{children:ie.count})]},ie.name+C))})]})]})}if(X==="genres"){const me=[...jo(Le,"genre",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Genres by Series"}),me.length===0?h.jsx("p",{children:"No genre data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Genre"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:me.map((ie,C)=>h.jsxs("tr",{children:[h.jsx("td",{children:C+1}),h.jsx("td",{children:ie.name}),h.jsx("td",{children:ie.count})]},ie.name+C))})]})]})}if(X==="demographics"){const me=[...jo(Le,"demographic",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Demographics by Series"}),me.length===0?h.jsx("p",{children:"No demographic data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Demographic"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:me.map((ie,C)=>h.jsxs("tr",{children:[h.jsx("td",{children:C+1}),h.jsx("td",{children:ie.name}),h.jsx("td",{children:ie.count})]},ie.name+C))})]})]})}if(X==="timeToRead")return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Average Time From Purchase to Read"}),Ve==null?h.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):h.jsxs("p",{children:["On average, it takes"," ",h.jsxs("strong",{children:[Ve.toFixed(1)," days"]})," from purchase to finishing a volume."]})]});if(X==="collectionValue"){const{msrpTotal:me,paidTotal:ie}=Me,C=me-ie,Q=me>0?(ie/me*100).toFixed(1):"-",G=[...Zt].filter(L=>L.msrp||L.paid||L.collectible).sort((L,he)=>he.msrp+he.collectible-(L.msrp+L.collectible));return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Collection Value Breakdown"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total MSRP"}),h.jsxs("td",{children:["$",me.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Total Paid"}),h.jsxs("td",{children:["$",ie.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Difference"}),h.jsxs("td",{children:["$",C.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Paid vs MSRP"}),h.jsx("td",{children:Q==="-"?"-":`${Q}%`})]})]})}),G.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"MSRP"}),h.jsx("th",{children:"Paid"}),h.jsx("th",{children:"Collectible"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:G.map((L,he)=>h.jsxs("tr",{children:[h.jsx("td",{children:L.title}),h.jsxs("td",{children:["$",L.msrp.toFixed(2)]}),h.jsxs("td",{children:["$",L.paid.toFixed(2)]}),h.jsx("td",{children:L.collectible?`$${L.collectible.toFixed(2)}`:"--"}),h.jsx("td",{children:L.books})]},L.title+he))})]})]})]})}if(X==="pages"){const me=[...Zt].filter(ie=>ie.pages>0).map(ie=>({...ie,pct:ie.pages?Math.round(ie.readPages/ie.pages*100):0})).sort((ie,C)=>C.pages-ie.pages);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Pages Read vs Total"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total Pages"}),h.jsx("td",{children:we.total.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Pages Read"}),h.jsx("td",{children:we.read.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Completion"}),h.jsx("td",{children:we.total?`${(we.read/we.total*100).toFixed(1)}%`:"-"})]})]})}),me.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Read Pages"}),h.jsx("th",{children:"Total Pages"}),h.jsx("th",{children:"% Read"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:me.map((ie,C)=>h.jsxs("tr",{children:[h.jsx("td",{children:ie.title}),h.jsx("td",{children:ie.readPages.toLocaleString()}),h.jsx("td",{children:ie.pages.toLocaleString()}),h.jsxs("td",{children:[ie.pct,"%"]}),h.jsx("td",{children:ie.books})]},ie.title+C))})]})]})]})}if(X==="ratings"){const me=[...Zt].map(ie=>{if(!ie.ratings.length)return null;const C=ie.ratings.reduce((Q,G)=>Q+G,0)/ie.ratings.length;return{title:ie.title,avg:C,count:ie.ratings.length}}).filter(Boolean).sort((ie,C)=>C.avg-ie.avg||C.count-ie.count);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Ratings Overview"}),ze==null?h.jsx("p",{children:"No ratings have been recorded yet."}):h.jsxs("p",{children:["Average series rating across rated series is"," ",h.jsx("strong",{children:ze.toFixed(2)}),"."]}),me.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Avg"}),h.jsx("th",{children:"Ratings"})]})}),h.jsx("tbody",{children:me.map((ie,C)=>h.jsxs("tr",{children:[h.jsx("td",{children:ie.title}),h.jsx("td",{children:ie.avg.toFixed(2)}),h.jsx("td",{children:ie.count})]},ie.title+C))})]})]})]})}return X==="releases"?h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Wishlist Releases"}),ge.length===0?h.jsx("p",{children:"No wishlist releases found."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Date"}),h.jsx("th",{children:"Title"})]})}),h.jsx("tbody",{children:ge.map((me,ie)=>h.jsxs("tr",{children:[h.jsx("td",{children:me.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),h.jsx("td",{children:me.title})]},ie))})]})]}):null}return h.jsxs("div",{className:"page dashboard-page",children:[h.jsxs("header",{className:"dashboard-header",children:[h.jsxs("div",{children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{className:"dashboard-sub",children:"Admin-only analytics for your manga library and wishlist."})]}),e&&h.jsx("button",{className:"stat-link",onClick:()=>O(!0),type:"button",children:"Admin Settings"})]}),h.jsx("section",{id:"dashboardSection",className:"page-section active",children:h.jsxs("div",{className:"dashboard-grid",children:[h.jsxs("div",{className:"stat-stack",children:[h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Total Library Books"}),h.jsx("div",{className:"stat-value",children:b}),h.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Wishlist Items"}),h.jsx("div",{className:"stat-value",children:Ye}),h.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Read / Unread"}),h.jsx("div",{className:"pie",style:{"--pct":`${je*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[je,"%"]})}),h.jsxs("div",{className:"stat-value",children:[T," read / ",le," unread"]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("ratings"),children:[h.jsx("h3",{children:"Ratings"}),h.jsx("div",{className:"stat-value",children:ze==null?"-":ze.toFixed(2)}),h.jsx("div",{className:"stat-sub",children:"Average across rated series."}),h.jsx("div",{className:"stat-list compact",children:Br.length?Br.map((X,me)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:me+1}),h.jsx("span",{className:"stat-name",children:X.title}),h.jsx("span",{className:"stat-count",children:X.avg.toFixed(2)})]},X.title+me)):h.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("pages"),children:[h.jsx("h3",{children:"Page Count Read / Total"}),h.jsxs("div",{className:"stat-value",children:[we.read.toLocaleString()," / ",we.total.toLocaleString()]}),h.jsx("div",{className:"stat-sub",children:we.total?`${(we.read/we.total*100).toFixed(1)}% read`:"-"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Library vs Wishlist"}),h.jsx("div",{className:"pie",style:{"--pct":`${tt*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[tt,"%"]})}),h.jsxs("div",{className:"stat-value",children:[b," / ",Ye]}),h.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("demographics"),children:[h.jsx("h3",{children:"Top Demographics"}),h.jsx("div",{className:"stat-list",children:dn.length?dn.slice(0,3).map((X,me)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:me+1}),h.jsx("span",{className:"stat-name",children:X.name}),h.jsx("span",{className:"stat-count",children:X.count})]},X.name)):h.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("publishers"),children:[h.jsx("h3",{children:"Top Publishers"}),h.jsx("div",{className:"stat-list",children:Ze.length?Ze.slice(0,3).map((X,me)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:me+1}),h.jsx("span",{className:"stat-name",children:X.name}),h.jsx("span",{className:"stat-count",children:X.count})]},X.name)):h.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("genres"),children:[h.jsx("h3",{children:"Top Genres"}),h.jsx("div",{className:"stat-list",children:mt.length?mt.slice(0,3).map((X,me)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:me+1}),h.jsx("span",{className:"stat-name",children:X.name}),h.jsx("span",{className:"stat-count",children:X.count})]},X.name)):h.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>{Tr()},children:[h.jsx("h3",{children:"Next Wishlist Release"}),h.jsx("div",{className:"stat-value next-release",children:ke?ke.title:"No upcoming releases"}),h.jsxs("div",{className:"stat-sub",children:[Ft?Ft.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",h.jsx("br",{}),h.jsx("span",{id:"statNextCountdown",children:I})]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("collectionValue"),style:{textAlign:"center"},children:[h.jsx("h3",{children:"Collection Pricing"}),h.jsxs("div",{className:"stat-value stat-msrp",children:["$",Me.msrpTotal.toFixed(2)]}),h.jsxs("div",{className:"stat-value stat-paid",children:["$",Me.paidTotal.toFixed(2),Me.msrpTotal>0&&h.jsxs("span",{className:"stat-paid-pct",children:["(",((1-Me.paidTotal/Me.msrpTotal)*100).toFixed(1),"% off)"]})]}),h.jsxs("div",{className:"stat-value stat-collectible",children:["$",Me.collectibleTotal.toFixed(2)]}),h.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Current Year Reads"}),h.jsx("div",{className:"stat-value",children:pe}),h.jsxs("div",{className:"stat-sub",children:["Reads in ",N]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("timeToRead"),children:[h.jsx("h3",{children:"Avg Days From Purchase to Read"}),h.jsx("div",{className:"stat-value",children:Ve==null?"-":`${Ve.toFixed(1)} days`}),h.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),h.jsxs("div",{className:"stat-duo",children:[h.jsxs("div",{className:"stat-card tall",children:[h.jsxs("h3",{children:["Reads Per Month (",N,")"]}),h.jsx(uA,{data:de})]}),h.jsxs("div",{className:"stat-card tall",children:[h.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),h.jsx(cA,{data:M}),h.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),h.jsxs("div",{className:"stat-card wide",children:[h.jsx("h3",{children:"Activity Log"}),er&&h.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),h.jsx("div",{className:"activity-log",children:Mt.length?Mt.map((X,me)=>h.jsxs("div",{className:"activity-row",children:[h.jsx("span",{className:"activity-type",children:X.type}),h.jsx("span",{className:"activity-title",children:X.title}),h.jsx("span",{className:"activity-date",children:X.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]},X.title+me)):h.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]})]})}),ae&&h.jsx("div",{id:"calendarOverlay",onClick:()=>oe(!1),children:h.jsxs("div",{id:"calendarCard",onClick:X=>X.stopPropagation(),children:[h.jsxs("div",{className:"calendar-header",children:[h.jsx("div",{className:"calendar-title",children:ue.toLocaleString(void 0,{month:"long",year:"numeric"})}),h.jsxs("div",{className:"calendar-nav",children:[h.jsx("button",{className:"calendar-nav-btn",onClick:()=>K(new Date(ue.getFullYear(),ue.getMonth()-1,1)),children:"<"}),h.jsx("button",{className:"calendar-nav-btn",onClick:()=>K(new Date(ue.getFullYear(),ue.getMonth()+1,1)),children:">"})]})]}),h.jsxs("div",{className:"calendar-weekdays",children:[h.jsx("div",{children:"Sun"}),h.jsx("div",{children:"Mon"}),h.jsx("div",{children:"Tue"}),h.jsx("div",{children:"Wed"}),h.jsx("div",{children:"Thu"}),h.jsx("div",{children:"Fri"}),h.jsx("div",{children:"Sat"})]}),h.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:tr.map((X,me)=>X.type==="pad"?h.jsx("div",{className:"calendar-day pad"},me):h.jsxs("div",{className:"calendar-day",children:[h.jsx("div",{className:"day-num",children:X.day}),h.jsxs("div",{className:"calendar-releases",children:[X.releases.slice(0,2).map((ie,C)=>h.jsx("div",{className:"calendar-release",title:ie.title,children:ie.title},C)),X.releases.length>2&&h.jsxs("button",{className:"calendar-more-btn",children:["+",X.releases.length-2," more"]})]})]},me))}),!ge.length&&h.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),h.jsx("button",{id:"calendarClose",onClick:()=>oe(!1),children:"x"})]})}),fe.open&&h.jsx("div",{id:"statDetailOverlay",onClick:vn,children:h.jsxs("div",{id:"statDetailCard",onClick:X=>X.stopPropagation(),children:[h.jsx("button",{id:"statDetailClose",onClick:vn,children:"x"}),h.jsxs("h2",{id:"statDetailTitle",children:[fe.type==="publishers"&&"Top Publishers",fe.type==="genres"&&"Top Genres",fe.type==="demographics"&&"Top Demographics",fe.type==="timeToRead"&&"Avg Time From Purchase to Read",fe.type==="collectionValue"&&"Collection Value",fe.type==="pages"&&"Pages Read vs Total",fe.type==="ratings"&&"Ratings",fe.type==="releases"&&"Wishlist Releases"]}),h.jsx("div",{id:"statDetailBody",children:nr()})]})}),e&&Y&&h.jsx("div",{className:"dashboard-modal-backdrop visible",onClick:X=>{X.target===X.currentTarget&&O(!1)},children:h.jsxs("div",{className:"dashboard-modal",children:[h.jsxs("div",{className:"dashboard-modal-header",children:[h.jsx("h3",{children:"Webhook Settings"}),h.jsx("button",{className:"dashboard-close",onClick:()=>O(!1),type:"button",children:"Close"})]}),h.jsxs("div",{className:"dashboard-modal-body",children:[h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Yearly summary webhook"}),h.jsx("input",{type:"text",value:z.yearly,onChange:X=>W(me=>({...me,yearly:X.target.value}))})]}),h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Release timer webhook"}),h.jsx("input",{type:"text",value:z.release,onChange:X=>W(me=>({...me,release:X.target.value}))})]}),h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Activity webhook"}),h.jsx("input",{type:"text",value:z.activity,onChange:X=>W(me=>({...me,activity:X.target.value}))})]})]}),h.jsxs("div",{className:"dashboard-modal-footer",children:[h.jsx("button",{className:"stat-link",type:"button",onClick:async()=>{try{await vv(an(ht,"settings","webhooks"),{yearly:z.yearly||Yu,release:z.release||Ju,activity:z.activity||Xu}),O(!1)}catch(X){console.error("Failed to save webhooks",X),alert("Failed to save webhooks.")}},children:"Save"}),h.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>O(!1),children:"Cancel"})]})]})})]})}function fA(){const r=bc(),{user:e}=oa();e&&r("/");async function t(){try{const i=new Dr;await k_(Qi,i),r("/")}catch(i){console.error(i),alert("Google Sign-In failed.")}}return h.jsx("div",{className:"signin-page",children:h.jsxs("div",{className:"signin-card",children:[h.jsx("h2",{className:"signin-title",children:"Welcome Back"}),h.jsx("p",{className:"signin-sub",children:"Sign in to access your dashboard & collections."}),h.jsxs("button",{className:"google-btn",onClick:t,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsxs("button",{className:"signin-cancel",onClick:()=>r("/"),children:["<"," Back to Home"]})]})})}function pA(){return h.jsxs(FP,{children:[h.jsx(zP,{}),h.jsxs(ET,{children:[h.jsx(ri,{path:"/",element:h.jsx(_v,{})}),h.jsx(ri,{path:"/home",element:h.jsx(_v,{})}),h.jsx(ri,{path:"/manga",element:h.jsx(WP,{})}),h.jsx(ri,{path:"/anime",element:h.jsx(JP,{})}),h.jsx(ri,{path:"/tcg",element:h.jsx(XP,{})}),h.jsx(ri,{path:"/dashboard",element:h.jsx(hA,{})}),h.jsx(ri,{path:"/signin",element:h.jsx(fA,{})}),h.jsx(ri,{path:"*",element:h.jsx(_T,{to:"/home",replace:!0})})]})]})}PE.createRoot(document.getElementById("root")).render(h.jsx(Sv.StrictMode,{children:h.jsx(PT,{basename:"/base",children:h.jsx(pA,{})})}));
