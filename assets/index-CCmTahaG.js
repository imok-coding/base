function vE(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Iv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Rh={exports:{}},qa={},Ph={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function _E(){if(Ag)return He;Ag=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function C(L){return L===null||typeof L!="object"?null:(L=I&&L[I]||L["@@iterator"],typeof L=="function"?L:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,J={};function V(L,Z,Se){this.props=L,this.context=Z,this.refs=J,this.updater=Se||U}V.prototype.isReactComponent={},V.prototype.setState=function(L,Z){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Z,"setState")},V.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function oe(){}oe.prototype=V.prototype;function fe(L,Z,Se){this.props=L,this.context=Z,this.refs=J,this.updater=Se||U}var ue=fe.prototype=new oe;ue.constructor=fe,K(ue,V.prototype),ue.isPureReactComponent=!0;var ce=Array.isArray,de=Object.prototype.hasOwnProperty,pe={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function R(L,Z,Se){var Ve,Le={},Ue=null,We=null;if(Z!=null)for(Ve in Z.ref!==void 0&&(We=Z.ref),Z.key!==void 0&&(Ue=""+Z.key),Z)de.call(Z,Ve)&&!b.hasOwnProperty(Ve)&&(Le[Ve]=Z[Ve]);var Be=arguments.length-2;if(Be===1)Le.children=Se;else if(1<Be){for(var tt=Array(Be),ct=0;ct<Be;ct++)tt[ct]=arguments[ct+2];Le.children=tt}if(L&&L.defaultProps)for(Ve in Be=L.defaultProps,Be)Le[Ve]===void 0&&(Le[Ve]=Be[Ve]);return{$$typeof:r,type:L,key:Ue,ref:We,props:Le,_owner:pe.current}}function P(L,Z){return{$$typeof:r,type:L.type,key:Z,ref:L.ref,props:L.props,_owner:L._owner}}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function D(L){var Z={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Se){return Z[Se]})}var N=/\/+/g;function x(L,Z){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):Z.toString(36)}function ie(L,Z,Se,Ve,Le){var Ue=typeof L;(Ue==="undefined"||Ue==="boolean")&&(L=null);var We=!1;if(L===null)We=!0;else switch(Ue){case"string":case"number":We=!0;break;case"object":switch(L.$$typeof){case r:case e:We=!0}}if(We)return We=L,Le=Le(We),L=Ve===""?"."+x(We,0):Ve,ce(Le)?(Se="",L!=null&&(Se=L.replace(N,"$&/")+"/"),ie(Le,Z,Se,"",function(ct){return ct})):Le!=null&&(k(Le)&&(Le=P(Le,Se+(!Le.key||We&&We.key===Le.key?"":(""+Le.key).replace(N,"$&/")+"/")+L)),Z.push(Le)),1;if(We=0,Ve=Ve===""?".":Ve+":",ce(L))for(var Be=0;Be<L.length;Be++){Ue=L[Be];var tt=Ve+x(Ue,Be);We+=ie(Ue,Z,Se,tt,Le)}else if(tt=C(L),typeof tt=="function")for(L=tt.call(L),Be=0;!(Ue=L.next()).done;)Ue=Ue.value,tt=Ve+x(Ue,Be++),We+=ie(Ue,Z,Se,tt,Le);else if(Ue==="object")throw Z=String(L),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return We}function Ne(L,Z,Se){if(L==null)return L;var Ve=[],Le=0;return ie(L,Ve,"","",function(Ue){return Z.call(Se,Ue,Le++)}),Ve}function De(L){if(L._status===-1){var Z=L._result;Z=Z(),Z.then(function(Se){(L._status===0||L._status===-1)&&(L._status=1,L._result=Se)},function(Se){(L._status===0||L._status===-1)&&(L._status=2,L._result=Se)}),L._status===-1&&(L._status=0,L._result=Z)}if(L._status===1)return L._result.default;throw L._result}var Ae={current:null},G={transition:null},we={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:G,ReactCurrentOwner:pe};function me(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:Ne,forEach:function(L,Z,Se){Ne(L,function(){Z.apply(this,arguments)},Se)},count:function(L){var Z=0;return Ne(L,function(){Z++}),Z},toArray:function(L){return Ne(L,function(Z){return Z})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},He.Component=V,He.Fragment=t,He.Profiler=o,He.PureComponent=fe,He.StrictMode=i,He.Suspense=g,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,He.act=me,He.cloneElement=function(L,Z,Se){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ve=K({},L.props),Le=L.key,Ue=L.ref,We=L._owner;if(Z!=null){if(Z.ref!==void 0&&(Ue=Z.ref,We=pe.current),Z.key!==void 0&&(Le=""+Z.key),L.type&&L.type.defaultProps)var Be=L.type.defaultProps;for(tt in Z)de.call(Z,tt)&&!b.hasOwnProperty(tt)&&(Ve[tt]=Z[tt]===void 0&&Be!==void 0?Be[tt]:Z[tt])}var tt=arguments.length-2;if(tt===1)Ve.children=Se;else if(1<tt){Be=Array(tt);for(var ct=0;ct<tt;ct++)Be[ct]=arguments[ct+2];Ve.children=Be}return{$$typeof:r,type:L.type,key:Le,ref:Ue,props:Ve,_owner:We}},He.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},He.createElement=R,He.createFactory=function(L){var Z=R.bind(null,L);return Z.type=L,Z},He.createRef=function(){return{current:null}},He.forwardRef=function(L){return{$$typeof:p,render:L}},He.isValidElement=k,He.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:De}},He.memo=function(L,Z){return{$$typeof:v,type:L,compare:Z===void 0?null:Z}},He.startTransition=function(L){var Z=G.transition;G.transition={};try{L()}finally{G.transition=Z}},He.unstable_act=me,He.useCallback=function(L,Z){return Ae.current.useCallback(L,Z)},He.useContext=function(L){return Ae.current.useContext(L)},He.useDebugValue=function(){},He.useDeferredValue=function(L){return Ae.current.useDeferredValue(L)},He.useEffect=function(L,Z){return Ae.current.useEffect(L,Z)},He.useId=function(){return Ae.current.useId()},He.useImperativeHandle=function(L,Z,Se){return Ae.current.useImperativeHandle(L,Z,Se)},He.useInsertionEffect=function(L,Z){return Ae.current.useInsertionEffect(L,Z)},He.useLayoutEffect=function(L,Z){return Ae.current.useLayoutEffect(L,Z)},He.useMemo=function(L,Z){return Ae.current.useMemo(L,Z)},He.useReducer=function(L,Z,Se){return Ae.current.useReducer(L,Z,Se)},He.useRef=function(L){return Ae.current.useRef(L)},He.useState=function(L){return Ae.current.useState(L)},He.useSyncExternalStore=function(L,Z,Se){return Ae.current.useSyncExternalStore(L,Z,Se)},He.useTransition=function(){return Ae.current.useTransition()},He.version="18.3.1",He}var kg;function Tf(){return kg||(kg=1,Ph.exports=_E()),Ph.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function wE(){if(bg)return qa;bg=1;var r=Tf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(p,g,v){var E,I={},C=null,U=null;v!==void 0&&(C=""+v),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(U=g.ref);for(E in g)i.call(g,E)&&!l.hasOwnProperty(E)&&(I[E]=g[E]);if(p&&p.defaultProps)for(E in g=p.defaultProps,g)I[E]===void 0&&(I[E]=g[E]);return{$$typeof:e,type:p,key:C,ref:U,props:I,_owner:o.current}}return qa.Fragment=t,qa.jsx=d,qa.jsxs=d,qa}var Ng;function EE(){return Ng||(Ng=1,Rh.exports=wE()),Rh.exports}var h=EE(),$=Tf();const Cv=Iv($),xE=vE({__proto__:null,default:Cv},[$]);var $u={},Ah={exports:{}},jn={},kh={exports:{}},bh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function TE(){return jg||(jg=1,(function(r){function e(G,we){var me=G.length;G.push(we);e:for(;0<me;){var L=me-1>>>1,Z=G[L];if(0<o(Z,we))G[L]=we,G[me]=Z,me=L;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var we=G[0],me=G.pop();if(me!==we){G[0]=me;e:for(var L=0,Z=G.length,Se=Z>>>1;L<Se;){var Ve=2*(L+1)-1,Le=G[Ve],Ue=Ve+1,We=G[Ue];if(0>o(Le,me))Ue<Z&&0>o(We,Le)?(G[L]=We,G[Ue]=me,L=Ue):(G[L]=Le,G[Ve]=me,L=Ve);else if(Ue<Z&&0>o(We,me))G[L]=We,G[Ue]=me,L=Ue;else break e}}return we}function o(G,we){var me=G.sortIndex-we.sortIndex;return me!==0?me:G.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],v=[],E=1,I=null,C=3,U=!1,K=!1,J=!1,V=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ue(G){for(var we=t(v);we!==null;){if(we.callback===null)i(v);else if(we.startTime<=G)i(v),we.sortIndex=we.expirationTime,e(g,we);else break;we=t(v)}}function ce(G){if(J=!1,ue(G),!K)if(t(g)!==null)K=!0,De(de);else{var we=t(v);we!==null&&Ae(ce,we.startTime-G)}}function de(G,we){K=!1,J&&(J=!1,oe(R),R=-1),U=!0;var me=C;try{for(ue(we),I=t(g);I!==null&&(!(I.expirationTime>we)||G&&!D());){var L=I.callback;if(typeof L=="function"){I.callback=null,C=I.priorityLevel;var Z=L(I.expirationTime<=we);we=r.unstable_now(),typeof Z=="function"?I.callback=Z:I===t(g)&&i(g),ue(we)}else i(g);I=t(g)}if(I!==null)var Se=!0;else{var Ve=t(v);Ve!==null&&Ae(ce,Ve.startTime-we),Se=!1}return Se}finally{I=null,C=me,U=!1}}var pe=!1,b=null,R=-1,P=5,k=-1;function D(){return!(r.unstable_now()-k<P)}function N(){if(b!==null){var G=r.unstable_now();k=G;var we=!0;try{we=b(!0,G)}finally{we?x():(pe=!1,b=null)}}else pe=!1}var x;if(typeof fe=="function")x=function(){fe(N)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Ne=ie.port2;ie.port1.onmessage=N,x=function(){Ne.postMessage(null)}}else x=function(){V(N,0)};function De(G){b=G,pe||(pe=!0,x())}function Ae(G,we){R=V(function(){G(r.unstable_now())},we)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_continueExecution=function(){K||U||(K=!0,De(de))},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(G){switch(C){case 1:case 2:case 3:var we=3;break;default:we=C}var me=C;C=we;try{return G()}finally{C=me}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(G,we){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var me=C;C=G;try{return we()}finally{C=me}},r.unstable_scheduleCallback=function(G,we,me){var L=r.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?L+me:L):me=L,G){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=me+Z,G={id:E++,callback:we,priorityLevel:G,startTime:me,expirationTime:Z,sortIndex:-1},me>L?(G.sortIndex=me,e(v,G),t(g)===null&&G===t(v)&&(J?(oe(R),R=-1):J=!0,Ae(ce,me-L))):(G.sortIndex=Z,e(g,G),K||U||(K=!0,De(de))),G},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(G){var we=C;return function(){var me=C;C=we;try{return G.apply(this,arguments)}finally{C=me}}}})(bh)),bh}var Dg;function SE(){return Dg||(Dg=1,kh.exports=TE()),kh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function IE(){if(Vg)return jn;Vg=1;var r=Tf(),e=SE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function C(n){return g.call(I,n)?!0:g.call(E,n)?!1:v.test(n)?I[n]=!0:(E[n]=!0,!1)}function U(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function K(n,s,a,c){if(s===null||typeof s>"u"||U(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function J(n,s,a,c,f,y,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=w}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){V[n]=new J(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];V[s]=new J(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){V[n]=new J(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){V[n]=new J(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){V[n]=new J(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){V[n]=new J(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){V[n]=new J(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){V[n]=new J(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){V[n]=new J(n,5,!1,n.toLowerCase(),null,!1,!1)});var oe=/[\-:]([a-z])/g;function fe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(oe,fe);V[s]=new J(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(oe,fe);V[s]=new J(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(oe,fe);V[s]=new J(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){V[n]=new J(n,1,!1,n.toLowerCase(),null,!1,!1)}),V.xlinkHref=new J("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){V[n]=new J(n,1,!1,n.toLowerCase(),null,!0,!0)});function ue(n,s,a,c){var f=V.hasOwnProperty(s)?V[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(K(s,a,f,c)&&(a=null),c||f===null?C(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var ce=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),pe=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),G=Symbol.iterator;function we(n){return n===null||typeof n!="object"?null:(n=G&&n[G]||n["@@iterator"],typeof n=="function"?n:null)}var me=Object.assign,L;function Z(n){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+n}var Se=!1;function Ve(n,s){if(!n||Se)return"";Se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var c=q}Reflect.construct(n,[],s)}else{try{s.call()}catch(q){c=q}n.call(s.prototype)}else{try{throw Error()}catch(q){c=q}n()}}catch(q){if(q&&c&&typeof q.stack=="string"){for(var f=q.stack.split(`
`),y=c.stack.split(`
`),w=f.length-1,A=y.length-1;1<=w&&0<=A&&f[w]!==y[A];)A--;for(;1<=w&&0<=A;w--,A--)if(f[w]!==y[A]){if(w!==1||A!==1)do if(w--,A--,0>A||f[w]!==y[A]){var j=`
`+f[w].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=w&&0<=A);break}}}finally{Se=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Z(n):""}function Le(n){switch(n.tag){case 5:return Z(n.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return n=Ve(n.type,!1),n;case 11:return n=Ve(n.type.render,!1),n;case 1:return n=Ve(n.type,!0),n;default:return""}}function Ue(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case pe:return"Portal";case P:return"Profiler";case R:return"StrictMode";case x:return"Suspense";case ie:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ne:return s=n.displayName||null,s!==null?s:Ue(n.type)||"Memo";case De:s=n._payload,n=n._init;try{return Ue(n(s))}catch{}}return null}function We(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(s);case 8:return s===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function tt(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ct(n){var s=tt(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,y.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function pn(n){n._valueTracker||(n._valueTracker=ct(n))}function Ft(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=tt(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Ut(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ke(n,s){var a=s.checked;return me({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function lr(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Be(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function mn(n,s){s=s.checked,s!=null&&ue(n,"checked",s,!1)}function zt(n,s){mn(n,s);var a=Be(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?qn(n,s.type,a):s.hasOwnProperty("defaultValue")&&qn(n,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ur(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function qn(n,s,a){(s!=="number"||Ut(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var gn=Array.isArray;function Bt(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Be(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Gn(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return me({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function yn(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(gn(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Be(a)}}function $t(n,s){var a=Be(s.value),c=Be(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Kr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Me(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Me(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Sn,Qr=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Sn=Sn||document.createElement("div"),Sn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Sn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Wt(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kn=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(n){Kn.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),In[s]=In[n]})});function Yr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||In.hasOwnProperty(n)&&In[n]?(""+s).trim():s+"px"}function Y(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=Yr(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var ae=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T(n,s){if(s){if(ae[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function H(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X=null;function M(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var B=null,ye=null,ze=null;function _t(n){if(n=ba(n)){if(typeof B!="function")throw Error(t(280));var s=n.stateNode;s&&(s=iu(s),B(n.stateNode,n.type,s))}}function nt(n){ye?ze?ze.push(n):ze=[n]:ye=n}function Xe(){if(ye){var n=ye,s=ze;if(ze=ye=null,_t(n),s)for(n=0;n<s.length;n++)_t(s[n])}}function Rt(n,s){return n(s)}function Qn(){}var Ht=!1;function Jr(n,s,a){if(Ht)return n(s,a);Ht=!0;try{return Rt(n,s,a)}finally{Ht=!1,(ye!==null||ze!==null)&&(Qn(),Xe())}}function at(n,s){var a=n.stateNode;if(a===null)return null;var c=iu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Pr=!1;if(p)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{Pr=!1}function _n(n,s,a,c,f,y,w,A,j){var q=Array.prototype.slice.call(arguments,3);try{s.apply(a,q)}catch(re){this.onError(re)}}var cr=!1,Ti=null,On=!1,gt=null,Ar={onError:function(n){cr=!0,Ti=n}};function no(n,s,a,c,f,y,w,A,j){cr=!1,Ti=null,_n.apply(Ar,arguments)}function Al(n,s,a,c,f,y,w,A,j){if(no.apply(this,arguments),cr){if(cr){var q=Ti;cr=!1,Ti=null}else throw Error(t(198));On||(On=!0,gt=q)}}function dr(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Es(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function hr(n){if(dr(n)!==n)throw Error(t(188))}function kl(n){var s=n.alternate;if(!s){if(s=dr(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return hr(f),n;if(y===c)return hr(f),s;y=y.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=y;else{for(var w=!1,A=f.child;A;){if(A===a){w=!0,a=f,c=y;break}if(A===c){w=!0,c=f,a=y;break}A=A.sibling}if(!w){for(A=y.child;A;){if(A===a){w=!0,a=y,c=f;break}if(A===c){w=!0,c=y,a=f;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function ha(n){return n=kl(n),n!==null?ro(n):null}function ro(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=ro(n);if(s!==null)return s;n=n.sibling}return null}var io=e.unstable_scheduleCallback,fa=e.unstable_cancelCallback,bl=e.unstable_shouldYield,nd=e.unstable_requestPaint,lt=e.unstable_now,Nl=e.unstable_getCurrentPriorityLevel,xs=e.unstable_ImmediatePriority,Si=e.unstable_UserBlockingPriority,Yn=e.unstable_NormalPriority,pa=e.unstable_LowPriority,jl=e.unstable_IdlePriority,Ts=null,Ln=null;function Dl(n){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(Ts,n,void 0,(n.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:Ol,ma=Math.log,Vl=Math.LN2;function Ol(n){return n>>>=0,n===0?32:31-(ma(n)/Vl|0)|0}var so=64,oo=4194304;function Ii(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ss(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,y=n.pingedLanes,w=a&268435455;if(w!==0){var A=w&~f;A!==0?c=Ii(A):(y&=w,y!==0&&(c=Ii(y)))}else w=a&~f,w!==0?c=Ii(w):y!==0&&(c=Ii(y));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-wn(s),f=1<<a,c|=n[a],s&=~f;return c}function rd(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,y=n.pendingLanes;0<y;){var w=31-wn(y),A=1<<w,j=f[w];j===-1?((A&a)===0||(A&c)!==0)&&(f[w]=rd(A,s)):j<=s&&(n.expiredLanes|=A),y&=~A}}function Mn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Is(){var n=so;return so<<=1,(so&4194240)===0&&(so=64),n}function Ci(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Ri(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-wn(s),n[s]=a}function ot(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-wn(a),y=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~y}}function Pi(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-wn(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var Qe=0;function Ai(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ll,ao,Ml,Fl,Ul,ga=!1,kr=[],Jt=null,fr=null,pr=null,ki=new Map,Jn=new Map,br=[],id="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zl(n,s){switch(n){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":ki.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jn.delete(s.pointerId)}}function Cn(n,s,a,c,f,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:y,targetContainers:[f]},s!==null&&(s=ba(s),s!==null&&ao(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function sd(n,s,a,c,f){switch(s){case"focusin":return Jt=Cn(Jt,n,s,a,c,f),!0;case"dragenter":return fr=Cn(fr,n,s,a,c,f),!0;case"mouseover":return pr=Cn(pr,n,s,a,c,f),!0;case"pointerover":var y=f.pointerId;return ki.set(y,Cn(ki.get(y)||null,n,s,a,c,f)),!0;case"gotpointercapture":return y=f.pointerId,Jn.set(y,Cn(Jn.get(y)||null,n,s,a,c,f)),!0}return!1}function Bl(n){var s=ks(n.target);if(s!==null){var a=dr(s);if(a!==null){if(s=a.tag,s===13){if(s=Es(a),s!==null){n.blockedOn=s,Ul(n.priority,function(){Ml(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=lo(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);X=c,a.target.dispatchEvent(c),X=null}else return s=ba(a),s!==null&&ao(s),n.blockedOn=a,!1;s.shift()}return!0}function Cs(n,s,a){Zr(n)&&a.delete(s)}function $l(){ga=!1,Jt!==null&&Zr(Jt)&&(Jt=null),fr!==null&&Zr(fr)&&(fr=null),pr!==null&&Zr(pr)&&(pr=null),ki.forEach(Cs),Jn.forEach(Cs)}function mr(n,s){n.blockedOn===s&&(n.blockedOn=null,ga||(ga=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$l)))}function gr(n){function s(f){return mr(f,n)}if(0<kr.length){mr(kr[0],n);for(var a=1;a<kr.length;a++){var c=kr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Jt!==null&&mr(Jt,n),fr!==null&&mr(fr,n),pr!==null&&mr(pr,n),ki.forEach(s),Jn.forEach(s),a=0;a<br.length;a++)c=br[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<br.length&&(a=br[0],a.blockedOn===null);)Bl(a),a.blockedOn===null&&br.shift()}var ei=ce.ReactCurrentBatchConfig,bi=!0;function yt(n,s,a,c){var f=Qe,y=ei.transition;ei.transition=null;try{Qe=1,ya(n,s,a,c)}finally{Qe=f,ei.transition=y}}function od(n,s,a,c){var f=Qe,y=ei.transition;ei.transition=null;try{Qe=4,ya(n,s,a,c)}finally{Qe=f,ei.transition=y}}function ya(n,s,a,c){if(bi){var f=lo(n,s,a,c);if(f===null)yd(n,s,c,Rs,a),zl(n,c);else if(sd(f,n,s,a,c))c.stopPropagation();else if(zl(n,c),s&4&&-1<id.indexOf(n)){for(;f!==null;){var y=ba(f);if(y!==null&&Ll(y),y=lo(n,s,a,c),y===null&&yd(n,s,c,Rs,a),y===f)break;f=y}f!==null&&c.stopPropagation()}else yd(n,s,c,null,a)}}var Rs=null;function lo(n,s,a,c){if(Rs=null,n=M(c),n=ks(n),n!==null)if(s=dr(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Es(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Rs=n,null}function va(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nl()){case xs:return 1;case Si:return 4;case Yn:case pa:return 16;case jl:return 536870912;default:return 16}default:return 16}}var Fn=null,uo=null,Rn=null;function _a(){if(Rn)return Rn;var n,s=uo,a=s.length,c,f="value"in Fn?Fn.value:Fn.textContent,y=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===f[y-c];c++);return Rn=f.slice(n,1<c?1-c:void 0)}function co(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Nr(){return!0}function wa(){return!1}function Xt(n){function s(a,c,f,y,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Nr:wa,this.isPropagationStopped=wa,this}return me(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),s}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ho=Xt(yr),jr=me({},yr,{view:0,detail:0}),ad=Xt(jr),fo,ti,Ni,Ps=me({},jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ni&&(Ni&&n.type==="mousemove"?(fo=n.screenX-Ni.screenX,ti=n.screenY-Ni.screenY):ti=fo=0,Ni=n),fo)},movementY:function(n){return"movementY"in n?n.movementY:ti}}),po=Xt(Ps),Ea=me({},Ps,{dataTransfer:0}),Wl=Xt(Ea),mo=me({},jr,{relatedTarget:0}),go=Xt(mo),Hl=me({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),ni=Xt(Hl),ql=me({},yr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gl=Xt(ql),Kl=me({},yr,{data:0}),xa=Xt(Kl),yo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ql[n])?!!s[n]:!1}function Dr(){return Yl}var u=me({},jr,{key:function(n){if(n.key){var s=yo[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=co(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?En[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dr,charCode:function(n){return n.type==="keypress"?co(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?co(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Xt(u),_=me({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Xt(_),F=me({},jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dr}),Q=Xt(F),he=me({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),st=Xt(he),Dt=me({},Ps,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ye=Xt(Dt),qt=[9,13,27,32],Pt=p&&"CompositionEvent"in window,Xn=null;p&&"documentMode"in document&&(Xn=document.documentMode);var Un=p&&"TextEvent"in window&&!Xn,As=p&&(!Pt||Xn&&8<Xn&&11>=Xn),vo=" ",Tp=!1;function Sp(n,s){switch(n){case"keyup":return qt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _o=!1;function mw(n,s){switch(n){case"compositionend":return Ip(s);case"keypress":return s.which!==32?null:(Tp=!0,vo);case"textInput":return n=s.data,n===vo&&Tp?null:n;default:return null}}function gw(n,s){if(_o)return n==="compositionend"||!Pt&&Sp(n,s)?(n=_a(),Rn=uo=Fn=null,_o=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return As&&s.locale!=="ko"?null:s.data;default:return null}}var yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!yw[n.type]:s==="textarea"}function Rp(n,s,a,c){nt(c),s=tu(s,"onChange"),0<s.length&&(a=new ho("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Ta=null,Sa=null;function vw(n){Hp(n,0)}function Jl(n){var s=So(n);if(Ft(s))return n}function _w(n,s){if(n==="change")return s}var Pp=!1;if(p){var ld;if(p){var ud="oninput"in document;if(!ud){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),ud=typeof Ap.oninput=="function"}ld=ud}else ld=!1;Pp=ld&&(!document.documentMode||9<document.documentMode)}function kp(){Ta&&(Ta.detachEvent("onpropertychange",bp),Sa=Ta=null)}function bp(n){if(n.propertyName==="value"&&Jl(Sa)){var s=[];Rp(s,Sa,n,M(n)),Jr(vw,s)}}function ww(n,s,a){n==="focusin"?(kp(),Ta=s,Sa=a,Ta.attachEvent("onpropertychange",bp)):n==="focusout"&&kp()}function Ew(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jl(Sa)}function xw(n,s){if(n==="click")return Jl(s)}function Tw(n,s){if(n==="input"||n==="change")return Jl(s)}function Sw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var vr=typeof Object.is=="function"?Object.is:Sw;function Ia(n,s){if(vr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!g.call(s,f)||!vr(n[f],s[f]))return!1}return!0}function Np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jp(n,s){var a=Np(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Np(a)}}function Dp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Dp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Vp(){for(var n=window,s=Ut();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Ut(n.document)}return s}function cd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Iw(n){var s=Vp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Dp(a.ownerDocument.documentElement,a)){if(c!==null&&cd(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,y=Math.min(c.start,f);c=c.end===void 0?y:Math.min(c.end,f),!n.extend&&y>c&&(f=c,c=y,y=f),f=jp(a,y);var w=jp(a,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),y>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Cw=p&&"documentMode"in document&&11>=document.documentMode,wo=null,dd=null,Ca=null,hd=!1;function Op(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hd||wo==null||wo!==Ut(c)||(c=wo,"selectionStart"in c&&cd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ca&&Ia(Ca,c)||(Ca=c,c=tu(dd,"onSelect"),0<c.length&&(s=new ho("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=wo)))}function Xl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Eo={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},fd={},Lp={};p&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function Zl(n){if(fd[n])return fd[n];if(!Eo[n])return n;var s=Eo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Lp)return fd[n]=s[a];return n}var Mp=Zl("animationend"),Fp=Zl("animationiteration"),Up=Zl("animationstart"),zp=Zl("transitionend"),Bp=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(n,s){Bp.set(n,s),l(s,[n])}for(var pd=0;pd<$p.length;pd++){var md=$p[pd],Rw=md.toLowerCase(),Pw=md[0].toUpperCase()+md.slice(1);ji(Rw,"on"+Pw)}ji(Mp,"onAnimationEnd"),ji(Fp,"onAnimationIteration"),ji(Up,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(zp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function Wp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Al(c,s,void 0,n),n.currentTarget=null}function Hp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var y=void 0;if(s)for(var w=c.length-1;0<=w;w--){var A=c[w],j=A.instance,q=A.currentTarget;if(A=A.listener,j!==y&&f.isPropagationStopped())break e;Wp(f,A,q),y=j}else for(w=0;w<c.length;w++){if(A=c[w],j=A.instance,q=A.currentTarget,A=A.listener,j!==y&&f.isPropagationStopped())break e;Wp(f,A,q),y=j}}}if(On)throw n=gt,On=!1,gt=null,n}function dt(n,s){var a=s[Td];a===void 0&&(a=s[Td]=new Set);var c=n+"__bubble";a.has(c)||(qp(s,n,2,!1),a.add(c))}function gd(n,s,a){var c=0;s&&(c|=4),qp(a,n,c,s)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Pa(n){if(!n[eu]){n[eu]=!0,i.forEach(function(a){a!=="selectionchange"&&(Aw.has(a)||gd(a,!1,n),gd(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[eu]||(s[eu]=!0,gd("selectionchange",!1,s))}}function qp(n,s,a,c){switch(va(s)){case 1:var f=yt;break;case 4:f=od;break;default:f=ya}a=f.bind(null,s,a,n),f=void 0,!Pr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function yd(n,s,a,c,f){var y=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var j=w.tag;if((j===3||j===4)&&(j=w.stateNode.containerInfo,j===f||j.nodeType===8&&j.parentNode===f))return;w=w.return}for(;A!==null;){if(w=ks(A),w===null)return;if(j=w.tag,j===5||j===6){c=y=w;continue e}A=A.parentNode}}c=c.return}Jr(function(){var q=y,re=M(a),se=[];e:{var ne=Bp.get(n);if(ne!==void 0){var ge=ho,Ee=n;switch(n){case"keypress":if(co(a)===0)break e;case"keydown":case"keyup":ge=m;break;case"focusin":Ee="focus",ge=go;break;case"focusout":Ee="blur",ge=go;break;case"beforeblur":case"afterblur":ge=go;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=po;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Q;break;case Mp:case Fp:case Up:ge=ni;break;case zp:ge=st;break;case"scroll":ge=ad;break;case"wheel":ge=Ye;break;case"copy":case"cut":case"paste":ge=Gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=S}var xe=(s&4)!==0,St=!xe&&n==="scroll",z=xe?ne!==null?ne+"Capture":null:ne;xe=[];for(var O=q,W;O!==null;){W=O;var le=W.stateNode;if(W.tag===5&&le!==null&&(W=le,z!==null&&(le=at(O,z),le!=null&&xe.push(Aa(O,le,W)))),St)break;O=O.return}0<xe.length&&(ne=new ge(ne,Ee,null,a,re),se.push({event:ne,listeners:xe}))}}if((s&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",ge=n==="mouseout"||n==="pointerout",ne&&a!==X&&(Ee=a.relatedTarget||a.fromElement)&&(ks(Ee)||Ee[ri]))break e;if((ge||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,ge?(Ee=a.relatedTarget||a.toElement,ge=q,Ee=Ee?ks(Ee):null,Ee!==null&&(St=dr(Ee),Ee!==St||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(ge=null,Ee=q),ge!==Ee)){if(xe=po,le="onMouseLeave",z="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(xe=S,le="onPointerLeave",z="onPointerEnter",O="pointer"),St=ge==null?ne:So(ge),W=Ee==null?ne:So(Ee),ne=new xe(le,O+"leave",ge,a,re),ne.target=St,ne.relatedTarget=W,le=null,ks(re)===q&&(xe=new xe(z,O+"enter",Ee,a,re),xe.target=W,xe.relatedTarget=St,le=xe),St=le,ge&&Ee)t:{for(xe=ge,z=Ee,O=0,W=xe;W;W=xo(W))O++;for(W=0,le=z;le;le=xo(le))W++;for(;0<O-W;)xe=xo(xe),O--;for(;0<W-O;)z=xo(z),W--;for(;O--;){if(xe===z||z!==null&&xe===z.alternate)break t;xe=xo(xe),z=xo(z)}xe=null}else xe=null;ge!==null&&Gp(se,ne,ge,xe,!1),Ee!==null&&St!==null&&Gp(se,St,Ee,xe,!0)}}e:{if(ne=q?So(q):window,ge=ne.nodeName&&ne.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ne.type==="file")var Ie=_w;else if(Cp(ne))if(Pp)Ie=Tw;else{Ie=Ew;var Re=ww}else(ge=ne.nodeName)&&ge.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Ie=xw);if(Ie&&(Ie=Ie(n,q))){Rp(se,Ie,a,re);break e}Re&&Re(n,ne,q),n==="focusout"&&(Re=ne._wrapperState)&&Re.controlled&&ne.type==="number"&&qn(ne,"number",ne.value)}switch(Re=q?So(q):window,n){case"focusin":(Cp(Re)||Re.contentEditable==="true")&&(wo=Re,dd=q,Ca=null);break;case"focusout":Ca=dd=wo=null;break;case"mousedown":hd=!0;break;case"contextmenu":case"mouseup":case"dragend":hd=!1,Op(se,a,re);break;case"selectionchange":if(Cw)break;case"keydown":case"keyup":Op(se,a,re)}var Pe;if(Pt)e:{switch(n){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else _o?Sp(n,a)&&(je="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(As&&a.locale!=="ko"&&(_o||je!=="onCompositionStart"?je==="onCompositionEnd"&&_o&&(Pe=_a()):(Fn=re,uo="value"in Fn?Fn.value:Fn.textContent,_o=!0)),Re=tu(q,je),0<Re.length&&(je=new xa(je,n,null,a,re),se.push({event:je,listeners:Re}),Pe?je.data=Pe:(Pe=Ip(a),Pe!==null&&(je.data=Pe)))),(Pe=Un?mw(n,a):gw(n,a))&&(q=tu(q,"onBeforeInput"),0<q.length&&(re=new xa("onBeforeInput","beforeinput",null,a,re),se.push({event:re,listeners:q}),re.data=Pe))}Hp(se,s)})}function Aa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function tu(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=at(n,a),y!=null&&c.unshift(Aa(n,y,f)),y=at(n,s),y!=null&&c.push(Aa(n,y,f))),n=n.return}return c}function xo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gp(n,s,a,c,f){for(var y=s._reactName,w=[];a!==null&&a!==c;){var A=a,j=A.alternate,q=A.stateNode;if(j!==null&&j===c)break;A.tag===5&&q!==null&&(A=q,f?(j=at(a,y),j!=null&&w.unshift(Aa(a,j,A))):f||(j=at(a,y),j!=null&&w.push(Aa(a,j,A)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var kw=/\r\n?/g,bw=/\u0000|\uFFFD/g;function Kp(n){return(typeof n=="string"?n:""+n).replace(kw,`
`).replace(bw,"")}function nu(n,s,a){if(s=Kp(s),Kp(n)!==s&&a)throw Error(t(425))}function ru(){}var vd=null,_d=null;function wd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,Nw=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(n){return Qp.resolve(null).then(n).catch(Dw)}:Ed;function Dw(n){setTimeout(function(){throw n})}function xd(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),gr(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);gr(s)}function Di(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Yp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var To=Math.random().toString(36).slice(2),Vr="__reactFiber$"+To,ka="__reactProps$"+To,ri="__reactContainer$"+To,Td="__reactEvents$"+To,Vw="__reactListeners$"+To,Ow="__reactHandles$"+To;function ks(n){var s=n[Vr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[ri]||a[Vr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Yp(n);n!==null;){if(a=n[Vr])return a;n=Yp(n)}return s}n=a,a=n.parentNode}return null}function ba(n){return n=n[Vr]||n[ri],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function So(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function iu(n){return n[ka]||null}var Sd=[],Io=-1;function Vi(n){return{current:n}}function ht(n){0>Io||(n.current=Sd[Io],Sd[Io]=null,Io--)}function ut(n,s){Io++,Sd[Io]=n.current,n.current=s}var Oi={},on=Vi(Oi),Pn=Vi(!1),bs=Oi;function Co(n,s){var a=n.type.contextTypes;if(!a)return Oi;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in a)f[y]=s[y];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function An(n){return n=n.childContextTypes,n!=null}function su(){ht(Pn),ht(on)}function Jp(n,s,a){if(on.current!==Oi)throw Error(t(168));ut(on,s),ut(Pn,a)}function Xp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,We(n)||"Unknown",f));return me({},a,c)}function ou(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Oi,bs=on.current,ut(on,n),ut(Pn,Pn.current),!0}function Zp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Xp(n,s,bs),c.__reactInternalMemoizedMergedChildContext=n,ht(Pn),ht(on),ut(on,n)):ht(Pn),ut(Pn,a)}var ii=null,au=!1,Id=!1;function em(n){ii===null?ii=[n]:ii.push(n)}function Lw(n){au=!0,em(n)}function Li(){if(!Id&&ii!==null){Id=!0;var n=0,s=Qe;try{var a=ii;for(Qe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}ii=null,au=!1}catch(f){throw ii!==null&&(ii=ii.slice(n+1)),io(xs,Li),f}finally{Qe=s,Id=!1}}return null}var Ro=[],Po=0,lu=null,uu=0,Zn=[],er=0,Ns=null,si=1,oi="";function js(n,s){Ro[Po++]=uu,Ro[Po++]=lu,lu=n,uu=s}function tm(n,s,a){Zn[er++]=si,Zn[er++]=oi,Zn[er++]=Ns,Ns=n;var c=si;n=oi;var f=32-wn(c)-1;c&=~(1<<f),a+=1;var y=32-wn(s)+f;if(30<y){var w=f-f%5;y=(c&(1<<w)-1).toString(32),c>>=w,f-=w,si=1<<32-wn(s)+f|a<<f|c,oi=y+n}else si=1<<y|a<<f|c,oi=n}function Cd(n){n.return!==null&&(js(n,1),tm(n,1,0))}function Rd(n){for(;n===lu;)lu=Ro[--Po],Ro[Po]=null,uu=Ro[--Po],Ro[Po]=null;for(;n===Ns;)Ns=Zn[--er],Zn[er]=null,oi=Zn[--er],Zn[er]=null,si=Zn[--er],Zn[er]=null}var zn=null,Bn=null,vt=!1,_r=null;function nm(n,s){var a=ir(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function rm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,zn=n,Bn=Di(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,zn=n,Bn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ns!==null?{id:si,overflow:oi}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=ir(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,zn=n,Bn=null,!0):!1;default:return!1}}function Pd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ad(n){if(vt){var s=Bn;if(s){var a=s;if(!rm(n,s)){if(Pd(n))throw Error(t(418));s=Di(a.nextSibling);var c=zn;s&&rm(n,s)?nm(c,a):(n.flags=n.flags&-4097|2,vt=!1,zn=n)}}else{if(Pd(n))throw Error(t(418));n.flags=n.flags&-4097|2,vt=!1,zn=n}}}function im(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;zn=n}function cu(n){if(n!==zn)return!1;if(!vt)return im(n),vt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!wd(n.type,n.memoizedProps)),s&&(s=Bn)){if(Pd(n))throw sm(),Error(t(418));for(;s;)nm(n,s),s=Di(s.nextSibling)}if(im(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Bn=Di(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Bn=null}}else Bn=zn?Di(n.stateNode.nextSibling):null;return!0}function sm(){for(var n=Bn;n;)n=Di(n.nextSibling)}function Ao(){Bn=zn=null,vt=!1}function kd(n){_r===null?_r=[n]:_r.push(n)}var Mw=ce.ReactCurrentBatchConfig;function Na(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(w){var A=f.refs;w===null?delete A[y]:A[y]=w},s._stringRef=y,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function du(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function om(n){var s=n._init;return s(n._payload)}function am(n){function s(z,O){if(n){var W=z.deletions;W===null?(z.deletions=[O],z.flags|=16):W.push(O)}}function a(z,O){if(!n)return null;for(;O!==null;)s(z,O),O=O.sibling;return null}function c(z,O){for(z=new Map;O!==null;)O.key!==null?z.set(O.key,O):z.set(O.index,O),O=O.sibling;return z}function f(z,O){return z=Hi(z,O),z.index=0,z.sibling=null,z}function y(z,O,W){return z.index=W,n?(W=z.alternate,W!==null?(W=W.index,W<O?(z.flags|=2,O):W):(z.flags|=2,O)):(z.flags|=1048576,O)}function w(z){return n&&z.alternate===null&&(z.flags|=2),z}function A(z,O,W,le){return O===null||O.tag!==6?(O=Eh(W,z.mode,le),O.return=z,O):(O=f(O,W),O.return=z,O)}function j(z,O,W,le){var Ie=W.type;return Ie===b?re(z,O,W.props.children,le,W.key):O!==null&&(O.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===De&&om(Ie)===O.type)?(le=f(O,W.props),le.ref=Na(z,O,W),le.return=z,le):(le=Vu(W.type,W.key,W.props,null,z.mode,le),le.ref=Na(z,O,W),le.return=z,le)}function q(z,O,W,le){return O===null||O.tag!==4||O.stateNode.containerInfo!==W.containerInfo||O.stateNode.implementation!==W.implementation?(O=xh(W,z.mode,le),O.return=z,O):(O=f(O,W.children||[]),O.return=z,O)}function re(z,O,W,le,Ie){return O===null||O.tag!==7?(O=zs(W,z.mode,le,Ie),O.return=z,O):(O=f(O,W),O.return=z,O)}function se(z,O,W){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Eh(""+O,z.mode,W),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case de:return W=Vu(O.type,O.key,O.props,null,z.mode,W),W.ref=Na(z,null,O),W.return=z,W;case pe:return O=xh(O,z.mode,W),O.return=z,O;case De:var le=O._init;return se(z,le(O._payload),W)}if(gn(O)||we(O))return O=zs(O,z.mode,W,null),O.return=z,O;du(z,O)}return null}function ne(z,O,W,le){var Ie=O!==null?O.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Ie!==null?null:A(z,O,""+W,le);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case de:return W.key===Ie?j(z,O,W,le):null;case pe:return W.key===Ie?q(z,O,W,le):null;case De:return Ie=W._init,ne(z,O,Ie(W._payload),le)}if(gn(W)||we(W))return Ie!==null?null:re(z,O,W,le,null);du(z,W)}return null}function ge(z,O,W,le,Ie){if(typeof le=="string"&&le!==""||typeof le=="number")return z=z.get(W)||null,A(O,z,""+le,Ie);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case de:return z=z.get(le.key===null?W:le.key)||null,j(O,z,le,Ie);case pe:return z=z.get(le.key===null?W:le.key)||null,q(O,z,le,Ie);case De:var Re=le._init;return ge(z,O,W,Re(le._payload),Ie)}if(gn(le)||we(le))return z=z.get(W)||null,re(O,z,le,Ie,null);du(O,le)}return null}function Ee(z,O,W,le){for(var Ie=null,Re=null,Pe=O,je=O=0,Qt=null;Pe!==null&&je<W.length;je++){Pe.index>je?(Qt=Pe,Pe=null):Qt=Pe.sibling;var et=ne(z,Pe,W[je],le);if(et===null){Pe===null&&(Pe=Qt);break}n&&Pe&&et.alternate===null&&s(z,Pe),O=y(et,O,je),Re===null?Ie=et:Re.sibling=et,Re=et,Pe=Qt}if(je===W.length)return a(z,Pe),vt&&js(z,je),Ie;if(Pe===null){for(;je<W.length;je++)Pe=se(z,W[je],le),Pe!==null&&(O=y(Pe,O,je),Re===null?Ie=Pe:Re.sibling=Pe,Re=Pe);return vt&&js(z,je),Ie}for(Pe=c(z,Pe);je<W.length;je++)Qt=ge(Pe,z,je,W[je],le),Qt!==null&&(n&&Qt.alternate!==null&&Pe.delete(Qt.key===null?je:Qt.key),O=y(Qt,O,je),Re===null?Ie=Qt:Re.sibling=Qt,Re=Qt);return n&&Pe.forEach(function(qi){return s(z,qi)}),vt&&js(z,je),Ie}function xe(z,O,W,le){var Ie=we(W);if(typeof Ie!="function")throw Error(t(150));if(W=Ie.call(W),W==null)throw Error(t(151));for(var Re=Ie=null,Pe=O,je=O=0,Qt=null,et=W.next();Pe!==null&&!et.done;je++,et=W.next()){Pe.index>je?(Qt=Pe,Pe=null):Qt=Pe.sibling;var qi=ne(z,Pe,et.value,le);if(qi===null){Pe===null&&(Pe=Qt);break}n&&Pe&&qi.alternate===null&&s(z,Pe),O=y(qi,O,je),Re===null?Ie=qi:Re.sibling=qi,Re=qi,Pe=Qt}if(et.done)return a(z,Pe),vt&&js(z,je),Ie;if(Pe===null){for(;!et.done;je++,et=W.next())et=se(z,et.value,le),et!==null&&(O=y(et,O,je),Re===null?Ie=et:Re.sibling=et,Re=et);return vt&&js(z,je),Ie}for(Pe=c(z,Pe);!et.done;je++,et=W.next())et=ge(Pe,z,je,et.value,le),et!==null&&(n&&et.alternate!==null&&Pe.delete(et.key===null?je:et.key),O=y(et,O,je),Re===null?Ie=et:Re.sibling=et,Re=et);return n&&Pe.forEach(function(yE){return s(z,yE)}),vt&&js(z,je),Ie}function St(z,O,W,le){if(typeof W=="object"&&W!==null&&W.type===b&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case de:e:{for(var Ie=W.key,Re=O;Re!==null;){if(Re.key===Ie){if(Ie=W.type,Ie===b){if(Re.tag===7){a(z,Re.sibling),O=f(Re,W.props.children),O.return=z,z=O;break e}}else if(Re.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===De&&om(Ie)===Re.type){a(z,Re.sibling),O=f(Re,W.props),O.ref=Na(z,Re,W),O.return=z,z=O;break e}a(z,Re);break}else s(z,Re);Re=Re.sibling}W.type===b?(O=zs(W.props.children,z.mode,le,W.key),O.return=z,z=O):(le=Vu(W.type,W.key,W.props,null,z.mode,le),le.ref=Na(z,O,W),le.return=z,z=le)}return w(z);case pe:e:{for(Re=W.key;O!==null;){if(O.key===Re)if(O.tag===4&&O.stateNode.containerInfo===W.containerInfo&&O.stateNode.implementation===W.implementation){a(z,O.sibling),O=f(O,W.children||[]),O.return=z,z=O;break e}else{a(z,O);break}else s(z,O);O=O.sibling}O=xh(W,z.mode,le),O.return=z,z=O}return w(z);case De:return Re=W._init,St(z,O,Re(W._payload),le)}if(gn(W))return Ee(z,O,W,le);if(we(W))return xe(z,O,W,le);du(z,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,O!==null&&O.tag===6?(a(z,O.sibling),O=f(O,W),O.return=z,z=O):(a(z,O),O=Eh(W,z.mode,le),O.return=z,z=O),w(z)):a(z,O)}return St}var ko=am(!0),lm=am(!1),hu=Vi(null),fu=null,bo=null,bd=null;function Nd(){bd=bo=fu=null}function jd(n){var s=hu.current;ht(hu),n._currentValue=s}function Dd(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function No(n,s){fu=n,bd=bo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(kn=!0),n.firstContext=null)}function tr(n){var s=n._currentValue;if(bd!==n)if(n={context:n,memoizedValue:s,next:null},bo===null){if(fu===null)throw Error(t(308));bo=n,fu.dependencies={lanes:0,firstContext:n}}else bo=bo.next=n;return s}var Ds=null;function Vd(n){Ds===null?Ds=[n]:Ds.push(n)}function um(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Vd(s)):(a.next=f.next,f.next=a),s.interleaved=a,ai(n,c)}function ai(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Mi=!1;function Od(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function li(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Fi(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ze&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,ai(n,a)}return f=c.interleaved,f===null?(s.next=s,Vd(c)):(s.next=f.next,f.next=s),c.interleaved=s,ai(n,a)}function pu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Pi(n,a)}}function dm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?f=y=w:y=y.next=w,a=a.next}while(a!==null);y===null?f=y=s:y=y.next=s}else f=y=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function mu(n,s,a,c){var f=n.updateQueue;Mi=!1;var y=f.firstBaseUpdate,w=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var j=A,q=j.next;j.next=null,w===null?y=q:w.next=q,w=j;var re=n.alternate;re!==null&&(re=re.updateQueue,A=re.lastBaseUpdate,A!==w&&(A===null?re.firstBaseUpdate=q:A.next=q,re.lastBaseUpdate=j))}if(y!==null){var se=f.baseState;w=0,re=q=j=null,A=y;do{var ne=A.lane,ge=A.eventTime;if((c&ne)===ne){re!==null&&(re=re.next={eventTime:ge,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Ee=n,xe=A;switch(ne=s,ge=a,xe.tag){case 1:if(Ee=xe.payload,typeof Ee=="function"){se=Ee.call(ge,se,ne);break e}se=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=xe.payload,ne=typeof Ee=="function"?Ee.call(ge,se,ne):Ee,ne==null)break e;se=me({},se,ne);break e;case 2:Mi=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,ne=f.effects,ne===null?f.effects=[A]:ne.push(A))}else ge={eventTime:ge,lane:ne,tag:A.tag,payload:A.payload,callback:A.callback,next:null},re===null?(q=re=ge,j=se):re=re.next=ge,w|=ne;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ne=A,A=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);if(re===null&&(j=se),f.baseState=j,f.firstBaseUpdate=q,f.lastBaseUpdate=re,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);Ls|=w,n.lanes=w,n.memoizedState=se}}function hm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var ja={},Or=Vi(ja),Da=Vi(ja),Va=Vi(ja);function Vs(n){if(n===ja)throw Error(t(174));return n}function Ld(n,s){switch(ut(Va,s),ut(Da,n),ut(Or,ja),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:mt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=mt(s,n)}ht(Or),ut(Or,s)}function jo(){ht(Or),ht(Da),ht(Va)}function fm(n){Vs(Va.current);var s=Vs(Or.current),a=mt(s,n.type);s!==a&&(ut(Da,n),ut(Or,a))}function Md(n){Da.current===n&&(ht(Or),ht(Da))}var wt=Vi(0);function gu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Fd=[];function Ud(){for(var n=0;n<Fd.length;n++)Fd[n]._workInProgressVersionPrimary=null;Fd.length=0}var yu=ce.ReactCurrentDispatcher,zd=ce.ReactCurrentBatchConfig,Os=0,Et=null,Vt=null,Gt=null,vu=!1,Oa=!1,La=0,Fw=0;function an(){throw Error(t(321))}function Bd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!vr(n[a],s[a]))return!1;return!0}function $d(n,s,a,c,f,y){if(Os=y,Et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,yu.current=n===null||n.memoizedState===null?$w:Ww,n=a(c,f),Oa){y=0;do{if(Oa=!1,La=0,25<=y)throw Error(t(301));y+=1,Gt=Vt=null,s.updateQueue=null,yu.current=Hw,n=a(c,f)}while(Oa)}if(yu.current=Eu,s=Vt!==null&&Vt.next!==null,Os=0,Gt=Vt=Et=null,vu=!1,s)throw Error(t(300));return n}function Wd(){var n=La!==0;return La=0,n}function Lr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Et.memoizedState=Gt=n:Gt=Gt.next=n,Gt}function nr(){if(Vt===null){var n=Et.alternate;n=n!==null?n.memoizedState:null}else n=Vt.next;var s=Gt===null?Et.memoizedState:Gt.next;if(s!==null)Gt=s,Vt=n;else{if(n===null)throw Error(t(310));Vt=n,n={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Gt===null?Et.memoizedState=Gt=n:Gt=Gt.next=n}return Gt}function Ma(n,s){return typeof s=="function"?s(n):s}function Hd(n){var s=nr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Vt,f=c.baseQueue,y=a.pending;if(y!==null){if(f!==null){var w=f.next;f.next=y.next,y.next=w}c.baseQueue=f=y,a.pending=null}if(f!==null){y=f.next,c=c.baseState;var A=w=null,j=null,q=y;do{var re=q.lane;if((Os&re)===re)j!==null&&(j=j.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),c=q.hasEagerState?q.eagerState:n(c,q.action);else{var se={lane:re,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};j===null?(A=j=se,w=c):j=j.next=se,Et.lanes|=re,Ls|=re}q=q.next}while(q!==null&&q!==y);j===null?w=c:j.next=A,vr(c,s.memoizedState)||(kn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=j,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do y=f.lane,Et.lanes|=y,Ls|=y,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function qd(n){var s=nr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,y=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do y=n(y,w.action),w=w.next;while(w!==f);vr(y,s.memoizedState)||(kn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,c]}function pm(){}function mm(n,s){var a=Et,c=nr(),f=s(),y=!vr(c.memoizedState,f);if(y&&(c.memoizedState=f,kn=!0),c=c.queue,Gd(vm.bind(null,a,c,n),[n]),c.getSnapshot!==s||y||Gt!==null&&Gt.memoizedState.tag&1){if(a.flags|=2048,Fa(9,ym.bind(null,a,c,f,s),void 0,null),Kt===null)throw Error(t(349));(Os&30)!==0||gm(a,s,f)}return f}function gm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Et.updateQueue,s===null?(s={lastEffect:null,stores:null},Et.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function ym(n,s,a,c){s.value=a,s.getSnapshot=c,_m(s)&&wm(n)}function vm(n,s,a){return a(function(){_m(s)&&wm(n)})}function _m(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!vr(n,a)}catch{return!0}}function wm(n){var s=ai(n,1);s!==null&&Tr(s,n,1,-1)}function Em(n){var s=Lr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:n},s.queue=n,n=n.dispatch=Bw.bind(null,Et,n),[s.memoizedState,n]}function Fa(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=Et.updateQueue,s===null?(s={lastEffect:null,stores:null},Et.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function xm(){return nr().memoizedState}function _u(n,s,a,c){var f=Lr();Et.flags|=n,f.memoizedState=Fa(1|s,a,void 0,c===void 0?null:c)}function wu(n,s,a,c){var f=nr();c=c===void 0?null:c;var y=void 0;if(Vt!==null){var w=Vt.memoizedState;if(y=w.destroy,c!==null&&Bd(c,w.deps)){f.memoizedState=Fa(s,a,y,c);return}}Et.flags|=n,f.memoizedState=Fa(1|s,a,y,c)}function Tm(n,s){return _u(8390656,8,n,s)}function Gd(n,s){return wu(2048,8,n,s)}function Sm(n,s){return wu(4,2,n,s)}function Im(n,s){return wu(4,4,n,s)}function Cm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Rm(n,s,a){return a=a!=null?a.concat([n]):null,wu(4,4,Cm.bind(null,s,n),a)}function Kd(){}function Pm(n,s){var a=nr();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Bd(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Am(n,s){var a=nr();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Bd(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function km(n,s,a){return(Os&21)===0?(n.baseState&&(n.baseState=!1,kn=!0),n.memoizedState=a):(vr(a,s)||(a=Is(),Et.lanes|=a,Ls|=a,n.baseState=!0),s)}function Uw(n,s){var a=Qe;Qe=a!==0&&4>a?a:4,n(!0);var c=zd.transition;zd.transition={};try{n(!1),s()}finally{Qe=a,zd.transition=c}}function bm(){return nr().memoizedState}function zw(n,s,a){var c=$i(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Nm(n))jm(s,a);else if(a=um(n,s,a,c),a!==null){var f=Tn();Tr(a,n,c,f),Dm(a,s,c)}}function Bw(n,s,a){var c=$i(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nm(n))jm(s,f);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var w=s.lastRenderedState,A=y(w,a);if(f.hasEagerState=!0,f.eagerState=A,vr(A,w)){var j=s.interleaved;j===null?(f.next=f,Vd(s)):(f.next=j.next,j.next=f),s.interleaved=f;return}}catch{}finally{}a=um(n,s,f,c),a!==null&&(f=Tn(),Tr(a,n,c,f),Dm(a,s,c))}}function Nm(n){var s=n.alternate;return n===Et||s!==null&&s===Et}function jm(n,s){Oa=vu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Dm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Pi(n,a)}}var Eu={readContext:tr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},$w={readContext:tr,useCallback:function(n,s){return Lr().memoizedState=[n,s===void 0?null:s],n},useContext:tr,useEffect:Tm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,_u(4194308,4,Cm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return _u(4194308,4,n,s)},useInsertionEffect:function(n,s){return _u(4,2,n,s)},useMemo:function(n,s){var a=Lr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Lr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=zw.bind(null,Et,n),[c.memoizedState,n]},useRef:function(n){var s=Lr();return n={current:n},s.memoizedState=n},useState:Em,useDebugValue:Kd,useDeferredValue:function(n){return Lr().memoizedState=n},useTransition:function(){var n=Em(!1),s=n[0];return n=Uw.bind(null,n[1]),Lr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=Et,f=Lr();if(vt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Kt===null)throw Error(t(349));(Os&30)!==0||gm(c,s,a)}f.memoizedState=a;var y={value:a,getSnapshot:s};return f.queue=y,Tm(vm.bind(null,c,y,n),[n]),c.flags|=2048,Fa(9,ym.bind(null,c,y,a,s),void 0,null),a},useId:function(){var n=Lr(),s=Kt.identifierPrefix;if(vt){var a=oi,c=si;a=(c&~(1<<32-wn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=La++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Fw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Ww={readContext:tr,useCallback:Pm,useContext:tr,useEffect:Gd,useImperativeHandle:Rm,useInsertionEffect:Sm,useLayoutEffect:Im,useMemo:Am,useReducer:Hd,useRef:xm,useState:function(){return Hd(Ma)},useDebugValue:Kd,useDeferredValue:function(n){var s=nr();return km(s,Vt.memoizedState,n)},useTransition:function(){var n=Hd(Ma)[0],s=nr().memoizedState;return[n,s]},useMutableSource:pm,useSyncExternalStore:mm,useId:bm,unstable_isNewReconciler:!1},Hw={readContext:tr,useCallback:Pm,useContext:tr,useEffect:Gd,useImperativeHandle:Rm,useInsertionEffect:Sm,useLayoutEffect:Im,useMemo:Am,useReducer:qd,useRef:xm,useState:function(){return qd(Ma)},useDebugValue:Kd,useDeferredValue:function(n){var s=nr();return Vt===null?s.memoizedState=n:km(s,Vt.memoizedState,n)},useTransition:function(){var n=qd(Ma)[0],s=nr().memoizedState;return[n,s]},useMutableSource:pm,useSyncExternalStore:mm,useId:bm,unstable_isNewReconciler:!1};function wr(n,s){if(n&&n.defaultProps){s=me({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Qd(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:me({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var xu={isMounted:function(n){return(n=n._reactInternals)?dr(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Tn(),f=$i(n),y=li(c,f);y.payload=s,a!=null&&(y.callback=a),s=Fi(n,y,f),s!==null&&(Tr(s,n,f,c),pu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Tn(),f=$i(n),y=li(c,f);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=Fi(n,y,f),s!==null&&(Tr(s,n,f,c),pu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Tn(),c=$i(n),f=li(a,c);f.tag=2,s!=null&&(f.callback=s),s=Fi(n,f,c),s!==null&&(Tr(s,n,c,a),pu(s,n,c))}};function Vm(n,s,a,c,f,y,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,y,w):s.prototype&&s.prototype.isPureReactComponent?!Ia(a,c)||!Ia(f,y):!0}function Om(n,s,a){var c=!1,f=Oi,y=s.contextType;return typeof y=="object"&&y!==null?y=tr(y):(f=An(s)?bs:on.current,c=s.contextTypes,y=(c=c!=null)?Co(n,f):Oi),s=new s(a,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=xu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=y),s}function Lm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&xu.enqueueReplaceState(s,s.state,null)}function Yd(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Od(n);var y=s.contextType;typeof y=="object"&&y!==null?f.context=tr(y):(y=An(s)?bs:on.current,f.context=Co(n,y)),f.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Qd(n,s,y,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&xu.enqueueReplaceState(f,f.state,null),mu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Do(n,s){try{var a="",c=s;do a+=Le(c),c=c.return;while(c);var f=a}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:f,digest:null}}function Jd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Xd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var qw=typeof WeakMap=="function"?WeakMap:Map;function Mm(n,s,a){a=li(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Au||(Au=!0,fh=c),Xd(n,s)},a}function Fm(n,s,a){a=li(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){Xd(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){Xd(n,s),typeof c!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Um(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new qw;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=oE.bind(null,n,s,a),s.then(n,n))}function zm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Bm(n,s,a,c,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=li(-1,1),s.tag=2,Fi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Gw=ce.ReactCurrentOwner,kn=!1;function xn(n,s,a,c){s.child=n===null?lm(s,null,a,c):ko(s,n.child,a,c)}function $m(n,s,a,c,f){a=a.render;var y=s.ref;return No(s,f),c=$d(n,s,a,c,y,f),a=Wd(),n!==null&&!kn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ui(n,s,f)):(vt&&a&&Cd(s),s.flags|=1,xn(n,s,c,f),s.child)}function Wm(n,s,a,c,f){if(n===null){var y=a.type;return typeof y=="function"&&!wh(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,Hm(n,s,y,c,f)):(n=Vu(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,(n.lanes&f)===0){var w=y.memoizedProps;if(a=a.compare,a=a!==null?a:Ia,a(w,c)&&n.ref===s.ref)return ui(n,s,f)}return s.flags|=1,n=Hi(y,c),n.ref=s.ref,n.return=s,s.child=n}function Hm(n,s,a,c,f){if(n!==null){var y=n.memoizedProps;if(Ia(y,c)&&n.ref===s.ref)if(kn=!1,s.pendingProps=c=y,(n.lanes&f)!==0)(n.flags&131072)!==0&&(kn=!0);else return s.lanes=n.lanes,ui(n,s,f)}return Zd(n,s,a,c,f)}function qm(n,s,a){var c=s.pendingProps,f=c.children,y=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(Oo,$n),$n|=a;else{if((a&1073741824)===0)return n=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,ut(Oo,$n),$n|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=y!==null?y.baseLanes:a,ut(Oo,$n),$n|=c}else y!==null?(c=y.baseLanes|a,s.memoizedState=null):c=a,ut(Oo,$n),$n|=c;return xn(n,s,f,a),s.child}function Gm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Zd(n,s,a,c,f){var y=An(a)?bs:on.current;return y=Co(s,y),No(s,f),a=$d(n,s,a,c,y,f),c=Wd(),n!==null&&!kn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ui(n,s,f)):(vt&&c&&Cd(s),s.flags|=1,xn(n,s,a,f),s.child)}function Km(n,s,a,c,f){if(An(a)){var y=!0;ou(s)}else y=!1;if(No(s,f),s.stateNode===null)Su(n,s),Om(s,a,c),Yd(s,a,c,f),c=!0;else if(n===null){var w=s.stateNode,A=s.memoizedProps;w.props=A;var j=w.context,q=a.contextType;typeof q=="object"&&q!==null?q=tr(q):(q=An(a)?bs:on.current,q=Co(s,q));var re=a.getDerivedStateFromProps,se=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function";se||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||j!==q)&&Lm(s,w,c,q),Mi=!1;var ne=s.memoizedState;w.state=ne,mu(s,c,w,f),j=s.memoizedState,A!==c||ne!==j||Pn.current||Mi?(typeof re=="function"&&(Qd(s,a,re,c),j=s.memoizedState),(A=Mi||Vm(s,a,A,c,ne,j,q))?(se||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=j),w.props=c,w.state=j,w.context=q,c=A):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,cm(n,s),A=s.memoizedProps,q=s.type===s.elementType?A:wr(s.type,A),w.props=q,se=s.pendingProps,ne=w.context,j=a.contextType,typeof j=="object"&&j!==null?j=tr(j):(j=An(a)?bs:on.current,j=Co(s,j));var ge=a.getDerivedStateFromProps;(re=typeof ge=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==se||ne!==j)&&Lm(s,w,c,j),Mi=!1,ne=s.memoizedState,w.state=ne,mu(s,c,w,f);var Ee=s.memoizedState;A!==se||ne!==Ee||Pn.current||Mi?(typeof ge=="function"&&(Qd(s,a,ge,c),Ee=s.memoizedState),(q=Mi||Vm(s,a,q,c,ne,Ee,j)||!1)?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,Ee,j),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,Ee,j)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Ee),w.props=c,w.state=Ee,w.context=j,c=q):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),c=!1)}return eh(n,s,a,c,y,f)}function eh(n,s,a,c,f,y){Gm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&Zp(s,a,!1),ui(n,s,y);c=s.stateNode,Gw.current=s;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=ko(s,n.child,null,y),s.child=ko(s,null,A,y)):xn(n,s,A,y),s.memoizedState=c.state,f&&Zp(s,a,!0),s.child}function Qm(n){var s=n.stateNode;s.pendingContext?Jp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Jp(n,s.context,!1),Ld(n,s.containerInfo)}function Ym(n,s,a,c,f){return Ao(),kd(f),s.flags|=256,xn(n,s,a,c),s.child}var th={dehydrated:null,treeContext:null,retryLane:0};function nh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Jm(n,s,a){var c=s.pendingProps,f=wt.current,y=!1,w=(s.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(f&2)!==0),A?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),ut(wt,f&1),n===null)return Ad(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,y?(c=s.mode,y=s.child,w={mode:"hidden",children:w},(c&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=Ou(w,c,0,null),n=zs(n,c,a,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=nh(a),s.memoizedState=th,n):rh(s,w));if(f=n.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return Kw(n,s,w,c,A,f,a);if(y){y=c.fallback,w=s.mode,f=n.child,A=f.sibling;var j={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=j,s.deletions=null):(c=Hi(f,j),c.subtreeFlags=f.subtreeFlags&14680064),A!==null?y=Hi(A,y):(y=zs(y,w,a,null),y.flags|=2),y.return=s,c.return=s,c.sibling=y,s.child=c,c=y,y=s.child,w=n.child.memoizedState,w=w===null?nh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=n.childLanes&~a,s.memoizedState=th,c}return y=n.child,n=y.sibling,c=Hi(y,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function rh(n,s){return s=Ou({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Tu(n,s,a,c){return c!==null&&kd(c),ko(s,n.child,null,a),n=rh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Kw(n,s,a,c,f,y,w){if(a)return s.flags&256?(s.flags&=-257,c=Jd(Error(t(422))),Tu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=c.fallback,f=s.mode,c=Ou({mode:"visible",children:c.children},f,0,null),y=zs(y,f,w,null),y.flags|=2,c.return=s,y.return=s,c.sibling=y,s.child=c,(s.mode&1)!==0&&ko(s,n.child,null,w),s.child.memoizedState=nh(w),s.memoizedState=th,y);if((s.mode&1)===0)return Tu(n,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var A=c.dgst;return c=A,y=Error(t(419)),c=Jd(y,c,void 0),Tu(n,s,w,c)}if(A=(w&n.childLanes)!==0,kn||A){if(c=Kt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,ai(n,f),Tr(c,n,f,-1))}return _h(),c=Jd(Error(t(421))),Tu(n,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=aE.bind(null,n),f._reactRetry=s,null):(n=y.treeContext,Bn=Di(f.nextSibling),zn=s,vt=!0,_r=null,n!==null&&(Zn[er++]=si,Zn[er++]=oi,Zn[er++]=Ns,si=n.id,oi=n.overflow,Ns=s),s=rh(s,c.children),s.flags|=4096,s)}function Xm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Dd(n.return,s,a)}function ih(n,s,a,c,f){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=a,y.tailMode=f)}function Zm(n,s,a){var c=s.pendingProps,f=c.revealOrder,y=c.tail;if(xn(n,s,c.children,a),c=wt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xm(n,a,s);else if(n.tag===19)Xm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(ut(wt,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&gu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),ih(s,!1,f,a,y);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&gu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}ih(s,!0,a,null,y);break;case"together":ih(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Su(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ui(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ls|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Hi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Hi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Qw(n,s,a){switch(s.tag){case 3:Qm(s),Ao();break;case 5:fm(s);break;case 1:An(s.type)&&ou(s);break;case 4:Ld(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;ut(hu,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(ut(wt,wt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Jm(n,s,a):(ut(wt,wt.current&1),n=ui(n,s,a),n!==null?n.sibling:null);ut(wt,wt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Zm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ut(wt,wt.current),c)break;return null;case 22:case 23:return s.lanes=0,qm(n,s,a)}return ui(n,s,a)}var eg,sh,tg,ng;eg=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},sh=function(){},tg=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Vs(Or.current);var y=null;switch(a){case"input":f=Ke(n,f),c=Ke(n,c),y=[];break;case"select":f=me({},f,{value:void 0}),c=me({},c,{value:void 0}),y=[];break;case"textarea":f=Gn(n,f),c=Gn(n,c),y=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ru)}T(a,c);var w;a=null;for(q in f)if(!c.hasOwnProperty(q)&&f.hasOwnProperty(q)&&f[q]!=null)if(q==="style"){var A=f[q];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?y||(y=[]):(y=y||[]).push(q,null));for(q in c){var j=c[q];if(A=f!=null?f[q]:void 0,c.hasOwnProperty(q)&&j!==A&&(j!=null||A!=null))if(q==="style")if(A){for(w in A)!A.hasOwnProperty(w)||j&&j.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in j)j.hasOwnProperty(w)&&A[w]!==j[w]&&(a||(a={}),a[w]=j[w])}else a||(y||(y=[]),y.push(q,a)),a=j;else q==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,A=A?A.__html:void 0,j!=null&&A!==j&&(y=y||[]).push(q,j)):q==="children"?typeof j!="string"&&typeof j!="number"||(y=y||[]).push(q,""+j):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(j!=null&&q==="onScroll"&&dt("scroll",n),y||A===j||(y=[])):(y=y||[]).push(q,j))}a&&(y=y||[]).push("style",a);var q=y;(s.updateQueue=q)&&(s.flags|=4)}},ng=function(n,s,a,c){a!==c&&(s.flags|=4)};function Ua(n,s){if(!vt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ln(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Yw(n,s,a){var c=s.pendingProps;switch(Rd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(s),null;case 1:return An(s.type)&&su(),ln(s),null;case 3:return c=s.stateNode,jo(),ht(Pn),ht(on),Ud(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(cu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,_r!==null&&(gh(_r),_r=null))),sh(n,s),ln(s),null;case 5:Md(s);var f=Vs(Va.current);if(a=s.type,n!==null&&s.stateNode!=null)tg(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return ln(s),null}if(n=Vs(Or.current),cu(s)){c=s.stateNode,a=s.type;var y=s.memoizedProps;switch(c[Vr]=s,c[ka]=y,n=(s.mode&1)!==0,a){case"dialog":dt("cancel",c),dt("close",c);break;case"iframe":case"object":case"embed":dt("load",c);break;case"video":case"audio":for(f=0;f<Ra.length;f++)dt(Ra[f],c);break;case"source":dt("error",c);break;case"img":case"image":case"link":dt("error",c),dt("load",c);break;case"details":dt("toggle",c);break;case"input":lr(c,y),dt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!y.multiple},dt("invalid",c);break;case"textarea":yn(c,y),dt("invalid",c)}T(a,y),f=null;for(var w in y)if(y.hasOwnProperty(w)){var A=y[w];w==="children"?typeof A=="string"?c.textContent!==A&&(y.suppressHydrationWarning!==!0&&nu(c.textContent,A,n),f=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(y.suppressHydrationWarning!==!0&&nu(c.textContent,A,n),f=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&dt("scroll",c)}switch(a){case"input":pn(c),ur(c,y,!0);break;case"textarea":pn(c),Kr(c);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(c.onclick=ru)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Me(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Vr]=s,n[ka]=c,eg(n,s,!1,!1),s.stateNode=n;e:{switch(w=H(a,c),a){case"dialog":dt("cancel",n),dt("close",n),f=c;break;case"iframe":case"object":case"embed":dt("load",n),f=c;break;case"video":case"audio":for(f=0;f<Ra.length;f++)dt(Ra[f],n);f=c;break;case"source":dt("error",n),f=c;break;case"img":case"image":case"link":dt("error",n),dt("load",n),f=c;break;case"details":dt("toggle",n),f=c;break;case"input":lr(n,c),f=Ke(n,c),dt("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=me({},c,{value:void 0}),dt("invalid",n);break;case"textarea":yn(n,c),f=Gn(n,c),dt("invalid",n);break;default:f=c}T(a,f),A=f;for(y in A)if(A.hasOwnProperty(y)){var j=A[y];y==="style"?Y(n,j):y==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Qr(n,j)):y==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&Wt(n,j):typeof j=="number"&&Wt(n,""+j):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?j!=null&&y==="onScroll"&&dt("scroll",n):j!=null&&ue(n,y,j,w))}switch(a){case"input":pn(n),ur(n,c,!1);break;case"textarea":pn(n),Kr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Be(c.value));break;case"select":n.multiple=!!c.multiple,y=c.value,y!=null?Bt(n,!!c.multiple,y,!1):c.defaultValue!=null&&Bt(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=ru)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ln(s),null;case 6:if(n&&s.stateNode!=null)ng(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Vs(Va.current),Vs(Or.current),cu(s)){if(c=s.stateNode,a=s.memoizedProps,c[Vr]=s,(y=c.nodeValue!==a)&&(n=zn,n!==null))switch(n.tag){case 3:nu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nu(c.nodeValue,a,(n.mode&1)!==0)}y&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Vr]=s,s.stateNode=c}return ln(s),null;case 13:if(ht(wt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(vt&&Bn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)sm(),Ao(),s.flags|=98560,y=!1;else if(y=cu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Vr]=s}else Ao(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ln(s),y=!1}else _r!==null&&(gh(_r),_r=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(wt.current&1)!==0?Ot===0&&(Ot=3):_h())),s.updateQueue!==null&&(s.flags|=4),ln(s),null);case 4:return jo(),sh(n,s),n===null&&Pa(s.stateNode.containerInfo),ln(s),null;case 10:return jd(s.type._context),ln(s),null;case 17:return An(s.type)&&su(),ln(s),null;case 19:if(ht(wt),y=s.memoizedState,y===null)return ln(s),null;if(c=(s.flags&128)!==0,w=y.rendering,w===null)if(c)Ua(y,!1);else{if(Ot!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=gu(n),w!==null){for(s.flags|=128,Ua(y,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)y=a,n=c,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,n=w.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return ut(wt,wt.current&1|2),s.child}n=n.sibling}y.tail!==null&&lt()>Lo&&(s.flags|=128,c=!0,Ua(y,!1),s.lanes=4194304)}else{if(!c)if(n=gu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ua(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!vt)return ln(s),null}else 2*lt()-y.renderingStartTime>Lo&&a!==1073741824&&(s.flags|=128,c=!0,Ua(y,!1),s.lanes=4194304);y.isBackwards?(w.sibling=s.child,s.child=w):(a=y.last,a!==null?a.sibling=w:s.child=w,y.last=w)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=lt(),s.sibling=null,a=wt.current,ut(wt,c?a&1|2:a&1),s):(ln(s),null);case 22:case 23:return vh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?($n&1073741824)!==0&&(ln(s),s.subtreeFlags&6&&(s.flags|=8192)):ln(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Jw(n,s){switch(Rd(s),s.tag){case 1:return An(s.type)&&su(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return jo(),ht(Pn),ht(on),Ud(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Md(s),null;case 13:if(ht(wt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ao()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ht(wt),null;case 4:return jo(),null;case 10:return jd(s.type._context),null;case 22:case 23:return vh(),null;case 24:return null;default:return null}}var Iu=!1,un=!1,Xw=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Vo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Tt(n,s,c)}else a.current=null}function oh(n,s,a){try{a()}catch(c){Tt(n,s,c)}}var rg=!1;function Zw(n,s){if(vd=bi,n=Vp(),cd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var w=0,A=-1,j=-1,q=0,re=0,se=n,ne=null;t:for(;;){for(var ge;se!==a||f!==0&&se.nodeType!==3||(A=w+f),se!==y||c!==0&&se.nodeType!==3||(j=w+c),se.nodeType===3&&(w+=se.nodeValue.length),(ge=se.firstChild)!==null;)ne=se,se=ge;for(;;){if(se===n)break t;if(ne===a&&++q===f&&(A=w),ne===y&&++re===c&&(j=w),(ge=se.nextSibling)!==null)break;se=ne,ne=se.parentNode}se=ge}a=A===-1||j===-1?null:{start:A,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(_d={focusedElem:n,selectionRange:a},bi=!1,_e=s;_e!==null;)if(s=_e,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,_e=n;else for(;_e!==null;){s=_e;try{var Ee=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var xe=Ee.memoizedProps,St=Ee.memoizedState,z=s.stateNode,O=z.getSnapshotBeforeUpdate(s.elementType===s.type?xe:wr(s.type,xe),St);z.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var W=s.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){Tt(s,s.return,le)}if(n=s.sibling,n!==null){n.return=s.return,_e=n;break}_e=s.return}return Ee=rg,rg=!1,Ee}function za(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var y=f.destroy;f.destroy=void 0,y!==void 0&&oh(s,a,y)}f=f.next}while(f!==c)}}function Cu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function ah(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ig(n){var s=n.alternate;s!==null&&(n.alternate=null,ig(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Vr],delete s[ka],delete s[Td],delete s[Vw],delete s[Ow])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function sg(n){return n.tag===5||n.tag===3||n.tag===4}function og(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function lh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ru));else if(c!==4&&(n=n.child,n!==null))for(lh(n,s,a),n=n.sibling;n!==null;)lh(n,s,a),n=n.sibling}function uh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(uh(n,s,a),n=n.sibling;n!==null;)uh(n,s,a),n=n.sibling}var Zt=null,Er=!1;function Ui(n,s,a){for(a=a.child;a!==null;)ag(n,s,a),a=a.sibling}function ag(n,s,a){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(Ts,a)}catch{}switch(a.tag){case 5:un||Vo(a,s);case 6:var c=Zt,f=Er;Zt=null,Ui(n,s,a),Zt=c,Er=f,Zt!==null&&(Er?(n=Zt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Zt.removeChild(a.stateNode));break;case 18:Zt!==null&&(Er?(n=Zt,a=a.stateNode,n.nodeType===8?xd(n.parentNode,a):n.nodeType===1&&xd(n,a),gr(n)):xd(Zt,a.stateNode));break;case 4:c=Zt,f=Er,Zt=a.stateNode.containerInfo,Er=!0,Ui(n,s,a),Zt=c,Er=f;break;case 0:case 11:case 14:case 15:if(!un&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var y=f,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&oh(a,s,w),f=f.next}while(f!==c)}Ui(n,s,a);break;case 1:if(!un&&(Vo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){Tt(a,s,A)}Ui(n,s,a);break;case 21:Ui(n,s,a);break;case 22:a.mode&1?(un=(c=un)||a.memoizedState!==null,Ui(n,s,a),un=c):Ui(n,s,a);break;default:Ui(n,s,a)}}function lg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Xw),s.forEach(function(c){var f=lE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function xr(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var y=n,w=s,A=w;e:for(;A!==null;){switch(A.tag){case 5:Zt=A.stateNode,Er=!1;break e;case 3:Zt=A.stateNode.containerInfo,Er=!0;break e;case 4:Zt=A.stateNode.containerInfo,Er=!0;break e}A=A.return}if(Zt===null)throw Error(t(160));ag(y,w,f),Zt=null,Er=!1;var j=f.alternate;j!==null&&(j.return=null),f.return=null}catch(q){Tt(f,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ug(s,n),s=s.sibling}function ug(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(xr(s,n),Mr(n),c&4){try{za(3,n,n.return),Cu(3,n)}catch(xe){Tt(n,n.return,xe)}try{za(5,n,n.return)}catch(xe){Tt(n,n.return,xe)}}break;case 1:xr(s,n),Mr(n),c&512&&a!==null&&Vo(a,a.return);break;case 5:if(xr(s,n),Mr(n),c&512&&a!==null&&Vo(a,a.return),n.flags&32){var f=n.stateNode;try{Wt(f,"")}catch(xe){Tt(n,n.return,xe)}}if(c&4&&(f=n.stateNode,f!=null)){var y=n.memoizedProps,w=a!==null?a.memoizedProps:y,A=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{A==="input"&&y.type==="radio"&&y.name!=null&&mn(f,y),H(A,w);var q=H(A,y);for(w=0;w<j.length;w+=2){var re=j[w],se=j[w+1];re==="style"?Y(f,se):re==="dangerouslySetInnerHTML"?Qr(f,se):re==="children"?Wt(f,se):ue(f,re,se,q)}switch(A){case"input":zt(f,y);break;case"textarea":$t(f,y);break;case"select":var ne=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?Bt(f,!!y.multiple,ge,!1):ne!==!!y.multiple&&(y.defaultValue!=null?Bt(f,!!y.multiple,y.defaultValue,!0):Bt(f,!!y.multiple,y.multiple?[]:"",!1))}f[ka]=y}catch(xe){Tt(n,n.return,xe)}}break;case 6:if(xr(s,n),Mr(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,y=n.memoizedProps;try{f.nodeValue=y}catch(xe){Tt(n,n.return,xe)}}break;case 3:if(xr(s,n),Mr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{gr(s.containerInfo)}catch(xe){Tt(n,n.return,xe)}break;case 4:xr(s,n),Mr(n);break;case 13:xr(s,n),Mr(n),f=n.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(hh=lt())),c&4&&lg(n);break;case 22:if(re=a!==null&&a.memoizedState!==null,n.mode&1?(un=(q=un)||re,xr(s,n),un=q):xr(s,n),Mr(n),c&8192){if(q=n.memoizedState!==null,(n.stateNode.isHidden=q)&&!re&&(n.mode&1)!==0)for(_e=n,re=n.child;re!==null;){for(se=_e=re;_e!==null;){switch(ne=_e,ge=ne.child,ne.tag){case 0:case 11:case 14:case 15:za(4,ne,ne.return);break;case 1:Vo(ne,ne.return);var Ee=ne.stateNode;if(typeof Ee.componentWillUnmount=="function"){c=ne,a=ne.return;try{s=c,Ee.props=s.memoizedProps,Ee.state=s.memoizedState,Ee.componentWillUnmount()}catch(xe){Tt(c,a,xe)}}break;case 5:Vo(ne,ne.return);break;case 22:if(ne.memoizedState!==null){hg(se);continue}}ge!==null?(ge.return=ne,_e=ge):hg(se)}re=re.sibling}e:for(re=null,se=n;;){if(se.tag===5){if(re===null){re=se;try{f=se.stateNode,q?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(A=se.stateNode,j=se.memoizedProps.style,w=j!=null&&j.hasOwnProperty("display")?j.display:null,A.style.display=Yr("display",w))}catch(xe){Tt(n,n.return,xe)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=q?"":se.memoizedProps}catch(xe){Tt(n,n.return,xe)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===n)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===n)break e;for(;se.sibling===null;){if(se.return===null||se.return===n)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:xr(s,n),Mr(n),c&4&&lg(n);break;case 21:break;default:xr(s,n),Mr(n)}}function Mr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(sg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Wt(f,""),c.flags&=-33);var y=og(n);uh(n,y,f);break;case 3:case 4:var w=c.stateNode.containerInfo,A=og(n);lh(n,A,w);break;default:throw Error(t(161))}}catch(j){Tt(n,n.return,j)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function eE(n,s,a){_e=n,cg(n)}function cg(n,s,a){for(var c=(n.mode&1)!==0;_e!==null;){var f=_e,y=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Iu;if(!w){var A=f.alternate,j=A!==null&&A.memoizedState!==null||un;A=Iu;var q=un;if(Iu=w,(un=j)&&!q)for(_e=f;_e!==null;)w=_e,j=w.child,w.tag===22&&w.memoizedState!==null?fg(f):j!==null?(j.return=w,_e=j):fg(f);for(;y!==null;)_e=y,cg(y),y=y.sibling;_e=f,Iu=A,un=q}dg(n)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,_e=y):dg(n)}}function dg(n){for(;_e!==null;){var s=_e;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:un||Cu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!un)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:wr(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&hm(s,y,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}hm(s,w,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var re=q.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&gr(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}un||s.flags&512&&ah(s)}catch(ne){Tt(s,s.return,ne)}}if(s===n){_e=null;break}if(a=s.sibling,a!==null){a.return=s.return,_e=a;break}_e=s.return}}function hg(n){for(;_e!==null;){var s=_e;if(s===n){_e=null;break}var a=s.sibling;if(a!==null){a.return=s.return,_e=a;break}_e=s.return}}function fg(n){for(;_e!==null;){var s=_e;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Cu(4,s)}catch(j){Tt(s,a,j)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(j){Tt(s,f,j)}}var y=s.return;try{ah(s)}catch(j){Tt(s,y,j)}break;case 5:var w=s.return;try{ah(s)}catch(j){Tt(s,w,j)}}}catch(j){Tt(s,s.return,j)}if(s===n){_e=null;break}var A=s.sibling;if(A!==null){A.return=s.return,_e=A;break}_e=s.return}}var tE=Math.ceil,Ru=ce.ReactCurrentDispatcher,ch=ce.ReactCurrentOwner,rr=ce.ReactCurrentBatchConfig,Ze=0,Kt=null,At=null,en=0,$n=0,Oo=Vi(0),Ot=0,Ba=null,Ls=0,Pu=0,dh=0,$a=null,bn=null,hh=0,Lo=1/0,ci=null,Au=!1,fh=null,zi=null,ku=!1,Bi=null,bu=0,Wa=0,ph=null,Nu=-1,ju=0;function Tn(){return(Ze&6)!==0?lt():Nu!==-1?Nu:Nu=lt()}function $i(n){return(n.mode&1)===0?1:(Ze&2)!==0&&en!==0?en&-en:Mw.transition!==null?(ju===0&&(ju=Is()),ju):(n=Qe,n!==0||(n=window.event,n=n===void 0?16:va(n.type)),n)}function Tr(n,s,a,c){if(50<Wa)throw Wa=0,ph=null,Error(t(185));Ri(n,a,c),((Ze&2)===0||n!==Kt)&&(n===Kt&&((Ze&2)===0&&(Pu|=a),Ot===4&&Wi(n,en)),Nn(n,c),a===1&&Ze===0&&(s.mode&1)===0&&(Lo=lt()+500,au&&Li()))}function Nn(n,s){var a=n.callbackNode;Xr(n,s);var c=Ss(n,n===Kt?en:0);if(c===0)a!==null&&fa(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&fa(a),s===1)n.tag===0?Lw(mg.bind(null,n)):em(mg.bind(null,n)),jw(function(){(Ze&6)===0&&Li()}),a=null;else{switch(Ai(c)){case 1:a=xs;break;case 4:a=Si;break;case 16:a=Yn;break;case 536870912:a=jl;break;default:a=Yn}a=Tg(a,pg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function pg(n,s){if(Nu=-1,ju=0,(Ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Mo()&&n.callbackNode!==a)return null;var c=Ss(n,n===Kt?en:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Du(n,c);else{s=c;var f=Ze;Ze|=2;var y=yg();(Kt!==n||en!==s)&&(ci=null,Lo=lt()+500,Fs(n,s));do try{iE();break}catch(A){gg(n,A)}while(!0);Nd(),Ru.current=y,Ze=f,At!==null?s=0:(Kt=null,en=0,s=Ot)}if(s!==0){if(s===2&&(f=Mn(n),f!==0&&(c=f,s=mh(n,f))),s===1)throw a=Ba,Fs(n,0),Wi(n,c),Nn(n,lt()),a;if(s===6)Wi(n,c);else{if(f=n.current.alternate,(c&30)===0&&!nE(f)&&(s=Du(n,c),s===2&&(y=Mn(n),y!==0&&(c=y,s=mh(n,y))),s===1))throw a=Ba,Fs(n,0),Wi(n,c),Nn(n,lt()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Us(n,bn,ci);break;case 3:if(Wi(n,c),(c&130023424)===c&&(s=hh+500-lt(),10<s)){if(Ss(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){Tn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Ed(Us.bind(null,n,bn,ci),s);break}Us(n,bn,ci);break;case 4:if(Wi(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var w=31-wn(c);y=1<<w,w=s[w],w>f&&(f=w),c&=~y}if(c=f,c=lt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*tE(c/1960))-c,10<c){n.timeoutHandle=Ed(Us.bind(null,n,bn,ci),c);break}Us(n,bn,ci);break;case 5:Us(n,bn,ci);break;default:throw Error(t(329))}}}return Nn(n,lt()),n.callbackNode===a?pg.bind(null,n):null}function mh(n,s){var a=$a;return n.current.memoizedState.isDehydrated&&(Fs(n,s).flags|=256),n=Du(n,s),n!==2&&(s=bn,bn=a,s!==null&&gh(s)),n}function gh(n){bn===null?bn=n:bn.push.apply(bn,n)}function nE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],y=f.getSnapshot;f=f.value;try{if(!vr(y(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wi(n,s){for(s&=~dh,s&=~Pu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-wn(s),c=1<<a;n[a]=-1,s&=~c}}function mg(n){if((Ze&6)!==0)throw Error(t(327));Mo();var s=Ss(n,0);if((s&1)===0)return Nn(n,lt()),null;var a=Du(n,s);if(n.tag!==0&&a===2){var c=Mn(n);c!==0&&(s=c,a=mh(n,c))}if(a===1)throw a=Ba,Fs(n,0),Wi(n,s),Nn(n,lt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Us(n,bn,ci),Nn(n,lt()),null}function yh(n,s){var a=Ze;Ze|=1;try{return n(s)}finally{Ze=a,Ze===0&&(Lo=lt()+500,au&&Li())}}function Ms(n){Bi!==null&&Bi.tag===0&&(Ze&6)===0&&Mo();var s=Ze;Ze|=1;var a=rr.transition,c=Qe;try{if(rr.transition=null,Qe=1,n)return n()}finally{Qe=c,rr.transition=a,Ze=s,(Ze&6)===0&&Li()}}function vh(){$n=Oo.current,ht(Oo)}function Fs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Nw(a)),At!==null)for(a=At.return;a!==null;){var c=a;switch(Rd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&su();break;case 3:jo(),ht(Pn),ht(on),Ud();break;case 5:Md(c);break;case 4:jo();break;case 13:ht(wt);break;case 19:ht(wt);break;case 10:jd(c.type._context);break;case 22:case 23:vh()}a=a.return}if(Kt=n,At=n=Hi(n.current,null),en=$n=s,Ot=0,Ba=null,dh=Pu=Ls=0,bn=$a=null,Ds!==null){for(s=0;s<Ds.length;s++)if(a=Ds[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,y=a.pending;if(y!==null){var w=y.next;y.next=f,c.next=w}a.pending=c}Ds=null}return n}function gg(n,s){do{var a=At;try{if(Nd(),yu.current=Eu,vu){for(var c=Et.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}vu=!1}if(Os=0,Gt=Vt=Et=null,Oa=!1,La=0,ch.current=null,a===null||a.return===null){Ot=1,Ba=s,At=null;break}e:{var y=n,w=a.return,A=a,j=s;if(s=en,A.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var q=j,re=A,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var ge=zm(w);if(ge!==null){ge.flags&=-257,Bm(ge,w,A,y,s),ge.mode&1&&Um(y,q,s),s=ge,j=q;var Ee=s.updateQueue;if(Ee===null){var xe=new Set;xe.add(j),s.updateQueue=xe}else Ee.add(j);break e}else{if((s&1)===0){Um(y,q,s),_h();break e}j=Error(t(426))}}else if(vt&&A.mode&1){var St=zm(w);if(St!==null){(St.flags&65536)===0&&(St.flags|=256),Bm(St,w,A,y,s),kd(Do(j,A));break e}}y=j=Do(j,A),Ot!==4&&(Ot=2),$a===null?$a=[y]:$a.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var z=Mm(y,j,s);dm(y,z);break e;case 1:A=j;var O=y.type,W=y.stateNode;if((y.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(zi===null||!zi.has(W)))){y.flags|=65536,s&=-s,y.lanes|=s;var le=Fm(y,A,s);dm(y,le);break e}}y=y.return}while(y!==null)}_g(a)}catch(Ie){s=Ie,At===a&&a!==null&&(At=a=a.return);continue}break}while(!0)}function yg(){var n=Ru.current;return Ru.current=Eu,n===null?Eu:n}function _h(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Kt===null||(Ls&268435455)===0&&(Pu&268435455)===0||Wi(Kt,en)}function Du(n,s){var a=Ze;Ze|=2;var c=yg();(Kt!==n||en!==s)&&(ci=null,Fs(n,s));do try{rE();break}catch(f){gg(n,f)}while(!0);if(Nd(),Ze=a,Ru.current=c,At!==null)throw Error(t(261));return Kt=null,en=0,Ot}function rE(){for(;At!==null;)vg(At)}function iE(){for(;At!==null&&!bl();)vg(At)}function vg(n){var s=xg(n.alternate,n,$n);n.memoizedProps=n.pendingProps,s===null?_g(n):At=s,ch.current=null}function _g(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Yw(a,s,$n),a!==null){At=a;return}}else{if(a=Jw(a,s),a!==null){a.flags&=32767,At=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ot=6,At=null;return}}if(s=s.sibling,s!==null){At=s;return}At=s=n}while(s!==null);Ot===0&&(Ot=5)}function Us(n,s,a){var c=Qe,f=rr.transition;try{rr.transition=null,Qe=1,sE(n,s,a,c)}finally{rr.transition=f,Qe=c}return null}function sE(n,s,a,c){do Mo();while(Bi!==null);if((Ze&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=a.lanes|a.childLanes;if(ot(n,y),n===Kt&&(At=Kt=null,en=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ku||(ku=!0,Tg(Yn,function(){return Mo(),null})),y=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||y){y=rr.transition,rr.transition=null;var w=Qe;Qe=1;var A=Ze;Ze|=4,ch.current=null,Zw(n,a),ug(a,n),Iw(_d),bi=!!vd,_d=vd=null,n.current=a,eE(a),nd(),Ze=A,Qe=w,rr.transition=y}else n.current=a;if(ku&&(ku=!1,Bi=n,bu=f),y=n.pendingLanes,y===0&&(zi=null),Dl(a.stateNode),Nn(n,lt()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Au)throw Au=!1,n=fh,fh=null,n;return(bu&1)!==0&&n.tag!==0&&Mo(),y=n.pendingLanes,(y&1)!==0?n===ph?Wa++:(Wa=0,ph=n):Wa=0,Li(),null}function Mo(){if(Bi!==null){var n=Ai(bu),s=rr.transition,a=Qe;try{if(rr.transition=null,Qe=16>n?16:n,Bi===null)var c=!1;else{if(n=Bi,Bi=null,bu=0,(Ze&6)!==0)throw Error(t(331));var f=Ze;for(Ze|=4,_e=n.current;_e!==null;){var y=_e,w=y.child;if((_e.flags&16)!==0){var A=y.deletions;if(A!==null){for(var j=0;j<A.length;j++){var q=A[j];for(_e=q;_e!==null;){var re=_e;switch(re.tag){case 0:case 11:case 15:za(8,re,y)}var se=re.child;if(se!==null)se.return=re,_e=se;else for(;_e!==null;){re=_e;var ne=re.sibling,ge=re.return;if(ig(re),re===q){_e=null;break}if(ne!==null){ne.return=ge,_e=ne;break}_e=ge}}}var Ee=y.alternate;if(Ee!==null){var xe=Ee.child;if(xe!==null){Ee.child=null;do{var St=xe.sibling;xe.sibling=null,xe=St}while(xe!==null)}}_e=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,_e=w;else e:for(;_e!==null;){if(y=_e,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:za(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,_e=z;break e}_e=y.return}}var O=n.current;for(_e=O;_e!==null;){w=_e;var W=w.child;if((w.subtreeFlags&2064)!==0&&W!==null)W.return=w,_e=W;else e:for(w=O;_e!==null;){if(A=_e,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Cu(9,A)}}catch(Ie){Tt(A,A.return,Ie)}if(A===w){_e=null;break e}var le=A.sibling;if(le!==null){le.return=A.return,_e=le;break e}_e=A.return}}if(Ze=f,Li(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(Ts,n)}catch{}c=!0}return c}finally{Qe=a,rr.transition=s}}return!1}function wg(n,s,a){s=Do(a,s),s=Mm(n,s,1),n=Fi(n,s,1),s=Tn(),n!==null&&(Ri(n,1,s),Nn(n,s))}function Tt(n,s,a){if(n.tag===3)wg(n,n,a);else for(;s!==null;){if(s.tag===3){wg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(zi===null||!zi.has(c))){n=Do(a,n),n=Fm(s,n,1),s=Fi(s,n,1),n=Tn(),s!==null&&(Ri(s,1,n),Nn(s,n));break}}s=s.return}}function oE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Tn(),n.pingedLanes|=n.suspendedLanes&a,Kt===n&&(en&a)===a&&(Ot===4||Ot===3&&(en&130023424)===en&&500>lt()-hh?Fs(n,0):dh|=a),Nn(n,s)}function Eg(n,s){s===0&&((n.mode&1)===0?s=1:(s=oo,oo<<=1,(oo&130023424)===0&&(oo=4194304)));var a=Tn();n=ai(n,s),n!==null&&(Ri(n,s,a),Nn(n,a))}function aE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Eg(n,a)}function lE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Eg(n,a)}var xg;xg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Pn.current)kn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return kn=!1,Qw(n,s,a);kn=(n.flags&131072)!==0}else kn=!1,vt&&(s.flags&1048576)!==0&&tm(s,uu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Su(n,s),n=s.pendingProps;var f=Co(s,on.current);No(s,a),f=$d(null,s,c,n,f,a);var y=Wd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,An(c)?(y=!0,ou(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Od(s),f.updater=xu,s.stateNode=f,f._reactInternals=s,Yd(s,c,n,a),s=eh(null,s,c,!0,y,a)):(s.tag=0,vt&&y&&Cd(s),xn(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Su(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=cE(c),n=wr(c,n),f){case 0:s=Zd(null,s,c,n,a);break e;case 1:s=Km(null,s,c,n,a);break e;case 11:s=$m(null,s,c,n,a);break e;case 14:s=Wm(null,s,c,wr(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:wr(c,f),Zd(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:wr(c,f),Km(n,s,c,f,a);case 3:e:{if(Qm(s),n===null)throw Error(t(387));c=s.pendingProps,y=s.memoizedState,f=y.element,cm(n,s),mu(s,c,null,a);var w=s.memoizedState;if(c=w.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=Do(Error(t(423)),s),s=Ym(n,s,c,a,f);break e}else if(c!==f){f=Do(Error(t(424)),s),s=Ym(n,s,c,a,f);break e}else for(Bn=Di(s.stateNode.containerInfo.firstChild),zn=s,vt=!0,_r=null,a=lm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ao(),c===f){s=ui(n,s,a);break e}xn(n,s,c,a)}s=s.child}return s;case 5:return fm(s),n===null&&Ad(s),c=s.type,f=s.pendingProps,y=n!==null?n.memoizedProps:null,w=f.children,wd(c,f)?w=null:y!==null&&wd(c,y)&&(s.flags|=32),Gm(n,s),xn(n,s,w,a),s.child;case 6:return n===null&&Ad(s),null;case 13:return Jm(n,s,a);case 4:return Ld(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=ko(s,null,c,a):xn(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:wr(c,f),$m(n,s,c,f,a);case 7:return xn(n,s,s.pendingProps,a),s.child;case 8:return xn(n,s,s.pendingProps.children,a),s.child;case 12:return xn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,y=s.memoizedProps,w=f.value,ut(hu,c._currentValue),c._currentValue=w,y!==null)if(vr(y.value,w)){if(y.children===f.children&&!Pn.current){s=ui(n,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var A=y.dependencies;if(A!==null){w=y.child;for(var j=A.firstContext;j!==null;){if(j.context===c){if(y.tag===1){j=li(-1,a&-a),j.tag=2;var q=y.updateQueue;if(q!==null){q=q.shared;var re=q.pending;re===null?j.next=j:(j.next=re.next,re.next=j),q.pending=j}}y.lanes|=a,j=y.alternate,j!==null&&(j.lanes|=a),Dd(y.return,a,s),A.lanes|=a;break}j=j.next}}else if(y.tag===10)w=y.type===s.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),Dd(w,a,s),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===s){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}xn(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,No(s,a),f=tr(f),c=c(f),s.flags|=1,xn(n,s,c,a),s.child;case 14:return c=s.type,f=wr(c,s.pendingProps),f=wr(c.type,f),Wm(n,s,c,f,a);case 15:return Hm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:wr(c,f),Su(n,s),s.tag=1,An(c)?(n=!0,ou(s)):n=!1,No(s,a),Om(s,c,f),Yd(s,c,f,a),eh(null,s,c,!0,n,a);case 19:return Zm(n,s,a);case 22:return qm(n,s,a)}throw Error(t(156,s.tag))};function Tg(n,s){return io(n,s)}function uE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(n,s,a,c){return new uE(n,s,a,c)}function wh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cE(n){if(typeof n=="function")return wh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===N)return 11;if(n===Ne)return 14}return 2}function Hi(n,s){var a=n.alternate;return a===null?(a=ir(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vu(n,s,a,c,f,y){var w=2;if(c=n,typeof n=="function")wh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case b:return zs(a.children,f,y,s);case R:w=8,f|=8;break;case P:return n=ir(12,a,s,f|2),n.elementType=P,n.lanes=y,n;case x:return n=ir(13,a,s,f),n.elementType=x,n.lanes=y,n;case ie:return n=ir(19,a,s,f),n.elementType=ie,n.lanes=y,n;case Ae:return Ou(a,f,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:w=10;break e;case D:w=9;break e;case N:w=11;break e;case Ne:w=14;break e;case De:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=ir(w,a,s,f),s.elementType=n,s.type=c,s.lanes=y,s}function zs(n,s,a,c){return n=ir(7,n,c,s),n.lanes=a,n}function Ou(n,s,a,c){return n=ir(22,n,c,s),n.elementType=Ae,n.lanes=a,n.stateNode={isHidden:!1},n}function Eh(n,s,a){return n=ir(6,n,null,s),n.lanes=a,n}function xh(n,s,a){return s=ir(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function dE(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ci(0),this.expirationTimes=Ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Th(n,s,a,c,f,y,w,A,j){return n=new dE(n,s,a,A,j),s===1?(s=1,y===!0&&(s|=8)):s=0,y=ir(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Od(y),n}function hE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pe,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Sg(n){if(!n)return Oi;n=n._reactInternals;e:{if(dr(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(An(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(An(a))return Xp(n,a,s)}return s}function Ig(n,s,a,c,f,y,w,A,j){return n=Th(a,c,!0,n,f,y,w,A,j),n.context=Sg(null),a=n.current,c=Tn(),f=$i(a),y=li(c,f),y.callback=s??null,Fi(a,y,f),n.current.lanes=f,Ri(n,f,c),Nn(n,c),n}function Lu(n,s,a,c){var f=s.current,y=Tn(),w=$i(f);return a=Sg(a),s.context===null?s.context=a:s.pendingContext=a,s=li(y,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Fi(f,s,w),n!==null&&(Tr(n,f,w,y),pu(n,f,w)),w}function Mu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Sh(n,s){Cg(n,s),(n=n.alternate)&&Cg(n,s)}function fE(){return null}var Rg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ih(n){this._internalRoot=n}Fu.prototype.render=Ih.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Lu(n,s,null,null)},Fu.prototype.unmount=Ih.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ms(function(){Lu(null,n,null,null)}),s[ri]=null}};function Fu(n){this._internalRoot=n}Fu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Fl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<br.length&&s!==0&&s<br[a].priority;a++);br.splice(a,0,n),a===0&&Bl(n)}};function Ch(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Pg(){}function pE(n,s,a,c,f){if(f){if(typeof c=="function"){var y=c;c=function(){var q=Mu(w);y.call(q)}}var w=Ig(s,c,n,0,null,!1,!1,"",Pg);return n._reactRootContainer=w,n[ri]=w.current,Pa(n.nodeType===8?n.parentNode:n),Ms(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var A=c;c=function(){var q=Mu(j);A.call(q)}}var j=Th(n,0,!1,null,null,!1,!1,"",Pg);return n._reactRootContainer=j,n[ri]=j.current,Pa(n.nodeType===8?n.parentNode:n),Ms(function(){Lu(s,j,a,c)}),j}function zu(n,s,a,c,f){var y=a._reactRootContainer;if(y){var w=y;if(typeof f=="function"){var A=f;f=function(){var j=Mu(w);A.call(j)}}Lu(s,w,n,f)}else w=pE(a,s,n,f,c);return Mu(w)}Ll=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ii(s.pendingLanes);a!==0&&(Pi(s,a|1),Nn(s,lt()),(Ze&6)===0&&(Lo=lt()+500,Li()))}break;case 13:Ms(function(){var c=ai(n,1);if(c!==null){var f=Tn();Tr(c,n,1,f)}}),Sh(n,1)}},ao=function(n){if(n.tag===13){var s=ai(n,134217728);if(s!==null){var a=Tn();Tr(s,n,134217728,a)}Sh(n,134217728)}},Ml=function(n){if(n.tag===13){var s=$i(n),a=ai(n,s);if(a!==null){var c=Tn();Tr(a,n,s,c)}Sh(n,s)}},Fl=function(){return Qe},Ul=function(n,s){var a=Qe;try{return Qe=n,s()}finally{Qe=a}},B=function(n,s,a){switch(s){case"input":if(zt(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=iu(c);if(!f)throw Error(t(90));Ft(c),zt(c,f)}}}break;case"textarea":$t(n,a);break;case"select":s=a.value,s!=null&&Bt(n,!!a.multiple,s,!1)}},Rt=yh,Qn=Ms;var mE={usingClientEntryPoint:!1,Events:[ba,So,iu,nt,Xe,yh]},Ha={findFiberByHostInstance:ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gE={bundleType:Ha.bundleType,version:Ha.version,rendererPackageName:Ha.rendererPackageName,rendererConfig:Ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ha(n),n===null?null:n.stateNode},findFiberByHostInstance:Ha.findFiberByHostInstance||fE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{Ts=Bu.inject(gE),Ln=Bu}catch{}}return jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mE,jn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ch(s))throw Error(t(200));return hE(n,s,null,a)},jn.createRoot=function(n,s){if(!Ch(n))throw Error(t(299));var a=!1,c="",f=Rg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Th(n,1,!1,null,null,a,!1,c,f),n[ri]=s.current,Pa(n.nodeType===8?n.parentNode:n),new Ih(s)},jn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ha(s),n=n===null?null:n.stateNode,n},jn.flushSync=function(n){return Ms(n)},jn.hydrate=function(n,s,a){if(!Uu(s))throw Error(t(200));return zu(null,n,s,!0,a)},jn.hydrateRoot=function(n,s,a){if(!Ch(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,y="",w=Rg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Ig(s,null,n,1,a??null,f,!1,y,w),n[ri]=s.current,Pa(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Fu(s)},jn.render=function(n,s,a){if(!Uu(s))throw Error(t(200));return zu(null,n,s,!1,a)},jn.unmountComponentAtNode=function(n){if(!Uu(n))throw Error(t(40));return n._reactRootContainer?(Ms(function(){zu(null,null,n,!1,function(){n._reactRootContainer=null,n[ri]=null})}),!0):!1},jn.unstable_batchedUpdates=yh,jn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Uu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return zu(n,s,a,!1,c)},jn.version="18.3.1-next-f1338f8080-20240426",jn}var Og;function Rv(){if(Og)return Ah.exports;Og=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ah.exports=IE(),Ah.exports}var Lg;function CE(){if(Lg)return $u;Lg=1;var r=Rv();return $u.createRoot=r.createRoot,$u.hydrateRoot=r.hydrateRoot,$u}var RE=CE();const PE=Iv(RE);Rv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ol.apply(this,arguments)}var Ji;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ji||(Ji={}));const Mg="popstate";function AE(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:d,hash:p}=i.location;return qh("",{pathname:l,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:dc(o)}return bE(e,t,null,r)}function Ct(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Sf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kE(){return Math.random().toString(36).substr(2,8)}function Fg(r,e){return{usr:r.state,key:r.key,idx:e}}function qh(r,e,t,i){return t===void 0&&(t=null),ol({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?na(e):e,{state:t,key:e&&e.key||i||kE()})}function dc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function na(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function bE(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,p=Ji.Pop,g=null,v=E();v==null&&(v=0,d.replaceState(ol({},d.state,{idx:v}),""));function E(){return(d.state||{idx:null}).idx}function I(){p=Ji.Pop;let V=E(),oe=V==null?null:V-v;v=V,g&&g({action:p,location:J.location,delta:oe})}function C(V,oe){p=Ji.Push;let fe=qh(J.location,V,oe);v=E()+1;let ue=Fg(fe,v),ce=J.createHref(fe);try{d.pushState(ue,"",ce)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;o.location.assign(ce)}l&&g&&g({action:p,location:J.location,delta:1})}function U(V,oe){p=Ji.Replace;let fe=qh(J.location,V,oe);v=E();let ue=Fg(fe,v),ce=J.createHref(fe);d.replaceState(ue,"",ce),l&&g&&g({action:p,location:J.location,delta:0})}function K(V){let oe=o.location.origin!=="null"?o.location.origin:o.location.href,fe=typeof V=="string"?V:dc(V);return fe=fe.replace(/ $/,"%20"),Ct(oe,"No window.location.(origin|href) available to create URL for href: "+fe),new URL(fe,oe)}let J={get action(){return p},get location(){return r(o,d)},listen(V){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Mg,I),g=V,()=>{o.removeEventListener(Mg,I),g=null}},createHref(V){return e(o,V)},createURL:K,encodeLocation(V){let oe=K(V);return{pathname:oe.pathname,search:oe.search,hash:oe.hash}},push:C,replace:U,go(V){return d.go(V)}};return J}var Ug;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ug||(Ug={}));function NE(r,e,t){return t===void 0&&(t="/"),jE(r,e,t)}function jE(r,e,t,i){let o=typeof e=="string"?na(e):e,l=If(o.pathname||"/",t);if(l==null)return null;let d=Pv(r);DE(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let v=qE(l);p=$E(d[g],v)}return p}function Pv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,d,p)=>{let g={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};g.relativePath.startsWith("/")&&(Ct(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let v=es([i,g.relativePath]),E=t.concat(g);l.children&&l.children.length>0&&(Ct(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Pv(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:zE(v,l.index),routesMeta:E})};return r.forEach((l,d)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,d);else for(let g of Av(l.path))o(l,d,g)}),e}function Av(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=Av(i.join("/")),p=[];return p.push(...d.map(g=>g===""?l:[l,g].join("/"))),o&&p.push(...d),p.map(g=>r.startsWith("/")&&g===""?"/":g)}function DE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:BE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const VE=/^:[\w-]+$/,OE=3,LE=2,ME=1,FE=10,UE=-2,zg=r=>r==="*";function zE(r,e){let t=r.split("/"),i=t.length;return t.some(zg)&&(i+=UE),e&&(i+=LE),t.filter(o=>!zg(o)).reduce((o,l)=>o+(VE.test(l)?OE:l===""?ME:FE),i)}function BE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function $E(r,e,t){let{routesMeta:i}=r,o={},l="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],v=p===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",I=WE({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},E),C=g.route;if(!I)return null;Object.assign(o,I.params),d.push({params:o,pathname:es([l,I.pathname]),pathnameBase:JE(es([l,I.pathnameBase])),route:C}),I.pathnameBase!=="/"&&(l=es([l,I.pathnameBase]))}return d}function WE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=HE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((v,E,I)=>{let{paramName:C,isOptional:U}=E;if(C==="*"){let J=p[I]||"";d=l.slice(0,l.length-J.length).replace(/(.)\/+$/,"$1")}const K=p[I];return U&&!K?v[C]=void 0:v[C]=(K||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function HE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Sf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function qE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function If(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const GE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KE=r=>GE.test(r);function QE(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?na(r):r,l;if(t)if(KE(t))l=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),Sf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+t))}t.startsWith("/")?l=Bg(t.substring(1),"/"):l=Bg(t,e)}else l=e;return{pathname:l,search:XE(i),hash:ZE(o)}}function Bg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Nh(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Cf(r,e){let t=YE(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Rf(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=na(r):(o=ol({},r),Ct(!o.pathname||!o.pathname.includes("?"),Nh("?","pathname","search",o)),Ct(!o.pathname||!o.pathname.includes("#"),Nh("#","pathname","hash",o)),Ct(!o.search||!o.search.includes("#"),Nh("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,p;if(d==null)p=t;else{let I=e.length-1;if(!i&&d.startsWith("..")){let C=d.split("/");for(;C[0]==="..";)C.shift(),I-=1;o.pathname=C.join("/")}p=I>=0?e[I]:"/"}let g=QE(o,p),v=d&&d!=="/"&&d.endsWith("/"),E=(l||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(v||E)&&(g.pathname+="/"),g}const es=r=>r.join("/").replace(/\/\/+/g,"/"),JE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),XE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ZE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function ex(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const kv=["post","put","patch","delete"];new Set(kv);const tx=["get",...kv];new Set(tx);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},al.apply(this,arguments)}const Pf=$.createContext(null),nx=$.createContext(null),ps=$.createContext(null),Nc=$.createContext(null),ms=$.createContext({outlet:null,matches:[],isDataRoute:!1}),bv=$.createContext(null);function rx(r,e){let{relative:t}=e===void 0?{}:e;ra()||Ct(!1);let{basename:i,navigator:o}=$.useContext(ps),{hash:l,pathname:d,search:p}=jv(r,{relative:t}),g=d;return i!=="/"&&(g=d==="/"?i:es([i,d])),o.createHref({pathname:g,search:p,hash:l})}function ra(){return $.useContext(Nc)!=null}function yl(){return ra()||Ct(!1),$.useContext(Nc).location}function Nv(r){$.useContext(ps).static||$.useLayoutEffect(r)}function jc(){let{isDataRoute:r}=$.useContext(ms);return r?gx():ix()}function ix(){ra()||Ct(!1);let r=$.useContext(Pf),{basename:e,future:t,navigator:i}=$.useContext(ps),{matches:o}=$.useContext(ms),{pathname:l}=yl(),d=JSON.stringify(Cf(o,t.v7_relativeSplatPath)),p=$.useRef(!1);return Nv(()=>{p.current=!0}),$.useCallback(function(v,E){if(E===void 0&&(E={}),!p.current)return;if(typeof v=="number"){i.go(v);return}let I=Rf(v,JSON.parse(d),l,E.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:es([e,I.pathname])),(E.replace?i.replace:i.push)(I,E.state,E)},[e,i,d,l,r])}function jv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=$.useContext(ps),{matches:o}=$.useContext(ms),{pathname:l}=yl(),d=JSON.stringify(Cf(o,i.v7_relativeSplatPath));return $.useMemo(()=>Rf(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function sx(r,e){return ox(r,e)}function ox(r,e,t,i){ra()||Ct(!1);let{navigator:o}=$.useContext(ps),{matches:l}=$.useContext(ms),d=l[l.length-1],p=d?d.params:{};d&&d.pathname;let g=d?d.pathnameBase:"/";d&&d.route;let v=yl(),E;if(e){var I;let V=typeof e=="string"?na(e):e;g==="/"||(I=V.pathname)!=null&&I.startsWith(g)||Ct(!1),E=V}else E=v;let C=E.pathname||"/",U=C;if(g!=="/"){let V=g.replace(/^\//,"").split("/");U="/"+C.replace(/^\//,"").split("/").slice(V.length).join("/")}let K=NE(r,{pathname:U}),J=dx(K&&K.map(V=>Object.assign({},V,{params:Object.assign({},p,V.params),pathname:es([g,o.encodeLocation?o.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?g:es([g,o.encodeLocation?o.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),l,t,i);return e&&J?$.createElement(Nc.Provider,{value:{location:al({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Ji.Pop}},J):J}function ax(){let r=mx(),e=ex(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:o},t):null,null)}const lx=$.createElement(ax,null);class ux extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?$.createElement(ms.Provider,{value:this.props.routeContext},$.createElement(bv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cx(r){let{routeContext:e,match:t,children:i}=r,o=$.useContext(Pf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),$.createElement(ms.Provider,{value:e},i)}function dx(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let E=d.findIndex(I=>I.route.id&&(p==null?void 0:p[I.route.id])!==void 0);E>=0||Ct(!1),d=d.slice(0,Math.min(d.length,E+1))}let g=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<d.length;E++){let I=d[E];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(v=E),I.route.id){let{loaderData:C,errors:U}=t,K=I.route.loader&&C[I.route.id]===void 0&&(!U||U[I.route.id]===void 0);if(I.route.lazy||K){g=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((E,I,C)=>{let U,K=!1,J=null,V=null;t&&(U=p&&I.route.id?p[I.route.id]:void 0,J=I.route.errorElement||lx,g&&(v<0&&C===0?(yx("route-fallback"),K=!0,V=null):v===C&&(K=!0,V=I.route.hydrateFallbackElement||null)));let oe=e.concat(d.slice(0,C+1)),fe=()=>{let ue;return U?ue=J:K?ue=V:I.route.Component?ue=$.createElement(I.route.Component,null):I.route.element?ue=I.route.element:ue=E,$.createElement(cx,{match:I,routeContext:{outlet:E,matches:oe,isDataRoute:t!=null},children:ue})};return t&&(I.route.ErrorBoundary||I.route.errorElement||C===0)?$.createElement(ux,{location:t.location,revalidation:t.revalidation,component:J,error:U,children:fe(),routeContext:{outlet:null,matches:oe,isDataRoute:!0}}):fe()},null)}var Dv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Dv||{}),Vv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Vv||{});function hx(r){let e=$.useContext(Pf);return e||Ct(!1),e}function fx(r){let e=$.useContext(nx);return e||Ct(!1),e}function px(r){let e=$.useContext(ms);return e||Ct(!1),e}function Ov(r){let e=px(),t=e.matches[e.matches.length-1];return t.route.id||Ct(!1),t.route.id}function mx(){var r;let e=$.useContext(bv),t=fx(),i=Ov();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function gx(){let{router:r}=hx(Dv.UseNavigateStable),e=Ov(Vv.UseNavigateStable),t=$.useRef(!1);return Nv(()=>{t.current=!0}),$.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,al({fromRouteId:e},l)))},[r,e])}const $g={};function yx(r,e,t){$g[r]||($g[r]=!0)}function vx(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function _x(r){let{to:e,replace:t,state:i,relative:o}=r;ra()||Ct(!1);let{future:l,static:d}=$.useContext(ps),{matches:p}=$.useContext(ms),{pathname:g}=yl(),v=jc(),E=Rf(e,Cf(p,l.v7_relativeSplatPath),g,o==="path"),I=JSON.stringify(E);return $.useEffect(()=>v(JSON.parse(I),{replace:t,state:i,relative:o}),[v,I,o,t,i]),null}function hi(r){Ct(!1)}function wx(r){let{basename:e="/",children:t=null,location:i,navigationType:o=Ji.Pop,navigator:l,static:d=!1,future:p}=r;ra()&&Ct(!1);let g=e.replace(/^\/*/,"/"),v=$.useMemo(()=>({basename:g,navigator:l,static:d,future:al({v7_relativeSplatPath:!1},p)}),[g,p,l,d]);typeof i=="string"&&(i=na(i));let{pathname:E="/",search:I="",hash:C="",state:U=null,key:K="default"}=i,J=$.useMemo(()=>{let V=If(E,g);return V==null?null:{location:{pathname:V,search:I,hash:C,state:U,key:K},navigationType:o}},[g,E,I,C,U,K,o]);return J==null?null:$.createElement(ps.Provider,{value:v},$.createElement(Nc.Provider,{children:t,value:J}))}function Ex(r){let{children:e,location:t}=r;return sx(Gh(e),t)}new Promise(()=>{});function Gh(r,e){e===void 0&&(e=[]);let t=[];return $.Children.forEach(r,(i,o)=>{if(!$.isValidElement(i))return;let l=[...e,o];if(i.type===$.Fragment){t.push.apply(t,Gh(i.props.children,l));return}i.type!==hi&&Ct(!1),!i.props.index||!i.props.children||Ct(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Gh(i.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kh(){return Kh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Kh.apply(this,arguments)}function xx(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function Tx(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Sx(r,e){return r.button===0&&(!e||e==="_self")&&!Tx(r)}const Ix=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Cx="6";try{window.__reactRouterVersion=Cx}catch{}const Rx="startTransition",Wg=xE[Rx];function Px(r){let{basename:e,children:t,future:i,window:o}=r,l=$.useRef();l.current==null&&(l.current=AE({window:o,v5Compat:!0}));let d=l.current,[p,g]=$.useState({action:d.action,location:d.location}),{v7_startTransition:v}=i||{},E=$.useCallback(I=>{v&&Wg?Wg(()=>g(I)):g(I)},[g,v]);return $.useLayoutEffect(()=>d.listen(E),[d,E]),$.useEffect(()=>vx(i),[i]),$.createElement(wx,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:d,future:i})}const Ax=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ga=$.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:p,target:g,to:v,preventScrollReset:E,viewTransition:I}=e,C=xx(e,Ix),{basename:U}=$.useContext(ps),K,J=!1;if(typeof v=="string"&&kx.test(v)&&(K=v,Ax))try{let ue=new URL(window.location.href),ce=v.startsWith("//")?new URL(ue.protocol+v):new URL(v),de=If(ce.pathname,U);ce.origin===ue.origin&&de!=null?v=de+ce.search+ce.hash:J=!0}catch{}let V=rx(v,{relative:o}),oe=bx(v,{replace:d,state:p,target:g,preventScrollReset:E,relative:o,viewTransition:I});function fe(ue){i&&i(ue),ue.defaultPrevented||oe(ue)}return $.createElement("a",Kh({},C,{href:K||V,onClick:J||l?i:fe,ref:t,target:g}))});var Hg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Hg||(Hg={}));var qg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(qg||(qg={}));function bx(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:p}=e===void 0?{}:e,g=jc(),v=yl(),E=jv(r,{relative:d});return $.useCallback(I=>{if(Sx(I,t)){I.preventDefault();let C=i!==void 0?i:dc(v)===dc(E);g(r,{replace:C,state:o,preventScrollReset:l,relative:d,viewTransition:p})}},[v,g,E,i,o,t,r,l,d,p])}const Nx=()=>{};var Gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},jx=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],p=r[t++],g=((o&7)<<18|(l&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Mv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,p=d?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,E=l>>2,I=(l&3)<<4|p>>4;let C=(p&15)<<2|v>>6,U=v&63;g||(U=64,d||(C=64)),i.push(t[E],t[I],t[C],t[U])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Lv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):jx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||I==null)throw new Dx;const C=l<<2|p>>4;if(i.push(C),v!==64){const U=p<<4&240|v>>2;if(i.push(U),I!==64){const K=v<<6&192|I;i.push(K)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Dx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vx=function(r){const e=Lv(r);return Mv.encodeByteArray(e,!0)},hc=function(r){return Vx(r).replace(/\./g,"")},Fv=function(r){try{return Mv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=()=>Ox().__FIREBASE_DEFAULTS__,Mx=()=>{if(typeof process>"u"||typeof Gg>"u")return;const r=Gg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Fx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Fv(r[1]);return e&&JSON.parse(e)},Dc=()=>{try{return Nx()||Lx()||Mx()||Fx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Uv=r=>{var e,t;return(t=(e=Dc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Ux=r=>{const e=Uv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},zv=()=>{var r;return(r=Dc())===null||r===void 0?void 0:r.config},Bv=r=>{var e;return(e=Dc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $v(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[hc(JSON.stringify(t)),hc(JSON.stringify(d)),""].join(".")}const el={};function $x(){const r={prod:[],emulator:[]};for(const e of Object.keys(el))el[e]?r.emulator.push(e):r.prod.push(e);return r}function Wx(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Kg=!1;function Wv(r,e){if(typeof window>"u"||typeof document>"u"||!ia(window.location.host)||el[r]===e||el[r]||Kg)return;el[r]=e;function t(C){return`__firebase__banner__${C}`}const i="__firebase__banner",l=$x().prod.length>0;function d(){const C=document.getElementById(i);C&&C.remove()}function p(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function g(C,U){C.setAttribute("width","24"),C.setAttribute("id",U),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function v(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Kg=!0,d()},C}function E(C,U){C.setAttribute("id",U),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function I(){const C=Wx(i),U=t("text"),K=document.getElementById(U)||document.createElement("span"),J=t("learnmore"),V=document.getElementById(J)||document.createElement("a"),oe=t("preprendIcon"),fe=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ue=C.element;p(ue),E(V,J);const ce=v();g(fe,oe),ue.append(fe,K,V,ce),document.body.appendChild(ue)}l?(K.innerText="Preview backend disconnected.",fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function qx(){var r;const e=(r=Dc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Qx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yx(){const r=fn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Jx(){return!qx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xx(){try{return typeof indexedDB=="object"}catch{return!1}}function Zx(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="FirebaseError";class xi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=eT,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?tT(l,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new xi(o,p,i)}}function tT(r,e){return r.replace(nT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const nT=/\{\$([^}]+)}/g;function rT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Gs(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],d=e[o];if(Qg(l)&&Qg(d)){if(!Gs(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Qg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ka(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Qa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function iT(r,e){const t=new sT(r,e);return t.subscribe.bind(t)}class sT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");oT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=jh),o.error===void 0&&(o.error=jh),o.complete===void 0&&(o.complete=jh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function jh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(r){return r&&r._delegate?r._delegate:r}class Ks{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new zx;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uT(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lT(r){return r===Bs?void 0:r}function uT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const dT={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},hT=qe.INFO,fT={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},pT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=fT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Af{constructor(e){this.name=e,this._logLevel=hT,this._logHandler=pT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const mT=(r,e)=>e.some(t=>r instanceof t);let Yg,Jg;function gT(){return Yg||(Yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yT(){return Jg||(Jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hv=new WeakMap,Qh=new WeakMap,qv=new WeakMap,Dh=new WeakMap,kf=new WeakMap;function vT(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(ts(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Hv.set(t,r)}).catch(()=>{}),kf.set(e,r),e}function _T(r){if(Qh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Qh.set(r,e)}let Yh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Qh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||qv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ts(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function wT(r){Yh=r(Yh)}function ET(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Vh(this),e,...t);return qv.set(i,e.sort?e.sort():[e]),ts(i)}:yT().includes(r)?function(...e){return r.apply(Vh(this),e),ts(Hv.get(this))}:function(...e){return ts(r.apply(Vh(this),e))}}function xT(r){return typeof r=="function"?ET(r):(r instanceof IDBTransaction&&_T(r),mT(r,gT())?new Proxy(r,Yh):r)}function ts(r){if(r instanceof IDBRequest)return vT(r);if(Dh.has(r))return Dh.get(r);const e=xT(r);return e!==r&&(Dh.set(r,e),kf.set(e,r)),e}const Vh=r=>kf.get(r);function TT(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),p=ts(d);return i&&d.addEventListener("upgradeneeded",g=>{i(ts(d.result),g.oldVersion,g.newVersion,ts(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const ST=["get","getKey","getAll","getAllKeys","count"],IT=["put","add","delete","clear"],Oh=new Map;function Xg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Oh.get(e))return Oh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=IT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||ST.includes(t)))return;const l=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let v=g.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&g.done]))[0]};return Oh.set(e,l),l}wT(r=>({...r,get:(e,t,i)=>Xg(e,t)||r.get(e,t,i),has:(e,t)=>!!Xg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function RT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jh="@firebase/app",Zg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new Af("@firebase/app"),PT="@firebase/app-compat",AT="@firebase/analytics-compat",kT="@firebase/analytics",bT="@firebase/app-check-compat",NT="@firebase/app-check",jT="@firebase/auth",DT="@firebase/auth-compat",VT="@firebase/database",OT="@firebase/data-connect",LT="@firebase/database-compat",MT="@firebase/functions",FT="@firebase/functions-compat",UT="@firebase/installations",zT="@firebase/installations-compat",BT="@firebase/messaging",$T="@firebase/messaging-compat",WT="@firebase/performance",HT="@firebase/performance-compat",qT="@firebase/remote-config",GT="@firebase/remote-config-compat",KT="@firebase/storage",QT="@firebase/storage-compat",YT="@firebase/firestore",JT="@firebase/ai",XT="@firebase/firestore-compat",ZT="firebase",e1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="[DEFAULT]",t1={[Jh]:"fire-core",[PT]:"fire-core-compat",[kT]:"fire-analytics",[AT]:"fire-analytics-compat",[NT]:"fire-app-check",[bT]:"fire-app-check-compat",[jT]:"fire-auth",[DT]:"fire-auth-compat",[VT]:"fire-rtdb",[OT]:"fire-data-connect",[LT]:"fire-rtdb-compat",[MT]:"fire-fn",[FT]:"fire-fn-compat",[UT]:"fire-iid",[zT]:"fire-iid-compat",[BT]:"fire-fcm",[$T]:"fire-fcm-compat",[WT]:"fire-perf",[HT]:"fire-perf-compat",[qT]:"fire-rc",[GT]:"fire-rc-compat",[KT]:"fire-gcs",[QT]:"fire-gcs-compat",[YT]:"fire-fst",[XT]:"fire-fst-compat",[JT]:"fire-vertex","fire-js":"fire-js",[ZT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new Map,n1=new Map,Zh=new Map;function ey(r,e){try{r.container.addComponent(e)}catch(t){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Yo(r){const e=r.name;if(Zh.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;Zh.set(e,r);for(const t of fc.values())ey(t,r);for(const t of n1.values())ey(t,r);return!0}function bf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Wn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new vl("app","Firebase",r1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=e1;function Gv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Xh,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw ns.create("bad-app-name",{appName:String(o)});if(t||(t=zv()),!t)throw ns.create("no-options");const l=fc.get(o);if(l){if(Gs(t,l.options)&&Gs(i,l.config))return l;throw ns.create("duplicate-app",{appName:o})}const d=new cT(o);for(const g of Zh.values())d.addComponent(g);const p=new i1(t,i,d);return fc.set(o,p),p}function Kv(r=Xh){const e=fc.get(r);if(!e&&r===Xh&&zv())return Gv();if(!e)throw ns.create("no-app",{appName:r});return e}function rs(r,e,t){var i;let o=(i=t1[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(p.join(" "));return}Yo(new Ks(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="firebase-heartbeat-database",o1=1,ll="firebase-heartbeat-store";let Lh=null;function Qv(){return Lh||(Lh=TT(s1,o1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ll)}catch(t){console.warn(t)}}}}).catch(r=>{throw ns.create("idb-open",{originalErrorMessage:r.message})})),Lh}async function a1(r){try{const t=(await Qv()).transaction(ll),i=await t.objectStore(ll).get(Yv(r));return await t.done,i}catch(e){if(e instanceof xi)yi.warn(e.message);else{const t=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yi.warn(t.message)}}}async function ty(r,e){try{const i=(await Qv()).transaction(ll,"readwrite");await i.objectStore(ll).put(e,Yv(r)),await i.done}catch(t){if(t instanceof xi)yi.warn(t.message);else{const i=ns.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});yi.warn(i.message)}}}function Yv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=1024,u1=30;class c1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new h1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ny();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>u1){const d=f1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){yi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ny(),{heartbeatsToSend:i,unsentEntries:o}=d1(this._heartbeatsCache.heartbeats),l=hc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return yi.warn(t),""}}}function ny(){return new Date().toISOString().substring(0,10)}function d1(r,e=l1){const t=[];let i=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),ry(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ry(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class h1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xx()?Zx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await a1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ty(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ty(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ry(r){return hc(JSON.stringify({version:2,heartbeats:r})).length}function f1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(r){Yo(new Ks("platform-logger",e=>new CT(e),"PRIVATE")),Yo(new Ks("heartbeat",e=>new c1(e),"PRIVATE")),rs(Jh,Zg,r),rs(Jh,Zg,"esm2017"),rs("fire-js","")}p1("");var m1="firebase",g1="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(m1,g1,"app");function Nf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Jv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y1=Jv,Xv=new vl("auth","Firebase",Jv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new Af("@firebase/auth");function v1(r,...e){pc.logLevel<=qe.WARN&&pc.warn(`Auth (${sa}): ${r}`,...e)}function ec(r,...e){pc.logLevel<=qe.ERROR&&pc.error(`Auth (${sa}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(r,...e){throw Df(r,...e)}function Cr(r,...e){return Df(r,...e)}function jf(r,e,t){const i=Object.assign(Object.assign({},y1()),{[e]:t});return new vl("auth","Firebase",i).create(e,{appName:r.name})}function mi(r){return jf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _1(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ar(r,"argument-error"),jf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Df(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Xv.create(r,...e)}function ke(r,e,...t){if(!r)throw Df(e,...t)}function fi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ec(e),new Error(e)}function vi(r,e){r||fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function w1(){return iy()==="http:"||iy()==="https:"}function iy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w1()||Kx()||"connection"in navigator)?navigator.onLine:!0}function x1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,t){this.shortDelay=e,this.longDelay=t,vi(t>e,"Short delay should be less than long delay!"),this.isMobile=Hx()||Qx()}get(){return E1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(r,e){vi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I1=new wl(3e4,6e4);function gs(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function ys(r,e,t,i,o={}){return e_(r,o,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const p=_l(Object.assign({key:r.config.apiKey},d)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:g},l);return Gx()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&ia(r.emulatorConfig.host)&&(v.credentials="include"),Zv.fetch()(await t_(r,r.config.apiHost,t,p),v)})}async function e_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},T1),e);try{const o=new R1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Wu(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const p=l.ok?d.errorMessage:d.error.message,[g,v]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Wu(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Wu(r,"user-disabled",d);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw jf(r,E,v);ar(r,E)}}catch(o){if(o instanceof xi)throw o;ar(r,"network-request-failed",{message:String(o)})}}async function El(r,e,t,i,o={}){const l=await ys(r,e,t,i,o);return"mfaPendingCredential"in l&&ar(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function t_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,d=l.config.emulator?Vf(r.config,o):`${r.config.apiScheme}://${o}`;return S1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function C1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Cr(this.auth,"network-request-failed")),I1.get())})}}function Wu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Cr(r,e,i);return o.customData._tokenResponse=t,o}function sy(r){return r!==void 0&&r.enterprise!==void 0}class P1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return C1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function A1(r,e){return ys(r,"GET","/v2/recaptchaConfig",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(r,e){return ys(r,"POST","/v1/accounts:delete",e)}async function mc(r,e){return ys(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b1(r,e=!1){const t=rn(r),i=await t.getIdToken(e),o=Of(i);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:tl(Mh(o.auth_time)),issuedAtTime:tl(Mh(o.iat)),expirationTime:tl(Mh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Mh(r){return Number(r)*1e3}function Of(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return ec("JWT malformed, contained fewer than 3 sections"),null;try{const o=Fv(t);return o?JSON.parse(o):(ec("Failed to decode base64 JWT payload"),null)}catch(o){return ec("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function oy(r){const e=Of(r);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof xi&&N1(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function N1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await ul(r,mc(t,{idToken:i}));ke(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?n_(l.providerUserInfo):[],p=V1(r.providerData,d),g=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),E=g?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new tf(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,I)}async function D1(r){const e=rn(r);await gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V1(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function n_(r){return r.map(e=>{var{providerId:t}=e,i=Nf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(r,e){const t=await e_(r,{},async()=>{const i=_l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await t_(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return r.emulatorConfig&&ia(r.emulatorConfig.host)&&(g.credentials="include"),Zv.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function L1(r,e){return ys(r,"POST","/v2/accounts:revokeToken",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=oy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await O1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,d=new Ho;return i&&(ke(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(ke(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(ke(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(r,e){ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ir{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Nf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new tf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ul(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return b1(this,e)}reload(){return D1(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await gc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(mi(this.auth));const e=await this.getIdToken();return await ul(this,k1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,d,p,g,v,E;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,C=(o=t.email)!==null&&o!==void 0?o:void 0,U=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,K=(d=t.photoURL)!==null&&d!==void 0?d:void 0,J=(p=t.tenantId)!==null&&p!==void 0?p:void 0,V=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,oe=(v=t.createdAt)!==null&&v!==void 0?v:void 0,fe=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ue,emailVerified:ce,isAnonymous:de,providerData:pe,stsTokenManager:b}=t;ke(ue&&b,e,"internal-error");const R=Ho.fromJSON(this.name,b);ke(typeof ue=="string",e,"internal-error"),Gi(I,e.name),Gi(C,e.name),ke(typeof ce=="boolean",e,"internal-error"),ke(typeof de=="boolean",e,"internal-error"),Gi(U,e.name),Gi(K,e.name),Gi(J,e.name),Gi(V,e.name),Gi(oe,e.name),Gi(fe,e.name);const P=new Ir({uid:ue,auth:e,email:C,emailVerified:ce,displayName:I,isAnonymous:de,photoURL:K,phoneNumber:U,tenantId:J,stsTokenManager:R,createdAt:oe,lastLoginAt:fe});return pe&&Array.isArray(pe)&&(P.providerData=pe.map(k=>Object.assign({},k))),V&&(P._redirectEventId=V),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ho;o.updateFromServerResponse(t);const l=new Ir({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await gc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?n_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Ho;p.updateFromIdToken(i);const g=new Ir({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new tf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new Map;function pi(r){vi(r instanceof Function,"Expected a class definition");let e=ay.get(r);return e?(vi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ay.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}r_.type="NONE";const ly=r_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(r,e,t){return`firebase:${r}:${e}:${t}`}class qo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=tc(this.userKey,o.apiKey,l),this.fullPersistenceKey=tc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mc(this.auth,{idToken:e}).catch(()=>{});return t?Ir._fromGetAccountInfoResponse(this.auth,t,e):null}return Ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new qo(pi(ly),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||pi(ly);const d=tc(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const E=await v._get(d);if(E){let I;if(typeof E=="string"){const C=await mc(e,{idToken:E}).catch(()=>{});if(!C)break;I=await Ir._fromGetAccountInfoResponse(e,C,E)}else I=Ir._fromJSON(e,E);v!==l&&(p=I),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new qo(l,e,i):(l=g[0],p&&await l._set(d,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new qo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(a_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u_(e))return"Blackberry";if(c_(e))return"Webos";if(s_(e))return"Safari";if((e.includes("chrome/")||o_(e))&&!e.includes("edge/"))return"Chrome";if(l_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function i_(r=fn()){return/firefox\//i.test(r)}function s_(r=fn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o_(r=fn()){return/crios\//i.test(r)}function a_(r=fn()){return/iemobile/i.test(r)}function l_(r=fn()){return/android/i.test(r)}function u_(r=fn()){return/blackberry/i.test(r)}function c_(r=fn()){return/webos/i.test(r)}function Lf(r=fn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function M1(r=fn()){var e;return Lf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function F1(){return Yx()&&document.documentMode===10}function d_(r=fn()){return Lf(r)||l_(r)||c_(r)||u_(r)||/windows phone/i.test(r)||a_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(r,e=[]){let t;switch(r){case"Browser":t=uy(fn());break;case"Worker":t=`${uy(fn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,p)=>{try{const g=e(l);d(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(r,e={}){return ys(r,"GET","/v2/passwordPolicy",gs(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=6;class $1{constructor(e){var t,i,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:B1,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,d,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cy(this),this.idTokenSubscription=new cy(this),this.beforeStateQueue=new U1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pi(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mc(this,{idToken:e}),i=await Ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Wn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===p)&&(g!=null&&g.user)&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=x1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(mi(this));const t=e?rn(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z1(this),t=new $1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await L1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pi(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(p,this,"internal-error"),p.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&v1(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function vs(r){return rn(r)}class cy{constructor(e){this.auth=e,this.observer=null,this.addObserver=iT(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H1(r){Vc=r}function f_(r){return Vc.loadJS(r)}function q1(){return Vc.recaptchaEnterpriseScript}function G1(){return Vc.gapiScript}function K1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Q1{constructor(){this.enterprise=new Y1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Y1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const J1="recaptcha-enterprise",p_="NO_RECAPTCHA";class X1{constructor(e){this.type=J1,this.auth=vs(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,p)=>{A1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new P1(g);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(g=>{p(g)})})}function o(l,d,p){const g=window.grecaptcha;sy(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(p_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Q1().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{i(this.auth).then(p=>{if(!t&&sy(window.grecaptcha))o(p,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=q1();g.length!==0&&(g+=p),f_(g).then(()=>{o(p,l,d)}).catch(v=>{d(v)})}}).catch(p=>{d(p)})})}}async function dy(r,e,t,i=!1,o=!1){const l=new X1(r);let d;if(o)d=p_;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function nf(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await dy(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await dy(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(r,e){const t=bf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Gs(l,e??{}))return o;ar(o,"already-initialized")}return t.initialize({options:e})}function eS(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(pi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function tS(r,e,t){const i=vs(r);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=m_(e),{host:d,port:p}=nS(e),g=p===null?"":`:${p}`,v={url:`${l}//${d}${g}/`},E=Object.freeze({host:d,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(Gs(v,i.config.emulator)&&Gs(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,ia(d)?($v(`${l}//${d}${g}`),Wv("Auth",!0)):rS()}function m_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function nS(r){const e=m_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:hy(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:hy(d)}}}function hy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function rS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fi("not implemented")}_getIdTokenResponse(e){return fi("not implemented")}_linkToIdToken(e,t){return fi("not implemented")}_getReauthenticationResolver(e){return fi("not implemented")}}async function iS(r,e){return ys(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(r,e){return El(r,"POST","/v1/accounts:signInWithPassword",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(r,e){return El(r,"POST","/v1/accounts:signInWithEmailLink",gs(r,e))}async function aS(r,e){return El(r,"POST","/v1/accounts:signInWithEmailLink",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Mf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new cl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new cl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nf(e,t,"signInWithPassword",sS);case"emailLink":return oS(e,{email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nf(e,i,"signUpPassword",iS);case"emailLink":return aS(e,{idToken:t,email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(r,e){return El(r,"POST","/v1/accounts:signInWithIdp",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="http://localhost";class Qs extends Mf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Nf(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new Qs(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Go(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Go(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Go(e,t)}buildRequest(){const e={requestUri:lS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_l(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cS(r){const e=Ka(Qa(r)).link,t=e?Ka(Qa(e)).deep_link_id:null,i=Ka(Qa(r)).deep_link_id;return(i?Ka(Qa(i)).link:null)||i||t||e||r}class Ff{constructor(e){var t,i,o,l,d,p;const g=Ka(Qa(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,E=(i=g.oobCode)!==null&&i!==void 0?i:null,I=uS((o=g.mode)!==null&&o!==void 0?o:null);ke(v&&E&&I,"argument-error"),this.apiKey=v,this.operation=I,this.code=E,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=g.lang)!==null&&d!==void 0?d:null,this.tenantId=(p=g.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=cS(e);try{return new Ff(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.providerId=oa.PROVIDER_ID}static credential(e,t){return cl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ff.parseLink(t);return ke(i,"argument-error"),cl._fromEmailAndCode(e,i.code,i.tenantId)}}oa.PROVIDER_ID="password";oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Uf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends xl{constructor(){super("facebook.com")}static credential(e){return Qs._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qs._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ur.credential(t,i)}catch{return null}}}Ur.GOOGLE_SIGN_IN_METHOD="google.com";Ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends xl{constructor(){super("github.com")}static credential(e){return Qs._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com";Qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends xl{constructor(){super("twitter.com")}static credential(e,t){return Qs._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Yi.credential(t,i)}catch{return null}}}Yi.TWITTER_SIGN_IN_METHOD="twitter.com";Yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(r,e){return El(r,"POST","/v1/accounts:signUp",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Ir._fromIdTokenResponse(e,i,o),d=fy(i);return new Ys({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=fy(i);return new Ys({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function fy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends xi{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,yc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new yc(e,t,i,o)}}function g_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?yc._fromErrorAndOperation(r,l,e,i):l})}async function hS(r,e,t=!1){const i=await ul(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ys._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(r,e,t=!1){const{auth:i}=r;if(Wn(i.app))return Promise.reject(mi(i));const o="reauthenticate";try{const l=await ul(r,g_(i,o,e,r),t);ke(l.idToken,i,"internal-error");const d=Of(l.idToken);ke(d,i,"internal-error");const{sub:p}=d;return ke(r.uid===p,i,"user-mismatch"),Ys._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ar(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y_(r,e,t=!1){if(Wn(r.app))return Promise.reject(mi(r));const i="signIn",o=await g_(r,i,e),l=await Ys._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function pS(r,e){return y_(vs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v_(r){const e=vs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mS(r,e,t){if(Wn(r.app))return Promise.reject(mi(r));const i=vs(r),d=await nf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dS).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&v_(r),g}),p=await Ys._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function __(r,e,t){return Wn(r.app)?Promise.reject(mi(r)):pS(rn(r),oa.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&v_(r),i})}function gS(r,e,t,i){return rn(r).onIdTokenChanged(e,t,i)}function yS(r,e,t){return rn(r).beforeAuthStateChanged(e,t)}function vS(r,e,t,i){return rn(r).onAuthStateChanged(e,t,i)}function w_(r){return rn(r).signOut()}const vc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vc,"1"),this.storage.removeItem(vc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=1e3,wS=10;class x_ extends E_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);F1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,wS):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},_S)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}x_.type="LOCAL";const ES=x_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends E_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}T_.type="SESSION";const S_=T_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Oc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async v=>v(t.origin,l)),g=await xS(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((p,g)=>{const v=zf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(I){const C=I;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(C.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(){return window}function SS(r){zr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function IS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function RS(){return I_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="firebaseLocalStorageDb",PS=1,_c="firebaseLocalStorage",R_="fbase_key";class Tl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lc(r,e){return r.transaction([_c],e?"readwrite":"readonly").objectStore(_c)}function AS(){const r=indexedDB.deleteDatabase(C_);return new Tl(r).toPromise()}function rf(){const r=indexedDB.open(C_,PS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(_c,{keyPath:R_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(_c)?e(i):(i.close(),await AS(),e(await rf()))})})}async function py(r,e,t){const i=Lc(r,!0).put({[R_]:e,value:t});return new Tl(i).toPromise()}async function kS(r,e){const t=Lc(r,!1).get(e),i=await new Tl(t).toPromise();return i===void 0?null:i.value}function my(r,e){const t=Lc(r,!0).delete(e);return new Tl(t).toPromise()}const bS=800,NS=3;class P_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>NS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oc._getInstance(RS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await IS(),!this.activeServiceWorker)return;this.sender=new TS(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rf();return await py(e,vc,"1"),await my(e,vc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>py(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>kS(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>my(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Lc(o,!1).getAll();return new Tl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}P_.type="LOCAL";const jS=P_;new wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(r,e){return e?pi(e):(ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Mf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Go(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Go(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Go(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DS(r){return y_(r.auth,new Bf(r),r.bypassAuthState)}function VS(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),fS(t,new Bf(r),r.bypassAuthState)}async function OS(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),hS(t,new Bf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DS;case"linkViaPopup":case"linkViaRedirect":return OS;case"reauthViaPopup":case"reauthViaRedirect":return VS;default:ar(this.auth,"internal-error")}}resolve(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new wl(2e3,1e4);async function b_(r,e,t){if(Wn(r.app))return Promise.reject(Cr(r,"operation-not-supported-in-this-environment"));const i=vs(r);_1(r,e,Uf);const o=A_(i,t);return new $s(i,"signInViaPopup",e,o).executeNotNull()}class $s extends k_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){vi(this.filter.length===1,"Popup operations only handle one event");const e=zf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LS.get())};e()}}$s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="pendingRedirect",nc=new Map;class FS extends k_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=nc.get(this.auth._key());if(!e){try{const i=await US(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}nc.set(this.auth._key(),e)}return this.bypassAuthState||nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function US(r,e){const t=$S(e),i=BS(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function zS(r,e){nc.set(r._key(),e)}function BS(r){return pi(r._redirectPersistence)}function $S(r){return tc(MS,r.config.apiKey,r.name)}async function WS(r,e,t=!1){if(Wn(r.app))return Promise.reject(mi(r));const i=vs(r),o=A_(i,e),d=await new FS(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=600*1e3;class qS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!N_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Cr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HS&&this.cachedEventUids.clear(),this.cachedEventUids.has(gy(e))}saveEventToCache(e){this.cachedEventUids.add(gy(e)),this.lastProcessedEventTime=Date.now()}}function gy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function N_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(r,e={}){return ys(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YS=/^https?/;async function JS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await KS(r);for(const t of e)try{if(XS(t))return}catch{}ar(r,"unauthorized-domain")}function XS(r){const e=ef(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!YS.test(t))return!1;if(QS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=new wl(3e4,6e4);function yy(){const r=zr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function eI(r){return new Promise((e,t)=>{var i,o,l;function d(){yy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yy(),t(Cr(r,"network-request-failed"))},timeout:ZS.get()})}if(!((o=(i=zr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=zr().gapi)===null||l===void 0)&&l.load)d();else{const p=K1("iframefcb");return zr()[p]=()=>{gapi.load?d():t(Cr(r,"network-request-failed"))},f_(`${G1()}?onload=${p}`).catch(g=>t(g))}}).catch(e=>{throw rc=null,e})}let rc=null;function tI(r){return rc=rc||eI(r),rc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new wl(5e3,15e3),rI="__/auth/iframe",iI="emulator/auth/iframe",sI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aI(r){const e=r.config;ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Vf(e,iI):`https://${r.config.authDomain}/${rI}`,i={apiKey:e.apiKey,appName:r.name,v:sa},o=oI.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${_l(i).slice(1)}`}async function lI(r){const e=await tI(r),t=zr().gapi;return ke(t,r,"internal-error"),e.open({where:document.body,url:aI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sI,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=Cr(r,"network-request-failed"),p=zr().setTimeout(()=>{l(d)},nI.get());function g(){zr().clearTimeout(p),o(i)}i.ping(g).then(g,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cI=500,dI=600,hI="_blank",fI="http://localhost";class vy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pI(r,e,t,i=cI,o=dI){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g=Object.assign(Object.assign({},uI),{width:i.toString(),height:o.toString(),top:l,left:d}),v=fn().toLowerCase();t&&(p=o_(v)?hI:t),i_(v)&&(e=e||fI,g.scrollbars="yes");const E=Object.entries(g).reduce((C,[U,K])=>`${C}${U}=${K},`,"");if(M1(v)&&p!=="_self")return mI(e||"",p),new vy(null);const I=window.open(e||"",p,E);ke(I,r,"popup-blocked");try{I.focus()}catch{}return new vy(I)}function mI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="__/auth/handler",yI="emulator/auth/handler",vI=encodeURIComponent("fac");async function _y(r,e,t,i,o,l){ke(r.config.authDomain,r,"auth-domain-config-required"),ke(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:sa,eventId:o};if(e instanceof Uf){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",rT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))d[E]=I}if(e instanceof xl){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const g=await r._getAppCheckToken(),v=g?`#${vI}=${encodeURIComponent(g)}`:"";return`${_I(r)}?${_l(p).slice(1)}${v}`}function _I({config:r}){return r.emulator?Vf(r,yI):`https://${r.authDomain}/${gI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="webStorageSupport";class wI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S_,this._completeRedirectFn=WS,this._overrideRedirectResult=zS}async _openPopup(e,t,i,o){var l;vi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await _y(e,t,i,ef(),o);return pI(e,d,zf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await _y(e,t,i,ef(),o);return SS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(vi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await lI(e),i=new qS(e);return t.register("authEvent",o=>(ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fh,{type:Fh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Fh];d!==void 0&&t(!!d),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return d_()||s_()||Lf()}}const EI=wI;var wy="@firebase/auth",Ey="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SI(r){Yo(new Ks("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;ke(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h_(r)},v=new W1(i,o,l,g);return eS(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Yo(new Ks("auth-internal",e=>{const t=vs(e.getProvider("auth").getImmediate());return(i=>new xI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(wy,Ey,TI(r)),rs(wy,Ey,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=300,CI=Bv("authIdTokenMaxAge")||II;let xy=null;const RI=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>CI)return;const o=t==null?void 0:t.token;xy!==o&&(xy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function PI(r=Kv()){const e=bf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=Z1(r,{popupRedirectResolver:EI,persistence:[jS,ES,S_]}),i=Bv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=RI(l.toString());yS(t,d,()=>d(t.currentUser)),gS(t,p=>d(p))}}const o=Uv("auth");return o&&tS(t,`http://${o}`),t}function AI(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}H1({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Cr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",AI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SI("Browser");var Ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,j_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,R){function P(){}P.prototype=R.prototype,b.D=R.prototype,b.prototype=new P,b.prototype.constructor=b,b.C=function(k,D,N){for(var x=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)x[ie-2]=arguments[ie];return R.prototype[D].apply(k,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,R,P){P||(P=0);var k=Array(16);if(typeof R=="string")for(var D=0;16>D;++D)k[D]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(D=0;16>D;++D)k[D]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=b.g[0],P=b.g[1],D=b.g[2];var N=b.g[3],x=R+(N^P&(D^N))+k[0]+3614090360&4294967295;R=P+(x<<7&4294967295|x>>>25),x=N+(D^R&(P^D))+k[1]+3905402710&4294967295,N=R+(x<<12&4294967295|x>>>20),x=D+(P^N&(R^P))+k[2]+606105819&4294967295,D=N+(x<<17&4294967295|x>>>15),x=P+(R^D&(N^R))+k[3]+3250441966&4294967295,P=D+(x<<22&4294967295|x>>>10),x=R+(N^P&(D^N))+k[4]+4118548399&4294967295,R=P+(x<<7&4294967295|x>>>25),x=N+(D^R&(P^D))+k[5]+1200080426&4294967295,N=R+(x<<12&4294967295|x>>>20),x=D+(P^N&(R^P))+k[6]+2821735955&4294967295,D=N+(x<<17&4294967295|x>>>15),x=P+(R^D&(N^R))+k[7]+4249261313&4294967295,P=D+(x<<22&4294967295|x>>>10),x=R+(N^P&(D^N))+k[8]+1770035416&4294967295,R=P+(x<<7&4294967295|x>>>25),x=N+(D^R&(P^D))+k[9]+2336552879&4294967295,N=R+(x<<12&4294967295|x>>>20),x=D+(P^N&(R^P))+k[10]+4294925233&4294967295,D=N+(x<<17&4294967295|x>>>15),x=P+(R^D&(N^R))+k[11]+2304563134&4294967295,P=D+(x<<22&4294967295|x>>>10),x=R+(N^P&(D^N))+k[12]+1804603682&4294967295,R=P+(x<<7&4294967295|x>>>25),x=N+(D^R&(P^D))+k[13]+4254626195&4294967295,N=R+(x<<12&4294967295|x>>>20),x=D+(P^N&(R^P))+k[14]+2792965006&4294967295,D=N+(x<<17&4294967295|x>>>15),x=P+(R^D&(N^R))+k[15]+1236535329&4294967295,P=D+(x<<22&4294967295|x>>>10),x=R+(D^N&(P^D))+k[1]+4129170786&4294967295,R=P+(x<<5&4294967295|x>>>27),x=N+(P^D&(R^P))+k[6]+3225465664&4294967295,N=R+(x<<9&4294967295|x>>>23),x=D+(R^P&(N^R))+k[11]+643717713&4294967295,D=N+(x<<14&4294967295|x>>>18),x=P+(N^R&(D^N))+k[0]+3921069994&4294967295,P=D+(x<<20&4294967295|x>>>12),x=R+(D^N&(P^D))+k[5]+3593408605&4294967295,R=P+(x<<5&4294967295|x>>>27),x=N+(P^D&(R^P))+k[10]+38016083&4294967295,N=R+(x<<9&4294967295|x>>>23),x=D+(R^P&(N^R))+k[15]+3634488961&4294967295,D=N+(x<<14&4294967295|x>>>18),x=P+(N^R&(D^N))+k[4]+3889429448&4294967295,P=D+(x<<20&4294967295|x>>>12),x=R+(D^N&(P^D))+k[9]+568446438&4294967295,R=P+(x<<5&4294967295|x>>>27),x=N+(P^D&(R^P))+k[14]+3275163606&4294967295,N=R+(x<<9&4294967295|x>>>23),x=D+(R^P&(N^R))+k[3]+4107603335&4294967295,D=N+(x<<14&4294967295|x>>>18),x=P+(N^R&(D^N))+k[8]+1163531501&4294967295,P=D+(x<<20&4294967295|x>>>12),x=R+(D^N&(P^D))+k[13]+2850285829&4294967295,R=P+(x<<5&4294967295|x>>>27),x=N+(P^D&(R^P))+k[2]+4243563512&4294967295,N=R+(x<<9&4294967295|x>>>23),x=D+(R^P&(N^R))+k[7]+1735328473&4294967295,D=N+(x<<14&4294967295|x>>>18),x=P+(N^R&(D^N))+k[12]+2368359562&4294967295,P=D+(x<<20&4294967295|x>>>12),x=R+(P^D^N)+k[5]+4294588738&4294967295,R=P+(x<<4&4294967295|x>>>28),x=N+(R^P^D)+k[8]+2272392833&4294967295,N=R+(x<<11&4294967295|x>>>21),x=D+(N^R^P)+k[11]+1839030562&4294967295,D=N+(x<<16&4294967295|x>>>16),x=P+(D^N^R)+k[14]+4259657740&4294967295,P=D+(x<<23&4294967295|x>>>9),x=R+(P^D^N)+k[1]+2763975236&4294967295,R=P+(x<<4&4294967295|x>>>28),x=N+(R^P^D)+k[4]+1272893353&4294967295,N=R+(x<<11&4294967295|x>>>21),x=D+(N^R^P)+k[7]+4139469664&4294967295,D=N+(x<<16&4294967295|x>>>16),x=P+(D^N^R)+k[10]+3200236656&4294967295,P=D+(x<<23&4294967295|x>>>9),x=R+(P^D^N)+k[13]+681279174&4294967295,R=P+(x<<4&4294967295|x>>>28),x=N+(R^P^D)+k[0]+3936430074&4294967295,N=R+(x<<11&4294967295|x>>>21),x=D+(N^R^P)+k[3]+3572445317&4294967295,D=N+(x<<16&4294967295|x>>>16),x=P+(D^N^R)+k[6]+76029189&4294967295,P=D+(x<<23&4294967295|x>>>9),x=R+(P^D^N)+k[9]+3654602809&4294967295,R=P+(x<<4&4294967295|x>>>28),x=N+(R^P^D)+k[12]+3873151461&4294967295,N=R+(x<<11&4294967295|x>>>21),x=D+(N^R^P)+k[15]+530742520&4294967295,D=N+(x<<16&4294967295|x>>>16),x=P+(D^N^R)+k[2]+3299628645&4294967295,P=D+(x<<23&4294967295|x>>>9),x=R+(D^(P|~N))+k[0]+4096336452&4294967295,R=P+(x<<6&4294967295|x>>>26),x=N+(P^(R|~D))+k[7]+1126891415&4294967295,N=R+(x<<10&4294967295|x>>>22),x=D+(R^(N|~P))+k[14]+2878612391&4294967295,D=N+(x<<15&4294967295|x>>>17),x=P+(N^(D|~R))+k[5]+4237533241&4294967295,P=D+(x<<21&4294967295|x>>>11),x=R+(D^(P|~N))+k[12]+1700485571&4294967295,R=P+(x<<6&4294967295|x>>>26),x=N+(P^(R|~D))+k[3]+2399980690&4294967295,N=R+(x<<10&4294967295|x>>>22),x=D+(R^(N|~P))+k[10]+4293915773&4294967295,D=N+(x<<15&4294967295|x>>>17),x=P+(N^(D|~R))+k[1]+2240044497&4294967295,P=D+(x<<21&4294967295|x>>>11),x=R+(D^(P|~N))+k[8]+1873313359&4294967295,R=P+(x<<6&4294967295|x>>>26),x=N+(P^(R|~D))+k[15]+4264355552&4294967295,N=R+(x<<10&4294967295|x>>>22),x=D+(R^(N|~P))+k[6]+2734768916&4294967295,D=N+(x<<15&4294967295|x>>>17),x=P+(N^(D|~R))+k[13]+1309151649&4294967295,P=D+(x<<21&4294967295|x>>>11),x=R+(D^(P|~N))+k[4]+4149444226&4294967295,R=P+(x<<6&4294967295|x>>>26),x=N+(P^(R|~D))+k[11]+3174756917&4294967295,N=R+(x<<10&4294967295|x>>>22),x=D+(R^(N|~P))+k[2]+718787259&4294967295,D=N+(x<<15&4294967295|x>>>17),x=P+(N^(D|~R))+k[9]+3951481745&4294967295,b.g[0]=b.g[0]+R&4294967295,b.g[1]=b.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+N&4294967295}i.prototype.u=function(b,R){R===void 0&&(R=b.length);for(var P=R-this.blockSize,k=this.B,D=this.h,N=0;N<R;){if(D==0)for(;N<=P;)o(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<R;)if(k[D++]=b.charCodeAt(N++),D==this.blockSize){o(this,k),D=0;break}}else for(;N<R;)if(k[D++]=b[N++],D==this.blockSize){o(this,k),D=0;break}}this.h=D,this.o+=R},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var R=1;R<b.length-8;++R)b[R]=0;var P=8*this.o;for(R=b.length-8;R<b.length;++R)b[R]=P&255,P/=256;for(this.u(b),b=Array(16),R=P=0;4>R;++R)for(var k=0;32>k;k+=8)b[P++]=this.g[R]>>>k&255;return b};function l(b,R){var P=p;return Object.prototype.hasOwnProperty.call(P,b)?P[b]:P[b]=R(b)}function d(b,R){this.h=R;for(var P=[],k=!0,D=b.length-1;0<=D;D--){var N=b[D]|0;k&&N==R||(P[D]=N,k=!1)}this.g=P}var p={};function g(b){return-128<=b&&128>b?l(b,function(R){return new d([R|0],0>R?-1:0)}):new d([b|0],0>b?-1:0)}function v(b){if(isNaN(b)||!isFinite(b))return I;if(0>b)return V(v(-b));for(var R=[],P=1,k=0;b>=P;k++)R[k]=b/P|0,P*=4294967296;return new d(R,0)}function E(b,R){if(b.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(b.charAt(0)=="-")return V(E(b.substring(1),R));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=v(Math.pow(R,8)),k=I,D=0;D<b.length;D+=8){var N=Math.min(8,b.length-D),x=parseInt(b.substring(D,D+N),R);8>N?(N=v(Math.pow(R,N)),k=k.j(N).add(v(x))):(k=k.j(P),k=k.add(v(x)))}return k}var I=g(0),C=g(1),U=g(16777216);r=d.prototype,r.m=function(){if(J(this))return-V(this).m();for(var b=0,R=1,P=0;P<this.g.length;P++){var k=this.i(P);b+=(0<=k?k:4294967296+k)*R,R*=4294967296}return b},r.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(K(this))return"0";if(J(this))return"-"+V(this).toString(b);for(var R=v(Math.pow(b,6)),P=this,k="";;){var D=ce(P,R).g;P=oe(P,D.j(R));var N=((0<P.g.length?P.g[0]:P.h)>>>0).toString(b);if(P=D,K(P))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},r.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function K(b){if(b.h!=0)return!1;for(var R=0;R<b.g.length;R++)if(b.g[R]!=0)return!1;return!0}function J(b){return b.h==-1}r.l=function(b){return b=oe(this,b),J(b)?-1:K(b)?0:1};function V(b){for(var R=b.g.length,P=[],k=0;k<R;k++)P[k]=~b.g[k];return new d(P,~b.h).add(C)}r.abs=function(){return J(this)?V(this):this},r.add=function(b){for(var R=Math.max(this.g.length,b.g.length),P=[],k=0,D=0;D<=R;D++){var N=k+(this.i(D)&65535)+(b.i(D)&65535),x=(N>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);k=x>>>16,N&=65535,x&=65535,P[D]=x<<16|N}return new d(P,P[P.length-1]&-2147483648?-1:0)};function oe(b,R){return b.add(V(R))}r.j=function(b){if(K(this)||K(b))return I;if(J(this))return J(b)?V(this).j(V(b)):V(V(this).j(b));if(J(b))return V(this.j(V(b)));if(0>this.l(U)&&0>b.l(U))return v(this.m()*b.m());for(var R=this.g.length+b.g.length,P=[],k=0;k<2*R;k++)P[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<b.g.length;D++){var N=this.i(k)>>>16,x=this.i(k)&65535,ie=b.i(D)>>>16,Ne=b.i(D)&65535;P[2*k+2*D]+=x*Ne,fe(P,2*k+2*D),P[2*k+2*D+1]+=N*Ne,fe(P,2*k+2*D+1),P[2*k+2*D+1]+=x*ie,fe(P,2*k+2*D+1),P[2*k+2*D+2]+=N*ie,fe(P,2*k+2*D+2)}for(k=0;k<R;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=R;k<2*R;k++)P[k]=0;return new d(P,0)};function fe(b,R){for(;(b[R]&65535)!=b[R];)b[R+1]+=b[R]>>>16,b[R]&=65535,R++}function ue(b,R){this.g=b,this.h=R}function ce(b,R){if(K(R))throw Error("division by zero");if(K(b))return new ue(I,I);if(J(b))return R=ce(V(b),R),new ue(V(R.g),V(R.h));if(J(R))return R=ce(b,V(R)),new ue(V(R.g),R.h);if(30<b.g.length){if(J(b)||J(R))throw Error("slowDivide_ only works with positive integers.");for(var P=C,k=R;0>=k.l(b);)P=de(P),k=de(k);var D=pe(P,1),N=pe(k,1);for(k=pe(k,2),P=pe(P,2);!K(k);){var x=N.add(k);0>=x.l(b)&&(D=D.add(P),N=x),k=pe(k,1),P=pe(P,1)}return R=oe(b,D.j(R)),new ue(D,R)}for(D=I;0<=b.l(R);){for(P=Math.max(1,Math.floor(b.m()/R.m())),k=Math.ceil(Math.log(P)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=v(P),x=N.j(R);J(x)||0<x.l(b);)P-=k,N=v(P),x=N.j(R);K(N)&&(N=C),D=D.add(N),b=oe(b,x)}return new ue(D,b)}r.A=function(b){return ce(this,b).h},r.and=function(b){for(var R=Math.max(this.g.length,b.g.length),P=[],k=0;k<R;k++)P[k]=this.i(k)&b.i(k);return new d(P,this.h&b.h)},r.or=function(b){for(var R=Math.max(this.g.length,b.g.length),P=[],k=0;k<R;k++)P[k]=this.i(k)|b.i(k);return new d(P,this.h|b.h)},r.xor=function(b){for(var R=Math.max(this.g.length,b.g.length),P=[],k=0;k<R;k++)P[k]=this.i(k)^b.i(k);return new d(P,this.h^b.h)};function de(b){for(var R=b.g.length+1,P=[],k=0;k<R;k++)P[k]=b.i(k)<<1|b.i(k-1)>>>31;return new d(P,b.h)}function pe(b,R){var P=R>>5;R%=32;for(var k=b.g.length-P,D=[],N=0;N<k;N++)D[N]=0<R?b.i(N+P)>>>R|b.i(N+P+1)<<32-R:b.i(N+P);return new d(D,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,j_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,is=d}).apply(typeof Ty<"u"?Ty:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D_,Ya,V_,ic,sf,O_,L_,M_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var F=u[S];if(!(F in _))break e;_=_[F]}u=u[u.length-1],S=_[u],m=m(S),m!=S&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,S=!1,F={next:function(){if(!S&&_<u.length){var Q=_++;return{value:m(Q,u[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,S),u.apply(m,F)}}return function(){return u.apply(m,arguments)}}function C(u,m,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,C.apply(null,arguments)}function U(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function K(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(S,F,Q){for(var he=Array(arguments.length-2),st=2;st<arguments.length;st++)he[st-2]=arguments[st];return m.prototype[F].apply(S,he)}}function J(u){const m=u.length;if(0<m){const _=Array(m);for(let S=0;S<m;S++)_[S]=u[S];return _}return[]}function V(u,m){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(g(S)){const F=u.length||0,Q=S.length||0;u.length=F+Q;for(let he=0;he<Q;he++)u[F+he]=S[he]}else u.push(S)}}class oe{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function fe(u){return/^[\s\xa0]*$/.test(u)}function ue(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function ce(u){return ce[" "](u),u}ce[" "]=function(){};var de=ue().indexOf("Gecko")!=-1&&!(ue().toLowerCase().indexOf("webkit")!=-1&&ue().indexOf("Edge")==-1)&&!(ue().indexOf("Trident")!=-1||ue().indexOf("MSIE")!=-1)&&ue().indexOf("Edge")==-1;function pe(u,m,_){for(const S in u)m.call(_,u[S],S,u)}function b(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function R(u){const m={};for(const _ in u)m[_]=u[_];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let _,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(_ in S)u[_]=S[_];for(let Q=0;Q<P.length;Q++)_=P[Q],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function D(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function N(u){p.setTimeout(()=>{throw u},0)}function x(){var u=we;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ie{constructor(){this.h=this.g=null}add(m,_){const S=Ne.get();S.set(m,_),this.h?this.h.next=S:this.g=S,this.h=S}}var Ne=new oe(()=>new De,u=>u.reset());class De{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,G=!1,we=new ie,me=()=>{const u=p.Promise.resolve(void 0);Ae=()=>{u.then(L)}};var L=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(_){N(_)}var m=Ne;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}G=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Ve=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function Le(u,m){if(Se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(de){e:{try{ce(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ue[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Le.aa.h.call(this)}}K(Le,Se);var Ue={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var We="closure_listenable_"+(1e6*Math.random()|0),Be=0;function tt(u,m,_,S,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!S,this.ha=F,this.key=++Be,this.da=this.fa=!1}function ct(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pn(u){this.src=u,this.g={},this.h=0}pn.prototype.add=function(u,m,_,S,F){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var he=Ut(u,m,S,F);return-1<he?(m=u[he],_||(m.fa=!1)):(m=new tt(m,this.src,Q,!!S,F),m.fa=_,u.push(m)),m};function Ft(u,m){var _=m.type;if(_ in u.g){var S=u.g[_],F=Array.prototype.indexOf.call(S,m,void 0),Q;(Q=0<=F)&&Array.prototype.splice.call(S,F,1),Q&&(ct(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ut(u,m,_,S){for(var F=0;F<u.length;++F){var Q=u[F];if(!Q.da&&Q.listener==m&&Q.capture==!!_&&Q.ha==S)return F}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),lr={};function mn(u,m,_,S,F){if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)mn(u,m[Q],_,S,F);return null}return _=Kr(_),u&&u[We]?u.K(m,_,v(S)?!!S.capture:!1,F):zt(u,m,_,!1,S,F)}function zt(u,m,_,S,F,Q){if(!m)throw Error("Invalid event type");var he=v(F)?!!F.capture:!!F,st=yn(u);if(st||(u[Ke]=st=new pn(u)),_=st.add(m,_,S,he,Q),_.proxy)return _;if(S=ur(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)Ve||(F=he),F===void 0&&(F=!1),u.addEventListener(m.toString(),S,F);else if(u.attachEvent)u.attachEvent(Bt(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ur(){function u(_){return m.call(u.src,u.listener,_)}const m=Gn;return u}function qn(u,m,_,S,F){if(Array.isArray(m))for(var Q=0;Q<m.length;Q++)qn(u,m[Q],_,S,F);else S=v(S)?!!S.capture:!!S,_=Kr(_),u&&u[We]?(u=u.i,m=String(m).toString(),m in u.g&&(Q=u.g[m],_=Ut(Q,_,S,F),-1<_&&(ct(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete u.g[m],u.h--)))):u&&(u=yn(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ut(m,_,S,F)),(_=-1<u?m[u]:null)&&gn(_))}function gn(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[We])Ft(m.i,u);else{var _=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(_,S,u.capture):m.detachEvent?m.detachEvent(Bt(_),S):m.addListener&&m.removeListener&&m.removeListener(S),(_=yn(m))?(Ft(_,u),_.h==0&&(_.src=null,m[Ke]=null)):ct(u)}}}function Bt(u){return u in lr?lr[u]:lr[u]="on"+u}function Gn(u,m){if(u.da)u=!0;else{m=new Le(m,this);var _=u.listener,S=u.ha||u.src;u.fa&&gn(u),u=_.call(S,m)}return u}function yn(u){return u=u[Ke],u instanceof pn?u:null}var $t="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kr(u){return typeof u=="function"?u:(u[$t]||(u[$t]=function(m){return u.handleEvent(m)}),u[$t])}function Me(){Z.call(this),this.i=new pn(this),this.M=this,this.F=null}K(Me,Z),Me.prototype[We]=!0,Me.prototype.removeEventListener=function(u,m,_,S){qn(this,u,m,_,S)};function mt(u,m){var _,S=u.F;if(S)for(_=[];S;S=S.F)_.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new Se(m,u);else if(m instanceof Se)m.target=m.target||u;else{var F=m;m=new Se(S,u),k(m,F)}if(F=!0,_)for(var Q=_.length-1;0<=Q;Q--){var he=m.g=_[Q];F=Sn(he,S,!0,m)&&F}if(he=m.g=u,F=Sn(he,S,!0,m)&&F,F=Sn(he,S,!1,m)&&F,_)for(Q=0;Q<_.length;Q++)he=m.g=_[Q],F=Sn(he,S,!1,m)&&F}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],S=0;S<_.length;S++)ct(_[S]);delete u.g[m],u.h--}}this.F=null},Me.prototype.K=function(u,m,_,S){return this.i.add(String(u),m,!1,_,S)},Me.prototype.L=function(u,m,_,S){return this.i.add(String(u),m,!0,_,S)};function Sn(u,m,_,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,Q=0;Q<m.length;++Q){var he=m[Q];if(he&&!he.da&&he.capture==_){var st=he.listener,Dt=he.ha||he.src;he.fa&&Ft(u.i,he),F=st.call(Dt,S)!==!1&&F}}return F&&!S.defaultPrevented}function Qr(u,m,_){if(typeof u=="function")_&&(u=C(u,_));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function Wt(u){u.g=Qr(()=>{u.g=null,u.i&&(u.i=!1,Wt(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class In extends Z{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kn(u){Z.call(this),this.h=u,this.g={}}K(Kn,Z);var Yr=[];function Y(u){pe(u.g,function(m,_){this.g.hasOwnProperty(_)&&gn(m)},u),u.g={}}Kn.prototype.N=function(){Kn.aa.N.call(this),Y(this)},Kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=p.JSON.stringify,T=p.JSON.parse,H=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function X(){}X.prototype.h=null;function M(u){return u.h||(u.h=u.i())}function B(){}var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ze(){Se.call(this,"d")}K(ze,Se);function _t(){Se.call(this,"c")}K(_t,Se);var nt={},Xe=null;function Rt(){return Xe=Xe||new Me}nt.La="serverreachability";function Qn(u){Se.call(this,nt.La,u)}K(Qn,Se);function Ht(u){const m=Rt();mt(m,new Qn(m))}nt.STAT_EVENT="statevent";function Jr(u,m){Se.call(this,nt.STAT_EVENT,u),this.stat=m}K(Jr,Se);function at(u){const m=Rt();mt(m,new Jr(m,u))}nt.Ma="timingevent";function Pr(u,m){Se.call(this,nt.Ma,u),this.size=m}K(Pr,Se);function vn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function _n(){this.g=!0}_n.prototype.xa=function(){this.g=!1};function cr(u,m,_,S,F,Q){u.info(function(){if(u.g)if(Q)for(var he="",st=Q.split("&"),Dt=0;Dt<st.length;Dt++){var Ye=st[Dt].split("=");if(1<Ye.length){var qt=Ye[0];Ye=Ye[1];var Pt=qt.split("_");he=2<=Pt.length&&Pt[1]=="type"?he+(qt+"="+Ye+"&"):he+(qt+"=redacted&")}}else he=null;else he=Q;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+m+`
`+_+`
`+he})}function Ti(u,m,_,S,F,Q,he){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+m+`
`+_+`
`+Q+" "+he})}function On(u,m,_,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ar(u,_)+(S?" "+S:"")})}function gt(u,m){u.info(function(){return"TIMEOUT: "+m})}_n.prototype.info=function(){};function Ar(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var S=_[u];if(!(2>S.length)){var F=S[1];if(Array.isArray(F)&&!(1>F.length)){var Q=F[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var he=1;he<F.length;he++)F[he]=""}}}}return ae(_)}catch{return m}}var no={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Al={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dr;function Es(){}K(Es,X),Es.prototype.g=function(){return new XMLHttpRequest},Es.prototype.i=function(){return{}},dr=new Es;function hr(u,m,_,S){this.j=u,this.i=m,this.l=_,this.R=S||1,this.U=new Kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kl}function kl(){this.i=null,this.g="",this.h=!1}var ha={},ro={};function io(u,m,_){u.L=1,u.v=Pi(Mn(m)),u.m=_,u.P=!0,fa(u,null)}function fa(u,m){u.F=Date.now(),lt(u),u.A=Mn(u.v);var _=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),ki(_.i,"t",S),u.C=0,_=u.j.J,u.h=new kl,u.g=Kl(u.j,_?m:null,!u.m),0<u.O&&(u.M=new In(C(u.Y,u,u.g),u.O)),m=u.U,_=u.g,S=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Yr[0]=F.toString()),F=Yr);for(var Q=0;Q<F.length;Q++){var he=mn(_,F[Q],S||m.handleEvent,!1,m.h||m);if(!he)break;m.g[he.key]=he}m=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Ht(),cr(u.i,u.u,u.A,u.l,u.R,u.m)}hr.prototype.ca=function(u){u=u.target;const m=this.M;m&&Rn(u)==3?m.j():this.Y(u)},hr.prototype.Y=function(u){try{if(u==this.g)e:{const Pt=Rn(this.g);var m=this.g.Ba();const Xn=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||_a(this.g)))){this.J||Pt!=4||m==7||(m==8||0>=Xn?Ht(3):Ht(2)),xs(this);var _=this.g.Z();this.X=_;t:if(bl(this)){var S=_a(this.g);u="";var F=S.length,Q=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),Si(this);var he="";break t}this.h.i=new p.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,u+=this.h.i.decode(S[m],{stream:!(Q&&m==F-1)});S.length=0,this.h.g+=u,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=_==200,Ti(this.i,this.u,this.A,this.l,this.R,Pt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var st,Dt=this.g;if((st=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fe(st)){var Ye=st;break t}}Ye=null}if(_=Ye)On(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pa(this,_);else{this.o=!1,this.s=3,at(12),Yn(this),Si(this);break e}}if(this.P){_=!0;let Un;for(;!this.J&&this.C<he.length;)if(Un=nd(this,he),Un==ro){Pt==4&&(this.s=4,at(14),_=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==ha){this.s=4,at(15),On(this.i,this.l,he,"[Invalid Chunk]"),_=!1;break}else On(this.i,this.l,Un,null),pa(this,Un);if(bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||he.length!=0||this.h.h||(this.s=1,at(16),_=!1),this.o=this.o&&_,!_)On(this.i,this.l,he,"[Invalid Chunked Response]"),Yn(this),Si(this);else if(0<he.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Ea(qt),qt.M=!0,at(11))}}else On(this.i,this.l,he,null),pa(this,he);Pt==4&&Yn(this),this.o&&!this.J&&(Pt==4?go(this.j,this):(this.o=!1,lt(this)))}else co(this.g),_==400&&0<he.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Yn(this),Si(this)}}}catch{}finally{}};function bl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function nd(u,m){var _=u.C,S=m.indexOf(`
`,_);return S==-1?ro:(_=Number(m.substring(_,S)),isNaN(_)?ha:(S+=1,S+_>m.length?ro:(m=m.slice(S,S+_),u.C=S+_,m)))}hr.prototype.cancel=function(){this.J=!0,Yn(this)};function lt(u){u.S=Date.now()+u.I,Nl(u,u.I)}function Nl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=vn(C(u.ba,u),m)}function xs(u){u.B&&(p.clearTimeout(u.B),u.B=null)}hr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(gt(this.i,this.A),this.L!=2&&(Ht(),at(17)),Yn(this),this.s=2,Si(this)):Nl(this,this.S-u)};function Si(u){u.j.G==0||u.J||go(u.j,u)}function Yn(u){xs(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Y(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function pa(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||wn(_.h,u))){if(!u.K&&wn(_.h,u)&&_.G==3){try{var S=_.Da.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)mo(_),yr(_);else break e;po(_),at(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=vn(C(_.Za,_),6e3));if(1>=Dl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ni(_,11)}else if((u.K||_.g==u)&&mo(_),!fe(m))for(F=_.Da.g.parse(m),m=0;m<F.length;m++){let Ye=F[m];if(_.T=Ye[0],Ye=Ye[1],_.G==2)if(Ye[0]=="c"){_.K=Ye[1],_.ia=Ye[2];const qt=Ye[3];qt!=null&&(_.la=qt,_.j.info("VER="+_.la));const Pt=Ye[4];Pt!=null&&(_.Aa=Pt,_.j.info("SVER="+_.Aa));const Xn=Ye[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(S=1.5*Xn,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Un=u.g;if(Un){const As=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(As){var Q=S.h;Q.g||As.indexOf("spdy")==-1&&As.indexOf("quic")==-1&&As.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ma(Q,Q.h),Q.h=null))}if(S.D){const vo=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;vo&&(S.ya=vo,ot(S.I,S.D,vo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var he=u;if(S.qa=Gl(S,S.J?S.ia:null,S.W),he.K){Vl(S.h,he);var st=he,Dt=S.L;Dt&&(st.I=Dt),st.B&&(xs(st),lt(st)),S.g=he}else Ps(S);0<_.i.length&&jr(_)}else Ye[0]!="stop"&&Ye[0]!="close"||ni(_,7);else _.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ni(_,7):Xt(_):Ye[0]!="noop"&&_.l&&_.l.ta(Ye),_.v=0)}}Ht(4)}catch{}}var jl=class{constructor(u,m){this.g=u,this.map=m}};function Ts(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ln(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Dl(u){return u.h?1:u.g?u.g.size:0}function wn(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ma(u,m){u.g?u.g.add(m):u.h=m}function Vl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ts.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ol(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return J(u.i)}function so(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,S=0;S<_;S++)m.push(u[S]);return m}m=[],_=0;for(S in u)m[_++]=u[S];return m}function oo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const S in u)m[_++]=S;return m}}}function Ii(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=oo(u),S=so(u),F=S.length,Q=0;Q<F;Q++)m.call(void 0,S[Q],_&&_[Q],u)}var Ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rd(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var S=u[_].indexOf("="),F=null;if(0<=S){var Q=u[_].substring(0,S);F=u[_].substring(S+1)}else Q=u[_];m(Q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Xr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Xr){this.h=u.h,Is(this,u.j),this.o=u.o,this.g=u.g,Ci(this,u.s),this.l=u.l;var m=u.i,_=new kr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ri(this,_),this.m=u.m}else u&&(m=String(u).match(Ss))?(this.h=!1,Is(this,m[1]||"",!0),this.o=Qe(m[2]||""),this.g=Qe(m[3]||"",!0),Ci(this,m[4]),this.l=Qe(m[5]||"",!0),Ri(this,m[6]||"",!0),this.m=Qe(m[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}Xr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Ai(m,ao,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ai(m,ao,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ai(_,_.charAt(0)=="/"?Fl:Ml,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ai(_,ga)),u.join("")};function Mn(u){return new Xr(u)}function Is(u,m,_){u.j=_?Qe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ci(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ri(u,m,_){m instanceof kr?(u.i=m,br(u.i,u.h)):(_||(m=Ai(m,Ul)),u.i=new kr(m,u.h))}function ot(u,m,_){u.i.set(m,_)}function Pi(u){return ot(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Qe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ai(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Ll),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ll(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ao=/[#\/\?@]/g,Ml=/[#\?:]/g,Fl=/[#\?]/g,Ul=/[#\?@]/g,ga=/#/g;function kr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Jt(u){u.g||(u.g=new Map,u.h=0,u.i&&rd(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=kr.prototype,r.add=function(u,m){Jt(this),this.i=null,u=Jn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function fr(u,m){Jt(u),m=Jn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function pr(u,m){return Jt(u),m=Jn(u,m),u.g.has(m)}r.forEach=function(u,m){Jt(this),this.g.forEach(function(_,S){_.forEach(function(F){u.call(m,F,S,this)},this)},this)},r.na=function(){Jt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let S=0;S<m.length;S++){const F=u[S];for(let Q=0;Q<F.length;Q++)_.push(m[S])}return _},r.V=function(u){Jt(this);let m=[];if(typeof u=="string")pr(this,u)&&(m=m.concat(this.g.get(Jn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Jt(this),this.i=null,u=Jn(this,u),pr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function ki(u,m,_){fr(u,m),0<_.length&&(u.i=null,u.g.set(Jn(u,m),J(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var S=m[_];const Q=encodeURIComponent(String(S)),he=this.V(S);for(S=0;S<he.length;S++){var F=Q;he[S]!==""&&(F+="="+encodeURIComponent(String(he[S]))),u.push(F)}}return this.i=u.join("&")};function Jn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function br(u,m){m&&!u.j&&(Jt(u),u.i=null,u.g.forEach(function(_,S){var F=S.toLowerCase();S!=F&&(fr(this,S),ki(this,F,_))},u)),u.j=m}function id(u,m){const _=new _n;if(p.Image){const S=new Image;S.onload=U(Cn,_,"TestLoadImage: loaded",!0,m,S),S.onerror=U(Cn,_,"TestLoadImage: error",!1,m,S),S.onabort=U(Cn,_,"TestLoadImage: abort",!1,m,S),S.ontimeout=U(Cn,_,"TestLoadImage: timeout",!1,m,S),p.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function zl(u,m){const _=new _n,S=new AbortController,F=setTimeout(()=>{S.abort(),Cn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(Q=>{clearTimeout(F),Q.ok?Cn(_,"TestPingServer: ok",!0,m):Cn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),Cn(_,"TestPingServer: error",!1,m)})}function Cn(u,m,_,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(_)}catch{}}function sd(){this.g=new H}function Bl(u,m,_){const S=_||"";try{Ii(u,function(F,Q){let he=F;v(F)&&(he=ae(F)),m.push(S+Q+"="+encodeURIComponent(he))})}catch(F){throw m.push(S+"type="+encodeURIComponent("_badmap")),F}}function Zr(u){this.l=u.Ub||null,this.j=u.eb||!1}K(Zr,X),Zr.prototype.g=function(){return new Cs(this.l,this.j)},Zr.prototype.i=(function(u){return function(){return u}})({});function Cs(u,m){Me.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(Cs,Me),r=Cs.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,gr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?mr(this):gr(this),this.readyState==3&&$l(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,mr(this))},r.Qa=function(u){this.g&&(this.response=u,mr(this))},r.ga=function(){this.g&&mr(this)};function mr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,gr(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function gr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ei(u){let m="";return pe(u,function(_,S){m+=S,m+=":",m+=_,m+=`\r
`}),m}function bi(u,m,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=ei(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):ot(u,m,_))}function yt(u){Me.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(yt,Me);var od=/^https?$/i,ya=["POST","PUT"];r=yt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dr.g(),this.v=this.o?M(this.o):M(dr),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Q){Rs(this,Q);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)_.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())_.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(ya,m,void 0))||S||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,he]of _)this.g.setRequestHeader(Q,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uo(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){Rs(this,Q)}};function Rs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,lo(u),Fn(u)}function lo(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),Fn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fn(this,!0)),yt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?va(this):this.bb())},r.bb=function(){va(this)};function va(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Rn(u)!=4||u.Z()!=2)){if(u.u&&Rn(u)==4)Qr(u.Ea,0,u);else if(mt(u,"readystatechange"),Rn(u)==4){u.h=!1;try{const he=u.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var S;if(S=he===0){var F=String(u.D).match(Ss)[1]||null;!F&&p.self&&p.self.location&&(F=p.self.location.protocol.slice(0,-1)),S=!od.test(F?F.toLowerCase():"")}_=S}if(_)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var Q=2<Rn(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",lo(u)}}finally{Fn(u)}}}}function Fn(u,m){if(u.g){uo(u);const _=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||mt(u,"ready");try{_.onreadystatechange=S}catch{}}}function uo(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Rn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),T(m)}};function _a(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function co(u){const m={};u=(u.g&&2<=Rn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(fe(u[S]))continue;var _=D(u[S]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=m[F]||[];m[F]=Q,Q.push(_)}b(m,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function wa(u){this.Aa=0,this.i=[],this.j=new _n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Nr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Nr("baseRetryDelayMs",5e3,u),this.cb=Nr("retryDelaySeedMs",1e4,u),this.Wa=Nr("forwardChannelMaxRetries",2,u),this.wa=Nr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ts(u&&u.concurrentRequestLimit),this.Da=new sd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=wa.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,S){at(0),this.W=u,this.H=m||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=Gl(this,null,this.W),jr(this)};function Xt(u){if(ho(u),u.G==3){var m=u.U++,_=Mn(u.I);if(ot(_,"SID",u.K),ot(_,"RID",m),ot(_,"TYPE","terminate"),ti(u,_),m=new hr(u,u.j,m),m.L=2,m.v=Pi(Mn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Kl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),lt(m)}ql(u)}function yr(u){u.g&&(Ea(u),u.g.cancel(),u.g=null)}function ho(u){yr(u),u.u&&(p.clearTimeout(u.u),u.u=null),mo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function jr(u){if(!Ln(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ae||me(),G||(Ae(),G=!0),we.add(m,u),u.B=0}}function ad(u,m){return Dl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=vn(C(u.Ga,u,m),Hl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new hr(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=R(Q),k(Q,this.S)):Q=this.S),this.m!==null||this.O||(F.H=Q,Q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Ni(this,F,m),_=Mn(this.I),ot(_,"RID",u),ot(_,"CVER",22),this.D&&ot(_,"X-HTTP-Session-Id",this.D),ti(this,_),Q&&(this.O?m="headers="+encodeURIComponent(String(ei(Q)))+"&"+m:this.m&&bi(_,this.m,Q)),ma(this.h,F),this.Ua&&ot(_,"TYPE","init"),this.P?(ot(_,"$req",m),ot(_,"SID","null"),F.T=!0,io(F,_,null)):io(F,_,m),this.G=2}}else this.G==3&&(u?fo(this,u):this.i.length==0||Ln(this.h)||fo(this))};function fo(u,m){var _;m?_=m.l:_=u.U++;const S=Mn(u.I);ot(S,"SID",u.K),ot(S,"RID",_),ot(S,"AID",u.T),ti(u,S),u.m&&u.o&&bi(S,u.m,u.o),_=new hr(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ni(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ma(u.h,_),io(_,S,m)}function ti(u,m){u.H&&pe(u.H,function(_,S){ot(m,S,_)}),u.l&&Ii({},function(_,S){ot(m,S,_)})}function Ni(u,m,_){_=Math.min(u.i.length,_);var S=u.l?C(u.l.Na,u.l,u):null;e:{var F=u.i;let Q=-1;for(;;){const he=["count="+_];Q==-1?0<_?(Q=F[0].g,he.push("ofs="+Q)):Q=0:he.push("ofs="+Q);let st=!0;for(let Dt=0;Dt<_;Dt++){let Ye=F[Dt].g;const qt=F[Dt].map;if(Ye-=Q,0>Ye)Q=Math.max(0,F[Dt].g-100),st=!1;else try{Bl(qt,he,"req"+Ye+"_")}catch{S&&S(qt)}}if(st){S=he.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,S}function Ps(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ae||me(),G||(Ae(),G=!0),we.add(m,u),u.v=0}}function po(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=vn(C(u.Fa,u),Hl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=vn(C(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),yr(this),Wl(this))};function Ea(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Wl(u){u.g=new hr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Mn(u.qa);ot(m,"RID","rpc"),ot(m,"SID",u.K),ot(m,"AID",u.T),ot(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&ot(m,"TO",u.ja),ot(m,"TYPE","xmlhttp"),ti(u,m),u.m&&u.o&&bi(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Pi(Mn(m)),_.m=null,_.P=!0,fa(_,u)}r.Za=function(){this.C!=null&&(this.C=null,yr(this),po(this),at(19))};function mo(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function go(u,m){var _=null;if(u.g==m){mo(u),Ea(u),u.g=null;var S=2}else if(wn(u.h,m))_=m.D,Vl(u.h,m),S=1;else return;if(u.G!=0){if(m.o)if(S==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var F=u.B;S=Rt(),mt(S,new Pr(S,_)),jr(u)}else Ps(u);else if(F=m.s,F==3||F==0&&0<m.X||!(S==1&&ad(u,m)||S==2&&po(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),F){case 1:ni(u,5);break;case 4:ni(u,10);break;case 3:ni(u,6);break;default:ni(u,2)}}}function Hl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function ni(u,m){if(u.j.info("Error code "+m),m==2){var _=C(u.fb,u),S=u.Xa;const F=!S;S=new Xr(S||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Is(S,"https"),Pi(S),F?id(S.toString(),_):zl(S.toString(),_)}else at(2);u.G=0,u.l&&u.l.sa(m),ql(u),ho(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ql(u){if(u.G=0,u.ka=[],u.l){const m=Ol(u.h);(m.length!=0||u.i.length!=0)&&(V(u.ka,m),V(u.ka,u.i),u.h.i.length=0,J(u.i),u.i.length=0),u.l.ra()}}function Gl(u,m,_){var S=_ instanceof Xr?Mn(_):new Xr(_);if(S.g!="")m&&(S.g=m+"."+S.g),Ci(S,S.s);else{var F=p.location;S=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var Q=new Xr(null);S&&Is(Q,S),m&&(Q.g=m),F&&Ci(Q,F),_&&(Q.l=_),S=Q}return _=u.D,m=u.ya,_&&m&&ot(S,_,m),ot(S,"VER",u.la),ti(u,S),S}function Kl(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new yt(new Zr({eb:_})):new yt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xa(){}r=xa.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function yo(){}yo.prototype.g=function(u,m){return new En(u,m)};function En(u,m){Me.call(this),this.g=new wa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!fe(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!fe(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Dr(this)}K(En,Me),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Xt(this.g)},En.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ae(u),u=_);m.i.push(new jl(m.Ya++,u)),m.G==3&&jr(m)},En.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,En.aa.N.call(this)};function Ql(u){ze.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}K(Ql,ze);function Yl(){_t.call(this),this.status=1}K(Yl,_t);function Dr(u){this.g=u}K(Dr,xa),Dr.prototype.ua=function(){mt(this.g,"a")},Dr.prototype.ta=function(u){mt(this.g,new Ql(u))},Dr.prototype.sa=function(u){mt(this.g,new Yl)},Dr.prototype.ra=function(){mt(this.g,"b")},yo.prototype.createWebChannel=yo.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,M_=function(){return new yo},L_=function(){return Rt()},O_=nt,sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},no.NO_ERROR=0,no.TIMEOUT=8,no.HTTP_ERROR=6,ic=no,Al.COMPLETE="complete",V_=Al,B.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",Me.prototype.listen=Me.prototype.K,Ya=B,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,D_=yt}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Sy="@firebase/firestore",Iy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new Af("@firebase/firestore");function Uo(){return Js.logLevel}function ve(r,...e){if(Js.logLevel<=qe.DEBUG){const t=e.map($f);Js.debug(`Firestore (${aa}): ${r}`,...t)}}function _i(r,...e){if(Js.logLevel<=qe.ERROR){const t=e.map($f);Js.error(`Firestore (${aa}): ${r}`,...t)}}function as(r,...e){if(Js.logLevel<=qe.WARN){const t=e.map($f);Js.warn(`Firestore (${aa}): ${r}`,...t)}}function $f(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,F_(r,i,t)}function F_(r,e,t){let i=`FIRESTORE (${aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw _i(i),new Error(i)}function it(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||F_(e,o,i)}function Fe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends xi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(dn.UNAUTHENTICATED)))}shutdown(){}}class bI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class NI{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new gi,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new gi)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it(typeof i.accessToken=="string",31837,{l:i}),new U_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class jI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new jI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const i=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=OI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function $e(r,e){return r<e?-1:r>e?1:0}function of(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return $e(i,o);{const l=z_(),d=LI(l.encode(Ry(r,t)),l.encode(Ry(e,t)));return d!==0?d:$e(i,o)}}t+=i>65535?2:1}return $e(r.length,e.length)}function Ry(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function LI(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return $e(r[t],e[t]);return $e(r.length,e.length)}function Jo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="__name__";class Fr{constructor(e,t,i){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Fr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Fr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return $e(e.length,t.length)}static compareSegments(e,t){const i=Fr.isNumericId(e),o=Fr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Fr.extractNumericId(e).compare(Fr.extractNumericId(t)):of(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class ft extends Fr{construct(e,t,i){return new ft(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const MI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Fr{construct(e,t,i){return new nn(e,t,i)}static isValidIdentifier(e){return MI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Py}static keyField(){return new nn([Py])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Te(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Te(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Te(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(l(),o++)}if(l(),d)throw new Te(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(t)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(ft.fromString(e))}static fromName(e){return new Ce(ft.fromString(e).popFirst(5))}static empty(){return new Ce(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(r,e,t){if(!t)throw new Te(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function FI(r,e,t,i){if(e===!0&&i===!0)throw new Te(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ay(r){if(!Ce.isDocumentKey(r))throw new Te(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ky(r){if(Ce.isDocumentKey(r))throw new Te(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Hf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":be(12329,{type:typeof r})}function Rr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Te(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hf(r);throw new Te(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Sl(r,e){if(!$_(r))throw new Te(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Te(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=-62135596800,Ny=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ny);return new pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<by)throw new Te(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ny}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sl(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-by;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Nt("string",pt._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new pt(0,0))}static max(){return new Oe(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=-1;function UI(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(i===1e9?new pt(t+1,0):new pt(t,i));return new ls(o,Ce.empty(),e)}function zI(r){return new ls(r.readTime,r.key,dl)}class ls{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ls(Oe.min(),Ce.empty(),dl)}static max(){return new ls(Oe.max(),Ce.empty(),dl)}}function BI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(r.documentKey,e.documentKey),t!==0?t:$e(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==$I)throw r;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,i)=>{t(e)}))}static reject(e){return new ee(((t,i)=>{i(e)}))}static waitFor(e){return new ee(((t,i)=>{let o=0,l=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++l,d&&l===o&&t()}),(g=>i(g)))})),d=!0,l===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next((o=>o?ee.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new ee(((i,o)=>{const l=e.length,d=new Array(l);let p=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next((E=>{d[v]=E,++p,p===l&&i(d)}),(E=>o(E)))}}))}static doWhile(e,t){return new ee(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function HI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ua(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Mc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=-1;function Fc(r){return r==null}function wc(r){return r===0&&1/r==-1/0}function qI(r){return typeof r=="number"&&Number.isInteger(r)&&!wc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="";function GI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=jy(e)),e=KI(r.get(t),e);return jy(e)}function KI(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case W_:t+="";break;default:t+=l}}return t}function jy(r){return r+W_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function _s(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function H_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??tn.RED,this.left=o??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new tn(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vy(this.data.getIterator())}getIteratorFrom(e){return new Vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Mt(this.comparator);return t.data=e,t}}class Vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new Mt(nn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new q_("Invalid base64 string: "+l):l}})(e);return new sn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const QI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function us(r){if(it(!!r,39018),typeof r=="string"){let e=0;const t=QI.exec(r);if(it(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(r.seconds),nanos:It(r.nanos)}}function It(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function cs(r){return typeof r=="string"?sn.fromBase64String(r):sn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="server_timestamp",K_="__type__",Q_="__previous_value__",Y_="__local_write_time__";function Gf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[K_])===null||t===void 0?void 0:t.stringValue)===G_}function Uc(r){const e=r.mapValue.fields[Q_];return Gf(e)?Uc(e):e}function hl(r){const e=us(r.mapValue.fields[Y_].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t,i,o,l,d,p,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=E}}const Ec="(default)";class fl{constructor(e,t){this.projectId=e,this.database=t||Ec}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===Ec}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="__type__",JI="__max__",Gu={mapValue:{}},X_="__vector__",xc="value";function ds(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Gf(r)?4:ZI(r)?9007199254740991:XI(r)?10:11:be(28295,{value:r})}function qr(r,e){if(r===e)return!0;const t=ds(r);if(t!==ds(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return hl(r).isEqual(hl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=us(o.timestampValue),p=us(l.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return cs(o.bytesValue).isEqual(cs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return It(o.geoPointValue.latitude)===It(l.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return It(o.integerValue)===It(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=It(o.doubleValue),p=It(l.doubleValue);return d===p?wc(d)===wc(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return Jo(r.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Dy(d)!==Dy(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!qr(d[g],p[g])))return!1;return!0})(r,e);default:return be(52216,{left:r})}}function pl(r,e){return(r.values||[]).find((t=>qr(t,e)))!==void 0}function Xo(r,e){if(r===e)return 0;const t=ds(r),i=ds(e);if(t!==i)return $e(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const p=It(l.integerValue||l.doubleValue),g=It(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return Oy(r.timestampValue,e.timestampValue);case 4:return Oy(hl(r),hl(e));case 5:return of(r.stringValue,e.stringValue);case 6:return(function(l,d){const p=cs(l),g=cs(d);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const p=l.split("/"),g=d.split("/");for(let v=0;v<p.length&&v<g.length;v++){const E=$e(p[v],g[v]);if(E!==0)return E}return $e(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const p=$e(It(l.latitude),It(d.latitude));return p!==0?p:$e(It(l.longitude),It(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ly(r.arrayValue,e.arrayValue);case 10:return(function(l,d){var p,g,v,E;const I=l.fields||{},C=d.fields||{},U=(p=I[xc])===null||p===void 0?void 0:p.arrayValue,K=(g=C[xc])===null||g===void 0?void 0:g.arrayValue,J=$e(((v=U==null?void 0:U.values)===null||v===void 0?void 0:v.length)||0,((E=K==null?void 0:K.values)===null||E===void 0?void 0:E.length)||0);return J!==0?J:Ly(U,K)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Gu.mapValue&&d===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(d===Gu.mapValue)return-1;const p=l.fields||{},g=Object.keys(p),v=d.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let I=0;I<g.length&&I<E.length;++I){const C=of(g[I],E[I]);if(C!==0)return C;const U=Xo(p[g[I]],v[E[I]]);if(U!==0)return U}return $e(g.length,E.length)})(r.mapValue,e.mapValue);default:throw be(23264,{le:t})}}function Oy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return $e(r,e);const t=us(r),i=us(e),o=$e(t.seconds,i.seconds);return o!==0?o:$e(t.nanos,i.nanos)}function Ly(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Xo(t[o],i[o]);if(l)return l}return $e(t.length,i.length)}function Zo(r){return af(r)}function af(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=us(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return cs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ce.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=af(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of i)l?l=!1:o+=",",o+=`${d}:${af(t.fields[d])}`;return o+"}"})(r.mapValue):be(61005,{value:r})}function sc(r){switch(ds(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uc(r);return e?16+sc(e):16;case 5:return 2*r.stringValue.length;case 6:return cs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+sc(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return _s(i.fields,((l,d)=>{o+=l.length+sc(d)})),o})(r.mapValue);default:throw be(13486,{value:r})}}function lf(r){return!!r&&"integerValue"in r}function Kf(r){return!!r&&"arrayValue"in r}function My(r){return!!r&&"nullValue"in r}function Fy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function oc(r){return!!r&&"mapValue"in r}function XI(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[J_])===null||t===void 0?void 0:t.stringValue)===X_}function nl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return _s(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=nl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function ZI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===JI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!oc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(t)}setAll(e){let t=nn.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=p.popLast()}d?i[p.lastSegment()]=nl(d):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());oc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];oc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){_s(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Vn(nl(this.value))}}function Z_(r){const e=[];return _s(r.fields,((t,i)=>{const o=new nn([t]);if(oc(i)){const l=Z_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,i,o,l,d,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=d,this.documentState=p}static newInvalidDocument(e){return new hn(e,0,Oe.min(),Oe.min(),Oe.min(),Vn.empty(),0)}static newFoundDocument(e,t,i,o){return new hn(e,1,t,Oe.min(),i,o,0)}static newNoDocument(e,t){return new hn(e,2,t,Oe.min(),Oe.min(),Vn.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,Oe.min(),Oe.min(),Vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.position=e,this.inclusive=t}}function Uy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?i=Ce.comparator(Ce.fromName(d.referenceValue),t.key):i=Xo(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function zy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!qr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t="asc"){this.field=e,this.dir=t}}function eC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{}class Lt extends e0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new nC(e,t,i):t==="array-contains"?new sC(e,i):t==="in"?new oC(e,i):t==="not-in"?new aC(e,i):t==="array-contains-any"?new lC(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new rC(e,i):new iC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xo(t,this.value)):t!==null&&ds(this.value)===ds(t)&&this.matchesComparison(Xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gr extends e0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Gr(e,t)}matches(e){return t0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function t0(r){return r.op==="and"}function n0(r){return tC(r)&&t0(r)}function tC(r){for(const e of r.filters)if(e instanceof Gr)return!1;return!0}function uf(r){if(r instanceof Lt)return r.field.canonicalString()+r.op.toString()+Zo(r.value);if(n0(r))return r.filters.map((e=>uf(e))).join(",");{const e=r.filters.map((t=>uf(t))).join(",");return`${r.op}(${e})`}}function r0(r,e){return r instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&qr(i.value,o.value)})(r,e):r instanceof Gr?(function(i,o){return o instanceof Gr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,d,p)=>l&&r0(d,o.filters[p])),!0):!1})(r,e):void be(19439)}function i0(r){return r instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`})(r):r instanceof Gr?(function(t){return t.op.toString()+" {"+t.getFilters().map(i0).join(" ,")+"}"})(r):"Filter"}class nC extends Lt{constructor(e,t,i){super(e,t,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class rC extends Lt{constructor(e,t){super(e,"in",t),this.keys=s0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iC extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=s0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function s0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ce.fromName(i.referenceValue)))}class sC extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kf(t)&&pl(t.arrayValue,this.value)}}class oC extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pl(this.value.arrayValue,t)}}class aC extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pl(this.value.arrayValue,t)}}class lC extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>pl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t=null,i=[],o=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=d,this.endAt=p,this.Pe=null}}function By(r,e=null,t=[],i=[],o=null,l=null,d=null){return new uC(r,e,t,i,o,l,d)}function Qf(r){const e=Fe(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>uf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Fc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Zo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Zo(i))).join(",")),e.Pe=t}return e.Pe}function Yf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!eC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!r0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!zy(r.startAt,e.startAt)&&zy(r.endAt,e.endAt)}function cf(r){return Ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t=null,i=[],o=[],l=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function cC(r,e,t,i,o,l,d,p){return new zc(r,e,t,i,o,l,d,p)}function Jf(r){return new zc(r)}function $y(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function dC(r){return r.collectionGroup!==null}function rl(r){const e=Fe(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Mt(nn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Sc(l,i))})),t.has(nn.keyField().canonicalString())||e.Te.push(new Sc(nn.keyField(),i))}return e.Te}function Br(r){const e=Fe(r);return e.Ie||(e.Ie=hC(e,rl(r))),e.Ie}function hC(r,e){if(r.limitType==="F")return By(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Sc(o.field,l)}));const t=r.endAt?new Tc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Tc(r.startAt.position,r.startAt.inclusive):null;return By(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function df(r,e,t){return new zc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Bc(r,e){return Yf(Br(r),Br(e))&&r.limitType===e.limitType}function o0(r){return`${Qf(Br(r))}|lt:${r.limitType}`}function zo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>i0(o))).join(", ")}]`),Fc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Zo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Zo(o))).join(",")),`Target(${i})`})(Br(r))}; limitType=${r.limitType})`}function $c(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ce.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of rl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,g){const v=Uy(d,p,g);return d.inclusive?v<=0:v<0})(i.startAt,rl(i),o)||i.endAt&&!(function(d,p,g){const v=Uy(d,p,g);return d.inclusive?v>=0:v>0})(i.endAt,rl(i),o))})(r,e)}function fC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function a0(r){return(e,t)=>{let i=!1;for(const o of rl(r)){const l=pC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function pC(r,e,t){const i=r.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,d,p){const g=d.data.field(l),v=p.data.field(l);return g!==null&&v!==null?Xo(g,v):be(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return be(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return H_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new xt(Ce.comparator);function wi(){return mC}const l0=new xt(Ce.comparator);function Ja(...r){let e=l0;for(const t of r)e=e.insert(t.key,t);return e}function u0(r){let e=l0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ws(){return il()}function c0(){return il()}function il(){return new Zs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const gC=new xt(Ce.comparator),yC=new Mt(Ce.comparator);function Ge(...r){let e=yC;for(const t of r)e=e.add(t);return e}const vC=new Mt($e);function _C(){return vC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function d0(r){return{integerValue:""+r}}function wC(r,e){return qI(e)?d0(e):Xf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this._=void 0}}function EC(r,e,t){return r instanceof Ic?(function(o,l){const d={fields:{[K_]:{stringValue:G_},[Y_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Gf(l)&&(l=Uc(l)),l&&(d.fields[Q_]=l),{mapValue:d}})(t,e):r instanceof ml?f0(r,e):r instanceof gl?p0(r,e):(function(o,l){const d=h0(o,l),p=Wy(d)+Wy(o.Ee);return lf(d)&&lf(o.Ee)?d0(p):Xf(o.serializer,p)})(r,e)}function xC(r,e,t){return r instanceof ml?f0(r,e):r instanceof gl?p0(r,e):t}function h0(r,e){return r instanceof Cc?(function(i){return lf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Ic extends Wc{}class ml extends Wc{constructor(e){super(),this.elements=e}}function f0(r,e){const t=m0(e);for(const i of r.elements)t.some((o=>qr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class gl extends Wc{constructor(e){super(),this.elements=e}}function p0(r,e){let t=m0(e);for(const i of r.elements)t=t.filter((o=>!qr(o,i)));return{arrayValue:{values:t}}}class Cc extends Wc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Wy(r){return It(r.integerValue||r.doubleValue)}function m0(r){return Kf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function TC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof ml&&o instanceof ml||i instanceof gl&&o instanceof gl?Jo(i.elements,o.elements,qr):i instanceof Cc&&o instanceof Cc?qr(i.Ee,o.Ee):i instanceof Ic&&o instanceof Ic})(r.transform,e.transform)}class SC{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ac(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Hc{}function g0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Zf(r.key,or.none()):new Il(r.key,r.data,or.none());{const t=r.data,i=Vn.empty();let o=new Mt(nn.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),o=o.add(l)}return new ws(r.key,i,new Hn(o.toArray()),or.none())}}function IC(r,e,t){r instanceof Il?(function(o,l,d){const p=o.value.clone(),g=qy(o.fieldTransforms,l,d.transformResults);p.setAll(g),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,t):r instanceof ws?(function(o,l,d){if(!ac(o.precondition,l))return void l.convertToUnknownDocument(d.version);const p=qy(o.fieldTransforms,l,d.transformResults),g=l.data;g.setAll(y0(o)),g.setAll(p),l.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function sl(r,e,t,i){return r instanceof Il?(function(l,d,p,g){if(!ac(l.precondition,d))return p;const v=l.value.clone(),E=Gy(l.fieldTransforms,g,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof ws?(function(l,d,p,g){if(!ac(l.precondition,d))return p;const v=Gy(l.fieldTransforms,g,d),E=d.data;return E.setAll(y0(l)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(r,e,t,i):(function(l,d,p){return ac(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,t)}function CC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=h0(i.transform,o||null);l!=null&&(t===null&&(t=Vn.empty()),t.set(i.field,l))}return t||null}function Hy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Jo(i,o,((l,d)=>TC(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Il extends Hc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ws extends Hc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function y0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function qy(r,e,t){const i=new Map;it(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,p=e.data.field(l.field);i.set(l.field,xC(d,p,t[o]))}return i}function Gy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);i.set(o.field,EC(l,d,e))}return i}class Zf extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RC extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&IC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=sl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=sl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=c0();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let p=this.applyToLocalView(d,l.mutatedFields);p=t.has(o.key)?null:p;const g=g0(d,p);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,((t,i)=>Hy(t,i)))&&Jo(this.baseMutations,e.baseMutations,((t,i)=>Hy(t,i)))}}class ep{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){it(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return gC})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,i[d].version);return new ep(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Je;function bC(r){switch(r){case te.OK:return be(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return be(15467,{code:r})}}function v0(r){if(r===void 0)return _i("GRPC error has no .code"),te.UNKNOWN;switch(r){case kt.OK:return te.OK;case kt.CANCELLED:return te.CANCELLED;case kt.UNKNOWN:return te.UNKNOWN;case kt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case kt.INTERNAL:return te.INTERNAL;case kt.UNAVAILABLE:return te.UNAVAILABLE;case kt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case kt.NOT_FOUND:return te.NOT_FOUND;case kt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case kt.ABORTED:return te.ABORTED;case kt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case kt.DATA_LOSS:return te.DATA_LOSS;default:return be(39323,{code:r})}}(Je=kt||(kt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new is([4294967295,4294967295],0);function Ky(r){const e=z_().encode(r),t=new j_;return t.update(e),new Uint8Array(t.digest())}function Qy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new is([t,i],0),new is([o,l],0)]}class tp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Xa(`Invalid padding: ${t}`);if(i<0)throw new Xa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=is.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(is.fromNumber(i)));return o.compare(NC)===1&&(o=new is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ky(e),[i,o]=Qy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new tp(l,o,t);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.fe===0)return;const t=Ky(e),[i,o]=Qy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new qc(Oe.min(),o,new xt($e),wi(),Ge())}}class Cl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Cl(i,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class _0{constructor(e,t){this.targetId=e,this.De=t}}class w0{constructor(e,t,i=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Yy{constructor(){this.ve=0,this.Ce=Jy(),this.Fe=sn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),t=Ge(),i=Ge();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:be(38017,{changeType:l})}})),new Cl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Jy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class jC{constructor(e){this.We=e,this.Ge=new Map,this.ze=wi(),this.je=Ku(),this.Je=Ku(),this.He=new xt($e)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(cf(l))if(i===0){const d=new Ce(l.path);this.Xe(t,d,hn.newNoDocument(d,Oe.min()))}else it(i===1,20013,{expectedCount:i});else{const d=this.ot(t);if(d!==i){const p=this._t(e),g=p?this.ut(p,e,d):1;if(g!==0){this.rt(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let d,p;try{d=cs(i).toUint8Array()}catch(g){if(g instanceof q_)return as("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new tp(d,o,l)}catch(g){return as(g instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.fe===0?null:p}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const d=this.We.lt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,d)=>{const p=this.st(d);if(p){if(l.current&&cf(p.target)){const g=new Ce(p.target.path);this.Tt(g).has(d)||this.It(d,g)||this.Xe(d,g,hn.newNoDocument(g,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}}));let i=Ge();this.Je.forEach(((l,d)=>{let p=!0;d.forEachWhile((g=>{const v=this.st(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ze.forEach(((l,d)=>d.setReadTime(e)));const o=new qc(e,t,this.He,this.ze,i);return this.ze=wi(),this.je=Ku(),this.Je=Ku(),this.He=new xt($e),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Yy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Mt($e),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Mt($e),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yy),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ku(){return new xt(Ce.comparator)}function Jy(){return new xt(Ce.comparator)}const DC={asc:"ASCENDING",desc:"DESCENDING"},VC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OC={and:"AND",or:"OR"};class LC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hf(r,e){return r.useProto3Json||Fc(e)?e:{value:e}}function Rc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function MC(r,e){return Rc(r,e.toTimestamp())}function $r(r){return it(!!r,49232),Oe.fromTimestamp((function(t){const i=us(t);return new pt(i.seconds,i.nanos)})(r))}function np(r,e){return ff(r,e).canonicalString()}function ff(r,e){const t=(function(o){return new ft(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function x0(r){const e=ft.fromString(r);return it(R0(e),10190,{key:e.toString()}),e}function pf(r,e){return np(r.databaseId,e.path)}function Uh(r,e){const t=x0(e);if(t.get(1)!==r.databaseId.projectId)throw new Te(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Te(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ce(S0(t))}function T0(r,e){return np(r.databaseId,e)}function FC(r){const e=x0(r);return e.length===4?ft.emptyPath():S0(e)}function mf(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function S0(r){return it(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Xy(r,e,t){return{name:pf(r,e),fields:t.value.mapValue.fields}}function UC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:be(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(it(E===void 0||typeof E=="string",58123),sn.fromBase64String(E||"")):(it(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),sn.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const E=v.code===void 0?te.UNKNOWN:v0(v.code);return new Te(E,v.message||"")})(d);t=new w0(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Uh(r,i.document.name),l=$r(i.document.updateTime),d=i.document.createTime?$r(i.document.createTime):Oe.min(),p=new Vn({mapValue:{fields:i.document.fields}}),g=hn.newFoundDocument(o,l,d,p),v=i.targetIds||[],E=i.removedTargetIds||[];t=new lc(v,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Uh(r,i.document),l=i.readTime?$r(i.readTime):Oe.min(),d=hn.newNoDocument(o,l),p=i.removedTargetIds||[];t=new lc([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Uh(r,i.document),l=i.removedTargetIds||[];t=new lc([],l,o,null)}else{if(!("filter"in e))return be(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,d=new kC(o,l),p=i.targetId;t=new _0(p,d)}}return t}function zC(r,e){let t;if(e instanceof Il)t={update:Xy(r,e.key,e.value)};else if(e instanceof Zf)t={delete:pf(r,e.key)};else if(e instanceof ws)t={update:Xy(r,e.key,e.data),updateMask:YC(e.fieldMask)};else{if(!(e instanceof RC))return be(16599,{Rt:e.type});t={verify:pf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const p=d.transform;if(p instanceof Ic)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ml)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof gl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Cc)return{fieldPath:d.field.canonicalString(),increment:p.Ee};throw be(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:MC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(r,e.precondition)),t}function BC(r,e){return r&&r.length>0?(it(e!==void 0,14353),r.map((t=>(function(o,l){let d=o.updateTime?$r(o.updateTime):$r(l);return d.isEqual(Oe.min())&&(d=$r(l)),new SC(d,o.transformResults||[])})(t,e)))):[]}function $C(r,e){return{documents:[T0(r,e.path)]}}function WC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=T0(r,o);const l=(function(v){if(v.length!==0)return C0(Gr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(v){if(v.length!==0)return v.map((E=>(function(C){return{field:Bo(C.field),direction:GC(C.dir)}})(E)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=hf(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function HC(r){let e=FC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){it(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(I){const C=I0(I);return C instanceof Gr&&n0(C)?C.getFilters():[C]})(t.where));let d=[];t.orderBy&&(d=(function(I){return I.map((C=>(function(K){return new Sc($o(K.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(C)))})(t.orderBy));let p=null;t.limit&&(p=(function(I){let C;return C=typeof I=="object"?I.value:I,Fc(C)?null:C})(t.limit));let g=null;t.startAt&&(g=(function(I){const C=!!I.before,U=I.values||[];return new Tc(U,C)})(t.startAt));let v=null;return t.endAt&&(v=(function(I){const C=!I.before,U=I.values||[];return new Tc(U,C)})(t.endAt)),cC(e,o,d,l,p,"F",g,v)}function qC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function I0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=$o(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=$o(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=$o(t.unaryFilter.field);return Lt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=$o(t.unaryFilter.field);return Lt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Lt.create($o(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Gr.create(t.compositeFilter.filters.map((i=>I0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(r):be(30097,{filter:r})}function GC(r){return DC[r]}function KC(r){return VC[r]}function QC(r){return OC[r]}function Bo(r){return{fieldPath:r.canonicalString()}}function $o(r){return nn.fromServerFormat(r.fieldPath)}function C0(r){return r instanceof Lt?(function(t){if(t.op==="=="){if(Fy(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(My(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fy(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(My(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:KC(t.op),value:t.value}}})(r):r instanceof Gr?(function(t){const i=t.getFilters().map((o=>C0(o)));return i.length===1?i[0]:{compositeFilter:{op:QC(t.op),filters:i}}})(r):be(54877,{filter:r})}function YC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function R0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t,i,o,l=Oe.min(),d=Oe.min(),p=sn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.gt=e}}function XC(r){const e=HC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?df(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Dn=new eR}addToCollectionParentIndex(e,t){return this.Dn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ls.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class eR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Mt(ft.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Mt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P0=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(P0,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ea(0)}static ur(){return new ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LruGarbageCollector",tR=1048576;function tv([r,e],[t,i]){const o=$e(r,t);return o===0?$e(e,i):o}class nR{constructor(e){this.Tr=e,this.buffer=new Mt(tv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();tv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ve(ev,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ua(t)?ve(ev,"Ignoring IndexedDB error during garbage collection: ",t):await la(t)}await this.Rr(3e5)}))}}class iR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Mc.ue);const i=new nR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(Zy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,d,p,g,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,d=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,p=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(v=Date.now(),Uo()<=qe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${l} targets in `+(g-p)+`ms
	Removed ${I} documents in `+(v-g)+`ms
Total Duration: ${v-E}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function sR(r,e){return new iR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.changes=new Zs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&sl(i.mutation,o,Hn.empty(),pt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ge()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ge()){const o=Ws();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let d=Ja();return l.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=Ws();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ge())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,i,o){let l=wi();const d=il(),p=(function(){return il()})();return t.forEach(((g,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof ws)?l=l.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),sl(E.mutation,v,E.mutation.getFieldMask(),pt.now())):d.set(v.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((v,E)=>d.set(v,E))),t.forEach(((v,E)=>{var I;return p.set(v,new aR(E,(I=d.get(v))!==null&&I!==void 0?I:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=il();let o=new xt(((d,p)=>d-p)),l=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let E=i.get(g)||Hn.empty();E=p.applyToLocalView(v,E),i.set(g,E);const I=(o.get(p.batchId)||Ge()).add(g);o=o.insert(p.batchId,I)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),v=g.key,E=g.value,I=c0();E.forEach((C=>{if(!l.has(C)){const U=g0(t.get(C),i.get(C));U!==null&&I.set(C,U),l=l.add(C)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,I))}return ee.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return Ce.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ee.resolve(Ws());let p=dl,g=l;return d.next((v=>ee.forEach(v,((E,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),l.get(E)?ee.resolve():this.remoteDocumentCache.getEntry(e,E).next((C=>{g=g.insert(E,C)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,g,v,Ge()))).next((E=>({batchId:p,changes:u0(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((i=>{let o=Ja();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let d=Ja();return this.indexManager.getCollectionParents(e,l).next((p=>ee.forEach(p,(g=>{const v=(function(I,C){return new zc(C,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((I,C)=>{d=d.insert(I,C)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((d=>{l.forEach(((g,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,hn.newInvalidDocument(E)))}));let p=Ja();return d.forEach(((g,v)=>{const E=l.get(g);E!==void 0&&sl(E.mutation,v,Hn.empty(),pt.now()),$c(t,v)&&(p=p.insert(g,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:$r(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:XC(o.bundledQuery),readTime:$r(o.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.overlays=new xt(Ce.comparator),this.kr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ws();return ee.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const o=Ws(),l=t.length+1,d=new Ce(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new xt(((v,E)=>v-E));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=Ws(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const p=Ws(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,E)=>p.set(v,E))),!(p.size()>=o)););return ee.resolve(p)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new AC(t,i));let l=this.kr.get(t);l===void 0&&(l=Ge(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this.qr=new Mt(Yt.Qr),this.$r=new Mt(Yt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Yt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Yt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Ce(new ft([])),i=new Yt(t,e),o=new Yt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(d=>{this.Wr(d),l.push(d.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ce(new ft([])),i=new Yt(t,e),o=new Yt(t,e+1);let l=Ge();return this.$r.forEachInRange([i,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Yt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Yt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ce.comparator(e.key,t.key)||$e(e.Hr,t.Hr)}static Ur(e,t){return $e(e.Hr,t.Hr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Mt(Yt.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new PC(l,t,i,o);this.mutationQueue.push(d);for(const p of o)this.Yr=this.Yr.add(new Yt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?qf:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Yt(t,0),o=new Yt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(d=>{const p=this.Zr(d.Hr);l.push(p)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Mt($e);return t.forEach((o=>{const l=new Yt(o,0),d=new Yt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],(p=>{i=i.add(p.Hr)}))})),ee.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ce.isDocumentKey(l)||(l=l.child(""));const d=new Yt(new Ce(l),0);let p=new Mt($e);return this.Yr.forEachWhile((g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(g.Hr)),!0)}),d),ee.resolve(this.ei(p))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){it(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ee.forEach(t.mutations,(o=>{const l=new Yt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Yt(t,0),o=this.Yr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.ni=e,this.docs=(function(){return new xt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let i=wi();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():hn.newInvalidDocument(o))})),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=wi();const d=t.path,p=new Ce(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||BI(zI(E),i)<=0||(o.has(E.key)||$c(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,i,o){be(9500)}ri(e,t){return ee.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new pR(this)}getSize(e){return ee.resolve(this.size)}}class pR extends oR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),ee.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.persistence=e,this.ii=new Zs((t=>Qf(t)),Yf),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.si=0,this.oi=new rp,this.targetCount=0,this._i=ea.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ee.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ea(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.hr(t),ee.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((d,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ee.waitFor(l).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Mc(0),this.ci=!1,this.ci=!0,this.li=new dR,this.referenceDelegate=e(this),this.hi=new mR(this),this.indexManager=new ZC,this.remoteDocumentCache=(function(o){return new fR(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new JC(t),this.Ti=new uR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new hR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const o=new gR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ee.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class gR extends WI{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Ai=new rp,this.Ri=null}static Vi(e){return new ip(e)}get mi(){if(this.Ri)return this.Ri;throw be(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,(i=>{const o=Ce.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Oe.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ee.or([()=>ee.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Pc{constructor(e,t){this.persistence=e,this.gi=new Zs((i=>GI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=sR(this,t)}static Vi(e,t){return new Pc(e,t)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return ee.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?ee.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(d=>this.Sr(e,d,t).next((p=>{p||(i++,l.removeEntry(d,Oe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sc(e.data.value)),t}Sr(e,t,i){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return ee.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Ge(),o=Ge();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new sp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Jx()?8:HI(fn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new yR;return this.ws(e,t,d).next((p=>{if(l.result=p,this.Rs)return this.Ss(e,t,d,p.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Uo()<=qe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Uo()<=qe.DEBUG&&ve("QueryEngine","Query:",zo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Uo()<=qe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):ee.resolve())}ps(e,t){if($y(t))return ee.resolve(null);let i=Br(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=df(t,null,"F"),i=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=Ge(...l);return this.gs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const v=this.bs(t,p);return this.Ds(t,v,d,g.readTime)?this.ps(e,df(t,null,"F")):this.vs(e,v,t,g)}))))})))))}ys(e,t,i,o){return $y(t)||o.isEqual(Oe.min())?ee.resolve(null):this.gs.getDocuments(e,i).next((l=>{const d=this.bs(t,l);return this.Ds(t,d,i,o)?ee.resolve(null):(Uo()<=qe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zo(t)),this.vs(e,d,t,UI(o,dl)).next((p=>p)))}))}bs(e,t){let i=new Mt(a0(e));return t.forEach(((o,l)=>{$c(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Uo()<=qe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",zo(t)),this.gs.getDocumentsMatchingQuery(e,t,ls.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="LocalStore",_R=3e8;class wR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new xt($e),this.Ms=new Zs((l=>Qf(l)),Yf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function ER(r,e,t,i){return new wR(r,e,t,i)}async function k0(r,e){const t=Fe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],p=[];let g=Ge();for(const v of o){d.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of l){p.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next((v=>({Bs:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function xR(r,e){const t=Fe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(p,g,v,E){const I=v.batch,C=I.keys();let U=ee.resolve();return C.forEach((K=>{U=U.next((()=>E.getEntry(g,K))).next((J=>{const V=v.docVersions.get(K);it(V!==null,48541),J.version.compareTo(V)<0&&(I.applyToRemoteDocument(J,v),J.isValidDocument()&&(J.setReadTime(v.commitVersion),E.addEntry(J)))}))})),U.next((()=>p.mutationQueue.removeMutationBatch(g,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Ge();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(g=g.add(p.batch.mutations[v].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function b0(r){const e=Fe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function TR(r,e){const t=Fe(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const p=[];e.targetChanges.forEach(((E,I)=>{const C=o.get(I);if(!C)return;p.push(t.hi.removeMatchingKeys(l,E.removedDocuments,I).next((()=>t.hi.addMatchingKeys(l,E.addedDocuments,I))));let U=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?U=U.withResumeToken(sn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):E.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(E.resumeToken,i)),o=o.insert(I,U),(function(J,V,oe){return J.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=_R?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(C,U,E)&&p.push(t.hi.updateTargetData(l,U))}));let g=wi(),v=Ge();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),p.push(SR(l,d,e.documentUpdates).next((E=>{g=E.Ls,v=E.ks}))),!i.isEqual(Oe.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next((I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(E)}return ee.waitFor(p).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,v))).next((()=>g))})).then((l=>(t.Fs=o,l)))}function SR(r,e,t){let i=Ge(),o=Ge();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let d=wi();return t.forEach(((p,g)=>{const v=l.get(p);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):ve(op,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",g.version)})),{Ls:d,ks:o}}))}function IR(r,e){const t=Fe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=qf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function CR(r,e){const t=Fe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,ee.resolve(o)):t.hi.allocateTargetId(i).next((d=>(o=new Xi(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function gf(r,e,t){const i=Fe(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ua(d))throw d;ve(op,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function nv(r,e,t){const i=Fe(r);let o=Oe.min(),l=Ge();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,v,E){const I=Fe(g),C=I.Ms.get(E);return C!==void 0?ee.resolve(I.Fs.get(C)):I.hi.getTargetData(v,E)})(i,d,Br(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{l=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,t?o:Oe.min(),t?l:Ge()))).next((p=>(RR(i,fC(e),p),{documents:p,qs:l})))))}function RR(r,e,t){let i=r.xs.get(e)||Oe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class rv{constructor(){this.activeTargetIds=_C()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PR{constructor(){this.Fo=new rv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new rv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="ConnectivityMonitor";class sv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ve(iv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ve(iv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function yf(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="RestConnection",kR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Ec?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const d=yf(),p=this.Go(e,t.toUriEncodedString());ve(zh,`Sending RPC '${e}' ${d}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,l);const{host:v}=new URL(p),E=ia(v);return this.jo(e,p,g,i,E).then((I=>(ve(zh,`Received RPC '${e}' ${d}: `,I),I)),(I=>{throw as(zh,`RPC '${e}' ${d} failed with error: `,I,"url: ",p,"request:",i),I}))}Jo(e,t,i,o,l,d){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+aa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=kR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class jR extends bR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const d=yf();return new Promise(((p,g)=>{const v=new D_;v.setWithCredentials(!0),v.listenOnce(V_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case ic.NO_ERROR:const I=v.getResponseJson();ve(cn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),p(I);break;case ic.TIMEOUT:ve(cn,`RPC '${e}' ${d} timed out`),g(new Te(te.DEADLINE_EXCEEDED,"Request time out"));break;case ic.HTTP_ERROR:const C=v.getStatus();if(ve(cn,`RPC '${e}' ${d} failed with status:`,C,"response text:",v.getResponseText()),C>0){let U=v.getResponseJson();Array.isArray(U)&&(U=U[0]);const K=U==null?void 0:U.error;if(K&&K.status&&K.message){const J=(function(oe){const fe=oe.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(fe)>=0?fe:te.UNKNOWN})(K.status);g(new Te(J,K.message))}else g(new Te(te.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new Te(te.UNAVAILABLE,"Connection failed."));break;default:be(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{ve(cn,`RPC '${e}' ${d} completed.`)}}));const E=JSON.stringify(o);ve(cn,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",E,i,15)}))}P_(e,t,i){const o=yf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=M_(),p=L_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=l.join("");ve(cn,`Creating RPC '${e}' stream ${o}: ${E}`,g);const I=d.createWebChannel(E,g);this.T_(I);let C=!1,U=!1;const K=new NR({Ho:V=>{U?ve(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(C||(ve(cn,`Opening RPC '${e}' stream ${o} transport.`),I.open(),C=!0),ve(cn,`RPC '${e}' stream ${o} sending:`,V),I.send(V))},Yo:()=>I.close()}),J=(V,oe,fe)=>{V.listen(oe,(ue=>{try{fe(ue)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return J(I,Ya.EventType.OPEN,(()=>{U||(ve(cn,`RPC '${e}' stream ${o} transport opened.`),K.s_())})),J(I,Ya.EventType.CLOSE,(()=>{U||(U=!0,ve(cn,`RPC '${e}' stream ${o} transport closed`),K.__(),this.I_(I))})),J(I,Ya.EventType.ERROR,(V=>{U||(U=!0,as(cn,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),K.__(new Te(te.UNAVAILABLE,"The operation could not be completed")))})),J(I,Ya.EventType.MESSAGE,(V=>{var oe;if(!U){const fe=V.data[0];it(!!fe,16349);const ue=fe,ce=(ue==null?void 0:ue.error)||((oe=ue[0])===null||oe===void 0?void 0:oe.error);if(ce){ve(cn,`RPC '${e}' stream ${o} received error:`,ce);const de=ce.status;let pe=(function(P){const k=kt[P];if(k!==void 0)return v0(k)})(de),b=ce.message;pe===void 0&&(pe=te.INTERNAL,b="Unknown error status: "+de+" with message "+ce.message),U=!0,K.__(new Te(pe,b)),I.close()}else ve(cn,`RPC '${e}' stream ${o} received:`,fe),K.a_(fe)}})),J(p,O_.STAT_EVENT,(V=>{V.stat===sf.PROXY?ve(cn,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===sf.NOPROXY&&ve(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{K.o_()}),0),K}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(r){return new LC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="PersistentStream";class j0{constructor(e,t,i,o,l,d,p,g){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new N0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(_i(t.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new Te(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ve(ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ve(ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DR extends j0{constructor(e,t,i,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=UC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Oe.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Oe.min():d.readTime?$r(d.readTime):Oe.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=mf(this.serializer),t.addTarget=(function(l,d){let p;const g=d.target;if(p=cf(g)?{documents:$C(l,g)}:{query:WC(l,g).Vt},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=E0(l,d.resumeToken);const v=hf(l,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(Oe.min())>0){p.readTime=Rc(l,d.snapshotVersion.toTimestamp());const v=hf(l,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=qC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=mf(this.serializer),t.removeTarget=e,this.k_(t)}}class VR extends j0{constructor(e,t,i,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=BC(e.writeResults,e.commitTime),i=$r(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=mf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>zC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{}class LR extends OR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Te(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,ff(t,i),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(te.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Jo(e,ff(t,i),o,d,p,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Te(te.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class MR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_i(t),this._a=!1):ve("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="RemoteStore";class FR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{eo(this)&&(ve(Xs,"Restarting streams for network reachability change."),await(async function(g){const v=Fe(g);v.Ia.add(4),await Rl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Kc(v)})(this))}))})),this.Aa=new MR(i,o)}}async function Kc(r){if(eo(r))for(const e of r.da)await e(!0)}async function Rl(r){for(const e of r.da)await e(!1)}function D0(r,e){const t=Fe(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),cp(t)?up(t):ca(t).x_()&&lp(t,e))}function ap(r,e){const t=Fe(r),i=ca(t);t.Ta.delete(e),i.x_()&&V0(t,e),t.Ta.size===0&&(i.x_()?i.B_():eo(t)&&t.Aa.set("Unknown"))}function lp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ca(r).H_(e)}function V0(r,e){r.Ra.$e(e),ca(r).Y_(e)}function up(r){r.Ra=new jC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),ca(r).start(),r.Aa.aa()}function cp(r){return eo(r)&&!ca(r).M_()&&r.Ta.size>0}function eo(r){return Fe(r).Ia.size===0}function O0(r){r.Ra=void 0}async function UR(r){r.Aa.set("Online")}async function zR(r){r.Ta.forEach(((e,t)=>{lp(r,e)}))}async function BR(r,e){O0(r),cp(r)?(r.Aa.la(e),up(r)):r.Aa.set("Unknown")}async function $R(r,e,t){if(r.Aa.set("Online"),e instanceof w0&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const p of l.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ta.delete(p),o.Ra.removeTarget(p))})(r,e)}catch(i){ve(Xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ac(r,i)}else if(e instanceof lc?r.Ra.Ye(e):e instanceof _0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Oe.min()))try{const i=await b0(r.localStore);t.compareTo(i)>=0&&await(function(l,d){const p=l.Ra.Pt(d);return p.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ta.get(v);E&&l.Ta.set(v,E.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,v)=>{const E=l.Ta.get(g);if(!E)return;l.Ta.set(g,E.withResumeToken(sn.EMPTY_BYTE_STRING,E.snapshotVersion)),V0(l,g);const I=new Xi(E.target,g,v,E.sequenceNumber);lp(l,I)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){ve(Xs,"Failed to raise snapshot:",i),await Ac(r,i)}}async function Ac(r,e,t){if(!ua(e))throw e;r.Ia.add(1),await Rl(r),r.Aa.set("Offline"),t||(t=()=>b0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ve(Xs,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Kc(r)}))}function L0(r,e){return e().catch((t=>Ac(r,t,e)))}async function Qc(r){const e=Fe(r),t=hs(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qf;for(;WR(e);)try{const o=await IR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,HR(e,o)}catch(o){await Ac(e,o)}M0(e)&&F0(e)}function WR(r){return eo(r)&&r.Pa.length<10}function HR(r,e){r.Pa.push(e);const t=hs(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function M0(r){return eo(r)&&!hs(r).M_()&&r.Pa.length>0}function F0(r){hs(r).start()}async function qR(r){hs(r).na()}async function GR(r){const e=hs(r);for(const t of r.Pa)e.X_(t.mutations)}async function KR(r,e,t){const i=r.Pa.shift(),o=ep.from(i,e,t);await L0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Qc(r)}async function QR(r,e){e&&hs(r).Z_&&await(async function(i,o){if((function(d){return bC(d)&&d!==te.ABORTED})(o.code)){const l=i.Pa.shift();hs(i).N_(),await L0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Qc(i)}})(r,e),M0(r)&&F0(r)}async function av(r,e){const t=Fe(r);t.asyncQueue.verifyOperationInProgress(),ve(Xs,"RemoteStore received new credentials");const i=eo(t);t.Ia.add(3),await Rl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Kc(t)}async function YR(r,e){const t=Fe(r);e?(t.Ia.delete(2),await Kc(t)):e||(t.Ia.add(2),await Rl(t),t.Aa.set("Unknown"))}function ca(r){return r.Va||(r.Va=(function(t,i,o){const l=Fe(t);return l.ia(),new DR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:UR.bind(null,r),e_:zR.bind(null,r),n_:BR.bind(null,r),J_:$R.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),cp(r)?up(r):r.Aa.set("Unknown")):(await r.Va.stop(),O0(r))}))),r.Va}function hs(r){return r.ma||(r.ma=(function(t,i,o){const l=Fe(t);return l.ia(),new VR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:qR.bind(null,r),n_:QR.bind(null,r),ea:GR.bind(null,r),ta:KR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await Qc(r)):(await r.ma.stop(),r.Pa.length>0&&(ve(Xs,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const d=Date.now()+i,p=new dp(e,t,d,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(r,e){if(_i("AsyncQueue",`${e}: ${r}`),ua(r))return new Te(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{static emptySet(e){return new Ko(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ce.comparator(t.key,i.key):(t,i)=>Ce.comparator(t.key,i.key),this.keyedMap=Ja(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ko;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.fa=new xt(Ce.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):be(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ta{constructor(e,t,i,o,l,d,p,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new ta(e,t,Ko.emptySet(t),d,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class XR{constructor(){this.queries=uv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Fe(t),l=o.queries;o.queries=uv(),l.forEach(((d,p)=>{for(const g of p.wa)g.onError(i)}))})(this,new Te(te.ABORTED,"Firestore shutting down"))}}function uv(){return new Zs((r=>o0(r)),Bc)}async function U0(r,e){const t=Fe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new JR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=hp(d,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&fp(t)}async function z0(r,e){const t=Fe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ZR(r,e){const t=Fe(r);let i=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const p of d.wa)p.Ca(o)&&(i=!0);d.ya=o}}i&&fp(t)}function eP(r,e,t){const i=Fe(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function fp(r){r.Da.forEach((e=>{e.next()}))}var vf,cv;(cv=vf||(vf={})).Fa="default",cv.Cache="cache";class B0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ta(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==vf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.key=e}}class W0{constructor(e){this.key=e}}class tP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=a0(e),this.eu=new Ko(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new lv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,I)=>{const C=o.get(E),U=$c(this.query,I)?I:null,K=!!C&&this.mutatedKeys.has(C.key),J=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let V=!1;C&&U?C.data.isEqual(U.data)?K!==J&&(i.track({type:3,doc:U}),V=!0):this.iu(C,U)||(i.track({type:2,doc:U}),V=!0,(g&&this.Xa(U,g)>0||v&&this.Xa(U,v)<0)&&(p=!0)):!C&&U?(i.track({type:0,doc:U}),V=!0):C&&!U&&(i.track({type:1,doc:C}),V=!0,(g||v)&&(p=!0)),V&&(U?(d=d.add(U),l=J?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{eu:d,ru:i,Ds:p,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((E,I)=>(function(U,K){const J=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{At:V})}};return J(U)-J(K)})(E.type,I.type)||this.Xa(E.doc,I.doc))),this.su(i),o=o!=null&&o;const p=t&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,v=g!==this.Ya;return this.Ya=g,d.length!==0||v?{snapshot:new ta(this.query,e.eu,l,d,e.mutatedKeys,g===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new lv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ge(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new W0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new $0(i))})),t}uu(e){this.Ha=e.qs,this.Za=Ge();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ta.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const pp="SyncEngine";class nP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class rP{constructor(e){this.key=e,this.lu=!1}}class iP{constructor(e,t,i,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Zs((p=>o0(p)),Bc),this.Tu=new Map,this.Iu=new Set,this.du=new xt(Ce.comparator),this.Eu=new Map,this.Au=new rp,this.Ru={},this.Vu=new Map,this.mu=ea.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function sP(r,e,t=!0){const i=Y0(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await H0(i,e,t,!0),o}async function oP(r,e){const t=Y0(r);await H0(t,e,!0,!1)}async function H0(r,e,t,i){const o=await CR(r.localStore,Br(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await aP(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&D0(r.remoteStore,o),p}async function aP(r,e,t,i,o){r.gu=(I,C,U)=>(async function(J,V,oe,fe){let ue=V.view.nu(oe);ue.Ds&&(ue=await nv(J.localStore,V.query,!1).then((({documents:b})=>V.view.nu(b,ue))));const ce=fe&&fe.targetChanges.get(V.targetId),de=fe&&fe.targetMismatches.get(V.targetId)!=null,pe=V.view.applyChanges(ue,J.isPrimaryClient,ce,de);return hv(J,V.targetId,pe._u),pe.snapshot})(r,I,C,U);const l=await nv(r.localStore,e,!0),d=new tP(e,l.qs),p=d.nu(l.documents),g=Cl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=d.applyChanges(p,r.isPrimaryClient,g);hv(r,t,v._u);const E=new nP(e,t,d);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function lP(r,e,t){const i=Fe(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((d=>!Bc(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await gf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ap(i.remoteStore,o.targetId),_f(i,o.targetId)})).catch(la)):(_f(i,o.targetId),await gf(i.localStore,o.targetId,!0))}async function uP(r,e){const t=Fe(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ap(t.remoteStore,i.targetId))}async function cP(r,e,t){const i=yP(r);try{const o=await(function(d,p){const g=Fe(d),v=pt.now(),E=p.reduce(((U,K)=>U.add(K.key)),Ge());let I,C;return g.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let K=wi(),J=Ge();return g.Os.getEntries(U,E).next((V=>{K=V,K.forEach(((oe,fe)=>{fe.isValidDocument()||(J=J.add(oe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(U,K))).next((V=>{I=V;const oe=[];for(const fe of p){const ue=CC(fe,I.get(fe.key).overlayedDocument);ue!=null&&oe.push(new ws(fe.key,ue,Z_(ue.value.mapValue),or.exists(!0)))}return g.mutationQueue.addMutationBatch(U,v,oe,p)})).next((V=>{C=V;const oe=V.applyToLocalDocumentSet(I,J);return g.documentOverlayCache.saveOverlays(U,V.batchId,oe)}))})).then((()=>({batchId:C.batchId,changes:u0(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let v=d.Ru[d.currentUser.toKey()];v||(v=new xt($e)),v=v.insert(p,g),d.Ru[d.currentUser.toKey()]=v})(i,o.batchId,t),await Pl(i,o.changes),await Qc(i.remoteStore)}catch(o){const l=hp(o,"Failed to persist write");t.reject(l)}}async function q0(r,e){const t=Fe(r);try{const i=await TR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Eu.get(l);d&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?it(d.lu,14607):o.removedDocuments.size>0&&(it(d.lu,42227),d.lu=!1))})),await Pl(t,i,e)}catch(i){await la(i)}}function dv(r,e,t){const i=Fe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Fe(d);g.onlineState=p;let v=!1;g.queries.forEach(((E,I)=>{for(const C of I.wa)C.va(p)&&(v=!0)})),v&&fp(g)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dP(r,e,t){const i=Fe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let d=new xt(Ce.comparator);d=d.insert(l,hn.newNoDocument(l,Oe.min()));const p=Ge().add(l),g=new qc(Oe.min(),new Map,new xt($e),d,p);await q0(i,g),i.du=i.du.remove(l),i.Eu.delete(e),mp(i)}else await gf(i.localStore,e,!1).then((()=>_f(i,e,t))).catch(la)}async function hP(r,e){const t=Fe(r),i=e.batch.batchId;try{const o=await xR(t.localStore,e);K0(t,i,null),G0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pl(t,o)}catch(o){await la(o)}}async function fP(r,e,t){const i=Fe(r);try{const o=await(function(d,p){const g=Fe(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return g.mutationQueue.lookupMutationBatch(v,p).next((I=>(it(I!==null,37113),E=I.keys(),g.mutationQueue.removeMutationBatch(v,I)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>g.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);K0(i,e,t),G0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pl(i,o)}catch(o){await la(o)}}function G0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function K0(r,e,t){const i=Fe(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function _f(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||Q0(r,i)}))}function Q0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(ap(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),mp(r))}function hv(r,e,t){for(const i of t)i instanceof $0?(r.Au.addReference(i.key,e),pP(r,i)):i instanceof W0?(ve(pp,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||Q0(r,i.key)):be(19791,{yu:i})}function pP(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(ve(pp,"New document in limbo: "+t),r.Iu.add(i),mp(r))}function mp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Ce(ft.fromString(e)),i=r.mu.next();r.Eu.set(i,new rP(t)),r.du=r.du.insert(t,i),D0(r.remoteStore,new Xi(Br(Jf(t.path)),i,"TargetPurposeLimboResolution",Mc.ue))}}async function Pl(r,e,t){const i=Fe(r),o=[],l=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((p,g)=>{d.push(i.gu(g,e,t).then((v=>{var E;if((v||t)&&i.isPrimaryClient){const I=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,I?"current":"not-current")}if(v){o.push(v);const I=sp.Es(g.targetId,v);l.push(I)}})))})),await Promise.all(d),i.hu.J_(o),await(async function(g,v){const E=Fe(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>ee.forEach(v,(C=>ee.forEach(C.Is,(U=>E.persistence.referenceDelegate.addReference(I,C.targetId,U))).next((()=>ee.forEach(C.ds,(U=>E.persistence.referenceDelegate.removeReference(I,C.targetId,U)))))))))}catch(I){if(!ua(I))throw I;ve(op,"Failed to update sequence numbers: "+I)}for(const I of v){const C=I.targetId;if(!I.fromCache){const U=E.Fs.get(C),K=U.snapshotVersion,J=U.withLastLimboFreeSnapshotVersion(K);E.Fs=E.Fs.insert(C,J)}}})(i.localStore,l))}async function mP(r,e){const t=Fe(r);if(!t.currentUser.isEqual(e)){ve(pp,"User change. New user:",e.toKey());const i=await k0(t.localStore,e);t.currentUser=e,(function(l,d){l.Vu.forEach((p=>{p.forEach((g=>{g.reject(new Te(te.CANCELLED,d))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pl(t,i.Bs)}}function gP(r,e){const t=Fe(r),i=t.Eu.get(e);if(i&&i.lu)return Ge().add(i.key);{let o=Ge();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const p=t.Pu.get(d);o=o.unionWith(p.view.tu)}return o}}function Y0(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=q0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dP.bind(null,e),e.hu.J_=ZR.bind(null,e.eventManager),e.hu.pu=eP.bind(null,e.eventManager),e}function yP(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fP.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return ER(this.persistence,new vR,e.initialUser,this.serializer)}Du(e){return new A0(ip.Vi,this.serializer)}bu(e){return new PR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class vP extends kc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){it(this.persistence.referenceDelegate instanceof Pc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new rR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new A0((i=>Pc.Vi(i,t)),this.serializer)}}class wf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mP.bind(null,this.syncEngine),await YR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XR})()}createDatastore(e){const t=Gc(e.databaseInfo.databaseId),i=(function(l){return new jR(l)})(e.databaseInfo);return(function(l,d,p,g){return new LR(l,d,p,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,d,p){return new FR(i,o,l,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>dv(this.syncEngine,t,0)),(function(){return sv.C()?new sv:new AR})())}createSyncEngine(e,t){return(function(o,l,d,p,g,v,E){const I=new iP(o,l,d,p,g,v);return E&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Fe(o);ve(Xs,"RemoteStore shutting down."),l.Ia.add(5),await Rl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}wf.provider={build:()=>new wf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="FirestoreClient";class _P{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=dn.UNAUTHENTICATED,this.clientId=Wf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{ve(fs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ve(fs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=hp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function $h(r,e){r.asyncQueue.verifyOperationInProgress(),ve(fs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await k0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{as("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{ve("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{as("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function fv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await wP(r);ve(fs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>av(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>av(e.remoteStore,o))),r._onlineComponents=e}async function wP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(fs,"Using user provided OfflineComponentProvider");try{await $h(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;as("Error using user provided cache. Falling back to memory cache: "+t),await $h(r,new kc)}}else ve(fs,"Using default OfflineComponentProvider"),await $h(r,new vP(void 0));return r._offlineComponents}async function X0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(fs,"Using user provided OnlineComponentProvider"),await fv(r,r._uninitializedComponentsProvider._online)):(ve(fs,"Using default OnlineComponentProvider"),await fv(r,new wf))),r._onlineComponents}function EP(r){return X0(r).then((e=>e.syncEngine))}async function Z0(r){const e=await X0(r),t=e.eventManager;return t.onListen=sP.bind(null,e.syncEngine),t.onUnlisten=lP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uP.bind(null,e.syncEngine),t}function xP(r,e,t={}){const i=new gi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,g,v){const E=new J0({next:C=>{E.Ou(),d.enqueueAndForget((()=>z0(l,I)));const U=C.docs.has(p);!U&&C.fromCache?v.reject(new Te(te.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&C.fromCache&&g&&g.source==="server"?v.reject(new Te(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),I=new B0(Jf(p.path),E,{includeMetadataChanges:!0,ka:!0});return U0(l,I)})(await Z0(r),r.asyncQueue,e,t,i))),i.promise}function TP(r,e,t={}){const i=new gi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,g,v){const E=new J0({next:C=>{E.Ou(),d.enqueueAndForget((()=>z0(l,I))),C.fromCache&&g.source==="server"?v.reject(new Te(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(C)},error:C=>v.reject(C)}),I=new B0(p,E,{includeMetadataChanges:!0,ka:!0});return U0(l,I)})(await Z0(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="firestore.googleapis.com",mv=!0;class gv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tw,this.ssl=mv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:mv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tR)throw new Te(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ew((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Te(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Te(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Te(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new kI;switch(i.type){case"firstParty":return new DI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=pv.get(t);i&&(ve("ComponentProvider","Removing Datastore"),pv.delete(t),i.terminate())})(this),Promise.resolve()}}function SP(r,e,t,i={}){var o;r=Rr(r,Yc);const l=ia(e),d=r._getSettings(),p=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${t}`;l&&($v(`https://${g}`),Wv("Firestore",!0)),d.host!==tw&&d.host!==g&&as("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:g,ssl:l,emulatorOptions:i});if(!Gs(v,p)&&(r._setSettings(v),i.mockUserToken)){let E,I;if(typeof i.mockUserToken=="string")E=i.mockUserToken,I=dn.MOCK_USER;else{E=Bx(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new Te(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new dn(C)}r._authCredentials=new bI(new U_(E,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Jc(this.firestore,e,this._query)}}class jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Sl(t,jt._jsonSchema))return new jt(e,i||null,new Ce(ft.fromString(t.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Nt("string",jt._jsonSchemaVersion),referencePath:Nt("string")};class ss extends Jc{constructor(e,t,i){super(e,t,Jf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Ce(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function Sr(r,e,...t){if(r=rn(r),B_("collection","path",e),r instanceof Yc){const i=ft.fromString(e,...t);return ky(i),new ss(r,null,i)}{if(!(r instanceof jt||r instanceof ss))throw new Te(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ft.fromString(e,...t));return ky(i),new ss(r.firestore,null,i)}}function bt(r,e,...t){if(r=rn(r),arguments.length===1&&(e=Wf.newId()),B_("doc","path",e),r instanceof Yc){const i=ft.fromString(e,...t);return Ay(i),new jt(r,null,new Ce(i))}{if(!(r instanceof jt||r instanceof ss))throw new Te(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ft.fromString(e,...t));return Ay(i),new jt(r.firestore,r instanceof ss?r.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="AsyncQueue";class vv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new N0(this,"async_queue_retry"),this.oc=()=>{const i=Bh();i&&ve(yv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Bh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Bh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new gi;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ua(e))throw e;ve(yv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,_i("INTERNAL UNHANDLED ERROR: ",_v(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=dp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&be(47125,{hc:_v(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function _v(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class to extends Yc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new vv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,await e}}}function IP(r,e){const t=typeof r=="object"?r:Kv(),i=typeof r=="string"?r:Ec,o=bf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Ux("firestore");l&&SP(o,...l)}return o}function gp(r){if(r._terminated)throw new Te(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CP(r),r._firestoreClient}function CP(r){var e,t,i;const o=r._freezeSettings(),l=(function(p,g,v,E){return new YI(p,g,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,ew(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new _P(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sr(sn.fromBase64String(e))}catch(t){throw new Te(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sr(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sl(e,sr._jsonSchema))return sr.fromBase64String(e.bytes)}}sr._jsonSchemaVersion="firestore/bytes/1.0",sr._jsonSchema={type:Nt("string",sr._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wr._jsonSchemaVersion}}static fromJSON(e){if(Sl(e,Wr._jsonSchema))return new Wr(e.latitude,e.longitude)}}Wr._jsonSchemaVersion="firestore/geoPoint/1.0",Wr._jsonSchema={type:Nt("string",Wr._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sl(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Hr(e.vectorValues);throw new Te(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:Nt("string",Hr._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^__.*__$/;class PP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,t,this.fieldTransforms):new Il(e,this.data,t,this.fieldTransforms)}}class nw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ws(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ec:r})}}class vp{constructor(e,t,i,o,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return bc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(rw(this.Ec)&&RP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class AP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Gc(e)}Dc(e,t,i,o=!1){return new vp({Ec:e,methodName:t,bc:i,path:nn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _p(r){const e=r._freezeSettings(),t=Gc(r._databaseId);return new AP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function iw(r,e,t,i,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);wp("Data must be an object, but it was:",d,i);const p=sw(i,d);let g,v;if(l.merge)g=new Hn(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const C=Ef(e,I,t);if(!d.contains(C))throw new Te(te.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);aw(E,C)||E.push(C)}g=new Hn(E),v=d.fieldTransforms.filter((I=>g.covers(I.field)))}else g=null,v=d.fieldTransforms;return new PP(new Vn(p),g,v)}class Zc extends yp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zc}}function kP(r,e,t,i){const o=r.Dc(1,e,t);wp("Data must be an object, but it was:",o,i);const l=[],d=Vn.empty();_s(i,((g,v)=>{const E=Ep(e,g,t);v=rn(v);const I=o.gc(E);if(v instanceof Zc)l.push(E);else{const C=ed(v,I);C!=null&&(l.push(E),d.set(E,C))}}));const p=new Hn(l);return new nw(d,p,o.fieldTransforms)}function bP(r,e,t,i,o,l){const d=r.Dc(1,e,t),p=[Ef(e,i,t)],g=[o];if(l.length%2!=0)throw new Te(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)p.push(Ef(e,l[C])),g.push(l[C+1]);const v=[],E=Vn.empty();for(let C=p.length-1;C>=0;--C)if(!aw(v,p[C])){const U=p[C];let K=g[C];K=rn(K);const J=d.gc(U);if(K instanceof Zc)v.push(U);else{const V=ed(K,J);V!=null&&(v.push(U),E.set(U,V))}}const I=new Hn(v);return new nw(E,I,d.fieldTransforms)}function ed(r,e){if(ow(r=rn(r)))return wp("Unsupported field value:",e,r),sw(r,e);if(r instanceof yp)return(function(i,o){if(!rw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let d=0;for(const p of i){let g=ed(p,o.yc(d));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),d++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=pt.fromDate(i);return{timestampValue:Rc(o.serializer,l)}}if(i instanceof pt){const l=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rc(o.serializer,l)}}if(i instanceof Wr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sr)return{bytesValue:E0(o.serializer,i._byteString)};if(i instanceof jt){const l=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:np(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Hr)return(function(d,p){return{mapValue:{fields:{[J_]:{stringValue:X_},[xc]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw p.wc("VectorValues must only contain numeric values.");return Xf(p.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Hf(i)}`)})(r,e)}function sw(r,e){const t={};return H_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(r,((i,o)=>{const l=ed(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function ow(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof pt||r instanceof Wr||r instanceof sr||r instanceof jt||r instanceof yp||r instanceof Hr)}function wp(r,e,t){if(!ow(t)||!$_(t)){const i=Hf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function Ef(r,e,t){if((e=rn(e))instanceof Xc)return e._internalPath;if(typeof e=="string")return Ep(r,e);throw bc("Field path arguments must be of type string or ",r,!1,void 0,t)}const NP=new RegExp("[~\\*/\\[\\]]");function Ep(r,e,t){if(e.search(NP)>=0)throw bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Xc(...e.split("."))._internalPath}catch{throw bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function bc(r,e,t,i,o){const l=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new Te(te.INVALID_ARGUMENT,p+r+g)}function aw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jP extends lw{data(){return super.data()}}function uw(r,e){return typeof e=="string"?Ep(r,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Te(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VP{convertValue(e,t="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return _s(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[xc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>It(d.doubleValue)));return new Hr(l)}convertGeoPoint(e){return new Wr(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Uc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const t=us(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ft.fromString(e);it(R0(i),9688,{name:e});const o=new fl(i.get(1),i.get(3)),l=new Ce(i.popFirst(5));return o.isEqual(t)||_i(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qs extends lw{constructor(e,t,i,o,l,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(uw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=qs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",qs._jsonSchema={type:Nt("string",qs._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class uc extends qs{data(e={}){return super.data(e)}}class Qo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Za(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new uc(this._firestore,this._userDataWriter,i.key,i,new Za(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new uc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Za(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const g=new uc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Za(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),E=d.indexOf(p.doc.key)),{type:OP(p.type),doc:g,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(r){r=Rr(r,jt);const e=Rr(r.firestore,to);return xP(gp(e),r._key).then((t=>LP(e,r,t)))}Qo._jsonSchemaVersion="firestore/querySnapshot/1.0",Qo._jsonSchema={type:Nt("string",Qo._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class dw extends VP{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}function Zi(r){r=Rr(r,Jc);const e=Rr(r.firestore,to),t=gp(e),i=new dw(e);return DP(r._query),TP(t,r._query).then((o=>new Qo(e,i,r,o)))}function Yu(r,e,t){r=Rr(r,jt);const i=Rr(r.firestore,to),o=cw(r.converter,e,t);return td(i,[iw(_p(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,or.none())])}function Wo(r,e,t,...i){r=Rr(r,jt);const o=Rr(r.firestore,to),l=_p(o);let d;return d=typeof(e=rn(e))=="string"||e instanceof Xc?bP(l,"updateDoc",r._key,e,t,i):kP(l,"updateDoc",r._key,e),td(o,[d.toMutation(r._key,or.exists(!0))])}function Hs(r){return td(Rr(r.firestore,to),[new Zf(r._key,or.none())])}function cc(r,e){const t=Rr(r.firestore,to),i=bt(r),o=cw(r.converter,e);return td(t,[iw(_p(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,or.exists(!1))]).then((()=>i))}function td(r,e){return(function(i,o){const l=new gi;return i.asyncQueue.enqueueAndForget((async()=>cP(await EP(i),o,l))),l.promise})(gp(r),e)}function LP(r,e,t){const i=t.docs.get(e._key),o=new dw(r);return new qs(r,o,e._key,i,new Za(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){aa=o})(sa),Yo(new Ks("firestore",((i,{instanceIdentifier:o,options:l})=>{const d=i.getProvider("app").getImmediate(),p=new to(new NI(i.getProvider("auth-internal")),new VI(d,i.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Te(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(v.options.projectId,E)})(d,o),d);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),rs(Sy,Iy,e),rs(Sy,Iy,"esm2017")})();const MP={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},hw=Gv(MP),os=PI(hw),rt=IP(hw),fw=$.createContext(null);function FP({children:r}){const[e,t]=$.useState(null),[i,o]=$.useState(!1),[l,d]=$.useState(!0);$.useEffect(()=>{const v=vS(os,async E=>{if(t(E),E)try{const I=bt(rt,"admins",E.uid);if((await xf(I)).exists())o(!0);else{const U=bt(rt,"roles",E.uid),K=await xf(U);K.exists()&&K.data().admin===!0?o(!0):o(!1)}}catch(I){console.error("Error checking admin role:",I),o(!1)}else o(!1);d(!1)});return()=>v()},[]);const p=async(v,E)=>{await __(os,v,E)},g=async()=>{await w_(os)};return h.jsx(fw.Provider,{value:{user:e,admin:i,loading:l,login:p,logout:g},children:r})}function da(){return $.useContext(fw)}function UP({onClose:r}){const[e,t]=$.useState("login"),[i,o]=$.useState(""),[l,d]=$.useState("");async function p(){try{await b_(os,new Ur),r()}catch(E){alert(E.message)}}async function g(E){E.preventDefault();try{await __(os,i,l),r()}catch(I){alert(I.message)}}async function v(E){E.preventDefault();try{await mS(os,i,l),r()}catch(I){alert(I.message)}}return h.jsx("div",{className:"auth-modal-backdrop",onClick:r,children:h.jsxs("div",{className:"auth-modal",onClick:E=>E.stopPropagation(),children:[h.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),h.jsxs("button",{className:"google-btn",onClick:p,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsx("div",{className:"auth-divider",children:h.jsx("span",{children:"or"})}),h.jsxs("form",{onSubmit:e==="login"?g:v,className:"auth-form",children:[h.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:i,onChange:E=>o(E.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:E=>d(E.target.value),required:!0}),h.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),h.jsx("div",{className:"auth-switcher",children:e==="login"?h.jsxs("p",{children:["No account?"," ",h.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):h.jsxs("p",{children:["Already have an account?"," ",h.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),h.jsx("button",{className:"auth-close",onClick:r,children:"Close"})]})})}function zP(){const[r,e]=$.useState(!1),[t,i]=$.useState(!1),{user:o,admin:l}=da(),d=jc();async function p(){try{await w_(os),e(!1),d("/")}catch(g){console.error(g),alert("Logout failed.")}}return h.jsxs(h.Fragment,{children:[h.jsxs("button",{className:`menu-toggle ${r?"active":""}`,onClick:()=>e(!r),children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("nav",{className:`menu-panel ${r?"open":""}`,children:[h.jsx(Ga,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),h.jsx(Ga,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),h.jsx(Ga,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),h.jsx(Ga,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),l&&h.jsx(Ga,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),h.jsxs("div",{className:"auth-section",children:[h.jsx("p",{className:"auth-section-status",children:o?`Signed in as ${o.email||o.uid}`:"Not signed in"}),h.jsxs("div",{children:[!o&&h.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),i(!0)},children:"Sign in"}),o&&h.jsx("button",{className:"auth-btn secondary",onClick:p,children:"Sign out"})]})]})]}),t&&h.jsx(UP,{onClose:()=>i(!1)})]})}function wv(){const r="Tyler's Collection Homepage",e="",[t,i]=$.useState(""),[o,l]=$.useState(!0),d=$.useRef(null),[p,g]=$.useState("jp"),[v,E]=$.useState(1);return $.useEffect(()=>(d.current=setInterval(()=>l(I=>!I),450),()=>{d.current&&clearInterval(d.current)}),[]),$.useEffect(()=>{let I=!1;const C=J=>new Promise(V=>setTimeout(V,J)),U=async(J,V=120)=>{for(let oe=1;oe<=J.length;oe+=1){if(I)return;i(J.slice(0,oe)),await C(V)}},K=async(J,V=70)=>{for(let oe=J.length;oe>=0;oe-=1){if(I)return;i(J.slice(0,oe)),await C(V)}};return(async()=>{if(localStorage.getItem("homeTitleTyped")==="1"){g("en"),i(r),l(!1),d.current&&clearInterval(d.current);return}await C(250),g("jp"),await U(e,140),await C(700),await K(e,80),await C(320),E(0),await C(180),g("en"),E(1),await U(r,110),await C(2e3),l(!1),localStorage.setItem("homeTitleTyped","1"),d.current&&clearInterval(d.current)})(),()=>{I=!0}},[]),h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[h.jsxs("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",display:"inline-flex",alignItems:"center",gap:"6px"},children:[h.jsx("span",{children:t||" "}),h.jsx("span",{style:{width:"6px",height:"1.1em",background:"#ffb6c1",opacity:o?1:0,transition:"opacity 0.15s ease"}})]}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem",opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"This is my personal webpage to see what is on my shelves, wishlists, and TCG collections."}),h.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"8px 14px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"linear-gradient(135deg, rgba(255,182,193,0.18), rgba(43,15,29,0.9))",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"14px",fontSize:"0.78rem",color:"#ffe6ed",letterSpacing:"0.05em",textTransform:"uppercase",fontWeight:700,opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?h.jsxs(h.Fragment,{children:[h.jsx("span",{role:"img","aria-label":"manga",children:""})," ",h.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),h.jsx("span",{role:"img","aria-label":"anime",children:""})," ",h.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),h.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{role:"img","aria-label":"manga",children:""})," Manga",h.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),h.jsx("span",{role:"img","aria-label":"anime",children:""})," Anime",h.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),h.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]})})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:h.jsx("span",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"About Me"})}),h.jsx("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5,opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"im.okTCG":"Hey, I am Tyler and I go by im.ok. I hoard manga, binge anime, and collect trading cards."}),h.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem",opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"This site is where I track everything: volumes on my shelves, finished shows, and my TCG collection as they all slowly grow."}),h.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px",opacity:v,transition:"opacity 0.25s ease"},children:[h.jsx("span",{className:"pill",children:p==="jp"?"":"Manga library"}),h.jsx("span",{className:"pill",children:p==="jp"?"":"My Anime List (MAL)"}),h.jsx("span",{className:"pill",children:p==="jp"?" & TCG":"Pokemon & One Piece TCG"}),h.jsx("span",{className:"pill",children:p==="jp"?"":"Data Nerd"})]})]}),h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:h.jsx("span",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Explore these pages"})}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[h.jsxs("a",{href:"/base/manga",className:"section-card",children:[h.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Manga Library"}),h.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Full manga collection & wishlist."}),h.jsx("div",{className:"section-chip-row",children:h.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Library & wishlist"})})]}),h.jsxs("a",{href:"/base/anime",className:"section-card",children:[h.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Anime Library"}),h.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"MAL":"The entire watched, plan to watch, and watching list synced directly from MyAnimeList."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"MAL":"MAL synced"}),h.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Status filters"}),h.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Quick stats"})]})]}),h.jsxs("a",{href:"/base/tcg",className:"section-card",children:[h.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"TCG Collection"}),h.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Full Collection"}),h.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Still Under-Construction"})]})]})]})]})]}),h.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"@ 2025 im.ok. All rights reserved."})]})}const BP="modulepreload",$P=function(r){return"/base/"+r},Ev={},pw=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let d=function(v){return Promise.all(v.map(E=>Promise.resolve(E).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=d(t.map(v=>{if(v=$P(v),v in Ev)return;Ev[v]=!0;const E=v.endsWith(".css"),I=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${I}`))return;const C=document.createElement("link");if(C.rel=E?"stylesheet":BP,E||(C.as="script"),C.crossOrigin="",C.href=v,g&&C.setAttribute("nonce",g),document.head.appendChild(C),E)return new Promise((U,K)=>{C.addEventListener("load",U),C.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})};function di(r){let e=(r||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),i=t?t[1].trim().toLowerCase():e.toLowerCase(),o=t&&t[2]?parseInt(t[2],10):0;return{name:i,vol:Number.isFinite(o)?o:0}}function WP(){const{admin:r}=da(),e=r,[t,i]=$.useState("library");$.useEffect(()=>{document.title="Manga | Library"},[]);const[o,l]=$.useState([]),[d,p]=$.useState([]),[g,v]=$.useState([]),[E,I]=$.useState([]),[C,U]=$.useState(!1),[K,J]=$.useState(!0),[V,oe]=$.useState(""),[fe,ue]=$.useState(""),[ce,de]=$.useState(""),[pe,b]=$.useState(!1),[R,P]=$.useState(()=>new Set),[k,D]=$.useState(null),[N,x]=$.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[ie,Ne]=$.useState([]),[De,Ae]=$.useState(0),[G,we]=$.useState({open:!1,index:0,items:[]});async function me(){const T=await Zi(Sr(rt,"library")),H=[];T.forEach(X=>{const M=X.data();H.push({id:X.id,title:M.title||"",authors:M.authors||"Unknown",publisher:M.publisher||"Unknown",demographic:M.demographic||"",genre:M.genre||"",subGenre:M.subGenre||"",date:M.date||"Unknown",cover:M.cover||"",isbn:M.isbn||"",pageCount:M.pageCount!==void 0&&M.pageCount!==null?M.pageCount:"",rating:M.rating!==void 0&&M.rating!==null?M.rating:"",amountPaid:M.amountPaid!==void 0&&M.amountPaid!==null?M.amountPaid:"",dateRead:M.dateRead||"",datePurchased:M.datePurchased||"",msrp:M.msrp!==void 0&&M.msrp!==null?M.msrp:"",specialType:M.specialType||"",specialVolumes:M.specialVolumes!==void 0&&M.specialVolumes!==null?M.specialVolumes:"",collectiblePrice:M.collectiblePrice!==void 0&&M.collectiblePrice!==null?M.collectiblePrice:"",read:!!M.read,amazonURL:M.amazonURL||"",hidden:!!M.hidden,kind:"library"})}),H.sort((X,M)=>{const B=di(X.title),ye=di(M.title),ze=B.name.localeCompare(ye.name);return ze!==0?ze:B.vol-ye.vol}),l(H),v(X=>{const M=new Set(X);return H.forEach(B=>M.add(B.title||"")),Array.from(M).filter(Boolean).sort()})}async function L(){const T=await Zi(Sr(rt,"wishlist")),H=[];T.forEach(X=>{const M=X.data();H.push({id:X.id,title:M.title||"",authors:M.authors||"Unknown",publisher:M.publisher||"Unknown",date:M.date||"Unknown",cover:M.cover||"",isbn:M.isbn||"",pageCount:M.pageCount!==void 0&&M.pageCount!==null?M.pageCount:"",rating:M.rating!==void 0&&M.rating!==null?M.rating:"",amountPaid:M.amountPaid!==void 0&&M.amountPaid!==null?M.amountPaid:"",specialType:M.specialType||"",specialVolumes:M.specialVolumes!==void 0&&M.specialVolumes!==null?M.specialVolumes:"",collectiblePrice:M.collectiblePrice!==void 0&&M.collectiblePrice!==null?M.collectiblePrice:"",amazonURL:M.amazonURL||"",hidden:!!M.hidden,kind:"wishlist"})}),H.sort((X,M)=>{const B=di(X.title),ye=di(M.title),ze=B.name.localeCompare(ye.name);return ze!==0?ze:B.vol-ye.vol}),p(H),v(X=>{const M=new Set(X);return H.forEach(B=>M.add(B.title||"")),Array.from(M).filter(Boolean).sort()})}$.useEffect(()=>{let T=!1;async function H(){J(!0),oe("");try{await Promise.all([me(),L()]),T||J(!1)}catch(X){console.error(X),T||(oe("Failed to load manga data from Firestore."),J(!1))}}return H(),()=>{T=!0}},[]);const Z=$.useMemo(()=>{const T=fe.trim().toLowerCase();return T?o.filter(H=>[H.title,H.authors,H.publisher,H.isbn,H.date,String(H.pageCount??"")].join(" ").toLowerCase().includes(T)):o},[o,fe]),Se=$.useMemo(()=>e&&C?Z:Z.filter(T=>!T.hidden),[Z,e,C]),Ve=$.useMemo(()=>{const T=ce.trim().toLowerCase();return T?d.filter(H=>[H.title,H.authors,H.publisher,H.isbn,H.date,String(H.pageCount??"")].join(" ").toLowerCase().includes(T)):d},[d,ce]);function Le(){e&&(b(T=>!T),P(new Set))}function Ue(T){P(H=>{const X=new Set(H);return X.has(T)?X.delete(T):X.add(T),X})}async function We(T){if(!e){alert("Multi-select actions require admin access.");return}const H=Array.from(R);if(!H.length){alert("Select at least one item first.");return}const X=t==="library";try{if(T==="move")if(X){if(!window.confirm(`Move ${H.length} item(s) to Wishlist?`))return;for(const M of H){const B=o.find(ze=>ze.id===M);if(!B)continue;const ye={title:B.title,authors:B.authors,publisher:B.publisher,date:B.date,isbn:B.isbn,pageCount:B.pageCount||"",cover:B.cover,amazonURL:B.amazonURL||"",specialType:B.specialType||"",specialVolumes:B.specialVolumes||"",collectiblePrice:B.collectiblePrice||"",rating:B.rating||""};await cc(Sr(rt,"wishlist"),ye),await Hs(bt(rt,"library",M))}}else{if(!window.confirm(`Move ${H.length} item(s) to Library?`))return;for(const M of H){const B=d.find(ze=>ze.id===M);if(!B)continue;const ye={title:B.title,authors:B.authors,publisher:B.publisher,date:B.date,isbn:B.isbn,pageCount:B.pageCount||"",cover:B.cover,amountPaid:"",read:!1,rating:"",specialType:B.specialType||"",specialVolumes:B.specialVolumes||"",collectiblePrice:B.collectiblePrice||""};await cc(Sr(rt,"library"),ye),await Hs(bt(rt,"wishlist",M))}}else if(T==="markRead"&&X)for(const M of H)await Wo(bt(rt,"library",M),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(T==="markUnread"&&X)for(const M of H)await Wo(bt(rt,"library",M),{read:!1,dateRead:"",rating:""});else if(T==="delete"){const M=X?"library":"wishlist";if(!window.confirm(`Delete ${H.length} item(s) from ${X?"Library":"Wishlist"}?`))return;for(const B of H)await Hs(bt(rt,M,B))}await Promise.all([me(),L()]),P(new Set),b(!1)}catch(M){console.error(M),alert("Failed to apply multi-select action.")}}function Be(T){D(T)}function tt(){D(null)}const ct=()=>{x(T=>({...T,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1,hidden:!1},multiAdd:!1,startVol:"",endVol:""})),Ne([]),Ae(0)},pn=$.useMemo(()=>{const T=new Map;return[...o,...d].forEach(H=>{const X=di(H.title||"");if(!X.name)return;const M=(H.title||"").replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||H.title||X.name;if(!T.has(X.name))T.set(X.name,{display:M,maxVol:X.vol,authors:H.authors||"",publisher:H.publisher||"",demographic:H.demographic||""});else{const B=T.get(X.name);B.maxVol=Math.max(B.maxVol,X.vol),!B.authors&&H.authors&&(B.authors=H.authors),!B.publisher&&H.publisher&&(B.publisher=H.publisher),!B.demographic&&H.demographic&&(B.demographic=H.demographic)}}),T},[o,d]),Ft=T=>{x(H=>({...H,open:!0,mode:"add",list:T,editingId:null,data:{...H.data,title:"",list:T}})),Ne([{kind:"new",id:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1}}]),Ae(0)},Ut=T=>{const H={open:!0,mode:"edit",list:T.kind==="wishlist"?"wishlist":"library",editingId:T.id,data:{title:T.title||"",authors:T.authors||"",publisher:T.publisher||"",demographic:T.demographic||"",genre:T.genre||"",subGenre:T.subGenre||"",date:T.date||"",cover:T.cover||"",isbn:T.isbn||"",pageCount:T.pageCount||"",rating:T.rating||"",amountPaid:T.amountPaid||"",dateRead:T.dateRead||"",datePurchased:T.datePurchased||"",msrp:T.msrp||"",specialType:T.specialType||"",specialVolumes:T.specialVolumes||"",collectiblePrice:T.collectiblePrice||"",amazonURL:T.amazonURL||"",read:!!T.read,hidden:!!T.hidden}};x(H),Ne([{kind:"edit",id:T.id,data:{...H.data}}]),Ae(0)},Ke=(T,H,X="text")=>{if(x(M=>{const B={...M.data,[T]:X==="checkbox"?!!H:H};if(T==="title"){const ye=di(H||"");if(ye.name&&pn.has(ye.name)){const ze=pn.get(ye.name);B.authors=ze.authors||B.authors,B.publisher=ze.publisher||B.publisher,B.demographic=ze.demographic||B.demographic}}return{...M,data:B}}),Ne(M=>{if(!M.length)return M;const B=[...M],ye={...B[De]};return ye.data={...ye.data,[T]:X==="checkbox"?!!H:H},B[De]=ye,B}),T==="title"){const M=String(H||"").trim().toLowerCase();if(!M)I([]);else{const B=[];pn.forEach(ye=>{if(ye.display.toLowerCase().includes(M)){const ze=ye.maxVol>0?ye.maxVol+1:1;B.push(`${ye.display}, Vol. ${ze}`)}}),I(B.slice(0,6))}}},lr=T=>{ie[T]&&(Ae(T),x(H=>{const X=ie[T];return{...H,data:{...X.data}}}))},mn=()=>{const T=N.data.title||"",H=di(T);if(!H.name){alert("Provide a title with a volume number first (e.g., Series, Vol. 1).");return}const X=T.replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||T;let M=H.vol||0;const B=pn.get(H.name);B&&B.maxVol>M&&(M=B.maxVol),ie.forEach(nt=>{const Xe=di(nt.data.title||"");Xe.name===H.name&&(M=Math.max(M,Xe.vol||0))});const ye=(M||0)+1,_t={title:`${X}, Vol. ${ye}`,authors:N.data.authors,publisher:N.data.publisher,demographic:N.data.demographic,genre:N.data.genre,subGenre:N.data.subGenre,msrp:N.data.msrp,hidden:N.data.hidden,cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",date:"",dateRead:"",datePurchased:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1};Ne(nt=>{const Xe=[...nt,{kind:"new",id:null,data:_t}];return Ae(Xe.length-1),Xe}),x(nt=>({...nt,mode:"add",data:_t}))};async function zt(){if(!e)return;const{list:T}=N,H=T||"library",X=ie.length>0?ie:[{kind:N.mode,id:N.editingId,data:N.data}],M=B=>({title:(B.title||"").trim(),authors:(B.authors||"").trim(),publisher:(B.publisher||"").trim(),demographic:(B.demographic||"").trim(),genre:(B.genre||"").trim(),subGenre:(B.subGenre||"").trim(),date:(B.date||"").trim(),cover:(B.cover||"").trim(),isbn:(B.isbn||"").trim(),pageCount:B.pageCount===""?"":Number(B.pageCount),rating:B.rating===""?"":Math.max(.5,Math.min(5,Number(B.rating))),amountPaid:B.amountPaid===""?"":Number(B.amountPaid),dateRead:(B.dateRead||"").trim(),datePurchased:(B.datePurchased||"").trim(),msrp:B.msrp===""?"":Number(B.msrp),specialType:(B.specialType||"").trim(),specialVolumes:B.specialVolumes===""?"":Number(B.specialVolumes),collectiblePrice:B.collectiblePrice===""?"":Number(B.collectiblePrice),amazonURL:(B.amazonURL||"").trim(),read:!!B.read,hidden:!!B.hidden,kind:T});try{const B=[];for(const ye of X){const ze=M(ye.data);if(!ze.title){alert("Title is required for every entry.");return}ye.kind==="edit"&&ye.id?B.push(Wo(bt(rt,H,ye.id),ze)):B.push(cc(Sr(rt,H),ze))}await Promise.all(B),await Promise.all([me(),L()]),ct()}catch(B){console.error(B),alert("Failed to save entry.")}}async function ur(T,H){if(e&&window.confirm("Delete this entry?"))try{await Hs(bt(rt,H,T)),await Promise.all([me(),L()])}catch(X){console.error(X),alert("Failed to delete entry.")}}const[qn,gn]=$.useState(!1),Bt=()=>we({open:!1,index:0,items:[]});async function Gn(T,H){if(!(T!=null&&T.id))return;const X=T.kind==="wishlist"?"wishlist":"library";gn(!0);try{await Wo(bt(rt,X,T.id),H),await Promise.all([me(),L()]),D(M=>M&&M.id===T.id?{...M,...H}:M)}catch(M){console.error(M),alert("Failed to update entry.")}finally{gn(!1)}}const yn=(T,H)=>{const X=H===""?"":Math.max(.5,Math.min(5,Number(H)));Gn(T,{rating:X})},$t=(T,H)=>{if(!T)return;const X=H?{read:!0,dateRead:new Date().toISOString().slice(0,10)}:{read:!1,dateRead:""};Gn(T,X)},Kr=()=>{if(!R.size){alert("Select at least one entry first.");return}const H=[...o,...d].filter(M=>R.has(M.id));if(!H.length){alert("No items selected.");return}const X=H.map(M=>({id:M.id,kind:M.kind||(t==="wishlist"?"wishlist":"library"),data:{title:M.title||"",authors:M.authors||"",publisher:M.publisher||"",demographic:M.demographic||"",genre:M.genre||"",subGenre:M.subGenre||"",date:M.date||"",cover:M.cover||"",isbn:M.isbn||"",pageCount:M.pageCount||"",rating:M.rating||"",amountPaid:M.amountPaid||"",dateRead:M.dateRead||"",datePurchased:M.datePurchased||"",msrp:M.msrp||"",specialType:M.specialType||"",specialVolumes:M.specialVolumes||"",collectiblePrice:M.collectiblePrice||"",amazonURL:M.amazonURL||"",read:!!M.read,hidden:!!M.hidden}}));we({open:!0,index:0,items:X})},Me=(T,H,X="text")=>{we(M=>{const B=[...M.items],ye={...B[M.index]};return ye.data={...ye.data,[T]:X==="checkbox"?!!H:H},B[M.index]=ye,{...M,items:B}})},mt=()=>{we(T=>({...T,index:Math.min(T.index+1,T.items.length-1)}))},Sn=()=>{we(T=>({...T,index:Math.max(T.index-1,0)}))};async function Qr(){if(!e)return;const T=G.items;if(!T.length){Bt();return}try{const H=T.map(X=>{const M={...X.data,pageCount:X.data.pageCount===""?"":Number(X.data.pageCount),rating:X.data.rating===""?"":Math.max(.5,Math.min(5,Number(X.data.rating))),amountPaid:X.data.amountPaid===""?"":Number(X.data.amountPaid),msrp:X.data.msrp===""?"":Number(X.data.msrp),collectiblePrice:X.data.collectiblePrice===""?"":Number(X.data.collectiblePrice),specialVolumes:X.data.specialVolumes===""?"":Number(X.data.specialVolumes),read:!!X.data.read},B=X.kind==="wishlist"?"wishlist":"library";return Wo(bt(rt,B,X.id),M)});await Promise.all(H),await Promise.all([me(),L()]),P(new Set),b(!1),Bt()}catch(H){console.error(H),alert("Failed to save bulk edits.")}}function Wt(T){const H=R.has(T.id),X=T.kind==="library",M=()=>{pe&&e?Ue(T.id):Be(T)};return h.jsxs("div",{className:"manga-card"+(T.read&&X?" read":"")+(H?" multiselect-selected":""),onClick:M,children:[h.jsx("div",{className:"manga-card-cover-wrap",children:h.jsx("img",{src:T.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),h.jsxs("div",{className:"manga-card-body",children:[h.jsx("div",{className:"manga-card-title",children:T.title||"Untitled"}),h.jsxs("div",{className:"manga-card-meta",children:[T.authors&&T.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[T.authors,h.jsx("br",{})]}),T.publisher&&T.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[T.publisher,h.jsx("br",{})]}),T.date&&T.date!=="Unknown"&&T.date]}),T.isbn&&h.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",T.isbn]}),e&&h.jsxs("div",{className:"manga-card-actions",children:[h.jsx("button",{type:"button",className:"manga-btn mini",onClick:B=>{B.stopPropagation(),Ut(T)},children:"Edit"}),h.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:B=>{B.stopPropagation(),ur(T.id,T.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},T.id)}const In=({value:T,onChange:H})=>{const[X,M]=$.useState(null),B=Math.max(0,Math.min(5,Number(T)||0)),ye=X??B,ze=Array.from({length:10},(Xe,Rt)=>(Rt+1)*.5),_t=5,nt=Array.from({length:_t},(Xe,Rt)=>Math.max(0,Math.min(1,ye-Rt)));return h.jsxs("div",{className:"star-shell",role:"group","aria-label":"Rating",children:[h.jsxs("div",{className:"star-visual",style:{"--star-count":_t},children:[h.jsx("div",{className:"star-row",children:nt.map((Xe,Rt)=>h.jsxs("div",{className:"star-icon",children:[h.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"star-base",children:h.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})}),h.jsx("div",{className:"star-fill",style:{"--pct":`${(Math.max(0,Math.min(1,Xe))*100).toFixed(1)}%`},children:h.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:h.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})})})]},Rt))}),h.jsx("div",{className:"star-hit",children:ze.map(Xe=>h.jsx("button",{type:"button","aria-label":`${Xe} stars`,onMouseEnter:()=>M(Xe),onMouseLeave:()=>M(null),onClick:()=>H(Xe)},Xe))})]}),h.jsx("div",{className:"star-value",children:ye?ye.toFixed(1):"--"}),h.jsx("button",{type:"button",className:"star-clear",onClick:()=>H(""),"aria-label":"Clear rating",children:"clear"})]})},Kn=t==="library"?Se:Ve,Yr=(T,H)=>{if(!T.length)return;const X=Array.from(T.reduce((nt,Xe)=>(Object.keys(Xe).forEach(Rt=>nt.add(Rt)),nt),new Set)),M=nt=>{const Xe=nt==null?"":String(nt);return/[",\n]/.test(Xe)?`"${Xe.replace(/"/g,'""')}"`:Xe},B=[X.join(",")].concat(T.map(nt=>X.map(Xe=>M(nt[Xe])).join(","))),ye=new Blob([B.join(`
`)],{type:"text/csv"}),ze=URL.createObjectURL(ye),_t=document.createElement("a");_t.href=ze,_t.download=H,_t.click(),URL.revokeObjectURL(ze)},Y=(T,H)=>{const X=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),M=URL.createObjectURL(X),B=document.createElement("a");B.href=M,B.download=H,B.click(),URL.revokeObjectURL(M)},ae=async(T,H)=>{const X=(B,ye="image")=>(B||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)||ye,M=T.filter(B=>B.cover).map((B,ye)=>({url:B.cover,name:X(B.title||`manga-${ye+1}`,`manga-${ye+1}`)}));if(!M.length){alert("No images found to download.");return}try{const B=(await pw(async()=>{const{default:Ht}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Ht}},[])).default,ye=new B,ze=ye.folder("images"),_t={},nt=M.map(async(Ht,Jr)=>{try{const Pr=await(await fetch(Ht.url)).blob(),vn=(Ht.url.split(".").pop()||"jpg").split(/[?#]/)[0],_n=Ht.name||`image-${Jr+1}`;_t[_n]=(_t[_n]||0)+1;const cr=_t[_n]>1?`-${_t[_n]}`:"";ze.file(`${_n}${cr}.${vn}`,Pr)}catch(at){console.warn("Failed to fetch image",Ht.url,at)}});await Promise.all(nt);const Xe=await ye.generateAsync({type:"blob"}),Rt=URL.createObjectURL(Xe),Qn=document.createElement("a");Qn.href=Rt,Qn.download=H,Qn.click(),URL.revokeObjectURL(Rt)}catch(B){console.error("Zip download failed",B),alert("Failed to create zip. Please try again.")}};return h.jsxs("div",{className:"manga-page",children:[h.jsxs("header",{className:"manga-header",style:{flexDirection:"column",alignItems:"center",textAlign:"center"},children:[h.jsx("div",{className:"manga-header-title",style:{justifyContent:"center",gap:"0.6rem",fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Manga Library"}),h.jsx("div",{className:"manga-header-sub",style:{textAlign:"center"},children:"Library & Wishlist are managed via Firestore. This React port reuses the same collections as your original index.html."})]}),h.jsxs("div",{className:"manga-tabs",children:[h.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{i("library"),b(!1),P(new Set)},children:"Library"}),h.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{i("wishlist"),b(!1),P(new Set)},children:"Wishlist"})]}),t!=="dashboard"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-toolbar",children:[h.jsxs("div",{className:"manga-toolbar-left",children:[h.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?fe:ce,onChange:T=>t==="library"?ue(T.target.value):de(T.target.value)}),h.jsx("div",{className:"manga-counter",children:t==="library"?h.jsxs(h.Fragment,{children:["Library: ",Z.length," / ",o.length]}):h.jsxs(h.Fragment,{children:["Wishlist: ",Ve.length," / ",d.length]})})]}),h.jsxs("div",{className:"manga-toolbar-right",children:[e&&t==="library"&&h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>U(T=>!T),children:C?"Hide Hidden":"Show Hidden"}),e&&h.jsx("button",{className:"manga-btn secondary"+(pe?" active":""),onClick:Le,children:pe?"Exit Multi-select":"Multi-select"})]})]}),e&&pe&&h.jsxs("div",{className:"manga-multiselect-bar",children:[h.jsxs("span",{children:["Selected: ",h.jsx("strong",{children:R.size})]}),h.jsx("button",{className:"manga-btn",onClick:Kr,children:"Bulk Edit"}),h.jsxs("button",{className:"manga-btn secondary",onClick:()=>We("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"manga-btn",onClick:()=>We("markRead"),children:"Mark Read"}),h.jsx("button",{className:"manga-btn secondary",onClick:()=>We("markUnread"),children:"Mark Unread"})]}),h.jsx("button",{className:"manga-btn danger",onClick:()=>We("delete"),children:"Delete"})]})]}),K?h.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):V?h.jsx("div",{className:"manga-empty-state",children:V}):Kn.length===0?h.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):h.jsx("div",{className:"manga-grid",children:Kn.map(T=>Wt(T))}),e&&h.jsxs("div",{className:"manga-floating-actions",children:[h.jsxs("button",{className:"manga-btn",type:"button","aria-label":"Add item",onClick:()=>Ft(t==="wishlist"?"wishlist":"library"),children:["+ ",t==="wishlist"?"Wishlist":"Library"]}),h.jsxs("div",{className:"manga-export-actions",children:[h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Y(t==="library"?o:d,t==="library"?"manga-library.json":"manga-wishlist.json"),children:"Export JSON"}),h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Yr(t==="library"?o:d,t==="library"?"manga-library.csv":"manga-wishlist.csv"),children:"Export CSV"}),h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>ae(t==="library"?o:d,t==="library"?"manga-library-images.zip":"manga-wishlist-images.zip"),children:"Download Images"})]})]}),k&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:T=>{T.target===T.currentTarget&&tt()},children:h.jsxs("div",{className:"manga-modal",children:[h.jsx("div",{className:"manga-modal-cover-wrap",children:h.jsx("img",{src:k.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:k.title||"Untitled"}),h.jsx("button",{className:"manga-modal-close",onClick:tt,type:"button",children:"Close"})]}),h.jsxs("div",{className:"manga-modal-meta",children:[k.authors&&k.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Author(s):"})," ",k.authors,h.jsx("br",{})]}),k.publisher&&k.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Publisher:"})," ",k.publisher,h.jsx("br",{})]}),k.date&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Release:"})," ",k.date,h.jsx("br",{})]}),k.isbn&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"ISBN:"})," ",k.isbn,h.jsx("br",{})]})]}),h.jsxs("div",{className:"manga-modal-details",children:[k.pageCount&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Pages:"})," ",k.pageCount,h.jsx("br",{})]}),h.jsxs("div",{style:{margin:"6px 0"},children:[h.jsx("strong",{children:"Rating:"})," ",h.jsx(In,{value:k.rating||"",onChange:T=>yn(k,T)})]}),k.amountPaid&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Amount Paid:"})," $",k.amountPaid,h.jsx("br",{})]}),k.msrp&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"MSRP:"})," $",k.msrp,h.jsx("br",{})]}),k.collectiblePrice&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Collectible:"})," $",k.collectiblePrice,h.jsx("br",{})]}),k.read&&k.dateRead&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Date Read:"})," ",k.dateRead,h.jsx("br",{})]}),k.amazonURL&&h.jsx("div",{style:{marginTop:"6px"},children:h.jsx("a",{href:k.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),h.jsxs("div",{className:"manga-modal-footer",style:{gap:"10px",alignItems:"center"},children:[h.jsx("div",{children:k.kind==="library"&&k.read?"Marked as read in your library.":k.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."}),k.kind==="library"&&h.jsx(h.Fragment,{children:k.read?h.jsx("button",{className:"manga-btn mini secondary",disabled:qn,onClick:()=>$t(k,!1),type:"button",children:"Mark as unread"}):h.jsx("button",{className:"manga-btn mini",disabled:qn,onClick:()=>$t(k,!0),type:"button",children:"Mark as read"})})]})]})]})}),e&&N.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:T=>{T.target===T.currentTarget&&ct()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:N.mode==="add"?"Add Entry":"Edit Entry"}),h.jsx("button",{className:"manga-modal-close",onClick:ct,type:"button",children:"Close"})]}),h.jsxs("div",{className:"admin-form-layout",children:[h.jsx("div",{className:"admin-cover-frame",children:h.jsx("img",{src:N.data.cover||"https://imgur.com/chUgq4W.png",alt:"Cover preview"})}),h.jsxs("div",{className:"admin-form-fields",children:[h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:N.data.title,onChange:T=>Ke("title",T.target.value)})]})}),E.length>0&&h.jsx("div",{className:"title-suggestions",children:E.map((T,H)=>h.jsx("button",{type:"button",className:"manga-btn mini",onClick:()=>Ke("title",T),children:T},T+H))}),h.jsxs("div",{className:"admin-row two",style:{alignItems:"flex-end",marginTop:"-8px"},children:[h.jsxs("div",{children:[h.jsxs("div",{className:"manga-modal-subtitle",style:{marginBottom:"6px"},children:["Entry ",De+1," / ",Math.max(1,ie.length||1)]}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>De>0&&lr(De-1),disabled:De===0,children:"Previous"}),h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>ie.length&&De<ie.length-1?lr(De+1):null,disabled:!ie.length||De===ie.length-1,children:"Next"})]})]}),h.jsxs("div",{style:{textAlign:"right"},children:[h.jsx("button",{className:"manga-btn",type:"button",onClick:mn,disabled:!di(N.data.title||"").vol,children:"Add New Volume"}),h.jsx("div",{className:"manga-stat-sub",style:{marginTop:"4px"},children:"Auto-fills the next volume number for this series."})]})]}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:N.data.authors,onChange:T=>Ke("authors",T.target.value)})]})}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:N.data.publisher,onChange:T=>Ke("publisher",T.target.value)})]})}),h.jsxs("div",{className:"admin-row three",children:[h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:N.data.date,onChange:T=>Ke("date",T.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:N.data.datePurchased,onChange:T=>Ke("datePurchased",T.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:N.data.dateRead,onChange:T=>Ke("dateRead",T.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",placeholder:"e.g. 192",value:N.data.pageCount,onChange:T=>Ke("pageCount",T.target.value)})]}),h.jsxs("label",{children:["ISBN (library only)",h.jsx("input",{type:"text",value:N.data.isbn,onChange:T=>Ke("isbn",T.target.value)})]})]}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",placeholder:"Paste image URL here",value:N.data.cover,onChange:T=>Ke("cover",T.target.value)})]})}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:N.data.amountPaid,onChange:T=>Ke("amountPaid",T.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:N.data.msrp,onChange:T=>Ke("msrp",T.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:N.data.collectiblePrice,onChange:T=>Ke("collectiblePrice",T.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",min:"0",value:N.data.specialVolumes,onChange:T=>Ke("specialVolumes",T.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:N.data.specialType,onChange:T=>Ke("specialType",T.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:N.data.amazonURL,onChange:T=>Ke("amazonURL",T.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Demographic",h.jsxs("select",{value:N.data.demographic,onChange:T=>Ke("demographic",T.target.value),children:[h.jsx("option",{value:"",children:"Select"}),h.jsx("option",{value:"Shounen",children:"Shounen"}),h.jsx("option",{value:"Seinen",children:"Seinen"}),h.jsx("option",{value:"Shoujo",children:"Shoujo"}),h.jsx("option",{value:"Josei",children:"Josei"})]})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:N.data.genre,onChange:T=>Ke("genre",T.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:N.data.subGenre,onChange:T=>Ke("subGenre",T.target.value)})]}),h.jsxs("label",{children:["Rating (1-5 stars)",h.jsx(In,{value:N.data.rating,onChange:T=>Ke("rating",T)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:N.data.read,onChange:T=>Ke("read",T.target.checked,"checkbox")}),h.jsx("span",{children:"Mark as read"})]}),h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:!!N.data.hidden,onChange:T=>Ke("hidden",T.target.checked,"checkbox")}),h.jsx("span",{children:"Hide from public"})]})]})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:ct,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:zt,type:"button",children:N.mode==="add"?"Add":"Save"})]})]})})}),e&&G.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:T=>{T.target===T.currentTarget&&Bt()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",G.index+1," / ",G.items.length,")"]}),h.jsx("button",{className:"manga-modal-close",onClick:Bt,type:"button",children:"Close"})]}),G.items.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",G.items[G.index].data.title||"Untitled"]}),h.jsxs("div",{className:"admin-form-grid",children:[h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:G.items[G.index].data.title,onChange:T=>Me("title",T.target.value)})]}),h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:G.items[G.index].data.authors,onChange:T=>Me("authors",T.target.value)})]}),h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:G.items[G.index].data.publisher,onChange:T=>Me("publisher",T.target.value)})]}),h.jsxs("label",{children:["Demographic",h.jsxs("select",{value:G.items[G.index].data.demographic,onChange:T=>Me("demographic",T.target.value),children:[h.jsx("option",{value:"",children:"Select"}),h.jsx("option",{value:"Shounen",children:"Shounen"}),h.jsx("option",{value:"Seinen",children:"Seinen"}),h.jsx("option",{value:"Shoujo",children:"Shoujo"}),h.jsx("option",{value:"Josei",children:"Josei"})]})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:G.items[G.index].data.genre,onChange:T=>Me("genre",T.target.value)})]}),h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:G.items[G.index].data.subGenre,onChange:T=>Me("subGenre",T.target.value)})]}),h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:G.items[G.index].data.date,onChange:T=>Me("date",T.target.value)})]}),h.jsxs("label",{children:["ISBN",h.jsx("input",{type:"text",value:G.items[G.index].data.isbn,onChange:T=>Me("isbn",T.target.value)})]}),h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",value:G.items[G.index].data.cover,onChange:T=>Me("cover",T.target.value)})]}),h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",value:G.items[G.index].data.pageCount,onChange:T=>Me("pageCount",T.target.value)})]}),h.jsxs("label",{children:["Rating (1-5 stars)",h.jsx(In,{value:G.items[G.index].data.rating,onChange:T=>Me("rating",T)})]}),h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:G.items[G.index].data.amountPaid,onChange:T=>Me("amountPaid",T.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:G.items[G.index].data.msrp,onChange:T=>Me("msrp",T.target.value)})]}),h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:G.items[G.index].data.collectiblePrice,onChange:T=>Me("collectiblePrice",T.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:G.items[G.index].data.datePurchased,onChange:T=>Me("datePurchased",T.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:G.items[G.index].data.dateRead,onChange:T=>Me("dateRead",T.target.value)})]}),h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:G.items[G.index].data.specialType,onChange:T=>Me("specialType",T.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",value:G.items[G.index].data.specialVolumes,onChange:T=>Me("specialVolumes",T.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:G.items[G.index].data.amazonURL,onChange:T=>Me("amazonURL",T.target.value)})]}),h.jsxs("label",{className:"checkbox-row",children:[h.jsx("input",{type:"checkbox",checked:G.items[G.index].data.read,onChange:T=>Me("read",T.target.checked,"checkbox")}),h.jsx("span",{children:"Marked as read"})]}),h.jsxs("label",{className:"checkbox-row",children:[h.jsx("input",{type:"checkbox",checked:!!G.items[G.index].data.hidden,onChange:T=>Me("hidden",T.target.checked,"checkbox")}),h.jsx("span",{children:"Hidden from public"})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[h.jsxs("div",{children:[h.jsx("button",{className:"manga-btn secondary",onClick:Sn,type:"button",disabled:G.index===0,children:"Previous"}),h.jsx("button",{className:"manga-btn secondary",onClick:mt,type:"button",disabled:G.index===G.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:Bt,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:Qr,type:"button",children:"Save Edits"})]})]})]})]})})}),h.jsx("datalist",{id:"adminTitleSuggestions",children:g.map(T=>h.jsx("option",{value:T},T))})]})}const HP="https://imokmalworker.imokissick.workers.dev/?url=",qP="im_ok",xv=300,GP={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function KP(r){const e=GP[r.status]||(typeof r.status=="string"?r.status.toLowerCase():"unknown");return{id:r.anime_id||r.id,title:r.anime_title||r.title||"Untitled",episodes:r.anime_num_episodes??r.episodes??null,status:e,score:r.score??null,image:r.anime_image_path||r.image_url||r.anime_img||r.picture||null}}function Tv(){return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null}]}async function QP(r,e){const t=`https://myanimelist.net/animelist/${r}/load.json?status=7&offset=${e}`,i=await fetch(`${HP}${encodeURIComponent(t)}`);if(!i.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return i.json()}async function YP(r=qP){const e=[];try{let t=0;for(;;){const i=await QP(r,t);if(!Array.isArray(i)||i.length===0||(e.push(...i),i.length<xv))break;t+=xv}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),Tv()}return e.length?e.map(KP):Tv()}function JP(){const{admin:r}=da(),e=de=>de?de.toString().replace(/_/g," ").replace(/\b\w/g,pe=>pe.toUpperCase()):"Unknown",[t,i]=$.useState([]),[o,l]=$.useState([]),[d,p]=$.useState(""),[g,v]=$.useState("all"),[E,I]=$.useState(!0),[C,U]=$.useState(""),[K,J]=$.useState(null);$.useEffect(()=>{document.title="Anime | Library"},[]);const V=(de,pe="image")=>(de||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80)||pe,oe=async()=>{const de=t.filter(pe=>pe.image).map((pe,b)=>({url:pe.image,name:V(pe.title||`anime-${b+1}`,`anime-${b+1}`)}));if(!de.length){alert("No images found to download.");return}try{const pe=(await pw(async()=>{const{default:x}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:x}},[])).default,b=new pe,R=b.folder("images"),P={};await Promise.all(de.map(async(x,ie)=>{try{const De=await(await fetch(x.url)).blob(),Ae=(x.url.split(".").pop()||"jpg").split(/[?#]/)[0],G=x.name||`image-${ie+1}`;P[G]=(P[G]||0)+1;const we=P[G]>1?`-${P[G]}`:"";R.file(`${G}${we}.${Ae}`,De)}catch(Ne){console.warn("Failed to fetch image",x.url,Ne)}}));const k=await b.generateAsync({type:"blob"}),D=URL.createObjectURL(k),N=document.createElement("a");N.href=D,N.download="anime-images.zip",N.click(),URL.revokeObjectURL(D)}catch(pe){console.error("Zip download failed",pe),alert("Failed to create zip. Please try again.")}};$.useEffect(()=>{async function de(){try{const pe=await YP();i(pe),l(pe)}catch(pe){console.error(pe),U("Failed to load data from MAL.")}finally{I(!1)}}de()},[]);const fe=de=>{switch((de||"unknown").toLowerCase()){case"watching":return 0;case"completed":return 1;case"on_hold":return 2;case"plan_to_watch":return 3;case"dropped":return 4;default:return 5}};$.useEffect(()=>{let de=[...t];if(g!=="all"&&(de=de.filter(pe=>(pe.status||"").toLowerCase()===g)),d){const pe=d.toLowerCase();de=de.filter(b=>(b.title||"").toLowerCase().includes(pe))}de.sort((pe,b)=>{const R=fe(pe.status),P=fe(b.status);return R!==P?R-P:(pe.title||"").localeCompare(b.title||"")}),l(de)},[t,g,d]);const ue=$.useMemo(()=>{const de=t.length,b=t.reduce((k,D)=>k+(Number.isFinite(D.episodes)?Number(D.episodes):0),0)*.4,R={watching:0,completed:0,on_hold:0,dropped:0,plan_to_watch:0,unknown:0};t.forEach(k=>{const D=(k.status||"unknown").toLowerCase();R[D]!=null?R[D]+=1:R.unknown+=1});const P=t.reduce((k,D)=>Number.isFinite(D.score)?k+D.score:k,0)/Math.max(1,t.filter(k=>Number.isFinite(k.score)).length||1);return{total:de,byStatus:R,avgScore:Number.isFinite(P)?P:0,totalHours:b}},[t]),ce=de=>{const pe=de.image||"https://imgur.com/chUgq4W.png";return h.jsxs("article",{className:"anime-card",onClick:()=>J(de),children:[h.jsxs("div",{className:"anime-cover-wrap",children:[h.jsx("img",{className:"anime-cover",src:pe,alt:de.title,loading:"lazy",decoding:"async"}),h.jsx("div",{className:`badge-status ${(de.status||"unknown").toLowerCase()}`,children:e(de.status)}),de.score!=null&&h.jsx("div",{className:"badge-score",children:de.score})]}),h.jsxs("div",{className:"anime-meta",children:[h.jsx("div",{className:"anime-title",children:de.title}),h.jsx("div",{className:"anime-sub",children:de.episodes?`${de.episodes} episodes`:"Episodes: ?"}),h.jsxs("div",{className:"anime-progress",children:["Status: ",e(de.status)]})]})]},de.id||de.title)};return h.jsxs("main",{className:"anime-page",children:[h.jsxs("div",{className:"anime-content",children:[h.jsxs("header",{className:"anime-header",style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%"},children:[h.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[h.jsx("h1",{className:"anime-title",style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Anime Library"}),h.jsx("p",{className:"anime-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"MAL-synced overview of your shows"})]}),r&&h.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:h.jsx("button",{className:"stat-link",type:"button",onClick:oe,children:"Download Images"})})]}),h.jsxs("div",{className:"anime-stats",children:[h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Total Entries"}),h.jsx("div",{className:"anime-stat-value",children:ue.total})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Watching"}),h.jsx("div",{className:"anime-stat-value",children:ue.byStatus.watching})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Completed"}),h.jsx("div",{className:"anime-stat-value",children:ue.byStatus.completed})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Plan to Watch"}),h.jsx("div",{className:"anime-stat-value",children:ue.byStatus.plan_to_watch})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Avg. Score"}),h.jsx("div",{className:"anime-stat-value",children:ue.avgScore?ue.avgScore.toFixed(1):""})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Hours Watched (est.)"}),h.jsx("div",{className:"anime-stat-value",children:ue.totalHours?ue.totalHours.toFixed(1):"0.0"})]})]}),h.jsxs("section",{className:"anime-toolbar",children:[h.jsx("input",{type:"text",placeholder:"Search anime by title...",value:d,onChange:de=>p(de.target.value),className:"anime-input"}),h.jsxs("select",{value:g,onChange:de=>v(de.target.value),className:"anime-select",children:[h.jsx("option",{value:"all",children:"All statuses"}),h.jsx("option",{value:"watching",children:"Watching"}),h.jsx("option",{value:"completed",children:"Completed"}),h.jsx("option",{value:"on_hold",children:"On Hold"}),h.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"}),h.jsx("option",{value:"dropped",children:"Dropped"})]})]}),E&&h.jsx("div",{className:"loading",children:"Loading anime list from MAL..."}),C&&h.jsx("div",{className:"error-state",children:C}),!E&&!C&&h.jsx(h.Fragment,{children:o.length===0?h.jsx("div",{className:"empty-state",children:"No results match your filters yet."}):h.jsx("section",{className:"anime-grid",children:o.map(de=>ce(de))})})]}),K&&h.jsx("div",{className:"modal-backdrop visible",onClick:de=>{de.target===de.currentTarget&&J(null)},children:h.jsxs("div",{className:"anime-modal",children:[h.jsxs("div",{className:"anime-modal-header",children:[h.jsx("h2",{style:{color:"#ffb6c1",margin:0},children:K.title}),h.jsx("button",{className:"anime-modal-close",onClick:()=>J(null),type:"button",children:"Close"})]}),h.jsxs("div",{className:"anime-modal-body",children:[h.jsx("div",{children:h.jsx("img",{className:"anime-modal-cover",src:K.image||"https://imgur.com/chUgq4W.png",alt:K.title})}),h.jsxs("div",{className:"anime-modal-meta",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Status:"})," ",e(K.status)]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Episodes:"})," ",K.episodes?K.episodes:"Unknown"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Score:"})," ",K.score!=null?K.score:"N/A"]})]})]})]})})]})}function XP(){const r={game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:"",image:""},{admin:e}=da(),[t,i]=$.useState([]),[o,l]=$.useState(!0),[d,p]=$.useState(""),[g,v]=$.useState("all"),[E,I]=$.useState(!1),[C,U]=$.useState([]),[K,J]=$.useState(""),[V,oe]=$.useState(null),[fe,ue]=$.useState(!1),[ce,de]=$.useState(r);$.useEffect(()=>{document.title="TCG | Collection"},[]),$.useEffect(()=>{async function x(){try{const ie=Sr(rt,"tcg"),Ne=await Zi(ie),De=[];Ne.forEach(Ae=>De.push({id:Ae.id,...Ae.data()})),i(De)}catch(ie){console.error("Error loading TCG:",ie)}finally{l(!1)}}x()},[]);const pe=t.filter(x=>{if(g!=="all"&&x.game!==g)return!1;if(!d)return!0;const ie=d.toLowerCase();return(x.name||"").toLowerCase().includes(ie)||(x.setName||"").toLowerCase().includes(ie)||(x.number||"").toLowerCase().includes(ie)}),b=t.reduce((x,ie)=>{const Ne=Number(ie.quantity||1),De=Number(ie.pricePaid||0),Ae=Number(ie.estimatedValue||0);return x.totalCards+=Ne,x.totalPaid+=Ne*De,x.totalValue+=Ne*Ae,ie.game==="pokemon"&&(x.pokemon+=Ne),ie.game==="onepiece"&&(x.onepiece+=Ne),x},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),R=b.totalValue-b.totalPaid,P=(x,ie)=>{de(Ne=>({...Ne,[x]:ie}))},k=async()=>{if(!e)return;if(!ce.name.trim()){alert("Card name is required.");return}const x={game:ce.game,name:ce.name.trim(),setName:ce.setName.trim(),number:ce.number.trim(),rarity:ce.rarity.trim(),condition:ce.condition.trim(),quantity:Number(ce.quantity||1),pricePaid:Number(ce.pricePaid||0),estimatedValue:Number(ce.estimatedValue||0),image:ce.image.trim()};try{const ie=Sr(rt,"tcg");await cc(ie,x),de(r),ue(!1);const Ne=await Zi(ie),De=[];Ne.forEach(Ae=>De.push({id:Ae.id,...Ae.data()})),i(De)}catch(ie){console.error("Error adding card:",ie),alert("Failed to save card.")}},D=async()=>{if(!e||!V)return;if(!V.name.trim()){alert("Card name is required.");return}const x={game:V.game,name:V.name.trim(),setName:V.setName.trim(),number:V.number.trim(),rarity:V.rarity.trim(),condition:V.condition.trim(),quantity:Number(V.quantity||1),pricePaid:Number(V.pricePaid||0),estimatedValue:Number(V.estimatedValue||0),image:V.image?V.image.trim():""};try{await Wo(bt(rt,"tcg",V.id),x),i(ie=>ie.map(Ne=>Ne.id===V.id?{...Ne,...x}:Ne)),oe(null)}catch(ie){console.error("Error updating card:",ie),alert("Failed to update card.")}},N=async x=>{if(e&&window.confirm("Delete this card?"))try{await Hs(bt(rt,"tcg",x)),i(ie=>ie.filter(Ne=>Ne.id!==x))}catch(ie){console.error("Delete error:",ie),alert("Failed to delete card.")}};return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"6px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"TCG Collection"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Pokemon & One Piece TCG cards with quantities, prices, and collection value."})]}),e&&h.jsx("button",{className:"manga-btn",type:"button","aria-label":"Add card",onClick:()=>ue(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"56px",height:"56px",borderRadius:"50%",padding:0,fontSize:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),e&&fe&&h.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:x=>{x.target===x.currentTarget&&ue(!1)},children:h.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:x=>x.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Add card"}),h.jsx("button",{className:"dashboard-close",onClick:()=>ue(!1),type:"button",children:"Close"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[h.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:ce.image?h.jsx("img",{src:ce.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:ce.game,onChange:x=>P("game",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:ce.name,onChange:x=>P("name",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:ce.setName,onChange:x=>P("setName",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:ce.number,onChange:x=>P("number",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:ce.rarity,onChange:x=>P("rarity",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:ce.condition,onChange:x=>P("condition",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",min:"1",value:ce.quantity,onChange:x=>P("quantity",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:ce.pricePaid,onChange:x=>P("pricePaid",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:ce.estimatedValue,onChange:x=>P("estimatedValue",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",h.jsx("input",{type:"text",value:ce.image||"",onChange:x=>P("image",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[h.jsx("button",{onClick:()=>{de(r),ue(!1)},style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),h.jsx("button",{onClick:k,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})]})]})}),e&&V&&h.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:x=>{x.target===x.currentTarget&&oe(null)},children:h.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:x=>x.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Edit card"}),h.jsx("button",{className:"dashboard-close",onClick:()=>oe(null),type:"button",children:"Close"})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[h.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:V.image?h.jsx("img",{src:V.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:V.game,onChange:x=>oe(ie=>({...ie,game:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:V.name,onChange:x=>oe(ie=>({...ie,name:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:V.setName,onChange:x=>oe(ie=>({...ie,setName:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:V.number,onChange:x=>oe(ie=>({...ie,number:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:V.rarity,onChange:x=>oe(ie=>({...ie,rarity:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:V.condition,onChange:x=>oe(ie=>({...ie,condition:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",value:V.quantity,onChange:x=>oe(ie=>({...ie,quantity:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (each)",h.jsx("input",{type:"number",value:V.pricePaid,onChange:x=>oe(ie=>({...ie,pricePaid:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (each)",h.jsx("input",{type:"number",value:V.estimatedValue,onChange:x=>oe(ie=>({...ie,estimatedValue:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",h.jsx("input",{type:"text",value:V.image||"",onChange:x=>oe(ie=>({...ie,image:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[h.jsx("button",{onClick:()=>oe(null),style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),h.jsx("button",{onClick:D,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save changes"})]})]})}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:b.totalCards})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",b.totalPaid.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",b.totalValue.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:R>=0?"#00e676":"#ff8a80"},children:[R>=0?"+":"-","$",Math.abs(R).toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:b.pokemon})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:b.onepiece})]})]}),h.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[h.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:d,onChange:x=>p(x.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),h.jsxs("select",{value:g,onChange:x=>v(x.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[h.jsx("option",{value:"all",children:"All games"}),h.jsx("option",{value:"pokemon",children:"Pokemon only"}),h.jsx("option",{value:"onepiece",children:"One Piece only"})]})]}),o?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):pe.length===0?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):h.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:pe.map(x=>{const ie=Number(x.quantity||1),Ne=ie*Number(x.pricePaid||0),De=ie*Number(x.estimatedValue||0);return h.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem",display:"flex",flexDirection:"column",gap:"6px"},children:[x.image&&h.jsx("div",{style:{width:"100%",paddingTop:"120%",position:"relative",overflow:"hidden",borderRadius:"10px",background:"#1e0d14"},children:h.jsx("img",{src:x.image,alt:x.name||"card image",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"}})}),h.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:x.name||"Unnamed card"}),h.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:x.setName||""}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[h.jsxs("span",{children:["#",x.number||"-"]}),h.jsx("span",{children:x.rarity||""})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Cond: ",x.condition||"N/A"]}),h.jsxs("span",{children:["Qty: ",ie]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Paid: $",Ne.toFixed(2)]}),h.jsxs("span",{children:["Value: $",De.toFixed(2)]})]}),h.jsxs("div",{style:{marginTop:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem"},children:x.game==="pokemon"?"Pokemon":"One Piece"}),e&&h.jsx("button",{onClick:()=>oe({...x,pricePaid:x.pricePaid??"",estimatedValue:x.estimatedValue??"",quantity:x.quantity??1}),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"rgba(255,105,180,0.15)",color:"#ffb6c1",fontSize:"0.7rem",cursor:"pointer"},children:"Edit"})]}),e&&h.jsx("div",{style:{marginTop:"4px",display:"flex",justifyContent:"flex-end"},children:h.jsx("button",{onClick:()=>N(x.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})})]},x.id)})})]})}const Ju="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",Xu="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",Zu="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82";function Ei(r){if(!r)return null;if(r instanceof Date)return r;if(r&&typeof r.toDate=="function")return r.toDate();const e=String(r).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,d,p]=t;return new Date(Number(l),Number(d)-1,Number(p))}const i=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(i){let[,l,d,p]=i;const g=p.length===2?+`20${p}`:Number(p);return new Date(g,Number(l)-1,Number(d))}const o=new Date(e);return isNaN(o.getTime())?null:o}function xp(r){const e=(r.seriesKey||r.series||r.Series||r.title||r.Title||"").trim();return e?e.replace(/\bvolume\s+\d+.*$/i,"").replace(/\bvol\.?\s+\d+.*$/i,"").trim().toLowerCase():""}function ZP(r){const e=new Map;for(const t of r){const i=xp(t)||t.id;if(!e.has(i)){const g=(t.series||t.Series||t.title||t.Title||"Unknown Series").trim();e.set(i,{key:i,title:g,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const o=e.get(i);o.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;o.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(o.readVolumes+=1,o.readPages+=l);const p=Number(t.rating||t.Rating);!isNaN(p)&&p>0&&(o.ratingSum+=p,o.ratingCount+=1)}return e}function Fo(r,e,t=5){const i=new Map;for(const o of r.values()){const l=(o[e]||"").trim();if(!l)continue;const d=l.split(/[\/,]/).map(p=>p.trim()).filter(Boolean);for(const p of d)i.set(p,(i.get(p)||0)+1)}return[...i.entries()].sort((o,l)=>l[1]-o[1]).slice(0,t).map(([o,l])=>({name:o,count:l}))}function Sv(r,e){const t=Array.from({length:12},(i,o)=>{const l=new Date(e,o,1);return{key:`${e}-${o}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:o,value:0}});for(const i of r){const o=Ei(i.dateRead||i.DateRead);!o||o.getFullYear()!==e||(t[o.getMonth()].value+=1)}return t}function Wh(r){const e=r.getFullYear(),t=`${r.getMonth()+1}`.padStart(2,"0"),i=`${r.getDate()}`.padStart(2,"0");return`${e}-${t}-${i}`}async function Hh(r,e){try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function eA(r){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of r){const d=Ei(l.dateRead||l.DateRead);d&&(t[d.getDay()]+=1)}if(!t.some(l=>l>0))return[];const o=t.reduce((l,d)=>Math.max(l,d),0)||1;return e.map((l,d)=>({label:l,value:t[d],pct:t[d]/o}))}function tA(r,e=8){const t=[...r.values()];t.sort((l,d)=>d.volumes-l.volumes);const i=t.slice(0,e),o=i.reduce((l,d)=>Math.max(l,d.volumes),0)||1;return i.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/o}))}function nA(r){const e=[];for(const t of r){const i=Ei(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!i)continue;const o=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:i,title:o})}return e.sort((t,i)=>t.date-i.date),e}function rA(r){const e=new Date;for(const t of r)if(t.date>=e)return t;return r[r.length-1]||null}function iA(r){let e=0,t=0;for(const i of r){const o=Ei(i.datePurchased||i.DatePurchased),l=Ei(i.dateRead||i.DateRead);if(!o||!l)continue;const d=l-o;d<=0||(e+=d/(1e3*60*60*24),t+=1)}return t?e/t:null}function sA(r){const e=new Map;for(const t of r){const i=Ei(t.datePurchased||t.DatePurchased),o=Ei(t.dateRead||t.DateRead);if(!i||!o)continue;const l=o-i;if(l<=0)continue;const d=l/(1e3*60*60*24),p=xp(t)||t.id;e.has(p)||e.set(p,{key:p,title:t.series||t.Series||t.title||t.Title||"Untitled",total:0,count:0,min:d,max:d});const g=e.get(p);g.total+=d,g.count+=1,g.min=Math.min(g.min,d),g.max=Math.max(g.max,d)}return[...e.values()].filter(t=>t.count>0).map(t=>({...t,avg:t.total/t.count})).sort((t,i)=>i.avg-t.avg)}function oA(r){let e=0,t=0,i=0;for(const o of r){const l=Number(o.msrp||o.MSRP||0)||0,d=Number(o.amountPaid||o.AmountPaid||o.pricePaid||0)||l||0,p=Number(o.collectiblePrice||o.CollectiblePrice||0)||0;e+=l,t+=d,i+=p}return{msrpTotal:e,paidTotal:t,collectibleTotal:i}}function aA(r){const e=new Map;for(const t of r){const i=xp(t)||t.id;e.has(i)||e.set(i,{key:i,title:t.series||t.Series||t.title||t.Title||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]});const o=e.get(i);o.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,d=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,p=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,g=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;o.msrp+=l,o.paid+=d,o.collectible+=p,o.pages+=g,v&&(o.readPages+=g);const E=Number(t.rating||t.Rating);!isNaN(E)&&E>0&&o.ratings.push(E)}return[...e.values()]}function lA(r){let e=0,t=0;for(const i of r){const o=Number(i.pages||i.Pages||i.pageCount||0)||0;e+=o,(!!i.read||i.status==="Read"||i.Read===!0)&&(t+=o)}return{total:e,read:t}}function uA(r){let e=0,t=0;for(const i of r.values())i.ratingCount>0&&(e+=i.ratingSum/i.ratingCount,t+=1);return t?e/t:null}function cA({data:r}){if(!r||!r.length)return h.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=r.reduce((v,E)=>Math.max(v,E.value),0)||1,t=480,i=230,o=30,l=i-o*2,d=t/Math.max(r.length-1,1),p=r.map((v,E)=>{const I=E*d,C=i-o-v.value/e*l;return{...v,x:I,y:C}}),g=p.map((v,E)=>E===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return h.jsx("div",{className:"line-chart",children:h.jsxs("svg",{viewBox:`0 0 ${t} ${i}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,E)=>{const I=i-o-v*l;return h.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:I,y2:I},`h-${E}`)}),p.map((v,E)=>h.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:o/2,y2:i-o/2},`v-${E}`)),h.jsx("path",{className:"line-path",d:g}),p.map((v,E)=>h.jsxs("g",{children:[h.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),h.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),h.jsx("text",{className:"line-label",x:v.x,y:i-4,children:v.label})]},E))]})})}function dA({data:r}){return!r||!r.length?h.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):h.jsx("div",{className:"weekday-bars",children:r.map(e=>h.jsxs("div",{className:"weekday-col",children:[h.jsx("div",{className:"weekday-count",children:e.value}),h.jsx("div",{className:"weekday-bar-vert",children:h.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),h.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function hA(r,e){const t=r.getFullYear(),i=r.getMonth(),l=new Date(t,i,1).getDay(),d=new Date(t,i+1,0).getDate(),p=new Map;for(const v of e){const E=v.date;if(E.getFullYear()===t&&E.getMonth()===i){const I=E.getDate();p.has(I)||p.set(I,[]),p.get(I).push(v)}}const g=[];for(let v=0;v<l;v++)g.push({type:"pad"});for(let v=1;v<=d;v++)g.push({type:"day",day:v,releases:p.get(v)||[]});return g}function fA(){const{user:r,admin:e,loading:t}=da(),[i,o]=$.useState([]),[l,d]=$.useState([]),[p,g]=$.useState(!0),[v,E]=$.useState(null),[I,C]=$.useState("-"),[U,K]=$.useState({yearly:Ju,release:Xu,activity:Zu}),[J,V]=$.useState(!1),[oe,fe]=$.useState(""),[ue,ce]=$.useState([]),[de,pe]=$.useState(!1),b=async()=>{if(e)try{pe(!0);const ae=(await Zi(Sr(rt,"admins"))).docs.map(T=>({uid:T.id,...T.data()}));ce(ae)}catch(Y){console.error("Failed to refresh admins",Y)}finally{pe(!1)}},R=async()=>{const Y=oe.trim();if(!Y){alert("Enter a UID to grant admin.");return}try{await Yu(bt(rt,"admins",Y),{uid:Y,role:"admin",grantedBy:(r==null?void 0:r.uid)||"manual",grantedAt:new Date().toISOString()},{merge:!0});try{await Yu(bt(rt,"roles",Y),{admin:!0,updatedAt:new Date().toISOString()},{merge:!0})}catch(ae){console.warn("Legacy roles write skipped (no permission):",ae==null?void 0:ae.message)}fe(""),await b()}catch(ae){console.error("Grant admin failed",ae),alert("Failed to grant admin.")}},P=async Y=>{const ae=(Y||oe).trim();if(!ae){alert("Enter a UID to revoke admin.");return}try{await Hs(bt(rt,"admins",ae)),await Hs(bt(rt,"roles",ae)),Y||fe(""),await b()}catch(T){console.error("Revoke admin failed",T),alert("Failed to revoke admin.")}},[k,D]=$.useState(!1),[N,x]=$.useState(()=>new Date),[ie,Ne]=$.useState({open:!1,type:null}),De=new Date().getFullYear(),Ae=$.useRef(null),G=$.useRef(null),we=$.useRef("");$.useEffect(()=>{document.title="Dashboard"},[]),$.useEffect(()=>{typeof window>"u"||(Ae.current=localStorage.getItem("dashboard-yearly-posted"),G.current=localStorage.getItem("dashboard-release-posted"),we.current=localStorage.getItem("dashboard-activity-posted")||"")},[]),$.useEffect(()=>{if(!e)return;const Y=bt(rt,"settings","webhooks");(async()=>{try{const ae=await xf(Y);if(ae.exists()){const T=ae.data();K({yearly:T.yearly||Ju,release:T.release||Xu,activity:T.activity||Zu})}else await Yu(Y,{yearly:Ju,release:Xu,activity:Zu})}catch(ae){console.error("Failed to load webhook settings",ae)}})()},[e]),$.useEffect(()=>{if(!e)return;let Y=!1;return(async()=>{try{pe(!0);const ae=await Zi(Sr(rt,"admins"));if(Y)return;const T=ae.docs.map(H=>({uid:H.id,...H.data()}));ce(T)}catch(ae){console.error("Failed to load admins",ae)}finally{Y||pe(!1)}})(),()=>{Y=!0}},[e]),$.useEffect(()=>{let Y=!1;async function ae(){if(!r||!e){o([]),d([]),E(null),g(!1);return}try{g(!0);const[T,H]=await Promise.all([Zi(Sr(rt,"library")),Zi(Sr(rt,"wishlist"))]);if(Y)return;o(T.docs.map(X=>({id:X.id,...X.data()}))),d(H.docs.map(X=>({id:X.id,...X.data()}))),E(null)}catch(T){console.error(T),Y||E("Failed to load dashboard data.")}finally{Y||g(!1)}}return ae(),()=>{Y=!0}},[r,e]);const me=$.useMemo(()=>{const Y=i.length,ae=i.filter(gt=>!!gt.read||gt.status==="Read"||gt.Read===!0).length,T=Y-ae,H=Y?Math.round(ae/Y*100):0,X=l.length,M=ZP(i),B=Sv(i,De),ye=Sv(i,De-1),ze=B.reduce((gt,Ar)=>gt+Ar.value,0),_t=eA(i),nt=tA(M),Xe=nA(l),Rt=rA(Xe),Qn=iA(i),Ht=oA(i),Jr=lA(i),at=uA(M),Pr=sA(i),vn=Fo(M,"publisher",5),_n=Fo(M,"genre",5),cr=Fo(M,"demographic",5),Ti=aA(i),On=[...i].map(gt=>{const Ar=Ei(gt.dateRead||gt.DateRead)||Ei(gt.datePurchased||gt.DatePurchased);return Ar?{title:gt.title||gt.Title||gt.series||gt.Series||"Untitled",type:gt.dateRead||gt.DateRead?"Read":"Purchased",date:Ar}:null}).filter(Boolean).sort((gt,Ar)=>Ar.date-gt.date).slice(0,12);return{totalLibrary:Y,readCount:ae,unreadCount:T,readPct:H,wishlistCount:X,seriesMap:M,monthlyReads:B,prevYearReads:ye,currentYearReadsTotal:ze,weekdayBreakdown:_t,topSeriesBars:nt,releases:Xe,nextRelease:Rt,avgDays:Qn,purchaseToReadSeries:Pr,collectionValue:Ht,pages:Jr,avgRating:at,topPublishers:vn,topGenres:_n,topDemographics:cr,seriesAggregates:Ti,activity:On}},[i,l,De]),{totalLibrary:L,readCount:Z,unreadCount:Se,readPct:Ve,wishlistCount:Le,seriesMap:Ue,monthlyReads:We,prevYearReads:Be,currentYearReadsTotal:tt,weekdayBreakdown:ct,topSeriesBars:pn,releases:Ft,nextRelease:Ut,avgDays:Ke,purchaseToReadSeries:lr,collectionValue:mn,pages:zt,avgRating:ur,topPublishers:qn,topGenres:gn,topDemographics:Bt,seriesAggregates:Gn,activity:yn}=me,$t=Ut?Ut.date:null,Kr=!!v;if($.useEffect(()=>{if(!Be||!Be.length)return;const Y=De-1,ae=Be.reduce((M,B)=>M+B.value,0);if(!ae||(Ae.current?parseInt(Ae.current,10):null)===Y)return;const H=Be.map(M=>`${M.label}: ${M.value}`).join(", "),X=`Yearly reads summary for ${Y}: ${ae} total. Breakdown: ${H}`;Hh(U.yearly,X).then(()=>{Ae.current=String(Y),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String(Y))})},[Be,De]),$.useEffect(()=>{if(!Ut||!Ft.length)return;const Y=Wh(Ut.date),ae=Wh(new Date);if(Y>ae||G.current===Y)return;const T=Ft.filter(X=>Wh(X.date)===Y);if(!T.length)return;const H=`Wishlist releases for ${Y}:
${T.map(X=>`- ${X.title}`).join(`
`)}`;Hh(U.release,H).then(()=>{G.current=Y,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",Y)})},[Ut,Ft]),$.useEffect(()=>{var H,X;if(!e||!yn||!yn.length)return;const Y=yn[0];if(!Y||!Y.date)return;const ae=`${Y.type}-${Y.title}-${((X=(H=Y.date).toISOString)==null?void 0:X.call(H))||Y.date}`;if(we.current===ae)return;we.current=ae;const T=`Activity: ${Y.type}  ${Y.title} (${Y.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})`;Hh(U.activity,T).then(()=>{typeof window<"u"&&localStorage.setItem("dashboard-activity-posted",ae)})},[yn,e,U]),$.useEffect(()=>{if(!$t){C("-");return}const Y=()=>{const T=$t-new Date;if(T<=0){C("Released");return}const H=Math.floor(T/1e3),X=Math.floor(H/86400),M=Math.floor(H%86400/3600).toString().padStart(2,"0"),B=Math.floor(H%3600/60).toString().padStart(2,"0"),ye=Math.floor(H%60).toString().padStart(2,"0");C(`${X}d ${M}:${B}:${ye}`)};Y();const ae=setInterval(Y,1e3);return()=>clearInterval(ae)},[$t]),t)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"Checking permissions..."})]})});if(!r||!e)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-locked",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(p)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),v?h.jsx("p",{className:"error",children:v}):h.jsx("p",{children:"Loading stats..."})]})});const Me=L+Le,mt=Me?Math.round(L/Me*100):0,Sn=[...Ue.values()].filter(Y=>Y.ratingCount>0).map(Y=>({title:Y.title,avg:Y.ratingSum/Y.ratingCount,count:Y.ratingCount})).sort((Y,ae)=>ae.avg-Y.avg||ae.count-Y.count).slice(0,3);function Qr(){if($t)x(new Date($t.getFullYear(),$t.getMonth(),1));else if(Ft.length){const Y=Ft[0].date;x(new Date(Y.getFullYear(),Y.getMonth(),1))}D(!0)}function Wt(Y){Ne({open:!0,type:Y})}function In(){Ne({open:!1,type:null})}const Kn=hA(N,Ft);function Yr(){const Y=ie.type;if(!Y)return null;if(Y==="publishers"){const ae=[...Fo(Ue,"publisher",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Publishers by Series"}),ae.length===0?h.jsx("p",{children:"No publisher data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Publisher"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:ae.map((T,H)=>h.jsxs("tr",{children:[h.jsx("td",{children:H+1}),h.jsx("td",{children:T.name}),h.jsx("td",{children:T.count})]},T.name+H))})]})]})}if(Y==="genres"){const ae=[...Fo(Ue,"genre",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Genres by Series"}),ae.length===0?h.jsx("p",{children:"No genre data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Genre"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:ae.map((T,H)=>h.jsxs("tr",{children:[h.jsx("td",{children:H+1}),h.jsx("td",{children:T.name}),h.jsx("td",{children:T.count})]},T.name+H))})]})]})}if(Y==="demographics"){const ae=[...Fo(Ue,"demographic",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Demographics by Series"}),ae.length===0?h.jsx("p",{children:"No demographic data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Demographic"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:ae.map((T,H)=>h.jsxs("tr",{children:[h.jsx("td",{children:H+1}),h.jsx("td",{children:T.name}),h.jsx("td",{children:T.count})]},T.name+H))})]})]})}if(Y==="timeToRead"){const ae=lr||[];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Average Time From Purchase to Read"}),Ke==null?h.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):h.jsxs(h.Fragment,{children:[h.jsxs("p",{children:["On average, it takes"," ",h.jsxs("strong",{children:[Ke.toFixed(1)," days"]})," from purchase to finishing a volume."]}),ae.length>0?h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Series"}),h.jsx("th",{children:"Avg Days"}),h.jsx("th",{children:"Longest"}),h.jsx("th",{children:"Shortest"}),h.jsx("th",{children:"Reads Count"})]})}),h.jsx("tbody",{children:ae.map(T=>h.jsxs("tr",{children:[h.jsx("td",{children:T.title}),h.jsxs("td",{children:[T.avg.toFixed(1)," days"]}),h.jsxs("td",{children:[Math.round(T.max)," days"]}),h.jsxs("td",{children:[Math.round(T.min)," days"]}),h.jsx("td",{children:T.count})]},T.key))})]}):h.jsx("p",{style:{marginTop:8},children:"No series-level data yet."})]})]})}if(Y==="collectionValue"){const{msrpTotal:ae,paidTotal:T}=mn,H=ae-T,X=ae>0?(T/ae*100).toFixed(1):"-",M=[...Gn].filter(B=>B.msrp||B.paid||B.collectible).sort((B,ye)=>ye.msrp+ye.collectible-(B.msrp+B.collectible));return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Collection Value Breakdown"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total MSRP"}),h.jsxs("td",{children:["$",ae.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Total Paid"}),h.jsxs("td",{children:["$",T.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Difference"}),h.jsxs("td",{children:["$",H.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Paid vs MSRP"}),h.jsx("td",{children:X==="-"?"-":`${X}%`})]})]})}),M.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"MSRP"}),h.jsx("th",{children:"Paid"}),h.jsx("th",{children:"Collectible"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:M.map((B,ye)=>h.jsxs("tr",{children:[h.jsx("td",{children:B.title}),h.jsxs("td",{children:["$",B.msrp.toFixed(2)]}),h.jsxs("td",{children:["$",B.paid.toFixed(2)]}),h.jsx("td",{children:B.collectible?`$${B.collectible.toFixed(2)}`:"--"}),h.jsx("td",{children:B.books})]},B.title+ye))})]})]})]})}if(Y==="pages"){const ae=[...Gn].filter(T=>T.pages>0).map(T=>({...T,pct:T.pages?Math.round(T.readPages/T.pages*100):0})).sort((T,H)=>H.pages-T.pages);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Pages Read vs Total"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total Pages"}),h.jsx("td",{children:zt.total.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Pages Read"}),h.jsx("td",{children:zt.read.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Completion"}),h.jsx("td",{children:zt.total?`${(zt.read/zt.total*100).toFixed(1)}%`:"-"})]})]})}),ae.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Read Pages"}),h.jsx("th",{children:"Total Pages"}),h.jsx("th",{children:"% Read"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:ae.map((T,H)=>h.jsxs("tr",{children:[h.jsx("td",{children:T.title}),h.jsx("td",{children:T.readPages.toLocaleString()}),h.jsx("td",{children:T.pages.toLocaleString()}),h.jsxs("td",{children:[T.pct,"%"]}),h.jsx("td",{children:T.books})]},T.title+H))})]})]})]})}if(Y==="ratings"){const ae=[...Gn].map(T=>{if(!T.ratings.length)return null;const H=T.ratings.reduce((X,M)=>X+M,0)/T.ratings.length;return{title:T.title,avg:H,count:T.ratings.length}}).filter(Boolean).sort((T,H)=>H.avg-T.avg||H.count-T.count);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Ratings Overview"}),ur==null?h.jsx("p",{children:"No ratings have been recorded yet."}):h.jsxs("p",{children:["Average series rating across rated series is"," ",h.jsx("strong",{children:ur.toFixed(2)}),"."]}),ae.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Avg"}),h.jsx("th",{children:"Ratings"})]})}),h.jsx("tbody",{children:ae.map((T,H)=>h.jsxs("tr",{children:[h.jsx("td",{children:T.title}),h.jsx("td",{children:T.avg.toFixed(2)}),h.jsx("td",{children:T.count})]},T.title+H))})]})]})]})}return Y==="releases"?h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Wishlist Releases"}),Ft.length===0?h.jsx("p",{children:"No wishlist releases found."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Date"}),h.jsx("th",{children:"Title"})]})}),h.jsx("tbody",{children:Ft.map((ae,T)=>h.jsxs("tr",{children:[h.jsx("td",{children:ae.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),h.jsx("td",{children:ae.title})]},T))})]})]}):null}return h.jsxs("div",{className:"page dashboard-page",children:[h.jsxs("header",{className:"dashboard-header",style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",textAlign:"center",width:"100%"},children:[h.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Dashboard"}),h.jsx("p",{className:"dashboard-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"Admin-only analytics for your manga library and wishlist."})]}),e&&h.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:h.jsx("button",{className:"stat-link",onClick:()=>V(!0),type:"button",children:"Admin Settings"})})]}),h.jsx("section",{id:"dashboardSection",className:"page-section active",children:h.jsxs("div",{className:"dashboard-grid",children:[h.jsxs("div",{className:"stat-stack",children:[h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Total Library Books"}),h.jsx("div",{className:"stat-value",children:L}),h.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Wishlist Items"}),h.jsx("div",{className:"stat-value",children:Le}),h.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Read / Unread"}),h.jsx("div",{className:"pie",style:{"--pct":`${Ve*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[Ve,"%"]})}),h.jsxs("div",{className:"stat-value",children:[Z," read / ",Se," unread"]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Wt("ratings"),children:[h.jsx("h3",{children:"Ratings"}),h.jsx("div",{className:"stat-value",children:ur==null?"-":ur.toFixed(2)}),h.jsx("div",{className:"stat-sub",children:"Average across rated series."}),h.jsx("div",{className:"stat-list compact",children:Sn.length?Sn.map((Y,ae)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:ae+1}),h.jsx("span",{className:"stat-name",children:Y.title}),h.jsx("span",{className:"stat-count",children:Y.avg.toFixed(2)})]},Y.title+ae)):h.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Wt("pages"),children:[h.jsx("h3",{children:"Page Count Read / Total"}),h.jsxs("div",{className:"stat-value",children:[zt.read.toLocaleString()," / ",zt.total.toLocaleString()]}),h.jsx("div",{className:"stat-sub",children:zt.total?`${(zt.read/zt.total*100).toFixed(1)}% read`:"-"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Library vs Wishlist"}),h.jsx("div",{className:"pie",style:{"--pct":`${mt*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[mt,"%"]})}),h.jsxs("div",{className:"stat-value",children:[L," / ",Le]}),h.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Wt("demographics"),children:[h.jsx("h3",{children:"Top Demographics"}),h.jsx("div",{className:"stat-list",children:Bt.length?Bt.slice(0,3).map((Y,ae)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:ae+1}),h.jsx("span",{className:"stat-name",children:Y.name}),h.jsx("span",{className:"stat-count",children:Y.count})]},Y.name)):h.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Wt("publishers"),children:[h.jsx("h3",{children:"Top Publishers"}),h.jsx("div",{className:"stat-list",children:qn.length?qn.slice(0,3).map((Y,ae)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:ae+1}),h.jsx("span",{className:"stat-name",children:Y.name}),h.jsx("span",{className:"stat-count",children:Y.count})]},Y.name)):h.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Wt("genres"),children:[h.jsx("h3",{children:"Top Genres"}),h.jsx("div",{className:"stat-list",children:gn.length?gn.slice(0,3).map((Y,ae)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:ae+1}),h.jsx("span",{className:"stat-name",children:Y.name}),h.jsx("span",{className:"stat-count",children:Y.count})]},Y.name)):h.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>{Qr()},children:[h.jsx("h3",{children:"Next Wishlist Release"}),h.jsx("div",{className:"stat-value next-release",children:Ut?Ut.title:"No upcoming releases"}),h.jsxs("div",{className:"stat-sub",children:[$t?$t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",h.jsx("br",{}),h.jsx("span",{id:"statNextCountdown",children:I})]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Wt("collectionValue"),style:{textAlign:"center"},children:[h.jsx("h3",{children:"Collection Pricing"}),h.jsxs("div",{className:"stat-value stat-msrp",children:["$",mn.msrpTotal.toFixed(2)]}),h.jsxs("div",{className:"stat-value stat-paid",children:["$",mn.paidTotal.toFixed(2),mn.msrpTotal>0&&h.jsxs("span",{className:"stat-paid-pct",children:["(",((1-mn.paidTotal/mn.msrpTotal)*100).toFixed(1),"% off)"]})]}),h.jsxs("div",{className:"stat-value stat-collectible",children:["$",mn.collectibleTotal.toFixed(2)]}),h.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Current Year Reads"}),h.jsx("div",{className:"stat-value",children:tt}),h.jsxs("div",{className:"stat-sub",children:["Reads in ",De]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Wt("timeToRead"),children:[h.jsx("h3",{children:"Avg Days From Purchase to Read"}),h.jsx("div",{className:"stat-value",children:Ke==null?"-":`${Ke.toFixed(1)} days`}),h.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),h.jsxs("div",{className:"stat-duo",children:[h.jsxs("div",{className:"stat-card tall",children:[h.jsxs("h3",{children:["Reads Per Month (",De,")"]}),h.jsx(cA,{data:We})]}),h.jsxs("div",{className:"stat-card tall",children:[h.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),h.jsx(dA,{data:ct}),h.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),h.jsxs("div",{className:"stat-card wide",children:[h.jsx("h3",{children:"Activity Log"}),Kr&&h.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),h.jsx("div",{className:"activity-log",children:yn.length?yn.map((Y,ae)=>h.jsxs("div",{className:"activity-row",children:[h.jsx("span",{className:"activity-type",children:Y.type}),h.jsx("span",{className:"activity-title",children:Y.title}),h.jsx("span",{className:"activity-date",children:Y.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]},Y.title+ae)):h.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]})]})}),k&&h.jsx("div",{id:"calendarOverlay",onClick:()=>D(!1),children:h.jsxs("div",{id:"calendarCard",onClick:Y=>Y.stopPropagation(),children:[h.jsxs("div",{className:"calendar-header",children:[h.jsx("div",{className:"calendar-title",children:N.toLocaleString(void 0,{month:"long",year:"numeric"})}),h.jsxs("div",{className:"calendar-nav",children:[h.jsx("button",{className:"calendar-nav-btn",onClick:()=>x(new Date(N.getFullYear(),N.getMonth()-1,1)),children:"<"}),h.jsx("button",{className:"calendar-nav-btn",onClick:()=>x(new Date(N.getFullYear(),N.getMonth()+1,1)),children:">"})]})]}),h.jsxs("div",{className:"calendar-weekdays",children:[h.jsx("div",{children:"Sun"}),h.jsx("div",{children:"Mon"}),h.jsx("div",{children:"Tue"}),h.jsx("div",{children:"Wed"}),h.jsx("div",{children:"Thu"}),h.jsx("div",{children:"Fri"}),h.jsx("div",{children:"Sat"})]}),h.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:Kn.map((Y,ae)=>Y.type==="pad"?h.jsx("div",{className:"calendar-day pad"},ae):h.jsxs("div",{className:"calendar-day",children:[h.jsx("div",{className:"day-num",children:Y.day}),h.jsxs("div",{className:"calendar-releases",children:[Y.releases.slice(0,2).map((T,H)=>h.jsx("div",{className:"calendar-release",title:T.title,children:T.title},H)),Y.releases.length>2&&h.jsxs("button",{className:"calendar-more-btn",children:["+",Y.releases.length-2," more"]})]})]},ae))}),!Ft.length&&h.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),h.jsx("button",{id:"calendarClose",onClick:()=>D(!1),children:"x"})]})}),ie.open&&h.jsx("div",{id:"statDetailOverlay",onClick:In,children:h.jsxs("div",{id:"statDetailCard",onClick:Y=>Y.stopPropagation(),children:[h.jsx("button",{id:"statDetailClose",onClick:In,children:"x"}),h.jsxs("h2",{id:"statDetailTitle",children:[ie.type==="publishers"&&"Top Publishers",ie.type==="genres"&&"Top Genres",ie.type==="demographics"&&"Top Demographics",ie.type==="timeToRead"&&"Avg Time From Purchase to Read",ie.type==="collectionValue"&&"Collection Value",ie.type==="pages"&&"Pages Read vs Total",ie.type==="ratings"&&"Ratings",ie.type==="releases"&&"Wishlist Releases"]}),h.jsx("div",{id:"statDetailBody",children:Yr()})]})}),e&&J&&h.jsx("div",{className:"dashboard-modal-backdrop visible",onClick:Y=>{Y.target===Y.currentTarget&&V(!1)},children:h.jsxs("div",{className:"dashboard-modal",children:[h.jsxs("div",{className:"dashboard-modal-header",children:[h.jsx("h3",{children:"Webhook Settings"}),h.jsx("button",{className:"dashboard-close",onClick:()=>V(!1),type:"button",children:"Close"})]}),h.jsxs("div",{className:"dashboard-modal-body",children:[h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Yearly summary webhook"}),h.jsx("input",{type:"text",value:U.yearly,onChange:Y=>K(ae=>({...ae,yearly:Y.target.value}))})]}),h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Release timer webhook"}),h.jsx("input",{type:"text",value:U.release,onChange:Y=>K(ae=>({...ae,release:Y.target.value}))})]}),h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Activity webhook"}),h.jsx("input",{type:"text",value:U.activity,onChange:Y=>K(ae=>({...ae,activity:Y.target.value}))})]}),h.jsxs("div",{className:"dashboard-input",style:{borderTop:"1px solid rgba(255,182,193,0.2)",paddingTop:8},children:[h.jsx("span",{children:"Admin UIDs"}),h.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[h.jsx("input",{type:"text",placeholder:"Enter UID",value:oe,onChange:Y=>fe(Y.target.value),style:{flex:"1 1 220px",padding:"8px 10px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.75)",color:"#ffffff"}}),h.jsx("button",{className:"stat-link",type:"button",onClick:R,children:"Grant"}),h.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>P(),children:"Revoke"})]}),h.jsx("div",{style:{marginTop:8,fontSize:"0.85rem",color:"var(--text-soft)"},children:de?h.jsx("span",{children:"Loading admins"}):ue.length===0?h.jsx("span",{children:"No admins found."}):h.jsx("ul",{style:{listStyle:"none",margin:"6px 0 0",padding:0,display:"flex",gap:6,flexDirection:"column"},children:ue.map(Y=>h.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,background:"rgba(24,5,18,0.7)",border:"1px solid rgba(255,182,193,0.18)",borderRadius:10,padding:"6px 8px"},children:[h.jsx("span",{style:{wordBreak:"break-all"},children:Y.uid}),h.jsx("button",{className:"dashboard-close",type:"button",onClick:()=>P(Y.uid),style:{padding:"4px 10px"},children:"Revoke"})]},Y.uid))})})]})]}),h.jsxs("div",{className:"dashboard-modal-footer",children:[h.jsx("button",{className:"stat-link",type:"button",onClick:async()=>{try{await Yu(bt(rt,"settings","webhooks"),{yearly:U.yearly||Ju,release:U.release||Xu,activity:U.activity||Zu}),V(!1)}catch(Y){console.error("Failed to save webhooks",Y),alert("Failed to save webhooks.")}},children:"Save"}),h.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>V(!1),children:"Cancel"})]})]})})]})}function pA(){const r=jc(),{user:e}=da();e&&r("/");async function t(){try{const i=new Ur;await b_(os,i),r("/")}catch(i){console.error(i),alert("Google Sign-In failed.")}}return h.jsx("div",{className:"signin-page",children:h.jsxs("div",{className:"signin-card",children:[h.jsx("h2",{className:"signin-title",children:"Welcome Back"}),h.jsx("p",{className:"signin-sub",children:"Sign in to access your dashboard & collections."}),h.jsxs("button",{className:"google-btn",onClick:t,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsxs("button",{className:"signin-cancel",onClick:()=>r("/"),children:["<"," Back to Home"]})]})})}function mA(){return h.jsxs(FP,{children:[h.jsx(zP,{}),h.jsxs(Ex,{children:[h.jsx(hi,{path:"/",element:h.jsx(wv,{})}),h.jsx(hi,{path:"/home",element:h.jsx(wv,{})}),h.jsx(hi,{path:"/manga",element:h.jsx(WP,{})}),h.jsx(hi,{path:"/anime",element:h.jsx(JP,{})}),h.jsx(hi,{path:"/tcg",element:h.jsx(XP,{})}),h.jsx(hi,{path:"/dashboard",element:h.jsx(fA,{})}),h.jsx(hi,{path:"/signin",element:h.jsx(pA,{})}),h.jsx(hi,{path:"*",element:h.jsx(_x,{to:"/home",replace:!0})})]})]})}PE.createRoot(document.getElementById("root")).render(h.jsx(Cv.StrictMode,{children:h.jsx(Px,{basename:"/base",children:h.jsx(mA,{})})}));
