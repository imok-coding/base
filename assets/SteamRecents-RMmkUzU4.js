import{r as c,j as t}from"./index-DCWv3Uw1.js";const m="https://steam-worker.imokissick.workers.dev";function x(){const[e,i]=c.useState([]),[n,r]=c.useState(!0),[s,o]=c.useState("");return c.useEffect(()=>{let a=!1;return(async()=>{try{o(""),r(!0);const l=await fetch(`${m}/steam/recent-games`);if(!l.ok)throw new Error("Unable to load recent games");const d=await l.json();a||i(d||[])}catch(l){a||o(l.message||"Recent games unavailable")}finally{a||r(!1)}})(),()=>{a=!0}},[]),n?t.jsx("div",{className:"steam-panel",children:"Loading recent games..."}):s?t.jsx("div",{className:"steam-panel",children:s}):t.jsxs("div",{className:"steam-panel",children:[t.jsx("h4",{children:"Recently played"}),t.jsxs("div",{className:"recent-grid",children:[e.map(a=>t.jsx(p,{game:a},a.appid)),e.length===0&&t.jsx("p",{className:"subtext",children:"No recent playtime."})]})]})}function p({game:e}){const i=((e.playtime_forever||0)/60).toFixed(0),n=e.playtime_2weeks?(e.playtime_2weeks/60).toFixed(1):null,r=e.rtime_last_played||e.last_playtime||e.last_played||e.last_played_time||e.last_played_on||null;return r&&new Date(Number(r)*1e3).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),t.jsxs("div",{className:"recent-card",children:[t.jsx("div",{className:"recent-card__image",children:t.jsx("img",{src:`https://cdn.cloudflare.steamstatic.com/steam/apps/${e.appid}/header.jpg`,alt:e.name,loading:"lazy",onError:s=>{s.target.dataset.fallback||(s.target.dataset.fallback="1",s.target.src="https://via.placeholder.com/460x215?text=No+Image")}})}),t.jsxs("div",{className:"recent-card__body",children:[t.jsx("strong",{children:e.name}),t.jsxs("p",{className:"subtext",children:[i," hrs total ",n?`Â· ${n} hrs (2w)`:""]})]})]})}export{x as default};
