function iE(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function hv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _d={exports:{}},Fa={},wd={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg;function sE(){if(vg)return De;vg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function S(k){return k===null||typeof k!="object"?null:(k=I&&k[I]||k["@@iterator"],typeof k=="function"?k:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,K={};function F(k,G,fe){this.props=k,this.context=G,this.refs=K,this.updater=fe||L}F.prototype.isReactComponent={},F.prototype.setState=function(k,G){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,G,"setState")},F.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function H(){}H.prototype=F.prototype;function X(k,G,fe){this.props=k,this.context=G,this.refs=K,this.updater=fe||L}var re=X.prototype=new H;re.constructor=X,z(re,F.prototype),re.isPureReactComponent=!0;var te=Array.isArray,xe=Object.prototype.hasOwnProperty,ce={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function x(k,G,fe){var Ne,ae={},ue=null,_e=null;if(G!=null)for(Ne in G.ref!==void 0&&(_e=G.ref),G.key!==void 0&&(ue=""+G.key),G)xe.call(G,Ne)&&!P.hasOwnProperty(Ne)&&(ae[Ne]=G[Ne]);var Ce=arguments.length-2;if(Ce===1)ae.children=fe;else if(1<Ce){for(var ke=Array(Ce),lt=0;lt<Ce;lt++)ke[lt]=arguments[lt+2];ae.children=ke}if(k&&k.defaultProps)for(Ne in Ce=k.defaultProps,Ce)ae[Ne]===void 0&&(ae[Ne]=Ce[Ne]);return{$$typeof:r,type:k,key:ue,ref:_e,props:ae,_owner:ce.current}}function A(k,G){return{$$typeof:r,type:k.type,key:G,ref:k.ref,props:k.props,_owner:k._owner}}function b(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function V(k){var G={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(fe){return G[fe]})}var O=/\/+/g;function R(k,G){return typeof k=="object"&&k!==null&&k.key!=null?V(""+k.key):G.toString(36)}function $e(k,G,fe,Ne,ae){var ue=typeof k;(ue==="undefined"||ue==="boolean")&&(k=null);var _e=!1;if(k===null)_e=!0;else switch(ue){case"string":case"number":_e=!0;break;case"object":switch(k.$$typeof){case r:case e:_e=!0}}if(_e)return _e=k,ae=ae(_e),k=Ne===""?"."+R(_e,0):Ne,te(ae)?(fe="",k!=null&&(fe=k.replace(O,"$&/")+"/"),$e(ae,G,fe,"",function(lt){return lt})):ae!=null&&(b(ae)&&(ae=A(ae,fe+(!ae.key||_e&&_e.key===ae.key?"":(""+ae.key).replace(O,"$&/")+"/")+k)),G.push(ae)),1;if(_e=0,Ne=Ne===""?".":Ne+":",te(k))for(var Ce=0;Ce<k.length;Ce++){ue=k[Ce];var ke=Ne+R(ue,Ce);_e+=$e(ue,G,fe,ke,ae)}else if(ke=S(k),typeof ke=="function")for(k=ke.call(k),Ce=0;!(ue=k.next()).done;)ue=ue.value,ke=Ne+R(ue,Ce++),_e+=$e(ue,G,fe,ke,ae);else if(ue==="object")throw G=String(k),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return _e}function it(k,G,fe){if(k==null)return k;var Ne=[],ae=0;return $e(k,Ne,"","",function(ue){return G.call(fe,ue,ae++)}),Ne}function nt(k){if(k._status===-1){var G=k._result;G=G(),G.then(function(fe){(k._status===0||k._status===-1)&&(k._status=1,k._result=fe)},function(fe){(k._status===0||k._status===-1)&&(k._status=2,k._result=fe)}),k._status===-1&&(k._status=0,k._result=G)}if(k._status===1)return k._result.default;throw k._result}var se={current:null},q={transition:null},oe={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:q,ReactCurrentOwner:ce};function B(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:it,forEach:function(k,G,fe){it(k,function(){G.apply(this,arguments)},fe)},count:function(k){var G=0;return it(k,function(){G++}),G},toArray:function(k){return it(k,function(G){return G})||[]},only:function(k){if(!b(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},De.Component=F,De.Fragment=t,De.Profiler=o,De.PureComponent=X,De.StrictMode=i,De.Suspense=g,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,De.act=B,De.cloneElement=function(k,G,fe){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var Ne=z({},k.props),ae=k.key,ue=k.ref,_e=k._owner;if(G!=null){if(G.ref!==void 0&&(ue=G.ref,_e=ce.current),G.key!==void 0&&(ae=""+G.key),k.type&&k.type.defaultProps)var Ce=k.type.defaultProps;for(ke in G)xe.call(G,ke)&&!P.hasOwnProperty(ke)&&(Ne[ke]=G[ke]===void 0&&Ce!==void 0?Ce[ke]:G[ke])}var ke=arguments.length-2;if(ke===1)Ne.children=fe;else if(1<ke){Ce=Array(ke);for(var lt=0;lt<ke;lt++)Ce[lt]=arguments[lt+2];Ne.children=Ce}return{$$typeof:r,type:k.type,key:ae,ref:ue,props:Ne,_owner:_e}},De.createContext=function(k){return k={$$typeof:h,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:l,_context:k},k.Consumer=k},De.createElement=x,De.createFactory=function(k){var G=x.bind(null,k);return G.type=k,G},De.createRef=function(){return{current:null}},De.forwardRef=function(k){return{$$typeof:f,render:k}},De.isValidElement=b,De.lazy=function(k){return{$$typeof:E,_payload:{_status:-1,_result:k},_init:nt}},De.memo=function(k,G){return{$$typeof:v,type:k,compare:G===void 0?null:G}},De.startTransition=function(k){var G=q.transition;q.transition={};try{k()}finally{q.transition=G}},De.unstable_act=B,De.useCallback=function(k,G){return se.current.useCallback(k,G)},De.useContext=function(k){return se.current.useContext(k)},De.useDebugValue=function(){},De.useDeferredValue=function(k){return se.current.useDeferredValue(k)},De.useEffect=function(k,G){return se.current.useEffect(k,G)},De.useId=function(){return se.current.useId()},De.useImperativeHandle=function(k,G,fe){return se.current.useImperativeHandle(k,G,fe)},De.useInsertionEffect=function(k,G){return se.current.useInsertionEffect(k,G)},De.useLayoutEffect=function(k,G){return se.current.useLayoutEffect(k,G)},De.useMemo=function(k,G){return se.current.useMemo(k,G)},De.useReducer=function(k,G,fe){return se.current.useReducer(k,G,fe)},De.useRef=function(k){return se.current.useRef(k)},De.useState=function(k){return se.current.useState(k)},De.useSyncExternalStore=function(k,G,fe){return se.current.useSyncExternalStore(k,G,fe)},De.useTransition=function(){return se.current.useTransition()},De.version="18.3.1",De}var _g;function pf(){return _g||(_g=1,wd.exports=sE()),wd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wg;function oE(){if(wg)return Fa;wg=1;var r=pf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,v){var E,I={},S=null,L=null;v!==void 0&&(S=""+v),g.key!==void 0&&(S=""+g.key),g.ref!==void 0&&(L=g.ref);for(E in g)i.call(g,E)&&!l.hasOwnProperty(E)&&(I[E]=g[E]);if(f&&f.defaultProps)for(E in g=f.defaultProps,g)I[E]===void 0&&(I[E]=g[E]);return{$$typeof:e,type:f,key:S,ref:L,props:I,_owner:o.current}}return Fa.Fragment=t,Fa.jsx=h,Fa.jsxs=h,Fa}var Eg;function aE(){return Eg||(Eg=1,_d.exports=oE()),_d.exports}var y=aE(),Y=pf();const dv=hv(Y),lE=iE({__proto__:null,default:dv},[Y]);var ju={},Ed={exports:{}},tn={},Td={exports:{}},Id={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg;function uE(){return Tg||(Tg=1,(function(r){function e(q,oe){var B=q.length;q.push(oe);e:for(;0<B;){var k=B-1>>>1,G=q[k];if(0<o(G,oe))q[k]=oe,q[B]=G,B=k;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var oe=q[0],B=q.pop();if(B!==oe){q[0]=B;e:for(var k=0,G=q.length,fe=G>>>1;k<fe;){var Ne=2*(k+1)-1,ae=q[Ne],ue=Ne+1,_e=q[ue];if(0>o(ae,B))ue<G&&0>o(_e,ae)?(q[k]=_e,q[ue]=B,k=ue):(q[k]=ae,q[Ne]=B,k=Ne);else if(ue<G&&0>o(_e,B))q[k]=_e,q[ue]=B,k=ue;else break e}}return oe}function o(q,oe){var B=q.sortIndex-oe.sortIndex;return B!==0?B:q.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],v=[],E=1,I=null,S=3,L=!1,z=!1,K=!1,F=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(q){for(var oe=t(v);oe!==null;){if(oe.callback===null)i(v);else if(oe.startTime<=q)i(v),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(v)}}function te(q){if(K=!1,re(q),!z)if(t(g)!==null)z=!0,nt(xe);else{var oe=t(v);oe!==null&&se(te,oe.startTime-q)}}function xe(q,oe){z=!1,K&&(K=!1,H(x),x=-1),L=!0;var B=S;try{for(re(oe),I=t(g);I!==null&&(!(I.expirationTime>oe)||q&&!V());){var k=I.callback;if(typeof k=="function"){I.callback=null,S=I.priorityLevel;var G=k(I.expirationTime<=oe);oe=r.unstable_now(),typeof G=="function"?I.callback=G:I===t(g)&&i(g),re(oe)}else i(g);I=t(g)}if(I!==null)var fe=!0;else{var Ne=t(v);Ne!==null&&se(te,Ne.startTime-oe),fe=!1}return fe}finally{I=null,S=B,L=!1}}var ce=!1,P=null,x=-1,A=5,b=-1;function V(){return!(r.unstable_now()-b<A)}function O(){if(P!==null){var q=r.unstable_now();b=q;var oe=!0;try{oe=P(!0,q)}finally{oe?R():(ce=!1,P=null)}}else ce=!1}var R;if(typeof X=="function")R=function(){X(O)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,it=$e.port2;$e.port1.onmessage=O,R=function(){it.postMessage(null)}}else R=function(){F(O,0)};function nt(q){P=q,ce||(ce=!0,R())}function se(q,oe){x=F(function(){q(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_continueExecution=function(){z||L||(z=!0,nt(xe))},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(q){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var B=S;S=oe;try{return q()}finally{S=B}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(q,oe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var B=S;S=q;try{return oe()}finally{S=B}},r.unstable_scheduleCallback=function(q,oe,B){var k=r.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?k+B:k):B=k,q){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=B+G,q={id:E++,callback:oe,priorityLevel:q,startTime:B,expirationTime:G,sortIndex:-1},B>k?(q.sortIndex=B,e(v,q),t(g)===null&&q===t(v)&&(K?(H(x),x=-1):K=!0,se(te,B-k))):(q.sortIndex=G,e(g,q),z||L||(z=!0,nt(xe))),q},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(q){var oe=S;return function(){var B=S;S=oe;try{return q.apply(this,arguments)}finally{S=B}}}})(Id)),Id}var Ig;function cE(){return Ig||(Ig=1,Td.exports=uE()),Td.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function hE(){if(Sg)return tn;Sg=1;var r=pf(),e=cE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function S(n){return g.call(I,n)?!0:g.call(E,n)?!1:v.test(n)?I[n]=!0:(E[n]=!0,!1)}function L(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function z(n,s,a,c){if(s===null||typeof s>"u"||L(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function K(n,s,a,c,d,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new K(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];F[s]=new K(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new K(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new K(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new K(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new K(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new K(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new K(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new K(n,5,!1,n.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function X(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(H,X);F[s]=new K(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(H,X);F[s]=new K(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(H,X);F[s]=new K(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new K(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new K(n,1,!1,n.toLowerCase(),null,!0,!0)});function re(n,s,a,c){var d=F.hasOwnProperty(s)?F[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(z(s,a,d,c)&&(a=null),c||d===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var te=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),ce=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),V=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),q=Symbol.iterator;function oe(n){return n===null||typeof n!="object"?null:(n=q&&n[q]||n["@@iterator"],typeof n=="function"?n:null)}var B=Object.assign,k;function G(n){if(k===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);k=s&&s[1]||""}return`
`+k+n}var fe=!1;function Ne(n,s){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){c=$}n.call(s.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),m=c.stack.split(`
`),w=d.length-1,C=m.length-1;1<=w&&0<=C&&d[w]!==m[C];)C--;for(;1<=w&&0<=C;w--,C--)if(d[w]!==m[C]){if(w!==1||C!==1)do if(w--,C--,0>C||d[w]!==m[C]){var N=`
`+d[w].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=w&&0<=C);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function ae(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=Ne(n.type,!1),n;case 11:return n=Ne(n.type.render,!1),n;case 1:return n=Ne(n.type,!0),n;default:return""}}function ue(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case ce:return"Portal";case A:return"Profiler";case x:return"StrictMode";case R:return"Suspense";case $e:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case b:return(n._context.displayName||"Context")+".Provider";case O:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case it:return s=n.displayName||null,s!==null?s:ue(n.type)||"Memo";case nt:s=n._payload,n=n._init;try{return ue(n(s))}catch{}}return null}function _e(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(s);case 8:return s===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ce(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ke(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function lt(n){var s=ke(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Rn(n){n._valueTracker||(n._valueTracker=lt(n))}function pr(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=ke(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Gn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function mr(n,s){var a=s.checked;return B({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Br(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Ce(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ui(n,s){s=s.checked,s!=null&&re(n,"checked",s,!1)}function zi(n,s){Ui(n,s);var a=Ce(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?$r(n,s.type,a):s.hasOwnProperty("defaultValue")&&$r(n,s.type,Ce(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ks(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function $r(n,s,a){(s!=="number"||Gn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var An=Array.isArray;function sn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ce(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Go(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return B({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ns(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(An(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Ce(a)}}function bs(n,s){var a=Ce(s.value),c=Ce(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Ko(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function pt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?pt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var gr,Qo=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(gr=gr||document.createElement("div"),gr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=gr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Wr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$i=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(n){$i.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Bi[s]=Bi[n]})});function Yo(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Bi.hasOwnProperty(n)&&Bi[n]?(""+s).trim():s+"px"}function Xo(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Yo(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Jo=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zo(n,s){if(s){if(Jo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ea(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wi=null;function Ds(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vs=null,mn=null,Kn=null;function Os(n){if(n=Sa(n)){if(typeof Vs!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Jl(s),Vs(n.stateNode,n.type,s))}}function Qn(n){mn?Kn?Kn.push(n):Kn=[n]:mn=n}function ta(){if(mn){var n=mn,s=Kn;if(Kn=mn=null,Os(n),s)for(n=0;n<s.length;n++)Os(s[n])}}function Hi(n,s){return n(s)}function na(){}var yr=!1;function ra(n,s,a){if(yr)return n(s,a);yr=!0;try{return Hi(n,s,a)}finally{yr=!1,(mn!==null||Kn!==null)&&(na(),ta())}}function st(n,s){var a=n.stateNode;if(a===null)return null;var c=Jl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ls=!1;if(f)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){Ls=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{Ls=!1}function qi(n,s,a,c,d,m,w,C,N){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(ee){this.onError(ee)}}var Gi=!1,js=null,kn=!1,ia=null,Gc={onError:function(n){Gi=!0,js=n}};function Ms(n,s,a,c,d,m,w,C,N){Gi=!1,js=null,qi.apply(Gc,arguments)}function Il(n,s,a,c,d,m,w,C,N){if(Ms.apply(this,arguments),Gi){if(Gi){var $=js;Gi=!1,js=null}else throw Error(t(198));kn||(kn=!0,ia=$)}}function Nn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Ki(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function bn(n){if(Nn(n)!==n)throw Error(t(188))}function Sl(n){var s=n.alternate;if(!s){if(s=Nn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return bn(d),n;if(m===c)return bn(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var w=!1,C=d.child;C;){if(C===a){w=!0,a=d,c=m;break}if(C===c){w=!0,c=d,a=m;break}C=C.sibling}if(!w){for(C=m.child;C;){if(C===a){w=!0,a=m,c=d;break}if(C===c){w=!0,c=m,a=d;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function sa(n){return n=Sl(n),n!==null?Fs(n):null}function Fs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Fs(n);if(s!==null)return s;n=n.sibling}return null}var Us=e.unstable_scheduleCallback,oa=e.unstable_cancelCallback,xl=e.unstable_shouldYield,Kc=e.unstable_requestPaint,He=e.unstable_now,Cl=e.unstable_getCurrentPriorityLevel,Qi=e.unstable_ImmediatePriority,Hr=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,aa=e.unstable_LowPriority,Rl=e.unstable_IdlePriority,Yi=null,on=null;function Al(n){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Yi,n,void 0,(n.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:kl,la=Math.log,Pl=Math.LN2;function kl(n){return n>>>=0,n===0?32:31-(la(n)/Pl|0)|0}var zs=64,Bs=4194304;function qr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Xi(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~d;C!==0?c=qr(C):(m&=w,m!==0&&(c=qr(m)))}else w=a&~d,w!==0?c=qr(w):m!==0&&(c=qr(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-Wt(s),d=1<<a,c|=n[a],s&=~d;return c}function Qc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-Wt(m),C=1<<w,N=d[w];N===-1?((C&a)===0||(C&c)!==0)&&(d[w]=Qc(C,s)):N<=s&&(n.expiredLanes|=C),m&=~C}}function an(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ji(){var n=zs;return zs<<=1,(zs&4194240)===0&&(zs=64),n}function Gr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Kr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Wt(s),n[s]=a}function We(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Wt(a),m=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Qr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-Wt(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Le=0;function Yr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Nl,$s,bl,Dl,Vl,ua=!1,Yn=[],Rt=null,Dn=null,Vn=null,Xr=new Map,yn=new Map,Xn=[],Yc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ol(n,s){switch(n){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Xr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(s.pointerId)}}function Kt(n,s,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},s!==null&&(s=Sa(s),s!==null&&$s(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Xc(n,s,a,c,d){switch(s){case"focusin":return Rt=Kt(Rt,n,s,a,c,d),!0;case"dragenter":return Dn=Kt(Dn,n,s,a,c,d),!0;case"mouseover":return Vn=Kt(Vn,n,s,a,c,d),!0;case"pointerover":var m=d.pointerId;return Xr.set(m,Kt(Xr.get(m)||null,n,s,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,yn.set(m,Kt(yn.get(m)||null,n,s,a,c,d)),!0}return!1}function Ll(n){var s=rs(n.target);if(s!==null){var a=Nn(s);if(a!==null){if(s=a.tag,s===13){if(s=Ki(a),s!==null){n.blockedOn=s,Vl(n.priority,function(){bl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _r(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Ws(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Wi=c,a.target.dispatchEvent(c),Wi=null}else return s=Sa(a),s!==null&&$s(s),n.blockedOn=a,!1;s.shift()}return!0}function Zi(n,s,a){_r(n)&&a.delete(s)}function jl(){ua=!1,Rt!==null&&_r(Rt)&&(Rt=null),Dn!==null&&_r(Dn)&&(Dn=null),Vn!==null&&_r(Vn)&&(Vn=null),Xr.forEach(Zi),yn.forEach(Zi)}function On(n,s){n.blockedOn===s&&(n.blockedOn=null,ua||(ua=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jl)))}function Ln(n){function s(d){return On(d,n)}if(0<Yn.length){On(Yn[0],n);for(var a=1;a<Yn.length;a++){var c=Yn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Rt!==null&&On(Rt,n),Dn!==null&&On(Dn,n),Vn!==null&&On(Vn,n),Xr.forEach(s),yn.forEach(s),a=0;a<Xn.length;a++)c=Xn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Xn.length&&(a=Xn[0],a.blockedOn===null);)Ll(a),a.blockedOn===null&&Xn.shift()}var wr=te.ReactCurrentBatchConfig,Jr=!0;function Xe(n,s,a,c){var d=Le,m=wr.transition;wr.transition=null;try{Le=1,ca(n,s,a,c)}finally{Le=d,wr.transition=m}}function Jc(n,s,a,c){var d=Le,m=wr.transition;wr.transition=null;try{Le=4,ca(n,s,a,c)}finally{Le=d,wr.transition=m}}function ca(n,s,a,c){if(Jr){var d=Ws(n,s,a,c);if(d===null)uh(n,s,c,es,a),Ol(n,c);else if(Xc(d,n,s,a,c))c.stopPropagation();else if(Ol(n,c),s&4&&-1<Yc.indexOf(n)){for(;d!==null;){var m=Sa(d);if(m!==null&&Nl(m),m=Ws(n,s,a,c),m===null&&uh(n,s,c,es,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else uh(n,s,c,null,a)}}var es=null;function Ws(n,s,a,c){if(es=null,n=Ds(c),n=rs(n),n!==null)if(s=Nn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Ki(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return es=n,null}function ha(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cl()){case Qi:return 1;case Hr:return 4;case gn:case aa:return 16;case Rl:return 536870912;default:return 16}default:return 16}}var ln=null,Hs=null,Qt=null;function da(){if(Qt)return Qt;var n,s=Hs,a=s.length,c,d="value"in ln?ln.value:ln.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[m-c];c++);return Qt=d.slice(n,1<c?1-c:void 0)}function qs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Jn(){return!0}function fa(){return!1}function At(n){function s(a,c,d,m,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Jn:fa,this.isPropagationStopped=fa,this}return B(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),s}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=At(jn),Zn=B({},jn,{view:0,detail:0}),Zc=At(Zn),Ks,Er,Zr,ts=B({},Zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:er,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Zr&&(Zr&&n.type==="mousemove"?(Ks=n.screenX-Zr.screenX,Er=n.screenY-Zr.screenY):Er=Ks=0,Zr=n),Ks)},movementY:function(n){return"movementY"in n?n.movementY:Er}}),Qs=At(ts),pa=B({},ts,{dataTransfer:0}),Ml=At(pa),Ys=B({},Zn,{relatedTarget:0}),Xs=At(Ys),Fl=B({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Tr=At(Fl),Ul=B({},jn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),zl=At(Ul),Bl=B({},jn,{data:0}),ma=At(Bl),Js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$l={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=$l[n])?!!s[n]:!1}function er(){return Wl}var u=B({},Zn,{key:function(n){if(n.key){var s=Js[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=qs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ht[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:er,charCode:function(n){return n.type==="keypress"?qs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=At(u),_=B({},ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=At(_),j=B({},Zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:er}),W=At(j),le=B({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Be=At(le),gt=B({},ts,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),je=At(gt),Tt=[9,13,27,32],ut=f&&"CompositionEvent"in window,vn=null;f&&"documentMode"in document&&(vn=document.documentMode);var un=f&&"TextEvent"in window&&!vn,ns=f&&(!ut||vn&&8<vn&&11>=vn),Zs=" ",dp=!1;function fp(n,s){switch(n){case"keyup":return Tt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var eo=!1;function tw(n,s){switch(n){case"compositionend":return pp(s);case"keypress":return s.which!==32?null:(dp=!0,Zs);case"textInput":return n=s.data,n===Zs&&dp?null:n;default:return null}}function nw(n,s){if(eo)return n==="compositionend"||!ut&&fp(n,s)?(n=da(),Qt=Hs=ln=null,eo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ns&&s.locale!=="ko"?null:s.data;default:return null}}var rw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!rw[n.type]:s==="textarea"}function gp(n,s,a,c){Qn(c),s=Ql(s,"onChange"),0<s.length&&(a=new Gs("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ga=null,ya=null;function iw(n){Vp(n,0)}function Hl(n){var s=so(n);if(pr(s))return n}function sw(n,s){if(n==="change")return s}var yp=!1;if(f){var eh;if(f){var th="oninput"in document;if(!th){var vp=document.createElement("div");vp.setAttribute("oninput","return;"),th=typeof vp.oninput=="function"}eh=th}else eh=!1;yp=eh&&(!document.documentMode||9<document.documentMode)}function _p(){ga&&(ga.detachEvent("onpropertychange",wp),ya=ga=null)}function wp(n){if(n.propertyName==="value"&&Hl(ya)){var s=[];gp(s,ya,n,Ds(n)),ra(iw,s)}}function ow(n,s,a){n==="focusin"?(_p(),ga=s,ya=a,ga.attachEvent("onpropertychange",wp)):n==="focusout"&&_p()}function aw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hl(ya)}function lw(n,s){if(n==="click")return Hl(s)}function uw(n,s){if(n==="input"||n==="change")return Hl(s)}function cw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Mn=typeof Object.is=="function"?Object.is:cw;function va(n,s){if(Mn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!Mn(n[d],s[d]))return!1}return!0}function Ep(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Tp(n,s){var a=Ep(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ep(a)}}function Ip(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Ip(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Sp(){for(var n=window,s=Gn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Gn(n.document)}return s}function nh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function hw(n){var s=Sp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Ip(a.ownerDocument.documentElement,a)){if(c!==null&&nh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=Tp(a,m);var w=Tp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var dw=f&&"documentMode"in document&&11>=document.documentMode,to=null,rh=null,_a=null,ih=!1;function xp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ih||to==null||to!==Gn(c)||(c=to,"selectionStart"in c&&nh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),_a&&va(_a,c)||(_a=c,c=Ql(rh,"onSelect"),0<c.length&&(s=new Gs("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=to)))}function ql(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var no={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionend:ql("Transition","TransitionEnd")},sh={},Cp={};f&&(Cp=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Gl(n){if(sh[n])return sh[n];if(!no[n])return n;var s=no[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Cp)return sh[n]=s[a];return n}var Rp=Gl("animationend"),Ap=Gl("animationiteration"),Pp=Gl("animationstart"),kp=Gl("transitionend"),Np=new Map,bp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(n,s){Np.set(n,s),l(s,[n])}for(var oh=0;oh<bp.length;oh++){var ah=bp[oh],fw=ah.toLowerCase(),pw=ah[0].toUpperCase()+ah.slice(1);ei(fw,"on"+pw)}ei(Rp,"onAnimationEnd"),ei(Ap,"onAnimationIteration"),ei(Pp,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(kp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mw=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function Dp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Il(c,s,void 0,n),n.currentTarget=null}function Vp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var C=c[w],N=C.instance,$=C.currentTarget;if(C=C.listener,N!==m&&d.isPropagationStopped())break e;Dp(d,C,$),m=N}else for(w=0;w<c.length;w++){if(C=c[w],N=C.instance,$=C.currentTarget,C=C.listener,N!==m&&d.isPropagationStopped())break e;Dp(d,C,$),m=N}}}if(kn)throw n=ia,kn=!1,ia=null,n}function Ge(n,s){var a=s[mh];a===void 0&&(a=s[mh]=new Set);var c=n+"__bubble";a.has(c)||(Op(s,n,2,!1),a.add(c))}function lh(n,s,a){var c=0;s&&(c|=4),Op(a,n,c,s)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function Ea(n){if(!n[Kl]){n[Kl]=!0,i.forEach(function(a){a!=="selectionchange"&&(mw.has(a)||lh(a,!1,n),lh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Kl]||(s[Kl]=!0,lh("selectionchange",!1,s))}}function Op(n,s,a,c){switch(ha(s)){case 1:var d=Xe;break;case 4:d=Jc;break;default:d=ca}a=d.bind(null,s,a,n),d=void 0,!Ls||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function uh(n,s,a,c,d){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;w=w.return}for(;C!==null;){if(w=rs(C),w===null)return;if(N=w.tag,N===5||N===6){c=m=w;continue e}C=C.parentNode}}c=c.return}ra(function(){var $=m,ee=Ds(a),ne=[];e:{var Z=Np.get(n);if(Z!==void 0){var he=Gs,me=n;switch(n){case"keypress":if(qs(a)===0)break e;case"keydown":case"keyup":he=p;break;case"focusin":me="focus",he=Xs;break;case"focusout":me="blur",he=Xs;break;case"beforeblur":case"afterblur":he=Xs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Qs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Ml;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=W;break;case Rp:case Ap:case Pp:he=Tr;break;case kp:he=Be;break;case"scroll":he=Zc;break;case"wheel":he=je;break;case"copy":case"cut":case"paste":he=zl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=T}var ge=(s&4)!==0,ot=!ge&&n==="scroll",M=ge?Z!==null?Z+"Capture":null:Z;ge=[];for(var D=$,U;D!==null;){U=D;var ie=U.stateNode;if(U.tag===5&&ie!==null&&(U=ie,M!==null&&(ie=st(D,M),ie!=null&&ge.push(Ta(D,ie,U)))),ot)break;D=D.return}0<ge.length&&(Z=new he(Z,me,null,a,ee),ne.push({event:Z,listeners:ge}))}}if((s&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",he=n==="mouseout"||n==="pointerout",Z&&a!==Wi&&(me=a.relatedTarget||a.fromElement)&&(rs(me)||me[Ir]))break e;if((he||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,he?(me=a.relatedTarget||a.toElement,he=$,me=me?rs(me):null,me!==null&&(ot=Nn(me),me!==ot||me.tag!==5&&me.tag!==6)&&(me=null)):(he=null,me=$),he!==me)){if(ge=Qs,ie="onMouseLeave",M="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(ge=T,ie="onPointerLeave",M="onPointerEnter",D="pointer"),ot=he==null?Z:so(he),U=me==null?Z:so(me),Z=new ge(ie,D+"leave",he,a,ee),Z.target=ot,Z.relatedTarget=U,ie=null,rs(ee)===$&&(ge=new ge(M,D+"enter",me,a,ee),ge.target=U,ge.relatedTarget=ot,ie=ge),ot=ie,he&&me)t:{for(ge=he,M=me,D=0,U=ge;U;U=ro(U))D++;for(U=0,ie=M;ie;ie=ro(ie))U++;for(;0<D-U;)ge=ro(ge),D--;for(;0<U-D;)M=ro(M),U--;for(;D--;){if(ge===M||M!==null&&ge===M.alternate)break t;ge=ro(ge),M=ro(M)}ge=null}else ge=null;he!==null&&Lp(ne,Z,he,ge,!1),me!==null&&ot!==null&&Lp(ne,ot,me,ge,!0)}}e:{if(Z=$?so($):window,he=Z.nodeName&&Z.nodeName.toLowerCase(),he==="select"||he==="input"&&Z.type==="file")var ve=sw;else if(mp(Z))if(yp)ve=uw;else{ve=aw;var Ee=ow}else(he=Z.nodeName)&&he.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(ve=lw);if(ve&&(ve=ve(n,$))){gp(ne,ve,a,ee);break e}Ee&&Ee(n,Z,$),n==="focusout"&&(Ee=Z._wrapperState)&&Ee.controlled&&Z.type==="number"&&$r(Z,"number",Z.value)}switch(Ee=$?so($):window,n){case"focusin":(mp(Ee)||Ee.contentEditable==="true")&&(to=Ee,rh=$,_a=null);break;case"focusout":_a=rh=to=null;break;case"mousedown":ih=!0;break;case"contextmenu":case"mouseup":case"dragend":ih=!1,xp(ne,a,ee);break;case"selectionchange":if(dw)break;case"keydown":case"keyup":xp(ne,a,ee)}var Te;if(ut)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else eo?fp(n,a)&&(Re="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(ns&&a.locale!=="ko"&&(eo||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&eo&&(Te=da()):(ln=ee,Hs="value"in ln?ln.value:ln.textContent,eo=!0)),Ee=Ql($,Re),0<Ee.length&&(Re=new ma(Re,n,null,a,ee),ne.push({event:Re,listeners:Ee}),Te?Re.data=Te:(Te=pp(a),Te!==null&&(Re.data=Te)))),(Te=un?tw(n,a):nw(n,a))&&($=Ql($,"onBeforeInput"),0<$.length&&(ee=new ma("onBeforeInput","beforeinput",null,a,ee),ne.push({event:ee,listeners:$}),ee.data=Te))}Vp(ne,s)})}function Ta(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Ql(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=st(n,a),m!=null&&c.unshift(Ta(n,m,d)),m=st(n,s),m!=null&&c.push(Ta(n,m,d))),n=n.return}return c}function ro(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Lp(n,s,a,c,d){for(var m=s._reactName,w=[];a!==null&&a!==c;){var C=a,N=C.alternate,$=C.stateNode;if(N!==null&&N===c)break;C.tag===5&&$!==null&&(C=$,d?(N=st(a,m),N!=null&&w.unshift(Ta(a,N,C))):d||(N=st(a,m),N!=null&&w.push(Ta(a,N,C)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var gw=/\r\n?/g,yw=/\u0000|\uFFFD/g;function jp(n){return(typeof n=="string"?n:""+n).replace(gw,`
`).replace(yw,"")}function Yl(n,s,a){if(s=jp(s),jp(n)!==s&&a)throw Error(t(425))}function Xl(){}var ch=null,hh=null;function dh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var fh=typeof setTimeout=="function"?setTimeout:void 0,vw=typeof clearTimeout=="function"?clearTimeout:void 0,Mp=typeof Promise=="function"?Promise:void 0,_w=typeof queueMicrotask=="function"?queueMicrotask:typeof Mp<"u"?function(n){return Mp.resolve(null).then(n).catch(ww)}:fh;function ww(n){setTimeout(function(){throw n})}function ph(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Ln(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Ln(s)}function ti(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Fp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var io=Math.random().toString(36).slice(2),tr="__reactFiber$"+io,Ia="__reactProps$"+io,Ir="__reactContainer$"+io,mh="__reactEvents$"+io,Ew="__reactListeners$"+io,Tw="__reactHandles$"+io;function rs(n){var s=n[tr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Ir]||a[tr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Fp(n);n!==null;){if(a=n[tr])return a;n=Fp(n)}return s}n=a,a=n.parentNode}return null}function Sa(n){return n=n[tr]||n[Ir],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function so(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Jl(n){return n[Ia]||null}var gh=[],oo=-1;function ni(n){return{current:n}}function Ke(n){0>oo||(n.current=gh[oo],gh[oo]=null,oo--)}function qe(n,s){oo++,gh[oo]=n.current,n.current=s}var ri={},Ot=ni(ri),Yt=ni(!1),is=ri;function ao(n,s){var a=n.type.contextTypes;if(!a)return ri;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Xt(n){return n=n.childContextTypes,n!=null}function Zl(){Ke(Yt),Ke(Ot)}function Up(n,s,a){if(Ot.current!==ri)throw Error(t(168));qe(Ot,s),qe(Yt,a)}function zp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,_e(n)||"Unknown",d));return B({},a,c)}function eu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ri,is=Ot.current,qe(Ot,n),qe(Yt,Yt.current),!0}function Bp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=zp(n,s,is),c.__reactInternalMemoizedMergedChildContext=n,Ke(Yt),Ke(Ot),qe(Ot,n)):Ke(Yt),qe(Yt,a)}var Sr=null,tu=!1,yh=!1;function $p(n){Sr===null?Sr=[n]:Sr.push(n)}function Iw(n){tu=!0,$p(n)}function ii(){if(!yh&&Sr!==null){yh=!0;var n=0,s=Le;try{var a=Sr;for(Le=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Sr=null,tu=!1}catch(d){throw Sr!==null&&(Sr=Sr.slice(n+1)),Us(Qi,ii),d}finally{Le=s,yh=!1}}return null}var lo=[],uo=0,nu=null,ru=0,_n=[],wn=0,ss=null,xr=1,Cr="";function os(n,s){lo[uo++]=ru,lo[uo++]=nu,nu=n,ru=s}function Wp(n,s,a){_n[wn++]=xr,_n[wn++]=Cr,_n[wn++]=ss,ss=n;var c=xr;n=Cr;var d=32-Wt(c)-1;c&=~(1<<d),a+=1;var m=32-Wt(s)+d;if(30<m){var w=d-d%5;m=(c&(1<<w)-1).toString(32),c>>=w,d-=w,xr=1<<32-Wt(s)+d|a<<d|c,Cr=m+n}else xr=1<<m|a<<d|c,Cr=n}function vh(n){n.return!==null&&(os(n,1),Wp(n,1,0))}function _h(n){for(;n===nu;)nu=lo[--uo],lo[uo]=null,ru=lo[--uo],lo[uo]=null;for(;n===ss;)ss=_n[--wn],_n[wn]=null,Cr=_n[--wn],_n[wn]=null,xr=_n[--wn],_n[wn]=null}var cn=null,hn=null,Je=!1,Fn=null;function Hp(n,s){var a=Sn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function qp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,cn=n,hn=ti(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,cn=n,hn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ss!==null?{id:xr,overflow:Cr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Sn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,cn=n,hn=null,!0):!1;default:return!1}}function wh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Eh(n){if(Je){var s=hn;if(s){var a=s;if(!qp(n,s)){if(wh(n))throw Error(t(418));s=ti(a.nextSibling);var c=cn;s&&qp(n,s)?Hp(c,a):(n.flags=n.flags&-4097|2,Je=!1,cn=n)}}else{if(wh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Je=!1,cn=n}}}function Gp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cn=n}function iu(n){if(n!==cn)return!1;if(!Je)return Gp(n),Je=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!dh(n.type,n.memoizedProps)),s&&(s=hn)){if(wh(n))throw Kp(),Error(t(418));for(;s;)Hp(n,s),s=ti(s.nextSibling)}if(Gp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){hn=ti(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}hn=null}}else hn=cn?ti(n.stateNode.nextSibling):null;return!0}function Kp(){for(var n=hn;n;)n=ti(n.nextSibling)}function co(){hn=cn=null,Je=!1}function Th(n){Fn===null?Fn=[n]:Fn.push(n)}var Sw=te.ReactCurrentBatchConfig;function xa(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var C=d.refs;w===null?delete C[m]:C[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function su(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Qp(n){var s=n._init;return s(n._payload)}function Yp(n){function s(M,D){if(n){var U=M.deletions;U===null?(M.deletions=[D],M.flags|=16):U.push(D)}}function a(M,D){if(!n)return null;for(;D!==null;)s(M,D),D=D.sibling;return null}function c(M,D){for(M=new Map;D!==null;)D.key!==null?M.set(D.key,D):M.set(D.index,D),D=D.sibling;return M}function d(M,D){return M=di(M,D),M.index=0,M.sibling=null,M}function m(M,D,U){return M.index=U,n?(U=M.alternate,U!==null?(U=U.index,U<D?(M.flags|=2,D):U):(M.flags|=2,D)):(M.flags|=1048576,D)}function w(M){return n&&M.alternate===null&&(M.flags|=2),M}function C(M,D,U,ie){return D===null||D.tag!==6?(D=fd(U,M.mode,ie),D.return=M,D):(D=d(D,U),D.return=M,D)}function N(M,D,U,ie){var ve=U.type;return ve===P?ee(M,D,U.props.children,ie,U.key):D!==null&&(D.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===nt&&Qp(ve)===D.type)?(ie=d(D,U.props),ie.ref=xa(M,D,U),ie.return=M,ie):(ie=Pu(U.type,U.key,U.props,null,M.mode,ie),ie.ref=xa(M,D,U),ie.return=M,ie)}function $(M,D,U,ie){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=pd(U,M.mode,ie),D.return=M,D):(D=d(D,U.children||[]),D.return=M,D)}function ee(M,D,U,ie,ve){return D===null||D.tag!==7?(D=ps(U,M.mode,ie,ve),D.return=M,D):(D=d(D,U),D.return=M,D)}function ne(M,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return D=fd(""+D,M.mode,U),D.return=M,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case xe:return U=Pu(D.type,D.key,D.props,null,M.mode,U),U.ref=xa(M,null,D),U.return=M,U;case ce:return D=pd(D,M.mode,U),D.return=M,D;case nt:var ie=D._init;return ne(M,ie(D._payload),U)}if(An(D)||oe(D))return D=ps(D,M.mode,U,null),D.return=M,D;su(M,D)}return null}function Z(M,D,U,ie){var ve=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ve!==null?null:C(M,D,""+U,ie);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case xe:return U.key===ve?N(M,D,U,ie):null;case ce:return U.key===ve?$(M,D,U,ie):null;case nt:return ve=U._init,Z(M,D,ve(U._payload),ie)}if(An(U)||oe(U))return ve!==null?null:ee(M,D,U,ie,null);su(M,U)}return null}function he(M,D,U,ie,ve){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return M=M.get(U)||null,C(D,M,""+ie,ve);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case xe:return M=M.get(ie.key===null?U:ie.key)||null,N(D,M,ie,ve);case ce:return M=M.get(ie.key===null?U:ie.key)||null,$(D,M,ie,ve);case nt:var Ee=ie._init;return he(M,D,U,Ee(ie._payload),ve)}if(An(ie)||oe(ie))return M=M.get(U)||null,ee(D,M,ie,ve,null);su(D,ie)}return null}function me(M,D,U,ie){for(var ve=null,Ee=null,Te=D,Re=D=0,xt=null;Te!==null&&Re<U.length;Re++){Te.index>Re?(xt=Te,Te=null):xt=Te.sibling;var Ue=Z(M,Te,U[Re],ie);if(Ue===null){Te===null&&(Te=xt);break}n&&Te&&Ue.alternate===null&&s(M,Te),D=m(Ue,D,Re),Ee===null?ve=Ue:Ee.sibling=Ue,Ee=Ue,Te=xt}if(Re===U.length)return a(M,Te),Je&&os(M,Re),ve;if(Te===null){for(;Re<U.length;Re++)Te=ne(M,U[Re],ie),Te!==null&&(D=m(Te,D,Re),Ee===null?ve=Te:Ee.sibling=Te,Ee=Te);return Je&&os(M,Re),ve}for(Te=c(M,Te);Re<U.length;Re++)xt=he(Te,M,Re,U[Re],ie),xt!==null&&(n&&xt.alternate!==null&&Te.delete(xt.key===null?Re:xt.key),D=m(xt,D,Re),Ee===null?ve=xt:Ee.sibling=xt,Ee=xt);return n&&Te.forEach(function(fi){return s(M,fi)}),Je&&os(M,Re),ve}function ge(M,D,U,ie){var ve=oe(U);if(typeof ve!="function")throw Error(t(150));if(U=ve.call(U),U==null)throw Error(t(151));for(var Ee=ve=null,Te=D,Re=D=0,xt=null,Ue=U.next();Te!==null&&!Ue.done;Re++,Ue=U.next()){Te.index>Re?(xt=Te,Te=null):xt=Te.sibling;var fi=Z(M,Te,Ue.value,ie);if(fi===null){Te===null&&(Te=xt);break}n&&Te&&fi.alternate===null&&s(M,Te),D=m(fi,D,Re),Ee===null?ve=fi:Ee.sibling=fi,Ee=fi,Te=xt}if(Ue.done)return a(M,Te),Je&&os(M,Re),ve;if(Te===null){for(;!Ue.done;Re++,Ue=U.next())Ue=ne(M,Ue.value,ie),Ue!==null&&(D=m(Ue,D,Re),Ee===null?ve=Ue:Ee.sibling=Ue,Ee=Ue);return Je&&os(M,Re),ve}for(Te=c(M,Te);!Ue.done;Re++,Ue=U.next())Ue=he(Te,M,Re,Ue.value,ie),Ue!==null&&(n&&Ue.alternate!==null&&Te.delete(Ue.key===null?Re:Ue.key),D=m(Ue,D,Re),Ee===null?ve=Ue:Ee.sibling=Ue,Ee=Ue);return n&&Te.forEach(function(rE){return s(M,rE)}),Je&&os(M,Re),ve}function ot(M,D,U,ie){if(typeof U=="object"&&U!==null&&U.type===P&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case xe:e:{for(var ve=U.key,Ee=D;Ee!==null;){if(Ee.key===ve){if(ve=U.type,ve===P){if(Ee.tag===7){a(M,Ee.sibling),D=d(Ee,U.props.children),D.return=M,M=D;break e}}else if(Ee.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===nt&&Qp(ve)===Ee.type){a(M,Ee.sibling),D=d(Ee,U.props),D.ref=xa(M,Ee,U),D.return=M,M=D;break e}a(M,Ee);break}else s(M,Ee);Ee=Ee.sibling}U.type===P?(D=ps(U.props.children,M.mode,ie,U.key),D.return=M,M=D):(ie=Pu(U.type,U.key,U.props,null,M.mode,ie),ie.ref=xa(M,D,U),ie.return=M,M=ie)}return w(M);case ce:e:{for(Ee=U.key;D!==null;){if(D.key===Ee)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(M,D.sibling),D=d(D,U.children||[]),D.return=M,M=D;break e}else{a(M,D);break}else s(M,D);D=D.sibling}D=pd(U,M.mode,ie),D.return=M,M=D}return w(M);case nt:return Ee=U._init,ot(M,D,Ee(U._payload),ie)}if(An(U))return me(M,D,U,ie);if(oe(U))return ge(M,D,U,ie);su(M,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,D!==null&&D.tag===6?(a(M,D.sibling),D=d(D,U),D.return=M,M=D):(a(M,D),D=fd(U,M.mode,ie),D.return=M,M=D),w(M)):a(M,D)}return ot}var ho=Yp(!0),Xp=Yp(!1),ou=ni(null),au=null,fo=null,Ih=null;function Sh(){Ih=fo=au=null}function xh(n){var s=ou.current;Ke(ou),n._currentValue=s}function Ch(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function po(n,s){au=n,Ih=fo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Jt=!0),n.firstContext=null)}function En(n){var s=n._currentValue;if(Ih!==n)if(n={context:n,memoizedValue:s,next:null},fo===null){if(au===null)throw Error(t(308));fo=n,au.dependencies={lanes:0,firstContext:n}}else fo=fo.next=n;return s}var as=null;function Rh(n){as===null?as=[n]:as.push(n)}function Jp(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Rh(s)):(a.next=d.next,d.next=a),s.interleaved=a,Rr(n,c)}function Rr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var si=!1;function Ah(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ar(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function oi(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Fe&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Rr(n,a)}return d=c.interleaved,d===null?(s.next=s,Rh(c)):(s.next=d.next,d.next=s),c.interleaved=s,Rr(n,a)}function lu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Qr(n,a)}}function em(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function uu(n,s,a,c){var d=n.updateQueue;si=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var N=C,$=N.next;N.next=null,w===null?m=$:w.next=$,w=N;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,C=ee.lastBaseUpdate,C!==w&&(C===null?ee.firstBaseUpdate=$:C.next=$,ee.lastBaseUpdate=N))}if(m!==null){var ne=d.baseState;w=0,ee=$=N=null,C=m;do{var Z=C.lane,he=C.eventTime;if((c&Z)===Z){ee!==null&&(ee=ee.next={eventTime:he,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var me=n,ge=C;switch(Z=s,he=a,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){ne=me.call(he,ne,Z);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,Z=typeof me=="function"?me.call(he,ne,Z):me,Z==null)break e;ne=B({},ne,Z);break e;case 2:si=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,Z=d.effects,Z===null?d.effects=[C]:Z.push(C))}else he={eventTime:he,lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ee===null?($=ee=he,N=ne):ee=ee.next=he,w|=Z;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);if(ee===null&&(N=ne),d.baseState=N,d.firstBaseUpdate=$,d.lastBaseUpdate=ee,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);cs|=w,n.lanes=w,n.memoizedState=ne}}function tm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Ca={},nr=ni(Ca),Ra=ni(Ca),Aa=ni(Ca);function ls(n){if(n===Ca)throw Error(t(174));return n}function Ph(n,s){switch(qe(Aa,s),qe(Ra,n),qe(nr,Ca),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:mt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=mt(s,n)}Ke(nr),qe(nr,s)}function mo(){Ke(nr),Ke(Ra),Ke(Aa)}function nm(n){ls(Aa.current);var s=ls(nr.current),a=mt(s,n.type);s!==a&&(qe(Ra,n),qe(nr,a))}function kh(n){Ra.current===n&&(Ke(nr),Ke(Ra))}var Ze=ni(0);function cu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nh=[];function bh(){for(var n=0;n<Nh.length;n++)Nh[n]._workInProgressVersionPrimary=null;Nh.length=0}var hu=te.ReactCurrentDispatcher,Dh=te.ReactCurrentBatchConfig,us=0,et=null,yt=null,It=null,du=!1,Pa=!1,ka=0,xw=0;function Lt(){throw Error(t(321))}function Vh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Mn(n[a],s[a]))return!1;return!0}function Oh(n,s,a,c,d,m){if(us=m,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,hu.current=n===null||n.memoizedState===null?Pw:kw,n=a(c,d),Pa){m=0;do{if(Pa=!1,ka=0,25<=m)throw Error(t(301));m+=1,It=yt=null,s.updateQueue=null,hu.current=Nw,n=a(c,d)}while(Pa)}if(hu.current=mu,s=yt!==null&&yt.next!==null,us=0,It=yt=et=null,du=!1,s)throw Error(t(300));return n}function Lh(){var n=ka!==0;return ka=0,n}function rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?et.memoizedState=It=n:It=It.next=n,It}function Tn(){if(yt===null){var n=et.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var s=It===null?et.memoizedState:It.next;if(s!==null)It=s,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},It===null?et.memoizedState=It=n:It=It.next=n}return It}function Na(n,s){return typeof s=="function"?s(n):s}function jh(n){var s=Tn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=yt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var C=w=null,N=null,$=m;do{var ee=$.lane;if((us&ee)===ee)N!==null&&(N=N.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var ne={lane:ee,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};N===null?(C=N=ne,w=c):N=N.next=ne,et.lanes|=ee,cs|=ee}$=$.next}while($!==null&&$!==m);N===null?w=c:N.next=C,Mn(c,s.memoizedState)||(Jt=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,et.lanes|=m,cs|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Mh(n){var s=Tn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=n(m,w.action),w=w.next;while(w!==d);Mn(m,s.memoizedState)||(Jt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function rm(){}function im(n,s){var a=et,c=Tn(),d=s(),m=!Mn(c.memoizedState,d);if(m&&(c.memoizedState=d,Jt=!0),c=c.queue,Fh(am.bind(null,a,c,n),[n]),c.getSnapshot!==s||m||It!==null&&It.memoizedState.tag&1){if(a.flags|=2048,ba(9,om.bind(null,a,c,d,s),void 0,null),St===null)throw Error(t(349));(us&30)!==0||sm(a,s,d)}return d}function sm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function om(n,s,a,c){s.value=a,s.getSnapshot=c,lm(s)&&um(n)}function am(n,s,a){return a(function(){lm(s)&&um(n)})}function lm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Mn(n,a)}catch{return!0}}function um(n){var s=Rr(n,1);s!==null&&$n(s,n,1,-1)}function cm(n){var s=rr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:n},s.queue=n,n=n.dispatch=Aw.bind(null,et,n),[s.memoizedState,n]}function ba(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function hm(){return Tn().memoizedState}function fu(n,s,a,c){var d=rr();et.flags|=n,d.memoizedState=ba(1|s,a,void 0,c===void 0?null:c)}function pu(n,s,a,c){var d=Tn();c=c===void 0?null:c;var m=void 0;if(yt!==null){var w=yt.memoizedState;if(m=w.destroy,c!==null&&Vh(c,w.deps)){d.memoizedState=ba(s,a,m,c);return}}et.flags|=n,d.memoizedState=ba(1|s,a,m,c)}function dm(n,s){return fu(8390656,8,n,s)}function Fh(n,s){return pu(2048,8,n,s)}function fm(n,s){return pu(4,2,n,s)}function pm(n,s){return pu(4,4,n,s)}function mm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function gm(n,s,a){return a=a!=null?a.concat([n]):null,pu(4,4,mm.bind(null,s,n),a)}function Uh(){}function ym(n,s){var a=Tn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Vh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function vm(n,s){var a=Tn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Vh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function _m(n,s,a){return(us&21)===0?(n.baseState&&(n.baseState=!1,Jt=!0),n.memoizedState=a):(Mn(a,s)||(a=Ji(),et.lanes|=a,cs|=a,n.baseState=!0),s)}function Cw(n,s){var a=Le;Le=a!==0&&4>a?a:4,n(!0);var c=Dh.transition;Dh.transition={};try{n(!1),s()}finally{Le=a,Dh.transition=c}}function wm(){return Tn().memoizedState}function Rw(n,s,a){var c=ci(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Em(n))Tm(s,a);else if(a=Jp(n,s,a,c),a!==null){var d=Gt();$n(a,n,c,d),Im(a,s,c)}}function Aw(n,s,a){var c=ci(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Em(n))Tm(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,C=m(w,a);if(d.hasEagerState=!0,d.eagerState=C,Mn(C,w)){var N=s.interleaved;N===null?(d.next=d,Rh(s)):(d.next=N.next,N.next=d),s.interleaved=d;return}}catch{}finally{}a=Jp(n,s,d,c),a!==null&&(d=Gt(),$n(a,n,c,d),Im(a,s,c))}}function Em(n){var s=n.alternate;return n===et||s!==null&&s===et}function Tm(n,s){Pa=du=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Im(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Qr(n,a)}}var mu={readContext:En,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},Pw={readContext:En,useCallback:function(n,s){return rr().memoizedState=[n,s===void 0?null:s],n},useContext:En,useEffect:dm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,fu(4194308,4,mm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return fu(4194308,4,n,s)},useInsertionEffect:function(n,s){return fu(4,2,n,s)},useMemo:function(n,s){var a=rr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=rr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=Rw.bind(null,et,n),[c.memoizedState,n]},useRef:function(n){var s=rr();return n={current:n},s.memoizedState=n},useState:cm,useDebugValue:Uh,useDeferredValue:function(n){return rr().memoizedState=n},useTransition:function(){var n=cm(!1),s=n[0];return n=Cw.bind(null,n[1]),rr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=et,d=rr();if(Je){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),St===null)throw Error(t(349));(us&30)!==0||sm(c,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,dm(am.bind(null,c,m,n),[n]),c.flags|=2048,ba(9,om.bind(null,c,m,a,s),void 0,null),a},useId:function(){var n=rr(),s=St.identifierPrefix;if(Je){var a=Cr,c=xr;a=(c&~(1<<32-Wt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ka++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=xw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},kw={readContext:En,useCallback:ym,useContext:En,useEffect:Fh,useImperativeHandle:gm,useInsertionEffect:fm,useLayoutEffect:pm,useMemo:vm,useReducer:jh,useRef:hm,useState:function(){return jh(Na)},useDebugValue:Uh,useDeferredValue:function(n){var s=Tn();return _m(s,yt.memoizedState,n)},useTransition:function(){var n=jh(Na)[0],s=Tn().memoizedState;return[n,s]},useMutableSource:rm,useSyncExternalStore:im,useId:wm,unstable_isNewReconciler:!1},Nw={readContext:En,useCallback:ym,useContext:En,useEffect:Fh,useImperativeHandle:gm,useInsertionEffect:fm,useLayoutEffect:pm,useMemo:vm,useReducer:Mh,useRef:hm,useState:function(){return Mh(Na)},useDebugValue:Uh,useDeferredValue:function(n){var s=Tn();return yt===null?s.memoizedState=n:_m(s,yt.memoizedState,n)},useTransition:function(){var n=Mh(Na)[0],s=Tn().memoizedState;return[n,s]},useMutableSource:rm,useSyncExternalStore:im,useId:wm,unstable_isNewReconciler:!1};function Un(n,s){if(n&&n.defaultProps){s=B({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function zh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:B({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var gu={isMounted:function(n){return(n=n._reactInternals)?Nn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Gt(),d=ci(n),m=Ar(c,d);m.payload=s,a!=null&&(m.callback=a),s=oi(n,m,d),s!==null&&($n(s,n,d,c),lu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Gt(),d=ci(n),m=Ar(c,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=oi(n,m,d),s!==null&&($n(s,n,d,c),lu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Gt(),c=ci(n),d=Ar(a,c);d.tag=2,s!=null&&(d.callback=s),s=oi(n,d,c),s!==null&&($n(s,n,c,a),lu(s,n,c))}};function Sm(n,s,a,c,d,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!va(a,c)||!va(d,m):!0}function xm(n,s,a){var c=!1,d=ri,m=s.contextType;return typeof m=="object"&&m!==null?m=En(m):(d=Xt(s)?is:Ot.current,c=s.contextTypes,m=(c=c!=null)?ao(n,d):ri),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=gu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),s}function Cm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&gu.enqueueReplaceState(s,s.state,null)}function Bh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Ah(n);var m=s.contextType;typeof m=="object"&&m!==null?d.context=En(m):(m=Xt(s)?is:Ot.current,d.context=ao(n,m)),d.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(zh(n,s,m,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&gu.enqueueReplaceState(d,d.state,null),uu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function go(n,s){try{var a="",c=s;do a+=ae(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:d,digest:null}}function $h(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Wh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var bw=typeof WeakMap=="function"?WeakMap:Map;function Rm(n,s,a){a=Ar(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Iu||(Iu=!0,sd=c),Wh(n,s)},a}function Am(n,s,a){a=Ar(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){Wh(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Wh(n,s),typeof c!="function"&&(li===null?li=new Set([this]):li.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Pm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new bw;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=qw.bind(null,n,s,a),s.then(n,n))}function km(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Nm(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Ar(-1,1),s.tag=2,oi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Dw=te.ReactCurrentOwner,Jt=!1;function qt(n,s,a,c){s.child=n===null?Xp(s,null,a,c):ho(s,n.child,a,c)}function bm(n,s,a,c,d){a=a.render;var m=s.ref;return po(s,d),c=Oh(n,s,a,c,m,d),a=Lh(),n!==null&&!Jt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Pr(n,s,d)):(Je&&a&&vh(s),s.flags|=1,qt(n,s,c,d),s.child)}function Dm(n,s,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!dd(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Vm(n,s,m,c,d)):(n=Pu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:va,a(w,c)&&n.ref===s.ref)return Pr(n,s,d)}return s.flags|=1,n=di(m,c),n.ref=s.ref,n.return=s,s.child=n}function Vm(n,s,a,c,d){if(n!==null){var m=n.memoizedProps;if(va(m,c)&&n.ref===s.ref)if(Jt=!1,s.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Jt=!0);else return s.lanes=n.lanes,Pr(n,s,d)}return Hh(n,s,a,c,d)}function Om(n,s,a){var c=s.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(vo,dn),dn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,qe(vo,dn),dn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,qe(vo,dn),dn|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,qe(vo,dn),dn|=c;return qt(n,s,d,a),s.child}function Lm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Hh(n,s,a,c,d){var m=Xt(a)?is:Ot.current;return m=ao(s,m),po(s,d),a=Oh(n,s,a,c,m,d),c=Lh(),n!==null&&!Jt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Pr(n,s,d)):(Je&&c&&vh(s),s.flags|=1,qt(n,s,a,d),s.child)}function jm(n,s,a,c,d){if(Xt(a)){var m=!0;eu(s)}else m=!1;if(po(s,d),s.stateNode===null)vu(n,s),xm(s,a,c),Bh(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,C=s.memoizedProps;w.props=C;var N=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=En($):($=Xt(a)?is:Ot.current,$=ao(s,$));var ee=a.getDerivedStateFromProps,ne=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function";ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||N!==$)&&Cm(s,w,c,$),si=!1;var Z=s.memoizedState;w.state=Z,uu(s,c,w,d),N=s.memoizedState,C!==c||Z!==N||Yt.current||si?(typeof ee=="function"&&(zh(s,a,ee,c),N=s.memoizedState),(C=si||Sm(s,a,C,c,Z,N,$))?(ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=N),w.props=c,w.state=N,w.context=$,c=C):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Zp(n,s),C=s.memoizedProps,$=s.type===s.elementType?C:Un(s.type,C),w.props=$,ne=s.pendingProps,Z=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=En(N):(N=Xt(a)?is:Ot.current,N=ao(s,N));var he=a.getDerivedStateFromProps;(ee=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==ne||Z!==N)&&Cm(s,w,c,N),si=!1,Z=s.memoizedState,w.state=Z,uu(s,c,w,d);var me=s.memoizedState;C!==ne||Z!==me||Yt.current||si?(typeof he=="function"&&(zh(s,a,he,c),me=s.memoizedState),($=si||Sm(s,a,$,c,Z,me,N)||!1)?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,me,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,me,N)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=me),w.props=c,w.state=me,w.context=N,c=$):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),c=!1)}return qh(n,s,a,c,m,d)}function qh(n,s,a,c,d,m){Lm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Bp(s,a,!1),Pr(n,s,m);c=s.stateNode,Dw.current=s;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=ho(s,n.child,null,m),s.child=ho(s,null,C,m)):qt(n,s,C,m),s.memoizedState=c.state,d&&Bp(s,a,!0),s.child}function Mm(n){var s=n.stateNode;s.pendingContext?Up(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Up(n,s.context,!1),Ph(n,s.containerInfo)}function Fm(n,s,a,c,d){return co(),Th(d),s.flags|=256,qt(n,s,a,c),s.child}var Gh={dehydrated:null,treeContext:null,retryLane:0};function Kh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Um(n,s,a){var c=s.pendingProps,d=Ze.current,m=!1,w=(s.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),qe(Ze,d&1),n===null)return Eh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=ku(w,c,0,null),n=ps(n,c,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=Kh(a),s.memoizedState=Gh,n):Qh(s,w));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return Vw(n,s,w,c,C,d,a);if(m){m=c.fallback,w=s.mode,d=n.child,C=d.sibling;var N={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=N,s.deletions=null):(c=di(d,N),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?m=di(C,m):(m=ps(m,w,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=n.child.memoizedState,w=w===null?Kh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,s.memoizedState=Gh,c}return m=n.child,n=m.sibling,c=di(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Qh(n,s){return s=ku({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function yu(n,s,a,c){return c!==null&&Th(c),ho(s,n.child,null,a),n=Qh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Vw(n,s,a,c,d,m,w){if(a)return s.flags&256?(s.flags&=-257,c=$h(Error(t(422))),yu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,d=s.mode,c=ku({mode:"visible",children:c.children},d,0,null),m=ps(m,d,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&ho(s,n.child,null,w),s.child.memoizedState=Kh(w),s.memoizedState=Gh,m);if((s.mode&1)===0)return yu(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,m=Error(t(419)),c=$h(m,c,void 0),yu(n,s,w,c)}if(C=(w&n.childLanes)!==0,Jt||C){if(c=St,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Rr(n,d),$n(c,n,d,-1))}return hd(),c=$h(Error(t(421))),yu(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=Gw.bind(null,n),d._reactRetry=s,null):(n=m.treeContext,hn=ti(d.nextSibling),cn=s,Je=!0,Fn=null,n!==null&&(_n[wn++]=xr,_n[wn++]=Cr,_n[wn++]=ss,xr=n.id,Cr=n.overflow,ss=s),s=Qh(s,c.children),s.flags|=4096,s)}function zm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ch(n.return,s,a)}function Yh(n,s,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function Bm(n,s,a){var c=s.pendingProps,d=c.revealOrder,m=c.tail;if(qt(n,s,c.children,a),c=Ze.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&zm(n,a,s);else if(n.tag===19)zm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(qe(Ze,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&cu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Yh(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&cu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Yh(s,!0,a,null,m);break;case"together":Yh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function vu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Pr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),cs|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=di(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=di(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Ow(n,s,a){switch(s.tag){case 3:Mm(s),co();break;case 5:nm(s);break;case 1:Xt(s.type)&&eu(s);break;case 4:Ph(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;qe(ou,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(qe(Ze,Ze.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Um(n,s,a):(qe(Ze,Ze.current&1),n=Pr(n,s,a),n!==null?n.sibling:null);qe(Ze,Ze.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Bm(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),qe(Ze,Ze.current),c)break;return null;case 22:case 23:return s.lanes=0,Om(n,s,a)}return Pr(n,s,a)}var $m,Xh,Wm,Hm;$m=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Xh=function(){},Wm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,ls(nr.current);var m=null;switch(a){case"input":d=mr(n,d),c=mr(n,c),m=[];break;case"select":d=B({},d,{value:void 0}),c=B({},c,{value:void 0}),m=[];break;case"textarea":d=Go(n,d),c=Go(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Xl)}Zo(a,c);var w;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var C=d[$];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?m||(m=[]):(m=m||[]).push($,null));for($ in c){var N=c[$];if(C=d!=null?d[$]:void 0,c.hasOwnProperty($)&&N!==C&&(N!=null||C!=null))if($==="style")if(C){for(w in C)!C.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&C[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(m||(m=[]),m.push($,a)),a=N;else $==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,C=C?C.__html:void 0,N!=null&&C!==N&&(m=m||[]).push($,N)):$==="children"?typeof N!="string"&&typeof N!="number"||(m=m||[]).push($,""+N):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(N!=null&&$==="onScroll"&&Ge("scroll",n),m||C===N||(m=[])):(m=m||[]).push($,N))}a&&(m=m||[]).push("style",a);var $=m;(s.updateQueue=$)&&(s.flags|=4)}},Hm=function(n,s,a,c){a!==c&&(s.flags|=4)};function Da(n,s){if(!Je)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function jt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Lw(n,s,a){var c=s.pendingProps;switch(_h(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(s),null;case 1:return Xt(s.type)&&Zl(),jt(s),null;case 3:return c=s.stateNode,mo(),Ke(Yt),Ke(Ot),bh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(iu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Fn!==null&&(ld(Fn),Fn=null))),Xh(n,s),jt(s),null;case 5:kh(s);var d=ls(Aa.current);if(a=s.type,n!==null&&s.stateNode!=null)Wm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return jt(s),null}if(n=ls(nr.current),iu(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[tr]=s,c[Ia]=m,n=(s.mode&1)!==0,a){case"dialog":Ge("cancel",c),Ge("close",c);break;case"iframe":case"object":case"embed":Ge("load",c);break;case"video":case"audio":for(d=0;d<wa.length;d++)Ge(wa[d],c);break;case"source":Ge("error",c);break;case"img":case"image":case"link":Ge("error",c),Ge("load",c);break;case"details":Ge("toggle",c);break;case"input":Br(c,m),Ge("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Ge("invalid",c);break;case"textarea":Ns(c,m),Ge("invalid",c)}Zo(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var C=m[w];w==="children"?typeof C=="string"?c.textContent!==C&&(m.suppressHydrationWarning!==!0&&Yl(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(m.suppressHydrationWarning!==!0&&Yl(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&Ge("scroll",c)}switch(a){case"input":Rn(c),ks(c,m,!0);break;case"textarea":Rn(c),Ko(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Xl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=pt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[tr]=s,n[Ia]=c,$m(n,s,!1,!1),s.stateNode=n;e:{switch(w=ea(a,c),a){case"dialog":Ge("cancel",n),Ge("close",n),d=c;break;case"iframe":case"object":case"embed":Ge("load",n),d=c;break;case"video":case"audio":for(d=0;d<wa.length;d++)Ge(wa[d],n);d=c;break;case"source":Ge("error",n),d=c;break;case"img":case"image":case"link":Ge("error",n),Ge("load",n),d=c;break;case"details":Ge("toggle",n),d=c;break;case"input":Br(n,c),d=mr(n,c),Ge("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=B({},c,{value:void 0}),Ge("invalid",n);break;case"textarea":Ns(n,c),d=Go(n,c),Ge("invalid",n);break;default:d=c}Zo(a,d),C=d;for(m in C)if(C.hasOwnProperty(m)){var N=C[m];m==="style"?Xo(n,N):m==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Qo(n,N)):m==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Wr(n,N):typeof N=="number"&&Wr(n,""+N):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?N!=null&&m==="onScroll"&&Ge("scroll",n):N!=null&&re(n,m,N,w))}switch(a){case"input":Rn(n),ks(n,c,!1);break;case"textarea":Rn(n),Ko(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ce(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?sn(n,!!c.multiple,m,!1):c.defaultValue!=null&&sn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Xl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return jt(s),null;case 6:if(n&&s.stateNode!=null)Hm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=ls(Aa.current),ls(nr.current),iu(s)){if(c=s.stateNode,a=s.memoizedProps,c[tr]=s,(m=c.nodeValue!==a)&&(n=cn,n!==null))switch(n.tag){case 3:Yl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Yl(c.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[tr]=s,s.stateNode=c}return jt(s),null;case 13:if(Ke(Ze),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Je&&hn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Kp(),co(),s.flags|=98560,m=!1;else if(m=iu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[tr]=s}else co(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),m=!1}else Fn!==null&&(ld(Fn),Fn=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Ze.current&1)!==0?vt===0&&(vt=3):hd())),s.updateQueue!==null&&(s.flags|=4),jt(s),null);case 4:return mo(),Xh(n,s),n===null&&Ea(s.stateNode.containerInfo),jt(s),null;case 10:return xh(s.type._context),jt(s),null;case 17:return Xt(s.type)&&Zl(),jt(s),null;case 19:if(Ke(Ze),m=s.memoizedState,m===null)return jt(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)Da(m,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=cu(n),w!==null){for(s.flags|=128,Da(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return qe(Ze,Ze.current&1|2),s.child}n=n.sibling}m.tail!==null&&He()>_o&&(s.flags|=128,c=!0,Da(m,!1),s.lanes=4194304)}else{if(!c)if(n=cu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Da(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Je)return jt(s),null}else 2*He()-m.renderingStartTime>_o&&a!==1073741824&&(s.flags|=128,c=!0,Da(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(a=m.last,a!==null?a.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=He(),s.sibling=null,a=Ze.current,qe(Ze,c?a&1|2:a&1),s):(jt(s),null);case 22:case 23:return cd(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(dn&1073741824)!==0&&(jt(s),s.subtreeFlags&6&&(s.flags|=8192)):jt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function jw(n,s){switch(_h(s),s.tag){case 1:return Xt(s.type)&&Zl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return mo(),Ke(Yt),Ke(Ot),bh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return kh(s),null;case 13:if(Ke(Ze),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));co()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ke(Ze),null;case 4:return mo(),null;case 10:return xh(s.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var _u=!1,Mt=!1,Mw=typeof WeakSet=="function"?WeakSet:Set,pe=null;function yo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){rt(n,s,c)}else a.current=null}function Jh(n,s,a){try{a()}catch(c){rt(n,s,c)}}var qm=!1;function Fw(n,s){if(ch=Jr,n=Sp(),nh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,C=-1,N=-1,$=0,ee=0,ne=n,Z=null;t:for(;;){for(var he;ne!==a||d!==0&&ne.nodeType!==3||(C=w+d),ne!==m||c!==0&&ne.nodeType!==3||(N=w+c),ne.nodeType===3&&(w+=ne.nodeValue.length),(he=ne.firstChild)!==null;)Z=ne,ne=he;for(;;){if(ne===n)break t;if(Z===a&&++$===d&&(C=w),Z===m&&++ee===c&&(N=w),(he=ne.nextSibling)!==null)break;ne=Z,Z=ne.parentNode}ne=he}a=C===-1||N===-1?null:{start:C,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(hh={focusedElem:n,selectionRange:a},Jr=!1,pe=s;pe!==null;)if(s=pe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,pe=n;else for(;pe!==null;){s=pe;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,ot=me.memoizedState,M=s.stateNode,D=M.getSnapshotBeforeUpdate(s.elementType===s.type?ge:Un(s.type,ge),ot);M.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var U=s.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){rt(s,s.return,ie)}if(n=s.sibling,n!==null){n.return=s.return,pe=n;break}pe=s.return}return me=qm,qm=!1,me}function Va(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&Jh(s,a,m)}d=d.next}while(d!==c)}}function wu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Zh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Gm(n){var s=n.alternate;s!==null&&(n.alternate=null,Gm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[tr],delete s[Ia],delete s[mh],delete s[Ew],delete s[Tw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Km(n){return n.tag===5||n.tag===3||n.tag===4}function Qm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Km(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ed(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Xl));else if(c!==4&&(n=n.child,n!==null))for(ed(n,s,a),n=n.sibling;n!==null;)ed(n,s,a),n=n.sibling}function td(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(td(n,s,a),n=n.sibling;n!==null;)td(n,s,a),n=n.sibling}var Pt=null,zn=!1;function ai(n,s,a){for(a=a.child;a!==null;)Ym(n,s,a),a=a.sibling}function Ym(n,s,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Yi,a)}catch{}switch(a.tag){case 5:Mt||yo(a,s);case 6:var c=Pt,d=zn;Pt=null,ai(n,s,a),Pt=c,zn=d,Pt!==null&&(zn?(n=Pt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&(zn?(n=Pt,a=a.stateNode,n.nodeType===8?ph(n.parentNode,a):n.nodeType===1&&ph(n,a),Ln(n)):ph(Pt,a.stateNode));break;case 4:c=Pt,d=zn,Pt=a.stateNode.containerInfo,zn=!0,ai(n,s,a),Pt=c,zn=d;break;case 0:case 11:case 14:case 15:if(!Mt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&Jh(a,s,w),d=d.next}while(d!==c)}ai(n,s,a);break;case 1:if(!Mt&&(yo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){rt(a,s,C)}ai(n,s,a);break;case 21:ai(n,s,a);break;case 22:a.mode&1?(Mt=(c=Mt)||a.memoizedState!==null,ai(n,s,a),Mt=c):ai(n,s,a);break;default:ai(n,s,a)}}function Xm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Mw),s.forEach(function(c){var d=Kw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Bn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 5:Pt=C.stateNode,zn=!1;break e;case 3:Pt=C.stateNode.containerInfo,zn=!0;break e;case 4:Pt=C.stateNode.containerInfo,zn=!0;break e}C=C.return}if(Pt===null)throw Error(t(160));Ym(m,w,d),Pt=null,zn=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch($){rt(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Jm(s,n),s=s.sibling}function Jm(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Bn(s,n),ir(n),c&4){try{Va(3,n,n.return),wu(3,n)}catch(ge){rt(n,n.return,ge)}try{Va(5,n,n.return)}catch(ge){rt(n,n.return,ge)}}break;case 1:Bn(s,n),ir(n),c&512&&a!==null&&yo(a,a.return);break;case 5:if(Bn(s,n),ir(n),c&512&&a!==null&&yo(a,a.return),n.flags&32){var d=n.stateNode;try{Wr(d,"")}catch(ge){rt(n,n.return,ge)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,C=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{C==="input"&&m.type==="radio"&&m.name!=null&&Ui(d,m),ea(C,w);var $=ea(C,m);for(w=0;w<N.length;w+=2){var ee=N[w],ne=N[w+1];ee==="style"?Xo(d,ne):ee==="dangerouslySetInnerHTML"?Qo(d,ne):ee==="children"?Wr(d,ne):re(d,ee,ne,$)}switch(C){case"input":zi(d,m);break;case"textarea":bs(d,m);break;case"select":var Z=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var he=m.value;he!=null?sn(d,!!m.multiple,he,!1):Z!==!!m.multiple&&(m.defaultValue!=null?sn(d,!!m.multiple,m.defaultValue,!0):sn(d,!!m.multiple,m.multiple?[]:"",!1))}d[Ia]=m}catch(ge){rt(n,n.return,ge)}}break;case 6:if(Bn(s,n),ir(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(ge){rt(n,n.return,ge)}}break;case 3:if(Bn(s,n),ir(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ln(s.containerInfo)}catch(ge){rt(n,n.return,ge)}break;case 4:Bn(s,n),ir(n);break;case 13:Bn(s,n),ir(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(id=He())),c&4&&Xm(n);break;case 22:if(ee=a!==null&&a.memoizedState!==null,n.mode&1?(Mt=($=Mt)||ee,Bn(s,n),Mt=$):Bn(s,n),ir(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!ee&&(n.mode&1)!==0)for(pe=n,ee=n.child;ee!==null;){for(ne=pe=ee;pe!==null;){switch(Z=pe,he=Z.child,Z.tag){case 0:case 11:case 14:case 15:Va(4,Z,Z.return);break;case 1:yo(Z,Z.return);var me=Z.stateNode;if(typeof me.componentWillUnmount=="function"){c=Z,a=Z.return;try{s=c,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ge){rt(c,a,ge)}}break;case 5:yo(Z,Z.return);break;case 22:if(Z.memoizedState!==null){tg(ne);continue}}he!==null?(he.return=Z,pe=he):tg(ne)}ee=ee.sibling}e:for(ee=null,ne=n;;){if(ne.tag===5){if(ee===null){ee=ne;try{d=ne.stateNode,$?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(C=ne.stateNode,N=ne.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,C.style.display=Yo("display",w))}catch(ge){rt(n,n.return,ge)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=$?"":ne.memoizedProps}catch(ge){rt(n,n.return,ge)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===n)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===n)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===n)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:Bn(s,n),ir(n),c&4&&Xm(n);break;case 21:break;default:Bn(s,n),ir(n)}}function ir(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Km(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Wr(d,""),c.flags&=-33);var m=Qm(n);td(n,m,d);break;case 3:case 4:var w=c.stateNode.containerInfo,C=Qm(n);ed(n,C,w);break;default:throw Error(t(161))}}catch(N){rt(n,n.return,N)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Uw(n,s,a){pe=n,Zm(n)}function Zm(n,s,a){for(var c=(n.mode&1)!==0;pe!==null;){var d=pe,m=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||_u;if(!w){var C=d.alternate,N=C!==null&&C.memoizedState!==null||Mt;C=_u;var $=Mt;if(_u=w,(Mt=N)&&!$)for(pe=d;pe!==null;)w=pe,N=w.child,w.tag===22&&w.memoizedState!==null?ng(d):N!==null?(N.return=w,pe=N):ng(d);for(;m!==null;)pe=m,Zm(m),m=m.sibling;pe=d,_u=C,Mt=$}eg(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,pe=m):eg(n)}}function eg(n){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Mt||wu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Mt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Un(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&tm(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}tm(s,w,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var ee=$.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&Ln(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mt||s.flags&512&&Zh(s)}catch(Z){rt(s,s.return,Z)}}if(s===n){pe=null;break}if(a=s.sibling,a!==null){a.return=s.return,pe=a;break}pe=s.return}}function tg(n){for(;pe!==null;){var s=pe;if(s===n){pe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,pe=a;break}pe=s.return}}function ng(n){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{wu(4,s)}catch(N){rt(s,a,N)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(N){rt(s,d,N)}}var m=s.return;try{Zh(s)}catch(N){rt(s,m,N)}break;case 5:var w=s.return;try{Zh(s)}catch(N){rt(s,w,N)}}}catch(N){rt(s,s.return,N)}if(s===n){pe=null;break}var C=s.sibling;if(C!==null){C.return=s.return,pe=C;break}pe=s.return}}var zw=Math.ceil,Eu=te.ReactCurrentDispatcher,nd=te.ReactCurrentOwner,In=te.ReactCurrentBatchConfig,Fe=0,St=null,ct=null,kt=0,dn=0,vo=ni(0),vt=0,Oa=null,cs=0,Tu=0,rd=0,La=null,Zt=null,id=0,_o=1/0,kr=null,Iu=!1,sd=null,li=null,Su=!1,ui=null,xu=0,ja=0,od=null,Cu=-1,Ru=0;function Gt(){return(Fe&6)!==0?He():Cu!==-1?Cu:Cu=He()}function ci(n){return(n.mode&1)===0?1:(Fe&2)!==0&&kt!==0?kt&-kt:Sw.transition!==null?(Ru===0&&(Ru=Ji()),Ru):(n=Le,n!==0||(n=window.event,n=n===void 0?16:ha(n.type)),n)}function $n(n,s,a,c){if(50<ja)throw ja=0,od=null,Error(t(185));Kr(n,a,c),((Fe&2)===0||n!==St)&&(n===St&&((Fe&2)===0&&(Tu|=a),vt===4&&hi(n,kt)),en(n,c),a===1&&Fe===0&&(s.mode&1)===0&&(_o=He()+500,tu&&ii()))}function en(n,s){var a=n.callbackNode;vr(n,s);var c=Xi(n,n===St?kt:0);if(c===0)a!==null&&oa(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&oa(a),s===1)n.tag===0?Iw(ig.bind(null,n)):$p(ig.bind(null,n)),_w(function(){(Fe&6)===0&&ii()}),a=null;else{switch(Yr(c)){case 1:a=Qi;break;case 4:a=Hr;break;case 16:a=gn;break;case 536870912:a=Rl;break;default:a=gn}a=dg(a,rg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function rg(n,s){if(Cu=-1,Ru=0,(Fe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(wo()&&n.callbackNode!==a)return null;var c=Xi(n,n===St?kt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Au(n,c);else{s=c;var d=Fe;Fe|=2;var m=og();(St!==n||kt!==s)&&(kr=null,_o=He()+500,ds(n,s));do try{Ww();break}catch(C){sg(n,C)}while(!0);Sh(),Eu.current=m,Fe=d,ct!==null?s=0:(St=null,kt=0,s=vt)}if(s!==0){if(s===2&&(d=an(n),d!==0&&(c=d,s=ad(n,d))),s===1)throw a=Oa,ds(n,0),hi(n,c),en(n,He()),a;if(s===6)hi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Bw(d)&&(s=Au(n,c),s===2&&(m=an(n),m!==0&&(c=m,s=ad(n,m))),s===1))throw a=Oa,ds(n,0),hi(n,c),en(n,He()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:fs(n,Zt,kr);break;case 3:if(hi(n,c),(c&130023424)===c&&(s=id+500-He(),10<s)){if(Xi(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Gt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=fh(fs.bind(null,n,Zt,kr),s);break}fs(n,Zt,kr);break;case 4:if(hi(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-Wt(c);m=1<<w,w=s[w],w>d&&(d=w),c&=~m}if(c=d,c=He()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*zw(c/1960))-c,10<c){n.timeoutHandle=fh(fs.bind(null,n,Zt,kr),c);break}fs(n,Zt,kr);break;case 5:fs(n,Zt,kr);break;default:throw Error(t(329))}}}return en(n,He()),n.callbackNode===a?rg.bind(null,n):null}function ad(n,s){var a=La;return n.current.memoizedState.isDehydrated&&(ds(n,s).flags|=256),n=Au(n,s),n!==2&&(s=Zt,Zt=a,s!==null&&ld(s)),n}function ld(n){Zt===null?Zt=n:Zt.push.apply(Zt,n)}function Bw(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Mn(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hi(n,s){for(s&=~rd,s&=~Tu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Wt(s),c=1<<a;n[a]=-1,s&=~c}}function ig(n){if((Fe&6)!==0)throw Error(t(327));wo();var s=Xi(n,0);if((s&1)===0)return en(n,He()),null;var a=Au(n,s);if(n.tag!==0&&a===2){var c=an(n);c!==0&&(s=c,a=ad(n,c))}if(a===1)throw a=Oa,ds(n,0),hi(n,s),en(n,He()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,fs(n,Zt,kr),en(n,He()),null}function ud(n,s){var a=Fe;Fe|=1;try{return n(s)}finally{Fe=a,Fe===0&&(_o=He()+500,tu&&ii())}}function hs(n){ui!==null&&ui.tag===0&&(Fe&6)===0&&wo();var s=Fe;Fe|=1;var a=In.transition,c=Le;try{if(In.transition=null,Le=1,n)return n()}finally{Le=c,In.transition=a,Fe=s,(Fe&6)===0&&ii()}}function cd(){dn=vo.current,Ke(vo)}function ds(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,vw(a)),ct!==null)for(a=ct.return;a!==null;){var c=a;switch(_h(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Zl();break;case 3:mo(),Ke(Yt),Ke(Ot),bh();break;case 5:kh(c);break;case 4:mo();break;case 13:Ke(Ze);break;case 19:Ke(Ze);break;case 10:xh(c.type._context);break;case 22:case 23:cd()}a=a.return}if(St=n,ct=n=di(n.current,null),kt=dn=s,vt=0,Oa=null,rd=Tu=cs=0,Zt=La=null,as!==null){for(s=0;s<as.length;s++)if(a=as[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,c.next=w}a.pending=c}as=null}return n}function sg(n,s){do{var a=ct;try{if(Sh(),hu.current=mu,du){for(var c=et.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}du=!1}if(us=0,It=yt=et=null,Pa=!1,ka=0,nd.current=null,a===null||a.return===null){vt=1,Oa=s,ct=null;break}e:{var m=n,w=a.return,C=a,N=s;if(s=kt,C.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=N,ee=C,ne=ee.tag;if((ee.mode&1)===0&&(ne===0||ne===11||ne===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var he=km(w);if(he!==null){he.flags&=-257,Nm(he,w,C,m,s),he.mode&1&&Pm(m,$,s),s=he,N=$;var me=s.updateQueue;if(me===null){var ge=new Set;ge.add(N),s.updateQueue=ge}else me.add(N);break e}else{if((s&1)===0){Pm(m,$,s),hd();break e}N=Error(t(426))}}else if(Je&&C.mode&1){var ot=km(w);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),Nm(ot,w,C,m,s),Th(go(N,C));break e}}m=N=go(N,C),vt!==4&&(vt=2),La===null?La=[m]:La.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var M=Rm(m,N,s);em(m,M);break e;case 1:C=N;var D=m.type,U=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(li===null||!li.has(U)))){m.flags|=65536,s&=-s,m.lanes|=s;var ie=Am(m,C,s);em(m,ie);break e}}m=m.return}while(m!==null)}lg(a)}catch(ve){s=ve,ct===a&&a!==null&&(ct=a=a.return);continue}break}while(!0)}function og(){var n=Eu.current;return Eu.current=mu,n===null?mu:n}function hd(){(vt===0||vt===3||vt===2)&&(vt=4),St===null||(cs&268435455)===0&&(Tu&268435455)===0||hi(St,kt)}function Au(n,s){var a=Fe;Fe|=2;var c=og();(St!==n||kt!==s)&&(kr=null,ds(n,s));do try{$w();break}catch(d){sg(n,d)}while(!0);if(Sh(),Fe=a,Eu.current=c,ct!==null)throw Error(t(261));return St=null,kt=0,vt}function $w(){for(;ct!==null;)ag(ct)}function Ww(){for(;ct!==null&&!xl();)ag(ct)}function ag(n){var s=hg(n.alternate,n,dn);n.memoizedProps=n.pendingProps,s===null?lg(n):ct=s,nd.current=null}function lg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Lw(a,s,dn),a!==null){ct=a;return}}else{if(a=jw(a,s),a!==null){a.flags&=32767,ct=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{vt=6,ct=null;return}}if(s=s.sibling,s!==null){ct=s;return}ct=s=n}while(s!==null);vt===0&&(vt=5)}function fs(n,s,a){var c=Le,d=In.transition;try{In.transition=null,Le=1,Hw(n,s,a,c)}finally{In.transition=d,Le=c}return null}function Hw(n,s,a,c){do wo();while(ui!==null);if((Fe&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(We(n,m),n===St&&(ct=St=null,kt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Su||(Su=!0,dg(gn,function(){return wo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=In.transition,In.transition=null;var w=Le;Le=1;var C=Fe;Fe|=4,nd.current=null,Fw(n,a),Jm(a,n),hw(hh),Jr=!!ch,hh=ch=null,n.current=a,Uw(a),Kc(),Fe=C,Le=w,In.transition=m}else n.current=a;if(Su&&(Su=!1,ui=n,xu=d),m=n.pendingLanes,m===0&&(li=null),Al(a.stateNode),en(n,He()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Iu)throw Iu=!1,n=sd,sd=null,n;return(xu&1)!==0&&n.tag!==0&&wo(),m=n.pendingLanes,(m&1)!==0?n===od?ja++:(ja=0,od=n):ja=0,ii(),null}function wo(){if(ui!==null){var n=Yr(xu),s=In.transition,a=Le;try{if(In.transition=null,Le=16>n?16:n,ui===null)var c=!1;else{if(n=ui,ui=null,xu=0,(Fe&6)!==0)throw Error(t(331));var d=Fe;for(Fe|=4,pe=n.current;pe!==null;){var m=pe,w=m.child;if((pe.flags&16)!==0){var C=m.deletions;if(C!==null){for(var N=0;N<C.length;N++){var $=C[N];for(pe=$;pe!==null;){var ee=pe;switch(ee.tag){case 0:case 11:case 15:Va(8,ee,m)}var ne=ee.child;if(ne!==null)ne.return=ee,pe=ne;else for(;pe!==null;){ee=pe;var Z=ee.sibling,he=ee.return;if(Gm(ee),ee===$){pe=null;break}if(Z!==null){Z.return=he,pe=Z;break}pe=he}}}var me=m.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var ot=ge.sibling;ge.sibling=null,ge=ot}while(ge!==null)}}pe=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,pe=w;else e:for(;pe!==null;){if(m=pe,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Va(9,m,m.return)}var M=m.sibling;if(M!==null){M.return=m.return,pe=M;break e}pe=m.return}}var D=n.current;for(pe=D;pe!==null;){w=pe;var U=w.child;if((w.subtreeFlags&2064)!==0&&U!==null)U.return=w,pe=U;else e:for(w=D;pe!==null;){if(C=pe,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:wu(9,C)}}catch(ve){rt(C,C.return,ve)}if(C===w){pe=null;break e}var ie=C.sibling;if(ie!==null){ie.return=C.return,pe=ie;break e}pe=C.return}}if(Fe=d,ii(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Yi,n)}catch{}c=!0}return c}finally{Le=a,In.transition=s}}return!1}function ug(n,s,a){s=go(a,s),s=Rm(n,s,1),n=oi(n,s,1),s=Gt(),n!==null&&(Kr(n,1,s),en(n,s))}function rt(n,s,a){if(n.tag===3)ug(n,n,a);else for(;s!==null;){if(s.tag===3){ug(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(li===null||!li.has(c))){n=go(a,n),n=Am(s,n,1),s=oi(s,n,1),n=Gt(),s!==null&&(Kr(s,1,n),en(s,n));break}}s=s.return}}function qw(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Gt(),n.pingedLanes|=n.suspendedLanes&a,St===n&&(kt&a)===a&&(vt===4||vt===3&&(kt&130023424)===kt&&500>He()-id?ds(n,0):rd|=a),en(n,s)}function cg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Bs,Bs<<=1,(Bs&130023424)===0&&(Bs=4194304)));var a=Gt();n=Rr(n,s),n!==null&&(Kr(n,s,a),en(n,a))}function Gw(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),cg(n,a)}function Kw(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),cg(n,a)}var hg;hg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Yt.current)Jt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Jt=!1,Ow(n,s,a);Jt=(n.flags&131072)!==0}else Jt=!1,Je&&(s.flags&1048576)!==0&&Wp(s,ru,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;vu(n,s),n=s.pendingProps;var d=ao(s,Ot.current);po(s,a),d=Oh(null,s,c,n,d,a);var m=Lh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Xt(c)?(m=!0,eu(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ah(s),d.updater=gu,s.stateNode=d,d._reactInternals=s,Bh(s,c,n,a),s=qh(null,s,c,!0,m,a)):(s.tag=0,Je&&m&&vh(s),qt(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(vu(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=Yw(c),n=Un(c,n),d){case 0:s=Hh(null,s,c,n,a);break e;case 1:s=jm(null,s,c,n,a);break e;case 11:s=bm(null,s,c,n,a);break e;case 14:s=Dm(null,s,c,Un(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Un(c,d),Hh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Un(c,d),jm(n,s,c,d,a);case 3:e:{if(Mm(s),n===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,d=m.element,Zp(n,s),uu(s,c,null,a);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=go(Error(t(423)),s),s=Fm(n,s,c,a,d);break e}else if(c!==d){d=go(Error(t(424)),s),s=Fm(n,s,c,a,d);break e}else for(hn=ti(s.stateNode.containerInfo.firstChild),cn=s,Je=!0,Fn=null,a=Xp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(co(),c===d){s=Pr(n,s,a);break e}qt(n,s,c,a)}s=s.child}return s;case 5:return nm(s),n===null&&Eh(s),c=s.type,d=s.pendingProps,m=n!==null?n.memoizedProps:null,w=d.children,dh(c,d)?w=null:m!==null&&dh(c,m)&&(s.flags|=32),Lm(n,s),qt(n,s,w,a),s.child;case 6:return n===null&&Eh(s),null;case 13:return Um(n,s,a);case 4:return Ph(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=ho(s,null,c,a):qt(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Un(c,d),bm(n,s,c,d,a);case 7:return qt(n,s,s.pendingProps,a),s.child;case 8:return qt(n,s,s.pendingProps.children,a),s.child;case 12:return qt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,m=s.memoizedProps,w=d.value,qe(ou,c._currentValue),c._currentValue=w,m!==null)if(Mn(m.value,w)){if(m.children===d.children&&!Yt.current){s=Pr(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var C=m.dependencies;if(C!==null){w=m.child;for(var N=C.firstContext;N!==null;){if(N.context===c){if(m.tag===1){N=Ar(-1,a&-a),N.tag=2;var $=m.updateQueue;if($!==null){$=$.shared;var ee=$.pending;ee===null?N.next=N:(N.next=ee.next,ee.next=N),$.pending=N}}m.lanes|=a,N=m.alternate,N!==null&&(N.lanes|=a),Ch(m.return,a,s),C.lanes|=a;break}N=N.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),Ch(w,a,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}qt(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,po(s,a),d=En(d),c=c(d),s.flags|=1,qt(n,s,c,a),s.child;case 14:return c=s.type,d=Un(c,s.pendingProps),d=Un(c.type,d),Dm(n,s,c,d,a);case 15:return Vm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Un(c,d),vu(n,s),s.tag=1,Xt(c)?(n=!0,eu(s)):n=!1,po(s,a),xm(s,c,d),Bh(s,c,d,a),qh(null,s,c,!0,n,a);case 19:return Bm(n,s,a);case 22:return Om(n,s,a)}throw Error(t(156,s.tag))};function dg(n,s){return Us(n,s)}function Qw(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(n,s,a,c){return new Qw(n,s,a,c)}function dd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Yw(n){if(typeof n=="function")return dd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===it)return 14}return 2}function di(n,s){var a=n.alternate;return a===null?(a=Sn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Pu(n,s,a,c,d,m){var w=2;if(c=n,typeof n=="function")dd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case P:return ps(a.children,d,m,s);case x:w=8,d|=8;break;case A:return n=Sn(12,a,s,d|2),n.elementType=A,n.lanes=m,n;case R:return n=Sn(13,a,s,d),n.elementType=R,n.lanes=m,n;case $e:return n=Sn(19,a,s,d),n.elementType=$e,n.lanes=m,n;case se:return ku(a,d,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:w=10;break e;case V:w=9;break e;case O:w=11;break e;case it:w=14;break e;case nt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Sn(w,a,s,d),s.elementType=n,s.type=c,s.lanes=m,s}function ps(n,s,a,c){return n=Sn(7,n,c,s),n.lanes=a,n}function ku(n,s,a,c){return n=Sn(22,n,c,s),n.elementType=se,n.lanes=a,n.stateNode={isHidden:!1},n}function fd(n,s,a){return n=Sn(6,n,null,s),n.lanes=a,n}function pd(n,s,a){return s=Sn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Xw(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gr(0),this.expirationTimes=Gr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function md(n,s,a,c,d,m,w,C,N){return n=new Xw(n,s,a,C,N),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Sn(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ah(m),n}function Jw(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function fg(n){if(!n)return ri;n=n._reactInternals;e:{if(Nn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Xt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Xt(a))return zp(n,a,s)}return s}function pg(n,s,a,c,d,m,w,C,N){return n=md(a,c,!0,n,d,m,w,C,N),n.context=fg(null),a=n.current,c=Gt(),d=ci(a),m=Ar(c,d),m.callback=s??null,oi(a,m,d),n.current.lanes=d,Kr(n,d,c),en(n,c),n}function Nu(n,s,a,c){var d=s.current,m=Gt(),w=ci(d);return a=fg(a),s.context===null?s.context=a:s.pendingContext=a,s=Ar(m,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=oi(d,s,w),n!==null&&($n(n,d,w,m),lu(n,d,w)),w}function bu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function mg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function gd(n,s){mg(n,s),(n=n.alternate)&&mg(n,s)}function Zw(){return null}var gg=typeof reportError=="function"?reportError:function(n){console.error(n)};function yd(n){this._internalRoot=n}Du.prototype.render=yd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Nu(n,s,null,null)},Du.prototype.unmount=yd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;hs(function(){Nu(null,n,null,null)}),s[Ir]=null}};function Du(n){this._internalRoot=n}Du.prototype.unstable_scheduleHydration=function(n){if(n){var s=Dl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Xn.length&&s!==0&&s<Xn[a].priority;a++);Xn.splice(a,0,n),a===0&&Ll(n)}};function vd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Vu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function yg(){}function eE(n,s,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var $=bu(w);m.call($)}}var w=pg(s,c,n,0,null,!1,!1,"",yg);return n._reactRootContainer=w,n[Ir]=w.current,Ea(n.nodeType===8?n.parentNode:n),hs(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var $=bu(N);C.call($)}}var N=md(n,0,!1,null,null,!1,!1,"",yg);return n._reactRootContainer=N,n[Ir]=N.current,Ea(n.nodeType===8?n.parentNode:n),hs(function(){Nu(s,N,a,c)}),N}function Ou(n,s,a,c,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var C=d;d=function(){var N=bu(w);C.call(N)}}Nu(s,w,n,d)}else w=eE(a,s,n,d,c);return bu(w)}Nl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=qr(s.pendingLanes);a!==0&&(Qr(s,a|1),en(s,He()),(Fe&6)===0&&(_o=He()+500,ii()))}break;case 13:hs(function(){var c=Rr(n,1);if(c!==null){var d=Gt();$n(c,n,1,d)}}),gd(n,1)}},$s=function(n){if(n.tag===13){var s=Rr(n,134217728);if(s!==null){var a=Gt();$n(s,n,134217728,a)}gd(n,134217728)}},bl=function(n){if(n.tag===13){var s=ci(n),a=Rr(n,s);if(a!==null){var c=Gt();$n(a,n,s,c)}gd(n,s)}},Dl=function(){return Le},Vl=function(n,s){var a=Le;try{return Le=n,s()}finally{Le=a}},Vs=function(n,s,a){switch(s){case"input":if(zi(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=Jl(c);if(!d)throw Error(t(90));pr(c),zi(c,d)}}}break;case"textarea":bs(n,a);break;case"select":s=a.value,s!=null&&sn(n,!!a.multiple,s,!1)}},Hi=ud,na=hs;var tE={usingClientEntryPoint:!1,Events:[Sa,so,Jl,Qn,ta,ud]},Ma={findFiberByHostInstance:rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nE={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sa(n),n===null?null:n.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||Zw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{Yi=Lu.inject(nE),on=Lu}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tE,tn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(s))throw Error(t(200));return Jw(n,s,null,a)},tn.createRoot=function(n,s){if(!vd(n))throw Error(t(299));var a=!1,c="",d=gg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=md(n,1,!1,null,null,a,!1,c,d),n[Ir]=s.current,Ea(n.nodeType===8?n.parentNode:n),new yd(s)},tn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=sa(s),n=n===null?null:n.stateNode,n},tn.flushSync=function(n){return hs(n)},tn.hydrate=function(n,s,a){if(!Vu(s))throw Error(t(200));return Ou(null,n,s,!0,a)},tn.hydrateRoot=function(n,s,a){if(!vd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",w=gg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=pg(s,null,n,1,a??null,d,!1,m,w),n[Ir]=s.current,Ea(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Du(s)},tn.render=function(n,s,a){if(!Vu(s))throw Error(t(200));return Ou(null,n,s,!1,a)},tn.unmountComponentAtNode=function(n){if(!Vu(n))throw Error(t(40));return n._reactRootContainer?(hs(function(){Ou(null,null,n,!1,function(){n._reactRootContainer=null,n[Ir]=null})}),!0):!1},tn.unstable_batchedUpdates=ud,tn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Vu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Ou(n,s,a,!1,c)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var xg;function fv(){if(xg)return Ed.exports;xg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ed.exports=hE(),Ed.exports}var Cg;function dE(){if(Cg)return ju;Cg=1;var r=fv();return ju.createRoot=r.createRoot,ju.hydrateRoot=r.hydrateRoot,ju}var fE=dE();const pE=hv(fE);fv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Za(){return Za=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Za.apply(this,arguments)}var vi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(vi||(vi={}));const Rg="popstate";function mE(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:h,hash:f}=i.location;return jd("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:nc(o)}return yE(e,t,null,r)}function ft(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function mf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gE(){return Math.random().toString(36).substr(2,8)}function Ag(r,e){return{usr:r.state,key:r.key,idx:e}}function jd(r,e,t,i){return t===void 0&&(t=null),Za({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Mo(e):e,{state:t,key:e&&e.key||i||gE()})}function nc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Mo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function yE(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,f=vi.Pop,g=null,v=E();v==null&&(v=0,h.replaceState(Za({},h.state,{idx:v}),""));function E(){return(h.state||{idx:null}).idx}function I(){f=vi.Pop;let F=E(),H=F==null?null:F-v;v=F,g&&g({action:f,location:K.location,delta:H})}function S(F,H){f=vi.Push;let X=jd(K.location,F,H);v=E()+1;let re=Ag(X,v),te=K.createHref(X);try{h.pushState(re,"",te)}catch(xe){if(xe instanceof DOMException&&xe.name==="DataCloneError")throw xe;o.location.assign(te)}l&&g&&g({action:f,location:K.location,delta:1})}function L(F,H){f=vi.Replace;let X=jd(K.location,F,H);v=E();let re=Ag(X,v),te=K.createHref(X);h.replaceState(re,"",te),l&&g&&g({action:f,location:K.location,delta:0})}function z(F){let H=o.location.origin!=="null"?o.location.origin:o.location.href,X=typeof F=="string"?F:nc(F);return X=X.replace(/ $/,"%20"),ft(H,"No window.location.(origin|href) available to create URL for href: "+X),new URL(X,H)}let K={get action(){return f},get location(){return r(o,h)},listen(F){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Rg,I),g=F,()=>{o.removeEventListener(Rg,I),g=null}},createHref(F){return e(o,F)},createURL:z,encodeLocation(F){let H=z(F);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:S,replace:L,go(F){return h.go(F)}};return K}var Pg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Pg||(Pg={}));function vE(r,e,t){return t===void 0&&(t="/"),_E(r,e,t)}function _E(r,e,t,i){let o=typeof e=="string"?Mo(e):e,l=gf(o.pathname||"/",t);if(l==null)return null;let h=pv(r);wE(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let v=bE(l);f=PE(h[g],v)}return f}function pv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(ft(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let v=Ei([i,g.relativePath]),E=t.concat(g);l.children&&l.children.length>0&&(ft(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),pv(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:RE(v,l.index),routesMeta:E})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of mv(l.path))o(l,h,g)}),e}function mv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=mv(i.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function wE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:AE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const EE=/^:[\w-]+$/,TE=3,IE=2,SE=1,xE=10,CE=-2,kg=r=>r==="*";function RE(r,e){let t=r.split("/"),i=t.length;return t.some(kg)&&(i+=CE),e&&(i+=IE),t.filter(o=>!kg(o)).reduce((o,l)=>o+(EE.test(l)?TE:l===""?SE:xE),i)}function AE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function PE(r,e,t){let{routesMeta:i}=r,o={},l="/",h=[];for(let f=0;f<i.length;++f){let g=i[f],v=f===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",I=kE({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},E),S=g.route;if(!I)return null;Object.assign(o,I.params),h.push({params:o,pathname:Ei([l,I.pathname]),pathnameBase:jE(Ei([l,I.pathnameBase])),route:S}),I.pathnameBase!=="/"&&(l=Ei([l,I.pathnameBase]))}return h}function kE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=NE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((v,E,I)=>{let{paramName:S,isOptional:L}=E;if(S==="*"){let K=f[I]||"";h=l.slice(0,l.length-K.length).replace(/(.)\/+$/,"$1")}const z=f[I];return L&&!z?v[S]=void 0:v[S]=(z||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:r}}function NE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),mf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(i.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function bE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function gf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const DE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VE=r=>DE.test(r);function OE(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?Mo(r):r,l;if(t)if(VE(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),mf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Ng(t.substring(1),"/"):l=Ng(t,e)}else l=e;return{pathname:l,search:ME(i),hash:FE(o)}}function Ng(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Sd(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gv(r,e){let t=LE(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function yv(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=Mo(r):(o=Za({},r),ft(!o.pathname||!o.pathname.includes("?"),Sd("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),Sd("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),Sd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let I=e.length-1;if(!i&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),I-=1;o.pathname=S.join("/")}f=I>=0?e[I]:"/"}let g=OE(o,f),v=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(v||E)&&(g.pathname+="/"),g}const Ei=r=>r.join("/").replace(/\/\/+/g,"/"),jE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ME=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,FE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function UE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const vv=["post","put","patch","delete"];new Set(vv);const zE=["get",...vv];new Set(zE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function el(){return el=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},el.apply(this,arguments)}const yf=Y.createContext(null),BE=Y.createContext(null),Cs=Y.createContext(null),Sc=Y.createContext(null),Rs=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),_v=Y.createContext(null);function $E(r,e){let{relative:t}=e===void 0?{}:e;cl()||ft(!1);let{basename:i,navigator:o}=Y.useContext(Cs),{hash:l,pathname:h,search:f}=Ev(r,{relative:t}),g=h;return i!=="/"&&(g=h==="/"?i:Ei([i,h])),o.createHref({pathname:g,search:f,hash:l})}function cl(){return Y.useContext(Sc)!=null}function xc(){return cl()||ft(!1),Y.useContext(Sc).location}function wv(r){Y.useContext(Cs).static||Y.useLayoutEffect(r)}function vf(){let{isDataRoute:r}=Y.useContext(Rs);return r?nT():WE()}function WE(){cl()||ft(!1);let r=Y.useContext(yf),{basename:e,future:t,navigator:i}=Y.useContext(Cs),{matches:o}=Y.useContext(Rs),{pathname:l}=xc(),h=JSON.stringify(gv(o,t.v7_relativeSplatPath)),f=Y.useRef(!1);return wv(()=>{f.current=!0}),Y.useCallback(function(v,E){if(E===void 0&&(E={}),!f.current)return;if(typeof v=="number"){i.go(v);return}let I=yv(v,JSON.parse(h),l,E.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:Ei([e,I.pathname])),(E.replace?i.replace:i.push)(I,E.state,E)},[e,i,h,l,r])}function Ev(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=Y.useContext(Cs),{matches:o}=Y.useContext(Rs),{pathname:l}=xc(),h=JSON.stringify(gv(o,i.v7_relativeSplatPath));return Y.useMemo(()=>yv(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function HE(r,e){return qE(r,e)}function qE(r,e,t,i){cl()||ft(!1);let{navigator:o}=Y.useContext(Cs),{matches:l}=Y.useContext(Rs),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let v=xc(),E;if(e){var I;let F=typeof e=="string"?Mo(e):e;g==="/"||(I=F.pathname)!=null&&I.startsWith(g)||ft(!1),E=F}else E=v;let S=E.pathname||"/",L=S;if(g!=="/"){let F=g.replace(/^\//,"").split("/");L="/"+S.replace(/^\//,"").split("/").slice(F.length).join("/")}let z=vE(r,{pathname:L}),K=XE(z&&z.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:Ei([g,o.encodeLocation?o.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:Ei([g,o.encodeLocation?o.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),l,t,i);return e&&K?Y.createElement(Sc.Provider,{value:{location:el({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:vi.Pop}},K):K}function GE(){let r=tT(),e=UE(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:o},t):null,null)}const KE=Y.createElement(GE,null);class QE extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Y.createElement(Rs.Provider,{value:this.props.routeContext},Y.createElement(_v.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YE(r){let{routeContext:e,match:t,children:i}=r,o=Y.useContext(yf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(Rs.Provider,{value:e},i)}function XE(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let E=h.findIndex(I=>I.route.id&&(f==null?void 0:f[I.route.id])!==void 0);E>=0||ft(!1),h=h.slice(0,Math.min(h.length,E+1))}let g=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<h.length;E++){let I=h[E];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(v=E),I.route.id){let{loaderData:S,errors:L}=t,z=I.route.loader&&S[I.route.id]===void 0&&(!L||L[I.route.id]===void 0);if(I.route.lazy||z){g=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((E,I,S)=>{let L,z=!1,K=null,F=null;t&&(L=f&&I.route.id?f[I.route.id]:void 0,K=I.route.errorElement||KE,g&&(v<0&&S===0?(rT("route-fallback"),z=!0,F=null):v===S&&(z=!0,F=I.route.hydrateFallbackElement||null)));let H=e.concat(h.slice(0,S+1)),X=()=>{let re;return L?re=K:z?re=F:I.route.Component?re=Y.createElement(I.route.Component,null):I.route.element?re=I.route.element:re=E,Y.createElement(YE,{match:I,routeContext:{outlet:E,matches:H,isDataRoute:t!=null},children:re})};return t&&(I.route.ErrorBoundary||I.route.errorElement||S===0)?Y.createElement(QE,{location:t.location,revalidation:t.revalidation,component:K,error:L,children:X(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):X()},null)}var Tv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Tv||{}),Iv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Iv||{});function JE(r){let e=Y.useContext(yf);return e||ft(!1),e}function ZE(r){let e=Y.useContext(BE);return e||ft(!1),e}function eT(r){let e=Y.useContext(Rs);return e||ft(!1),e}function Sv(r){let e=eT(),t=e.matches[e.matches.length-1];return t.route.id||ft(!1),t.route.id}function tT(){var r;let e=Y.useContext(_v),t=ZE(),i=Sv();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function nT(){let{router:r}=JE(Tv.UseNavigateStable),e=Sv(Iv.UseNavigateStable),t=Y.useRef(!1);return wv(()=>{t.current=!0}),Y.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,el({fromRouteId:e},l)))},[r,e])}const bg={};function rT(r,e,t){bg[r]||(bg[r]=!0)}function iT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function ms(r){ft(!1)}function sT(r){let{basename:e="/",children:t=null,location:i,navigationType:o=vi.Pop,navigator:l,static:h=!1,future:f}=r;cl()&&ft(!1);let g=e.replace(/^\/*/,"/"),v=Y.useMemo(()=>({basename:g,navigator:l,static:h,future:el({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof i=="string"&&(i=Mo(i));let{pathname:E="/",search:I="",hash:S="",state:L=null,key:z="default"}=i,K=Y.useMemo(()=>{let F=gf(E,g);return F==null?null:{location:{pathname:F,search:I,hash:S,state:L,key:z},navigationType:o}},[g,E,I,S,L,z,o]);return K==null?null:Y.createElement(Cs.Provider,{value:v},Y.createElement(Sc.Provider,{children:t,value:K}))}function oT(r){let{children:e,location:t}=r;return HE(Md(e),t)}new Promise(()=>{});function Md(r,e){e===void 0&&(e=[]);let t=[];return Y.Children.forEach(r,(i,o)=>{if(!Y.isValidElement(i))return;let l=[...e,o];if(i.type===Y.Fragment){t.push.apply(t,Md(i.props.children,l));return}i.type!==ms&&ft(!1),!i.props.index||!i.props.children||ft(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Md(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fd(){return Fd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Fd.apply(this,arguments)}function aT(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function lT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function uT(r,e){return r.button===0&&(!e||e==="_self")&&!lT(r)}const cT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hT="6";try{window.__reactRouterVersion=hT}catch{}const dT="startTransition",Dg=lE[dT];function fT(r){let{basename:e,children:t,future:i,window:o}=r,l=Y.useRef();l.current==null&&(l.current=mE({window:o,v5Compat:!0}));let h=l.current,[f,g]=Y.useState({action:h.action,location:h.location}),{v7_startTransition:v}=i||{},E=Y.useCallback(I=>{v&&Dg?Dg(()=>g(I)):g(I)},[g,v]);return Y.useLayoutEffect(()=>h.listen(E),[h,E]),Y.useEffect(()=>iT(i),[i]),Y.createElement(sT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:i})}const pT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ua=Y.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:v,preventScrollReset:E,viewTransition:I}=e,S=aT(e,cT),{basename:L}=Y.useContext(Cs),z,K=!1;if(typeof v=="string"&&mT.test(v)&&(z=v,pT))try{let re=new URL(window.location.href),te=v.startsWith("//")?new URL(re.protocol+v):new URL(v),xe=gf(te.pathname,L);te.origin===re.origin&&xe!=null?v=xe+te.search+te.hash:K=!0}catch{}let F=$E(v,{relative:o}),H=gT(v,{replace:h,state:f,target:g,preventScrollReset:E,relative:o,viewTransition:I});function X(re){i&&i(re),re.defaultPrevented||H(re)}return Y.createElement("a",Fd({},S,{href:z||F,onClick:K||l?i:X,ref:t,target:g}))});var Vg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Vg||(Vg={}));var Og;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Og||(Og={}));function gT(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=vf(),v=xc(),E=Ev(r,{relative:h});return Y.useCallback(I=>{if(uT(I,t)){I.preventDefault();let S=i!==void 0?i:nc(v)===nc(E);g(r,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[v,g,E,i,o,t,r,l,h,f])}const yT=()=>{};var Lg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},vT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Cv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,E=l>>2,I=(l&3)<<4|f>>4;let S=(f&15)<<2|v>>6,L=v&63;g||(L=64,h||(S=64)),i.push(t[E],t[I],t[S],t[L])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(xv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):vT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||v==null||I==null)throw new _T;const S=l<<2|f>>4;if(i.push(S),v!==64){const L=f<<4&240|v>>2;if(i.push(L),I!==64){const z=v<<6&192|I;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class _T extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wT=function(r){const e=xv(r);return Cv.encodeByteArray(e,!0)},rc=function(r){return wT(r).replace(/\./g,"")},Rv=function(r){try{return Cv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=()=>ET().__FIREBASE_DEFAULTS__,IT=()=>{if(typeof process>"u"||typeof Lg>"u")return;const r=Lg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},ST=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Rv(r[1]);return e&&JSON.parse(e)},Cc=()=>{try{return yT()||TT()||IT()||ST()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Av=r=>{var e,t;return(t=(e=Cc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},xT=r=>{const e=Av(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Pv=()=>{var r;return(r=Cc())===null||r===void 0?void 0:r.config},kv=r=>{var e;return(e=Cc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[rc(JSON.stringify(t)),rc(JSON.stringify(h)),""].join(".")}const Ga={};function AT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ga))Ga[e]?r.emulator.push(e):r.prod.push(e);return r}function PT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let jg=!1;function bv(r,e){if(typeof window>"u"||typeof document>"u"||!Fo(window.location.host)||Ga[r]===e||Ga[r]||jg)return;Ga[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=AT().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,L){S.setAttribute("width","24"),S.setAttribute("id",L),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{jg=!0,h()},S}function E(S,L){S.setAttribute("id",L),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function I(){const S=PT(i),L=t("text"),z=document.getElementById(L)||document.createElement("span"),K=t("learnmore"),F=document.getElementById(K)||document.createElement("a"),H=t("preprendIcon"),X=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;f(re),E(F,K);const te=v();g(X,H),re.append(X,z,F,te),document.body.appendChild(re)}l?(z.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function NT(){var r;const e=(r=Cc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function VT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OT(){const r=$t();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function LT(){return!NT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jT(){try{return typeof indexedDB=="object"}catch{return!1}}function MT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="FirebaseError";class zr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=FT,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?UT(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new zr(o,f,i)}}function UT(r,e){return r.replace(zT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const zT=/\{\$([^}]+)}/g;function BT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ws(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Mg(l)&&Mg(h)){if(!ws(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Mg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function za(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ba(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function $T(r,e){const t=new WT(r,e);return t.subscribe.bind(t)}class WT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");HT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=xd),o.error===void 0&&(o.error=xd),o.complete===void 0&&(o.complete=xd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(r){return r&&r._delegate?r._delegate:r}class Es{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new CT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KT(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:GT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GT(r){return r===gs?void 0:r}function KT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const YT={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},XT=Ve.INFO,JT={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},ZT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=JT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _f{constructor(e){this.name=e,this._logLevel=XT,this._logHandler=ZT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const eI=(r,e)=>e.some(t=>r instanceof t);let Fg,Ug;function tI(){return Fg||(Fg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nI(){return Ug||(Ug=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dv=new WeakMap,Ud=new WeakMap,Vv=new WeakMap,Cd=new WeakMap,wf=new WeakMap;function rI(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ti(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Dv.set(t,r)}).catch(()=>{}),wf.set(e,r),e}function iI(r){if(Ud.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Ud.set(r,e)}let zd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ud.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Vv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ti(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function sI(r){zd=r(zd)}function oI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Rd(this),e,...t);return Vv.set(i,e.sort?e.sort():[e]),Ti(i)}:nI().includes(r)?function(...e){return r.apply(Rd(this),e),Ti(Dv.get(this))}:function(...e){return Ti(r.apply(Rd(this),e))}}function aI(r){return typeof r=="function"?oI(r):(r instanceof IDBTransaction&&iI(r),eI(r,tI())?new Proxy(r,zd):r)}function Ti(r){if(r instanceof IDBRequest)return rI(r);if(Cd.has(r))return Cd.get(r);const e=aI(r);return e!==r&&(Cd.set(r,e),wf.set(e,r)),e}const Rd=r=>wf.get(r);function lI(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Ti(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Ti(h.result),g.oldVersion,g.newVersion,Ti(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const uI=["get","getKey","getAll","getAllKeys","count"],cI=["put","add","delete","clear"],Ad=new Map;function zg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ad.get(e))return Ad.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=cI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||uI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return i&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&g.done]))[0]};return Ad.set(e,l),l}sI(r=>({...r,get:(e,t,i)=>zg(e,t)||r.get(e,t,i),has:(e,t)=>!!zg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function dI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bd="@firebase/app",Bg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new _f("@firebase/app"),fI="@firebase/app-compat",pI="@firebase/analytics-compat",mI="@firebase/analytics",gI="@firebase/app-check-compat",yI="@firebase/app-check",vI="@firebase/auth",_I="@firebase/auth-compat",wI="@firebase/database",EI="@firebase/data-connect",TI="@firebase/database-compat",II="@firebase/functions",SI="@firebase/functions-compat",xI="@firebase/installations",CI="@firebase/installations-compat",RI="@firebase/messaging",AI="@firebase/messaging-compat",PI="@firebase/performance",kI="@firebase/performance-compat",NI="@firebase/remote-config",bI="@firebase/remote-config-compat",DI="@firebase/storage",VI="@firebase/storage-compat",OI="@firebase/firestore",LI="@firebase/ai",jI="@firebase/firestore-compat",MI="firebase",FI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="[DEFAULT]",UI={[Bd]:"fire-core",[fI]:"fire-core-compat",[mI]:"fire-analytics",[pI]:"fire-analytics-compat",[yI]:"fire-app-check",[gI]:"fire-app-check-compat",[vI]:"fire-auth",[_I]:"fire-auth-compat",[wI]:"fire-rtdb",[EI]:"fire-data-connect",[TI]:"fire-rtdb-compat",[II]:"fire-fn",[SI]:"fire-fn-compat",[xI]:"fire-iid",[CI]:"fire-iid-compat",[RI]:"fire-fcm",[AI]:"fire-fcm-compat",[PI]:"fire-perf",[kI]:"fire-perf-compat",[NI]:"fire-rc",[bI]:"fire-rc-compat",[DI]:"fire-gcs",[VI]:"fire-gcs-compat",[OI]:"fire-fst",[jI]:"fire-fst-compat",[LI]:"fire-vertex","fire-js":"fire-js",[MI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Map,zI=new Map,Wd=new Map;function $g(r,e){try{r.container.addComponent(e)}catch(t){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function No(r){const e=r.name;if(Wd.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;Wd.set(e,r);for(const t of ic.values())$g(t,r);for(const t of zI.values())$g(t,r);return!0}function Ef(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function fn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new hl("app","Firebase",BI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=FI;function Ov(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:$d,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Ii.create("bad-app-name",{appName:String(o)});if(t||(t=Pv()),!t)throw Ii.create("no-options");const l=ic.get(o);if(l){if(ws(t,l.options)&&ws(i,l.config))return l;throw Ii.create("duplicate-app",{appName:o})}const h=new QT(o);for(const g of Wd.values())h.addComponent(g);const f=new $I(t,i,h);return ic.set(o,f),f}function Lv(r=$d){const e=ic.get(r);if(!e&&r===$d&&Pv())return Ov();if(!e)throw Ii.create("no-app",{appName:r});return e}function Si(r,e,t){var i;let o=(i=UI[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(f.join(" "));return}No(new Es(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="firebase-heartbeat-database",HI=1,tl="firebase-heartbeat-store";let Pd=null;function jv(){return Pd||(Pd=lI(WI,HI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ii.create("idb-open",{originalErrorMessage:r.message})})),Pd}async function qI(r){try{const t=(await jv()).transaction(tl),i=await t.objectStore(tl).get(Mv(r));return await t.done,i}catch(e){if(e instanceof zr)Lr.warn(e.message);else{const t=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(t.message)}}}async function Wg(r,e){try{const i=(await jv()).transaction(tl,"readwrite");await i.objectStore(tl).put(e,Mv(r)),await i.done}catch(t){if(t instanceof zr)Lr.warn(t.message);else{const i=Ii.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Lr.warn(i.message)}}}function Mv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=1024,KI=30;class QI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Hg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>KI){const h=JI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Lr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Hg(),{heartbeatsToSend:i,unsentEntries:o}=YI(this._heartbeatsCache.heartbeats),l=rc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Lr.warn(t),""}}}function Hg(){return new Date().toISOString().substring(0,10)}function YI(r,e=GI){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),qg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),qg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class XI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jT()?MT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function qg(r){return rc(JSON.stringify({version:2,heartbeats:r})).length}function JI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(r){No(new Es("platform-logger",e=>new hI(e),"PRIVATE")),No(new Es("heartbeat",e=>new QI(e),"PRIVATE")),Si(Bd,Bg,r),Si(Bd,Bg,"esm2017"),Si("fire-js","")}ZI("");var eS="firebase",tS="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(eS,tS,"app");function Tf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Fv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nS=Fv,Uv=new hl("auth","Firebase",Fv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new _f("@firebase/auth");function rS(r,...e){sc.logLevel<=Ve.WARN&&sc.warn(`Auth (${Uo}): ${r}`,...e)}function Hu(r,...e){sc.logLevel<=Ve.ERROR&&sc.error(`Auth (${Uo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(r,...e){throw Sf(r,...e)}function Hn(r,...e){return Sf(r,...e)}function If(r,e,t){const i=Object.assign(Object.assign({},nS()),{[e]:t});return new hl("auth","Firebase",i).create(e,{appName:r.name})}function Vr(r){return If(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iS(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Cn(r,"argument-error"),If(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Uv.create(r,...e)}function Ie(r,e,...t){if(!r)throw Sf(e,...t)}function br(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Hu(e),new Error(e)}function jr(r,e){r||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function sS(){return Gg()==="http:"||Gg()==="https:"}function Gg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sS()||DT()||"connection"in navigator)?navigator.onLine:!0}function aS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t){this.shortDelay=e,this.longDelay=t,jr(t>e,"Short delay should be less than long delay!"),this.isMobile=kT()||VT()}get(){return oS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(r,e){jr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cS=new fl(3e4,6e4);function Oi(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Li(r,e,t,i,o={}){return Bv(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=dl(Object.assign({key:r.config.apiKey},h)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:g},l);return bT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Fo(r.emulatorConfig.host)&&(v.credentials="include"),zv.fetch()(await $v(r,r.config.apiHost,t,f),v)})}async function Bv(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},lS),e);try{const o=new dS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Mu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,v]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Mu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Mu(r,"user-disabled",h);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw If(r,E,v);Cn(r,E)}}catch(o){if(o instanceof zr)throw o;Cn(r,"network-request-failed",{message:String(o)})}}async function pl(r,e,t,i,o={}){const l=await Li(r,e,t,i,o);return"mfaPendingCredential"in l&&Cn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function $v(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?xf(r.config,o):`${r.config.apiScheme}://${o}`;return uS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function hS(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),cS.get())})}}function Mu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Hn(r,e,i);return o.customData._tokenResponse=t,o}function Kg(r){return r!==void 0&&r.enterprise!==void 0}class fS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return hS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pS(r,e){return Li(r,"GET","/v2/recaptchaConfig",Oi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(r,e){return Li(r,"POST","/v1/accounts:delete",e)}async function oc(r,e){return Li(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gS(r,e=!1){const t=Dt(r),i=await t.getIdToken(e),o=Cf(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Ka(kd(o.auth_time)),issuedAtTime:Ka(kd(o.iat)),expirationTime:Ka(kd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function kd(r){return Number(r)*1e3}function Cf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Rv(t);return o?JSON.parse(o):(Hu("Failed to decode base64 JWT payload"),null)}catch(o){return Hu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Qg(r){const e=Cf(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof zr&&yS(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function yS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(r){var e;const t=r.auth,i=await r.getIdToken(),o=await nl(r,oc(t,{idToken:i}));Ie(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Wv(l.providerUserInfo):[],f=wS(r.providerData,h),g=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),E=g?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new qd(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,I)}async function _S(r){const e=Dt(r);await ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wS(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Wv(r){return r.map(e=>{var{providerId:t}=e,i=Tf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(r,e){const t=await Bv(r,{},async()=>{const i=dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await $v(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return r.emulatorConfig&&Fo(r.emulatorConfig.host)&&(g.credentials="include"),zv.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TS(r,e){return Li(r,"POST","/v2/accounts:revokeToken",Oi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=Qg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await ES(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Co;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Wn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Tf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new qd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await nl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return gS(this,e)}reload(){return _S(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ac(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fn(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await nl(this,mS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,f,g,v,E;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,L=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,z=(h=t.photoURL)!==null&&h!==void 0?h:void 0,K=(f=t.tenantId)!==null&&f!==void 0?f:void 0,F=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,H=(v=t.createdAt)!==null&&v!==void 0?v:void 0,X=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:re,emailVerified:te,isAnonymous:xe,providerData:ce,stsTokenManager:P}=t;Ie(re&&P,e,"internal-error");const x=Co.fromJSON(this.name,P);Ie(typeof re=="string",e,"internal-error"),pi(I,e.name),pi(S,e.name),Ie(typeof te=="boolean",e,"internal-error"),Ie(typeof xe=="boolean",e,"internal-error"),pi(L,e.name),pi(z,e.name),pi(K,e.name),pi(F,e.name),pi(H,e.name),pi(X,e.name);const A=new Wn({uid:re,auth:e,email:S,emailVerified:te,displayName:I,isAnonymous:xe,photoURL:z,phoneNumber:L,tenantId:K,stsTokenManager:x,createdAt:H,lastLoginAt:X});return ce&&Array.isArray(ce)&&(A.providerData=ce.map(b=>Object.assign({},b))),F&&(A._redirectEventId=F),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new Co;o.updateFromServerResponse(t);const l=new Wn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ac(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Wv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Co;f.updateFromIdToken(i);const g=new Wn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new qd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=new Map;function Dr(r){jr(r instanceof Function,"Expected a class definition");let e=Yg.get(r);return e?(jr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Yg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Hv.type="NONE";const Xg=Hv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(r,e,t){return`firebase:${r}:${e}:${t}`}class Ro{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=qu(this.userKey,o.apiKey,l),this.fullPersistenceKey=qu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await oc(this.auth,{idToken:e}).catch(()=>{});return t?Wn._fromGetAccountInfoResponse(this.auth,t,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ro(Dr(Xg),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Dr(Xg);const h=qu(i,e.config.apiKey,e.name);let f=null;for(const v of t)try{const E=await v._get(h);if(E){let I;if(typeof E=="string"){const S=await oc(e,{idToken:E}).catch(()=>{});if(!S)break;I=await Wn._fromGetAccountInfoResponse(e,S,E)}else I=Wn._fromJSON(e,E);v!==l&&(f=I),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ro(l,e,i):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Ro(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xv(e))return"Blackberry";if(Jv(e))return"Webos";if(Gv(e))return"Safari";if((e.includes("chrome/")||Kv(e))&&!e.includes("edge/"))return"Chrome";if(Yv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function qv(r=$t()){return/firefox\//i.test(r)}function Gv(r=$t()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kv(r=$t()){return/crios\//i.test(r)}function Qv(r=$t()){return/iemobile/i.test(r)}function Yv(r=$t()){return/android/i.test(r)}function Xv(r=$t()){return/blackberry/i.test(r)}function Jv(r=$t()){return/webos/i.test(r)}function Rf(r=$t()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function IS(r=$t()){var e;return Rf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SS(){return OT()&&document.documentMode===10}function Zv(r=$t()){return Rf(r)||Yv(r)||Jv(r)||Xv(r)||/windows phone/i.test(r)||Qv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(r,e=[]){let t;switch(r){case"Browser":t=Jg($t());break;case"Worker":t=`${Jg($t())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(r,e={}){return Li(r,"GET","/v2/passwordPolicy",Oi(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=6;class AS{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:RS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,f;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(f=g.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zg(this),this.idTokenSubscription=new Zg(this),this.beforeStateQueue=new xS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Uv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await oc(this,{idToken:e}),i=await Wn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(fn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ac(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fn(this.app))return Promise.reject(Vr(this));const t=e?Dt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fn(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fn(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CS(this),t=new AS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await TS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Dr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[Dr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=e_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&rS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ji(r){return Dt(r)}class Zg{constructor(e){this.auth=e,this.observer=null,this.addObserver=$T(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kS(r){Rc=r}function t_(r){return Rc.loadJS(r)}function NS(){return Rc.recaptchaEnterpriseScript}function bS(){return Rc.gapiScript}function DS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class VS{constructor(){this.enterprise=new OS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class OS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const LS="recaptcha-enterprise",n_="NO_RECAPTCHA";class jS{constructor(e){this.type=LS,this.auth=ji(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{pS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new fS(g);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(g=>{f(g)})})}function o(l,h,f){const g=window.grecaptcha;Kg(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(n_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VS().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(f=>{if(!t&&Kg(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=NS();g.length!==0&&(g+=f),t_(g).then(()=>{o(f,l,h)}).catch(v=>{h(v)})}}).catch(f=>{h(f)})})}}async function ey(r,e,t,i=!1,o=!1){const l=new jS(r);let h;if(o)h=n_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Gd(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await ey(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ey(r,e,t,t==="getOobCode");return i(r,f)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(r,e){const t=Ef(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ws(l,e??{}))return o;Cn(o,"already-initialized")}return t.initialize({options:e})}function FS(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Dr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function US(r,e,t){const i=ji(r);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=r_(e),{host:h,port:f}=zS(e),g=f===null?"":`:${f}`,v={url:`${l}//${h}${g}/`},E=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(ws(v,i.config.emulator)&&ws(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,Fo(h)?(Nv(`${l}//${h}${g}`),bv("Auth",!0)):BS()}function r_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function zS(r){const e=r_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:ty(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:ty(h)}}}function ty(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function BS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,t){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}async function $S(r,e){return Li(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(r,e){return pl(r,"POST","/v1/accounts:signInWithPassword",Oi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(r,e){return pl(r,"POST","/v1/accounts:signInWithEmailLink",Oi(r,e))}async function qS(r,e){return pl(r,"POST","/v1/accounts:signInWithEmailLink",Oi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Af{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new rl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new rl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gd(e,t,"signInWithPassword",WS);case"emailLink":return HS(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gd(e,i,"signUpPassword",$S);case"emailLink":return qS(e,{idToken:t,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(r,e){return pl(r,"POST","/v1/accounts:signInWithIdp",Oi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="http://localhost";class Ts extends Af{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Cn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Tf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new Ts(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Ao(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ao(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ao(e,t)}buildRequest(){const e={requestUri:GS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QS(r){const e=za(Ba(r)).link,t=e?za(Ba(e)).deep_link_id:null,i=za(Ba(r)).deep_link_id;return(i?za(Ba(i)).link:null)||i||t||e||r}class Pf{constructor(e){var t,i,o,l,h,f;const g=za(Ba(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,E=(i=g.oobCode)!==null&&i!==void 0?i:null,I=KS((o=g.mode)!==null&&o!==void 0?o:null);Ie(v&&E&&I,"argument-error"),this.apiKey=v,this.operation=I,this.code=E,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(f=g.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=QS(e);try{return new Pf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,t){return rl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Pf.parseLink(t);return Ie(i,"argument-error"),rl._fromEmailAndCode(e,i.code,i.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends kf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends ml{constructor(){super("facebook.com")}static credential(e){return Ts._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends ml{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ts._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return or.credential(t,i)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends ml{constructor(){super("github.com")}static credential(e){return Ts._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.GITHUB_SIGN_IN_METHOD="github.com";gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends ml{constructor(){super("twitter.com")}static credential(e,t){return Ts._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return yi.credential(t,i)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(r,e){return pl(r,"POST","/v1/accounts:signUp",Oi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Wn._fromIdTokenResponse(e,i,o),h=ny(i);return new Is({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ny(i);return new Is({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ny(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends zr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,lc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new lc(e,t,i,o)}}function i_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?lc._fromErrorAndOperation(r,l,e,i):l})}async function XS(r,e,t=!1){const i=await nl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Is._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(r,e,t=!1){const{auth:i}=r;if(fn(i.app))return Promise.reject(Vr(i));const o="reauthenticate";try{const l=await nl(r,i_(i,o,e,r),t);Ie(l.idToken,i,"internal-error");const h=Cf(l.idToken);Ie(h,i,"internal-error");const{sub:f}=h;return Ie(r.uid===f,i,"user-mismatch"),Is._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Cn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s_(r,e,t=!1){if(fn(r.app))return Promise.reject(Vr(r));const i="signIn",o=await i_(r,i,e),l=await Is._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function ZS(r,e){return s_(ji(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o_(r){const e=ji(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function e1(r,e,t){if(fn(r.app))return Promise.reject(Vr(r));const i=ji(r),h=await Gd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YS).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&o_(r),g}),f=await Is._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(f.user),f}function a_(r,e,t){return fn(r.app)?Promise.reject(Vr(r)):ZS(Dt(r),zo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&o_(r),i})}function t1(r,e,t,i){return Dt(r).onIdTokenChanged(e,t,i)}function n1(r,e,t){return Dt(r).beforeAuthStateChanged(e,t)}function r1(r,e,t,i){return Dt(r).onAuthStateChanged(e,t,i)}function l_(r){return Dt(r).signOut()}const uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uc,"1"),this.storage.removeItem(uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=1e3,s1=10;class c_ extends u_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);SS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,s1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},i1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}c_.type="LOCAL";const o1=c_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_ extends u_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}h_.type="SESSION";const d_=h_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Ac(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async v=>v(t.origin,l)),g=await a1(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ac.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const v=Nf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(I){const S=I;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function u1(r){ar().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function c1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function d1(){return f_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="firebaseLocalStorageDb",f1=1,cc="firebaseLocalStorage",m_="fbase_key";class gl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Pc(r,e){return r.transaction([cc],e?"readwrite":"readonly").objectStore(cc)}function p1(){const r=indexedDB.deleteDatabase(p_);return new gl(r).toPromise()}function Kd(){const r=indexedDB.open(p_,f1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(cc,{keyPath:m_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(cc)?e(i):(i.close(),await p1(),e(await Kd()))})})}async function ry(r,e,t){const i=Pc(r,!0).put({[m_]:e,value:t});return new gl(i).toPromise()}async function m1(r,e){const t=Pc(r,!1).get(e),i=await new gl(t).toPromise();return i===void 0?null:i.value}function iy(r,e){const t=Pc(r,!0).delete(e);return new gl(t).toPromise()}const g1=800,y1=3;class g_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>y1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return f_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ac._getInstance(d1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await c1(),!this.activeServiceWorker)return;this.sender=new l1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kd();return await ry(e,uc,"1"),await iy(e,uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ry(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>m1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Pc(o,!1).getAll();return new gl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}g_.type="LOCAL";const v1=g_;new fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(r,e){return e?Dr(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends Af{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ao(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _1(r){return s_(r.auth,new bf(r),r.bypassAuthState)}function w1(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),JS(t,new bf(r),r.bypassAuthState)}async function E1(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),XS(t,new bf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _1;case"linkViaPopup":case"linkViaRedirect":return E1;case"reauthViaPopup":case"reauthViaRedirect":return w1;default:Cn(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new fl(2e3,1e4);async function __(r,e,t){if(fn(r.app))return Promise.reject(Hn(r,"operation-not-supported-in-this-environment"));const i=ji(r);iS(r,e,kf);const o=y_(i,t);return new ys(i,"signInViaPopup",e,o).executeNotNull()}class ys extends v_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ys.currentPopupAction&&ys.currentPopupAction.cancel(),ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=Nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T1.get())};e()}}ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="pendingRedirect",Gu=new Map;class S1 extends v_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Gu.get(this.auth._key());if(!e){try{const i=await x1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Gu.set(this.auth._key(),e)}return this.bypassAuthState||Gu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x1(r,e){const t=A1(e),i=R1(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function C1(r,e){Gu.set(r._key(),e)}function R1(r){return Dr(r._redirectPersistence)}function A1(r){return qu(I1,r.config.apiKey,r.name)}async function P1(r,e,t=!1){if(fn(r.app))return Promise.reject(Vr(r));const i=ji(r),o=y_(i,e),h=await new S1(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=600*1e3;class N1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!w_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Hn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k1&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(e))}saveEventToCache(e){this.cachedEventUids.add(sy(e)),this.lastProcessedEventTime=Date.now()}}function sy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function w_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function b1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(r,e={}){return Li(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O1=/^https?/;async function L1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await D1(r);for(const t of e)try{if(j1(t))return}catch{}Cn(r,"unauthorized-domain")}function j1(r){const e=Hd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!O1.test(t))return!1;if(V1.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new fl(3e4,6e4);function oy(){const r=ar().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function F1(r){return new Promise((e,t)=>{var i,o,l;function h(){oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oy(),t(Hn(r,"network-request-failed"))},timeout:M1.get()})}if(!((o=(i=ar().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ar().gapi)===null||l===void 0)&&l.load)h();else{const f=DS("iframefcb");return ar()[f]=()=>{gapi.load?h():t(Hn(r,"network-request-failed"))},t_(`${bS()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Ku=null,e})}let Ku=null;function U1(r){return Ku=Ku||F1(r),Ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new fl(5e3,15e3),B1="__/auth/iframe",$1="emulator/auth/iframe",W1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q1(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?xf(e,$1):`https://${r.config.authDomain}/${B1}`,i={apiKey:e.apiKey,appName:r.name,v:Uo},o=H1.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${dl(i).slice(1)}`}async function G1(r){const e=await U1(r),t=ar().gapi;return Ie(t,r,"internal-error"),e.open({where:document.body,url:q1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W1,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Hn(r,"network-request-failed"),f=ar().setTimeout(()=>{l(h)},z1.get());function g(){ar().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q1=500,Y1=600,X1="_blank",J1="http://localhost";class ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z1(r,e,t,i=Q1,o=Y1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g=Object.assign(Object.assign({},K1),{width:i.toString(),height:o.toString(),top:l,left:h}),v=$t().toLowerCase();t&&(f=Kv(v)?X1:t),qv(v)&&(e=e||J1,g.scrollbars="yes");const E=Object.entries(g).reduce((S,[L,z])=>`${S}${L}=${z},`,"");if(IS(v)&&f!=="_self")return ex(e||"",f),new ay(null);const I=window.open(e||"",f,E);Ie(I,r,"popup-blocked");try{I.focus()}catch{}return new ay(I)}function ex(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="__/auth/handler",nx="emulator/auth/handler",rx=encodeURIComponent("fac");async function ly(r,e,t,i,o,l){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Uo,eventId:o};if(e instanceof kf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",BT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))h[E]=I}if(e instanceof ml){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const g=await r._getAppCheckToken(),v=g?`#${rx}=${encodeURIComponent(g)}`:"";return`${ix(r)}?${dl(f).slice(1)}${v}`}function ix({config:r}){return r.emulator?xf(r,nx):`https://${r.authDomain}/${tx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="webStorageSupport";class sx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=d_,this._completeRedirectFn=P1,this._overrideRedirectResult=C1}async _openPopup(e,t,i,o){var l;jr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await ly(e,t,i,Hd(),o);return Z1(e,h,Nf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await ly(e,t,i,Hd(),o);return u1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(jr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await G1(e),i=new N1(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nd,{type:Nd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Nd];h!==void 0&&t(!!h),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=L1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Zv()||Gv()||Rf()}}const ox=sx;var uy="@firebase/auth",cy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ux(r){No(new Es("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e_(r)},v=new PS(i,o,l,g);return FS(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),No(new Es("auth-internal",e=>{const t=ji(e.getProvider("auth").getImmediate());return(i=>new ax(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Si(uy,cy,lx(r)),Si(uy,cy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=300,hx=kv("authIdTokenMaxAge")||cx;let hy=null;const dx=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>hx)return;const o=t==null?void 0:t.token;hy!==o&&(hy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function fx(r=Lv()){const e=Ef(r,"auth");if(e.isInitialized())return e.getImmediate();const t=MS(r,{popupRedirectResolver:ox,persistence:[v1,o1,d_]}),i=kv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=dx(l.toString());n1(t,h,()=>h(t.currentUser)),t1(t,f=>h(f))}}const o=Av("auth");return o&&US(t,`http://${o}`),t}function px(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}kS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Hn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",px().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ux("Browser");var dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,E_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,x){function A(){}A.prototype=x.prototype,P.D=x.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(b,V,O){for(var R=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)R[$e-2]=arguments[$e];return x.prototype[V].apply(b,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,x,A){A||(A=0);var b=Array(16);if(typeof x=="string")for(var V=0;16>V;++V)b[V]=x.charCodeAt(A++)|x.charCodeAt(A++)<<8|x.charCodeAt(A++)<<16|x.charCodeAt(A++)<<24;else for(V=0;16>V;++V)b[V]=x[A++]|x[A++]<<8|x[A++]<<16|x[A++]<<24;x=P.g[0],A=P.g[1],V=P.g[2];var O=P.g[3],R=x+(O^A&(V^O))+b[0]+3614090360&4294967295;x=A+(R<<7&4294967295|R>>>25),R=O+(V^x&(A^V))+b[1]+3905402710&4294967295,O=x+(R<<12&4294967295|R>>>20),R=V+(A^O&(x^A))+b[2]+606105819&4294967295,V=O+(R<<17&4294967295|R>>>15),R=A+(x^V&(O^x))+b[3]+3250441966&4294967295,A=V+(R<<22&4294967295|R>>>10),R=x+(O^A&(V^O))+b[4]+4118548399&4294967295,x=A+(R<<7&4294967295|R>>>25),R=O+(V^x&(A^V))+b[5]+1200080426&4294967295,O=x+(R<<12&4294967295|R>>>20),R=V+(A^O&(x^A))+b[6]+2821735955&4294967295,V=O+(R<<17&4294967295|R>>>15),R=A+(x^V&(O^x))+b[7]+4249261313&4294967295,A=V+(R<<22&4294967295|R>>>10),R=x+(O^A&(V^O))+b[8]+1770035416&4294967295,x=A+(R<<7&4294967295|R>>>25),R=O+(V^x&(A^V))+b[9]+2336552879&4294967295,O=x+(R<<12&4294967295|R>>>20),R=V+(A^O&(x^A))+b[10]+4294925233&4294967295,V=O+(R<<17&4294967295|R>>>15),R=A+(x^V&(O^x))+b[11]+2304563134&4294967295,A=V+(R<<22&4294967295|R>>>10),R=x+(O^A&(V^O))+b[12]+1804603682&4294967295,x=A+(R<<7&4294967295|R>>>25),R=O+(V^x&(A^V))+b[13]+4254626195&4294967295,O=x+(R<<12&4294967295|R>>>20),R=V+(A^O&(x^A))+b[14]+2792965006&4294967295,V=O+(R<<17&4294967295|R>>>15),R=A+(x^V&(O^x))+b[15]+1236535329&4294967295,A=V+(R<<22&4294967295|R>>>10),R=x+(V^O&(A^V))+b[1]+4129170786&4294967295,x=A+(R<<5&4294967295|R>>>27),R=O+(A^V&(x^A))+b[6]+3225465664&4294967295,O=x+(R<<9&4294967295|R>>>23),R=V+(x^A&(O^x))+b[11]+643717713&4294967295,V=O+(R<<14&4294967295|R>>>18),R=A+(O^x&(V^O))+b[0]+3921069994&4294967295,A=V+(R<<20&4294967295|R>>>12),R=x+(V^O&(A^V))+b[5]+3593408605&4294967295,x=A+(R<<5&4294967295|R>>>27),R=O+(A^V&(x^A))+b[10]+38016083&4294967295,O=x+(R<<9&4294967295|R>>>23),R=V+(x^A&(O^x))+b[15]+3634488961&4294967295,V=O+(R<<14&4294967295|R>>>18),R=A+(O^x&(V^O))+b[4]+3889429448&4294967295,A=V+(R<<20&4294967295|R>>>12),R=x+(V^O&(A^V))+b[9]+568446438&4294967295,x=A+(R<<5&4294967295|R>>>27),R=O+(A^V&(x^A))+b[14]+3275163606&4294967295,O=x+(R<<9&4294967295|R>>>23),R=V+(x^A&(O^x))+b[3]+4107603335&4294967295,V=O+(R<<14&4294967295|R>>>18),R=A+(O^x&(V^O))+b[8]+1163531501&4294967295,A=V+(R<<20&4294967295|R>>>12),R=x+(V^O&(A^V))+b[13]+2850285829&4294967295,x=A+(R<<5&4294967295|R>>>27),R=O+(A^V&(x^A))+b[2]+4243563512&4294967295,O=x+(R<<9&4294967295|R>>>23),R=V+(x^A&(O^x))+b[7]+1735328473&4294967295,V=O+(R<<14&4294967295|R>>>18),R=A+(O^x&(V^O))+b[12]+2368359562&4294967295,A=V+(R<<20&4294967295|R>>>12),R=x+(A^V^O)+b[5]+4294588738&4294967295,x=A+(R<<4&4294967295|R>>>28),R=O+(x^A^V)+b[8]+2272392833&4294967295,O=x+(R<<11&4294967295|R>>>21),R=V+(O^x^A)+b[11]+1839030562&4294967295,V=O+(R<<16&4294967295|R>>>16),R=A+(V^O^x)+b[14]+4259657740&4294967295,A=V+(R<<23&4294967295|R>>>9),R=x+(A^V^O)+b[1]+2763975236&4294967295,x=A+(R<<4&4294967295|R>>>28),R=O+(x^A^V)+b[4]+1272893353&4294967295,O=x+(R<<11&4294967295|R>>>21),R=V+(O^x^A)+b[7]+4139469664&4294967295,V=O+(R<<16&4294967295|R>>>16),R=A+(V^O^x)+b[10]+3200236656&4294967295,A=V+(R<<23&4294967295|R>>>9),R=x+(A^V^O)+b[13]+681279174&4294967295,x=A+(R<<4&4294967295|R>>>28),R=O+(x^A^V)+b[0]+3936430074&4294967295,O=x+(R<<11&4294967295|R>>>21),R=V+(O^x^A)+b[3]+3572445317&4294967295,V=O+(R<<16&4294967295|R>>>16),R=A+(V^O^x)+b[6]+76029189&4294967295,A=V+(R<<23&4294967295|R>>>9),R=x+(A^V^O)+b[9]+3654602809&4294967295,x=A+(R<<4&4294967295|R>>>28),R=O+(x^A^V)+b[12]+3873151461&4294967295,O=x+(R<<11&4294967295|R>>>21),R=V+(O^x^A)+b[15]+530742520&4294967295,V=O+(R<<16&4294967295|R>>>16),R=A+(V^O^x)+b[2]+3299628645&4294967295,A=V+(R<<23&4294967295|R>>>9),R=x+(V^(A|~O))+b[0]+4096336452&4294967295,x=A+(R<<6&4294967295|R>>>26),R=O+(A^(x|~V))+b[7]+1126891415&4294967295,O=x+(R<<10&4294967295|R>>>22),R=V+(x^(O|~A))+b[14]+2878612391&4294967295,V=O+(R<<15&4294967295|R>>>17),R=A+(O^(V|~x))+b[5]+4237533241&4294967295,A=V+(R<<21&4294967295|R>>>11),R=x+(V^(A|~O))+b[12]+1700485571&4294967295,x=A+(R<<6&4294967295|R>>>26),R=O+(A^(x|~V))+b[3]+2399980690&4294967295,O=x+(R<<10&4294967295|R>>>22),R=V+(x^(O|~A))+b[10]+4293915773&4294967295,V=O+(R<<15&4294967295|R>>>17),R=A+(O^(V|~x))+b[1]+2240044497&4294967295,A=V+(R<<21&4294967295|R>>>11),R=x+(V^(A|~O))+b[8]+1873313359&4294967295,x=A+(R<<6&4294967295|R>>>26),R=O+(A^(x|~V))+b[15]+4264355552&4294967295,O=x+(R<<10&4294967295|R>>>22),R=V+(x^(O|~A))+b[6]+2734768916&4294967295,V=O+(R<<15&4294967295|R>>>17),R=A+(O^(V|~x))+b[13]+1309151649&4294967295,A=V+(R<<21&4294967295|R>>>11),R=x+(V^(A|~O))+b[4]+4149444226&4294967295,x=A+(R<<6&4294967295|R>>>26),R=O+(A^(x|~V))+b[11]+3174756917&4294967295,O=x+(R<<10&4294967295|R>>>22),R=V+(x^(O|~A))+b[2]+718787259&4294967295,V=O+(R<<15&4294967295|R>>>17),R=A+(O^(V|~x))+b[9]+3951481745&4294967295,P.g[0]=P.g[0]+x&4294967295,P.g[1]=P.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+O&4294967295}i.prototype.u=function(P,x){x===void 0&&(x=P.length);for(var A=x-this.blockSize,b=this.B,V=this.h,O=0;O<x;){if(V==0)for(;O<=A;)o(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<x;)if(b[V++]=P.charCodeAt(O++),V==this.blockSize){o(this,b),V=0;break}}else for(;O<x;)if(b[V++]=P[O++],V==this.blockSize){o(this,b),V=0;break}}this.h=V,this.o+=x},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var x=1;x<P.length-8;++x)P[x]=0;var A=8*this.o;for(x=P.length-8;x<P.length;++x)P[x]=A&255,A/=256;for(this.u(P),P=Array(16),x=A=0;4>x;++x)for(var b=0;32>b;b+=8)P[A++]=this.g[x]>>>b&255;return P};function l(P,x){var A=f;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=x(P)}function h(P,x){this.h=x;for(var A=[],b=!0,V=P.length-1;0<=V;V--){var O=P[V]|0;b&&O==x||(A[V]=O,b=!1)}this.g=A}var f={};function g(P){return-128<=P&&128>P?l(P,function(x){return new h([x|0],0>x?-1:0)}):new h([P|0],0>P?-1:0)}function v(P){if(isNaN(P)||!isFinite(P))return I;if(0>P)return F(v(-P));for(var x=[],A=1,b=0;P>=A;b++)x[b]=P/A|0,A*=4294967296;return new h(x,0)}function E(P,x){if(P.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(P.charAt(0)=="-")return F(E(P.substring(1),x));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(x,8)),b=I,V=0;V<P.length;V+=8){var O=Math.min(8,P.length-V),R=parseInt(P.substring(V,V+O),x);8>O?(O=v(Math.pow(x,O)),b=b.j(O).add(v(R))):(b=b.j(A),b=b.add(v(R)))}return b}var I=g(0),S=g(1),L=g(16777216);r=h.prototype,r.m=function(){if(K(this))return-F(this).m();for(var P=0,x=1,A=0;A<this.g.length;A++){var b=this.i(A);P+=(0<=b?b:4294967296+b)*x,x*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(z(this))return"0";if(K(this))return"-"+F(this).toString(P);for(var x=v(Math.pow(P,6)),A=this,b="";;){var V=te(A,x).g;A=H(A,V.j(x));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=V,z(A))return O+b;for(;6>O.length;)O="0"+O;b=O+b}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function z(P){if(P.h!=0)return!1;for(var x=0;x<P.g.length;x++)if(P.g[x]!=0)return!1;return!0}function K(P){return P.h==-1}r.l=function(P){return P=H(this,P),K(P)?-1:z(P)?0:1};function F(P){for(var x=P.g.length,A=[],b=0;b<x;b++)A[b]=~P.g[b];return new h(A,~P.h).add(S)}r.abs=function(){return K(this)?F(this):this},r.add=function(P){for(var x=Math.max(this.g.length,P.g.length),A=[],b=0,V=0;V<=x;V++){var O=b+(this.i(V)&65535)+(P.i(V)&65535),R=(O>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);b=R>>>16,O&=65535,R&=65535,A[V]=R<<16|O}return new h(A,A[A.length-1]&-2147483648?-1:0)};function H(P,x){return P.add(F(x))}r.j=function(P){if(z(this)||z(P))return I;if(K(this))return K(P)?F(this).j(F(P)):F(F(this).j(P));if(K(P))return F(this.j(F(P)));if(0>this.l(L)&&0>P.l(L))return v(this.m()*P.m());for(var x=this.g.length+P.g.length,A=[],b=0;b<2*x;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var V=0;V<P.g.length;V++){var O=this.i(b)>>>16,R=this.i(b)&65535,$e=P.i(V)>>>16,it=P.i(V)&65535;A[2*b+2*V]+=R*it,X(A,2*b+2*V),A[2*b+2*V+1]+=O*it,X(A,2*b+2*V+1),A[2*b+2*V+1]+=R*$e,X(A,2*b+2*V+1),A[2*b+2*V+2]+=O*$e,X(A,2*b+2*V+2)}for(b=0;b<x;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=x;b<2*x;b++)A[b]=0;return new h(A,0)};function X(P,x){for(;(P[x]&65535)!=P[x];)P[x+1]+=P[x]>>>16,P[x]&=65535,x++}function re(P,x){this.g=P,this.h=x}function te(P,x){if(z(x))throw Error("division by zero");if(z(P))return new re(I,I);if(K(P))return x=te(F(P),x),new re(F(x.g),F(x.h));if(K(x))return x=te(P,F(x)),new re(F(x.g),x.h);if(30<P.g.length){if(K(P)||K(x))throw Error("slowDivide_ only works with positive integers.");for(var A=S,b=x;0>=b.l(P);)A=xe(A),b=xe(b);var V=ce(A,1),O=ce(b,1);for(b=ce(b,2),A=ce(A,2);!z(b);){var R=O.add(b);0>=R.l(P)&&(V=V.add(A),O=R),b=ce(b,1),A=ce(A,1)}return x=H(P,V.j(x)),new re(V,x)}for(V=I;0<=P.l(x);){for(A=Math.max(1,Math.floor(P.m()/x.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),O=v(A),R=O.j(x);K(R)||0<R.l(P);)A-=b,O=v(A),R=O.j(x);z(O)&&(O=S),V=V.add(O),P=H(P,R)}return new re(V,P)}r.A=function(P){return te(this,P).h},r.and=function(P){for(var x=Math.max(this.g.length,P.g.length),A=[],b=0;b<x;b++)A[b]=this.i(b)&P.i(b);return new h(A,this.h&P.h)},r.or=function(P){for(var x=Math.max(this.g.length,P.g.length),A=[],b=0;b<x;b++)A[b]=this.i(b)|P.i(b);return new h(A,this.h|P.h)},r.xor=function(P){for(var x=Math.max(this.g.length,P.g.length),A=[],b=0;b<x;b++)A[b]=this.i(b)^P.i(b);return new h(A,this.h^P.h)};function xe(P){for(var x=P.g.length+1,A=[],b=0;b<x;b++)A[b]=P.i(b)<<1|P.i(b-1)>>>31;return new h(A,P.h)}function ce(P,x){var A=x>>5;x%=32;for(var b=P.g.length-A,V=[],O=0;O<b;O++)V[O]=0<x?P.i(O+A)>>>x|P.i(O+A+1)<<32-x:P.i(O+A);return new h(V,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,E_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=E,xi=h}).apply(typeof dy<"u"?dy:typeof self<"u"?self:typeof window<"u"?window:{});var Fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T_,$a,I_,Qu,Qd,S_,x_,C_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fu=="object"&&Fu];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var j=u[T];if(!(j in _))break e;_=_[j]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,T=!1,j={next:function(){if(!T&&_<u.length){var W=_++;return{value:p(W,u[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,_){return u.call.apply(u.bind,arguments)}function I(u,p,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),u.apply(p,j)}}return function(){return u.apply(p,arguments)}}function S(u,p,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,S.apply(null,arguments)}function L(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function z(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,j,W){for(var le=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)le[Be-2]=arguments[Be];return p.prototype[j].apply(T,le)}}function K(u){const p=u.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function F(u,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(g(T)){const j=u.length||0,W=T.length||0;u.length=j+W;for(let le=0;le<W;le++)u[j+le]=T[le]}else u.push(T)}}class H{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function X(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function te(u){return te[" "](u),u}te[" "]=function(){};var xe=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function ce(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function P(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function x(u){const p={};for(const _ in u)p[_]=u[_];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,p){let _,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(_ in T)u[_]=T[_];for(let W=0;W<A.length;W++)_=A[W],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function V(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function O(u){f.setTimeout(()=>{throw u},0)}function R(){var u=oe;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class $e{constructor(){this.h=this.g=null}add(p,_){const T=it.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var it=new H(()=>new nt,u=>u.reset());class nt{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let se,q=!1,oe=new $e,B=()=>{const u=f.Promise.resolve(void 0);se=()=>{u.then(k)}};var k=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){O(_)}var p=it;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}q=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ne=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return u})();function ae(u,p){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(xe){e:{try{te(p.nodeName);var j=!0;break e}catch{}j=!1}j||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ue[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ae.aa.h.call(this)}}z(ae,fe);var ue={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function ke(u,p,_,T,j){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=j,this.key=++Ce,this.da=this.fa=!1}function lt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Rn(u){this.src=u,this.g={},this.h=0}Rn.prototype.add=function(u,p,_,T,j){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var le=Gn(u,p,T,j);return-1<le?(p=u[le],_||(p.fa=!1)):(p=new ke(p,this.src,W,!!T,j),p.fa=_,u.push(p)),p};function pr(u,p){var _=p.type;if(_ in u.g){var T=u.g[_],j=Array.prototype.indexOf.call(T,p,void 0),W;(W=0<=j)&&Array.prototype.splice.call(T,j,1),W&&(lt(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Gn(u,p,_,T){for(var j=0;j<u.length;++j){var W=u[j];if(!W.da&&W.listener==p&&W.capture==!!_&&W.ha==T)return j}return-1}var mr="closure_lm_"+(1e6*Math.random()|0),Br={};function Ui(u,p,_,T,j){if(Array.isArray(p)){for(var W=0;W<p.length;W++)Ui(u,p[W],_,T,j);return null}return _=Ko(_),u&&u[_e]?u.K(p,_,v(T)?!!T.capture:!1,j):zi(u,p,_,!1,T,j)}function zi(u,p,_,T,j,W){if(!p)throw Error("Invalid event type");var le=v(j)?!!j.capture:!!j,Be=Ns(u);if(Be||(u[mr]=Be=new Rn(u)),_=Be.add(p,_,T,le,W),_.proxy)return _;if(T=ks(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ne||(j=le),j===void 0&&(j=!1),u.addEventListener(p.toString(),T,j);else if(u.attachEvent)u.attachEvent(sn(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ks(){function u(_){return p.call(u.src,u.listener,_)}const p=Go;return u}function $r(u,p,_,T,j){if(Array.isArray(p))for(var W=0;W<p.length;W++)$r(u,p[W],_,T,j);else T=v(T)?!!T.capture:!!T,_=Ko(_),u&&u[_e]?(u=u.i,p=String(p).toString(),p in u.g&&(W=u.g[p],_=Gn(W,_,T,j),-1<_&&(lt(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ns(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Gn(p,_,T,j)),(_=-1<u?p[u]:null)&&An(_))}function An(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[_e])pr(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(sn(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=Ns(p))?(pr(_,u),_.h==0&&(_.src=null,p[mr]=null)):lt(u)}}}function sn(u){return u in Br?Br[u]:Br[u]="on"+u}function Go(u,p){if(u.da)u=!0;else{p=new ae(p,this);var _=u.listener,T=u.ha||u.src;u.fa&&An(u),u=_.call(T,p)}return u}function Ns(u){return u=u[mr],u instanceof Rn?u:null}var bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ko(u){return typeof u=="function"?u:(u[bs]||(u[bs]=function(p){return u.handleEvent(p)}),u[bs])}function pt(){G.call(this),this.i=new Rn(this),this.M=this,this.F=null}z(pt,G),pt.prototype[_e]=!0,pt.prototype.removeEventListener=function(u,p,_,T){$r(this,u,p,_,T)};function mt(u,p){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new fe(p,u);else if(p instanceof fe)p.target=p.target||u;else{var j=p;p=new fe(T,u),b(p,j)}if(j=!0,_)for(var W=_.length-1;0<=W;W--){var le=p.g=_[W];j=gr(le,T,!0,p)&&j}if(le=p.g=u,j=gr(le,T,!0,p)&&j,j=gr(le,T,!1,p)&&j,_)for(W=0;W<_.length;W++)le=p.g=_[W],j=gr(le,T,!1,p)&&j}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],T=0;T<_.length;T++)lt(_[T]);delete u.g[p],u.h--}}this.F=null},pt.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},pt.prototype.L=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function gr(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var j=!0,W=0;W<p.length;++W){var le=p[W];if(le&&!le.da&&le.capture==_){var Be=le.listener,gt=le.ha||le.src;le.fa&&pr(u.i,le),j=Be.call(gt,T)!==!1&&j}}return j&&!T.defaultPrevented}function Qo(u,p,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function Wr(u){u.g=Qo(()=>{u.g=null,u.i&&(u.i=!1,Wr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Bi extends G{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $i(u){G.call(this),this.h=u,this.g={}}z($i,G);var Yo=[];function Xo(u){ce(u.g,function(p,_){this.g.hasOwnProperty(_)&&An(p)},u),u.g={}}$i.prototype.N=function(){$i.aa.N.call(this),Xo(this)},$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jo=f.JSON.stringify,Zo=f.JSON.parse,ea=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Wi(){}Wi.prototype.h=null;function Ds(u){return u.h||(u.h=u.i())}function Vs(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kn(){fe.call(this,"d")}z(Kn,fe);function Os(){fe.call(this,"c")}z(Os,fe);var Qn={},ta=null;function Hi(){return ta=ta||new pt}Qn.La="serverreachability";function na(u){fe.call(this,Qn.La,u)}z(na,fe);function yr(u){const p=Hi();mt(p,new na(p))}Qn.STAT_EVENT="statevent";function ra(u,p){fe.call(this,Qn.STAT_EVENT,u),this.stat=p}z(ra,fe);function st(u){const p=Hi();mt(p,new ra(p,u))}Qn.Ma="timingevent";function Ls(u,p){fe.call(this,Qn.Ma,u),this.size=p}z(Ls,fe);function Pn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function qi(){this.g=!0}qi.prototype.xa=function(){this.g=!1};function Gi(u,p,_,T,j,W){u.info(function(){if(u.g)if(W)for(var le="",Be=W.split("&"),gt=0;gt<Be.length;gt++){var je=Be[gt].split("=");if(1<je.length){var Tt=je[0];je=je[1];var ut=Tt.split("_");le=2<=ut.length&&ut[1]=="type"?le+(Tt+"="+je+"&"):le+(Tt+"=redacted&")}}else le=null;else le=W;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+p+`
`+_+`
`+le})}function js(u,p,_,T,j,W,le){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+p+`
`+_+`
`+W+" "+le})}function kn(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Gc(u,_)+(T?" "+T:"")})}function ia(u,p){u.info(function(){return"TIMEOUT: "+p})}qi.prototype.info=function(){};function Gc(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var le=1;le<j.length;le++)j[le]=""}}}}return Jo(_)}catch{return p}}var Ms={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Il={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nn;function Ki(){}z(Ki,Wi),Ki.prototype.g=function(){return new XMLHttpRequest},Ki.prototype.i=function(){return{}},Nn=new Ki;function bn(u,p,_,T){this.j=u,this.i=p,this.l=_,this.R=T||1,this.U=new $i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sl}function Sl(){this.i=null,this.g="",this.h=!1}var sa={},Fs={};function Us(u,p,_){u.L=1,u.v=Qr(an(p)),u.m=_,u.P=!0,oa(u,null)}function oa(u,p){u.F=Date.now(),He(u),u.A=an(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Xr(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Sl,u.g=Bl(u.j,_?p:null,!u.m),0<u.O&&(u.M=new Bi(S(u.Y,u,u.g),u.O)),p=u.U,_=u.g,T=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(Yo[0]=j.toString()),j=Yo);for(var W=0;W<j.length;W++){var le=Ui(_,j[W],T||p.handleEvent,!1,p.h||p);if(!le)break;p.g[le.key]=le}p=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),yr(),Gi(u.i,u.u,u.A,u.l,u.R,u.m)}bn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Qt(u)==3?p.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const ut=Qt(this.g);var p=this.g.Ba();const vn=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||da(this.g)))){this.J||ut!=4||p==7||(p==8||0>=vn?yr(3):yr(2)),Qi(this);var _=this.g.Z();this.X=_;t:if(xl(this)){var T=da(this.g);u="";var j=T.length,W=Qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Hr(this);var le="";break t}this.h.i=new f.TextDecoder}for(p=0;p<j;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(W&&p==j-1)});T.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,js(this.i,this.u,this.A,this.l,this.R,ut,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,gt=this.g;if((Be=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Be)){var je=Be;break t}}je=null}if(_=je)kn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aa(this,_);else{this.o=!1,this.s=3,st(12),gn(this),Hr(this);break e}}if(this.P){_=!0;let un;for(;!this.J&&this.C<le.length;)if(un=Kc(this,le),un==Fs){ut==4&&(this.s=4,st(14),_=!1),kn(this.i,this.l,null,"[Incomplete Response]");break}else if(un==sa){this.s=4,st(15),kn(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else kn(this.i,this.l,un,null),aa(this,un);if(xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||le.length!=0||this.h.h||(this.s=1,st(16),_=!1),this.o=this.o&&_,!_)kn(this.i,this.l,le,"[Invalid Chunked Response]"),gn(this),Hr(this);else if(0<le.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),pa(Tt),Tt.M=!0,st(11))}}else kn(this.i,this.l,le,null),aa(this,le);ut==4&&gn(this),this.o&&!this.J&&(ut==4?Xs(this.j,this):(this.o=!1,He(this)))}else qs(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),gn(this),Hr(this)}}}catch{}finally{}};function xl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Kc(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?Fs:(_=Number(p.substring(_,T)),isNaN(_)?sa:(T+=1,T+_>p.length?Fs:(p=p.slice(T,T+_),u.C=T+_,p)))}bn.prototype.cancel=function(){this.J=!0,gn(this)};function He(u){u.S=Date.now()+u.I,Cl(u,u.I)}function Cl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Pn(S(u.ba,u),p)}function Qi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}bn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ia(this.i,this.A),this.L!=2&&(yr(),st(17)),gn(this),this.s=2,Hr(this)):Cl(this,this.S-u)};function Hr(u){u.j.G==0||u.J||Xs(u.j,u)}function gn(u){Qi(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Xo(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function aa(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Wt(_.h,u))){if(!u.K&&Wt(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Ys(_),jn(_);else break e;Qs(_),st(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=Pn(S(_.Za,_),6e3));if(1>=Al(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Tr(_,11)}else if((u.K||_.g==u)&&Ys(_),!X(p))for(j=_.Da.g.parse(p),p=0;p<j.length;p++){let je=j[p];if(_.T=je[0],je=je[1],_.G==2)if(je[0]=="c"){_.K=je[1],_.ia=je[2];const Tt=je[3];Tt!=null&&(_.la=Tt,_.j.info("VER="+_.la));const ut=je[4];ut!=null&&(_.Aa=ut,_.j.info("SVER="+_.Aa));const vn=je[5];vn!=null&&typeof vn=="number"&&0<vn&&(T=1.5*vn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const un=u.g;if(un){const ns=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ns){var W=T.h;W.g||ns.indexOf("spdy")==-1&&ns.indexOf("quic")==-1&&ns.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(la(W,W.h),W.h=null))}if(T.D){const Zs=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Zs&&(T.ya=Zs,We(T.I,T.D,Zs))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var le=u;if(T.qa=zl(T,T.J?T.ia:null,T.W),le.K){Pl(T.h,le);var Be=le,gt=T.L;gt&&(Be.I=gt),Be.B&&(Qi(Be),He(Be)),T.g=le}else ts(T);0<_.i.length&&Zn(_)}else je[0]!="stop"&&je[0]!="close"||Tr(_,7);else _.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Tr(_,7):At(_):je[0]!="noop"&&_.l&&_.l.ta(je),_.v=0)}}yr(4)}catch{}}var Rl=class{constructor(u,p){this.g=u,this.map=p}};function Yi(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function on(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Al(u){return u.h?1:u.g?u.g.size:0}function Wt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function la(u,p){u.g?u.g.add(p):u.h=p}function Pl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Yi.prototype.cancel=function(){if(this.i=kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function kl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return K(u.i)}function zs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],_=u.length,T=0;T<_;T++)p.push(u[T]);return p}p=[],_=0;for(T in u)p[_++]=u[T];return p}function Bs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const T in u)p[_++]=T;return p}}}function qr(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=Bs(u),T=zs(u),j=T.length,W=0;W<j;W++)p.call(void 0,T[W],_&&_[W],u)}var Xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qc(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),j=null;if(0<=T){var W=u[_].substring(0,T);j=u[_].substring(T+1)}else W=u[_];p(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function vr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof vr){this.h=u.h,Ji(this,u.j),this.o=u.o,this.g=u.g,Gr(this,u.s),this.l=u.l;var p=u.i,_=new Yn;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Kr(this,_),this.m=u.m}else u&&(p=String(u).match(Xi))?(this.h=!1,Ji(this,p[1]||"",!0),this.o=Le(p[2]||""),this.g=Le(p[3]||"",!0),Gr(this,p[4]),this.l=Le(p[5]||"",!0),Kr(this,p[6]||"",!0),this.m=Le(p[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}vr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Yr(p,$s,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Yr(p,$s,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Yr(_,_.charAt(0)=="/"?Dl:bl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Yr(_,ua)),u.join("")};function an(u){return new vr(u)}function Ji(u,p,_){u.j=_?Le(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Gr(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Kr(u,p,_){p instanceof Yn?(u.i=p,Xn(u.i,u.h)):(_||(p=Yr(p,Vl)),u.i=new Yn(p,u.h))}function We(u,p,_){u.i.set(p,_)}function Qr(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Le(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Yr(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Nl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Nl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $s=/[#\/\?@]/g,bl=/[#\?:]/g,Dl=/[#\?]/g,Vl=/[#\?@]/g,ua=/#/g;function Yn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Rt(u){u.g||(u.g=new Map,u.h=0,u.i&&Qc(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=Yn.prototype,r.add=function(u,p){Rt(this),this.i=null,u=yn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Dn(u,p){Rt(u),p=yn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Vn(u,p){return Rt(u),p=yn(u,p),u.g.has(p)}r.forEach=function(u,p){Rt(this),this.g.forEach(function(_,T){_.forEach(function(j){u.call(p,j,T,this)},this)},this)},r.na=function(){Rt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const j=u[T];for(let W=0;W<j.length;W++)_.push(p[T])}return _},r.V=function(u){Rt(this);let p=[];if(typeof u=="string")Vn(this,u)&&(p=p.concat(this.g.get(yn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},r.set=function(u,p){return Rt(this),this.i=null,u=yn(this,u),Vn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Xr(u,p,_){Dn(u,p),0<_.length&&(u.i=null,u.g.set(yn(u,p),K(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const W=encodeURIComponent(String(T)),le=this.V(T);for(T=0;T<le.length;T++){var j=W;le[T]!==""&&(j+="="+encodeURIComponent(String(le[T]))),u.push(j)}}return this.i=u.join("&")};function yn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Xn(u,p){p&&!u.j&&(Rt(u),u.i=null,u.g.forEach(function(_,T){var j=T.toLowerCase();T!=j&&(Dn(this,T),Xr(this,j,_))},u)),u.j=p}function Yc(u,p){const _=new qi;if(f.Image){const T=new Image;T.onload=L(Kt,_,"TestLoadImage: loaded",!0,p,T),T.onerror=L(Kt,_,"TestLoadImage: error",!1,p,T),T.onabort=L(Kt,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=L(Kt,_,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function Ol(u,p){const _=new qi,T=new AbortController,j=setTimeout(()=>{T.abort(),Kt(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(W=>{clearTimeout(j),W.ok?Kt(_,"TestPingServer: ok",!0,p):Kt(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),Kt(_,"TestPingServer: error",!1,p)})}function Kt(u,p,_,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(_)}catch{}}function Xc(){this.g=new ea}function Ll(u,p,_){const T=_||"";try{qr(u,function(j,W){let le=j;v(j)&&(le=Jo(j)),p.push(T+W+"="+encodeURIComponent(le))})}catch(j){throw p.push(T+"type="+encodeURIComponent("_badmap")),j}}function _r(u){this.l=u.Ub||null,this.j=u.eb||!1}z(_r,Wi),_r.prototype.g=function(){return new Zi(this.l,this.j)},_r.prototype.i=(function(u){return function(){return u}})({});function Zi(u,p){pt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(Zi,pt),r=Zi.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Ln(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,On(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function jl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?On(this):Ln(this),this.readyState==3&&jl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,On(this))},r.Qa=function(u){this.g&&(this.response=u,On(this))},r.ga=function(){this.g&&On(this)};function On(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ln(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Ln(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function wr(u){let p="";return ce(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function Jr(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=wr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):We(u,p,_))}function Xe(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(Xe,pt);var Jc=/^https?$/i,ca=["POST","PUT"];r=Xe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nn.g(),this.v=this.o?Ds(this.o):Ds(Nn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(W){es(this,W);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)_.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())_.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),j=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ca,p,void 0))||T||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,le]of _)this.g.setRequestHeader(W,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hs(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){es(this,W)}};function es(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Ws(u),ln(u)}function Ws(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),ln(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ln(this,!0)),Xe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ha(this):this.bb())},r.bb=function(){ha(this)};function ha(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Qt(u)!=4||u.Z()!=2)){if(u.u&&Qt(u)==4)Qo(u.Ea,0,u);else if(mt(u,"readystatechange"),Qt(u)==4){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=le===0){var j=String(u.D).match(Xi)[1]||null;!j&&f.self&&f.self.location&&(j=f.self.location.protocol.slice(0,-1)),T=!Jc.test(j?j.toLowerCase():"")}_=T}if(_)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var W=2<Qt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Ws(u)}}finally{ln(u)}}}}function ln(u,p){if(u.g){Hs(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||mt(u,"ready");try{_.onreadystatechange=T}catch{}}}function Hs(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Qt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Qt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Zo(p)}};function da(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(u){const p={};u=(u.g&&2<=Qt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(X(u[T]))continue;var _=V(u[T]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=p[j]||[];p[j]=W,W.push(_)}P(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jn(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function fa(u){this.Aa=0,this.i=[],this.j=new qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jn("baseRetryDelayMs",5e3,u),this.cb=Jn("retryDelaySeedMs",1e4,u),this.Wa=Jn("forwardChannelMaxRetries",2,u),this.wa=Jn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Yi(u&&u.concurrentRequestLimit),this.Da=new Xc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=fa.prototype,r.la=8,r.G=1,r.connect=function(u,p,_,T){st(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=zl(this,null,this.W),Zn(this)};function At(u){if(Gs(u),u.G==3){var p=u.U++,_=an(u.I);if(We(_,"SID",u.K),We(_,"RID",p),We(_,"TYPE","terminate"),Er(u,_),p=new bn(u,u.j,p),p.L=2,p.v=Qr(an(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.v,_=!0),_||(p.g=Bl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),He(p)}Ul(u)}function jn(u){u.g&&(pa(u),u.g.cancel(),u.g=null)}function Gs(u){jn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Ys(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Zn(u){if(!on(u.h)&&!u.s){u.s=!0;var p=u.Ga;se||B(),q||(se(),q=!0),oe.add(p,u),u.B=0}}function Zc(u,p){return Al(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Pn(S(u.Ga,u,p),Fl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new bn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=x(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Zr(this,j,p),_=an(this.I),We(_,"RID",u),We(_,"CVER",22),this.D&&We(_,"X-HTTP-Session-Id",this.D),Er(this,_),W&&(this.O?p="headers="+encodeURIComponent(String(wr(W)))+"&"+p:this.m&&Jr(_,this.m,W)),la(this.h,j),this.Ua&&We(_,"TYPE","init"),this.P?(We(_,"$req",p),We(_,"SID","null"),j.T=!0,Us(j,_,null)):Us(j,_,p),this.G=2}}else this.G==3&&(u?Ks(this,u):this.i.length==0||on(this.h)||Ks(this))};function Ks(u,p){var _;p?_=p.l:_=u.U++;const T=an(u.I);We(T,"SID",u.K),We(T,"RID",_),We(T,"AID",u.T),Er(u,T),u.m&&u.o&&Jr(T,u.m,u.o),_=new bn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Zr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),la(u.h,_),Us(_,T,p)}function Er(u,p){u.H&&ce(u.H,function(_,T){We(p,T,_)}),u.l&&qr({},function(_,T){We(p,T,_)})}function Zr(u,p,_){_=Math.min(u.i.length,_);var T=u.l?S(u.l.Na,u.l,u):null;e:{var j=u.i;let W=-1;for(;;){const le=["count="+_];W==-1?0<_?(W=j[0].g,le.push("ofs="+W)):W=0:le.push("ofs="+W);let Be=!0;for(let gt=0;gt<_;gt++){let je=j[gt].g;const Tt=j[gt].map;if(je-=W,0>je)W=Math.max(0,j[gt].g-100),Be=!1;else try{Ll(Tt,le,"req"+je+"_")}catch{T&&T(Tt)}}if(Be){T=le.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,T}function ts(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;se||B(),q||(se(),q=!0),oe.add(p,u),u.v=0}}function Qs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Pn(S(u.Fa,u),Fl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Ml(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Pn(S(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),jn(this),Ml(this))};function pa(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Ml(u){u.g=new bn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=an(u.qa);We(p,"RID","rpc"),We(p,"SID",u.K),We(p,"AID",u.T),We(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(p,"TO",u.ja),We(p,"TYPE","xmlhttp"),Er(u,p),u.m&&u.o&&Jr(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Qr(an(p)),_.m=null,_.P=!0,oa(_,u)}r.Za=function(){this.C!=null&&(this.C=null,jn(this),Qs(this),st(19))};function Ys(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Xs(u,p){var _=null;if(u.g==p){Ys(u),pa(u),u.g=null;var T=2}else if(Wt(u.h,p))_=p.D,Pl(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var j=u.B;T=Hi(),mt(T,new Ls(T,_)),Zn(u)}else ts(u);else if(j=p.s,j==3||j==0&&0<p.X||!(T==1&&Zc(u,p)||T==2&&Qs(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),j){case 1:Tr(u,5);break;case 4:Tr(u,10);break;case 3:Tr(u,6);break;default:Tr(u,2)}}}function Fl(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function Tr(u,p){if(u.j.info("Error code "+p),p==2){var _=S(u.fb,u),T=u.Xa;const j=!T;T=new vr(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ji(T,"https"),Qr(T),j?Yc(T.toString(),_):Ol(T.toString(),_)}else st(2);u.G=0,u.l&&u.l.sa(p),Ul(u),Gs(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function Ul(u){if(u.G=0,u.ka=[],u.l){const p=kl(u.h);(p.length!=0||u.i.length!=0)&&(F(u.ka,p),F(u.ka,u.i),u.h.i.length=0,K(u.i),u.i.length=0),u.l.ra()}}function zl(u,p,_){var T=_ instanceof vr?an(_):new vr(_);if(T.g!="")p&&(T.g=p+"."+T.g),Gr(T,T.s);else{var j=f.location;T=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;var W=new vr(null);T&&Ji(W,T),p&&(W.g=p),j&&Gr(W,j),_&&(W.l=_),T=W}return _=u.D,p=u.ya,_&&p&&We(T,_,p),We(T,"VER",u.la),Er(u,T),T}function Bl(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Xe(new _r({eb:_})):new Xe(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ma(){}r=ma.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Js(){}Js.prototype.g=function(u,p){return new Ht(u,p)};function Ht(u,p){pt.call(this),this.g=new fa(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!X(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!X(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new er(this)}z(Ht,pt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){At(this.g)},Ht.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Jo(u),u=_);p.i.push(new Rl(p.Ya++,u)),p.G==3&&Zn(p)},Ht.prototype.N=function(){this.g.l=null,delete this.j,At(this.g),delete this.g,Ht.aa.N.call(this)};function $l(u){Kn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}z($l,Kn);function Wl(){Os.call(this),this.status=1}z(Wl,Os);function er(u){this.g=u}z(er,ma),er.prototype.ua=function(){mt(this.g,"a")},er.prototype.ta=function(u){mt(this.g,new $l(u))},er.prototype.sa=function(u){mt(this.g,new Wl)},er.prototype.ra=function(){mt(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,C_=function(){return new Js},x_=function(){return Hi()},S_=Qn,Qd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,Qu=Ms,Il.COMPLETE="complete",I_=Il,Vs.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",pt.prototype.listen=pt.prototype.K,$a=Vs,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,T_=Xe}).apply(typeof Fu<"u"?Fu:typeof self<"u"?self:typeof window<"u"?window:{});const fy="@firebase/firestore",py="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new _f("@firebase/firestore");function To(){return Ss.logLevel}function de(r,...e){if(Ss.logLevel<=Ve.DEBUG){const t=e.map(Df);Ss.debug(`Firestore (${Bo}): ${r}`,...t)}}function Mr(r,...e){if(Ss.logLevel<=Ve.ERROR){const t=e.map(Df);Ss.error(`Firestore (${Bo}): ${r}`,...t)}}function Ai(r,...e){if(Ss.logLevel<=Ve.WARN){const t=e.map(Df);Ss.warn(`Firestore (${Bo}): ${r}`,...t)}}function Df(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,R_(r,i,t)}function R_(r,e,t){let i=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Mr(i),new Error(i)}function ze(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||R_(e,o,i)}function Pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends zr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class gx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class yx{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Or,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Or)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ze(typeof i.accessToken=="string",31837,{l:i}),new A_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class vx{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _x{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new vx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class my{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);const i=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new my(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new my(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=Ex(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function be(r,e){return r<e?-1:r>e?1:0}function Yd(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return be(i,o);{const l=P_(),h=Tx(l.encode(gy(r,t)),l.encode(gy(e,t)));return h!==0?h:be(i,o)}}t+=i>65535?2:1}return be(r.length,e.length)}function gy(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function Tx(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return be(r[t],e[t]);return be(r.length,e.length)}function bo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="__name__";class sr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return sr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=sr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return be(e.length,t.length)}static compareSegments(e,t){const i=sr.isNumericId(e),o=sr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?sr.extractNumericId(e).compare(sr.extractNumericId(t)):Yd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xi.fromString(e.substring(4,e.length-2))}}class Qe extends sr{construct(e,t,i){return new Qe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const Ix=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends sr{construct(e,t,i){return new bt(e,t,i)}static isValidIdentifier(e){return Ix.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yy}static keyField(){return new bt([yy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ye(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ye(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ye(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(Qe.fromString(e))}static fromName(e){return new we(Qe.fromString(e).popFirst(5))}static empty(){return new we(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(r,e,t){if(!t)throw new ye(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Sx(r,e,t,i){if(e===!0&&i===!0)throw new ye(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function vy(r){if(!we.isDocumentKey(r))throw new ye(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _y(r){if(we.isDocumentKey(r))throw new ye(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function N_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Of(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function Fr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ye(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Of(r);throw new ye(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(r,e){const t={typeString:r};return e&&(t.value=e),t}function yl(r,e){if(!N_(r))throw new ye(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ye(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=-62135596800,Ey=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ey);return new Ye(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wy)throw new ye(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ey}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yl(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:dt("string",Ye._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Ye(0,0))}static max(){return new Ae(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=-1;function xx(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new Ye(t+1,0):new Ye(t,i));return new Pi(o,we.empty(),e)}function Cx(r){return new Pi(r.readTime,r.key,il)}class Pi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Pi(Ae.min(),we.empty(),il)}static max(){return new Pi(Ae.max(),we.empty(),il)}}function Rx(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:be(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Px{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==Ax)throw r;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.reject(t)}static resolve(e){return new Q(((t,i)=>{t(e)}))}static reject(e){return new Q(((t,i)=>{i(e)}))}static waitFor(e){return new Q(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>i(g)))})),h=!0,l===o&&t()}))}static or(e){let t=Q.resolve(!1);for(const i of e)t=t.next((o=>o?Q.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new Q(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next((E=>{h[v]=E,++f,f===l&&i(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new Q(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function kx(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}kc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=-1;function Nc(r){return r==null}function hc(r){return r===0&&1/r==-1/0}function Nx(r){return typeof r=="number"&&Number.isInteger(r)&&!hc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="";function bx(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ty(e)),e=Dx(r.get(t),e);return Ty(e)}function Dx(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case b_:t+="";break;default:t+=l}}return t}function Ty(r){return r+b_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Mi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function D_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}}class Uu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Nt.RED,this.left=o??Nt.EMPTY,this.right=l??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Nt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Nt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sy(this.data.getIterator())}getIteratorFrom(e){return new Sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class Sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new pn([])}unionWith(e){let t=new Et(bt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new V_("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const Vx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(r){if(ze(!!r,39018),typeof r=="string"){let e=0;const t=Vx.exec(r);if(ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:at(r.seconds),nanos:at(r.nanos)}}function at(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ni(r){return typeof r=="string"?Vt.fromBase64String(r):Vt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="server_timestamp",L_="__type__",j_="__previous_value__",M_="__local_write_time__";function jf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[L_])===null||t===void 0?void 0:t.stringValue)===O_}function bc(r){const e=r.mapValue.fields[j_];return jf(e)?bc(e):e}function sl(r){const e=ki(r.mapValue.fields[M_].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t,i,o,l,h,f,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=E}}const dc="(default)";class ol{constructor(e,t){this.projectId=e,this.database=t||dc}static empty(){return new ol("","")}get isDefaultDatabase(){return this.database===dc}isEqual(e){return e instanceof ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="__type__",Lx="__max__",zu={mapValue:{}},U_="__vector__",fc="value";function bi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?jf(r)?4:Mx(r)?9007199254740991:jx(r)?10:11:Se(28295,{value:r})}function dr(r,e){if(r===e)return!0;const t=bi(r);if(t!==bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return sl(r).isEqual(sl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=ki(o.timestampValue),f=ki(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ni(o.bytesValue).isEqual(Ni(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return at(o.geoPointValue.latitude)===at(l.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return at(o.integerValue)===at(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=at(o.doubleValue),f=at(l.doubleValue);return h===f?hc(h)===hc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return bo(r.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Iy(h)!==Iy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!dr(h[g],f[g])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function al(r,e){return(r.values||[]).find((t=>dr(t,e)))!==void 0}function Do(r,e){if(r===e)return 0;const t=bi(r),i=bi(e);if(t!==i)return be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=at(l.integerValue||l.doubleValue),g=at(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return xy(r.timestampValue,e.timestampValue);case 4:return xy(sl(r),sl(e));case 5:return Yd(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Ni(l),g=Ni(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let v=0;v<f.length&&v<g.length;v++){const E=be(f[v],g[v]);if(E!==0)return E}return be(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=be(at(l.latitude),at(h.latitude));return f!==0?f:be(at(l.longitude),at(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Cy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var f,g,v,E;const I=l.fields||{},S=h.fields||{},L=(f=I[fc])===null||f===void 0?void 0:f.arrayValue,z=(g=S[fc])===null||g===void 0?void 0:g.arrayValue,K=be(((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0,((E=z==null?void 0:z.values)===null||E===void 0?void 0:E.length)||0);return K!==0?K:Cy(L,z)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===zu.mapValue&&h===zu.mapValue)return 0;if(l===zu.mapValue)return 1;if(h===zu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),v=h.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let I=0;I<g.length&&I<E.length;++I){const S=Yd(g[I],E[I]);if(S!==0)return S;const L=Do(f[g[I]],v[E[I]]);if(L!==0)return L}return be(g.length,E.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{le:t})}}function xy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return be(r,e);const t=ki(r),i=ki(e),o=be(t.seconds,i.seconds);return o!==0?o:be(t.nanos,i.nanos)}function Cy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Do(t[o],i[o]);if(l)return l}return be(t.length,i.length)}function Vo(r){return Xd(r)}function Xd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=ki(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ni(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Xd(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Xd(t.fields[h])}`;return o+"}"})(r.mapValue):Se(61005,{value:r})}function Yu(r){switch(bi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bc(r);return e?16+Yu(e):16;case 5:return 2*r.stringValue.length;case 6:return Ni(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Yu(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Mi(i.fields,((l,h)=>{o+=l.length+Yu(h)})),o})(r.mapValue);default:throw Se(13486,{value:r})}}function Jd(r){return!!r&&"integerValue"in r}function Mf(r){return!!r&&"arrayValue"in r}function Ry(r){return!!r&&"nullValue"in r}function Ay(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Xu(r){return!!r&&"mapValue"in r}function jx(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[F_])===null||t===void 0?void 0:t.stringValue)===U_}function Qa(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Mi(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Qa(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qa(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Mx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Lx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Xu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qa(t)}setAll(e){let t=bt.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=Qa(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Xu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Xu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Mi(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new rn(Qa(this.value))}}function z_(r){const e=[];return Mi(r.fields,((t,i)=>{const o=new bt([t]);if(Xu(i)){const l=z_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Bt(e,0,Ae.min(),Ae.min(),Ae.min(),rn.empty(),0)}static newFoundDocument(e,t,i,o){return new Bt(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Bt(e,2,t,Ae.min(),Ae.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,Ae.min(),Ae.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t){this.position=e,this.inclusive=t}}function Py(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=we.comparator(we.fromName(h.referenceValue),t.key):i=Do(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function ky(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!dr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Fx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{}class _t extends B_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new zx(e,t,i):t==="array-contains"?new Wx(e,i):t==="in"?new Hx(e,i):t==="not-in"?new qx(e,i):t==="array-contains-any"?new Gx(e,i):new _t(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Bx(e,i):new $x(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Do(t,this.value)):t!==null&&bi(this.value)===bi(t)&&this.matchesComparison(Do(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends B_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new fr(e,t)}matches(e){return $_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function $_(r){return r.op==="and"}function W_(r){return Ux(r)&&$_(r)}function Ux(r){for(const e of r.filters)if(e instanceof fr)return!1;return!0}function Zd(r){if(r instanceof _t)return r.field.canonicalString()+r.op.toString()+Vo(r.value);if(W_(r))return r.filters.map((e=>Zd(e))).join(",");{const e=r.filters.map((t=>Zd(t))).join(",");return`${r.op}(${e})`}}function H_(r,e){return r instanceof _t?(function(i,o){return o instanceof _t&&i.op===o.op&&i.field.isEqual(o.field)&&dr(i.value,o.value)})(r,e):r instanceof fr?(function(i,o){return o instanceof fr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&H_(h,o.filters[f])),!0):!1})(r,e):void Se(19439)}function q_(r){return r instanceof _t?(function(t){return`${t.field.canonicalString()} ${t.op} ${Vo(t.value)}`})(r):r instanceof fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(q_).join(" ,")+"}"})(r):"Filter"}class zx extends _t{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class Bx extends _t{constructor(e,t){super(e,"in",t),this.keys=G_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $x extends _t{constructor(e,t){super(e,"not-in",t),this.keys=G_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function G_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>we.fromName(i.referenceValue)))}class Wx extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mf(t)&&al(t.arrayValue,this.value)}}class Hx extends _t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&al(this.value.arrayValue,t)}}class qx extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!al(this.value.arrayValue,t)}}class Gx extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>al(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Pe=null}}function Ny(r,e=null,t=[],i=[],o=null,l=null,h=null){return new Kx(r,e,t,i,o,l,h)}function Ff(r){const e=Pe(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Zd(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Nc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Vo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Vo(i))).join(",")),e.Pe=t}return e.Pe}function Uf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Fx(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!H_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ky(r.startAt,e.startAt)&&ky(r.endAt,e.endAt)}function ef(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Qx(r,e,t,i,o,l,h,f){return new Dc(r,e,t,i,o,l,h,f)}function zf(r){return new Dc(r)}function by(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Yx(r){return r.collectionGroup!==null}function Ya(r){const e=Pe(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Et(bt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(f=f.add(v.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new mc(l,i))})),t.has(bt.keyField().canonicalString())||e.Te.push(new mc(bt.keyField(),i))}return e.Te}function lr(r){const e=Pe(r);return e.Ie||(e.Ie=Xx(e,Ya(r))),e.Ie}function Xx(r,e){if(r.limitType==="F")return Ny(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new mc(o.field,l)}));const t=r.endAt?new pc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new pc(r.startAt.position,r.startAt.inclusive):null;return Ny(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function tf(r,e,t){return new Dc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vc(r,e){return Uf(lr(r),lr(e))&&r.limitType===e.limitType}function K_(r){return`${Ff(lr(r))}|lt:${r.limitType}`}function Io(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>q_(o))).join(", ")}]`),Nc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Vo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Vo(o))).join(",")),`Target(${i})`})(lr(r))}; limitType=${r.limitType})`}function Oc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):we.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Ya(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,g){const v=Py(h,f,g);return h.inclusive?v<=0:v<0})(i.startAt,Ya(i),o)||i.endAt&&!(function(h,f,g){const v=Py(h,f,g);return h.inclusive?v>=0:v>0})(i.endAt,Ya(i),o))})(r,e)}function Jx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Q_(r){return(e,t)=>{let i=!1;for(const o of Ya(r)){const l=Zx(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function Zx(r,e,t){const i=r.field.isKeyField()?we.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),v=f.data.field(l);return g!==null&&v!==null?Do(g,v):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return D_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=new tt(we.comparator);function Ur(){return eC}const Y_=new tt(we.comparator);function Wa(...r){let e=Y_;for(const t of r)e=e.insert(t.key,t);return e}function X_(r){let e=Y_;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function vs(){return Xa()}function J_(){return Xa()}function Xa(){return new As((r=>r.toString()),((r,e)=>r.isEqual(e)))}const tC=new tt(we.comparator),nC=new Et(we.comparator);function Oe(...r){let e=nC;for(const t of r)e=e.add(t);return e}const rC=new Et(be);function iC(){return rC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function Z_(r){return{integerValue:""+r}}function sC(r,e){return Nx(e)?Z_(e):Bf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function oC(r,e,t){return r instanceof gc?(function(o,l){const h={fields:{[L_]:{stringValue:O_},[M_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&jf(l)&&(l=bc(l)),l&&(h.fields[j_]=l),{mapValue:h}})(t,e):r instanceof ll?t0(r,e):r instanceof ul?n0(r,e):(function(o,l){const h=e0(o,l),f=Dy(h)+Dy(o.Ee);return Jd(h)&&Jd(o.Ee)?Z_(f):Bf(o.serializer,f)})(r,e)}function aC(r,e,t){return r instanceof ll?t0(r,e):r instanceof ul?n0(r,e):t}function e0(r,e){return r instanceof yc?(function(i){return Jd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class gc extends Lc{}class ll extends Lc{constructor(e){super(),this.elements=e}}function t0(r,e){const t=r0(e);for(const i of r.elements)t.some((o=>dr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class ul extends Lc{constructor(e){super(),this.elements=e}}function n0(r,e){let t=r0(e);for(const i of r.elements)t=t.filter((o=>!dr(o,i)));return{arrayValue:{values:t}}}class yc extends Lc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Dy(r){return at(r.integerValue||r.doubleValue)}function r0(r){return Mf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function lC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof ll&&o instanceof ll||i instanceof ul&&o instanceof ul?bo(i.elements,o.elements,dr):i instanceof yc&&o instanceof yc?dr(i.Ee,o.Ee):i instanceof gc&&o instanceof gc})(r.transform,e.transform)}class uC{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class jc{}function i0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new $f(r.key,qn.none()):new vl(r.key,r.data,qn.none());{const t=r.data,i=rn.empty();let o=new Et(bt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Fi(r.key,i,new pn(o.toArray()),qn.none())}}function cC(r,e,t){r instanceof vl?(function(o,l,h){const f=o.value.clone(),g=Oy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Fi?(function(o,l,h){if(!Ju(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Oy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(s0(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ja(r,e,t,i){return r instanceof vl?(function(l,h,f,g){if(!Ju(l.precondition,h))return f;const v=l.value.clone(),E=Ly(l.fieldTransforms,g,h);return v.setAll(E),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Fi?(function(l,h,f,g){if(!Ju(l.precondition,h))return f;const v=Ly(l.fieldTransforms,g,h),E=h.data;return E.setAll(s0(l)),E.setAll(v),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(r,e,t,i):(function(l,h,f){return Ju(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function hC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=e0(i.transform,o||null);l!=null&&(t===null&&(t=rn.empty()),t.set(i.field,l))}return t||null}function Vy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&bo(i,o,((l,h)=>lC(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class vl extends jc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fi extends jc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function s0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Oy(r,e,t){const i=new Map;ze(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,aC(h,f,t[o]))}return i}function Ly(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,oC(l,h,e))}return i}class $f extends jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dC extends jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&cC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ja(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ja(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=J_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=i0(h,f);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&bo(this.mutations,e.mutations,((t,i)=>Vy(t,i)))&&bo(this.baseMutations,e.baseMutations,((t,i)=>Vy(t,i)))}}class Wf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){ze(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return tC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Wf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Me;function gC(r){switch(r){case J.OK:return Se(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function o0(r){if(r===void 0)return Mr("GRPC error has no .code"),J.UNKNOWN;switch(r){case ht.OK:return J.OK;case ht.CANCELLED:return J.CANCELLED;case ht.UNKNOWN:return J.UNKNOWN;case ht.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case ht.INTERNAL:return J.INTERNAL;case ht.UNAVAILABLE:return J.UNAVAILABLE;case ht.UNAUTHENTICATED:return J.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case ht.NOT_FOUND:return J.NOT_FOUND;case ht.ALREADY_EXISTS:return J.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return J.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case ht.ABORTED:return J.ABORTED;case ht.OUT_OF_RANGE:return J.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return J.UNIMPLEMENTED;case ht.DATA_LOSS:return J.DATA_LOSS;default:return Se(39323,{code:r})}}(Me=ht||(ht={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new xi([4294967295,4294967295],0);function jy(r){const e=P_().encode(r),t=new E_;return t.update(e),new Uint8Array(t.digest())}function My(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xi([t,i],0),new xi([o,l],0)]}class Hf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ha(`Invalid padding: ${t}`);if(i<0)throw new Ha(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ha(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ha(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=xi.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(xi.fromNumber(i)));return o.compare(yC)===1&&(o=new xi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=jy(e),[i,o]=My(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Hf(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.fe===0)return;const t=jy(e),[i,o]=My(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,_l.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Mc(Ae.min(),o,new tt(be),Ur(),Oe())}}class _l{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new _l(i,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class a0{constructor(e,t){this.targetId=e,this.De=t}}class l0{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Fy{constructor(){this.ve=0,this.Ce=Uy(),this.Fe=Vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Oe(),t=Oe(),i=Oe();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se(38017,{changeType:l})}})),new _l(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Uy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class vC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ur(),this.je=Bu(),this.Je=Bu(),this.He=new tt(be)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(ef(l))if(i===0){const h=new we(l.path);this.Xe(t,h,Bt.newNoDocument(h,Ae.min()))}else ze(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const f=this._t(e),g=f?this.ut(f,e,h):1;if(g!==0){this.rt(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Ni(i).toUint8Array()}catch(g){if(g instanceof V_)return Ai("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Hf(h,o,l)}catch(g){return Ai(g instanceof Ha?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.fe===0?null:f}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.We.lt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const f=this.st(h);if(f){if(l.current&&ef(f.target)){const g=new we(f.target.path);this.Tt(g).has(h)||this.It(h,g)||this.Xe(h,g,Bt.newNoDocument(g,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let i=Oe();this.Je.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const v=this.st(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const o=new Mc(e,t,this.He,this.ze,i);return this.ze=Ur(),this.je=Bu(),this.Je=Bu(),this.He=new tt(be),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Fy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Et(be),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Et(be),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Fy),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Bu(){return new tt(we.comparator)}function Uy(){return new tt(we.comparator)}const _C={asc:"ASCENDING",desc:"DESCENDING"},wC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EC={and:"AND",or:"OR"};class TC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nf(r,e){return r.useProto3Json||Nc(e)?e:{value:e}}function vc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function IC(r,e){return vc(r,e.toTimestamp())}function ur(r){return ze(!!r,49232),Ae.fromTimestamp((function(t){const i=ki(t);return new Ye(i.seconds,i.nanos)})(r))}function qf(r,e){return rf(r,e).canonicalString()}function rf(r,e){const t=(function(o){return new Qe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function c0(r){const e=Qe.fromString(r);return ze(m0(e),10190,{key:e.toString()}),e}function sf(r,e){return qf(r.databaseId,e.path)}function bd(r,e){const t=c0(e);if(t.get(1)!==r.databaseId.projectId)throw new ye(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ye(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(d0(t))}function h0(r,e){return qf(r.databaseId,e)}function SC(r){const e=c0(r);return e.length===4?Qe.emptyPath():d0(e)}function of(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function d0(r){return ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function zy(r,e,t){return{name:sf(r,e),fields:t.value.mapValue.fields}}function xC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Se(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(ze(E===void 0||typeof E=="string",58123),Vt.fromBase64String(E||"")):(ze(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Vt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(v){const E=v.code===void 0?J.UNKNOWN:o0(v.code);return new ye(E,v.message||"")})(h);t=new l0(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=bd(r,i.document.name),l=ur(i.document.updateTime),h=i.document.createTime?ur(i.document.createTime):Ae.min(),f=new rn({mapValue:{fields:i.document.fields}}),g=Bt.newFoundDocument(o,l,h,f),v=i.targetIds||[],E=i.removedTargetIds||[];t=new Zu(v,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=bd(r,i.document),l=i.readTime?ur(i.readTime):Ae.min(),h=Bt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Zu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=bd(r,i.document),l=i.removedTargetIds||[];t=new Zu([],l,o,null)}else{if(!("filter"in e))return Se(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new mC(o,l),f=i.targetId;t=new a0(f,h)}}return t}function CC(r,e){let t;if(e instanceof vl)t={update:zy(r,e.key,e.value)};else if(e instanceof $f)t={delete:sf(r,e.key)};else if(e instanceof Fi)t={update:zy(r,e.key,e.data),updateMask:OC(e.fieldMask)};else{if(!(e instanceof dC))return Se(16599,{Rt:e.type});t={verify:sf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof gc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ll)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ul)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof yc)return{fieldPath:h.field.canonicalString(),increment:f.Ee};throw Se(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:IC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(r,e.precondition)),t}function RC(r,e){return r&&r.length>0?(ze(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?ur(o.updateTime):ur(l);return h.isEqual(Ae.min())&&(h=ur(l)),new uC(h,o.transformResults||[])})(t,e)))):[]}function AC(r,e){return{documents:[h0(r,e.path)]}}function PC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=h0(r,o);const l=(function(v){if(v.length!==0)return p0(fr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((E=>(function(S){return{field:So(S.field),direction:bC(S.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=nf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function kC(r){let e=SC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){ze(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(I){const S=f0(I);return S instanceof fr&&W_(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(I){return I.map((S=>(function(z){return new mc(xo(z.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(I){let S;return S=typeof I=="object"?I.value:I,Nc(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(I){const S=!!I.before,L=I.values||[];return new pc(L,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(I){const S=!I.before,L=I.values||[];return new pc(L,S)})(t.endAt)),Qx(e,o,h,l,f,"F",g,v)}function NC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function f0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=xo(t.unaryFilter.field);return _t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=xo(t.unaryFilter.field);return _t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=xo(t.unaryFilter.field);return _t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=xo(t.unaryFilter.field);return _t.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return _t.create(xo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return fr.create(t.compositeFilter.filters.map((i=>f0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function bC(r){return _C[r]}function DC(r){return wC[r]}function VC(r){return EC[r]}function So(r){return{fieldPath:r.canonicalString()}}function xo(r){return bt.fromServerFormat(r.fieldPath)}function p0(r){return r instanceof _t?(function(t){if(t.op==="=="){if(Ay(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(Ry(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ay(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(Ry(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:DC(t.op),value:t.value}}})(r):r instanceof fr?(function(t){const i=t.getFilters().map((o=>p0(o)));return i.length===1?i[0]:{compositeFilter:{op:VC(t.op),filters:i}}})(r):Se(54877,{filter:r})}function OC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function m0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,i,o,l=Ae.min(),h=Ae.min(),f=Vt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.gt=e}}function jC(r){const e=kC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?tf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.Dn=new FC}addToCollectionParentIndex(e,t){return this.Dn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Pi.min())}updateCollectionGroup(e,t,i){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class FC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Et(Qe.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Et(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},g0=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(g0,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Oo(0)}static ur(){return new Oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="LruGarbageCollector",UC=1048576;function Wy([r,e],[t,i]){const o=be(r,t);return o===0?be(e,i):o}class zC{constructor(e){this.Tr=e,this.buffer=new Et(Wy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Wy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){de($y,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wo(t)?de($y,"Ignoring IndexedDB error during garbage collection: ",t):await $o(t)}await this.Rr(3e5)}))}}class $C{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(kc.ue);const i=new zC(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(By)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),By):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,f,g,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,h=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,f=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(v=Date.now(),To()<=Ve.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${I} documents in `+(v-g)+`ms
Total Duration: ${v-E}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function WC(r,e){return new $C(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.changes=new As((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ja(i.mutation,o,pn.empty(),Ye.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Oe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Oe()){const o=vs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Wa();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=vs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Oe())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=Ur();const h=Xa(),f=(function(){return Xa()})();return t.forEach(((g,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Fi)?l=l.insert(v.key,v):E!==void 0?(h.set(v.key,E.mutation.getFieldMask()),Ja(E.mutation,v,E.mutation.getFieldMask(),Ye.now())):h.set(v.key,pn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((v,E)=>h.set(v,E))),t.forEach(((v,E)=>{var I;return f.set(v,new qC(E,(I=h.get(v))!==null&&I!==void 0?I:null))})),f)))}recalculateAndSaveOverlays(e,t){const i=Xa();let o=new tt(((h,f)=>h-f)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let E=i.get(g)||pn.empty();E=f.applyToLocalView(v,E),i.set(g,E);const I=(o.get(f.batchId)||Oe()).add(g);o=o.insert(f.batchId,I)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,E=g.value,I=J_();E.forEach((S=>{if(!l.has(S)){const L=i0(t.get(S),i.get(S));L!==null&&I.set(S,L),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,I))}return Q.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Q.resolve(vs());let f=il,g=l;return h.next((v=>Q.forEach(v,((E,I)=>(f<I.largestBatchId&&(f=I.largestBatchId),l.get(E)?Q.resolve():this.remoteDocumentCache.getEntry(e,E).next((S=>{g=g.insert(E,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,g,v,Oe()))).next((E=>({batchId:f,changes:X_(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let o=Wa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Wa();return this.indexManager.getCollectionParents(e,l).next((f=>Q.forEach(f,(g=>{const v=(function(I,S){return new Dc(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((I,S)=>{h=h.insert(I,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((g,v)=>{const E=v.getKey();h.get(E)===null&&(h=h.insert(E,Bt.newInvalidDocument(E)))}));let f=Wa();return h.forEach(((g,v)=>{const E=l.get(g);E!==void 0&&Ja(E.mutation,v,pn.empty(),Ye.now()),Oc(t,v)&&(f=f.insert(g,v))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ur(o.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:jC(o.bundledQuery),readTime:ur(o.readTime)}})(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.overlays=new tt(we.comparator),this.kr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=vs();return Q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),Q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),Q.resolve()}getOverlaysForCollection(e,t,i){const o=vs(),l=t.length+1,h=new we(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new tt(((v,E)=>v-E));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=vs(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const f=vs(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,E)=>f.set(v,E))),!(f.size()>=o)););return Q.resolve(f)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new pC(t,i));let l=this.kr.get(t);l===void 0&&(l=Oe(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this.qr=new Et(Ct.Qr),this.$r=new Et(Ct.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Ct(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Ct(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new we(new Qe([])),i=new Ct(t,e),o=new Ct(t,e+1),l=[];return this.$r.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new we(new Qe([])),i=new Ct(t,e),o=new Ct(t,e+1);let l=Oe();return this.$r.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ct(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ct{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return we.comparator(e.key,t.key)||be(e.Hr,t.Hr)}static Ur(e,t){return be(e.Hr,t.Hr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Et(Ct.Qr)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new fC(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Yr=this.Yr.add(new Ct(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Q.resolve(h)}lookupMutationBatch(e,t){return Q.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return Q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Lf:this.er-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ct(t,0),o=new Ct(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(h=>{const f=this.Zr(h.Hr);l.push(f)})),Q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Et(be);return t.forEach((o=>{const l=new Ct(o,0),h=new Ct(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(f=>{i=i.add(f.Hr)}))})),Q.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;we.isDocumentKey(l)||(l=l.child(""));const h=new Ct(new we(l),0);let f=new Et(be);return this.Yr.forEachWhile((g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(f=f.add(g.Hr)),!0)}),h),Q.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ze(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Q.forEach(t.mutations,(o=>{const l=new Ct(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Ct(t,0),o=this.Yr.firstAfterOrEqual(i);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.ni=e,this.docs=(function(){return new tt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Q.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let i=Ur();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Bt.newInvalidDocument(o))})),Q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Ur();const h=t.path,f=new we(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||Rx(Cx(E),i)<=0||(o.has(E.key)||Oc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Q.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Se(9500)}ri(e,t){return Q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new ZC(this)}getSize(e){return Q.resolve(this.size)}}class ZC extends HC{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),Q.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.persistence=e,this.ii=new As((t=>Ff(t)),Uf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new Gf,this.targetCount=0,this._i=Oo.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Q.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.hr(t),Q.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),Q.waitFor(l).next((()=>o))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return Q.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Q.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),Q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return Q.resolve(i)}containsKey(e,t){return Q.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,t){this.ai={},this.overlays={},this.ui=new kc(0),this.ci=!1,this.ci=!0,this.li=new YC,this.referenceDelegate=e(this),this.hi=new eR(this),this.indexManager=new MC,this.remoteDocumentCache=(function(o){return new JC(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new LC(t),this.Ti=new KC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new XC(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const o=new tR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return Q.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class tR extends Px{constructor(e){super(),this.currentSequenceNumber=e}}class Kf{constructor(e){this.persistence=e,this.Ai=new Gf,this.Ri=null}static Vi(e){return new Kf(e)}get mi(){if(this.Ri)return this.Ri;throw Se(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Q.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.mi,(i=>{const o=we.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return Q.or([()=>Q.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class _c{constructor(e,t){this.persistence=e,this.gi=new As((i=>bx(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=WC(this,t)}static Vi(e,t){return new _c(e,t)}Ii(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return Q.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?Q.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((f=>{f||(i++,l.removeEntry(h,Ae.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Q.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yu(e.data.value)),t}Sr(e,t,i){return Q.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return Q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Oe(),o=Oe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Qf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return LT()?8:kx($t())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new nR;return this.ws(e,t,h).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,h,f.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(To()<=Ve.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Io(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Q.resolve()):(To()<=Ve.DEBUG&&de("QueryEngine","Query:",Io(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(To()<=Ve.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Io(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):Q.resolve())}ps(e,t){if(by(t))return Q.resolve(null);let i=lr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=tf(t,null,"F"),i=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Oe(...l);return this.gs.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const v=this.bs(t,f);return this.Ds(t,v,h,g.readTime)?this.ps(e,tf(t,null,"F")):this.vs(e,v,t,g)}))))})))))}ys(e,t,i,o){return by(t)||o.isEqual(Ae.min())?Q.resolve(null):this.gs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?Q.resolve(null):(To()<=Ve.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Io(t)),this.vs(e,h,t,xx(o,il)).next((f=>f)))}))}bs(e,t){let i=new Et(Q_(e));return t.forEach(((o,l)=>{Oc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return To()<=Ve.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Io(t)),this.gs.getDocumentsMatchingQuery(e,t,Pi.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="LocalStore",iR=3e8;class sR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new tt(be),this.Ms=new As((l=>Ff(l)),Uf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function oR(r,e,t,i){return new sR(r,e,t,i)}async function v0(r,e){const t=Pe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let g=Oe();for(const v of o){h.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of l){f.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next((v=>({Bs:v,removedBatchIds:h,addedBatchIds:f})))}))}))}function aR(r,e){const t=Pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,g,v,E){const I=v.batch,S=I.keys();let L=Q.resolve();return S.forEach((z=>{L=L.next((()=>E.getEntry(g,z))).next((K=>{const F=v.docVersions.get(z);ze(F!==null,48541),K.version.compareTo(F)<0&&(I.applyToRemoteDocument(K,v),K.isValidDocument()&&(K.setReadTime(v.commitVersion),E.addEntry(K)))}))})),L.next((()=>f.mutationQueue.removeMutationBatch(g,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=Oe();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(g=g.add(f.batch.mutations[v].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function _0(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function lR(r,e){const t=Pe(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach(((E,I)=>{const S=o.get(I);if(!S)return;f.push(t.hi.removeMatchingKeys(l,E.removedDocuments,I).next((()=>t.hi.addMatchingKeys(l,E.addedDocuments,I))));let L=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?L=L.withResumeToken(Vt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(E.resumeToken,i)),o=o.insert(I,L),(function(K,F,H){return K.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=iR?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(S,L,E)&&f.push(t.hi.updateTargetData(l,L))}));let g=Ur(),v=Oe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),f.push(uR(l,h,e.documentUpdates).next((E=>{g=E.Ls,v=E.ks}))),!i.isEqual(Ae.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next((I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(E)}return Q.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,v))).next((()=>g))})).then((l=>(t.Fs=o,l)))}function uR(r,e,t){let i=Oe(),o=Oe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Ur();return t.forEach(((f,g)=>{const v=l.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):de(Yf,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)})),{Ls:h,ks:o}}))}function cR(r,e){const t=Pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Lf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function hR(r,e){const t=Pe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,Q.resolve(o)):t.hi.allocateTargetId(i).next((h=>(o=new _i(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function af(r,e,t){const i=Pe(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Wo(h))throw h;de(Yf,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Hy(r,e,t){const i=Pe(r);let o=Ae.min(),l=Oe();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,v,E){const I=Pe(g),S=I.Ms.get(E);return S!==void 0?Q.resolve(I.Fs.get(S)):I.hi.getTargetData(v,E)})(i,h,lr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:Oe()))).next((f=>(dR(i,Jx(e),f),{documents:f,qs:l})))))}function dR(r,e,t){let i=r.xs.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class qy{constructor(){this.activeTargetIds=iC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fR{constructor(){this.Fo=new qy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new qy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="ConnectivityMonitor";class Ky{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){de(Gy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){de(Gy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=null;function lf(){return $u===null?$u=(function(){return 268435456+Math.round(2147483648*Math.random())})():$u++,"0x"+$u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="RestConnection",mR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===dc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=lf(),f=this.Go(e,t.toUriEncodedString());de(Dd,`Sending RPC '${e}' ${h}:`,f,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,l);const{host:v}=new URL(f),E=Fo(v);return this.jo(e,f,g,i,E).then((I=>(de(Dd,`Received RPC '${e}' ${h}: `,I),I)),(I=>{throw Ai(Dd,`RPC '${e}' ${h} failed with error: `,I,"url: ",f,"request:",i),I}))}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=mR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class vR extends gR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=lf();return new Promise(((f,g)=>{const v=new T_;v.setWithCredentials(!0),v.listenOnce(I_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Qu.NO_ERROR:const I=v.getResponseJson();de(Ft,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(I)),f(I);break;case Qu.TIMEOUT:de(Ft,`RPC '${e}' ${h} timed out`),g(new ye(J.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:const S=v.getStatus();if(de(Ft,`RPC '${e}' ${h} failed with status:`,S,"response text:",v.getResponseText()),S>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const z=L==null?void 0:L.error;if(z&&z.status&&z.message){const K=(function(H){const X=H.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(X)>=0?X:J.UNKNOWN})(z.status);g(new ye(K,z.message))}else g(new ye(J.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ye(J.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{c_:e,streamId:h,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{de(Ft,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);de(Ft,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",E,i,15)}))}P_(e,t,i){const o=lf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=C_(),f=x_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=l.join("");de(Ft,`Creating RPC '${e}' stream ${o}: ${E}`,g);const I=h.createWebChannel(E,g);this.T_(I);let S=!1,L=!1;const z=new yR({Ho:F=>{L?de(Ft,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(S||(de(Ft,`Opening RPC '${e}' stream ${o} transport.`),I.open(),S=!0),de(Ft,`RPC '${e}' stream ${o} sending:`,F),I.send(F))},Yo:()=>I.close()}),K=(F,H,X)=>{F.listen(H,(re=>{try{X(re)}catch(te){setTimeout((()=>{throw te}),0)}}))};return K(I,$a.EventType.OPEN,(()=>{L||(de(Ft,`RPC '${e}' stream ${o} transport opened.`),z.s_())})),K(I,$a.EventType.CLOSE,(()=>{L||(L=!0,de(Ft,`RPC '${e}' stream ${o} transport closed`),z.__(),this.I_(I))})),K(I,$a.EventType.ERROR,(F=>{L||(L=!0,Ai(Ft,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),z.__(new ye(J.UNAVAILABLE,"The operation could not be completed")))})),K(I,$a.EventType.MESSAGE,(F=>{var H;if(!L){const X=F.data[0];ze(!!X,16349);const re=X,te=(re==null?void 0:re.error)||((H=re[0])===null||H===void 0?void 0:H.error);if(te){de(Ft,`RPC '${e}' stream ${o} received error:`,te);const xe=te.status;let ce=(function(A){const b=ht[A];if(b!==void 0)return o0(b)})(xe),P=te.message;ce===void 0&&(ce=J.INTERNAL,P="Unknown error status: "+xe+" with message "+te.message),L=!0,z.__(new ye(ce,P)),I.close()}else de(Ft,`RPC '${e}' stream ${o} received:`,X),z.a_(X)}})),K(f,S_.STAT_EVENT,(F=>{F.stat===Qd.PROXY?de(Ft,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Qd.NOPROXY&&de(Ft,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.o_()}),0),z}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Vd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(r){return new TC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="PersistentStream";class E0{constructor(e,t,i,o,l,h,f,g){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new w0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ye(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return de(Qy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(de(Qy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _R extends E0{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=xC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?ur(h.readTime):Ae.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=of(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=ef(g)?{documents:AC(l,g)}:{query:PC(l,g).Vt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=u0(l,h.resumeToken);const v=nf(l,h.expectedCount);v!==null&&(f.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ae.min())>0){f.readTime=vc(l,h.snapshotVersion.toTimestamp());const v=nf(l,h.expectedCount);v!==null&&(f.expectedCount=v)}return f})(this.serializer,e);const i=NC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=of(this.serializer),t.removeTarget=e,this.k_(t)}}class wR extends E0{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=RC(e.writeResults,e.commitTime),i=ur(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=of(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>CC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{}class TR extends ER{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ye(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,rf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(J.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Jo(e,rf(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ye(J.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class IR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Mr(t),this._a=!1):de("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="RemoteStore";class SR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{i.enqueueAndForget((async()=>{Ps(this)&&(de(xs,"Restarting streams for network reachability change."),await(async function(g){const v=Pe(g);v.Ia.add(4),await wl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Uc(v)})(this))}))})),this.Aa=new IR(i,o)}}async function Uc(r){if(Ps(r))for(const e of r.da)await e(!0)}async function wl(r){for(const e of r.da)await e(!1)}function T0(r,e){const t=Pe(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ep(t)?Zf(t):Ho(t).x_()&&Jf(t,e))}function Xf(r,e){const t=Pe(r),i=Ho(t);t.Ta.delete(e),i.x_()&&I0(t,e),t.Ta.size===0&&(i.x_()?i.B_():Ps(t)&&t.Aa.set("Unknown"))}function Jf(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(r).H_(e)}function I0(r,e){r.Ra.$e(e),Ho(r).Y_(e)}function Zf(r){r.Ra=new vC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),Ho(r).start(),r.Aa.aa()}function ep(r){return Ps(r)&&!Ho(r).M_()&&r.Ta.size>0}function Ps(r){return Pe(r).Ia.size===0}function S0(r){r.Ra=void 0}async function xR(r){r.Aa.set("Online")}async function CR(r){r.Ta.forEach(((e,t)=>{Jf(r,e)}))}async function RR(r,e){S0(r),ep(r)?(r.Aa.la(e),Zf(r)):r.Aa.set("Unknown")}async function AR(r,e,t){if(r.Aa.set("Online"),e instanceof l0&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ta.delete(f),o.Ra.removeTarget(f))})(r,e)}catch(i){de(xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await wc(r,i)}else if(e instanceof Zu?r.Ra.Ye(e):e instanceof a0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Ae.min()))try{const i=await _0(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Ra.Pt(h);return f.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ta.get(v);E&&l.Ta.set(v,E.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,v)=>{const E=l.Ta.get(g);if(!E)return;l.Ta.set(g,E.withResumeToken(Vt.EMPTY_BYTE_STRING,E.snapshotVersion)),I0(l,g);const I=new _i(E.target,g,v,E.sequenceNumber);Jf(l,I)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){de(xs,"Failed to raise snapshot:",i),await wc(r,i)}}async function wc(r,e,t){if(!Wo(e))throw e;r.Ia.add(1),await wl(r),r.Aa.set("Offline"),t||(t=()=>_0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{de(xs,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Uc(r)}))}function x0(r,e){return e().catch((t=>wc(r,t,e)))}async function zc(r){const e=Pe(r),t=Di(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Lf;for(;PR(e);)try{const o=await cR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,kR(e,o)}catch(o){await wc(e,o)}C0(e)&&R0(e)}function PR(r){return Ps(r)&&r.Pa.length<10}function kR(r,e){r.Pa.push(e);const t=Di(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function C0(r){return Ps(r)&&!Di(r).M_()&&r.Pa.length>0}function R0(r){Di(r).start()}async function NR(r){Di(r).na()}async function bR(r){const e=Di(r);for(const t of r.Pa)e.X_(t.mutations)}async function DR(r,e,t){const i=r.Pa.shift(),o=Wf.from(i,e,t);await x0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await zc(r)}async function VR(r,e){e&&Di(r).Z_&&await(async function(i,o){if((function(h){return gC(h)&&h!==J.ABORTED})(o.code)){const l=i.Pa.shift();Di(i).N_(),await x0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await zc(i)}})(r,e),C0(r)&&R0(r)}async function Yy(r,e){const t=Pe(r);t.asyncQueue.verifyOperationInProgress(),de(xs,"RemoteStore received new credentials");const i=Ps(t);t.Ia.add(3),await wl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Uc(t)}async function OR(r,e){const t=Pe(r);e?(t.Ia.delete(2),await Uc(t)):e||(t.Ia.add(2),await wl(t),t.Aa.set("Unknown"))}function Ho(r){return r.Va||(r.Va=(function(t,i,o){const l=Pe(t);return l.ia(),new _R(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:xR.bind(null,r),e_:CR.bind(null,r),n_:RR.bind(null,r),J_:AR.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),ep(r)?Zf(r):r.Aa.set("Unknown")):(await r.Va.stop(),S0(r))}))),r.Va}function Di(r){return r.ma||(r.ma=(function(t,i,o){const l=Pe(t);return l.ia(),new wR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:NR.bind(null,r),n_:VR.bind(null,r),ea:bR.bind(null,r),ta:DR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await zc(r)):(await r.ma.stop(),r.Pa.length>0&&(de(xs,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new tp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function np(r,e){if(Mr("AsyncQueue",`${e}: ${r}`),Wo(r))return new ye(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Wa(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Po;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.fa=new tt(we.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Se(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Lo{constructor(e,t,i,o,l,h,f,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Lo(e,t,Po.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class jR{constructor(){this.queries=Jy(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Pe(t),l=o.queries;o.queries=Jy(),l.forEach(((h,f)=>{for(const g of f.wa)g.onError(i)}))})(this,new ye(J.ABORTED,"Firestore shutting down"))}}function Jy(){return new As((r=>K_(r)),Vc)}async function A0(r,e){const t=Pe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new LR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=np(h,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&rp(t)}async function P0(r,e){const t=Pe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function MR(r,e){const t=Pe(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.wa)f.Ca(o)&&(i=!0);h.ya=o}}i&&rp(t)}function FR(r,e,t){const i=Pe(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function rp(r){r.Da.forEach((e=>{e.next()}))}var uf,Zy;(Zy=uf||(uf={})).Fa="default",Zy.Cache="cache";class k0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Lo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==uf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this.key=e}}class b0{constructor(e){this.key=e}}class UR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Oe(),this.mutatedKeys=Oe(),this.Xa=Q_(e),this.eu=new Po(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new Xy,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,I)=>{const S=o.get(E),L=Oc(this.query,I)?I:null,z=!!S&&this.mutatedKeys.has(S.key),K=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let F=!1;S&&L?S.data.isEqual(L.data)?z!==K&&(i.track({type:3,doc:L}),F=!0):this.iu(S,L)||(i.track({type:2,doc:L}),F=!0,(g&&this.Xa(L,g)>0||v&&this.Xa(L,v)<0)&&(f=!0)):!S&&L?(i.track({type:0,doc:L}),F=!0):S&&!L&&(i.track({type:1,doc:S}),F=!0,(g||v)&&(f=!0)),F&&(L?(h=h.add(L),l=K?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{eu:h,ru:i,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((E,I)=>(function(L,z){const K=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{At:F})}};return K(L)-K(z)})(E.type,I.type)||this.Xa(E.doc,I.doc))),this.su(i),o=o!=null&&o;const f=t&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,v=g!==this.Ya;return this.Ya=g,h.length!==0||v?{snapshot:new Lo(this.query,e.eu,l,h,e.mutatedKeys,g===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Xy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Oe(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new b0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new N0(i))})),t}uu(e){this.Ha=e.qs,this.Za=Oe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Lo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ip="SyncEngine";class zR{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class BR{constructor(e){this.key=e,this.lu=!1}}class $R{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new As((f=>K_(f)),Vc),this.Tu=new Map,this.Iu=new Set,this.du=new tt(we.comparator),this.Eu=new Map,this.Au=new Gf,this.Ru={},this.Vu=new Map,this.mu=Oo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function WR(r,e,t=!0){const i=M0(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await D0(i,e,t,!0),o}async function HR(r,e){const t=M0(r);await D0(t,e,!0,!1)}async function D0(r,e,t,i){const o=await hR(r.localStore,lr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await qR(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&T0(r.remoteStore,o),f}async function qR(r,e,t,i,o){r.gu=(I,S,L)=>(async function(K,F,H,X){let re=F.view.nu(H);re.Ds&&(re=await Hy(K.localStore,F.query,!1).then((({documents:P})=>F.view.nu(P,re))));const te=X&&X.targetChanges.get(F.targetId),xe=X&&X.targetMismatches.get(F.targetId)!=null,ce=F.view.applyChanges(re,K.isPrimaryClient,te,xe);return tv(K,F.targetId,ce._u),ce.snapshot})(r,I,S,L);const l=await Hy(r.localStore,e,!0),h=new UR(e,l.qs),f=h.nu(l.documents),g=_l.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(f,r.isPrimaryClient,g);tv(r,t,v._u);const E=new zR(e,t,h);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function GR(r,e,t){const i=Pe(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((h=>!Vc(h,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await af(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Xf(i.remoteStore,o.targetId),cf(i,o.targetId)})).catch($o)):(cf(i,o.targetId),await af(i.localStore,o.targetId,!0))}async function KR(r,e){const t=Pe(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Xf(t.remoteStore,i.targetId))}async function QR(r,e,t){const i=nA(r);try{const o=await(function(h,f){const g=Pe(h),v=Ye.now(),E=f.reduce(((L,z)=>L.add(z.key)),Oe());let I,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let z=Ur(),K=Oe();return g.Os.getEntries(L,E).next((F=>{z=F,z.forEach(((H,X)=>{X.isValidDocument()||(K=K.add(H))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,z))).next((F=>{I=F;const H=[];for(const X of f){const re=hC(X,I.get(X.key).overlayedDocument);re!=null&&H.push(new Fi(X.key,re,z_(re.value.mapValue),qn.exists(!0)))}return g.mutationQueue.addMutationBatch(L,v,H,f)})).next((F=>{S=F;const H=F.applyToLocalDocumentSet(I,K);return g.documentOverlayCache.saveOverlays(L,F.batchId,H)}))})).then((()=>({batchId:S.batchId,changes:X_(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let v=h.Ru[h.currentUser.toKey()];v||(v=new tt(be)),v=v.insert(f,g),h.Ru[h.currentUser.toKey()]=v})(i,o.batchId,t),await El(i,o.changes),await zc(i.remoteStore)}catch(o){const l=np(o,"Failed to persist write");t.reject(l)}}async function V0(r,e){const t=Pe(r);try{const i=await lR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Eu.get(l);h&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?ze(h.lu,14607):o.removedDocuments.size>0&&(ze(h.lu,42227),h.lu=!1))})),await El(t,i,e)}catch(i){await $o(i)}}function ev(r,e,t){const i=Pe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Pe(h);g.onlineState=f;let v=!1;g.queries.forEach(((E,I)=>{for(const S of I.wa)S.va(f)&&(v=!0)})),v&&rp(g)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function YR(r,e,t){const i=Pe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new tt(we.comparator);h=h.insert(l,Bt.newNoDocument(l,Ae.min()));const f=Oe().add(l),g=new Mc(Ae.min(),new Map,new tt(be),h,f);await V0(i,g),i.du=i.du.remove(l),i.Eu.delete(e),sp(i)}else await af(i.localStore,e,!1).then((()=>cf(i,e,t))).catch($o)}async function XR(r,e){const t=Pe(r),i=e.batch.batchId;try{const o=await aR(t.localStore,e);L0(t,i,null),O0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await El(t,o)}catch(o){await $o(o)}}async function JR(r,e,t){const i=Pe(r);try{const o=await(function(h,f){const g=Pe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return g.mutationQueue.lookupMutationBatch(v,f).next((I=>(ze(I!==null,37113),E=I.keys(),g.mutationQueue.removeMutationBatch(v,I)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>g.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);L0(i,e,t),O0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await El(i,o)}catch(o){await $o(o)}}function O0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function L0(r,e,t){const i=Pe(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function cf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||j0(r,i)}))}function j0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Xf(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),sp(r))}function tv(r,e,t){for(const i of t)i instanceof N0?(r.Au.addReference(i.key,e),ZR(r,i)):i instanceof b0?(de(ip,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||j0(r,i.key)):Se(19791,{yu:i})}function ZR(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(de(ip,"New document in limbo: "+t),r.Iu.add(i),sp(r))}function sp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new we(Qe.fromString(e)),i=r.mu.next();r.Eu.set(i,new BR(t)),r.du=r.du.insert(t,i),T0(r.remoteStore,new _i(lr(zf(t.path)),i,"TargetPurposeLimboResolution",kc.ue))}}async function El(r,e,t){const i=Pe(r),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach(((f,g)=>{h.push(i.gu(g,e,t).then((v=>{var E;if((v||t)&&i.isPrimaryClient){const I=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,I?"current":"not-current")}if(v){o.push(v);const I=Qf.Es(g.targetId,v);l.push(I)}})))})),await Promise.all(h),i.hu.J_(o),await(async function(g,v){const E=Pe(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Q.forEach(v,(S=>Q.forEach(S.Is,(L=>E.persistence.referenceDelegate.addReference(I,S.targetId,L))).next((()=>Q.forEach(S.ds,(L=>E.persistence.referenceDelegate.removeReference(I,S.targetId,L)))))))))}catch(I){if(!Wo(I))throw I;de(Yf,"Failed to update sequence numbers: "+I)}for(const I of v){const S=I.targetId;if(!I.fromCache){const L=E.Fs.get(S),z=L.snapshotVersion,K=L.withLastLimboFreeSnapshotVersion(z);E.Fs=E.Fs.insert(S,K)}}})(i.localStore,l))}async function eA(r,e){const t=Pe(r);if(!t.currentUser.isEqual(e)){de(ip,"User change. New user:",e.toKey());const i=await v0(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((f=>{f.forEach((g=>{g.reject(new ye(J.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await El(t,i.Bs)}}function tA(r,e){const t=Pe(r),i=t.Eu.get(e);if(i&&i.lu)return Oe().add(i.key);{let o=Oe();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const f=t.Pu.get(h);o=o.unionWith(f.view.tu)}return o}}function M0(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=V0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YR.bind(null,e),e.hu.J_=MR.bind(null,e.eventManager),e.hu.pu=FR.bind(null,e.eventManager),e}function nA(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JR.bind(null,e),e}class Ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return oR(this.persistence,new rR,e.initialUser,this.serializer)}Du(e){return new y0(Kf.Vi,this.serializer)}bu(e){return new fR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ec.provider={build:()=>new Ec};class rA extends Ec{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ze(this.persistence.referenceDelegate instanceof _c,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new BC(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new y0((i=>_c.Vi(i,t)),this.serializer)}}class hf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ev(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=eA.bind(null,this.syncEngine),await OR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new jR})()}createDatastore(e){const t=Fc(e.databaseInfo.databaseId),i=(function(l){return new vR(l)})(e.databaseInfo);return(function(l,h,f,g){return new TR(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new SR(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>ev(this.syncEngine,t,0)),(function(){return Ky.C()?new Ky:new pR})())}createSyncEngine(e,t){return(function(o,l,h,f,g,v,E){const I=new $R(o,l,h,f,g,v);return E&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Pe(o);de(xs,"RemoteStore shutting down."),l.Ia.add(5),await wl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hf.provider={build:()=>new hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class iA{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=Vf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{de(Vi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(de(Vi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=np(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Od(r,e){r.asyncQueue.verifyOperationInProgress(),de(Vi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await v0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Ai("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{de("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Ai("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function nv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await sA(r);de(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Yy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Yy(e.remoteStore,o))),r._onlineComponents=e}async function sA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){de(Vi,"Using user provided OfflineComponentProvider");try{await Od(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ai("Error using user provided cache. Falling back to memory cache: "+t),await Od(r,new Ec)}}else de(Vi,"Using default OfflineComponentProvider"),await Od(r,new rA(void 0));return r._offlineComponents}async function U0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(de(Vi,"Using user provided OnlineComponentProvider"),await nv(r,r._uninitializedComponentsProvider._online)):(de(Vi,"Using default OnlineComponentProvider"),await nv(r,new hf))),r._onlineComponents}function oA(r){return U0(r).then((e=>e.syncEngine))}async function z0(r){const e=await U0(r),t=e.eventManager;return t.onListen=WR.bind(null,e.syncEngine),t.onUnlisten=GR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=KR.bind(null,e.syncEngine),t}function aA(r,e,t={}){const i=new Or;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,v){const E=new F0({next:S=>{E.Ou(),h.enqueueAndForget((()=>P0(l,I)));const L=S.docs.has(f);!L&&S.fromCache?v.reject(new ye(J.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&S.fromCache&&g&&g.source==="server"?v.reject(new ye(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),I=new k0(zf(f.path),E,{includeMetadataChanges:!0,ka:!0});return A0(l,I)})(await z0(r),r.asyncQueue,e,t,i))),i.promise}function lA(r,e,t={}){const i=new Or;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,v){const E=new F0({next:S=>{E.Ou(),h.enqueueAndForget((()=>P0(l,I))),S.fromCache&&g.source==="server"?v.reject(new ye(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),I=new k0(f,E,{includeMetadataChanges:!0,ka:!0});return A0(l,I)})(await z0(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="firestore.googleapis.com",iv=!0;class sv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$0,this.ssl=iv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:iv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=g0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UC)throw new ye(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Sx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new mx;switch(i.type){case"firstParty":return new _x(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=rv.get(t);i&&(de("ComponentProvider","Removing Datastore"),rv.delete(t),i.terminate())})(this),Promise.resolve()}}function uA(r,e,t,i={}){var o;r=Fr(r,Bc);const l=Fo(e),h=r._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${t}`;l&&(Nv(`https://${g}`),bv("Firestore",!0)),h.host!==$0&&h.host!==g&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:g,ssl:l,emulatorOptions:i});if(!ws(v,f)&&(r._setSettings(v),i.mockUserToken)){let E,I;if(typeof i.mockUserToken=="string")E=i.mockUserToken,I=zt.MOCK_USER;else{E=RT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ye(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new zt(S)}r._authCredentials=new gx(new A_(E,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new $c(this.firestore,e,this._query)}}class wt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(yl(t,wt._jsonSchema))return new wt(e,i||null,new we(Qe.fromString(t.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:dt("string",wt._jsonSchemaVersion),referencePath:dt("string")};class Ci extends $c{constructor(e,t,i){super(e,t,zf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new we(e))}withConverter(e){return new Ci(this.firestore,e,this._path)}}function wi(r,e,...t){if(r=Dt(r),k_("collection","path",e),r instanceof Bc){const i=Qe.fromString(e,...t);return _y(i),new Ci(r,null,i)}{if(!(r instanceof wt||r instanceof Ci))throw new ye(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Qe.fromString(e,...t));return _y(i),new Ci(r.firestore,null,i)}}function Nr(r,e,...t){if(r=Dt(r),arguments.length===1&&(e=Vf.newId()),k_("doc","path",e),r instanceof Bc){const i=Qe.fromString(e,...t);return vy(i),new wt(r,null,new we(i))}{if(!(r instanceof wt||r instanceof Ci))throw new ye(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Qe.fromString(e,...t));return vy(i),new wt(r.firestore,r instanceof Ci?r.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="AsyncQueue";class av{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new w0(this,"async_queue_retry"),this.oc=()=>{const i=Vd();i&&de(ov,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Vd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Vd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Or;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Wo(e))throw e;de(ov,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Mr("INTERNAL UNHANDLED ERROR: ",lv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=tp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Se(47125,{hc:lv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function lv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class qo extends Bc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new av,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new av(e),this._firestoreClient=void 0,await e}}}function cA(r,e){const t=typeof r=="object"?r:Lv(),i=typeof r=="string"?r:dc,o=Ef(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=xT("firestore");l&&uA(o,...l)}return o}function op(r){if(r._terminated)throw new ye(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||hA(r),r._firestoreClient}function hA(r){var e,t,i;const o=r._freezeSettings(),l=(function(f,g,v,E){return new Ox(f,g,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,B0(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new iA(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xn(Vt.fromBase64String(e))}catch(t){throw new ye(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yl(e,xn._jsonSchema))return xn.fromBase64String(e.bytes)}}xn._jsonSchemaVersion="firestore/bytes/1.0",xn._jsonSchema={type:dt("string",xn._jsonSchemaVersion),bytes:dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cr._jsonSchemaVersion}}static fromJSON(e){if(yl(e,cr._jsonSchema))return new cr(e.latitude,e.longitude)}}cr._jsonSchemaVersion="firestore/geoPoint/1.0",cr._jsonSchema={type:dt("string",cr._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yl(e,hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hr(e.vectorValues);throw new ye(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hr._jsonSchemaVersion="firestore/vectorValue/1.0",hr._jsonSchema={type:dt("string",hr._jsonSchemaVersion),vectorValues:dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=/^__.*__$/;class fA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}class W0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function H0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ec:r})}}class lp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Tc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(H0(this.Ec)&&dA.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class pA{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Fc(e)}Dc(e,t,i,o=!1){return new lp({Ec:e,methodName:t,bc:i,path:bt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function q0(r){const e=r._freezeSettings(),t=Fc(r._databaseId);return new pA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function mA(r,e,t,i,o,l={}){const h=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);up("Data must be an object, but it was:",h,i);const f=G0(i,h);let g,v;if(l.merge)g=new pn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const S=df(e,I,t);if(!h.contains(S))throw new ye(J.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Q0(E,S)||E.push(S)}g=new pn(E),v=h.fieldTransforms.filter((I=>g.covers(I.field)))}else g=null,v=h.fieldTransforms;return new fA(new rn(f),g,v)}class Hc extends ap{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hc}}function gA(r,e,t,i){const o=r.Dc(1,e,t);up("Data must be an object, but it was:",o,i);const l=[],h=rn.empty();Mi(i,((g,v)=>{const E=cp(e,g,t);v=Dt(v);const I=o.gc(E);if(v instanceof Hc)l.push(E);else{const S=qc(v,I);S!=null&&(l.push(E),h.set(E,S))}}));const f=new pn(l);return new W0(h,f,o.fieldTransforms)}function yA(r,e,t,i,o,l){const h=r.Dc(1,e,t),f=[df(e,i,t)],g=[o];if(l.length%2!=0)throw new ye(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(df(e,l[S])),g.push(l[S+1]);const v=[],E=rn.empty();for(let S=f.length-1;S>=0;--S)if(!Q0(v,f[S])){const L=f[S];let z=g[S];z=Dt(z);const K=h.gc(L);if(z instanceof Hc)v.push(L);else{const F=qc(z,K);F!=null&&(v.push(L),E.set(L,F))}}const I=new pn(v);return new W0(E,I,h.fieldTransforms)}function qc(r,e){if(K0(r=Dt(r)))return up("Unsupported field value:",e,r),G0(r,e);if(r instanceof ap)return(function(i,o){if(!H0(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let g=qc(f,o.yc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ye.fromDate(i);return{timestampValue:vc(o.serializer,l)}}if(i instanceof Ye){const l=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vc(o.serializer,l)}}if(i instanceof cr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xn)return{bytesValue:u0(o.serializer,i._byteString)};if(i instanceof wt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:qf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof hr)return(function(h,f){return{mapValue:{fields:{[F_]:{stringValue:U_},[fc]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw f.wc("VectorValues must only contain numeric values.");return Bf(f.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Of(i)}`)})(r,e)}function G0(r,e){const t={};return D_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(r,((i,o)=>{const l=qc(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function K0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ye||r instanceof cr||r instanceof xn||r instanceof wt||r instanceof ap||r instanceof hr)}function up(r,e,t){if(!K0(t)||!N_(t)){const i=Of(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function df(r,e,t){if((e=Dt(e))instanceof Wc)return e._internalPath;if(typeof e=="string")return cp(r,e);throw Tc("Field path arguments must be of type string or ",r,!1,void 0,t)}const vA=new RegExp("[~\\*/\\[\\]]");function cp(r,e,t){if(e.search(vA)>=0)throw Tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Wc(...e.split("."))._internalPath}catch{throw Tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Tc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new ye(J.INVALID_ARGUMENT,f+r+g)}function Q0(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _A(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(X0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _A extends Y0{data(){return super.data()}}function X0(r,e){return typeof e=="string"?cp(r,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EA{convertValue(e,t="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Mi(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[fc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>at(h.doubleValue)));return new hr(l)}convertGeoPoint(e){return new cr(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=bc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){const t=ki(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Qe.fromString(e);ze(m0(i),9688,{name:e});const o=new ol(i.get(1),i.get(3)),l=new we(i.popFirst(5));return o.isEqual(t)||Mr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class qa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _s extends Y0{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(X0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_s._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_s._jsonSchemaVersion="firestore/documentSnapshot/1.0",_s._jsonSchema={type:dt("string",_s._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class ec extends _s{data(e={}){return super.data(e)}}class ko{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new qa(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ec(this._firestore,this._userDataWriter,i.key,i,new qa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new ec(o._firestore,o._userDataWriter,f.doc.key,f.doc,new qa(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new ec(o._firestore,o._userDataWriter,f.doc.key,f.doc,new qa(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return f.type!==0&&(v=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:IA(f.type),doc:g,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(r){r=Fr(r,wt);const e=Fr(r.firestore,qo);return aA(op(e),r._key).then((t=>SA(e,r,t)))}ko._jsonSchemaVersion="firestore/querySnapshot/1.0",ko._jsonSchema={type:dt("string",ko._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};class J0 extends EA{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}function jo(r){r=Fr(r,$c);const e=Fr(r.firestore,qo),t=op(e),i=new J0(e);return wA(r._query),lA(t,r._query).then((o=>new ko(e,i,r,o)))}function cv(r,e,t,...i){r=Fr(r,wt);const o=Fr(r.firestore,qo),l=q0(o);let h;return h=typeof(e=Dt(e))=="string"||e instanceof Wc?yA(l,"updateDoc",r._key,e,t,i):gA(l,"updateDoc",r._key,e),hp(o,[h.toMutation(r._key,qn.exists(!0))])}function tc(r){return hp(Fr(r.firestore,qo),[new $f(r._key,qn.none())])}function ff(r,e){const t=Fr(r.firestore,qo),i=Nr(r),o=TA(r.converter,e);return hp(t,[mA(q0(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,qn.exists(!1))]).then((()=>i))}function hp(r,e){return(function(i,o){const l=new Or;return i.asyncQueue.enqueueAndForget((async()=>QR(await oA(i),o,l))),l.promise})(op(r),e)}function SA(r,e,t){const i=t.docs.get(e._key),o=new J0(r);return new _s(r,o,e._key,i,new qa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Bo=o})(Uo),No(new Es("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new qo(new yx(i.getProvider("auth-internal")),new wx(h,i.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ye(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ol(v.options.projectId,E)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Si(fy,py,e),Si(fy,py,"esm2017")})();const xA={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},Z0=Ov(xA),Ri=fx(Z0),Ut=cA(Z0),ew=Y.createContext(null);function CA({children:r}){const[e,t]=Y.useState(null),[i,o]=Y.useState(!1),[l,h]=Y.useState(!0);Y.useEffect(()=>{const v=r1(Ri,async E=>{if(t(E),E)try{const I=Nr(Ut,"admins",E.uid);if((await uv(I)).exists())o(!0);else{const L=Nr(Ut,"roles",E.uid),z=await uv(L);z.exists()&&z.data().admin===!0?o(!0):o(!1)}}catch(I){console.error("Error checking admin role:",I),o(!1)}else o(!1);h(!1)});return()=>v()},[]);const f=async(v,E)=>{await a_(Ri,v,E)},g=async()=>{await l_(Ri)};return y.jsx(ew.Provider,{value:{user:e,admin:i,loading:l,login:f,logout:g},children:r})}function Tl(){return Y.useContext(ew)}function RA({onClose:r}){const[e,t]=Y.useState("login"),[i,o]=Y.useState(""),[l,h]=Y.useState("");async function f(){try{await __(Ri,new or),r()}catch(E){alert(E.message)}}async function g(E){E.preventDefault();try{await a_(Ri,i,l),r()}catch(I){alert(I.message)}}async function v(E){E.preventDefault();try{await e1(Ri,i,l),r()}catch(I){alert(I.message)}}return y.jsx("div",{className:"auth-modal-backdrop",onClick:r,children:y.jsxs("div",{className:"auth-modal",onClick:E=>E.stopPropagation(),children:[y.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),y.jsxs("button",{className:"google-btn",onClick:f,children:[y.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),y.jsx("div",{className:"auth-divider",children:y.jsx("span",{children:"or"})}),y.jsxs("form",{onSubmit:e==="login"?g:v,className:"auth-form",children:[y.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:i,onChange:E=>o(E.target.value),required:!0}),y.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:E=>h(E.target.value),required:!0}),y.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),y.jsx("div",{className:"auth-switcher",children:e==="login"?y.jsxs("p",{children:["No account?"," ",y.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):y.jsxs("p",{children:["Already have an account?"," ",y.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),y.jsx("button",{className:"auth-close",onClick:r,children:"Close"})]})})}function AA(){const[r,e]=Y.useState(!1),[t,i]=Y.useState(!1),{user:o,admin:l}=Tl(),h=vf();async function f(){try{await l_(Ri),e(!1),h("/")}catch(g){console.error(g),alert("Logout failed.")}}return y.jsxs(y.Fragment,{children:[y.jsxs("button",{className:`menu-toggle ${r?"active":""}`,onClick:()=>e(!r),children:[y.jsx("span",{}),y.jsx("span",{}),y.jsx("span",{})]}),y.jsxs("nav",{className:`menu-panel ${r?"open":""}`,children:[y.jsx(Ua,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),y.jsx(Ua,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),y.jsx(Ua,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),y.jsx(Ua,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),l&&y.jsx(Ua,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),y.jsxs("div",{className:"auth-section",children:[y.jsx("p",{className:"auth-section-status",children:o?`Signed in as ${o.email||o.uid}`:"Not signed in"}),y.jsxs("div",{children:[!o&&y.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),i(!0)},children:"Sign in"}),o&&y.jsx("button",{className:"auth-btn secondary",onClick:f,children:"Sign out"})]})]})]}),t&&y.jsx(RA,{onClose:()=>i(!1)})]})}function PA(){return y.jsxs("main",{className:"page",children:[y.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[y.jsx("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"im_ok's Collection Hub"}),y.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem"},children:"A quiet little corner of the internet for my shelves, lists, and cardboard addictions."}),y.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.72)",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"12px",fontSize:"0.85rem",color:"var(--text-soft)"},children:" Manga   Anime   TCG"})]}),y.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[y.jsxs("article",{className:"card",children:[y.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"About me"}),y.jsxs("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5},children:["Hey, I go by ",y.jsx("strong",{children:"im_ok"}),". I hoard manga, binge anime, and collect way too many trading cards. This site is where I track everything: volumes on my shelves, finished shows, and growing TCG binders."]}),y.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem"},children:"You'll find detailed stats, reading history, and collection values across the different pages  it's basically my personal library dashboard."}),y.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px"},children:[y.jsx("span",{className:"pill",children:"Manga library power user"}),y.jsx("span",{className:"pill",children:"MAL-synced anime list"}),y.jsx("span",{className:"pill",children:"Pokmon & One Piece TCG"}),y.jsx("span",{className:"pill",children:"Automation & data nerd"})]})]}),y.jsxs("article",{className:"card",children:[y.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"Explore the site"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[y.jsxs("a",{href:"/base/manga",className:"section-card",children:[y.jsx("h3",{children:" Manga Library"}),y.jsx("p",{children:"Full manga collection & wishlist, with covers, stats, and release tracking."}),y.jsxs("div",{className:"section-chip-row",children:[y.jsx("span",{className:"section-chip accent",children:"Firestore-powered"}),y.jsx("span",{className:"section-chip",children:"Library & wishlist"}),y.jsx("span",{className:"section-chip",children:"Release calendar"})]})]}),y.jsxs("a",{href:"/base/anime",className:"section-card",children:[y.jsx("h3",{children:" Anime Library"}),y.jsx("p",{children:"Read-only mirror of my MAL list, with filters, stats, and pretty cards."}),y.jsxs("div",{className:"section-chip-row",children:[y.jsx("span",{className:"section-chip accent",children:"MAL synced"}),y.jsx("span",{className:"section-chip",children:"Status filters"}),y.jsx("span",{className:"section-chip",children:"Quick stats"})]})]}),y.jsxs("a",{href:"/base/tcg",className:"section-card",children:[y.jsx("h3",{children:" TCG Collection"}),y.jsx("p",{children:"Pokmon & One Piece TCG cards tracked with quantities, prices, and value."}),y.jsxs("div",{className:"section-chip-row",children:[y.jsx("span",{className:"section-chip accent",children:"Tracked in Firestore"}),y.jsx("span",{className:"section-chip",children:"Value vs paid"}),y.jsx("span",{className:"section-chip",children:"Per-game breakdown"})]})]})]})]})]}),y.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"Built as a static GitHub Pages site. Data lives in Firestore & MyAnimeList."})]})}function Wu(r){let e=(r||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[-]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),i=t?t[1].trim().toLowerCase():e.toLowerCase(),o=t&&t[2]?parseInt(t[2],10):0;return{name:i,vol:Number.isFinite(o)?o:0}}function Ld(r){if(typeof r=="number")return r;if(r==null)return 0;const e=String(r).replace(/[^0-9.-]/g,""),t=parseFloat(e);return Number.isFinite(t)?t:0}function kA(r){if(typeof r=="number")return r;if(r==null||r==="")return 0;const e=parseInt(r,10);return Number.isFinite(e)?e:0}function NA(r,e){const t=r.length,i=e.length,o=t+i,l=r.filter(ce=>ce.read).length,h=t-l,f=t?Math.round(l/t*100):0;let g=0,v=0,E=0;r.forEach(ce=>{g+=Ld(ce.amountPaid),v+=Ld(ce.msrp),E+=Ld(ce.collectiblePrice)});let I=0,S=0;r.forEach(ce=>{const P=kA(ce.pageCount);I+=P,ce.read&&(S+=P)});const L={10:0,9:0,8:0,7:0,6:0,5:0,4:0,3:0,2:0,1:0};let z=0,K=0;r.forEach(ce=>{const P=ce.rating==null||ce.rating===""?NaN:parseFloat(ce.rating);if(!Number.isFinite(P)||P<=0)return;const x=String(Math.round(P));L[x]!=null&&(L[x]+=1),z+=P,K+=1});const F=K?z/K:0,H=new Date,X=[];for(let ce=11;ce>=0;ce-=1){const P=new Date(H.getFullYear(),H.getMonth()-ce,1),x=`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`;X.push({key:x,label:P.toLocaleString(void 0,{month:"short"}),count:0})}const re=Object.fromEntries(X.map((ce,P)=>[ce.key,P]));r.forEach(ce=>{if(!ce.dateRead)return;const P=ce.dateRead.slice(0,7),x=re[P];x!=null&&(X[x].count+=1)});const te={};r.forEach(ce=>{const P=(ce.publisher||"").trim();P&&(te[P]=(te[P]||0)+1)});const xe=Object.entries(te).sort((ce,P)=>P[1]-ce[1]).slice(0,5).map(([ce,P])=>({name:ce,count:P}));return{totalBooks:o,totalLibrary:t,totalWishlist:i,readBooks:l,unreadBooks:h,readPct:f,paidTotal:g,msrpTotal:v,collectibleTotal:E,pagesTotal:I,pagesRead:S,avgRating:F,ratingBuckets:L,months:X,topPublishers:xe}}function bA({library:r,wishlist:e}){const t=Y.useMemo(()=>NA(r,e),[r,e]);if(!t.totalBooks)return y.jsx("div",{className:"manga-empty-state",children:"No manga loaded yet. Once your Firestore library & wishlist are pulled in, this dashboard will light up."});const i=Math.max(...Object.values(t.ratingBuckets),1),o=t.topPublishers.length>0?Math.max(...t.topPublishers.map(h=>h.count),1):1,l=t.months.length>0?Math.max(...t.months.map(h=>h.count),1):1;return y.jsxs("div",{className:"manga-dashboard",children:[y.jsxs("div",{className:"manga-dashboard-grid",children:[y.jsxs("div",{className:"manga-stat-card",children:[y.jsxs("div",{className:"manga-stat-header",children:[y.jsxs("div",{children:[y.jsx("div",{className:"manga-stat-label",children:"Collection"}),y.jsx("div",{className:"manga-stat-value",children:t.totalBooks})]}),y.jsxs("div",{className:"manga-stat-sub",children:["Library: ",t.totalLibrary,"  Wishlist: ",t.totalWishlist]})]}),y.jsxs("div",{className:"manga-pie-wrap",children:[y.jsx("div",{className:"manga-pie",style:{"--pct":t.readPct},children:y.jsxs("div",{className:"manga-pie-label",children:[t.readPct,"% read"]})}),y.jsxs("div",{className:"manga-stat-sub",children:[y.jsx("strong",{children:t.readBooks})," read "," ",y.jsx("strong",{children:t.unreadBooks})," unread in your library.",y.jsx("br",{}),"Perfect for tracking backlog vs progress."]})]})]}),y.jsxs("div",{className:"manga-stat-card",children:[y.jsxs("div",{className:"manga-stat-header",children:[y.jsxs("div",{children:[y.jsx("div",{className:"manga-stat-label",children:"Spending & Pages"}),y.jsxs("div",{className:"manga-stat-value",children:["$",t.paidTotal.toFixed(0)]})]}),y.jsxs("div",{className:"manga-stat-sub",children:["Pages owned: ",t.pagesTotal.toLocaleString(),"  Read:"," ",t.pagesRead.toLocaleString()]})]}),y.jsxs("div",{className:"manga-stat-sub",children:["MSRP (if set): $",t.msrpTotal.toFixed(0),"  Collectible value: $",t.collectibleTotal.toFixed(0),y.jsx("br",{}),"Avg rating:"," ",t.avgRating?t.avgRating.toFixed(2):"N/A"," ","/ 10"]})]}),y.jsxs("div",{className:"manga-stat-card",children:[y.jsxs("div",{className:"manga-stat-header",children:[y.jsxs("div",{children:[y.jsx("div",{className:"manga-stat-label",children:"Reading Pace"}),y.jsx("div",{className:"manga-stat-value",children:t.months.reduce((h,f)=>h+f.count,0)})]}),y.jsx("div",{className:"manga-stat-sub",children:"Volumes finished in the last 12 months"})]}),y.jsx("div",{className:"manga-bar-chart",children:t.months.map(h=>y.jsxs("div",{className:"manga-bar",children:[y.jsx("div",{className:"manga-bar-fill",style:{height:`${h.count/l*100||0}%`}}),y.jsx("div",{className:"manga-bar-label",children:h.label}),h.count>0&&y.jsx("div",{className:"manga-bar-value",children:h.count})]},h.key))})]})]}),y.jsxs("div",{className:"manga-dashboard-grid",style:{marginTop:"14px",gridTemplateColumns:"minmax(0, 1.3fr) minmax(0, 1.7fr)"},children:[y.jsxs("div",{className:"manga-stat-card",children:[y.jsxs("div",{className:"manga-stat-header",children:[y.jsxs("div",{children:[y.jsx("div",{className:"manga-stat-label",children:"Ratings"}),y.jsx("div",{className:"manga-stat-value",children:Object.values(t.ratingBuckets).reduce((h,f)=>h+f,0)})]}),y.jsx("div",{className:"manga-stat-sub",children:"How youve scored your volumes"})]}),y.jsx("div",{className:"manga-bar-chart",children:Object.entries(t.ratingBuckets).sort((h,f)=>Number(f[0])-Number(h[0])).map(([h,f])=>y.jsxs("div",{className:"manga-bar",children:[y.jsx("div",{className:"manga-bar-fill",style:{height:`${f/i*100||0}%`}}),y.jsx("div",{className:"manga-bar-label",children:h}),f>0&&y.jsx("div",{className:"manga-bar-value",children:f})]},h))})]}),y.jsxs("div",{className:"manga-stat-card",children:[y.jsxs("div",{className:"manga-stat-header",children:[y.jsxs("div",{children:[y.jsx("div",{className:"manga-stat-label",children:"Top Publishers"}),y.jsx("div",{className:"manga-stat-value",children:t.topPublishers.reduce((h,f)=>h+f.count,0)})]}),y.jsx("div",{className:"manga-stat-sub",children:"Most common publishers in your library"})]}),t.topPublishers.length===0?y.jsx("div",{className:"manga-stat-sub",children:"No publisher data yet  add some volumes first."}):y.jsx("div",{className:"manga-bar-chart",children:t.topPublishers.map(h=>y.jsxs("div",{className:"manga-bar",children:[y.jsx("div",{className:"manga-bar-fill",style:{height:`${h.count/o*100||0}%`}}),y.jsx("div",{className:"manga-bar-label",children:h.name.length>8?`${h.name.slice(0,8)}`:h.name}),y.jsx("div",{className:"manga-bar-value",children:h.count})]},h.name))})]})]})]})}function DA(){const{admin:r}=Tl(),e=r,[t,i]=Y.useState("library"),[o,l]=Y.useState([]),[h,f]=Y.useState([]),[g,v]=Y.useState(!0),[E,I]=Y.useState(""),[S,L]=Y.useState(""),[z,K]=Y.useState(""),[F,H]=Y.useState(!1),[X,re]=Y.useState(()=>new Set),[te,xe]=Y.useState(null);async function ce(){const se=await jo(wi(Ut,"library")),q=[];se.forEach(oe=>{const B=oe.data();q.push({id:oe.id,title:B.title||"",authors:B.authors||"Unknown",publisher:B.publisher||"Unknown",demographic:B.demographic||"",genre:B.genre||"",subGenre:B.subGenre||"",date:B.date||"Unknown",cover:B.cover||"",isbn:B.isbn||"",pageCount:B.pageCount!==void 0&&B.pageCount!==null?B.pageCount:"",rating:B.rating!==void 0&&B.rating!==null?B.rating:"",amountPaid:B.amountPaid!==void 0&&B.amountPaid!==null?B.amountPaid:"",dateRead:B.dateRead||"",datePurchased:B.datePurchased||"",msrp:B.msrp!==void 0&&B.msrp!==null?B.msrp:"",specialType:B.specialType||"",specialVolumes:B.specialVolumes!==void 0&&B.specialVolumes!==null?B.specialVolumes:"",collectiblePrice:B.collectiblePrice!==void 0&&B.collectiblePrice!==null?B.collectiblePrice:"",read:!!B.read,amazonURL:B.amazonURL||"",kind:"library"})}),q.sort((oe,B)=>{const k=Wu(oe.title),G=Wu(B.title),fe=k.name.localeCompare(G.name);return fe!==0?fe:k.vol-G.vol}),l(q)}async function P(){const se=await jo(wi(Ut,"wishlist")),q=[];se.forEach(oe=>{const B=oe.data();q.push({id:oe.id,title:B.title||"",authors:B.authors||"Unknown",publisher:B.publisher||"Unknown",date:B.date||"Unknown",cover:B.cover||"",isbn:B.isbn||"",pageCount:B.pageCount!==void 0&&B.pageCount!==null?B.pageCount:"",rating:B.rating!==void 0&&B.rating!==null?B.rating:"",amountPaid:B.amountPaid!==void 0&&B.amountPaid!==null?B.amountPaid:"",specialType:B.specialType||"",specialVolumes:B.specialVolumes!==void 0&&B.specialVolumes!==null?B.specialVolumes:"",collectiblePrice:B.collectiblePrice!==void 0&&B.collectiblePrice!==null?B.collectiblePrice:"",amazonURL:B.amazonURL||"",kind:"wishlist"})}),q.sort((oe,B)=>{const k=Wu(oe.title),G=Wu(B.title),fe=k.name.localeCompare(G.name);return fe!==0?fe:k.vol-G.vol}),f(q)}Y.useEffect(()=>{let se=!1;async function q(){v(!0),I("");try{await Promise.all([ce(),P()]),se||v(!1)}catch(oe){console.error(oe),se||(I("Failed to load manga data from Firestore."),v(!1))}}return q(),()=>{se=!0}},[]);const x=Y.useMemo(()=>{const se=S.trim().toLowerCase();return se?o.filter(q=>[q.title,q.authors,q.publisher,q.isbn,q.date,String(q.pageCount??"")].join(" ").toLowerCase().includes(se)):o},[o,S]),A=Y.useMemo(()=>{const se=z.trim().toLowerCase();return se?h.filter(q=>[q.title,q.authors,q.publisher,q.isbn,q.date,String(q.pageCount??"")].join(" ").toLowerCase().includes(se)):h},[h,z]);function b(){e&&(H(se=>!se),re(new Set))}function V(se){re(q=>{const oe=new Set(q);return oe.has(se)?oe.delete(se):oe.add(se),oe})}async function O(se){if(!e){alert("Multi-select actions require admin access.");return}const q=Array.from(X);if(!q.length){alert("Select at least one item first.");return}const oe=t==="library";try{if(se==="move")if(oe){if(!window.confirm(`Move ${q.length} item(s) to Wishlist?`))return;for(const B of q){const k=o.find(fe=>fe.id===B);if(!k)continue;const G={title:k.title,authors:k.authors,publisher:k.publisher,date:k.date,isbn:k.isbn,pageCount:k.pageCount||"",cover:k.cover,amazonURL:k.amazonURL||"",specialType:k.specialType||"",specialVolumes:k.specialVolumes||"",collectiblePrice:k.collectiblePrice||"",rating:k.rating||""};await ff(wi(Ut,"wishlist"),G),await tc(Nr(Ut,"library",B))}}else{if(!window.confirm(`Move ${q.length} item(s) to Library?`))return;for(const B of q){const k=h.find(fe=>fe.id===B);if(!k)continue;const G={title:k.title,authors:k.authors,publisher:k.publisher,date:k.date,isbn:k.isbn,pageCount:k.pageCount||"",cover:k.cover,amountPaid:"",read:!1,rating:"",specialType:k.specialType||"",specialVolumes:k.specialVolumes||"",collectiblePrice:k.collectiblePrice||""};await ff(wi(Ut,"library"),G),await tc(Nr(Ut,"wishlist",B))}}else if(se==="markRead"&&oe)for(const B of q)await cv(Nr(Ut,"library",B),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(se==="markUnread"&&oe)for(const B of q)await cv(Nr(Ut,"library",B),{read:!1,dateRead:"",rating:""});else if(se==="delete"){const B=oe?"library":"wishlist";if(!window.confirm(`Delete ${q.length} item(s) from ${oe?"Library":"Wishlist"}?`))return;for(const k of q)await tc(Nr(Ut,B,k))}await Promise.all([ce(),P()]),re(new Set),H(!1)}catch(B){console.error(B),alert("Failed to apply multi-select action.")}}function R(se){xe(se)}function $e(){xe(null)}function it(se){const q=X.has(se.id),oe=se.kind==="library",B=()=>{F&&e?V(se.id):R(se)};return y.jsxs("div",{className:"manga-card"+(se.read&&oe?" read":"")+(q?" multiselect-selected":""),onClick:B,children:[y.jsx("div",{className:"manga-card-cover-wrap",children:y.jsx("img",{src:se.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),y.jsxs("div",{className:"manga-card-body",children:[y.jsx("div",{className:"manga-card-title",children:se.title||"Untitled"}),y.jsxs("div",{className:"manga-card-meta",children:[se.authors&&se.authors!=="Unknown"&&y.jsxs(y.Fragment,{children:[se.authors,y.jsx("br",{})]}),se.publisher&&se.publisher!=="Unknown"&&y.jsxs(y.Fragment,{children:[se.publisher,y.jsx("br",{})]}),se.date&&se.date!=="Unknown"&&se.date]}),se.isbn&&y.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",se.isbn]})]})]},se.id)}const nt=t==="library"?x:A;return y.jsxs("div",{className:"manga-page",children:[y.jsx("header",{className:"manga-header",children:y.jsxs("div",{children:[y.jsxs("div",{className:"manga-header-title",children:["Tyler's Manga Library",y.jsx("span",{className:"manga-badge",children:"Firestore synced"})]}),y.jsx("div",{className:"manga-header-sub",children:"Library & Wishlist are managed via Firestore. This React port reuses the same collections as your original index.html."})]})}),y.jsxs("div",{className:"manga-tabs",children:[y.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{i("library"),H(!1),re(new Set)},children:"Library"}),y.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{i("wishlist"),H(!1),re(new Set)},children:"Wishlist"}),y.jsx("button",{className:"manga-tab-btn"+(t==="dashboard"?" active":""),onClick:()=>{i("dashboard"),H(!1),re(new Set)},children:"Manga Dashboard"})]}),t!=="dashboard"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"manga-toolbar",children:[y.jsxs("div",{className:"manga-toolbar-left",children:[y.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN":"Search wishlist",value:t==="library"?S:z,onChange:se=>t==="library"?L(se.target.value):K(se.target.value)}),y.jsx("div",{className:"manga-counter",children:t==="library"?y.jsxs(y.Fragment,{children:["Library: ",x.length," / ",o.length]}):y.jsxs(y.Fragment,{children:["Wishlist: ",A.length," / ",h.length]})})]}),y.jsx("div",{className:"manga-toolbar-right",children:e&&y.jsx("button",{className:"manga-btn secondary"+(F?" active":""),onClick:b,children:F?"Exit Multi-select":"Multi-select"})})]}),e&&F&&y.jsxs("div",{className:"manga-multiselect-bar",children:[y.jsxs("span",{children:["Selected: ",y.jsx("strong",{children:X.size})]}),y.jsxs("button",{className:"manga-btn secondary",onClick:()=>O("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&y.jsxs(y.Fragment,{children:[y.jsx("button",{className:"manga-btn",onClick:()=>O("markRead"),children:"Mark Read"}),y.jsx("button",{className:"manga-btn secondary",onClick:()=>O("markUnread"),children:"Mark Unread"})]}),y.jsx("button",{className:"manga-btn danger",onClick:()=>O("delete"),children:"Delete"})]})]}),g?y.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore"}):E?y.jsx("div",{className:"manga-empty-state",children:E}):t==="dashboard"?y.jsx(bA,{library:o,wishlist:h}):nt.length===0?y.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):y.jsx("div",{className:"manga-grid",children:nt.map(se=>it(se))}),te&&y.jsx("div",{className:"manga-modal-backdrop visible",onClick:se=>{se.target===se.currentTarget&&$e()},children:y.jsxs("div",{className:"manga-modal",children:[y.jsx("div",{className:"manga-modal-cover-wrap",children:y.jsx("img",{src:te.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),y.jsxs("div",{className:"manga-modal-body",children:[y.jsxs("div",{className:"manga-modal-header",children:[y.jsx("div",{className:"manga-modal-title",children:te.title||"Untitled"}),y.jsx("button",{className:"manga-modal-close",onClick:$e,type:"button",children:"Close"})]}),y.jsxs("div",{className:"manga-modal-meta",children:[te.authors&&te.authors!=="Unknown"&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{children:"Author(s):"})," ",te.authors,y.jsx("br",{})]}),te.publisher&&te.publisher!=="Unknown"&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{children:"Publisher:"})," ",te.publisher,y.jsx("br",{})]}),te.date&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{children:"Release:"})," ",te.date,y.jsx("br",{})]}),te.isbn&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{children:"ISBN:"})," ",te.isbn,y.jsx("br",{})]})]}),y.jsxs("div",{className:"manga-modal-details",children:[te.pageCount&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{children:"Pages:"})," ",te.pageCount,y.jsx("br",{})]}),te.rating&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{children:"Rating:"})," ",te.rating,"/10",y.jsx("br",{})]}),te.amountPaid&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{children:"Amount Paid:"})," $",te.amountPaid,y.jsx("br",{})]}),te.msrp&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{children:"MSRP:"})," $",te.msrp,y.jsx("br",{})]}),te.collectiblePrice&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{children:"Collectible:"})," $",te.collectiblePrice,y.jsx("br",{})]}),te.read&&te.dateRead&&y.jsxs(y.Fragment,{children:[y.jsx("strong",{children:"Date Read:"})," ",te.dateRead,y.jsx("br",{})]}),te.amazonURL&&y.jsx("div",{style:{marginTop:"6px"},children:y.jsx("a",{href:te.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),y.jsx("div",{className:"manga-modal-footer",children:y.jsx("div",{children:te.kind==="library"&&te.read?"Marked as read in your library.":te.kind==="library"?"In your library (unread).":"Wishlist item  not in library yet."})})]})]})})]})}async function VA(){const e=await fetch("https://imokmalworker.imokissick.workers.dev/");if(!e.ok)throw new Error("Failed to fetch MAL list");return e.json()}function OA(){const[r,e]=Y.useState([]),[t,i]=Y.useState([]),[o,l]=Y.useState(""),[h,f]=Y.useState("all"),[g,v]=Y.useState(!0),[E,I]=Y.useState("");return Y.useEffect(()=>{async function S(){try{const L=await VA();e(L),i(L)}catch(L){console.error(L),I("Failed to load data from MAL.")}finally{v(!1)}}S()},[]),Y.useEffect(()=>{let S=[...r];if(h!=="all"&&(S=S.filter(L=>(L.status||"").toLowerCase()===h)),o){const L=o.toLowerCase();S=S.filter(z=>(z.title||"").toLowerCase().includes(L))}i(S)},[r,h,o]),y.jsxs("main",{className:"page",children:[y.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px"},children:[y.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"Anime Library"}),y.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Read-only mirror of your MyAnimeList entries."})]}),y.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"12px"},children:[y.jsx("input",{type:"text",placeholder:"Search anime by title",value:o,onChange:S=>l(S.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid var(--border-soft)",background:"rgba(43,15,29,0.93)",color:"#fff",fontSize:"0.9rem"}}),y.jsxs("select",{value:h,onChange:S=>f(S.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid var(--border-soft)",background:"rgba(43,15,29,0.93)",color:"#fff",fontSize:"0.9rem"},children:[y.jsx("option",{value:"all",children:"All statuses"}),y.jsx("option",{value:"watching",children:"Watching"}),y.jsx("option",{value:"completed",children:"Completed"}),y.jsx("option",{value:"on_hold",children:"On Hold"}),y.jsx("option",{value:"dropped",children:"Dropped"}),y.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"})]})]}),g&&y.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading anime list from MAL"}),E&&y.jsx("p",{style:{marginTop:"20px",color:"#ff8a80"},children:E}),!g&&!E&&y.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",marginTop:"20px"},children:t.map(S=>y.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"16px",border:"1px solid rgba(255,182,193,0.16)",boxShadow:"var(--shadow-soft)",fontSize:"0.85rem",padding:"8px 8px 10px"},children:[y.jsx("div",{style:{fontWeight:600,color:"#ffc0cb",marginBottom:"4px"},children:S.title}),y.jsx("div",{style:{color:"var(--text-soft)"},children:S.episodes?`${S.episodes} eps`:"Episodes: ?"}),y.jsxs("div",{style:{color:"var(--text-soft)",fontSize:"0.78rem",marginTop:"4px"},children:["Status: ",S.status]})]},S.id))})]})}function LA(){const{admin:r}=Tl(),[e,t]=Y.useState([]),[i,o]=Y.useState(!0),[l,h]=Y.useState(""),[f,g]=Y.useState("all"),[v,E]=Y.useState({game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:""});Y.useEffect(()=>{async function H(){try{const X=wi(Ut,"tcg"),re=await jo(X),te=[];re.forEach(xe=>te.push({id:xe.id,...xe.data()})),t(te)}catch(X){console.error("Error loading TCG:",X)}finally{o(!1)}}H()},[]);const I=e.filter(H=>{if(f!=="all"&&H.game!==f)return!1;if(!l)return!0;const X=l.toLowerCase();return(H.name||"").toLowerCase().includes(X)||(H.setName||"").toLowerCase().includes(X)||(H.number||"").toLowerCase().includes(X)}),S=e.reduce((H,X)=>{const re=Number(X.quantity||1),te=Number(X.pricePaid||0),xe=Number(X.estimatedValue||0);return H.totalCards+=re,H.totalPaid+=re*te,H.totalValue+=re*xe,X.game==="pokemon"&&(H.pokemon+=re),X.game==="onepiece"&&(H.onepiece+=re),H},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),L=S.totalValue-S.totalPaid,z=(H,X)=>{E(re=>({...re,[H]:X}))},K=async()=>{if(!r)return;if(!v.name.trim()){alert("Card name is required.");return}const H={game:v.game,name:v.name.trim(),setName:v.setName.trim(),number:v.number.trim(),rarity:v.rarity.trim(),condition:v.condition.trim(),quantity:Number(v.quantity||1),pricePaid:Number(v.pricePaid||0),estimatedValue:Number(v.estimatedValue||0)};try{const X=wi(Ut,"tcg");await ff(X,H),E({game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:""});const re=await jo(X),te=[];re.forEach(xe=>te.push({id:xe.id,...xe.data()})),t(te)}catch(X){console.error("Error adding card:",X),alert("Failed to save card.")}},F=async H=>{if(r&&window.confirm("Delete this card?"))try{await tc(Nr(Ut,"tcg",H)),t(X=>X.filter(re=>re.id!==H))}catch(X){console.error("Delete error:",X),alert("Failed to delete card.")}};return y.jsxs("main",{className:"page",children:[y.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px"},children:[y.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"TCG Collection"}),y.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Pokmon & One Piece TCG cards with quantities, prices, and collection value."})]}),y.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[y.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),y.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.totalCards})]}),y.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),y.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",S.totalPaid.toFixed(2)]})]}),y.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),y.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",S.totalValue.toFixed(2)]})]}),y.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),y.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:L>=0?"#00e676":"#ff8a80"},children:[L>=0?"+":"-","$",Math.abs(L).toFixed(2)]})]}),y.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokmon cards"}),y.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.pokemon})]}),y.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),y.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.onepiece})]})]}),y.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[y.jsx("input",{type:"text",placeholder:"Search by name, set, or number",value:l,onChange:H=>h(H.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),y.jsxs("select",{value:f,onChange:H=>g(H.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[y.jsx("option",{value:"all",children:"All games"}),y.jsx("option",{value:"pokemon",children:"Pokmon only"}),y.jsx("option",{value:"onepiece",children:"One Piece only"})]})]}),r&&y.jsxs("section",{className:"card",style:{marginTop:"16px",borderStyle:"dashed",borderColor:"rgba(255,182,193,0.5)"},children:[y.jsx("h2",{style:{marginTop:0,marginBottom:"10px",fontSize:"1.05rem",color:"#ffb6c1"},children:"Add card (admin)"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[y.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",y.jsxs("select",{value:v.game,onChange:H=>z("game",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[y.jsx("option",{value:"pokemon",children:"Pokmon"}),y.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),y.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",y.jsx("input",{type:"text",value:v.name,onChange:H=>z("name",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),y.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",y.jsx("input",{type:"text",value:v.setName,onChange:H=>z("setName",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),y.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",y.jsx("input",{type:"text",value:v.number,onChange:H=>z("number",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),y.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",y.jsx("input",{type:"text",value:v.rarity,onChange:H=>z("rarity",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),y.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",y.jsx("input",{type:"text",value:v.condition,onChange:H=>z("condition",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),y.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",y.jsx("input",{type:"number",min:"1",value:v.quantity,onChange:H=>z("quantity",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),y.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",y.jsx("input",{type:"number",step:"0.01",min:"0",value:v.pricePaid,onChange:H=>z("pricePaid",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),y.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",y.jsx("input",{type:"number",step:"0.01",min:"0",value:v.estimatedValue,onChange:H=>z("estimatedValue",H.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]}),y.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"10px"},children:y.jsx("button",{onClick:K,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})})]}),i?y.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection"}):I.length===0?y.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):y.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:I.map(H=>{const X=Number(H.quantity||1),re=X*Number(H.pricePaid||0),te=X*Number(H.estimatedValue||0);return y.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem"},children:[y.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:H.name||"Unnamed card"}),y.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:H.setName||""}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[y.jsxs("span",{children:["#",H.number||""]}),y.jsx("span",{children:H.rarity||""})]}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[y.jsxs("span",{children:["Cond: ",H.condition||"N/A"]}),y.jsxs("span",{children:["Qty: ",X]})]}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[y.jsxs("span",{children:["Paid: $",re.toFixed(2)]}),y.jsxs("span",{children:["Value: $",te.toFixed(2)]})]}),y.jsxs("div",{style:{marginTop:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem"},children:H.game==="pokemon"?"Pokmon":"One Piece"}),r&&y.jsx("button",{onClick:()=>F(H.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})]})]},H.id)})})]})}function Ic(r){if(!r)return null;if(r instanceof Date)return r;if(r&&typeof r.toDate=="function")return r.toDate();const e=String(r).trim();if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t}function jA(r){const e=(r.seriesKey||r.series||r.Series||r.title||r.Title||"").trim();return e?e.replace(/\bvolume\s+\d+.*$/i,"").replace(/\bvol\.?\s+\d+.*$/i,"").trim().toLowerCase():""}function MA(r){const e=new Map;for(const t of r){const i=jA(t)||t.id;if(!e.has(i)){const g=(t.series||t.Series||t.title||t.Title||"Unknown Series").trim();e.set(i,{key:i,title:g,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const o=e.get(i);o.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;o.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(o.readVolumes+=1,o.readPages+=l);const f=Number(t.rating||t.Rating);!isNaN(f)&&f>0&&(o.ratingSum+=f,o.ratingCount+=1)}return e}function Eo(r,e,t=5){const i=new Map;for(const o of r.values()){const l=(o[e]||"").trim();if(!l)continue;const h=l.split(/[\/,]/).map(f=>f.trim()).filter(Boolean);for(const f of h)i.set(f,(i.get(f)||0)+1)}return[...i.entries()].sort((o,l)=>l[1]-o[1]).slice(0,t).map(([o,l])=>({name:o,count:l}))}function FA(r){const e=new Date,t=[];for(let i=11;i>=0;i--){const o=new Date(e.getFullYear(),e.getMonth()-i,1),l=o.toLocaleString("default",{month:"short"});t.push({key:`${o.getFullYear()}-${o.getMonth()}`,label:l,year:o.getFullYear(),month:o.getMonth(),value:0})}for(const i of r){const o=Ic(i.dateRead||i.DateRead);if(!o)continue;const l=`${o.getFullYear()}-${o.getMonth()}`,h=t.findIndex(f=>f.key===l);h!==-1&&(t[h].value+=1)}return t}function UA(r,e=8){const t=[...r.values()];t.sort((l,h)=>h.volumes-l.volumes);const i=t.slice(0,e),o=i.reduce((l,h)=>Math.max(l,h.volumes),0)||1;return i.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/o}))}function zA(r){const e=[];for(const t of r){const i=Ic(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!i)continue;const o=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:i,title:o})}return e.sort((t,i)=>t.date-i.date),e}function BA(r){const e=new Date;for(const t of r)if(t.date>=e)return t;return r[r.length-1]||null}function $A(r){let e=0,t=0;for(const i of r){const o=Ic(i.datePurchased||i.DatePurchased),l=Ic(i.dateRead||i.DateRead);if(!o||!l)continue;const h=l-o;h<=0||(e+=h/(1e3*60*60*24),t+=1)}return t?e/t:null}function WA(r){let e=0,t=0;for(const i of r){const o=Number(i.msrp||i.MSRP||0)||0,l=Number(i.amountPaid||i.AmountPaid||i.pricePaid||0)||o||0;e+=o,t+=l}return{msrpTotal:e,paidTotal:t}}function HA(r){let e=0,t=0;for(const i of r){const o=Number(i.pages||i.Pages||i.pageCount||0)||0;e+=o,(!!i.read||i.status==="Read"||i.Read===!0)&&(t+=o)}return{total:e,read:t}}function qA(r){let e=0,t=0;for(const i of r.values())i.ratingCount>0&&(e+=i.ratingSum/i.ratingCount,t+=1);return t?e/t:null}function GA({data:r}){if(!r||!r.length)return y.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=r.reduce((f,g)=>Math.max(f,g.value),0)||1,t=100,i=100,o=t/Math.max(r.length-1,1),l=r.map((f,g)=>{const v=g*o,E=i-f.value/e*80-10;return{...f,x:v,y:E}}),h=l.map((f,g)=>g===0?`M ${f.x} ${f.y}`:`L ${f.x} ${f.y}`).join(" ");return y.jsx("div",{className:"line-chart",children:y.jsxs("svg",{viewBox:"0 0 100 100",children:[[0,.25,.5,.75,1].map((f,g)=>{const v=90-f*80;return y.jsx("line",{className:"line-grid",x1:"0",x2:"100",y1:v,y2:v},g)}),y.jsx("path",{className:"line-path",d:h}),l.map((f,g)=>y.jsxs("g",{children:[y.jsx("circle",{className:"line-point",cx:f.x,cy:f.y,r:"1.5"}),y.jsx("text",{className:"line-value",x:f.x,y:f.y-3,children:f.value}),y.jsx("text",{className:"line-label",x:f.x,y:"96",children:f.label})]},g))]})})}function KA({data:r}){return!r||!r.length?y.jsx("div",{className:"bar-chart empty",children:"Not enough data yet."}):y.jsx("div",{className:"bar-chart",children:r.map((e,t)=>y.jsxs("div",{className:"bar",children:[y.jsx("div",{className:"bar-fill",style:{height:`${Math.max(e.pct*100,6)}%`}}),y.jsx("div",{className:"bar-value",children:e.value}),y.jsx("div",{className:"bar-label",children:e.label.length>12?e.label.slice(0,11)+"":e.label})]},t))})}function QA(r,e){const t=r.getFullYear(),i=r.getMonth(),l=new Date(t,i,1).getDay(),h=new Date(t,i+1,0).getDate(),f=new Map;for(const v of e){const E=v.date;if(E.getFullYear()===t&&E.getMonth()===i){const I=E.getDate();f.has(I)||f.set(I,[]),f.get(I).push(v)}}const g=[];for(let v=0;v<l;v++)g.push({type:"pad"});for(let v=1;v<=h;v++)g.push({type:"day",day:v,releases:f.get(v)||[]});return g}function YA(){const{user:r,admin:e}=Tl(),[t,i]=Y.useState([]),[o,l]=Y.useState([]),[h,f]=Y.useState(!0),[g,v]=Y.useState(null),[E,I]=Y.useState(!1),[S,L]=Y.useState(()=>new Date),[z,K]=Y.useState({open:!1,type:null});if(!r||!e)return y.jsx("div",{className:"page dashboard-page",children:y.jsxs("div",{className:"dashboard-locked",children:[y.jsx("h1",{children:"Dashboard"}),y.jsx("p",{children:"This area is restricted to admin accounts."})]})});Y.useEffect(()=>{let ae=!1;async function ue(){try{f(!0);const[_e,Ce]=await Promise.all([jo(wi(Ut,"library")),jo(wi(Ut,"wishlist"))]);if(ae)return;i(_e.docs.map(ke=>({id:ke.id,...ke.data()}))),l(Ce.docs.map(ke=>({id:ke.id,...ke.data()}))),v(null)}catch(_e){console.error(_e),ae||v("Failed to load dashboard data.")}finally{ae||f(!1)}}return ue(),()=>{ae=!0}},[]);const F=Y.useMemo(()=>{if(!t.length&&!o.length)return null;const ae=t.length,ue=t.filter(sn=>!!sn.read||sn.status==="Read"||sn.Read===!0).length,_e=ae-ue,Ce=o.length,ke=MA(t),lt=FA(t),Rn=UA(ke),pr=zA(o),Gn=BA(pr),mr=$A(t),Br=WA(t),Ui=HA(t),zi=qA(ke),ks=Eo(ke,"publisher",5),$r=Eo(ke,"genre",5),An=Eo(ke,"demographic",5);return{totalLibrary:ae,readCount:ue,unreadCount:_e,wishlistCount:Ce,seriesMap:ke,readingTrend:lt,topSeriesBars:Rn,releases:pr,nextRelease:Gn,avgDays:mr,collectionValue:Br,pages:Ui,avgRating:zi,topPublishers:ks,topGenres:$r,topDemographics:An}},[t,o]);if(h||!F)return y.jsx("div",{className:"page dashboard-page",children:y.jsxs("div",{className:"dashboard-loading",children:[y.jsx("h1",{children:"Dashboard"}),g?y.jsx("p",{className:"error",children:g}):y.jsx("p",{children:"Loading stats"})]})});const{totalLibrary:H,readCount:X,unreadCount:re,wishlistCount:te,seriesMap:xe,readingTrend:ce,topSeriesBars:P,releases:x,nextRelease:A,avgDays:b,collectionValue:V,pages:O,avgRating:R,topPublishers:$e,topGenres:it,topDemographics:nt}=F,se=new Date,q=A?A.date:null;let oe="";if(q){const ae=q-se,ue=Math.round(ae/(1e3*60*60*24));ue<0?oe=`${Math.abs(ue)} day${Math.abs(ue)===1?"":"s"} ago`:ue===0?oe="Today":oe=`In ${ue} day${ue===1?"":"s"}`}function B(){if(q)L(new Date(q.getFullYear(),q.getMonth(),1));else if(x.length){const ae=x[0].date;L(new Date(ae.getFullYear(),ae.getMonth(),1))}I(!0)}function k(ae){K({open:!0,type:ae})}function G(){K({open:!1,type:null})}const fe=QA(S,x);function Ne(){const ae=z.type;if(!ae)return null;if(ae==="publishers"){const ue=[...Eo(xe,"publisher",100)];return y.jsxs(y.Fragment,{children:[y.jsx("h3",{children:"Top Publishers by Series"}),ue.length===0?y.jsx("p",{children:"No publisher data yet."}):y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"#"}),y.jsx("th",{children:"Publisher"}),y.jsx("th",{children:"Series Count"})]})}),y.jsx("tbody",{children:ue.map((_e,Ce)=>y.jsxs("tr",{children:[y.jsx("td",{children:Ce+1}),y.jsx("td",{children:_e.name}),y.jsx("td",{children:_e.count})]},_e.name+Ce))})]})]})}if(ae==="genres"){const ue=[...Eo(xe,"genre",100)];return y.jsxs(y.Fragment,{children:[y.jsx("h3",{children:"Top Genres by Series"}),ue.length===0?y.jsx("p",{children:"No genre data yet."}):y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"#"}),y.jsx("th",{children:"Genre"}),y.jsx("th",{children:"Series Count"})]})}),y.jsx("tbody",{children:ue.map((_e,Ce)=>y.jsxs("tr",{children:[y.jsx("td",{children:Ce+1}),y.jsx("td",{children:_e.name}),y.jsx("td",{children:_e.count})]},_e.name+Ce))})]})]})}if(ae==="demographics"){const ue=[...Eo(xe,"demographic",100)];return y.jsxs(y.Fragment,{children:[y.jsx("h3",{children:"Top Demographics by Series"}),ue.length===0?y.jsx("p",{children:"No demographic data yet."}):y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"#"}),y.jsx("th",{children:"Demographic"}),y.jsx("th",{children:"Series Count"})]})}),y.jsx("tbody",{children:ue.map((_e,Ce)=>y.jsxs("tr",{children:[y.jsx("td",{children:Ce+1}),y.jsx("td",{children:_e.name}),y.jsx("td",{children:_e.count})]},_e.name+Ce))})]})]})}if(ae==="timeToRead")return y.jsxs(y.Fragment,{children:[y.jsx("h3",{children:"Average Time From Purchase to Read"}),b==null?y.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):y.jsxs("p",{children:["On average, it takes"," ",y.jsxs("strong",{children:[b.toFixed(1)," days"]})," from purchase to finishing a volume."]})]});if(ae==="collectionValue"){const{msrpTotal:ue,paidTotal:_e}=V,Ce=ue-_e,ke=ue>0?(_e/ue*100).toFixed(1):"";return y.jsxs(y.Fragment,{children:[y.jsx("h3",{children:"Collection Value Breakdown"}),y.jsx("table",{children:y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("th",{children:"Total MSRP"}),y.jsxs("td",{children:["$",ue.toFixed(2)]})]}),y.jsxs("tr",{children:[y.jsx("th",{children:"Total Paid"}),y.jsxs("td",{children:["$",_e.toFixed(2)]})]}),y.jsxs("tr",{children:[y.jsx("th",{children:"Difference"}),y.jsxs("td",{children:["$",Ce.toFixed(2)]})]}),y.jsxs("tr",{children:[y.jsx("th",{children:"Paid vs MSRP"}),y.jsx("td",{children:ke===""?"":`${ke}%`})]})]})})]})}return ae==="pages"?y.jsxs(y.Fragment,{children:[y.jsx("h3",{children:"Pages Read vs Total"}),y.jsx("table",{children:y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("th",{children:"Total Pages"}),y.jsx("td",{children:O.total.toLocaleString()})]}),y.jsxs("tr",{children:[y.jsx("th",{children:"Pages Read"}),y.jsx("td",{children:O.read.toLocaleString()})]}),y.jsxs("tr",{children:[y.jsx("th",{children:"Completion"}),y.jsx("td",{children:O.total?`${(O.read/O.total*100).toFixed(1)}%`:""})]})]})})]}):ae==="ratings"?y.jsxs(y.Fragment,{children:[y.jsx("h3",{children:"Ratings Overview"}),R==null?y.jsx("p",{children:"No ratings have been recorded yet."}):y.jsxs("p",{children:["Average series rating across rated series is"," ",y.jsx("strong",{children:R.toFixed(2)}),"."]})]}):ae==="releases"?y.jsxs(y.Fragment,{children:[y.jsx("h3",{children:"Wishlist Releases"}),x.length===0?y.jsx("p",{children:"No wishlist releases found."}):y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Date"}),y.jsx("th",{children:"Title"})]})}),y.jsx("tbody",{children:x.map((ue,_e)=>y.jsxs("tr",{children:[y.jsx("td",{children:ue.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),y.jsx("td",{children:ue.title})]},_e))})]})]}):null}return y.jsxs("div",{className:"page dashboard-page",children:[y.jsx("header",{className:"dashboard-header",children:y.jsxs("div",{children:[y.jsx("h1",{children:"Dashboard"}),y.jsx("p",{className:"dashboard-sub",children:"Admin-only analytics for your manga library and wishlist."})]})}),y.jsx("section",{id:"dashboardSection",className:"page-section active",children:y.jsxs("div",{className:"dashboard-grid",children:[y.jsxs("div",{className:"stat-card mini",children:[y.jsx("h3",{children:"Total Library"}),y.jsx("div",{className:"stat-value",children:H}),y.jsx("div",{className:"stat-sub",children:"Volumes in your Firestore library."})]}),y.jsxs("div",{className:"stat-card mini",children:[y.jsx("h3",{children:"Read"}),y.jsxs("div",{className:"stat-value",children:[X," / ",H]}),y.jsx("div",{className:"stat-sub",children:H?`${(X/H*100).toFixed(1)}% complete`:""})]}),y.jsxs("div",{className:"stat-card mini",children:[y.jsx("h3",{children:"Unread"}),y.jsx("div",{className:"stat-value",children:re}),y.jsx("div",{className:"stat-sub",children:"Volumes waiting to be read."})]}),y.jsxs("div",{className:"stat-card mini clickable",onClick:()=>{B(),k("releases")},children:[y.jsx("h3",{children:"Next Wishlist Release"}),y.jsx("div",{className:"stat-value next-release",children:A?A.title:"No upcoming releases"}),y.jsxs("div",{className:"stat-sub",children:[q?q.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"",y.jsx("br",{}),y.jsx("span",{id:"statNextCountdown",children:oe})]})]}),y.jsxs("div",{className:"stat-card wide",children:[y.jsx("h3",{children:"Reading Trend (Last 12 Months)"}),y.jsx(GA,{data:ce})]}),y.jsxs("div",{className:"stat-card wide",children:[y.jsx("h3",{children:"Top Series by Volume Count"}),y.jsx(KA,{data:P})]}),y.jsxs("div",{className:"stat-card tall clickable",onClick:()=>k("genres"),children:[y.jsx("h3",{children:"Top Genres (by Series)"}),y.jsx("div",{className:"stat-list",children:it.length?it.map((ae,ue)=>y.jsxs("div",{className:"stat-list-row",children:[y.jsx("span",{className:"stat-rank",children:ue+1}),y.jsx("span",{className:"stat-name",children:ae.name}),y.jsx("span",{className:"stat-count",children:ae.count})]},ae.name)):y.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),y.jsxs("div",{className:"stat-card tall clickable",onClick:()=>k("publishers"),children:[y.jsx("h3",{children:"Top Publishers (by Series)"}),y.jsx("div",{className:"stat-list",children:$e.length?$e.map((ae,ue)=>y.jsxs("div",{className:"stat-list-row",children:[y.jsx("span",{className:"stat-rank",children:ue+1}),y.jsx("span",{className:"stat-name",children:ae.name}),y.jsx("span",{className:"stat-count",children:ae.count})]},ae.name)):y.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),y.jsxs("div",{className:"stat-card tall clickable",onClick:()=>k("demographics"),children:[y.jsx("h3",{children:"Top Demographics (by Series)"}),y.jsx("div",{className:"stat-list",children:nt.length?nt.map((ae,ue)=>y.jsxs("div",{className:"stat-list-row",children:[y.jsx("span",{className:"stat-rank",children:ue+1}),y.jsx("span",{className:"stat-name",children:ae.name}),y.jsx("span",{className:"stat-count",children:ae.count})]},ae.name)):y.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),y.jsxs("div",{className:"stat-card clickable",onClick:()=>k("timeToRead"),children:[y.jsx("h3",{children:"Avg Time to Read"}),y.jsx("div",{className:"stat-value",children:b==null?"":`${b.toFixed(1)} days`}),y.jsx("div",{className:"stat-sub",children:"Based on purchase + read dates."})]}),y.jsxs("div",{className:"stat-card clickable",onClick:()=>k("collectionValue"),children:[y.jsx("h3",{children:"Collection Value"}),y.jsxs("div",{className:"stat-value stat-msrp",children:["$",V.msrpTotal.toFixed(2)]}),y.jsxs("div",{className:"stat-sub",children:["Paid: $",V.paidTotal.toFixed(2)]})]}),y.jsxs("div",{className:"stat-card clickable",onClick:()=>k("pages"),children:[y.jsx("h3",{children:"Pages Read / Total"}),y.jsxs("div",{className:"stat-value",children:[O.read.toLocaleString()," /"," ",O.total.toLocaleString()]}),y.jsx("div",{className:"stat-sub",children:O.total?`${(O.read/O.total*100).toFixed(1)}%`:""})]}),y.jsxs("div",{className:"stat-card clickable",onClick:()=>k("ratings"),children:[y.jsx("h3",{children:"Average Rating"}),y.jsx("div",{className:"stat-value",children:R==null?"":R.toFixed(2)}),y.jsx("div",{className:"stat-sub",children:"Averaged across rated series."})]})]})}),E&&y.jsx("div",{id:"calendarOverlay",onClick:()=>I(!1),children:y.jsxs("div",{id:"calendarCard",onClick:ae=>ae.stopPropagation(),children:[y.jsxs("div",{className:"calendar-header",children:[y.jsx("div",{className:"calendar-title",children:S.toLocaleString(void 0,{month:"long",year:"numeric"})}),y.jsxs("div",{className:"calendar-nav",children:[y.jsx("button",{className:"calendar-nav-btn",onClick:()=>L(new Date(S.getFullYear(),S.getMonth()-1,1)),children:""}),y.jsx("button",{className:"calendar-nav-btn",onClick:()=>L(new Date(S.getFullYear(),S.getMonth()+1,1)),children:""})]})]}),y.jsxs("div",{className:"calendar-weekdays",children:[y.jsx("div",{children:"Sun"}),y.jsx("div",{children:"Mon"}),y.jsx("div",{children:"Tue"}),y.jsx("div",{children:"Wed"}),y.jsx("div",{children:"Thu"}),y.jsx("div",{children:"Fri"}),y.jsx("div",{children:"Sat"})]}),y.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:fe.map((ae,ue)=>ae.type==="pad"?y.jsx("div",{className:"calendar-day pad"},ue):y.jsxs("div",{className:"calendar-day",children:[y.jsx("div",{className:"day-num",children:ae.day}),y.jsxs("div",{className:"calendar-releases",children:[ae.releases.slice(0,2).map((_e,Ce)=>y.jsx("div",{className:"calendar-release",title:_e.title,children:_e.title},Ce)),ae.releases.length>2&&y.jsxs("button",{className:"calendar-more-btn",children:["+",ae.releases.length-2," more"]})]})]},ue))}),!x.length&&y.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),y.jsx("button",{id:"calendarClose",onClick:()=>I(!1),children:""})]})}),z.open&&y.jsx("div",{id:"statDetailOverlay",onClick:G,children:y.jsxs("div",{id:"statDetailCard",onClick:ae=>ae.stopPropagation(),children:[y.jsx("button",{id:"statDetailClose",onClick:G,children:""}),y.jsxs("h2",{id:"statDetailTitle",children:[z.type==="publishers"&&"Top Publishers",z.type==="genres"&&"Top Genres",z.type==="demographics"&&"Top Demographics",z.type==="timeToRead"&&"Avg Time From Purchase to Read",z.type==="collectionValue"&&"Collection Value",z.type==="pages"&&"Pages Read vs Total",z.type==="ratings"&&"Ratings",z.type==="releases"&&"Wishlist Releases"]}),y.jsx("div",{id:"statDetailBody",children:Ne()})]})})]})}function XA(){const r=vf(),{user:e}=Tl();e&&r("/");async function t(){try{const i=new or;await __(Ri,i),r("/")}catch(i){console.error(i),alert("Google Sign-In failed.")}}return y.jsx("div",{className:"signin-page",children:y.jsxs("div",{className:"signin-card",children:[y.jsx("h2",{className:"signin-title",children:"Welcome Back"}),y.jsx("p",{className:"signin-sub",children:"Sign in to access your dashboard & collections."}),y.jsxs("button",{className:"google-btn",onClick:t,children:[y.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),y.jsx("button",{className:"signin-cancel",onClick:()=>r("/"),children:" Back to Home"})]})})}function JA(){return y.jsxs(CA,{children:[y.jsx(AA,{}),y.jsxs(oT,{children:[y.jsx(ms,{path:"/",element:y.jsx(PA,{})}),y.jsx(ms,{path:"/manga",element:y.jsx(DA,{})}),y.jsx(ms,{path:"/anime",element:y.jsx(OA,{})}),y.jsx(ms,{path:"/tcg",element:y.jsx(LA,{})}),y.jsx(ms,{path:"/dashboard",element:y.jsx(YA,{})}),y.jsx(ms,{path:"/signin",element:y.jsx(XA,{})})]})]})}pE.createRoot(document.getElementById("root")).render(y.jsx(dv.StrictMode,{children:y.jsx(fT,{basename:"/base",children:y.jsx(JA,{})})}));
