function gE(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function xv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ch={exports:{}},$a={},Rh={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function yE(){if(Rg)return ze;Rg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function R(M){return M===null||typeof M!="object"?null:(M=I&&M[I]||M["@@iterator"],typeof M=="function"?M:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,$={};function L(M,J,pe){this.props=M,this.context=J,this.refs=$,this.updater=pe||z}L.prototype.isReactComponent={},L.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},L.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function re(){}re.prototype=L.prototype;function ce(M,J,pe){this.props=M,this.context=J,this.refs=$,this.updater=pe||z}var Y=ce.prototype=new re;Y.constructor=ce,H(Y,L.prototype),Y.isPureReactComponent=!0;var ae=Array.isArray,Ee=Object.prototype.hasOwnProperty,ye={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function S(M,J,pe){var Ae,je={},Ve=null,_e=null;if(J!=null)for(Ae in J.ref!==void 0&&(_e=J.ref),J.key!==void 0&&(Ve=""+J.key),J)Ee.call(J,Ae)&&!j.hasOwnProperty(Ae)&&(je[Ae]=J[Ae]);var Ue=arguments.length-2;if(Ue===1)je.children=pe;else if(1<Ue){for(var Ye=Array(Ue),ft=0;ft<Ue;ft++)Ye[ft]=arguments[ft+2];je.children=Ye}if(M&&M.defaultProps)for(Ae in Ue=M.defaultProps,Ue)je[Ae]===void 0&&(je[Ae]=Ue[Ae]);return{$$typeof:r,type:M,key:Ve,ref:_e,props:je,_owner:ye.current}}function b(M,J){return{$$typeof:r,type:M.type,key:J,ref:M.ref,props:M.props,_owner:M._owner}}function x(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function k(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(pe){return J[pe]})}var N=/\/+/g;function A(M,J){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):J.toString(36)}function Fe(M,J,pe,Ae,je){var Ve=typeof M;(Ve==="undefined"||Ve==="boolean")&&(M=null);var _e=!1;if(M===null)_e=!0;else switch(Ve){case"string":case"number":_e=!0;break;case"object":switch(M.$$typeof){case r:case e:_e=!0}}if(_e)return _e=M,je=je(_e),M=Ae===""?"."+A(_e,0):Ae,ae(je)?(pe="",M!=null&&(pe=M.replace(N,"$&/")+"/"),Fe(je,J,pe,"",function(ft){return ft})):je!=null&&(x(je)&&(je=b(je,pe+(!je.key||_e&&_e.key===je.key?"":(""+je.key).replace(N,"$&/")+"/")+M)),J.push(je)),1;if(_e=0,Ae=Ae===""?".":Ae+":",ae(M))for(var Ue=0;Ue<M.length;Ue++){Ve=M[Ue];var Ye=Ae+A(Ve,Ue);_e+=Fe(Ve,J,pe,Ye,je)}else if(Ye=R(M),typeof Ye=="function")for(M=Ye.call(M),Ue=0;!(Ve=M.next()).done;)Ve=Ve.value,Ye=Ae+A(Ve,Ue++),_e+=Fe(Ve,J,pe,Ye,je);else if(Ve==="object")throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return _e}function nt(M,J,pe){if(M==null)return M;var Ae=[],je=0;return Fe(M,Ae,"","",function(Ve){return J.call(pe,Ve,je++)}),Ae}function gt(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(pe){(M._status===0||M._status===-1)&&(M._status=1,M._result=pe)},function(pe){(M._status===0||M._status===-1)&&(M._status=2,M._result=pe)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var Be={current:null},ue={transition:null},Ie={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:ue,ReactCurrentOwner:ye};function he(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:nt,forEach:function(M,J,pe){nt(M,function(){J.apply(this,arguments)},pe)},count:function(M){var J=0;return nt(M,function(){J++}),J},toArray:function(M){return nt(M,function(J){return J})||[]},only:function(M){if(!x(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ze.Component=L,ze.Fragment=t,ze.Profiler=o,ze.PureComponent=ce,ze.StrictMode=i,ze.Suspense=y,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,ze.act=he,ze.cloneElement=function(M,J,pe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Ae=H({},M.props),je=M.key,Ve=M.ref,_e=M._owner;if(J!=null){if(J.ref!==void 0&&(Ve=J.ref,_e=ye.current),J.key!==void 0&&(je=""+J.key),M.type&&M.type.defaultProps)var Ue=M.type.defaultProps;for(Ye in J)Ee.call(J,Ye)&&!j.hasOwnProperty(Ye)&&(Ae[Ye]=J[Ye]===void 0&&Ue!==void 0?Ue[Ye]:J[Ye])}var Ye=arguments.length-2;if(Ye===1)Ae.children=pe;else if(1<Ye){Ue=Array(Ye);for(var ft=0;ft<Ye;ft++)Ue[ft]=arguments[ft+2];Ae.children=Ue}return{$$typeof:r,type:M.type,key:je,ref:Ve,props:Ae,_owner:_e}},ze.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},ze.createElement=S,ze.createFactory=function(M){var J=S.bind(null,M);return J.type=M,J},ze.createRef=function(){return{current:null}},ze.forwardRef=function(M){return{$$typeof:p,render:M}},ze.isValidElement=x,ze.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:gt}},ze.memo=function(M,J){return{$$typeof:v,type:M,compare:J===void 0?null:J}},ze.startTransition=function(M){var J=ue.transition;ue.transition={};try{M()}finally{ue.transition=J}},ze.unstable_act=he,ze.useCallback=function(M,J){return Be.current.useCallback(M,J)},ze.useContext=function(M){return Be.current.useContext(M)},ze.useDebugValue=function(){},ze.useDeferredValue=function(M){return Be.current.useDeferredValue(M)},ze.useEffect=function(M,J){return Be.current.useEffect(M,J)},ze.useId=function(){return Be.current.useId()},ze.useImperativeHandle=function(M,J,pe){return Be.current.useImperativeHandle(M,J,pe)},ze.useInsertionEffect=function(M,J){return Be.current.useInsertionEffect(M,J)},ze.useLayoutEffect=function(M,J){return Be.current.useLayoutEffect(M,J)},ze.useMemo=function(M,J){return Be.current.useMemo(M,J)},ze.useReducer=function(M,J,pe){return Be.current.useReducer(M,J,pe)},ze.useRef=function(M){return Be.current.useRef(M)},ze.useState=function(M){return Be.current.useState(M)},ze.useSyncExternalStore=function(M,J,pe){return Be.current.useSyncExternalStore(M,J,pe)},ze.useTransition=function(){return Be.current.useTransition()},ze.version="18.3.1",ze}var Pg;function Tf(){return Pg||(Pg=1,Rh.exports=yE()),Rh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function vE(){if(Ag)return $a;Ag=1;var r=Tf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(p,y,v){var E,I={},R=null,z=null;v!==void 0&&(R=""+v),y.key!==void 0&&(R=""+y.key),y.ref!==void 0&&(z=y.ref);for(E in y)i.call(y,E)&&!l.hasOwnProperty(E)&&(I[E]=y[E]);if(p&&p.defaultProps)for(E in y=p.defaultProps,y)I[E]===void 0&&(I[E]=y[E]);return{$$typeof:e,type:p,key:R,ref:z,props:I,_owner:o.current}}return $a.Fragment=t,$a.jsx=d,$a.jsxs=d,$a}var kg;function _E(){return kg||(kg=1,Ch.exports=vE()),Ch.exports}var h=_E(),G=Tf();const Iv=xv(G),wE=gE({__proto__:null,default:Iv},[G]);var $u={},Ph={exports:{}},xn={},Ah={exports:{}},kh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function EE(){return Ng||(Ng=1,(function(r){function e(ue,Ie){var he=ue.length;ue.push(Ie);e:for(;0<he;){var M=he-1>>>1,J=ue[M];if(0<o(J,Ie))ue[M]=Ie,ue[he]=J,he=M;else break e}}function t(ue){return ue.length===0?null:ue[0]}function i(ue){if(ue.length===0)return null;var Ie=ue[0],he=ue.pop();if(he!==Ie){ue[0]=he;e:for(var M=0,J=ue.length,pe=J>>>1;M<pe;){var Ae=2*(M+1)-1,je=ue[Ae],Ve=Ae+1,_e=ue[Ve];if(0>o(je,he))Ve<J&&0>o(_e,je)?(ue[M]=_e,ue[Ve]=he,M=Ve):(ue[M]=je,ue[Ae]=he,M=Ae);else if(Ve<J&&0>o(_e,he))ue[M]=_e,ue[Ve]=he,M=Ve;else break e}}return Ie}function o(ue,Ie){var he=ue.sortIndex-Ie.sortIndex;return he!==0?he:ue.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var y=[],v=[],E=1,I=null,R=3,z=!1,H=!1,$=!1,L=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(ue){for(var Ie=t(v);Ie!==null;){if(Ie.callback===null)i(v);else if(Ie.startTime<=ue)i(v),Ie.sortIndex=Ie.expirationTime,e(y,Ie);else break;Ie=t(v)}}function ae(ue){if($=!1,Y(ue),!H)if(t(y)!==null)H=!0,gt(Ee);else{var Ie=t(v);Ie!==null&&Be(ae,Ie.startTime-ue)}}function Ee(ue,Ie){H=!1,$&&($=!1,re(S),S=-1),z=!0;var he=R;try{for(Y(Ie),I=t(y);I!==null&&(!(I.expirationTime>Ie)||ue&&!k());){var M=I.callback;if(typeof M=="function"){I.callback=null,R=I.priorityLevel;var J=M(I.expirationTime<=Ie);Ie=r.unstable_now(),typeof J=="function"?I.callback=J:I===t(y)&&i(y),Y(Ie)}else i(y);I=t(y)}if(I!==null)var pe=!0;else{var Ae=t(v);Ae!==null&&Be(ae,Ae.startTime-Ie),pe=!1}return pe}finally{I=null,R=he,z=!1}}var ye=!1,j=null,S=-1,b=5,x=-1;function k(){return!(r.unstable_now()-x<b)}function N(){if(j!==null){var ue=r.unstable_now();x=ue;var Ie=!0;try{Ie=j(!0,ue)}finally{Ie?A():(ye=!1,j=null)}}else ye=!1}var A;if(typeof ce=="function")A=function(){ce(N)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,nt=Fe.port2;Fe.port1.onmessage=N,A=function(){nt.postMessage(null)}}else A=function(){L(N,0)};function gt(ue){j=ue,ye||(ye=!0,A())}function Be(ue,Ie){S=L(function(){ue(r.unstable_now())},Ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ue){ue.callback=null},r.unstable_continueExecution=function(){H||z||(H=!0,gt(Ee))},r.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<ue?Math.floor(1e3/ue):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(ue){switch(R){case 1:case 2:case 3:var Ie=3;break;default:Ie=R}var he=R;R=Ie;try{return ue()}finally{R=he}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ue,Ie){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var he=R;R=ue;try{return Ie()}finally{R=he}},r.unstable_scheduleCallback=function(ue,Ie,he){var M=r.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?M+he:M):he=M,ue){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=he+J,ue={id:E++,callback:Ie,priorityLevel:ue,startTime:he,expirationTime:J,sortIndex:-1},he>M?(ue.sortIndex=he,e(v,ue),t(y)===null&&ue===t(v)&&($?(re(S),S=-1):$=!0,Be(ae,he-M))):(ue.sortIndex=J,e(y,ue),H||z||(H=!0,gt(Ee))),ue},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(ue){var Ie=R;return function(){var he=R;R=Ie;try{return ue.apply(this,arguments)}finally{R=he}}}})(kh)),kh}var bg;function TE(){return bg||(bg=1,Ah.exports=EE()),Ah.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function xE(){if(jg)return xn;jg=1;var r=Tf(),e=TE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function R(n){return y.call(I,n)?!0:y.call(E,n)?!1:v.test(n)?I[n]=!0:(E[n]=!0,!1)}function z(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function H(n,s,a,c){if(s===null||typeof s>"u"||z(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $(n,s,a,c,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){L[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];L[s]=new $(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){L[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){L[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){L[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){L[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){L[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){L[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){L[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function ce(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(re,ce);L[s]=new $(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(re,ce);L[s]=new $(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(re,ce);L[s]=new $(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){L[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),L.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){L[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function Y(n,s,a,c){var f=L.hasOwnProperty(s)?L[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(H(s,a,f,c)&&(a=null),c||f===null?R(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var ae=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),ye=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),k=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),ue=Symbol.iterator;function Ie(n){return n===null||typeof n!="object"?null:(n=ue&&n[ue]||n["@@iterator"],typeof n=="function"?n:null)}var he=Object.assign,M;function J(n){if(M===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+n}var pe=!1;function Ae(n,s){if(!n||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(W){var c=W}Reflect.construct(n,[],s)}else{try{s.call()}catch(W){c=W}n.call(s.prototype)}else{try{throw Error()}catch(W){c=W}n()}}catch(W){if(W&&c&&typeof W.stack=="string"){for(var f=W.stack.split(`
`),g=c.stack.split(`
`),w=f.length-1,P=g.length-1;1<=w&&0<=P&&f[w]!==g[P];)P--;for(;1<=w&&0<=P;w--,P--)if(f[w]!==g[P]){if(w!==1||P!==1)do if(w--,P--,0>P||f[w]!==g[P]){var D=`
`+f[w].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=w&&0<=P);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?J(n):""}function je(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function Ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case ye:return"Portal";case b:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case Fe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case nt:return s=n.displayName||null,s!==null?s:Ve(n.type)||"Memo";case gt:s=n._payload,n=n._init;try{return Ve(n(s))}catch{}}return null}function _e(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ye(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ft(n){var s=Ye(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function un(n){n._valueTracker||(n._valueTracker=ft(n))}function Xt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Ye(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Lt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Mt(n,s){var a=s.checked;return he({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Zn(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Ue(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function wr(n,s){s=s.checked,s!=null&&Y(n,"checked",s,!1)}function Xe(n,s){wr(n,s);var a=Ue(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Er(n,s.type,a):s.hasOwnProperty("defaultValue")&&Er(n,s.type,Ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Br(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Er(n,s,a){(s!=="number"||Lt(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Nt=Array.isArray;function pn(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ue(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function er(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function tr(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Nt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Ue(a)}}function X(n,s){var a=Ue(s.value),c=Ue(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function fe(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function se(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?se(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Q,K=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Q=Q||document.createElement("div"),Q.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Q.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function O(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Le=["Webkit","ms","Moz","O"];Object.keys(de).forEach(function(n){Le.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),de[s]=de[n]})});function et(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||de.hasOwnProperty(n)&&de[n]?(""+s).trim():s+"px"}function St(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=et(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var rt=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function it(n,s){if(s){if(rt[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Cn(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var On=null;function Ln(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Tr=null,mn=null,Mn=null;function fi(n){if(n=Pa(n)){if(typeof Tr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=iu(s),Tr(n.stateNode,n.type,s))}}function Fn(n){mn?Mn?Mn.push(n):Mn=[n]:mn=n}function cs(){if(mn){var n=mn,s=Mn;if(Mn=mn=null,fi(n),s)for(n=0;n<s.length;n++)fi(s[n])}}function st(n,s){return n(s)}function Un(){}var $r=!1;function aa(n,s,a){if($r)return n(s,a);$r=!0;try{return st(n,s,a)}finally{$r=!1,(mn!==null||Mn!==null)&&(Un(),cs())}}function Et(n,s){var a=n.stateNode;if(a===null)return null;var c=iu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ks=!1;if(p)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{Ks=!1}function ds(n,s,a,c,f,g,w,P,D){var W=Array.prototype.slice.call(arguments,3);try{s.apply(a,W)}catch(ne){this.onError(ne)}}var hs=!1,Qs=null,rr=!1,la=null,ed={onError:function(n){hs=!0,Qs=n}};function Ys(n,s,a,c,f,g,w,P,D){hs=!1,Qs=null,ds.apply(ed,arguments)}function Al(n,s,a,c,f,g,w,P,D){if(Ys.apply(this,arguments),hs){if(hs){var W=Qs;hs=!1,Qs=null}else throw Error(t(198));rr||(rr=!0,la=W)}}function ir(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function fs(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function sr(n){if(ir(n)!==n)throw Error(t(188))}function kl(n){var s=n.alternate;if(!s){if(s=ir(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return sr(f),n;if(g===c)return sr(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var w=!1,P=f.child;P;){if(P===a){w=!0,a=f,c=g;break}if(P===c){w=!0,c=f,a=g;break}P=P.sibling}if(!w){for(P=g.child;P;){if(P===a){w=!0,a=g,c=f;break}if(P===c){w=!0,c=g,a=f;break}P=P.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function ua(n){return n=kl(n),n!==null?Js(n):null}function Js(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Js(n);if(s!==null)return s;n=n.sibling}return null}var Xs=e.unstable_scheduleCallback,ca=e.unstable_cancelCallback,Nl=e.unstable_shouldYield,td=e.unstable_requestPaint,ot=e.unstable_now,bl=e.unstable_getCurrentPriorityLevel,ps=e.unstable_ImmediatePriority,pi=e.unstable_UserBlockingPriority,zn=e.unstable_NormalPriority,da=e.unstable_LowPriority,jl=e.unstable_IdlePriority,ms=null,Rn=null;function Dl(n){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(ms,n,void 0,(n.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:Ol,ha=Math.log,Vl=Math.LN2;function Ol(n){return n>>>=0,n===0?32:31-(ha(n)/Vl|0)|0}var Zs=64,eo=4194304;function mi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gs(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var P=w&~f;P!==0?c=mi(P):(g&=w,g!==0&&(c=mi(g)))}else w=a&~f,w!==0?c=mi(w):g!==0&&(c=mi(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-cn(s),f=1<<a,c|=n[a],s&=~f;return c}function nd(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-cn(g),P=1<<w,D=f[w];D===-1?((P&a)===0||(P&c)!==0)&&(f[w]=nd(P,s)):D<=s&&(n.expiredLanes|=P),g&=~P}}function Pn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ys(){var n=Zs;return Zs<<=1,(Zs&4194240)===0&&(Zs=64),n}function gi(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function yi(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-cn(s),n[s]=a}function tt(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-cn(a),g=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function vi(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-cn(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var He=0;function _i(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ll,to,Ml,Fl,Ul,fa=!1,xr=[],Wt=null,or=null,ar=null,wi=new Map,Bn=new Map,Ir=[],rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zl(n,s){switch(n){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":wi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bn.delete(s.pointerId)}}function gn(n,s,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Pa(s),s!==null&&to(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function id(n,s,a,c,f){switch(s){case"focusin":return Wt=gn(Wt,n,s,a,c,f),!0;case"dragenter":return or=gn(or,n,s,a,c,f),!0;case"mouseover":return ar=gn(ar,n,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return wi.set(g,gn(wi.get(g)||null,n,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Bn.set(g,gn(Bn.get(g)||null,n,s,a,c,f)),!0}return!1}function Bl(n){var s=Ts(n.target);if(s!==null){var a=ir(s);if(a!==null){if(s=a.tag,s===13){if(s=fs(a),s!==null){n.blockedOn=s,Ul(n.priority,function(){Ml(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=no(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);On=c,a.target.dispatchEvent(c),On=null}else return s=Pa(a),s!==null&&to(s),n.blockedOn=a,!1;s.shift()}return!0}function vs(n,s,a){Hr(n)&&a.delete(s)}function $l(){fa=!1,Wt!==null&&Hr(Wt)&&(Wt=null),or!==null&&Hr(or)&&(or=null),ar!==null&&Hr(ar)&&(ar=null),wi.forEach(vs),Bn.forEach(vs)}function lr(n,s){n.blockedOn===s&&(n.blockedOn=null,fa||(fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$l)))}function ur(n){function s(f){return lr(f,n)}if(0<xr.length){lr(xr[0],n);for(var a=1;a<xr.length;a++){var c=xr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Wt!==null&&lr(Wt,n),or!==null&&lr(or,n),ar!==null&&lr(ar,n),wi.forEach(s),Bn.forEach(s),a=0;a<Ir.length;a++)c=Ir[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Ir.length&&(a=Ir[0],a.blockedOn===null);)Bl(a),a.blockedOn===null&&Ir.shift()}var qr=ae.ReactCurrentBatchConfig,Ei=!0;function pt(n,s,a,c){var f=He,g=qr.transition;qr.transition=null;try{He=1,pa(n,s,a,c)}finally{He=f,qr.transition=g}}function sd(n,s,a,c){var f=He,g=qr.transition;qr.transition=null;try{He=4,pa(n,s,a,c)}finally{He=f,qr.transition=g}}function pa(n,s,a,c){if(Ei){var f=no(n,s,a,c);if(f===null)gd(n,s,c,_s,a),zl(n,c);else if(id(f,n,s,a,c))c.stopPropagation();else if(zl(n,c),s&4&&-1<rd.indexOf(n)){for(;f!==null;){var g=Pa(f);if(g!==null&&Ll(g),g=no(n,s,a,c),g===null&&gd(n,s,c,_s,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else gd(n,s,c,null,a)}}var _s=null;function no(n,s,a,c){if(_s=null,n=Ln(c),n=Ts(n),n!==null)if(s=ir(n),s===null)n=null;else if(a=s.tag,a===13){if(n=fs(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return _s=n,null}function ma(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bl()){case ps:return 1;case pi:return 4;case zn:case da:return 16;case jl:return 536870912;default:return 16}default:return 16}}var An=null,ro=null,yn=null;function ga(){if(yn)return yn;var n,s=ro,a=s.length,c,f="value"in An?An.value:An.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===f[g-c];c++);return yn=f.slice(n,1<c?1-c:void 0)}function io(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Sr(){return!0}function ya(){return!1}function Ht(n){function s(a,c,f,g,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(a=n[P],this[P]=a?a(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Sr:ya,this.isPropagationStopped=ya,this}return he(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),s}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=Ht(cr),Cr=he({},cr,{view:0,detail:0}),od=Ht(Cr),oo,Gr,Ti,ws=he({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ti&&(Ti&&n.type==="mousemove"?(oo=n.screenX-Ti.screenX,Gr=n.screenY-Ti.screenY):Gr=oo=0,Ti=n),oo)},movementY:function(n){return"movementY"in n?n.movementY:Gr}}),ao=Ht(ws),va=he({},ws,{dataTransfer:0}),Wl=Ht(va),lo=he({},Cr,{relatedTarget:0}),uo=Ht(lo),Hl=he({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Kr=Ht(Hl),ql=he({},cr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gl=Ht(ql),Kl=he({},cr,{data:0}),_a=Ht(Kl),co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ql[n])?!!s[n]:!1}function Rr(){return Yl}var u=he({},Cr,{key:function(n){if(n.key){var s=co[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=io(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?dn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(n){return n.type==="keypress"?io(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?io(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Ht(u),_=he({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ht(_),F=he({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),q=Ht(F),le=he({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ze=Ht(le),bt=he({},ws,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Ht(bt),Ft=[9,13,27,32],Ct=p&&"CompositionEvent"in window,$n=null;p&&"documentMode"in document&&($n=document.documentMode);var kn=p&&"TextEvent"in window&&!$n,Es=p&&(!Ct||$n&&8<$n&&11>=$n),ho=" ",Ep=!1;function Tp(n,s){switch(n){case"keyup":return Ft.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fo=!1;function fw(n,s){switch(n){case"compositionend":return xp(s);case"keypress":return s.which!==32?null:(Ep=!0,ho);case"textInput":return n=s.data,n===ho&&Ep?null:n;default:return null}}function pw(n,s){if(fo)return n==="compositionend"||!Ct&&Tp(n,s)?(n=ga(),yn=ro=An=null,fo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Es&&s.locale!=="ko"?null:s.data;default:return null}}var mw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ip(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!mw[n.type]:s==="textarea"}function Sp(n,s,a,c){Fn(c),s=tu(s,"onChange"),0<s.length&&(a=new so("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var wa=null,Ea=null;function gw(n){$p(n,0)}function Jl(n){var s=vo(n);if(Xt(s))return n}function yw(n,s){if(n==="change")return s}var Cp=!1;if(p){var ad;if(p){var ld="oninput"in document;if(!ld){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),ld=typeof Rp.oninput=="function"}ad=ld}else ad=!1;Cp=ad&&(!document.documentMode||9<document.documentMode)}function Pp(){wa&&(wa.detachEvent("onpropertychange",Ap),Ea=wa=null)}function Ap(n){if(n.propertyName==="value"&&Jl(Ea)){var s=[];Sp(s,Ea,n,Ln(n)),aa(gw,s)}}function vw(n,s,a){n==="focusin"?(Pp(),wa=s,Ea=a,wa.attachEvent("onpropertychange",Ap)):n==="focusout"&&Pp()}function _w(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jl(Ea)}function ww(n,s){if(n==="click")return Jl(s)}function Ew(n,s){if(n==="input"||n==="change")return Jl(s)}function Tw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var dr=typeof Object.is=="function"?Object.is:Tw;function Ta(n,s){if(dr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!y.call(s,f)||!dr(n[f],s[f]))return!1}return!0}function kp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Np(n,s){var a=kp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=kp(a)}}function bp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?bp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function jp(){for(var n=window,s=Lt();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Lt(n.document)}return s}function ud(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function xw(n){var s=jp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&bp(a.ownerDocument.documentElement,a)){if(c!==null&&ud(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=Np(a,g);var w=Np(a,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Iw=p&&"documentMode"in document&&11>=document.documentMode,po=null,cd=null,xa=null,dd=!1;function Dp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;dd||po==null||po!==Lt(c)||(c=po,"selectionStart"in c&&ud(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),xa&&Ta(xa,c)||(xa=c,c=tu(cd,"onSelect"),0<c.length&&(s=new so("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=po)))}function Xl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var mo={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},hd={},Vp={};p&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Zl(n){if(hd[n])return hd[n];if(!mo[n])return n;var s=mo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Vp)return hd[n]=s[a];return n}var Op=Zl("animationend"),Lp=Zl("animationiteration"),Mp=Zl("animationstart"),Fp=Zl("transitionend"),Up=new Map,zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(n,s){Up.set(n,s),l(s,[n])}for(var fd=0;fd<zp.length;fd++){var pd=zp[fd],Sw=pd.toLowerCase(),Cw=pd[0].toUpperCase()+pd.slice(1);xi(Sw,"on"+Cw)}xi(Op,"onAnimationEnd"),xi(Lp,"onAnimationIteration"),xi(Mp,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(Fp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function Bp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Al(c,s,void 0,n),n.currentTarget=null}function $p(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var P=c[w],D=P.instance,W=P.currentTarget;if(P=P.listener,D!==g&&f.isPropagationStopped())break e;Bp(f,P,W),g=D}else for(w=0;w<c.length;w++){if(P=c[w],D=P.instance,W=P.currentTarget,P=P.listener,D!==g&&f.isPropagationStopped())break e;Bp(f,P,W),g=D}}}if(rr)throw n=la,rr=!1,la=null,n}function lt(n,s){var a=s[Td];a===void 0&&(a=s[Td]=new Set);var c=n+"__bubble";a.has(c)||(Wp(s,n,2,!1),a.add(c))}function md(n,s,a){var c=0;s&&(c|=4),Wp(a,n,c,s)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Sa(n){if(!n[eu]){n[eu]=!0,i.forEach(function(a){a!=="selectionchange"&&(Rw.has(a)||md(a,!1,n),md(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[eu]||(s[eu]=!0,md("selectionchange",!1,s))}}function Wp(n,s,a,c){switch(ma(s)){case 1:var f=pt;break;case 4:f=sd;break;default:f=pa}a=f.bind(null,s,a,n),f=void 0,!Ks||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function gd(n,s,a,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var P=c.stateNode.containerInfo;if(P===f||P.nodeType===8&&P.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;w=w.return}for(;P!==null;){if(w=Ts(P),w===null)return;if(D=w.tag,D===5||D===6){c=g=w;continue e}P=P.parentNode}}c=c.return}aa(function(){var W=g,ne=Ln(a),ie=[];e:{var te=Up.get(n);if(te!==void 0){var me=so,we=n;switch(n){case"keypress":if(io(a)===0)break e;case"keydown":case"keyup":me=m;break;case"focusin":we="focus",me=uo;break;case"focusout":we="blur",me=uo;break;case"beforeblur":case"afterblur":me=uo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=q;break;case Op:case Lp:case Mp:me=Kr;break;case Fp:me=Ze;break;case"scroll":me=od;break;case"wheel":me=qe;break;case"copy":case"cut":case"paste":me=Gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=T}var Te=(s&4)!==0,Tt=!Te&&n==="scroll",U=Te?te!==null?te+"Capture":null:te;Te=[];for(var V=W,B;V!==null;){B=V;var oe=B.stateNode;if(B.tag===5&&oe!==null&&(B=oe,U!==null&&(oe=Et(V,U),oe!=null&&Te.push(Ca(V,oe,B)))),Tt)break;V=V.return}0<Te.length&&(te=new me(te,we,null,a,ne),ie.push({event:te,listeners:Te}))}}if((s&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",me=n==="mouseout"||n==="pointerout",te&&a!==On&&(we=a.relatedTarget||a.fromElement)&&(Ts(we)||we[Qr]))break e;if((me||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,me?(we=a.relatedTarget||a.toElement,me=W,we=we?Ts(we):null,we!==null&&(Tt=ir(we),we!==Tt||we.tag!==5&&we.tag!==6)&&(we=null)):(me=null,we=W),me!==we)){if(Te=ao,oe="onMouseLeave",U="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Te=T,oe="onPointerLeave",U="onPointerEnter",V="pointer"),Tt=me==null?te:vo(me),B=we==null?te:vo(we),te=new Te(oe,V+"leave",me,a,ne),te.target=Tt,te.relatedTarget=B,oe=null,Ts(ne)===W&&(Te=new Te(U,V+"enter",we,a,ne),Te.target=B,Te.relatedTarget=Tt,oe=Te),Tt=oe,me&&we)t:{for(Te=me,U=we,V=0,B=Te;B;B=go(B))V++;for(B=0,oe=U;oe;oe=go(oe))B++;for(;0<V-B;)Te=go(Te),V--;for(;0<B-V;)U=go(U),B--;for(;V--;){if(Te===U||U!==null&&Te===U.alternate)break t;Te=go(Te),U=go(U)}Te=null}else Te=null;me!==null&&Hp(ie,te,me,Te,!1),we!==null&&Tt!==null&&Hp(ie,Tt,we,Te,!0)}}e:{if(te=W?vo(W):window,me=te.nodeName&&te.nodeName.toLowerCase(),me==="select"||me==="input"&&te.type==="file")var Se=yw;else if(Ip(te))if(Cp)Se=Ew;else{Se=_w;var Re=vw}else(me=te.nodeName)&&me.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Se=ww);if(Se&&(Se=Se(n,W))){Sp(ie,Se,a,ne);break e}Re&&Re(n,te,W),n==="focusout"&&(Re=te._wrapperState)&&Re.controlled&&te.type==="number"&&Er(te,"number",te.value)}switch(Re=W?vo(W):window,n){case"focusin":(Ip(Re)||Re.contentEditable==="true")&&(po=Re,cd=W,xa=null);break;case"focusout":xa=cd=po=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,Dp(ie,a,ne);break;case"selectionchange":if(Iw)break;case"keydown":case"keyup":Dp(ie,a,ne)}var Pe;if(Ct)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else fo?Tp(n,a)&&(be="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(Es&&a.locale!=="ko"&&(fo||be!=="onCompositionStart"?be==="onCompositionEnd"&&fo&&(Pe=ga()):(An=ne,ro="value"in An?An.value:An.textContent,fo=!0)),Re=tu(W,be),0<Re.length&&(be=new _a(be,n,null,a,ne),ie.push({event:be,listeners:Re}),Pe?be.data=Pe:(Pe=xp(a),Pe!==null&&(be.data=Pe)))),(Pe=kn?fw(n,a):pw(n,a))&&(W=tu(W,"onBeforeInput"),0<W.length&&(ne=new _a("onBeforeInput","beforeinput",null,a,ne),ie.push({event:ne,listeners:W}),ne.data=Pe))}$p(ie,s)})}function Ca(n,s,a){return{instance:n,listener:s,currentTarget:a}}function tu(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=Et(n,a),g!=null&&c.unshift(Ca(n,g,f)),g=Et(n,s),g!=null&&c.push(Ca(n,g,f))),n=n.return}return c}function go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Hp(n,s,a,c,f){for(var g=s._reactName,w=[];a!==null&&a!==c;){var P=a,D=P.alternate,W=P.stateNode;if(D!==null&&D===c)break;P.tag===5&&W!==null&&(P=W,f?(D=Et(a,g),D!=null&&w.unshift(Ca(a,D,P))):f||(D=Et(a,g),D!=null&&w.push(Ca(a,D,P)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var Pw=/\r\n?/g,Aw=/\u0000|\uFFFD/g;function qp(n){return(typeof n=="string"?n:""+n).replace(Pw,`
`).replace(Aw,"")}function nu(n,s,a){if(s=qp(s),qp(n)!==s&&a)throw Error(t(425))}function ru(){}var yd=null,vd=null;function _d(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,kw=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,Nw=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(n){return Gp.resolve(null).then(n).catch(bw)}:wd;function bw(n){setTimeout(function(){throw n})}function Ed(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),ur(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);ur(s)}function Ii(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Kp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var yo=Math.random().toString(36).slice(2),Pr="__reactFiber$"+yo,Ra="__reactProps$"+yo,Qr="__reactContainer$"+yo,Td="__reactEvents$"+yo,jw="__reactListeners$"+yo,Dw="__reactHandles$"+yo;function Ts(n){var s=n[Pr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Qr]||a[Pr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Kp(n);n!==null;){if(a=n[Pr])return a;n=Kp(n)}return s}n=a,a=n.parentNode}return null}function Pa(n){return n=n[Pr]||n[Qr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function iu(n){return n[Ra]||null}var xd=[],_o=-1;function Si(n){return{current:n}}function ut(n){0>_o||(n.current=xd[_o],xd[_o]=null,_o--)}function at(n,s){_o++,xd[_o]=n.current,n.current=s}var Ci={},Zt=Si(Ci),vn=Si(!1),xs=Ci;function wo(n,s){var a=n.type.contextTypes;if(!a)return Ci;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function _n(n){return n=n.childContextTypes,n!=null}function su(){ut(vn),ut(Zt)}function Qp(n,s,a){if(Zt.current!==Ci)throw Error(t(168));at(Zt,s),at(vn,a)}function Yp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,_e(n)||"Unknown",f));return he({},a,c)}function ou(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ci,xs=Zt.current,at(Zt,n),at(vn,vn.current),!0}function Jp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Yp(n,s,xs),c.__reactInternalMemoizedMergedChildContext=n,ut(vn),ut(Zt),at(Zt,n)):ut(vn),at(vn,a)}var Yr=null,au=!1,Id=!1;function Xp(n){Yr===null?Yr=[n]:Yr.push(n)}function Vw(n){au=!0,Xp(n)}function Ri(){if(!Id&&Yr!==null){Id=!0;var n=0,s=He;try{var a=Yr;for(He=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Yr=null,au=!1}catch(f){throw Yr!==null&&(Yr=Yr.slice(n+1)),Xs(ps,Ri),f}finally{He=s,Id=!1}}return null}var Eo=[],To=0,lu=null,uu=0,Wn=[],Hn=0,Is=null,Jr=1,Xr="";function Ss(n,s){Eo[To++]=uu,Eo[To++]=lu,lu=n,uu=s}function Zp(n,s,a){Wn[Hn++]=Jr,Wn[Hn++]=Xr,Wn[Hn++]=Is,Is=n;var c=Jr;n=Xr;var f=32-cn(c)-1;c&=~(1<<f),a+=1;var g=32-cn(s)+f;if(30<g){var w=f-f%5;g=(c&(1<<w)-1).toString(32),c>>=w,f-=w,Jr=1<<32-cn(s)+f|a<<f|c,Xr=g+n}else Jr=1<<g|a<<f|c,Xr=n}function Sd(n){n.return!==null&&(Ss(n,1),Zp(n,1,0))}function Cd(n){for(;n===lu;)lu=Eo[--To],Eo[To]=null,uu=Eo[--To],Eo[To]=null;for(;n===Is;)Is=Wn[--Hn],Wn[Hn]=null,Xr=Wn[--Hn],Wn[Hn]=null,Jr=Wn[--Hn],Wn[Hn]=null}var Nn=null,bn=null,mt=!1,hr=null;function em(n,s){var a=Qn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function tm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Nn=n,bn=Ii(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Nn=n,bn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Is!==null?{id:Jr,overflow:Xr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Qn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Nn=n,bn=null,!0):!1;default:return!1}}function Rd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Pd(n){if(mt){var s=bn;if(s){var a=s;if(!tm(n,s)){if(Rd(n))throw Error(t(418));s=Ii(a.nextSibling);var c=Nn;s&&tm(n,s)?em(c,a):(n.flags=n.flags&-4097|2,mt=!1,Nn=n)}}else{if(Rd(n))throw Error(t(418));n.flags=n.flags&-4097|2,mt=!1,Nn=n}}}function nm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Nn=n}function cu(n){if(n!==Nn)return!1;if(!mt)return nm(n),mt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!_d(n.type,n.memoizedProps)),s&&(s=bn)){if(Rd(n))throw rm(),Error(t(418));for(;s;)em(n,s),s=Ii(s.nextSibling)}if(nm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){bn=Ii(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}bn=null}}else bn=Nn?Ii(n.stateNode.nextSibling):null;return!0}function rm(){for(var n=bn;n;)n=Ii(n.nextSibling)}function xo(){bn=Nn=null,mt=!1}function Ad(n){hr===null?hr=[n]:hr.push(n)}var Ow=ae.ReactCurrentBatchConfig;function Aa(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var P=f.refs;w===null?delete P[g]:P[g]=w},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function du(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function im(n){var s=n._init;return s(n._payload)}function sm(n){function s(U,V){if(n){var B=U.deletions;B===null?(U.deletions=[V],U.flags|=16):B.push(V)}}function a(U,V){if(!n)return null;for(;V!==null;)s(U,V),V=V.sibling;return null}function c(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function f(U,V){return U=Vi(U,V),U.index=0,U.sibling=null,U}function g(U,V,B){return U.index=B,n?(B=U.alternate,B!==null?(B=B.index,B<V?(U.flags|=2,V):B):(U.flags|=2,V)):(U.flags|=1048576,V)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function P(U,V,B,oe){return V===null||V.tag!==6?(V=wh(B,U.mode,oe),V.return=U,V):(V=f(V,B),V.return=U,V)}function D(U,V,B,oe){var Se=B.type;return Se===j?ne(U,V,B.props.children,oe,B.key):V!==null&&(V.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===gt&&im(Se)===V.type)?(oe=f(V,B.props),oe.ref=Aa(U,V,B),oe.return=U,oe):(oe=Vu(B.type,B.key,B.props,null,U.mode,oe),oe.ref=Aa(U,V,B),oe.return=U,oe)}function W(U,V,B,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Eh(B,U.mode,oe),V.return=U,V):(V=f(V,B.children||[]),V.return=U,V)}function ne(U,V,B,oe,Se){return V===null||V.tag!==7?(V=js(B,U.mode,oe,Se),V.return=U,V):(V=f(V,B),V.return=U,V)}function ie(U,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=wh(""+V,U.mode,B),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ee:return B=Vu(V.type,V.key,V.props,null,U.mode,B),B.ref=Aa(U,null,V),B.return=U,B;case ye:return V=Eh(V,U.mode,B),V.return=U,V;case gt:var oe=V._init;return ie(U,oe(V._payload),B)}if(Nt(V)||Ie(V))return V=js(V,U.mode,B,null),V.return=U,V;du(U,V)}return null}function te(U,V,B,oe){var Se=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return Se!==null?null:P(U,V,""+B,oe);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ee:return B.key===Se?D(U,V,B,oe):null;case ye:return B.key===Se?W(U,V,B,oe):null;case gt:return Se=B._init,te(U,V,Se(B._payload),oe)}if(Nt(B)||Ie(B))return Se!==null?null:ne(U,V,B,oe,null);du(U,B)}return null}function me(U,V,B,oe,Se){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return U=U.get(B)||null,P(V,U,""+oe,Se);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Ee:return U=U.get(oe.key===null?B:oe.key)||null,D(V,U,oe,Se);case ye:return U=U.get(oe.key===null?B:oe.key)||null,W(V,U,oe,Se);case gt:var Re=oe._init;return me(U,V,B,Re(oe._payload),Se)}if(Nt(oe)||Ie(oe))return U=U.get(B)||null,ne(V,U,oe,Se,null);du(V,oe)}return null}function we(U,V,B,oe){for(var Se=null,Re=null,Pe=V,be=V=0,Bt=null;Pe!==null&&be<B.length;be++){Pe.index>be?(Bt=Pe,Pe=null):Bt=Pe.sibling;var Qe=te(U,Pe,B[be],oe);if(Qe===null){Pe===null&&(Pe=Bt);break}n&&Pe&&Qe.alternate===null&&s(U,Pe),V=g(Qe,V,be),Re===null?Se=Qe:Re.sibling=Qe,Re=Qe,Pe=Bt}if(be===B.length)return a(U,Pe),mt&&Ss(U,be),Se;if(Pe===null){for(;be<B.length;be++)Pe=ie(U,B[be],oe),Pe!==null&&(V=g(Pe,V,be),Re===null?Se=Pe:Re.sibling=Pe,Re=Pe);return mt&&Ss(U,be),Se}for(Pe=c(U,Pe);be<B.length;be++)Bt=me(Pe,U,be,B[be],oe),Bt!==null&&(n&&Bt.alternate!==null&&Pe.delete(Bt.key===null?be:Bt.key),V=g(Bt,V,be),Re===null?Se=Bt:Re.sibling=Bt,Re=Bt);return n&&Pe.forEach(function(Oi){return s(U,Oi)}),mt&&Ss(U,be),Se}function Te(U,V,B,oe){var Se=Ie(B);if(typeof Se!="function")throw Error(t(150));if(B=Se.call(B),B==null)throw Error(t(151));for(var Re=Se=null,Pe=V,be=V=0,Bt=null,Qe=B.next();Pe!==null&&!Qe.done;be++,Qe=B.next()){Pe.index>be?(Bt=Pe,Pe=null):Bt=Pe.sibling;var Oi=te(U,Pe,Qe.value,oe);if(Oi===null){Pe===null&&(Pe=Bt);break}n&&Pe&&Oi.alternate===null&&s(U,Pe),V=g(Oi,V,be),Re===null?Se=Oi:Re.sibling=Oi,Re=Oi,Pe=Bt}if(Qe.done)return a(U,Pe),mt&&Ss(U,be),Se;if(Pe===null){for(;!Qe.done;be++,Qe=B.next())Qe=ie(U,Qe.value,oe),Qe!==null&&(V=g(Qe,V,be),Re===null?Se=Qe:Re.sibling=Qe,Re=Qe);return mt&&Ss(U,be),Se}for(Pe=c(U,Pe);!Qe.done;be++,Qe=B.next())Qe=me(Pe,U,be,Qe.value,oe),Qe!==null&&(n&&Qe.alternate!==null&&Pe.delete(Qe.key===null?be:Qe.key),V=g(Qe,V,be),Re===null?Se=Qe:Re.sibling=Qe,Re=Qe);return n&&Pe.forEach(function(mE){return s(U,mE)}),mt&&Ss(U,be),Se}function Tt(U,V,B,oe){if(typeof B=="object"&&B!==null&&B.type===j&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Ee:e:{for(var Se=B.key,Re=V;Re!==null;){if(Re.key===Se){if(Se=B.type,Se===j){if(Re.tag===7){a(U,Re.sibling),V=f(Re,B.props.children),V.return=U,U=V;break e}}else if(Re.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===gt&&im(Se)===Re.type){a(U,Re.sibling),V=f(Re,B.props),V.ref=Aa(U,Re,B),V.return=U,U=V;break e}a(U,Re);break}else s(U,Re);Re=Re.sibling}B.type===j?(V=js(B.props.children,U.mode,oe,B.key),V.return=U,U=V):(oe=Vu(B.type,B.key,B.props,null,U.mode,oe),oe.ref=Aa(U,V,B),oe.return=U,U=oe)}return w(U);case ye:e:{for(Re=B.key;V!==null;){if(V.key===Re)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(U,V.sibling),V=f(V,B.children||[]),V.return=U,U=V;break e}else{a(U,V);break}else s(U,V);V=V.sibling}V=Eh(B,U.mode,oe),V.return=U,U=V}return w(U);case gt:return Re=B._init,Tt(U,V,Re(B._payload),oe)}if(Nt(B))return we(U,V,B,oe);if(Ie(B))return Te(U,V,B,oe);du(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(a(U,V.sibling),V=f(V,B),V.return=U,U=V):(a(U,V),V=wh(B,U.mode,oe),V.return=U,U=V),w(U)):a(U,V)}return Tt}var Io=sm(!0),om=sm(!1),hu=Si(null),fu=null,So=null,kd=null;function Nd(){kd=So=fu=null}function bd(n){var s=hu.current;ut(hu),n._currentValue=s}function jd(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function Co(n,s){fu=n,kd=So=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(wn=!0),n.firstContext=null)}function qn(n){var s=n._currentValue;if(kd!==n)if(n={context:n,memoizedValue:s,next:null},So===null){if(fu===null)throw Error(t(308));So=n,fu.dependencies={lanes:0,firstContext:n}}else So=So.next=n;return s}var Cs=null;function Dd(n){Cs===null?Cs=[n]:Cs.push(n)}function am(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Dd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Zr(n,c)}function Zr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Pi=!1;function Vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ei(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Ai(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ke&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Zr(n,a)}return f=c.interleaved,f===null?(s.next=s,Dd(c)):(s.next=f.next,f.next=s),c.interleaved=s,Zr(n,a)}function pu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,vi(n,a)}}function um(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function mu(n,s,a,c){var f=n.updateQueue;Pi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,P=f.shared.pending;if(P!==null){f.shared.pending=null;var D=P,W=D.next;D.next=null,w===null?g=W:w.next=W,w=D;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,P=ne.lastBaseUpdate,P!==w&&(P===null?ne.firstBaseUpdate=W:P.next=W,ne.lastBaseUpdate=D))}if(g!==null){var ie=f.baseState;w=0,ne=W=D=null,P=g;do{var te=P.lane,me=P.eventTime;if((c&te)===te){ne!==null&&(ne=ne.next={eventTime:me,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var we=n,Te=P;switch(te=s,me=a,Te.tag){case 1:if(we=Te.payload,typeof we=="function"){ie=we.call(me,ie,te);break e}ie=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Te.payload,te=typeof we=="function"?we.call(me,ie,te):we,te==null)break e;ie=he({},ie,te);break e;case 2:Pi=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,te=f.effects,te===null?f.effects=[P]:te.push(P))}else me={eventTime:me,lane:te,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ne===null?(W=ne=me,D=ie):ne=ne.next=me,w|=te;if(P=P.next,P===null){if(P=f.shared.pending,P===null)break;te=P,P=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);if(ne===null&&(D=ie),f.baseState=D,f.firstBaseUpdate=W,f.lastBaseUpdate=ne,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);As|=w,n.lanes=w,n.memoizedState=ie}}function cm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var ka={},Ar=Si(ka),Na=Si(ka),ba=Si(ka);function Rs(n){if(n===ka)throw Error(t(174));return n}function Od(n,s){switch(at(ba,s),at(Na,n),at(Ar,ka),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:C(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=C(s,n)}ut(Ar),at(Ar,s)}function Ro(){ut(Ar),ut(Na),ut(ba)}function dm(n){Rs(ba.current);var s=Rs(Ar.current),a=C(s,n.type);s!==a&&(at(Na,n),at(Ar,a))}function Ld(n){Na.current===n&&(ut(Ar),ut(Na))}var yt=Si(0);function gu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Md=[];function Fd(){for(var n=0;n<Md.length;n++)Md[n]._workInProgressVersionPrimary=null;Md.length=0}var yu=ae.ReactCurrentDispatcher,Ud=ae.ReactCurrentBatchConfig,Ps=0,vt=null,jt=null,Ut=null,vu=!1,ja=!1,Da=0,Lw=0;function en(){throw Error(t(321))}function zd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!dr(n[a],s[a]))return!1;return!0}function Bd(n,s,a,c,f,g){if(Ps=g,vt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,yu.current=n===null||n.memoizedState===null?zw:Bw,n=a(c,f),ja){g=0;do{if(ja=!1,Da=0,25<=g)throw Error(t(301));g+=1,Ut=jt=null,s.updateQueue=null,yu.current=$w,n=a(c,f)}while(ja)}if(yu.current=Eu,s=jt!==null&&jt.next!==null,Ps=0,Ut=jt=vt=null,vu=!1,s)throw Error(t(300));return n}function $d(){var n=Da!==0;return Da=0,n}function kr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?vt.memoizedState=Ut=n:Ut=Ut.next=n,Ut}function Gn(){if(jt===null){var n=vt.alternate;n=n!==null?n.memoizedState:null}else n=jt.next;var s=Ut===null?vt.memoizedState:Ut.next;if(s!==null)Ut=s,jt=n;else{if(n===null)throw Error(t(310));jt=n,n={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Ut===null?vt.memoizedState=Ut=n:Ut=Ut.next=n}return Ut}function Va(n,s){return typeof s=="function"?s(n):s}function Wd(n){var s=Gn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=jt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var P=w=null,D=null,W=g;do{var ne=W.lane;if((Ps&ne)===ne)D!==null&&(D=D.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),c=W.hasEagerState?W.eagerState:n(c,W.action);else{var ie={lane:ne,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};D===null?(P=D=ie,w=c):D=D.next=ie,vt.lanes|=ne,As|=ne}W=W.next}while(W!==null&&W!==g);D===null?w=c:D.next=P,dr(c,s.memoizedState)||(wn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=D,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,vt.lanes|=g,As|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Hd(n){var s=Gn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);dr(g,s.memoizedState)||(wn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function hm(){}function fm(n,s){var a=vt,c=Gn(),f=s(),g=!dr(c.memoizedState,f);if(g&&(c.memoizedState=f,wn=!0),c=c.queue,qd(gm.bind(null,a,c,n),[n]),c.getSnapshot!==s||g||Ut!==null&&Ut.memoizedState.tag&1){if(a.flags|=2048,Oa(9,mm.bind(null,a,c,f,s),void 0,null),zt===null)throw Error(t(349));(Ps&30)!==0||pm(a,s,f)}return f}function pm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=vt.updateQueue,s===null?(s={lastEffect:null,stores:null},vt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function mm(n,s,a,c){s.value=a,s.getSnapshot=c,ym(s)&&vm(n)}function gm(n,s,a){return a(function(){ym(s)&&vm(n)})}function ym(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!dr(n,a)}catch{return!0}}function vm(n){var s=Zr(n,1);s!==null&&gr(s,n,1,-1)}function _m(n){var s=kr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:n},s.queue=n,n=n.dispatch=Uw.bind(null,vt,n),[s.memoizedState,n]}function Oa(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=vt.updateQueue,s===null?(s={lastEffect:null,stores:null},vt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function wm(){return Gn().memoizedState}function _u(n,s,a,c){var f=kr();vt.flags|=n,f.memoizedState=Oa(1|s,a,void 0,c===void 0?null:c)}function wu(n,s,a,c){var f=Gn();c=c===void 0?null:c;var g=void 0;if(jt!==null){var w=jt.memoizedState;if(g=w.destroy,c!==null&&zd(c,w.deps)){f.memoizedState=Oa(s,a,g,c);return}}vt.flags|=n,f.memoizedState=Oa(1|s,a,g,c)}function Em(n,s){return _u(8390656,8,n,s)}function qd(n,s){return wu(2048,8,n,s)}function Tm(n,s){return wu(4,2,n,s)}function xm(n,s){return wu(4,4,n,s)}function Im(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Sm(n,s,a){return a=a!=null?a.concat([n]):null,wu(4,4,Im.bind(null,s,n),a)}function Gd(){}function Cm(n,s){var a=Gn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&zd(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Rm(n,s){var a=Gn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&zd(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Pm(n,s,a){return(Ps&21)===0?(n.baseState&&(n.baseState=!1,wn=!0),n.memoizedState=a):(dr(a,s)||(a=ys(),vt.lanes|=a,As|=a,n.baseState=!0),s)}function Mw(n,s){var a=He;He=a!==0&&4>a?a:4,n(!0);var c=Ud.transition;Ud.transition={};try{n(!1),s()}finally{He=a,Ud.transition=c}}function Am(){return Gn().memoizedState}function Fw(n,s,a){var c=ji(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},km(n))Nm(s,a);else if(a=am(n,s,a,c),a!==null){var f=fn();gr(a,n,c,f),bm(a,s,c)}}function Uw(n,s,a){var c=ji(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(km(n))Nm(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,P=g(w,a);if(f.hasEagerState=!0,f.eagerState=P,dr(P,w)){var D=s.interleaved;D===null?(f.next=f,Dd(s)):(f.next=D.next,D.next=f),s.interleaved=f;return}}catch{}finally{}a=am(n,s,f,c),a!==null&&(f=fn(),gr(a,n,c,f),bm(a,s,c))}}function km(n){var s=n.alternate;return n===vt||s!==null&&s===vt}function Nm(n,s){ja=vu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function bm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,vi(n,a)}}var Eu={readContext:qn,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},zw={readContext:qn,useCallback:function(n,s){return kr().memoizedState=[n,s===void 0?null:s],n},useContext:qn,useEffect:Em,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,_u(4194308,4,Im.bind(null,s,n),a)},useLayoutEffect:function(n,s){return _u(4194308,4,n,s)},useInsertionEffect:function(n,s){return _u(4,2,n,s)},useMemo:function(n,s){var a=kr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=kr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=Fw.bind(null,vt,n),[c.memoizedState,n]},useRef:function(n){var s=kr();return n={current:n},s.memoizedState=n},useState:_m,useDebugValue:Gd,useDeferredValue:function(n){return kr().memoizedState=n},useTransition:function(){var n=_m(!1),s=n[0];return n=Mw.bind(null,n[1]),kr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=vt,f=kr();if(mt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),zt===null)throw Error(t(349));(Ps&30)!==0||pm(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Em(gm.bind(null,c,g,n),[n]),c.flags|=2048,Oa(9,mm.bind(null,c,g,a,s),void 0,null),a},useId:function(){var n=kr(),s=zt.identifierPrefix;if(mt){var a=Xr,c=Jr;a=(c&~(1<<32-cn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Da++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Lw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Bw={readContext:qn,useCallback:Cm,useContext:qn,useEffect:qd,useImperativeHandle:Sm,useInsertionEffect:Tm,useLayoutEffect:xm,useMemo:Rm,useReducer:Wd,useRef:wm,useState:function(){return Wd(Va)},useDebugValue:Gd,useDeferredValue:function(n){var s=Gn();return Pm(s,jt.memoizedState,n)},useTransition:function(){var n=Wd(Va)[0],s=Gn().memoizedState;return[n,s]},useMutableSource:hm,useSyncExternalStore:fm,useId:Am,unstable_isNewReconciler:!1},$w={readContext:qn,useCallback:Cm,useContext:qn,useEffect:qd,useImperativeHandle:Sm,useInsertionEffect:Tm,useLayoutEffect:xm,useMemo:Rm,useReducer:Hd,useRef:wm,useState:function(){return Hd(Va)},useDebugValue:Gd,useDeferredValue:function(n){var s=Gn();return jt===null?s.memoizedState=n:Pm(s,jt.memoizedState,n)},useTransition:function(){var n=Hd(Va)[0],s=Gn().memoizedState;return[n,s]},useMutableSource:hm,useSyncExternalStore:fm,useId:Am,unstable_isNewReconciler:!1};function fr(n,s){if(n&&n.defaultProps){s=he({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Kd(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:he({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tu={isMounted:function(n){return(n=n._reactInternals)?ir(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=fn(),f=ji(n),g=ei(c,f);g.payload=s,a!=null&&(g.callback=a),s=Ai(n,g,f),s!==null&&(gr(s,n,f,c),pu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=fn(),f=ji(n),g=ei(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Ai(n,g,f),s!==null&&(gr(s,n,f,c),pu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=fn(),c=ji(n),f=ei(a,c);f.tag=2,s!=null&&(f.callback=s),s=Ai(n,f,c),s!==null&&(gr(s,n,c,a),pu(s,n,c))}};function jm(n,s,a,c,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!Ta(a,c)||!Ta(f,g):!0}function Dm(n,s,a){var c=!1,f=Ci,g=s.contextType;return typeof g=="object"&&g!==null?g=qn(g):(f=_n(s)?xs:Zt.current,c=s.contextTypes,g=(c=c!=null)?wo(n,f):Ci),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Vm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Tu.enqueueReplaceState(s,s.state,null)}function Qd(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Vd(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=qn(g):(g=_n(s)?xs:Zt.current,f.context=wo(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Kd(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Tu.enqueueReplaceState(f,f.state,null),mu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Po(n,s){try{var a="",c=s;do a+=je(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Yd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Jd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Ww=typeof WeakMap=="function"?WeakMap:Map;function Om(n,s,a){a=ei(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Au||(Au=!0,hh=c),Jd(n,s)},a}function Lm(n,s,a){a=ei(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){Jd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Jd(n,s),typeof c!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Mm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Ww;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=iE.bind(null,n,s,a),s.then(n,n))}function Fm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Um(n,s,a,c,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ei(-1,1),s.tag=2,Ai(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Hw=ae.ReactCurrentOwner,wn=!1;function hn(n,s,a,c){s.child=n===null?om(s,null,a,c):Io(s,n.child,a,c)}function zm(n,s,a,c,f){a=a.render;var g=s.ref;return Co(s,f),c=Bd(n,s,a,c,g,f),a=$d(),n!==null&&!wn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ti(n,s,f)):(mt&&a&&Sd(s),s.flags|=1,hn(n,s,c,f),s.child)}function Bm(n,s,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!_h(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,$m(n,s,g,c,f)):(n=Vu(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ta,a(w,c)&&n.ref===s.ref)return ti(n,s,f)}return s.flags|=1,n=Vi(g,c),n.ref=s.ref,n.return=s,s.child=n}function $m(n,s,a,c,f){if(n!==null){var g=n.memoizedProps;if(Ta(g,c)&&n.ref===s.ref)if(wn=!1,s.pendingProps=c=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(wn=!0);else return s.lanes=n.lanes,ti(n,s,f)}return Xd(n,s,a,c,f)}function Wm(n,s,a){var c=s.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(ko,jn),jn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,at(ko,jn),jn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,at(ko,jn),jn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,at(ko,jn),jn|=c;return hn(n,s,f,a),s.child}function Hm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Xd(n,s,a,c,f){var g=_n(a)?xs:Zt.current;return g=wo(s,g),Co(s,f),a=Bd(n,s,a,c,g,f),c=$d(),n!==null&&!wn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ti(n,s,f)):(mt&&c&&Sd(s),s.flags|=1,hn(n,s,a,f),s.child)}function qm(n,s,a,c,f){if(_n(a)){var g=!0;ou(s)}else g=!1;if(Co(s,f),s.stateNode===null)Iu(n,s),Dm(s,a,c),Qd(s,a,c,f),c=!0;else if(n===null){var w=s.stateNode,P=s.memoizedProps;w.props=P;var D=w.context,W=a.contextType;typeof W=="object"&&W!==null?W=qn(W):(W=_n(a)?xs:Zt.current,W=wo(s,W));var ne=a.getDerivedStateFromProps,ie=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function";ie||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==c||D!==W)&&Vm(s,w,c,W),Pi=!1;var te=s.memoizedState;w.state=te,mu(s,c,w,f),D=s.memoizedState,P!==c||te!==D||vn.current||Pi?(typeof ne=="function"&&(Kd(s,a,ne,c),D=s.memoizedState),(P=Pi||jm(s,a,P,c,te,D,W))?(ie||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=D),w.props=c,w.state=D,w.context=W,c=P):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,lm(n,s),P=s.memoizedProps,W=s.type===s.elementType?P:fr(s.type,P),w.props=W,ie=s.pendingProps,te=w.context,D=a.contextType,typeof D=="object"&&D!==null?D=qn(D):(D=_n(a)?xs:Zt.current,D=wo(s,D));var me=a.getDerivedStateFromProps;(ne=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==ie||te!==D)&&Vm(s,w,c,D),Pi=!1,te=s.memoizedState,w.state=te,mu(s,c,w,f);var we=s.memoizedState;P!==ie||te!==we||vn.current||Pi?(typeof me=="function"&&(Kd(s,a,me,c),we=s.memoizedState),(W=Pi||jm(s,a,W,c,te,we,D)||!1)?(ne||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,we,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,we,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=we),w.props=c,w.state=we,w.context=D,c=W):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),c=!1)}return Zd(n,s,a,c,g,f)}function Zd(n,s,a,c,f,g){Hm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&Jp(s,a,!1),ti(n,s,g);c=s.stateNode,Hw.current=s;var P=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=Io(s,n.child,null,g),s.child=Io(s,null,P,g)):hn(n,s,P,g),s.memoizedState=c.state,f&&Jp(s,a,!0),s.child}function Gm(n){var s=n.stateNode;s.pendingContext?Qp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Qp(n,s.context,!1),Od(n,s.containerInfo)}function Km(n,s,a,c,f){return xo(),Ad(f),s.flags|=256,hn(n,s,a,c),s.child}var eh={dehydrated:null,treeContext:null,retryLane:0};function th(n){return{baseLanes:n,cachePool:null,transitions:null}}function Qm(n,s,a){var c=s.pendingProps,f=yt.current,g=!1,w=(s.flags&128)!==0,P;if((P=w)||(P=n!==null&&n.memoizedState===null?!1:(f&2)!==0),P?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),at(yt,f&1),n===null)return Pd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,g?(c=s.mode,g=s.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Ou(w,c,0,null),n=js(n,c,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=th(a),s.memoizedState=eh,n):nh(s,w));if(f=n.memoizedState,f!==null&&(P=f.dehydrated,P!==null))return qw(n,s,w,c,P,f,a);if(g){g=c.fallback,w=s.mode,f=n.child,P=f.sibling;var D={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=D,s.deletions=null):(c=Vi(f,D),c.subtreeFlags=f.subtreeFlags&14680064),P!==null?g=Vi(P,g):(g=js(g,w,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,w=n.child.memoizedState,w=w===null?th(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,s.memoizedState=eh,c}return g=n.child,n=g.sibling,c=Vi(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function nh(n,s){return s=Ou({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function xu(n,s,a,c){return c!==null&&Ad(c),Io(s,n.child,null,a),n=nh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function qw(n,s,a,c,f,g,w){if(a)return s.flags&256?(s.flags&=-257,c=Yd(Error(t(422))),xu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=Ou({mode:"visible",children:c.children},f,0,null),g=js(g,f,w,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&Io(s,n.child,null,w),s.child.memoizedState=th(w),s.memoizedState=eh,g);if((s.mode&1)===0)return xu(n,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var P=c.dgst;return c=P,g=Error(t(419)),c=Yd(g,c,void 0),xu(n,s,w,c)}if(P=(w&n.childLanes)!==0,wn||P){if(c=zt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Zr(n,f),gr(c,n,f,-1))}return vh(),c=Yd(Error(t(421))),xu(n,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=sE.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,bn=Ii(f.nextSibling),Nn=s,mt=!0,hr=null,n!==null&&(Wn[Hn++]=Jr,Wn[Hn++]=Xr,Wn[Hn++]=Is,Jr=n.id,Xr=n.overflow,Is=s),s=nh(s,c.children),s.flags|=4096,s)}function Ym(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),jd(n.return,s,a)}function rh(n,s,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Jm(n,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(hn(n,s,c.children,a),c=yt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ym(n,a,s);else if(n.tag===19)Ym(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(at(yt,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&gu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),rh(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&gu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}rh(s,!0,a,null,g);break;case"together":rh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Iu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ti(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),As|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Vi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Vi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Gw(n,s,a){switch(s.tag){case 3:Gm(s),xo();break;case 5:dm(s);break;case 1:_n(s.type)&&ou(s);break;case 4:Od(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;at(hu,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(at(yt,yt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Qm(n,s,a):(at(yt,yt.current&1),n=ti(n,s,a),n!==null?n.sibling:null);at(yt,yt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Jm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),at(yt,yt.current),c)break;return null;case 22:case 23:return s.lanes=0,Wm(n,s,a)}return ti(n,s,a)}var Xm,ih,Zm,eg;Xm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ih=function(){},Zm=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Rs(Ar.current);var g=null;switch(a){case"input":f=Mt(n,f),c=Mt(n,c),g=[];break;case"select":f=he({},f,{value:void 0}),c=he({},c,{value:void 0}),g=[];break;case"textarea":f=er(n,f),c=er(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ru)}it(a,c);var w;a=null;for(W in f)if(!c.hasOwnProperty(W)&&f.hasOwnProperty(W)&&f[W]!=null)if(W==="style"){var P=f[W];for(w in P)P.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?g||(g=[]):(g=g||[]).push(W,null));for(W in c){var D=c[W];if(P=f!=null?f[W]:void 0,c.hasOwnProperty(W)&&D!==P&&(D!=null||P!=null))if(W==="style")if(P){for(w in P)!P.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in D)D.hasOwnProperty(w)&&P[w]!==D[w]&&(a||(a={}),a[w]=D[w])}else a||(g||(g=[]),g.push(W,a)),a=D;else W==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,P=P?P.__html:void 0,D!=null&&P!==D&&(g=g||[]).push(W,D)):W==="children"?typeof D!="string"&&typeof D!="number"||(g=g||[]).push(W,""+D):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(D!=null&&W==="onScroll"&&lt("scroll",n),g||P===D||(g=[])):(g=g||[]).push(W,D))}a&&(g=g||[]).push("style",a);var W=g;(s.updateQueue=W)&&(s.flags|=4)}},eg=function(n,s,a,c){a!==c&&(s.flags|=4)};function La(n,s){if(!mt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function tn(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Kw(n,s,a){var c=s.pendingProps;switch(Cd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(s),null;case 1:return _n(s.type)&&su(),tn(s),null;case 3:return c=s.stateNode,Ro(),ut(vn),ut(Zt),Fd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(cu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,hr!==null&&(mh(hr),hr=null))),ih(n,s),tn(s),null;case 5:Ld(s);var f=Rs(ba.current);if(a=s.type,n!==null&&s.stateNode!=null)Zm(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return tn(s),null}if(n=Rs(Ar.current),cu(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[Pr]=s,c[Ra]=g,n=(s.mode&1)!==0,a){case"dialog":lt("cancel",c),lt("close",c);break;case"iframe":case"object":case"embed":lt("load",c);break;case"video":case"audio":for(f=0;f<Ia.length;f++)lt(Ia[f],c);break;case"source":lt("error",c);break;case"img":case"image":case"link":lt("error",c),lt("load",c);break;case"details":lt("toggle",c);break;case"input":Zn(c,g),lt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},lt("invalid",c);break;case"textarea":tr(c,g),lt("invalid",c)}it(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var P=g[w];w==="children"?typeof P=="string"?c.textContent!==P&&(g.suppressHydrationWarning!==!0&&nu(c.textContent,P,n),f=["children",P]):typeof P=="number"&&c.textContent!==""+P&&(g.suppressHydrationWarning!==!0&&nu(c.textContent,P,n),f=["children",""+P]):o.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&lt("scroll",c)}switch(a){case"input":un(c),Br(c,g,!0);break;case"textarea":un(c),fe(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=ru)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=se(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Pr]=s,n[Ra]=c,Xm(n,s,!1,!1),s.stateNode=n;e:{switch(w=Cn(a,c),a){case"dialog":lt("cancel",n),lt("close",n),f=c;break;case"iframe":case"object":case"embed":lt("load",n),f=c;break;case"video":case"audio":for(f=0;f<Ia.length;f++)lt(Ia[f],n);f=c;break;case"source":lt("error",n),f=c;break;case"img":case"image":case"link":lt("error",n),lt("load",n),f=c;break;case"details":lt("toggle",n),f=c;break;case"input":Zn(n,c),f=Mt(n,c),lt("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=he({},c,{value:void 0}),lt("invalid",n);break;case"textarea":tr(n,c),f=er(n,c),lt("invalid",n);break;default:f=c}it(a,f),P=f;for(g in P)if(P.hasOwnProperty(g)){var D=P[g];g==="style"?St(n,D):g==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&K(n,D)):g==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&O(n,D):typeof D=="number"&&O(n,""+D):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?D!=null&&g==="onScroll"&&lt("scroll",n):D!=null&&Y(n,g,D,w))}switch(a){case"input":un(n),Br(n,c,!1);break;case"textarea":un(n),fe(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ue(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?pn(n,!!c.multiple,g,!1):c.defaultValue!=null&&pn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=ru)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return tn(s),null;case 6:if(n&&s.stateNode!=null)eg(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Rs(ba.current),Rs(Ar.current),cu(s)){if(c=s.stateNode,a=s.memoizedProps,c[Pr]=s,(g=c.nodeValue!==a)&&(n=Nn,n!==null))switch(n.tag){case 3:nu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nu(c.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Pr]=s,s.stateNode=c}return tn(s),null;case 13:if(ut(yt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(mt&&bn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)rm(),xo(),s.flags|=98560,g=!1;else if(g=cu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Pr]=s}else xo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),g=!1}else hr!==null&&(mh(hr),hr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(yt.current&1)!==0?Dt===0&&(Dt=3):vh())),s.updateQueue!==null&&(s.flags|=4),tn(s),null);case 4:return Ro(),ih(n,s),n===null&&Sa(s.stateNode.containerInfo),tn(s),null;case 10:return bd(s.type._context),tn(s),null;case 17:return _n(s.type)&&su(),tn(s),null;case 19:if(ut(yt),g=s.memoizedState,g===null)return tn(s),null;if(c=(s.flags&128)!==0,w=g.rendering,w===null)if(c)La(g,!1);else{if(Dt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=gu(n),w!==null){for(s.flags|=128,La(g,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,n=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return at(yt,yt.current&1|2),s.child}n=n.sibling}g.tail!==null&&ot()>No&&(s.flags|=128,c=!0,La(g,!1),s.lanes=4194304)}else{if(!c)if(n=gu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),La(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!mt)return tn(s),null}else 2*ot()-g.renderingStartTime>No&&a!==1073741824&&(s.flags|=128,c=!0,La(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=ot(),s.sibling=null,a=yt.current,at(yt,c?a&1|2:a&1),s):(tn(s),null);case 22:case 23:return yh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(jn&1073741824)!==0&&(tn(s),s.subtreeFlags&6&&(s.flags|=8192)):tn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Qw(n,s){switch(Cd(s),s.tag){case 1:return _n(s.type)&&su(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ro(),ut(vn),ut(Zt),Fd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Ld(s),null;case 13:if(ut(yt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));xo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ut(yt),null;case 4:return Ro(),null;case 10:return bd(s.type._context),null;case 22:case 23:return yh(),null;case 24:return null;default:return null}}var Su=!1,nn=!1,Yw=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Ao(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){wt(n,s,c)}else a.current=null}function sh(n,s,a){try{a()}catch(c){wt(n,s,c)}}var tg=!1;function Jw(n,s){if(yd=Ei,n=jp(),ud(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,P=-1,D=-1,W=0,ne=0,ie=n,te=null;t:for(;;){for(var me;ie!==a||f!==0&&ie.nodeType!==3||(P=w+f),ie!==g||c!==0&&ie.nodeType!==3||(D=w+c),ie.nodeType===3&&(w+=ie.nodeValue.length),(me=ie.firstChild)!==null;)te=ie,ie=me;for(;;){if(ie===n)break t;if(te===a&&++W===f&&(P=w),te===g&&++ne===c&&(D=w),(me=ie.nextSibling)!==null)break;ie=te,te=ie.parentNode}ie=me}a=P===-1||D===-1?null:{start:P,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(vd={focusedElem:n,selectionRange:a},Ei=!1,ve=s;ve!==null;)if(s=ve,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ve=n;else for(;ve!==null;){s=ve;try{var we=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Te=we.memoizedProps,Tt=we.memoizedState,U=s.stateNode,V=U.getSnapshotBeforeUpdate(s.elementType===s.type?Te:fr(s.type,Te),Tt);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){wt(s,s.return,oe)}if(n=s.sibling,n!==null){n.return=s.return,ve=n;break}ve=s.return}return we=tg,tg=!1,we}function Ma(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&sh(s,a,g)}f=f.next}while(f!==c)}}function Cu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function oh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ng(n){var s=n.alternate;s!==null&&(n.alternate=null,ng(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Pr],delete s[Ra],delete s[Td],delete s[jw],delete s[Dw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rg(n){return n.tag===5||n.tag===3||n.tag===4}function ig(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ah(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ru));else if(c!==4&&(n=n.child,n!==null))for(ah(n,s,a),n=n.sibling;n!==null;)ah(n,s,a),n=n.sibling}function lh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(lh(n,s,a),n=n.sibling;n!==null;)lh(n,s,a),n=n.sibling}var qt=null,pr=!1;function ki(n,s,a){for(a=a.child;a!==null;)sg(n,s,a),a=a.sibling}function sg(n,s,a){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(ms,a)}catch{}switch(a.tag){case 5:nn||Ao(a,s);case 6:var c=qt,f=pr;qt=null,ki(n,s,a),qt=c,pr=f,qt!==null&&(pr?(n=qt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):qt.removeChild(a.stateNode));break;case 18:qt!==null&&(pr?(n=qt,a=a.stateNode,n.nodeType===8?Ed(n.parentNode,a):n.nodeType===1&&Ed(n,a),ur(n)):Ed(qt,a.stateNode));break;case 4:c=qt,f=pr,qt=a.stateNode.containerInfo,pr=!0,ki(n,s,a),qt=c,pr=f;break;case 0:case 11:case 14:case 15:if(!nn&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&sh(a,s,w),f=f.next}while(f!==c)}ki(n,s,a);break;case 1:if(!nn&&(Ao(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(P){wt(a,s,P)}ki(n,s,a);break;case 21:ki(n,s,a);break;case 22:a.mode&1?(nn=(c=nn)||a.memoizedState!==null,ki(n,s,a),nn=c):ki(n,s,a);break;default:ki(n,s,a)}}function og(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Yw),s.forEach(function(c){var f=oE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function mr(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,w=s,P=w;e:for(;P!==null;){switch(P.tag){case 5:qt=P.stateNode,pr=!1;break e;case 3:qt=P.stateNode.containerInfo,pr=!0;break e;case 4:qt=P.stateNode.containerInfo,pr=!0;break e}P=P.return}if(qt===null)throw Error(t(160));sg(g,w,f),qt=null,pr=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch(W){wt(f,s,W)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ag(s,n),s=s.sibling}function ag(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(mr(s,n),Nr(n),c&4){try{Ma(3,n,n.return),Cu(3,n)}catch(Te){wt(n,n.return,Te)}try{Ma(5,n,n.return)}catch(Te){wt(n,n.return,Te)}}break;case 1:mr(s,n),Nr(n),c&512&&a!==null&&Ao(a,a.return);break;case 5:if(mr(s,n),Nr(n),c&512&&a!==null&&Ao(a,a.return),n.flags&32){var f=n.stateNode;try{O(f,"")}catch(Te){wt(n,n.return,Te)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,P=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{P==="input"&&g.type==="radio"&&g.name!=null&&wr(f,g),Cn(P,w);var W=Cn(P,g);for(w=0;w<D.length;w+=2){var ne=D[w],ie=D[w+1];ne==="style"?St(f,ie):ne==="dangerouslySetInnerHTML"?K(f,ie):ne==="children"?O(f,ie):Y(f,ne,ie,W)}switch(P){case"input":Xe(f,g);break;case"textarea":X(f,g);break;case"select":var te=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var me=g.value;me!=null?pn(f,!!g.multiple,me,!1):te!==!!g.multiple&&(g.defaultValue!=null?pn(f,!!g.multiple,g.defaultValue,!0):pn(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ra]=g}catch(Te){wt(n,n.return,Te)}}break;case 6:if(mr(s,n),Nr(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(Te){wt(n,n.return,Te)}}break;case 3:if(mr(s,n),Nr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ur(s.containerInfo)}catch(Te){wt(n,n.return,Te)}break;case 4:mr(s,n),Nr(n);break;case 13:mr(s,n),Nr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(dh=ot())),c&4&&og(n);break;case 22:if(ne=a!==null&&a.memoizedState!==null,n.mode&1?(nn=(W=nn)||ne,mr(s,n),nn=W):mr(s,n),Nr(n),c&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!ne&&(n.mode&1)!==0)for(ve=n,ne=n.child;ne!==null;){for(ie=ve=ne;ve!==null;){switch(te=ve,me=te.child,te.tag){case 0:case 11:case 14:case 15:Ma(4,te,te.return);break;case 1:Ao(te,te.return);var we=te.stateNode;if(typeof we.componentWillUnmount=="function"){c=te,a=te.return;try{s=c,we.props=s.memoizedProps,we.state=s.memoizedState,we.componentWillUnmount()}catch(Te){wt(c,a,Te)}}break;case 5:Ao(te,te.return);break;case 22:if(te.memoizedState!==null){cg(ie);continue}}me!==null?(me.return=te,ve=me):cg(ie)}ne=ne.sibling}e:for(ne=null,ie=n;;){if(ie.tag===5){if(ne===null){ne=ie;try{f=ie.stateNode,W?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(P=ie.stateNode,D=ie.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,P.style.display=et("display",w))}catch(Te){wt(n,n.return,Te)}}}else if(ie.tag===6){if(ne===null)try{ie.stateNode.nodeValue=W?"":ie.memoizedProps}catch(Te){wt(n,n.return,Te)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===n)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===n)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===n)break e;ne===ie&&(ne=null),ie=ie.return}ne===ie&&(ne=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:mr(s,n),Nr(n),c&4&&og(n);break;case 21:break;default:mr(s,n),Nr(n)}}function Nr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(rg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(O(f,""),c.flags&=-33);var g=ig(n);lh(n,g,f);break;case 3:case 4:var w=c.stateNode.containerInfo,P=ig(n);ah(n,P,w);break;default:throw Error(t(161))}}catch(D){wt(n,n.return,D)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Xw(n,s,a){ve=n,lg(n)}function lg(n,s,a){for(var c=(n.mode&1)!==0;ve!==null;){var f=ve,g=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Su;if(!w){var P=f.alternate,D=P!==null&&P.memoizedState!==null||nn;P=Su;var W=nn;if(Su=w,(nn=D)&&!W)for(ve=f;ve!==null;)w=ve,D=w.child,w.tag===22&&w.memoizedState!==null?dg(f):D!==null?(D.return=w,ve=D):dg(f);for(;g!==null;)ve=g,lg(g),g=g.sibling;ve=f,Su=P,nn=W}ug(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ve=g):ug(n)}}function ug(n){for(;ve!==null;){var s=ve;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:nn||Cu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!nn)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:fr(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&cm(s,g,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}cm(s,w,a)}break;case 5:var P=s.stateNode;if(a===null&&s.flags&4){a=P;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var W=s.alternate;if(W!==null){var ne=W.memoizedState;if(ne!==null){var ie=ne.dehydrated;ie!==null&&ur(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}nn||s.flags&512&&oh(s)}catch(te){wt(s,s.return,te)}}if(s===n){ve=null;break}if(a=s.sibling,a!==null){a.return=s.return,ve=a;break}ve=s.return}}function cg(n){for(;ve!==null;){var s=ve;if(s===n){ve=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ve=a;break}ve=s.return}}function dg(n){for(;ve!==null;){var s=ve;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Cu(4,s)}catch(D){wt(s,a,D)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(D){wt(s,f,D)}}var g=s.return;try{oh(s)}catch(D){wt(s,g,D)}break;case 5:var w=s.return;try{oh(s)}catch(D){wt(s,w,D)}}}catch(D){wt(s,s.return,D)}if(s===n){ve=null;break}var P=s.sibling;if(P!==null){P.return=s.return,ve=P;break}ve=s.return}}var Zw=Math.ceil,Ru=ae.ReactCurrentDispatcher,uh=ae.ReactCurrentOwner,Kn=ae.ReactCurrentBatchConfig,Ke=0,zt=null,Rt=null,Gt=0,jn=0,ko=Si(0),Dt=0,Fa=null,As=0,Pu=0,ch=0,Ua=null,En=null,dh=0,No=1/0,ni=null,Au=!1,hh=null,Ni=null,ku=!1,bi=null,Nu=0,za=0,fh=null,bu=-1,ju=0;function fn(){return(Ke&6)!==0?ot():bu!==-1?bu:bu=ot()}function ji(n){return(n.mode&1)===0?1:(Ke&2)!==0&&Gt!==0?Gt&-Gt:Ow.transition!==null?(ju===0&&(ju=ys()),ju):(n=He,n!==0||(n=window.event,n=n===void 0?16:ma(n.type)),n)}function gr(n,s,a,c){if(50<za)throw za=0,fh=null,Error(t(185));yi(n,a,c),((Ke&2)===0||n!==zt)&&(n===zt&&((Ke&2)===0&&(Pu|=a),Dt===4&&Di(n,Gt)),Tn(n,c),a===1&&Ke===0&&(s.mode&1)===0&&(No=ot()+500,au&&Ri()))}function Tn(n,s){var a=n.callbackNode;Wr(n,s);var c=gs(n,n===zt?Gt:0);if(c===0)a!==null&&ca(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&ca(a),s===1)n.tag===0?Vw(fg.bind(null,n)):Xp(fg.bind(null,n)),Nw(function(){(Ke&6)===0&&Ri()}),a=null;else{switch(_i(c)){case 1:a=ps;break;case 4:a=pi;break;case 16:a=zn;break;case 536870912:a=jl;break;default:a=zn}a=Eg(a,hg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function hg(n,s){if(bu=-1,ju=0,(Ke&6)!==0)throw Error(t(327));var a=n.callbackNode;if(bo()&&n.callbackNode!==a)return null;var c=gs(n,n===zt?Gt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Du(n,c);else{s=c;var f=Ke;Ke|=2;var g=mg();(zt!==n||Gt!==s)&&(ni=null,No=ot()+500,Ns(n,s));do try{nE();break}catch(P){pg(n,P)}while(!0);Nd(),Ru.current=g,Ke=f,Rt!==null?s=0:(zt=null,Gt=0,s=Dt)}if(s!==0){if(s===2&&(f=Pn(n),f!==0&&(c=f,s=ph(n,f))),s===1)throw a=Fa,Ns(n,0),Di(n,c),Tn(n,ot()),a;if(s===6)Di(n,c);else{if(f=n.current.alternate,(c&30)===0&&!eE(f)&&(s=Du(n,c),s===2&&(g=Pn(n),g!==0&&(c=g,s=ph(n,g))),s===1))throw a=Fa,Ns(n,0),Di(n,c),Tn(n,ot()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:bs(n,En,ni);break;case 3:if(Di(n,c),(c&130023424)===c&&(s=dh+500-ot(),10<s)){if(gs(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){fn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=wd(bs.bind(null,n,En,ni),s);break}bs(n,En,ni);break;case 4:if(Di(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var w=31-cn(c);g=1<<w,w=s[w],w>f&&(f=w),c&=~g}if(c=f,c=ot()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Zw(c/1960))-c,10<c){n.timeoutHandle=wd(bs.bind(null,n,En,ni),c);break}bs(n,En,ni);break;case 5:bs(n,En,ni);break;default:throw Error(t(329))}}}return Tn(n,ot()),n.callbackNode===a?hg.bind(null,n):null}function ph(n,s){var a=Ua;return n.current.memoizedState.isDehydrated&&(Ns(n,s).flags|=256),n=Du(n,s),n!==2&&(s=En,En=a,s!==null&&mh(s)),n}function mh(n){En===null?En=n:En.push.apply(En,n)}function eE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!dr(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Di(n,s){for(s&=~ch,s&=~Pu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-cn(s),c=1<<a;n[a]=-1,s&=~c}}function fg(n){if((Ke&6)!==0)throw Error(t(327));bo();var s=gs(n,0);if((s&1)===0)return Tn(n,ot()),null;var a=Du(n,s);if(n.tag!==0&&a===2){var c=Pn(n);c!==0&&(s=c,a=ph(n,c))}if(a===1)throw a=Fa,Ns(n,0),Di(n,s),Tn(n,ot()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,bs(n,En,ni),Tn(n,ot()),null}function gh(n,s){var a=Ke;Ke|=1;try{return n(s)}finally{Ke=a,Ke===0&&(No=ot()+500,au&&Ri())}}function ks(n){bi!==null&&bi.tag===0&&(Ke&6)===0&&bo();var s=Ke;Ke|=1;var a=Kn.transition,c=He;try{if(Kn.transition=null,He=1,n)return n()}finally{He=c,Kn.transition=a,Ke=s,(Ke&6)===0&&Ri()}}function yh(){jn=ko.current,ut(ko)}function Ns(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,kw(a)),Rt!==null)for(a=Rt.return;a!==null;){var c=a;switch(Cd(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&su();break;case 3:Ro(),ut(vn),ut(Zt),Fd();break;case 5:Ld(c);break;case 4:Ro();break;case 13:ut(yt);break;case 19:ut(yt);break;case 10:bd(c.type._context);break;case 22:case 23:yh()}a=a.return}if(zt=n,Rt=n=Vi(n.current,null),Gt=jn=s,Dt=0,Fa=null,ch=Pu=As=0,En=Ua=null,Cs!==null){for(s=0;s<Cs.length;s++)if(a=Cs[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,c.next=w}a.pending=c}Cs=null}return n}function pg(n,s){do{var a=Rt;try{if(Nd(),yu.current=Eu,vu){for(var c=vt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}vu=!1}if(Ps=0,Ut=jt=vt=null,ja=!1,Da=0,uh.current=null,a===null||a.return===null){Dt=1,Fa=s,Rt=null;break}e:{var g=n,w=a.return,P=a,D=s;if(s=Gt,P.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=D,ne=P,ie=ne.tag;if((ne.mode&1)===0&&(ie===0||ie===11||ie===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var me=Fm(w);if(me!==null){me.flags&=-257,Um(me,w,P,g,s),me.mode&1&&Mm(g,W,s),s=me,D=W;var we=s.updateQueue;if(we===null){var Te=new Set;Te.add(D),s.updateQueue=Te}else we.add(D);break e}else{if((s&1)===0){Mm(g,W,s),vh();break e}D=Error(t(426))}}else if(mt&&P.mode&1){var Tt=Fm(w);if(Tt!==null){(Tt.flags&65536)===0&&(Tt.flags|=256),Um(Tt,w,P,g,s),Ad(Po(D,P));break e}}g=D=Po(D,P),Dt!==4&&(Dt=2),Ua===null?Ua=[g]:Ua.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var U=Om(g,D,s);um(g,U);break e;case 1:P=D;var V=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Ni===null||!Ni.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var oe=Lm(g,P,s);um(g,oe);break e}}g=g.return}while(g!==null)}yg(a)}catch(Se){s=Se,Rt===a&&a!==null&&(Rt=a=a.return);continue}break}while(!0)}function mg(){var n=Ru.current;return Ru.current=Eu,n===null?Eu:n}function vh(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),zt===null||(As&268435455)===0&&(Pu&268435455)===0||Di(zt,Gt)}function Du(n,s){var a=Ke;Ke|=2;var c=mg();(zt!==n||Gt!==s)&&(ni=null,Ns(n,s));do try{tE();break}catch(f){pg(n,f)}while(!0);if(Nd(),Ke=a,Ru.current=c,Rt!==null)throw Error(t(261));return zt=null,Gt=0,Dt}function tE(){for(;Rt!==null;)gg(Rt)}function nE(){for(;Rt!==null&&!Nl();)gg(Rt)}function gg(n){var s=wg(n.alternate,n,jn);n.memoizedProps=n.pendingProps,s===null?yg(n):Rt=s,uh.current=null}function yg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Kw(a,s,jn),a!==null){Rt=a;return}}else{if(a=Qw(a,s),a!==null){a.flags&=32767,Rt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Dt=6,Rt=null;return}}if(s=s.sibling,s!==null){Rt=s;return}Rt=s=n}while(s!==null);Dt===0&&(Dt=5)}function bs(n,s,a){var c=He,f=Kn.transition;try{Kn.transition=null,He=1,rE(n,s,a,c)}finally{Kn.transition=f,He=c}return null}function rE(n,s,a,c){do bo();while(bi!==null);if((Ke&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(tt(n,g),n===zt&&(Rt=zt=null,Gt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ku||(ku=!0,Eg(zn,function(){return bo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Kn.transition,Kn.transition=null;var w=He;He=1;var P=Ke;Ke|=4,uh.current=null,Jw(n,a),ag(a,n),xw(vd),Ei=!!yd,vd=yd=null,n.current=a,Xw(a),td(),Ke=P,He=w,Kn.transition=g}else n.current=a;if(ku&&(ku=!1,bi=n,Nu=f),g=n.pendingLanes,g===0&&(Ni=null),Dl(a.stateNode),Tn(n,ot()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Au)throw Au=!1,n=hh,hh=null,n;return(Nu&1)!==0&&n.tag!==0&&bo(),g=n.pendingLanes,(g&1)!==0?n===fh?za++:(za=0,fh=n):za=0,Ri(),null}function bo(){if(bi!==null){var n=_i(Nu),s=Kn.transition,a=He;try{if(Kn.transition=null,He=16>n?16:n,bi===null)var c=!1;else{if(n=bi,bi=null,Nu=0,(Ke&6)!==0)throw Error(t(331));var f=Ke;for(Ke|=4,ve=n.current;ve!==null;){var g=ve,w=g.child;if((ve.flags&16)!==0){var P=g.deletions;if(P!==null){for(var D=0;D<P.length;D++){var W=P[D];for(ve=W;ve!==null;){var ne=ve;switch(ne.tag){case 0:case 11:case 15:Ma(8,ne,g)}var ie=ne.child;if(ie!==null)ie.return=ne,ve=ie;else for(;ve!==null;){ne=ve;var te=ne.sibling,me=ne.return;if(ng(ne),ne===W){ve=null;break}if(te!==null){te.return=me,ve=te;break}ve=me}}}var we=g.alternate;if(we!==null){var Te=we.child;if(Te!==null){we.child=null;do{var Tt=Te.sibling;Te.sibling=null,Te=Tt}while(Te!==null)}}ve=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,ve=w;else e:for(;ve!==null;){if(g=ve,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ma(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,ve=U;break e}ve=g.return}}var V=n.current;for(ve=V;ve!==null;){w=ve;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,ve=B;else e:for(w=V;ve!==null;){if(P=ve,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Cu(9,P)}}catch(Se){wt(P,P.return,Se)}if(P===w){ve=null;break e}var oe=P.sibling;if(oe!==null){oe.return=P.return,ve=oe;break e}ve=P.return}}if(Ke=f,Ri(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(ms,n)}catch{}c=!0}return c}finally{He=a,Kn.transition=s}}return!1}function vg(n,s,a){s=Po(a,s),s=Om(n,s,1),n=Ai(n,s,1),s=fn(),n!==null&&(yi(n,1,s),Tn(n,s))}function wt(n,s,a){if(n.tag===3)vg(n,n,a);else for(;s!==null;){if(s.tag===3){vg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ni===null||!Ni.has(c))){n=Po(a,n),n=Lm(s,n,1),s=Ai(s,n,1),n=fn(),s!==null&&(yi(s,1,n),Tn(s,n));break}}s=s.return}}function iE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=fn(),n.pingedLanes|=n.suspendedLanes&a,zt===n&&(Gt&a)===a&&(Dt===4||Dt===3&&(Gt&130023424)===Gt&&500>ot()-dh?Ns(n,0):ch|=a),Tn(n,s)}function _g(n,s){s===0&&((n.mode&1)===0?s=1:(s=eo,eo<<=1,(eo&130023424)===0&&(eo=4194304)));var a=fn();n=Zr(n,s),n!==null&&(yi(n,s,a),Tn(n,a))}function sE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),_g(n,a)}function oE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),_g(n,a)}var wg;wg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||vn.current)wn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return wn=!1,Gw(n,s,a);wn=(n.flags&131072)!==0}else wn=!1,mt&&(s.flags&1048576)!==0&&Zp(s,uu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Iu(n,s),n=s.pendingProps;var f=wo(s,Zt.current);Co(s,a),f=Bd(null,s,c,n,f,a);var g=$d();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,_n(c)?(g=!0,ou(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Vd(s),f.updater=Tu,s.stateNode=f,f._reactInternals=s,Qd(s,c,n,a),s=Zd(null,s,c,!0,g,a)):(s.tag=0,mt&&g&&Sd(s),hn(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Iu(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=lE(c),n=fr(c,n),f){case 0:s=Xd(null,s,c,n,a);break e;case 1:s=qm(null,s,c,n,a);break e;case 11:s=zm(null,s,c,n,a);break e;case 14:s=Bm(null,s,c,fr(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:fr(c,f),Xd(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:fr(c,f),qm(n,s,c,f,a);case 3:e:{if(Gm(s),n===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,lm(n,s),mu(s,c,null,a);var w=s.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Po(Error(t(423)),s),s=Km(n,s,c,a,f);break e}else if(c!==f){f=Po(Error(t(424)),s),s=Km(n,s,c,a,f);break e}else for(bn=Ii(s.stateNode.containerInfo.firstChild),Nn=s,mt=!0,hr=null,a=om(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(xo(),c===f){s=ti(n,s,a);break e}hn(n,s,c,a)}s=s.child}return s;case 5:return dm(s),n===null&&Pd(s),c=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,w=f.children,_d(c,f)?w=null:g!==null&&_d(c,g)&&(s.flags|=32),Hm(n,s),hn(n,s,w,a),s.child;case 6:return n===null&&Pd(s),null;case 13:return Qm(n,s,a);case 4:return Od(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Io(s,null,c,a):hn(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:fr(c,f),zm(n,s,c,f,a);case 7:return hn(n,s,s.pendingProps,a),s.child;case 8:return hn(n,s,s.pendingProps.children,a),s.child;case 12:return hn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,at(hu,c._currentValue),c._currentValue=w,g!==null)if(dr(g.value,w)){if(g.children===f.children&&!vn.current){s=ti(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var P=g.dependencies;if(P!==null){w=g.child;for(var D=P.firstContext;D!==null;){if(D.context===c){if(g.tag===1){D=ei(-1,a&-a),D.tag=2;var W=g.updateQueue;if(W!==null){W=W.shared;var ne=W.pending;ne===null?D.next=D:(D.next=ne.next,ne.next=D),W.pending=D}}g.lanes|=a,D=g.alternate,D!==null&&(D.lanes|=a),jd(g.return,a,s),P.lanes|=a;break}D=D.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,P=w.alternate,P!==null&&(P.lanes|=a),jd(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}hn(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,Co(s,a),f=qn(f),c=c(f),s.flags|=1,hn(n,s,c,a),s.child;case 14:return c=s.type,f=fr(c,s.pendingProps),f=fr(c.type,f),Bm(n,s,c,f,a);case 15:return $m(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:fr(c,f),Iu(n,s),s.tag=1,_n(c)?(n=!0,ou(s)):n=!1,Co(s,a),Dm(s,c,f),Qd(s,c,f,a),Zd(null,s,c,!0,n,a);case 19:return Jm(n,s,a);case 22:return Wm(n,s,a)}throw Error(t(156,s.tag))};function Eg(n,s){return Xs(n,s)}function aE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(n,s,a,c){return new aE(n,s,a,c)}function _h(n){return n=n.prototype,!(!n||!n.isReactComponent)}function lE(n){if(typeof n=="function")return _h(n)?1:0;if(n!=null){if(n=n.$$typeof,n===N)return 11;if(n===nt)return 14}return 2}function Vi(n,s){var a=n.alternate;return a===null?(a=Qn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vu(n,s,a,c,f,g){var w=2;if(c=n,typeof n=="function")_h(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case j:return js(a.children,f,g,s);case S:w=8,f|=8;break;case b:return n=Qn(12,a,s,f|2),n.elementType=b,n.lanes=g,n;case A:return n=Qn(13,a,s,f),n.elementType=A,n.lanes=g,n;case Fe:return n=Qn(19,a,s,f),n.elementType=Fe,n.lanes=g,n;case Be:return Ou(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:w=10;break e;case k:w=9;break e;case N:w=11;break e;case nt:w=14;break e;case gt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Qn(w,a,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function js(n,s,a,c){return n=Qn(7,n,c,s),n.lanes=a,n}function Ou(n,s,a,c){return n=Qn(22,n,c,s),n.elementType=Be,n.lanes=a,n.stateNode={isHidden:!1},n}function wh(n,s,a){return n=Qn(6,n,null,s),n.lanes=a,n}function Eh(n,s,a){return s=Qn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function uE(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gi(0),this.expirationTimes=gi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Th(n,s,a,c,f,g,w,P,D){return n=new uE(n,s,a,P,D),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Qn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vd(g),n}function cE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Tg(n){if(!n)return Ci;n=n._reactInternals;e:{if(ir(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(_n(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(_n(a))return Yp(n,a,s)}return s}function xg(n,s,a,c,f,g,w,P,D){return n=Th(a,c,!0,n,f,g,w,P,D),n.context=Tg(null),a=n.current,c=fn(),f=ji(a),g=ei(c,f),g.callback=s??null,Ai(a,g,f),n.current.lanes=f,yi(n,f,c),Tn(n,c),n}function Lu(n,s,a,c){var f=s.current,g=fn(),w=ji(f);return a=Tg(a),s.context===null?s.context=a:s.pendingContext=a,s=ei(g,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Ai(f,s,w),n!==null&&(gr(n,f,w,g),pu(n,f,w)),w}function Mu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ig(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function xh(n,s){Ig(n,s),(n=n.alternate)&&Ig(n,s)}function dE(){return null}var Sg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ih(n){this._internalRoot=n}Fu.prototype.render=Ih.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Lu(n,s,null,null)},Fu.prototype.unmount=Ih.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ks(function(){Lu(null,n,null,null)}),s[Qr]=null}};function Fu(n){this._internalRoot=n}Fu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Fl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Ir.length&&s!==0&&s<Ir[a].priority;a++);Ir.splice(a,0,n),a===0&&Bl(n)}};function Sh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Cg(){}function hE(n,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var W=Mu(w);g.call(W)}}var w=xg(s,c,n,0,null,!1,!1,"",Cg);return n._reactRootContainer=w,n[Qr]=w.current,Sa(n.nodeType===8?n.parentNode:n),ks(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var P=c;c=function(){var W=Mu(D);P.call(W)}}var D=Th(n,0,!1,null,null,!1,!1,"",Cg);return n._reactRootContainer=D,n[Qr]=D.current,Sa(n.nodeType===8?n.parentNode:n),ks(function(){Lu(s,D,a,c)}),D}function zu(n,s,a,c,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var P=f;f=function(){var D=Mu(w);P.call(D)}}Lu(s,w,n,f)}else w=hE(a,s,n,f,c);return Mu(w)}Ll=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=mi(s.pendingLanes);a!==0&&(vi(s,a|1),Tn(s,ot()),(Ke&6)===0&&(No=ot()+500,Ri()))}break;case 13:ks(function(){var c=Zr(n,1);if(c!==null){var f=fn();gr(c,n,1,f)}}),xh(n,1)}},to=function(n){if(n.tag===13){var s=Zr(n,134217728);if(s!==null){var a=fn();gr(s,n,134217728,a)}xh(n,134217728)}},Ml=function(n){if(n.tag===13){var s=ji(n),a=Zr(n,s);if(a!==null){var c=fn();gr(a,n,s,c)}xh(n,s)}},Fl=function(){return He},Ul=function(n,s){var a=He;try{return He=n,s()}finally{He=a}},Tr=function(n,s,a){switch(s){case"input":if(Xe(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=iu(c);if(!f)throw Error(t(90));Xt(c),Xe(c,f)}}}break;case"textarea":X(n,a);break;case"select":s=a.value,s!=null&&pn(n,!!a.multiple,s,!1)}},st=gh,Un=ks;var fE={usingClientEntryPoint:!1,Events:[Pa,vo,iu,Fn,cs,gh]},Ba={findFiberByHostInstance:Ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pE={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ua(n),n===null?null:n.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||dE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{ms=Bu.inject(pE),Rn=Bu}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fE,xn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sh(s))throw Error(t(200));return cE(n,s,null,a)},xn.createRoot=function(n,s){if(!Sh(n))throw Error(t(299));var a=!1,c="",f=Sg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Th(n,1,!1,null,null,a,!1,c,f),n[Qr]=s.current,Sa(n.nodeType===8?n.parentNode:n),new Ih(s)},xn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ua(s),n=n===null?null:n.stateNode,n},xn.flushSync=function(n){return ks(n)},xn.hydrate=function(n,s,a){if(!Uu(s))throw Error(t(200));return zu(null,n,s,!0,a)},xn.hydrateRoot=function(n,s,a){if(!Sh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",w=Sg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=xg(s,null,n,1,a??null,f,!1,g,w),n[Qr]=s.current,Sa(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Fu(s)},xn.render=function(n,s,a){if(!Uu(s))throw Error(t(200));return zu(null,n,s,!1,a)},xn.unmountComponentAtNode=function(n){if(!Uu(n))throw Error(t(40));return n._reactRootContainer?(ks(function(){zu(null,null,n,!1,function(){n._reactRootContainer=null,n[Qr]=null})}),!0):!1},xn.unstable_batchedUpdates=gh,xn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Uu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return zu(n,s,a,!1,c)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var Dg;function Sv(){if(Dg)return Ph.exports;Dg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ph.exports=xE(),Ph.exports}var Vg;function IE(){if(Vg)return $u;Vg=1;var r=Sv();return $u.createRoot=r.createRoot,$u.hydrateRoot=r.hydrateRoot,$u}var SE=IE();const CE=xv(SE);Sv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ol.apply(this,arguments)}var zi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(zi||(zi={}));const Og="popstate";function RE(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:d,hash:p}=i.location;return Hh("",{pathname:l,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:uc(o)}return AE(e,t,null,r)}function It(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function xf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PE(){return Math.random().toString(36).substr(2,8)}function Lg(r,e){return{usr:r.state,key:r.key,idx:e}}function Hh(r,e,t,i){return t===void 0&&(t=null),ol({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Jo(e):e,{state:t,key:e&&e.key||i||PE()})}function uc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Jo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function AE(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,p=zi.Pop,y=null,v=E();v==null&&(v=0,d.replaceState(ol({},d.state,{idx:v}),""));function E(){return(d.state||{idx:null}).idx}function I(){p=zi.Pop;let L=E(),re=L==null?null:L-v;v=L,y&&y({action:p,location:$.location,delta:re})}function R(L,re){p=zi.Push;let ce=Hh($.location,L,re);v=E()+1;let Y=Lg(ce,v),ae=$.createHref(ce);try{d.pushState(Y,"",ae)}catch(Ee){if(Ee instanceof DOMException&&Ee.name==="DataCloneError")throw Ee;o.location.assign(ae)}l&&y&&y({action:p,location:$.location,delta:1})}function z(L,re){p=zi.Replace;let ce=Hh($.location,L,re);v=E();let Y=Lg(ce,v),ae=$.createHref(ce);d.replaceState(Y,"",ae),l&&y&&y({action:p,location:$.location,delta:0})}function H(L){let re=o.location.origin!=="null"?o.location.origin:o.location.href,ce=typeof L=="string"?L:uc(L);return ce=ce.replace(/ $/,"%20"),It(re,"No window.location.(origin|href) available to create URL for href: "+ce),new URL(ce,re)}let $={get action(){return p},get location(){return r(o,d)},listen(L){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(Og,I),y=L,()=>{o.removeEventListener(Og,I),y=null}},createHref(L){return e(o,L)},createURL:H,encodeLocation(L){let re=H(L);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:R,replace:z,go(L){return d.go(L)}};return $}var Mg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Mg||(Mg={}));function kE(r,e,t){return t===void 0&&(t="/"),NE(r,e,t)}function NE(r,e,t,i){let o=typeof e=="string"?Jo(e):e,l=If(o.pathname||"/",t);if(l==null)return null;let d=Cv(r);bE(d);let p=null;for(let y=0;p==null&&y<d.length;++y){let v=WE(l);p=zE(d[y],v)}return p}function Cv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,d,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};y.relativePath.startsWith("/")&&(It(y.relativePath.startsWith(i),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(i.length));let v=$i([i,y.relativePath]),E=t.concat(y);l.children&&l.children.length>0&&(It(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Cv(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:FE(v,l.index),routesMeta:E})};return r.forEach((l,d)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,d);else for(let y of Rv(l.path))o(l,d,y)}),e}function Rv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=Rv(i.join("/")),p=[];return p.push(...d.map(y=>y===""?l:[l,y].join("/"))),o&&p.push(...d),p.map(y=>r.startsWith("/")&&y===""?"/":y)}function bE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:UE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const jE=/^:[\w-]+$/,DE=3,VE=2,OE=1,LE=10,ME=-2,Fg=r=>r==="*";function FE(r,e){let t=r.split("/"),i=t.length;return t.some(Fg)&&(i+=ME),e&&(i+=VE),t.filter(o=>!Fg(o)).reduce((o,l)=>o+(jE.test(l)?DE:l===""?OE:LE),i)}function UE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function zE(r,e,t){let{routesMeta:i}=r,o={},l="/",d=[];for(let p=0;p<i.length;++p){let y=i[p],v=p===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",I=BE({path:y.relativePath,caseSensitive:y.caseSensitive,end:v},E),R=y.route;if(!I)return null;Object.assign(o,I.params),d.push({params:o,pathname:$i([l,I.pathname]),pathnameBase:QE($i([l,I.pathnameBase])),route:R}),I.pathnameBase!=="/"&&(l=$i([l,I.pathnameBase]))}return d}function BE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=$E(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((v,E,I)=>{let{paramName:R,isOptional:z}=E;if(R==="*"){let $=p[I]||"";d=l.slice(0,l.length-$.length).replace(/(.)\/+$/,"$1")}const H=p[I];return z&&!H?v[R]=void 0:v[R]=(H||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function $E(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),xf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,y)=>(i.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function WE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function If(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const HE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qE=r=>HE.test(r);function GE(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?Jo(r):r,l;if(t)if(qE(t))l=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),xf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+t))}t.startsWith("/")?l=Ug(t.substring(1),"/"):l=Ug(t,e)}else l=e;return{pathname:l,search:YE(i),hash:JE(o)}}function Ug(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Nh(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Sf(r,e){let t=KE(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Cf(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=Jo(r):(o=ol({},r),It(!o.pathname||!o.pathname.includes("?"),Nh("?","pathname","search",o)),It(!o.pathname||!o.pathname.includes("#"),Nh("#","pathname","hash",o)),It(!o.search||!o.search.includes("#"),Nh("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,p;if(d==null)p=t;else{let I=e.length-1;if(!i&&d.startsWith("..")){let R=d.split("/");for(;R[0]==="..";)R.shift(),I-=1;o.pathname=R.join("/")}p=I>=0?e[I]:"/"}let y=GE(o,p),v=d&&d!=="/"&&d.endsWith("/"),E=(l||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(v||E)&&(y.pathname+="/"),y}const $i=r=>r.join("/").replace(/\/\/+/g,"/"),QE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),YE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,JE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function XE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Pv=["post","put","patch","delete"];new Set(Pv);const ZE=["get",...Pv];new Set(ZE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},al.apply(this,arguments)}const Rf=G.createContext(null),eT=G.createContext(null),rs=G.createContext(null),kc=G.createContext(null),is=G.createContext({outlet:null,matches:[],isDataRoute:!1}),Av=G.createContext(null);function tT(r,e){let{relative:t}=e===void 0?{}:e;Xo()||It(!1);let{basename:i,navigator:o}=G.useContext(rs),{hash:l,pathname:d,search:p}=Nv(r,{relative:t}),y=d;return i!=="/"&&(y=d==="/"?i:$i([i,d])),o.createHref({pathname:y,search:p,hash:l})}function Xo(){return G.useContext(kc)!=null}function yl(){return Xo()||It(!1),G.useContext(kc).location}function kv(r){G.useContext(rs).static||G.useLayoutEffect(r)}function Nc(){let{isDataRoute:r}=G.useContext(is);return r?pT():nT()}function nT(){Xo()||It(!1);let r=G.useContext(Rf),{basename:e,future:t,navigator:i}=G.useContext(rs),{matches:o}=G.useContext(is),{pathname:l}=yl(),d=JSON.stringify(Sf(o,t.v7_relativeSplatPath)),p=G.useRef(!1);return kv(()=>{p.current=!0}),G.useCallback(function(v,E){if(E===void 0&&(E={}),!p.current)return;if(typeof v=="number"){i.go(v);return}let I=Cf(v,JSON.parse(d),l,E.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:$i([e,I.pathname])),(E.replace?i.replace:i.push)(I,E.state,E)},[e,i,d,l,r])}function Nv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=G.useContext(rs),{matches:o}=G.useContext(is),{pathname:l}=yl(),d=JSON.stringify(Sf(o,i.v7_relativeSplatPath));return G.useMemo(()=>Cf(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function rT(r,e){return iT(r,e)}function iT(r,e,t,i){Xo()||It(!1);let{navigator:o}=G.useContext(rs),{matches:l}=G.useContext(is),d=l[l.length-1],p=d?d.params:{};d&&d.pathname;let y=d?d.pathnameBase:"/";d&&d.route;let v=yl(),E;if(e){var I;let L=typeof e=="string"?Jo(e):e;y==="/"||(I=L.pathname)!=null&&I.startsWith(y)||It(!1),E=L}else E=v;let R=E.pathname||"/",z=R;if(y!=="/"){let L=y.replace(/^\//,"").split("/");z="/"+R.replace(/^\//,"").split("/").slice(L.length).join("/")}let H=kE(r,{pathname:z}),$=uT(H&&H.map(L=>Object.assign({},L,{params:Object.assign({},p,L.params),pathname:$i([y,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?y:$i([y,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,t,i);return e&&$?G.createElement(kc.Provider,{value:{location:al({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:zi.Pop}},$):$}function sT(){let r=fT(),e=XE(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:o},t):null,null)}const oT=G.createElement(sT,null);class aT extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?G.createElement(is.Provider,{value:this.props.routeContext},G.createElement(Av.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lT(r){let{routeContext:e,match:t,children:i}=r,o=G.useContext(Rf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),G.createElement(is.Provider,{value:e},i)}function uT(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let E=d.findIndex(I=>I.route.id&&(p==null?void 0:p[I.route.id])!==void 0);E>=0||It(!1),d=d.slice(0,Math.min(d.length,E+1))}let y=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<d.length;E++){let I=d[E];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(v=E),I.route.id){let{loaderData:R,errors:z}=t,H=I.route.loader&&R[I.route.id]===void 0&&(!z||z[I.route.id]===void 0);if(I.route.lazy||H){y=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((E,I,R)=>{let z,H=!1,$=null,L=null;t&&(z=p&&I.route.id?p[I.route.id]:void 0,$=I.route.errorElement||oT,y&&(v<0&&R===0?(mT("route-fallback"),H=!0,L=null):v===R&&(H=!0,L=I.route.hydrateFallbackElement||null)));let re=e.concat(d.slice(0,R+1)),ce=()=>{let Y;return z?Y=$:H?Y=L:I.route.Component?Y=G.createElement(I.route.Component,null):I.route.element?Y=I.route.element:Y=E,G.createElement(lT,{match:I,routeContext:{outlet:E,matches:re,isDataRoute:t!=null},children:Y})};return t&&(I.route.ErrorBoundary||I.route.errorElement||R===0)?G.createElement(aT,{location:t.location,revalidation:t.revalidation,component:$,error:z,children:ce(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):ce()},null)}var bv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(bv||{}),jv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(jv||{});function cT(r){let e=G.useContext(Rf);return e||It(!1),e}function dT(r){let e=G.useContext(eT);return e||It(!1),e}function hT(r){let e=G.useContext(is);return e||It(!1),e}function Dv(r){let e=hT(),t=e.matches[e.matches.length-1];return t.route.id||It(!1),t.route.id}function fT(){var r;let e=G.useContext(Av),t=dT(),i=Dv();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function pT(){let{router:r}=cT(bv.UseNavigateStable),e=Dv(jv.UseNavigateStable),t=G.useRef(!1);return kv(()=>{t.current=!0}),G.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,al({fromRouteId:e},l)))},[r,e])}const zg={};function mT(r,e,t){zg[r]||(zg[r]=!0)}function gT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function yT(r){let{to:e,replace:t,state:i,relative:o}=r;Xo()||It(!1);let{future:l,static:d}=G.useContext(rs),{matches:p}=G.useContext(is),{pathname:y}=yl(),v=Nc(),E=Cf(e,Sf(p,l.v7_relativeSplatPath),y,o==="path"),I=JSON.stringify(E);return G.useEffect(()=>v(JSON.parse(I),{replace:t,state:i,relative:o}),[v,I,o,t,i]),null}function ri(r){It(!1)}function vT(r){let{basename:e="/",children:t=null,location:i,navigationType:o=zi.Pop,navigator:l,static:d=!1,future:p}=r;Xo()&&It(!1);let y=e.replace(/^\/*/,"/"),v=G.useMemo(()=>({basename:y,navigator:l,static:d,future:al({v7_relativeSplatPath:!1},p)}),[y,p,l,d]);typeof i=="string"&&(i=Jo(i));let{pathname:E="/",search:I="",hash:R="",state:z=null,key:H="default"}=i,$=G.useMemo(()=>{let L=If(E,y);return L==null?null:{location:{pathname:L,search:I,hash:R,state:z,key:H},navigationType:o}},[y,E,I,R,z,H,o]);return $==null?null:G.createElement(rs.Provider,{value:v},G.createElement(kc.Provider,{children:t,value:$}))}function _T(r){let{children:e,location:t}=r;return rT(qh(e),t)}new Promise(()=>{});function qh(r,e){e===void 0&&(e=[]);let t=[];return G.Children.forEach(r,(i,o)=>{if(!G.isValidElement(i))return;let l=[...e,o];if(i.type===G.Fragment){t.push.apply(t,qh(i.props.children,l));return}i.type!==ri&&It(!1),!i.props.index||!i.props.children||It(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=qh(i.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gh(){return Gh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Gh.apply(this,arguments)}function wT(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function ET(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function TT(r,e){return r.button===0&&(!e||e==="_self")&&!ET(r)}const xT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IT="6";try{window.__reactRouterVersion=IT}catch{}const ST="startTransition",Bg=wE[ST];function CT(r){let{basename:e,children:t,future:i,window:o}=r,l=G.useRef();l.current==null&&(l.current=RE({window:o,v5Compat:!0}));let d=l.current,[p,y]=G.useState({action:d.action,location:d.location}),{v7_startTransition:v}=i||{},E=G.useCallback(I=>{v&&Bg?Bg(()=>y(I)):y(I)},[y,v]);return G.useLayoutEffect(()=>d.listen(E),[d,E]),G.useEffect(()=>gT(i),[i]),G.createElement(vT,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:d,future:i})}const RT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wa=G.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:p,target:y,to:v,preventScrollReset:E,viewTransition:I}=e,R=wT(e,xT),{basename:z}=G.useContext(rs),H,$=!1;if(typeof v=="string"&&PT.test(v)&&(H=v,RT))try{let Y=new URL(window.location.href),ae=v.startsWith("//")?new URL(Y.protocol+v):new URL(v),Ee=If(ae.pathname,z);ae.origin===Y.origin&&Ee!=null?v=Ee+ae.search+ae.hash:$=!0}catch{}let L=tT(v,{relative:o}),re=AT(v,{replace:d,state:p,target:y,preventScrollReset:E,relative:o,viewTransition:I});function ce(Y){i&&i(Y),Y.defaultPrevented||re(Y)}return G.createElement("a",Gh({},R,{href:H||L,onClick:$||l?i:ce,ref:t,target:y}))});var $g;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})($g||($g={}));var Wg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Wg||(Wg={}));function AT(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:p}=e===void 0?{}:e,y=Nc(),v=yl(),E=Nv(r,{relative:d});return G.useCallback(I=>{if(TT(I,t)){I.preventDefault();let R=i!==void 0?i:uc(v)===uc(E);y(r,{replace:R,state:o,preventScrollReset:l,relative:d,viewTransition:p})}},[v,y,E,i,o,t,r,l,d,p])}const kT=()=>{};var Hg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},NT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],p=r[t++],y=((o&7)<<18|(l&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,p=d?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,E=l>>2,I=(l&3)<<4|p>>4;let R=(p&15)<<2|v>>6,z=v&63;y||(z=64,d||(R=64)),i.push(t[E],t[I],t[R],t[z])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Vv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):NT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||I==null)throw new bT;const R=l<<2|p>>4;if(i.push(R),v!==64){const z=p<<4&240|v>>2;if(i.push(z),I!==64){const H=v<<6&192|I;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class bT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jT=function(r){const e=Vv(r);return Ov.encodeByteArray(e,!0)},cc=function(r){return jT(r).replace(/\./g,"")},Lv=function(r){try{return Ov.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=()=>DT().__FIREBASE_DEFAULTS__,OT=()=>{if(typeof process>"u"||typeof Hg>"u")return;const r=Hg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},LT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Lv(r[1]);return e&&JSON.parse(e)},bc=()=>{try{return kT()||VT()||OT()||LT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Mv=r=>{var e,t;return(t=(e=bc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},MT=r=>{const e=Mv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Fv=()=>{var r;return(r=bc())===null||r===void 0?void 0:r.config},Uv=r=>{var e;return(e=bc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[cc(JSON.stringify(t)),cc(JSON.stringify(d)),""].join(".")}const el={};function zT(){const r={prod:[],emulator:[]};for(const e of Object.keys(el))el[e]?r.emulator.push(e):r.prod.push(e);return r}function BT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let qg=!1;function Bv(r,e){if(typeof window>"u"||typeof document>"u"||!Zo(window.location.host)||el[r]===e||el[r]||qg)return;el[r]=e;function t(R){return`__firebase__banner__${R}`}const i="__firebase__banner",l=zT().prod.length>0;function d(){const R=document.getElementById(i);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function y(R,z){R.setAttribute("width","24"),R.setAttribute("id",z),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function v(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{qg=!0,d()},R}function E(R,z){R.setAttribute("id",z),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function I(){const R=BT(i),z=t("text"),H=document.getElementById(z)||document.createElement("span"),$=t("learnmore"),L=document.getElementById($)||document.createElement("a"),re=t("preprendIcon"),ce=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const Y=R.element;p(Y),E(L,$);const ae=v();y(ce,re),Y.append(ce,H,L,ae),document.body.appendChild(Y)}l?(H.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $T(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function WT(){var r;const e=(r=bc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function GT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KT(){const r=ln();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function QT(){return!WT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YT(){try{return typeof indexedDB=="object"}catch{return!1}}function JT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="FirebaseError";class hi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=XT,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?ZT(l,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new hi(o,p,i)}}function ZT(r,e){return r.replace(ex,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const ex=/\{\$([^}]+)}/g;function tx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ms(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],d=e[o];if(Gg(l)&&Gg(d)){if(!Ms(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Gg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qa(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ga(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function nx(r,e){const t=new rx(r,e);return t.subscribe.bind(t)}class rx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ix(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=bh),o.error===void 0&&(o.error=bh),o.complete===void 0&&(o.complete=bh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ix(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function bh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(r){return r&&r._delegate?r._delegate:r}class Fs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new FT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ax(e))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ds){return this.instances.has(e)}getOptions(e=Ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ox(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ds){return this.component?this.component.multipleInstances?e:Ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ox(r){return r===Ds?void 0:r}function ax(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})($e||($e={}));const ux={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},cx=$e.INFO,dx={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},hx=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=dx[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pf{constructor(e){this.name=e,this._logLevel=cx,this._logHandler=hx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ux[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const fx=(r,e)=>e.some(t=>r instanceof t);let Kg,Qg;function px(){return Kg||(Kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mx(){return Qg||(Qg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $v=new WeakMap,Kh=new WeakMap,Wv=new WeakMap,jh=new WeakMap,Af=new WeakMap;function gx(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(Wi(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&$v.set(t,r)}).catch(()=>{}),Af.set(e,r),e}function yx(r){if(Kh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Kh.set(r,e)}let Qh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Kh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Wv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function vx(r){Qh=r(Qh)}function _x(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Dh(this),e,...t);return Wv.set(i,e.sort?e.sort():[e]),Wi(i)}:mx().includes(r)?function(...e){return r.apply(Dh(this),e),Wi($v.get(this))}:function(...e){return Wi(r.apply(Dh(this),e))}}function wx(r){return typeof r=="function"?_x(r):(r instanceof IDBTransaction&&yx(r),fx(r,px())?new Proxy(r,Qh):r)}function Wi(r){if(r instanceof IDBRequest)return gx(r);if(jh.has(r))return jh.get(r);const e=wx(r);return e!==r&&(jh.set(r,e),Af.set(e,r)),e}const Dh=r=>Af.get(r);function Ex(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),p=Wi(d);return i&&d.addEventListener("upgradeneeded",y=>{i(Wi(d.result),y.oldVersion,y.newVersion,Wi(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),p.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const Tx=["get","getKey","getAll","getAllKeys","count"],xx=["put","add","delete","clear"],Vh=new Map;function Yg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=xx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Tx.includes(t)))return;const l=async function(d,...p){const y=this.transaction(d,o?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&y.done]))[0]};return Vh.set(e,l),l}vx(r=>({...r,get:(e,t,i)=>Yg(e,t)||r.get(e,t,i),has:(e,t)=>!!Yg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Sx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Sx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yh="@firebase/app",Jg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Pf("@firebase/app"),Cx="@firebase/app-compat",Rx="@firebase/analytics-compat",Px="@firebase/analytics",Ax="@firebase/app-check-compat",kx="@firebase/app-check",Nx="@firebase/auth",bx="@firebase/auth-compat",jx="@firebase/database",Dx="@firebase/data-connect",Vx="@firebase/database-compat",Ox="@firebase/functions",Lx="@firebase/functions-compat",Mx="@firebase/installations",Fx="@firebase/installations-compat",Ux="@firebase/messaging",zx="@firebase/messaging-compat",Bx="@firebase/performance",$x="@firebase/performance-compat",Wx="@firebase/remote-config",Hx="@firebase/remote-config-compat",qx="@firebase/storage",Gx="@firebase/storage-compat",Kx="@firebase/firestore",Qx="@firebase/ai",Yx="@firebase/firestore-compat",Jx="firebase",Xx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="[DEFAULT]",Zx={[Yh]:"fire-core",[Cx]:"fire-core-compat",[Px]:"fire-analytics",[Rx]:"fire-analytics-compat",[kx]:"fire-app-check",[Ax]:"fire-app-check-compat",[Nx]:"fire-auth",[bx]:"fire-auth-compat",[jx]:"fire-rtdb",[Dx]:"fire-data-connect",[Vx]:"fire-rtdb-compat",[Ox]:"fire-fn",[Lx]:"fire-fn-compat",[Mx]:"fire-iid",[Fx]:"fire-iid-compat",[Ux]:"fire-fcm",[zx]:"fire-fcm-compat",[Bx]:"fire-perf",[$x]:"fire-perf-compat",[Wx]:"fire-rc",[Hx]:"fire-rc-compat",[qx]:"fire-gcs",[Gx]:"fire-gcs-compat",[Kx]:"fire-fst",[Yx]:"fire-fst-compat",[Qx]:"fire-vertex","fire-js":"fire-js",[Jx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Map,eI=new Map,Xh=new Map;function Xg(r,e){try{r.container.addComponent(e)}catch(t){li.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Wo(r){const e=r.name;if(Xh.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,r);for(const t of dc.values())Xg(t,r);for(const t of eI.values())Xg(t,r);return!0}function kf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Dn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hi=new vl("app","Firebase",tI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=Xx;function Hv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Jh,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Hi.create("bad-app-name",{appName:String(o)});if(t||(t=Fv()),!t)throw Hi.create("no-options");const l=dc.get(o);if(l){if(Ms(t,l.options)&&Ms(i,l.config))return l;throw Hi.create("duplicate-app",{appName:o})}const d=new lx(o);for(const y of Xh.values())d.addComponent(y);const p=new nI(t,i,d);return dc.set(o,p),p}function qv(r=Jh){const e=dc.get(r);if(!e&&r===Jh&&Fv())return Hv();if(!e)throw Hi.create("no-app",{appName:r});return e}function qi(r,e,t){var i;let o=(i=Zx[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(p.join(" "));return}Wo(new Fs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="firebase-heartbeat-database",iI=1,ll="firebase-heartbeat-store";let Oh=null;function Gv(){return Oh||(Oh=Ex(rI,iI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ll)}catch(t){console.warn(t)}}}}).catch(r=>{throw Hi.create("idb-open",{originalErrorMessage:r.message})})),Oh}async function sI(r){try{const t=(await Gv()).transaction(ll),i=await t.objectStore(ll).get(Kv(r));return await t.done,i}catch(e){if(e instanceof hi)li.warn(e.message);else{const t=Hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(t.message)}}}async function Zg(r,e){try{const i=(await Gv()).transaction(ll,"readwrite");await i.objectStore(ll).put(e,Kv(r)),await i.done}catch(t){if(t instanceof hi)li.warn(t.message);else{const i=Hi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});li.warn(i.message)}}}function Kv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=1024,aI=30;class lI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ey();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>aI){const d=dI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){li.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ey(),{heartbeatsToSend:i,unsentEntries:o}=uI(this._heartbeatsCache.heartbeats),l=cc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return li.warn(t),""}}}function ey(){return new Date().toISOString().substring(0,10)}function uI(r,e=oI){const t=[];let i=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),ty(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ty(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class cI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YT()?JT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Zg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Zg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ty(r){return cc(JSON.stringify({version:2,heartbeats:r})).length}function dI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(r){Wo(new Fs("platform-logger",e=>new Ix(e),"PRIVATE")),Wo(new Fs("heartbeat",e=>new lI(e),"PRIVATE")),qi(Yh,Jg,r),qi(Yh,Jg,"esm2017"),qi("fire-js","")}hI("");var fI="firebase",pI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(fI,pI,"app");function Nf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Qv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mI=Qv,Yv=new vl("auth","Firebase",Qv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Pf("@firebase/auth");function gI(r,...e){hc.logLevel<=$e.WARN&&hc.warn(`Auth (${ea}): ${r}`,...e)}function Zu(r,...e){hc.logLevel<=$e.ERROR&&hc.error(`Auth (${ea}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(r,...e){throw jf(r,...e)}function vr(r,...e){return jf(r,...e)}function bf(r,e,t){const i=Object.assign(Object.assign({},mI()),{[e]:t});return new vl("auth","Firebase",i).create(e,{appName:r.name})}function oi(r){return bf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Xn(r,"argument-error"),bf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Yv.create(r,...e)}function ke(r,e,...t){if(!r)throw jf(e,...t)}function ii(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Zu(e),new Error(e)}function ui(r,e){r||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function vI(){return ny()==="http:"||ny()==="https:"}function ny(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vI()||qT()||"connection"in navigator)?navigator.onLine:!0}function wI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ui(t>e,"Short delay should be less than long delay!"),this.isMobile=$T()||GT()}get(){return _I()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(r,e){ui(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xI=new wl(3e4,6e4);function ss(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function os(r,e,t,i,o={}){return Xv(r,o,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const p=_l(Object.assign({key:r.config.apiKey},d)).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:y},l);return HT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Zo(r.emulatorConfig.host)&&(v.credentials="include"),Jv.fetch()(await Zv(r,r.config.apiHost,t,p),v)})}async function Xv(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},EI),e);try{const o=new SI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Wu(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const p=l.ok?d.errorMessage:d.error.message,[y,v]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Wu(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw Wu(r,"user-disabled",d);const E=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw bf(r,E,v);Xn(r,E)}}catch(o){if(o instanceof hi)throw o;Xn(r,"network-request-failed",{message:String(o)})}}async function El(r,e,t,i,o={}){const l=await os(r,e,t,i,o);return"mfaPendingCredential"in l&&Xn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Zv(r,e,t,i){const o=`${e}${t}?${i}`,l=r,d=l.config.emulator?Df(r.config,o):`${r.config.apiScheme}://${o}`;return TI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function II(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(vr(this.auth,"network-request-failed")),xI.get())})}}function Wu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=vr(r,e,i);return o.customData._tokenResponse=t,o}function ry(r){return r!==void 0&&r.enterprise!==void 0}class CI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return II(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function RI(r,e){return os(r,"GET","/v2/recaptchaConfig",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(r,e){return os(r,"POST","/v1/accounts:delete",e)}async function fc(r,e){return os(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AI(r,e=!1){const t=Yt(r),i=await t.getIdToken(e),o=Vf(i);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:tl(Lh(o.auth_time)),issuedAtTime:tl(Lh(o.iat)),expirationTime:tl(Lh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Lh(r){return Number(r)*1e3}function Vf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Lv(t);return o?JSON.parse(o):(Zu("Failed to decode base64 JWT payload"),null)}catch(o){return Zu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function iy(r){const e=Vf(r);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof hi&&kI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function kI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await ul(r,fc(t,{idToken:i}));ke(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?e_(l.providerUserInfo):[],p=jI(r.providerData,d),y=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),E=y?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new ef(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,I)}async function bI(r){const e=Yt(r);await pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function e_(r){return r.map(e=>{var{providerId:t}=e,i=Nf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(r,e){const t=await Xv(r,{},async()=>{const i=_l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await Zv(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:i};return r.emulatorConfig&&Zo(r.emulatorConfig.host)&&(y.credentials="include"),Jv.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function VI(r,e){return os(r,"POST","/v2/accounts:revokeToken",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=iy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await DI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,d=new Fo;return i&&(ke(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(ke(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(ke(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fo,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(r,e){ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class yr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Nf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new ef(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ul(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return AI(this,e)}reload(){return bI(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await pc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(oi(this.auth));const e=await this.getIdToken();return await ul(this,PI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,d,p,y,v,E;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,R=(o=t.email)!==null&&o!==void 0?o:void 0,z=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,H=(d=t.photoURL)!==null&&d!==void 0?d:void 0,$=(p=t.tenantId)!==null&&p!==void 0?p:void 0,L=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,re=(v=t.createdAt)!==null&&v!==void 0?v:void 0,ce=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:Y,emailVerified:ae,isAnonymous:Ee,providerData:ye,stsTokenManager:j}=t;ke(Y&&j,e,"internal-error");const S=Fo.fromJSON(this.name,j);ke(typeof Y=="string",e,"internal-error"),Li(I,e.name),Li(R,e.name),ke(typeof ae=="boolean",e,"internal-error"),ke(typeof Ee=="boolean",e,"internal-error"),Li(z,e.name),Li(H,e.name),Li($,e.name),Li(L,e.name),Li(re,e.name),Li(ce,e.name);const b=new yr({uid:Y,auth:e,email:R,emailVerified:ae,displayName:I,isAnonymous:Ee,photoURL:H,phoneNumber:z,tenantId:$,stsTokenManager:S,createdAt:re,lastLoginAt:ce});return ye&&Array.isArray(ye)&&(b.providerData=ye.map(x=>Object.assign({},x))),L&&(b._redirectEventId=L),b}static async _fromIdTokenResponse(e,t,i=!1){const o=new Fo;o.updateFromServerResponse(t);const l=new yr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await pc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?e_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Fo;p.updateFromIdToken(i);const y=new yr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new ef(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Map;function si(r){ui(r instanceof Function,"Expected a class definition");let e=sy.get(r);return e?(ui(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,sy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}t_.type="NONE";const oy=t_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(r,e,t){return`firebase:${r}:${e}:${t}`}class Uo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=ec(this.userKey,o.apiKey,l),this.fullPersistenceKey=ec("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fc(this.auth,{idToken:e}).catch(()=>{});return t?yr._fromGetAccountInfoResponse(this.auth,t,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Uo(si(oy),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||si(oy);const d=ec(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const E=await v._get(d);if(E){let I;if(typeof E=="string"){const R=await fc(e,{idToken:E}).catch(()=>{});if(!R)break;I=await yr._fromGetAccountInfoResponse(e,R,E)}else I=yr._fromJSON(e,E);v!==l&&(p=I),l=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new Uo(l,e,i):(l=y[0],p&&await l._set(d,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Uo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(n_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(a_(e))return"Blackberry";if(l_(e))return"Webos";if(r_(e))return"Safari";if((e.includes("chrome/")||i_(e))&&!e.includes("edge/"))return"Chrome";if(o_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function n_(r=ln()){return/firefox\//i.test(r)}function r_(r=ln()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function i_(r=ln()){return/crios\//i.test(r)}function s_(r=ln()){return/iemobile/i.test(r)}function o_(r=ln()){return/android/i.test(r)}function a_(r=ln()){return/blackberry/i.test(r)}function l_(r=ln()){return/webos/i.test(r)}function Of(r=ln()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function OI(r=ln()){var e;return Of(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LI(){return KT()&&document.documentMode===10}function u_(r=ln()){return Of(r)||o_(r)||l_(r)||a_(r)||/windows phone/i.test(r)||s_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(r,e=[]){let t;switch(r){case"Browser":t=ay(ln());break;case"Worker":t=`${ay(ln())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ea}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,p)=>{try{const y=e(l);d(y)}catch(y){p(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(r,e={}){return os(r,"GET","/v2/passwordPolicy",ss(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=6;class zI{constructor(e){var t,i,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:UI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,d,p;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(i=y.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),y.isValid&&(y.isValid=(o=y.containsLowercaseLetter)!==null&&o!==void 0?o:!0),y.isValid&&(y.isValid=(l=y.containsUppercaseLetter)!==null&&l!==void 0?l:!0),y.isValid&&(y.isValid=(d=y.containsNumericCharacter)!==null&&d!==void 0?d:!0),y.isValid&&(y.isValid=(p=y.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),y}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ly(this),this.idTokenSubscription=new ly(this),this.beforeStateQueue=new MI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=si(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Uo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fc(this,{idToken:e}),i=await yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Dn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===p)&&(y!=null&&y.user)&&(o=y.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(oi(this));const t=e?Yt(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FI(this),t=new zI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await VI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&si(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(p,this,"internal-error"),p.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=c_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&gI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function as(r){return Yt(r)}class ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=nx(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $I(r){jc=r}function d_(r){return jc.loadJS(r)}function WI(){return jc.recaptchaEnterpriseScript}function HI(){return jc.gapiScript}function qI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class GI{constructor(){this.enterprise=new KI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class KI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const QI="recaptcha-enterprise",h_="NO_RECAPTCHA";class YI{constructor(e){this.type=QI,this.auth=as(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,p)=>{RI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new CI(y);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(y=>{p(y)})})}function o(l,d,p){const y=window.grecaptcha;ry(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(h_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GI().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{i(this.auth).then(p=>{if(!t&&ry(window.grecaptcha))o(p,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=WI();y.length!==0&&(y+=p),d_(y).then(()=>{o(p,l,d)}).catch(v=>{d(v)})}}).catch(p=>{d(p)})})}}async function uy(r,e,t,i=!1,o=!1){const l=new YI(r);let d;if(o)d=h_;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function tf(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await uy(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await uy(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(r,e){const t=kf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ms(l,e??{}))return o;Xn(o,"already-initialized")}return t.initialize({options:e})}function XI(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(si);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ZI(r,e,t){const i=as(r);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=f_(e),{host:d,port:p}=eS(e),y=p===null?"":`:${p}`,v={url:`${l}//${d}${y}/`},E=Object.freeze({host:d,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(Ms(v,i.config.emulator)&&Ms(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,Zo(d)?(zv(`${l}//${d}${y}`),Bv("Auth",!0)):tS()}function f_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function eS(r){const e=f_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:cy(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:cy(d)}}}function cy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function tS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,t){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}async function nS(r,e){return os(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(r,e){return El(r,"POST","/v1/accounts:signInWithPassword",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(r,e){return El(r,"POST","/v1/accounts:signInWithEmailLink",ss(r,e))}async function sS(r,e){return El(r,"POST","/v1/accounts:signInWithEmailLink",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Lf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new cl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new cl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,t,"signInWithPassword",rS);case"emailLink":return iS(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,i,"signUpPassword",nS);case"emailLink":return sS(e,{idToken:t,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(r,e){return El(r,"POST","/v1/accounts:signInWithIdp",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="http://localhost";class Us extends Lf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Nf(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new Us(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return zo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,zo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zo(e,t)}buildRequest(){const e={requestUri:oS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_l(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lS(r){const e=qa(Ga(r)).link,t=e?qa(Ga(e)).deep_link_id:null,i=qa(Ga(r)).deep_link_id;return(i?qa(Ga(i)).link:null)||i||t||e||r}class Mf{constructor(e){var t,i,o,l,d,p;const y=qa(Ga(e)),v=(t=y.apiKey)!==null&&t!==void 0?t:null,E=(i=y.oobCode)!==null&&i!==void 0?i:null,I=aS((o=y.mode)!==null&&o!==void 0?o:null);ke(v&&E&&I,"argument-error"),this.apiKey=v,this.operation=I,this.code=E,this.continueUrl=(l=y.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=y.lang)!==null&&d!==void 0?d:null,this.tenantId=(p=y.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=lS(e);try{return new Mf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,t){return cl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Mf.parseLink(t);return ke(i,"argument-error"),cl._fromEmailAndCode(e,i.code,i.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Tl{constructor(){super("facebook.com")}static credential(e){return Us._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch{return null}}}Mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Us._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Dr.credential(t,i)}catch{return null}}}Dr.GOOGLE_SIGN_IN_METHOD="google.com";Dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Tl{constructor(){super("github.com")}static credential(e){return Us._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com";Fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Tl{constructor(){super("twitter.com")}static credential(e,t){return Us._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ui.credential(t,i)}catch{return null}}}Ui.TWITTER_SIGN_IN_METHOD="twitter.com";Ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(r,e){return El(r,"POST","/v1/accounts:signUp",ss(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await yr._fromIdTokenResponse(e,i,o),d=dy(i);return new zs({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=dy(i);return new zs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function dy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends hi{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new mc(e,t,i,o)}}function p_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(r,l,e,i):l})}async function cS(r,e,t=!1){const i=await ul(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return zs._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(r,e,t=!1){const{auth:i}=r;if(Dn(i.app))return Promise.reject(oi(i));const o="reauthenticate";try{const l=await ul(r,p_(i,o,e,r),t);ke(l.idToken,i,"internal-error");const d=Vf(l.idToken);ke(d,i,"internal-error");const{sub:p}=d;return ke(r.uid===p,i,"user-mismatch"),zs._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Xn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m_(r,e,t=!1){if(Dn(r.app))return Promise.reject(oi(r));const i="signIn",o=await p_(r,i,e),l=await zs._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function hS(r,e){return m_(as(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g_(r){const e=as(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fS(r,e,t){if(Dn(r.app))return Promise.reject(oi(r));const i=as(r),d=await tf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uS).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&g_(r),y}),p=await zs._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function y_(r,e,t){return Dn(r.app)?Promise.reject(oi(r)):hS(Yt(r),ta.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&g_(r),i})}function pS(r,e,t,i){return Yt(r).onIdTokenChanged(e,t,i)}function mS(r,e,t){return Yt(r).beforeAuthStateChanged(e,t)}function gS(r,e,t,i){return Yt(r).onAuthStateChanged(e,t,i)}function v_(r){return Yt(r).signOut()}const gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gc,"1"),this.storage.removeItem(gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=1e3,vS=10;class w_ extends __{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=u_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);LI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,vS):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},yS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}w_.type="LOCAL";const _S=w_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends __{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}E_.type="SESSION";const T_=E_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Dc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async v=>v(t.origin,l)),y=await wS(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((p,y)=>{const v=Uf("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(I){const R=I;if(R.data.eventId===v)switch(R.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(R.data.response);break;default:clearTimeout(E),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function TS(r){Vr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function xS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function SS(){return x_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="firebaseLocalStorageDb",CS=1,yc="firebaseLocalStorage",S_="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vc(r,e){return r.transaction([yc],e?"readwrite":"readonly").objectStore(yc)}function RS(){const r=indexedDB.deleteDatabase(I_);return new xl(r).toPromise()}function nf(){const r=indexedDB.open(I_,CS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(yc,{keyPath:S_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(yc)?e(i):(i.close(),await RS(),e(await nf()))})})}async function hy(r,e,t){const i=Vc(r,!0).put({[S_]:e,value:t});return new xl(i).toPromise()}async function PS(r,e){const t=Vc(r,!1).get(e),i=await new xl(t).toPromise();return i===void 0?null:i.value}function fy(r,e){const t=Vc(r,!0).delete(e);return new xl(t).toPromise()}const AS=800,kS=3;class C_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>kS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dc._getInstance(SS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await xS(),!this.activeServiceWorker)return;this.sender=new ES(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nf();return await hy(e,gc,"1"),await fy(e,gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>hy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>PS(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Vc(o,!1).getAll();return new xl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C_.type="LOCAL";const NS=C_;new wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(r,e){return e?si(e):(ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends Lf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bS(r){return m_(r.auth,new zf(r),r.bypassAuthState)}function jS(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),dS(t,new zf(r),r.bypassAuthState)}async function DS(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),cS(t,new zf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bS;case"linkViaPopup":case"linkViaRedirect":return DS;case"reauthViaPopup":case"reauthViaRedirect":return jS;default:Xn(this.auth,"internal-error")}}resolve(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=new wl(2e3,1e4);async function A_(r,e,t){if(Dn(r.app))return Promise.reject(vr(r,"operation-not-supported-in-this-environment"));const i=as(r);yI(r,e,Ff);const o=R_(i,t);return new Vs(i,"signInViaPopup",e,o).executeNotNull()}class Vs extends P_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Vs.currentPopupAction&&Vs.currentPopupAction.cancel(),Vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){ui(this.filter.length===1,"Popup operations only handle one event");const e=Uf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VS.get())};e()}}Vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="pendingRedirect",tc=new Map;class LS extends P_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=tc.get(this.auth._key());if(!e){try{const i=await MS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}tc.set(this.auth._key(),e)}return this.bypassAuthState||tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MS(r,e){const t=zS(e),i=US(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function FS(r,e){tc.set(r._key(),e)}function US(r){return si(r._redirectPersistence)}function zS(r){return ec(OS,r.config.apiKey,r.name)}async function BS(r,e,t=!1){if(Dn(r.app))return Promise.reject(oi(r));const i=as(r),o=R_(i,e),d=await new LS(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=600*1e3;class WS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!k_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(vr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$S&&this.cachedEventUids.clear(),this.cachedEventUids.has(py(e))}saveEventToCache(e){this.cachedEventUids.add(py(e)),this.lastProcessedEventTime=Date.now()}}function py(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function k_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(r,e={}){return os(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KS=/^https?/;async function QS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await qS(r);for(const t of e)try{if(YS(t))return}catch{}Xn(r,"unauthorized-domain")}function YS(r){const e=Zh(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!KS.test(t))return!1;if(GS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=new wl(3e4,6e4);function my(){const r=Vr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function XS(r){return new Promise((e,t)=>{var i,o,l;function d(){my(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{my(),t(vr(r,"network-request-failed"))},timeout:JS.get()})}if(!((o=(i=Vr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Vr().gapi)===null||l===void 0)&&l.load)d();else{const p=qI("iframefcb");return Vr()[p]=()=>{gapi.load?d():t(vr(r,"network-request-failed"))},d_(`${HI()}?onload=${p}`).catch(y=>t(y))}}).catch(e=>{throw nc=null,e})}let nc=null;function ZS(r){return nc=nc||XS(r),nc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new wl(5e3,15e3),t1="__/auth/iframe",n1="emulator/auth/iframe",r1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s1(r){const e=r.config;ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Df(e,n1):`https://${r.config.authDomain}/${t1}`,i={apiKey:e.apiKey,appName:r.name,v:ea},o=i1.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${_l(i).slice(1)}`}async function o1(r){const e=await ZS(r),t=Vr().gapi;return ke(t,r,"internal-error"),e.open({where:document.body,url:s1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r1,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=vr(r,"network-request-failed"),p=Vr().setTimeout(()=>{l(d)},e1.get());function y(){Vr().clearTimeout(p),o(i)}i.ping(y).then(y,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l1=500,u1=600,c1="_blank",d1="http://localhost";class gy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h1(r,e,t,i=l1,o=u1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const y=Object.assign(Object.assign({},a1),{width:i.toString(),height:o.toString(),top:l,left:d}),v=ln().toLowerCase();t&&(p=i_(v)?c1:t),n_(v)&&(e=e||d1,y.scrollbars="yes");const E=Object.entries(y).reduce((R,[z,H])=>`${R}${z}=${H},`,"");if(OI(v)&&p!=="_self")return f1(e||"",p),new gy(null);const I=window.open(e||"",p,E);ke(I,r,"popup-blocked");try{I.focus()}catch{}return new gy(I)}function f1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="__/auth/handler",m1="emulator/auth/handler",g1=encodeURIComponent("fac");async function yy(r,e,t,i,o,l){ke(r.config.authDomain,r,"auth-domain-config-required"),ke(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ea,eventId:o};if(e instanceof Ff){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",tx(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))d[E]=I}if(e instanceof Tl){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const y=await r._getAppCheckToken(),v=y?`#${g1}=${encodeURIComponent(y)}`:"";return`${y1(r)}?${_l(p).slice(1)}${v}`}function y1({config:r}){return r.emulator?Df(r,m1):`https://${r.authDomain}/${p1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="webStorageSupport";class v1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T_,this._completeRedirectFn=BS,this._overrideRedirectResult=FS}async _openPopup(e,t,i,o){var l;ui((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await yy(e,t,i,Zh(),o);return h1(e,d,Uf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await yy(e,t,i,Zh(),o);return TS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ui(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await o1(e),i=new WS(e);return t.register("authEvent",o=>(ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mh,{type:Mh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Mh];d!==void 0&&t(!!d),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return u_()||r_()||Of()}}const _1=v1;var vy="@firebase/auth",_y="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T1(r){Wo(new Fs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;ke(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c_(r)},v=new BI(i,o,l,y);return XI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Wo(new Fs("auth-internal",e=>{const t=as(e.getProvider("auth").getImmediate());return(i=>new w1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qi(vy,_y,E1(r)),qi(vy,_y,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=300,I1=Uv("authIdTokenMaxAge")||x1;let wy=null;const S1=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>I1)return;const o=t==null?void 0:t.token;wy!==o&&(wy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function C1(r=qv()){const e=kf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=JI(r,{popupRedirectResolver:_1,persistence:[NS,_S,T_]}),i=Uv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=S1(l.toString());mS(t,d,()=>d(t.currentUser)),pS(t,p=>d(p))}}const o=Mv("auth");return o&&ZI(t,`http://${o}`),t}function R1(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}$I({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=vr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",R1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T1("Browser");var Ey=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gi,N_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,S){function b(){}b.prototype=S.prototype,j.D=S.prototype,j.prototype=new b,j.prototype.constructor=j,j.C=function(x,k,N){for(var A=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)A[Fe-2]=arguments[Fe];return S.prototype[k].apply(x,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,S,b){b||(b=0);var x=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)x[k]=S.charCodeAt(b++)|S.charCodeAt(b++)<<8|S.charCodeAt(b++)<<16|S.charCodeAt(b++)<<24;else for(k=0;16>k;++k)x[k]=S[b++]|S[b++]<<8|S[b++]<<16|S[b++]<<24;S=j.g[0],b=j.g[1],k=j.g[2];var N=j.g[3],A=S+(N^b&(k^N))+x[0]+3614090360&4294967295;S=b+(A<<7&4294967295|A>>>25),A=N+(k^S&(b^k))+x[1]+3905402710&4294967295,N=S+(A<<12&4294967295|A>>>20),A=k+(b^N&(S^b))+x[2]+606105819&4294967295,k=N+(A<<17&4294967295|A>>>15),A=b+(S^k&(N^S))+x[3]+3250441966&4294967295,b=k+(A<<22&4294967295|A>>>10),A=S+(N^b&(k^N))+x[4]+4118548399&4294967295,S=b+(A<<7&4294967295|A>>>25),A=N+(k^S&(b^k))+x[5]+1200080426&4294967295,N=S+(A<<12&4294967295|A>>>20),A=k+(b^N&(S^b))+x[6]+2821735955&4294967295,k=N+(A<<17&4294967295|A>>>15),A=b+(S^k&(N^S))+x[7]+4249261313&4294967295,b=k+(A<<22&4294967295|A>>>10),A=S+(N^b&(k^N))+x[8]+1770035416&4294967295,S=b+(A<<7&4294967295|A>>>25),A=N+(k^S&(b^k))+x[9]+2336552879&4294967295,N=S+(A<<12&4294967295|A>>>20),A=k+(b^N&(S^b))+x[10]+4294925233&4294967295,k=N+(A<<17&4294967295|A>>>15),A=b+(S^k&(N^S))+x[11]+2304563134&4294967295,b=k+(A<<22&4294967295|A>>>10),A=S+(N^b&(k^N))+x[12]+1804603682&4294967295,S=b+(A<<7&4294967295|A>>>25),A=N+(k^S&(b^k))+x[13]+4254626195&4294967295,N=S+(A<<12&4294967295|A>>>20),A=k+(b^N&(S^b))+x[14]+2792965006&4294967295,k=N+(A<<17&4294967295|A>>>15),A=b+(S^k&(N^S))+x[15]+1236535329&4294967295,b=k+(A<<22&4294967295|A>>>10),A=S+(k^N&(b^k))+x[1]+4129170786&4294967295,S=b+(A<<5&4294967295|A>>>27),A=N+(b^k&(S^b))+x[6]+3225465664&4294967295,N=S+(A<<9&4294967295|A>>>23),A=k+(S^b&(N^S))+x[11]+643717713&4294967295,k=N+(A<<14&4294967295|A>>>18),A=b+(N^S&(k^N))+x[0]+3921069994&4294967295,b=k+(A<<20&4294967295|A>>>12),A=S+(k^N&(b^k))+x[5]+3593408605&4294967295,S=b+(A<<5&4294967295|A>>>27),A=N+(b^k&(S^b))+x[10]+38016083&4294967295,N=S+(A<<9&4294967295|A>>>23),A=k+(S^b&(N^S))+x[15]+3634488961&4294967295,k=N+(A<<14&4294967295|A>>>18),A=b+(N^S&(k^N))+x[4]+3889429448&4294967295,b=k+(A<<20&4294967295|A>>>12),A=S+(k^N&(b^k))+x[9]+568446438&4294967295,S=b+(A<<5&4294967295|A>>>27),A=N+(b^k&(S^b))+x[14]+3275163606&4294967295,N=S+(A<<9&4294967295|A>>>23),A=k+(S^b&(N^S))+x[3]+4107603335&4294967295,k=N+(A<<14&4294967295|A>>>18),A=b+(N^S&(k^N))+x[8]+1163531501&4294967295,b=k+(A<<20&4294967295|A>>>12),A=S+(k^N&(b^k))+x[13]+2850285829&4294967295,S=b+(A<<5&4294967295|A>>>27),A=N+(b^k&(S^b))+x[2]+4243563512&4294967295,N=S+(A<<9&4294967295|A>>>23),A=k+(S^b&(N^S))+x[7]+1735328473&4294967295,k=N+(A<<14&4294967295|A>>>18),A=b+(N^S&(k^N))+x[12]+2368359562&4294967295,b=k+(A<<20&4294967295|A>>>12),A=S+(b^k^N)+x[5]+4294588738&4294967295,S=b+(A<<4&4294967295|A>>>28),A=N+(S^b^k)+x[8]+2272392833&4294967295,N=S+(A<<11&4294967295|A>>>21),A=k+(N^S^b)+x[11]+1839030562&4294967295,k=N+(A<<16&4294967295|A>>>16),A=b+(k^N^S)+x[14]+4259657740&4294967295,b=k+(A<<23&4294967295|A>>>9),A=S+(b^k^N)+x[1]+2763975236&4294967295,S=b+(A<<4&4294967295|A>>>28),A=N+(S^b^k)+x[4]+1272893353&4294967295,N=S+(A<<11&4294967295|A>>>21),A=k+(N^S^b)+x[7]+4139469664&4294967295,k=N+(A<<16&4294967295|A>>>16),A=b+(k^N^S)+x[10]+3200236656&4294967295,b=k+(A<<23&4294967295|A>>>9),A=S+(b^k^N)+x[13]+681279174&4294967295,S=b+(A<<4&4294967295|A>>>28),A=N+(S^b^k)+x[0]+3936430074&4294967295,N=S+(A<<11&4294967295|A>>>21),A=k+(N^S^b)+x[3]+3572445317&4294967295,k=N+(A<<16&4294967295|A>>>16),A=b+(k^N^S)+x[6]+76029189&4294967295,b=k+(A<<23&4294967295|A>>>9),A=S+(b^k^N)+x[9]+3654602809&4294967295,S=b+(A<<4&4294967295|A>>>28),A=N+(S^b^k)+x[12]+3873151461&4294967295,N=S+(A<<11&4294967295|A>>>21),A=k+(N^S^b)+x[15]+530742520&4294967295,k=N+(A<<16&4294967295|A>>>16),A=b+(k^N^S)+x[2]+3299628645&4294967295,b=k+(A<<23&4294967295|A>>>9),A=S+(k^(b|~N))+x[0]+4096336452&4294967295,S=b+(A<<6&4294967295|A>>>26),A=N+(b^(S|~k))+x[7]+1126891415&4294967295,N=S+(A<<10&4294967295|A>>>22),A=k+(S^(N|~b))+x[14]+2878612391&4294967295,k=N+(A<<15&4294967295|A>>>17),A=b+(N^(k|~S))+x[5]+4237533241&4294967295,b=k+(A<<21&4294967295|A>>>11),A=S+(k^(b|~N))+x[12]+1700485571&4294967295,S=b+(A<<6&4294967295|A>>>26),A=N+(b^(S|~k))+x[3]+2399980690&4294967295,N=S+(A<<10&4294967295|A>>>22),A=k+(S^(N|~b))+x[10]+4293915773&4294967295,k=N+(A<<15&4294967295|A>>>17),A=b+(N^(k|~S))+x[1]+2240044497&4294967295,b=k+(A<<21&4294967295|A>>>11),A=S+(k^(b|~N))+x[8]+1873313359&4294967295,S=b+(A<<6&4294967295|A>>>26),A=N+(b^(S|~k))+x[15]+4264355552&4294967295,N=S+(A<<10&4294967295|A>>>22),A=k+(S^(N|~b))+x[6]+2734768916&4294967295,k=N+(A<<15&4294967295|A>>>17),A=b+(N^(k|~S))+x[13]+1309151649&4294967295,b=k+(A<<21&4294967295|A>>>11),A=S+(k^(b|~N))+x[4]+4149444226&4294967295,S=b+(A<<6&4294967295|A>>>26),A=N+(b^(S|~k))+x[11]+3174756917&4294967295,N=S+(A<<10&4294967295|A>>>22),A=k+(S^(N|~b))+x[2]+718787259&4294967295,k=N+(A<<15&4294967295|A>>>17),A=b+(N^(k|~S))+x[9]+3951481745&4294967295,j.g[0]=j.g[0]+S&4294967295,j.g[1]=j.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,j.g[2]=j.g[2]+k&4294967295,j.g[3]=j.g[3]+N&4294967295}i.prototype.u=function(j,S){S===void 0&&(S=j.length);for(var b=S-this.blockSize,x=this.B,k=this.h,N=0;N<S;){if(k==0)for(;N<=b;)o(this,j,N),N+=this.blockSize;if(typeof j=="string"){for(;N<S;)if(x[k++]=j.charCodeAt(N++),k==this.blockSize){o(this,x),k=0;break}}else for(;N<S;)if(x[k++]=j[N++],k==this.blockSize){o(this,x),k=0;break}}this.h=k,this.o+=S},i.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var S=1;S<j.length-8;++S)j[S]=0;var b=8*this.o;for(S=j.length-8;S<j.length;++S)j[S]=b&255,b/=256;for(this.u(j),j=Array(16),S=b=0;4>S;++S)for(var x=0;32>x;x+=8)j[b++]=this.g[S]>>>x&255;return j};function l(j,S){var b=p;return Object.prototype.hasOwnProperty.call(b,j)?b[j]:b[j]=S(j)}function d(j,S){this.h=S;for(var b=[],x=!0,k=j.length-1;0<=k;k--){var N=j[k]|0;x&&N==S||(b[k]=N,x=!1)}this.g=b}var p={};function y(j){return-128<=j&&128>j?l(j,function(S){return new d([S|0],0>S?-1:0)}):new d([j|0],0>j?-1:0)}function v(j){if(isNaN(j)||!isFinite(j))return I;if(0>j)return L(v(-j));for(var S=[],b=1,x=0;j>=b;x++)S[x]=j/b|0,b*=4294967296;return new d(S,0)}function E(j,S){if(j.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(j.charAt(0)=="-")return L(E(j.substring(1),S));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=v(Math.pow(S,8)),x=I,k=0;k<j.length;k+=8){var N=Math.min(8,j.length-k),A=parseInt(j.substring(k,k+N),S);8>N?(N=v(Math.pow(S,N)),x=x.j(N).add(v(A))):(x=x.j(b),x=x.add(v(A)))}return x}var I=y(0),R=y(1),z=y(16777216);r=d.prototype,r.m=function(){if($(this))return-L(this).m();for(var j=0,S=1,b=0;b<this.g.length;b++){var x=this.i(b);j+=(0<=x?x:4294967296+x)*S,S*=4294967296}return j},r.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(H(this))return"0";if($(this))return"-"+L(this).toString(j);for(var S=v(Math.pow(j,6)),b=this,x="";;){var k=ae(b,S).g;b=re(b,k.j(S));var N=((0<b.g.length?b.g[0]:b.h)>>>0).toString(j);if(b=k,H(b))return N+x;for(;6>N.length;)N="0"+N;x=N+x}},r.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function H(j){if(j.h!=0)return!1;for(var S=0;S<j.g.length;S++)if(j.g[S]!=0)return!1;return!0}function $(j){return j.h==-1}r.l=function(j){return j=re(this,j),$(j)?-1:H(j)?0:1};function L(j){for(var S=j.g.length,b=[],x=0;x<S;x++)b[x]=~j.g[x];return new d(b,~j.h).add(R)}r.abs=function(){return $(this)?L(this):this},r.add=function(j){for(var S=Math.max(this.g.length,j.g.length),b=[],x=0,k=0;k<=S;k++){var N=x+(this.i(k)&65535)+(j.i(k)&65535),A=(N>>>16)+(this.i(k)>>>16)+(j.i(k)>>>16);x=A>>>16,N&=65535,A&=65535,b[k]=A<<16|N}return new d(b,b[b.length-1]&-2147483648?-1:0)};function re(j,S){return j.add(L(S))}r.j=function(j){if(H(this)||H(j))return I;if($(this))return $(j)?L(this).j(L(j)):L(L(this).j(j));if($(j))return L(this.j(L(j)));if(0>this.l(z)&&0>j.l(z))return v(this.m()*j.m());for(var S=this.g.length+j.g.length,b=[],x=0;x<2*S;x++)b[x]=0;for(x=0;x<this.g.length;x++)for(var k=0;k<j.g.length;k++){var N=this.i(x)>>>16,A=this.i(x)&65535,Fe=j.i(k)>>>16,nt=j.i(k)&65535;b[2*x+2*k]+=A*nt,ce(b,2*x+2*k),b[2*x+2*k+1]+=N*nt,ce(b,2*x+2*k+1),b[2*x+2*k+1]+=A*Fe,ce(b,2*x+2*k+1),b[2*x+2*k+2]+=N*Fe,ce(b,2*x+2*k+2)}for(x=0;x<S;x++)b[x]=b[2*x+1]<<16|b[2*x];for(x=S;x<2*S;x++)b[x]=0;return new d(b,0)};function ce(j,S){for(;(j[S]&65535)!=j[S];)j[S+1]+=j[S]>>>16,j[S]&=65535,S++}function Y(j,S){this.g=j,this.h=S}function ae(j,S){if(H(S))throw Error("division by zero");if(H(j))return new Y(I,I);if($(j))return S=ae(L(j),S),new Y(L(S.g),L(S.h));if($(S))return S=ae(j,L(S)),new Y(L(S.g),S.h);if(30<j.g.length){if($(j)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var b=R,x=S;0>=x.l(j);)b=Ee(b),x=Ee(x);var k=ye(b,1),N=ye(x,1);for(x=ye(x,2),b=ye(b,2);!H(x);){var A=N.add(x);0>=A.l(j)&&(k=k.add(b),N=A),x=ye(x,1),b=ye(b,1)}return S=re(j,k.j(S)),new Y(k,S)}for(k=I;0<=j.l(S);){for(b=Math.max(1,Math.floor(j.m()/S.m())),x=Math.ceil(Math.log(b)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),N=v(b),A=N.j(S);$(A)||0<A.l(j);)b-=x,N=v(b),A=N.j(S);H(N)&&(N=R),k=k.add(N),j=re(j,A)}return new Y(k,j)}r.A=function(j){return ae(this,j).h},r.and=function(j){for(var S=Math.max(this.g.length,j.g.length),b=[],x=0;x<S;x++)b[x]=this.i(x)&j.i(x);return new d(b,this.h&j.h)},r.or=function(j){for(var S=Math.max(this.g.length,j.g.length),b=[],x=0;x<S;x++)b[x]=this.i(x)|j.i(x);return new d(b,this.h|j.h)},r.xor=function(j){for(var S=Math.max(this.g.length,j.g.length),b=[],x=0;x<S;x++)b[x]=this.i(x)^j.i(x);return new d(b,this.h^j.h)};function Ee(j){for(var S=j.g.length+1,b=[],x=0;x<S;x++)b[x]=j.i(x)<<1|j.i(x-1)>>>31;return new d(b,j.h)}function ye(j,S){var b=S>>5;S%=32;for(var x=j.g.length-b,k=[],N=0;N<x;N++)k[N]=0<S?j.i(N+b)>>>S|j.i(N+b+1)<<32-S:j.i(N+b);return new d(k,j.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,N_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,Gi=d}).apply(typeof Ey<"u"?Ey:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var b_,Ka,j_,rc,rf,D_,V_,O_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,T=!1,F={next:function(){if(!T&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(m,F)}}return function(){return u.apply(m,arguments)}}function R(u,m,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,R.apply(null,arguments)}function z(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function H(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,F,q){for(var le=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)le[Ze-2]=arguments[Ze];return m.prototype[F].apply(T,le)}}function $(u){const m=u.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function L(u,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(y(T)){const F=u.length||0,q=T.length||0;u.length=F+q;for(let le=0;le<q;le++)u[F+le]=T[le]}else u.push(T)}}class re{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ce(u){return/^[\s\xa0]*$/.test(u)}function Y(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function ae(u){return ae[" "](u),u}ae[" "]=function(){};var Ee=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function ye(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function j(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,m){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let q=0;q<b.length;q++)_=b[q],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function k(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function N(u){p.setTimeout(()=>{throw u},0)}function A(){var u=Ie;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Fe{constructor(){this.h=this.g=null}add(m,_){const T=nt.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var nt=new re(()=>new gt,u=>u.reset());class gt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,ue=!1,Ie=new Fe,he=()=>{const u=p.Promise.resolve(void 0);Be=()=>{u.then(M)}};var M=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){N(_)}var m=nt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ue=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ae=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function je(u,m){if(pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Ee){e:{try{ae(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&je.aa.h.call(this)}}H(je,pe);var Ve={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function Ye(u,m,_,T,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=F,this.key=++Ue,this.da=this.fa=!1}function ft(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function un(u){this.src=u,this.g={},this.h=0}un.prototype.add=function(u,m,_,T,F){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var le=Lt(u,m,T,F);return-1<le?(m=u[le],_||(m.fa=!1)):(m=new Ye(m,this.src,q,!!T,F),m.fa=_,u.push(m)),m};function Xt(u,m){var _=m.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,m,void 0),q;(q=0<=F)&&Array.prototype.splice.call(T,F,1),q&&(ft(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Lt(u,m,_,T){for(var F=0;F<u.length;++F){var q=u[F];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==T)return F}return-1}var Mt="closure_lm_"+(1e6*Math.random()|0),Zn={};function wr(u,m,_,T,F){if(Array.isArray(m)){for(var q=0;q<m.length;q++)wr(u,m[q],_,T,F);return null}return _=fe(_),u&&u[_e]?u.K(m,_,v(T)?!!T.capture:!1,F):Xe(u,m,_,!1,T,F)}function Xe(u,m,_,T,F,q){if(!m)throw Error("Invalid event type");var le=v(F)?!!F.capture:!!F,Ze=tr(u);if(Ze||(u[Mt]=Ze=new un(u)),_=Ze.add(m,_,T,le,q),_.proxy)return _;if(T=Br(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ae||(F=le),F===void 0&&(F=!1),u.addEventListener(m.toString(),T,F);else if(u.attachEvent)u.attachEvent(pn(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Br(){function u(_){return m.call(u.src,u.listener,_)}const m=er;return u}function Er(u,m,_,T,F){if(Array.isArray(m))for(var q=0;q<m.length;q++)Er(u,m[q],_,T,F);else T=v(T)?!!T.capture:!!T,_=fe(_),u&&u[_e]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=Lt(q,_,T,F),-1<_&&(ft(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=tr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Lt(m,_,T,F)),(_=-1<u?m[u]:null)&&Nt(_))}function Nt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[_e])Xt(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(pn(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=tr(m))?(Xt(_,u),_.h==0&&(_.src=null,m[Mt]=null)):ft(u)}}}function pn(u){return u in Zn?Zn[u]:Zn[u]="on"+u}function er(u,m){if(u.da)u=!0;else{m=new je(m,this);var _=u.listener,T=u.ha||u.src;u.fa&&Nt(u),u=_.call(T,m)}return u}function tr(u){return u=u[Mt],u instanceof un?u:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(u){return typeof u=="function"?u:(u[X]||(u[X]=function(m){return u.handleEvent(m)}),u[X])}function se(){J.call(this),this.i=new un(this),this.M=this,this.F=null}H(se,J),se.prototype[_e]=!0,se.prototype.removeEventListener=function(u,m,_,T){Er(this,u,m,_,T)};function C(u,m){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new pe(m,u);else if(m instanceof pe)m.target=m.target||u;else{var F=m;m=new pe(T,u),x(m,F)}if(F=!0,_)for(var q=_.length-1;0<=q;q--){var le=m.g=_[q];F=Q(le,T,!0,m)&&F}if(le=m.g=u,F=Q(le,T,!0,m)&&F,F=Q(le,T,!1,m)&&F,_)for(q=0;q<_.length;q++)le=m.g=_[q],F=Q(le,T,!1,m)&&F}se.prototype.N=function(){if(se.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],T=0;T<_.length;T++)ft(_[T]);delete u.g[m],u.h--}}this.F=null},se.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},se.prototype.L=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function Q(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,q=0;q<m.length;++q){var le=m[q];if(le&&!le.da&&le.capture==_){var Ze=le.listener,bt=le.ha||le.src;le.fa&&Xt(u.i,le),F=Ze.call(bt,T)!==!1&&F}}return F&&!T.defaultPrevented}function K(u,m,_){if(typeof u=="function")_&&(u=R(u,_));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function O(u){u.g=K(()=>{u.g=null,u.i&&(u.i=!1,O(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class de extends J{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:O(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(u){J.call(this),this.h=u,this.g={}}H(Le,J);var et=[];function St(u){ye(u.g,function(m,_){this.g.hasOwnProperty(_)&&Nt(m)},u),u.g={}}Le.prototype.N=function(){Le.aa.N.call(this),St(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rt=p.JSON.stringify,it=p.JSON.parse,Cn=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function On(){}On.prototype.h=null;function Ln(u){return u.h||(u.h=u.i())}function Tr(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mn(){pe.call(this,"d")}H(Mn,pe);function fi(){pe.call(this,"c")}H(fi,pe);var Fn={},cs=null;function st(){return cs=cs||new se}Fn.La="serverreachability";function Un(u){pe.call(this,Fn.La,u)}H(Un,pe);function $r(u){const m=st();C(m,new Un(m))}Fn.STAT_EVENT="statevent";function aa(u,m){pe.call(this,Fn.STAT_EVENT,u),this.stat=m}H(aa,pe);function Et(u){const m=st();C(m,new aa(m,u))}Fn.Ma="timingevent";function Ks(u,m){pe.call(this,Fn.Ma,u),this.size=m}H(Ks,pe);function nr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function ds(){this.g=!0}ds.prototype.xa=function(){this.g=!1};function hs(u,m,_,T,F,q){u.info(function(){if(u.g)if(q)for(var le="",Ze=q.split("&"),bt=0;bt<Ze.length;bt++){var qe=Ze[bt].split("=");if(1<qe.length){var Ft=qe[0];qe=qe[1];var Ct=Ft.split("_");le=2<=Ct.length&&Ct[1]=="type"?le+(Ft+"="+qe+"&"):le+(Ft+"=redacted&")}}else le=null;else le=q;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+_+`
`+le})}function Qs(u,m,_,T,F,q,le){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+_+`
`+q+" "+le})}function rr(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ed(u,_)+(T?" "+T:"")})}function la(u,m){u.info(function(){return"TIMEOUT: "+m})}ds.prototype.info=function(){};function ed(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var q=F[0];if(q!="noop"&&q!="stop"&&q!="close")for(var le=1;le<F.length;le++)F[le]=""}}}}return rt(_)}catch{return m}}var Ys={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Al={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ir;function fs(){}H(fs,On),fs.prototype.g=function(){return new XMLHttpRequest},fs.prototype.i=function(){return{}},ir=new fs;function sr(u,m,_,T){this.j=u,this.i=m,this.l=_,this.R=T||1,this.U=new Le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kl}function kl(){this.i=null,this.g="",this.h=!1}var ua={},Js={};function Xs(u,m,_){u.L=1,u.v=vi(Pn(m)),u.m=_,u.P=!0,ca(u,null)}function ca(u,m){u.F=Date.now(),ot(u),u.A=Pn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),wi(_.i,"t",T),u.C=0,_=u.j.J,u.h=new kl,u.g=Kl(u.j,_?m:null,!u.m),0<u.O&&(u.M=new de(R(u.Y,u,u.g),u.O)),m=u.U,_=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(et[0]=F.toString()),F=et);for(var q=0;q<F.length;q++){var le=wr(_,F[q],T||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),$r(),hs(u.i,u.u,u.A,u.l,u.R,u.m)}sr.prototype.ca=function(u){u=u.target;const m=this.M;m&&yn(u)==3?m.j():this.Y(u)},sr.prototype.Y=function(u){try{if(u==this.g)e:{const Ct=yn(this.g);var m=this.g.Ba();const $n=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||ga(this.g)))){this.J||Ct!=4||m==7||(m==8||0>=$n?$r(3):$r(2)),ps(this);var _=this.g.Z();this.X=_;t:if(Nl(this)){var T=ga(this.g);u="";var F=T.length,q=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zn(this),pi(this);var le="";break t}this.h.i=new p.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(q&&m==F-1)});T.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,Qs(this.i,this.u,this.A,this.l,this.R,Ct,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,bt=this.g;if((Ze=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ce(Ze)){var qe=Ze;break t}}qe=null}if(_=qe)rr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,da(this,_);else{this.o=!1,this.s=3,Et(12),zn(this),pi(this);break e}}if(this.P){_=!0;let kn;for(;!this.J&&this.C<le.length;)if(kn=td(this,le),kn==Js){Ct==4&&(this.s=4,Et(14),_=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==ua){this.s=4,Et(15),rr(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else rr(this.i,this.l,kn,null),da(this,kn);if(Nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||le.length!=0||this.h.h||(this.s=1,Et(16),_=!1),this.o=this.o&&_,!_)rr(this.i,this.l,le,"[Invalid Chunked Response]"),zn(this),pi(this);else if(0<le.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),va(Ft),Ft.M=!0,Et(11))}}else rr(this.i,this.l,le,null),da(this,le);Ct==4&&zn(this),this.o&&!this.J&&(Ct==4?uo(this.j,this):(this.o=!1,ot(this)))}else io(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),zn(this),pi(this)}}}catch{}finally{}};function Nl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function td(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?Js:(_=Number(m.substring(_,T)),isNaN(_)?ua:(T+=1,T+_>m.length?Js:(m=m.slice(T,T+_),u.C=T+_,m)))}sr.prototype.cancel=function(){this.J=!0,zn(this)};function ot(u){u.S=Date.now()+u.I,bl(u,u.I)}function bl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=nr(R(u.ba,u),m)}function ps(u){u.B&&(p.clearTimeout(u.B),u.B=null)}sr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(la(this.i,this.A),this.L!=2&&($r(),Et(17)),zn(this),this.s=2,pi(this)):bl(this,this.S-u)};function pi(u){u.j.G==0||u.J||uo(u.j,u)}function zn(u){ps(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,St(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function da(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||cn(_.h,u))){if(!u.K&&cn(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)lo(_),cr(_);else break e;ao(_),Et(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=nr(R(_.Za,_),6e3));if(1>=Dl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Kr(_,11)}else if((u.K||_.g==u)&&lo(_),!ce(m))for(F=_.Da.g.parse(m),m=0;m<F.length;m++){let qe=F[m];if(_.T=qe[0],qe=qe[1],_.G==2)if(qe[0]=="c"){_.K=qe[1],_.ia=qe[2];const Ft=qe[3];Ft!=null&&(_.la=Ft,_.j.info("VER="+_.la));const Ct=qe[4];Ct!=null&&(_.Aa=Ct,_.j.info("SVER="+_.Aa));const $n=qe[5];$n!=null&&typeof $n=="number"&&0<$n&&(T=1.5*$n,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const kn=u.g;if(kn){const Es=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Es){var q=T.h;q.g||Es.indexOf("spdy")==-1&&Es.indexOf("quic")==-1&&Es.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ha(q,q.h),q.h=null))}if(T.D){const ho=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;ho&&(T.ya=ho,tt(T.I,T.D,ho))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var le=u;if(T.qa=Gl(T,T.J?T.ia:null,T.W),le.K){Vl(T.h,le);var Ze=le,bt=T.L;bt&&(Ze.I=bt),Ze.B&&(ps(Ze),ot(Ze)),T.g=le}else ws(T);0<_.i.length&&Cr(_)}else qe[0]!="stop"&&qe[0]!="close"||Kr(_,7);else _.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Kr(_,7):Ht(_):qe[0]!="noop"&&_.l&&_.l.ta(qe),_.v=0)}}$r(4)}catch{}}var jl=class{constructor(u,m){this.g=u,this.map=m}};function ms(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Dl(u){return u.h?1:u.g?u.g.size:0}function cn(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ha(u,m){u.g?u.g.add(m):u.h=m}function Vl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ms.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ol(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return $(u.i)}function Zs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],_=u.length,T=0;T<_;T++)m.push(u[T]);return m}m=[],_=0;for(T in u)m[_++]=u[T];return m}function eo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const T in u)m[_++]=T;return m}}}function mi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=eo(u),T=Zs(u),F=T.length,q=0;q<F;q++)m.call(void 0,T[q],_&&_[q],u)}var gs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nd(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),F=null;if(0<=T){var q=u[_].substring(0,T);F=u[_].substring(T+1)}else q=u[_];m(q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Wr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Wr){this.h=u.h,ys(this,u.j),this.o=u.o,this.g=u.g,gi(this,u.s),this.l=u.l;var m=u.i,_=new xr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),yi(this,_),this.m=u.m}else u&&(m=String(u).match(gs))?(this.h=!1,ys(this,m[1]||"",!0),this.o=He(m[2]||""),this.g=He(m[3]||"",!0),gi(this,m[4]),this.l=He(m[5]||"",!0),yi(this,m[6]||"",!0),this.m=He(m[7]||"")):(this.h=!1,this.i=new xr(null,this.h))}Wr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(_i(m,to,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(_i(m,to,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(_i(_,_.charAt(0)=="/"?Fl:Ml,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",_i(_,fa)),u.join("")};function Pn(u){return new Wr(u)}function ys(u,m,_){u.j=_?He(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function gi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function yi(u,m,_){m instanceof xr?(u.i=m,Ir(u.i,u.h)):(_||(m=_i(m,Ul)),u.i=new xr(m,u.h))}function tt(u,m,_){u.i.set(m,_)}function vi(u){return tt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function He(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _i(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Ll),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ll(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var to=/[#\/\?@]/g,Ml=/[#\?:]/g,Fl=/[#\?]/g,Ul=/[#\?@]/g,fa=/#/g;function xr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Wt(u){u.g||(u.g=new Map,u.h=0,u.i&&nd(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=xr.prototype,r.add=function(u,m){Wt(this),this.i=null,u=Bn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function or(u,m){Wt(u),m=Bn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ar(u,m){return Wt(u),m=Bn(u,m),u.g.has(m)}r.forEach=function(u,m){Wt(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(m,F,T,this)},this)},this)},r.na=function(){Wt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const F=u[T];for(let q=0;q<F.length;q++)_.push(m[T])}return _},r.V=function(u){Wt(this);let m=[];if(typeof u=="string")ar(this,u)&&(m=m.concat(this.g.get(Bn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Wt(this),this.i=null,u=Bn(this,u),ar(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function wi(u,m,_){or(u,m),0<_.length&&(u.i=null,u.g.set(Bn(u,m),$(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const q=encodeURIComponent(String(T)),le=this.V(T);for(T=0;T<le.length;T++){var F=q;le[T]!==""&&(F+="="+encodeURIComponent(String(le[T]))),u.push(F)}}return this.i=u.join("&")};function Bn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ir(u,m){m&&!u.j&&(Wt(u),u.i=null,u.g.forEach(function(_,T){var F=T.toLowerCase();T!=F&&(or(this,T),wi(this,F,_))},u)),u.j=m}function rd(u,m){const _=new ds;if(p.Image){const T=new Image;T.onload=z(gn,_,"TestLoadImage: loaded",!0,m,T),T.onerror=z(gn,_,"TestLoadImage: error",!1,m,T),T.onabort=z(gn,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=z(gn,_,"TestLoadImage: timeout",!1,m,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function zl(u,m){const _=new ds,T=new AbortController,F=setTimeout(()=>{T.abort(),gn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(F),q.ok?gn(_,"TestPingServer: ok",!0,m):gn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),gn(_,"TestPingServer: error",!1,m)})}function gn(u,m,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function id(){this.g=new Cn}function Bl(u,m,_){const T=_||"";try{mi(u,function(F,q){let le=F;v(F)&&(le=rt(F)),m.push(T+q+"="+encodeURIComponent(le))})}catch(F){throw m.push(T+"type="+encodeURIComponent("_badmap")),F}}function Hr(u){this.l=u.Ub||null,this.j=u.eb||!1}H(Hr,On),Hr.prototype.g=function(){return new vs(this.l,this.j)},Hr.prototype.i=(function(u){return function(){return u}})({});function vs(u,m){se.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(vs,se),r=vs.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ur(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ur(this)),this.g&&(this.readyState=3,ur(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?lr(this):ur(this),this.readyState==3&&$l(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,lr(this))},r.Qa=function(u){this.g&&(this.response=u,lr(this))},r.ga=function(){this.g&&lr(this)};function lr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ur(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function ur(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function qr(u){let m="";return ye(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Ei(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=qr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):tt(u,m,_))}function pt(u){se.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(pt,se);var sd=/^https?$/i,pa=["POST","PUT"];r=pt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ir.g(),this.v=this.o?Ln(this.o):Ln(ir),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){_s(this,q);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())_.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),F=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(pa,m,void 0))||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,le]of _)this.g.setRequestHeader(q,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ro(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){_s(this,q)}};function _s(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,no(u),An(u)}function no(u){u.A||(u.A=!0,C(u,"complete"),C(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,C(this,"complete"),C(this,"abort"),An(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),An(this,!0)),pt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ma(this):this.bb())},r.bb=function(){ma(this)};function ma(u){if(u.h&&typeof d<"u"&&(!u.v[1]||yn(u)!=4||u.Z()!=2)){if(u.u&&yn(u)==4)K(u.Ea,0,u);else if(C(u,"readystatechange"),yn(u)==4){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=le===0){var F=String(u.D).match(gs)[1]||null;!F&&p.self&&p.self.location&&(F=p.self.location.protocol.slice(0,-1)),T=!sd.test(F?F.toLowerCase():"")}_=T}if(_)C(u,"complete"),C(u,"success");else{u.m=6;try{var q=2<yn(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",no(u)}}finally{An(u)}}}}function An(u,m){if(u.g){ro(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||C(u,"ready");try{_.onreadystatechange=T}catch{}}}function ro(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function yn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),it(m)}};function ga(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function io(u){const m={};u=(u.g&&2<=yn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(ce(u[T]))continue;var _=k(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[F]||[];m[F]=q,q.push(_)}j(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ya(u){this.Aa=0,this.i=[],this.j=new ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sr("baseRetryDelayMs",5e3,u),this.cb=Sr("retryDelaySeedMs",1e4,u),this.Wa=Sr("forwardChannelMaxRetries",2,u),this.wa=Sr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ms(u&&u.concurrentRequestLimit),this.Da=new id,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ya.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,T){Et(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Gl(this,null,this.W),Cr(this)};function Ht(u){if(so(u),u.G==3){var m=u.U++,_=Pn(u.I);if(tt(_,"SID",u.K),tt(_,"RID",m),tt(_,"TYPE","terminate"),Gr(u,_),m=new sr(u,u.j,m),m.L=2,m.v=vi(Pn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Kl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ot(m)}ql(u)}function cr(u){u.g&&(va(u),u.g.cancel(),u.g=null)}function so(u){cr(u),u.u&&(p.clearTimeout(u.u),u.u=null),lo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function Cr(u){if(!Rn(u.h)&&!u.s){u.s=!0;var m=u.Ga;Be||he(),ue||(Be(),ue=!0),Ie.add(m,u),u.B=0}}function od(u,m){return Dl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=nr(R(u.Ga,u,m),Hl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new sr(this,this.j,u);let q=this.o;if(this.S&&(q?(q=S(q),x(q,this.S)):q=this.S),this.m!==null||this.O||(F.H=q,q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Ti(this,F,m),_=Pn(this.I),tt(_,"RID",u),tt(_,"CVER",22),this.D&&tt(_,"X-HTTP-Session-Id",this.D),Gr(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(qr(q)))+"&"+m:this.m&&Ei(_,this.m,q)),ha(this.h,F),this.Ua&&tt(_,"TYPE","init"),this.P?(tt(_,"$req",m),tt(_,"SID","null"),F.T=!0,Xs(F,_,null)):Xs(F,_,m),this.G=2}}else this.G==3&&(u?oo(this,u):this.i.length==0||Rn(this.h)||oo(this))};function oo(u,m){var _;m?_=m.l:_=u.U++;const T=Pn(u.I);tt(T,"SID",u.K),tt(T,"RID",_),tt(T,"AID",u.T),Gr(u,T),u.m&&u.o&&Ei(T,u.m,u.o),_=new sr(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ti(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ha(u.h,_),Xs(_,T,m)}function Gr(u,m){u.H&&ye(u.H,function(_,T){tt(m,T,_)}),u.l&&mi({},function(_,T){tt(m,T,_)})}function Ti(u,m,_){_=Math.min(u.i.length,_);var T=u.l?R(u.l.Na,u.l,u):null;e:{var F=u.i;let q=-1;for(;;){const le=["count="+_];q==-1?0<_?(q=F[0].g,le.push("ofs="+q)):q=0:le.push("ofs="+q);let Ze=!0;for(let bt=0;bt<_;bt++){let qe=F[bt].g;const Ft=F[bt].map;if(qe-=q,0>qe)q=Math.max(0,F[bt].g-100),Ze=!1;else try{Bl(Ft,le,"req"+qe+"_")}catch{T&&T(Ft)}}if(Ze){T=le.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,T}function ws(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Be||he(),ue||(Be(),ue=!0),Ie.add(m,u),u.v=0}}function ao(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=nr(R(u.Fa,u),Hl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=nr(R(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),cr(this),Wl(this))};function va(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Wl(u){u.g=new sr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Pn(u.qa);tt(m,"RID","rpc"),tt(m,"SID",u.K),tt(m,"AID",u.T),tt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&tt(m,"TO",u.ja),tt(m,"TYPE","xmlhttp"),Gr(u,m),u.m&&u.o&&Ei(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=vi(Pn(m)),_.m=null,_.P=!0,ca(_,u)}r.Za=function(){this.C!=null&&(this.C=null,cr(this),ao(this),Et(19))};function lo(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function uo(u,m){var _=null;if(u.g==m){lo(u),va(u),u.g=null;var T=2}else if(cn(u.h,m))_=m.D,Vl(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var F=u.B;T=st(),C(T,new Ks(T,_)),Cr(u)}else ws(u);else if(F=m.s,F==3||F==0&&0<m.X||!(T==1&&od(u,m)||T==2&&ao(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),F){case 1:Kr(u,5);break;case 4:Kr(u,10);break;case 3:Kr(u,6);break;default:Kr(u,2)}}}function Hl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Kr(u,m){if(u.j.info("Error code "+m),m==2){var _=R(u.fb,u),T=u.Xa;const F=!T;T=new Wr(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||ys(T,"https"),vi(T),F?rd(T.toString(),_):zl(T.toString(),_)}else Et(2);u.G=0,u.l&&u.l.sa(m),ql(u),so(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function ql(u){if(u.G=0,u.ka=[],u.l){const m=Ol(u.h);(m.length!=0||u.i.length!=0)&&(L(u.ka,m),L(u.ka,u.i),u.h.i.length=0,$(u.i),u.i.length=0),u.l.ra()}}function Gl(u,m,_){var T=_ instanceof Wr?Pn(_):new Wr(_);if(T.g!="")m&&(T.g=m+"."+T.g),gi(T,T.s);else{var F=p.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var q=new Wr(null);T&&ys(q,T),m&&(q.g=m),F&&gi(q,F),_&&(q.l=_),T=q}return _=u.D,m=u.ya,_&&m&&tt(T,_,m),tt(T,"VER",u.la),Gr(u,T),T}function Kl(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new pt(new Hr({eb:_})):new pt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function _a(){}r=_a.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function co(){}co.prototype.g=function(u,m){return new dn(u,m)};function dn(u,m){se.call(this),this.g=new ya(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ce(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ce(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Rr(this)}H(dn,se),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Ht(this.g)},dn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=rt(u),u=_);m.i.push(new jl(m.Ya++,u)),m.G==3&&Cr(m)},dn.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,dn.aa.N.call(this)};function Ql(u){Mn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}H(Ql,Mn);function Yl(){fi.call(this),this.status=1}H(Yl,fi);function Rr(u){this.g=u}H(Rr,_a),Rr.prototype.ua=function(){C(this.g,"a")},Rr.prototype.ta=function(u){C(this.g,new Ql(u))},Rr.prototype.sa=function(u){C(this.g,new Yl)},Rr.prototype.ra=function(){C(this.g,"b")},co.prototype.createWebChannel=co.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,O_=function(){return new co},V_=function(){return st()},D_=Fn,rf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ys.NO_ERROR=0,Ys.TIMEOUT=8,Ys.HTTP_ERROR=6,rc=Ys,Al.COMPLETE="complete",j_=Al,Tr.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",se.prototype.listen=se.prototype.K,Ka=Tr,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,b_=pt}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Ty="@firebase/firestore",xy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Pf("@firebase/firestore");function Do(){return Bs.logLevel}function ge(r,...e){if(Bs.logLevel<=$e.DEBUG){const t=e.map(Bf);Bs.debug(`Firestore (${na}): ${r}`,...t)}}function ci(r,...e){if(Bs.logLevel<=$e.ERROR){const t=e.map(Bf);Bs.error(`Firestore (${na}): ${r}`,...t)}}function Yi(r,...e){if(Bs.logLevel<=$e.WARN){const t=e.map(Bf);Bs.warn(`Firestore (${na}): ${r}`,...t)}}function Bf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,L_(r,i,t)}function L_(r,e,t){let i=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ci(i),new Error(i)}function Je(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||L_(e,o,i)}function Oe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends hi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class A1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class k1{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ai,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ai)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Je(typeof i.accessToken=="string",31837,{l:i}),new M_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class N1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new N1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Iy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const i=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Iy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Iy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=D1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Me(r,e){return r<e?-1:r>e?1:0}function sf(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Me(i,o);{const l=F_(),d=V1(l.encode(Sy(r,t)),l.encode(Sy(e,t)));return d!==0?d:Me(i,o)}}t+=i>65535?2:1}return Me(r.length,e.length)}function Sy(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function V1(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Me(r[t],e[t]);return Me(r.length,e.length)}function Ho(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="__name__";class br{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ne(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof br?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=br.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Me(e.length,t.length)}static compareSegments(e,t){const i=br.isNumericId(e),o=br.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?br.extractNumericId(e).compare(br.extractNumericId(t)):sf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gi.fromString(e.substring(4,e.length-2))}}class dt extends br{construct(e,t,i){return new dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const O1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends br{construct(e,t,i){return new Qt(e,t,i)}static isValidIdentifier(e){return O1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cy}static keyField(){return new Qt([Cy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new xe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new xe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new xe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(l(),o++)}if(l(),d)throw new xe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(dt.fromString(e))}static fromName(e){return new Ce(dt.fromString(e).popFirst(5))}static empty(){return new Ce(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(r,e,t){if(!t)throw new xe(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function L1(r,e,t,i){if(e===!0&&i===!0)throw new xe(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ry(r){if(!Ce.isDocumentKey(r))throw new xe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Py(r){if(Ce.isDocumentKey(r))throw new xe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function z_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Wf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ne(12329,{type:typeof r})}function _r(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new xe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wf(r);throw new xe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(r,e){const t={typeString:r};return e&&(t.value=e),t}function Il(r,e){if(!z_(r))throw new xe(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new xe(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=-62135596800,ky=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ky);return new ht(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ay)throw new xe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ky}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Il(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ay;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:At("string",ht._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new ht(0,0))}static max(){return new De(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=-1;function M1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=De.fromTimestamp(i===1e9?new ht(t+1,0):new ht(t,i));return new Ji(o,Ce.empty(),e)}function F1(r){return new Ji(r.readTime,r.key,dl)}class Ji{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ji(De.min(),Ce.empty(),dl)}static max(){return new Ji(De.max(),Ce.empty(),dl)}}function U1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==z1)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,i)=>{t(e)}))}static reject(e){return new Z(((t,i)=>{i(e)}))}static waitFor(e){return new Z(((t,i)=>{let o=0,l=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++l,d&&l===o&&t()}),(y=>i(y)))})),d=!0,l===o&&t()}))}static or(e){let t=Z.resolve(!1);for(const i of e)t=t.next((o=>o?Z.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new Z(((i,o)=>{const l=e.length,d=new Array(l);let p=0;for(let y=0;y<l;y++){const v=y;t(e[v]).next((E=>{d[v]=E,++p,p===l&&i(d)}),(E=>o(E)))}}))}static doWhile(e,t){return new Z(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function $1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ia(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Oc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf=-1;function Lc(r){return r==null}function vc(r){return r===0&&1/r==-1/0}function W1(r){return typeof r=="number"&&Number.isInteger(r)&&!vc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="";function H1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ny(e)),e=q1(r.get(t),e);return Ny(e)}function q1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case B_:t+="";break;default:t+=l}}return t}function Ny(r){return r+B_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ls(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function $_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t){this.comparator=e,this.root=t||Kt.EMPTY}insert(e,t){return new _t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Kt.RED,this.left=o??Kt.EMPTY,this.right=l??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Kt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Kt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jy(this.data.getIterator())}getIteratorFrom(e){return new jy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class jy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new Ot(Qt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new W_("Invalid base64 string: "+l):l}})(e);return new Jt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new Jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const G1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(r){if(Je(!!r,39018),typeof r=="string"){let e=0;const t=G1.exec(r);if(Je(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xt(r.seconds),nanos:xt(r.nanos)}}function xt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Zi(r){return typeof r=="string"?Jt.fromBase64String(r):Jt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="server_timestamp",q_="__type__",G_="__previous_value__",K_="__local_write_time__";function qf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[q_])===null||t===void 0?void 0:t.stringValue)===H_}function Mc(r){const e=r.mapValue.fields[G_];return qf(e)?Mc(e):e}function hl(r){const e=Xi(r.mapValue.fields[K_].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t,i,o,l,d,p,y,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=E}}const _c="(default)";class fl{constructor(e,t){this.projectId=e,this.database=t||_c}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===_c}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="__type__",Q1="__max__",Gu={mapValue:{}},Y_="__vector__",wc="value";function es(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qf(r)?4:J1(r)?9007199254740991:Y1(r)?10:11:Ne(28295,{value:r})}function Ur(r,e){if(r===e)return!0;const t=es(r);if(t!==es(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return hl(r).isEqual(hl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Xi(o.timestampValue),p=Xi(l.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Zi(o.bytesValue).isEqual(Zi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return xt(o.geoPointValue.latitude)===xt(l.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return xt(o.integerValue)===xt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=xt(o.doubleValue),p=xt(l.doubleValue);return d===p?vc(d)===vc(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return Ho(r.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},p=l.mapValue.fields||{};if(by(d)!==by(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!Ur(d[y],p[y])))return!1;return!0})(r,e);default:return Ne(52216,{left:r})}}function pl(r,e){return(r.values||[]).find((t=>Ur(t,e)))!==void 0}function qo(r,e){if(r===e)return 0;const t=es(r),i=es(e);if(t!==i)return Me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const p=xt(l.integerValue||l.doubleValue),y=xt(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(r,e);case 3:return Dy(r.timestampValue,e.timestampValue);case 4:return Dy(hl(r),hl(e));case 5:return sf(r.stringValue,e.stringValue);case 6:return(function(l,d){const p=Zi(l),y=Zi(d);return p.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const p=l.split("/"),y=d.split("/");for(let v=0;v<p.length&&v<y.length;v++){const E=Me(p[v],y[v]);if(E!==0)return E}return Me(p.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const p=Me(xt(l.latitude),xt(d.latitude));return p!==0?p:Me(xt(l.longitude),xt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Vy(r.arrayValue,e.arrayValue);case 10:return(function(l,d){var p,y,v,E;const I=l.fields||{},R=d.fields||{},z=(p=I[wc])===null||p===void 0?void 0:p.arrayValue,H=(y=R[wc])===null||y===void 0?void 0:y.arrayValue,$=Me(((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0,((E=H==null?void 0:H.values)===null||E===void 0?void 0:E.length)||0);return $!==0?$:Vy(z,H)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Gu.mapValue&&d===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(d===Gu.mapValue)return-1;const p=l.fields||{},y=Object.keys(p),v=d.fields||{},E=Object.keys(v);y.sort(),E.sort();for(let I=0;I<y.length&&I<E.length;++I){const R=sf(y[I],E[I]);if(R!==0)return R;const z=qo(p[y[I]],v[E[I]]);if(z!==0)return z}return Me(y.length,E.length)})(r.mapValue,e.mapValue);default:throw Ne(23264,{le:t})}}function Dy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=Xi(r),i=Xi(e),o=Me(t.seconds,i.seconds);return o!==0?o:Me(t.nanos,i.nanos)}function Vy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=qo(t[o],i[o]);if(l)return l}return Me(t.length,i.length)}function Go(r){return of(r)}function of(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Xi(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Zi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ce.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=of(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of i)l?l=!1:o+=",",o+=`${d}:${of(t.fields[d])}`;return o+"}"})(r.mapValue):Ne(61005,{value:r})}function ic(r){switch(es(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mc(r);return e?16+ic(e):16;case 5:return 2*r.stringValue.length;case 6:return Zi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+ic(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return ls(i.fields,((l,d)=>{o+=l.length+ic(d)})),o})(r.mapValue);default:throw Ne(13486,{value:r})}}function af(r){return!!r&&"integerValue"in r}function Gf(r){return!!r&&"arrayValue"in r}function Oy(r){return!!r&&"nullValue"in r}function Ly(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function sc(r){return!!r&&"mapValue"in r}function Y1(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Q_])===null||t===void 0?void 0:t.stringValue)===Y_}function nl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ls(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=nl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function J1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Q1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!sc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(t)}setAll(e){let t=Qt.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=p.popLast()}d?i[p.lastSegment()]=nl(d):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());sc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];sc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ls(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Sn(nl(this.value))}}function J_(r){const e=[];return ls(r.fields,((t,i)=>{const o=new Qt([t]);if(sc(i)){const l=J_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t,i,o,l,d,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=d,this.documentState=p}static newInvalidDocument(e){return new an(e,0,De.min(),De.min(),De.min(),Sn.empty(),0)}static newFoundDocument(e,t,i,o){return new an(e,1,t,De.min(),i,o,0)}static newNoDocument(e,t){return new an(e,2,t,De.min(),De.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,De.min(),De.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t){this.position=e,this.inclusive=t}}function My(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?i=Ce.comparator(Ce.fromName(d.referenceValue),t.key):i=qo(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Fy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ur(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function X1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{}class Vt extends X_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new eC(e,t,i):t==="array-contains"?new rC(e,i):t==="in"?new iC(e,i):t==="not-in"?new sC(e,i):t==="array-contains-any"?new oC(e,i):new Vt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new tC(e,i):new nC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qo(t,this.value)):t!==null&&es(this.value)===es(t)&&this.matchesComparison(qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zr extends X_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new zr(e,t)}matches(e){return Z_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Z_(r){return r.op==="and"}function e0(r){return Z1(r)&&Z_(r)}function Z1(r){for(const e of r.filters)if(e instanceof zr)return!1;return!0}function lf(r){if(r instanceof Vt)return r.field.canonicalString()+r.op.toString()+Go(r.value);if(e0(r))return r.filters.map((e=>lf(e))).join(",");{const e=r.filters.map((t=>lf(t))).join(",");return`${r.op}(${e})`}}function t0(r,e){return r instanceof Vt?(function(i,o){return o instanceof Vt&&i.op===o.op&&i.field.isEqual(o.field)&&Ur(i.value,o.value)})(r,e):r instanceof zr?(function(i,o){return o instanceof zr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,d,p)=>l&&t0(d,o.filters[p])),!0):!1})(r,e):void Ne(19439)}function n0(r){return r instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Go(t.value)}`})(r):r instanceof zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(n0).join(" ,")+"}"})(r):"Filter"}class eC extends Vt{constructor(e,t,i){super(e,t,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class tC extends Vt{constructor(e,t){super(e,"in",t),this.keys=r0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class nC extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=r0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function r0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ce.fromName(i.referenceValue)))}class rC extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gf(t)&&pl(t.arrayValue,this.value)}}class iC extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pl(this.value.arrayValue,t)}}class sC extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pl(this.value.arrayValue,t)}}class oC extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>pl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t=null,i=[],o=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=d,this.endAt=p,this.Pe=null}}function Uy(r,e=null,t=[],i=[],o=null,l=null,d=null){return new aC(r,e,t,i,o,l,d)}function Kf(r){const e=Oe(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>lf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Lc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Go(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Go(i))).join(",")),e.Pe=t}return e.Pe}function Qf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!X1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!t0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Fy(r.startAt,e.startAt)&&Fy(r.endAt,e.endAt)}function uf(r){return Ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t=null,i=[],o=[],l=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=y,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function lC(r,e,t,i,o,l,d,p){return new Fc(r,e,t,i,o,l,d,p)}function Yf(r){return new Fc(r)}function zy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function uC(r){return r.collectionGroup!==null}function rl(r){const e=Oe(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Ot(Qt.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Tc(l,i))})),t.has(Qt.keyField().canonicalString())||e.Te.push(new Tc(Qt.keyField(),i))}return e.Te}function Or(r){const e=Oe(r);return e.Ie||(e.Ie=cC(e,rl(r))),e.Ie}function cC(r,e){if(r.limitType==="F")return Uy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Tc(o.field,l)}));const t=r.endAt?new Ec(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Ec(r.startAt.position,r.startAt.inclusive):null;return Uy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function cf(r,e,t){return new Fc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Uc(r,e){return Qf(Or(r),Or(e))&&r.limitType===e.limitType}function i0(r){return`${Kf(Or(r))}|lt:${r.limitType}`}function Vo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>n0(o))).join(", ")}]`),Lc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Go(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Go(o))).join(",")),`Target(${i})`})(Or(r))}; limitType=${r.limitType})`}function zc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ce.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of rl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,y){const v=My(d,p,y);return d.inclusive?v<=0:v<0})(i.startAt,rl(i),o)||i.endAt&&!(function(d,p,y){const v=My(d,p,y);return d.inclusive?v>=0:v>0})(i.endAt,rl(i),o))})(r,e)}function dC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function s0(r){return(e,t)=>{let i=!1;for(const o of rl(r)){const l=hC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function hC(r,e,t){const i=r.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,d,p){const y=d.data.field(l),v=p.data.field(l);return y!==null&&v!==null?qo(y,v):Ne(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return $_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new _t(Ce.comparator);function di(){return fC}const o0=new _t(Ce.comparator);function Qa(...r){let e=o0;for(const t of r)e=e.insert(t.key,t);return e}function a0(r){let e=o0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Os(){return il()}function l0(){return il()}function il(){return new Hs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const pC=new _t(Ce.comparator),mC=new Ot(Ce.comparator);function We(...r){let e=mC;for(const t of r)e=e.add(t);return e}const gC=new Ot(Me);function yC(){return gC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}function u0(r){return{integerValue:""+r}}function vC(r,e){return W1(e)?u0(e):Jf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this._=void 0}}function _C(r,e,t){return r instanceof xc?(function(o,l){const d={fields:{[q_]:{stringValue:H_},[K_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&qf(l)&&(l=Mc(l)),l&&(d.fields[G_]=l),{mapValue:d}})(t,e):r instanceof ml?d0(r,e):r instanceof gl?h0(r,e):(function(o,l){const d=c0(o,l),p=By(d)+By(o.Ee);return af(d)&&af(o.Ee)?u0(p):Jf(o.serializer,p)})(r,e)}function wC(r,e,t){return r instanceof ml?d0(r,e):r instanceof gl?h0(r,e):t}function c0(r,e){return r instanceof Ic?(function(i){return af(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class xc extends Bc{}class ml extends Bc{constructor(e){super(),this.elements=e}}function d0(r,e){const t=f0(e);for(const i of r.elements)t.some((o=>Ur(o,i)))||t.push(i);return{arrayValue:{values:t}}}class gl extends Bc{constructor(e){super(),this.elements=e}}function h0(r,e){let t=f0(e);for(const i of r.elements)t=t.filter((o=>!Ur(o,i)));return{arrayValue:{values:t}}}class Ic extends Bc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function By(r){return xt(r.integerValue||r.doubleValue)}function f0(r){return Gf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function EC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof ml&&o instanceof ml||i instanceof gl&&o instanceof gl?Ho(i.elements,o.elements,Ur):i instanceof Ic&&o instanceof Ic?Ur(i.Ee,o.Ee):i instanceof xc&&o instanceof xc})(r.transform,e.transform)}class TC{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class $c{}function p0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Xf(r.key,Jn.none()):new Sl(r.key,r.data,Jn.none());{const t=r.data,i=Sn.empty();let o=new Ot(Qt.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),o=o.add(l)}return new us(r.key,i,new Vn(o.toArray()),Jn.none())}}function xC(r,e,t){r instanceof Sl?(function(o,l,d){const p=o.value.clone(),y=Wy(o.fieldTransforms,l,d.transformResults);p.setAll(y),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,t):r instanceof us?(function(o,l,d){if(!oc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const p=Wy(o.fieldTransforms,l,d.transformResults),y=l.data;y.setAll(m0(o)),y.setAll(p),l.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function sl(r,e,t,i){return r instanceof Sl?(function(l,d,p,y){if(!oc(l.precondition,d))return p;const v=l.value.clone(),E=Hy(l.fieldTransforms,y,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof us?(function(l,d,p,y){if(!oc(l.precondition,d))return p;const v=Hy(l.fieldTransforms,y,d),E=d.data;return E.setAll(m0(l)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(r,e,t,i):(function(l,d,p){return oc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,t)}function IC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=c0(i.transform,o||null);l!=null&&(t===null&&(t=Sn.empty()),t.set(i.field,l))}return t||null}function $y(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ho(i,o,((l,d)=>EC(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Sl extends $c{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class us extends $c{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function m0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Wy(r,e,t){const i=new Map;Je(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,p=e.data.field(l.field);i.set(l.field,wC(d,p,t[o]))}return i}function Hy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);i.set(o.field,_C(l,d,e))}return i}class Xf extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SC extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&xC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=sl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=sl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=l0();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let p=this.applyToLocalView(d,l.mutatedFields);p=t.has(o.key)?null:p;const y=p0(d,p);y!==null&&i.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(De.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,((t,i)=>$y(t,i)))&&Ho(this.baseMutations,e.baseMutations,((t,i)=>$y(t,i)))}}class Zf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Je(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return pC})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,i[d].version);return new Zf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ge;function AC(r){switch(r){case ee.OK:return Ne(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ne(15467,{code:r})}}function g0(r){if(r===void 0)return ci("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Pt.OK:return ee.OK;case Pt.CANCELLED:return ee.CANCELLED;case Pt.UNKNOWN:return ee.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ee.INTERNAL;case Pt.UNAVAILABLE:return ee.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ee.NOT_FOUND;case Pt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Pt.ABORTED:return ee.ABORTED;case Pt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Pt.DATA_LOSS:return ee.DATA_LOSS;default:return Ne(39323,{code:r})}}(Ge=Pt||(Pt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Gi([4294967295,4294967295],0);function qy(r){const e=F_().encode(r),t=new N_;return t.update(e),new Uint8Array(t.digest())}function Gy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Gi([t,i],0),new Gi([o,l],0)]}class ep{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ya(`Invalid padding: ${t}`);if(i<0)throw new Ya(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ya(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ya(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Gi.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Gi.fromNumber(i)));return o.compare(kC)===1&&(o=new Gi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=qy(e),[i,o]=Gy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new ep(l,o,t);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.fe===0)return;const t=qy(e),[i,o]=Gy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Wc(De.min(),o,new _t(Me),di(),We())}}class Cl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Cl(i,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class y0{constructor(e,t){this.targetId=e,this.De=t}}class v0{constructor(e,t,i=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Ky{constructor(){this.ve=0,this.Ce=Qy(),this.Fe=Jt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=We(),t=We(),i=We();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ne(38017,{changeType:l})}})),new Cl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Qy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class NC{constructor(e){this.We=e,this.Ge=new Map,this.ze=di(),this.je=Ku(),this.Je=Ku(),this.He=new _t(Me)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(uf(l))if(i===0){const d=new Ce(l.path);this.Xe(t,d,an.newNoDocument(d,De.min()))}else Je(i===1,20013,{expectedCount:i});else{const d=this.ot(t);if(d!==i){const p=this._t(e),y=p?this.ut(p,e,d):1;if(y!==0){this.rt(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let d,p;try{d=Zi(i).toUint8Array()}catch(y){if(y instanceof W_)return Yi("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new ep(d,o,l)}catch(y){return Yi(y instanceof Ya?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.fe===0?null:p}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const d=this.We.lt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,d)=>{const p=this.st(d);if(p){if(l.current&&uf(p.target)){const y=new Ce(p.target.path);this.Tt(y).has(d)||this.It(d,y)||this.Xe(d,y,an.newNoDocument(y,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}}));let i=We();this.Je.forEach(((l,d)=>{let p=!0;d.forEachWhile((y=>{const v=this.st(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ze.forEach(((l,d)=>d.setReadTime(e)));const o=new Wc(e,t,this.He,this.ze,i);return this.ze=di(),this.je=Ku(),this.Je=Ku(),this.He=new _t(Me),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Ky,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ot(Me),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ot(Me),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ky),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ku(){return new _t(Ce.comparator)}function Qy(){return new _t(Ce.comparator)}const bC={asc:"ASCENDING",desc:"DESCENDING"},jC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DC={and:"AND",or:"OR"};class VC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function df(r,e){return r.useProto3Json||Lc(e)?e:{value:e}}function Sc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function OC(r,e){return Sc(r,e.toTimestamp())}function Lr(r){return Je(!!r,49232),De.fromTimestamp((function(t){const i=Xi(t);return new ht(i.seconds,i.nanos)})(r))}function tp(r,e){return hf(r,e).canonicalString()}function hf(r,e){const t=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function w0(r){const e=dt.fromString(r);return Je(S0(e),10190,{key:e.toString()}),e}function ff(r,e){return tp(r.databaseId,e.path)}function Fh(r,e){const t=w0(e);if(t.get(1)!==r.databaseId.projectId)throw new xe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new xe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ce(T0(t))}function E0(r,e){return tp(r.databaseId,e)}function LC(r){const e=w0(r);return e.length===4?dt.emptyPath():T0(e)}function pf(r){return new dt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function T0(r){return Je(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Yy(r,e,t){return{name:ff(r,e),fields:t.value.mapValue.fields}}function MC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ne(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(Je(E===void 0||typeof E=="string",58123),Jt.fromBase64String(E||"")):(Je(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Jt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const E=v.code===void 0?ee.UNKNOWN:g0(v.code);return new xe(E,v.message||"")})(d);t=new v0(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Fh(r,i.document.name),l=Lr(i.document.updateTime),d=i.document.createTime?Lr(i.document.createTime):De.min(),p=new Sn({mapValue:{fields:i.document.fields}}),y=an.newFoundDocument(o,l,d,p),v=i.targetIds||[],E=i.removedTargetIds||[];t=new ac(v,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Fh(r,i.document),l=i.readTime?Lr(i.readTime):De.min(),d=an.newNoDocument(o,l),p=i.removedTargetIds||[];t=new ac([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Fh(r,i.document),l=i.removedTargetIds||[];t=new ac([],l,o,null)}else{if(!("filter"in e))return Ne(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,d=new PC(o,l),p=i.targetId;t=new y0(p,d)}}return t}function FC(r,e){let t;if(e instanceof Sl)t={update:Yy(r,e.key,e.value)};else if(e instanceof Xf)t={delete:ff(r,e.key)};else if(e instanceof us)t={update:Yy(r,e.key,e.data),updateMask:KC(e.fieldMask)};else{if(!(e instanceof SC))return Ne(16599,{Rt:e.type});t={verify:ff(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const p=d.transform;if(p instanceof xc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ml)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof gl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Ic)return{fieldPath:d.field.canonicalString(),increment:p.Ee};throw Ne(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:OC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ne(27497)})(r,e.precondition)),t}function UC(r,e){return r&&r.length>0?(Je(e!==void 0,14353),r.map((t=>(function(o,l){let d=o.updateTime?Lr(o.updateTime):Lr(l);return d.isEqual(De.min())&&(d=Lr(l)),new TC(d,o.transformResults||[])})(t,e)))):[]}function zC(r,e){return{documents:[E0(r,e.path)]}}function BC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=E0(r,o);const l=(function(v){if(v.length!==0)return I0(zr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(v){if(v.length!==0)return v.map((E=>(function(R){return{field:Oo(R.field),direction:HC(R.dir)}})(E)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=df(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function $C(r){let e=LC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Je(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(I){const R=x0(I);return R instanceof zr&&e0(R)?R.getFilters():[R]})(t.where));let d=[];t.orderBy&&(d=(function(I){return I.map((R=>(function(H){return new Tc(Lo(H.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(R)))})(t.orderBy));let p=null;t.limit&&(p=(function(I){let R;return R=typeof I=="object"?I.value:I,Lc(R)?null:R})(t.limit));let y=null;t.startAt&&(y=(function(I){const R=!!I.before,z=I.values||[];return new Ec(z,R)})(t.startAt));let v=null;return t.endAt&&(v=(function(I){const R=!I.before,z=I.values||[];return new Ec(z,R)})(t.endAt)),lC(e,o,d,l,p,"F",y,v)}function WC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function x0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Lo(t.unaryFilter.field);return Vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Lo(t.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Lo(t.unaryFilter.field);return Vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Lo(t.unaryFilter.field);return Vt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Vt.create(Lo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return zr.create(t.compositeFilter.filters.map((i=>x0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(r):Ne(30097,{filter:r})}function HC(r){return bC[r]}function qC(r){return jC[r]}function GC(r){return DC[r]}function Oo(r){return{fieldPath:r.canonicalString()}}function Lo(r){return Qt.fromServerFormat(r.fieldPath)}function I0(r){return r instanceof Vt?(function(t){if(t.op==="=="){if(Ly(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NAN"}};if(Oy(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ly(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NAN"}};if(Oy(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(t.field),op:qC(t.op),value:t.value}}})(r):r instanceof zr?(function(t){const i=t.getFilters().map((o=>I0(o)));return i.length===1?i[0]:{compositeFilter:{op:GC(t.op),filters:i}}})(r):Ne(54877,{filter:r})}function KC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function S0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t,i,o,l=De.min(),d=De.min(),p=Jt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.gt=e}}function YC(r){const e=$C({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.Dn=new XC}addToCollectionParentIndex(e,t){return this.Dn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Ji.min())}updateCollectionGroup(e,t,i){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class XC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ot(dt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ot(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C0=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(C0,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ko(0)}static ur(){return new Ko(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="LruGarbageCollector",ZC=1048576;function Zy([r,e],[t,i]){const o=Me(r,t);return o===0?Me(e,i):o}class eR{constructor(e){this.Tr=e,this.buffer=new Ot(Zy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Zy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ge(Xy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ia(t)?ge(Xy,"Ignoring IndexedDB error during garbage collection: ",t):await ra(t)}await this.Rr(3e5)}))}}class nR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Oc.ue);const i=new eR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Jy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,d,p,y,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,d=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,p=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(v=Date.now(),Do()<=$e.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${l} targets in `+(y-p)+`ms
	Removed ${I} documents in `+(v-y)+`ms
Total Duration: ${v-E}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function rR(r,e){return new nR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.changes=new Hs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Z.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&sl(i.mutation,o,Vn.empty(),ht.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,We()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=We()){const o=Os();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let d=Qa();return l.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=Os();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,We())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,i,o){let l=di();const d=il(),p=(function(){return il()})();return t.forEach(((y,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof us)?l=l.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),sl(E.mutation,v,E.mutation.getFieldMask(),ht.now())):d.set(v.key,Vn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((v,E)=>d.set(v,E))),t.forEach(((v,E)=>{var I;return p.set(v,new sR(E,(I=d.get(v))!==null&&I!==void 0?I:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=il();let o=new _t(((d,p)=>d-p)),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let E=i.get(y)||Vn.empty();E=p.applyToLocalView(v,E),i.set(y,E);const I=(o.get(p.batchId)||We()).add(y);o=o.insert(p.batchId,I)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),v=y.key,E=y.value,I=l0();E.forEach((R=>{if(!l.has(R)){const z=p0(t.get(R),i.get(R));z!==null&&I.set(R,z),l=l.add(R)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,I))}return Z.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return Ce.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Z.resolve(Os());let p=dl,y=l;return d.next((v=>Z.forEach(v,((E,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),l.get(E)?Z.resolve():this.remoteDocumentCache.getEntry(e,E).next((R=>{y=y.insert(E,R)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,y,v,We()))).next((E=>({batchId:p,changes:a0(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((i=>{let o=Qa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let d=Qa();return this.indexManager.getCollectionParents(e,l).next((p=>Z.forEach(p,(y=>{const v=(function(I,R){return new Fc(R,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((I,R)=>{d=d.insert(I,R)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((d=>{l.forEach(((y,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,an.newInvalidDocument(E)))}));let p=Qa();return d.forEach(((y,v)=>{const E=l.get(y);E!==void 0&&sl(E.mutation,v,Vn.empty(),ht.now()),zc(t,v)&&(p=p.insert(y,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Lr(o.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:YC(o.bundledQuery),readTime:Lr(o.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.overlays=new _t(Ce.comparator),this.kr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Os();return Z.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),Z.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),Z.resolve()}getOverlaysForCollection(e,t,i){const o=Os(),l=t.length+1,d=new Ce(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new _t(((v,E)=>v-E));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=Os(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const p=Os(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,E)=>p.set(v,E))),!(p.size()>=o)););return Z.resolve(p)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new RC(t,i));let l=this.kr.get(t);l===void 0&&(l=We(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.qr=new Ot($t.Qr),this.$r=new Ot($t.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new $t(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new $t(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Ce(new dt([])),i=new $t(t,e),o=new $t(t,e+1),l=[];return this.$r.forEachInRange([i,o],(d=>{this.Wr(d),l.push(d.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ce(new dt([])),i=new $t(t,e),o=new $t(t,e+1);let l=We();return this.$r.forEachInRange([i,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new $t(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ce.comparator(e.key,t.key)||Me(e.Hr,t.Hr)}static Ur(e,t){return Me(e.Hr,t.Hr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ot($t.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new CC(l,t,i,o);this.mutationQueue.push(d);for(const p of o)this.Yr=this.Yr.add(new $t(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Z.resolve(d)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return Z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Hf:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),o=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(d=>{const p=this.Zr(d.Hr);l.push(p)})),Z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(Me);return t.forEach((o=>{const l=new $t(o,0),d=new $t(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],(p=>{i=i.add(p.Hr)}))})),Z.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ce.isDocumentKey(l)||(l=l.child(""));const d=new $t(new Ce(l),0);let p=new Ot(Me);return this.Yr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(y.Hr)),!0)}),d),Z.resolve(this.ei(p))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Je(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Z.forEach(t.mutations,(o=>{const l=new $t(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new $t(t,0),o=this.Yr.firstAfterOrEqual(i);return Z.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.ni=e,this.docs=(function(){return new _t(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Z.resolve(i?i.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let i=di();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():an.newInvalidDocument(o))})),Z.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=di();const d=t.path,p=new Ce(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:v,value:{document:E}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||U1(F1(E),i)<=0||(o.has(E.key)||zc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Z.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ne(9500)}ri(e,t){return Z.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new hR(this)}getSize(e){return Z.resolve(this.size)}}class hR extends iR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),Z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.persistence=e,this.ii=new Hs((t=>Kf(t)),Qf),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new np,this.targetCount=0,this._i=Ko.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Z.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ko(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.hr(t),Z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((d,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),Z.waitFor(l).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return Z.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Z.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),Z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return Z.resolve(i)}containsKey(e,t){return Z.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Oc(0),this.ci=!1,this.ci=!0,this.li=new uR,this.referenceDelegate=e(this),this.hi=new fR(this),this.indexManager=new JC,this.remoteDocumentCache=(function(o){return new dR(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new QC(t),this.Ti=new aR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new cR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new pR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return Z.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class pR extends B1{constructor(e){super(),this.currentSequenceNumber=e}}class rp{constructor(e){this.persistence=e,this.Ai=new np,this.Ri=null}static Vi(e){return new rp(e)}get mi(){if(this.Ri)return this.Ri;throw Ne(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Z.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,(i=>{const o=Ce.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,De.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return Z.or([()=>Z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Cc{constructor(e,t){this.persistence=e,this.gi=new Hs((i=>H1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=rR(this,t)}static Vi(e,t){return new Cc(e,t)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return Z.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?Z.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(d=>this.Sr(e,d,t).next((p=>{p||(i++,l.removeEntry(d,De.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ic(e.data.value)),t}Sr(e,t,i){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return Z.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=We(),o=We();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ip(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return QT()?8:$1(ln())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new mR;return this.ws(e,t,d).next((p=>{if(l.result=p,this.Rs)return this.Ss(e,t,d,p.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Do()<=$e.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(Do()<=$e.DEBUG&&ge("QueryEngine","Query:",Vo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Do()<=$e.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(t))):Z.resolve())}ps(e,t){if(zy(t))return Z.resolve(null);let i=Or(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=cf(t,null,"F"),i=Or(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=We(...l);return this.gs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.bs(t,p);return this.Ds(t,v,d,y.readTime)?this.ps(e,cf(t,null,"F")):this.vs(e,v,t,y)}))))})))))}ys(e,t,i,o){return zy(t)||o.isEqual(De.min())?Z.resolve(null):this.gs.getDocuments(e,i).next((l=>{const d=this.bs(t,l);return this.Ds(t,d,i,o)?Z.resolve(null):(Do()<=$e.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Vo(t)),this.vs(e,d,t,M1(o,dl)).next((p=>p)))}))}bs(e,t){let i=new Ot(s0(e));return t.forEach(((o,l)=>{zc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Do()<=$e.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Vo(t)),this.gs.getDocumentsMatchingQuery(e,t,Ji.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="LocalStore",yR=3e8;class vR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new _t(Me),this.Ms=new Hs((l=>Kf(l)),Qf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function _R(r,e,t,i){return new vR(r,e,t,i)}async function P0(r,e){const t=Oe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],p=[];let y=We();for(const v of o){d.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}for(const v of l){p.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(i,y).next((v=>({Bs:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function wR(r,e){const t=Oe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(p,y,v,E){const I=v.batch,R=I.keys();let z=Z.resolve();return R.forEach((H=>{z=z.next((()=>E.getEntry(y,H))).next(($=>{const L=v.docVersions.get(H);Je(L!==null,48541),$.version.compareTo(L)<0&&(I.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),E.addEntry($)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(y,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let y=We();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(y=y.add(p.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function A0(r){const e=Oe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function ER(r,e){const t=Oe(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const p=[];e.targetChanges.forEach(((E,I)=>{const R=o.get(I);if(!R)return;p.push(t.hi.removeMatchingKeys(l,E.removedDocuments,I).next((()=>t.hi.addMatchingKeys(l,E.addedDocuments,I))));let z=R.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?z=z.withResumeToken(Jt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):E.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(E.resumeToken,i)),o=o.insert(I,z),(function($,L,re){return $.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=yR?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(R,z,E)&&p.push(t.hi.updateTargetData(l,z))}));let y=di(),v=We();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),p.push(TR(l,d,e.documentUpdates).next((E=>{y=E.Ls,v=E.ks}))),!i.isEqual(De.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next((I=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(E)}return Z.waitFor(p).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,v))).next((()=>y))})).then((l=>(t.Fs=o,l)))}function TR(r,e,t){let i=We(),o=We();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let d=di();return t.forEach(((p,y)=>{const v=l.get(p);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(De.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):ge(sp,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",y.version)})),{Ls:d,ks:o}}))}function xR(r,e){const t=Oe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Hf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function IR(r,e){const t=Oe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,Z.resolve(o)):t.hi.allocateTargetId(i).next((d=>(o=new Bi(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function mf(r,e,t){const i=Oe(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ia(d))throw d;ge(sp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function ev(r,e,t){const i=Oe(r);let o=De.min(),l=We();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,v,E){const I=Oe(y),R=I.Ms.get(E);return R!==void 0?Z.resolve(I.Fs.get(R)):I.hi.getTargetData(v,E)})(i,d,Or(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{l=y}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,t?o:De.min(),t?l:We()))).next((p=>(SR(i,dC(e),p),{documents:p,qs:l})))))}function SR(r,e,t){let i=r.xs.get(e)||De.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class tv{constructor(){this.activeTargetIds=yC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CR{constructor(){this.Fo=new tv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new tv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="ConnectivityMonitor";class rv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ge(nv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ge(nv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function gf(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="RestConnection",PR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===_c?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const d=gf(),p=this.Go(e,t.toUriEncodedString());ge(Uh,`Sending RPC '${e}' ${d}:`,p,i);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(y,o,l);const{host:v}=new URL(p),E=Zo(v);return this.jo(e,p,y,i,E).then((I=>(ge(Uh,`Received RPC '${e}' ${d}: `,I),I)),(I=>{throw Yi(Uh,`RPC '${e}' ${d} failed with error: `,I,"url: ",p,"request:",i),I}))}Jo(e,t,i,o,l,d){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+na})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=PR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class NR extends AR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const d=gf();return new Promise(((p,y)=>{const v=new b_;v.setWithCredentials(!0),v.listenOnce(j_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case rc.NO_ERROR:const I=v.getResponseJson();ge(rn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),p(I);break;case rc.TIMEOUT:ge(rn,`RPC '${e}' ${d} timed out`),y(new xe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case rc.HTTP_ERROR:const R=v.getStatus();if(ge(rn,`RPC '${e}' ${d} failed with status:`,R,"response text:",v.getResponseText()),R>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const H=z==null?void 0:z.error;if(H&&H.status&&H.message){const $=(function(re){const ce=re.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ce)>=0?ce:ee.UNKNOWN})(H.status);y(new xe($,H.message))}else y(new xe(ee.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new xe(ee.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{ge(rn,`RPC '${e}' ${d} completed.`)}}));const E=JSON.stringify(o);ge(rn,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",E,i,15)}))}P_(e,t,i){const o=gf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=O_(),p=V_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.zo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const E=l.join("");ge(rn,`Creating RPC '${e}' stream ${o}: ${E}`,y);const I=d.createWebChannel(E,y);this.T_(I);let R=!1,z=!1;const H=new kR({Ho:L=>{z?ge(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(R||(ge(rn,`Opening RPC '${e}' stream ${o} transport.`),I.open(),R=!0),ge(rn,`RPC '${e}' stream ${o} sending:`,L),I.send(L))},Yo:()=>I.close()}),$=(L,re,ce)=>{L.listen(re,(Y=>{try{ce(Y)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return $(I,Ka.EventType.OPEN,(()=>{z||(ge(rn,`RPC '${e}' stream ${o} transport opened.`),H.s_())})),$(I,Ka.EventType.CLOSE,(()=>{z||(z=!0,ge(rn,`RPC '${e}' stream ${o} transport closed`),H.__(),this.I_(I))})),$(I,Ka.EventType.ERROR,(L=>{z||(z=!0,Yi(rn,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),H.__(new xe(ee.UNAVAILABLE,"The operation could not be completed")))})),$(I,Ka.EventType.MESSAGE,(L=>{var re;if(!z){const ce=L.data[0];Je(!!ce,16349);const Y=ce,ae=(Y==null?void 0:Y.error)||((re=Y[0])===null||re===void 0?void 0:re.error);if(ae){ge(rn,`RPC '${e}' stream ${o} received error:`,ae);const Ee=ae.status;let ye=(function(b){const x=Pt[b];if(x!==void 0)return g0(x)})(Ee),j=ae.message;ye===void 0&&(ye=ee.INTERNAL,j="Unknown error status: "+Ee+" with message "+ae.message),z=!0,H.__(new xe(ye,j)),I.close()}else ge(rn,`RPC '${e}' stream ${o} received:`,ce),H.a_(ce)}})),$(p,D_.STAT_EVENT,(L=>{L.stat===rf.PROXY?ge(rn,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===rf.NOPROXY&&ge(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.o_()}),0),H}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(r){return new VC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="PersistentStream";class N0{constructor(e,t,i,o,l,d,p,y){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new k0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(ci(t.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new xe(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ge(iv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ge(iv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bR extends N0{constructor(e,t,i,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=MC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return De.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?Lr(d.readTime):De.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=pf(this.serializer),t.addTarget=(function(l,d){let p;const y=d.target;if(p=uf(y)?{documents:zC(l,y)}:{query:BC(l,y).Vt},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=_0(l,d.resumeToken);const v=df(l,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(De.min())>0){p.readTime=Sc(l,d.snapshotVersion.toTimestamp());const v=df(l,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=WC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=pf(this.serializer),t.removeTarget=e,this.k_(t)}}class jR extends N0{constructor(e,t,i,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=UC(e.writeResults,e.commitTime),i=Lr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=pf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>FC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{}class VR extends DR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new xe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,hf(t,i),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(ee.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Jo(e,hf(t,i),o,d,p,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new xe(ee.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class OR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ci(t),this._a=!1):ge("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="RemoteStore";class LR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{qs(this)&&(ge($s,"Restarting streams for network reachability change."),await(async function(y){const v=Oe(y);v.Ia.add(4),await Rl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await qc(v)})(this))}))})),this.Aa=new OR(i,o)}}async function qc(r){if(qs(r))for(const e of r.da)await e(!0)}async function Rl(r){for(const e of r.da)await e(!1)}function b0(r,e){const t=Oe(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),up(t)?lp(t):sa(t).x_()&&ap(t,e))}function op(r,e){const t=Oe(r),i=sa(t);t.Ta.delete(e),i.x_()&&j0(t,e),t.Ta.size===0&&(i.x_()?i.B_():qs(t)&&t.Aa.set("Unknown"))}function ap(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sa(r).H_(e)}function j0(r,e){r.Ra.$e(e),sa(r).Y_(e)}function lp(r){r.Ra=new NC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),sa(r).start(),r.Aa.aa()}function up(r){return qs(r)&&!sa(r).M_()&&r.Ta.size>0}function qs(r){return Oe(r).Ia.size===0}function D0(r){r.Ra=void 0}async function MR(r){r.Aa.set("Online")}async function FR(r){r.Ta.forEach(((e,t)=>{ap(r,e)}))}async function UR(r,e){D0(r),up(r)?(r.Aa.la(e),lp(r)):r.Aa.set("Unknown")}async function zR(r,e,t){if(r.Aa.set("Online"),e instanceof v0&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const p of l.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ta.delete(p),o.Ra.removeTarget(p))})(r,e)}catch(i){ge($s,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Rc(r,i)}else if(e instanceof ac?r.Ra.Ye(e):e instanceof y0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(De.min()))try{const i=await A0(r.localStore);t.compareTo(i)>=0&&await(function(l,d){const p=l.Ra.Pt(d);return p.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const E=l.Ta.get(v);E&&l.Ta.set(v,E.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,v)=>{const E=l.Ta.get(y);if(!E)return;l.Ta.set(y,E.withResumeToken(Jt.EMPTY_BYTE_STRING,E.snapshotVersion)),j0(l,y);const I=new Bi(E.target,y,v,E.sequenceNumber);ap(l,I)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){ge($s,"Failed to raise snapshot:",i),await Rc(r,i)}}async function Rc(r,e,t){if(!ia(e))throw e;r.Ia.add(1),await Rl(r),r.Aa.set("Offline"),t||(t=()=>A0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge($s,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await qc(r)}))}function V0(r,e){return e().catch((t=>Rc(r,t,e)))}async function Gc(r){const e=Oe(r),t=ts(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Hf;for(;BR(e);)try{const o=await xR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,$R(e,o)}catch(o){await Rc(e,o)}O0(e)&&L0(e)}function BR(r){return qs(r)&&r.Pa.length<10}function $R(r,e){r.Pa.push(e);const t=ts(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function O0(r){return qs(r)&&!ts(r).M_()&&r.Pa.length>0}function L0(r){ts(r).start()}async function WR(r){ts(r).na()}async function HR(r){const e=ts(r);for(const t of r.Pa)e.X_(t.mutations)}async function qR(r,e,t){const i=r.Pa.shift(),o=Zf.from(i,e,t);await V0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Gc(r)}async function GR(r,e){e&&ts(r).Z_&&await(async function(i,o){if((function(d){return AC(d)&&d!==ee.ABORTED})(o.code)){const l=i.Pa.shift();ts(i).N_(),await V0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Gc(i)}})(r,e),O0(r)&&L0(r)}async function sv(r,e){const t=Oe(r);t.asyncQueue.verifyOperationInProgress(),ge($s,"RemoteStore received new credentials");const i=qs(t);t.Ia.add(3),await Rl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await qc(t)}async function KR(r,e){const t=Oe(r);e?(t.Ia.delete(2),await qc(t)):e||(t.Ia.add(2),await Rl(t),t.Aa.set("Unknown"))}function sa(r){return r.Va||(r.Va=(function(t,i,o){const l=Oe(t);return l.ia(),new bR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:MR.bind(null,r),e_:FR.bind(null,r),n_:UR.bind(null,r),J_:zR.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),up(r)?lp(r):r.Aa.set("Unknown")):(await r.Va.stop(),D0(r))}))),r.Va}function ts(r){return r.ma||(r.ma=(function(t,i,o){const l=Oe(t);return l.ia(),new jR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:WR.bind(null,r),n_:GR.bind(null,r),ea:HR.bind(null,r),ta:qR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await Gc(r)):(await r.ma.stop(),r.Pa.length>0&&(ge($s,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const d=Date.now()+i,p=new cp(e,t,d,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dp(r,e){if(ci("AsyncQueue",`${e}: ${r}`),ia(r))return new xe(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{static emptySet(e){return new Bo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ce.comparator(t.key,i.key):(t,i)=>Ce.comparator(t.key,i.key),this.keyedMap=Qa(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Bo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.fa=new _t(Ce.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ne(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Qo{constructor(e,t,i,o,l,d,p,y,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new Qo(e,t,Bo.emptySet(t),d,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class YR{constructor(){this.queries=av(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Oe(t),l=o.queries;o.queries=av(),l.forEach(((d,p)=>{for(const y of p.wa)y.onError(i)}))})(this,new xe(ee.ABORTED,"Firestore shutting down"))}}function av(){return new Hs((r=>i0(r)),Uc)}async function M0(r,e){const t=Oe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new QR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=dp(d,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&hp(t)}async function F0(r,e){const t=Oe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function JR(r,e){const t=Oe(r);let i=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const p of d.wa)p.Ca(o)&&(i=!0);d.ya=o}}i&&hp(t)}function XR(r,e,t){const i=Oe(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function hp(r){r.Da.forEach((e=>{e.next()}))}var yf,lv;(lv=yf||(yf={})).Fa="default",lv.Cache="cache";class U0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Qo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.key=e}}class B0{constructor(e){this.key=e}}class ZR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=We(),this.mutatedKeys=We(),this.Xa=s0(e),this.eu=new Bo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new ov,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,I)=>{const R=o.get(E),z=zc(this.query,I)?I:null,H=!!R&&this.mutatedKeys.has(R.key),$=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let L=!1;R&&z?R.data.isEqual(z.data)?H!==$&&(i.track({type:3,doc:z}),L=!0):this.iu(R,z)||(i.track({type:2,doc:z}),L=!0,(y&&this.Xa(z,y)>0||v&&this.Xa(z,v)<0)&&(p=!0)):!R&&z?(i.track({type:0,doc:z}),L=!0):R&&!z&&(i.track({type:1,doc:R}),L=!0,(y||v)&&(p=!0)),L&&(z?(d=d.add(z),l=$?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{eu:d,ru:i,Ds:p,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((E,I)=>(function(z,H){const $=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{At:L})}};return $(z)-$(H)})(E.type,I.type)||this.Xa(E.doc,I.doc))),this.su(i),o=o!=null&&o;const p=t&&!o?this.ou():[],y=this.Za.size===0&&this.current&&!o?1:0,v=y!==this.Ya;return this.Ya=y,d.length!==0||v?{snapshot:new Qo(this.query,e.eu,l,d,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ov,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=We(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new B0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new z0(i))})),t}uu(e){this.Ha=e.qs,this.Za=We();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Qo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const fp="SyncEngine";class eP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class tP{constructor(e){this.key=e,this.lu=!1}}class nP{constructor(e,t,i,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Hs((p=>i0(p)),Uc),this.Tu=new Map,this.Iu=new Set,this.du=new _t(Ce.comparator),this.Eu=new Map,this.Au=new np,this.Ru={},this.Vu=new Map,this.mu=Ko.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function rP(r,e,t=!0){const i=K0(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await $0(i,e,t,!0),o}async function iP(r,e){const t=K0(r);await $0(t,e,!0,!1)}async function $0(r,e,t,i){const o=await IR(r.localStore,Or(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await sP(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&b0(r.remoteStore,o),p}async function sP(r,e,t,i,o){r.gu=(I,R,z)=>(async function($,L,re,ce){let Y=L.view.nu(re);Y.Ds&&(Y=await ev($.localStore,L.query,!1).then((({documents:j})=>L.view.nu(j,Y))));const ae=ce&&ce.targetChanges.get(L.targetId),Ee=ce&&ce.targetMismatches.get(L.targetId)!=null,ye=L.view.applyChanges(Y,$.isPrimaryClient,ae,Ee);return cv($,L.targetId,ye._u),ye.snapshot})(r,I,R,z);const l=await ev(r.localStore,e,!0),d=new ZR(e,l.qs),p=d.nu(l.documents),y=Cl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=d.applyChanges(p,r.isPrimaryClient,y);cv(r,t,v._u);const E=new eP(e,t,d);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function oP(r,e,t){const i=Oe(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((d=>!Uc(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await mf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&op(i.remoteStore,o.targetId),vf(i,o.targetId)})).catch(ra)):(vf(i,o.targetId),await mf(i.localStore,o.targetId,!0))}async function aP(r,e){const t=Oe(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),op(t.remoteStore,i.targetId))}async function lP(r,e,t){const i=mP(r);try{const o=await(function(d,p){const y=Oe(d),v=ht.now(),E=p.reduce(((z,H)=>z.add(H.key)),We());let I,R;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let H=di(),$=We();return y.Os.getEntries(z,E).next((L=>{H=L,H.forEach(((re,ce)=>{ce.isValidDocument()||($=$.add(re))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,H))).next((L=>{I=L;const re=[];for(const ce of p){const Y=IC(ce,I.get(ce.key).overlayedDocument);Y!=null&&re.push(new us(ce.key,Y,J_(Y.value.mapValue),Jn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,v,re,p)})).next((L=>{R=L;const re=L.applyToLocalDocumentSet(I,$);return y.documentOverlayCache.saveOverlays(z,L.batchId,re)}))})).then((()=>({batchId:R.batchId,changes:a0(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,y){let v=d.Ru[d.currentUser.toKey()];v||(v=new _t(Me)),v=v.insert(p,y),d.Ru[d.currentUser.toKey()]=v})(i,o.batchId,t),await Pl(i,o.changes),await Gc(i.remoteStore)}catch(o){const l=dp(o,"Failed to persist write");t.reject(l)}}async function W0(r,e){const t=Oe(r);try{const i=await ER(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Eu.get(l);d&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?Je(d.lu,14607):o.removedDocuments.size>0&&(Je(d.lu,42227),d.lu=!1))})),await Pl(t,i,e)}catch(i){await ra(i)}}function uv(r,e,t){const i=Oe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const y=Oe(d);y.onlineState=p;let v=!1;y.queries.forEach(((E,I)=>{for(const R of I.wa)R.va(p)&&(v=!0)})),v&&hp(y)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function uP(r,e,t){const i=Oe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let d=new _t(Ce.comparator);d=d.insert(l,an.newNoDocument(l,De.min()));const p=We().add(l),y=new Wc(De.min(),new Map,new _t(Me),d,p);await W0(i,y),i.du=i.du.remove(l),i.Eu.delete(e),pp(i)}else await mf(i.localStore,e,!1).then((()=>vf(i,e,t))).catch(ra)}async function cP(r,e){const t=Oe(r),i=e.batch.batchId;try{const o=await wR(t.localStore,e);q0(t,i,null),H0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pl(t,o)}catch(o){await ra(o)}}async function dP(r,e,t){const i=Oe(r);try{const o=await(function(d,p){const y=Oe(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return y.mutationQueue.lookupMutationBatch(v,p).next((I=>(Je(I!==null,37113),E=I.keys(),y.mutationQueue.removeMutationBatch(v,I)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,E,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>y.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);q0(i,e,t),H0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pl(i,o)}catch(o){await ra(o)}}function H0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function q0(r,e,t){const i=Oe(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function vf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||G0(r,i)}))}function G0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(op(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),pp(r))}function cv(r,e,t){for(const i of t)i instanceof z0?(r.Au.addReference(i.key,e),hP(r,i)):i instanceof B0?(ge(fp,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||G0(r,i.key)):Ne(19791,{yu:i})}function hP(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(ge(fp,"New document in limbo: "+t),r.Iu.add(i),pp(r))}function pp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Ce(dt.fromString(e)),i=r.mu.next();r.Eu.set(i,new tP(t)),r.du=r.du.insert(t,i),b0(r.remoteStore,new Bi(Or(Yf(t.path)),i,"TargetPurposeLimboResolution",Oc.ue))}}async function Pl(r,e,t){const i=Oe(r),o=[],l=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((p,y)=>{d.push(i.gu(y,e,t).then((v=>{var E;if((v||t)&&i.isPrimaryClient){const I=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(y.targetId,I?"current":"not-current")}if(v){o.push(v);const I=ip.Es(y.targetId,v);l.push(I)}})))})),await Promise.all(d),i.hu.J_(o),await(async function(y,v){const E=Oe(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Z.forEach(v,(R=>Z.forEach(R.Is,(z=>E.persistence.referenceDelegate.addReference(I,R.targetId,z))).next((()=>Z.forEach(R.ds,(z=>E.persistence.referenceDelegate.removeReference(I,R.targetId,z)))))))))}catch(I){if(!ia(I))throw I;ge(sp,"Failed to update sequence numbers: "+I)}for(const I of v){const R=I.targetId;if(!I.fromCache){const z=E.Fs.get(R),H=z.snapshotVersion,$=z.withLastLimboFreeSnapshotVersion(H);E.Fs=E.Fs.insert(R,$)}}})(i.localStore,l))}async function fP(r,e){const t=Oe(r);if(!t.currentUser.isEqual(e)){ge(fp,"User change. New user:",e.toKey());const i=await P0(t.localStore,e);t.currentUser=e,(function(l,d){l.Vu.forEach((p=>{p.forEach((y=>{y.reject(new xe(ee.CANCELLED,d))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pl(t,i.Bs)}}function pP(r,e){const t=Oe(r),i=t.Eu.get(e);if(i&&i.lu)return We().add(i.key);{let o=We();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const p=t.Pu.get(d);o=o.unionWith(p.view.tu)}return o}}function K0(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=W0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uP.bind(null,e),e.hu.J_=JR.bind(null,e.eventManager),e.hu.pu=XR.bind(null,e.eventManager),e}function mP(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dP.bind(null,e),e}class Pc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return _R(this.persistence,new gR,e.initialUser,this.serializer)}Du(e){return new R0(rp.Vi,this.serializer)}bu(e){return new CR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pc.provider={build:()=>new Pc};class gP extends Pc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Je(this.persistence.referenceDelegate instanceof Cc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new tR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new R0((i=>Cc.Vi(i,t)),this.serializer)}}class _f{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fP.bind(null,this.syncEngine),await KR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new YR})()}createDatastore(e){const t=Hc(e.databaseInfo.databaseId),i=(function(l){return new NR(l)})(e.databaseInfo);return(function(l,d,p,y){return new VR(l,d,p,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,d,p){return new LR(i,o,l,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>uv(this.syncEngine,t,0)),(function(){return rv.C()?new rv:new RR})())}createSyncEngine(e,t){return(function(o,l,d,p,y,v,E){const I=new nP(o,l,d,p,y,v);return E&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Oe(o);ge($s,"RemoteStore shutting down."),l.Ia.add(5),await Rl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}_f.provider={build:()=>new _f};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="FirestoreClient";class yP{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=$f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{ge(ns,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ge(ns,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=dp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Bh(r,e){r.asyncQueue.verifyOperationInProgress(),ge(ns,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await P0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Yi("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{ge("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Yi("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function dv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await vP(r);ge(ns,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>sv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>sv(e.remoteStore,o))),r._onlineComponents=e}async function vP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(ns,"Using user provided OfflineComponentProvider");try{await Bh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Yi("Error using user provided cache. Falling back to memory cache: "+t),await Bh(r,new Pc)}}else ge(ns,"Using default OfflineComponentProvider"),await Bh(r,new gP(void 0));return r._offlineComponents}async function Y0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(ns,"Using user provided OnlineComponentProvider"),await dv(r,r._uninitializedComponentsProvider._online)):(ge(ns,"Using default OnlineComponentProvider"),await dv(r,new _f))),r._onlineComponents}function _P(r){return Y0(r).then((e=>e.syncEngine))}async function J0(r){const e=await Y0(r),t=e.eventManager;return t.onListen=rP.bind(null,e.syncEngine),t.onUnlisten=oP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aP.bind(null,e.syncEngine),t}function wP(r,e,t={}){const i=new ai;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const E=new Q0({next:R=>{E.Ou(),d.enqueueAndForget((()=>F0(l,I)));const z=R.docs.has(p);!z&&R.fromCache?v.reject(new xe(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&R.fromCache&&y&&y.source==="server"?v.reject(new xe(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(R)},error:R=>v.reject(R)}),I=new U0(Yf(p.path),E,{includeMetadataChanges:!0,ka:!0});return M0(l,I)})(await J0(r),r.asyncQueue,e,t,i))),i.promise}function EP(r,e,t={}){const i=new ai;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const E=new Q0({next:R=>{E.Ou(),d.enqueueAndForget((()=>F0(l,I))),R.fromCache&&y.source==="server"?v.reject(new xe(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(R)},error:R=>v.reject(R)}),I=new U0(p,E,{includeMetadataChanges:!0,ka:!0});return M0(l,I)})(await J0(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="firestore.googleapis.com",fv=!0;class pv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Z0,this.ssl=fv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:fv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=C0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZC)throw new xe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new P1;switch(i.type){case"firstParty":return new b1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=hv.get(t);i&&(ge("ComponentProvider","Removing Datastore"),hv.delete(t),i.terminate())})(this),Promise.resolve()}}function TP(r,e,t,i={}){var o;r=_r(r,Kc);const l=Zo(e),d=r._getSettings(),p=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),y=`${e}:${t}`;l&&(zv(`https://${y}`),Bv("Firestore",!0)),d.host!==Z0&&d.host!==y&&Yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:y,ssl:l,emulatorOptions:i});if(!Ms(v,p)&&(r._setSettings(v),i.mockUserToken)){let E,I;if(typeof i.mockUserToken=="string")E=i.mockUserToken,I=on.MOCK_USER;else{E=UT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const R=i.mockUserToken.sub||i.mockUserToken.user_id;if(!R)throw new xe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new on(R)}r._authCredentials=new A1(new M_(E,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Qc(this.firestore,e,this._query)}}class kt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Il(t,kt._jsonSchema))return new kt(e,i||null,new Ce(dt.fromString(t.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:At("string",kt._jsonSchemaVersion),referencePath:At("string")};class Ki extends Qc{constructor(e,t,i){super(e,t,Yf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Ce(e))}withConverter(e){return new Ki(this.firestore,e,this._path)}}function jr(r,e,...t){if(r=Yt(r),U_("collection","path",e),r instanceof Kc){const i=dt.fromString(e,...t);return Py(i),new Ki(r,null,i)}{if(!(r instanceof kt||r instanceof Ki))throw new xe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(dt.fromString(e,...t));return Py(i),new Ki(r.firestore,null,i)}}function sn(r,e,...t){if(r=Yt(r),arguments.length===1&&(e=$f.newId()),U_("doc","path",e),r instanceof Kc){const i=dt.fromString(e,...t);return Ry(i),new kt(r,null,new Ce(i))}{if(!(r instanceof kt||r instanceof Ki))throw new xe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(dt.fromString(e,...t));return Ry(i),new kt(r.firestore,r instanceof Ki?r.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="AsyncQueue";class gv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new k0(this,"async_queue_retry"),this.oc=()=>{const i=zh();i&&ge(mv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=zh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new ai;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ia(e))throw e;ge(mv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,ci("INTERNAL UNHANDLED ERROR: ",yv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=cp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Ne(47125,{hc:yv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function yv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Gs extends Kc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new gv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gv(e),this._firestoreClient=void 0,await e}}}function xP(r,e){const t=typeof r=="object"?r:qv(),i=typeof r=="string"?r:_c,o=kf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=MT("firestore");l&&TP(o,...l)}return o}function mp(r){if(r._terminated)throw new xe(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||IP(r),r._firestoreClient}function IP(r){var e,t,i;const o=r._freezeSettings(),l=(function(p,y,v,E){return new K1(p,y,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,X0(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new yP(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(Jt.fromBase64String(e))}catch(t){throw new xe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Il(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:At("string",Yn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mr._jsonSchemaVersion}}static fromJSON(e){if(Il(e,Mr._jsonSchema))return new Mr(e.latitude,e.longitude)}}Mr._jsonSchemaVersion="firestore/geoPoint/1.0",Mr._jsonSchema={type:At("string",Mr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Il(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fr(e.vectorValues);throw new xe(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:At("string",Fr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=/^__.*__$/;class CP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sl(e,this.data,t,this.fieldTransforms)}}class ew{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ec:r})}}class yp{constructor(e,t,i,o,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new yp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ac(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(tw(this.Ec)&&SP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class RP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Hc(e)}Dc(e,t,i,o=!1){return new yp({Ec:e,methodName:t,bc:i,path:Qt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vp(r){const e=r._freezeSettings(),t=Hc(r._databaseId);return new RP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function nw(r,e,t,i,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);_p("Data must be an object, but it was:",d,i);const p=rw(i,d);let y,v;if(l.merge)y=new Vn(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const R=wf(e,I,t);if(!d.contains(R))throw new xe(ee.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);sw(E,R)||E.push(R)}y=new Vn(E),v=d.fieldTransforms.filter((I=>y.covers(I.field)))}else y=null,v=d.fieldTransforms;return new CP(new Sn(p),y,v)}class Jc extends gp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jc}}function PP(r,e,t,i){const o=r.Dc(1,e,t);_p("Data must be an object, but it was:",o,i);const l=[],d=Sn.empty();ls(i,((y,v)=>{const E=wp(e,y,t);v=Yt(v);const I=o.gc(E);if(v instanceof Jc)l.push(E);else{const R=Xc(v,I);R!=null&&(l.push(E),d.set(E,R))}}));const p=new Vn(l);return new ew(d,p,o.fieldTransforms)}function AP(r,e,t,i,o,l){const d=r.Dc(1,e,t),p=[wf(e,i,t)],y=[o];if(l.length%2!=0)throw new xe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<l.length;R+=2)p.push(wf(e,l[R])),y.push(l[R+1]);const v=[],E=Sn.empty();for(let R=p.length-1;R>=0;--R)if(!sw(v,p[R])){const z=p[R];let H=y[R];H=Yt(H);const $=d.gc(z);if(H instanceof Jc)v.push(z);else{const L=Xc(H,$);L!=null&&(v.push(z),E.set(z,L))}}const I=new Vn(v);return new ew(E,I,d.fieldTransforms)}function Xc(r,e){if(iw(r=Yt(r)))return _p("Unsupported field value:",e,r),rw(r,e);if(r instanceof gp)return(function(i,o){if(!tw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let d=0;for(const p of i){let y=Xc(p,o.yc(d));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),d++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ht.fromDate(i);return{timestampValue:Sc(o.serializer,l)}}if(i instanceof ht){const l=new ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sc(o.serializer,l)}}if(i instanceof Mr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yn)return{bytesValue:_0(o.serializer,i._byteString)};if(i instanceof kt){const l=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:tp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Fr)return(function(d,p){return{mapValue:{fields:{[Q_]:{stringValue:Y_},[wc]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw p.wc("VectorValues must only contain numeric values.");return Jf(p.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Wf(i)}`)})(r,e)}function rw(r,e){const t={};return $_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ls(r,((i,o)=>{const l=Xc(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function iw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ht||r instanceof Mr||r instanceof Yn||r instanceof kt||r instanceof gp||r instanceof Fr)}function _p(r,e,t){if(!iw(t)||!z_(t)){const i=Wf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function wf(r,e,t){if((e=Yt(e))instanceof Yc)return e._internalPath;if(typeof e=="string")return wp(r,e);throw Ac("Field path arguments must be of type string or ",r,!1,void 0,t)}const kP=new RegExp("[~\\*/\\[\\]]");function wp(r,e,t){if(e.search(kP)>=0)throw Ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Yc(...e.split("."))._internalPath}catch{throw Ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ac(r,e,t,i,o){const l=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(l||d)&&(y+=" (found",l&&(y+=` in field ${i}`),d&&(y+=` in document ${o}`),y+=")"),new xe(ee.INVALID_ARGUMENT,p+r+y)}function sw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(aw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class NP extends ow{data(){return super.data()}}function aw(r,e){return typeof e=="string"?wp(r,e):e instanceof Yc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new xe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jP{convertValue(e,t="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ls(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[wc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>xt(d.doubleValue)));return new Fr(l)}convertGeoPoint(e){return new Mr(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Mc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const t=Xi(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dt.fromString(e);Je(S0(i),9688,{name:e});const o=new fl(i.get(1),i.get(3)),l=new Ce(i.popFirst(5));return o.isEqual(t)||ci(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ls extends ow{constructor(e,t,i,o,l,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(aw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ls._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ls._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ls._jsonSchema={type:At("string",Ls._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class lc extends Ls{data(e={}){return super.data(e)}}class $o{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ja(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new lc(this._firestore,this._userDataWriter,i.key,i,new Ja(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const y=new lc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ja(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const y=new lc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ja(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),E=d.indexOf(p.doc.key)),{type:DP(p.type),doc:y,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$f.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(r){r=_r(r,kt);const e=_r(r.firestore,Gs);return wP(mp(e),r._key).then((t=>VP(e,r,t)))}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:At("string",$o._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class uw extends jP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function Yo(r){r=_r(r,Qc);const e=_r(r.firestore,Gs),t=mp(e),i=new uw(e);return bP(r._query),EP(t,r._query).then((o=>new $o(e,i,r,o)))}function vv(r,e,t){r=_r(r,kt);const i=_r(r.firestore,Gs),o=lw(r.converter,e);return Zc(i,[nw(vp(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Jn.none())])}function Mo(r,e,t,...i){r=_r(r,kt);const o=_r(r.firestore,Gs),l=vp(o);let d;return d=typeof(e=Yt(e))=="string"||e instanceof Yc?AP(l,"updateDoc",r._key,e,t,i):PP(l,"updateDoc",r._key,e),Zc(o,[d.toMutation(r._key,Jn.exists(!0))])}function Xa(r){return Zc(_r(r.firestore,Gs),[new Xf(r._key,Jn.none())])}function Za(r,e){const t=_r(r.firestore,Gs),i=sn(r),o=lw(r.converter,e);return Zc(t,[nw(vp(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Jn.exists(!1))]).then((()=>i))}function Zc(r,e){return(function(i,o){const l=new ai;return i.asyncQueue.enqueueAndForget((async()=>lP(await _P(i),o,l))),l.promise})(mp(r),e)}function VP(r,e,t){const i=t.docs.get(e._key),o=new uw(r);return new Ls(r,o,e._key,i,new Ja(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){na=o})(ea),Wo(new Fs("firestore",((i,{instanceIdentifier:o,options:l})=>{const d=i.getProvider("app").getImmediate(),p=new Gs(new k1(i.getProvider("auth-internal")),new j1(d,i.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new xe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(v.options.projectId,E)})(d,o),d);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),qi(Ty,xy,e),qi(Ty,xy,"esm2017")})();const OP={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},cw=Hv(OP),Qi=C1(cw),ct=xP(cw),dw=G.createContext(null);function LP({children:r}){const[e,t]=G.useState(null),[i,o]=G.useState(!1),[l,d]=G.useState(!0);G.useEffect(()=>{const v=gS(Qi,async E=>{if(t(E),E)try{const I=sn(ct,"admins",E.uid);if((await Ef(I)).exists())o(!0);else{const z=sn(ct,"roles",E.uid),H=await Ef(z);H.exists()&&H.data().admin===!0?o(!0):o(!1)}}catch(I){console.error("Error checking admin role:",I),o(!1)}else o(!1);d(!1)});return()=>v()},[]);const p=async(v,E)=>{await y_(Qi,v,E)},y=async()=>{await v_(Qi)};return h.jsx(dw.Provider,{value:{user:e,admin:i,loading:l,login:p,logout:y},children:r})}function oa(){return G.useContext(dw)}function MP({onClose:r}){const[e,t]=G.useState("login"),[i,o]=G.useState(""),[l,d]=G.useState("");async function p(){try{await A_(Qi,new Dr),r()}catch(E){alert(E.message)}}async function y(E){E.preventDefault();try{await y_(Qi,i,l),r()}catch(I){alert(I.message)}}async function v(E){E.preventDefault();try{await fS(Qi,i,l),r()}catch(I){alert(I.message)}}return h.jsx("div",{className:"auth-modal-backdrop",onClick:r,children:h.jsxs("div",{className:"auth-modal",onClick:E=>E.stopPropagation(),children:[h.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),h.jsxs("button",{className:"google-btn",onClick:p,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsx("div",{className:"auth-divider",children:h.jsx("span",{children:"or"})}),h.jsxs("form",{onSubmit:e==="login"?y:v,className:"auth-form",children:[h.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:i,onChange:E=>o(E.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:E=>d(E.target.value),required:!0}),h.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),h.jsx("div",{className:"auth-switcher",children:e==="login"?h.jsxs("p",{children:["No account?"," ",h.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):h.jsxs("p",{children:["Already have an account?"," ",h.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),h.jsx("button",{className:"auth-close",onClick:r,children:"Close"})]})})}function FP(){const[r,e]=G.useState(!1),[t,i]=G.useState(!1),{user:o,admin:l}=oa(),d=Nc();async function p(){try{await v_(Qi),e(!1),d("/")}catch(y){console.error(y),alert("Logout failed.")}}return h.jsxs(h.Fragment,{children:[h.jsxs("button",{className:`menu-toggle ${r?"active":""}`,onClick:()=>e(!r),children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("nav",{className:`menu-panel ${r?"open":""}`,children:[h.jsx(Wa,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),h.jsx(Wa,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),h.jsx(Wa,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),h.jsx(Wa,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),l&&h.jsx(Wa,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),h.jsxs("div",{className:"auth-section",children:[h.jsx("p",{className:"auth-section-status",children:o?`Signed in as ${o.email||o.uid}`:"Not signed in"}),h.jsxs("div",{children:[!o&&h.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),i(!0)},children:"Sign in"}),o&&h.jsx("button",{className:"auth-btn secondary",onClick:p,children:"Sign out"})]})]})]}),t&&h.jsx(MP,{onClose:()=>i(!1)})]})}function _v(){return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"im_ok's Collection Hub"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem"},children:"A quiet little corner of the internet for my shelves, lists, and cardboard addictions."}),h.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.72)",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"12px",fontSize:"0.85rem",color:"var(--text-soft)"},children:"Manga | Anime | TCG"})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"About me"}),h.jsxs("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5},children:["Hey, I go by ",h.jsx("strong",{children:"im_ok"}),". I hoard manga, binge anime, and collect way too many trading cards. This site is where I track everything: volumes on my shelves, finished shows, and growing TCG binders."]}),h.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem"},children:"You'll find detailed stats, reading history, and collection values across the different pages - it's basically my personal library dashboard."}),h.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px"},children:[h.jsx("span",{className:"pill",children:"Manga library power user"}),h.jsx("span",{className:"pill",children:"MAL-synced anime list"}),h.jsx("span",{className:"pill",children:"Pokemon & One Piece TCG"}),h.jsx("span",{className:"pill",children:"Automation & data nerd"})]})]}),h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"Explore the site"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[h.jsxs("a",{href:"/base/manga",className:"section-card",children:[h.jsx("h3",{children:"Manga Library"}),h.jsx("p",{children:"Full manga collection & wishlist, with covers, stats, and release tracking."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Firestore-powered"}),h.jsx("span",{className:"section-chip",children:"Library & wishlist"}),h.jsx("span",{className:"section-chip",children:"Release calendar"})]})]}),h.jsxs("a",{href:"/base/anime",className:"section-card",children:[h.jsx("h3",{children:"Anime Library"}),h.jsx("p",{children:"Read-only mirror of my MAL list, with filters, stats, and pretty cards."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"MAL synced"}),h.jsx("span",{className:"section-chip",children:"Status filters"}),h.jsx("span",{className:"section-chip",children:"Quick stats"})]})]}),h.jsxs("a",{href:"/base/tcg",className:"section-card",children:[h.jsx("h3",{children:"TCG Collection"}),h.jsx("p",{children:"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Tracked in Firestore"}),h.jsx("span",{className:"section-chip",children:"Value vs paid"}),h.jsx("span",{className:"section-chip",children:"Per-game breakdown"})]})]})]})]})]}),h.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"Built as a static GitHub Pages site. Data lives in Firestore & MyAnimeList."})]})}function Ha(r){let e=(r||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),i=t?t[1].trim().toLowerCase():e.toLowerCase(),o=t&&t[2]?parseInt(t[2],10):0;return{name:i,vol:Number.isFinite(o)?o:0}}function UP(){const{admin:r}=oa(),e=r,[t,i]=G.useState("library"),[o,l]=G.useState([]),[d,p]=G.useState([]),[y,v]=G.useState([]),[E,I]=G.useState([]),[R,z]=G.useState(!0),[H,$]=G.useState(""),[L,re]=G.useState(""),[ce,Y]=G.useState(""),[ae,Ee]=G.useState(!1),[ye,j]=G.useState(()=>new Set),[S,b]=G.useState(null),[x,k]=G.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[N,A]=G.useState({open:!1,index:0,items:[]});async function Fe(){const C=await Yo(jr(ct,"library")),Q=[];C.forEach(K=>{const O=K.data();Q.push({id:K.id,title:O.title||"",authors:O.authors||"Unknown",publisher:O.publisher||"Unknown",demographic:O.demographic||"",genre:O.genre||"",subGenre:O.subGenre||"",date:O.date||"Unknown",cover:O.cover||"",isbn:O.isbn||"",pageCount:O.pageCount!==void 0&&O.pageCount!==null?O.pageCount:"",rating:O.rating!==void 0&&O.rating!==null?O.rating:"",amountPaid:O.amountPaid!==void 0&&O.amountPaid!==null?O.amountPaid:"",dateRead:O.dateRead||"",datePurchased:O.datePurchased||"",msrp:O.msrp!==void 0&&O.msrp!==null?O.msrp:"",specialType:O.specialType||"",specialVolumes:O.specialVolumes!==void 0&&O.specialVolumes!==null?O.specialVolumes:"",collectiblePrice:O.collectiblePrice!==void 0&&O.collectiblePrice!==null?O.collectiblePrice:"",read:!!O.read,amazonURL:O.amazonURL||"",kind:"library"})}),Q.sort((K,O)=>{const de=Ha(K.title),Le=Ha(O.title),et=de.name.localeCompare(Le.name);return et!==0?et:de.vol-Le.vol}),l(Q),v(K=>{const O=new Set(K);return Q.forEach(de=>O.add(de.title||"")),Array.from(O).filter(Boolean).sort()})}async function nt(){const C=await Yo(jr(ct,"wishlist")),Q=[];C.forEach(K=>{const O=K.data();Q.push({id:K.id,title:O.title||"",authors:O.authors||"Unknown",publisher:O.publisher||"Unknown",date:O.date||"Unknown",cover:O.cover||"",isbn:O.isbn||"",pageCount:O.pageCount!==void 0&&O.pageCount!==null?O.pageCount:"",rating:O.rating!==void 0&&O.rating!==null?O.rating:"",amountPaid:O.amountPaid!==void 0&&O.amountPaid!==null?O.amountPaid:"",specialType:O.specialType||"",specialVolumes:O.specialVolumes!==void 0&&O.specialVolumes!==null?O.specialVolumes:"",collectiblePrice:O.collectiblePrice!==void 0&&O.collectiblePrice!==null?O.collectiblePrice:"",amazonURL:O.amazonURL||"",kind:"wishlist"})}),Q.sort((K,O)=>{const de=Ha(K.title),Le=Ha(O.title),et=de.name.localeCompare(Le.name);return et!==0?et:de.vol-Le.vol}),p(Q),v(K=>{const O=new Set(K);return Q.forEach(de=>O.add(de.title||"")),Array.from(O).filter(Boolean).sort()})}G.useEffect(()=>{let C=!1;async function Q(){z(!0),$("");try{await Promise.all([Fe(),nt()]),C||z(!1)}catch(K){console.error(K),C||($("Failed to load manga data from Firestore."),z(!1))}}return Q(),()=>{C=!0}},[]);const gt=G.useMemo(()=>{const C=L.trim().toLowerCase();return C?o.filter(Q=>[Q.title,Q.authors,Q.publisher,Q.isbn,Q.date,String(Q.pageCount??"")].join(" ").toLowerCase().includes(C)):o},[o,L]),Be=G.useMemo(()=>{const C=ce.trim().toLowerCase();return C?d.filter(Q=>[Q.title,Q.authors,Q.publisher,Q.isbn,Q.date,String(Q.pageCount??"")].join(" ").toLowerCase().includes(C)):d},[d,ce]);function ue(){e&&(Ee(C=>!C),j(new Set))}function Ie(C){j(Q=>{const K=new Set(Q);return K.has(C)?K.delete(C):K.add(C),K})}async function he(C){if(!e){alert("Multi-select actions require admin access.");return}const Q=Array.from(ye);if(!Q.length){alert("Select at least one item first.");return}const K=t==="library";try{if(C==="move")if(K){if(!window.confirm(`Move ${Q.length} item(s) to Wishlist?`))return;for(const O of Q){const de=o.find(et=>et.id===O);if(!de)continue;const Le={title:de.title,authors:de.authors,publisher:de.publisher,date:de.date,isbn:de.isbn,pageCount:de.pageCount||"",cover:de.cover,amazonURL:de.amazonURL||"",specialType:de.specialType||"",specialVolumes:de.specialVolumes||"",collectiblePrice:de.collectiblePrice||"",rating:de.rating||""};await Za(jr(ct,"wishlist"),Le),await Xa(sn(ct,"library",O))}}else{if(!window.confirm(`Move ${Q.length} item(s) to Library?`))return;for(const O of Q){const de=d.find(et=>et.id===O);if(!de)continue;const Le={title:de.title,authors:de.authors,publisher:de.publisher,date:de.date,isbn:de.isbn,pageCount:de.pageCount||"",cover:de.cover,amountPaid:"",read:!1,rating:"",specialType:de.specialType||"",specialVolumes:de.specialVolumes||"",collectiblePrice:de.collectiblePrice||""};await Za(jr(ct,"library"),Le),await Xa(sn(ct,"wishlist",O))}}else if(C==="markRead"&&K)for(const O of Q)await Mo(sn(ct,"library",O),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(C==="markUnread"&&K)for(const O of Q)await Mo(sn(ct,"library",O),{read:!1,dateRead:"",rating:""});else if(C==="delete"){const O=K?"library":"wishlist";if(!window.confirm(`Delete ${Q.length} item(s) from ${K?"Library":"Wishlist"}?`))return;for(const de of Q)await Xa(sn(ct,O,de))}await Promise.all([Fe(),nt()]),j(new Set),Ee(!1)}catch(O){console.error(O),alert("Failed to apply multi-select action.")}}function M(C){b(C)}function J(){b(null)}const pe=()=>k(C=>({...C,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},multiAdd:!1,startVol:"",endVol:""})),Ae=G.useMemo(()=>{const C=new Map;return[...o,...d].forEach(Q=>{const K=Ha(Q.title||"");if(K.name)if(C.has(K.name)){const O=C.get(K.name);O.maxVol=Math.max(O.maxVol,K.vol)}else{const O=(Q.title||"").replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||Q.title||K.name;C.set(K.name,{display:O,maxVol:K.vol})}}),C},[o,d]),je=C=>{k(Q=>({...Q,open:!0,mode:"add",list:C,editingId:null,data:{...Q.data,title:"",list:C}}))},Ve=C=>{k({open:!0,mode:"edit",list:C.kind==="wishlist"?"wishlist":"library",editingId:C.id,data:{title:C.title||"",authors:C.authors||"",publisher:C.publisher||"",demographic:C.demographic||"",genre:C.genre||"",subGenre:C.subGenre||"",date:C.date||"",cover:C.cover||"",isbn:C.isbn||"",pageCount:C.pageCount||"",rating:C.rating||"",amountPaid:C.amountPaid||"",dateRead:C.dateRead||"",datePurchased:C.datePurchased||"",msrp:C.msrp||"",specialType:C.specialType||"",specialVolumes:C.specialVolumes||"",collectiblePrice:C.collectiblePrice||"",amazonURL:C.amazonURL||"",read:!!C.read}})},_e=(C,Q,K="text")=>{if(k(O=>({...O,data:{...O.data,[C]:K==="checkbox"?!!Q:Q}})),C==="title"){const O=String(Q||"").trim().toLowerCase();if(!O)I([]);else{const de=[];Ae.forEach((Le,et)=>{if(Le.display.toLowerCase().includes(O)){const St=Le.maxVol>0?Le.maxVol+1:1;de.push(`${Le.display}, Vol. ${St}`)}}),I(de.slice(0,6))}}};async function Ue(){if(!e)return;const{mode:C,list:Q,data:K,editingId:O,multiAdd:de,startVol:Le,endVol:et}=x,St=Q||"library";if(!K.title.trim()){alert("Title is required.");return}const rt=it=>({title:it||K.title.trim(),authors:K.authors.trim(),publisher:K.publisher.trim(),demographic:K.demographic.trim(),genre:K.genre.trim(),subGenre:K.subGenre.trim(),date:K.date.trim(),cover:K.cover.trim(),isbn:K.isbn.trim(),pageCount:K.pageCount===""?"":Number(K.pageCount),rating:K.rating===""?"":Math.max(.5,Math.min(5,Number(K.rating))),amountPaid:K.amountPaid===""?"":Number(K.amountPaid),dateRead:K.dateRead.trim(),datePurchased:K.datePurchased.trim(),msrp:K.msrp===""?"":Number(K.msrp),specialType:K.specialType.trim(),specialVolumes:K.specialVolumes===""?"":Number(K.specialVolumes),collectiblePrice:K.collectiblePrice===""?"":Number(K.collectiblePrice),amazonURL:K.amazonURL.trim(),read:!!K.read,kind:Q});try{if(C==="add"&&de){const it=Number(Le||0),Cn=Number(et||0);if(!Number.isFinite(it)||!Number.isFinite(Cn)||it<=0||Cn<it){alert("Provide valid start/end volumes (start > 0, end >= start).");return}const On=[];for(let Ln=it;Ln<=Cn;Ln++){const Tr=`${K.title.trim()} Vol. ${Ln}`;On.push(Za(jr(ct,St),rt(Tr)))}await Promise.all(On)}else C==="add"?await Za(jr(ct,St),rt()):C==="edit"&&O&&await Mo(sn(ct,St,O),rt());await Promise.all([Fe(),nt()]),pe()}catch(it){console.error(it),alert("Failed to save entry.")}}async function Ye(C,Q){if(e&&window.confirm("Delete this entry?"))try{await Xa(sn(ct,Q,C)),await Promise.all([Fe(),nt()])}catch(K){console.error(K),alert("Failed to delete entry.")}}const[ft,un]=G.useState(!1),Xt=()=>A({open:!1,index:0,items:[]});async function Lt(C,Q){if(!(C!=null&&C.id))return;const K=C.kind==="wishlist"?"wishlist":"library";un(!0);try{await Mo(sn(ct,K,C.id),Q),await Promise.all([Fe(),nt()]),b(O=>O&&O.id===C.id?{...O,...Q}:O)}catch(O){console.error(O),alert("Failed to update entry.")}finally{un(!1)}}const Mt=(C,Q)=>{const K=Q===""?"":Math.max(.5,Math.min(5,Number(Q)));Lt(C,{rating:K})},Zn=(C,Q)=>{if(!C)return;const K=Q?{read:!0,dateRead:new Date().toISOString().slice(0,10)}:{read:!1,dateRead:""};Lt(C,K)},wr=()=>{if(!ye.size){alert("Select at least one entry first.");return}const Q=[...o,...d].filter(O=>ye.has(O.id));if(!Q.length){alert("No items selected.");return}const K=Q.map(O=>({id:O.id,kind:O.kind||(t==="wishlist"?"wishlist":"library"),data:{title:O.title||"",authors:O.authors||"",publisher:O.publisher||"",demographic:O.demographic||"",genre:O.genre||"",subGenre:O.subGenre||"",date:O.date||"",cover:O.cover||"",isbn:O.isbn||"",pageCount:O.pageCount||"",rating:O.rating||"",amountPaid:O.amountPaid||"",dateRead:O.dateRead||"",datePurchased:O.datePurchased||"",msrp:O.msrp||"",specialType:O.specialType||"",specialVolumes:O.specialVolumes||"",collectiblePrice:O.collectiblePrice||"",amazonURL:O.amazonURL||"",read:!!O.read}}));A({open:!0,index:0,items:K})},Xe=(C,Q,K="text")=>{A(O=>{const de=[...O.items],Le={...de[O.index]};return Le.data={...Le.data,[C]:K==="checkbox"?!!Q:Q},de[O.index]=Le,{...O,items:de}})},Br=()=>{A(C=>({...C,index:Math.min(C.index+1,C.items.length-1)}))},Er=()=>{A(C=>({...C,index:Math.max(C.index-1,0)}))};async function Nt(){if(!e)return;const C=N.items;if(!C.length){Xt();return}try{const Q=C.map(K=>{const O={...K.data,pageCount:K.data.pageCount===""?"":Number(K.data.pageCount),rating:K.data.rating===""?"":Math.max(.5,Math.min(5,Number(K.data.rating))),amountPaid:K.data.amountPaid===""?"":Number(K.data.amountPaid),msrp:K.data.msrp===""?"":Number(K.data.msrp),collectiblePrice:K.data.collectiblePrice===""?"":Number(K.data.collectiblePrice),specialVolumes:K.data.specialVolumes===""?"":Number(K.data.specialVolumes),read:!!K.data.read},de=K.kind==="wishlist"?"wishlist":"library";return Mo(sn(ct,de,K.id),O)});await Promise.all(Q),await Promise.all([Fe(),nt()]),j(new Set),Ee(!1),Xt()}catch(Q){console.error(Q),alert("Failed to save bulk edits.")}}function pn(C){const Q=ye.has(C.id),K=C.kind==="library",O=()=>{ae&&e?Ie(C.id):M(C)};return h.jsxs("div",{className:"manga-card"+(C.read&&K?" read":"")+(Q?" multiselect-selected":""),onClick:O,children:[h.jsx("div",{className:"manga-card-cover-wrap",children:h.jsx("img",{src:C.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),h.jsxs("div",{className:"manga-card-body",children:[h.jsx("div",{className:"manga-card-title",children:C.title||"Untitled"}),h.jsxs("div",{className:"manga-card-meta",children:[C.authors&&C.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[C.authors,h.jsx("br",{})]}),C.publisher&&C.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[C.publisher,h.jsx("br",{})]}),C.date&&C.date!=="Unknown"&&C.date]}),C.isbn&&h.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",C.isbn]}),e&&h.jsxs("div",{className:"manga-card-actions",children:[h.jsx("button",{type:"button",className:"manga-btn mini",onClick:de=>{de.stopPropagation(),Ve(C)},children:"Edit"}),h.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:de=>{de.stopPropagation(),Ye(C.id,C.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},C.id)}const er=({value:C,onChange:Q})=>{const[K,O]=G.useState(null),de=Math.max(0,Math.min(5,Number(C)||0)),Le=K??de,et=Le/5*100,St=Array.from({length:10},(rt,it)=>(it+1)*.5);return h.jsxs("div",{className:"star-picker",role:"group","aria-label":"Rating",children:[h.jsx("div",{className:"star-track","aria-hidden":"true",children:""}),h.jsx("div",{className:"star-fill",style:{width:`${et}%`},"aria-hidden":"true",children:""}),h.jsx("div",{className:"star-clicks",children:St.map(rt=>h.jsx("button",{type:"button","aria-label":`${rt} stars`,style:{width:`${100/St.length}%`},onMouseEnter:()=>O(rt),onMouseLeave:()=>O(null),onClick:()=>Q(rt)},rt))}),h.jsx("div",{className:"star-value",children:Le?Le.toFixed(1):"--"}),h.jsx("button",{type:"button",className:"star-clear",onClick:()=>Q(""),"aria-label":"Clear rating",children:"clear"})]})},tr=t==="library"?gt:Be,X=(C,Q)=>{if(!C.length)return;const K=Array.from(C.reduce((rt,it)=>(Object.keys(it).forEach(Cn=>rt.add(Cn)),rt),new Set)),O=rt=>{const it=rt==null?"":String(rt);return/[",\n]/.test(it)?`"${it.replace(/"/g,'""')}"`:it},de=[K.join(",")].concat(C.map(rt=>K.map(it=>O(rt[it])).join(","))),Le=new Blob([de.join(`
`)],{type:"text/csv"}),et=URL.createObjectURL(Le),St=document.createElement("a");St.href=et,St.download=Q,St.click(),URL.revokeObjectURL(et)},fe=(C,Q)=>{const K=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),O=URL.createObjectURL(K),de=document.createElement("a");de.href=O,de.download=Q,de.click(),URL.revokeObjectURL(O)},se=(C,Q)=>{const K=Array.from(new Set(C.map(et=>et.cover).filter(Boolean))),O=new Blob([K.join(`
`)],{type:"text/plain"}),de=URL.createObjectURL(O),Le=document.createElement("a");Le.href=de,Le.download=Q,Le.click(),URL.revokeObjectURL(de)};return h.jsxs("div",{className:"manga-page",children:[h.jsxs("header",{className:"manga-header",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"manga-header-title",children:["Tyler's Manga Library",h.jsx("span",{className:"manga-badge",children:"Firestore synced"})]}),h.jsx("div",{className:"manga-header-sub",children:"Library & Wishlist are managed via Firestore. This React port reuses the same collections as your original index.html."})]}),e&&h.jsxs("div",{className:"manga-admin-actions",children:[h.jsxs("button",{className:"manga-btn",onClick:()=>je(t==="wishlist"?"wishlist":"library"),children:["Add ",t==="wishlist"?"Wishlist":"Library"," Item"]}),h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>fe(t==="library"?o:d,t==="library"?"manga-library.json":"manga-wishlist.json"),children:"Export JSON"}),h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>X(t==="library"?o:d,t==="library"?"manga-library.csv":"manga-wishlist.csv"),children:"Export CSV"}),h.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>se(t==="library"?o:d,t==="library"?"manga-library-images.txt":"manga-wishlist-images.txt"),children:"Download Images"})]})]}),h.jsxs("div",{className:"manga-tabs",children:[h.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{i("library"),Ee(!1),j(new Set)},children:"Library"}),h.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{i("wishlist"),Ee(!1),j(new Set)},children:"Wishlist"})]}),t!=="dashboard"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-toolbar",children:[h.jsxs("div",{className:"manga-toolbar-left",children:[h.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?L:ce,onChange:C=>t==="library"?re(C.target.value):Y(C.target.value)}),h.jsx("div",{className:"manga-counter",children:t==="library"?h.jsxs(h.Fragment,{children:["Library: ",gt.length," / ",o.length]}):h.jsxs(h.Fragment,{children:["Wishlist: ",Be.length," / ",d.length]})})]}),h.jsx("div",{className:"manga-toolbar-right",children:e&&h.jsx("button",{className:"manga-btn secondary"+(ae?" active":""),onClick:ue,children:ae?"Exit Multi-select":"Multi-select"})})]}),e&&ae&&h.jsxs("div",{className:"manga-multiselect-bar",children:[h.jsxs("span",{children:["Selected: ",h.jsx("strong",{children:ye.size})]}),h.jsx("button",{className:"manga-btn",onClick:wr,children:"Bulk Edit"}),h.jsxs("button",{className:"manga-btn secondary",onClick:()=>he("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"manga-btn",onClick:()=>he("markRead"),children:"Mark Read"}),h.jsx("button",{className:"manga-btn secondary",onClick:()=>he("markUnread"),children:"Mark Unread"})]}),h.jsx("button",{className:"manga-btn danger",onClick:()=>he("delete"),children:"Delete"})]})]}),R?h.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):H?h.jsx("div",{className:"manga-empty-state",children:H}):tr.length===0?h.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):h.jsx("div",{className:"manga-grid",children:tr.map(C=>pn(C))}),S&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:C=>{C.target===C.currentTarget&&J()},children:h.jsxs("div",{className:"manga-modal",children:[h.jsx("div",{className:"manga-modal-cover-wrap",children:h.jsx("img",{src:S.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:S.title||"Untitled"}),h.jsx("button",{className:"manga-modal-close",onClick:J,type:"button",children:"Close"})]}),h.jsxs("div",{className:"manga-modal-meta",children:[S.authors&&S.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Author(s):"})," ",S.authors,h.jsx("br",{})]}),S.publisher&&S.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Publisher:"})," ",S.publisher,h.jsx("br",{})]}),S.date&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Release:"})," ",S.date,h.jsx("br",{})]}),S.isbn&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"ISBN:"})," ",S.isbn,h.jsx("br",{})]})]}),h.jsxs("div",{className:"manga-modal-details",children:[S.pageCount&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Pages:"})," ",S.pageCount,h.jsx("br",{})]}),h.jsxs("div",{style:{margin:"6px 0"},children:[h.jsx("strong",{children:"Rating:"})," ",h.jsx(er,{value:S.rating||"",onChange:C=>Mt(S,C)})]}),S.amountPaid&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Amount Paid:"})," $",S.amountPaid,h.jsx("br",{})]}),S.msrp&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"MSRP:"})," $",S.msrp,h.jsx("br",{})]}),S.collectiblePrice&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Collectible:"})," $",S.collectiblePrice,h.jsx("br",{})]}),S.read&&S.dateRead&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Date Read:"})," ",S.dateRead,h.jsx("br",{})]}),S.amazonURL&&h.jsx("div",{style:{marginTop:"6px"},children:h.jsx("a",{href:S.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),h.jsxs("div",{className:"manga-modal-footer",style:{gap:"10px",alignItems:"center"},children:[h.jsx("div",{children:S.kind==="library"&&S.read?"Marked as read in your library.":S.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."}),S.kind==="library"&&h.jsx(h.Fragment,{children:S.read?h.jsx("button",{className:"manga-btn mini secondary",disabled:ft,onClick:()=>Zn(S,!1),type:"button",children:"Mark as unread"}):h.jsx("button",{className:"manga-btn mini",disabled:ft,onClick:()=>Zn(S,!0),type:"button",children:"Mark as read"})})]})]})]})}),e&&x.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:C=>{C.target===C.currentTarget&&pe()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:x.mode==="add"?"Add Entry":"Edit Entry"}),h.jsx("button",{className:"manga-modal-close",onClick:pe,type:"button",children:"Close"})]}),h.jsxs("div",{className:"admin-form-layout",children:[h.jsx("div",{className:"admin-cover-frame",children:h.jsx("img",{src:x.data.cover||"https://imgur.com/chUgq4W.png",alt:"Cover preview"})}),h.jsxs("div",{className:"admin-form-fields",children:[h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:x.data.title,onChange:C=>_e("title",C.target.value)})]})}),E.length>0&&h.jsx("div",{className:"title-suggestions",children:E.map((C,Q)=>h.jsx("button",{type:"button",className:"manga-btn mini",onClick:()=>_e("title",C),children:C},C+Q))}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:x.data.authors,onChange:C=>_e("authors",C.target.value)})]})}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:x.data.publisher,onChange:C=>_e("publisher",C.target.value)})]})}),h.jsxs("div",{className:"admin-row three",children:[h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:x.data.date,onChange:C=>_e("date",C.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:x.data.datePurchased,onChange:C=>_e("datePurchased",C.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:x.data.dateRead,onChange:C=>_e("dateRead",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",placeholder:"e.g. 192",value:x.data.pageCount,onChange:C=>_e("pageCount",C.target.value)})]}),h.jsxs("label",{children:["ISBN (library only)",h.jsx("input",{type:"text",value:x.data.isbn,onChange:C=>_e("isbn",C.target.value)})]})]}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",placeholder:"Paste image URL here",value:x.data.cover,onChange:C=>_e("cover",C.target.value)})]})}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:x.data.amountPaid,onChange:C=>_e("amountPaid",C.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:x.data.msrp,onChange:C=>_e("msrp",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:x.data.collectiblePrice,onChange:C=>_e("collectiblePrice",C.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",min:"0",value:x.data.specialVolumes,onChange:C=>_e("specialVolumes",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:x.data.specialType,onChange:C=>_e("specialType",C.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:x.data.amazonURL,onChange:C=>_e("amazonURL",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:x.data.demographic,onChange:C=>_e("demographic",C.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:x.data.genre,onChange:C=>_e("genre",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:x.data.subGenre,onChange:C=>_e("subGenre",C.target.value)})]}),h.jsxs("label",{children:["Rating (1-5 stars)",h.jsx(er,{value:x.data.rating,onChange:C=>_e("rating",C)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:x.data.read,onChange:C=>_e("read",C.target.checked,"checkbox")}),h.jsx("span",{children:"Mark as read"})]}),h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:x.multiAdd,onChange:C=>k(Q=>({...Q,multiAdd:C.target.checked}))}),h.jsx("span",{children:"Multi-create volumes"})]})]}),x.multiAdd&&h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Start Volume",h.jsx("input",{type:"number",min:"1",value:x.startVol,onChange:C=>k(Q=>({...Q,startVol:C.target.value}))})]}),h.jsxs("label",{children:["End Volume",h.jsx("input",{type:"number",min:"1",value:x.endVol,onChange:C=>k(Q=>({...Q,endVol:C.target.value}))})]})]})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:pe,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:Ue,type:"button",children:x.mode==="add"?"Add":"Save"})]})]})})}),e&&N.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:C=>{C.target===C.currentTarget&&Xt()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",N.index+1," / ",N.items.length,")"]}),h.jsx("button",{className:"manga-modal-close",onClick:Xt,type:"button",children:"Close"})]}),N.items.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",N.items[N.index].data.title||"Untitled"]}),h.jsxs("div",{className:"admin-form-grid",children:[h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:N.items[N.index].data.title,onChange:C=>Xe("title",C.target.value)})]}),h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:N.items[N.index].data.authors,onChange:C=>Xe("authors",C.target.value)})]}),h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:N.items[N.index].data.publisher,onChange:C=>Xe("publisher",C.target.value)})]}),h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:N.items[N.index].data.demographic,onChange:C=>Xe("demographic",C.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:N.items[N.index].data.genre,onChange:C=>Xe("genre",C.target.value)})]}),h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:N.items[N.index].data.subGenre,onChange:C=>Xe("subGenre",C.target.value)})]}),h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:N.items[N.index].data.date,onChange:C=>Xe("date",C.target.value)})]}),h.jsxs("label",{children:["ISBN",h.jsx("input",{type:"text",value:N.items[N.index].data.isbn,onChange:C=>Xe("isbn",C.target.value)})]}),h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",value:N.items[N.index].data.cover,onChange:C=>Xe("cover",C.target.value)})]}),h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",value:N.items[N.index].data.pageCount,onChange:C=>Xe("pageCount",C.target.value)})]}),h.jsxs("label",{children:["Rating (1-5 stars)",h.jsx(er,{value:N.items[N.index].data.rating,onChange:C=>Xe("rating",C)})]}),h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:N.items[N.index].data.amountPaid,onChange:C=>Xe("amountPaid",C.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:N.items[N.index].data.msrp,onChange:C=>Xe("msrp",C.target.value)})]}),h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:N.items[N.index].data.collectiblePrice,onChange:C=>Xe("collectiblePrice",C.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:N.items[N.index].data.datePurchased,onChange:C=>Xe("datePurchased",C.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:N.items[N.index].data.dateRead,onChange:C=>Xe("dateRead",C.target.value)})]}),h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:N.items[N.index].data.specialType,onChange:C=>Xe("specialType",C.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",value:N.items[N.index].data.specialVolumes,onChange:C=>Xe("specialVolumes",C.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:N.items[N.index].data.amazonURL,onChange:C=>Xe("amazonURL",C.target.value)})]}),h.jsxs("label",{className:"checkbox-row",children:[h.jsx("input",{type:"checkbox",checked:N.items[N.index].data.read,onChange:C=>Xe("read",C.target.checked,"checkbox")}),h.jsx("span",{children:"Marked as read"})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[h.jsxs("div",{children:[h.jsx("button",{className:"manga-btn secondary",onClick:Er,type:"button",disabled:N.index===0,children:"Previous"}),h.jsx("button",{className:"manga-btn secondary",onClick:Br,type:"button",disabled:N.index===N.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:Xt,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:Nt,type:"button",children:"Save Edits"})]})]})]})]})})}),h.jsx("datalist",{id:"adminTitleSuggestions",children:y.map(C=>h.jsx("option",{value:C},C))})]})}const zP="https://imokmalworker.imokissick.workers.dev/?url=",BP="im_ok",wv=300,$P={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function WP(r){const e=$P[r.status]||(typeof r.status=="string"?r.status.toLowerCase():"unknown");return{id:r.anime_id||r.id,title:r.anime_title||r.title||"Untitled",episodes:r.anime_num_episodes??r.episodes??null,status:e,score:r.score??null,image:r.anime_image_path||r.image_url||r.anime_img||r.picture||null}}function Ev(){return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null}]}async function HP(r,e){const t=`https://myanimelist.net/animelist/${r}/load.json?status=7&offset=${e}`,i=await fetch(`${zP}${encodeURIComponent(t)}`);if(!i.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return i.json()}async function qP(r=BP){const e=[];try{let t=0;for(;;){const i=await HP(r,t);if(!Array.isArray(i)||i.length===0||(e.push(...i),i.length<wv))break;t+=wv}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),Ev()}return e.length?e.map(WP):Ev()}function GP(){const{admin:r}=oa(),e=Y=>Y?Y.toString().replace(/_/g," ").replace(/\b\w/g,ae=>ae.toUpperCase()):"Unknown",[t,i]=G.useState([]),[o,l]=G.useState([]),[d,p]=G.useState(""),[y,v]=G.useState("all"),[E,I]=G.useState(!0),[R,z]=G.useState(""),[H,$]=G.useState(null);G.useEffect(()=>{async function Y(){try{const ae=await qP();i(ae),l(ae)}catch(ae){console.error(ae),z("Failed to load data from MAL.")}finally{I(!1)}}Y()},[]);const L=Y=>{switch((Y||"unknown").toLowerCase()){case"watching":return 0;case"completed":return 1;case"on_hold":return 2;case"plan_to_watch":return 3;case"dropped":return 4;default:return 5}};G.useEffect(()=>{let Y=[...t];if(y!=="all"&&(Y=Y.filter(ae=>(ae.status||"").toLowerCase()===y)),d){const ae=d.toLowerCase();Y=Y.filter(Ee=>(Ee.title||"").toLowerCase().includes(ae))}Y.sort((ae,Ee)=>{const ye=L(ae.status),j=L(Ee.status);return ye!==j?ye-j:(ae.title||"").localeCompare(Ee.title||"")}),l(Y)},[t,y,d]);const re=G.useMemo(()=>{const Y=t.length,Ee=t.reduce((S,b)=>S+(Number.isFinite(b.episodes)?Number(b.episodes):0),0)*.4,ye={watching:0,completed:0,on_hold:0,dropped:0,plan_to_watch:0,unknown:0};t.forEach(S=>{const b=(S.status||"unknown").toLowerCase();ye[b]!=null?ye[b]+=1:ye.unknown+=1});const j=t.reduce((S,b)=>Number.isFinite(b.score)?S+b.score:S,0)/Math.max(1,t.filter(S=>Number.isFinite(S.score)).length||1);return{total:Y,byStatus:ye,avgScore:Number.isFinite(j)?j:0,totalHours:Ee}},[t]),ce=Y=>{const ae=Y.image||"https://imgur.com/chUgq4W.png";return h.jsxs("article",{className:"anime-card",onClick:()=>$(Y),children:[h.jsxs("div",{className:"anime-cover-wrap",children:[h.jsx("img",{className:"anime-cover",src:ae,alt:Y.title,loading:"lazy",decoding:"async"}),h.jsx("div",{className:`badge-status ${(Y.status||"unknown").toLowerCase()}`,children:e(Y.status)}),Y.score!=null&&h.jsx("div",{className:"badge-score",children:Y.score})]}),h.jsxs("div",{className:"anime-meta",children:[h.jsx("div",{className:"anime-title",children:Y.title}),h.jsx("div",{className:"anime-sub",children:Y.episodes?`${Y.episodes} episodes`:"Episodes: ?"}),h.jsxs("div",{className:"anime-progress",children:["Status: ",e(Y.status)]})]})]},Y.id||Y.title)};return h.jsxs("main",{className:"anime-page",children:[h.jsxs("div",{className:"anime-content",children:[h.jsxs("header",{className:"anime-header",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"anime-title",children:"Tyler's Anime Library"}),h.jsx("p",{className:"anime-sub",children:"MAL-synced overview of your shows"})]}),r&&h.jsx("button",{className:"stat-link",type:"button",onClick:()=>{const Y=Array.from(new Set(t.map(j=>j.image).filter(Boolean))),ae=new Blob([Y.join(`
`)],{type:"text/plain"}),Ee=URL.createObjectURL(ae),ye=document.createElement("a");ye.href=Ee,ye.download="anime-images.txt",ye.click(),URL.revokeObjectURL(Ee)},children:"Download Images"})]}),h.jsxs("div",{className:"anime-stats",children:[h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Total Entries"}),h.jsx("div",{className:"anime-stat-value",children:re.total})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Watching"}),h.jsx("div",{className:"anime-stat-value",children:re.byStatus.watching})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Completed"}),h.jsx("div",{className:"anime-stat-value",children:re.byStatus.completed})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Plan to Watch"}),h.jsx("div",{className:"anime-stat-value",children:re.byStatus.plan_to_watch})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Avg. Score"}),h.jsx("div",{className:"anime-stat-value",children:re.avgScore?re.avgScore.toFixed(1):""})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Hours Watched (est.)"}),h.jsx("div",{className:"anime-stat-value",children:re.totalHours?re.totalHours.toFixed(1):"0.0"})]})]}),h.jsxs("section",{className:"anime-toolbar",children:[h.jsx("input",{type:"text",placeholder:"Search anime by title...",value:d,onChange:Y=>p(Y.target.value),className:"anime-input"}),h.jsxs("select",{value:y,onChange:Y=>v(Y.target.value),className:"anime-select",children:[h.jsx("option",{value:"all",children:"All statuses"}),h.jsx("option",{value:"watching",children:"Watching"}),h.jsx("option",{value:"completed",children:"Completed"}),h.jsx("option",{value:"on_hold",children:"On Hold"}),h.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"}),h.jsx("option",{value:"dropped",children:"Dropped"})]})]}),E&&h.jsx("div",{className:"loading",children:"Loading anime list from MAL..."}),R&&h.jsx("div",{className:"error-state",children:R}),!E&&!R&&h.jsx(h.Fragment,{children:o.length===0?h.jsx("div",{className:"empty-state",children:"No results match your filters yet."}):h.jsx("section",{className:"anime-grid",children:o.map(Y=>ce(Y))})})]}),H&&h.jsx("div",{className:"modal-backdrop visible",onClick:Y=>{Y.target===Y.currentTarget&&$(null)},children:h.jsxs("div",{className:"anime-modal",children:[h.jsxs("div",{className:"anime-modal-header",children:[h.jsx("h2",{style:{color:"#ffb6c1",margin:0},children:H.title}),h.jsx("button",{className:"anime-modal-close",onClick:()=>$(null),type:"button",children:"Close"})]}),h.jsxs("div",{className:"anime-modal-body",children:[h.jsx("div",{children:h.jsx("img",{className:"anime-modal-cover",src:H.image||"https://imgur.com/chUgq4W.png",alt:H.title})}),h.jsxs("div",{className:"anime-modal-meta",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Status:"})," ",e(H.status)]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Episodes:"})," ",H.episodes?H.episodes:"Unknown"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Score:"})," ",H.score!=null?H.score:"N/A"]})]})]})]})})]})}function KP(){const{admin:r}=oa(),[e,t]=G.useState([]),[i,o]=G.useState(!0),[l,d]=G.useState(""),[p,y]=G.useState("all"),[v,E]=G.useState(!1),[I,R]=G.useState([]),[z,H]=G.useState(""),[$,L]=G.useState(null),[re,ce]=G.useState({game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:"",image:"",image:""});G.useEffect(()=>{async function x(){try{const k=jr(ct,"tcg"),N=await Yo(k),A=[];N.forEach(Fe=>A.push({id:Fe.id,...Fe.data()})),t(A)}catch(k){console.error("Error loading TCG:",k)}finally{o(!1)}}x()},[]);const Y=e.filter(x=>{if(p!=="all"&&x.game!==p)return!1;if(!l)return!0;const k=l.toLowerCase();return(x.name||"").toLowerCase().includes(k)||(x.setName||"").toLowerCase().includes(k)||(x.number||"").toLowerCase().includes(k)}),ae=e.reduce((x,k)=>{const N=Number(k.quantity||1),A=Number(k.pricePaid||0),Fe=Number(k.estimatedValue||0);return x.totalCards+=N,x.totalPaid+=N*A,x.totalValue+=N*Fe,k.game==="pokemon"&&(x.pokemon+=N),k.game==="onepiece"&&(x.onepiece+=N),x},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),Ee=ae.totalValue-ae.totalPaid,ye=(x,k)=>{ce(N=>({...N,[x]:k}))},j=async()=>{if(!r)return;if(!re.name.trim()){alert("Card name is required.");return}const x={game:re.game,name:re.name.trim(),setName:re.setName.trim(),number:re.number.trim(),rarity:re.rarity.trim(),condition:re.condition.trim(),quantity:Number(re.quantity||1),pricePaid:Number(re.pricePaid||0),estimatedValue:Number(re.estimatedValue||0),image:re.image.trim()};try{const k=jr(ct,"tcg");await Za(k,x),ce({game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:""});const N=await Yo(k),A=[];N.forEach(Fe=>A.push({id:Fe.id,...Fe.data()})),t(A)}catch(k){console.error("Error adding card:",k),alert("Failed to save card.")}},S=async()=>{if(!r||!$)return;if(!$.name.trim()){alert("Card name is required.");return}const x={game:$.game,name:$.name.trim(),setName:$.setName.trim(),number:$.number.trim(),rarity:$.rarity.trim(),condition:$.condition.trim(),quantity:Number($.quantity||1),pricePaid:Number($.pricePaid||0),estimatedValue:Number($.estimatedValue||0),image:$.image?$.image.trim():""};try{await Mo(sn(ct,"tcg",$.id),x),t(k=>k.map(N=>N.id===$.id?{...N,...x}:N)),L(null)}catch(k){console.error("Error updating card:",k),alert("Failed to update card.")}},b=async x=>{if(r&&window.confirm("Delete this card?"))try{await Xa(sn(ct,"tcg",x)),t(k=>k.filter(N=>N.id!==x))}catch(k){console.error("Delete error:",k),alert("Failed to delete card.")}};return r?h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"TCG Collection"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Pokemon & One Piece TCG cards with quantities, prices, and collection value."})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:ae.totalCards})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",ae.totalPaid.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",ae.totalValue.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:Ee>=0?"#00e676":"#ff8a80"},children:[Ee>=0?"+":"-","$",Math.abs(Ee).toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:ae.pokemon})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:ae.onepiece})]})]}),h.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[h.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:l,onChange:x=>d(x.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),h.jsxs("select",{value:p,onChange:x=>y(x.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[h.jsx("option",{value:"all",children:"All games"}),h.jsx("option",{value:"pokemon",children:"Pokemon only"}),h.jsx("option",{value:"onepiece",children:"One Piece only"})]})]}),r&&h.jsxs("section",{className:"card",style:{marginTop:"16px",borderStyle:"dashed",borderColor:"rgba(255,182,193,0.5)"},children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"10px",fontSize:"1.05rem",color:"#ffb6c1"},children:"Add card (admin)"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:re.game,onChange:x=>ye("game",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:re.name,onChange:x=>ye("name",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:re.setName,onChange:x=>ye("setName",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:re.number,onChange:x=>ye("number",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:re.rarity,onChange:x=>ye("rarity",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:re.condition,onChange:x=>ye("condition",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",min:"1",value:re.quantity,onChange:x=>ye("quantity",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:re.pricePaid,onChange:x=>ye("pricePaid",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:re.estimatedValue,onChange:x=>ye("estimatedValue",x.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]}),h.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"10px"},children:h.jsx("button",{onClick:j,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})})]}),i?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):Y.length===0?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):h.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:Y.map(x=>{const k=Number(x.quantity||1),N=k*Number(x.pricePaid||0),A=k*Number(x.estimatedValue||0);return h.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem"},children:[h.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:x.name||"Unnamed card"}),h.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:x.setName||""}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[h.jsxs("span",{children:["#",x.number||"-"]}),h.jsx("span",{children:x.rarity||""})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Cond: ",x.condition||"N/A"]}),h.jsxs("span",{children:["Qty: ",k]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Paid: $",N.toFixed(2)]}),h.jsxs("span",{children:["Value: $",A.toFixed(2)]})]}),h.jsxs("div",{style:{marginTop:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem"},children:x.game==="pokemon"?"Pokemon":"One Piece"}),r&&h.jsx("button",{onClick:()=>L({...x,pricePaid:x.pricePaid??"",estimatedValue:x.estimatedValue??"",quantity:x.quantity??1}),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"rgba(255,105,180,0.15)",color:"#ffb6c1",fontSize:"0.7rem",cursor:"pointer"},children:"Edit"})]}),r&&h.jsx("div",{style:{marginTop:"4px",display:"flex",justifyContent:"flex-end"},children:h.jsx("button",{onClick:()=>b(x.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})})]},x.id)})}),r&&$&&h.jsxs("section",{className:"card",style:{marginTop:"18px",borderStyle:"dashed",borderColor:"rgba(255,182,193,0.5)"},children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"10px",fontSize:"1.05rem",color:"#ffb6c1"},children:"Edit card"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:$.game,onChange:x=>L(k=>({...k,game:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:$.name,onChange:x=>L(k=>({...k,name:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:$.setName,onChange:x=>L(k=>({...k,setName:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:$.number,onChange:x=>L(k=>({...k,number:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:$.rarity,onChange:x=>L(k=>({...k,rarity:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:$.condition,onChange:x=>L(k=>({...k,condition:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",value:$.quantity,onChange:x=>L(k=>({...k,quantity:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (each)",h.jsx("input",{type:"number",value:$.pricePaid,onChange:x=>L(k=>({...k,pricePaid:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (each)",h.jsx("input",{type:"number",value:$.estimatedValue,onChange:x=>L(k=>({...k,estimatedValue:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",h.jsx("input",{type:"text",value:$.image||"",onChange:x=>L(k=>({...k,image:x.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"10px"},children:[h.jsx("button",{onClick:()=>L(null),style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),h.jsx("button",{onClick:S,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save changes"})]})]})]}):h.jsx("main",{className:"page",children:h.jsxs("div",{className:"dashboard-locked",style:{textAlign:"center",marginTop:"30px"},children:[h.jsx("h1",{style:{color:"#ffb6c1"},children:"TCG"}),h.jsx("p",{style:{color:"var(--text-soft)"},children:"This section is under construction and restricted to admins."})]})})}const Yu="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",Ju="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",Xu="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82";function Ws(r){if(!r)return null;if(r instanceof Date)return r;if(r&&typeof r.toDate=="function")return r.toDate();const e=String(r).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,d,p]=t;return new Date(Number(l),Number(d)-1,Number(p))}const i=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(i){let[,l,d,p]=i;const y=p.length===2?+`20${p}`:Number(p);return new Date(y,Number(l)-1,Number(d))}const o=new Date(e);return isNaN(o.getTime())?null:o}function hw(r){const e=(r.seriesKey||r.series||r.Series||r.title||r.Title||"").trim();return e?e.replace(/\bvolume\s+\d+.*$/i,"").replace(/\bvol\.?\s+\d+.*$/i,"").trim().toLowerCase():""}function QP(r){const e=new Map;for(const t of r){const i=hw(t)||t.id;if(!e.has(i)){const y=(t.series||t.Series||t.title||t.Title||"Unknown Series").trim();e.set(i,{key:i,title:y,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const o=e.get(i);o.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;o.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(o.readVolumes+=1,o.readPages+=l);const p=Number(t.rating||t.Rating);!isNaN(p)&&p>0&&(o.ratingSum+=p,o.ratingCount+=1)}return e}function jo(r,e,t=5){const i=new Map;for(const o of r.values()){const l=(o[e]||"").trim();if(!l)continue;const d=l.split(/[\/,]/).map(p=>p.trim()).filter(Boolean);for(const p of d)i.set(p,(i.get(p)||0)+1)}return[...i.entries()].sort((o,l)=>l[1]-o[1]).slice(0,t).map(([o,l])=>({name:o,count:l}))}function Tv(r,e){const t=Array.from({length:12},(i,o)=>{const l=new Date(e,o,1);return{key:`${e}-${o}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:o,value:0}});for(const i of r){const o=Ws(i.dateRead||i.DateRead);!o||o.getFullYear()!==e||(t[o.getMonth()].value+=1)}return t}function $h(r){const e=r.getFullYear(),t=`${r.getMonth()+1}`.padStart(2,"0"),i=`${r.getDate()}`.padStart(2,"0");return`${e}-${t}-${i}`}async function Wh(r,e){try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function YP(r){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of r){const d=Ws(l.dateRead||l.DateRead);d&&(t[d.getDay()]+=1)}if(!t.some(l=>l>0))return[];const o=t.reduce((l,d)=>Math.max(l,d),0)||1;return e.map((l,d)=>({label:l,value:t[d],pct:t[d]/o}))}function JP(r,e=8){const t=[...r.values()];t.sort((l,d)=>d.volumes-l.volumes);const i=t.slice(0,e),o=i.reduce((l,d)=>Math.max(l,d.volumes),0)||1;return i.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/o}))}function XP(r){const e=[];for(const t of r){const i=Ws(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!i)continue;const o=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:i,title:o})}return e.sort((t,i)=>t.date-i.date),e}function ZP(r){const e=new Date;for(const t of r)if(t.date>=e)return t;return r[r.length-1]||null}function eA(r){let e=0,t=0;for(const i of r){const o=Ws(i.datePurchased||i.DatePurchased),l=Ws(i.dateRead||i.DateRead);if(!o||!l)continue;const d=l-o;d<=0||(e+=d/(1e3*60*60*24),t+=1)}return t?e/t:null}function tA(r){let e=0,t=0,i=0;for(const o of r){const l=Number(o.msrp||o.MSRP||0)||0,d=Number(o.amountPaid||o.AmountPaid||o.pricePaid||0)||l||0,p=Number(o.collectiblePrice||o.CollectiblePrice||0)||0;e+=l,t+=d,i+=p}return{msrpTotal:e,paidTotal:t,collectibleTotal:i}}function nA(r){const e=new Map;for(const t of r){const i=hw(t)||t.id;e.has(i)||e.set(i,{key:i,title:t.series||t.Series||t.title||t.Title||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]});const o=e.get(i);o.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,d=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,p=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,y=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;o.msrp+=l,o.paid+=d,o.collectible+=p,o.pages+=y,v&&(o.readPages+=y);const E=Number(t.rating||t.Rating);!isNaN(E)&&E>0&&o.ratings.push(E)}return[...e.values()]}function rA(r){let e=0,t=0;for(const i of r){const o=Number(i.pages||i.Pages||i.pageCount||0)||0;e+=o,(!!i.read||i.status==="Read"||i.Read===!0)&&(t+=o)}return{total:e,read:t}}function iA(r){let e=0,t=0;for(const i of r.values())i.ratingCount>0&&(e+=i.ratingSum/i.ratingCount,t+=1);return t?e/t:null}function sA({data:r}){if(!r||!r.length)return h.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=r.reduce((v,E)=>Math.max(v,E.value),0)||1,t=480,i=230,o=30,l=i-o*2,d=t/Math.max(r.length-1,1),p=r.map((v,E)=>{const I=E*d,R=i-o-v.value/e*l;return{...v,x:I,y:R}}),y=p.map((v,E)=>E===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return h.jsx("div",{className:"line-chart",children:h.jsxs("svg",{viewBox:`0 0 ${t} ${i}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,E)=>{const I=i-o-v*l;return h.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:I,y2:I},`h-${E}`)}),p.map((v,E)=>h.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:o/2,y2:i-o/2},`v-${E}`)),h.jsx("path",{className:"line-path",d:y}),p.map((v,E)=>h.jsxs("g",{children:[h.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),h.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),h.jsx("text",{className:"line-label",x:v.x,y:i-4,children:v.label})]},E))]})})}function oA({data:r}){return!r||!r.length?h.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):h.jsx("div",{className:"weekday-bars",children:r.map(e=>h.jsxs("div",{className:"weekday-col",children:[h.jsx("div",{className:"weekday-count",children:e.value}),h.jsx("div",{className:"weekday-bar-vert",children:h.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),h.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function aA(r,e){const t=r.getFullYear(),i=r.getMonth(),l=new Date(t,i,1).getDay(),d=new Date(t,i+1,0).getDate(),p=new Map;for(const v of e){const E=v.date;if(E.getFullYear()===t&&E.getMonth()===i){const I=E.getDate();p.has(I)||p.set(I,[]),p.get(I).push(v)}}const y=[];for(let v=0;v<l;v++)y.push({type:"pad"});for(let v=1;v<=d;v++)y.push({type:"day",day:v,releases:p.get(v)||[]});return y}function lA(){const{user:r,admin:e,loading:t}=oa(),[i,o]=G.useState([]),[l,d]=G.useState([]),[p,y]=G.useState(!0),[v,E]=G.useState(null),[I,R]=G.useState("-"),[z,H]=G.useState({yearly:Yu,release:Ju,activity:Xu}),[$,L]=G.useState(!1),[re,ce]=G.useState(!1),[Y,ae]=G.useState(()=>new Date),[Ee,ye]=G.useState({open:!1,type:null}),j=new Date().getFullYear(),S=G.useRef(null),b=G.useRef(null),x=G.useRef("");G.useEffect(()=>{typeof window>"u"||(S.current=localStorage.getItem("dashboard-yearly-posted"),b.current=localStorage.getItem("dashboard-release-posted"),x.current=localStorage.getItem("dashboard-activity-posted")||"")},[]),G.useEffect(()=>{if(!e)return;const X=sn(ct,"settings","webhooks");(async()=>{try{const fe=await Ef(X);if(fe.exists()){const se=fe.data();H({yearly:se.yearly||Yu,release:se.release||Ju,activity:se.activity||Xu})}else await vv(X,{yearly:Yu,release:Ju,activity:Xu})}catch(fe){console.error("Failed to load webhook settings",fe)}})()},[e]),G.useEffect(()=>{let X=!1;async function fe(){if(!r||!e){o([]),d([]),E(null),y(!1);return}try{y(!0);const[se,C]=await Promise.all([Yo(jr(ct,"library")),Yo(jr(ct,"wishlist"))]);if(X)return;o(se.docs.map(Q=>({id:Q.id,...Q.data()}))),d(C.docs.map(Q=>({id:Q.id,...Q.data()}))),E(null)}catch(se){console.error(se),X||E("Failed to load dashboard data.")}finally{X||y(!1)}}return fe(),()=>{X=!0}},[r,e]);const k=G.useMemo(()=>{const X=i.length,fe=i.filter(st=>!!st.read||st.status==="Read"||st.Read===!0).length,se=X-fe,C=X?Math.round(fe/X*100):0,Q=l.length,K=QP(i),O=Tv(i,j),de=Tv(i,j-1),Le=O.reduce((st,Un)=>st+Un.value,0),et=YP(i),St=JP(K),rt=XP(l),it=ZP(rt),Cn=eA(i),On=tA(i),Ln=rA(i),Tr=iA(K),mn=jo(K,"publisher",5),Mn=jo(K,"genre",5),fi=jo(K,"demographic",5),Fn=nA(i),cs=[...i].map(st=>{const Un=Ws(st.dateRead||st.DateRead)||Ws(st.datePurchased||st.DatePurchased);return Un?{title:st.title||st.Title||st.series||st.Series||"Untitled",type:st.dateRead||st.DateRead?"Read":"Purchased",date:Un}:null}).filter(Boolean).sort((st,Un)=>Un.date-st.date).slice(0,12);return{totalLibrary:X,readCount:fe,unreadCount:se,readPct:C,wishlistCount:Q,seriesMap:K,monthlyReads:O,prevYearReads:de,currentYearReadsTotal:Le,weekdayBreakdown:et,topSeriesBars:St,releases:rt,nextRelease:it,avgDays:Cn,collectionValue:On,pages:Ln,avgRating:Tr,topPublishers:mn,topGenres:Mn,topDemographics:fi,seriesAggregates:Fn,activity:cs}},[i,l,j]),{totalLibrary:N,readCount:A,unreadCount:Fe,readPct:nt,wishlistCount:gt,seriesMap:Be,monthlyReads:ue,prevYearReads:Ie,currentYearReadsTotal:he,weekdayBreakdown:M,topSeriesBars:J,releases:pe,nextRelease:Ae,avgDays:je,collectionValue:Ve,pages:_e,avgRating:Ue,topPublishers:Ye,topGenres:ft,topDemographics:un,seriesAggregates:Xt,activity:Lt}=k,Mt=Ae?Ae.date:null,Zn=!!v;if(G.useEffect(()=>{if(!Ie||!Ie.length)return;const X=j-1,fe=Ie.reduce((K,O)=>K+O.value,0);if(!fe||(S.current?parseInt(S.current,10):null)===X)return;const C=Ie.map(K=>`${K.label}: ${K.value}`).join(", "),Q=`Yearly reads summary for ${X}: ${fe} total. Breakdown: ${C}`;Wh(z.yearly,Q).then(()=>{S.current=String(X),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String(X))})},[Ie,j]),G.useEffect(()=>{if(!Ae||!pe.length)return;const X=$h(Ae.date),fe=$h(new Date);if(X>fe||b.current===X)return;const se=pe.filter(Q=>$h(Q.date)===X);if(!se.length)return;const C=`Wishlist releases for ${X}:
${se.map(Q=>`- ${Q.title}`).join(`
`)}`;Wh(z.release,C).then(()=>{b.current=X,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",X)})},[Ae,pe]),G.useEffect(()=>{var C,Q;if(!e||!Lt||!Lt.length)return;const X=Lt[0];if(!X||!X.date)return;const fe=`${X.type}-${X.title}-${((Q=(C=X.date).toISOString)==null?void 0:Q.call(C))||X.date}`;if(x.current===fe)return;x.current=fe;const se=`Activity: ${X.type}  ${X.title} (${X.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})`;Wh(z.activity,se).then(()=>{typeof window<"u"&&localStorage.setItem("dashboard-activity-posted",fe)})},[Lt,e,z]),G.useEffect(()=>{if(!Mt){R("-");return}const X=()=>{const se=Mt-new Date;if(se<=0){R("Released");return}const C=Math.floor(se/1e3),Q=Math.floor(C/86400),K=Math.floor(C%86400/3600).toString().padStart(2,"0"),O=Math.floor(C%3600/60).toString().padStart(2,"0"),de=Math.floor(C%60).toString().padStart(2,"0");R(`${Q}d ${K}:${O}:${de}`)};X();const fe=setInterval(X,1e3);return()=>clearInterval(fe)},[Mt]),t)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"Checking permissions..."})]})});if(!r||!e)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-locked",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(p)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),v?h.jsx("p",{className:"error",children:v}):h.jsx("p",{children:"Loading stats..."})]})});const wr=N+gt,Xe=wr?Math.round(N/wr*100):0,Br=[...Be.values()].filter(X=>X.ratingCount>0).map(X=>({title:X.title,avg:X.ratingSum/X.ratingCount,count:X.ratingCount})).sort((X,fe)=>fe.avg-X.avg||fe.count-X.count).slice(0,3);function Er(){if(Mt)ae(new Date(Mt.getFullYear(),Mt.getMonth(),1));else if(pe.length){const X=pe[0].date;ae(new Date(X.getFullYear(),X.getMonth(),1))}ce(!0)}function Nt(X){ye({open:!0,type:X})}function pn(){ye({open:!1,type:null})}const er=aA(Y,pe);function tr(){const X=Ee.type;if(!X)return null;if(X==="publishers"){const fe=[...jo(Be,"publisher",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Publishers by Series"}),fe.length===0?h.jsx("p",{children:"No publisher data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Publisher"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:fe.map((se,C)=>h.jsxs("tr",{children:[h.jsx("td",{children:C+1}),h.jsx("td",{children:se.name}),h.jsx("td",{children:se.count})]},se.name+C))})]})]})}if(X==="genres"){const fe=[...jo(Be,"genre",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Genres by Series"}),fe.length===0?h.jsx("p",{children:"No genre data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Genre"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:fe.map((se,C)=>h.jsxs("tr",{children:[h.jsx("td",{children:C+1}),h.jsx("td",{children:se.name}),h.jsx("td",{children:se.count})]},se.name+C))})]})]})}if(X==="demographics"){const fe=[...jo(Be,"demographic",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Demographics by Series"}),fe.length===0?h.jsx("p",{children:"No demographic data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Demographic"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:fe.map((se,C)=>h.jsxs("tr",{children:[h.jsx("td",{children:C+1}),h.jsx("td",{children:se.name}),h.jsx("td",{children:se.count})]},se.name+C))})]})]})}if(X==="timeToRead")return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Average Time From Purchase to Read"}),je==null?h.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):h.jsxs("p",{children:["On average, it takes"," ",h.jsxs("strong",{children:[je.toFixed(1)," days"]})," from purchase to finishing a volume."]})]});if(X==="collectionValue"){const{msrpTotal:fe,paidTotal:se}=Ve,C=fe-se,Q=fe>0?(se/fe*100).toFixed(1):"-",K=[...Xt].filter(O=>O.msrp||O.paid||O.collectible).sort((O,de)=>de.msrp+de.collectible-(O.msrp+O.collectible));return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Collection Value Breakdown"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total MSRP"}),h.jsxs("td",{children:["$",fe.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Total Paid"}),h.jsxs("td",{children:["$",se.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Difference"}),h.jsxs("td",{children:["$",C.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Paid vs MSRP"}),h.jsx("td",{children:Q==="-"?"-":`${Q}%`})]})]})}),K.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"MSRP"}),h.jsx("th",{children:"Paid"}),h.jsx("th",{children:"Collectible"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:K.map((O,de)=>h.jsxs("tr",{children:[h.jsx("td",{children:O.title}),h.jsxs("td",{children:["$",O.msrp.toFixed(2)]}),h.jsxs("td",{children:["$",O.paid.toFixed(2)]}),h.jsx("td",{children:O.collectible?`$${O.collectible.toFixed(2)}`:"--"}),h.jsx("td",{children:O.books})]},O.title+de))})]})]})]})}if(X==="pages"){const fe=[...Xt].filter(se=>se.pages>0).map(se=>({...se,pct:se.pages?Math.round(se.readPages/se.pages*100):0})).sort((se,C)=>C.pages-se.pages);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Pages Read vs Total"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total Pages"}),h.jsx("td",{children:_e.total.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Pages Read"}),h.jsx("td",{children:_e.read.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Completion"}),h.jsx("td",{children:_e.total?`${(_e.read/_e.total*100).toFixed(1)}%`:"-"})]})]})}),fe.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Read Pages"}),h.jsx("th",{children:"Total Pages"}),h.jsx("th",{children:"% Read"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:fe.map((se,C)=>h.jsxs("tr",{children:[h.jsx("td",{children:se.title}),h.jsx("td",{children:se.readPages.toLocaleString()}),h.jsx("td",{children:se.pages.toLocaleString()}),h.jsxs("td",{children:[se.pct,"%"]}),h.jsx("td",{children:se.books})]},se.title+C))})]})]})]})}if(X==="ratings"){const fe=[...Xt].map(se=>{if(!se.ratings.length)return null;const C=se.ratings.reduce((Q,K)=>Q+K,0)/se.ratings.length;return{title:se.title,avg:C,count:se.ratings.length}}).filter(Boolean).sort((se,C)=>C.avg-se.avg||C.count-se.count);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Ratings Overview"}),Ue==null?h.jsx("p",{children:"No ratings have been recorded yet."}):h.jsxs("p",{children:["Average series rating across rated series is"," ",h.jsx("strong",{children:Ue.toFixed(2)}),"."]}),fe.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Avg"}),h.jsx("th",{children:"Ratings"})]})}),h.jsx("tbody",{children:fe.map((se,C)=>h.jsxs("tr",{children:[h.jsx("td",{children:se.title}),h.jsx("td",{children:se.avg.toFixed(2)}),h.jsx("td",{children:se.count})]},se.title+C))})]})]})]})}return X==="releases"?h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Wishlist Releases"}),pe.length===0?h.jsx("p",{children:"No wishlist releases found."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Date"}),h.jsx("th",{children:"Title"})]})}),h.jsx("tbody",{children:pe.map((fe,se)=>h.jsxs("tr",{children:[h.jsx("td",{children:fe.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),h.jsx("td",{children:fe.title})]},se))})]})]}):null}return h.jsxs("div",{className:"page dashboard-page",children:[h.jsxs("header",{className:"dashboard-header",children:[h.jsxs("div",{children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{className:"dashboard-sub",children:"Admin-only analytics for your manga library and wishlist."})]}),e&&h.jsx("button",{className:"stat-link",onClick:()=>L(!0),type:"button",children:"Admin Settings"})]}),h.jsx("section",{id:"dashboardSection",className:"page-section active",children:h.jsxs("div",{className:"dashboard-grid",children:[h.jsxs("div",{className:"stat-stack",children:[h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Total Library Books"}),h.jsx("div",{className:"stat-value",children:N}),h.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Wishlist Items"}),h.jsx("div",{className:"stat-value",children:gt}),h.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Read / Unread"}),h.jsx("div",{className:"pie",style:{"--pct":`${nt*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[nt,"%"]})}),h.jsxs("div",{className:"stat-value",children:[A," read / ",Fe," unread"]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("ratings"),children:[h.jsx("h3",{children:"Ratings"}),h.jsx("div",{className:"stat-value",children:Ue==null?"-":Ue.toFixed(2)}),h.jsx("div",{className:"stat-sub",children:"Average across rated series."}),h.jsx("div",{className:"stat-list compact",children:Br.length?Br.map((X,fe)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:fe+1}),h.jsx("span",{className:"stat-name",children:X.title}),h.jsx("span",{className:"stat-count",children:X.avg.toFixed(2)})]},X.title+fe)):h.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("pages"),children:[h.jsx("h3",{children:"Page Count Read / Total"}),h.jsxs("div",{className:"stat-value",children:[_e.read.toLocaleString()," / ",_e.total.toLocaleString()]}),h.jsx("div",{className:"stat-sub",children:_e.total?`${(_e.read/_e.total*100).toFixed(1)}% read`:"-"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Library vs Wishlist"}),h.jsx("div",{className:"pie",style:{"--pct":`${Xe*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[Xe,"%"]})}),h.jsxs("div",{className:"stat-value",children:[N," / ",gt]}),h.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("demographics"),children:[h.jsx("h3",{children:"Top Demographics"}),h.jsx("div",{className:"stat-list",children:un.length?un.slice(0,3).map((X,fe)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:fe+1}),h.jsx("span",{className:"stat-name",children:X.name}),h.jsx("span",{className:"stat-count",children:X.count})]},X.name)):h.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("publishers"),children:[h.jsx("h3",{children:"Top Publishers"}),h.jsx("div",{className:"stat-list",children:Ye.length?Ye.slice(0,3).map((X,fe)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:fe+1}),h.jsx("span",{className:"stat-name",children:X.name}),h.jsx("span",{className:"stat-count",children:X.count})]},X.name)):h.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("genres"),children:[h.jsx("h3",{children:"Top Genres"}),h.jsx("div",{className:"stat-list",children:ft.length?ft.slice(0,3).map((X,fe)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:fe+1}),h.jsx("span",{className:"stat-name",children:X.name}),h.jsx("span",{className:"stat-count",children:X.count})]},X.name)):h.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>{Er()},children:[h.jsx("h3",{children:"Next Wishlist Release"}),h.jsx("div",{className:"stat-value next-release",children:Ae?Ae.title:"No upcoming releases"}),h.jsxs("div",{className:"stat-sub",children:[Mt?Mt.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",h.jsx("br",{}),h.jsx("span",{id:"statNextCountdown",children:I})]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("collectionValue"),style:{textAlign:"center"},children:[h.jsx("h3",{children:"Collection Pricing"}),h.jsxs("div",{className:"stat-value stat-msrp",children:["$",Ve.msrpTotal.toFixed(2)]}),h.jsxs("div",{className:"stat-value stat-paid",children:["$",Ve.paidTotal.toFixed(2),Ve.msrpTotal>0&&h.jsxs("span",{className:"stat-paid-pct",children:["(",((1-Ve.paidTotal/Ve.msrpTotal)*100).toFixed(1),"% off)"]})]}),h.jsxs("div",{className:"stat-value stat-collectible",children:["$",Ve.collectibleTotal.toFixed(2)]}),h.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Current Year Reads"}),h.jsx("div",{className:"stat-value",children:he}),h.jsxs("div",{className:"stat-sub",children:["Reads in ",j]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>Nt("timeToRead"),children:[h.jsx("h3",{children:"Avg Days From Purchase to Read"}),h.jsx("div",{className:"stat-value",children:je==null?"-":`${je.toFixed(1)} days`}),h.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),h.jsxs("div",{className:"stat-duo",children:[h.jsxs("div",{className:"stat-card tall",children:[h.jsxs("h3",{children:["Reads Per Month (",j,")"]}),h.jsx(sA,{data:ue})]}),h.jsxs("div",{className:"stat-card tall",children:[h.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),h.jsx(oA,{data:M}),h.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),h.jsxs("div",{className:"stat-card wide",children:[h.jsx("h3",{children:"Activity Log"}),Zn&&h.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),h.jsx("div",{className:"activity-log",children:Lt.length?Lt.map((X,fe)=>h.jsxs("div",{className:"activity-row",children:[h.jsx("span",{className:"activity-type",children:X.type}),h.jsx("span",{className:"activity-title",children:X.title}),h.jsx("span",{className:"activity-date",children:X.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]},X.title+fe)):h.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]})]})}),re&&h.jsx("div",{id:"calendarOverlay",onClick:()=>ce(!1),children:h.jsxs("div",{id:"calendarCard",onClick:X=>X.stopPropagation(),children:[h.jsxs("div",{className:"calendar-header",children:[h.jsx("div",{className:"calendar-title",children:Y.toLocaleString(void 0,{month:"long",year:"numeric"})}),h.jsxs("div",{className:"calendar-nav",children:[h.jsx("button",{className:"calendar-nav-btn",onClick:()=>ae(new Date(Y.getFullYear(),Y.getMonth()-1,1)),children:"<"}),h.jsx("button",{className:"calendar-nav-btn",onClick:()=>ae(new Date(Y.getFullYear(),Y.getMonth()+1,1)),children:">"})]})]}),h.jsxs("div",{className:"calendar-weekdays",children:[h.jsx("div",{children:"Sun"}),h.jsx("div",{children:"Mon"}),h.jsx("div",{children:"Tue"}),h.jsx("div",{children:"Wed"}),h.jsx("div",{children:"Thu"}),h.jsx("div",{children:"Fri"}),h.jsx("div",{children:"Sat"})]}),h.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:er.map((X,fe)=>X.type==="pad"?h.jsx("div",{className:"calendar-day pad"},fe):h.jsxs("div",{className:"calendar-day",children:[h.jsx("div",{className:"day-num",children:X.day}),h.jsxs("div",{className:"calendar-releases",children:[X.releases.slice(0,2).map((se,C)=>h.jsx("div",{className:"calendar-release",title:se.title,children:se.title},C)),X.releases.length>2&&h.jsxs("button",{className:"calendar-more-btn",children:["+",X.releases.length-2," more"]})]})]},fe))}),!pe.length&&h.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),h.jsx("button",{id:"calendarClose",onClick:()=>ce(!1),children:"x"})]})}),Ee.open&&h.jsx("div",{id:"statDetailOverlay",onClick:pn,children:h.jsxs("div",{id:"statDetailCard",onClick:X=>X.stopPropagation(),children:[h.jsx("button",{id:"statDetailClose",onClick:pn,children:"x"}),h.jsxs("h2",{id:"statDetailTitle",children:[Ee.type==="publishers"&&"Top Publishers",Ee.type==="genres"&&"Top Genres",Ee.type==="demographics"&&"Top Demographics",Ee.type==="timeToRead"&&"Avg Time From Purchase to Read",Ee.type==="collectionValue"&&"Collection Value",Ee.type==="pages"&&"Pages Read vs Total",Ee.type==="ratings"&&"Ratings",Ee.type==="releases"&&"Wishlist Releases"]}),h.jsx("div",{id:"statDetailBody",children:tr()})]})}),e&&$&&h.jsx("div",{className:"dashboard-modal-backdrop visible",onClick:X=>{X.target===X.currentTarget&&L(!1)},children:h.jsxs("div",{className:"dashboard-modal",children:[h.jsxs("div",{className:"dashboard-modal-header",children:[h.jsx("h3",{children:"Webhook Settings"}),h.jsx("button",{className:"dashboard-close",onClick:()=>L(!1),type:"button",children:"Close"})]}),h.jsxs("div",{className:"dashboard-modal-body",children:[h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Yearly summary webhook"}),h.jsx("input",{type:"text",value:z.yearly,onChange:X=>H(fe=>({...fe,yearly:X.target.value}))})]}),h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Release timer webhook"}),h.jsx("input",{type:"text",value:z.release,onChange:X=>H(fe=>({...fe,release:X.target.value}))})]}),h.jsxs("label",{className:"dashboard-input",children:[h.jsx("span",{children:"Activity webhook"}),h.jsx("input",{type:"text",value:z.activity,onChange:X=>H(fe=>({...fe,activity:X.target.value}))})]})]}),h.jsxs("div",{className:"dashboard-modal-footer",children:[h.jsx("button",{className:"stat-link",type:"button",onClick:async()=>{try{await vv(sn(ct,"settings","webhooks"),{yearly:z.yearly||Yu,release:z.release||Ju,activity:z.activity||Xu}),L(!1)}catch(X){console.error("Failed to save webhooks",X),alert("Failed to save webhooks.")}},children:"Save"}),h.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>L(!1),children:"Cancel"})]})]})})]})}function uA(){const r=Nc(),{user:e}=oa();e&&r("/");async function t(){try{const i=new Dr;await A_(Qi,i),r("/")}catch(i){console.error(i),alert("Google Sign-In failed.")}}return h.jsx("div",{className:"signin-page",children:h.jsxs("div",{className:"signin-card",children:[h.jsx("h2",{className:"signin-title",children:"Welcome Back"}),h.jsx("p",{className:"signin-sub",children:"Sign in to access your dashboard & collections."}),h.jsxs("button",{className:"google-btn",onClick:t,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsxs("button",{className:"signin-cancel",onClick:()=>r("/"),children:["<"," Back to Home"]})]})})}function cA(){return h.jsxs(LP,{children:[h.jsx(FP,{}),h.jsxs(_T,{children:[h.jsx(ri,{path:"/",element:h.jsx(_v,{})}),h.jsx(ri,{path:"/home",element:h.jsx(_v,{})}),h.jsx(ri,{path:"/manga",element:h.jsx(UP,{})}),h.jsx(ri,{path:"/anime",element:h.jsx(GP,{})}),h.jsx(ri,{path:"/tcg",element:h.jsx(KP,{})}),h.jsx(ri,{path:"/dashboard",element:h.jsx(lA,{})}),h.jsx(ri,{path:"/signin",element:h.jsx(uA,{})}),h.jsx(ri,{path:"*",element:h.jsx(yT,{to:"/home",replace:!0})})]})]})}CE.createRoot(document.getElementById("root")).render(h.jsx(Iv.StrictMode,{children:h.jsx(CT,{basename:"/base",children:h.jsx(cA,{})})}));
