function wx(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Pv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var kh={exports:{}},Qa={},Ah={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function xx(){if(Ng)return He;Ng=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function I(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,Z={};function U(D,J,ye){this.props=D,this.context=J,this.refs=Z,this.updater=ye||z}U.prototype.isReactComponent={},U.prototype.setState=function(D,J){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,J,"setState")},U.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ce(){}ce.prototype=U.prototype;function ne(D,J,ye){this.props=D,this.context=J,this.refs=Z,this.updater=ye||z}var de=ne.prototype=new ce;de.constructor=ne,K(de,U.prototype),de.isPureReactComponent=!0;var me=Array.isArray,ie=Object.prototype.hasOwnProperty,ee={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function C(D,J,ye){var Re,Ne={},ze=null,qe=null;if(J!=null)for(Re in J.ref!==void 0&&(qe=J.ref),J.key!==void 0&&(ze=""+J.key),J)ie.call(J,Re)&&!N.hasOwnProperty(Re)&&(Ne[Re]=J[Re]);var Be=arguments.length-2;if(Be===1)Ne.children=ye;else if(1<Be){for(var tt=Array(Be),at=0;at<Be;at++)tt[at]=arguments[at+2];Ne.children=tt}if(D&&D.defaultProps)for(Re in Be=D.defaultProps,Be)Ne[Re]===void 0&&(Ne[Re]=Be[Re]);return{$$typeof:r,type:D,key:ze,ref:qe,props:Ne,_owner:ee.current}}function b(D,J){return{$$typeof:r,type:D.type,key:J,ref:D.ref,props:D.props,_owner:D._owner}}function P(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function V(D){var J={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ye){return J[ye]})}var A=/\/+/g;function R(D,J){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):J.toString(36)}function Oe(D,J,ye,Re,Ne){var ze=typeof D;(ze==="undefined"||ze==="boolean")&&(D=null);var qe=!1;if(D===null)qe=!0;else switch(ze){case"string":case"number":qe=!0;break;case"object":switch(D.$$typeof){case r:case e:qe=!0}}if(qe)return qe=D,Ne=Ne(qe),D=Re===""?"."+R(qe,0):Re,me(Ne)?(ye="",D!=null&&(ye=D.replace(A,"$&/")+"/"),Oe(Ne,J,ye,"",function(at){return at})):Ne!=null&&(P(Ne)&&(Ne=b(Ne,ye+(!Ne.key||qe&&qe.key===Ne.key?"":(""+Ne.key).replace(A,"$&/")+"/")+D)),J.push(Ne)),1;if(qe=0,Re=Re===""?".":Re+":",me(D))for(var Be=0;Be<D.length;Be++){ze=D[Be];var tt=Re+R(ze,Be);qe+=Oe(ze,J,ye,tt,Ne)}else if(tt=I(D),typeof tt=="function")for(D=tt.call(D),Be=0;!(ze=D.next()).done;)ze=ze.value,tt=Re+R(ze,Be++),qe+=Oe(ze,J,ye,tt,Ne);else if(ze==="object")throw J=String(D),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return qe}function Ye(D,J,ye){if(D==null)return D;var Re=[],Ne=0;return Oe(D,Re,"","",function(ze){return J.call(ye,ze,Ne++)}),Re}function Ue(D){if(D._status===-1){var J=D._result;J=J(),J.then(function(ye){(D._status===0||D._status===-1)&&(D._status=1,D._result=ye)},function(ye){(D._status===0||D._status===-1)&&(D._status=2,D._result=ye)}),D._status===-1&&(D._status=0,D._result=J)}if(D._status===1)return D._result.default;throw D._result}var W={current:null},j={transition:null},se={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:j,ReactCurrentOwner:ee};function oe(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:Ye,forEach:function(D,J,ye){Ye(D,function(){J.apply(this,arguments)},ye)},count:function(D){var J=0;return Ye(D,function(){J++}),J},toArray:function(D){return Ye(D,function(J){return J})||[]},only:function(D){if(!P(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},He.Component=U,He.Fragment=t,He.Profiler=o,He.PureComponent=ne,He.StrictMode=i,He.Suspense=m,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,He.act=oe,He.cloneElement=function(D,J,ye){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Re=K({},D.props),Ne=D.key,ze=D.ref,qe=D._owner;if(J!=null){if(J.ref!==void 0&&(ze=J.ref,qe=ee.current),J.key!==void 0&&(Ne=""+J.key),D.type&&D.type.defaultProps)var Be=D.type.defaultProps;for(tt in J)ie.call(J,tt)&&!N.hasOwnProperty(tt)&&(Re[tt]=J[tt]===void 0&&Be!==void 0?Be[tt]:J[tt])}var tt=arguments.length-2;if(tt===1)Re.children=ye;else if(1<tt){Be=Array(tt);for(var at=0;at<tt;at++)Be[at]=arguments[at+2];Re.children=Be}return{$$typeof:r,type:D.type,key:Ne,ref:ze,props:Re,_owner:qe}},He.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:l,_context:D},D.Consumer=D},He.createElement=C,He.createFactory=function(D){var J=C.bind(null,D);return J.type=D,J},He.createRef=function(){return{current:null}},He.forwardRef=function(D){return{$$typeof:p,render:D}},He.isValidElement=P,He.lazy=function(D){return{$$typeof:w,_payload:{_status:-1,_result:D},_init:Ue}},He.memo=function(D,J){return{$$typeof:v,type:D,compare:J===void 0?null:J}},He.startTransition=function(D){var J=j.transition;j.transition={};try{D()}finally{j.transition=J}},He.unstable_act=oe,He.useCallback=function(D,J){return W.current.useCallback(D,J)},He.useContext=function(D){return W.current.useContext(D)},He.useDebugValue=function(){},He.useDeferredValue=function(D){return W.current.useDeferredValue(D)},He.useEffect=function(D,J){return W.current.useEffect(D,J)},He.useId=function(){return W.current.useId()},He.useImperativeHandle=function(D,J,ye){return W.current.useImperativeHandle(D,J,ye)},He.useInsertionEffect=function(D,J){return W.current.useInsertionEffect(D,J)},He.useLayoutEffect=function(D,J){return W.current.useLayoutEffect(D,J)},He.useMemo=function(D,J){return W.current.useMemo(D,J)},He.useReducer=function(D,J,ye){return W.current.useReducer(D,J,ye)},He.useRef=function(D){return W.current.useRef(D)},He.useState=function(D){return W.current.useState(D)},He.useSyncExternalStore=function(D,J,ye){return W.current.useSyncExternalStore(D,J,ye)},He.useTransition=function(){return W.current.useTransition()},He.version="18.3.1",He}var jg;function Cf(){return jg||(jg=1,Ah.exports=xx()),Ah.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function Ex(){if(Dg)return Qa;Dg=1;var r=Cf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,v){var w,T={},I=null,z=null;v!==void 0&&(I=""+v),m.key!==void 0&&(I=""+m.key),m.ref!==void 0&&(z=m.ref);for(w in m)i.call(m,w)&&!l.hasOwnProperty(w)&&(T[w]=m[w]);if(p&&p.defaultProps)for(w in m=p.defaultProps,m)T[w]===void 0&&(T[w]=m[w]);return{$$typeof:e,type:p,key:I,ref:z,props:T,_owner:o.current}}return Qa.Fragment=t,Qa.jsx=h,Qa.jsxs=h,Qa}var Lg;function Tx(){return Lg||(Lg=1,kh.exports=Ex()),kh.exports}var c=Tx(),F=Cf();const bv=Pv(F),Sx=wx({__proto__:null,default:bv},[F]);var qu={},Nh={exports:{}},Nn={},jh={exports:{}},Dh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function Ix(){return Vg||(Vg=1,(function(r){function e(j,se){var oe=j.length;j.push(se);e:for(;0<oe;){var D=oe-1>>>1,J=j[D];if(0<o(J,se))j[D]=se,j[oe]=J,oe=D;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var se=j[0],oe=j.pop();if(oe!==se){j[0]=oe;e:for(var D=0,J=j.length,ye=J>>>1;D<ye;){var Re=2*(D+1)-1,Ne=j[Re],ze=Re+1,qe=j[ze];if(0>o(Ne,oe))ze<J&&0>o(qe,Ne)?(j[D]=qe,j[ze]=oe,D=ze):(j[D]=Ne,j[Re]=oe,D=Re);else if(ze<J&&0>o(qe,oe))j[D]=qe,j[ze]=oe,D=ze;else break e}}return se}function o(j,se){var oe=j.sortIndex-se.sortIndex;return oe!==0?oe:j.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var m=[],v=[],w=1,T=null,I=3,z=!1,K=!1,Z=!1,U=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function de(j){for(var se=t(v);se!==null;){if(se.callback===null)i(v);else if(se.startTime<=j)i(v),se.sortIndex=se.expirationTime,e(m,se);else break;se=t(v)}}function me(j){if(Z=!1,de(j),!K)if(t(m)!==null)K=!0,Ue(ie);else{var se=t(v);se!==null&&W(me,se.startTime-j)}}function ie(j,se){K=!1,Z&&(Z=!1,ce(C),C=-1),z=!0;var oe=I;try{for(de(se),T=t(m);T!==null&&(!(T.expirationTime>se)||j&&!V());){var D=T.callback;if(typeof D=="function"){T.callback=null,I=T.priorityLevel;var J=D(T.expirationTime<=se);se=r.unstable_now(),typeof J=="function"?T.callback=J:T===t(m)&&i(m),de(se)}else i(m);T=t(m)}if(T!==null)var ye=!0;else{var Re=t(v);Re!==null&&W(me,Re.startTime-se),ye=!1}return ye}finally{T=null,I=oe,z=!1}}var ee=!1,N=null,C=-1,b=5,P=-1;function V(){return!(r.unstable_now()-P<b)}function A(){if(N!==null){var j=r.unstable_now();P=j;var se=!0;try{se=N(!0,j)}finally{se?R():(ee=!1,N=null)}}else ee=!1}var R;if(typeof ne=="function")R=function(){ne(A)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Ye=Oe.port2;Oe.port1.onmessage=A,R=function(){Ye.postMessage(null)}}else R=function(){U(A,0)};function Ue(j){N=j,ee||(ee=!0,R())}function W(j,se){C=U(function(){j(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_continueExecution=function(){K||z||(K=!0,Ue(ie))},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(j){switch(I){case 1:case 2:case 3:var se=3;break;default:se=I}var oe=I;I=se;try{return j()}finally{I=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(j,se){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var oe=I;I=j;try{return se()}finally{I=oe}},r.unstable_scheduleCallback=function(j,se,oe){var D=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?D+oe:D):oe=D,j){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=oe+J,j={id:w++,callback:se,priorityLevel:j,startTime:oe,expirationTime:J,sortIndex:-1},oe>D?(j.sortIndex=oe,e(v,j),t(m)===null&&j===t(v)&&(Z?(ce(C),C=-1):Z=!0,W(me,oe-D))):(j.sortIndex=J,e(m,j),K||z||(K=!0,Ue(ie))),j},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(j){var se=I;return function(){var oe=I;I=se;try{return j.apply(this,arguments)}finally{I=oe}}}})(Dh)),Dh}var Og;function Cx(){return Og||(Og=1,jh.exports=Ix()),jh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function Rx(){if(Mg)return Nn;Mg=1;var r=Cf(),e=Cx();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function I(n){return m.call(T,n)?!0:m.call(w,n)?!1:v.test(n)?T[n]=!0:(w[n]=!0,!1)}function z(n,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function K(n,s,a,d){if(s===null||typeof s>"u"||z(n,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Z(n,s,a,d,f,y,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=x}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new Z(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];U[s]=new Z(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new Z(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new Z(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new Z(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new Z(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new Z(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new Z(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new Z(n,5,!1,n.toLowerCase(),null,!1,!1)});var ce=/[\-:]([a-z])/g;function ne(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(ce,ne);U[s]=new Z(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(ce,ne);U[s]=new Z(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(ce,ne);U[s]=new Z(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new Z(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new Z(n,1,!1,n.toLowerCase(),null,!0,!0)});function de(n,s,a,d){var f=U.hasOwnProperty(s)?U[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(K(s,a,f,d)&&(a=null),d||f===null?I(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?n.setAttributeNS(d,s,a):n.setAttribute(s,a))))}var me=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),ee=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),V=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),Ye=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),j=Symbol.iterator;function se(n){return n===null||typeof n!="object"?null:(n=j&&n[j]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,D;function J(n){if(D===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);D=s&&s[1]||""}return`
`+D+n}var ye=!1;function Re(n,s){if(!n||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Y){var d=Y}Reflect.construct(n,[],s)}else{try{s.call()}catch(Y){d=Y}n.call(s.prototype)}else{try{throw Error()}catch(Y){d=Y}n()}}catch(Y){if(Y&&d&&typeof Y.stack=="string"){for(var f=Y.stack.split(`
`),y=d.stack.split(`
`),x=f.length-1,k=y.length-1;1<=x&&0<=k&&f[x]!==y[k];)k--;for(;1<=x&&0<=k;x--,k--)if(f[x]!==y[k]){if(x!==1||k!==1)do if(x--,k--,0>k||f[x]!==y[k]){var L=`
`+f[x].replace(" at new "," at ");return n.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",n.displayName)),L}while(1<=x&&0<=k);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?J(n):""}function Ne(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function ze(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case ee:return"Portal";case b:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case Oe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case A:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ye:return s=n.displayName||null,s!==null?s:ze(n.type)||"Memo";case Ue:s=n._payload,n=n._init;try{return ze(n(s))}catch{}}return null}function qe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function tt(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function at(n){var s=tt(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),d=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(x){d=""+x,y.call(this,x)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function sn(n){n._valueTracker||(n._valueTracker=at(n))}function Qt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return n&&(d=tt(n)?n.checked?"true":"false":n.value),n=d,n!==a?(s.setValue(n),!0):!1}function Gn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function lr(n,s){var a=s.checked;return oe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function nt(n,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=Be(s.value!=null?s.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function zt(n,s){s=s.checked,s!=null&&de(n,"checked",s,!1)}function yn(n,s){zt(n,s);var a=Be(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?kr(n,s.type,a):s.hasOwnProperty("defaultValue")&&kr(n,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ur(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function kr(n,s,a){(s!=="number"||Gn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Pt=Array.isArray;function _t(n,s,a,d){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&d&&(n[a].defaultSelected=!0)}else{for(a=""+Be(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,d&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function on(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Kn(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Pt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Be(a)}}function cr(n,s){var a=Be(s.value),d=Be(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function dr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ht(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ht(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var bt,Xr=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,d,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(bt=bt||document.createElement("div"),bt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=bt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Ln(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sn=["Webkit","ms","Moz","O"];Object.keys(Qn).forEach(function(n){Sn.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Qn[s]=Qn[n]})});function Ar(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Qn.hasOwnProperty(n)&&Qn[n]?(""+s).trim():s+"px"}function vn(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=Ar(a,s[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,f):n[a]=f}}var Nr=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zr(n,s){if(s){if(Nr[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ei(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=null;function Q(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ue=null,E=null,B=null;function te(n){if(n=Da(n)){if(typeof ue!="function")throw Error(t(280));var s=n.stateNode;s&&(s=au(s),ue(n.stateNode,n.type,s))}}function O(n){E?B?B.push(n):B=[n]:E=n}function G(){if(E){var n=E,s=B;if(B=E=null,te(n),s)for(n=0;n<s.length;n++)te(s[n])}}function we(n,s){return n(s)}function We(){}var ot=!1;function ve(n,s,a){if(ot)return n(s,a);ot=!0;try{return we(n,s,a)}finally{ot=!1,(E!==null||B!==null)&&(We(),G())}}function Pe(n,s){var a=n.stateNode;if(a===null)return null;var d=au(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Lt=!1;if(p)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{Lt=!1}function ln(n,s,a,d,f,y,x,k,L){var Y=Array.prototype.slice.call(arguments,3);try{s.apply(a,Y)}catch(he){this.onError(he)}}var hr=!1,fr=null,_n=!1,ti=null,pr={onError:function(n){hr=!0,fr=n}};function jr(n,s,a,d,f,y,x,k,L){hr=!1,fr=null,ln.apply(pr,arguments)}function so(n,s,a,d,f,y,x,k,L){if(jr.apply(this,arguments),hr){if(hr){var Y=fr;hr=!1,fr=null}else throw Error(t(198));_n||(_n=!0,ti=Y)}}function Vn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ut(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function $t(n){if(Vn(n)!==n)throw Error(t(188))}function jl(n){var s=n.alternate;if(!s){if(s=Vn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,d=s;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return $t(f),n;if(y===d)return $t(f),s;y=y.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=y;else{for(var x=!1,k=f.child;k;){if(k===a){x=!0,a=f,d=y;break}if(k===d){x=!0,d=f,a=y;break}k=k.sibling}if(!x){for(k=y.child;k;){if(k===a){x=!0,a=y,d=f;break}if(k===d){x=!0,d=y,a=f;break}k=k.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function ma(n){return n=jl(n),n!==null?oo(n):null}function oo(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=oo(n);if(s!==null)return s;n=n.sibling}return null}var ao=e.unstable_scheduleCallback,ga=e.unstable_cancelCallback,Dl=e.unstable_shouldYield,sd=e.unstable_requestPaint,ct=e.unstable_now,Ll=e.unstable_getCurrentPriorityLevel,Ss=e.unstable_ImmediatePriority,Ci=e.unstable_UserBlockingPriority,Yn=e.unstable_NormalPriority,ya=e.unstable_LowPriority,Vl=e.unstable_IdlePriority,Is=null,On=null;function Ol(n){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Is,n,void 0,(n.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:Fl,va=Math.log,Ml=Math.LN2;function Fl(n){return n>>>=0,n===0?32:31-(va(n)/Ml|0)|0}var lo=64,uo=4194304;function Ri(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Cs(n,s){var a=n.pendingLanes;if(a===0)return 0;var d=0,f=n.suspendedLanes,y=n.pingedLanes,x=a&268435455;if(x!==0){var k=x&~f;k!==0?d=Ri(k):(y&=x,y!==0&&(d=Ri(y)))}else x=a&~f,x!==0?d=Ri(x):y!==0&&(d=Ri(y));if(d===0)return 0;if(s!==0&&s!==d&&(s&f)===0&&(f=d&-d,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if((d&4)!==0&&(d|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=d;0<s;)a=31-wn(s),f=1<<a,d|=n[a],s&=~f;return d}function od(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ni(n,s){for(var a=n.suspendedLanes,d=n.pingedLanes,f=n.expirationTimes,y=n.pendingLanes;0<y;){var x=31-wn(y),k=1<<x,L=f[x];L===-1?((k&a)===0||(k&d)!==0)&&(f[x]=od(k,s)):L<=s&&(n.expiredLanes|=k),y&=~k}}function Mn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Rs(){var n=lo;return lo<<=1,(lo&4194240)===0&&(lo=64),n}function Pi(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function bi(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-wn(s),n[s]=a}function lt(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-wn(a),y=1<<f;s[f]=0,d[f]=-1,n[f]=-1,a&=~y}}function ki(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var d=31-wn(a),f=1<<d;f&s|n[d]&s&&(n[d]|=s),a&=~f}}var Qe=0;function Ai(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ul,co,zl,Bl,$l,_a=!1,Dr=[],Yt=null,mr=null,gr=null,Ni=new Map,Jn=new Map,Lr=[],ad="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wl(n,s){switch(n){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Ni.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jn.delete(s.pointerId)}}function In(n,s,a,d,f,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:y,targetContainers:[f]},s!==null&&(s=Da(s),s!==null&&co(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function ld(n,s,a,d,f){switch(s){case"focusin":return Yt=In(Yt,n,s,a,d,f),!0;case"dragenter":return mr=In(mr,n,s,a,d,f),!0;case"mouseover":return gr=In(gr,n,s,a,d,f),!0;case"pointerover":var y=f.pointerId;return Ni.set(y,In(Ni.get(y)||null,n,s,a,d,f)),!0;case"gotpointercapture":return y=f.pointerId,Jn.set(y,In(Jn.get(y)||null,n,s,a,d,f)),!0}return!1}function Hl(n){var s=Ns(n.target);if(s!==null){var a=Vn(s);if(a!==null){if(s=a.tag,s===13){if(s=ut(a),s!==null){n.blockedOn=s,$l(n.priority,function(){zl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ri(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=ho(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);an=d,a.target.dispatchEvent(d),an=null}else return s=Da(a),s!==null&&co(s),n.blockedOn=a,!1;s.shift()}return!0}function Ps(n,s,a){ri(n)&&a.delete(s)}function ql(){_a=!1,Yt!==null&&ri(Yt)&&(Yt=null),mr!==null&&ri(mr)&&(mr=null),gr!==null&&ri(gr)&&(gr=null),Ni.forEach(Ps),Jn.forEach(Ps)}function yr(n,s){n.blockedOn===s&&(n.blockedOn=null,_a||(_a=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ql)))}function vr(n){function s(f){return yr(f,n)}if(0<Dr.length){yr(Dr[0],n);for(var a=1;a<Dr.length;a++){var d=Dr[a];d.blockedOn===n&&(d.blockedOn=null)}}for(Yt!==null&&yr(Yt,n),mr!==null&&yr(mr,n),gr!==null&&yr(gr,n),Ni.forEach(s),Jn.forEach(s),a=0;a<Lr.length;a++)d=Lr[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<Lr.length&&(a=Lr[0],a.blockedOn===null);)Hl(a),a.blockedOn===null&&Lr.shift()}var ii=me.ReactCurrentBatchConfig,ji=!0;function yt(n,s,a,d){var f=Qe,y=ii.transition;ii.transition=null;try{Qe=1,wa(n,s,a,d)}finally{Qe=f,ii.transition=y}}function ud(n,s,a,d){var f=Qe,y=ii.transition;ii.transition=null;try{Qe=4,wa(n,s,a,d)}finally{Qe=f,ii.transition=y}}function wa(n,s,a,d){if(ji){var f=ho(n,s,a,d);if(f===null)wd(n,s,d,bs,a),Wl(n,d);else if(ld(f,n,s,a,d))d.stopPropagation();else if(Wl(n,d),s&4&&-1<ad.indexOf(n)){for(;f!==null;){var y=Da(f);if(y!==null&&Ul(y),y=ho(n,s,a,d),y===null&&wd(n,s,d,bs,a),y===f)break;f=y}f!==null&&d.stopPropagation()}else wd(n,s,d,null,a)}}var bs=null;function ho(n,s,a,d){if(bs=null,n=Q(d),n=Ns(n),n!==null)if(s=Vn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ut(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return bs=n,null}function xa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ll()){case Ss:return 1;case Ci:return 4;case Yn:case ya:return 16;case Vl:return 536870912;default:return 16}default:return 16}}var Fn=null,fo=null,Cn=null;function Ea(){if(Cn)return Cn;var n,s=fo,a=s.length,d,f="value"in Fn?Fn.value:Fn.textContent,y=f.length;for(n=0;n<a&&s[n]===f[n];n++);var x=a-n;for(d=1;d<=x&&s[a-d]===f[y-d];d++);return Cn=f.slice(n,1<d?1-d:void 0)}function po(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Vr(){return!0}function Ta(){return!1}function Jt(n){function s(a,d,f,y,x){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Vr:Ta,this.isPropagationStopped=Ta,this}return oe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vr)},persist:function(){},isPersistent:Vr}),s}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=Jt(_r),Or=oe({},_r,{view:0,detail:0}),cd=Jt(Or),go,si,Di,ks=oe({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Di&&(Di&&n.type==="mousemove"?(go=n.screenX-Di.screenX,si=n.screenY-Di.screenY):si=go=0,Di=n),go)},movementY:function(n){return"movementY"in n?n.movementY:si}}),yo=Jt(ks),Sa=oe({},ks,{dataTransfer:0}),Gl=Jt(Sa),vo=oe({},Or,{relatedTarget:0}),_o=Jt(vo),Kl=oe({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),oi=Jt(Kl),Ql=oe({},_r,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Yl=Jt(Ql),Jl=oe({},_r,{data:0}),Ia=Jt(Jl),wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Xl[n])?!!s[n]:!1}function Mr(){return Zl}var u=oe({},Or,{key:function(n){if(n.key){var s=wo[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=po(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?xn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(n){return n.type==="keypress"?po(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?po(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),g=Jt(u),_=oe({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Jt(_),$=oe({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),X=Jt($),ge=oe({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),st=Jt(ge),Vt=oe({},ks,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Je=Jt(Vt),Wt=[9,13,27,32],kt=p&&"CompositionEvent"in window,Xn=null;p&&"documentMode"in document&&(Xn=document.documentMode);var Un=p&&"TextEvent"in window&&!Xn,As=p&&(!kt||Xn&&8<Xn&&11>=Xn),xo=" ",Cp=!1;function Rp(n,s){switch(n){case"keyup":return Wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Eo=!1;function yw(n,s){switch(n){case"compositionend":return Pp(s);case"keypress":return s.which!==32?null:(Cp=!0,xo);case"textInput":return n=s.data,n===xo&&Cp?null:n;default:return null}}function vw(n,s){if(Eo)return n==="compositionend"||!kt&&Rp(n,s)?(n=Ea(),Cn=fo=Fn=null,Eo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return As&&s.locale!=="ko"?null:s.data;default:return null}}var _w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!_w[n.type]:s==="textarea"}function kp(n,s,a,d){O(d),s=iu(s,"onChange"),0<s.length&&(a=new mo("onChange","change",null,a,d),n.push({event:a,listeners:s}))}var Ca=null,Ra=null;function ww(n){Kp(n,0)}function eu(n){var s=Ro(n);if(Qt(s))return n}function xw(n,s){if(n==="change")return s}var Ap=!1;if(p){var dd;if(p){var hd="oninput"in document;if(!hd){var Np=document.createElement("div");Np.setAttribute("oninput","return;"),hd=typeof Np.oninput=="function"}dd=hd}else dd=!1;Ap=dd&&(!document.documentMode||9<document.documentMode)}function jp(){Ca&&(Ca.detachEvent("onpropertychange",Dp),Ra=Ca=null)}function Dp(n){if(n.propertyName==="value"&&eu(Ra)){var s=[];kp(s,Ra,n,Q(n)),ve(ww,s)}}function Ew(n,s,a){n==="focusin"?(jp(),Ca=s,Ra=a,Ca.attachEvent("onpropertychange",Dp)):n==="focusout"&&jp()}function Tw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return eu(Ra)}function Sw(n,s){if(n==="click")return eu(s)}function Iw(n,s){if(n==="input"||n==="change")return eu(s)}function Cw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var wr=typeof Object.is=="function"?Object.is:Cw;function Pa(n,s){if(wr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!m.call(s,f)||!wr(n[f],s[f]))return!1}return!0}function Lp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Vp(n,s){var a=Lp(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=s&&d>=s)return{node:a,offset:s-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lp(a)}}function Op(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Op(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Mp(){for(var n=window,s=Gn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Gn(n.document)}return s}function fd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Rw(n){var s=Mp(),a=n.focusedElem,d=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Op(a.ownerDocument.documentElement,a)){if(d!==null&&fd(a)){if(s=d.start,n=d.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,y=Math.min(d.start,f);d=d.end===void 0?y:Math.min(d.end,f),!n.extend&&y>d&&(f=d,d=y,y=f),f=Vp(a,y);var x=Vp(a,d);f&&x&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),y>d?(n.addRange(s),n.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Pw=p&&"documentMode"in document&&11>=document.documentMode,To=null,pd=null,ba=null,md=!1;function Fp(n,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;md||To==null||To!==Gn(d)||(d=To,"selectionStart"in d&&fd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ba&&Pa(ba,d)||(ba=d,d=iu(pd,"onSelect"),0<d.length&&(s=new mo("onSelect","select",null,s,a),n.push({event:s,listeners:d}),s.target=To)))}function tu(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var So={animationend:tu("Animation","AnimationEnd"),animationiteration:tu("Animation","AnimationIteration"),animationstart:tu("Animation","AnimationStart"),transitionend:tu("Transition","TransitionEnd")},gd={},Up={};p&&(Up=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function nu(n){if(gd[n])return gd[n];if(!So[n])return n;var s=So[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Up)return gd[n]=s[a];return n}var zp=nu("animationend"),Bp=nu("animationiteration"),$p=nu("animationstart"),Wp=nu("transitionend"),Hp=new Map,qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(n,s){Hp.set(n,s),l(s,[n])}for(var yd=0;yd<qp.length;yd++){var vd=qp[yd],bw=vd.toLowerCase(),kw=vd[0].toUpperCase()+vd.slice(1);Li(bw,"on"+kw)}Li(zp,"onAnimationEnd"),Li(Bp,"onAnimationIteration"),Li($p,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(Wp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function Gp(n,s,a){var d=n.type||"unknown-event";n.currentTarget=a,so(d,s,void 0,n),n.currentTarget=null}function Kp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],f=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var x=d.length-1;0<=x;x--){var k=d[x],L=k.instance,Y=k.currentTarget;if(k=k.listener,L!==y&&f.isPropagationStopped())break e;Gp(f,k,Y),y=L}else for(x=0;x<d.length;x++){if(k=d[x],L=k.instance,Y=k.currentTarget,k=k.listener,L!==y&&f.isPropagationStopped())break e;Gp(f,k,Y),y=L}}}if(_n)throw n=ti,_n=!1,ti=null,n}function ft(n,s){var a=s[Cd];a===void 0&&(a=s[Cd]=new Set);var d=n+"__bubble";a.has(d)||(Qp(s,n,2,!1),a.add(d))}function _d(n,s,a){var d=0;s&&(d|=4),Qp(a,n,d,s)}var ru="_reactListening"+Math.random().toString(36).slice(2);function Aa(n){if(!n[ru]){n[ru]=!0,i.forEach(function(a){a!=="selectionchange"&&(Aw.has(a)||_d(a,!1,n),_d(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ru]||(s[ru]=!0,_d("selectionchange",!1,s))}}function Qp(n,s,a,d){switch(xa(s)){case 1:var f=yt;break;case 4:f=ud;break;default:f=wa}a=f.bind(null,s,a,n),f=void 0,!Lt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function wd(n,s,a,d,f){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var k=d.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(x===4)for(x=d.return;x!==null;){var L=x.tag;if((L===3||L===4)&&(L=x.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;x=x.return}for(;k!==null;){if(x=Ns(k),x===null)return;if(L=x.tag,L===5||L===6){d=y=x;continue e}k=k.parentNode}}d=d.return}ve(function(){var Y=y,he=Q(a),fe=[];e:{var le=Hp.get(n);if(le!==void 0){var _e=mo,Te=n;switch(n){case"keypress":if(po(a)===0)break e;case"keydown":case"keyup":_e=g;break;case"focusin":Te="focus",_e=_o;break;case"focusout":Te="blur",_e=_o;break;case"beforeblur":case"afterblur":_e=_o;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Gl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=X;break;case zp:case Bp:case $p:_e=oi;break;case Wp:_e=st;break;case"scroll":_e=cd;break;case"wheel":_e=Je;break;case"copy":case"cut":case"paste":_e=Yl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=S}var Se=(s&4)!==0,It=!Se&&n==="scroll",H=Se?le!==null?le+"Capture":null:le;Se=[];for(var M=Y,q;M!==null;){q=M;var pe=q.stateNode;if(q.tag===5&&pe!==null&&(q=pe,H!==null&&(pe=Pe(M,H),pe!=null&&Se.push(Na(M,pe,q)))),It)break;M=M.return}0<Se.length&&(le=new _e(le,Te,null,a,he),fe.push({event:le,listeners:Se}))}}if((s&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",_e=n==="mouseout"||n==="pointerout",le&&a!==an&&(Te=a.relatedTarget||a.fromElement)&&(Ns(Te)||Te[ai]))break e;if((_e||le)&&(le=he.window===he?he:(le=he.ownerDocument)?le.defaultView||le.parentWindow:window,_e?(Te=a.relatedTarget||a.toElement,_e=Y,Te=Te?Ns(Te):null,Te!==null&&(It=Vn(Te),Te!==It||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(_e=null,Te=Y),_e!==Te)){if(Se=yo,pe="onMouseLeave",H="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Se=S,pe="onPointerLeave",H="onPointerEnter",M="pointer"),It=_e==null?le:Ro(_e),q=Te==null?le:Ro(Te),le=new Se(pe,M+"leave",_e,a,he),le.target=It,le.relatedTarget=q,pe=null,Ns(he)===Y&&(Se=new Se(H,M+"enter",Te,a,he),Se.target=q,Se.relatedTarget=It,pe=Se),It=pe,_e&&Te)t:{for(Se=_e,H=Te,M=0,q=Se;q;q=Io(q))M++;for(q=0,pe=H;pe;pe=Io(pe))q++;for(;0<M-q;)Se=Io(Se),M--;for(;0<q-M;)H=Io(H),q--;for(;M--;){if(Se===H||H!==null&&Se===H.alternate)break t;Se=Io(Se),H=Io(H)}Se=null}else Se=null;_e!==null&&Yp(fe,le,_e,Se,!1),Te!==null&&It!==null&&Yp(fe,It,Te,Se,!0)}}e:{if(le=Y?Ro(Y):window,_e=le.nodeName&&le.nodeName.toLowerCase(),_e==="select"||_e==="input"&&le.type==="file")var Ce=xw;else if(bp(le))if(Ap)Ce=Iw;else{Ce=Tw;var ke=Ew}else(_e=le.nodeName)&&_e.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(Ce=Sw);if(Ce&&(Ce=Ce(n,Y))){kp(fe,Ce,a,he);break e}ke&&ke(n,le,Y),n==="focusout"&&(ke=le._wrapperState)&&ke.controlled&&le.type==="number"&&kr(le,"number",le.value)}switch(ke=Y?Ro(Y):window,n){case"focusin":(bp(ke)||ke.contentEditable==="true")&&(To=ke,pd=Y,ba=null);break;case"focusout":ba=pd=To=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,Fp(fe,a,he);break;case"selectionchange":if(Pw)break;case"keydown":case"keyup":Fp(fe,a,he)}var Ae;if(kt)e:{switch(n){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Eo?Rp(n,a)&&(Ve="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(As&&a.locale!=="ko"&&(Eo||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Eo&&(Ae=Ea()):(Fn=he,fo="value"in Fn?Fn.value:Fn.textContent,Eo=!0)),ke=iu(Y,Ve),0<ke.length&&(Ve=new Ia(Ve,n,null,a,he),fe.push({event:Ve,listeners:ke}),Ae?Ve.data=Ae:(Ae=Pp(a),Ae!==null&&(Ve.data=Ae)))),(Ae=Un?yw(n,a):vw(n,a))&&(Y=iu(Y,"onBeforeInput"),0<Y.length&&(he=new Ia("onBeforeInput","beforeinput",null,a,he),fe.push({event:he,listeners:Y}),he.data=Ae))}Kp(fe,s)})}function Na(n,s,a){return{instance:n,listener:s,currentTarget:a}}function iu(n,s){for(var a=s+"Capture",d=[];n!==null;){var f=n,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=Pe(n,a),y!=null&&d.unshift(Na(n,y,f)),y=Pe(n,s),y!=null&&d.push(Na(n,y,f))),n=n.return}return d}function Io(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Yp(n,s,a,d,f){for(var y=s._reactName,x=[];a!==null&&a!==d;){var k=a,L=k.alternate,Y=k.stateNode;if(L!==null&&L===d)break;k.tag===5&&Y!==null&&(k=Y,f?(L=Pe(a,y),L!=null&&x.unshift(Na(a,L,k))):f||(L=Pe(a,y),L!=null&&x.push(Na(a,L,k)))),a=a.return}x.length!==0&&n.push({event:s,listeners:x})}var Nw=/\r\n?/g,jw=/\u0000|\uFFFD/g;function Jp(n){return(typeof n=="string"?n:""+n).replace(Nw,`
`).replace(jw,"")}function su(n,s,a){if(s=Jp(s),Jp(n)!==s&&a)throw Error(t(425))}function ou(){}var xd=null,Ed=null;function Td(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Sd=typeof setTimeout=="function"?setTimeout:void 0,Dw=typeof clearTimeout=="function"?clearTimeout:void 0,Xp=typeof Promise=="function"?Promise:void 0,Lw=typeof queueMicrotask=="function"?queueMicrotask:typeof Xp<"u"?function(n){return Xp.resolve(null).then(n).catch(Vw)}:Sd;function Vw(n){setTimeout(function(){throw n})}function Id(n,s){var a=s,d=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){n.removeChild(f),vr(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);vr(s)}function Vi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Zp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Co=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Co,ja="__reactProps$"+Co,ai="__reactContainer$"+Co,Cd="__reactEvents$"+Co,Ow="__reactListeners$"+Co,Mw="__reactHandles$"+Co;function Ns(n){var s=n[Fr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[ai]||a[Fr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Zp(n);n!==null;){if(a=n[Fr])return a;n=Zp(n)}return s}n=a,a=n.parentNode}return null}function Da(n){return n=n[Fr]||n[ai],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ro(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function au(n){return n[ja]||null}var Rd=[],Po=-1;function Oi(n){return{current:n}}function pt(n){0>Po||(n.current=Rd[Po],Rd[Po]=null,Po--)}function dt(n,s){Po++,Rd[Po]=n.current,n.current=s}var Mi={},un=Oi(Mi),Rn=Oi(!1),js=Mi;function bo(n,s){var a=n.type.contextTypes;if(!a)return Mi;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in a)f[y]=s[y];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Pn(n){return n=n.childContextTypes,n!=null}function lu(){pt(Rn),pt(un)}function em(n,s,a){if(un.current!==Mi)throw Error(t(168));dt(un,s),dt(Rn,a)}function tm(n,s,a){var d=n.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,qe(n)||"Unknown",f));return oe({},a,d)}function uu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Mi,js=un.current,dt(un,n),dt(Rn,Rn.current),!0}function nm(n,s,a){var d=n.stateNode;if(!d)throw Error(t(169));a?(n=tm(n,s,js),d.__reactInternalMemoizedMergedChildContext=n,pt(Rn),pt(un),dt(un,n)):pt(Rn),dt(Rn,a)}var li=null,cu=!1,Pd=!1;function rm(n){li===null?li=[n]:li.push(n)}function Fw(n){cu=!0,rm(n)}function Fi(){if(!Pd&&li!==null){Pd=!0;var n=0,s=Qe;try{var a=li;for(Qe=1;n<a.length;n++){var d=a[n];do d=d(!0);while(d!==null)}li=null,cu=!1}catch(f){throw li!==null&&(li=li.slice(n+1)),ao(Ss,Fi),f}finally{Qe=s,Pd=!1}}return null}var ko=[],Ao=0,du=null,hu=0,Zn=[],er=0,Ds=null,ui=1,ci="";function Ls(n,s){ko[Ao++]=hu,ko[Ao++]=du,du=n,hu=s}function im(n,s,a){Zn[er++]=ui,Zn[er++]=ci,Zn[er++]=Ds,Ds=n;var d=ui;n=ci;var f=32-wn(d)-1;d&=~(1<<f),a+=1;var y=32-wn(s)+f;if(30<y){var x=f-f%5;y=(d&(1<<x)-1).toString(32),d>>=x,f-=x,ui=1<<32-wn(s)+f|a<<f|d,ci=y+n}else ui=1<<y|a<<f|d,ci=n}function bd(n){n.return!==null&&(Ls(n,1),im(n,1,0))}function kd(n){for(;n===du;)du=ko[--Ao],ko[Ao]=null,hu=ko[--Ao],ko[Ao]=null;for(;n===Ds;)Ds=Zn[--er],Zn[er]=null,ci=Zn[--er],Zn[er]=null,ui=Zn[--er],Zn[er]=null}var zn=null,Bn=null,vt=!1,xr=null;function sm(n,s){var a=ir(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function om(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,zn=n,Bn=Vi(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,zn=n,Bn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ds!==null?{id:ui,overflow:ci}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=ir(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,zn=n,Bn=null,!0):!1;default:return!1}}function Ad(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Nd(n){if(vt){var s=Bn;if(s){var a=s;if(!om(n,s)){if(Ad(n))throw Error(t(418));s=Vi(a.nextSibling);var d=zn;s&&om(n,s)?sm(d,a):(n.flags=n.flags&-4097|2,vt=!1,zn=n)}}else{if(Ad(n))throw Error(t(418));n.flags=n.flags&-4097|2,vt=!1,zn=n}}}function am(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;zn=n}function fu(n){if(n!==zn)return!1;if(!vt)return am(n),vt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Td(n.type,n.memoizedProps)),s&&(s=Bn)){if(Ad(n))throw lm(),Error(t(418));for(;s;)sm(n,s),s=Vi(s.nextSibling)}if(am(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Bn=Vi(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Bn=null}}else Bn=zn?Vi(n.stateNode.nextSibling):null;return!0}function lm(){for(var n=Bn;n;)n=Vi(n.nextSibling)}function No(){Bn=zn=null,vt=!1}function jd(n){xr===null?xr=[n]:xr.push(n)}var Uw=me.ReactCurrentBatchConfig;function La(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,n));var f=d,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(x){var k=f.refs;x===null?delete k[y]:k[y]=x},s._stringRef=y,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function pu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function um(n){var s=n._init;return s(n._payload)}function cm(n){function s(H,M){if(n){var q=H.deletions;q===null?(H.deletions=[M],H.flags|=16):q.push(M)}}function a(H,M){if(!n)return null;for(;M!==null;)s(H,M),M=M.sibling;return null}function d(H,M){for(H=new Map;M!==null;)M.key!==null?H.set(M.key,M):H.set(M.index,M),M=M.sibling;return H}function f(H,M){return H=Gi(H,M),H.index=0,H.sibling=null,H}function y(H,M,q){return H.index=q,n?(q=H.alternate,q!==null?(q=q.index,q<M?(H.flags|=2,M):q):(H.flags|=2,M)):(H.flags|=1048576,M)}function x(H){return n&&H.alternate===null&&(H.flags|=2),H}function k(H,M,q,pe){return M===null||M.tag!==6?(M=Sh(q,H.mode,pe),M.return=H,M):(M=f(M,q),M.return=H,M)}function L(H,M,q,pe){var Ce=q.type;return Ce===N?he(H,M,q.props.children,pe,q.key):M!==null&&(M.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Ue&&um(Ce)===M.type)?(pe=f(M,q.props),pe.ref=La(H,M,q),pe.return=H,pe):(pe=Mu(q.type,q.key,q.props,null,H.mode,pe),pe.ref=La(H,M,q),pe.return=H,pe)}function Y(H,M,q,pe){return M===null||M.tag!==4||M.stateNode.containerInfo!==q.containerInfo||M.stateNode.implementation!==q.implementation?(M=Ih(q,H.mode,pe),M.return=H,M):(M=f(M,q.children||[]),M.return=H,M)}function he(H,M,q,pe,Ce){return M===null||M.tag!==7?(M=$s(q,H.mode,pe,Ce),M.return=H,M):(M=f(M,q),M.return=H,M)}function fe(H,M,q){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Sh(""+M,H.mode,q),M.return=H,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ie:return q=Mu(M.type,M.key,M.props,null,H.mode,q),q.ref=La(H,null,M),q.return=H,q;case ee:return M=Ih(M,H.mode,q),M.return=H,M;case Ue:var pe=M._init;return fe(H,pe(M._payload),q)}if(Pt(M)||se(M))return M=$s(M,H.mode,q,null),M.return=H,M;pu(H,M)}return null}function le(H,M,q,pe){var Ce=M!==null?M.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Ce!==null?null:k(H,M,""+q,pe);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case ie:return q.key===Ce?L(H,M,q,pe):null;case ee:return q.key===Ce?Y(H,M,q,pe):null;case Ue:return Ce=q._init,le(H,M,Ce(q._payload),pe)}if(Pt(q)||se(q))return Ce!==null?null:he(H,M,q,pe,null);pu(H,q)}return null}function _e(H,M,q,pe,Ce){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return H=H.get(q)||null,k(M,H,""+pe,Ce);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case ie:return H=H.get(pe.key===null?q:pe.key)||null,L(M,H,pe,Ce);case ee:return H=H.get(pe.key===null?q:pe.key)||null,Y(M,H,pe,Ce);case Ue:var ke=pe._init;return _e(H,M,q,ke(pe._payload),Ce)}if(Pt(pe)||se(pe))return H=H.get(q)||null,he(M,H,pe,Ce,null);pu(M,pe)}return null}function Te(H,M,q,pe){for(var Ce=null,ke=null,Ae=M,Ve=M=0,Gt=null;Ae!==null&&Ve<q.length;Ve++){Ae.index>Ve?(Gt=Ae,Ae=null):Gt=Ae.sibling;var rt=le(H,Ae,q[Ve],pe);if(rt===null){Ae===null&&(Ae=Gt);break}n&&Ae&&rt.alternate===null&&s(H,Ae),M=y(rt,M,Ve),ke===null?Ce=rt:ke.sibling=rt,ke=rt,Ae=Gt}if(Ve===q.length)return a(H,Ae),vt&&Ls(H,Ve),Ce;if(Ae===null){for(;Ve<q.length;Ve++)Ae=fe(H,q[Ve],pe),Ae!==null&&(M=y(Ae,M,Ve),ke===null?Ce=Ae:ke.sibling=Ae,ke=Ae);return vt&&Ls(H,Ve),Ce}for(Ae=d(H,Ae);Ve<q.length;Ve++)Gt=_e(Ae,H,Ve,q[Ve],pe),Gt!==null&&(n&&Gt.alternate!==null&&Ae.delete(Gt.key===null?Ve:Gt.key),M=y(Gt,M,Ve),ke===null?Ce=Gt:ke.sibling=Gt,ke=Gt);return n&&Ae.forEach(function(Ki){return s(H,Ki)}),vt&&Ls(H,Ve),Ce}function Se(H,M,q,pe){var Ce=se(q);if(typeof Ce!="function")throw Error(t(150));if(q=Ce.call(q),q==null)throw Error(t(151));for(var ke=Ce=null,Ae=M,Ve=M=0,Gt=null,rt=q.next();Ae!==null&&!rt.done;Ve++,rt=q.next()){Ae.index>Ve?(Gt=Ae,Ae=null):Gt=Ae.sibling;var Ki=le(H,Ae,rt.value,pe);if(Ki===null){Ae===null&&(Ae=Gt);break}n&&Ae&&Ki.alternate===null&&s(H,Ae),M=y(Ki,M,Ve),ke===null?Ce=Ki:ke.sibling=Ki,ke=Ki,Ae=Gt}if(rt.done)return a(H,Ae),vt&&Ls(H,Ve),Ce;if(Ae===null){for(;!rt.done;Ve++,rt=q.next())rt=fe(H,rt.value,pe),rt!==null&&(M=y(rt,M,Ve),ke===null?Ce=rt:ke.sibling=rt,ke=rt);return vt&&Ls(H,Ve),Ce}for(Ae=d(H,Ae);!rt.done;Ve++,rt=q.next())rt=_e(Ae,H,Ve,rt.value,pe),rt!==null&&(n&&rt.alternate!==null&&Ae.delete(rt.key===null?Ve:rt.key),M=y(rt,M,Ve),ke===null?Ce=rt:ke.sibling=rt,ke=rt);return n&&Ae.forEach(function(_x){return s(H,_x)}),vt&&Ls(H,Ve),Ce}function It(H,M,q,pe){if(typeof q=="object"&&q!==null&&q.type===N&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case ie:e:{for(var Ce=q.key,ke=M;ke!==null;){if(ke.key===Ce){if(Ce=q.type,Ce===N){if(ke.tag===7){a(H,ke.sibling),M=f(ke,q.props.children),M.return=H,H=M;break e}}else if(ke.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Ue&&um(Ce)===ke.type){a(H,ke.sibling),M=f(ke,q.props),M.ref=La(H,ke,q),M.return=H,H=M;break e}a(H,ke);break}else s(H,ke);ke=ke.sibling}q.type===N?(M=$s(q.props.children,H.mode,pe,q.key),M.return=H,H=M):(pe=Mu(q.type,q.key,q.props,null,H.mode,pe),pe.ref=La(H,M,q),pe.return=H,H=pe)}return x(H);case ee:e:{for(ke=q.key;M!==null;){if(M.key===ke)if(M.tag===4&&M.stateNode.containerInfo===q.containerInfo&&M.stateNode.implementation===q.implementation){a(H,M.sibling),M=f(M,q.children||[]),M.return=H,H=M;break e}else{a(H,M);break}else s(H,M);M=M.sibling}M=Ih(q,H.mode,pe),M.return=H,H=M}return x(H);case Ue:return ke=q._init,It(H,M,ke(q._payload),pe)}if(Pt(q))return Te(H,M,q,pe);if(se(q))return Se(H,M,q,pe);pu(H,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,M!==null&&M.tag===6?(a(H,M.sibling),M=f(M,q),M.return=H,H=M):(a(H,M),M=Sh(q,H.mode,pe),M.return=H,H=M),x(H)):a(H,M)}return It}var jo=cm(!0),dm=cm(!1),mu=Oi(null),gu=null,Do=null,Dd=null;function Ld(){Dd=Do=gu=null}function Vd(n){var s=mu.current;pt(mu),n._currentValue=s}function Od(n,s,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===a)break;n=n.return}}function Lo(n,s){gu=n,Dd=Do=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(bn=!0),n.firstContext=null)}function tr(n){var s=n._currentValue;if(Dd!==n)if(n={context:n,memoizedValue:s,next:null},Do===null){if(gu===null)throw Error(t(308));Do=n,gu.dependencies={lanes:0,firstContext:n}}else Do=Do.next=n;return s}var Vs=null;function Md(n){Vs===null?Vs=[n]:Vs.push(n)}function hm(n,s,a,d){var f=s.interleaved;return f===null?(a.next=a,Md(s)):(a.next=f.next,f.next=a),s.interleaved=a,di(n,d)}function di(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ui=!1;function Fd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function hi(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function zi(n,s,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(et&2)!==0){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,di(n,a)}return f=d.interleaved,f===null?(s.next=s,Md(d)):(s.next=f.next,f.next=s),d.interleaved=s,di(n,a)}function yu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=n.pendingLanes,a|=d,s.lanes=a,ki(n,a)}}function pm(n,s){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?f=y=x:y=y.next=x,a=a.next}while(a!==null);y===null?f=y=s:y=y.next=s}else f=y=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function vu(n,s,a,d){var f=n.updateQueue;Ui=!1;var y=f.firstBaseUpdate,x=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var L=k,Y=L.next;L.next=null,x===null?y=Y:x.next=Y,x=L;var he=n.alternate;he!==null&&(he=he.updateQueue,k=he.lastBaseUpdate,k!==x&&(k===null?he.firstBaseUpdate=Y:k.next=Y,he.lastBaseUpdate=L))}if(y!==null){var fe=f.baseState;x=0,he=Y=L=null,k=y;do{var le=k.lane,_e=k.eventTime;if((d&le)===le){he!==null&&(he=he.next={eventTime:_e,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var Te=n,Se=k;switch(le=s,_e=a,Se.tag){case 1:if(Te=Se.payload,typeof Te=="function"){fe=Te.call(_e,fe,le);break e}fe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Se.payload,le=typeof Te=="function"?Te.call(_e,fe,le):Te,le==null)break e;fe=oe({},fe,le);break e;case 2:Ui=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,le=f.effects,le===null?f.effects=[k]:le.push(k))}else _e={eventTime:_e,lane:le,tag:k.tag,payload:k.payload,callback:k.callback,next:null},he===null?(Y=he=_e,L=fe):he=he.next=_e,x|=le;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;le=k,k=le.next,le.next=null,f.lastBaseUpdate=le,f.shared.pending=null}}while(!0);if(he===null&&(L=fe),f.baseState=L,f.firstBaseUpdate=Y,f.lastBaseUpdate=he,s=f.shared.interleaved,s!==null){f=s;do x|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);Fs|=x,n.lanes=x,n.memoizedState=fe}}function mm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var d=n[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var Va={},Ur=Oi(Va),Oa=Oi(Va),Ma=Oi(Va);function Os(n){if(n===Va)throw Error(t(174));return n}function Ud(n,s){switch(dt(Ma,s),dt(Oa,n),dt(Ur,Va),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Le(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Le(s,n)}pt(Ur),dt(Ur,s)}function Vo(){pt(Ur),pt(Oa),pt(Ma)}function gm(n){Os(Ma.current);var s=Os(Ur.current),a=Le(s,n.type);s!==a&&(dt(Oa,n),dt(Ur,a))}function zd(n){Oa.current===n&&(pt(Ur),pt(Oa))}var wt=Oi(0);function _u(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Bd=[];function $d(){for(var n=0;n<Bd.length;n++)Bd[n]._workInProgressVersionPrimary=null;Bd.length=0}var wu=me.ReactCurrentDispatcher,Wd=me.ReactCurrentBatchConfig,Ms=0,xt=null,Ot=null,Ht=null,xu=!1,Fa=!1,Ua=0,zw=0;function cn(){throw Error(t(321))}function Hd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!wr(n[a],s[a]))return!1;return!0}function qd(n,s,a,d,f,y){if(Ms=y,xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,wu.current=n===null||n.memoizedState===null?Hw:qw,n=a(d,f),Fa){y=0;do{if(Fa=!1,Ua=0,25<=y)throw Error(t(301));y+=1,Ht=Ot=null,s.updateQueue=null,wu.current=Gw,n=a(d,f)}while(Fa)}if(wu.current=Su,s=Ot!==null&&Ot.next!==null,Ms=0,Ht=Ot=xt=null,xu=!1,s)throw Error(t(300));return n}function Gd(){var n=Ua!==0;return Ua=0,n}function zr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?xt.memoizedState=Ht=n:Ht=Ht.next=n,Ht}function nr(){if(Ot===null){var n=xt.alternate;n=n!==null?n.memoizedState:null}else n=Ot.next;var s=Ht===null?xt.memoizedState:Ht.next;if(s!==null)Ht=s,Ot=n;else{if(n===null)throw Error(t(310));Ot=n,n={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ht===null?xt.memoizedState=Ht=n:Ht=Ht.next=n}return Ht}function za(n,s){return typeof s=="function"?s(n):s}function Kd(n){var s=nr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=Ot,f=d.baseQueue,y=a.pending;if(y!==null){if(f!==null){var x=f.next;f.next=y.next,y.next=x}d.baseQueue=f=y,a.pending=null}if(f!==null){y=f.next,d=d.baseState;var k=x=null,L=null,Y=y;do{var he=Y.lane;if((Ms&he)===he)L!==null&&(L=L.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),d=Y.hasEagerState?Y.eagerState:n(d,Y.action);else{var fe={lane:he,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};L===null?(k=L=fe,x=d):L=L.next=fe,xt.lanes|=he,Fs|=he}Y=Y.next}while(Y!==null&&Y!==y);L===null?x=d:L.next=k,wr(d,s.memoizedState)||(bn=!0),s.memoizedState=d,s.baseState=x,s.baseQueue=L,a.lastRenderedState=d}if(n=a.interleaved,n!==null){f=n;do y=f.lane,xt.lanes|=y,Fs|=y,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Qd(n){var s=nr(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=a.dispatch,f=a.pending,y=s.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do y=n(y,x.action),x=x.next;while(x!==f);wr(y,s.memoizedState)||(bn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,d]}function ym(){}function vm(n,s){var a=xt,d=nr(),f=s(),y=!wr(d.memoizedState,f);if(y&&(d.memoizedState=f,bn=!0),d=d.queue,Yd(xm.bind(null,a,d,n),[n]),d.getSnapshot!==s||y||Ht!==null&&Ht.memoizedState.tag&1){if(a.flags|=2048,Ba(9,wm.bind(null,a,d,f,s),void 0,null),qt===null)throw Error(t(349));(Ms&30)!==0||_m(a,s,f)}return f}function _m(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=xt.updateQueue,s===null?(s={lastEffect:null,stores:null},xt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function wm(n,s,a,d){s.value=a,s.getSnapshot=d,Em(s)&&Tm(n)}function xm(n,s,a){return a(function(){Em(s)&&Tm(n)})}function Em(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!wr(n,a)}catch{return!0}}function Tm(n){var s=di(n,1);s!==null&&Ir(s,n,1,-1)}function Sm(n){var s=zr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:n},s.queue=n,n=n.dispatch=Ww.bind(null,xt,n),[s.memoizedState,n]}function Ba(n,s,a,d){return n={tag:n,create:s,destroy:a,deps:d,next:null},s=xt.updateQueue,s===null?(s={lastEffect:null,stores:null},xt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,s.lastEffect=n)),n}function Im(){return nr().memoizedState}function Eu(n,s,a,d){var f=zr();xt.flags|=n,f.memoizedState=Ba(1|s,a,void 0,d===void 0?null:d)}function Tu(n,s,a,d){var f=nr();d=d===void 0?null:d;var y=void 0;if(Ot!==null){var x=Ot.memoizedState;if(y=x.destroy,d!==null&&Hd(d,x.deps)){f.memoizedState=Ba(s,a,y,d);return}}xt.flags|=n,f.memoizedState=Ba(1|s,a,y,d)}function Cm(n,s){return Eu(8390656,8,n,s)}function Yd(n,s){return Tu(2048,8,n,s)}function Rm(n,s){return Tu(4,2,n,s)}function Pm(n,s){return Tu(4,4,n,s)}function bm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function km(n,s,a){return a=a!=null?a.concat([n]):null,Tu(4,4,bm.bind(null,s,n),a)}function Jd(){}function Am(n,s){var a=nr();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Hd(s,d[1])?d[0]:(a.memoizedState=[n,s],n)}function Nm(n,s){var a=nr();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Hd(s,d[1])?d[0]:(n=n(),a.memoizedState=[n,s],n)}function jm(n,s,a){return(Ms&21)===0?(n.baseState&&(n.baseState=!1,bn=!0),n.memoizedState=a):(wr(a,s)||(a=Rs(),xt.lanes|=a,Fs|=a,n.baseState=!0),s)}function Bw(n,s){var a=Qe;Qe=a!==0&&4>a?a:4,n(!0);var d=Wd.transition;Wd.transition={};try{n(!1),s()}finally{Qe=a,Wd.transition=d}}function Dm(){return nr().memoizedState}function $w(n,s,a){var d=Hi(n);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},Lm(n))Vm(s,a);else if(a=hm(n,s,a,d),a!==null){var f=Tn();Ir(a,n,d,f),Om(a,s,d)}}function Ww(n,s,a){var d=Hi(n),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lm(n))Vm(s,f);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var x=s.lastRenderedState,k=y(x,a);if(f.hasEagerState=!0,f.eagerState=k,wr(k,x)){var L=s.interleaved;L===null?(f.next=f,Md(s)):(f.next=L.next,L.next=f),s.interleaved=f;return}}catch{}finally{}a=hm(n,s,f,d),a!==null&&(f=Tn(),Ir(a,n,d,f),Om(a,s,d))}}function Lm(n){var s=n.alternate;return n===xt||s!==null&&s===xt}function Vm(n,s){Fa=xu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Om(n,s,a){if((a&4194240)!==0){var d=s.lanes;d&=n.pendingLanes,a|=d,s.lanes=a,ki(n,a)}}var Su={readContext:tr,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},Hw={readContext:tr,useCallback:function(n,s){return zr().memoizedState=[n,s===void 0?null:s],n},useContext:tr,useEffect:Cm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Eu(4194308,4,bm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Eu(4194308,4,n,s)},useInsertionEffect:function(n,s){return Eu(4,2,n,s)},useMemo:function(n,s){var a=zr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var d=zr();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},d.queue=n,n=n.dispatch=$w.bind(null,xt,n),[d.memoizedState,n]},useRef:function(n){var s=zr();return n={current:n},s.memoizedState=n},useState:Sm,useDebugValue:Jd,useDeferredValue:function(n){return zr().memoizedState=n},useTransition:function(){var n=Sm(!1),s=n[0];return n=Bw.bind(null,n[1]),zr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var d=xt,f=zr();if(vt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),qt===null)throw Error(t(349));(Ms&30)!==0||_m(d,s,a)}f.memoizedState=a;var y={value:a,getSnapshot:s};return f.queue=y,Cm(xm.bind(null,d,y,n),[n]),d.flags|=2048,Ba(9,wm.bind(null,d,y,a,s),void 0,null),a},useId:function(){var n=zr(),s=qt.identifierPrefix;if(vt){var a=ci,d=ui;a=(d&~(1<<32-wn(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ua++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=zw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},qw={readContext:tr,useCallback:Am,useContext:tr,useEffect:Yd,useImperativeHandle:km,useInsertionEffect:Rm,useLayoutEffect:Pm,useMemo:Nm,useReducer:Kd,useRef:Im,useState:function(){return Kd(za)},useDebugValue:Jd,useDeferredValue:function(n){var s=nr();return jm(s,Ot.memoizedState,n)},useTransition:function(){var n=Kd(za)[0],s=nr().memoizedState;return[n,s]},useMutableSource:ym,useSyncExternalStore:vm,useId:Dm,unstable_isNewReconciler:!1},Gw={readContext:tr,useCallback:Am,useContext:tr,useEffect:Yd,useImperativeHandle:km,useInsertionEffect:Rm,useLayoutEffect:Pm,useMemo:Nm,useReducer:Qd,useRef:Im,useState:function(){return Qd(za)},useDebugValue:Jd,useDeferredValue:function(n){var s=nr();return Ot===null?s.memoizedState=n:jm(s,Ot.memoizedState,n)},useTransition:function(){var n=Qd(za)[0],s=nr().memoizedState;return[n,s]},useMutableSource:ym,useSyncExternalStore:vm,useId:Dm,unstable_isNewReconciler:!1};function Er(n,s){if(n&&n.defaultProps){s=oe({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Xd(n,s,a,d){s=n.memoizedState,a=a(d,s),a=a==null?s:oe({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Iu={isMounted:function(n){return(n=n._reactInternals)?Vn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var d=Tn(),f=Hi(n),y=hi(d,f);y.payload=s,a!=null&&(y.callback=a),s=zi(n,y,f),s!==null&&(Ir(s,n,f,d),yu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var d=Tn(),f=Hi(n),y=hi(d,f);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=zi(n,y,f),s!==null&&(Ir(s,n,f,d),yu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Tn(),d=Hi(n),f=hi(a,d);f.tag=2,s!=null&&(f.callback=s),s=zi(n,f,d),s!==null&&(Ir(s,n,d,a),yu(s,n,d))}};function Mm(n,s,a,d,f,y,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,x):s.prototype&&s.prototype.isPureReactComponent?!Pa(a,d)||!Pa(f,y):!0}function Fm(n,s,a){var d=!1,f=Mi,y=s.contextType;return typeof y=="object"&&y!==null?y=tr(y):(f=Pn(s)?js:un.current,d=s.contextTypes,y=(d=d!=null)?bo(n,f):Mi),s=new s(a,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Iu,n.stateNode=s,s._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=y),s}function Um(n,s,a,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==n&&Iu.enqueueReplaceState(s,s.state,null)}function Zd(n,s,a,d){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Fd(n);var y=s.contextType;typeof y=="object"&&y!==null?f.context=tr(y):(y=Pn(s)?js:un.current,f.context=bo(n,y)),f.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Xd(n,s,y,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Iu.enqueueReplaceState(f,f.state,null),vu(n,a,f,d),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Oo(n,s){try{var a="",d=s;do a+=Ne(d),d=d.return;while(d);var f=a}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:f,digest:null}}function eh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function th(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Kw=typeof WeakMap=="function"?WeakMap:Map;function zm(n,s,a){a=hi(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){Nu||(Nu=!0,gh=d),th(n,s)},a}function Bm(n,s,a){a=hi(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){th(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){th(n,s),typeof d!="function"&&($i===null?$i=new Set([this]):$i.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),a}function $m(n,s,a){var d=n.pingCache;if(d===null){d=n.pingCache=new Kw;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),n=lx.bind(null,n,s,a),s.then(n,n))}function Wm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Hm(n,s,a,d,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=hi(-1,1),s.tag=2,zi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Qw=me.ReactCurrentOwner,bn=!1;function En(n,s,a,d){s.child=n===null?dm(s,null,a,d):jo(s,n.child,a,d)}function qm(n,s,a,d,f){a=a.render;var y=s.ref;return Lo(s,f),d=qd(n,s,a,d,y,f),a=Gd(),n!==null&&!bn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,fi(n,s,f)):(vt&&a&&bd(s),s.flags|=1,En(n,s,d,f),s.child)}function Gm(n,s,a,d,f){if(n===null){var y=a.type;return typeof y=="function"&&!Th(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,Km(n,s,y,d,f)):(n=Mu(a.type,null,d,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,(n.lanes&f)===0){var x=y.memoizedProps;if(a=a.compare,a=a!==null?a:Pa,a(x,d)&&n.ref===s.ref)return fi(n,s,f)}return s.flags|=1,n=Gi(y,d),n.ref=s.ref,n.return=s,s.child=n}function Km(n,s,a,d,f){if(n!==null){var y=n.memoizedProps;if(Pa(y,d)&&n.ref===s.ref)if(bn=!1,s.pendingProps=d=y,(n.lanes&f)!==0)(n.flags&131072)!==0&&(bn=!0);else return s.lanes=n.lanes,fi(n,s,f)}return nh(n,s,a,d,f)}function Qm(n,s,a){var d=s.pendingProps,f=d.children,y=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Fo,$n),$n|=a;else{if((a&1073741824)===0)return n=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,dt(Fo,$n),$n|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:a,dt(Fo,$n),$n|=d}else y!==null?(d=y.baseLanes|a,s.memoizedState=null):d=a,dt(Fo,$n),$n|=d;return En(n,s,f,a),s.child}function Ym(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function nh(n,s,a,d,f){var y=Pn(a)?js:un.current;return y=bo(s,y),Lo(s,f),a=qd(n,s,a,d,y,f),d=Gd(),n!==null&&!bn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,fi(n,s,f)):(vt&&d&&bd(s),s.flags|=1,En(n,s,a,f),s.child)}function Jm(n,s,a,d,f){if(Pn(a)){var y=!0;uu(s)}else y=!1;if(Lo(s,f),s.stateNode===null)Ru(n,s),Fm(s,a,d),Zd(s,a,d,f),d=!0;else if(n===null){var x=s.stateNode,k=s.memoizedProps;x.props=k;var L=x.context,Y=a.contextType;typeof Y=="object"&&Y!==null?Y=tr(Y):(Y=Pn(a)?js:un.current,Y=bo(s,Y));var he=a.getDerivedStateFromProps,fe=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function";fe||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==d||L!==Y)&&Um(s,x,d,Y),Ui=!1;var le=s.memoizedState;x.state=le,vu(s,d,x,f),L=s.memoizedState,k!==d||le!==L||Rn.current||Ui?(typeof he=="function"&&(Xd(s,a,he,d),L=s.memoizedState),(k=Ui||Mm(s,a,k,d,le,L,Y))?(fe||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=L),x.props=d,x.state=L,x.context=Y,d=k):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{x=s.stateNode,fm(n,s),k=s.memoizedProps,Y=s.type===s.elementType?k:Er(s.type,k),x.props=Y,fe=s.pendingProps,le=x.context,L=a.contextType,typeof L=="object"&&L!==null?L=tr(L):(L=Pn(a)?js:un.current,L=bo(s,L));var _e=a.getDerivedStateFromProps;(he=typeof _e=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==fe||le!==L)&&Um(s,x,d,L),Ui=!1,le=s.memoizedState,x.state=le,vu(s,d,x,f);var Te=s.memoizedState;k!==fe||le!==Te||Rn.current||Ui?(typeof _e=="function"&&(Xd(s,a,_e,d),Te=s.memoizedState),(Y=Ui||Mm(s,a,Y,d,le,Te,L)||!1)?(he||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,Te,L),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,Te,L)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||k===n.memoizedProps&&le===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&le===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Te),x.props=d,x.state=Te,x.context=L,d=Y):(typeof x.componentDidUpdate!="function"||k===n.memoizedProps&&le===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&le===n.memoizedState||(s.flags|=1024),d=!1)}return rh(n,s,a,d,y,f)}function rh(n,s,a,d,f,y){Ym(n,s);var x=(s.flags&128)!==0;if(!d&&!x)return f&&nm(s,a,!1),fi(n,s,y);d=s.stateNode,Qw.current=s;var k=x&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,n!==null&&x?(s.child=jo(s,n.child,null,y),s.child=jo(s,null,k,y)):En(n,s,k,y),s.memoizedState=d.state,f&&nm(s,a,!0),s.child}function Xm(n){var s=n.stateNode;s.pendingContext?em(n,s.pendingContext,s.pendingContext!==s.context):s.context&&em(n,s.context,!1),Ud(n,s.containerInfo)}function Zm(n,s,a,d,f){return No(),jd(f),s.flags|=256,En(n,s,a,d),s.child}var ih={dehydrated:null,treeContext:null,retryLane:0};function sh(n){return{baseLanes:n,cachePool:null,transitions:null}}function eg(n,s,a){var d=s.pendingProps,f=wt.current,y=!1,x=(s.flags&128)!==0,k;if((k=x)||(k=n!==null&&n.memoizedState===null?!1:(f&2)!==0),k?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),dt(wt,f&1),n===null)return Nd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(x=d.children,n=d.fallback,y?(d=s.mode,y=s.child,x={mode:"hidden",children:x},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=x):y=Fu(x,d,0,null),n=$s(n,d,a,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=sh(a),s.memoizedState=ih,n):oh(s,x));if(f=n.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return Yw(n,s,x,d,k,f,a);if(y){y=d.fallback,x=s.mode,f=n.child,k=f.sibling;var L={mode:"hidden",children:d.children};return(x&1)===0&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=L,s.deletions=null):(d=Gi(f,L),d.subtreeFlags=f.subtreeFlags&14680064),k!==null?y=Gi(k,y):(y=$s(y,x,a,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,x=n.child.memoizedState,x=x===null?sh(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=n.childLanes&~a,s.memoizedState=ih,d}return y=n.child,n=y.sibling,d=Gi(y,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=a),d.return=s,d.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=d,s.memoizedState=null,d}function oh(n,s){return s=Fu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Cu(n,s,a,d){return d!==null&&jd(d),jo(s,n.child,null,a),n=oh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Yw(n,s,a,d,f,y,x){if(a)return s.flags&256?(s.flags&=-257,d=eh(Error(t(422))),Cu(n,s,x,d)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=d.fallback,f=s.mode,d=Fu({mode:"visible",children:d.children},f,0,null),y=$s(y,f,x,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,(s.mode&1)!==0&&jo(s,n.child,null,x),s.child.memoizedState=sh(x),s.memoizedState=ih,y);if((s.mode&1)===0)return Cu(n,s,x,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var k=d.dgst;return d=k,y=Error(t(419)),d=eh(y,d,void 0),Cu(n,s,x,d)}if(k=(x&n.childLanes)!==0,bn||k){if(d=qt,d!==null){switch(x&-x){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|x))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,di(n,f),Ir(d,n,f,-1))}return Eh(),d=eh(Error(t(421))),Cu(n,s,x,d)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=ux.bind(null,n),f._reactRetry=s,null):(n=y.treeContext,Bn=Vi(f.nextSibling),zn=s,vt=!0,xr=null,n!==null&&(Zn[er++]=ui,Zn[er++]=ci,Zn[er++]=Ds,ui=n.id,ci=n.overflow,Ds=s),s=oh(s,d.children),s.flags|=4096,s)}function tg(n,s,a){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),Od(n.return,s,a)}function ah(n,s,a,d,f){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=a,y.tailMode=f)}function ng(n,s,a){var d=s.pendingProps,f=d.revealOrder,y=d.tail;if(En(n,s,d.children,a),d=wt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tg(n,a,s);else if(n.tag===19)tg(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(dt(wt,d),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&_u(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),ah(s,!1,f,a,y);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&_u(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}ah(s,!0,a,null,y);break;case"together":ah(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ru(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function fi(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Fs|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Gi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Gi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Jw(n,s,a){switch(s.tag){case 3:Xm(s),No();break;case 5:gm(s);break;case 1:Pn(s.type)&&uu(s);break;case 4:Ud(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;dt(mu,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(dt(wt,wt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?eg(n,s,a):(dt(wt,wt.current&1),n=fi(n,s,a),n!==null?n.sibling:null);dt(wt,wt.current&1);break;case 19:if(d=(a&s.childLanes)!==0,(n.flags&128)!==0){if(d)return ng(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),dt(wt,wt.current),d)break;return null;case 22:case 23:return s.lanes=0,Qm(n,s,a)}return fi(n,s,a)}var rg,lh,ig,sg;rg=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},lh=function(){},ig=function(n,s,a,d){var f=n.memoizedProps;if(f!==d){n=s.stateNode,Os(Ur.current);var y=null;switch(a){case"input":f=lr(n,f),d=lr(n,d),y=[];break;case"select":f=oe({},f,{value:void 0}),d=oe({},d,{value:void 0}),y=[];break;case"textarea":f=on(n,f),d=on(n,d),y=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=ou)}Zr(a,d);var x;a=null;for(Y in f)if(!d.hasOwnProperty(Y)&&f.hasOwnProperty(Y)&&f[Y]!=null)if(Y==="style"){var k=f[Y];for(x in k)k.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(o.hasOwnProperty(Y)?y||(y=[]):(y=y||[]).push(Y,null));for(Y in d){var L=d[Y];if(k=f!=null?f[Y]:void 0,d.hasOwnProperty(Y)&&L!==k&&(L!=null||k!=null))if(Y==="style")if(k){for(x in k)!k.hasOwnProperty(x)||L&&L.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in L)L.hasOwnProperty(x)&&k[x]!==L[x]&&(a||(a={}),a[x]=L[x])}else a||(y||(y=[]),y.push(Y,a)),a=L;else Y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,k=k?k.__html:void 0,L!=null&&k!==L&&(y=y||[]).push(Y,L)):Y==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(Y,""+L):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(o.hasOwnProperty(Y)?(L!=null&&Y==="onScroll"&&ft("scroll",n),y||k===L||(y=[])):(y=y||[]).push(Y,L))}a&&(y=y||[]).push("style",a);var Y=y;(s.updateQueue=Y)&&(s.flags|=4)}},sg=function(n,s,a,d){a!==d&&(s.flags|=4)};function $a(n,s){if(!vt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function dn(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=d,n.childLanes=a,s}function Xw(n,s,a){var d=s.pendingProps;switch(kd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(s),null;case 1:return Pn(s.type)&&lu(),dn(s),null;case 3:return d=s.stateNode,Vo(),pt(Rn),pt(un),$d(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(fu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xr!==null&&(_h(xr),xr=null))),lh(n,s),dn(s),null;case 5:zd(s);var f=Os(Ma.current);if(a=s.type,n!==null&&s.stateNode!=null)ig(n,s,a,d,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return dn(s),null}if(n=Os(Ur.current),fu(s)){d=s.stateNode,a=s.type;var y=s.memoizedProps;switch(d[Fr]=s,d[ja]=y,n=(s.mode&1)!==0,a){case"dialog":ft("cancel",d),ft("close",d);break;case"iframe":case"object":case"embed":ft("load",d);break;case"video":case"audio":for(f=0;f<ka.length;f++)ft(ka[f],d);break;case"source":ft("error",d);break;case"img":case"image":case"link":ft("error",d),ft("load",d);break;case"details":ft("toggle",d);break;case"input":nt(d,y),ft("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},ft("invalid",d);break;case"textarea":Kn(d,y),ft("invalid",d)}Zr(a,y),f=null;for(var x in y)if(y.hasOwnProperty(x)){var k=y[x];x==="children"?typeof k=="string"?d.textContent!==k&&(y.suppressHydrationWarning!==!0&&su(d.textContent,k,n),f=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(y.suppressHydrationWarning!==!0&&su(d.textContent,k,n),f=["children",""+k]):o.hasOwnProperty(x)&&k!=null&&x==="onScroll"&&ft("scroll",d)}switch(a){case"input":sn(d),ur(d,y,!0);break;case"textarea":sn(d),dr(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=ou)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{x=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ht(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=x.createElement(a,{is:d.is}):(n=x.createElement(a),a==="select"&&(x=n,d.multiple?x.multiple=!0:d.size&&(x.size=d.size))):n=x.createElementNS(n,a),n[Fr]=s,n[ja]=d,rg(n,s,!1,!1),s.stateNode=n;e:{switch(x=ei(a,d),a){case"dialog":ft("cancel",n),ft("close",n),f=d;break;case"iframe":case"object":case"embed":ft("load",n),f=d;break;case"video":case"audio":for(f=0;f<ka.length;f++)ft(ka[f],n);f=d;break;case"source":ft("error",n),f=d;break;case"img":case"image":case"link":ft("error",n),ft("load",n),f=d;break;case"details":ft("toggle",n),f=d;break;case"input":nt(n,d),f=lr(n,d),ft("invalid",n);break;case"option":f=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},f=oe({},d,{value:void 0}),ft("invalid",n);break;case"textarea":Kn(n,d),f=on(n,d),ft("invalid",n);break;default:f=d}Zr(a,f),k=f;for(y in k)if(k.hasOwnProperty(y)){var L=k[y];y==="style"?vn(n,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Xr(n,L)):y==="children"?typeof L=="string"?(a!=="textarea"||L!=="")&&Ln(n,L):typeof L=="number"&&Ln(n,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?L!=null&&y==="onScroll"&&ft("scroll",n):L!=null&&de(n,y,L,x))}switch(a){case"input":sn(n),ur(n,d,!1);break;case"textarea":sn(n),dr(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Be(d.value));break;case"select":n.multiple=!!d.multiple,y=d.value,y!=null?_t(n,!!d.multiple,y,!1):d.defaultValue!=null&&_t(n,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=ou)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return dn(s),null;case 6:if(n&&s.stateNode!=null)sg(n,s,n.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=Os(Ma.current),Os(Ur.current),fu(s)){if(d=s.stateNode,a=s.memoizedProps,d[Fr]=s,(y=d.nodeValue!==a)&&(n=zn,n!==null))switch(n.tag){case 3:su(d.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&su(d.nodeValue,a,(n.mode&1)!==0)}y&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Fr]=s,s.stateNode=d}return dn(s),null;case 13:if(pt(wt),d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(vt&&Bn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)lm(),No(),s.flags|=98560,y=!1;else if(y=fu(s),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Fr]=s}else No(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dn(s),y=!1}else xr!==null&&(_h(xr),xr=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(wt.current&1)!==0?Mt===0&&(Mt=3):Eh())),s.updateQueue!==null&&(s.flags|=4),dn(s),null);case 4:return Vo(),lh(n,s),n===null&&Aa(s.stateNode.containerInfo),dn(s),null;case 10:return Vd(s.type._context),dn(s),null;case 17:return Pn(s.type)&&lu(),dn(s),null;case 19:if(pt(wt),y=s.memoizedState,y===null)return dn(s),null;if(d=(s.flags&128)!==0,x=y.rendering,x===null)if(d)$a(y,!1);else{if(Mt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(x=_u(n),x!==null){for(s.flags|=128,$a(y,!1),d=x.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)y=a,n=d,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,n=x.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return dt(wt,wt.current&1|2),s.child}n=n.sibling}y.tail!==null&&ct()>Uo&&(s.flags|=128,d=!0,$a(y,!1),s.lanes=4194304)}else{if(!d)if(n=_u(x),n!==null){if(s.flags|=128,d=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),$a(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!vt)return dn(s),null}else 2*ct()-y.renderingStartTime>Uo&&a!==1073741824&&(s.flags|=128,d=!0,$a(y,!1),s.lanes=4194304);y.isBackwards?(x.sibling=s.child,s.child=x):(a=y.last,a!==null?a.sibling=x:s.child=x,y.last=x)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=ct(),s.sibling=null,a=wt.current,dt(wt,d?a&1|2:a&1),s):(dn(s),null);case 22:case 23:return xh(),d=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?($n&1073741824)!==0&&(dn(s),s.subtreeFlags&6&&(s.flags|=8192)):dn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Zw(n,s){switch(kd(s),s.tag){case 1:return Pn(s.type)&&lu(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Vo(),pt(Rn),pt(un),$d(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return zd(s),null;case 13:if(pt(wt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));No()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return pt(wt),null;case 4:return Vo(),null;case 10:return Vd(s.type._context),null;case 22:case 23:return xh(),null;case 24:return null;default:return null}}var Pu=!1,hn=!1,ex=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Mo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){Tt(n,s,d)}else a.current=null}function uh(n,s,a){try{a()}catch(d){Tt(n,s,d)}}var og=!1;function tx(n,s){if(xd=ji,n=Mp(),fd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var x=0,k=-1,L=-1,Y=0,he=0,fe=n,le=null;t:for(;;){for(var _e;fe!==a||f!==0&&fe.nodeType!==3||(k=x+f),fe!==y||d!==0&&fe.nodeType!==3||(L=x+d),fe.nodeType===3&&(x+=fe.nodeValue.length),(_e=fe.firstChild)!==null;)le=fe,fe=_e;for(;;){if(fe===n)break t;if(le===a&&++Y===f&&(k=x),le===y&&++he===d&&(L=x),(_e=fe.nextSibling)!==null)break;fe=le,le=fe.parentNode}fe=_e}a=k===-1||L===-1?null:{start:k,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ed={focusedElem:n,selectionRange:a},ji=!1,Ee=s;Ee!==null;)if(s=Ee,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ee=n;else for(;Ee!==null;){s=Ee;try{var Te=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Se=Te.memoizedProps,It=Te.memoizedState,H=s.stateNode,M=H.getSnapshotBeforeUpdate(s.elementType===s.type?Se:Er(s.type,Se),It);H.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var q=s.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){Tt(s,s.return,pe)}if(n=s.sibling,n!==null){n.return=s.return,Ee=n;break}Ee=s.return}return Te=og,og=!1,Te}function Wa(n,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&n)===n){var y=f.destroy;f.destroy=void 0,y!==void 0&&uh(s,a,y)}f=f.next}while(f!==d)}}function bu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function ch(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ag(n){var s=n.alternate;s!==null&&(n.alternate=null,ag(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Fr],delete s[ja],delete s[Cd],delete s[Ow],delete s[Mw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function lg(n){return n.tag===5||n.tag===3||n.tag===4}function ug(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dh(n,s,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ou));else if(d!==4&&(n=n.child,n!==null))for(dh(n,s,a),n=n.sibling;n!==null;)dh(n,s,a),n=n.sibling}function hh(n,s,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(hh(n,s,a),n=n.sibling;n!==null;)hh(n,s,a),n=n.sibling}var Xt=null,Tr=!1;function Bi(n,s,a){for(a=a.child;a!==null;)cg(n,s,a),a=a.sibling}function cg(n,s,a){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Is,a)}catch{}switch(a.tag){case 5:hn||Mo(a,s);case 6:var d=Xt,f=Tr;Xt=null,Bi(n,s,a),Xt=d,Tr=f,Xt!==null&&(Tr?(n=Xt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Xt.removeChild(a.stateNode));break;case 18:Xt!==null&&(Tr?(n=Xt,a=a.stateNode,n.nodeType===8?Id(n.parentNode,a):n.nodeType===1&&Id(n,a),vr(n)):Id(Xt,a.stateNode));break;case 4:d=Xt,f=Tr,Xt=a.stateNode.containerInfo,Tr=!0,Bi(n,s,a),Xt=d,Tr=f;break;case 0:case 11:case 14:case 15:if(!hn&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var y=f,x=y.destroy;y=y.tag,x!==void 0&&((y&2)!==0||(y&4)!==0)&&uh(a,s,x),f=f.next}while(f!==d)}Bi(n,s,a);break;case 1:if(!hn&&(Mo(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(k){Tt(a,s,k)}Bi(n,s,a);break;case 21:Bi(n,s,a);break;case 22:a.mode&1?(hn=(d=hn)||a.memoizedState!==null,Bi(n,s,a),hn=d):Bi(n,s,a);break;default:Bi(n,s,a)}}function dg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new ex),s.forEach(function(d){var f=cx.bind(null,n,d);a.has(d)||(a.add(d),d.then(f,f))})}}function Sr(n,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var y=n,x=s,k=x;e:for(;k!==null;){switch(k.tag){case 5:Xt=k.stateNode,Tr=!1;break e;case 3:Xt=k.stateNode.containerInfo,Tr=!0;break e;case 4:Xt=k.stateNode.containerInfo,Tr=!0;break e}k=k.return}if(Xt===null)throw Error(t(160));cg(y,x,f),Xt=null,Tr=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch(Y){Tt(f,s,Y)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)hg(s,n),s=s.sibling}function hg(n,s){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Sr(s,n),Br(n),d&4){try{Wa(3,n,n.return),bu(3,n)}catch(Se){Tt(n,n.return,Se)}try{Wa(5,n,n.return)}catch(Se){Tt(n,n.return,Se)}}break;case 1:Sr(s,n),Br(n),d&512&&a!==null&&Mo(a,a.return);break;case 5:if(Sr(s,n),Br(n),d&512&&a!==null&&Mo(a,a.return),n.flags&32){var f=n.stateNode;try{Ln(f,"")}catch(Se){Tt(n,n.return,Se)}}if(d&4&&(f=n.stateNode,f!=null)){var y=n.memoizedProps,x=a!==null?a.memoizedProps:y,k=n.type,L=n.updateQueue;if(n.updateQueue=null,L!==null)try{k==="input"&&y.type==="radio"&&y.name!=null&&zt(f,y),ei(k,x);var Y=ei(k,y);for(x=0;x<L.length;x+=2){var he=L[x],fe=L[x+1];he==="style"?vn(f,fe):he==="dangerouslySetInnerHTML"?Xr(f,fe):he==="children"?Ln(f,fe):de(f,he,fe,Y)}switch(k){case"input":yn(f,y);break;case"textarea":cr(f,y);break;case"select":var le=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var _e=y.value;_e!=null?_t(f,!!y.multiple,_e,!1):le!==!!y.multiple&&(y.defaultValue!=null?_t(f,!!y.multiple,y.defaultValue,!0):_t(f,!!y.multiple,y.multiple?[]:"",!1))}f[ja]=y}catch(Se){Tt(n,n.return,Se)}}break;case 6:if(Sr(s,n),Br(n),d&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,y=n.memoizedProps;try{f.nodeValue=y}catch(Se){Tt(n,n.return,Se)}}break;case 3:if(Sr(s,n),Br(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{vr(s.containerInfo)}catch(Se){Tt(n,n.return,Se)}break;case 4:Sr(s,n),Br(n);break;case 13:Sr(s,n),Br(n),f=n.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(mh=ct())),d&4&&dg(n);break;case 22:if(he=a!==null&&a.memoizedState!==null,n.mode&1?(hn=(Y=hn)||he,Sr(s,n),hn=Y):Sr(s,n),Br(n),d&8192){if(Y=n.memoizedState!==null,(n.stateNode.isHidden=Y)&&!he&&(n.mode&1)!==0)for(Ee=n,he=n.child;he!==null;){for(fe=Ee=he;Ee!==null;){switch(le=Ee,_e=le.child,le.tag){case 0:case 11:case 14:case 15:Wa(4,le,le.return);break;case 1:Mo(le,le.return);var Te=le.stateNode;if(typeof Te.componentWillUnmount=="function"){d=le,a=le.return;try{s=d,Te.props=s.memoizedProps,Te.state=s.memoizedState,Te.componentWillUnmount()}catch(Se){Tt(d,a,Se)}}break;case 5:Mo(le,le.return);break;case 22:if(le.memoizedState!==null){mg(fe);continue}}_e!==null?(_e.return=le,Ee=_e):mg(fe)}he=he.sibling}e:for(he=null,fe=n;;){if(fe.tag===5){if(he===null){he=fe;try{f=fe.stateNode,Y?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(k=fe.stateNode,L=fe.memoizedProps.style,x=L!=null&&L.hasOwnProperty("display")?L.display:null,k.style.display=Ar("display",x))}catch(Se){Tt(n,n.return,Se)}}}else if(fe.tag===6){if(he===null)try{fe.stateNode.nodeValue=Y?"":fe.memoizedProps}catch(Se){Tt(n,n.return,Se)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===n)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===n)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===n)break e;he===fe&&(he=null),fe=fe.return}he===fe&&(he=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:Sr(s,n),Br(n),d&4&&dg(n);break;case 21:break;default:Sr(s,n),Br(n)}}function Br(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(lg(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(Ln(f,""),d.flags&=-33);var y=ug(n);hh(n,y,f);break;case 3:case 4:var x=d.stateNode.containerInfo,k=ug(n);dh(n,k,x);break;default:throw Error(t(161))}}catch(L){Tt(n,n.return,L)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function nx(n,s,a){Ee=n,fg(n)}function fg(n,s,a){for(var d=(n.mode&1)!==0;Ee!==null;){var f=Ee,y=f.child;if(f.tag===22&&d){var x=f.memoizedState!==null||Pu;if(!x){var k=f.alternate,L=k!==null&&k.memoizedState!==null||hn;k=Pu;var Y=hn;if(Pu=x,(hn=L)&&!Y)for(Ee=f;Ee!==null;)x=Ee,L=x.child,x.tag===22&&x.memoizedState!==null?gg(f):L!==null?(L.return=x,Ee=L):gg(f);for(;y!==null;)Ee=y,fg(y),y=y.sibling;Ee=f,Pu=k,hn=Y}pg(n)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,Ee=y):pg(n)}}function pg(n){for(;Ee!==null;){var s=Ee;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:hn||bu(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!hn)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Er(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&mm(s,y,d);break;case 3:var x=s.updateQueue;if(x!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}mm(s,x,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&a.focus();break;case"img":L.src&&(a.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Y=s.alternate;if(Y!==null){var he=Y.memoizedState;if(he!==null){var fe=he.dehydrated;fe!==null&&vr(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}hn||s.flags&512&&ch(s)}catch(le){Tt(s,s.return,le)}}if(s===n){Ee=null;break}if(a=s.sibling,a!==null){a.return=s.return,Ee=a;break}Ee=s.return}}function mg(n){for(;Ee!==null;){var s=Ee;if(s===n){Ee=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Ee=a;break}Ee=s.return}}function gg(n){for(;Ee!==null;){var s=Ee;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{bu(4,s)}catch(L){Tt(s,a,L)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(L){Tt(s,f,L)}}var y=s.return;try{ch(s)}catch(L){Tt(s,y,L)}break;case 5:var x=s.return;try{ch(s)}catch(L){Tt(s,x,L)}}}catch(L){Tt(s,s.return,L)}if(s===n){Ee=null;break}var k=s.sibling;if(k!==null){k.return=s.return,Ee=k;break}Ee=s.return}}var rx=Math.ceil,ku=me.ReactCurrentDispatcher,fh=me.ReactCurrentOwner,rr=me.ReactCurrentBatchConfig,et=0,qt=null,At=null,Zt=0,$n=0,Fo=Oi(0),Mt=0,Ha=null,Fs=0,Au=0,ph=0,qa=null,kn=null,mh=0,Uo=1/0,pi=null,Nu=!1,gh=null,$i=null,ju=!1,Wi=null,Du=0,Ga=0,yh=null,Lu=-1,Vu=0;function Tn(){return(et&6)!==0?ct():Lu!==-1?Lu:Lu=ct()}function Hi(n){return(n.mode&1)===0?1:(et&2)!==0&&Zt!==0?Zt&-Zt:Uw.transition!==null?(Vu===0&&(Vu=Rs()),Vu):(n=Qe,n!==0||(n=window.event,n=n===void 0?16:xa(n.type)),n)}function Ir(n,s,a,d){if(50<Ga)throw Ga=0,yh=null,Error(t(185));bi(n,a,d),((et&2)===0||n!==qt)&&(n===qt&&((et&2)===0&&(Au|=a),Mt===4&&qi(n,Zt)),An(n,d),a===1&&et===0&&(s.mode&1)===0&&(Uo=ct()+500,cu&&Fi()))}function An(n,s){var a=n.callbackNode;ni(n,s);var d=Cs(n,n===qt?Zt:0);if(d===0)a!==null&&ga(a),n.callbackNode=null,n.callbackPriority=0;else if(s=d&-d,n.callbackPriority!==s){if(a!=null&&ga(a),s===1)n.tag===0?Fw(vg.bind(null,n)):rm(vg.bind(null,n)),Lw(function(){(et&6)===0&&Fi()}),a=null;else{switch(Ai(d)){case 1:a=Ss;break;case 4:a=Ci;break;case 16:a=Yn;break;case 536870912:a=Vl;break;default:a=Yn}a=Cg(a,yg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function yg(n,s){if(Lu=-1,Vu=0,(et&6)!==0)throw Error(t(327));var a=n.callbackNode;if(zo()&&n.callbackNode!==a)return null;var d=Cs(n,n===qt?Zt:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||s)s=Ou(n,d);else{s=d;var f=et;et|=2;var y=wg();(qt!==n||Zt!==s)&&(pi=null,Uo=ct()+500,zs(n,s));do try{ox();break}catch(k){_g(n,k)}while(!0);Ld(),ku.current=y,et=f,At!==null?s=0:(qt=null,Zt=0,s=Mt)}if(s!==0){if(s===2&&(f=Mn(n),f!==0&&(d=f,s=vh(n,f))),s===1)throw a=Ha,zs(n,0),qi(n,d),An(n,ct()),a;if(s===6)qi(n,d);else{if(f=n.current.alternate,(d&30)===0&&!ix(f)&&(s=Ou(n,d),s===2&&(y=Mn(n),y!==0&&(d=y,s=vh(n,y))),s===1))throw a=Ha,zs(n,0),qi(n,d),An(n,ct()),a;switch(n.finishedWork=f,n.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:Bs(n,kn,pi);break;case 3:if(qi(n,d),(d&130023424)===d&&(s=mh+500-ct(),10<s)){if(Cs(n,0)!==0)break;if(f=n.suspendedLanes,(f&d)!==d){Tn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Sd(Bs.bind(null,n,kn,pi),s);break}Bs(n,kn,pi);break;case 4:if(qi(n,d),(d&4194240)===d)break;for(s=n.eventTimes,f=-1;0<d;){var x=31-wn(d);y=1<<x,x=s[x],x>f&&(f=x),d&=~y}if(d=f,d=ct()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*rx(d/1960))-d,10<d){n.timeoutHandle=Sd(Bs.bind(null,n,kn,pi),d);break}Bs(n,kn,pi);break;case 5:Bs(n,kn,pi);break;default:throw Error(t(329))}}}return An(n,ct()),n.callbackNode===a?yg.bind(null,n):null}function vh(n,s){var a=qa;return n.current.memoizedState.isDehydrated&&(zs(n,s).flags|=256),n=Ou(n,s),n!==2&&(s=kn,kn=a,s!==null&&_h(s)),n}function _h(n){kn===null?kn=n:kn.push.apply(kn,n)}function ix(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],y=f.getSnapshot;f=f.value;try{if(!wr(y(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function qi(n,s){for(s&=~ph,s&=~Au,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-wn(s),d=1<<a;n[a]=-1,s&=~d}}function vg(n){if((et&6)!==0)throw Error(t(327));zo();var s=Cs(n,0);if((s&1)===0)return An(n,ct()),null;var a=Ou(n,s);if(n.tag!==0&&a===2){var d=Mn(n);d!==0&&(s=d,a=vh(n,d))}if(a===1)throw a=Ha,zs(n,0),qi(n,s),An(n,ct()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Bs(n,kn,pi),An(n,ct()),null}function wh(n,s){var a=et;et|=1;try{return n(s)}finally{et=a,et===0&&(Uo=ct()+500,cu&&Fi())}}function Us(n){Wi!==null&&Wi.tag===0&&(et&6)===0&&zo();var s=et;et|=1;var a=rr.transition,d=Qe;try{if(rr.transition=null,Qe=1,n)return n()}finally{Qe=d,rr.transition=a,et=s,(et&6)===0&&Fi()}}function xh(){$n=Fo.current,pt(Fo)}function zs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Dw(a)),At!==null)for(a=At.return;a!==null;){var d=a;switch(kd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&lu();break;case 3:Vo(),pt(Rn),pt(un),$d();break;case 5:zd(d);break;case 4:Vo();break;case 13:pt(wt);break;case 19:pt(wt);break;case 10:Vd(d.type._context);break;case 22:case 23:xh()}a=a.return}if(qt=n,At=n=Gi(n.current,null),Zt=$n=s,Mt=0,Ha=null,ph=Au=Fs=0,kn=qa=null,Vs!==null){for(s=0;s<Vs.length;s++)if(a=Vs[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,y=a.pending;if(y!==null){var x=y.next;y.next=f,d.next=x}a.pending=d}Vs=null}return n}function _g(n,s){do{var a=At;try{if(Ld(),wu.current=Su,xu){for(var d=xt.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}xu=!1}if(Ms=0,Ht=Ot=xt=null,Fa=!1,Ua=0,fh.current=null,a===null||a.return===null){Mt=1,Ha=s,At=null;break}e:{var y=n,x=a.return,k=a,L=s;if(s=Zt,k.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var Y=L,he=k,fe=he.tag;if((he.mode&1)===0&&(fe===0||fe===11||fe===15)){var le=he.alternate;le?(he.updateQueue=le.updateQueue,he.memoizedState=le.memoizedState,he.lanes=le.lanes):(he.updateQueue=null,he.memoizedState=null)}var _e=Wm(x);if(_e!==null){_e.flags&=-257,Hm(_e,x,k,y,s),_e.mode&1&&$m(y,Y,s),s=_e,L=Y;var Te=s.updateQueue;if(Te===null){var Se=new Set;Se.add(L),s.updateQueue=Se}else Te.add(L);break e}else{if((s&1)===0){$m(y,Y,s),Eh();break e}L=Error(t(426))}}else if(vt&&k.mode&1){var It=Wm(x);if(It!==null){(It.flags&65536)===0&&(It.flags|=256),Hm(It,x,k,y,s),jd(Oo(L,k));break e}}y=L=Oo(L,k),Mt!==4&&(Mt=2),qa===null?qa=[y]:qa.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var H=zm(y,L,s);pm(y,H);break e;case 1:k=L;var M=y.type,q=y.stateNode;if((y.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&($i===null||!$i.has(q)))){y.flags|=65536,s&=-s,y.lanes|=s;var pe=Bm(y,k,s);pm(y,pe);break e}}y=y.return}while(y!==null)}Eg(a)}catch(Ce){s=Ce,At===a&&a!==null&&(At=a=a.return);continue}break}while(!0)}function wg(){var n=ku.current;return ku.current=Su,n===null?Su:n}function Eh(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),qt===null||(Fs&268435455)===0&&(Au&268435455)===0||qi(qt,Zt)}function Ou(n,s){var a=et;et|=2;var d=wg();(qt!==n||Zt!==s)&&(pi=null,zs(n,s));do try{sx();break}catch(f){_g(n,f)}while(!0);if(Ld(),et=a,ku.current=d,At!==null)throw Error(t(261));return qt=null,Zt=0,Mt}function sx(){for(;At!==null;)xg(At)}function ox(){for(;At!==null&&!Dl();)xg(At)}function xg(n){var s=Ig(n.alternate,n,$n);n.memoizedProps=n.pendingProps,s===null?Eg(n):At=s,fh.current=null}function Eg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Xw(a,s,$n),a!==null){At=a;return}}else{if(a=Zw(a,s),a!==null){a.flags&=32767,At=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Mt=6,At=null;return}}if(s=s.sibling,s!==null){At=s;return}At=s=n}while(s!==null);Mt===0&&(Mt=5)}function Bs(n,s,a){var d=Qe,f=rr.transition;try{rr.transition=null,Qe=1,ax(n,s,a,d)}finally{rr.transition=f,Qe=d}return null}function ax(n,s,a,d){do zo();while(Wi!==null);if((et&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=a.lanes|a.childLanes;if(lt(n,y),n===qt&&(At=qt=null,Zt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ju||(ju=!0,Cg(Yn,function(){return zo(),null})),y=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||y){y=rr.transition,rr.transition=null;var x=Qe;Qe=1;var k=et;et|=4,fh.current=null,tx(n,a),hg(a,n),Rw(Ed),ji=!!xd,Ed=xd=null,n.current=a,nx(a),sd(),et=k,Qe=x,rr.transition=y}else n.current=a;if(ju&&(ju=!1,Wi=n,Du=f),y=n.pendingLanes,y===0&&($i=null),Ol(a.stateNode),An(n,ct()),s!==null)for(d=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(Nu)throw Nu=!1,n=gh,gh=null,n;return(Du&1)!==0&&n.tag!==0&&zo(),y=n.pendingLanes,(y&1)!==0?n===yh?Ga++:(Ga=0,yh=n):Ga=0,Fi(),null}function zo(){if(Wi!==null){var n=Ai(Du),s=rr.transition,a=Qe;try{if(rr.transition=null,Qe=16>n?16:n,Wi===null)var d=!1;else{if(n=Wi,Wi=null,Du=0,(et&6)!==0)throw Error(t(331));var f=et;for(et|=4,Ee=n.current;Ee!==null;){var y=Ee,x=y.child;if((Ee.flags&16)!==0){var k=y.deletions;if(k!==null){for(var L=0;L<k.length;L++){var Y=k[L];for(Ee=Y;Ee!==null;){var he=Ee;switch(he.tag){case 0:case 11:case 15:Wa(8,he,y)}var fe=he.child;if(fe!==null)fe.return=he,Ee=fe;else for(;Ee!==null;){he=Ee;var le=he.sibling,_e=he.return;if(ag(he),he===Y){Ee=null;break}if(le!==null){le.return=_e,Ee=le;break}Ee=_e}}}var Te=y.alternate;if(Te!==null){var Se=Te.child;if(Se!==null){Te.child=null;do{var It=Se.sibling;Se.sibling=null,Se=It}while(Se!==null)}}Ee=y}}if((y.subtreeFlags&2064)!==0&&x!==null)x.return=y,Ee=x;else e:for(;Ee!==null;){if(y=Ee,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Wa(9,y,y.return)}var H=y.sibling;if(H!==null){H.return=y.return,Ee=H;break e}Ee=y.return}}var M=n.current;for(Ee=M;Ee!==null;){x=Ee;var q=x.child;if((x.subtreeFlags&2064)!==0&&q!==null)q.return=x,Ee=q;else e:for(x=M;Ee!==null;){if(k=Ee,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:bu(9,k)}}catch(Ce){Tt(k,k.return,Ce)}if(k===x){Ee=null;break e}var pe=k.sibling;if(pe!==null){pe.return=k.return,Ee=pe;break e}Ee=k.return}}if(et=f,Fi(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Is,n)}catch{}d=!0}return d}finally{Qe=a,rr.transition=s}}return!1}function Tg(n,s,a){s=Oo(a,s),s=zm(n,s,1),n=zi(n,s,1),s=Tn(),n!==null&&(bi(n,1,s),An(n,s))}function Tt(n,s,a){if(n.tag===3)Tg(n,n,a);else for(;s!==null;){if(s.tag===3){Tg(s,n,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&($i===null||!$i.has(d))){n=Oo(a,n),n=Bm(s,n,1),s=zi(s,n,1),n=Tn(),s!==null&&(bi(s,1,n),An(s,n));break}}s=s.return}}function lx(n,s,a){var d=n.pingCache;d!==null&&d.delete(s),s=Tn(),n.pingedLanes|=n.suspendedLanes&a,qt===n&&(Zt&a)===a&&(Mt===4||Mt===3&&(Zt&130023424)===Zt&&500>ct()-mh?zs(n,0):ph|=a),An(n,s)}function Sg(n,s){s===0&&((n.mode&1)===0?s=1:(s=uo,uo<<=1,(uo&130023424)===0&&(uo=4194304)));var a=Tn();n=di(n,s),n!==null&&(bi(n,s,a),An(n,a))}function ux(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Sg(n,a)}function cx(n,s){var a=0;switch(n.tag){case 13:var d=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),Sg(n,a)}var Ig;Ig=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Rn.current)bn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return bn=!1,Jw(n,s,a);bn=(n.flags&131072)!==0}else bn=!1,vt&&(s.flags&1048576)!==0&&im(s,hu,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Ru(n,s),n=s.pendingProps;var f=bo(s,un.current);Lo(s,a),f=qd(null,s,d,n,f,a);var y=Gd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Pn(d)?(y=!0,uu(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Fd(s),f.updater=Iu,s.stateNode=f,f._reactInternals=s,Zd(s,d,n,a),s=rh(null,s,d,!0,y,a)):(s.tag=0,vt&&y&&bd(s),En(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(Ru(n,s),n=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=hx(d),n=Er(d,n),f){case 0:s=nh(null,s,d,n,a);break e;case 1:s=Jm(null,s,d,n,a);break e;case 11:s=qm(null,s,d,n,a);break e;case 14:s=Gm(null,s,d,Er(d.type,n),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Er(d,f),nh(n,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Er(d,f),Jm(n,s,d,f,a);case 3:e:{if(Xm(s),n===null)throw Error(t(387));d=s.pendingProps,y=s.memoizedState,f=y.element,fm(n,s),vu(s,d,null,a);var x=s.memoizedState;if(d=x.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=Oo(Error(t(423)),s),s=Zm(n,s,d,a,f);break e}else if(d!==f){f=Oo(Error(t(424)),s),s=Zm(n,s,d,a,f);break e}else for(Bn=Vi(s.stateNode.containerInfo.firstChild),zn=s,vt=!0,xr=null,a=dm(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(No(),d===f){s=fi(n,s,a);break e}En(n,s,d,a)}s=s.child}return s;case 5:return gm(s),n===null&&Nd(s),d=s.type,f=s.pendingProps,y=n!==null?n.memoizedProps:null,x=f.children,Td(d,f)?x=null:y!==null&&Td(d,y)&&(s.flags|=32),Ym(n,s),En(n,s,x,a),s.child;case 6:return n===null&&Nd(s),null;case 13:return eg(n,s,a);case 4:return Ud(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=jo(s,null,d,a):En(n,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Er(d,f),qm(n,s,d,f,a);case 7:return En(n,s,s.pendingProps,a),s.child;case 8:return En(n,s,s.pendingProps.children,a),s.child;case 12:return En(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,y=s.memoizedProps,x=f.value,dt(mu,d._currentValue),d._currentValue=x,y!==null)if(wr(y.value,x)){if(y.children===f.children&&!Rn.current){s=fi(n,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var k=y.dependencies;if(k!==null){x=y.child;for(var L=k.firstContext;L!==null;){if(L.context===d){if(y.tag===1){L=hi(-1,a&-a),L.tag=2;var Y=y.updateQueue;if(Y!==null){Y=Y.shared;var he=Y.pending;he===null?L.next=L:(L.next=he.next,he.next=L),Y.pending=L}}y.lanes|=a,L=y.alternate,L!==null&&(L.lanes|=a),Od(y.return,a,s),k.lanes|=a;break}L=L.next}}else if(y.tag===10)x=y.type===s.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=a,k=x.alternate,k!==null&&(k.lanes|=a),Od(x,a,s),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===s){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}En(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,Lo(s,a),f=tr(f),d=d(f),s.flags|=1,En(n,s,d,a),s.child;case 14:return d=s.type,f=Er(d,s.pendingProps),f=Er(d.type,f),Gm(n,s,d,f,a);case 15:return Km(n,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Er(d,f),Ru(n,s),s.tag=1,Pn(d)?(n=!0,uu(s)):n=!1,Lo(s,a),Fm(s,d,f),Zd(s,d,f,a),rh(null,s,d,!0,n,a);case 19:return ng(n,s,a);case 22:return Qm(n,s,a)}throw Error(t(156,s.tag))};function Cg(n,s){return ao(n,s)}function dx(n,s,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(n,s,a,d){return new dx(n,s,a,d)}function Th(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hx(n){if(typeof n=="function")return Th(n)?1:0;if(n!=null){if(n=n.$$typeof,n===A)return 11;if(n===Ye)return 14}return 2}function Gi(n,s){var a=n.alternate;return a===null?(a=ir(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Mu(n,s,a,d,f,y){var x=2;if(d=n,typeof n=="function")Th(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case N:return $s(a.children,f,y,s);case C:x=8,f|=8;break;case b:return n=ir(12,a,s,f|2),n.elementType=b,n.lanes=y,n;case R:return n=ir(13,a,s,f),n.elementType=R,n.lanes=y,n;case Oe:return n=ir(19,a,s,f),n.elementType=Oe,n.lanes=y,n;case W:return Fu(a,f,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:x=10;break e;case V:x=9;break e;case A:x=11;break e;case Ye:x=14;break e;case Ue:x=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=ir(x,a,s,f),s.elementType=n,s.type=d,s.lanes=y,s}function $s(n,s,a,d){return n=ir(7,n,d,s),n.lanes=a,n}function Fu(n,s,a,d){return n=ir(22,n,d,s),n.elementType=W,n.lanes=a,n.stateNode={isHidden:!1},n}function Sh(n,s,a){return n=ir(6,n,null,s),n.lanes=a,n}function Ih(n,s,a){return s=ir(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function fx(n,s,a,d,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pi(0),this.expirationTimes=Pi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Ch(n,s,a,d,f,y,x,k,L){return n=new fx(n,s,a,k,L),s===1?(s=1,y===!0&&(s|=8)):s=0,y=ir(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fd(y),n}function px(n,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:d==null?null:""+d,children:n,containerInfo:s,implementation:a}}function Rg(n){if(!n)return Mi;n=n._reactInternals;e:{if(Vn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Pn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Pn(a))return tm(n,a,s)}return s}function Pg(n,s,a,d,f,y,x,k,L){return n=Ch(a,d,!0,n,f,y,x,k,L),n.context=Rg(null),a=n.current,d=Tn(),f=Hi(a),y=hi(d,f),y.callback=s??null,zi(a,y,f),n.current.lanes=f,bi(n,f,d),An(n,d),n}function Uu(n,s,a,d){var f=s.current,y=Tn(),x=Hi(f);return a=Rg(a),s.context===null?s.context=a:s.pendingContext=a,s=hi(y,x),s.payload={element:n},d=d===void 0?null:d,d!==null&&(s.callback=d),n=zi(f,s,x),n!==null&&(Ir(n,f,x,y),yu(n,f,x)),x}function zu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Rh(n,s){bg(n,s),(n=n.alternate)&&bg(n,s)}function mx(){return null}var kg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ph(n){this._internalRoot=n}Bu.prototype.render=Ph.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Uu(n,s,null,null)},Bu.prototype.unmount=Ph.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Us(function(){Uu(null,n,null,null)}),s[ai]=null}};function Bu(n){this._internalRoot=n}Bu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Bl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Lr.length&&s!==0&&s<Lr[a].priority;a++);Lr.splice(a,0,n),a===0&&Hl(n)}};function bh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function $u(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ag(){}function gx(n,s,a,d,f){if(f){if(typeof d=="function"){var y=d;d=function(){var Y=zu(x);y.call(Y)}}var x=Pg(s,d,n,0,null,!1,!1,"",Ag);return n._reactRootContainer=x,n[ai]=x.current,Aa(n.nodeType===8?n.parentNode:n),Us(),x}for(;f=n.lastChild;)n.removeChild(f);if(typeof d=="function"){var k=d;d=function(){var Y=zu(L);k.call(Y)}}var L=Ch(n,0,!1,null,null,!1,!1,"",Ag);return n._reactRootContainer=L,n[ai]=L.current,Aa(n.nodeType===8?n.parentNode:n),Us(function(){Uu(s,L,a,d)}),L}function Wu(n,s,a,d,f){var y=a._reactRootContainer;if(y){var x=y;if(typeof f=="function"){var k=f;f=function(){var L=zu(x);k.call(L)}}Uu(s,x,n,f)}else x=gx(a,s,n,f,d);return zu(x)}Ul=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ri(s.pendingLanes);a!==0&&(ki(s,a|1),An(s,ct()),(et&6)===0&&(Uo=ct()+500,Fi()))}break;case 13:Us(function(){var d=di(n,1);if(d!==null){var f=Tn();Ir(d,n,1,f)}}),Rh(n,1)}},co=function(n){if(n.tag===13){var s=di(n,134217728);if(s!==null){var a=Tn();Ir(s,n,134217728,a)}Rh(n,134217728)}},zl=function(n){if(n.tag===13){var s=Hi(n),a=di(n,s);if(a!==null){var d=Tn();Ir(a,n,s,d)}Rh(n,s)}},Bl=function(){return Qe},$l=function(n,s){var a=Qe;try{return Qe=n,s()}finally{Qe=a}},ue=function(n,s,a){switch(s){case"input":if(yn(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==n&&d.form===n.form){var f=au(d);if(!f)throw Error(t(90));Qt(d),yn(d,f)}}}break;case"textarea":cr(n,a);break;case"select":s=a.value,s!=null&&_t(n,!!a.multiple,s,!1)}},we=wh,We=Us;var yx={usingClientEntryPoint:!1,Events:[Da,Ro,au,O,G,wh]},Ka={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vx={bundleType:Ka.bundleType,version:Ka.version,rendererPackageName:Ka.rendererPackageName,rendererConfig:Ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:me.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ma(n),n===null?null:n.stateNode},findFiberByHostInstance:Ka.findFiberByHostInstance||mx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{Is=Hu.inject(vx),On=Hu}catch{}}return Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yx,Nn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bh(s))throw Error(t(200));return px(n,s,null,a)},Nn.createRoot=function(n,s){if(!bh(n))throw Error(t(299));var a=!1,d="",f=kg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Ch(n,1,!1,null,null,a,!1,d,f),n[ai]=s.current,Aa(n.nodeType===8?n.parentNode:n),new Ph(s)},Nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ma(s),n=n===null?null:n.stateNode,n},Nn.flushSync=function(n){return Us(n)},Nn.hydrate=function(n,s,a){if(!$u(s))throw Error(t(200));return Wu(null,n,s,!0,a)},Nn.hydrateRoot=function(n,s,a){if(!bh(n))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,y="",x=kg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),s=Pg(s,null,n,1,a??null,f,!1,y,x),n[ai]=s.current,Aa(n),d)for(n=0;n<d.length;n++)a=d[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Bu(s)},Nn.render=function(n,s,a){if(!$u(s))throw Error(t(200));return Wu(null,n,s,!1,a)},Nn.unmountComponentAtNode=function(n){if(!$u(n))throw Error(t(40));return n._reactRootContainer?(Us(function(){Wu(null,null,n,!1,function(){n._reactRootContainer=null,n[ai]=null})}),!0):!1},Nn.unstable_batchedUpdates=wh,Nn.unstable_renderSubtreeIntoContainer=function(n,s,a,d){if(!$u(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Wu(n,s,a,!1,d)},Nn.version="18.3.1-next-f1338f8080-20240426",Nn}var Fg;function kv(){if(Fg)return Nh.exports;Fg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Nh.exports=Rx(),Nh.exports}var Ug;function Px(){if(Ug)return qu;Ug=1;var r=kv();return qu.createRoot=r.createRoot,qu.hydrateRoot=r.hydrateRoot,qu}var bx=Px();const kx=Pv(bx);kv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ul.apply(this,arguments)}var es;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(es||(es={}));const zg="popstate";function Ax(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:h,hash:p}=i.location;return Qh("",{pathname:l,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:pc(o)}return jx(e,t,null,r)}function Rt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Rf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Nx(){return Math.random().toString(36).substr(2,8)}function Bg(r,e){return{usr:r.state,key:r.key,idx:e}}function Qh(r,e,t,i){return t===void 0&&(t=null),ul({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?sa(e):e,{state:t,key:e&&e.key||i||Nx()})}function pc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function sa(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function jx(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,p=es.Pop,m=null,v=w();v==null&&(v=0,h.replaceState(ul({},h.state,{idx:v}),""));function w(){return(h.state||{idx:null}).idx}function T(){p=es.Pop;let U=w(),ce=U==null?null:U-v;v=U,m&&m({action:p,location:Z.location,delta:ce})}function I(U,ce){p=es.Push;let ne=Qh(Z.location,U,ce);v=w()+1;let de=Bg(ne,v),me=Z.createHref(ne);try{h.pushState(de,"",me)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(me)}l&&m&&m({action:p,location:Z.location,delta:1})}function z(U,ce){p=es.Replace;let ne=Qh(Z.location,U,ce);v=w();let de=Bg(ne,v),me=Z.createHref(ne);h.replaceState(de,"",me),l&&m&&m({action:p,location:Z.location,delta:0})}function K(U){let ce=o.location.origin!=="null"?o.location.origin:o.location.href,ne=typeof U=="string"?U:pc(U);return ne=ne.replace(/ $/,"%20"),Rt(ce,"No window.location.(origin|href) available to create URL for href: "+ne),new URL(ne,ce)}let Z={get action(){return p},get location(){return r(o,h)},listen(U){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(zg,T),m=U,()=>{o.removeEventListener(zg,T),m=null}},createHref(U){return e(o,U)},createURL:K,encodeLocation(U){let ce=K(U);return{pathname:ce.pathname,search:ce.search,hash:ce.hash}},push:I,replace:z,go(U){return h.go(U)}};return Z}var $g;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})($g||($g={}));function Dx(r,e,t){return t===void 0&&(t="/"),Lx(r,e,t)}function Lx(r,e,t,i){let o=typeof e=="string"?sa(e):e,l=Pf(o.pathname||"/",t);if(l==null)return null;let h=Av(r);Vx(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let v=Kx(l);p=Hx(h[m],v)}return p}function Av(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(Rt(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let v=rs([i,m.relativePath]),w=t.concat(m);l.children&&l.children.length>0&&(Rt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Av(l.children,e,w,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:$x(v,l.index),routesMeta:w})};return r.forEach((l,h)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,h);else for(let m of Nv(l.path))o(l,h,m)}),e}function Nv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=Nv(i.join("/")),p=[];return p.push(...h.map(m=>m===""?l:[l,m].join("/"))),o&&p.push(...h),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function Vx(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Wx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const Ox=/^:[\w-]+$/,Mx=3,Fx=2,Ux=1,zx=10,Bx=-2,Wg=r=>r==="*";function $x(r,e){let t=r.split("/"),i=t.length;return t.some(Wg)&&(i+=Bx),e&&(i+=Fx),t.filter(o=>!Wg(o)).reduce((o,l)=>o+(Ox.test(l)?Mx:l===""?Ux:zx),i)}function Wx(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function Hx(r,e,t){let{routesMeta:i}=r,o={},l="/",h=[];for(let p=0;p<i.length;++p){let m=i[p],v=p===i.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=qx({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},w),I=m.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:rs([l,T.pathname]),pathnameBase:Zx(rs([l,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(l=rs([l,T.pathnameBase]))}return h}function qx(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=Gx(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((v,w,T)=>{let{paramName:I,isOptional:z}=w;if(I==="*"){let Z=p[T]||"";h=l.slice(0,l.length-Z.length).replace(/(.)\/+$/,"$1")}const K=p[T];return z&&!K?v[I]=void 0:v[I]=(K||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:r}}function Gx(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Rf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function Kx(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Pf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const Qx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yx=r=>Qx.test(r);function Jx(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?sa(r):r,l;if(t)if(Yx(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Rf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Hg(t.substring(1),"/"):l=Hg(t,e)}else l=e;return{pathname:l,search:eE(i),hash:tE(o)}}function Hg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Lh(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xx(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function bf(r,e){let t=Xx(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function kf(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=sa(r):(o=ul({},r),Rt(!o.pathname||!o.pathname.includes("?"),Lh("?","pathname","search",o)),Rt(!o.pathname||!o.pathname.includes("#"),Lh("#","pathname","hash",o)),Rt(!o.search||!o.search.includes("#"),Lh("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,p;if(h==null)p=t;else{let T=e.length-1;if(!i&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),T-=1;o.pathname=I.join("/")}p=T>=0?e[T]:"/"}let m=Jx(o,p),v=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(v||w)&&(m.pathname+="/"),m}const rs=r=>r.join("/").replace(/\/\/+/g,"/"),Zx=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),eE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,tE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function nE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const jv=["post","put","patch","delete"];new Set(jv);const rE=["get",...jv];new Set(rE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},cl.apply(this,arguments)}const Af=F.createContext(null),iE=F.createContext(null),ys=F.createContext(null),Lc=F.createContext(null),vs=F.createContext({outlet:null,matches:[],isDataRoute:!1}),Dv=F.createContext(null);function sE(r,e){let{relative:t}=e===void 0?{}:e;oa()||Rt(!1);let{basename:i,navigator:o}=F.useContext(ys),{hash:l,pathname:h,search:p}=Vv(r,{relative:t}),m=h;return i!=="/"&&(m=h==="/"?i:rs([i,h])),o.createHref({pathname:m,search:p,hash:l})}function oa(){return F.useContext(Lc)!=null}function wl(){return oa()||Rt(!1),F.useContext(Lc).location}function Lv(r){F.useContext(ys).static||F.useLayoutEffect(r)}function Vc(){let{isDataRoute:r}=F.useContext(vs);return r?vE():oE()}function oE(){oa()||Rt(!1);let r=F.useContext(Af),{basename:e,future:t,navigator:i}=F.useContext(ys),{matches:o}=F.useContext(vs),{pathname:l}=wl(),h=JSON.stringify(bf(o,t.v7_relativeSplatPath)),p=F.useRef(!1);return Lv(()=>{p.current=!0}),F.useCallback(function(v,w){if(w===void 0&&(w={}),!p.current)return;if(typeof v=="number"){i.go(v);return}let T=kf(v,JSON.parse(h),l,w.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:rs([e,T.pathname])),(w.replace?i.replace:i.push)(T,w.state,w)},[e,i,h,l,r])}function Vv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=F.useContext(ys),{matches:o}=F.useContext(vs),{pathname:l}=wl(),h=JSON.stringify(bf(o,i.v7_relativeSplatPath));return F.useMemo(()=>kf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function aE(r,e){return lE(r,e)}function lE(r,e,t,i){oa()||Rt(!1);let{navigator:o}=F.useContext(ys),{matches:l}=F.useContext(vs),h=l[l.length-1],p=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let v=wl(),w;if(e){var T;let U=typeof e=="string"?sa(e):e;m==="/"||(T=U.pathname)!=null&&T.startsWith(m)||Rt(!1),w=U}else w=v;let I=w.pathname||"/",z=I;if(m!=="/"){let U=m.replace(/^\//,"").split("/");z="/"+I.replace(/^\//,"").split("/").slice(U.length).join("/")}let K=Dx(r,{pathname:z}),Z=fE(K&&K.map(U=>Object.assign({},U,{params:Object.assign({},p,U.params),pathname:rs([m,o.encodeLocation?o.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?m:rs([m,o.encodeLocation?o.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),l,t,i);return e&&Z?F.createElement(Lc.Provider,{value:{location:cl({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:es.Pop}},Z):Z}function uE(){let r=yE(),e=nE(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:o},t):null,null)}const cE=F.createElement(uE,null);class dE extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?F.createElement(vs.Provider,{value:this.props.routeContext},F.createElement(Dv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hE(r){let{routeContext:e,match:t,children:i}=r,o=F.useContext(Af);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(vs.Provider,{value:e},i)}function fE(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let w=h.findIndex(T=>T.route.id&&(p==null?void 0:p[T.route.id])!==void 0);w>=0||Rt(!1),h=h.slice(0,Math.min(h.length,w+1))}let m=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let w=0;w<h.length;w++){let T=h[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(v=w),T.route.id){let{loaderData:I,errors:z}=t,K=T.route.loader&&I[T.route.id]===void 0&&(!z||z[T.route.id]===void 0);if(T.route.lazy||K){m=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((w,T,I)=>{let z,K=!1,Z=null,U=null;t&&(z=p&&T.route.id?p[T.route.id]:void 0,Z=T.route.errorElement||cE,m&&(v<0&&I===0?(_E("route-fallback"),K=!0,U=null):v===I&&(K=!0,U=T.route.hydrateFallbackElement||null)));let ce=e.concat(h.slice(0,I+1)),ne=()=>{let de;return z?de=Z:K?de=U:T.route.Component?de=F.createElement(T.route.Component,null):T.route.element?de=T.route.element:de=w,F.createElement(hE,{match:T,routeContext:{outlet:w,matches:ce,isDataRoute:t!=null},children:de})};return t&&(T.route.ErrorBoundary||T.route.errorElement||I===0)?F.createElement(dE,{location:t.location,revalidation:t.revalidation,component:Z,error:z,children:ne(),routeContext:{outlet:null,matches:ce,isDataRoute:!0}}):ne()},null)}var Ov=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Ov||{}),Mv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Mv||{});function pE(r){let e=F.useContext(Af);return e||Rt(!1),e}function mE(r){let e=F.useContext(iE);return e||Rt(!1),e}function gE(r){let e=F.useContext(vs);return e||Rt(!1),e}function Fv(r){let e=gE(),t=e.matches[e.matches.length-1];return t.route.id||Rt(!1),t.route.id}function yE(){var r;let e=F.useContext(Dv),t=mE(),i=Fv();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function vE(){let{router:r}=pE(Ov.UseNavigateStable),e=Fv(Mv.UseNavigateStable),t=F.useRef(!1);return Lv(()=>{t.current=!0}),F.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,cl({fromRouteId:e},l)))},[r,e])}const qg={};function _E(r,e,t){qg[r]||(qg[r]=!0)}function wE(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function xE(r){let{to:e,replace:t,state:i,relative:o}=r;oa()||Rt(!1);let{future:l,static:h}=F.useContext(ys),{matches:p}=F.useContext(vs),{pathname:m}=wl(),v=Vc(),w=kf(e,bf(p,l.v7_relativeSplatPath),m,o==="path"),T=JSON.stringify(w);return F.useEffect(()=>v(JSON.parse(T),{replace:t,state:i,relative:o}),[v,T,o,t,i]),null}function Cr(r){Rt(!1)}function EE(r){let{basename:e="/",children:t=null,location:i,navigationType:o=es.Pop,navigator:l,static:h=!1,future:p}=r;oa()&&Rt(!1);let m=e.replace(/^\/*/,"/"),v=F.useMemo(()=>({basename:m,navigator:l,static:h,future:cl({v7_relativeSplatPath:!1},p)}),[m,p,l,h]);typeof i=="string"&&(i=sa(i));let{pathname:w="/",search:T="",hash:I="",state:z=null,key:K="default"}=i,Z=F.useMemo(()=>{let U=Pf(w,m);return U==null?null:{location:{pathname:U,search:T,hash:I,state:z,key:K},navigationType:o}},[m,w,T,I,z,K,o]);return Z==null?null:F.createElement(ys.Provider,{value:v},F.createElement(Lc.Provider,{children:t,value:Z}))}function TE(r){let{children:e,location:t}=r;return aE(Yh(e),t)}new Promise(()=>{});function Yh(r,e){e===void 0&&(e=[]);let t=[];return F.Children.forEach(r,(i,o)=>{if(!F.isValidElement(i))return;let l=[...e,o];if(i.type===F.Fragment){t.push.apply(t,Yh(i.props.children,l));return}i.type!==Cr&&Rt(!1),!i.props.index||!i.props.children||Rt(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Yh(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jh(){return Jh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Jh.apply(this,arguments)}function SE(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function IE(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function CE(r,e){return r.button===0&&(!e||e==="_self")&&!IE(r)}const RE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PE="6";try{window.__reactRouterVersion=PE}catch{}const bE="startTransition",Gg=Sx[bE];function kE(r){let{basename:e,children:t,future:i,window:o}=r,l=F.useRef();l.current==null&&(l.current=Ax({window:o,v5Compat:!0}));let h=l.current,[p,m]=F.useState({action:h.action,location:h.location}),{v7_startTransition:v}=i||{},w=F.useCallback(T=>{v&&Gg?Gg(()=>m(T)):m(T)},[m,v]);return F.useLayoutEffect(()=>h.listen(w),[h,w]),F.useEffect(()=>wE(i),[i]),F.createElement(EE,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:h,future:i})}const AE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ws=F.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:p,target:m,to:v,preventScrollReset:w,viewTransition:T}=e,I=SE(e,RE),{basename:z}=F.useContext(ys),K,Z=!1;if(typeof v=="string"&&NE.test(v)&&(K=v,AE))try{let de=new URL(window.location.href),me=v.startsWith("//")?new URL(de.protocol+v):new URL(v),ie=Pf(me.pathname,z);me.origin===de.origin&&ie!=null?v=ie+me.search+me.hash:Z=!0}catch{}let U=sE(v,{relative:o}),ce=jE(v,{replace:h,state:p,target:m,preventScrollReset:w,relative:o,viewTransition:T});function ne(de){i&&i(de),de.defaultPrevented||ce(de)}return F.createElement("a",Jh({},I,{href:K||U,onClick:Z||l?i:ne,ref:t,target:m}))});var Kg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Kg||(Kg={}));var Qg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Qg||(Qg={}));function jE(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:p}=e===void 0?{}:e,m=Vc(),v=wl(),w=Vv(r,{relative:h});return F.useCallback(T=>{if(CE(T,t)){T.preventDefault();let I=i!==void 0?i:pc(v)===pc(w);m(r,{replace:I,state:o,preventScrollReset:l,relative:h,viewTransition:p})}},[v,m,w,i,o,t,r,l,h,p])}const DE=()=>{};var Yg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},LE=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],p=r[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},zv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,p=h?r[o+1]:0,m=o+2<r.length,v=m?r[o+2]:0,w=l>>2,T=(l&3)<<4|p>>4;let I=(p&15)<<2|v>>6,z=v&63;m||(z=64,h||(I=64)),i.push(t[w],t[T],t[I],t[z])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Uv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):LE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||T==null)throw new VE;const I=l<<2|p>>4;if(i.push(I),v!==64){const z=p<<4&240|v>>2;if(i.push(z),T!==64){const K=v<<6&192|T;i.push(K)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class VE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OE=function(r){const e=Uv(r);return zv.encodeByteArray(e,!0)},mc=function(r){return OE(r).replace(/\./g,"")},Bv=function(r){try{return zv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=()=>ME().__FIREBASE_DEFAULTS__,UE=()=>{if(typeof process>"u"||typeof Yg>"u")return;const r=Yg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},zE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Bv(r[1]);return e&&JSON.parse(e)},Oc=()=>{try{return DE()||FE()||UE()||zE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},$v=r=>{var e,t;return(t=(e=Oc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},BE=r=>{const e=$v(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Wv=()=>{var r;return(r=Oc())===null||r===void 0?void 0:r.config},Hv=r=>{var e;return(e=Oc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[mc(JSON.stringify(t)),mc(JSON.stringify(h)),""].join(".")}const rl={};function HE(){const r={prod:[],emulator:[]};for(const e of Object.keys(rl))rl[e]?r.emulator.push(e):r.prod.push(e);return r}function qE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Jg=!1;function Gv(r,e){if(typeof window>"u"||typeof document>"u"||!aa(window.location.host)||rl[r]===e||rl[r]||Jg)return;rl[r]=e;function t(I){return`__firebase__banner__${I}`}const i="__firebase__banner",l=HE().prod.length>0;function h(){const I=document.getElementById(i);I&&I.remove()}function p(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function m(I,z){I.setAttribute("width","24"),I.setAttribute("id",z),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function v(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Jg=!0,h()},I}function w(I,z){I.setAttribute("id",z),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function T(){const I=qE(i),z=t("text"),K=document.getElementById(z)||document.createElement("span"),Z=t("learnmore"),U=document.getElementById(Z)||document.createElement("a"),ce=t("preprendIcon"),ne=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const de=I.element;p(de),w(U,Z);const me=v();m(ne,ce),de.append(ne,K,U,me),document.body.appendChild(de)}l?(K.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function KE(){var r;const e=(r=Oc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function JE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XE(){const r=gn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function ZE(){return!KE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eT(){try{return typeof indexedDB=="object"}catch{return!1}}function tT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="FirebaseError";class Ii extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=nT,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xl.prototype.create)}}class xl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?rT(l,i):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Ii(o,p,i)}}function rT(r,e){return r.replace(iT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const iT=/\{\$([^}]+)}/g;function sT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ys(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Xg(l)&&Xg(h)){if(!Ys(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Xg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ya(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ja(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function oT(r,e){const t=new aT(r,e);return t.subscribe.bind(t)}class aT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");lT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Vh),o.error===void 0&&(o.error=Vh),o.complete===void 0&&(o.complete=Vh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Vh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(r){return r&&r._delegate?r._delegate:r}class Js{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new $E;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dT(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cT(r){return r===Hs?void 0:r}function dT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ge||(Ge={}));const fT={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},pT=Ge.INFO,mT={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},gT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=mT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nf{constructor(e){this.name=e,this._logLevel=pT,this._logHandler=gT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const yT=(r,e)=>e.some(t=>r instanceof t);let Zg,ey;function vT(){return Zg||(Zg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _T(){return ey||(ey=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kv=new WeakMap,Xh=new WeakMap,Qv=new WeakMap,Oh=new WeakMap,jf=new WeakMap;function wT(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(is(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Kv.set(t,r)}).catch(()=>{}),jf.set(e,r),e}function xT(r){if(Xh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Xh.set(r,e)}let Zh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Xh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Qv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return is(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ET(r){Zh=r(Zh)}function TT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Mh(this),e,...t);return Qv.set(i,e.sort?e.sort():[e]),is(i)}:_T().includes(r)?function(...e){return r.apply(Mh(this),e),is(Kv.get(this))}:function(...e){return is(r.apply(Mh(this),e))}}function ST(r){return typeof r=="function"?TT(r):(r instanceof IDBTransaction&&xT(r),yT(r,vT())?new Proxy(r,Zh):r)}function is(r){if(r instanceof IDBRequest)return wT(r);if(Oh.has(r))return Oh.get(r);const e=ST(r);return e!==r&&(Oh.set(r,e),jf.set(e,r)),e}const Mh=r=>jf.get(r);function IT(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),p=is(h);return i&&h.addEventListener("upgradeneeded",m=>{i(is(h.result),m.oldVersion,m.newVersion,is(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const CT=["get","getKey","getAll","getAllKeys","count"],RT=["put","add","delete","clear"],Fh=new Map;function ty(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Fh.get(e))return Fh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=RT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||CT.includes(t)))return;const l=async function(h,...p){const m=this.transaction(h,o?"readwrite":"readonly");let v=m.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&m.done]))[0]};return Fh.set(e,l),l}ET(r=>({...r,get:(e,t,i)=>ty(e,t)||r.get(e,t,i),has:(e,t)=>!!ty(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function bT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ef="@firebase/app",ny="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Nf("@firebase/app"),kT="@firebase/app-compat",AT="@firebase/analytics-compat",NT="@firebase/analytics",jT="@firebase/app-check-compat",DT="@firebase/app-check",LT="@firebase/auth",VT="@firebase/auth-compat",OT="@firebase/database",MT="@firebase/data-connect",FT="@firebase/database-compat",UT="@firebase/functions",zT="@firebase/functions-compat",BT="@firebase/installations",$T="@firebase/installations-compat",WT="@firebase/messaging",HT="@firebase/messaging-compat",qT="@firebase/performance",GT="@firebase/performance-compat",KT="@firebase/remote-config",QT="@firebase/remote-config-compat",YT="@firebase/storage",JT="@firebase/storage-compat",XT="@firebase/firestore",ZT="@firebase/ai",eS="@firebase/firestore-compat",tS="firebase",nS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="[DEFAULT]",rS={[ef]:"fire-core",[kT]:"fire-core-compat",[NT]:"fire-analytics",[AT]:"fire-analytics-compat",[DT]:"fire-app-check",[jT]:"fire-app-check-compat",[LT]:"fire-auth",[VT]:"fire-auth-compat",[OT]:"fire-rtdb",[MT]:"fire-data-connect",[FT]:"fire-rtdb-compat",[UT]:"fire-fn",[zT]:"fire-fn-compat",[BT]:"fire-iid",[$T]:"fire-iid-compat",[WT]:"fire-fcm",[HT]:"fire-fcm-compat",[qT]:"fire-perf",[GT]:"fire-perf-compat",[KT]:"fire-rc",[QT]:"fire-rc-compat",[YT]:"fire-gcs",[JT]:"fire-gcs-compat",[XT]:"fire-fst",[eS]:"fire-fst-compat",[ZT]:"fire-vertex","fire-js":"fire-js",[tS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new Map,iS=new Map,nf=new Map;function ry(r,e){try{r.container.addComponent(e)}catch(t){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Zo(r){const e=r.name;if(nf.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;nf.set(e,r);for(const t of gc.values())ry(t,r);for(const t of iS.values())ry(t,r);return!0}function Df(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Hn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new xl("app","Firebase",sS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=nS;function Yv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:tf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw ss.create("bad-app-name",{appName:String(o)});if(t||(t=Wv()),!t)throw ss.create("no-options");const l=gc.get(o);if(l){if(Ys(t,l.options)&&Ys(i,l.config))return l;throw ss.create("duplicate-app",{appName:o})}const h=new hT(o);for(const m of nf.values())h.addComponent(m);const p=new oS(t,i,h);return gc.set(o,p),p}function Jv(r=tf){const e=gc.get(r);if(!e&&r===tf&&Wv())return Yv();if(!e)throw ss.create("no-app",{appName:r});return e}function os(r,e,t){var i;let o=(i=rS[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(p.join(" "));return}Zo(new Js(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firebase-heartbeat-database",lS=1,dl="firebase-heartbeat-store";let Uh=null;function Xv(){return Uh||(Uh=IT(aS,lS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(dl)}catch(t){console.warn(t)}}}}).catch(r=>{throw ss.create("idb-open",{originalErrorMessage:r.message})})),Uh}async function uS(r){try{const t=(await Xv()).transaction(dl),i=await t.objectStore(dl).get(Zv(r));return await t.done,i}catch(e){if(e instanceof Ii)wi.warn(e.message);else{const t=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(t.message)}}}async function iy(r,e){try{const i=(await Xv()).transaction(dl,"readwrite");await i.objectStore(dl).put(e,Zv(r)),await i.done}catch(t){if(t instanceof Ii)wi.warn(t.message);else{const i=ss.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});wi.warn(i.message)}}}function Zv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=1024,dS=30;class hS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=sy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>dS){const h=mS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){wi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sy(),{heartbeatsToSend:i,unsentEntries:o}=fS(this._heartbeatsCache.heartbeats),l=mc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return wi.warn(t),""}}}function sy(){return new Date().toISOString().substring(0,10)}function fS(r,e=cS){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),oy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),oy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class pS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eT()?tT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await uS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return iy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return iy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function oy(r){return mc(JSON.stringify({version:2,heartbeats:r})).length}function mS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(r){Zo(new Js("platform-logger",e=>new PT(e),"PRIVATE")),Zo(new Js("heartbeat",e=>new hS(e),"PRIVATE")),os(ef,ny,r),os(ef,ny,"esm2017"),os("fire-js","")}gS("");var yS="firebase",vS="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os(yS,vS,"app");function Lf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function e_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _S=e_,t_=new xl("auth","Firebase",e_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Nf("@firebase/auth");function wS(r,...e){yc.logLevel<=Ge.WARN&&yc.warn(`Auth (${la}): ${r}`,...e)}function rc(r,...e){yc.logLevel<=Ge.ERROR&&yc.error(`Auth (${la}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(r,...e){throw Of(r,...e)}function Pr(r,...e){return Of(r,...e)}function Vf(r,e,t){const i=Object.assign(Object.assign({},_S()),{[e]:t});return new xl("auth","Firebase",i).create(e,{appName:r.name})}function vi(r){return Vf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xS(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ar(r,"argument-error"),Vf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Of(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return t_.create(r,...e)}function je(r,e,...t){if(!r)throw Of(e,...t)}function gi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw rc(e),new Error(e)}function xi(r,e){r||gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function ES(){return ay()==="http:"||ay()==="https:"}function ay(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ES()||YE()||"connection"in navigator)?navigator.onLine:!0}function SS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t){this.shortDelay=e,this.longDelay=t,xi(t>e,"Short delay should be less than long delay!"),this.isMobile=GE()||JE()}get(){return TS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(r,e){xi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RS=new Tl(3e4,6e4);function _s(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function ws(r,e,t,i,o={}){return r_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const p=El(Object.assign({key:r.config.apiKey},h)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:m},l);return QE()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&aa(r.emulatorConfig.host)&&(v.credentials="include"),n_.fetch()(await i_(r,r.config.apiHost,t,p),v)})}async function r_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},IS),e);try{const o=new bS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Gu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[m,v]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gu(r,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw Gu(r,"email-already-in-use",h);if(m==="USER_DISABLED")throw Gu(r,"user-disabled",h);const w=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Vf(r,w,v);ar(r,w)}}catch(o){if(o instanceof Ii)throw o;ar(r,"network-request-failed",{message:String(o)})}}async function Sl(r,e,t,i,o={}){const l=await ws(r,e,t,i,o);return"mfaPendingCredential"in l&&ar(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function i_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?Mf(r.config,o):`${r.config.apiScheme}://${o}`;return CS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function PS(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Pr(this.auth,"network-request-failed")),RS.get())})}}function Gu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Pr(r,e,i);return o.customData._tokenResponse=t,o}function ly(r){return r!==void 0&&r.enterprise!==void 0}class kS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return PS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AS(r,e){return ws(r,"GET","/v2/recaptchaConfig",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NS(r,e){return ws(r,"POST","/v1/accounts:delete",e)}async function vc(r,e){return ws(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jS(r,e=!1){const t=nn(r),i=await t.getIdToken(e),o=Ff(i);je(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:il(zh(o.auth_time)),issuedAtTime:il(zh(o.iat)),expirationTime:il(zh(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function zh(r){return Number(r)*1e3}function Ff(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return rc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Bv(t);return o?JSON.parse(o):(rc("Failed to decode base64 JWT payload"),null)}catch(o){return rc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function uy(r){const e=Ff(r);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ii&&DS(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function DS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=il(this.lastLoginAt),this.creationTime=il(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(r){var e;const t=r.auth,i=await r.getIdToken(),o=await hl(r,vc(t,{idToken:i}));je(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?s_(l.providerUserInfo):[],p=OS(r.providerData,h),m=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),w=m?v:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new sf(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,T)}async function VS(r){const e=nn(r);await _c(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OS(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function s_(r){return r.map(e=>{var{providerId:t}=e,i=Lf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(r,e){const t=await r_(r,{},async()=>{const i=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await i_(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:i};return r.emulatorConfig&&aa(r.emulatorConfig.host)&&(m.credentials="include"),n_.fetch()(h,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function FS(r,e){return ws(r,"POST","/v2/accounts:revokeToken",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=uy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await MS(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Ko;return i&&(je(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(je(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(je(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(r,e){je(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Lf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new sf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await hl(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jS(this,e)}reload(){return VS(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await _c(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await hl(this,NS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,p,m,v,w;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,z=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,K=(h=t.photoURL)!==null&&h!==void 0?h:void 0,Z=(p=t.tenantId)!==null&&p!==void 0?p:void 0,U=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,ce=(v=t.createdAt)!==null&&v!==void 0?v:void 0,ne=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:de,emailVerified:me,isAnonymous:ie,providerData:ee,stsTokenManager:N}=t;je(de&&N,e,"internal-error");const C=Ko.fromJSON(this.name,N);je(typeof de=="string",e,"internal-error"),Qi(T,e.name),Qi(I,e.name),je(typeof me=="boolean",e,"internal-error"),je(typeof ie=="boolean",e,"internal-error"),Qi(z,e.name),Qi(K,e.name),Qi(Z,e.name),Qi(U,e.name),Qi(ce,e.name),Qi(ne,e.name);const b=new Rr({uid:de,auth:e,email:I,emailVerified:me,displayName:T,isAnonymous:ie,photoURL:K,phoneNumber:z,tenantId:Z,stsTokenManager:C,createdAt:ce,lastLoginAt:ne});return ee&&Array.isArray(ee)&&(b.providerData=ee.map(P=>Object.assign({},P))),U&&(b._redirectEventId=U),b}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ko;o.updateFromServerResponse(t);const l=new Rr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await _c(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];je(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?s_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Ko;p.updateFromIdToken(i);const m=new Rr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new sf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;function yi(r){xi(r instanceof Function,"Expected a class definition");let e=cy.get(r);return e?(xi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,cy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}o_.type="NONE";const dy=o_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(r,e,t){return`firebase:${r}:${e}:${t}`}class Qo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=ic(this.userKey,o.apiKey,l),this.fullPersistenceKey=ic("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await vc(this.auth,{idToken:e}).catch(()=>{});return t?Rr._fromGetAccountInfoResponse(this.auth,t,e):null}return Rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Qo(yi(dy),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||yi(dy);const h=ic(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const w=await v._get(h);if(w){let T;if(typeof w=="string"){const I=await vc(e,{idToken:w}).catch(()=>{});if(!I)break;T=await Rr._fromGetAccountInfoResponse(e,I,w)}else T=Rr._fromJSON(e,w);v!==l&&(p=T),l=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Qo(l,e,i):(l=m[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Qo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h_(e))return"Blackberry";if(f_(e))return"Webos";if(l_(e))return"Safari";if((e.includes("chrome/")||u_(e))&&!e.includes("edge/"))return"Chrome";if(d_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function a_(r=gn()){return/firefox\//i.test(r)}function l_(r=gn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u_(r=gn()){return/crios\//i.test(r)}function c_(r=gn()){return/iemobile/i.test(r)}function d_(r=gn()){return/android/i.test(r)}function h_(r=gn()){return/blackberry/i.test(r)}function f_(r=gn()){return/webos/i.test(r)}function Uf(r=gn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function US(r=gn()){var e;return Uf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zS(){return XE()&&document.documentMode===10}function p_(r=gn()){return Uf(r)||d_(r)||f_(r)||h_(r)||/windows phone/i.test(r)||c_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(r,e=[]){let t;switch(r){case"Browser":t=hy(gn());break;case"Worker":t=`${hy(gn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${la}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,p)=>{try{const m=e(l);h(m)}catch(m){p(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(r,e={}){return ws(r,"GET","/v2/passwordPolicy",_s(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=6;class HS{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:WS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fy(this),this.idTokenSubscription=new fy(this),this.beforeStateQueue=new BS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vc(this,{idToken:e}),i=await Rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Hn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===p)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _c(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(vi(this));const t=e?nn(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $S(this),t=new HS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await FS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yi(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&wS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xs(r){return nn(r)}class fy{constructor(e){this.auth=e,this.observer=null,this.addObserver=oT(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GS(r){Mc=r}function g_(r){return Mc.loadJS(r)}function KS(){return Mc.recaptchaEnterpriseScript}function QS(){return Mc.gapiScript}function YS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class JS{constructor(){this.enterprise=new XS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class XS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ZS="recaptcha-enterprise",y_="NO_RECAPTCHA";class e1{constructor(e){this.type=ZS,this.auth=xs(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,p)=>{AS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new kS(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(m=>{p(m)})})}function o(l,h,p){const m=window.grecaptcha;ly(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(y_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JS().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(p=>{if(!t&&ly(window.grecaptcha))o(p,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=KS();m.length!==0&&(m+=p),g_(m).then(()=>{o(p,l,h)}).catch(v=>{h(v)})}}).catch(p=>{h(p)})})}}async function py(r,e,t,i=!1,o=!1){const l=new e1(r);let h;if(o)h=y_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function of(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await py(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await py(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(r,e){const t=Df(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ys(l,e??{}))return o;ar(o,"already-initialized")}return t.initialize({options:e})}function n1(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(yi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function r1(r,e,t){const i=xs(r);je(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=v_(e),{host:h,port:p}=i1(e),m=p===null?"":`:${p}`,v={url:`${l}//${h}${m}/`},w=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){je(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),je(Ys(v,i.config.emulator)&&Ys(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,aa(h)?(qv(`${l}//${h}${m}`),Gv("Auth",!0)):s1()}function v_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function i1(r){const e=v_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:my(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:my(h)}}}function my(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function s1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,t){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}async function o1(r,e){return ws(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(r,e){return Sl(r,"POST","/v1/accounts:signInWithPassword",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(r,e){return Sl(r,"POST","/v1/accounts:signInWithEmailLink",_s(r,e))}async function u1(r,e){return Sl(r,"POST","/v1/accounts:signInWithEmailLink",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends zf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new fl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new fl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return of(e,t,"signInWithPassword",a1);case"emailLink":return l1(e,{email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return of(e,i,"signUpPassword",o1);case"emailLink":return u1(e,{idToken:t,email:this._email,oobCode:this._password});default:ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(r,e){return Sl(r,"POST","/v1/accounts:signInWithIdp",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="http://localhost";class Xs extends zf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Lf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new Xs(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Yo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Yo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yo(e,t)}buildRequest(){const e={requestUri:c1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=El(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function h1(r){const e=Ya(Ja(r)).link,t=e?Ya(Ja(e)).deep_link_id:null,i=Ya(Ja(r)).deep_link_id;return(i?Ya(Ja(i)).link:null)||i||t||e||r}class Bf{constructor(e){var t,i,o,l,h,p;const m=Ya(Ja(e)),v=(t=m.apiKey)!==null&&t!==void 0?t:null,w=(i=m.oobCode)!==null&&i!==void 0?i:null,T=d1((o=m.mode)!==null&&o!==void 0?o:null);je(v&&w&&T,"argument-error"),this.apiKey=v,this.operation=T,this.code=w,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=m.lang)!==null&&h!==void 0?h:null,this.tenantId=(p=m.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=h1(e);try{return new Bf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.providerId=ua.PROVIDER_ID}static credential(e,t){return fl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Bf.parseLink(t);return je(i,"argument-error"),fl._fromEmailAndCode(e,i.code,i.tenantId)}}ua.PROVIDER_ID="password";ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends $f{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Il{constructor(){super("facebook.com")}static credential(e){return Xs._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Il{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xs._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Wr.credential(t,i)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Il{constructor(){super("github.com")}static credential(e){return Xs._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Il{constructor(){super("twitter.com")}static credential(e,t){return Xs._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Xi.credential(t,i)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(r,e){return Sl(r,"POST","/v1/accounts:signUp",_s(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Rr._fromIdTokenResponse(e,i,o),h=gy(i);return new Zs({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=gy(i);return new Zs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function gy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends Ii{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,wc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new wc(e,t,i,o)}}function __(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?wc._fromErrorAndOperation(r,l,e,i):l})}async function p1(r,e,t=!1){const i=await hl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Zs._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(r,e,t=!1){const{auth:i}=r;if(Hn(i.app))return Promise.reject(vi(i));const o="reauthenticate";try{const l=await hl(r,__(i,o,e,r),t);je(l.idToken,i,"internal-error");const h=Ff(l.idToken);je(h,i,"internal-error");const{sub:p}=h;return je(r.uid===p,i,"user-mismatch"),Zs._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ar(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(r,e,t=!1){if(Hn(r.app))return Promise.reject(vi(r));const i="signIn",o=await __(r,i,e),l=await Zs._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function g1(r,e){return w_(xs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x_(r){const e=xs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function y1(r,e,t){if(Hn(r.app))return Promise.reject(vi(r));const i=xs(r),h=await of(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",f1).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&x_(r),m}),p=await Zs._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function E_(r,e,t){return Hn(r.app)?Promise.reject(vi(r)):g1(nn(r),ua.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&x_(r),i})}function v1(r,e,t,i){return nn(r).onIdTokenChanged(e,t,i)}function _1(r,e,t){return nn(r).beforeAuthStateChanged(e,t)}function w1(r,e,t,i){return nn(r).onAuthStateChanged(e,t,i)}function T_(r){return nn(r).signOut()}const xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xc,"1"),this.storage.removeItem(xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=1e3,E1=10;class I_ extends S_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);zS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,E1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},x1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}I_.type="LOCAL";const T1=I_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends S_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}C_.type="SESSION";const R_=C_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Fc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(h).map(async v=>v(t.origin,l)),m=await S1(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,m)=>{const v=Wf("",20);o.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===v)switch(I.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(I.data.response);break;default:clearTimeout(w),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return window}function C1(r){Hr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){return typeof Hr().WorkerGlobalScope<"u"&&typeof Hr().importScripts=="function"}async function R1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function b1(){return P_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="firebaseLocalStorageDb",k1=1,Ec="firebaseLocalStorage",k_="fbase_key";class Cl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uc(r,e){return r.transaction([Ec],e?"readwrite":"readonly").objectStore(Ec)}function A1(){const r=indexedDB.deleteDatabase(b_);return new Cl(r).toPromise()}function af(){const r=indexedDB.open(b_,k1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Ec,{keyPath:k_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Ec)?e(i):(i.close(),await A1(),e(await af()))})})}async function yy(r,e,t){const i=Uc(r,!0).put({[k_]:e,value:t});return new Cl(i).toPromise()}async function N1(r,e){const t=Uc(r,!1).get(e),i=await new Cl(t).toPromise();return i===void 0?null:i.value}function vy(r,e){const t=Uc(r,!0).delete(e);return new Cl(t).toPromise()}const j1=800,D1=3;class A_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await af(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>D1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(b1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await R1(),!this.activeServiceWorker)return;this.sender=new I1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await af();return await yy(e,xc,"1"),await vy(e,xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>yy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>N1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Uc(o,!1).getAll();return new Cl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A_.type="LOCAL";const L1=A_;new Tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(r,e){return e?yi(e):(je(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf extends zf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function V1(r){return w_(r.auth,new Hf(r),r.bypassAuthState)}function O1(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),m1(t,new Hf(r),r.bypassAuthState)}async function M1(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),p1(t,new Hf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return V1;case"linkViaPopup":case"linkViaRedirect":return M1;case"reauthViaPopup":case"reauthViaRedirect":return O1;default:ar(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=new Tl(2e3,1e4);async function D_(r,e,t){if(Hn(r.app))return Promise.reject(Pr(r,"operation-not-supported-in-this-environment"));const i=xs(r);xS(r,e,$f);const o=N_(i,t);return new Gs(i,"signInViaPopup",e,o).executeNotNull()}class Gs extends j_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Gs.currentPopupAction&&Gs.currentPopupAction.cancel(),Gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=Wf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,F1.get())};e()}}Gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="pendingRedirect",sc=new Map;class z1 extends j_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=sc.get(this.auth._key());if(!e){try{const i=await B1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}sc.set(this.auth._key(),e)}return this.bypassAuthState||sc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B1(r,e){const t=H1(e),i=W1(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function $1(r,e){sc.set(r._key(),e)}function W1(r){return yi(r._redirectPersistence)}function H1(r){return ic(U1,r.config.apiKey,r.name)}async function q1(r,e,t=!1){if(Hn(r.app))return Promise.reject(vi(r));const i=xs(r),o=N_(i,e),h=await new z1(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=600*1e3;class K1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Q1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!L_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Pr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=G1&&this.cachedEventUids.clear(),this.cachedEventUids.has(_y(e))}saveEventToCache(e){this.cachedEventUids.add(_y(e)),this.lastProcessedEventTime=Date.now()}}function _y(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function L_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Q1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(r,e={}){return ws(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X1=/^https?/;async function Z1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Y1(r);for(const t of e)try{if(eI(t))return}catch{}ar(r,"unauthorized-domain")}function eI(r){const e=rf(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!X1.test(t))return!1;if(J1.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new Tl(3e4,6e4);function wy(){const r=Hr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function nI(r){return new Promise((e,t)=>{var i,o,l;function h(){wy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wy(),t(Pr(r,"network-request-failed"))},timeout:tI.get()})}if(!((o=(i=Hr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Hr().gapi)===null||l===void 0)&&l.load)h();else{const p=YS("iframefcb");return Hr()[p]=()=>{gapi.load?h():t(Pr(r,"network-request-failed"))},g_(`${QS()}?onload=${p}`).catch(m=>t(m))}}).catch(e=>{throw oc=null,e})}let oc=null;function rI(r){return oc=oc||nI(r),oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Tl(5e3,15e3),sI="__/auth/iframe",oI="emulator/auth/iframe",aI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uI(r){const e=r.config;je(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Mf(e,oI):`https://${r.config.authDomain}/${sI}`,i={apiKey:e.apiKey,appName:r.name,v:la},o=lI.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${El(i).slice(1)}`}async function cI(r){const e=await rI(r),t=Hr().gapi;return je(t,r,"internal-error"),e.open({where:document.body,url:uI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aI,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Pr(r,"network-request-failed"),p=Hr().setTimeout(()=>{l(h)},iI.get());function m(){Hr().clearTimeout(p),o(i)}i.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hI=500,fI=600,pI="_blank",mI="http://localhost";class xy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gI(r,e,t,i=hI,o=fI){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const m=Object.assign(Object.assign({},dI),{width:i.toString(),height:o.toString(),top:l,left:h}),v=gn().toLowerCase();t&&(p=u_(v)?pI:t),a_(v)&&(e=e||mI,m.scrollbars="yes");const w=Object.entries(m).reduce((I,[z,K])=>`${I}${z}=${K},`,"");if(US(v)&&p!=="_self")return yI(e||"",p),new xy(null);const T=window.open(e||"",p,w);je(T,r,"popup-blocked");try{T.focus()}catch{}return new xy(T)}function yI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="__/auth/handler",_I="emulator/auth/handler",wI=encodeURIComponent("fac");async function Ey(r,e,t,i,o,l){je(r.config.authDomain,r,"auth-domain-config-required"),je(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:la,eventId:o};if(e instanceof $f){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",sT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof Il){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const m=await r._getAppCheckToken(),v=m?`#${wI}=${encodeURIComponent(m)}`:"";return`${xI(r)}?${El(p).slice(1)}${v}`}function xI({config:r}){return r.emulator?Mf(r,_I):`https://${r.authDomain}/${vI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="webStorageSupport";class EI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R_,this._completeRedirectFn=q1,this._overrideRedirectResult=$1}async _openPopup(e,t,i,o){var l;xi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Ey(e,t,i,rf(),o);return gI(e,h,Wf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Ey(e,t,i,rf(),o);return C1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(xi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await cI(e),i=new K1(e);return t.register("authEvent",o=>(je(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bh,{type:Bh},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Bh];h!==void 0&&t(!!h),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Z1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return p_()||l_()||Uf()}}const TI=EI;var Ty="@firebase/auth",Sy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CI(r){Zo(new Js("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;je(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m_(r)},v=new qS(i,o,l,m);return n1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Zo(new Js("auth-internal",e=>{const t=xs(e.getProvider("auth").getImmediate());return(i=>new SI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),os(Ty,Sy,II(r)),os(Ty,Sy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=300,PI=Hv("authIdTokenMaxAge")||RI;let Iy=null;const bI=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>PI)return;const o=t==null?void 0:t.token;Iy!==o&&(Iy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function kI(r=Jv()){const e=Df(r,"auth");if(e.isInitialized())return e.getImmediate();const t=t1(r,{popupRedirectResolver:TI,persistence:[L1,T1,R_]}),i=Hv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=bI(l.toString());_1(t,h,()=>h(t.currentUser)),v1(t,p=>h(p))}}const o=$v("auth");return o&&r1(t,`http://${o}`),t}function AI(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}GS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Pr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",AI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CI("Browser");var Cy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,V_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,C){function b(){}b.prototype=C.prototype,N.D=C.prototype,N.prototype=new b,N.prototype.constructor=N,N.C=function(P,V,A){for(var R=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)R[Oe-2]=arguments[Oe];return C.prototype[V].apply(P,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,C,b){b||(b=0);var P=Array(16);if(typeof C=="string")for(var V=0;16>V;++V)P[V]=C.charCodeAt(b++)|C.charCodeAt(b++)<<8|C.charCodeAt(b++)<<16|C.charCodeAt(b++)<<24;else for(V=0;16>V;++V)P[V]=C[b++]|C[b++]<<8|C[b++]<<16|C[b++]<<24;C=N.g[0],b=N.g[1],V=N.g[2];var A=N.g[3],R=C+(A^b&(V^A))+P[0]+3614090360&4294967295;C=b+(R<<7&4294967295|R>>>25),R=A+(V^C&(b^V))+P[1]+3905402710&4294967295,A=C+(R<<12&4294967295|R>>>20),R=V+(b^A&(C^b))+P[2]+606105819&4294967295,V=A+(R<<17&4294967295|R>>>15),R=b+(C^V&(A^C))+P[3]+3250441966&4294967295,b=V+(R<<22&4294967295|R>>>10),R=C+(A^b&(V^A))+P[4]+4118548399&4294967295,C=b+(R<<7&4294967295|R>>>25),R=A+(V^C&(b^V))+P[5]+1200080426&4294967295,A=C+(R<<12&4294967295|R>>>20),R=V+(b^A&(C^b))+P[6]+2821735955&4294967295,V=A+(R<<17&4294967295|R>>>15),R=b+(C^V&(A^C))+P[7]+4249261313&4294967295,b=V+(R<<22&4294967295|R>>>10),R=C+(A^b&(V^A))+P[8]+1770035416&4294967295,C=b+(R<<7&4294967295|R>>>25),R=A+(V^C&(b^V))+P[9]+2336552879&4294967295,A=C+(R<<12&4294967295|R>>>20),R=V+(b^A&(C^b))+P[10]+4294925233&4294967295,V=A+(R<<17&4294967295|R>>>15),R=b+(C^V&(A^C))+P[11]+2304563134&4294967295,b=V+(R<<22&4294967295|R>>>10),R=C+(A^b&(V^A))+P[12]+1804603682&4294967295,C=b+(R<<7&4294967295|R>>>25),R=A+(V^C&(b^V))+P[13]+4254626195&4294967295,A=C+(R<<12&4294967295|R>>>20),R=V+(b^A&(C^b))+P[14]+2792965006&4294967295,V=A+(R<<17&4294967295|R>>>15),R=b+(C^V&(A^C))+P[15]+1236535329&4294967295,b=V+(R<<22&4294967295|R>>>10),R=C+(V^A&(b^V))+P[1]+4129170786&4294967295,C=b+(R<<5&4294967295|R>>>27),R=A+(b^V&(C^b))+P[6]+3225465664&4294967295,A=C+(R<<9&4294967295|R>>>23),R=V+(C^b&(A^C))+P[11]+643717713&4294967295,V=A+(R<<14&4294967295|R>>>18),R=b+(A^C&(V^A))+P[0]+3921069994&4294967295,b=V+(R<<20&4294967295|R>>>12),R=C+(V^A&(b^V))+P[5]+3593408605&4294967295,C=b+(R<<5&4294967295|R>>>27),R=A+(b^V&(C^b))+P[10]+38016083&4294967295,A=C+(R<<9&4294967295|R>>>23),R=V+(C^b&(A^C))+P[15]+3634488961&4294967295,V=A+(R<<14&4294967295|R>>>18),R=b+(A^C&(V^A))+P[4]+3889429448&4294967295,b=V+(R<<20&4294967295|R>>>12),R=C+(V^A&(b^V))+P[9]+568446438&4294967295,C=b+(R<<5&4294967295|R>>>27),R=A+(b^V&(C^b))+P[14]+3275163606&4294967295,A=C+(R<<9&4294967295|R>>>23),R=V+(C^b&(A^C))+P[3]+4107603335&4294967295,V=A+(R<<14&4294967295|R>>>18),R=b+(A^C&(V^A))+P[8]+1163531501&4294967295,b=V+(R<<20&4294967295|R>>>12),R=C+(V^A&(b^V))+P[13]+2850285829&4294967295,C=b+(R<<5&4294967295|R>>>27),R=A+(b^V&(C^b))+P[2]+4243563512&4294967295,A=C+(R<<9&4294967295|R>>>23),R=V+(C^b&(A^C))+P[7]+1735328473&4294967295,V=A+(R<<14&4294967295|R>>>18),R=b+(A^C&(V^A))+P[12]+2368359562&4294967295,b=V+(R<<20&4294967295|R>>>12),R=C+(b^V^A)+P[5]+4294588738&4294967295,C=b+(R<<4&4294967295|R>>>28),R=A+(C^b^V)+P[8]+2272392833&4294967295,A=C+(R<<11&4294967295|R>>>21),R=V+(A^C^b)+P[11]+1839030562&4294967295,V=A+(R<<16&4294967295|R>>>16),R=b+(V^A^C)+P[14]+4259657740&4294967295,b=V+(R<<23&4294967295|R>>>9),R=C+(b^V^A)+P[1]+2763975236&4294967295,C=b+(R<<4&4294967295|R>>>28),R=A+(C^b^V)+P[4]+1272893353&4294967295,A=C+(R<<11&4294967295|R>>>21),R=V+(A^C^b)+P[7]+4139469664&4294967295,V=A+(R<<16&4294967295|R>>>16),R=b+(V^A^C)+P[10]+3200236656&4294967295,b=V+(R<<23&4294967295|R>>>9),R=C+(b^V^A)+P[13]+681279174&4294967295,C=b+(R<<4&4294967295|R>>>28),R=A+(C^b^V)+P[0]+3936430074&4294967295,A=C+(R<<11&4294967295|R>>>21),R=V+(A^C^b)+P[3]+3572445317&4294967295,V=A+(R<<16&4294967295|R>>>16),R=b+(V^A^C)+P[6]+76029189&4294967295,b=V+(R<<23&4294967295|R>>>9),R=C+(b^V^A)+P[9]+3654602809&4294967295,C=b+(R<<4&4294967295|R>>>28),R=A+(C^b^V)+P[12]+3873151461&4294967295,A=C+(R<<11&4294967295|R>>>21),R=V+(A^C^b)+P[15]+530742520&4294967295,V=A+(R<<16&4294967295|R>>>16),R=b+(V^A^C)+P[2]+3299628645&4294967295,b=V+(R<<23&4294967295|R>>>9),R=C+(V^(b|~A))+P[0]+4096336452&4294967295,C=b+(R<<6&4294967295|R>>>26),R=A+(b^(C|~V))+P[7]+1126891415&4294967295,A=C+(R<<10&4294967295|R>>>22),R=V+(C^(A|~b))+P[14]+2878612391&4294967295,V=A+(R<<15&4294967295|R>>>17),R=b+(A^(V|~C))+P[5]+4237533241&4294967295,b=V+(R<<21&4294967295|R>>>11),R=C+(V^(b|~A))+P[12]+1700485571&4294967295,C=b+(R<<6&4294967295|R>>>26),R=A+(b^(C|~V))+P[3]+2399980690&4294967295,A=C+(R<<10&4294967295|R>>>22),R=V+(C^(A|~b))+P[10]+4293915773&4294967295,V=A+(R<<15&4294967295|R>>>17),R=b+(A^(V|~C))+P[1]+2240044497&4294967295,b=V+(R<<21&4294967295|R>>>11),R=C+(V^(b|~A))+P[8]+1873313359&4294967295,C=b+(R<<6&4294967295|R>>>26),R=A+(b^(C|~V))+P[15]+4264355552&4294967295,A=C+(R<<10&4294967295|R>>>22),R=V+(C^(A|~b))+P[6]+2734768916&4294967295,V=A+(R<<15&4294967295|R>>>17),R=b+(A^(V|~C))+P[13]+1309151649&4294967295,b=V+(R<<21&4294967295|R>>>11),R=C+(V^(b|~A))+P[4]+4149444226&4294967295,C=b+(R<<6&4294967295|R>>>26),R=A+(b^(C|~V))+P[11]+3174756917&4294967295,A=C+(R<<10&4294967295|R>>>22),R=V+(C^(A|~b))+P[2]+718787259&4294967295,V=A+(R<<15&4294967295|R>>>17),R=b+(A^(V|~C))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+A&4294967295}i.prototype.u=function(N,C){C===void 0&&(C=N.length);for(var b=C-this.blockSize,P=this.B,V=this.h,A=0;A<C;){if(V==0)for(;A<=b;)o(this,N,A),A+=this.blockSize;if(typeof N=="string"){for(;A<C;)if(P[V++]=N.charCodeAt(A++),V==this.blockSize){o(this,P),V=0;break}}else for(;A<C;)if(P[V++]=N[A++],V==this.blockSize){o(this,P),V=0;break}}this.h=V,this.o+=C},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;var b=8*this.o;for(C=N.length-8;C<N.length;++C)N[C]=b&255,b/=256;for(this.u(N),N=Array(16),C=b=0;4>C;++C)for(var P=0;32>P;P+=8)N[b++]=this.g[C]>>>P&255;return N};function l(N,C){var b=p;return Object.prototype.hasOwnProperty.call(b,N)?b[N]:b[N]=C(N)}function h(N,C){this.h=C;for(var b=[],P=!0,V=N.length-1;0<=V;V--){var A=N[V]|0;P&&A==C||(b[V]=A,P=!1)}this.g=b}var p={};function m(N){return-128<=N&&128>N?l(N,function(C){return new h([C|0],0>C?-1:0)}):new h([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return T;if(0>N)return U(v(-N));for(var C=[],b=1,P=0;N>=b;P++)C[P]=N/b|0,b*=4294967296;return new h(C,0)}function w(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return U(w(N.substring(1),C));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=v(Math.pow(C,8)),P=T,V=0;V<N.length;V+=8){var A=Math.min(8,N.length-V),R=parseInt(N.substring(V,V+A),C);8>A?(A=v(Math.pow(C,A)),P=P.j(A).add(v(R))):(P=P.j(b),P=P.add(v(R)))}return P}var T=m(0),I=m(1),z=m(16777216);r=h.prototype,r.m=function(){if(Z(this))return-U(this).m();for(var N=0,C=1,b=0;b<this.g.length;b++){var P=this.i(b);N+=(0<=P?P:4294967296+P)*C,C*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(K(this))return"0";if(Z(this))return"-"+U(this).toString(N);for(var C=v(Math.pow(N,6)),b=this,P="";;){var V=me(b,C).g;b=ce(b,V.j(C));var A=((0<b.g.length?b.g[0]:b.h)>>>0).toString(N);if(b=V,K(b))return A+P;for(;6>A.length;)A="0"+A;P=A+P}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function K(N){if(N.h!=0)return!1;for(var C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function Z(N){return N.h==-1}r.l=function(N){return N=ce(this,N),Z(N)?-1:K(N)?0:1};function U(N){for(var C=N.g.length,b=[],P=0;P<C;P++)b[P]=~N.g[P];return new h(b,~N.h).add(I)}r.abs=function(){return Z(this)?U(this):this},r.add=function(N){for(var C=Math.max(this.g.length,N.g.length),b=[],P=0,V=0;V<=C;V++){var A=P+(this.i(V)&65535)+(N.i(V)&65535),R=(A>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);P=R>>>16,A&=65535,R&=65535,b[V]=R<<16|A}return new h(b,b[b.length-1]&-2147483648?-1:0)};function ce(N,C){return N.add(U(C))}r.j=function(N){if(K(this)||K(N))return T;if(Z(this))return Z(N)?U(this).j(U(N)):U(U(this).j(N));if(Z(N))return U(this.j(U(N)));if(0>this.l(z)&&0>N.l(z))return v(this.m()*N.m());for(var C=this.g.length+N.g.length,b=[],P=0;P<2*C;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(var V=0;V<N.g.length;V++){var A=this.i(P)>>>16,R=this.i(P)&65535,Oe=N.i(V)>>>16,Ye=N.i(V)&65535;b[2*P+2*V]+=R*Ye,ne(b,2*P+2*V),b[2*P+2*V+1]+=A*Ye,ne(b,2*P+2*V+1),b[2*P+2*V+1]+=R*Oe,ne(b,2*P+2*V+1),b[2*P+2*V+2]+=A*Oe,ne(b,2*P+2*V+2)}for(P=0;P<C;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=C;P<2*C;P++)b[P]=0;return new h(b,0)};function ne(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function de(N,C){this.g=N,this.h=C}function me(N,C){if(K(C))throw Error("division by zero");if(K(N))return new de(T,T);if(Z(N))return C=me(U(N),C),new de(U(C.g),U(C.h));if(Z(C))return C=me(N,U(C)),new de(U(C.g),C.h);if(30<N.g.length){if(Z(N)||Z(C))throw Error("slowDivide_ only works with positive integers.");for(var b=I,P=C;0>=P.l(N);)b=ie(b),P=ie(P);var V=ee(b,1),A=ee(P,1);for(P=ee(P,2),b=ee(b,2);!K(P);){var R=A.add(P);0>=R.l(N)&&(V=V.add(b),A=R),P=ee(P,1),b=ee(b,1)}return C=ce(N,V.j(C)),new de(V,C)}for(V=T;0<=N.l(C);){for(b=Math.max(1,Math.floor(N.m()/C.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),A=v(b),R=A.j(C);Z(R)||0<R.l(N);)b-=P,A=v(b),R=A.j(C);K(A)&&(A=I),V=V.add(A),N=ce(N,R)}return new de(V,N)}r.A=function(N){return me(this,N).h},r.and=function(N){for(var C=Math.max(this.g.length,N.g.length),b=[],P=0;P<C;P++)b[P]=this.i(P)&N.i(P);return new h(b,this.h&N.h)},r.or=function(N){for(var C=Math.max(this.g.length,N.g.length),b=[],P=0;P<C;P++)b[P]=this.i(P)|N.i(P);return new h(b,this.h|N.h)},r.xor=function(N){for(var C=Math.max(this.g.length,N.g.length),b=[],P=0;P<C;P++)b[P]=this.i(P)^N.i(P);return new h(b,this.h^N.h)};function ie(N){for(var C=N.g.length+1,b=[],P=0;P<C;P++)b[P]=N.i(P)<<1|N.i(P-1)>>>31;return new h(b,N.h)}function ee(N,C){var b=C>>5;C%=32;for(var P=N.g.length-b,V=[],A=0;A<P;A++)V[A]=0<C?N.i(A+b)>>>C|N.i(A+b+1)<<32-C:N.i(A+b);return new h(V,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,V_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,as=h}).apply(typeof Cy<"u"?Cy:typeof self<"u"?self:typeof window<"u"?window:{});var Ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O_,Xa,M_,ac,lf,F_,U_,z_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ku=="object"&&Ku];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var _=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var $=u[S];if(!($ in _))break e;_=_[$]}u=u[u.length-1],S=_[u],g=g(S),g!=S&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function l(u,g){u instanceof String&&(u+="");var _=0,S=!1,$={next:function(){if(!S&&_<u.length){var X=_++;return{value:g(X,u[X]),done:!1}}return S=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(u){return u||function(){return l(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function m(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function v(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function w(u,g,_){return u.call.apply(u.bind,arguments)}function T(u,g,_){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,S),u.apply(g,$)}}return function(){return u.apply(g,arguments)}}function I(u,g,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,I.apply(null,arguments)}function z(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function K(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(S,$,X){for(var ge=Array(arguments.length-2),st=2;st<arguments.length;st++)ge[st-2]=arguments[st];return g.prototype[$].apply(S,ge)}}function Z(u){const g=u.length;if(0<g){const _=Array(g);for(let S=0;S<g;S++)_[S]=u[S];return _}return[]}function U(u,g){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(m(S)){const $=u.length||0,X=S.length||0;u.length=$+X;for(let ge=0;ge<X;ge++)u[$+ge]=S[ge]}else u.push(S)}}class ce{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ne(u){return/^[\s\xa0]*$/.test(u)}function de(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function me(u){return me[" "](u),u}me[" "]=function(){};var ie=de().indexOf("Gecko")!=-1&&!(de().toLowerCase().indexOf("webkit")!=-1&&de().indexOf("Edge")==-1)&&!(de().indexOf("Trident")!=-1||de().indexOf("MSIE")!=-1)&&de().indexOf("Edge")==-1;function ee(u,g,_){for(const S in u)g.call(_,u[S],S,u)}function N(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function C(u){const g={};for(const _ in u)g[_]=u[_];return g}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,g){let _,S;for(let $=1;$<arguments.length;$++){S=arguments[$];for(_ in S)u[_]=S[_];for(let X=0;X<b.length;X++)_=b[X],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function V(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function A(u){p.setTimeout(()=>{throw u},0)}function R(){var u=se;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Oe{constructor(){this.h=this.g=null}add(g,_){const S=Ye.get();S.set(g,_),this.h?this.h.next=S:this.g=S,this.h=S}}var Ye=new ce(()=>new Ue,u=>u.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let W,j=!1,se=new Oe,oe=()=>{const u=p.Promise.resolve(void 0);W=()=>{u.then(D)}};var D=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){A(_)}var g=Ye;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}j=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Re=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,g),p.removeEventListener("test",_,g)}catch{}return u})();function Ne(u,g){if(ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(ie){e:{try{me(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ze[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ne.aa.h.call(this)}}K(Ne,ye);var ze={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Be=0;function tt(u,g,_,S,$){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!S,this.ha=$,this.key=++Be,this.da=this.fa=!1}function at(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function sn(u){this.src=u,this.g={},this.h=0}sn.prototype.add=function(u,g,_,S,$){var X=u.toString();u=this.g[X],u||(u=this.g[X]=[],this.h++);var ge=Gn(u,g,S,$);return-1<ge?(g=u[ge],_||(g.fa=!1)):(g=new tt(g,this.src,X,!!S,$),g.fa=_,u.push(g)),g};function Qt(u,g){var _=g.type;if(_ in u.g){var S=u.g[_],$=Array.prototype.indexOf.call(S,g,void 0),X;(X=0<=$)&&Array.prototype.splice.call(S,$,1),X&&(at(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Gn(u,g,_,S){for(var $=0;$<u.length;++$){var X=u[$];if(!X.da&&X.listener==g&&X.capture==!!_&&X.ha==S)return $}return-1}var lr="closure_lm_"+(1e6*Math.random()|0),nt={};function zt(u,g,_,S,$){if(Array.isArray(g)){for(var X=0;X<g.length;X++)zt(u,g[X],_,S,$);return null}return _=dr(_),u&&u[qe]?u.K(g,_,v(S)?!!S.capture:!1,$):yn(u,g,_,!1,S,$)}function yn(u,g,_,S,$,X){if(!g)throw Error("Invalid event type");var ge=v($)?!!$.capture:!!$,st=Kn(u);if(st||(u[lr]=st=new sn(u)),_=st.add(g,_,S,ge,X),_.proxy)return _;if(S=ur(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)Re||($=ge),$===void 0&&($=!1),u.addEventListener(g.toString(),S,$);else if(u.attachEvent)u.attachEvent(_t(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ur(){function u(_){return g.call(u.src,u.listener,_)}const g=on;return u}function kr(u,g,_,S,$){if(Array.isArray(g))for(var X=0;X<g.length;X++)kr(u,g[X],_,S,$);else S=v(S)?!!S.capture:!!S,_=dr(_),u&&u[qe]?(u=u.i,g=String(g).toString(),g in u.g&&(X=u.g[g],_=Gn(X,_,S,$),-1<_&&(at(X[_]),Array.prototype.splice.call(X,_,1),X.length==0&&(delete u.g[g],u.h--)))):u&&(u=Kn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Gn(g,_,S,$)),(_=-1<u?g[u]:null)&&Pt(_))}function Pt(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[qe])Qt(g.i,u);else{var _=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(_,S,u.capture):g.detachEvent?g.detachEvent(_t(_),S):g.addListener&&g.removeListener&&g.removeListener(S),(_=Kn(g))?(Qt(_,u),_.h==0&&(_.src=null,g[lr]=null)):at(u)}}}function _t(u){return u in nt?nt[u]:nt[u]="on"+u}function on(u,g){if(u.da)u=!0;else{g=new Ne(g,this);var _=u.listener,S=u.ha||u.src;u.fa&&Pt(u),u=_.call(S,g)}return u}function Kn(u){return u=u[lr],u instanceof sn?u:null}var cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function dr(u){return typeof u=="function"?u:(u[cr]||(u[cr]=function(g){return u.handleEvent(g)}),u[cr])}function ht(){J.call(this),this.i=new sn(this),this.M=this,this.F=null}K(ht,J),ht.prototype[qe]=!0,ht.prototype.removeEventListener=function(u,g,_,S){kr(this,u,g,_,S)};function Le(u,g){var _,S=u.F;if(S)for(_=[];S;S=S.F)_.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new ye(g,u);else if(g instanceof ye)g.target=g.target||u;else{var $=g;g=new ye(S,u),P(g,$)}if($=!0,_)for(var X=_.length-1;0<=X;X--){var ge=g.g=_[X];$=bt(ge,S,!0,g)&&$}if(ge=g.g=u,$=bt(ge,S,!0,g)&&$,$=bt(ge,S,!1,g)&&$,_)for(X=0;X<_.length;X++)ge=g.g=_[X],$=bt(ge,S,!1,g)&&$}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],S=0;S<_.length;S++)at(_[S]);delete u.g[g],u.h--}}this.F=null},ht.prototype.K=function(u,g,_,S){return this.i.add(String(u),g,!1,_,S)},ht.prototype.L=function(u,g,_,S){return this.i.add(String(u),g,!0,_,S)};function bt(u,g,_,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,X=0;X<g.length;++X){var ge=g[X];if(ge&&!ge.da&&ge.capture==_){var st=ge.listener,Vt=ge.ha||ge.src;ge.fa&&Qt(u.i,ge),$=st.call(Vt,S)!==!1&&$}}return $&&!S.defaultPrevented}function Xr(u,g,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:p.setTimeout(u,g||0)}function Ln(u){u.g=Xr(()=>{u.g=null,u.i&&(u.i=!1,Ln(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Qn extends J{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ln(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sn(u){J.call(this),this.h=u,this.g={}}K(Sn,J);var Ar=[];function vn(u){ee(u.g,function(g,_){this.g.hasOwnProperty(_)&&Pt(g)},u),u.g={}}Sn.prototype.N=function(){Sn.aa.N.call(this),vn(this)},Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nr=p.JSON.stringify,Zr=p.JSON.parse,ei=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function an(){}an.prototype.h=null;function Q(u){return u.h||(u.h=u.i())}function ue(){}var E={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function B(){ye.call(this,"d")}K(B,ye);function te(){ye.call(this,"c")}K(te,ye);var O={},G=null;function we(){return G=G||new ht}O.La="serverreachability";function We(u){ye.call(this,O.La,u)}K(We,ye);function ot(u){const g=we();Le(g,new We(g))}O.STAT_EVENT="statevent";function ve(u,g){ye.call(this,O.STAT_EVENT,u),this.stat=g}K(ve,ye);function Pe(u){const g=we();Le(g,new ve(g,u))}O.Ma="timingevent";function Lt(u,g){ye.call(this,O.Ma,u),this.size=g}K(Lt,ye);function Bt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},g)}function ln(){this.g=!0}ln.prototype.xa=function(){this.g=!1};function hr(u,g,_,S,$,X){u.info(function(){if(u.g)if(X)for(var ge="",st=X.split("&"),Vt=0;Vt<st.length;Vt++){var Je=st[Vt].split("=");if(1<Je.length){var Wt=Je[0];Je=Je[1];var kt=Wt.split("_");ge=2<=kt.length&&kt[1]=="type"?ge+(Wt+"="+Je+"&"):ge+(Wt+"=redacted&")}}else ge=null;else ge=X;return"XMLHTTP REQ ("+S+") [attempt "+$+"]: "+g+`
`+_+`
`+ge})}function fr(u,g,_,S,$,X,ge){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+$+"]: "+g+`
`+_+`
`+X+" "+ge})}function _n(u,g,_,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+pr(u,_)+(S?" "+S:"")})}function ti(u,g){u.info(function(){return"TIMEOUT: "+g})}ln.prototype.info=function(){};function pr(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var S=_[u];if(!(2>S.length)){var $=S[1];if(Array.isArray($)&&!(1>$.length)){var X=$[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ge=1;ge<$.length;ge++)$[ge]=""}}}}return Nr(_)}catch{return g}}var jr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},so={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vn;function ut(){}K(ut,an),ut.prototype.g=function(){return new XMLHttpRequest},ut.prototype.i=function(){return{}},Vn=new ut;function $t(u,g,_,S){this.j=u,this.i=g,this.l=_,this.R=S||1,this.U=new Sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jl}function jl(){this.i=null,this.g="",this.h=!1}var ma={},oo={};function ao(u,g,_){u.L=1,u.v=ki(Mn(g)),u.m=_,u.P=!0,ga(u,null)}function ga(u,g){u.F=Date.now(),ct(u),u.A=Mn(u.v);var _=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Ni(_.i,"t",S),u.C=0,_=u.j.J,u.h=new jl,u.g=Jl(u.j,_?g:null,!u.m),0<u.O&&(u.M=new Qn(I(u.Y,u,u.g),u.O)),g=u.U,_=u.g,S=u.ca;var $="readystatechange";Array.isArray($)||($&&(Ar[0]=$.toString()),$=Ar);for(var X=0;X<$.length;X++){var ge=zt(_,$[X],S||g.handleEvent,!1,g.h||g);if(!ge)break;g.g[ge.key]=ge}g=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ot(),hr(u.i,u.u,u.A,u.l,u.R,u.m)}$t.prototype.ca=function(u){u=u.target;const g=this.M;g&&Cn(u)==3?g.j():this.Y(u)},$t.prototype.Y=function(u){try{if(u==this.g)e:{const kt=Cn(this.g);var g=this.g.Ba();const Xn=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Ea(this.g)))){this.J||kt!=4||g==7||(g==8||0>=Xn?ot(3):ot(2)),Ss(this);var _=this.g.Z();this.X=_;t:if(Dl(this)){var S=Ea(this.g);u="";var $=S.length,X=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),Ci(this);var ge="";break t}this.h.i=new p.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,u+=this.h.i.decode(S[g],{stream:!(X&&g==$-1)});S.length=0,this.h.g+=u,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=_==200,fr(this.i,this.u,this.A,this.l,this.R,kt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var st,Vt=this.g;if((st=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(st)){var Je=st;break t}}Je=null}if(_=Je)_n(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ya(this,_);else{this.o=!1,this.s=3,Pe(12),Yn(this),Ci(this);break e}}if(this.P){_=!0;let Un;for(;!this.J&&this.C<ge.length;)if(Un=sd(this,ge),Un==oo){kt==4&&(this.s=4,Pe(14),_=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==ma){this.s=4,Pe(15),_n(this.i,this.l,ge,"[Invalid Chunk]"),_=!1;break}else _n(this.i,this.l,Un,null),ya(this,Un);if(Dl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ge.length!=0||this.h.h||(this.s=1,Pe(16),_=!1),this.o=this.o&&_,!_)_n(this.i,this.l,ge,"[Invalid Chunked Response]"),Yn(this),Ci(this);else if(0<ge.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Sa(Wt),Wt.M=!0,Pe(11))}}else _n(this.i,this.l,ge,null),ya(this,ge);kt==4&&Yn(this),this.o&&!this.J&&(kt==4?_o(this.j,this):(this.o=!1,ct(this)))}else po(this.g),_==400&&0<ge.indexOf("Unknown SID")?(this.s=3,Pe(12)):(this.s=0,Pe(13)),Yn(this),Ci(this)}}}catch{}finally{}};function Dl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function sd(u,g){var _=u.C,S=g.indexOf(`
`,_);return S==-1?oo:(_=Number(g.substring(_,S)),isNaN(_)?ma:(S+=1,S+_>g.length?oo:(g=g.slice(S,S+_),u.C=S+_,g)))}$t.prototype.cancel=function(){this.J=!0,Yn(this)};function ct(u){u.S=Date.now()+u.I,Ll(u,u.I)}function Ll(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Bt(I(u.ba,u),g)}function Ss(u){u.B&&(p.clearTimeout(u.B),u.B=null)}$t.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ti(this.i,this.A),this.L!=2&&(ot(),Pe(17)),Yn(this),this.s=2,Ci(this)):Ll(this,this.S-u)};function Ci(u){u.j.G==0||u.J||_o(u.j,u)}function Yn(u){Ss(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,vn(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function ya(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||wn(_.h,u))){if(!u.K&&wn(_.h,u)&&_.G==3){try{var S=_.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var $=S;if($[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)vo(_),_r(_);else break e;yo(_),Pe(18)}}else _.za=$[1],0<_.za-_.T&&37500>$[2]&&_.F&&_.v==0&&!_.C&&(_.C=Bt(I(_.Za,_),6e3));if(1>=Ol(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else oi(_,11)}else if((u.K||_.g==u)&&vo(_),!ne(g))for($=_.Da.g.parse(g),g=0;g<$.length;g++){let Je=$[g];if(_.T=Je[0],Je=Je[1],_.G==2)if(Je[0]=="c"){_.K=Je[1],_.ia=Je[2];const Wt=Je[3];Wt!=null&&(_.la=Wt,_.j.info("VER="+_.la));const kt=Je[4];kt!=null&&(_.Aa=kt,_.j.info("SVER="+_.Aa));const Xn=Je[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(S=1.5*Xn,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Un=u.g;if(Un){const As=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(As){var X=S.h;X.g||As.indexOf("spdy")==-1&&As.indexOf("quic")==-1&&As.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(va(X,X.h),X.h=null))}if(S.D){const xo=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;xo&&(S.ya=xo,lt(S.I,S.D,xo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ge=u;if(S.qa=Yl(S,S.J?S.ia:null,S.W),ge.K){Ml(S.h,ge);var st=ge,Vt=S.L;Vt&&(st.I=Vt),st.B&&(Ss(st),ct(st)),S.g=ge}else ks(S);0<_.i.length&&Or(_)}else Je[0]!="stop"&&Je[0]!="close"||oi(_,7);else _.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?oi(_,7):Jt(_):Je[0]!="noop"&&_.l&&_.l.ta(Je),_.v=0)}}ot(4)}catch{}}var Vl=class{constructor(u,g){this.g=u,this.map=g}};function Is(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function On(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ol(u){return u.h?1:u.g?u.g.size:0}function wn(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function va(u,g){u.g?u.g.add(g):u.h=g}function Ml(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Is.prototype.cancel=function(){if(this.i=Fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Fl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return Z(u.i)}function lo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var g=[],_=u.length,S=0;S<_;S++)g.push(u[S]);return g}g=[],_=0;for(S in u)g[_++]=u[S];return g}function uo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const S in u)g[_++]=S;return g}}}function Ri(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=uo(u),S=lo(u),$=S.length,X=0;X<$;X++)g.call(void 0,S[X],_&&_[X],u)}var Cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function od(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var S=u[_].indexOf("="),$=null;if(0<=S){var X=u[_].substring(0,S);$=u[_].substring(S+1)}else X=u[_];g(X,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ni(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ni){this.h=u.h,Rs(this,u.j),this.o=u.o,this.g=u.g,Pi(this,u.s),this.l=u.l;var g=u.i,_=new Dr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),bi(this,_),this.m=u.m}else u&&(g=String(u).match(Cs))?(this.h=!1,Rs(this,g[1]||"",!0),this.o=Qe(g[2]||""),this.g=Qe(g[3]||"",!0),Pi(this,g[4]),this.l=Qe(g[5]||"",!0),bi(this,g[6]||"",!0),this.m=Qe(g[7]||"")):(this.h=!1,this.i=new Dr(null,this.h))}ni.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Ai(g,co,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Ai(g,co,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ai(_,_.charAt(0)=="/"?Bl:zl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ai(_,_a)),u.join("")};function Mn(u){return new ni(u)}function Rs(u,g,_){u.j=_?Qe(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Pi(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function bi(u,g,_){g instanceof Dr?(u.i=g,Lr(u.i,u.h)):(_||(g=Ai(g,$l)),u.i=new Dr(g,u.h))}function lt(u,g,_){u.i.set(g,_)}function ki(u){return lt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Qe(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ai(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Ul),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ul(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var co=/[#\/\?@]/g,zl=/[#\?:]/g,Bl=/[#\?]/g,$l=/[#\?@]/g,_a=/#/g;function Dr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Yt(u){u.g||(u.g=new Map,u.h=0,u.i&&od(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Dr.prototype,r.add=function(u,g){Yt(this),this.i=null,u=Jn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function mr(u,g){Yt(u),g=Jn(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function gr(u,g){return Yt(u),g=Jn(u,g),u.g.has(g)}r.forEach=function(u,g){Yt(this),this.g.forEach(function(_,S){_.forEach(function($){u.call(g,$,S,this)},this)},this)},r.na=function(){Yt(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let S=0;S<g.length;S++){const $=u[S];for(let X=0;X<$.length;X++)_.push(g[S])}return _},r.V=function(u){Yt(this);let g=[];if(typeof u=="string")gr(this,u)&&(g=g.concat(this.g.get(Jn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},r.set=function(u,g){return Yt(this),this.i=null,u=Jn(this,u),gr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Ni(u,g,_){mr(u,g),0<_.length&&(u.i=null,u.g.set(Jn(u,g),Z(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var S=g[_];const X=encodeURIComponent(String(S)),ge=this.V(S);for(S=0;S<ge.length;S++){var $=X;ge[S]!==""&&($+="="+encodeURIComponent(String(ge[S]))),u.push($)}}return this.i=u.join("&")};function Jn(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Lr(u,g){g&&!u.j&&(Yt(u),u.i=null,u.g.forEach(function(_,S){var $=S.toLowerCase();S!=$&&(mr(this,S),Ni(this,$,_))},u)),u.j=g}function ad(u,g){const _=new ln;if(p.Image){const S=new Image;S.onload=z(In,_,"TestLoadImage: loaded",!0,g,S),S.onerror=z(In,_,"TestLoadImage: error",!1,g,S),S.onabort=z(In,_,"TestLoadImage: abort",!1,g,S),S.ontimeout=z(In,_,"TestLoadImage: timeout",!1,g,S),p.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function Wl(u,g){const _=new ln,S=new AbortController,$=setTimeout(()=>{S.abort(),In(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(X=>{clearTimeout($),X.ok?In(_,"TestPingServer: ok",!0,g):In(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),In(_,"TestPingServer: error",!1,g)})}function In(u,g,_,S,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),S(_)}catch{}}function ld(){this.g=new ei}function Hl(u,g,_){const S=_||"";try{Ri(u,function($,X){let ge=$;v($)&&(ge=Nr($)),g.push(S+X+"="+encodeURIComponent(ge))})}catch($){throw g.push(S+"type="+encodeURIComponent("_badmap")),$}}function ri(u){this.l=u.Ub||null,this.j=u.eb||!1}K(ri,an),ri.prototype.g=function(){return new Ps(this.l,this.j)},ri.prototype.i=(function(u){return function(){return u}})({});function Ps(u,g){ht.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(Ps,ht),r=Ps.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,vr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||p).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ql(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ql(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?yr(this):vr(this),this.readyState==3&&ql(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,yr(this))},r.Qa=function(u){this.g&&(this.response=u,yr(this))},r.ga=function(){this.g&&yr(this)};function yr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,vr(u)}r.setRequestHeader=function(u,g){this.u.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function vr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ps.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ii(u){let g="";return ee(u,function(_,S){g+=S,g+=":",g+=_,g+=`\r
`}),g}function ji(u,g,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=ii(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):lt(u,g,_))}function yt(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(yt,ht);var ud=/^https?$/i,wa=["POST","PUT"];r=yt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,g,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vn.g(),this.v=this.o?Q(this.o):Q(Vn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(X){bs(this,X);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var $ in S)_.set($,S[$]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())_.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(X=>X.toLowerCase()=="content-type"),$=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(wa,g,void 0))||S||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ge]of _)this.g.setRequestHeader(X,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fo(this),this.u=!0,this.g.send(u),this.u=!1}catch(X){bs(this,X)}};function bs(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,ho(u),Fn(u)}function ho(u){u.A||(u.A=!0,Le(u,"complete"),Le(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Le(this,"complete"),Le(this,"abort"),Fn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fn(this,!0)),yt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?xa(this):this.bb())},r.bb=function(){xa(this)};function xa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Cn(u)!=4||u.Z()!=2)){if(u.u&&Cn(u)==4)Xr(u.Ea,0,u);else if(Le(u,"readystatechange"),Cn(u)==4){u.h=!1;try{const ge=u.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var S;if(S=ge===0){var $=String(u.D).match(Cs)[1]||null;!$&&p.self&&p.self.location&&($=p.self.location.protocol.slice(0,-1)),S=!ud.test($?$.toLowerCase():"")}_=S}if(_)Le(u,"complete"),Le(u,"success");else{u.m=6;try{var X=2<Cn(u)?u.g.statusText:""}catch{X=""}u.l=X+" ["+u.Z()+"]",ho(u)}}finally{Fn(u)}}}}function Fn(u,g){if(u.g){fo(u);const _=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||Le(u,"ready");try{_.onreadystatechange=S}catch{}}}function fo(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Cn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Zr(g)}};function Ea(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function po(u){const g={};u=(u.g&&2<=Cn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(ne(u[S]))continue;var _=V(u[S]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const X=g[$]||[];g[$]=X,X.push(_)}N(g,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function Ta(u){this.Aa=0,this.i=[],this.j=new ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,u),this.cb=Vr("retryDelaySeedMs",1e4,u),this.Wa=Vr("forwardChannelMaxRetries",2,u),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Is(u&&u.concurrentRequestLimit),this.Da=new ld,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ta.prototype,r.la=8,r.G=1,r.connect=function(u,g,_,S){Pe(0),this.W=u,this.H=g||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=Yl(this,null,this.W),Or(this)};function Jt(u){if(mo(u),u.G==3){var g=u.U++,_=Mn(u.I);if(lt(_,"SID",u.K),lt(_,"RID",g),lt(_,"TYPE","terminate"),si(u,_),g=new $t(u,u.j,g),g.L=2,g.v=ki(Mn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=g.v,_=!0),_||(g.g=Jl(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ct(g)}Ql(u)}function _r(u){u.g&&(Sa(u),u.g.cancel(),u.g=null)}function mo(u){_r(u),u.u&&(p.clearTimeout(u.u),u.u=null),vo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function Or(u){if(!On(u.h)&&!u.s){u.s=!0;var g=u.Ga;W||oe(),j||(W(),j=!0),se.add(g,u),u.B=0}}function cd(u,g){return Ol(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Bt(I(u.Ga,u,g),Kl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const $=new $t(this,this.j,u);let X=this.o;if(this.S&&(X?(X=C(X),P(X,this.S)):X=this.S),this.m!==null||this.O||($.H=X,X=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Di(this,$,g),_=Mn(this.I),lt(_,"RID",u),lt(_,"CVER",22),this.D&&lt(_,"X-HTTP-Session-Id",this.D),si(this,_),X&&(this.O?g="headers="+encodeURIComponent(String(ii(X)))+"&"+g:this.m&&ji(_,this.m,X)),va(this.h,$),this.Ua&&lt(_,"TYPE","init"),this.P?(lt(_,"$req",g),lt(_,"SID","null"),$.T=!0,ao($,_,null)):ao($,_,g),this.G=2}}else this.G==3&&(u?go(this,u):this.i.length==0||On(this.h)||go(this))};function go(u,g){var _;g?_=g.l:_=u.U++;const S=Mn(u.I);lt(S,"SID",u.K),lt(S,"RID",_),lt(S,"AID",u.T),si(u,S),u.m&&u.o&&ji(S,u.m,u.o),_=new $t(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Di(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),va(u.h,_),ao(_,S,g)}function si(u,g){u.H&&ee(u.H,function(_,S){lt(g,S,_)}),u.l&&Ri({},function(_,S){lt(g,S,_)})}function Di(u,g,_){_=Math.min(u.i.length,_);var S=u.l?I(u.l.Na,u.l,u):null;e:{var $=u.i;let X=-1;for(;;){const ge=["count="+_];X==-1?0<_?(X=$[0].g,ge.push("ofs="+X)):X=0:ge.push("ofs="+X);let st=!0;for(let Vt=0;Vt<_;Vt++){let Je=$[Vt].g;const Wt=$[Vt].map;if(Je-=X,0>Je)X=Math.max(0,$[Vt].g-100),st=!1;else try{Hl(Wt,ge,"req"+Je+"_")}catch{S&&S(Wt)}}if(st){S=ge.join("&");break e}}}return u=u.i.splice(0,_),g.D=u,S}function ks(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;W||oe(),j||(W(),j=!0),se.add(g,u),u.v=0}}function yo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Bt(I(u.Fa,u),Kl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Gl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Bt(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pe(10),_r(this),Gl(this))};function Sa(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Gl(u){u.g=new $t(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Mn(u.qa);lt(g,"RID","rpc"),lt(g,"SID",u.K),lt(g,"AID",u.T),lt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&lt(g,"TO",u.ja),lt(g,"TYPE","xmlhttp"),si(u,g),u.m&&u.o&&ji(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ki(Mn(g)),_.m=null,_.P=!0,ga(_,u)}r.Za=function(){this.C!=null&&(this.C=null,_r(this),yo(this),Pe(19))};function vo(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function _o(u,g){var _=null;if(u.g==g){vo(u),Sa(u),u.g=null;var S=2}else if(wn(u.h,g))_=g.D,Ml(u.h,g),S=1;else return;if(u.G!=0){if(g.o)if(S==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var $=u.B;S=we(),Le(S,new Lt(S,_)),Or(u)}else ks(u);else if($=g.s,$==3||$==0&&0<g.X||!(S==1&&cd(u,g)||S==2&&yo(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),$){case 1:oi(u,5);break;case 4:oi(u,10);break;case 3:oi(u,6);break;default:oi(u,2)}}}function Kl(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function oi(u,g){if(u.j.info("Error code "+g),g==2){var _=I(u.fb,u),S=u.Xa;const $=!S;S=new ni(S||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Rs(S,"https"),ki(S),$?ad(S.toString(),_):Wl(S.toString(),_)}else Pe(2);u.G=0,u.l&&u.l.sa(g),Ql(u),mo(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))};function Ql(u){if(u.G=0,u.ka=[],u.l){const g=Fl(u.h);(g.length!=0||u.i.length!=0)&&(U(u.ka,g),U(u.ka,u.i),u.h.i.length=0,Z(u.i),u.i.length=0),u.l.ra()}}function Yl(u,g,_){var S=_ instanceof ni?Mn(_):new ni(_);if(S.g!="")g&&(S.g=g+"."+S.g),Pi(S,S.s);else{var $=p.location;S=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var X=new ni(null);S&&Rs(X,S),g&&(X.g=g),$&&Pi(X,$),_&&(X.l=_),S=X}return _=u.D,g=u.ya,_&&g&&lt(S,_,g),lt(S,"VER",u.la),si(u,S),S}function Jl(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new yt(new ri({eb:_})):new yt(u.pa),g.Ha(u.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ia(){}r=Ia.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function wo(){}wo.prototype.g=function(u,g){return new xn(u,g)};function xn(u,g){ht.call(this),this.g=new Ta(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!ne(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ne(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Mr(this)}K(xn,ht),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Jt(this.g)},xn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Nr(u),u=_);g.i.push(new Vl(g.Ya++,u)),g.G==3&&Or(g)},xn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,xn.aa.N.call(this)};function Xl(u){B.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}K(Xl,B);function Zl(){te.call(this),this.status=1}K(Zl,te);function Mr(u){this.g=u}K(Mr,Ia),Mr.prototype.ua=function(){Le(this.g,"a")},Mr.prototype.ta=function(u){Le(this.g,new Xl(u))},Mr.prototype.sa=function(u){Le(this.g,new Zl)},Mr.prototype.ra=function(){Le(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,z_=function(){return new wo},U_=function(){return we()},F_=O,lf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jr.NO_ERROR=0,jr.TIMEOUT=8,jr.HTTP_ERROR=6,ac=jr,so.COMPLETE="complete",M_=so,ue.EventType=E,E.OPEN="a",E.CLOSE="b",E.ERROR="c",E.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Xa=ue,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,O_=yt}).apply(typeof Ku<"u"?Ku:typeof self<"u"?self:typeof window<"u"?window:{});const Ry="@firebase/firestore",Py="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new Nf("@firebase/firestore");function $o(){return eo.logLevel}function xe(r,...e){if(eo.logLevel<=Ge.DEBUG){const t=e.map(qf);eo.debug(`Firestore (${ca}): ${r}`,...t)}}function Ei(r,...e){if(eo.logLevel<=Ge.ERROR){const t=e.map(qf);eo.error(`Firestore (${ca}): ${r}`,...t)}}function cs(r,...e){if(eo.logLevel<=Ge.WARN){const t=e.map(qf);eo.warn(`Firestore (${ca}): ${r}`,...t)}}function qf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,B_(r,i,t)}function B_(r,e,t){let i=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ei(i),new Error(i)}function it(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||B_(e,o,i)}function Fe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends Ii{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(pn.UNAUTHENTICATED)))}shutdown(){}}class jI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class DI{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _i,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _i)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it(typeof i.accessToken=="string",31837,{l:i}),new $_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class LI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new LI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class by{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const i=l=>{l.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,xe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new by(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new by(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=MI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function $e(r,e){return r<e?-1:r>e?1:0}function uf(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return $e(i,o);{const l=W_(),h=FI(l.encode(ky(r,t)),l.encode(ky(e,t)));return h!==0?h:$e(i,o)}}t+=i>65535?2:1}return $e(r.length,e.length)}function ky(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function FI(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return $e(r[t],e[t]);return $e(r.length,e.length)}function ea(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="__name__";class $r{constructor(e,t,i){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&De(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return $r.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $r?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=$r.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return $e(e.length,t.length)}static compareSegments(e,t){const i=$r.isNumericId(e),o=$r.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?$r.extractNumericId(e).compare($r.extractNumericId(t)):uf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return as.fromString(e.substring(4,e.length-2))}}class mt extends $r{construct(e,t,i){return new mt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ie(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const UI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends $r{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return UI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ay}static keyField(){return new tn([Ay])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new Ie(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Ie(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ie(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(i+=p,o++):(l(),o++)}if(l(),h)throw new Ie(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(mt.fromString(e))}static fromName(e){return new be(mt.fromString(e).popFirst(5))}static empty(){return new be(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(r,e,t){if(!t)throw new Ie(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function zI(r,e,t,i){if(e===!0&&i===!0)throw new Ie(ae.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ny(r){if(!be.isDocumentKey(r))throw new Ie(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function jy(r){if(be.isDocumentKey(r))throw new Ie(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function q_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Kf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":De(12329,{type:typeof r})}function br(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ie(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kf(r);throw new Ie(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Rl(r,e){if(!q_(r))throw new Ie(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ie(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=-62135596800,Ly=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ly);return new gt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Dy)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ly}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rl(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:jt("string",gt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new gt(0,0))}static max(){return new Me(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function BI(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Me.fromTimestamp(i===1e9?new gt(t+1,0):new gt(t,i));return new ds(o,be.empty(),e)}function $I(r){return new ds(r.readTime,r.key,pl)}class ds{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ds(Me.min(),be.empty(),pl)}static max(){return new ds(Me.max(),be.empty(),pl)}}function WI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(r.documentKey,e.documentKey),t!==0?t:$e(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==HI)throw r;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,i)=>{t(e)}))}static reject(e){return new re(((t,i)=>{i(e)}))}static waitFor(e){return new re(((t,i)=>{let o=0,l=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++l,h&&l===o&&t()}),(m=>i(m)))})),h=!0,l===o&&t()}))}static or(e){let t=re.resolve(!1);for(const i of e)t=t.next((o=>o?re.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new re(((i,o)=>{const l=e.length,h=new Array(l);let p=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((w=>{h[v]=w,++p,p===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new re(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function GI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ha(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}zc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=-1;function Bc(r){return r==null}function Tc(r){return r===0&&1/r==-1/0}function KI(r){return typeof r=="number"&&Number.isInteger(r)&&!Tc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="";function QI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Vy(e)),e=YI(r.get(t),e);return Vy(e)}function YI(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case G_:t+="";break;default:t+=l}}return t}function Vy(r){return r+G_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Es(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function K_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??en.RED,this.left=o??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new en(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new My(this.data.getIterator())}getIteratorFrom(e){return new My(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class My{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new qn([])}unionWith(e){let t=new Ut(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Q_("Invalid base64 string: "+l):l}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const JI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(r){if(it(!!r,39018),typeof r=="string"){let e=0;const t=JI.exec(r);if(it(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(r.seconds),nanos:Ct(r.nanos)}}function Ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function fs(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="server_timestamp",J_="__type__",X_="__previous_value__",Z_="__local_write_time__";function Yf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[J_])===null||t===void 0?void 0:t.stringValue)===Y_}function $c(r){const e=r.mapValue.fields[X_];return Yf(e)?$c(e):e}function ml(r){const e=hs(r.mapValue.fields[Z_].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,t,i,o,l,h,p,m,v,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=w}}const Sc="(default)";class gl{constructor(e,t){this.projectId=e,this.database=t||Sc}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database===Sc}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="__type__",ZI="__max__",Yu={mapValue:{}},t0="__vector__",Ic="value";function ps(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Yf(r)?4:tC(r)?9007199254740991:eC(r)?10:11:De(28295,{value:r})}function Yr(r,e){if(r===e)return!0;const t=ps(r);if(t!==ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ml(r).isEqual(ml(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=hs(o.timestampValue),p=hs(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return fs(o.bytesValue).isEqual(fs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return Ct(o.geoPointValue.latitude)===Ct(l.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Ct(o.integerValue)===Ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Ct(o.doubleValue),p=Ct(l.doubleValue);return h===p?Tc(h)===Tc(p):isNaN(h)&&isNaN(p)}return!1})(r,e);case 9:return ea(r.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Oy(h)!==Oy(p))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(p[m]===void 0||!Yr(h[m],p[m])))return!1;return!0})(r,e);default:return De(52216,{left:r})}}function yl(r,e){return(r.values||[]).find((t=>Yr(t,e)))!==void 0}function ta(r,e){if(r===e)return 0;const t=ps(r),i=ps(e);if(t!==i)return $e(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const p=Ct(l.integerValue||l.doubleValue),m=Ct(h.integerValue||h.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(r,e);case 3:return Fy(r.timestampValue,e.timestampValue);case 4:return Fy(ml(r),ml(e));case 5:return uf(r.stringValue,e.stringValue);case 6:return(function(l,h){const p=fs(l),m=fs(h);return p.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const p=l.split("/"),m=h.split("/");for(let v=0;v<p.length&&v<m.length;v++){const w=$e(p[v],m[v]);if(w!==0)return w}return $e(p.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const p=$e(Ct(l.latitude),Ct(h.latitude));return p!==0?p:$e(Ct(l.longitude),Ct(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Uy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var p,m,v,w;const T=l.fields||{},I=h.fields||{},z=(p=T[Ic])===null||p===void 0?void 0:p.arrayValue,K=(m=I[Ic])===null||m===void 0?void 0:m.arrayValue,Z=$e(((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0,((w=K==null?void 0:K.values)===null||w===void 0?void 0:w.length)||0);return Z!==0?Z:Uy(z,K)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Yu.mapValue&&h===Yu.mapValue)return 0;if(l===Yu.mapValue)return 1;if(h===Yu.mapValue)return-1;const p=l.fields||{},m=Object.keys(p),v=h.fields||{},w=Object.keys(v);m.sort(),w.sort();for(let T=0;T<m.length&&T<w.length;++T){const I=uf(m[T],w[T]);if(I!==0)return I;const z=ta(p[m[T]],v[w[T]]);if(z!==0)return z}return $e(m.length,w.length)})(r.mapValue,e.mapValue);default:throw De(23264,{le:t})}}function Fy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return $e(r,e);const t=hs(r),i=hs(e),o=$e(t.seconds,i.seconds);return o!==0?o:$e(t.nanos,i.nanos)}function Uy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=ta(t[o],i[o]);if(l)return l}return $e(t.length,i.length)}function na(r){return cf(r)}function cf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=hs(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return fs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return be.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=cf(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${cf(t.fields[h])}`;return o+"}"})(r.mapValue):De(61005,{value:r})}function lc(r){switch(ps(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$c(r);return e?16+lc(e):16;case 5:return 2*r.stringValue.length;case 6:return fs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+lc(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Es(i.fields,((l,h)=>{o+=l.length+lc(h)})),o})(r.mapValue);default:throw De(13486,{value:r})}}function df(r){return!!r&&"integerValue"in r}function Jf(r){return!!r&&"arrayValue"in r}function zy(r){return!!r&&"nullValue"in r}function By(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function uc(r){return!!r&&"mapValue"in r}function eC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[e0])===null||t===void 0?void 0:t.stringValue)===t0}function sl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Es(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=sl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function tC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ZI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!uc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sl(t)}setAll(e){let t=tn.emptyPath(),i={},o=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=p.popLast()}h?i[p.lastSegment()]=sl(h):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());uc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];uc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Es(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Dn(sl(this.value))}}function n0(r){const e=[];return Es(r.fields,((t,i)=>{const o=new tn([t]);if(uc(i)){const l=n0(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,i,o,l,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new mn(e,0,Me.min(),Me.min(),Me.min(),Dn.empty(),0)}static newFoundDocument(e,t,i,o){return new mn(e,1,t,Me.min(),i,o,0)}static newNoDocument(e,t){return new mn(e,2,t,Me.min(),Me.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Me.min(),Me.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t){this.position=e,this.inclusive=t}}function $y(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=be.comparator(be.fromName(h.referenceValue),t.key):i=ta(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Wy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Yr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t="asc"){this.field=e,this.dir=t}}function nC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{}class Ft extends r0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new iC(e,t,i):t==="array-contains"?new aC(e,i):t==="in"?new lC(e,i):t==="not-in"?new uC(e,i):t==="array-contains-any"?new cC(e,i):new Ft(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new sC(e,i):new oC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ta(t,this.value)):t!==null&&ps(this.value)===ps(t)&&this.matchesComparison(ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jr extends r0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Jr(e,t)}matches(e){return i0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function i0(r){return r.op==="and"}function s0(r){return rC(r)&&i0(r)}function rC(r){for(const e of r.filters)if(e instanceof Jr)return!1;return!0}function hf(r){if(r instanceof Ft)return r.field.canonicalString()+r.op.toString()+na(r.value);if(s0(r))return r.filters.map((e=>hf(e))).join(",");{const e=r.filters.map((t=>hf(t))).join(",");return`${r.op}(${e})`}}function o0(r,e){return r instanceof Ft?(function(i,o){return o instanceof Ft&&i.op===o.op&&i.field.isEqual(o.field)&&Yr(i.value,o.value)})(r,e):r instanceof Jr?(function(i,o){return o instanceof Jr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,p)=>l&&o0(h,o.filters[p])),!0):!1})(r,e):void De(19439)}function a0(r){return r instanceof Ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${na(t.value)}`})(r):r instanceof Jr?(function(t){return t.op.toString()+" {"+t.getFilters().map(a0).join(" ,")+"}"})(r):"Filter"}class iC extends Ft{constructor(e,t,i){super(e,t,i),this.key=be.fromName(i.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class sC extends Ft{constructor(e,t){super(e,"in",t),this.keys=l0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class oC extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=l0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function l0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>be.fromName(i.referenceValue)))}class aC extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jf(t)&&yl(t.arrayValue,this.value)}}class lC extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yl(this.value.arrayValue,t)}}class uC extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yl(this.value.arrayValue,t)}}class cC extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>yl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t=null,i=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.Pe=null}}function Hy(r,e=null,t=[],i=[],o=null,l=null,h=null){return new dC(r,e,t,i,o,l,h)}function Xf(r){const e=Fe(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>hf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>na(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>na(i))).join(",")),e.Pe=t}return e.Pe}function Zf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!nC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!o0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Wy(r.startAt,e.startAt)&&Wy(r.endAt,e.endAt)}function ff(r){return be.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t=null,i=[],o=[],l=null,h="F",p=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function hC(r,e,t,i,o,l,h,p){return new Wc(r,e,t,i,o,l,h,p)}function ep(r){return new Wc(r)}function qy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function fC(r){return r.collectionGroup!==null}function ol(r){const e=Fe(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Ut(tn.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Rc(l,i))})),t.has(tn.keyField().canonicalString())||e.Te.push(new Rc(tn.keyField(),i))}return e.Te}function qr(r){const e=Fe(r);return e.Ie||(e.Ie=pC(e,ol(r))),e.Ie}function pC(r,e){if(r.limitType==="F")return Hy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Rc(o.field,l)}));const t=r.endAt?new Cc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Cc(r.startAt.position,r.startAt.inclusive):null;return Hy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function pf(r,e,t){return new Wc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Hc(r,e){return Zf(qr(r),qr(e))&&r.limitType===e.limitType}function u0(r){return`${Xf(qr(r))}|lt:${r.limitType}`}function Wo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>a0(o))).join(", ")}]`),Bc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>na(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>na(o))).join(",")),`Target(${i})`})(qr(r))}; limitType=${r.limitType})`}function qc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):be.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of ol(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,p,m){const v=$y(h,p,m);return h.inclusive?v<=0:v<0})(i.startAt,ol(i),o)||i.endAt&&!(function(h,p,m){const v=$y(h,p,m);return h.inclusive?v>=0:v>0})(i.endAt,ol(i),o))})(r,e)}function mC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function c0(r){return(e,t)=>{let i=!1;for(const o of ol(r)){const l=gC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function gC(r,e,t){const i=r.field.isKeyField()?be.comparator(e.key,t.key):(function(l,h,p){const m=h.data.field(l),v=p.data.field(l);return m!==null&&v!==null?ta(m,v):De(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return De(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return K_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new Et(be.comparator);function Ti(){return yC}const d0=new Et(be.comparator);function Za(...r){let e=d0;for(const t of r)e=e.insert(t.key,t);return e}function h0(r){let e=d0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ks(){return al()}function f0(){return al()}function al(){return new no((r=>r.toString()),((r,e)=>r.isEqual(e)))}const vC=new Et(be.comparator),_C=new Ut(be.comparator);function Ke(...r){let e=_C;for(const t of r)e=e.add(t);return e}const wC=new Ut($e);function xC(){return wC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function p0(r){return{integerValue:""+r}}function EC(r,e){return KI(e)?p0(e):tp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this._=void 0}}function TC(r,e,t){return r instanceof Pc?(function(o,l){const h={fields:{[J_]:{stringValue:Y_},[Z_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Yf(l)&&(l=$c(l)),l&&(h.fields[X_]=l),{mapValue:h}})(t,e):r instanceof vl?g0(r,e):r instanceof _l?y0(r,e):(function(o,l){const h=m0(o,l),p=Gy(h)+Gy(o.Ee);return df(h)&&df(o.Ee)?p0(p):tp(o.serializer,p)})(r,e)}function SC(r,e,t){return r instanceof vl?g0(r,e):r instanceof _l?y0(r,e):t}function m0(r,e){return r instanceof bc?(function(i){return df(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Pc extends Gc{}class vl extends Gc{constructor(e){super(),this.elements=e}}function g0(r,e){const t=v0(e);for(const i of r.elements)t.some((o=>Yr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class _l extends Gc{constructor(e){super(),this.elements=e}}function y0(r,e){let t=v0(e);for(const i of r.elements)t=t.filter((o=>!Yr(o,i)));return{arrayValue:{values:t}}}class bc extends Gc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Gy(r){return Ct(r.integerValue||r.doubleValue)}function v0(r){return Jf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function IC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof vl&&o instanceof vl||i instanceof _l&&o instanceof _l?ea(i.elements,o.elements,Yr):i instanceof bc&&o instanceof bc?Yr(i.Ee,o.Ee):i instanceof Pc&&o instanceof Pc})(r.transform,e.transform)}class CC{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Kc{}function _0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new np(r.key,or.none()):new Pl(r.key,r.data,or.none());{const t=r.data,i=Dn.empty();let o=new Ut(tn.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ts(r.key,i,new qn(o.toArray()),or.none())}}function RC(r,e,t){r instanceof Pl?(function(o,l,h){const p=o.value.clone(),m=Qy(o.fieldTransforms,l,h.transformResults);p.setAll(m),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):r instanceof Ts?(function(o,l,h){if(!cc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=Qy(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(w0(o)),m.setAll(p),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ll(r,e,t,i){return r instanceof Pl?(function(l,h,p,m){if(!cc(l.precondition,h))return p;const v=l.value.clone(),w=Yy(l.fieldTransforms,m,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Ts?(function(l,h,p,m){if(!cc(l.precondition,h))return p;const v=Yy(l.fieldTransforms,m,h),w=h.data;return w.setAll(w0(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,h,p){return cc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(r,e,t)}function PC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=m0(i.transform,o||null);l!=null&&(t===null&&(t=Dn.empty()),t.set(i.field,l))}return t||null}function Ky(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ea(i,o,((l,h)=>IC(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Pl extends Kc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ts extends Kc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function w0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Qy(r,e,t){const i=new Map;it(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,p=e.data.field(l.field);i.set(l.field,SC(h,p,t[o]))}return i}function Yy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,TC(l,h,e))}return i}class np extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bC extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&RC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ll(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ll(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=f0();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const m=_0(h,p);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Me.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,((t,i)=>Ky(t,i)))&&ea(this.baseMutations,e.baseMutations,((t,i)=>Ky(t,i)))}}class rp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){it(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return vC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new rp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Xe;function jC(r){switch(r){case ae.OK:return De(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return De(15467,{code:r})}}function x0(r){if(r===void 0)return Ei("GRPC error has no .code"),ae.UNKNOWN;switch(r){case Nt.OK:return ae.OK;case Nt.CANCELLED:return ae.CANCELLED;case Nt.UNKNOWN:return ae.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ae.INTERNAL;case Nt.UNAVAILABLE:return ae.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ae.NOT_FOUND;case Nt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Nt.ABORTED:return ae.ABORTED;case Nt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Nt.DATA_LOSS:return ae.DATA_LOSS;default:return De(39323,{code:r})}}(Xe=Nt||(Nt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new as([4294967295,4294967295],0);function Jy(r){const e=W_().encode(r),t=new V_;return t.update(e),new Uint8Array(t.digest())}function Xy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new as([t,i],0),new as([o,l],0)]}class ip{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new el(`Invalid padding: ${t}`);if(i<0)throw new el(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new el(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new el(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=as.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(as.fromNumber(i)));return o.compare(DC)===1&&(o=new as([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Jy(e),[i,o]=Xy(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new ip(l,o,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.fe===0)return;const t=Jy(e),[i,o]=Xy(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class el extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,bl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Qc(Me.min(),o,new Et($e),Ti(),Ke())}}class bl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new bl(i,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class E0{constructor(e,t){this.targetId=e,this.De=t}}class T0{constructor(e,t,i=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Zy{constructor(){this.ve=0,this.Ce=ev(),this.Fe=rn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ke(),t=Ke(),i=Ke();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:De(38017,{changeType:l})}})),new bl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=ev()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class LC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ti(),this.je=Ju(),this.Je=Ju(),this.He=new Et($e)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(ff(l))if(i===0){const h=new be(l.path);this.Xe(t,h,mn.newNoDocument(h,Me.min()))}else it(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const p=this._t(e),m=p?this.ut(p,e,h):1;if(m!==0){this.rt(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=fs(i).toUint8Array()}catch(m){if(m instanceof Q_)return cs("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new ip(h,o,l)}catch(m){return cs(m instanceof el?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.fe===0?null:p}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.We.lt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const p=this.st(h);if(p){if(l.current&&ff(p.target)){const m=new be(p.target.path);this.Tt(m).has(h)||this.It(h,m)||this.Xe(h,m,mn.newNoDocument(m,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let i=Ke();this.Je.forEach(((l,h)=>{let p=!0;h.forEachWhile((m=>{const v=this.st(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const o=new Qc(e,t,this.He,this.ze,i);return this.ze=Ti(),this.je=Ju(),this.Je=Ju(),this.He=new Et($e),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Zy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ut($e),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ut($e),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Zy),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ju(){return new Et(be.comparator)}function ev(){return new Et(be.comparator)}const VC={asc:"ASCENDING",desc:"DESCENDING"},OC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MC={and:"AND",or:"OR"};class FC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mf(r,e){return r.useProto3Json||Bc(e)?e:{value:e}}function kc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function UC(r,e){return kc(r,e.toTimestamp())}function Gr(r){return it(!!r,49232),Me.fromTimestamp((function(t){const i=hs(t);return new gt(i.seconds,i.nanos)})(r))}function sp(r,e){return gf(r,e).canonicalString()}function gf(r,e){const t=(function(o){return new mt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function I0(r){const e=mt.fromString(r);return it(k0(e),10190,{key:e.toString()}),e}function yf(r,e){return sp(r.databaseId,e.path)}function $h(r,e){const t=I0(e);if(t.get(1)!==r.databaseId.projectId)throw new Ie(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ie(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new be(R0(t))}function C0(r,e){return sp(r.databaseId,e)}function zC(r){const e=I0(r);return e.length===4?mt.emptyPath():R0(e)}function vf(r){return new mt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function R0(r){return it(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function tv(r,e,t){return{name:yf(r,e),fields:t.value.mapValue.fields}}function BC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:De(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(it(w===void 0||typeof w=="string",58123),rn.fromBase64String(w||"")):(it(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),rn.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(v){const w=v.code===void 0?ae.UNKNOWN:x0(v.code);return new Ie(w,v.message||"")})(h);t=new T0(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=$h(r,i.document.name),l=Gr(i.document.updateTime),h=i.document.createTime?Gr(i.document.createTime):Me.min(),p=new Dn({mapValue:{fields:i.document.fields}}),m=mn.newFoundDocument(o,l,h,p),v=i.targetIds||[],w=i.removedTargetIds||[];t=new dc(v,w,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=$h(r,i.document),l=i.readTime?Gr(i.readTime):Me.min(),h=mn.newNoDocument(o,l),p=i.removedTargetIds||[];t=new dc([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=$h(r,i.document),l=i.removedTargetIds||[];t=new dc([],l,o,null)}else{if(!("filter"in e))return De(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new NC(o,l),p=i.targetId;t=new E0(p,h)}}return t}function $C(r,e){let t;if(e instanceof Pl)t={update:tv(r,e.key,e.value)};else if(e instanceof np)t={delete:yf(r,e.key)};else if(e instanceof Ts)t={update:tv(r,e.key,e.data),updateMask:XC(e.fieldMask)};else{if(!(e instanceof bC))return De(16599,{Rt:e.type});t={verify:yf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const p=h.transform;if(p instanceof Pc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof vl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof _l)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof bc)return{fieldPath:h.field.canonicalString(),increment:p.Ee};throw De(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:UC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:De(27497)})(r,e.precondition)),t}function WC(r,e){return r&&r.length>0?(it(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?Gr(o.updateTime):Gr(l);return h.isEqual(Me.min())&&(h=Gr(l)),new CC(h,o.transformResults||[])})(t,e)))):[]}function HC(r,e){return{documents:[C0(r,e.path)]}}function qC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=C0(r,o);const l=(function(v){if(v.length!==0)return b0(Jr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((w=>(function(I){return{field:Ho(I.field),direction:QC(I.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=mf(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function GC(r){let e=zC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){it(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(T){const I=P0(T);return I instanceof Jr&&s0(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((I=>(function(K){return new Rc(qo(K.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(I)))})(t.orderBy));let p=null;t.limit&&(p=(function(T){let I;return I=typeof T=="object"?T.value:T,Bc(I)?null:I})(t.limit));let m=null;t.startAt&&(m=(function(T){const I=!!T.before,z=T.values||[];return new Cc(z,I)})(t.startAt));let v=null;return t.endAt&&(v=(function(T){const I=!T.before,z=T.values||[];return new Cc(z,I)})(t.endAt)),hC(e,o,h,l,p,"F",m,v)}function KC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function P0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=qo(t.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=qo(t.unaryFilter.field);return Ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(t.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=qo(t.unaryFilter.field);return Ft.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ft.create(qo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Jr.create(t.compositeFilter.filters.map((i=>P0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(r):De(30097,{filter:r})}function QC(r){return VC[r]}function YC(r){return OC[r]}function JC(r){return MC[r]}function Ho(r){return{fieldPath:r.canonicalString()}}function qo(r){return tn.fromServerFormat(r.fieldPath)}function b0(r){return r instanceof Ft?(function(t){if(t.op==="=="){if(By(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NAN"}};if(zy(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(By(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NOT_NAN"}};if(zy(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ho(t.field),op:YC(t.op),value:t.value}}})(r):r instanceof Jr?(function(t){const i=t.getFilters().map((o=>b0(o)));return i.length===1?i[0]:{compositeFilter:{op:JC(t.op),filters:i}}})(r):De(54877,{filter:r})}function XC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function k0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t,i,o,l=Me.min(),h=Me.min(),p=rn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.gt=e}}function eR(r){const e=GC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?pf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.Dn=new nR}addToCollectionParentIndex(e,t){return this.Dn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ds.min())}updateCollectionGroup(e,t,i){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class nR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ut(mt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ut(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A0=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(A0,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ra(0)}static ur(){return new ra(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="LruGarbageCollector",rR=1048576;function iv([r,e],[t,i]){const o=$e(r,t);return o===0?$e(e,i):o}class iR{constructor(e){this.Tr=e,this.buffer=new Ut(iv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();iv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){xe(rv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ha(t)?xe(rv,"Ignoring IndexedDB error during garbage collection: ",t):await da(t)}await this.Rr(3e5)}))}}class oR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(zc.ue);const i=new iR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(nv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,p,m,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,p=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(v=Date.now(),$o()<=Ge.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${l} targets in `+(m-p)+`ms
	Removed ${T} documents in `+(v-m)+`ms
Total Duration: ${v-w}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function aR(r,e){return new oR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.changes=new no((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?re.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ll(i.mutation,o,qn.empty(),gt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ke()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ke()){const o=Ks();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Za();return l.forEach(((p,m)=>{h=h.insert(p,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Ks();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ke())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,o){let l=Ti();const h=al(),p=(function(){return al()})();return t.forEach(((m,v)=>{const w=i.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof Ts)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),ll(w.mutation,v,w.mutation.getFieldMask(),gt.now())):h.set(v.key,qn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,w)=>h.set(v,w))),t.forEach(((v,w)=>{var T;return p.set(v,new uR(w,(T=h.get(v))!==null&&T!==void 0?T:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=al();let o=new Et(((h,p)=>h-p)),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let w=i.get(m)||qn.empty();w=p.applyToLocalView(v,w),i.set(m,w);const T=(o.get(p.batchId)||Ke()).add(m);o=o.insert(p.batchId,T)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),v=m.key,w=m.value,T=f0();w.forEach((I=>{if(!l.has(I)){const z=_0(t.get(I),i.get(I));z!==null&&T.set(I,z),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,T))}return re.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return be.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):re.resolve(Ks());let p=pl,m=l;return h.next((v=>re.forEach(v,((w,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),l.get(w)?re.resolve():this.remoteDocumentCache.getEntry(e,w).next((I=>{m=m.insert(w,I)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,Ke()))).next((w=>({batchId:p,changes:h0(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((i=>{let o=Za();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Za();return this.indexManager.getCollectionParents(e,l).next((p=>re.forEach(p,(m=>{const v=(function(T,I){return new Wc(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((w=>{w.forEach(((T,I)=>{h=h.insert(T,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((m,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,mn.newInvalidDocument(w)))}));let p=Za();return h.forEach(((m,v)=>{const w=l.get(m);w!==void 0&&ll(w.mutation,v,qn.empty(),gt.now()),qc(t,v)&&(p=p.insert(m,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return re.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Gr(o.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:eR(o.bundledQuery),readTime:Gr(o.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.overlays=new Et(be.comparator),this.kr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ks();return re.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),re.resolve()}getOverlaysForCollection(e,t,i){const o=Ks(),l=t.length+1,h=new be(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const m=p.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new Et(((v,w)=>v-w));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let w=l.get(v.largestBatchId);w===null&&(w=Ks(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const p=Ks(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,w)=>p.set(v,w))),!(p.size()>=o)););return re.resolve(p)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new AC(t,i));let l=this.kr.get(t);l===void 0&&(l=Ke(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.qr=new Ut(Kt.Qr),this.$r=new Ut(Kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Kt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Kt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new be(new mt([])),i=new Kt(t,e),o=new Kt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new be(new mt([])),i=new Kt(t,e),o=new Kt(t,e+1);let l=Ke();return this.$r.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Kt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Kt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return be.comparator(e.key,t.key)||$e(e.Hr,t.Hr)}static Ur(e,t){return $e(e.Hr,t.Hr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ut(Kt.Qr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new kC(l,t,i,o);this.mutationQueue.push(h);for(const p of o)this.Yr=this.Yr.add(new Kt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return re.resolve(h)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Qf:this.er-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Kt(t,0),o=new Kt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(h=>{const p=this.Zr(h.Hr);l.push(p)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ut($e);return t.forEach((o=>{const l=new Kt(o,0),h=new Kt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(p=>{i=i.add(p.Hr)}))})),re.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;be.isDocumentKey(l)||(l=l.child(""));const h=new Kt(new be(l),0);let p=new Ut($e);return this.Yr.forEachWhile((m=>{const v=m.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(m.Hr)),!0)}),h),re.resolve(this.ei(p))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){it(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return re.forEach(t.mutations,(o=>{const l=new Kt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Kt(t,0),o=this.Yr.firstAfterOrEqual(i);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.ni=e,this.docs=(function(){return new Et(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return re.resolve(i?i.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let i=Ti();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():mn.newInvalidDocument(o))})),re.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Ti();const h=t.path,p=new be(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:v,value:{document:w}}=m.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||WI($I(w),i)<=0||(o.has(w.key)||qc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,i,o){De(9500)}ri(e,t){return re.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new gR(this)}getSize(e){return re.resolve(this.size)}}class gR extends lR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),re.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.persistence=e,this.ii=new no((t=>Xf(t)),Zf),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.si=0,this.oi=new op,this.targetCount=0,this._i=ra.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),re.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ra(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.hr(t),re.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),re.waitFor(l).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return re.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),re.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return re.resolve(i)}containsKey(e,t){return re.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t){this.ai={},this.overlays={},this.ui=new zc(0),this.ci=!1,this.ci=!0,this.li=new fR,this.referenceDelegate=e(this),this.hi=new yR(this),this.indexManager=new tR,this.remoteDocumentCache=(function(o){return new mR(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new ZC(t),this.Ti=new dR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new pR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){xe("MemoryPersistence","Starting transaction:",e);const o=new vR(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return re.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class vR extends qI{constructor(e){super(),this.currentSequenceNumber=e}}class ap{constructor(e){this.persistence=e,this.Ai=new op,this.Ri=null}static Vi(e){return new ap(e)}get mi(){if(this.Ri)return this.Ri;throw De(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),re.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.mi,(i=>{const o=be.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Me.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return re.or([()=>re.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ac{constructor(e,t){this.persistence=e,this.gi=new no((i=>QI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=aR(this,t)}static Vi(e,t){return new Ac(e,t)}Ii(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return re.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?re.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((p=>{p||(i++,l.removeEntry(h,Me.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),re.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),re.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lc(e.data.value)),t}Sr(e,t,i){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return re.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Ke(),o=Ke();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new lp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return ZE()?8:GI(gn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new _R;return this.ws(e,t,h).next((p=>{if(l.result=p,this.Rs)return this.Ss(e,t,h,p.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?($o()<=Ge.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):($o()<=Ge.DEBUG&&xe("QueryEngine","Query:",Wo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?($o()<=Ge.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(t))):re.resolve())}ps(e,t){if(qy(t))return re.resolve(null);let i=qr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=pf(t,null,"F"),i=qr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Ke(...l);return this.gs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((m=>{const v=this.bs(t,p);return this.Ds(t,v,h,m.readTime)?this.ps(e,pf(t,null,"F")):this.vs(e,v,t,m)}))))})))))}ys(e,t,i,o){return qy(t)||o.isEqual(Me.min())?re.resolve(null):this.gs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?re.resolve(null):($o()<=Ge.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wo(t)),this.vs(e,h,t,BI(o,pl)).next((p=>p)))}))}bs(e,t){let i=new Ut(c0(e));return t.forEach(((o,l)=>{qc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return $o()<=Ge.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Wo(t)),this.gs.getDocumentsMatchingQuery(e,t,ds.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="LocalStore",xR=3e8;class ER{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new Et($e),this.Ms=new no((l=>Xf(l)),Zf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function TR(r,e,t,i){return new ER(r,e,t,i)}async function j0(r,e){const t=Fe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],p=[];let m=Ke();for(const v of o){h.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}for(const v of l){p.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(i,m).next((v=>({Bs:v,removedBatchIds:h,addedBatchIds:p})))}))}))}function SR(r,e){const t=Fe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(p,m,v,w){const T=v.batch,I=T.keys();let z=re.resolve();return I.forEach((K=>{z=z.next((()=>w.getEntry(m,K))).next((Z=>{const U=v.docVersions.get(K);it(U!==null,48541),Z.version.compareTo(U)<0&&(T.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),w.addEntry(Z)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let m=Ke();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(m=m.add(p.batch.mutations[v].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function D0(r){const e=Fe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function IR(r,e){const t=Fe(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const p=[];e.targetChanges.forEach(((w,T)=>{const I=o.get(T);if(!I)return;p.push(t.hi.removeMatchingKeys(l,w.removedDocuments,T).next((()=>t.hi.addMatchingKeys(l,w.addedDocuments,T))));let z=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?z=z.withResumeToken(rn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):w.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(w.resumeToken,i)),o=o.insert(T,z),(function(Z,U,ce){return Z.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=xR?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(I,z,w)&&p.push(t.hi.updateTargetData(l,z))}));let m=Ti(),v=Ke();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),p.push(CR(l,h,e.documentUpdates).next((w=>{m=w.Ls,v=w.ks}))),!i.isEqual(Me.min())){const w=t.hi.getLastRemoteSnapshotVersion(l).next((T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(w)}return re.waitFor(p).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.Fs=o,l)))}function CR(r,e,t){let i=Ke(),o=Ke();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Ti();return t.forEach(((p,m)=>{const v=l.get(p);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Me.min())?(e.removeEntry(p,m.readTime),h=h.insert(p,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),h=h.insert(p,m)):xe(up,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",m.version)})),{Ls:h,ks:o}}))}function RR(r,e){const t=Fe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Qf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function PR(r,e){const t=Fe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,re.resolve(o)):t.hi.allocateTargetId(i).next((h=>(o=new ts(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function _f(r,e,t){const i=Fe(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ha(h))throw h;xe(up,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function sv(r,e,t){const i=Fe(r);let o=Me.min(),l=Ke();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,v,w){const T=Fe(m),I=T.Ms.get(w);return I!==void 0?re.resolve(T.Fs.get(I)):T.hi.getTargetData(v,w)})(i,h,qr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,p.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Me.min(),t?l:Ke()))).next((p=>(bR(i,mC(e),p),{documents:p,qs:l})))))}function bR(r,e,t){let i=r.xs.get(e)||Me.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class ov{constructor(){this.activeTargetIds=xC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kR{constructor(){this.Fo=new ov,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ov,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="ConnectivityMonitor";class lv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){xe(av,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){xe(av,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu=null;function wf(){return Xu===null?Xu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xu++,"0x"+Xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="RestConnection",NR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Sc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=wf(),p=this.Go(e,t.toUriEncodedString());xe(Wh,`Sending RPC '${e}' ${h}:`,p,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,o,l);const{host:v}=new URL(p),w=aa(v);return this.jo(e,p,m,i,w).then((T=>(xe(Wh,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw cs(Wh,`RPC '${e}' ${h} failed with error: `,T,"url: ",p,"request:",i),T}))}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ca})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=NR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class LR extends jR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=wf();return new Promise(((p,m)=>{const v=new O_;v.setWithCredentials(!0),v.listenOnce(M_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case ac.NO_ERROR:const T=v.getResponseJson();xe(fn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),p(T);break;case ac.TIMEOUT:xe(fn,`RPC '${e}' ${h} timed out`),m(new Ie(ae.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:const I=v.getStatus();if(xe(fn,`RPC '${e}' ${h} failed with status:`,I,"response text:",v.getResponseText()),I>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const K=z==null?void 0:z.error;if(K&&K.status&&K.message){const Z=(function(ce){const ne=ce.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(ne)>=0?ne:ae.UNKNOWN})(K.status);m(new Ie(Z,K.message))}else m(new Ie(ae.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new Ie(ae.UNAVAILABLE,"Connection failed."));break;default:De(9055,{c_:e,streamId:h,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{xe(fn,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);xe(fn,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",w,i,15)}))}P_(e,t,i){const o=wf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=z_(),p=U_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const w=l.join("");xe(fn,`Creating RPC '${e}' stream ${o}: ${w}`,m);const T=h.createWebChannel(w,m);this.T_(T);let I=!1,z=!1;const K=new DR({Ho:U=>{z?xe(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(I||(xe(fn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),xe(fn,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Yo:()=>T.close()}),Z=(U,ce,ne)=>{U.listen(ce,(de=>{try{ne(de)}catch(me){setTimeout((()=>{throw me}),0)}}))};return Z(T,Xa.EventType.OPEN,(()=>{z||(xe(fn,`RPC '${e}' stream ${o} transport opened.`),K.s_())})),Z(T,Xa.EventType.CLOSE,(()=>{z||(z=!0,xe(fn,`RPC '${e}' stream ${o} transport closed`),K.__(),this.I_(T))})),Z(T,Xa.EventType.ERROR,(U=>{z||(z=!0,cs(fn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),K.__(new Ie(ae.UNAVAILABLE,"The operation could not be completed")))})),Z(T,Xa.EventType.MESSAGE,(U=>{var ce;if(!z){const ne=U.data[0];it(!!ne,16349);const de=ne,me=(de==null?void 0:de.error)||((ce=de[0])===null||ce===void 0?void 0:ce.error);if(me){xe(fn,`RPC '${e}' stream ${o} received error:`,me);const ie=me.status;let ee=(function(b){const P=Nt[b];if(P!==void 0)return x0(P)})(ie),N=me.message;ee===void 0&&(ee=ae.INTERNAL,N="Unknown error status: "+ie+" with message "+me.message),z=!0,K.__(new Ie(ee,N)),T.close()}else xe(fn,`RPC '${e}' stream ${o} received:`,ne),K.a_(ne)}})),Z(p,F_.STAT_EVENT,(U=>{U.stat===lf.PROXY?xe(fn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===lf.NOPROXY&&xe(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{K.o_()}),0),K}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Hh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(r){return new FC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="PersistentStream";class V0{constructor(e,t,i,o,l,h,p,m){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new L0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Ei(t.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new Ie(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return xe(uv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(xe(uv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class VR extends V0{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=BC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Me.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Me.min():h.readTime?Gr(h.readTime):Me.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=vf(this.serializer),t.addTarget=(function(l,h){let p;const m=h.target;if(p=ff(m)?{documents:HC(l,m)}:{query:qC(l,m).Vt},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=S0(l,h.resumeToken);const v=mf(l,h.expectedCount);v!==null&&(p.expectedCount=v)}else if(h.snapshotVersion.compareTo(Me.min())>0){p.readTime=kc(l,h.snapshotVersion.toTimestamp());const v=mf(l,h.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=KC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=vf(this.serializer),t.removeTarget=e,this.k_(t)}}class OR extends V0{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=WC(e.writeResults,e.commitTime),i=Gr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=vf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>$C(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{}class FR extends MR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Ie(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,gf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ie(ae.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Jo(e,gf(t,i),o,h,p,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ie(ae.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class UR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ei(t),this._a=!1):xe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="RemoteStore";class zR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{i.enqueueAndForget((async()=>{ro(this)&&(xe(to,"Restarting streams for network reachability change."),await(async function(m){const v=Fe(m);v.Ia.add(4),await kl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Jc(v)})(this))}))})),this.Aa=new UR(i,o)}}async function Jc(r){if(ro(r))for(const e of r.da)await e(!0)}async function kl(r){for(const e of r.da)await e(!1)}function O0(r,e){const t=Fe(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),fp(t)?hp(t):fa(t).x_()&&dp(t,e))}function cp(r,e){const t=Fe(r),i=fa(t);t.Ta.delete(e),i.x_()&&M0(t,e),t.Ta.size===0&&(i.x_()?i.B_():ro(t)&&t.Aa.set("Unknown"))}function dp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fa(r).H_(e)}function M0(r,e){r.Ra.$e(e),fa(r).Y_(e)}function hp(r){r.Ra=new LC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),fa(r).start(),r.Aa.aa()}function fp(r){return ro(r)&&!fa(r).M_()&&r.Ta.size>0}function ro(r){return Fe(r).Ia.size===0}function F0(r){r.Ra=void 0}async function BR(r){r.Aa.set("Online")}async function $R(r){r.Ta.forEach(((e,t)=>{dp(r,e)}))}async function WR(r,e){F0(r),fp(r)?(r.Aa.la(e),hp(r)):r.Aa.set("Unknown")}async function HR(r,e,t){if(r.Aa.set("Online"),e instanceof T0&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const p of l.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ta.delete(p),o.Ra.removeTarget(p))})(r,e)}catch(i){xe(to,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Nc(r,i)}else if(e instanceof dc?r.Ra.Ye(e):e instanceof E0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Me.min()))try{const i=await D0(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const p=l.Ra.Pt(h);return p.targetChanges.forEach(((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const w=l.Ta.get(v);w&&l.Ta.set(v,w.withResumeToken(m.resumeToken,h))}})),p.targetMismatches.forEach(((m,v)=>{const w=l.Ta.get(m);if(!w)return;l.Ta.set(m,w.withResumeToken(rn.EMPTY_BYTE_STRING,w.snapshotVersion)),M0(l,m);const T=new ts(w.target,m,v,w.sequenceNumber);dp(l,T)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){xe(to,"Failed to raise snapshot:",i),await Nc(r,i)}}async function Nc(r,e,t){if(!ha(e))throw e;r.Ia.add(1),await kl(r),r.Aa.set("Offline"),t||(t=()=>D0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{xe(to,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Jc(r)}))}function U0(r,e){return e().catch((t=>Nc(r,t,e)))}async function Xc(r){const e=Fe(r),t=ms(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qf;for(;qR(e);)try{const o=await RR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,GR(e,o)}catch(o){await Nc(e,o)}z0(e)&&B0(e)}function qR(r){return ro(r)&&r.Pa.length<10}function GR(r,e){r.Pa.push(e);const t=ms(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function z0(r){return ro(r)&&!ms(r).M_()&&r.Pa.length>0}function B0(r){ms(r).start()}async function KR(r){ms(r).na()}async function QR(r){const e=ms(r);for(const t of r.Pa)e.X_(t.mutations)}async function YR(r,e,t){const i=r.Pa.shift(),o=rp.from(i,e,t);await U0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Xc(r)}async function JR(r,e){e&&ms(r).Z_&&await(async function(i,o){if((function(h){return jC(h)&&h!==ae.ABORTED})(o.code)){const l=i.Pa.shift();ms(i).N_(),await U0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Xc(i)}})(r,e),z0(r)&&B0(r)}async function cv(r,e){const t=Fe(r);t.asyncQueue.verifyOperationInProgress(),xe(to,"RemoteStore received new credentials");const i=ro(t);t.Ia.add(3),await kl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Jc(t)}async function XR(r,e){const t=Fe(r);e?(t.Ia.delete(2),await Jc(t)):e||(t.Ia.add(2),await kl(t),t.Aa.set("Unknown"))}function fa(r){return r.Va||(r.Va=(function(t,i,o){const l=Fe(t);return l.ia(),new VR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:BR.bind(null,r),e_:$R.bind(null,r),n_:WR.bind(null,r),J_:HR.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),fp(r)?hp(r):r.Aa.set("Unknown")):(await r.Va.stop(),F0(r))}))),r.Va}function ms(r){return r.ma||(r.ma=(function(t,i,o){const l=Fe(t);return l.ia(),new OR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:KR.bind(null,r),n_:JR.bind(null,r),ea:QR.bind(null,r),ta:YR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await Xc(r)):(await r.ma.stop(),r.Pa.length>0&&(xe(to,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,p=new pp(e,t,h,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mp(r,e){if(Ei("AsyncQueue",`${e}: ${r}`),ha(r))return new Ie(ae.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{static emptySet(e){return new Jo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||be.comparator(t.key,i.key):(t,i)=>be.comparator(t.key,i.key),this.keyedMap=Za(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Jo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.fa=new Et(be.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):De(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ia{constructor(e,t,i,o,l,h,p,m,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new ia(e,t,Jo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class eP{constructor(){this.queries=hv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Fe(t),l=o.queries;o.queries=hv(),l.forEach(((h,p)=>{for(const m of p.wa)m.onError(i)}))})(this,new Ie(ae.ABORTED,"Firestore shutting down"))}}function hv(){return new no((r=>u0(r)),Hc)}async function $0(r,e){const t=Fe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new ZR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=mp(h,`Initialization of query '${Wo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&gp(t)}async function W0(r,e){const t=Fe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function tP(r,e){const t=Fe(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.wa)p.Ca(o)&&(i=!0);h.ya=o}}i&&gp(t)}function nP(r,e,t){const i=Fe(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function gp(r){r.Da.forEach((e=>{e.next()}))}var xf,fv;(fv=xf||(xf={})).Fa="default",fv.Cache="cache";class H0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ia(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==xf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e){this.key=e}}class G0{constructor(e){this.key=e}}class rP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ke(),this.mutatedKeys=Ke(),this.Xa=c0(e),this.eu=new Jo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new dv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,T)=>{const I=o.get(w),z=qc(this.query,T)?T:null,K=!!I&&this.mutatedKeys.has(I.key),Z=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let U=!1;I&&z?I.data.isEqual(z.data)?K!==Z&&(i.track({type:3,doc:z}),U=!0):this.iu(I,z)||(i.track({type:2,doc:z}),U=!0,(m&&this.Xa(z,m)>0||v&&this.Xa(z,v)<0)&&(p=!0)):!I&&z?(i.track({type:0,doc:z}),U=!0):I&&!z&&(i.track({type:1,doc:I}),U=!0,(m||v)&&(p=!0)),U&&(z?(h=h.add(z),l=Z?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{eu:h,ru:i,Ds:p,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((w,T)=>(function(z,K){const Z=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{At:U})}};return Z(z)-Z(K)})(w.type,T.type)||this.Xa(w.doc,T.doc))),this.su(i),o=o!=null&&o;const p=t&&!o?this.ou():[],m=this.Za.size===0&&this.current&&!o?1:0,v=m!==this.Ya;return this.Ya=m,h.length!==0||v?{snapshot:new ia(this.query,e.eu,l,h,e.mutatedKeys,m===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new dv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ke(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new G0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new q0(i))})),t}uu(e){this.Ha=e.qs,this.Za=Ke();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ia.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const yp="SyncEngine";class iP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class sP{constructor(e){this.key=e,this.lu=!1}}class oP{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new no((p=>u0(p)),Hc),this.Tu=new Map,this.Iu=new Set,this.du=new Et(be.comparator),this.Eu=new Map,this.Au=new op,this.Ru={},this.Vu=new Map,this.mu=ra.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function aP(r,e,t=!0){const i=Z0(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await K0(i,e,t,!0),o}async function lP(r,e){const t=Z0(r);await K0(t,e,!0,!1)}async function K0(r,e,t,i){const o=await PR(r.localStore,qr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await uP(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&O0(r.remoteStore,o),p}async function uP(r,e,t,i,o){r.gu=(T,I,z)=>(async function(Z,U,ce,ne){let de=U.view.nu(ce);de.Ds&&(de=await sv(Z.localStore,U.query,!1).then((({documents:N})=>U.view.nu(N,de))));const me=ne&&ne.targetChanges.get(U.targetId),ie=ne&&ne.targetMismatches.get(U.targetId)!=null,ee=U.view.applyChanges(de,Z.isPrimaryClient,me,ie);return mv(Z,U.targetId,ee._u),ee.snapshot})(r,T,I,z);const l=await sv(r.localStore,e,!0),h=new rP(e,l.qs),p=h.nu(l.documents),m=bl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(p,r.isPrimaryClient,m);mv(r,t,v._u);const w=new iP(e,t,h);return r.Pu.set(e,w),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function cP(r,e,t){const i=Fe(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((h=>!Hc(h,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await _f(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&cp(i.remoteStore,o.targetId),Ef(i,o.targetId)})).catch(da)):(Ef(i,o.targetId),await _f(i.localStore,o.targetId,!0))}async function dP(r,e){const t=Fe(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),cp(t.remoteStore,i.targetId))}async function hP(r,e,t){const i=_P(r);try{const o=await(function(h,p){const m=Fe(h),v=gt.now(),w=p.reduce(((z,K)=>z.add(K.key)),Ke());let T,I;return m.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let K=Ti(),Z=Ke();return m.Os.getEntries(z,w).next((U=>{K=U,K.forEach(((ce,ne)=>{ne.isValidDocument()||(Z=Z.add(ce))}))})).next((()=>m.localDocuments.getOverlayedDocuments(z,K))).next((U=>{T=U;const ce=[];for(const ne of p){const de=PC(ne,T.get(ne.key).overlayedDocument);de!=null&&ce.push(new Ts(ne.key,de,n0(de.value.mapValue),or.exists(!0)))}return m.mutationQueue.addMutationBatch(z,v,ce,p)})).next((U=>{I=U;const ce=U.applyToLocalDocumentSet(T,Z);return m.documentOverlayCache.saveOverlays(z,U.batchId,ce)}))})).then((()=>({batchId:I.batchId,changes:h0(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,p,m){let v=h.Ru[h.currentUser.toKey()];v||(v=new Et($e)),v=v.insert(p,m),h.Ru[h.currentUser.toKey()]=v})(i,o.batchId,t),await Al(i,o.changes),await Xc(i.remoteStore)}catch(o){const l=mp(o,"Failed to persist write");t.reject(l)}}async function Q0(r,e){const t=Fe(r);try{const i=await IR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Eu.get(l);h&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?it(h.lu,14607):o.removedDocuments.size>0&&(it(h.lu,42227),h.lu=!1))})),await Al(t,i,e)}catch(i){await da(i)}}function pv(r,e,t){const i=Fe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const m=Fe(h);m.onlineState=p;let v=!1;m.queries.forEach(((w,T)=>{for(const I of T.wa)I.va(p)&&(v=!0)})),v&&gp(m)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fP(r,e,t){const i=Fe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new Et(be.comparator);h=h.insert(l,mn.newNoDocument(l,Me.min()));const p=Ke().add(l),m=new Qc(Me.min(),new Map,new Et($e),h,p);await Q0(i,m),i.du=i.du.remove(l),i.Eu.delete(e),vp(i)}else await _f(i.localStore,e,!1).then((()=>Ef(i,e,t))).catch(da)}async function pP(r,e){const t=Fe(r),i=e.batch.batchId;try{const o=await SR(t.localStore,e);J0(t,i,null),Y0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Al(t,o)}catch(o){await da(o)}}async function mP(r,e,t){const i=Fe(r);try{const o=await(function(h,p){const m=Fe(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return m.mutationQueue.lookupMutationBatch(v,p).next((T=>(it(T!==null,37113),w=T.keys(),m.mutationQueue.removeMutationBatch(v,T)))).next((()=>m.mutationQueue.performConsistencyCheck(v))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(v,w,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>m.localDocuments.getDocuments(v,w)))}))})(i.localStore,e);J0(i,e,t),Y0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Al(i,o)}catch(o){await da(o)}}function Y0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function J0(r,e,t){const i=Fe(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Ef(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||X0(r,i)}))}function X0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(cp(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),vp(r))}function mv(r,e,t){for(const i of t)i instanceof q0?(r.Au.addReference(i.key,e),gP(r,i)):i instanceof G0?(xe(yp,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||X0(r,i.key)):De(19791,{yu:i})}function gP(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(xe(yp,"New document in limbo: "+t),r.Iu.add(i),vp(r))}function vp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new be(mt.fromString(e)),i=r.mu.next();r.Eu.set(i,new sP(t)),r.du=r.du.insert(t,i),O0(r.remoteStore,new ts(qr(ep(t.path)),i,"TargetPurposeLimboResolution",zc.ue))}}async function Al(r,e,t){const i=Fe(r),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach(((p,m)=>{h.push(i.gu(m,e,t).then((v=>{var w;if((v||t)&&i.isPrimaryClient){const T=v?!v.fromCache:(w=t==null?void 0:t.targetChanges.get(m.targetId))===null||w===void 0?void 0:w.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(v){o.push(v);const T=lp.Es(m.targetId,v);l.push(T)}})))})),await Promise.all(h),i.hu.J_(o),await(async function(m,v){const w=Fe(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>re.forEach(v,(I=>re.forEach(I.Is,(z=>w.persistence.referenceDelegate.addReference(T,I.targetId,z))).next((()=>re.forEach(I.ds,(z=>w.persistence.referenceDelegate.removeReference(T,I.targetId,z)))))))))}catch(T){if(!ha(T))throw T;xe(up,"Failed to update sequence numbers: "+T)}for(const T of v){const I=T.targetId;if(!T.fromCache){const z=w.Fs.get(I),K=z.snapshotVersion,Z=z.withLastLimboFreeSnapshotVersion(K);w.Fs=w.Fs.insert(I,Z)}}})(i.localStore,l))}async function yP(r,e){const t=Fe(r);if(!t.currentUser.isEqual(e)){xe(yp,"User change. New user:",e.toKey());const i=await j0(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((p=>{p.forEach((m=>{m.reject(new Ie(ae.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Al(t,i.Bs)}}function vP(r,e){const t=Fe(r),i=t.Eu.get(e);if(i&&i.lu)return Ke().add(i.key);{let o=Ke();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const p=t.Pu.get(h);o=o.unionWith(p.view.tu)}return o}}function Z0(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fP.bind(null,e),e.hu.J_=tP.bind(null,e.eventManager),e.hu.pu=nP.bind(null,e.eventManager),e}function _P(r){const e=Fe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mP.bind(null,e),e}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return TR(this.persistence,new wR,e.initialUser,this.serializer)}Du(e){return new N0(ap.Vi,this.serializer)}bu(e){return new kR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class wP extends jc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){it(this.persistence.referenceDelegate instanceof Ac,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new sR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new N0((i=>Ac.Vi(i,t)),this.serializer)}}class Tf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>pv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yP.bind(null,this.syncEngine),await XR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eP})()}createDatastore(e){const t=Yc(e.databaseInfo.databaseId),i=(function(l){return new LR(l)})(e.databaseInfo);return(function(l,h,p,m){return new FR(l,h,p,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,p){return new zR(i,o,l,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>pv(this.syncEngine,t,0)),(function(){return lv.C()?new lv:new AR})())}createSyncEngine(e,t){return(function(o,l,h,p,m,v,w){const T=new oP(o,l,h,p,m,v);return w&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Fe(o);xe(to,"RemoteStore shutting down."),l.Ia.add(5),await kl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Tf.provider={build:()=>new Tf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class xP{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=pn.UNAUTHENTICATED,this.clientId=Gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{xe(gs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(xe(gs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=mp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function qh(r,e){r.asyncQueue.verifyOperationInProgress(),xe(gs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await j0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{cs("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{xe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{cs("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function gv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await EP(r);xe(gs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>cv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>cv(e.remoteStore,o))),r._onlineComponents=e}async function EP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){xe(gs,"Using user provided OfflineComponentProvider");try{await qh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;cs("Error using user provided cache. Falling back to memory cache: "+t),await qh(r,new jc)}}else xe(gs,"Using default OfflineComponentProvider"),await qh(r,new wP(void 0));return r._offlineComponents}async function tw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(xe(gs,"Using user provided OnlineComponentProvider"),await gv(r,r._uninitializedComponentsProvider._online)):(xe(gs,"Using default OnlineComponentProvider"),await gv(r,new Tf))),r._onlineComponents}function TP(r){return tw(r).then((e=>e.syncEngine))}async function nw(r){const e=await tw(r),t=e.eventManager;return t.onListen=aP.bind(null,e.syncEngine),t.onUnlisten=cP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dP.bind(null,e.syncEngine),t}function SP(r,e,t={}){const i=new _i;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,m,v){const w=new ew({next:I=>{w.Ou(),h.enqueueAndForget((()=>W0(l,T)));const z=I.docs.has(p);!z&&I.fromCache?v.reject(new Ie(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&I.fromCache&&m&&m.source==="server"?v.reject(new Ie(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(I)},error:I=>v.reject(I)}),T=new H0(ep(p.path),w,{includeMetadataChanges:!0,ka:!0});return $0(l,T)})(await nw(r),r.asyncQueue,e,t,i))),i.promise}function IP(r,e,t={}){const i=new _i;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,m,v){const w=new ew({next:I=>{w.Ou(),h.enqueueAndForget((()=>W0(l,T))),I.fromCache&&m.source==="server"?v.reject(new Ie(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(I)},error:I=>v.reject(I)}),T=new H0(p,w,{includeMetadataChanges:!0,ka:!0});return $0(l,T)})(await nw(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="firestore.googleapis.com",vv=!0;class _v{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iw,this.ssl=vv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:vv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=A0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rR)throw new Ie(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ie(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ie(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ie(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _v({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _v(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new NI;switch(i.type){case"firstParty":return new VI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ie(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=yv.get(t);i&&(xe("ComponentProvider","Removing Datastore"),yv.delete(t),i.terminate())})(this),Promise.resolve()}}function CP(r,e,t,i={}){var o;r=br(r,Zc);const l=aa(e),h=r._getSettings(),p=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${t}`;l&&(qv(`https://${m}`),Gv("Firestore",!0)),h.host!==iw&&h.host!==m&&cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:m,ssl:l,emulatorOptions:i});if(!Ys(v,p)&&(r._setSettings(v),i.mockUserToken)){let w,T;if(typeof i.mockUserToken=="string")w=i.mockUserToken,T=pn.MOCK_USER;else{w=WE(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new Ie(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new pn(I)}r._authCredentials=new jI(new $_(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ed(this.firestore,e,this._query)}}class Dt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}toJSON(){return{type:Dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Rl(t,Dt._jsonSchema))return new Dt(e,i||null,new be(mt.fromString(t.referencePath)))}}Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:jt("string",Dt._jsonSchemaVersion),referencePath:jt("string")};class ls extends ed{constructor(e,t,i){super(e,t,ep(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new be(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function Wn(r,e,...t){if(r=nn(r),H_("collection","path",e),r instanceof Zc){const i=mt.fromString(e,...t);return jy(i),new ls(r,null,i)}{if(!(r instanceof Dt||r instanceof ls))throw new Ie(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(mt.fromString(e,...t));return jy(i),new ls(r.firestore,null,i)}}function St(r,e,...t){if(r=nn(r),arguments.length===1&&(e=Gf.newId()),H_("doc","path",e),r instanceof Zc){const i=mt.fromString(e,...t);return Ny(i),new Dt(r,null,new be(i))}{if(!(r instanceof Dt||r instanceof ls))throw new Ie(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(mt.fromString(e,...t));return Ny(i),new Dt(r.firestore,r instanceof ls?r.converter:null,new be(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="AsyncQueue";class xv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new L0(this,"async_queue_retry"),this.oc=()=>{const i=Hh();i&&xe(wv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Hh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Hh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new _i;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ha(e))throw e;xe(wv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Ei("INTERNAL UNHANDLED ERROR: ",Ev(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=pp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&De(47125,{hc:Ev(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Ev(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class io extends Zc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new xv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xv(e),this._firestoreClient=void 0,await e}}}function RP(r,e){const t=typeof r=="object"?r:Jv(),i=typeof r=="string"?r:Sc,o=Df(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=BE("firestore");l&&CP(o,...l)}return o}function _p(r){if(r._terminated)throw new Ie(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||PP(r),r._firestoreClient}function PP(r){var e,t,i;const o=r._freezeSettings(),l=(function(p,m,v,w){return new XI(p,m,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,rw(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new xP(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(p){const m=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(m),_online:m}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sr(rn.fromBase64String(e))}catch(t){throw new Ie(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sr(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rl(e,sr._jsonSchema))return sr.fromBase64String(e.bytes)}}sr._jsonSchemaVersion="firestore/bytes/1.0",sr._jsonSchema={type:jt("string",sr._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ie(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kr._jsonSchemaVersion}}static fromJSON(e){if(Rl(e,Kr._jsonSchema))return new Kr(e.latitude,e.longitude)}}Kr._jsonSchemaVersion="firestore/geoPoint/1.0",Kr._jsonSchema={type:jt("string",Kr._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rl(e,Qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Qr(e.vectorValues);throw new Ie(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qr._jsonSchemaVersion="firestore/vectorValue/1.0",Qr._jsonSchema={type:jt("string",Qr._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=/^__.*__$/;class kP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}class sw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ow(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ec:r})}}class xp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new xp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Dc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ow(this.Ec)&&bP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class AP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Yc(e)}Dc(e,t,i,o=!1){return new xp({Ec:e,methodName:t,bc:i,path:tn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ep(r){const e=r._freezeSettings(),t=Yc(r._databaseId);return new AP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function aw(r,e,t,i,o,l={}){const h=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);Tp("Data must be an object, but it was:",h,i);const p=lw(i,h);let m,v;if(l.merge)m=new qn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const I=Sf(e,T,t);if(!h.contains(I))throw new Ie(ae.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);cw(w,I)||w.push(I)}m=new qn(w),v=h.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,v=h.fieldTransforms;return new kP(new Dn(p),m,v)}class nd extends wp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nd}}function NP(r,e,t,i){const o=r.Dc(1,e,t);Tp("Data must be an object, but it was:",o,i);const l=[],h=Dn.empty();Es(i,((m,v)=>{const w=Sp(e,m,t);v=nn(v);const T=o.gc(w);if(v instanceof nd)l.push(w);else{const I=rd(v,T);I!=null&&(l.push(w),h.set(w,I))}}));const p=new qn(l);return new sw(h,p,o.fieldTransforms)}function jP(r,e,t,i,o,l){const h=r.Dc(1,e,t),p=[Sf(e,i,t)],m=[o];if(l.length%2!=0)throw new Ie(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)p.push(Sf(e,l[I])),m.push(l[I+1]);const v=[],w=Dn.empty();for(let I=p.length-1;I>=0;--I)if(!cw(v,p[I])){const z=p[I];let K=m[I];K=nn(K);const Z=h.gc(z);if(K instanceof nd)v.push(z);else{const U=rd(K,Z);U!=null&&(v.push(z),w.set(z,U))}}const T=new qn(v);return new sw(w,T,h.fieldTransforms)}function rd(r,e){if(uw(r=nn(r)))return Tp("Unsupported field value:",e,r),lw(r,e);if(r instanceof wp)return(function(i,o){if(!ow(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const p of i){let m=rd(p,o.yc(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=nn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return EC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=gt.fromDate(i);return{timestampValue:kc(o.serializer,l)}}if(i instanceof gt){const l=new gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kc(o.serializer,l)}}if(i instanceof Kr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sr)return{bytesValue:S0(o.serializer,i._byteString)};if(i instanceof Dt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:sp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Qr)return(function(h,p){return{mapValue:{fields:{[e0]:{stringValue:t0},[Ic]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw p.wc("VectorValues must only contain numeric values.");return tp(p.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Kf(i)}`)})(r,e)}function lw(r,e){const t={};return K_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(r,((i,o)=>{const l=rd(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function uw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gt||r instanceof Kr||r instanceof sr||r instanceof Dt||r instanceof wp||r instanceof Qr)}function Tp(r,e,t){if(!uw(t)||!q_(t)){const i=Kf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function Sf(r,e,t){if((e=nn(e))instanceof td)return e._internalPath;if(typeof e=="string")return Sp(r,e);throw Dc("Field path arguments must be of type string or ",r,!1,void 0,t)}const DP=new RegExp("[~\\*/\\[\\]]");function Sp(r,e,t){if(e.search(DP)>=0)throw Dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new td(...e.split("."))._internalPath}catch{throw Dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Dc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new Ie(ae.INVALID_ARGUMENT,p+r+m)}function cw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LP extends dw{data(){return super.data()}}function hw(r,e){return typeof e=="string"?Sp(r,e):e instanceof td?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ie(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OP{convertValue(e,t="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Es(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Ic].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>Ct(h.doubleValue)));return new Qr(l)}convertGeoPoint(e){return new Kr(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=$c(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const t=hs(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=mt.fromString(e);it(k0(i),9688,{name:e});const o=new gl(i.get(1),i.get(3)),l=new be(i.popFirst(5));return o.isEqual(t)||Ei(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qs extends dw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(hw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qs._jsonSchema={type:jt("string",Qs._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class hc extends Qs{data(e={}){return super.data(e)}}class Xo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new tl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new hc(this._firestore,this._userDataWriter,i.key,i,new tl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const m=new hc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new tl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const m=new hc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new tl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return p.type!==0&&(v=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:MP(p.type),doc:m,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(r){r=br(r,Dt);const e=br(r.firestore,io);return SP(_p(e),r._key).then((t=>FP(e,r,t)))}Xo._jsonSchemaVersion="firestore/querySnapshot/1.0",Xo._jsonSchema={type:jt("string",Xo._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class pw extends OP{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,t)}}function ns(r){r=br(r,ed);const e=br(r.firestore,io),t=_p(e),i=new pw(e);return VP(r._query),IP(t,r._query).then((o=>new Xo(e,i,r,o)))}function Zu(r,e,t){r=br(r,Dt);const i=br(r.firestore,io),o=fw(r.converter,e,t);return id(i,[aw(Ep(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,or.none())])}function qs(r,e,t,...i){r=br(r,Dt);const o=br(r.firestore,io),l=Ep(o);let h;return h=typeof(e=nn(e))=="string"||e instanceof td?jP(l,"updateDoc",r._key,e,t,i):NP(l,"updateDoc",r._key,e),id(o,[h.toMutation(r._key,or.exists(!0))])}function Zi(r){return id(br(r.firestore,io),[new np(r._key,or.none())])}function Go(r,e){const t=br(r.firestore,io),i=St(r),o=fw(r.converter,e);return id(t,[aw(Ep(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,or.exists(!1))]).then((()=>i))}function id(r,e){return(function(i,o){const l=new _i;return i.asyncQueue.enqueueAndForget((async()=>hP(await TP(i),o,l))),l.promise})(_p(r),e)}function FP(r,e,t){const i=t.docs.get(e._key),o=new pw(r);return new Qs(r,o,e._key,i,new tl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ca=o})(la),Zo(new Js("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),p=new io(new DI(i.getProvider("auth-internal")),new OI(h,i.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Ie(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(v.options.projectId,w)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),os(Ry,Py,e),os(Ry,Py,"esm2017")})();const UP={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},mw=Yv(UP),us=kI(mw),Ze=RP(mw),gw=F.createContext(null);function zP({children:r}){const[e,t]=F.useState(null),[i,o]=F.useState(!1),[l,h]=F.useState(!0);F.useEffect(()=>{const v=w1(us,async w=>{if(t(w),w)try{const T=St(Ze,"admins",w.uid);if((await If(T)).exists())o(!0);else{const z=St(Ze,"roles",w.uid),K=await If(z);K.exists()&&K.data().admin===!0?o(!0):o(!1)}}catch(T){console.error("Error checking admin role:",T),o(!1)}else o(!1);h(!1)});return()=>v()},[]);const p=async(v,w)=>{await E_(us,v,w)},m=async()=>{await T_(us)};return c.jsx(gw.Provider,{value:{user:e,admin:i,loading:l,login:p,logout:m},children:r})}function pa(){return F.useContext(gw)}function BP({onClose:r}){const[e,t]=F.useState("login"),[i,o]=F.useState(""),[l,h]=F.useState("");async function p(){try{await D_(us,new Wr),r()}catch(w){alert(w.message)}}async function m(w){w.preventDefault();try{await E_(us,i,l),r()}catch(T){alert(T.message)}}async function v(w){w.preventDefault();try{await y1(us,i,l),r()}catch(T){alert(T.message)}}return c.jsx("div",{className:"auth-modal-backdrop",onClick:r,children:c.jsxs("div",{className:"auth-modal",onClick:w=>w.stopPropagation(),children:[c.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),c.jsxs("button",{className:"google-btn",onClick:p,children:[c.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),c.jsx("div",{className:"auth-divider",children:c.jsx("span",{children:"or"})}),c.jsxs("form",{onSubmit:e==="login"?m:v,className:"auth-form",children:[c.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:i,onChange:w=>o(w.target.value),required:!0}),c.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:w=>h(w.target.value),required:!0}),c.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),c.jsx("div",{className:"auth-switcher",children:e==="login"?c.jsxs("p",{children:["No account?"," ",c.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):c.jsxs("p",{children:["Already have an account?"," ",c.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),c.jsx("button",{className:"auth-close",onClick:r,children:"Close"})]})})}function $P(){const[r,e]=F.useState(!1),[t,i]=F.useState(!1),{user:o,admin:l}=pa(),h=Vc();async function p(){try{await T_(us),e(!1),h("/")}catch(m){console.error(m),alert("Logout failed.")}}return c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:`menu-toggle ${r?"active":""}`,onClick:()=>e(!r),children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]}),c.jsxs("nav",{className:`menu-panel ${r?"open":""}`,children:[c.jsx(Ws,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),c.jsx(Ws,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),c.jsx(Ws,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),c.jsx(Ws,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),c.jsx(Ws,{to:"/music",className:"menu-item",onClick:()=>e(!1),children:"Music"}),c.jsx(Ws,{to:"/steam",className:"menu-item",onClick:()=>e(!1),children:"Gaming"}),l&&c.jsx(Ws,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),c.jsxs("div",{className:"auth-section",children:[c.jsx("p",{className:"auth-section-status",children:o?`Signed in as ${o.email||o.uid}`:"Not signed in"}),c.jsxs("div",{children:[!o&&c.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),i(!0)},children:"Sign in"}),o&&c.jsx("button",{className:"auth-btn secondary",onClick:p,children:"Sign out"})]})]})]}),t&&c.jsx(BP,{onClose:()=>i(!1)})]})}function Tv(){const r="Tyler's Collection Homepage",e="",[t,i]=F.useState(""),[o,l]=F.useState(!0),h=F.useRef(null),[p,m]=F.useState("jp"),[v,w]=F.useState(1);return F.useEffect(()=>{document.title="Tyler's Collection"},[]),F.useEffect(()=>(h.current=setInterval(()=>l(T=>!T),450),()=>{h.current&&clearInterval(h.current)}),[]),F.useEffect(()=>{let T=!1;const I=Z=>new Promise(U=>setTimeout(U,Z)),z=async(Z,U=120)=>{for(let ce=1;ce<=Z.length;ce+=1){if(T)return;i(Z.slice(0,ce)),await I(U)}},K=async(Z,U=70)=>{for(let ce=Z.length;ce>=0;ce-=1){if(T)return;i(Z.slice(0,ce)),await I(U)}};return(async()=>{if(localStorage.getItem("homeTitleTyped")==="1"){m("en"),i(r),l(!1),h.current&&clearInterval(h.current);return}await I(250),m("jp"),await z(e,140),await I(6e3),await K(e,80),await I(320);const U=r;for(let ce=1;ce<=U.length;ce+=1){if(T)return;i(U.slice(0,ce)),ce===4&&m("en"),await I(110)}m("en"),await I(2e3),l(!1),localStorage.setItem("homeTitleTyped","1"),h.current&&clearInterval(h.current)})(),()=>{T=!0}},[]),c.jsxs("main",{className:"page",children:[c.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[c.jsxs("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",display:"inline-flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:t||" "}),c.jsx("span",{style:{width:"6px",height:"1.1em",background:"#ffb6c1",opacity:o?1:0,transition:"opacity 0.15s ease"}})]}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem",opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"This is my personal webpage to see what is on my shelves, wishlists, and TCG collections."}),c.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"8px 14px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"linear-gradient(135deg, rgba(255,182,193,0.18), rgba(43,15,29,0.9))",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"14px",fontSize:"0.78rem",color:"#ffe6ed",letterSpacing:"0.05em",textTransform:"uppercase",fontWeight:700,opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?c.jsxs(c.Fragment,{children:[c.jsx("span",{role:"img","aria-label":"manga",children:""})," ",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"anime",children:""})," ",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{role:"img","aria-label":"manga",children:""})," Manga",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"anime",children:""})," Anime",c.jsx("span",{style:{color:"rgba(255,182,193,0.6)"},children:""}),c.jsx("span",{role:"img","aria-label":"tcg",children:""})," TCG"]})})]}),c.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[c.jsxs("article",{className:"card",children:[c.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:c.jsx("span",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"About Me"})}),c.jsx("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5,opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"im.okTCG":"Hey, I am Tyler and I go by im.ok. I hoard manga, binge anime, and collect trading cards."}),c.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem",opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"This site is where I track everything: volumes on my shelves, finished shows, and my TCG collection as they all slowly grow."}),c.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px",opacity:v,transition:"opacity 0.25s ease"},children:[c.jsx("span",{className:"pill",children:p==="jp"?"":"Manga library"}),c.jsx("span",{className:"pill",children:p==="jp"?"":"My Anime List (MAL)"}),c.jsx("span",{className:"pill",children:p==="jp"?" & TCG":"Pokemon & One Piece TCG"}),c.jsx("span",{className:"pill",children:p==="jp"?"":"Data Nerd"})]})]}),c.jsxs("article",{className:"card",children:[c.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:c.jsx("span",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Explore these pages"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[c.jsxs("a",{href:"/base/manga",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Manga Library"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Full manga collection & wishlist."}),c.jsx("div",{className:"section-chip-row",children:c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Library & wishlist"})})]}),c.jsxs("a",{href:"/base/music",className:"section-card",style:{justifySelf:"end",alignSelf:"end",order:99},children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Music"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"If you are here for my music, this is the page for you! Catch all the latest releases."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Latest tracks"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:"Spotify & SoundCloud"})]})]}),c.jsxs("a",{href:"/base/anime",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Anime Library"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"MAL":"The entire watched, plan to watch, and watching list synced directly from MyAnimeList."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"MAL":"MAL synced"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Status filters"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Quick stats"})]})]}),c.jsxs("a",{href:"/base/tcg",className:"section-card",children:[c.jsx("h3",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"TCG Collection"}),c.jsx("p",{style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"TCG":"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),c.jsxs("div",{className:"section-chip-row",children:[c.jsx("span",{className:"section-chip accent",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Full Collection"}),c.jsx("span",{className:"section-chip",style:{opacity:v,transition:"opacity 0.25s ease"},children:p==="jp"?"":"Still Under-Construction"})]})]})]})]})]}),c.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"@ 2025 im.ok. All rights reserved."})]})}const WP="modulepreload",HP=function(r){return"/base/"+r},Sv={},Nl=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let h=function(v){return Promise.all(v.map(w=>Promise.resolve(w).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),m=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=h(t.map(v=>{if(v=HP(v),v in Sv)return;Sv[v]=!0;const w=v.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${T}`))return;const I=document.createElement("link");if(I.rel=w?"stylesheet":WP,w||(I.as="script"),I.crossOrigin="",I.href=v,m&&I.setAttribute("nonce",m),document.head.appendChild(I),w)return new Promise((z,K)=>{I.addEventListener("load",z),I.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return o.then(h=>{for(const p of h||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})};function mi(r){let e=(r||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),i=t?t[1].trim().toLowerCase():e.toLowerCase(),o=t&&t[2]?parseInt(t[2],10):0;return{name:i,vol:Number.isFinite(o)?o:0}}function qP(){const{admin:r}=pa(),e=r,[t,i]=F.useState("library");F.useEffect(()=>{document.title="Manga | Library"},[]);const[o,l]=F.useState([]),[h,p]=F.useState([]),[m,v]=F.useState([]),[w,T]=F.useState([]),[I,z]=F.useState(!1),[K,Z]=F.useState(!0),[U,ce]=F.useState(""),[ne,de]=F.useState(""),[me,ie]=F.useState(""),[ee,N]=F.useState(!1),[C,b]=F.useState(()=>new Set),[P,V]=F.useState(null),[A,R]=F.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[Oe,Ye]=F.useState([]),[Ue,W]=F.useState(0),[j,se]=F.useState({open:!1,index:0,items:[]});async function oe(){const E=await ns(Wn(Ze,"library")),B=[];E.forEach(te=>{const O=te.data();B.push({id:te.id,title:O.title||"",authors:O.authors||"Unknown",publisher:O.publisher||"Unknown",demographic:O.demographic||"",genre:O.genre||"",subGenre:O.subGenre||"",date:O.date||"Unknown",cover:O.cover||"",isbn:O.isbn||"",pageCount:O.pageCount!==void 0&&O.pageCount!==null?O.pageCount:"",rating:O.rating!==void 0&&O.rating!==null?O.rating:"",amountPaid:O.amountPaid!==void 0&&O.amountPaid!==null?O.amountPaid:"",dateRead:O.dateRead||"",datePurchased:O.datePurchased||"",msrp:O.msrp!==void 0&&O.msrp!==null?O.msrp:"",specialType:O.specialType||"",specialVolumes:O.specialVolumes!==void 0&&O.specialVolumes!==null?O.specialVolumes:"",collectiblePrice:O.collectiblePrice!==void 0&&O.collectiblePrice!==null?O.collectiblePrice:"",read:!!O.read,amazonURL:O.amazonURL||"",hidden:!!O.hidden,kind:"library"})}),B.sort((te,O)=>{const G=mi(te.title),we=mi(O.title),We=G.name.localeCompare(we.name);return We!==0?We:G.vol-we.vol}),l(B),v(te=>{const O=new Set(te);return B.forEach(G=>O.add(G.title||"")),Array.from(O).filter(Boolean).sort()})}async function D(){const E=await ns(Wn(Ze,"wishlist")),B=[];E.forEach(te=>{const O=te.data();B.push({id:te.id,title:O.title||"",authors:O.authors||"Unknown",publisher:O.publisher||"Unknown",date:O.date||"Unknown",cover:O.cover||"",isbn:O.isbn||"",pageCount:O.pageCount!==void 0&&O.pageCount!==null?O.pageCount:"",rating:O.rating!==void 0&&O.rating!==null?O.rating:"",amountPaid:O.amountPaid!==void 0&&O.amountPaid!==null?O.amountPaid:"",specialType:O.specialType||"",specialVolumes:O.specialVolumes!==void 0&&O.specialVolumes!==null?O.specialVolumes:"",collectiblePrice:O.collectiblePrice!==void 0&&O.collectiblePrice!==null?O.collectiblePrice:"",amazonURL:O.amazonURL||"",hidden:!!O.hidden,kind:"wishlist"})}),B.sort((te,O)=>{const G=mi(te.title),we=mi(O.title),We=G.name.localeCompare(we.name);return We!==0?We:G.vol-we.vol}),p(B),v(te=>{const O=new Set(te);return B.forEach(G=>O.add(G.title||"")),Array.from(O).filter(Boolean).sort()})}F.useEffect(()=>{let E=!1;async function B(){Z(!0),ce("");try{await Promise.all([oe(),D()]),E||Z(!1)}catch(te){if(console.error(te),!E){console.warn("Falling back to offline JSON for manga.");try{const G=await fetch("/base/manga-library-wishlist.json",{cache:"no-cache"});if(!G.ok)throw new Error("fallback fetch failed");const we=await G.json(),We=Array.isArray(we.library)?we.library:[],ot=Array.isArray(we.wishlist)?we.wishlist:[];l(We.map((ve,Pe)=>({id:ve.id||`offline-lib-${Pe}`,title:ve.title||"",authors:ve.authors||"Unknown",publisher:ve.publisher||"Unknown",demographic:ve.demographic||"",genre:ve.genre||"",subGenre:ve.subGenre||"",date:ve.date||"Unknown",cover:ve.cover||"",isbn:ve.isbn||"",pageCount:ve.pageCount??"",rating:ve.rating??"",amountPaid:ve.amountPaid??"",dateRead:ve.dateRead||"",datePurchased:ve.datePurchased||"",msrp:ve.msrp??"",specialType:ve.specialType||"",specialVolumes:ve.specialVolumes??"",collectiblePrice:ve.collectiblePrice??"",amazonURL:ve.amazonURL||"",read:!!ve.read,hidden:!!ve.hidden,kind:"library"}))),p(ot.map((ve,Pe)=>({id:ve.id||`offline-wish-${Pe}`,title:ve.title||"",authors:ve.authors||"Unknown",publisher:ve.publisher||"Unknown",demographic:ve.demographic||"",genre:ve.genre||"",subGenre:ve.subGenre||"",date:ve.date||"Unknown",cover:ve.cover||"",isbn:ve.isbn||"",pageCount:ve.pageCount??"",rating:ve.rating??"",amountPaid:ve.amountPaid??"",dateRead:ve.dateRead||"",datePurchased:ve.datePurchased||"",msrp:ve.msrp??"",specialType:ve.specialType||"",specialVolumes:ve.specialVolumes??"",collectiblePrice:ve.collectiblePrice??"",amazonURL:ve.amazonURL||"",read:!!ve.read,hidden:!!ve.hidden,kind:"wishlist"}))),Z(!1),ce("Loaded offline data (Firestore unavailable).")}catch(O){console.error("Offline fallback failed",O),ce("Failed to load manga data from Firestore."),Z(!1)}}}}return B(),()=>{E=!0}},[]);const J=F.useMemo(()=>{const E=ne.trim().toLowerCase();return E?o.filter(B=>[B.title,B.authors,B.publisher,B.isbn,B.date,String(B.pageCount??"")].join(" ").toLowerCase().includes(E)):o},[o,ne]),ye=F.useMemo(()=>e&&I?J:J.filter(E=>!E.hidden),[J,e,I]),Re=F.useMemo(()=>{const E=me.trim().toLowerCase();return E?h.filter(B=>[B.title,B.authors,B.publisher,B.isbn,B.date,String(B.pageCount??"")].join(" ").toLowerCase().includes(E)):h},[h,me]),Ne=F.useMemo(()=>e&&I?Re:Re.filter(E=>!E.hidden),[Re,e,I]);function ze(){e&&(N(E=>!E),b(new Set))}function qe(E){b(B=>{const te=new Set(B);return te.has(E)?te.delete(E):te.add(E),te})}async function Be(E){if(!e){alert("Multi-select actions require admin access.");return}const B=Array.from(C);if(!B.length){alert("Select at least one item first.");return}const te=t==="library";try{if(E==="move")if(te){if(!window.confirm(`Move ${B.length} item(s) to Wishlist?`))return;for(const O of B){const G=o.find(We=>We.id===O);if(!G)continue;const we={title:G.title,authors:G.authors,publisher:G.publisher,date:G.date,pageCount:G.pageCount||"",cover:G.cover,amazonURL:G.amazonURL||"",hidden:!!G.hidden};await Go(Wn(Ze,"wishlist"),we),await Zi(St(Ze,"library",O))}}else{if(!window.confirm(`Move ${B.length} item(s) to Library?`))return;for(const O of B){const G=h.find(We=>We.id===O);if(!G)continue;const we={title:G.title,authors:G.authors,publisher:G.publisher,date:G.date,pageCount:G.pageCount||"",cover:G.cover,amountPaid:"",read:!1,rating:"",msrp:"",collectiblePrice:"",specialType:"",specialVolumes:"",isbn:"",demographic:"",genre:"",subGenre:"",hidden:!!G.hidden};await Go(Wn(Ze,"library"),we),await Zi(St(Ze,"wishlist",O))}}else if(E==="markRead"&&te)for(const O of B)await qs(St(Ze,"library",O),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(E==="markUnread"&&te)for(const O of B)await qs(St(Ze,"library",O),{read:!1,dateRead:"",rating:""});else if(E==="delete"){const O=te?"library":"wishlist";if(!window.confirm(`Delete ${B.length} item(s) from ${te?"Library":"Wishlist"}?`))return;for(const G of B)await Zi(St(Ze,O,G))}await Promise.all([oe(),D()]),b(new Set),N(!1)}catch(O){console.error(O),alert("Failed to apply multi-select action.")}}function tt(E){V(E)}function at(){V(null)}const sn=()=>{R(E=>({...E,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1,hidden:!1},multiAdd:!1,startVol:"",endVol:""})),Ye([]),W(0)},Qt=F.useMemo(()=>{const E=new Map;return[...o,...h].forEach(B=>{const te=mi(B.title||"");if(!te.name)return;const O=(B.title||"").replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||B.title||te.name;if(!E.has(te.name))E.set(te.name,{display:O,maxVol:te.vol,authors:B.authors||"",publisher:B.publisher||"",demographic:B.demographic||""});else{const G=E.get(te.name);G.maxVol=Math.max(G.maxVol,te.vol),!G.authors&&B.authors&&(G.authors=B.authors),!G.publisher&&B.publisher&&(G.publisher=B.publisher),!G.demographic&&B.demographic&&(G.demographic=B.demographic)}}),E},[o,h]),Gn=E=>{R(B=>({...B,open:!0,mode:"add",list:E,editingId:null,data:{...B.data,title:"",list:E}})),Ye([{kind:"new",id:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1}}]),W(0)},lr=E=>{const B={open:!0,mode:"edit",list:E.kind==="wishlist"?"wishlist":"library",editingId:E.id,data:{title:E.title||"",authors:E.authors||"",publisher:E.publisher||"",demographic:E.demographic||"",genre:E.genre||"",subGenre:E.subGenre||"",date:E.date||"",cover:E.cover||"",isbn:E.isbn||"",pageCount:E.pageCount||"",rating:E.rating||"",amountPaid:E.amountPaid||"",dateRead:E.dateRead||"",datePurchased:E.datePurchased||"",msrp:E.msrp||"",specialType:E.specialType||"",specialVolumes:E.specialVolumes||"",collectiblePrice:E.collectiblePrice||"",amazonURL:E.amazonURL||"",read:!!E.read,hidden:!!E.hidden}};R(B),Ye([{kind:"edit",id:E.id,data:{...B.data}}]),W(0)},nt=(E,B,te="text")=>{if(R(O=>{const G={...O.data,[E]:te==="checkbox"?!!B:B};if(E==="title"){const we=mi(B||"");if(we.name&&Qt.has(we.name)){const We=Qt.get(we.name);G.authors=We.authors||G.authors,G.publisher=We.publisher||G.publisher,G.demographic=We.demographic||G.demographic}}return{...O,data:G}}),Ye(O=>{if(!O.length)return O;const G=[...O],we={...G[Ue]};return we.data={...we.data,[E]:te==="checkbox"?!!B:B},G[Ue]=we,G}),E==="title"){const O=String(B||"").trim().toLowerCase();if(!O)T([]);else{const G=[];Qt.forEach(we=>{if(we.display.toLowerCase().includes(O)){const We=we.maxVol>0?we.maxVol+1:1;G.push(`${we.display}, Vol. ${We}`)}}),T(G.slice(0,6))}}},zt=E=>{Oe[E]&&(W(E),R(B=>{const te=Oe[E];return{...B,data:{...te.data}}}))},yn=()=>{const E=A.data.title||"",B=mi(E);if(!B.name){alert("Provide a title with a volume number first (e.g., Series, Vol. 1).");return}const te=E.replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||E;let O=B.vol||0;const G=Qt.get(B.name);G&&G.maxVol>O&&(O=G.maxVol),Oe.forEach(ve=>{const Pe=mi(ve.data.title||"");Pe.name===B.name&&(O=Math.max(O,Pe.vol||0))});const we=(O||0)+1,ot={title:`${te}, Vol. ${we}`,authors:A.data.authors,publisher:A.data.publisher,demographic:A.data.demographic,genre:A.data.genre,subGenre:A.data.subGenre,msrp:A.data.msrp,hidden:A.data.hidden,cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",date:"",dateRead:"",datePurchased:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1};Ye(ve=>{const Pe=[...ve,{kind:"new",id:null,data:ot}];return W(Pe.length-1),Pe}),R(ve=>({...ve,mode:"add",data:ot}))};async function ur(){if(!e)return;const{list:E}=A,B=E||"library",te=Oe.length>0?Oe:[{kind:A.mode,id:A.editingId,data:A.data}],O=G=>({title:(G.title||"").trim(),authors:(G.authors||"").trim(),publisher:(G.publisher||"").trim(),demographic:(G.demographic||"").trim(),genre:(G.genre||"").trim(),subGenre:(G.subGenre||"").trim(),date:(G.date||"").trim(),cover:(G.cover||"").trim(),isbn:B==="wishlist"?"":(G.isbn||"").trim(),pageCount:G.pageCount===""?"":Number(G.pageCount),rating:B==="wishlist"||G.rating===""?"":Math.max(.5,Math.min(5,Number(G.rating))),amountPaid:G.amountPaid===""?"":Number(G.amountPaid),dateRead:(G.dateRead||"").trim(),datePurchased:(G.datePurchased||"").trim(),msrp:B==="wishlist"||G.msrp===""?"":Number(G.msrp),specialType:B==="wishlist"?"":(G.specialType||"").trim(),specialVolumes:B==="wishlist"||G.specialVolumes===""?"":Number(G.specialVolumes),collectiblePrice:B==="wishlist"||G.collectiblePrice===""?"":Number(G.collectiblePrice),amazonURL:(G.amazonURL||"").trim(),read:B==="wishlist"?!1:!!G.read,hidden:!!G.hidden,kind:E});try{const G=[];for(const we of te){const We=O(we.data);if(!We.title){alert("Title is required for every entry.");return}we.kind==="edit"&&we.id?G.push(qs(St(Ze,B,we.id),We)):G.push(Go(Wn(Ze,B),We))}await Promise.all(G),await Promise.all([oe(),D()]),sn()}catch(G){console.error(G),alert("Failed to save entry.")}}async function kr(E,B){if(e&&window.confirm("Delete this entry?"))try{await Zi(St(Ze,B,E)),await Promise.all([oe(),D()])}catch(te){console.error(te),alert("Failed to delete entry.")}}const[Pt,_t]=F.useState(!1),on=()=>se({open:!1,index:0,items:[]});async function Kn(E,B){if(!(E!=null&&E.id))return;const te=E.kind==="wishlist"?"wishlist":"library";_t(!0);try{await qs(St(Ze,te,E.id),B),await Promise.all([oe(),D()]),V(O=>O&&O.id===E.id?{...O,...B}:O)}catch(O){console.error(O),alert("Failed to update entry.")}finally{_t(!1)}}const cr=(E,B)=>{const te=B===""?"":Math.max(.5,Math.min(5,Number(B)));Kn(E,{rating:te})},dr=(E,B)=>{if(!E)return;const te=B?{read:!0,dateRead:new Date().toISOString().slice(0,10)}:{read:!1,dateRead:""};Kn(E,te)},ht=()=>{if(!C.size){alert("Select at least one entry first.");return}const B=[...o,...h].filter(O=>C.has(O.id));if(!B.length){alert("No items selected.");return}const te=B.map(O=>({id:O.id,kind:O.kind||(t==="wishlist"?"wishlist":"library"),data:{title:O.title||"",authors:O.authors||"",publisher:O.publisher||"",demographic:O.demographic||"",genre:O.genre||"",subGenre:O.subGenre||"",date:O.date||"",cover:O.cover||"",isbn:O.isbn||"",pageCount:O.pageCount||"",rating:O.rating||"",amountPaid:O.amountPaid||"",dateRead:O.dateRead||"",datePurchased:O.datePurchased||"",msrp:O.msrp||"",specialType:O.specialType||"",specialVolumes:O.specialVolumes||"",collectiblePrice:O.collectiblePrice||"",amazonURL:O.amazonURL||"",read:!!O.read,hidden:!!O.hidden}}));se({open:!0,index:0,items:te})},Le=(E,B,te="text")=>{se(O=>{const G=[...O.items],we={...G[O.index]};return we.data={...we.data,[E]:te==="checkbox"?!!B:B},G[O.index]=we,{...O,items:G}})},bt=()=>{se(E=>({...E,index:Math.min(E.index+1,E.items.length-1)}))},Xr=()=>{se(E=>({...E,index:Math.max(E.index-1,0)}))};async function Ln(){if(!e)return;const E=j.items;if(!E.length){on();return}try{const B=E.map(te=>{const O={...te.data,pageCount:te.data.pageCount===""?"":Number(te.data.pageCount),rating:te.data.rating===""?"":Math.max(.5,Math.min(5,Number(te.data.rating))),amountPaid:te.data.amountPaid===""?"":Number(te.data.amountPaid),msrp:te.data.msrp===""?"":Number(te.data.msrp),collectiblePrice:te.data.collectiblePrice===""?"":Number(te.data.collectiblePrice),specialVolumes:te.data.specialVolumes===""?"":Number(te.data.specialVolumes),read:!!te.data.read},G=te.kind==="wishlist"?"wishlist":"library";return qs(St(Ze,G,te.id),O)});await Promise.all(B),await Promise.all([oe(),D()]),b(new Set),N(!1),on()}catch(B){console.error(B),alert("Failed to save bulk edits.")}}function Qn(E){const B=C.has(E.id),te=E.kind==="library",O=()=>{ee&&e?qe(E.id):tt(E)};return c.jsxs("div",{className:"manga-card"+(E.read&&te?" read":"")+(B?" multiselect-selected":""),onClick:O,children:[c.jsx("div",{className:"manga-card-cover-wrap",children:c.jsx("img",{src:E.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),c.jsxs("div",{className:"manga-card-body",children:[c.jsx("div",{className:"manga-card-title",children:E.title||"Untitled"}),c.jsxs("div",{className:"manga-card-meta",children:[E.authors&&E.authors!=="Unknown"&&c.jsxs(c.Fragment,{children:[E.authors,c.jsx("br",{})]}),E.publisher&&E.publisher!=="Unknown"&&c.jsxs(c.Fragment,{children:[E.publisher,c.jsx("br",{})]}),E.date&&E.date!=="Unknown"&&E.date]}),E.isbn&&c.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",E.isbn]}),e&&c.jsxs("div",{className:"manga-card-actions",children:[c.jsx("button",{type:"button",className:"manga-btn mini",onClick:G=>{G.stopPropagation(),lr(E)},children:"Edit"}),c.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:G=>{G.stopPropagation(),kr(E.id,E.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},E.id)}const Sn=({value:E,onChange:B})=>{const[te,O]=F.useState(null),G=Math.max(0,Math.min(5,Number(E)||0)),we=te??G,We=Array.from({length:10},(Pe,Lt)=>(Lt+1)*.5),ot=5,ve=Array.from({length:ot},(Pe,Lt)=>Math.max(0,Math.min(1,we-Lt)));return c.jsxs("div",{className:"star-shell",role:"group","aria-label":"Rating",children:[c.jsxs("div",{className:"star-visual",style:{"--star-count":ot},children:[c.jsx("div",{className:"star-row",children:ve.map((Pe,Lt)=>c.jsxs("div",{className:"star-icon",children:[c.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"star-base",children:c.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})}),c.jsx("div",{className:"star-fill",style:{"--pct":`${(Math.max(0,Math.min(1,Pe))*100).toFixed(1)}%`},children:c.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:c.jsx("path",{d:"M12 2.5l2.9 5.88 6.5.95-4.7 4.58 1.1 6.43L12 17.9l-5.8 3.44 1.1-6.43-4.7-4.58 6.5-.95L12 2.5z"})})})]},Lt))}),c.jsx("div",{className:"star-hit",children:We.map(Pe=>c.jsx("button",{type:"button","aria-label":`${Pe} stars`,onMouseEnter:()=>O(Pe),onMouseLeave:()=>O(null),onClick:()=>B(Pe)},Pe))})]}),c.jsx("div",{className:"star-value",children:we?we.toFixed(1):"--"}),c.jsx("button",{type:"button",className:"star-clear",onClick:()=>B(""),"aria-label":"Clear rating",children:"clear"})]})},Ar=t==="library"?ye:Ne,vn=(E,B)=>{if(!E.length)return;const te=Array.from(E.reduce((ve,Pe)=>(Object.keys(Pe).forEach(Lt=>ve.add(Lt)),ve),new Set)),O=ve=>{const Pe=ve==null?"":String(ve);return/[",\n]/.test(Pe)?`"${Pe.replace(/"/g,'""')}"`:Pe},G=[te.join(",")].concat(E.map(ve=>te.map(Pe=>O(ve[Pe])).join(","))),we=new Blob([G.join(`
`)],{type:"text/csv"}),We=URL.createObjectURL(we),ot=document.createElement("a");ot.href=We,ot.download=B,ot.click(),URL.revokeObjectURL(We)},Nr=async(E,B)=>{const te=(G,we="image")=>(G||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)||we,O=E.filter(G=>G.cover).map((G,we)=>({url:G.cover,name:te(G.title||`manga-${we+1}`,`manga-${we+1}`)}));if(!O.length){alert("No images found to download.");return}try{const G=(await Nl(async()=>{const{default:ln}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:ln}},[])).default,we=new G,We=we.folder("images"),ot={},ve=O.map(async(ln,hr)=>{try{const _n=await(await fetch(ln.url)).blob(),ti=(ln.url.split(".").pop()||"jpg").split(/[?#]/)[0],pr=ln.name||`image-${hr+1}`;ot[pr]=(ot[pr]||0)+1;const jr=ot[pr]>1?`-${ot[pr]}`:"";We.file(`${pr}${jr}.${ti}`,_n)}catch(fr){console.warn("Failed to fetch image",ln.url,fr)}});await Promise.all(ve);const Pe=await we.generateAsync({type:"blob"}),Lt=URL.createObjectURL(Pe),Bt=document.createElement("a");Bt.href=Lt,Bt.download=B,Bt.click(),URL.revokeObjectURL(Lt)}catch(G){console.error("Zip download failed",G),alert("Failed to create zip. Please try again.")}},Zr=(E,B)=>{const te=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),O=URL.createObjectURL(te),G=document.createElement("a");G.href=O,G.download=B,G.click(),URL.revokeObjectURL(O)},ei=async E=>{if(!e||!(E!=null&&E.id))return;const B=E.kind==="wishlist"?"wishlist":"library",te=B==="library"?"wishlist":"library";try{if(B==="library"){const O={title:E.title,authors:E.authors,publisher:E.publisher,date:E.date,pageCount:E.pageCount||"",cover:E.cover||"",amazonURL:E.amazonURL||"",hidden:!!E.hidden};await Go(Wn(Ze,te),O)}else{const O={title:E.title,authors:E.authors,publisher:E.publisher,date:E.date,pageCount:E.pageCount||"",cover:E.cover||"",amountPaid:"",read:!1,rating:"",msrp:"",collectiblePrice:"",specialType:"",specialVolumes:"",isbn:"",demographic:"",genre:"",subGenre:"",amazonURL:E.amazonURL||"",hidden:!!E.hidden};await Go(Wn(Ze,te),O)}await Zi(St(Ze,B,E.id)),await Promise.all([oe(),D()]),at()}catch(O){console.error("Move failed",O),alert("Failed to move item.")}},an=A.list==="wishlist",Q=j.items[j.index]||null,ue=(Q==null?void 0:Q.kind)==="wishlist";return c.jsxs("div",{className:"manga-page",children:[c.jsxs("header",{className:"manga-header",style:{flexDirection:"column",alignItems:"center",textAlign:"center"},children:[c.jsx("div",{className:"manga-header-title",style:{justifyContent:"center",gap:"0.6rem",fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Manga Library"}),c.jsx("div",{className:"manga-header-sub",style:{textAlign:"center"},children:"Library & Wishlist are managed via Firestore. This React port reuses the same collections as your original index.html."})]}),c.jsxs("div",{className:"manga-tabs",children:[c.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{i("library"),N(!1),b(new Set)},children:"Library"}),c.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{i("wishlist"),N(!1),b(new Set)},children:"Wishlist"})]}),t!=="dashboard"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"manga-toolbar",children:[c.jsxs("div",{className:"manga-toolbar-left",children:[c.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?ne:me,onChange:E=>t==="library"?de(E.target.value):ie(E.target.value)}),c.jsx("div",{className:"manga-counter",children:t==="library"?c.jsxs(c.Fragment,{children:["Library: ",J.length," / ",o.length]}):c.jsxs(c.Fragment,{children:["Wishlist: ",Re.length," / ",h.length]})})]}),c.jsxs("div",{className:"manga-toolbar-right",children:[e&&c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>z(E=>!E),children:I?"Hide Hidden":"Show Hidden"}),e&&c.jsx("button",{className:"manga-btn secondary"+(ee?" active":""),onClick:ze,children:ee?"Exit Multi-select":"Multi-select"})]})]}),e&&ee&&c.jsxs("div",{className:"manga-multiselect-bar",children:[c.jsxs("span",{children:["Selected: ",c.jsx("strong",{children:C.size})]}),c.jsx("button",{className:"manga-btn",onClick:ht,children:"Bulk Edit"}),c.jsxs("button",{className:"manga-btn secondary",onClick:()=>Be("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"manga-btn",onClick:()=>Be("markRead"),children:"Mark Read"}),c.jsx("button",{className:"manga-btn secondary",onClick:()=>Be("markUnread"),children:"Mark Unread"})]}),c.jsx("button",{className:"manga-btn danger",onClick:()=>Be("delete"),children:"Delete"})]})]}),K?c.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):U?c.jsx("div",{className:"manga-empty-state",children:U}):Ar.length===0?c.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):c.jsx("div",{className:"manga-grid",children:Ar.map(E=>Qn(E))}),e&&c.jsxs("div",{className:"manga-floating-actions",children:[c.jsxs("button",{className:"manga-btn",type:"button","aria-label":"Add item",onClick:()=>Gn(t==="wishlist"?"wishlist":"library"),children:["+ ",t==="wishlist"?"Wishlist":"Library"]}),c.jsxs("div",{className:"manga-export-actions",children:[c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Zr({library:o,wishlist:h},"manga-library-wishlist.json"),children:"Export JSON"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>vn(t==="library"?o:h,t==="library"?"manga-library.csv":"manga-wishlist.csv"),children:"Export CSV"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Nr(t==="library"?o:h,t==="library"?"manga-library-images.zip":"manga-wishlist-images.zip"),children:"Download Images"})]})]}),P&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:E=>{E.target===E.currentTarget&&at()},children:c.jsxs("div",{className:"manga-modal",children:[c.jsx("div",{className:"manga-modal-cover-wrap",children:c.jsx("img",{src:P.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsx("div",{className:"manga-modal-title",children:P.title||"Untitled"}),c.jsx("button",{className:"manga-modal-close",onClick:at,type:"button",children:"Close"})]}),c.jsxs("div",{className:"manga-modal-meta",children:[P.authors&&P.authors!=="Unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Author(s):"})," ",P.authors,c.jsx("br",{})]}),P.publisher&&P.publisher!=="Unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Publisher:"})," ",P.publisher,c.jsx("br",{})]}),P.date&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Release:"})," ",P.date,c.jsx("br",{})]}),P.isbn&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"ISBN:"})," ",P.isbn,c.jsx("br",{})]})]}),c.jsxs("div",{className:"manga-modal-details",children:[P.pageCount&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Pages:"})," ",P.pageCount,c.jsx("br",{})]}),c.jsxs("div",{style:{margin:"6px 0"},children:[c.jsx("strong",{children:"Rating:"})," ",c.jsx(Sn,{value:P.rating||"",onChange:E=>cr(P,E)})]}),P.amountPaid&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Amount Paid:"})," $",P.amountPaid,c.jsx("br",{})]}),P.msrp&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"MSRP:"})," $",P.msrp,c.jsx("br",{})]}),P.collectiblePrice&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Collectible:"})," $",P.collectiblePrice,c.jsx("br",{})]}),P.read&&P.dateRead&&c.jsxs(c.Fragment,{children:[c.jsx("strong",{children:"Date Read:"})," ",P.dateRead,c.jsx("br",{})]}),P.amazonURL&&c.jsx("div",{style:{marginTop:"6px"},children:c.jsx("a",{href:P.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),c.jsxs("div",{className:"manga-modal-footer",style:{gap:"10px",alignItems:"center"},children:[c.jsx("div",{children:P.kind==="library"&&P.read?"Marked as read in your library.":P.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."}),c.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[P.kind==="library"&&c.jsx(c.Fragment,{children:P.read?c.jsx("button",{className:"manga-btn mini secondary",disabled:Pt,onClick:()=>dr(P,!1),type:"button",children:"Mark as unread"}):c.jsx("button",{className:"manga-btn mini",disabled:Pt,onClick:()=>dr(P,!0),type:"button",children:"Mark as read"})}),e&&c.jsxs("button",{className:"manga-btn mini",type:"button",onClick:()=>ei(P),children:["Move to ",P.kind==="library"?"Wishlist":"Library"]})]})]})]})]})}),e&&A.open&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:E=>{E.target===E.currentTarget&&sn()},children:c.jsx("div",{className:"manga-modal admin",children:c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsx("div",{className:"manga-modal-title",children:A.mode==="add"?"Add Entry":"Edit Entry"}),c.jsx("button",{className:"manga-modal-close",onClick:sn,type:"button",children:"Close"})]}),c.jsxs("div",{className:"admin-form-layout",children:[c.jsx("div",{className:"admin-cover-frame",children:c.jsx("img",{src:A.data.cover||"https://imgur.com/chUgq4W.png",alt:"Cover preview"})}),c.jsxs("div",{className:"admin-form-fields",children:[c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Title",c.jsx("input",{type:"text",value:A.data.title,onChange:E=>nt("title",E.target.value)})]})}),w.length>0&&c.jsx("div",{className:"title-suggestions",children:w.map((E,B)=>c.jsx("button",{type:"button",className:"manga-btn mini",onClick:()=>nt("title",E),children:E},E+B))}),c.jsxs("div",{className:"admin-row two",style:{alignItems:"flex-end",marginTop:"-8px"},children:[c.jsxs("div",{children:[c.jsxs("div",{className:"manga-modal-subtitle",style:{marginBottom:"6px"},children:["Entry ",Ue+1," / ",Math.max(1,Oe.length||1)]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Ue>0&&zt(Ue-1),disabled:Ue===0,children:"Previous"}),c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:()=>Oe.length&&Ue<Oe.length-1?zt(Ue+1):null,disabled:!Oe.length||Ue===Oe.length-1,children:"Next"})]})]}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("button",{className:"manga-btn",type:"button",onClick:yn,disabled:!mi(A.data.title||"").vol,children:"Add New Volume"}),c.jsx("div",{className:"manga-stat-sub",style:{marginTop:"4px"},children:"Auto-fills the next volume number for this series."})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Authors",c.jsx("input",{type:"text",value:A.data.authors,onChange:E=>nt("authors",E.target.value)})]})}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Publisher",c.jsx("input",{type:"text",value:A.data.publisher,onChange:E=>nt("publisher",E.target.value)})]})}),c.jsxs("div",{className:"admin-row three",children:[c.jsxs("label",{children:["Release Date",c.jsx("input",{type:"date",value:A.data.date,onChange:E=>nt("date",E.target.value)})]}),!an&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Date Purchased",c.jsx("input",{type:"date",value:A.data.datePurchased,onChange:E=>nt("datePurchased",E.target.value)})]}),c.jsxs("label",{children:["Date Read",c.jsx("input",{type:"date",value:A.data.dateRead,onChange:E=>nt("dateRead",E.target.value)})]})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Page Count",c.jsx("input",{type:"number",placeholder:"e.g. 192",value:A.data.pageCount,onChange:E=>nt("pageCount",E.target.value)})]}),!an&&c.jsxs("label",{children:["ISBN (library only)",c.jsx("input",{type:"text",value:A.data.isbn,onChange:E=>nt("isbn",E.target.value)})]})]}),c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Cover URL",c.jsx("input",{type:"text",placeholder:"Paste image URL here",value:A.data.cover,onChange:E=>nt("cover",E.target.value)})]})}),!an&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Amount Paid",c.jsx("input",{type:"number",step:"0.01",value:A.data.amountPaid,onChange:E=>nt("amountPaid",E.target.value)})]}),c.jsxs("label",{children:["MSRP",c.jsx("input",{type:"number",step:"0.01",value:A.data.msrp,onChange:E=>nt("msrp",E.target.value)})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Collectible Price",c.jsx("input",{type:"number",step:"0.01",value:A.data.collectiblePrice,onChange:E=>nt("collectiblePrice",E.target.value)})]}),c.jsxs("label",{children:["Special Volumes",c.jsx("input",{type:"number",min:"0",value:A.data.specialVolumes,onChange:E=>nt("specialVolumes",E.target.value)})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Special Type",c.jsx("input",{type:"text",value:A.data.specialType,onChange:E=>nt("specialType",E.target.value)})]}),c.jsxs("label",{children:["Amazon URL",c.jsx("input",{type:"text",value:A.data.amazonURL,onChange:E=>nt("amazonURL",E.target.value)})]})]})]}),an&&c.jsx("div",{className:"admin-row",children:c.jsxs("label",{children:["Amazon URL",c.jsx("input",{type:"text",value:A.data.amazonURL,onChange:E=>nt("amazonURL",E.target.value)})]})}),!an&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Demographic",c.jsxs("select",{value:A.data.demographic,onChange:E=>nt("demographic",E.target.value),children:[c.jsx("option",{value:"",children:"Select"}),c.jsx("option",{value:"Shounen",children:"Shounen"}),c.jsx("option",{value:"Seinen",children:"Seinen"}),c.jsx("option",{value:"Shoujo",children:"Shoujo"}),c.jsx("option",{value:"Josei",children:"Josei"})]})]}),c.jsxs("label",{children:["Genre",c.jsx("input",{type:"text",value:A.data.genre,onChange:E=>nt("genre",E.target.value)})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{children:["Sub Genre",c.jsx("input",{type:"text",value:A.data.subGenre,onChange:E=>nt("subGenre",E.target.value)})]}),c.jsxs("label",{children:["Rating (1-5 stars)",c.jsx(Sn,{value:A.data.rating,onChange:E=>nt("rating",E)})]})]}),c.jsxs("div",{className:"admin-row two",children:[c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:A.data.read,onChange:E=>nt("read",E.target.checked,"checkbox")}),c.jsx("span",{children:"Mark as read"})]}),c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:!!A.data.hidden,onChange:E=>nt("hidden",E.target.checked,"checkbox")}),c.jsx("span",{children:"Hide from public"})]})]})]}),an&&c.jsx("div",{className:"admin-row",children:c.jsxs("label",{className:"checkbox-inline",children:[c.jsx("input",{type:"checkbox",checked:!!A.data.hidden,onChange:E=>nt("hidden",E.target.checked,"checkbox")}),c.jsx("span",{children:"Hide from public"})]})})]})]}),c.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[c.jsx("button",{className:"manga-btn secondary",onClick:sn,type:"button",children:"Cancel"}),c.jsx("button",{className:"manga-btn",onClick:ur,type:"button",children:A.mode==="add"?"Add":"Save"})]})]})})}),e&&j.open&&c.jsx("div",{className:"manga-modal-backdrop visible",onClick:E=>{E.target===E.currentTarget&&on()},children:c.jsx("div",{className:"manga-modal admin",children:c.jsxs("div",{className:"manga-modal-body",children:[c.jsxs("div",{className:"manga-modal-header",children:[c.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",j.index+1," / ",j.items.length,")"]}),c.jsx("button",{className:"manga-modal-close",onClick:on,type:"button",children:"Close"})]}),j.items.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",j.items[j.index].data.title||"Untitled"]}),c.jsxs("div",{className:"admin-form-grid",children:[c.jsxs("label",{children:["Title",c.jsx("input",{type:"text",value:j.items[j.index].data.title,onChange:E=>Le("title",E.target.value)})]}),c.jsxs("label",{children:["Authors",c.jsx("input",{type:"text",value:j.items[j.index].data.authors,onChange:E=>Le("authors",E.target.value)})]}),c.jsxs("label",{children:["Publisher",c.jsx("input",{type:"text",value:j.items[j.index].data.publisher,onChange:E=>Le("publisher",E.target.value)})]}),!ue&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Demographic",c.jsxs("select",{value:j.items[j.index].data.demographic,onChange:E=>Le("demographic",E.target.value),children:[c.jsx("option",{value:"",children:"Select"}),c.jsx("option",{value:"Shounen",children:"Shounen"}),c.jsx("option",{value:"Seinen",children:"Seinen"}),c.jsx("option",{value:"Shoujo",children:"Shoujo"}),c.jsx("option",{value:"Josei",children:"Josei"})]})]}),c.jsxs("label",{children:["Genre",c.jsx("input",{type:"text",value:j.items[j.index].data.genre,onChange:E=>Le("genre",E.target.value)})]}),c.jsxs("label",{children:["Sub Genre",c.jsx("input",{type:"text",value:j.items[j.index].data.subGenre,onChange:E=>Le("subGenre",E.target.value)})]})]}),c.jsxs("label",{children:["Release Date",c.jsx("input",{type:"date",value:j.items[j.index].data.date,onChange:E=>Le("date",E.target.value)})]}),!ue&&c.jsxs("label",{children:["ISBN",c.jsx("input",{type:"text",value:j.items[j.index].data.isbn,onChange:E=>Le("isbn",E.target.value)})]}),c.jsxs("label",{children:["Cover URL",c.jsx("input",{type:"text",value:j.items[j.index].data.cover,onChange:E=>Le("cover",E.target.value)})]}),c.jsxs("label",{children:["Page Count",c.jsx("input",{type:"number",value:j.items[j.index].data.pageCount,onChange:E=>Le("pageCount",E.target.value)})]}),!ue&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Rating (1-5 stars)",c.jsx(Sn,{value:j.items[j.index].data.rating,onChange:E=>Le("rating",E)})]}),c.jsxs("label",{children:["Amount Paid",c.jsx("input",{type:"number",step:"0.01",value:j.items[j.index].data.amountPaid,onChange:E=>Le("amountPaid",E.target.value)})]}),c.jsxs("label",{children:["MSRP",c.jsx("input",{type:"number",step:"0.01",value:j.items[j.index].data.msrp,onChange:E=>Le("msrp",E.target.value)})]}),c.jsxs("label",{children:["Collectible Price",c.jsx("input",{type:"number",step:"0.01",value:j.items[j.index].data.collectiblePrice,onChange:E=>Le("collectiblePrice",E.target.value)})]})]}),!ue&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Date Purchased",c.jsx("input",{type:"date",value:j.items[j.index].data.datePurchased,onChange:E=>Le("datePurchased",E.target.value)})]}),c.jsxs("label",{children:["Date Read",c.jsx("input",{type:"date",value:j.items[j.index].data.dateRead,onChange:E=>Le("dateRead",E.target.value)})]})]}),!ue&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Special Type",c.jsx("input",{type:"text",value:j.items[j.index].data.specialType,onChange:E=>Le("specialType",E.target.value)})]}),c.jsxs("label",{children:["Special Volumes",c.jsx("input",{type:"number",value:j.items[j.index].data.specialVolumes,onChange:E=>Le("specialVolumes",E.target.value)})]})]}),c.jsxs("label",{children:["Amazon URL",c.jsx("input",{type:"text",value:j.items[j.index].data.amazonURL,onChange:E=>Le("amazonURL",E.target.value)})]}),!ue&&c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:j.items[j.index].data.read,onChange:E=>Le("read",E.target.checked,"checkbox")}),c.jsx("span",{children:"Marked as read"})]}),c.jsxs("label",{className:"checkbox-row",children:[c.jsx("input",{type:"checkbox",checked:!!j.items[j.index].data.hidden,onChange:E=>Le("hidden",E.target.checked,"checkbox")}),c.jsx("span",{children:"Hidden from public"})]})]}),c.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[c.jsxs("div",{children:[c.jsx("button",{className:"manga-btn secondary",onClick:Xr,type:"button",disabled:j.index===0,children:"Previous"}),c.jsx("button",{className:"manga-btn secondary",onClick:bt,type:"button",disabled:j.index===j.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{className:"manga-btn secondary",onClick:on,type:"button",children:"Cancel"}),c.jsx("button",{className:"manga-btn",onClick:Ln,type:"button",children:"Save Edits"})]})]})]})]})})}),c.jsx("datalist",{id:"adminTitleSuggestions",children:m.map(E=>c.jsx("option",{value:E},E))})]})}const GP="https://imokmalworker.imokissick.workers.dev/?url=",KP="im_ok",Iv=300,QP={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function YP(r){const e=QP[r.status]||(typeof r.status=="string"?r.status.toLowerCase():"unknown");return{id:r.anime_id||r.id,title:r.anime_title||r.title||"Untitled",episodes:r.anime_num_episodes??r.episodes??null,watchedEpisodes:r.num_watched_episodes??r.my_watched_episodes??r.watched_episodes??r.num_watched??0,status:e,score:r.score??null,image:r.anime_image_path||r.image_url||r.anime_img||r.picture||null}}function Cv(){return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null}]}async function JP(r,e){const t=`https://myanimelist.net/animelist/${r}/load.json?status=7&offset=${e}`,i=await fetch(`${GP}${encodeURIComponent(t)}`);if(!i.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return i.json()}async function XP(r=KP){const e=[];try{let t=0;for(;;){const i=await JP(r,t);if(!Array.isArray(i)||i.length===0||(e.push(...i),i.length<Iv))break;t+=Iv}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),Cv()}return e.length?e.map(YP):Cv()}function ZP(){const{admin:r}=pa(),e=ie=>ie?ie.toString().replace(/_/g," ").replace(/\b\w/g,ee=>ee.toUpperCase()):"Unknown",[t,i]=F.useState([]),[o,l]=F.useState([]),[h,p]=F.useState(""),[m,v]=F.useState("all"),[w,T]=F.useState(!0),[I,z]=F.useState(""),[K,Z]=F.useState(null);F.useEffect(()=>{document.title="Anime | Library"},[]);const U=(ie,ee="image")=>(ie||"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80)||ee,ce=async()=>{const ie=t.filter(ee=>ee.image).map((ee,N)=>({url:ee.image,name:U(ee.title||`anime-${N+1}`,`anime-${N+1}`)}));if(!ie.length){alert("No images found to download.");return}try{const ee=(await Nl(async()=>{const{default:R}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:R}},[])).default,N=new ee,C=N.folder("images"),b={};await Promise.all(ie.map(async(R,Oe)=>{try{const Ue=await(await fetch(R.url)).blob(),W=(R.url.split(".").pop()||"jpg").split(/[?#]/)[0],j=R.name||`image-${Oe+1}`;b[j]=(b[j]||0)+1;const se=b[j]>1?`-${b[j]}`:"";C.file(`${j}${se}.${W}`,Ue)}catch(Ye){console.warn("Failed to fetch image",R.url,Ye)}}));const P=await N.generateAsync({type:"blob"}),V=URL.createObjectURL(P),A=document.createElement("a");A.href=V,A.download="anime-images.zip",A.click(),URL.revokeObjectURL(V)}catch(ee){console.error("Zip download failed",ee),alert("Failed to create zip. Please try again.")}};F.useEffect(()=>{async function ie(){try{const ee=await XP();i(ee),l(ee)}catch(ee){console.error(ee),z("Failed to load data from MAL.")}finally{T(!1)}}ie()},[]);const ne=ie=>{switch((ie||"unknown").toLowerCase()){case"watching":return 0;case"completed":return 1;case"on_hold":return 2;case"plan_to_watch":return 3;case"dropped":return 4;default:return 5}};F.useEffect(()=>{let ie=[...t];if(m!=="all"&&(ie=ie.filter(ee=>(ee.status||"").toLowerCase()===m)),h){const ee=h.toLowerCase();ie=ie.filter(N=>(N.title||"").toLowerCase().includes(ee))}ie.sort((ee,N)=>{const C=ne(ee.status),b=ne(N.status);return C!==b?C-b:(ee.title||"").localeCompare(N.title||"")}),l(ie)},[t,m,h]);const de=F.useMemo(()=>{const ie=t.length,N=t.reduce((V,A)=>V+(Number.isFinite(A.episodes)?Number(A.episodes):0),0)*.4,C=t.filter(V=>Number.isFinite(V.score)&&V.score>0),b=C.reduce((V,A)=>V+A.score,0),P={watching:0,completed:0,on_hold:0,dropped:0,plan_to_watch:0,unknown:0};return t.forEach(V=>{const A=(V.status||"unknown").toLowerCase();P[A]!=null?P[A]+=1:P.unknown+=1}),{total:ie,byStatus:P,avgScore:C.length?b/C.length:0,totalHours:N}},[t]),me=ie=>{const ee=ie.image||"https://imgur.com/chUgq4W.png",N=Number.isFinite(Number(ie.watchedEpisodes))?Number(ie.watchedEpisodes):0,C=Number.isFinite(Number(ie.episodes))?Number(ie.episodes):null,b=C?`Episode ${Math.min(N,C)}/${C}`:`Episode ${N}`,P=Number.isFinite(Number(ie.score))&&Number(ie.score)>0?ie.score:"Not rated";return c.jsxs("article",{className:"anime-card",onClick:()=>Z(ie),children:[c.jsxs("div",{className:"anime-cover-wrap",children:[c.jsx("img",{className:"anime-cover",src:ee,alt:ie.title,loading:"lazy",decoding:"async"}),c.jsx("div",{className:`badge-status ${(ie.status||"unknown").toLowerCase()}`,children:e(ie.status)}),ie.score!=null&&c.jsx("div",{className:"badge-score",children:P})]}),c.jsxs("div",{className:"anime-meta",children:[c.jsx("div",{className:"anime-title",children:ie.title}),c.jsx("div",{className:"anime-sub",children:ie.episodes?`${ie.episodes} episodes`:"Episodes: ?"}),c.jsx("div",{className:"anime-progress",children:b}),c.jsxs("div",{className:"anime-progress",children:["Status: ",e(ie.status)]})]})]},ie.id||ie.title)};return c.jsxs("main",{className:"anime-page",children:[c.jsxs("div",{className:"anime-content",children:[c.jsxs("header",{className:"anime-header",style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%"},children:[c.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[c.jsx("h1",{className:"anime-title",style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Anime Library"}),c.jsx("p",{className:"anime-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"MAL-synced overview of your shows"})]}),r&&c.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:c.jsx("button",{className:"stat-link",type:"button",onClick:ce,children:"Download Images"})})]}),c.jsxs("div",{className:"anime-stats",children:[c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Total Entries"}),c.jsx("div",{className:"anime-stat-value",children:de.total})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Watching"}),c.jsx("div",{className:"anime-stat-value",children:de.byStatus.watching})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Completed"}),c.jsx("div",{className:"anime-stat-value",children:de.byStatus.completed})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Plan to Watch"}),c.jsx("div",{className:"anime-stat-value",children:de.byStatus.plan_to_watch})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Avg. Score"}),c.jsx("div",{className:"anime-stat-value",children:de.avgScore?de.avgScore.toFixed(1):""})]}),c.jsxs("div",{className:"anime-stat-card",children:[c.jsx("div",{className:"anime-stat-label",children:"Hours Watched (est.)"}),c.jsx("div",{className:"anime-stat-value",children:de.totalHours?de.totalHours.toFixed(1):"0.0"})]})]}),c.jsxs("section",{className:"anime-toolbar",children:[c.jsx("input",{type:"text",placeholder:"Search anime by title...",value:h,onChange:ie=>p(ie.target.value),className:"anime-input"}),c.jsxs("select",{value:m,onChange:ie=>v(ie.target.value),className:"anime-select",children:[c.jsx("option",{value:"all",children:"All statuses"}),c.jsx("option",{value:"watching",children:"Watching"}),c.jsx("option",{value:"completed",children:"Completed"}),c.jsx("option",{value:"on_hold",children:"On Hold"}),c.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"}),c.jsx("option",{value:"dropped",children:"Dropped"})]})]}),w&&c.jsx("div",{className:"loading",children:"Loading anime list from MAL..."}),I&&c.jsx("div",{className:"error-state",children:I}),!w&&!I&&c.jsx(c.Fragment,{children:o.length===0?c.jsx("div",{className:"empty-state",children:"No results match your filters yet."}):c.jsx("section",{className:"anime-grid",children:o.map(ie=>me(ie))})})]}),K&&c.jsx("div",{className:"modal-backdrop visible",onClick:ie=>{ie.target===ie.currentTarget&&Z(null)},children:c.jsxs("div",{className:"anime-modal",children:[c.jsxs("div",{className:"anime-modal-header",children:[c.jsx("h2",{style:{color:"#ffb6c1",margin:0},children:K.title}),c.jsx("button",{className:"anime-modal-close",onClick:()=>Z(null),type:"button",children:"Close"})]}),c.jsxs("div",{className:"anime-modal-body",children:[c.jsx("div",{children:c.jsx("img",{className:"anime-modal-cover",src:K.image||"https://imgur.com/chUgq4W.png",alt:K.title})}),c.jsxs("div",{className:"anime-modal-meta",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Status:"})," ",e(K.status)]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Episodes:"})," ",K.episodes?K.episodes:"Unknown"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Progress:"})," ",Number.isFinite(Number(K.watchedEpisodes))?`Episode ${K.watchedEpisodes}${Number.isFinite(Number(K.episodes))?`/${K.episodes}`:""}`:"Unknown"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Score:"})," ",Number.isFinite(Number(K.score))&&Number(K.score)>0?K.score:"Not rated"]})]})]})]})})]})}function eb(){const r={game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:"",image:"",productURL:"",notes:""},{admin:e}=pa(),[t,i]=F.useState([]),[o,l]=F.useState(!0),[h,p]=F.useState(""),[m,v]=F.useState("all"),[w,T]=F.useState("name"),[I,z]=F.useState(!1),[K,Z]=F.useState([]),[U,ce]=F.useState(""),[ne,de]=F.useState(null),[me,ie]=F.useState(!1),[ee,N]=F.useState(r);F.useEffect(()=>{document.title="TCG | Collection"},[]),F.useEffect(()=>{let W=!1;async function j(){try{const se=Wn(Ze,"tcg"),oe=await ns(se),D=[];oe.forEach(J=>D.push({id:J.id,...J.data()})),W||i(D)}catch(se){console.error("Error loading TCG:",se);try{const D=await fetch("/base/tcg-collection.json",{cache:"no-cache"});if(!D.ok)throw new Error("fallback fetch failed");const J=await D.json(),ye=Array.isArray(J.tcg)?J.tcg:[];W||i(ye.map((Re,Ne)=>({id:Re.id||`offline-${Ne}`,...Re})))}catch(oe){console.error("TCG offline fallback failed",oe)}}finally{W||l(!1)}}return j(),()=>{W=!0}},[]);const C=t.filter(W=>{if(m!=="all"&&W.game!==m)return!1;if(!h)return!0;const j=h.toLowerCase();return(W.name||"").toLowerCase().includes(j)||(W.setName||"").toLowerCase().includes(j)||(W.number||"").toLowerCase().includes(j)}),b=[...C].sort((W,j)=>{const se=(W.name||"").toLowerCase(),oe=(j.name||"").toLowerCase(),D=(W.setName||"").toLowerCase(),J=(j.setName||"").toLowerCase(),ye=(W.rarity||"").toLowerCase(),Re=(j.rarity||"").toLowerCase(),Ne=Number(W.quantity||0),ze=Number(j.quantity||0),qe=Number(W.estimatedValue||0)*Math.max(1,Ne),Be=Number(j.estimatedValue||0)*Math.max(1,ze);switch(w){case"set":return D.localeCompare(J)||se.localeCompare(oe);case"rarity":return ye.localeCompare(Re)||se.localeCompare(oe);case"quantity":return ze-Ne||se.localeCompare(oe);case"value":return Be-qe||se.localeCompare(oe);case"name":default:return se.localeCompare(oe)}}),P=t.reduce((W,j)=>{const se=Number(j.quantity||1),oe=Number(j.pricePaid||0),D=Number(j.estimatedValue||0);return W.totalCards+=se,W.totalPaid+=se*oe,W.totalValue+=se*D,j.game==="pokemon"&&(W.pokemon+=se),j.game==="onepiece"&&(W.onepiece+=se),W},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),V=P.totalValue-P.totalPaid,A=(W,j)=>{N(se=>({...se,[W]:j}))},R=async()=>{if(!e)return;if(!ee.name.trim()){alert("Card name is required.");return}const W={game:ee.game,name:ee.name.trim(),setName:ee.setName.trim(),number:ee.number.trim(),rarity:ee.rarity.trim(),condition:ee.condition.trim(),quantity:Number(ee.quantity||1),pricePaid:Number(ee.pricePaid||0),estimatedValue:Number(ee.estimatedValue||0),image:ee.image.trim(),productURL:ee.productURL.trim(),notes:ee.notes.trim()},j=D=>({game:(D.game||"").toLowerCase().trim(),name:(D.name||"").toLowerCase().trim(),setName:(D.setName||"").toLowerCase().trim(),number:(D.number||"").toLowerCase().trim(),rarity:(D.rarity||"").toLowerCase().trim(),condition:(D.condition||"").toLowerCase().trim(),pricePaid:Number(D.pricePaid||0),estimatedValue:Number(D.estimatedValue||0),image:(D.image||"").trim(),productURL:(D.productURL||"").trim(),notes:(D.notes||"").trim()}),se=j(W),oe=t.find(D=>{const J=j(D);return J.game===se.game&&J.name===se.name&&J.setName===se.setName&&J.number===se.number&&J.rarity===se.rarity&&J.condition===se.condition&&J.pricePaid===se.pricePaid&&J.estimatedValue===se.estimatedValue&&J.image===se.image&&J.productURL===se.productURL&&J.notes===se.notes});try{const D=Wn(Ze,"tcg");if(oe!=null&&oe.id){const J=Number(oe.quantity||1)+W.quantity;await qs(St(Ze,"tcg",oe.id),{quantity:J}),i(ye=>ye.map(Re=>Re.id===oe.id?{...Re,quantity:J}:Re))}else{await Go(D,W);const J=await ns(D),ye=[];J.forEach(Re=>ye.push({id:Re.id,...Re.data()})),i(ye)}N(r),ie(!1)}catch(D){console.error("Error adding card:",D),alert("Failed to save card.")}},Oe=async()=>{if(!e||!ne)return;if(!ne.name.trim()){alert("Card name is required.");return}const W={game:ne.game,name:ne.name.trim(),setName:ne.setName.trim(),number:ne.number.trim(),rarity:ne.rarity.trim(),condition:ne.condition.trim(),quantity:Number(ne.quantity||1),pricePaid:Number(ne.pricePaid||0),estimatedValue:Number(ne.estimatedValue||0),image:ne.image?ne.image.trim():"",productURL:ne.productURL?ne.productURL.trim():"",notes:ne.notes?ne.notes.trim():""};try{await qs(St(Ze,"tcg",ne.id),W),i(j=>j.map(se=>se.id===ne.id?{...se,...W}:se)),de(null)}catch(j){console.error("Error updating card:",j),alert("Failed to update card.")}},Ye=async W=>{if(e&&window.confirm("Delete this card?"))try{await Zi(St(Ze,"tcg",W)),i(j=>j.filter(se=>se.id!==W))}catch(j){console.error("Delete error:",j),alert("Failed to delete card.")}},Ue=()=>{if(!t.length){alert("No cards to export.");return}const W=new Blob([JSON.stringify({tcg:t},null,2)],{type:"application/json"}),j=URL.createObjectURL(W),se=document.createElement("a");se.href=j,se.download="tcg-collection.json",se.click(),URL.revokeObjectURL(j)};return c.jsxs("main",{className:"page",children:[c.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"6px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's TCG Collection"}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Pokemon & One Piece TCG cards with quantities, prices, and collection value."}),c.jsx("div",{style:{marginTop:"10px"},children:c.jsx("button",{className:"manga-btn secondary",type:"button",onClick:Ue,children:"Export JSON"})})]}),e&&c.jsx("button",{className:"manga-btn",type:"button","aria-label":"Add card",onClick:()=>ie(!0),style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"56px",height:"56px",borderRadius:"50%",padding:0,fontSize:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),e&&me&&c.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:W=>{W.target===W.currentTarget&&ie(!1)},children:c.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:W=>W.stopPropagation(),children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Add card"}),c.jsx("button",{className:"dashboard-close",onClick:()=>ie(!1),type:"button",children:"Close"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[c.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:ee.image?c.jsx("img",{src:ee.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",c.jsxs("select",{value:ee.game,onChange:W=>A("game",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[c.jsx("option",{value:"pokemon",children:"Pokemon"}),c.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",c.jsx("input",{type:"text",value:ee.name,onChange:W=>A("name",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",c.jsx("input",{type:"text",value:ee.setName,onChange:W=>A("setName",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",c.jsx("input",{type:"text",value:ee.number,onChange:W=>A("number",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",c.jsx("input",{type:"text",value:ee.rarity,onChange:W=>A("rarity",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",c.jsx("input",{type:"text",value:ee.condition,onChange:W=>A("condition",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",c.jsx("input",{type:"number",min:"1",value:ee.quantity,onChange:W=>A("quantity",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",c.jsx("input",{type:"number",step:"0.01",min:"0",value:ee.pricePaid,onChange:W=>A("pricePaid",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",c.jsx("input",{type:"number",step:"0.01",min:"0",value:ee.estimatedValue,onChange:W=>A("estimatedValue",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",c.jsx("input",{type:"text",value:ee.image||"",onChange:W=>A("image",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Product URL (backend only)",c.jsx("input",{type:"text",value:ee.productURL||"",onChange:W=>A("productURL",W.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{gridColumn:"1 / -1",fontSize:"0.8rem",color:"var(--text-soft)"},children:["Notes",c.jsx("textarea",{value:ee.notes,onChange:W=>A("notes",W.target.value),rows:3,style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff",resize:"vertical"}})]})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[c.jsx("button",{onClick:()=>{N(r),ie(!1)},style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:R,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})]})]})}),e&&ne&&c.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(8,1,10,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"12px"},onClick:W=>{W.target===W.currentTarget&&de(null)},children:c.jsxs("div",{style:{width:"min(720px, 95vw)",background:"#140710",border:"1px solid rgba(255,182,193,0.3)",borderRadius:"12px",padding:"14px",boxShadow:"0 24px 60px rgba(0,0,0,0.85)"},onClick:W=>W.stopPropagation(),children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("h2",{style:{margin:0,color:"#ffb6c1"},children:"Edit card"}),c.jsx("button",{className:"dashboard-close",onClick:()=>de(null),type:"button",children:"Close"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"12px",alignItems:"flex-start",marginTop:"10px"},children:[c.jsx("div",{style:{width:"100%",maxWidth:"180px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.25)",background:"#1e0d14",overflow:"hidden",aspectRatio:"3 / 4",display:"flex",alignItems:"center",justifyContent:"center"},children:ne.image?c.jsx("img",{src:ne.image,alt:"Card preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx("div",{style:{color:"var(--text-soft)",fontSize:"0.8rem",padding:"6px"},children:"No image"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",c.jsxs("select",{value:ne.game,onChange:W=>de(j=>({...j,game:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[c.jsx("option",{value:"pokemon",children:"Pokemon"}),c.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",c.jsx("input",{type:"text",value:ne.name,onChange:W=>de(j=>({...j,name:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",c.jsx("input",{type:"text",value:ne.setName,onChange:W=>de(j=>({...j,setName:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",c.jsx("input",{type:"text",value:ne.number,onChange:W=>de(j=>({...j,number:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",c.jsx("input",{type:"text",value:ne.rarity,onChange:W=>de(j=>({...j,rarity:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",c.jsx("input",{type:"text",value:ne.condition,onChange:W=>de(j=>({...j,condition:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",c.jsx("input",{type:"number",value:ne.quantity,onChange:W=>de(j=>({...j,quantity:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (each)",c.jsx("input",{type:"number",value:ne.pricePaid,onChange:W=>de(j=>({...j,pricePaid:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (each)",c.jsx("input",{type:"number",value:ne.estimatedValue,onChange:W=>de(j=>({...j,estimatedValue:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Image URL",c.jsx("input",{type:"text",value:ne.image||"",onChange:W=>de(j=>({...j,image:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Product URL (backend only)",c.jsx("input",{type:"text",value:ne.productURL||"",onChange:W=>de(j=>({...j,productURL:W.target.value})),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),c.jsxs("label",{style:{gridColumn:"1 / -1",fontSize:"0.8rem",color:"var(--text-soft)"},children:["Notes",c.jsx("textarea",{value:ne.notes||"",onChange:W=>de(j=>({...j,notes:W.target.value})),rows:3,style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff",resize:"vertical"}})]})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"12px"},children:[c.jsx("button",{onClick:()=>de(null),style:{padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"transparent",color:"#ffb6c1",cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:Oe,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save changes"})]})]})}),c.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:P.totalCards})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",P.totalPaid.toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",P.totalValue.toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),c.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:V>=0?"#00e676":"#ff8a80"},children:[V>=0?"+":"-","$",Math.abs(V).toFixed(2)]})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:P.pokemon})]}),c.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),c.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:P.onepiece})]})]}),c.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[c.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:h,onChange:W=>p(W.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),c.jsxs("select",{value:m,onChange:W=>v(W.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[c.jsx("option",{value:"all",children:"All games"}),c.jsx("option",{value:"pokemon",children:"Pokemon only"}),c.jsx("option",{value:"onepiece",children:"One Piece only"})]}),c.jsxs("select",{value:w,onChange:W=>T(W.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[c.jsx("option",{value:"name",children:"Sort: Name (A-Z)"}),c.jsx("option",{value:"set",children:"Sort: Set (A-Z)"}),c.jsx("option",{value:"rarity",children:"Sort: Rarity (A-Z)"}),c.jsx("option",{value:"quantity",children:"Sort: Quantity (high to low)"}),c.jsx("option",{value:"value",children:"Sort: Value (high to low)"})]})]}),o?c.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):C.length===0?c.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):c.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:b.map(W=>{const j=Number(W.quantity||1),se=j*Number(W.pricePaid||0),oe=j*Number(W.estimatedValue||0);return c.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem",display:"flex",flexDirection:"column",gap:"6px"},children:[W.image&&c.jsx("div",{style:{width:"100%",paddingTop:"140%",position:"relative",overflow:"hidden",borderRadius:"10px",background:"#1e0d14"},children:c.jsx("img",{src:W.image,alt:W.name||"card image",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"contain"}})}),c.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:W.name||"Unnamed card"}),c.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:W.setName||""}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[c.jsxs("span",{children:["#",W.number||"-"]}),c.jsx("span",{children:W.rarity||""})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[c.jsxs("span",{children:["Cond: ",W.condition||"N/A"]}),c.jsxs("span",{children:["Qty: ",j]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[c.jsxs("span",{children:["Paid: $",se.toFixed(2)]}),c.jsxs("span",{children:["Value: $",oe.toFixed(2)]})]}),W.notes&&c.jsxs("div",{style:{color:"#9c8fa6",fontSize:"0.72rem",fontStyle:"italic",textAlign:"center",marginTop:"6px"},children:['"',W.notes,'"']}),c.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[c.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem",whiteSpace:"nowrap"},children:W.game==="pokemon"?"Pokemon":"One Piece"}),e&&c.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",marginLeft:"auto"},children:[c.jsx("button",{onClick:()=>de({...W,pricePaid:W.pricePaid??"",estimatedValue:W.estimatedValue??"",quantity:W.quantity??1}),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.5)",background:"rgba(255,105,180,0.15)",color:"#ffb6c1",fontSize:"0.7rem",cursor:"pointer"},children:"Edit"}),c.jsx("button",{onClick:()=>Ye(W.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})]})]})]},W.id)})})]})}const ec="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",tc="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",nc="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82";function Si(r){if(!r)return null;if(r instanceof Date)return r;if(r&&typeof r.toDate=="function")return r.toDate();const e=String(r).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,h,p]=t;return new Date(Number(l),Number(h)-1,Number(p))}const i=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(i){let[,l,h,p]=i;const m=p.length===2?+`20${p}`:Number(p);return new Date(m,Number(l)-1,Number(h))}const o=new Date(e);return isNaN(o.getTime())?null:o}function Ip(r){const e=(r.seriesKey||r.series||r.Series||r.title||r.Title||"").trim();return e?e.replace(/\bvolume\s+\d+.*$/i,"").replace(/\bvol\.?\s+\d+.*$/i,"").trim().toLowerCase():""}function tb(r){const e=new Map;for(const t of r){const i=Ip(t)||t.id;if(!e.has(i)){const m=(t.series||t.Series||t.title||t.Title||"Unknown Series").trim();e.set(i,{key:i,title:m,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const o=e.get(i);o.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;o.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(o.readVolumes+=1,o.readPages+=l);const p=Number(t.rating||t.Rating);!isNaN(p)&&p>0&&(o.ratingSum+=p,o.ratingCount+=1)}return e}function Bo(r,e,t=5){const i=new Map;for(const o of r.values()){const l=(o[e]||"").trim();if(!l)continue;const h=l.split(/[\/,]/).map(p=>p.trim()).filter(Boolean);for(const p of h)i.set(p,(i.get(p)||0)+1)}return[...i.entries()].sort((o,l)=>l[1]-o[1]).slice(0,t).map(([o,l])=>({name:o,count:l}))}function Rv(r,e){const t=Array.from({length:12},(i,o)=>{const l=new Date(e,o,1);return{key:`${e}-${o}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:o,value:0}});for(const i of r){const o=Si(i.dateRead||i.DateRead);!o||o.getFullYear()!==e||(t[o.getMonth()].value+=1)}return t}function nl(r){const e=r.getFullYear(),t=`${r.getMonth()+1}`.padStart(2,"0"),i=`${r.getDate()}`.padStart(2,"0");return`${e}-${t}-${i}`}async function Gh(r,e){try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function nb(r){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of r){const h=Si(l.dateRead||l.DateRead);h&&(t[h.getDay()]+=1)}if(!t.some(l=>l>0))return[];const o=t.reduce((l,h)=>Math.max(l,h),0)||1;return e.map((l,h)=>({label:l,value:t[h],pct:t[h]/o}))}function rb(r,e=8){const t=[...r.values()];t.sort((l,h)=>h.volumes-l.volumes);const i=t.slice(0,e),o=i.reduce((l,h)=>Math.max(l,h.volumes),0)||1;return i.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/o}))}function ib(r){const e=[];for(const t of r){const i=Si(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!i)continue;const o=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:i,title:o})}return e.sort((t,i)=>t.date-i.date),e}function sb(r){const e=new Date;for(const t of r)if(t.date>=e)return t;return r[r.length-1]||null}function ob(r){let e=0,t=0;for(const i of r){const o=Si(i.datePurchased||i.DatePurchased),l=Si(i.dateRead||i.DateRead);if(!o||!l)continue;const h=l-o;h<=0||(e+=h/(1e3*60*60*24),t+=1)}return t?e/t:null}function ab(r){const e=new Map;for(const t of r){const i=Si(t.datePurchased||t.DatePurchased),o=Si(t.dateRead||t.DateRead);if(!i||!o)continue;const l=o-i;if(l<=0)continue;const h=l/(1e3*60*60*24),p=Ip(t)||t.id;e.has(p)||e.set(p,{key:p,title:t.series||t.Series||t.title||t.Title||"Untitled",total:0,count:0,min:h,max:h});const m=e.get(p);m.total+=h,m.count+=1,m.min=Math.min(m.min,h),m.max=Math.max(m.max,h)}return[...e.values()].filter(t=>t.count>0).map(t=>({...t,avg:t.total/t.count})).sort((t,i)=>i.avg-t.avg)}function lb(r){let e=0,t=0,i=0;for(const o of r){const l=Number(o.msrp||o.MSRP||0)||0,h=Number(o.amountPaid||o.AmountPaid||o.pricePaid||0)||l||0,p=Number(o.collectiblePrice||o.CollectiblePrice||0)||0;e+=l,t+=h,i+=p}return{msrpTotal:e,paidTotal:t,collectibleTotal:i}}function ub(r){const e=new Map;for(const t of r){const i=Ip(t)||t.id;e.has(i)||e.set(i,{key:i,title:t.series||t.Series||t.title||t.Title||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]});const o=e.get(i);o.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,h=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,p=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,m=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;o.msrp+=l,o.paid+=h,o.collectible+=p,o.pages+=m,v&&(o.readPages+=m);const w=Number(t.rating||t.Rating);!isNaN(w)&&w>0&&o.ratings.push(w)}return[...e.values()]}function cb(r){let e=0,t=0;for(const i of r){const o=Number(i.pages||i.Pages||i.pageCount||0)||0;e+=o,(!!i.read||i.status==="Read"||i.Read===!0)&&(t+=o)}return{total:e,read:t}}function db(r){let e=0,t=0;for(const i of r.values())i.ratingCount>0&&(e+=i.ratingSum/i.ratingCount,t+=1);return t?e/t:null}function hb({data:r}){if(!r||!r.length)return c.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=r.reduce((v,w)=>Math.max(v,w.value),0)||1,t=480,i=230,o=30,l=i-o*2,h=t/Math.max(r.length-1,1),p=r.map((v,w)=>{const T=w*h,I=i-o-v.value/e*l;return{...v,x:T,y:I}}),m=p.map((v,w)=>w===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return c.jsx("div",{className:"line-chart",children:c.jsxs("svg",{viewBox:`0 0 ${t} ${i}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,w)=>{const T=i-o-v*l;return c.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:T,y2:T},`h-${w}`)}),p.map((v,w)=>c.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:o/2,y2:i-o/2},`v-${w}`)),c.jsx("path",{className:"line-path",d:m}),p.map((v,w)=>c.jsxs("g",{children:[c.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),c.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),c.jsx("text",{className:"line-label",x:v.x,y:i-4,children:v.label})]},w))]})})}function fb({data:r}){return!r||!r.length?c.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):c.jsx("div",{className:"weekday-bars",children:r.map(e=>c.jsxs("div",{className:"weekday-col",children:[c.jsx("div",{className:"weekday-count",children:e.value}),c.jsx("div",{className:"weekday-bar-vert",children:c.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),c.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function pb(r,e,t){const i=r.getFullYear(),o=r.getMonth(),h=new Date(i,o,1).getDay(),p=new Date(i,o+1,0).getDate(),m=new Map;for(const T of e){const I=T.date;if(I.getFullYear()===i&&I.getMonth()===o){const z=I.getDate();m.has(z)||m.set(z,[]),m.get(z).push(T)}}const v=[];for(let T=0;T<h;T++)v.push({type:"pad"});for(let T=1;T<=p;T++){const I=nl(new Date(i,o,T));v.push({type:"day",day:T,releases:m.get(T)||[],dateKey:I,isToday:I===t})}const w=Math.ceil(v.length/7)*7;for(;v.length<w;)v.push({type:"pad"});return v}function mb(){const{user:r,admin:e,loading:t}=pa(),[i,o]=F.useState([]),[l,h]=F.useState([]),[p,m]=F.useState(!0),[v,w]=F.useState(null),[T,I]=F.useState("-"),[z,K]=F.useState({yearly:ec,release:tc,activity:nc}),[Z,U]=F.useState(!1),[ce,ne]=F.useState(""),[de,me]=F.useState([]),[ie,ee]=F.useState(!1),[N,C]=F.useState(null),[b,P]=F.useState(null),V=async()=>{if(e)try{ee(!0);const ue=(await ns(Wn(Ze,"admins"))).docs.map(E=>({uid:E.id,...E.data()}));me(ue)}catch(Q){console.error("Failed to refresh admins",Q)}finally{ee(!1)}},A=async()=>{const Q=ce.trim();if(!Q){alert("Enter a UID to grant admin.");return}try{await Zu(St(Ze,"admins",Q),{uid:Q,role:"admin",grantedBy:(r==null?void 0:r.uid)||"manual",grantedAt:new Date().toISOString()},{merge:!0});try{await Zu(St(Ze,"roles",Q),{admin:!0,updatedAt:new Date().toISOString()},{merge:!0})}catch(ue){console.warn("Legacy roles write skipped (no permission):",ue==null?void 0:ue.message)}ne(""),await V()}catch(ue){console.error("Grant admin failed",ue),alert("Failed to grant admin.")}},R=async Q=>{const ue=(Q||ce).trim();if(!ue){alert("Enter a UID to revoke admin.");return}try{await Zi(St(Ze,"admins",ue)),await Zi(St(Ze,"roles",ue)),Q||ne(""),await V()}catch(E){console.error("Revoke admin failed",E),alert("Failed to revoke admin.")}},[Oe,Ye]=F.useState(!1),[Ue,W]=F.useState(()=>new Date),[j,se]=F.useState({open:!1,type:null}),oe=new Date().getFullYear(),D=F.useRef(null),J=F.useRef(null),ye=F.useRef("");F.useEffect(()=>{document.title="Dashboard"},[]),F.useEffect(()=>(Oe||j.open||Z||!!b?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[Oe,j.open,Z,b]),F.useEffect(()=>{typeof window>"u"||(D.current=localStorage.getItem("dashboard-yearly-posted"),J.current=localStorage.getItem("dashboard-release-posted"),ye.current=localStorage.getItem("dashboard-activity-posted")||"")},[]),F.useEffect(()=>{if(!e)return;const Q=St(Ze,"settings","webhooks");(async()=>{try{const ue=await If(Q);if(ue.exists()){const E=ue.data();K({yearly:E.yearly||ec,release:E.release||tc,activity:E.activity||nc})}else await Zu(Q,{yearly:ec,release:tc,activity:nc})}catch(ue){console.error("Failed to load webhook settings",ue)}})()},[e]),F.useEffect(()=>{if(!e)return;let Q=!1;return(async()=>{try{ee(!0);const ue=await ns(Wn(Ze,"admins"));if(Q)return;const E=ue.docs.map(B=>({uid:B.id,...B.data()}));me(E)}catch(ue){console.error("Failed to load admins",ue)}finally{Q||ee(!1)}})(),()=>{Q=!0}},[e]),F.useEffect(()=>{let Q=!1;async function ue(){if(!r||!e){o([]),h([]),w(null),m(!1);return}try{m(!0);const[E,B]=await Promise.all([ns(Wn(Ze,"library")),ns(Wn(Ze,"wishlist"))]);if(Q)return;o(E.docs.map(te=>({id:te.id,...te.data()}))),h(B.docs.map(te=>({id:te.id,...te.data()}))),w(null)}catch(E){console.error(E),Q||w("Failed to load dashboard data.")}finally{Q||m(!1)}}return ue(),()=>{Q=!0}},[r,e]);const Re=F.useMemo(()=>{const Q=i.length,ue=i.filter(ut=>!!ut.read||ut.status==="Read"||ut.Read===!0).length,E=Q-ue,B=Q?Math.round(ue/Q*100):0,te=l.length,O=tb(i),G=Rv(i,oe),we=Rv(i,oe-1),We=G.reduce((ut,$t)=>ut+$t.value,0),ot=nb(i),ve=rb(O),Pe=ib(l),Lt=sb(Pe),Bt=ob(i),ln=lb(i),hr=cb(i),fr=db(O),_n=ab(i),ti=Bo(O,"publisher",5),pr=Bo(O,"genre",5),jr=Bo(O,"demographic",5),so=ub(i),Vn=[...i].map(ut=>{const $t=Si(ut.dateRead||ut.DateRead)||Si(ut.datePurchased||ut.DatePurchased);return $t?{title:ut.title||ut.Title||ut.series||ut.Series||"Untitled",type:ut.dateRead||ut.DateRead?"Read":"Purchased",date:$t}:null}).filter(Boolean).sort((ut,$t)=>$t.date-ut.date).slice(0,12);return{totalLibrary:Q,readCount:ue,unreadCount:E,readPct:B,wishlistCount:te,seriesMap:O,monthlyReads:G,prevYearReads:we,currentYearReadsTotal:We,weekdayBreakdown:ot,topSeriesBars:ve,releases:Pe,nextRelease:Lt,avgDays:Bt,purchaseToReadSeries:_n,collectionValue:ln,pages:hr,avgRating:fr,topPublishers:ti,topGenres:pr,topDemographics:jr,seriesAggregates:so,activity:Vn}},[i,l,oe]),{totalLibrary:Ne,readCount:ze,unreadCount:qe,readPct:Be,wishlistCount:tt,seriesMap:at,monthlyReads:sn,prevYearReads:Qt,currentYearReadsTotal:Gn,weekdayBreakdown:lr,topSeriesBars:nt,releases:zt,nextRelease:yn,avgDays:ur,purchaseToReadSeries:kr,collectionValue:Pt,pages:_t,avgRating:on,topPublishers:Kn,topGenres:cr,topDemographics:dr,seriesAggregates:ht,activity:Le}=Re,bt=yn?yn.date:null,Xr=!!v;if(F.useEffect(()=>{if(!Qt||!Qt.length)return;const Q=oe-1,ue=Qt.reduce((O,G)=>O+G.value,0);if(!ue||(D.current?parseInt(D.current,10):null)===Q)return;const B=Qt.map(O=>`${O.label}: ${O.value}`).join(", "),te=`Yearly reads summary for ${Q}: ${ue} total. Breakdown: ${B}`;Gh(z.yearly,te).then(()=>{D.current=String(Q),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String(Q))})},[Qt,oe]),F.useEffect(()=>{if(!yn||!zt.length)return;const Q=nl(yn.date),ue=nl(new Date);if(Q>ue||J.current===Q)return;const E=zt.filter(te=>nl(te.date)===Q);if(!E.length)return;const B=`Wishlist releases for ${Q}:
${E.map(te=>`- ${te.title}`).join(`
`)}`;Gh(z.release,B).then(()=>{J.current=Q,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",Q)})},[yn,zt]),F.useEffect(()=>{var B,te;if(!e||!Le||!Le.length)return;const Q=Le[0];if(!Q||!Q.date)return;const ue=`${Q.type}-${Q.title}-${((te=(B=Q.date).toISOString)==null?void 0:te.call(B))||Q.date}`;if(ye.current===ue)return;ye.current=ue;const E=`Activity: ${Q.type}  ${Q.title} (${Q.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})`;Gh(z.activity,E).then(()=>{typeof window<"u"&&localStorage.setItem("dashboard-activity-posted",ue)})},[Le,e,z]),F.useEffect(()=>{if(!bt){I("-");return}const Q=()=>{const E=bt-new Date;if(E<=0){I("Released");return}const B=Math.floor(E/1e3),te=Math.floor(B/86400),O=Math.floor(B%86400/3600).toString().padStart(2,"0"),G=Math.floor(B%3600/60).toString().padStart(2,"0"),we=Math.floor(B%60).toString().padStart(2,"0");I(`${te}d ${O}:${G}:${we}`)};Q();const ue=setInterval(Q,1e3);return()=>clearInterval(ue)},[bt]),t)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-loading",children:[c.jsx("h1",{children:"Dashboard"}),c.jsx("p",{children:"Checking permissions..."})]})});if(!r||!e)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-locked",children:[c.jsx("h1",{children:"Dashboard"}),c.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(p)return c.jsx("div",{className:"page dashboard-page",children:c.jsxs("div",{className:"dashboard-loading",children:[c.jsx("h1",{children:"Dashboard"}),v?c.jsx("p",{className:"error",children:v}):c.jsx("p",{children:"Loading stats..."})]})});const Ln=Ne+tt,Qn=Ln?Math.round(Ne/Ln*100):0,Sn=[...at.values()].filter(Q=>Q.ratingCount>0).map(Q=>({title:Q.title,avg:Q.ratingSum/Q.ratingCount,count:Q.ratingCount})).sort((Q,ue)=>ue.avg-Q.avg||ue.count-Q.count).slice(0,3);function Ar(){if(bt)W(new Date(bt.getFullYear(),bt.getMonth(),1));else if(zt.length){const Q=zt[0].date;W(new Date(Q.getFullYear(),Q.getMonth(),1))}Ye(!0)}function vn(Q){se({open:!0,type:Q})}function Nr(){se({open:!1,type:null})}const Zr=nl(new Date),ei=pb(Ue,zt,Zr);function an(){const Q=j.type;if(!Q)return null;if(Q==="publishers"){const ue=[...Bo(at,"publisher",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Publishers by Series"}),ue.length===0?c.jsx("p",{children:"No publisher data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Publisher"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:ue.map((E,B)=>c.jsxs("tr",{children:[c.jsx("td",{children:B+1}),c.jsx("td",{children:E.name}),c.jsx("td",{children:E.count})]},E.name+B))})]})]})}if(Q==="genres"){const ue=[...Bo(at,"genre",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Genres by Series"}),ue.length===0?c.jsx("p",{children:"No genre data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Genre"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:ue.map((E,B)=>c.jsxs("tr",{children:[c.jsx("td",{children:B+1}),c.jsx("td",{children:E.name}),c.jsx("td",{children:E.count})]},E.name+B))})]})]})}if(Q==="demographics"){const ue=[...Bo(at,"demographic",100)];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Top Demographics by Series"}),ue.length===0?c.jsx("p",{children:"No demographic data yet."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"#"}),c.jsx("th",{children:"Demographic"}),c.jsx("th",{children:"Series Count"})]})}),c.jsx("tbody",{children:ue.map((E,B)=>c.jsxs("tr",{children:[c.jsx("td",{children:B+1}),c.jsx("td",{children:E.name}),c.jsx("td",{children:E.count})]},E.name+B))})]})]})}if(Q==="timeToRead"){const ue=kr||[];return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Average Time From Purchase to Read"}),ur==null?c.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["On average, it takes"," ",c.jsxs("strong",{children:[ur.toFixed(1)," days"]})," from purchase to finishing a volume."]}),ue.length>0?c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Series"}),c.jsx("th",{children:"Avg Days"}),c.jsx("th",{children:"Longest"}),c.jsx("th",{children:"Shortest"}),c.jsx("th",{children:"Reads Count"})]})}),c.jsx("tbody",{children:ue.map(E=>c.jsxs("tr",{children:[c.jsx("td",{children:E.title}),c.jsxs("td",{children:[E.avg.toFixed(1)," days"]}),c.jsxs("td",{children:[Math.round(E.max)," days"]}),c.jsxs("td",{children:[Math.round(E.min)," days"]}),c.jsx("td",{children:E.count})]},E.key))})]}):c.jsx("p",{style:{marginTop:8},children:"No series-level data yet."})]})]})}if(Q==="collectionValue"){const{msrpTotal:ue,paidTotal:E}=Pt,B=ue-E,te=ue>0?(E/ue*100).toFixed(1):"-",O=[...ht].filter(G=>G.msrp||G.paid||G.collectible).sort((G,we)=>we.msrp+we.collectible-(G.msrp+G.collectible));return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Collection Value Breakdown"}),c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("th",{children:"Total MSRP"}),c.jsxs("td",{children:["$",ue.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Total Paid"}),c.jsxs("td",{children:["$",E.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Difference"}),c.jsxs("td",{children:["$",B.toFixed(2)]})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Paid vs MSRP"}),c.jsx("td",{children:te==="-"?"-":`${te}%`})]})]})}),O.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"MSRP"}),c.jsx("th",{children:"Paid"}),c.jsx("th",{children:"Collectible"}),c.jsx("th",{children:"Books"})]})}),c.jsx("tbody",{children:O.map((G,we)=>c.jsxs("tr",{children:[c.jsx("td",{children:G.title}),c.jsxs("td",{children:["$",G.msrp.toFixed(2)]}),c.jsxs("td",{children:["$",G.paid.toFixed(2)]}),c.jsx("td",{children:G.collectible?`$${G.collectible.toFixed(2)}`:"--"}),c.jsx("td",{children:G.books})]},G.title+we))})]})]})]})}if(Q==="pages"){const ue=[...ht].filter(E=>E.pages>0).map(E=>({...E,pct:E.pages?Math.round(E.readPages/E.pages*100):0})).sort((E,B)=>B.pages-E.pages);return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Pages Read vs Total"}),c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("th",{children:"Total Pages"}),c.jsx("td",{children:_t.total.toLocaleString()})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Pages Read"}),c.jsx("td",{children:_t.read.toLocaleString()})]}),c.jsxs("tr",{children:[c.jsx("th",{children:"Completion"}),c.jsx("td",{children:_t.total?`${(_t.read/_t.total*100).toFixed(1)}%`:"-"})]})]})}),ue.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Read Pages"}),c.jsx("th",{children:"Total Pages"}),c.jsx("th",{children:"% Read"}),c.jsx("th",{children:"Books"})]})}),c.jsx("tbody",{children:ue.map((E,B)=>c.jsxs("tr",{children:[c.jsx("td",{children:E.title}),c.jsx("td",{children:E.readPages.toLocaleString()}),c.jsx("td",{children:E.pages.toLocaleString()}),c.jsxs("td",{children:[E.pct,"%"]}),c.jsx("td",{children:E.books})]},E.title+B))})]})]})]})}if(Q==="ratings"){const ue=[...ht].map(E=>{if(!E.ratings.length)return null;const B=E.ratings.reduce((te,O)=>te+O,0)/E.ratings.length;return{title:E.title,avg:B,count:E.ratings.length}}).filter(Boolean).sort((E,B)=>B.avg-E.avg||B.count-E.count);return c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Ratings Overview"}),on==null?c.jsx("p",{children:"No ratings have been recorded yet."}):c.jsxs("p",{children:["Average series rating across rated series is"," ",c.jsx("strong",{children:on.toFixed(2)}),"."]}),ue.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Title"}),c.jsx("th",{children:"Avg"}),c.jsx("th",{children:"Ratings"})]})}),c.jsx("tbody",{children:ue.map((E,B)=>c.jsxs("tr",{children:[c.jsx("td",{children:E.title}),c.jsx("td",{children:E.avg.toFixed(2)}),c.jsx("td",{children:E.count})]},E.title+B))})]})]})]})}return Q==="releases"?c.jsxs(c.Fragment,{children:[c.jsx("h3",{children:"Wishlist Releases"}),zt.length===0?c.jsx("p",{children:"No wishlist releases found."}):c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Date"}),c.jsx("th",{children:"Title"})]})}),c.jsx("tbody",{children:zt.map((ue,E)=>c.jsxs("tr",{children:[c.jsx("td",{children:ue.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),c.jsx("td",{children:ue.title})]},E))})]})]}):null}return c.jsxs("div",{className:"page dashboard-page",children:[c.jsxs("header",{className:"dashboard-header",style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",textAlign:"center",width:"100%"},children:[c.jsxs("div",{style:{textAlign:"center",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0 60px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Dashboard"}),c.jsx("p",{className:"dashboard-sub",style:{textAlign:"center",margin:"6px 0 0"},children:"Admin-only analytics for your manga library and wishlist."})]}),e&&c.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},children:c.jsx("button",{className:"stat-link",onClick:()=>U(!0),type:"button",children:"Admin Settings"})})]}),c.jsx("section",{id:"dashboardSection",className:"page-section active",children:c.jsxs("div",{className:"dashboard-grid",children:[c.jsxs("div",{className:"stat-stack",children:[c.jsxs("div",{className:"stat-card mini",children:[c.jsx("h3",{children:"Total Library Books"}),c.jsx("div",{className:"stat-value",children:Ne}),c.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),c.jsxs("div",{className:"stat-card mini",children:[c.jsx("h3",{children:"Wishlist Items"}),c.jsx("div",{className:"stat-value",children:tt}),c.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Read / Unread"}),c.jsx("div",{className:"pie",style:{"--pct":`${Be*3.6}deg`},children:c.jsxs("div",{className:"pie-label",children:[Be,"%"]})}),c.jsxs("div",{className:"stat-value",children:[ze," read / ",qe," unread"]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("ratings"),children:[c.jsx("h3",{children:"Ratings"}),c.jsx("div",{className:"stat-value",children:on==null?"-":on.toFixed(2)}),c.jsx("div",{className:"stat-sub",children:"Average across rated series."}),c.jsx("div",{className:"stat-list compact",children:Sn.length?Sn.map((Q,ue)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:ue+1}),c.jsx("span",{className:"stat-name",children:Q.title}),c.jsx("span",{className:"stat-count",children:Q.avg.toFixed(2)})]},Q.title+ue)):c.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("pages"),children:[c.jsx("h3",{children:"Page Count Read / Total"}),c.jsxs("div",{className:"stat-value",children:[_t.read.toLocaleString()," / ",_t.total.toLocaleString()]}),c.jsx("div",{className:"stat-sub",children:_t.total?`${(_t.read/_t.total*100).toFixed(1)}% read`:"-"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Library vs Wishlist"}),c.jsx("div",{className:"pie",style:{"--pct":`${Qn*3.6}deg`},children:c.jsxs("div",{className:"pie-label",children:[Qn,"%"]})}),c.jsxs("div",{className:"stat-value",children:[Ne," / ",tt]}),c.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("demographics"),children:[c.jsx("h3",{children:"Top Demographics"}),c.jsx("div",{className:"stat-list",children:dr.length?dr.slice(0,3).map((Q,ue)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:ue+1}),c.jsx("span",{className:"stat-name",children:Q.name}),c.jsx("span",{className:"stat-count",children:Q.count})]},Q.name)):c.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("publishers"),children:[c.jsx("h3",{children:"Top Publishers"}),c.jsx("div",{className:"stat-list",children:Kn.length?Kn.slice(0,3).map((Q,ue)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:ue+1}),c.jsx("span",{className:"stat-name",children:Q.name}),c.jsx("span",{className:"stat-count",children:Q.count})]},Q.name)):c.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("genres"),children:[c.jsx("h3",{children:"Top Genres"}),c.jsx("div",{className:"stat-list",children:cr.length?cr.slice(0,3).map((Q,ue)=>c.jsxs("div",{className:"stat-list-row",children:[c.jsx("span",{className:"stat-rank",children:ue+1}),c.jsx("span",{className:"stat-name",children:Q.name}),c.jsx("span",{className:"stat-count",children:Q.count})]},Q.name)):c.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>{Ar()},children:[c.jsx("h3",{children:"Next Wishlist Release"}),c.jsx("div",{className:"stat-value next-release",children:yn?yn.title:"No upcoming releases"}),c.jsxs("div",{className:"stat-sub",children:[bt?bt.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",c.jsx("br",{}),c.jsx("span",{id:"statNextCountdown",children:T})]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("collectionValue"),style:{textAlign:"center"},children:[c.jsx("h3",{children:"Collection Pricing"}),c.jsxs("div",{className:"stat-value stat-msrp",children:["$",Pt.msrpTotal.toFixed(2)]}),c.jsxs("div",{className:"stat-value stat-paid",children:["$",Pt.paidTotal.toFixed(2),Pt.msrpTotal>0&&c.jsxs("span",{className:"stat-paid-pct",children:["(",((1-Pt.paidTotal/Pt.msrpTotal)*100).toFixed(1),"% off)"]})]}),c.jsxs("div",{className:"stat-value stat-collectible",children:["$",Pt.collectibleTotal.toFixed(2)]}),c.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("h3",{children:"Current Year Reads"}),c.jsx("div",{className:"stat-value",children:Gn}),c.jsxs("div",{className:"stat-sub",children:["Reads in ",oe]})]}),c.jsxs("div",{className:"stat-card clickable",onClick:()=>vn("timeToRead"),children:[c.jsx("h3",{children:"Avg Days From Purchase to Read"}),c.jsx("div",{className:"stat-value",children:ur==null?"-":`${ur.toFixed(1)} days`}),c.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),c.jsxs("div",{className:"stat-duo",children:[c.jsxs("div",{className:"stat-card tall",children:[c.jsxs("h3",{children:["Reads Per Month (",oe,")"]}),c.jsx(hb,{data:sn})]}),c.jsxs("div",{className:"stat-card tall",children:[c.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),c.jsx(fb,{data:lr}),c.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),c.jsxs("div",{className:"stat-card wide",children:[c.jsx("h3",{children:"Activity Log"}),Xr&&c.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),c.jsx("div",{className:"activity-log",children:Le.length?Le.map((Q,ue)=>c.jsxs("div",{className:"activity-row",children:[c.jsx("span",{className:"activity-type",children:Q.type}),c.jsx("span",{className:"activity-title",children:Q.title}),c.jsx("span",{className:"activity-date",children:Q.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]},Q.title+ue)):c.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]})]})}),Oe&&c.jsx("div",{id:"calendarOverlay",onClick:()=>Ye(!1),children:c.jsxs("div",{id:"calendarCard",onClick:Q=>Q.stopPropagation(),children:[c.jsxs("div",{className:"calendar-header",children:[c.jsx("div",{className:"calendar-title",children:Ue.toLocaleString(void 0,{month:"long",year:"numeric"})}),c.jsxs("div",{className:"calendar-nav",children:[c.jsx("button",{className:"calendar-nav-btn",onClick:()=>W(new Date(Ue.getFullYear(),Ue.getMonth()-1,1)),children:"<"}),c.jsx("button",{className:"calendar-nav-btn",onClick:()=>W(new Date(Ue.getFullYear(),Ue.getMonth()+1,1)),children:">"})]})]}),c.jsxs("div",{className:"calendar-weekdays",children:[c.jsx("div",{children:"Sun"}),c.jsx("div",{children:"Mon"}),c.jsx("div",{children:"Tue"}),c.jsx("div",{children:"Wed"}),c.jsx("div",{children:"Thu"}),c.jsx("div",{children:"Fri"}),c.jsx("div",{children:"Sat"})]}),c.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:ei.map((Q,ue)=>Q.type==="pad"?c.jsx("div",{className:"calendar-day pad"},ue):c.jsxs("div",{className:"calendar-day"+(Q.isToday?" today":""),children:[c.jsx("div",{className:"day-num",children:Q.day}),c.jsxs("div",{className:"calendar-releases",children:[(N===Q.dateKey?Q.releases:Q.releases.slice(0,2)).map((E,B)=>c.jsx("div",{className:"calendar-release",title:E.title,children:E.title},B)),Q.releases.length>2&&c.jsxs("button",{className:"calendar-more-btn",onClick:()=>{const E=new Date(Ue.getFullYear(),Ue.getMonth(),Q.day);P({dateLabel:E.toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}),releases:Q.releases})},children:["+",Q.releases.length-2," more"]})]})]},ue))}),!zt.length&&c.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),c.jsx("button",{id:"calendarClose",onClick:()=>Ye(!1),children:"x"})]})}),j.open&&c.jsx("div",{id:"statDetailOverlay",onClick:Nr,children:c.jsxs("div",{id:"statDetailCard",onClick:Q=>Q.stopPropagation(),children:[c.jsx("button",{id:"statDetailClose",onClick:Nr,children:"x"}),c.jsxs("h2",{id:"statDetailTitle",children:[j.type==="publishers"&&"Top Publishers",j.type==="genres"&&"Top Genres",j.type==="demographics"&&"Top Demographics",j.type==="timeToRead"&&"Avg Time From Purchase to Read",j.type==="collectionValue"&&"Collection Value",j.type==="pages"&&"Pages Read vs Total",j.type==="ratings"&&"Ratings",j.type==="releases"&&"Wishlist Releases"]}),c.jsx("div",{id:"statDetailBody",children:an()})]})}),b&&c.jsx("div",{id:"calendarOverlay",onClick:()=>P(null),style:{zIndex:10080},children:c.jsxs("div",{id:"calendarCard",onClick:Q=>Q.stopPropagation(),style:{maxWidth:"520px"},children:[c.jsxs("div",{className:"calendar-header",children:[c.jsx("div",{className:"calendar-title",children:b.dateLabel}),c.jsx("button",{className:"calendar-close-btn",onClick:()=>P(null),type:"button",children:"Close"})]}),c.jsx("div",{className:"calendar-releases",children:b.releases.map((Q,ue)=>c.jsx("div",{className:"calendar-release",title:Q.title,children:Q.title},ue))})]})}),e&&Z&&c.jsx("div",{className:"dashboard-modal-backdrop visible",onClick:Q=>{Q.target===Q.currentTarget&&U(!1)},children:c.jsxs("div",{className:"dashboard-modal",children:[c.jsxs("div",{className:"dashboard-modal-header",children:[c.jsx("h3",{children:"Webhook Settings"}),c.jsx("button",{className:"dashboard-close",onClick:()=>U(!1),type:"button",children:"Close"})]}),c.jsxs("div",{className:"dashboard-modal-body",children:[c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Yearly summary webhook"}),c.jsx("input",{type:"text",value:z.yearly,onChange:Q=>K(ue=>({...ue,yearly:Q.target.value}))})]}),c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Release timer webhook"}),c.jsx("input",{type:"text",value:z.release,onChange:Q=>K(ue=>({...ue,release:Q.target.value}))})]}),c.jsxs("label",{className:"dashboard-input",children:[c.jsx("span",{children:"Activity webhook"}),c.jsx("input",{type:"text",value:z.activity,onChange:Q=>K(ue=>({...ue,activity:Q.target.value}))})]}),c.jsxs("div",{className:"dashboard-input",style:{borderTop:"1px solid rgba(255,182,193,0.2)",paddingTop:8},children:[c.jsx("span",{children:"Admin UIDs"}),c.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[c.jsx("input",{type:"text",placeholder:"Enter UID",value:ce,onChange:Q=>ne(Q.target.value),style:{flex:"1 1 220px",padding:"8px 10px",borderRadius:"10px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.75)",color:"#ffffff"}}),c.jsx("button",{className:"stat-link",type:"button",onClick:A,children:"Grant"}),c.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>R(),children:"Revoke"})]}),c.jsx("div",{style:{marginTop:8,fontSize:"0.85rem",color:"var(--text-soft)"},children:ie?c.jsx("span",{children:"Loading admins"}):de.length===0?c.jsx("span",{children:"No admins found."}):c.jsx("ul",{style:{listStyle:"none",margin:"6px 0 0",padding:0,display:"flex",gap:6,flexDirection:"column"},children:de.map(Q=>c.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,background:"rgba(24,5,18,0.7)",border:"1px solid rgba(255,182,193,0.18)",borderRadius:10,padding:"6px 8px"},children:[c.jsx("span",{style:{wordBreak:"break-all"},children:Q.uid}),c.jsx("button",{className:"dashboard-close",type:"button",onClick:()=>R(Q.uid),style:{padding:"4px 10px"},children:"Revoke"})]},Q.uid))})})]})]}),c.jsxs("div",{className:"dashboard-modal-footer",children:[c.jsx("button",{className:"stat-link",type:"button",onClick:async()=>{try{await Zu(St(Ze,"settings","webhooks"),{yearly:z.yearly||ec,release:z.release||tc,activity:z.activity||nc}),U(!1)}catch(Q){console.error("Failed to save webhooks",Q),alert("Failed to save webhooks.")}},children:"Save"}),c.jsx("button",{className:"stat-link danger",type:"button",onClick:()=>U(!1),children:"Cancel"})]})]})})]})}function gb(){const[r,e]=F.useState(!0),[t,i]=F.useState(""),[o,l]=F.useState(0),[h,p]=F.useState([]),[m,v]=F.useState(0),w=F.useRef(null);F.useEffect(()=>{document.title="Music | im.ok"},[]),F.useEffect(()=>{let me=!1;async function ie(){e(!0),i("");try{const ee=await fetch("https://music-api-worker.imokissick.workers.dev/music");if(!ee.ok)throw new Error("Worker fetch failed");const N=await ee.json();if(me)return;const C=Array.isArray(N.combined)?N.combined:[],b=Array.isArray(N.spotify)?N.spotify:[],P=Array.isArray(N.soundcloud)?N.soundcloud:[],A=[...C,...b,...P].reduce((R,Oe)=>{const Ye=(Oe.title||"").toLowerCase().trim();if(!Ye)return R;const Ue=R.findIndex(W=>(W.title||"").toLowerCase().trim()===Ye);return Ue>=0?(R[Ue].source!=="spotify"&&Oe.source==="spotify"&&(R[Ue]=Oe),R):(R.push(Oe),R)},[]).map(R=>({...R,releaseDate:R.releaseDate?new Date(R.releaseDate):new Date}));p(A)}catch(ee){console.error(ee),me||i("Failed to load music feeds.")}finally{me||e(!1)}}return ie(),()=>{me=!0}},[]);const T=Math.min(4,Math.max(1,h.length)),I=T?Math.ceil(h.length/T):0,z=()=>{w.current&&clearInterval(w.current),h.length&&(v(me=>me+1),w.current=setInterval(()=>{l(me=>(Math.floor(me/T)+1)%I*T%h.length),v(me=>me+1)},15e3))};F.useEffect(()=>{if(h.length)return z(),()=>{w.current&&clearInterval(w.current)}},[h,T]);const K=me=>{h.length&&(l(ie=>(Math.floor(ie/T)+me+I)%I*T%h.length),z())},Z=me=>{h.length&&(l(me*T%h.length),z())},U=me=>ie=>{ie.preventDefault();const N=me.source==="spotify"?`spotify:album:${me.id}`:me.url,C=me.url;try{const b=setTimeout(()=>{window.open(C,"_blank","noopener,noreferrer")},600);window.location.href=N,setTimeout(()=>clearTimeout(b),800)}catch{window.open(C,"_blank","noopener,noreferrer")}},ce=h[0],ne=me=>me?{backgroundImage:`url(${me})`,backgroundSize:"cover",backgroundPosition:"center"}:{},de=ce?ce.source==="spotify"?"Spotify":"SoundCloud":"";return c.jsxs("main",{className:"page music-page",children:[c.jsxs("header",{className:"music-hero",children:[c.jsxs("div",{className:"music-hero-content",children:[c.jsx("p",{className:"music-pill",children:"im.ok  Artist"}),c.jsx("h1",{children:ce?ce.title:"Latest & Greatest"}),c.jsx("p",{className:"music-sub",children:"Check out my latest song. I know it's been almost a whole year since I've released. I have been on a much needed hiatus. I felt the whole world crumbling around me and had no time to breathe so this is why I took a break. Here's to 2026!"}),ce&&c.jsx("div",{className:"music-badges",children:c.jsx("span",{children:de})})]}),c.jsx("div",{className:"music-hero-embed",children:c.jsxs("div",{className:"music-hero-art",style:ne(ce==null?void 0:ce.artwork),children:[!(ce!=null&&ce.artwork)&&c.jsx("div",{className:"music-hero-art-fallback",children:"Artwork"}),ce&&c.jsx("button",{className:"music-link music-play hero-play","aria-label":`Play ${ce.title}`,onClick:U(ce)})]})})]}),c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"Releases"})}),t&&c.jsx("div",{className:"music-error",children:t}),r&&c.jsx("div",{className:"music-loading",children:"Loading music feeds..."}),!r&&h.length===0&&c.jsx("div",{className:"music-empty",children:"Connect Spotify/SoundCloud tokens to see live releases."}),!r&&h.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"music-carousel-wrap",children:[c.jsx("button",{className:"music-nav left",onClick:()=>K(-1),"aria-label":"Previous releases",children:""}),c.jsx("div",{className:"music-carousel",children:Array.from({length:T}).map((me,ie)=>{const ee=h[(o+ie)%h.length];return ee?c.jsxs("div",{className:"music-card",children:[c.jsx("div",{className:"music-card-art",style:ne(ee.artwork)}),c.jsxs("div",{className:"music-card-body",children:[c.jsx("div",{className:"music-card-title",children:ee.title}),c.jsx("div",{className:"music-card-actions",children:c.jsx("button",{className:"music-link music-play","aria-label":`Play ${ee.title}`,onClick:U(ee)})})]})]},`${ee.id}-${ie}`):null})}),c.jsx("button",{className:"music-nav right",onClick:()=>K(1),"aria-label":"Next releases",children:""})]}),c.jsx("div",{className:"music-dots",children:Array.from({length:I}).map((me,ie)=>{const ee=Math.floor(o/T)===ie,N=ee?`${ie}-${m}`:`${ie}-idle`;return c.jsx("button",{className:`dot ${ee?"active":""}`,onClick:()=>Z(ie),"aria-label":`Go to set ${ie+1}`,children:c.jsx("span",{className:"dot-fill"},N)},ie)})})]})]}),c.jsxs("div",{className:"music-feeds-row",children:[c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"Spotify"})}),c.jsx("div",{className:"music-embed-card",children:c.jsx("iframe",{title:"Spotify Artist",src:"https://open.spotify.com/embed/artist/00sbWLxYLDs8i5BLQL9Qdo?utm_source=generator&theme=0",width:"100%",height:"400",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})})]}),c.jsxs("section",{className:"music-section",children:[c.jsx("div",{className:"music-section-header",children:c.jsx("h2",{children:"SoundCloud"})}),c.jsx("div",{className:"music-embed-card",children:c.jsx("iframe",{title:"SoundCloud Player",width:"100%",height:"400",scrolling:"no",frameBorder:"no",allow:"autoplay",src:"https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/imxk&color=%23ff69b4&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"})})]})]})]})}function yb(){const r=Vc(),{user:e}=pa();e&&r("/");async function t(){try{const i=new Wr;await D_(us,i),r("/")}catch(i){console.error(i),alert("Google Sign-In failed.")}}return c.jsx("div",{className:"signin-page",children:c.jsxs("div",{className:"signin-card",children:[c.jsx("h2",{className:"signin-title",children:"Welcome Back"}),c.jsx("p",{className:"signin-sub",children:"Sign in to access your dashboard & collections."}),c.jsxs("button",{className:"google-btn",onClick:t,children:[c.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),c.jsxs("button",{className:"signin-cancel",onClick:()=>r("/"),children:["<"," Back to Home"]})]})})}const vb=F.lazy(()=>Nl(()=>import("./SteamCard-16y7hDqA.js"),[])),_b=F.lazy(()=>Nl(()=>import("./SteamRecents-D4UqLbYv.js"),[])),wb=F.lazy(()=>Nl(()=>import("./SteamGames-UjEtdEAI.js"),[]));function xb(){return F.useEffect(()=>{document.title="Tyler's Gaming Lounge"},[]),c.jsxs("div",{className:"steam-page page",children:[c.jsxs("header",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"6px"},children:[c.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)",fontWeight:700},children:"Tyler's Gaming Lounge"}),c.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Steam profile, recents, and library at a glance."})]}),c.jsx(Kh,{minHeight:260,children:c.jsx(F.Suspense,{fallback:c.jsx(fc,{label:"Profile"}),children:c.jsx(vb,{})})}),c.jsx(Kh,{minHeight:240,children:c.jsx(F.Suspense,{fallback:c.jsx(fc,{label:"Recently played"}),children:c.jsx(_b,{})})}),c.jsx(Kh,{minHeight:400,children:c.jsx(F.Suspense,{fallback:c.jsx(fc,{label:"Library & Achievements"}),children:c.jsx(wb,{})})})]})}function Kh({children:r,minHeight:e=200}){const[t,i]=F.useState(!1),o=F.useRef(null);F.useEffect(()=>{const h=new IntersectionObserver(p=>{p[0].isIntersecting&&(i(!0),h.disconnect())},{rootMargin:"200px 0px"});return o.current&&h.observe(o.current),()=>h.disconnect()},[]);const l=t?void 0:{minHeight:e};return c.jsx("div",{ref:o,style:l,children:t?r:c.jsx(fc,{})})}function fc({label:r="Loading section"}){return c.jsxs("div",{className:"steam-skeleton",children:[c.jsx("div",{className:"steam-skeleton-bar"}),c.jsx("div",{className:"steam-skeleton-bar short"}),c.jsx("p",{className:"steam-skeleton-label",children:r})]})}function Eb(){return c.jsxs(zP,{children:[c.jsx($P,{}),c.jsxs(TE,{children:[c.jsx(Cr,{path:"/",element:c.jsx(Tv,{})}),c.jsx(Cr,{path:"/home",element:c.jsx(Tv,{})}),c.jsx(Cr,{path:"/manga",element:c.jsx(qP,{})}),c.jsx(Cr,{path:"/anime",element:c.jsx(ZP,{})}),c.jsx(Cr,{path:"/tcg",element:c.jsx(eb,{})}),c.jsx(Cr,{path:"/music",element:c.jsx(gb,{})}),c.jsx(Cr,{path:"/dashboard",element:c.jsx(mb,{})}),c.jsx(Cr,{path:"/signin",element:c.jsx(yb,{})}),c.jsx(Cr,{path:"/steam",element:c.jsx(xb,{})}),c.jsx(Cr,{path:"*",element:c.jsx(xE,{to:"/home",replace:!0})})]})]})}kx.createRoot(document.getElementById("root")).render(c.jsx(bv.StrictMode,{children:c.jsx(kE,{basename:"/base",children:c.jsx(Eb,{})})}));export{c as j,F as r};
