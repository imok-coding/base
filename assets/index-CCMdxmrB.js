function dE(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function _v(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Th={exports:{}},za={},xh={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function hE(){if(xg)return Fe;xg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),x=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,Y={};function L(O,J,fe){this.props=O,this.context=J,this.refs=Y,this.updater=fe||M}L.prototype.isReactComponent={},L.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},L.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function K(){}K.prototype=L.prototype;function $(O,J,fe){this.props=O,this.context=J,this.refs=Y,this.updater=fe||M}var X=$.prototype=new K;X.constructor=$,q(X,L.prototype),X.isPureReactComponent=!0;var ue=Array.isArray,Ee=Object.prototype.hasOwnProperty,ae={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function I(O,J,fe){var je,Oe={},Le=null,Se=null;if(J!=null)for(je in J.ref!==void 0&&(Se=J.ref),J.key!==void 0&&(Le=""+J.key),J)Ee.call(J,je)&&!b.hasOwnProperty(je)&&(Oe[je]=J[je]);var Ue=arguments.length-2;if(Ue===1)Oe.children=fe;else if(1<Ue){for(var $e=Array(Ue),Xe=0;Xe<Ue;Xe++)$e[Xe]=arguments[Xe+2];Oe.children=$e}if(O&&O.defaultProps)for(je in Ue=O.defaultProps,Ue)Oe[je]===void 0&&(Oe[je]=Ue[je]);return{$$typeof:r,type:O,key:Le,ref:Se,props:Oe,_owner:ae.current}}function A(O,J){return{$$typeof:r,type:O.type,key:J,ref:O.ref,props:O.props,_owner:O._owner}}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function V(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return J[fe]})}var N=/\/+/g;function R(O,J){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):J.toString(36)}function Je(O,J,fe,je,Oe){var Le=typeof O;(Le==="undefined"||Le==="boolean")&&(O=null);var Se=!1;if(O===null)Se=!0;else switch(Le){case"string":case"number":Se=!0;break;case"object":switch(O.$$typeof){case r:case e:Se=!0}}if(Se)return Se=O,Oe=Oe(Se),O=je===""?"."+R(Se,0):je,ue(Oe)?(fe="",O!=null&&(fe=O.replace(N,"$&/")+"/"),Je(Oe,J,fe,"",function(Xe){return Xe})):Oe!=null&&(k(Oe)&&(Oe=A(Oe,fe+(!Oe.key||Se&&Se.key===Oe.key?"":(""+Oe.key).replace(N,"$&/")+"/")+O)),J.push(Oe)),1;if(Se=0,je=je===""?".":je+":",ue(O))for(var Ue=0;Ue<O.length;Ue++){Le=O[Ue];var $e=je+R(Le,Ue);Se+=Je(Le,J,fe,$e,Oe)}else if($e=S(O),typeof $e=="function")for(O=$e.call(O),Ue=0;!(Le=O.next()).done;)Le=Le.value,$e=je+R(Le,Ue++),Se+=Je(Le,J,fe,$e,Oe);else if(Le==="object")throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Se}function et(O,J,fe){if(O==null)return O;var je=[],Oe=0;return Je(O,je,"","",function(Le){return J.call(fe,Le,Oe++)}),je}function _t(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var Ge={current:null},ce={transition:null},_e={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:ce,ReactCurrentOwner:ae};function de(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:et,forEach:function(O,J,fe){et(O,function(){J.apply(this,arguments)},fe)},count:function(O){var J=0;return et(O,function(){J++}),J},toArray:function(O){return et(O,function(J){return J})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Fe.Component=L,Fe.Fragment=t,Fe.Profiler=o,Fe.PureComponent=$,Fe.StrictMode=i,Fe.Suspense=y,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,Fe.act=de,Fe.cloneElement=function(O,J,fe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var je=q({},O.props),Oe=O.key,Le=O.ref,Se=O._owner;if(J!=null){if(J.ref!==void 0&&(Le=J.ref,Se=ae.current),J.key!==void 0&&(Oe=""+J.key),O.type&&O.type.defaultProps)var Ue=O.type.defaultProps;for($e in J)Ee.call(J,$e)&&!b.hasOwnProperty($e)&&(je[$e]=J[$e]===void 0&&Ue!==void 0?Ue[$e]:J[$e])}var $e=arguments.length-2;if($e===1)je.children=fe;else if(1<$e){Ue=Array($e);for(var Xe=0;Xe<$e;Xe++)Ue[Xe]=arguments[Xe+2];je.children=Ue}return{$$typeof:r,type:O.type,key:Oe,ref:Le,props:je,_owner:Se}},Fe.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},Fe.createElement=I,Fe.createFactory=function(O){var J=I.bind(null,O);return J.type=O,J},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(O){return{$$typeof:p,render:O}},Fe.isValidElement=k,Fe.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:_t}},Fe.memo=function(O,J){return{$$typeof:v,type:O,compare:J===void 0?null:J}},Fe.startTransition=function(O){var J=ce.transition;ce.transition={};try{O()}finally{ce.transition=J}},Fe.unstable_act=de,Fe.useCallback=function(O,J){return Ge.current.useCallback(O,J)},Fe.useContext=function(O){return Ge.current.useContext(O)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(O){return Ge.current.useDeferredValue(O)},Fe.useEffect=function(O,J){return Ge.current.useEffect(O,J)},Fe.useId=function(){return Ge.current.useId()},Fe.useImperativeHandle=function(O,J,fe){return Ge.current.useImperativeHandle(O,J,fe)},Fe.useInsertionEffect=function(O,J){return Ge.current.useInsertionEffect(O,J)},Fe.useLayoutEffect=function(O,J){return Ge.current.useLayoutEffect(O,J)},Fe.useMemo=function(O,J){return Ge.current.useMemo(O,J)},Fe.useReducer=function(O,J,fe){return Ge.current.useReducer(O,J,fe)},Fe.useRef=function(O){return Ge.current.useRef(O)},Fe.useState=function(O){return Ge.current.useState(O)},Fe.useSyncExternalStore=function(O,J,fe){return Ge.current.useSyncExternalStore(O,J,fe)},Fe.useTransition=function(){return Ge.current.useTransition()},Fe.version="18.3.1",Fe}var Ig;function vf(){return Ig||(Ig=1,xh.exports=hE()),xh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function fE(){if(Sg)return za;Sg=1;var r=vf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(p,y,v){var E,x={},S=null,M=null;v!==void 0&&(S=""+v),y.key!==void 0&&(S=""+y.key),y.ref!==void 0&&(M=y.ref);for(E in y)i.call(y,E)&&!l.hasOwnProperty(E)&&(x[E]=y[E]);if(p&&p.defaultProps)for(E in y=p.defaultProps,y)x[E]===void 0&&(x[E]=y[E]);return{$$typeof:e,type:p,key:S,ref:M,props:x,_owner:o.current}}return za.Fragment=t,za.jsx=d,za.jsxs=d,za}var Cg;function pE(){return Cg||(Cg=1,Th.exports=fE()),Th.exports}var h=pE(),Q=vf();const wv=_v(Q),mE=dE({__proto__:null,default:wv},[Q]);var $u={},Ih={exports:{}},En={},Sh={exports:{}},Ch={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function gE(){return Pg||(Pg=1,(function(r){function e(ce,_e){var de=ce.length;ce.push(_e);e:for(;0<de;){var O=de-1>>>1,J=ce[O];if(0<o(J,_e))ce[O]=_e,ce[de]=J,de=O;else break e}}function t(ce){return ce.length===0?null:ce[0]}function i(ce){if(ce.length===0)return null;var _e=ce[0],de=ce.pop();if(de!==_e){ce[0]=de;e:for(var O=0,J=ce.length,fe=J>>>1;O<fe;){var je=2*(O+1)-1,Oe=ce[je],Le=je+1,Se=ce[Le];if(0>o(Oe,de))Le<J&&0>o(Se,Oe)?(ce[O]=Se,ce[Le]=de,O=Le):(ce[O]=Oe,ce[je]=de,O=je);else if(Le<J&&0>o(Se,de))ce[O]=Se,ce[Le]=de,O=Le;else break e}}return _e}function o(ce,_e){var de=ce.sortIndex-_e.sortIndex;return de!==0?de:ce.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var y=[],v=[],E=1,x=null,S=3,M=!1,q=!1,Y=!1,L=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(ce){for(var _e=t(v);_e!==null;){if(_e.callback===null)i(v);else if(_e.startTime<=ce)i(v),_e.sortIndex=_e.expirationTime,e(y,_e);else break;_e=t(v)}}function ue(ce){if(Y=!1,X(ce),!q)if(t(y)!==null)q=!0,_t(Ee);else{var _e=t(v);_e!==null&&Ge(ue,_e.startTime-ce)}}function Ee(ce,_e){q=!1,Y&&(Y=!1,K(I),I=-1),M=!0;var de=S;try{for(X(_e),x=t(y);x!==null&&(!(x.expirationTime>_e)||ce&&!V());){var O=x.callback;if(typeof O=="function"){x.callback=null,S=x.priorityLevel;var J=O(x.expirationTime<=_e);_e=r.unstable_now(),typeof J=="function"?x.callback=J:x===t(y)&&i(y),X(_e)}else i(y);x=t(y)}if(x!==null)var fe=!0;else{var je=t(v);je!==null&&Ge(ue,je.startTime-_e),fe=!1}return fe}finally{x=null,S=de,M=!1}}var ae=!1,b=null,I=-1,A=5,k=-1;function V(){return!(r.unstable_now()-k<A)}function N(){if(b!==null){var ce=r.unstable_now();k=ce;var _e=!0;try{_e=b(!0,ce)}finally{_e?R():(ae=!1,b=null)}}else ae=!1}var R;if(typeof $=="function")R=function(){$(N)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,et=Je.port2;Je.port1.onmessage=N,R=function(){et.postMessage(null)}}else R=function(){L(N,0)};function _t(ce){b=ce,ae||(ae=!0,R())}function Ge(ce,_e){I=L(function(){ce(r.unstable_now())},_e)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ce){ce.callback=null},r.unstable_continueExecution=function(){q||M||(q=!0,_t(Ee))},r.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ce?Math.floor(1e3/ce):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(ce){switch(S){case 1:case 2:case 3:var _e=3;break;default:_e=S}var de=S;S=_e;try{return ce()}finally{S=de}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ce,_e){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var de=S;S=ce;try{return _e()}finally{S=de}},r.unstable_scheduleCallback=function(ce,_e,de){var O=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?O+de:O):de=O,ce){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=de+J,ce={id:E++,callback:_e,priorityLevel:ce,startTime:de,expirationTime:J,sortIndex:-1},de>O?(ce.sortIndex=de,e(v,ce),t(y)===null&&ce===t(v)&&(Y?(K(I),I=-1):Y=!0,Ge(ue,de-O))):(ce.sortIndex=J,e(y,ce),q||M||(q=!0,_t(Ee))),ce},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(ce){var _e=S;return function(){var de=S;S=_e;try{return ce.apply(this,arguments)}finally{S=de}}}})(Ch)),Ch}var Rg;function yE(){return Rg||(Rg=1,Sh.exports=gE()),Sh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function vE(){if(Ag)return En;Ag=1;var r=vf(),e=yE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},x={};function S(n){return y.call(x,n)?!0:y.call(E,n)?!1:v.test(n)?x[n]=!0:(E[n]=!0,!1)}function M(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,s,a,c){if(s===null||typeof s>"u"||M(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Y(n,s,a,c,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){L[n]=new Y(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];L[s]=new Y(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){L[n]=new Y(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){L[n]=new Y(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){L[n]=new Y(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){L[n]=new Y(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){L[n]=new Y(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){L[n]=new Y(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){L[n]=new Y(n,5,!1,n.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function $(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(K,$);L[s]=new Y(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(K,$);L[s]=new Y(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(K,$);L[s]=new Y(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){L[n]=new Y(n,1,!1,n.toLowerCase(),null,!1,!1)}),L.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){L[n]=new Y(n,1,!1,n.toLowerCase(),null,!0,!0)});function X(n,s,a,c){var f=L.hasOwnProperty(s)?L[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(q(s,a,f,c)&&(a=null),c||f===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var ue=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),ae=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),V=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Je=Symbol.for("react.suspense_list"),et=Symbol.for("react.memo"),_t=Symbol.for("react.lazy"),Ge=Symbol.for("react.offscreen"),ce=Symbol.iterator;function _e(n){return n===null||typeof n!="object"?null:(n=ce&&n[ce]||n["@@iterator"],typeof n=="function"?n:null)}var de=Object.assign,O;function J(n){if(O===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+n}var fe=!1;function je(n,s){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(W){var c=W}Reflect.construct(n,[],s)}else{try{s.call()}catch(W){c=W}n.call(s.prototype)}else{try{throw Error()}catch(W){c=W}n()}}catch(W){if(W&&c&&typeof W.stack=="string"){for(var f=W.stack.split(`
`),g=c.stack.split(`
`),w=f.length-1,P=g.length-1;1<=w&&0<=P&&f[w]!==g[P];)P--;for(;1<=w&&0<=P;w--,P--)if(f[w]!==g[P]){if(w!==1||P!==1)do if(w--,P--,0>P||f[w]!==g[P]){var j=`
`+f[w].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=w&&0<=P);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?J(n):""}function Oe(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=je(n.type,!1),n;case 11:return n=je(n.type.render,!1),n;case 1:return n=je(n.type,!0),n;default:return""}}function Le(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case ae:return"Portal";case A:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case Je:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case et:return s=n.displayName||null,s!==null?s:Le(n.type)||"Memo";case _t:s=n._payload,n=n._init;try{return Le(n(s))}catch{}}return null}function Se(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Xe(n){var s=$e(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function dn(n){n._valueTracker||(n._valueTracker=Xe(n))}function sn(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=$e(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function hn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Vn(n,s){var a=s.checked;return de({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Gn(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Ue(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function on(n,s){s=s.checked,s!=null&&X(n,"checked",s,!1)}function tt(n,s){on(n,s);var a=Ue(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?pr(n,s.type,a):s.hasOwnProperty("defaultValue")&&pr(n,s.type,Ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ui(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function pr(n,s,a){(s!=="number"||hn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var re=Array.isArray;function ge(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ue(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function he(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ae(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(re(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Ue(a)}}function C(n,s){var a=Ue(s.value),c=Ue(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function ee(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function H(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?H(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ye,Qe=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(ye=ye||document.createElement("div"),ye.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ye.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function at(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},At=["Webkit","ms","Moz","O"];Object.keys(Rt).forEach(function(n){At.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Rt[s]=Rt[n]})});function Ot(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Rt.hasOwnProperty(n)&&Rt[n]?(""+s).trim():s+"px"}function Kn(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=Ot(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var mr=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qn(n,s){if(s){if(mr[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Or(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lr=null;function ci(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var di=null,fn=null,nt=null;function In(n){if(n=Ca(n)){if(typeof di!="function")throw Error(t(280));var s=n.stateNode;s&&(s=iu(s),di(n.stateNode,n.type,s))}}function gr(n){fn?nt?nt.push(n):nt=[n]:fn=n}function ra(){if(fn){var n=fn,s=nt;if(nt=fn=null,In(n),s)for(n=0;n<s.length;n++)In(s[n])}}function ls(n,s){return n(s)}function ia(){}var Mr=!1;function sa(n,s,a){if(Mr)return n(s,a);Mr=!0;try{return ls(n,s,a)}finally{Mr=!1,(fn!==null||nt!==null)&&(ia(),ra())}}function wt(n,s){var a=n.stateNode;if(a===null)return null;var c=iu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Hs=!1;if(p)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){Hs=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{Hs=!1}function us(n,s,a,c,f,g,w,P,j){var W=Array.prototype.slice.call(arguments,3);try{s.apply(a,W)}catch(ie){this.onError(ie)}}var cs=!1,qs=null,Jn=!1,oa=null,Yc={onError:function(n){cs=!0,qs=n}};function Gs(n,s,a,c,f,g,w,P,j){cs=!1,qs=null,us.apply(Yc,arguments)}function Al(n,s,a,c,f,g,w,P,j){if(Gs.apply(this,arguments),cs){if(cs){var W=qs;cs=!1,qs=null}else throw Error(t(198));Jn||(Jn=!0,oa=W)}}function Xn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ds(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Zn(n){if(Xn(n)!==n)throw Error(t(188))}function kl(n){var s=n.alternate;if(!s){if(s=Xn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Zn(f),n;if(g===c)return Zn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var w=!1,P=f.child;P;){if(P===a){w=!0,a=f,c=g;break}if(P===c){w=!0,c=f,a=g;break}P=P.sibling}if(!w){for(P=g.child;P;){if(P===a){w=!0,a=g,c=f;break}if(P===c){w=!0,c=g,a=f;break}P=P.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function aa(n){return n=kl(n),n!==null?Ks(n):null}function Ks(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ks(n);if(s!==null)return s;n=n.sibling}return null}var Qs=e.unstable_scheduleCallback,la=e.unstable_cancelCallback,Nl=e.unstable_shouldYield,Jc=e.unstable_requestPaint,st=e.unstable_now,bl=e.unstable_getCurrentPriorityLevel,hs=e.unstable_ImmediatePriority,hi=e.unstable_UserBlockingPriority,On=e.unstable_NormalPriority,ua=e.unstable_LowPriority,jl=e.unstable_IdlePriority,fs=null,Sn=null;function Dl(n){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(fs,n,void 0,(n.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Ol,ca=Math.log,Vl=Math.LN2;function Ol(n){return n>>>=0,n===0?32:31-(ca(n)/Vl|0)|0}var Ys=64,Js=4194304;function fi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ps(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var P=w&~f;P!==0?c=fi(P):(g&=w,g!==0&&(c=fi(g)))}else w=a&~f,w!==0?c=fi(w):g!==0&&(c=fi(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-an(s),f=1<<a,c|=n[a],s&=~f;return c}function Xc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-an(g),P=1<<w,j=f[w];j===-1?((P&a)===0||(P&c)!==0)&&(f[w]=Xc(P,s)):j<=s&&(n.expiredLanes|=P),g&=~P}}function Cn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ms(){var n=Ys;return Ys<<=1,(Ys&4194240)===0&&(Ys=64),n}function pi(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function mi(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-an(s),n[s]=a}function it(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-an(a),g=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function gi(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-an(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var We=0;function yi(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ll,Xs,Ml,Fl,Ul,da=!1,yr=[],Bt=null,er=null,tr=null,vi=new Map,Ln=new Map,vr=[],Zc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zl(n,s){switch(n){case"focusin":case"focusout":Bt=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":vi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ln.delete(s.pointerId)}}function pn(n,s,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ca(s),s!==null&&Xs(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function ed(n,s,a,c,f){switch(s){case"focusin":return Bt=pn(Bt,n,s,a,c,f),!0;case"dragenter":return er=pn(er,n,s,a,c,f),!0;case"mouseover":return tr=pn(tr,n,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return vi.set(g,pn(vi.get(g)||null,n,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Ln.set(g,pn(Ln.get(g)||null,n,s,a,c,f)),!0}return!1}function Bl(n){var s=ws(n.target);if(s!==null){var a=Xn(s);if(a!==null){if(s=a.tag,s===13){if(s=ds(a),s!==null){n.blockedOn=s,Ul(n.priority,function(){Ml(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ur(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Zs(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Lr=c,a.target.dispatchEvent(c),Lr=null}else return s=Ca(a),s!==null&&Xs(s),n.blockedOn=a,!1;s.shift()}return!0}function gs(n,s,a){Ur(n)&&a.delete(s)}function $l(){da=!1,Bt!==null&&Ur(Bt)&&(Bt=null),er!==null&&Ur(er)&&(er=null),tr!==null&&Ur(tr)&&(tr=null),vi.forEach(gs),Ln.forEach(gs)}function nr(n,s){n.blockedOn===s&&(n.blockedOn=null,da||(da=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$l)))}function rr(n){function s(f){return nr(f,n)}if(0<yr.length){nr(yr[0],n);for(var a=1;a<yr.length;a++){var c=yr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Bt!==null&&nr(Bt,n),er!==null&&nr(er,n),tr!==null&&nr(tr,n),vi.forEach(s),Ln.forEach(s),a=0;a<vr.length;a++)c=vr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<vr.length&&(a=vr[0],a.blockedOn===null);)Bl(a),a.blockedOn===null&&vr.shift()}var zr=ue.ReactCurrentBatchConfig,_i=!0;function ht(n,s,a,c){var f=We,g=zr.transition;zr.transition=null;try{We=1,ha(n,s,a,c)}finally{We=f,zr.transition=g}}function td(n,s,a,c){var f=We,g=zr.transition;zr.transition=null;try{We=4,ha(n,s,a,c)}finally{We=f,zr.transition=g}}function ha(n,s,a,c){if(_i){var f=Zs(n,s,a,c);if(f===null)hd(n,s,c,ys,a),zl(n,c);else if(ed(f,n,s,a,c))c.stopPropagation();else if(zl(n,c),s&4&&-1<Zc.indexOf(n)){for(;f!==null;){var g=Ca(f);if(g!==null&&Ll(g),g=Zs(n,s,a,c),g===null&&hd(n,s,c,ys,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else hd(n,s,c,null,a)}}var ys=null;function Zs(n,s,a,c){if(ys=null,n=ci(c),n=ws(n),n!==null)if(s=Xn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ds(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ys=n,null}function fa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bl()){case hs:return 1;case hi:return 4;case On:case ua:return 16;case jl:return 536870912;default:return 16}default:return 16}}var Pn=null,eo=null,mn=null;function pa(){if(mn)return mn;var n,s=eo,a=s.length,c,f="value"in Pn?Pn.value:Pn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===f[g-c];c++);return mn=f.slice(n,1<c?1-c:void 0)}function to(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function _r(){return!0}function ma(){return!1}function $t(n){function s(a,c,f,g,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(a=n[P],this[P]=a?a(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?_r:ma,this.isPropagationStopped=ma,this}return de(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),s}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=$t(ir),wr=de({},ir,{view:0,detail:0}),nd=$t(wr),ro,Br,wi,vs=de({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wi&&(wi&&n.type==="mousemove"?(ro=n.screenX-wi.screenX,Br=n.screenY-wi.screenY):Br=ro=0,wi=n),ro)},movementY:function(n){return"movementY"in n?n.movementY:Br}}),io=$t(vs),ga=de({},vs,{dataTransfer:0}),Wl=$t(ga),so=de({},wr,{relatedTarget:0}),oo=$t(so),Hl=de({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),$r=$t(Hl),ql=de({},ir,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gl=$t(ql),Kl=de({},ir,{data:0}),ya=$t(Kl),ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ql[n])?!!s[n]:!1}function Er(){return Yl}var u=de({},wr,{key:function(n){if(n.key){var s=ao[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=to(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ln[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(n){return n.type==="keypress"?to(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?to(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=$t(u),_=de({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=$t(_),U=de({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er}),G=$t(U),le=de({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),rt=$t(le),kt=de({},vs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),He=$t(kt),Lt=[9,13,27,32],It=p&&"CompositionEvent"in window,Mn=null;p&&"documentMode"in document&&(Mn=document.documentMode);var Rn=p&&"TextEvent"in window&&!Mn,_s=p&&(!It||Mn&&8<Mn&&11>=Mn),lo=" ",yp=!1;function vp(n,s){switch(n){case"keyup":return Lt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _p(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var uo=!1;function lw(n,s){switch(n){case"compositionend":return _p(s);case"keypress":return s.which!==32?null:(yp=!0,lo);case"textInput":return n=s.data,n===lo&&yp?null:n;default:return null}}function uw(n,s){if(uo)return n==="compositionend"||!It&&vp(n,s)?(n=pa(),mn=eo=Pn=null,uo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _s&&s.locale!=="ko"?null:s.data;default:return null}}var cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!cw[n.type]:s==="textarea"}function Ep(n,s,a,c){gr(c),s=tu(s,"onChange"),0<s.length&&(a=new no("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var va=null,_a=null;function dw(n){Fp(n,0)}function Jl(n){var s=mo(n);if(sn(s))return n}function hw(n,s){if(n==="change")return s}var Tp=!1;if(p){var rd;if(p){var id="oninput"in document;if(!id){var xp=document.createElement("div");xp.setAttribute("oninput","return;"),id=typeof xp.oninput=="function"}rd=id}else rd=!1;Tp=rd&&(!document.documentMode||9<document.documentMode)}function Ip(){va&&(va.detachEvent("onpropertychange",Sp),_a=va=null)}function Sp(n){if(n.propertyName==="value"&&Jl(_a)){var s=[];Ep(s,_a,n,ci(n)),sa(dw,s)}}function fw(n,s,a){n==="focusin"?(Ip(),va=s,_a=a,va.attachEvent("onpropertychange",Sp)):n==="focusout"&&Ip()}function pw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jl(_a)}function mw(n,s){if(n==="click")return Jl(s)}function gw(n,s){if(n==="input"||n==="change")return Jl(s)}function yw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var sr=typeof Object.is=="function"?Object.is:yw;function wa(n,s){if(sr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!y.call(s,f)||!sr(n[f],s[f]))return!1}return!0}function Cp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Pp(n,s){var a=Cp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Cp(a)}}function Rp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Rp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Ap(){for(var n=window,s=hn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=hn(n.document)}return s}function sd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function vw(n){var s=Ap(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Rp(a.ownerDocument.documentElement,a)){if(c!==null&&sd(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=Pp(a,g);var w=Pp(a,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _w=p&&"documentMode"in document&&11>=document.documentMode,co=null,od=null,Ea=null,ad=!1;function kp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ad||co==null||co!==hn(c)||(c=co,"selectionStart"in c&&sd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ea&&wa(Ea,c)||(Ea=c,c=tu(od,"onSelect"),0<c.length&&(s=new no("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=co)))}function Xl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var ho={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},ld={},Np={};p&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function Zl(n){if(ld[n])return ld[n];if(!ho[n])return n;var s=ho[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Np)return ld[n]=s[a];return n}var bp=Zl("animationend"),jp=Zl("animationiteration"),Dp=Zl("animationstart"),Vp=Zl("transitionend"),Op=new Map,Lp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(n,s){Op.set(n,s),l(s,[n])}for(var ud=0;ud<Lp.length;ud++){var cd=Lp[ud],ww=cd.toLowerCase(),Ew=cd[0].toUpperCase()+cd.slice(1);Ei(ww,"on"+Ew)}Ei(bp,"onAnimationEnd"),Ei(jp,"onAnimationIteration"),Ei(Dp,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(Vp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Mp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Al(c,s,void 0,n),n.currentTarget=null}function Fp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var P=c[w],j=P.instance,W=P.currentTarget;if(P=P.listener,j!==g&&f.isPropagationStopped())break e;Mp(f,P,W),g=j}else for(w=0;w<c.length;w++){if(P=c[w],j=P.instance,W=P.currentTarget,P=P.listener,j!==g&&f.isPropagationStopped())break e;Mp(f,P,W),g=j}}}if(Jn)throw n=oa,Jn=!1,oa=null,n}function lt(n,s){var a=s[vd];a===void 0&&(a=s[vd]=new Set);var c=n+"__bubble";a.has(c)||(Up(s,n,2,!1),a.add(c))}function dd(n,s,a){var c=0;s&&(c|=4),Up(a,n,c,s)}var eu="_reactListening"+Math.random().toString(36).slice(2);function xa(n){if(!n[eu]){n[eu]=!0,i.forEach(function(a){a!=="selectionchange"&&(Tw.has(a)||dd(a,!1,n),dd(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[eu]||(s[eu]=!0,dd("selectionchange",!1,s))}}function Up(n,s,a,c){switch(fa(s)){case 1:var f=ht;break;case 4:f=td;break;default:f=ha}a=f.bind(null,s,a,n),f=void 0,!Hs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function hd(n,s,a,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var P=c.stateNode.containerInfo;if(P===f||P.nodeType===8&&P.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var j=w.tag;if((j===3||j===4)&&(j=w.stateNode.containerInfo,j===f||j.nodeType===8&&j.parentNode===f))return;w=w.return}for(;P!==null;){if(w=ws(P),w===null)return;if(j=w.tag,j===5||j===6){c=g=w;continue e}P=P.parentNode}}c=c.return}sa(function(){var W=g,ie=ci(a),se=[];e:{var ne=Op.get(n);if(ne!==void 0){var pe=no,we=n;switch(n){case"keypress":if(to(a)===0)break e;case"keydown":case"keyup":pe=m;break;case"focusin":we="focus",pe=oo;break;case"focusout":we="blur",pe=oo;break;case"beforeblur":case"afterblur":pe=oo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=G;break;case bp:case jp:case Dp:pe=$r;break;case Vp:pe=rt;break;case"scroll":pe=nd;break;case"wheel":pe=He;break;case"copy":case"cut":case"paste":pe=Gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=T}var Te=(s&4)!==0,Et=!Te&&n==="scroll",z=Te?ne!==null?ne+"Capture":null:ne;Te=[];for(var D=W,B;D!==null;){B=D;var oe=B.stateNode;if(B.tag===5&&oe!==null&&(B=oe,z!==null&&(oe=wt(D,z),oe!=null&&Te.push(Ia(D,oe,B)))),Et)break;D=D.return}0<Te.length&&(ne=new pe(ne,we,null,a,ie),se.push({event:ne,listeners:Te}))}}if((s&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",pe=n==="mouseout"||n==="pointerout",ne&&a!==Lr&&(we=a.relatedTarget||a.fromElement)&&(ws(we)||we[Wr]))break e;if((pe||ne)&&(ne=ie.window===ie?ie:(ne=ie.ownerDocument)?ne.defaultView||ne.parentWindow:window,pe?(we=a.relatedTarget||a.toElement,pe=W,we=we?ws(we):null,we!==null&&(Et=Xn(we),we!==Et||we.tag!==5&&we.tag!==6)&&(we=null)):(pe=null,we=W),pe!==we)){if(Te=io,oe="onMouseLeave",z="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(Te=T,oe="onPointerLeave",z="onPointerEnter",D="pointer"),Et=pe==null?ne:mo(pe),B=we==null?ne:mo(we),ne=new Te(oe,D+"leave",pe,a,ie),ne.target=Et,ne.relatedTarget=B,oe=null,ws(ie)===W&&(Te=new Te(z,D+"enter",we,a,ie),Te.target=B,Te.relatedTarget=Et,oe=Te),Et=oe,pe&&we)t:{for(Te=pe,z=we,D=0,B=Te;B;B=fo(B))D++;for(B=0,oe=z;oe;oe=fo(oe))B++;for(;0<D-B;)Te=fo(Te),D--;for(;0<B-D;)z=fo(z),B--;for(;D--;){if(Te===z||z!==null&&Te===z.alternate)break t;Te=fo(Te),z=fo(z)}Te=null}else Te=null;pe!==null&&zp(se,ne,pe,Te,!1),we!==null&&Et!==null&&zp(se,Et,we,Te,!0)}}e:{if(ne=W?mo(W):window,pe=ne.nodeName&&ne.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ne.type==="file")var Ie=hw;else if(wp(ne))if(Tp)Ie=gw;else{Ie=pw;var Pe=fw}else(pe=ne.nodeName)&&pe.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Ie=mw);if(Ie&&(Ie=Ie(n,W))){Ep(se,Ie,a,ie);break e}Pe&&Pe(n,ne,W),n==="focusout"&&(Pe=ne._wrapperState)&&Pe.controlled&&ne.type==="number"&&pr(ne,"number",ne.value)}switch(Pe=W?mo(W):window,n){case"focusin":(wp(Pe)||Pe.contentEditable==="true")&&(co=Pe,od=W,Ea=null);break;case"focusout":Ea=od=co=null;break;case"mousedown":ad=!0;break;case"contextmenu":case"mouseup":case"dragend":ad=!1,kp(se,a,ie);break;case"selectionchange":if(_w)break;case"keydown":case"keyup":kp(se,a,ie)}var Re;if(It)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else uo?vp(n,a)&&(be="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(_s&&a.locale!=="ko"&&(uo||be!=="onCompositionStart"?be==="onCompositionEnd"&&uo&&(Re=pa()):(Pn=ie,eo="value"in Pn?Pn.value:Pn.textContent,uo=!0)),Pe=tu(W,be),0<Pe.length&&(be=new ya(be,n,null,a,ie),se.push({event:be,listeners:Pe}),Re?be.data=Re:(Re=_p(a),Re!==null&&(be.data=Re)))),(Re=Rn?lw(n,a):uw(n,a))&&(W=tu(W,"onBeforeInput"),0<W.length&&(ie=new ya("onBeforeInput","beforeinput",null,a,ie),se.push({event:ie,listeners:W}),ie.data=Re))}Fp(se,s)})}function Ia(n,s,a){return{instance:n,listener:s,currentTarget:a}}function tu(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=wt(n,a),g!=null&&c.unshift(Ia(n,g,f)),g=wt(n,s),g!=null&&c.push(Ia(n,g,f))),n=n.return}return c}function fo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function zp(n,s,a,c,f){for(var g=s._reactName,w=[];a!==null&&a!==c;){var P=a,j=P.alternate,W=P.stateNode;if(j!==null&&j===c)break;P.tag===5&&W!==null&&(P=W,f?(j=wt(a,g),j!=null&&w.unshift(Ia(a,j,P))):f||(j=wt(a,g),j!=null&&w.push(Ia(a,j,P)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var xw=/\r\n?/g,Iw=/\u0000|\uFFFD/g;function Bp(n){return(typeof n=="string"?n:""+n).replace(xw,`
`).replace(Iw,"")}function nu(n,s,a){if(s=Bp(s),Bp(n)!==s&&a)throw Error(t(425))}function ru(){}var fd=null,pd=null;function md(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var gd=typeof setTimeout=="function"?setTimeout:void 0,Sw=typeof clearTimeout=="function"?clearTimeout:void 0,$p=typeof Promise=="function"?Promise:void 0,Cw=typeof queueMicrotask=="function"?queueMicrotask:typeof $p<"u"?function(n){return $p.resolve(null).then(n).catch(Pw)}:gd;function Pw(n){setTimeout(function(){throw n})}function yd(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),rr(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);rr(s)}function Ti(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Wp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var po=Math.random().toString(36).slice(2),Tr="__reactFiber$"+po,Sa="__reactProps$"+po,Wr="__reactContainer$"+po,vd="__reactEvents$"+po,Rw="__reactListeners$"+po,Aw="__reactHandles$"+po;function ws(n){var s=n[Tr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Wr]||a[Tr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Wp(n);n!==null;){if(a=n[Tr])return a;n=Wp(n)}return s}n=a,a=n.parentNode}return null}function Ca(n){return n=n[Tr]||n[Wr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function mo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function iu(n){return n[Sa]||null}var _d=[],go=-1;function xi(n){return{current:n}}function ut(n){0>go||(n.current=_d[go],_d[go]=null,go--)}function ot(n,s){go++,_d[go]=n.current,n.current=s}var Ii={},Yt=xi(Ii),gn=xi(!1),Es=Ii;function yo(n,s){var a=n.type.contextTypes;if(!a)return Ii;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function yn(n){return n=n.childContextTypes,n!=null}function su(){ut(gn),ut(Yt)}function Hp(n,s,a){if(Yt.current!==Ii)throw Error(t(168));ot(Yt,s),ot(gn,a)}function qp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,Se(n)||"Unknown",f));return de({},a,c)}function ou(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ii,Es=Yt.current,ot(Yt,n),ot(gn,gn.current),!0}function Gp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=qp(n,s,Es),c.__reactInternalMemoizedMergedChildContext=n,ut(gn),ut(Yt),ot(Yt,n)):ut(gn),ot(gn,a)}var Hr=null,au=!1,wd=!1;function Kp(n){Hr===null?Hr=[n]:Hr.push(n)}function kw(n){au=!0,Kp(n)}function Si(){if(!wd&&Hr!==null){wd=!0;var n=0,s=We;try{var a=Hr;for(We=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Hr=null,au=!1}catch(f){throw Hr!==null&&(Hr=Hr.slice(n+1)),Qs(hs,Si),f}finally{We=s,wd=!1}}return null}var vo=[],_o=0,lu=null,uu=0,Fn=[],Un=0,Ts=null,qr=1,Gr="";function xs(n,s){vo[_o++]=uu,vo[_o++]=lu,lu=n,uu=s}function Qp(n,s,a){Fn[Un++]=qr,Fn[Un++]=Gr,Fn[Un++]=Ts,Ts=n;var c=qr;n=Gr;var f=32-an(c)-1;c&=~(1<<f),a+=1;var g=32-an(s)+f;if(30<g){var w=f-f%5;g=(c&(1<<w)-1).toString(32),c>>=w,f-=w,qr=1<<32-an(s)+f|a<<f|c,Gr=g+n}else qr=1<<g|a<<f|c,Gr=n}function Ed(n){n.return!==null&&(xs(n,1),Qp(n,1,0))}function Td(n){for(;n===lu;)lu=vo[--_o],vo[_o]=null,uu=vo[--_o],vo[_o]=null;for(;n===Ts;)Ts=Fn[--Un],Fn[Un]=null,Gr=Fn[--Un],Fn[Un]=null,qr=Fn[--Un],Fn[Un]=null}var An=null,kn=null,ft=!1,or=null;function Yp(n,s){var a=Wn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Jp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,An=n,kn=Ti(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,An=n,kn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ts!==null?{id:qr,overflow:Gr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Wn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,An=n,kn=null,!0):!1;default:return!1}}function xd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Id(n){if(ft){var s=kn;if(s){var a=s;if(!Jp(n,s)){if(xd(n))throw Error(t(418));s=Ti(a.nextSibling);var c=An;s&&Jp(n,s)?Yp(c,a):(n.flags=n.flags&-4097|2,ft=!1,An=n)}}else{if(xd(n))throw Error(t(418));n.flags=n.flags&-4097|2,ft=!1,An=n}}}function Xp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;An=n}function cu(n){if(n!==An)return!1;if(!ft)return Xp(n),ft=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!md(n.type,n.memoizedProps)),s&&(s=kn)){if(xd(n))throw Zp(),Error(t(418));for(;s;)Yp(n,s),s=Ti(s.nextSibling)}if(Xp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){kn=Ti(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}kn=null}}else kn=An?Ti(n.stateNode.nextSibling):null;return!0}function Zp(){for(var n=kn;n;)n=Ti(n.nextSibling)}function wo(){kn=An=null,ft=!1}function Sd(n){or===null?or=[n]:or.push(n)}var Nw=ue.ReactCurrentBatchConfig;function Pa(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var P=f.refs;w===null?delete P[g]:P[g]=w},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function du(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function em(n){var s=n._init;return s(n._payload)}function tm(n){function s(z,D){if(n){var B=z.deletions;B===null?(z.deletions=[D],z.flags|=16):B.push(D)}}function a(z,D){if(!n)return null;for(;D!==null;)s(z,D),D=D.sibling;return null}function c(z,D){for(z=new Map;D!==null;)D.key!==null?z.set(D.key,D):z.set(D.index,D),D=D.sibling;return z}function f(z,D){return z=ji(z,D),z.index=0,z.sibling=null,z}function g(z,D,B){return z.index=B,n?(B=z.alternate,B!==null?(B=B.index,B<D?(z.flags|=2,D):B):(z.flags|=2,D)):(z.flags|=1048576,D)}function w(z){return n&&z.alternate===null&&(z.flags|=2),z}function P(z,D,B,oe){return D===null||D.tag!==6?(D=gh(B,z.mode,oe),D.return=z,D):(D=f(D,B),D.return=z,D)}function j(z,D,B,oe){var Ie=B.type;return Ie===b?ie(z,D,B.props.children,oe,B.key):D!==null&&(D.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===_t&&em(Ie)===D.type)?(oe=f(D,B.props),oe.ref=Pa(z,D,B),oe.return=z,oe):(oe=Vu(B.type,B.key,B.props,null,z.mode,oe),oe.ref=Pa(z,D,B),oe.return=z,oe)}function W(z,D,B,oe){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=yh(B,z.mode,oe),D.return=z,D):(D=f(D,B.children||[]),D.return=z,D)}function ie(z,D,B,oe,Ie){return D===null||D.tag!==7?(D=Ns(B,z.mode,oe,Ie),D.return=z,D):(D=f(D,B),D.return=z,D)}function se(z,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return D=gh(""+D,z.mode,B),D.return=z,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ee:return B=Vu(D.type,D.key,D.props,null,z.mode,B),B.ref=Pa(z,null,D),B.return=z,B;case ae:return D=yh(D,z.mode,B),D.return=z,D;case _t:var oe=D._init;return se(z,oe(D._payload),B)}if(re(D)||_e(D))return D=Ns(D,z.mode,B,null),D.return=z,D;du(z,D)}return null}function ne(z,D,B,oe){var Ie=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return Ie!==null?null:P(z,D,""+B,oe);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ee:return B.key===Ie?j(z,D,B,oe):null;case ae:return B.key===Ie?W(z,D,B,oe):null;case _t:return Ie=B._init,ne(z,D,Ie(B._payload),oe)}if(re(B)||_e(B))return Ie!==null?null:ie(z,D,B,oe,null);du(z,B)}return null}function pe(z,D,B,oe,Ie){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return z=z.get(B)||null,P(D,z,""+oe,Ie);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Ee:return z=z.get(oe.key===null?B:oe.key)||null,j(D,z,oe,Ie);case ae:return z=z.get(oe.key===null?B:oe.key)||null,W(D,z,oe,Ie);case _t:var Pe=oe._init;return pe(z,D,B,Pe(oe._payload),Ie)}if(re(oe)||_e(oe))return z=z.get(B)||null,ie(D,z,oe,Ie,null);du(D,oe)}return null}function we(z,D,B,oe){for(var Ie=null,Pe=null,Re=D,be=D=0,Ut=null;Re!==null&&be<B.length;be++){Re.index>be?(Ut=Re,Re=null):Ut=Re.sibling;var Ye=ne(z,Re,B[be],oe);if(Ye===null){Re===null&&(Re=Ut);break}n&&Re&&Ye.alternate===null&&s(z,Re),D=g(Ye,D,be),Pe===null?Ie=Ye:Pe.sibling=Ye,Pe=Ye,Re=Ut}if(be===B.length)return a(z,Re),ft&&xs(z,be),Ie;if(Re===null){for(;be<B.length;be++)Re=se(z,B[be],oe),Re!==null&&(D=g(Re,D,be),Pe===null?Ie=Re:Pe.sibling=Re,Pe=Re);return ft&&xs(z,be),Ie}for(Re=c(z,Re);be<B.length;be++)Ut=pe(Re,z,be,B[be],oe),Ut!==null&&(n&&Ut.alternate!==null&&Re.delete(Ut.key===null?be:Ut.key),D=g(Ut,D,be),Pe===null?Ie=Ut:Pe.sibling=Ut,Pe=Ut);return n&&Re.forEach(function(Di){return s(z,Di)}),ft&&xs(z,be),Ie}function Te(z,D,B,oe){var Ie=_e(B);if(typeof Ie!="function")throw Error(t(150));if(B=Ie.call(B),B==null)throw Error(t(151));for(var Pe=Ie=null,Re=D,be=D=0,Ut=null,Ye=B.next();Re!==null&&!Ye.done;be++,Ye=B.next()){Re.index>be?(Ut=Re,Re=null):Ut=Re.sibling;var Di=ne(z,Re,Ye.value,oe);if(Di===null){Re===null&&(Re=Ut);break}n&&Re&&Di.alternate===null&&s(z,Re),D=g(Di,D,be),Pe===null?Ie=Di:Pe.sibling=Di,Pe=Di,Re=Ut}if(Ye.done)return a(z,Re),ft&&xs(z,be),Ie;if(Re===null){for(;!Ye.done;be++,Ye=B.next())Ye=se(z,Ye.value,oe),Ye!==null&&(D=g(Ye,D,be),Pe===null?Ie=Ye:Pe.sibling=Ye,Pe=Ye);return ft&&xs(z,be),Ie}for(Re=c(z,Re);!Ye.done;be++,Ye=B.next())Ye=pe(Re,z,be,Ye.value,oe),Ye!==null&&(n&&Ye.alternate!==null&&Re.delete(Ye.key===null?be:Ye.key),D=g(Ye,D,be),Pe===null?Ie=Ye:Pe.sibling=Ye,Pe=Ye);return n&&Re.forEach(function(cE){return s(z,cE)}),ft&&xs(z,be),Ie}function Et(z,D,B,oe){if(typeof B=="object"&&B!==null&&B.type===b&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Ee:e:{for(var Ie=B.key,Pe=D;Pe!==null;){if(Pe.key===Ie){if(Ie=B.type,Ie===b){if(Pe.tag===7){a(z,Pe.sibling),D=f(Pe,B.props.children),D.return=z,z=D;break e}}else if(Pe.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===_t&&em(Ie)===Pe.type){a(z,Pe.sibling),D=f(Pe,B.props),D.ref=Pa(z,Pe,B),D.return=z,z=D;break e}a(z,Pe);break}else s(z,Pe);Pe=Pe.sibling}B.type===b?(D=Ns(B.props.children,z.mode,oe,B.key),D.return=z,z=D):(oe=Vu(B.type,B.key,B.props,null,z.mode,oe),oe.ref=Pa(z,D,B),oe.return=z,z=oe)}return w(z);case ae:e:{for(Pe=B.key;D!==null;){if(D.key===Pe)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){a(z,D.sibling),D=f(D,B.children||[]),D.return=z,z=D;break e}else{a(z,D);break}else s(z,D);D=D.sibling}D=yh(B,z.mode,oe),D.return=z,z=D}return w(z);case _t:return Pe=B._init,Et(z,D,Pe(B._payload),oe)}if(re(B))return we(z,D,B,oe);if(_e(B))return Te(z,D,B,oe);du(z,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,D!==null&&D.tag===6?(a(z,D.sibling),D=f(D,B),D.return=z,z=D):(a(z,D),D=gh(B,z.mode,oe),D.return=z,z=D),w(z)):a(z,D)}return Et}var Eo=tm(!0),nm=tm(!1),hu=xi(null),fu=null,To=null,Cd=null;function Pd(){Cd=To=fu=null}function Rd(n){var s=hu.current;ut(hu),n._currentValue=s}function Ad(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function xo(n,s){fu=n,Cd=To=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(vn=!0),n.firstContext=null)}function zn(n){var s=n._currentValue;if(Cd!==n)if(n={context:n,memoizedValue:s,next:null},To===null){if(fu===null)throw Error(t(308));To=n,fu.dependencies={lanes:0,firstContext:n}}else To=To.next=n;return s}var Is=null;function kd(n){Is===null?Is=[n]:Is.push(n)}function rm(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,kd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Kr(n,c)}function Kr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ci=!1;function Nd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function im(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Qr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Pi(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ke&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Kr(n,a)}return f=c.interleaved,f===null?(s.next=s,kd(c)):(s.next=f.next,f.next=s),c.interleaved=s,Kr(n,a)}function pu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,gi(n,a)}}function sm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function mu(n,s,a,c){var f=n.updateQueue;Ci=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,P=f.shared.pending;if(P!==null){f.shared.pending=null;var j=P,W=j.next;j.next=null,w===null?g=W:w.next=W,w=j;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,P=ie.lastBaseUpdate,P!==w&&(P===null?ie.firstBaseUpdate=W:P.next=W,ie.lastBaseUpdate=j))}if(g!==null){var se=f.baseState;w=0,ie=W=j=null,P=g;do{var ne=P.lane,pe=P.eventTime;if((c&ne)===ne){ie!==null&&(ie=ie.next={eventTime:pe,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var we=n,Te=P;switch(ne=s,pe=a,Te.tag){case 1:if(we=Te.payload,typeof we=="function"){se=we.call(pe,se,ne);break e}se=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Te.payload,ne=typeof we=="function"?we.call(pe,se,ne):we,ne==null)break e;se=de({},se,ne);break e;case 2:Ci=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,ne=f.effects,ne===null?f.effects=[P]:ne.push(P))}else pe={eventTime:pe,lane:ne,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ie===null?(W=ie=pe,j=se):ie=ie.next=pe,w|=ne;if(P=P.next,P===null){if(P=f.shared.pending,P===null)break;ne=P,P=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);if(ie===null&&(j=se),f.baseState=j,f.firstBaseUpdate=W,f.lastBaseUpdate=ie,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);Ps|=w,n.lanes=w,n.memoizedState=se}}function om(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Ra={},xr=xi(Ra),Aa=xi(Ra),ka=xi(Ra);function Ss(n){if(n===Ra)throw Error(t(174));return n}function bd(n,s){switch(ot(ka,s),ot(Aa,n),ot(xr,Ra),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:F(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=F(s,n)}ut(xr),ot(xr,s)}function Io(){ut(xr),ut(Aa),ut(ka)}function am(n){Ss(ka.current);var s=Ss(xr.current),a=F(s,n.type);s!==a&&(ot(Aa,n),ot(xr,a))}function jd(n){Aa.current===n&&(ut(xr),ut(Aa))}var pt=xi(0);function gu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dd=[];function Vd(){for(var n=0;n<Dd.length;n++)Dd[n]._workInProgressVersionPrimary=null;Dd.length=0}var yu=ue.ReactCurrentDispatcher,Od=ue.ReactCurrentBatchConfig,Cs=0,mt=null,Nt=null,Mt=null,vu=!1,Na=!1,ba=0,bw=0;function Jt(){throw Error(t(321))}function Ld(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!sr(n[a],s[a]))return!1;return!0}function Md(n,s,a,c,f,g){if(Cs=g,mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,yu.current=n===null||n.memoizedState===null?Ow:Lw,n=a(c,f),Na){g=0;do{if(Na=!1,ba=0,25<=g)throw Error(t(301));g+=1,Mt=Nt=null,s.updateQueue=null,yu.current=Mw,n=a(c,f)}while(Na)}if(yu.current=Eu,s=Nt!==null&&Nt.next!==null,Cs=0,Mt=Nt=mt=null,vu=!1,s)throw Error(t(300));return n}function Fd(){var n=ba!==0;return ba=0,n}function Ir(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?mt.memoizedState=Mt=n:Mt=Mt.next=n,Mt}function Bn(){if(Nt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var s=Mt===null?mt.memoizedState:Mt.next;if(s!==null)Mt=s,Nt=n;else{if(n===null)throw Error(t(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Mt===null?mt.memoizedState=Mt=n:Mt=Mt.next=n}return Mt}function ja(n,s){return typeof s=="function"?s(n):s}function Ud(n){var s=Bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Nt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var P=w=null,j=null,W=g;do{var ie=W.lane;if((Cs&ie)===ie)j!==null&&(j=j.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),c=W.hasEagerState?W.eagerState:n(c,W.action);else{var se={lane:ie,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};j===null?(P=j=se,w=c):j=j.next=se,mt.lanes|=ie,Ps|=ie}W=W.next}while(W!==null&&W!==g);j===null?w=c:j.next=P,sr(c,s.memoizedState)||(vn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=j,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,mt.lanes|=g,Ps|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function zd(n){var s=Bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);sr(g,s.memoizedState)||(vn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function lm(){}function um(n,s){var a=mt,c=Bn(),f=s(),g=!sr(c.memoizedState,f);if(g&&(c.memoizedState=f,vn=!0),c=c.queue,Bd(hm.bind(null,a,c,n),[n]),c.getSnapshot!==s||g||Mt!==null&&Mt.memoizedState.tag&1){if(a.flags|=2048,Da(9,dm.bind(null,a,c,f,s),void 0,null),Ft===null)throw Error(t(349));(Cs&30)!==0||cm(a,s,f)}return f}function cm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function dm(n,s,a,c){s.value=a,s.getSnapshot=c,fm(s)&&pm(n)}function hm(n,s,a){return a(function(){fm(s)&&pm(n)})}function fm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!sr(n,a)}catch{return!0}}function pm(n){var s=Kr(n,1);s!==null&&cr(s,n,1,-1)}function mm(n){var s=Ir();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:n},s.queue=n,n=n.dispatch=Vw.bind(null,mt,n),[s.memoizedState,n]}function Da(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function gm(){return Bn().memoizedState}function _u(n,s,a,c){var f=Ir();mt.flags|=n,f.memoizedState=Da(1|s,a,void 0,c===void 0?null:c)}function wu(n,s,a,c){var f=Bn();c=c===void 0?null:c;var g=void 0;if(Nt!==null){var w=Nt.memoizedState;if(g=w.destroy,c!==null&&Ld(c,w.deps)){f.memoizedState=Da(s,a,g,c);return}}mt.flags|=n,f.memoizedState=Da(1|s,a,g,c)}function ym(n,s){return _u(8390656,8,n,s)}function Bd(n,s){return wu(2048,8,n,s)}function vm(n,s){return wu(4,2,n,s)}function _m(n,s){return wu(4,4,n,s)}function wm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Em(n,s,a){return a=a!=null?a.concat([n]):null,wu(4,4,wm.bind(null,s,n),a)}function $d(){}function Tm(n,s){var a=Bn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Ld(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function xm(n,s){var a=Bn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Ld(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Im(n,s,a){return(Cs&21)===0?(n.baseState&&(n.baseState=!1,vn=!0),n.memoizedState=a):(sr(a,s)||(a=ms(),mt.lanes|=a,Ps|=a,n.baseState=!0),s)}function jw(n,s){var a=We;We=a!==0&&4>a?a:4,n(!0);var c=Od.transition;Od.transition={};try{n(!1),s()}finally{We=a,Od.transition=c}}function Sm(){return Bn().memoizedState}function Dw(n,s,a){var c=Ni(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Cm(n))Pm(s,a);else if(a=rm(n,s,a,c),a!==null){var f=cn();cr(a,n,c,f),Rm(a,s,c)}}function Vw(n,s,a){var c=Ni(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cm(n))Pm(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,P=g(w,a);if(f.hasEagerState=!0,f.eagerState=P,sr(P,w)){var j=s.interleaved;j===null?(f.next=f,kd(s)):(f.next=j.next,j.next=f),s.interleaved=f;return}}catch{}finally{}a=rm(n,s,f,c),a!==null&&(f=cn(),cr(a,n,c,f),Rm(a,s,c))}}function Cm(n){var s=n.alternate;return n===mt||s!==null&&s===mt}function Pm(n,s){Na=vu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Rm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,gi(n,a)}}var Eu={readContext:zn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},Ow={readContext:zn,useCallback:function(n,s){return Ir().memoizedState=[n,s===void 0?null:s],n},useContext:zn,useEffect:ym,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,_u(4194308,4,wm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return _u(4194308,4,n,s)},useInsertionEffect:function(n,s){return _u(4,2,n,s)},useMemo:function(n,s){var a=Ir();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Ir();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=Dw.bind(null,mt,n),[c.memoizedState,n]},useRef:function(n){var s=Ir();return n={current:n},s.memoizedState=n},useState:mm,useDebugValue:$d,useDeferredValue:function(n){return Ir().memoizedState=n},useTransition:function(){var n=mm(!1),s=n[0];return n=jw.bind(null,n[1]),Ir().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=mt,f=Ir();if(ft){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Ft===null)throw Error(t(349));(Cs&30)!==0||cm(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,ym(hm.bind(null,c,g,n),[n]),c.flags|=2048,Da(9,dm.bind(null,c,g,a,s),void 0,null),a},useId:function(){var n=Ir(),s=Ft.identifierPrefix;if(ft){var a=Gr,c=qr;a=(c&~(1<<32-an(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ba++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=bw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Lw={readContext:zn,useCallback:Tm,useContext:zn,useEffect:Bd,useImperativeHandle:Em,useInsertionEffect:vm,useLayoutEffect:_m,useMemo:xm,useReducer:Ud,useRef:gm,useState:function(){return Ud(ja)},useDebugValue:$d,useDeferredValue:function(n){var s=Bn();return Im(s,Nt.memoizedState,n)},useTransition:function(){var n=Ud(ja)[0],s=Bn().memoizedState;return[n,s]},useMutableSource:lm,useSyncExternalStore:um,useId:Sm,unstable_isNewReconciler:!1},Mw={readContext:zn,useCallback:Tm,useContext:zn,useEffect:Bd,useImperativeHandle:Em,useInsertionEffect:vm,useLayoutEffect:_m,useMemo:xm,useReducer:zd,useRef:gm,useState:function(){return zd(ja)},useDebugValue:$d,useDeferredValue:function(n){var s=Bn();return Nt===null?s.memoizedState=n:Im(s,Nt.memoizedState,n)},useTransition:function(){var n=zd(ja)[0],s=Bn().memoizedState;return[n,s]},useMutableSource:lm,useSyncExternalStore:um,useId:Sm,unstable_isNewReconciler:!1};function ar(n,s){if(n&&n.defaultProps){s=de({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Wd(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:de({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tu={isMounted:function(n){return(n=n._reactInternals)?Xn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=cn(),f=Ni(n),g=Qr(c,f);g.payload=s,a!=null&&(g.callback=a),s=Pi(n,g,f),s!==null&&(cr(s,n,f,c),pu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=cn(),f=Ni(n),g=Qr(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Pi(n,g,f),s!==null&&(cr(s,n,f,c),pu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=cn(),c=Ni(n),f=Qr(a,c);f.tag=2,s!=null&&(f.callback=s),s=Pi(n,f,c),s!==null&&(cr(s,n,c,a),pu(s,n,c))}};function Am(n,s,a,c,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!wa(a,c)||!wa(f,g):!0}function km(n,s,a){var c=!1,f=Ii,g=s.contextType;return typeof g=="object"&&g!==null?g=zn(g):(f=yn(s)?Es:Yt.current,c=s.contextTypes,g=(c=c!=null)?yo(n,f):Ii),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Nm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Tu.enqueueReplaceState(s,s.state,null)}function Hd(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Nd(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=zn(g):(g=yn(s)?Es:Yt.current,f.context=yo(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Wd(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Tu.enqueueReplaceState(f,f.state,null),mu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function So(n,s){try{var a="",c=s;do a+=Oe(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function qd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Gd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Fw=typeof WeakMap=="function"?WeakMap:Map;function bm(n,s,a){a=Qr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Au||(Au=!0,lh=c),Gd(n,s)},a}function jm(n,s,a){a=Qr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){Gd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Gd(n,s),typeof c!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Dm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Fw;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=Zw.bind(null,n,s,a),s.then(n,n))}function Vm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Om(n,s,a,c,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Qr(-1,1),s.tag=2,Pi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Uw=ue.ReactCurrentOwner,vn=!1;function un(n,s,a,c){s.child=n===null?nm(s,null,a,c):Eo(s,n.child,a,c)}function Lm(n,s,a,c,f){a=a.render;var g=s.ref;return xo(s,f),c=Md(n,s,a,c,g,f),a=Fd(),n!==null&&!vn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Yr(n,s,f)):(ft&&a&&Ed(s),s.flags|=1,un(n,s,c,f),s.child)}function Mm(n,s,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!mh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Fm(n,s,g,c,f)):(n=Vu(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:wa,a(w,c)&&n.ref===s.ref)return Yr(n,s,f)}return s.flags|=1,n=ji(g,c),n.ref=s.ref,n.return=s,s.child=n}function Fm(n,s,a,c,f){if(n!==null){var g=n.memoizedProps;if(wa(g,c)&&n.ref===s.ref)if(vn=!1,s.pendingProps=c=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(vn=!0);else return s.lanes=n.lanes,Yr(n,s,f)}return Kd(n,s,a,c,f)}function Um(n,s,a){var c=s.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Po,Nn),Nn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,ot(Po,Nn),Nn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,ot(Po,Nn),Nn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,ot(Po,Nn),Nn|=c;return un(n,s,f,a),s.child}function zm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Kd(n,s,a,c,f){var g=yn(a)?Es:Yt.current;return g=yo(s,g),xo(s,f),a=Md(n,s,a,c,g,f),c=Fd(),n!==null&&!vn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Yr(n,s,f)):(ft&&c&&Ed(s),s.flags|=1,un(n,s,a,f),s.child)}function Bm(n,s,a,c,f){if(yn(a)){var g=!0;ou(s)}else g=!1;if(xo(s,f),s.stateNode===null)Iu(n,s),km(s,a,c),Hd(s,a,c,f),c=!0;else if(n===null){var w=s.stateNode,P=s.memoizedProps;w.props=P;var j=w.context,W=a.contextType;typeof W=="object"&&W!==null?W=zn(W):(W=yn(a)?Es:Yt.current,W=yo(s,W));var ie=a.getDerivedStateFromProps,se=typeof ie=="function"||typeof w.getSnapshotBeforeUpdate=="function";se||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==c||j!==W)&&Nm(s,w,c,W),Ci=!1;var ne=s.memoizedState;w.state=ne,mu(s,c,w,f),j=s.memoizedState,P!==c||ne!==j||gn.current||Ci?(typeof ie=="function"&&(Wd(s,a,ie,c),j=s.memoizedState),(P=Ci||Am(s,a,P,c,ne,j,W))?(se||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=j),w.props=c,w.state=j,w.context=W,c=P):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,im(n,s),P=s.memoizedProps,W=s.type===s.elementType?P:ar(s.type,P),w.props=W,se=s.pendingProps,ne=w.context,j=a.contextType,typeof j=="object"&&j!==null?j=zn(j):(j=yn(a)?Es:Yt.current,j=yo(s,j));var pe=a.getDerivedStateFromProps;(ie=typeof pe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==se||ne!==j)&&Nm(s,w,c,j),Ci=!1,ne=s.memoizedState,w.state=ne,mu(s,c,w,f);var we=s.memoizedState;P!==se||ne!==we||gn.current||Ci?(typeof pe=="function"&&(Wd(s,a,pe,c),we=s.memoizedState),(W=Ci||Am(s,a,W,c,ne,we,j)||!1)?(ie||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,we,j),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,we,j)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=we),w.props=c,w.state=we,w.context=j,c=W):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),c=!1)}return Qd(n,s,a,c,g,f)}function Qd(n,s,a,c,f,g){zm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&Gp(s,a,!1),Yr(n,s,g);c=s.stateNode,Uw.current=s;var P=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=Eo(s,n.child,null,g),s.child=Eo(s,null,P,g)):un(n,s,P,g),s.memoizedState=c.state,f&&Gp(s,a,!0),s.child}function $m(n){var s=n.stateNode;s.pendingContext?Hp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Hp(n,s.context,!1),bd(n,s.containerInfo)}function Wm(n,s,a,c,f){return wo(),Sd(f),s.flags|=256,un(n,s,a,c),s.child}var Yd={dehydrated:null,treeContext:null,retryLane:0};function Jd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Hm(n,s,a){var c=s.pendingProps,f=pt.current,g=!1,w=(s.flags&128)!==0,P;if((P=w)||(P=n!==null&&n.memoizedState===null?!1:(f&2)!==0),P?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),ot(pt,f&1),n===null)return Id(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,g?(c=s.mode,g=s.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Ou(w,c,0,null),n=Ns(n,c,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=Jd(a),s.memoizedState=Yd,n):Xd(s,w));if(f=n.memoizedState,f!==null&&(P=f.dehydrated,P!==null))return zw(n,s,w,c,P,f,a);if(g){g=c.fallback,w=s.mode,f=n.child,P=f.sibling;var j={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=j,s.deletions=null):(c=ji(f,j),c.subtreeFlags=f.subtreeFlags&14680064),P!==null?g=ji(P,g):(g=Ns(g,w,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,w=n.child.memoizedState,w=w===null?Jd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,s.memoizedState=Yd,c}return g=n.child,n=g.sibling,c=ji(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Xd(n,s){return s=Ou({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function xu(n,s,a,c){return c!==null&&Sd(c),Eo(s,n.child,null,a),n=Xd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function zw(n,s,a,c,f,g,w){if(a)return s.flags&256?(s.flags&=-257,c=qd(Error(t(422))),xu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=Ou({mode:"visible",children:c.children},f,0,null),g=Ns(g,f,w,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&Eo(s,n.child,null,w),s.child.memoizedState=Jd(w),s.memoizedState=Yd,g);if((s.mode&1)===0)return xu(n,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var P=c.dgst;return c=P,g=Error(t(419)),c=qd(g,c,void 0),xu(n,s,w,c)}if(P=(w&n.childLanes)!==0,vn||P){if(c=Ft,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Kr(n,f),cr(c,n,f,-1))}return ph(),c=qd(Error(t(421))),xu(n,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=eE.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,kn=Ti(f.nextSibling),An=s,ft=!0,or=null,n!==null&&(Fn[Un++]=qr,Fn[Un++]=Gr,Fn[Un++]=Ts,qr=n.id,Gr=n.overflow,Ts=s),s=Xd(s,c.children),s.flags|=4096,s)}function qm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ad(n.return,s,a)}function Zd(n,s,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Gm(n,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(un(n,s,c.children,a),c=pt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&qm(n,a,s);else if(n.tag===19)qm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(ot(pt,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&gu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Zd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&gu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Zd(s,!0,a,null,g);break;case"together":Zd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Iu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Yr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ps|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=ji(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ji(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Bw(n,s,a){switch(s.tag){case 3:$m(s),wo();break;case 5:am(s);break;case 1:yn(s.type)&&ou(s);break;case 4:bd(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;ot(hu,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(ot(pt,pt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Hm(n,s,a):(ot(pt,pt.current&1),n=Yr(n,s,a),n!==null?n.sibling:null);ot(pt,pt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Gm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ot(pt,pt.current),c)break;return null;case 22:case 23:return s.lanes=0,Um(n,s,a)}return Yr(n,s,a)}var Km,eh,Qm,Ym;Km=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},eh=function(){},Qm=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Ss(xr.current);var g=null;switch(a){case"input":f=Vn(n,f),c=Vn(n,c),g=[];break;case"select":f=de({},f,{value:void 0}),c=de({},c,{value:void 0}),g=[];break;case"textarea":f=he(n,f),c=he(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ru)}Qn(a,c);var w;a=null;for(W in f)if(!c.hasOwnProperty(W)&&f.hasOwnProperty(W)&&f[W]!=null)if(W==="style"){var P=f[W];for(w in P)P.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?g||(g=[]):(g=g||[]).push(W,null));for(W in c){var j=c[W];if(P=f!=null?f[W]:void 0,c.hasOwnProperty(W)&&j!==P&&(j!=null||P!=null))if(W==="style")if(P){for(w in P)!P.hasOwnProperty(w)||j&&j.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in j)j.hasOwnProperty(w)&&P[w]!==j[w]&&(a||(a={}),a[w]=j[w])}else a||(g||(g=[]),g.push(W,a)),a=j;else W==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,P=P?P.__html:void 0,j!=null&&P!==j&&(g=g||[]).push(W,j)):W==="children"?typeof j!="string"&&typeof j!="number"||(g=g||[]).push(W,""+j):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(j!=null&&W==="onScroll"&&lt("scroll",n),g||P===j||(g=[])):(g=g||[]).push(W,j))}a&&(g=g||[]).push("style",a);var W=g;(s.updateQueue=W)&&(s.flags|=4)}},Ym=function(n,s,a,c){a!==c&&(s.flags|=4)};function Va(n,s){if(!ft)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Xt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function $w(n,s,a){var c=s.pendingProps;switch(Td(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(s),null;case 1:return yn(s.type)&&su(),Xt(s),null;case 3:return c=s.stateNode,Io(),ut(gn),ut(Yt),Vd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(cu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,or!==null&&(dh(or),or=null))),eh(n,s),Xt(s),null;case 5:jd(s);var f=Ss(ka.current);if(a=s.type,n!==null&&s.stateNode!=null)Qm(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Xt(s),null}if(n=Ss(xr.current),cu(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[Tr]=s,c[Sa]=g,n=(s.mode&1)!==0,a){case"dialog":lt("cancel",c),lt("close",c);break;case"iframe":case"object":case"embed":lt("load",c);break;case"video":case"audio":for(f=0;f<Ta.length;f++)lt(Ta[f],c);break;case"source":lt("error",c);break;case"img":case"image":case"link":lt("error",c),lt("load",c);break;case"details":lt("toggle",c);break;case"input":Gn(c,g),lt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},lt("invalid",c);break;case"textarea":Ae(c,g),lt("invalid",c)}Qn(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var P=g[w];w==="children"?typeof P=="string"?c.textContent!==P&&(g.suppressHydrationWarning!==!0&&nu(c.textContent,P,n),f=["children",P]):typeof P=="number"&&c.textContent!==""+P&&(g.suppressHydrationWarning!==!0&&nu(c.textContent,P,n),f=["children",""+P]):o.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&lt("scroll",c)}switch(a){case"input":dn(c),ui(c,g,!0);break;case"textarea":dn(c),ee(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=ru)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=H(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Tr]=s,n[Sa]=c,Km(n,s,!1,!1),s.stateNode=n;e:{switch(w=Or(a,c),a){case"dialog":lt("cancel",n),lt("close",n),f=c;break;case"iframe":case"object":case"embed":lt("load",n),f=c;break;case"video":case"audio":for(f=0;f<Ta.length;f++)lt(Ta[f],n);f=c;break;case"source":lt("error",n),f=c;break;case"img":case"image":case"link":lt("error",n),lt("load",n),f=c;break;case"details":lt("toggle",n),f=c;break;case"input":Gn(n,c),f=Vn(n,c),lt("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=de({},c,{value:void 0}),lt("invalid",n);break;case"textarea":Ae(n,c),f=he(n,c),lt("invalid",n);break;default:f=c}Qn(a,f),P=f;for(g in P)if(P.hasOwnProperty(g)){var j=P[g];g==="style"?Kn(n,j):g==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Qe(n,j)):g==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&at(n,j):typeof j=="number"&&at(n,""+j):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?j!=null&&g==="onScroll"&&lt("scroll",n):j!=null&&X(n,g,j,w))}switch(a){case"input":dn(n),ui(n,c,!1);break;case"textarea":dn(n),ee(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ue(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?ge(n,!!c.multiple,g,!1):c.defaultValue!=null&&ge(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=ru)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Xt(s),null;case 6:if(n&&s.stateNode!=null)Ym(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Ss(ka.current),Ss(xr.current),cu(s)){if(c=s.stateNode,a=s.memoizedProps,c[Tr]=s,(g=c.nodeValue!==a)&&(n=An,n!==null))switch(n.tag){case 3:nu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nu(c.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Tr]=s,s.stateNode=c}return Xt(s),null;case 13:if(ut(pt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ft&&kn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Zp(),wo(),s.flags|=98560,g=!1;else if(g=cu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Tr]=s}else wo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Xt(s),g=!1}else or!==null&&(dh(or),or=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(pt.current&1)!==0?bt===0&&(bt=3):ph())),s.updateQueue!==null&&(s.flags|=4),Xt(s),null);case 4:return Io(),eh(n,s),n===null&&xa(s.stateNode.containerInfo),Xt(s),null;case 10:return Rd(s.type._context),Xt(s),null;case 17:return yn(s.type)&&su(),Xt(s),null;case 19:if(ut(pt),g=s.memoizedState,g===null)return Xt(s),null;if(c=(s.flags&128)!==0,w=g.rendering,w===null)if(c)Va(g,!1);else{if(bt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=gu(n),w!==null){for(s.flags|=128,Va(g,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,n=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return ot(pt,pt.current&1|2),s.child}n=n.sibling}g.tail!==null&&st()>Ro&&(s.flags|=128,c=!0,Va(g,!1),s.lanes=4194304)}else{if(!c)if(n=gu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Va(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!ft)return Xt(s),null}else 2*st()-g.renderingStartTime>Ro&&a!==1073741824&&(s.flags|=128,c=!0,Va(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=st(),s.sibling=null,a=pt.current,ot(pt,c?a&1|2:a&1),s):(Xt(s),null);case 22:case 23:return fh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Nn&1073741824)!==0&&(Xt(s),s.subtreeFlags&6&&(s.flags|=8192)):Xt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Ww(n,s){switch(Td(s),s.tag){case 1:return yn(s.type)&&su(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Io(),ut(gn),ut(Yt),Vd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return jd(s),null;case 13:if(ut(pt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));wo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ut(pt),null;case 4:return Io(),null;case 10:return Rd(s.type._context),null;case 22:case 23:return fh(),null;case 24:return null;default:return null}}var Su=!1,Zt=!1,Hw=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Co(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){yt(n,s,c)}else a.current=null}function th(n,s,a){try{a()}catch(c){yt(n,s,c)}}var Jm=!1;function qw(n,s){if(fd=_i,n=Ap(),sd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,P=-1,j=-1,W=0,ie=0,se=n,ne=null;t:for(;;){for(var pe;se!==a||f!==0&&se.nodeType!==3||(P=w+f),se!==g||c!==0&&se.nodeType!==3||(j=w+c),se.nodeType===3&&(w+=se.nodeValue.length),(pe=se.firstChild)!==null;)ne=se,se=pe;for(;;){if(se===n)break t;if(ne===a&&++W===f&&(P=w),ne===g&&++ie===c&&(j=w),(pe=se.nextSibling)!==null)break;se=ne,ne=se.parentNode}se=pe}a=P===-1||j===-1?null:{start:P,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(pd={focusedElem:n,selectionRange:a},_i=!1,ve=s;ve!==null;)if(s=ve,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ve=n;else for(;ve!==null;){s=ve;try{var we=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Te=we.memoizedProps,Et=we.memoizedState,z=s.stateNode,D=z.getSnapshotBeforeUpdate(s.elementType===s.type?Te:ar(s.type,Te),Et);z.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){yt(s,s.return,oe)}if(n=s.sibling,n!==null){n.return=s.return,ve=n;break}ve=s.return}return we=Jm,Jm=!1,we}function Oa(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&th(s,a,g)}f=f.next}while(f!==c)}}function Cu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function nh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Xm(n){var s=n.alternate;s!==null&&(n.alternate=null,Xm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Tr],delete s[Sa],delete s[vd],delete s[Rw],delete s[Aw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Zm(n){return n.tag===5||n.tag===3||n.tag===4}function eg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Zm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ru));else if(c!==4&&(n=n.child,n!==null))for(rh(n,s,a),n=n.sibling;n!==null;)rh(n,s,a),n=n.sibling}function ih(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(ih(n,s,a),n=n.sibling;n!==null;)ih(n,s,a),n=n.sibling}var Wt=null,lr=!1;function Ri(n,s,a){for(a=a.child;a!==null;)tg(n,s,a),a=a.sibling}function tg(n,s,a){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(fs,a)}catch{}switch(a.tag){case 5:Zt||Co(a,s);case 6:var c=Wt,f=lr;Wt=null,Ri(n,s,a),Wt=c,lr=f,Wt!==null&&(lr?(n=Wt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Wt.removeChild(a.stateNode));break;case 18:Wt!==null&&(lr?(n=Wt,a=a.stateNode,n.nodeType===8?yd(n.parentNode,a):n.nodeType===1&&yd(n,a),rr(n)):yd(Wt,a.stateNode));break;case 4:c=Wt,f=lr,Wt=a.stateNode.containerInfo,lr=!0,Ri(n,s,a),Wt=c,lr=f;break;case 0:case 11:case 14:case 15:if(!Zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&th(a,s,w),f=f.next}while(f!==c)}Ri(n,s,a);break;case 1:if(!Zt&&(Co(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(P){yt(a,s,P)}Ri(n,s,a);break;case 21:Ri(n,s,a);break;case 22:a.mode&1?(Zt=(c=Zt)||a.memoizedState!==null,Ri(n,s,a),Zt=c):Ri(n,s,a);break;default:Ri(n,s,a)}}function ng(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Hw),s.forEach(function(c){var f=tE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function ur(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,w=s,P=w;e:for(;P!==null;){switch(P.tag){case 5:Wt=P.stateNode,lr=!1;break e;case 3:Wt=P.stateNode.containerInfo,lr=!0;break e;case 4:Wt=P.stateNode.containerInfo,lr=!0;break e}P=P.return}if(Wt===null)throw Error(t(160));tg(g,w,f),Wt=null,lr=!1;var j=f.alternate;j!==null&&(j.return=null),f.return=null}catch(W){yt(f,s,W)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)rg(s,n),s=s.sibling}function rg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ur(s,n),Sr(n),c&4){try{Oa(3,n,n.return),Cu(3,n)}catch(Te){yt(n,n.return,Te)}try{Oa(5,n,n.return)}catch(Te){yt(n,n.return,Te)}}break;case 1:ur(s,n),Sr(n),c&512&&a!==null&&Co(a,a.return);break;case 5:if(ur(s,n),Sr(n),c&512&&a!==null&&Co(a,a.return),n.flags&32){var f=n.stateNode;try{at(f,"")}catch(Te){yt(n,n.return,Te)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,P=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{P==="input"&&g.type==="radio"&&g.name!=null&&on(f,g),Or(P,w);var W=Or(P,g);for(w=0;w<j.length;w+=2){var ie=j[w],se=j[w+1];ie==="style"?Kn(f,se):ie==="dangerouslySetInnerHTML"?Qe(f,se):ie==="children"?at(f,se):X(f,ie,se,W)}switch(P){case"input":tt(f,g);break;case"textarea":C(f,g);break;case"select":var ne=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var pe=g.value;pe!=null?ge(f,!!g.multiple,pe,!1):ne!==!!g.multiple&&(g.defaultValue!=null?ge(f,!!g.multiple,g.defaultValue,!0):ge(f,!!g.multiple,g.multiple?[]:"",!1))}f[Sa]=g}catch(Te){yt(n,n.return,Te)}}break;case 6:if(ur(s,n),Sr(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(Te){yt(n,n.return,Te)}}break;case 3:if(ur(s,n),Sr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{rr(s.containerInfo)}catch(Te){yt(n,n.return,Te)}break;case 4:ur(s,n),Sr(n);break;case 13:ur(s,n),Sr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(ah=st())),c&4&&ng(n);break;case 22:if(ie=a!==null&&a.memoizedState!==null,n.mode&1?(Zt=(W=Zt)||ie,ur(s,n),Zt=W):ur(s,n),Sr(n),c&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!ie&&(n.mode&1)!==0)for(ve=n,ie=n.child;ie!==null;){for(se=ve=ie;ve!==null;){switch(ne=ve,pe=ne.child,ne.tag){case 0:case 11:case 14:case 15:Oa(4,ne,ne.return);break;case 1:Co(ne,ne.return);var we=ne.stateNode;if(typeof we.componentWillUnmount=="function"){c=ne,a=ne.return;try{s=c,we.props=s.memoizedProps,we.state=s.memoizedState,we.componentWillUnmount()}catch(Te){yt(c,a,Te)}}break;case 5:Co(ne,ne.return);break;case 22:if(ne.memoizedState!==null){og(se);continue}}pe!==null?(pe.return=ne,ve=pe):og(se)}ie=ie.sibling}e:for(ie=null,se=n;;){if(se.tag===5){if(ie===null){ie=se;try{f=se.stateNode,W?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(P=se.stateNode,j=se.memoizedProps.style,w=j!=null&&j.hasOwnProperty("display")?j.display:null,P.style.display=Ot("display",w))}catch(Te){yt(n,n.return,Te)}}}else if(se.tag===6){if(ie===null)try{se.stateNode.nodeValue=W?"":se.memoizedProps}catch(Te){yt(n,n.return,Te)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===n)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===n)break e;for(;se.sibling===null;){if(se.return===null||se.return===n)break e;ie===se&&(ie=null),se=se.return}ie===se&&(ie=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:ur(s,n),Sr(n),c&4&&ng(n);break;case 21:break;default:ur(s,n),Sr(n)}}function Sr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Zm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(at(f,""),c.flags&=-33);var g=eg(n);ih(n,g,f);break;case 3:case 4:var w=c.stateNode.containerInfo,P=eg(n);rh(n,P,w);break;default:throw Error(t(161))}}catch(j){yt(n,n.return,j)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Gw(n,s,a){ve=n,ig(n)}function ig(n,s,a){for(var c=(n.mode&1)!==0;ve!==null;){var f=ve,g=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Su;if(!w){var P=f.alternate,j=P!==null&&P.memoizedState!==null||Zt;P=Su;var W=Zt;if(Su=w,(Zt=j)&&!W)for(ve=f;ve!==null;)w=ve,j=w.child,w.tag===22&&w.memoizedState!==null?ag(f):j!==null?(j.return=w,ve=j):ag(f);for(;g!==null;)ve=g,ig(g),g=g.sibling;ve=f,Su=P,Zt=W}sg(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ve=g):sg(n)}}function sg(n){for(;ve!==null;){var s=ve;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Zt||Cu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Zt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:ar(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&om(s,g,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}om(s,w,a)}break;case 5:var P=s.stateNode;if(a===null&&s.flags&4){a=P;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var W=s.alternate;if(W!==null){var ie=W.memoizedState;if(ie!==null){var se=ie.dehydrated;se!==null&&rr(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zt||s.flags&512&&nh(s)}catch(ne){yt(s,s.return,ne)}}if(s===n){ve=null;break}if(a=s.sibling,a!==null){a.return=s.return,ve=a;break}ve=s.return}}function og(n){for(;ve!==null;){var s=ve;if(s===n){ve=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ve=a;break}ve=s.return}}function ag(n){for(;ve!==null;){var s=ve;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Cu(4,s)}catch(j){yt(s,a,j)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(j){yt(s,f,j)}}var g=s.return;try{nh(s)}catch(j){yt(s,g,j)}break;case 5:var w=s.return;try{nh(s)}catch(j){yt(s,w,j)}}}catch(j){yt(s,s.return,j)}if(s===n){ve=null;break}var P=s.sibling;if(P!==null){P.return=s.return,ve=P;break}ve=s.return}}var Kw=Math.ceil,Pu=ue.ReactCurrentDispatcher,sh=ue.ReactCurrentOwner,$n=ue.ReactCurrentBatchConfig,Ke=0,Ft=null,St=null,Ht=0,Nn=0,Po=xi(0),bt=0,La=null,Ps=0,Ru=0,oh=0,Ma=null,_n=null,ah=0,Ro=1/0,Jr=null,Au=!1,lh=null,Ai=null,ku=!1,ki=null,Nu=0,Fa=0,uh=null,bu=-1,ju=0;function cn(){return(Ke&6)!==0?st():bu!==-1?bu:bu=st()}function Ni(n){return(n.mode&1)===0?1:(Ke&2)!==0&&Ht!==0?Ht&-Ht:Nw.transition!==null?(ju===0&&(ju=ms()),ju):(n=We,n!==0||(n=window.event,n=n===void 0?16:fa(n.type)),n)}function cr(n,s,a,c){if(50<Fa)throw Fa=0,uh=null,Error(t(185));mi(n,a,c),((Ke&2)===0||n!==Ft)&&(n===Ft&&((Ke&2)===0&&(Ru|=a),bt===4&&bi(n,Ht)),wn(n,c),a===1&&Ke===0&&(s.mode&1)===0&&(Ro=st()+500,au&&Si()))}function wn(n,s){var a=n.callbackNode;Fr(n,s);var c=ps(n,n===Ft?Ht:0);if(c===0)a!==null&&la(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&la(a),s===1)n.tag===0?kw(ug.bind(null,n)):Kp(ug.bind(null,n)),Cw(function(){(Ke&6)===0&&Si()}),a=null;else{switch(yi(c)){case 1:a=hs;break;case 4:a=hi;break;case 16:a=On;break;case 536870912:a=jl;break;default:a=On}a=yg(a,lg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function lg(n,s){if(bu=-1,ju=0,(Ke&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Ao()&&n.callbackNode!==a)return null;var c=ps(n,n===Ft?Ht:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Du(n,c);else{s=c;var f=Ke;Ke|=2;var g=dg();(Ft!==n||Ht!==s)&&(Jr=null,Ro=st()+500,As(n,s));do try{Jw();break}catch(P){cg(n,P)}while(!0);Pd(),Pu.current=g,Ke=f,St!==null?s=0:(Ft=null,Ht=0,s=bt)}if(s!==0){if(s===2&&(f=Cn(n),f!==0&&(c=f,s=ch(n,f))),s===1)throw a=La,As(n,0),bi(n,c),wn(n,st()),a;if(s===6)bi(n,c);else{if(f=n.current.alternate,(c&30)===0&&!Qw(f)&&(s=Du(n,c),s===2&&(g=Cn(n),g!==0&&(c=g,s=ch(n,g))),s===1))throw a=La,As(n,0),bi(n,c),wn(n,st()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ks(n,_n,Jr);break;case 3:if(bi(n,c),(c&130023424)===c&&(s=ah+500-st(),10<s)){if(ps(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){cn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=gd(ks.bind(null,n,_n,Jr),s);break}ks(n,_n,Jr);break;case 4:if(bi(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var w=31-an(c);g=1<<w,w=s[w],w>f&&(f=w),c&=~g}if(c=f,c=st()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Kw(c/1960))-c,10<c){n.timeoutHandle=gd(ks.bind(null,n,_n,Jr),c);break}ks(n,_n,Jr);break;case 5:ks(n,_n,Jr);break;default:throw Error(t(329))}}}return wn(n,st()),n.callbackNode===a?lg.bind(null,n):null}function ch(n,s){var a=Ma;return n.current.memoizedState.isDehydrated&&(As(n,s).flags|=256),n=Du(n,s),n!==2&&(s=_n,_n=a,s!==null&&dh(s)),n}function dh(n){_n===null?_n=n:_n.push.apply(_n,n)}function Qw(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!sr(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bi(n,s){for(s&=~oh,s&=~Ru,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-an(s),c=1<<a;n[a]=-1,s&=~c}}function ug(n){if((Ke&6)!==0)throw Error(t(327));Ao();var s=ps(n,0);if((s&1)===0)return wn(n,st()),null;var a=Du(n,s);if(n.tag!==0&&a===2){var c=Cn(n);c!==0&&(s=c,a=ch(n,c))}if(a===1)throw a=La,As(n,0),bi(n,s),wn(n,st()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ks(n,_n,Jr),wn(n,st()),null}function hh(n,s){var a=Ke;Ke|=1;try{return n(s)}finally{Ke=a,Ke===0&&(Ro=st()+500,au&&Si())}}function Rs(n){ki!==null&&ki.tag===0&&(Ke&6)===0&&Ao();var s=Ke;Ke|=1;var a=$n.transition,c=We;try{if($n.transition=null,We=1,n)return n()}finally{We=c,$n.transition=a,Ke=s,(Ke&6)===0&&Si()}}function fh(){Nn=Po.current,ut(Po)}function As(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Sw(a)),St!==null)for(a=St.return;a!==null;){var c=a;switch(Td(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&su();break;case 3:Io(),ut(gn),ut(Yt),Vd();break;case 5:jd(c);break;case 4:Io();break;case 13:ut(pt);break;case 19:ut(pt);break;case 10:Rd(c.type._context);break;case 22:case 23:fh()}a=a.return}if(Ft=n,St=n=ji(n.current,null),Ht=Nn=s,bt=0,La=null,oh=Ru=Ps=0,_n=Ma=null,Is!==null){for(s=0;s<Is.length;s++)if(a=Is[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,c.next=w}a.pending=c}Is=null}return n}function cg(n,s){do{var a=St;try{if(Pd(),yu.current=Eu,vu){for(var c=mt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}vu=!1}if(Cs=0,Mt=Nt=mt=null,Na=!1,ba=0,sh.current=null,a===null||a.return===null){bt=1,La=s,St=null;break}e:{var g=n,w=a.return,P=a,j=s;if(s=Ht,P.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var W=j,ie=P,se=ie.tag;if((ie.mode&1)===0&&(se===0||se===11||se===15)){var ne=ie.alternate;ne?(ie.updateQueue=ne.updateQueue,ie.memoizedState=ne.memoizedState,ie.lanes=ne.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var pe=Vm(w);if(pe!==null){pe.flags&=-257,Om(pe,w,P,g,s),pe.mode&1&&Dm(g,W,s),s=pe,j=W;var we=s.updateQueue;if(we===null){var Te=new Set;Te.add(j),s.updateQueue=Te}else we.add(j);break e}else{if((s&1)===0){Dm(g,W,s),ph();break e}j=Error(t(426))}}else if(ft&&P.mode&1){var Et=Vm(w);if(Et!==null){(Et.flags&65536)===0&&(Et.flags|=256),Om(Et,w,P,g,s),Sd(So(j,P));break e}}g=j=So(j,P),bt!==4&&(bt=2),Ma===null?Ma=[g]:Ma.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var z=bm(g,j,s);sm(g,z);break e;case 1:P=j;var D=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Ai===null||!Ai.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var oe=jm(g,P,s);sm(g,oe);break e}}g=g.return}while(g!==null)}fg(a)}catch(Ie){s=Ie,St===a&&a!==null&&(St=a=a.return);continue}break}while(!0)}function dg(){var n=Pu.current;return Pu.current=Eu,n===null?Eu:n}function ph(){(bt===0||bt===3||bt===2)&&(bt=4),Ft===null||(Ps&268435455)===0&&(Ru&268435455)===0||bi(Ft,Ht)}function Du(n,s){var a=Ke;Ke|=2;var c=dg();(Ft!==n||Ht!==s)&&(Jr=null,As(n,s));do try{Yw();break}catch(f){cg(n,f)}while(!0);if(Pd(),Ke=a,Pu.current=c,St!==null)throw Error(t(261));return Ft=null,Ht=0,bt}function Yw(){for(;St!==null;)hg(St)}function Jw(){for(;St!==null&&!Nl();)hg(St)}function hg(n){var s=gg(n.alternate,n,Nn);n.memoizedProps=n.pendingProps,s===null?fg(n):St=s,sh.current=null}function fg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=$w(a,s,Nn),a!==null){St=a;return}}else{if(a=Ww(a,s),a!==null){a.flags&=32767,St=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{bt=6,St=null;return}}if(s=s.sibling,s!==null){St=s;return}St=s=n}while(s!==null);bt===0&&(bt=5)}function ks(n,s,a){var c=We,f=$n.transition;try{$n.transition=null,We=1,Xw(n,s,a,c)}finally{$n.transition=f,We=c}return null}function Xw(n,s,a,c){do Ao();while(ki!==null);if((Ke&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(it(n,g),n===Ft&&(St=Ft=null,Ht=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ku||(ku=!0,yg(On,function(){return Ao(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=$n.transition,$n.transition=null;var w=We;We=1;var P=Ke;Ke|=4,sh.current=null,qw(n,a),rg(a,n),vw(pd),_i=!!fd,pd=fd=null,n.current=a,Gw(a),Jc(),Ke=P,We=w,$n.transition=g}else n.current=a;if(ku&&(ku=!1,ki=n,Nu=f),g=n.pendingLanes,g===0&&(Ai=null),Dl(a.stateNode),wn(n,st()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Au)throw Au=!1,n=lh,lh=null,n;return(Nu&1)!==0&&n.tag!==0&&Ao(),g=n.pendingLanes,(g&1)!==0?n===uh?Fa++:(Fa=0,uh=n):Fa=0,Si(),null}function Ao(){if(ki!==null){var n=yi(Nu),s=$n.transition,a=We;try{if($n.transition=null,We=16>n?16:n,ki===null)var c=!1;else{if(n=ki,ki=null,Nu=0,(Ke&6)!==0)throw Error(t(331));var f=Ke;for(Ke|=4,ve=n.current;ve!==null;){var g=ve,w=g.child;if((ve.flags&16)!==0){var P=g.deletions;if(P!==null){for(var j=0;j<P.length;j++){var W=P[j];for(ve=W;ve!==null;){var ie=ve;switch(ie.tag){case 0:case 11:case 15:Oa(8,ie,g)}var se=ie.child;if(se!==null)se.return=ie,ve=se;else for(;ve!==null;){ie=ve;var ne=ie.sibling,pe=ie.return;if(Xm(ie),ie===W){ve=null;break}if(ne!==null){ne.return=pe,ve=ne;break}ve=pe}}}var we=g.alternate;if(we!==null){var Te=we.child;if(Te!==null){we.child=null;do{var Et=Te.sibling;Te.sibling=null,Te=Et}while(Te!==null)}}ve=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,ve=w;else e:for(;ve!==null;){if(g=ve,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Oa(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,ve=z;break e}ve=g.return}}var D=n.current;for(ve=D;ve!==null;){w=ve;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,ve=B;else e:for(w=D;ve!==null;){if(P=ve,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Cu(9,P)}}catch(Ie){yt(P,P.return,Ie)}if(P===w){ve=null;break e}var oe=P.sibling;if(oe!==null){oe.return=P.return,ve=oe;break e}ve=P.return}}if(Ke=f,Si(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(fs,n)}catch{}c=!0}return c}finally{We=a,$n.transition=s}}return!1}function pg(n,s,a){s=So(a,s),s=bm(n,s,1),n=Pi(n,s,1),s=cn(),n!==null&&(mi(n,1,s),wn(n,s))}function yt(n,s,a){if(n.tag===3)pg(n,n,a);else for(;s!==null;){if(s.tag===3){pg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ai===null||!Ai.has(c))){n=So(a,n),n=jm(s,n,1),s=Pi(s,n,1),n=cn(),s!==null&&(mi(s,1,n),wn(s,n));break}}s=s.return}}function Zw(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=cn(),n.pingedLanes|=n.suspendedLanes&a,Ft===n&&(Ht&a)===a&&(bt===4||bt===3&&(Ht&130023424)===Ht&&500>st()-ah?As(n,0):oh|=a),wn(n,s)}function mg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Js,Js<<=1,(Js&130023424)===0&&(Js=4194304)));var a=cn();n=Kr(n,s),n!==null&&(mi(n,s,a),wn(n,a))}function eE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),mg(n,a)}function tE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),mg(n,a)}var gg;gg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||gn.current)vn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return vn=!1,Bw(n,s,a);vn=(n.flags&131072)!==0}else vn=!1,ft&&(s.flags&1048576)!==0&&Qp(s,uu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Iu(n,s),n=s.pendingProps;var f=yo(s,Yt.current);xo(s,a),f=Md(null,s,c,n,f,a);var g=Fd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,yn(c)?(g=!0,ou(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Nd(s),f.updater=Tu,s.stateNode=f,f._reactInternals=s,Hd(s,c,n,a),s=Qd(null,s,c,!0,g,a)):(s.tag=0,ft&&g&&Ed(s),un(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Iu(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=rE(c),n=ar(c,n),f){case 0:s=Kd(null,s,c,n,a);break e;case 1:s=Bm(null,s,c,n,a);break e;case 11:s=Lm(null,s,c,n,a);break e;case 14:s=Mm(null,s,c,ar(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:ar(c,f),Kd(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:ar(c,f),Bm(n,s,c,f,a);case 3:e:{if($m(s),n===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,im(n,s),mu(s,c,null,a);var w=s.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=So(Error(t(423)),s),s=Wm(n,s,c,a,f);break e}else if(c!==f){f=So(Error(t(424)),s),s=Wm(n,s,c,a,f);break e}else for(kn=Ti(s.stateNode.containerInfo.firstChild),An=s,ft=!0,or=null,a=nm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(wo(),c===f){s=Yr(n,s,a);break e}un(n,s,c,a)}s=s.child}return s;case 5:return am(s),n===null&&Id(s),c=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,w=f.children,md(c,f)?w=null:g!==null&&md(c,g)&&(s.flags|=32),zm(n,s),un(n,s,w,a),s.child;case 6:return n===null&&Id(s),null;case 13:return Hm(n,s,a);case 4:return bd(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Eo(s,null,c,a):un(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:ar(c,f),Lm(n,s,c,f,a);case 7:return un(n,s,s.pendingProps,a),s.child;case 8:return un(n,s,s.pendingProps.children,a),s.child;case 12:return un(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,ot(hu,c._currentValue),c._currentValue=w,g!==null)if(sr(g.value,w)){if(g.children===f.children&&!gn.current){s=Yr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var P=g.dependencies;if(P!==null){w=g.child;for(var j=P.firstContext;j!==null;){if(j.context===c){if(g.tag===1){j=Qr(-1,a&-a),j.tag=2;var W=g.updateQueue;if(W!==null){W=W.shared;var ie=W.pending;ie===null?j.next=j:(j.next=ie.next,ie.next=j),W.pending=j}}g.lanes|=a,j=g.alternate,j!==null&&(j.lanes|=a),Ad(g.return,a,s),P.lanes|=a;break}j=j.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,P=w.alternate,P!==null&&(P.lanes|=a),Ad(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}un(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,xo(s,a),f=zn(f),c=c(f),s.flags|=1,un(n,s,c,a),s.child;case 14:return c=s.type,f=ar(c,s.pendingProps),f=ar(c.type,f),Mm(n,s,c,f,a);case 15:return Fm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:ar(c,f),Iu(n,s),s.tag=1,yn(c)?(n=!0,ou(s)):n=!1,xo(s,a),km(s,c,f),Hd(s,c,f,a),Qd(null,s,c,!0,n,a);case 19:return Gm(n,s,a);case 22:return Um(n,s,a)}throw Error(t(156,s.tag))};function yg(n,s){return Qs(n,s)}function nE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(n,s,a,c){return new nE(n,s,a,c)}function mh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rE(n){if(typeof n=="function")return mh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===N)return 11;if(n===et)return 14}return 2}function ji(n,s){var a=n.alternate;return a===null?(a=Wn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vu(n,s,a,c,f,g){var w=2;if(c=n,typeof n=="function")mh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case b:return Ns(a.children,f,g,s);case I:w=8,f|=8;break;case A:return n=Wn(12,a,s,f|2),n.elementType=A,n.lanes=g,n;case R:return n=Wn(13,a,s,f),n.elementType=R,n.lanes=g,n;case Je:return n=Wn(19,a,s,f),n.elementType=Je,n.lanes=g,n;case Ge:return Ou(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:w=10;break e;case V:w=9;break e;case N:w=11;break e;case et:w=14;break e;case _t:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Wn(w,a,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function Ns(n,s,a,c){return n=Wn(7,n,c,s),n.lanes=a,n}function Ou(n,s,a,c){return n=Wn(22,n,c,s),n.elementType=Ge,n.lanes=a,n.stateNode={isHidden:!1},n}function gh(n,s,a){return n=Wn(6,n,null,s),n.lanes=a,n}function yh(n,s,a){return s=Wn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function iE(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pi(0),this.expirationTimes=pi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function vh(n,s,a,c,f,g,w,P,j){return n=new iE(n,s,a,P,j),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Wn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nd(g),n}function sE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function vg(n){if(!n)return Ii;n=n._reactInternals;e:{if(Xn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(yn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(yn(a))return qp(n,a,s)}return s}function _g(n,s,a,c,f,g,w,P,j){return n=vh(a,c,!0,n,f,g,w,P,j),n.context=vg(null),a=n.current,c=cn(),f=Ni(a),g=Qr(c,f),g.callback=s??null,Pi(a,g,f),n.current.lanes=f,mi(n,f,c),wn(n,c),n}function Lu(n,s,a,c){var f=s.current,g=cn(),w=Ni(f);return a=vg(a),s.context===null?s.context=a:s.pendingContext=a,s=Qr(g,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Pi(f,s,w),n!==null&&(cr(n,f,w,g),pu(n,f,w)),w}function Mu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function _h(n,s){wg(n,s),(n=n.alternate)&&wg(n,s)}function oE(){return null}var Eg=typeof reportError=="function"?reportError:function(n){console.error(n)};function wh(n){this._internalRoot=n}Fu.prototype.render=wh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Lu(n,s,null,null)},Fu.prototype.unmount=wh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Rs(function(){Lu(null,n,null,null)}),s[Wr]=null}};function Fu(n){this._internalRoot=n}Fu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Fl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<vr.length&&s!==0&&s<vr[a].priority;a++);vr.splice(a,0,n),a===0&&Bl(n)}};function Eh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function aE(n,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var W=Mu(w);g.call(W)}}var w=_g(s,c,n,0,null,!1,!1,"",Tg);return n._reactRootContainer=w,n[Wr]=w.current,xa(n.nodeType===8?n.parentNode:n),Rs(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var P=c;c=function(){var W=Mu(j);P.call(W)}}var j=vh(n,0,!1,null,null,!1,!1,"",Tg);return n._reactRootContainer=j,n[Wr]=j.current,xa(n.nodeType===8?n.parentNode:n),Rs(function(){Lu(s,j,a,c)}),j}function zu(n,s,a,c,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var P=f;f=function(){var j=Mu(w);P.call(j)}}Lu(s,w,n,f)}else w=aE(a,s,n,f,c);return Mu(w)}Ll=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=fi(s.pendingLanes);a!==0&&(gi(s,a|1),wn(s,st()),(Ke&6)===0&&(Ro=st()+500,Si()))}break;case 13:Rs(function(){var c=Kr(n,1);if(c!==null){var f=cn();cr(c,n,1,f)}}),_h(n,1)}},Xs=function(n){if(n.tag===13){var s=Kr(n,134217728);if(s!==null){var a=cn();cr(s,n,134217728,a)}_h(n,134217728)}},Ml=function(n){if(n.tag===13){var s=Ni(n),a=Kr(n,s);if(a!==null){var c=cn();cr(a,n,s,c)}_h(n,s)}},Fl=function(){return We},Ul=function(n,s){var a=We;try{return We=n,s()}finally{We=a}},di=function(n,s,a){switch(s){case"input":if(tt(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=iu(c);if(!f)throw Error(t(90));sn(c),tt(c,f)}}}break;case"textarea":C(n,a);break;case"select":s=a.value,s!=null&&ge(n,!!a.multiple,s,!1)}},ls=hh,ia=Rs;var lE={usingClientEntryPoint:!1,Events:[Ca,mo,iu,gr,ra,hh]},Ua={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uE={bundleType:Ua.bundleType,version:Ua.version,rendererPackageName:Ua.rendererPackageName,rendererConfig:Ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=aa(n),n===null?null:n.stateNode},findFiberByHostInstance:Ua.findFiberByHostInstance||oE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{fs=Bu.inject(uE),Sn=Bu}catch{}}return En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lE,En.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eh(s))throw Error(t(200));return sE(n,s,null,a)},En.createRoot=function(n,s){if(!Eh(n))throw Error(t(299));var a=!1,c="",f=Eg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=vh(n,1,!1,null,null,a,!1,c,f),n[Wr]=s.current,xa(n.nodeType===8?n.parentNode:n),new wh(s)},En.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=aa(s),n=n===null?null:n.stateNode,n},En.flushSync=function(n){return Rs(n)},En.hydrate=function(n,s,a){if(!Uu(s))throw Error(t(200));return zu(null,n,s,!0,a)},En.hydrateRoot=function(n,s,a){if(!Eh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",w=Eg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=_g(s,null,n,1,a??null,f,!1,g,w),n[Wr]=s.current,xa(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Fu(s)},En.render=function(n,s,a){if(!Uu(s))throw Error(t(200));return zu(null,n,s,!1,a)},En.unmountComponentAtNode=function(n){if(!Uu(n))throw Error(t(40));return n._reactRootContainer?(Rs(function(){zu(null,null,n,!1,function(){n._reactRootContainer=null,n[Wr]=null})}),!0):!1},En.unstable_batchedUpdates=hh,En.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Uu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return zu(n,s,a,!1,c)},En.version="18.3.1-next-f1338f8080-20240426",En}var kg;function Ev(){if(kg)return Ih.exports;kg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ih.exports=vE(),Ih.exports}var Ng;function _E(){if(Ng)return $u;Ng=1;var r=Ev();return $u.createRoot=r.createRoot,$u.hydrateRoot=r.hydrateRoot,$u}var wE=_E();const EE=_v(wE);Ev();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sl(){return sl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},sl.apply(this,arguments)}var Fi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Fi||(Fi={}));const bg="popstate";function TE(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:d,hash:p}=i.location;return Bh("",{pathname:l,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:oc(o)}return IE(e,t,null,r)}function xt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function _f(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xE(){return Math.random().toString(36).substr(2,8)}function jg(r,e){return{usr:r.state,key:r.key,idx:e}}function Bh(r,e,t,i){return t===void 0&&(t=null),sl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Go(e):e,{state:t,key:e&&e.key||i||xE()})}function oc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Go(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function IE(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,p=Fi.Pop,y=null,v=E();v==null&&(v=0,d.replaceState(sl({},d.state,{idx:v}),""));function E(){return(d.state||{idx:null}).idx}function x(){p=Fi.Pop;let L=E(),K=L==null?null:L-v;v=L,y&&y({action:p,location:Y.location,delta:K})}function S(L,K){p=Fi.Push;let $=Bh(Y.location,L,K);v=E()+1;let X=jg($,v),ue=Y.createHref($);try{d.pushState(X,"",ue)}catch(Ee){if(Ee instanceof DOMException&&Ee.name==="DataCloneError")throw Ee;o.location.assign(ue)}l&&y&&y({action:p,location:Y.location,delta:1})}function M(L,K){p=Fi.Replace;let $=Bh(Y.location,L,K);v=E();let X=jg($,v),ue=Y.createHref($);d.replaceState(X,"",ue),l&&y&&y({action:p,location:Y.location,delta:0})}function q(L){let K=o.location.origin!=="null"?o.location.origin:o.location.href,$=typeof L=="string"?L:oc(L);return $=$.replace(/ $/,"%20"),xt(K,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,K)}let Y={get action(){return p},get location(){return r(o,d)},listen(L){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(bg,x),y=L,()=>{o.removeEventListener(bg,x),y=null}},createHref(L){return e(o,L)},createURL:q,encodeLocation(L){let K=q(L);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:S,replace:M,go(L){return d.go(L)}};return Y}var Dg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Dg||(Dg={}));function SE(r,e,t){return t===void 0&&(t="/"),CE(r,e,t)}function CE(r,e,t,i){let o=typeof e=="string"?Go(e):e,l=wf(o.pathname||"/",t);if(l==null)return null;let d=Tv(r);PE(d);let p=null;for(let y=0;p==null&&y<d.length;++y){let v=FE(l);p=OE(d[y],v)}return p}function Tv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,d,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};y.relativePath.startsWith("/")&&(xt(y.relativePath.startsWith(i),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(i.length));let v=zi([i,y.relativePath]),E=t.concat(y);l.children&&l.children.length>0&&(xt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Tv(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:DE(v,l.index),routesMeta:E})};return r.forEach((l,d)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,d);else for(let y of xv(l.path))o(l,d,y)}),e}function xv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=xv(i.join("/")),p=[];return p.push(...d.map(y=>y===""?l:[l,y].join("/"))),o&&p.push(...d),p.map(y=>r.startsWith("/")&&y===""?"/":y)}function PE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:VE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const RE=/^:[\w-]+$/,AE=3,kE=2,NE=1,bE=10,jE=-2,Vg=r=>r==="*";function DE(r,e){let t=r.split("/"),i=t.length;return t.some(Vg)&&(i+=jE),e&&(i+=kE),t.filter(o=>!Vg(o)).reduce((o,l)=>o+(RE.test(l)?AE:l===""?NE:bE),i)}function VE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function OE(r,e,t){let{routesMeta:i}=r,o={},l="/",d=[];for(let p=0;p<i.length;++p){let y=i[p],v=p===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",x=LE({path:y.relativePath,caseSensitive:y.caseSensitive,end:v},E),S=y.route;if(!x)return null;Object.assign(o,x.params),d.push({params:o,pathname:zi([l,x.pathname]),pathnameBase:WE(zi([l,x.pathnameBase])),route:S}),x.pathnameBase!=="/"&&(l=zi([l,x.pathnameBase]))}return d}function LE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=ME(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((v,E,x)=>{let{paramName:S,isOptional:M}=E;if(S==="*"){let Y=p[x]||"";d=l.slice(0,l.length-Y.length).replace(/(.)\/+$/,"$1")}const q=p[x];return M&&!q?v[S]=void 0:v[S]=(q||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function ME(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),_f(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,y)=>(i.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function FE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _f(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function wf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const UE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zE=r=>UE.test(r);function BE(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?Go(r):r,l;if(t)if(zE(t))l=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),_f(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+t))}t.startsWith("/")?l=Og(t.substring(1),"/"):l=Og(t,e)}else l=e;return{pathname:l,search:HE(i),hash:qE(o)}}function Og(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Ph(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $E(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ef(r,e){let t=$E(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Tf(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=Go(r):(o=sl({},r),xt(!o.pathname||!o.pathname.includes("?"),Ph("?","pathname","search",o)),xt(!o.pathname||!o.pathname.includes("#"),Ph("#","pathname","hash",o)),xt(!o.search||!o.search.includes("#"),Ph("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,p;if(d==null)p=t;else{let x=e.length-1;if(!i&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),x-=1;o.pathname=S.join("/")}p=x>=0?e[x]:"/"}let y=BE(o,p),v=d&&d!=="/"&&d.endsWith("/"),E=(l||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(v||E)&&(y.pathname+="/"),y}const zi=r=>r.join("/").replace(/\/\/+/g,"/"),WE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),HE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,qE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function GE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Iv=["post","put","patch","delete"];new Set(Iv);const KE=["get",...Iv];new Set(KE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ol.apply(this,arguments)}const xf=Q.createContext(null),QE=Q.createContext(null),ts=Q.createContext(null),Pc=Q.createContext(null),ns=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),Sv=Q.createContext(null);function YE(r,e){let{relative:t}=e===void 0?{}:e;Ko()||xt(!1);let{basename:i,navigator:o}=Q.useContext(ts),{hash:l,pathname:d,search:p}=Pv(r,{relative:t}),y=d;return i!=="/"&&(y=d==="/"?i:zi([i,d])),o.createHref({pathname:y,search:p,hash:l})}function Ko(){return Q.useContext(Pc)!=null}function gl(){return Ko()||xt(!1),Q.useContext(Pc).location}function Cv(r){Q.useContext(ts).static||Q.useLayoutEffect(r)}function Rc(){let{isDataRoute:r}=Q.useContext(ns);return r?uT():JE()}function JE(){Ko()||xt(!1);let r=Q.useContext(xf),{basename:e,future:t,navigator:i}=Q.useContext(ts),{matches:o}=Q.useContext(ns),{pathname:l}=gl(),d=JSON.stringify(Ef(o,t.v7_relativeSplatPath)),p=Q.useRef(!1);return Cv(()=>{p.current=!0}),Q.useCallback(function(v,E){if(E===void 0&&(E={}),!p.current)return;if(typeof v=="number"){i.go(v);return}let x=Tf(v,JSON.parse(d),l,E.relative==="path");r==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:zi([e,x.pathname])),(E.replace?i.replace:i.push)(x,E.state,E)},[e,i,d,l,r])}function Pv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=Q.useContext(ts),{matches:o}=Q.useContext(ns),{pathname:l}=gl(),d=JSON.stringify(Ef(o,i.v7_relativeSplatPath));return Q.useMemo(()=>Tf(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function XE(r,e){return ZE(r,e)}function ZE(r,e,t,i){Ko()||xt(!1);let{navigator:o}=Q.useContext(ts),{matches:l}=Q.useContext(ns),d=l[l.length-1],p=d?d.params:{};d&&d.pathname;let y=d?d.pathnameBase:"/";d&&d.route;let v=gl(),E;if(e){var x;let L=typeof e=="string"?Go(e):e;y==="/"||(x=L.pathname)!=null&&x.startsWith(y)||xt(!1),E=L}else E=v;let S=E.pathname||"/",M=S;if(y!=="/"){let L=y.replace(/^\//,"").split("/");M="/"+S.replace(/^\//,"").split("/").slice(L.length).join("/")}let q=SE(r,{pathname:M}),Y=iT(q&&q.map(L=>Object.assign({},L,{params:Object.assign({},p,L.params),pathname:zi([y,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?y:zi([y,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,t,i);return e&&Y?Q.createElement(Pc.Provider,{value:{location:ol({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Fi.Pop}},Y):Y}function eT(){let r=lT(),e=GE(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:o},t):null,null)}const tT=Q.createElement(eT,null);class nT extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement(ns.Provider,{value:this.props.routeContext},Q.createElement(Sv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rT(r){let{routeContext:e,match:t,children:i}=r,o=Q.useContext(xf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement(ns.Provider,{value:e},i)}function iT(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let E=d.findIndex(x=>x.route.id&&(p==null?void 0:p[x.route.id])!==void 0);E>=0||xt(!1),d=d.slice(0,Math.min(d.length,E+1))}let y=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<d.length;E++){let x=d[E];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(v=E),x.route.id){let{loaderData:S,errors:M}=t,q=x.route.loader&&S[x.route.id]===void 0&&(!M||M[x.route.id]===void 0);if(x.route.lazy||q){y=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((E,x,S)=>{let M,q=!1,Y=null,L=null;t&&(M=p&&x.route.id?p[x.route.id]:void 0,Y=x.route.errorElement||tT,y&&(v<0&&S===0?(cT("route-fallback"),q=!0,L=null):v===S&&(q=!0,L=x.route.hydrateFallbackElement||null)));let K=e.concat(d.slice(0,S+1)),$=()=>{let X;return M?X=Y:q?X=L:x.route.Component?X=Q.createElement(x.route.Component,null):x.route.element?X=x.route.element:X=E,Q.createElement(rT,{match:x,routeContext:{outlet:E,matches:K,isDataRoute:t!=null},children:X})};return t&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?Q.createElement(nT,{location:t.location,revalidation:t.revalidation,component:Y,error:M,children:$(),routeContext:{outlet:null,matches:K,isDataRoute:!0}}):$()},null)}var Rv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Rv||{}),Av=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Av||{});function sT(r){let e=Q.useContext(xf);return e||xt(!1),e}function oT(r){let e=Q.useContext(QE);return e||xt(!1),e}function aT(r){let e=Q.useContext(ns);return e||xt(!1),e}function kv(r){let e=aT(),t=e.matches[e.matches.length-1];return t.route.id||xt(!1),t.route.id}function lT(){var r;let e=Q.useContext(Sv),t=oT(),i=kv();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function uT(){let{router:r}=sT(Rv.UseNavigateStable),e=kv(Av.UseNavigateStable),t=Q.useRef(!1);return Cv(()=>{t.current=!0}),Q.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,ol({fromRouteId:e},l)))},[r,e])}const Lg={};function cT(r,e,t){Lg[r]||(Lg[r]=!0)}function dT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function hT(r){let{to:e,replace:t,state:i,relative:o}=r;Ko()||xt(!1);let{future:l,static:d}=Q.useContext(ts),{matches:p}=Q.useContext(ns),{pathname:y}=gl(),v=Rc(),E=Tf(e,Ef(p,l.v7_relativeSplatPath),y,o==="path"),x=JSON.stringify(E);return Q.useEffect(()=>v(JSON.parse(x),{replace:t,state:i,relative:o}),[v,x,o,t,i]),null}function Xr(r){xt(!1)}function fT(r){let{basename:e="/",children:t=null,location:i,navigationType:o=Fi.Pop,navigator:l,static:d=!1,future:p}=r;Ko()&&xt(!1);let y=e.replace(/^\/*/,"/"),v=Q.useMemo(()=>({basename:y,navigator:l,static:d,future:ol({v7_relativeSplatPath:!1},p)}),[y,p,l,d]);typeof i=="string"&&(i=Go(i));let{pathname:E="/",search:x="",hash:S="",state:M=null,key:q="default"}=i,Y=Q.useMemo(()=>{let L=wf(E,y);return L==null?null:{location:{pathname:L,search:x,hash:S,state:M,key:q},navigationType:o}},[y,E,x,S,M,q,o]);return Y==null?null:Q.createElement(ts.Provider,{value:v},Q.createElement(Pc.Provider,{children:t,value:Y}))}function pT(r){let{children:e,location:t}=r;return XE($h(e),t)}new Promise(()=>{});function $h(r,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(r,(i,o)=>{if(!Q.isValidElement(i))return;let l=[...e,o];if(i.type===Q.Fragment){t.push.apply(t,$h(i.props.children,l));return}i.type!==Xr&&xt(!1),!i.props.index||!i.props.children||xt(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=$h(i.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wh(){return Wh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Wh.apply(this,arguments)}function mT(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function gT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function yT(r,e){return r.button===0&&(!e||e==="_self")&&!gT(r)}const vT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_T="6";try{window.__reactRouterVersion=_T}catch{}const wT="startTransition",Mg=mE[wT];function ET(r){let{basename:e,children:t,future:i,window:o}=r,l=Q.useRef();l.current==null&&(l.current=TE({window:o,v5Compat:!0}));let d=l.current,[p,y]=Q.useState({action:d.action,location:d.location}),{v7_startTransition:v}=i||{},E=Q.useCallback(x=>{v&&Mg?Mg(()=>y(x)):y(x)},[y,v]);return Q.useLayoutEffect(()=>d.listen(E),[d,E]),Q.useEffect(()=>dT(i),[i]),Q.createElement(fT,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:d,future:i})}const TT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ba=Q.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:p,target:y,to:v,preventScrollReset:E,viewTransition:x}=e,S=mT(e,vT),{basename:M}=Q.useContext(ts),q,Y=!1;if(typeof v=="string"&&xT.test(v)&&(q=v,TT))try{let X=new URL(window.location.href),ue=v.startsWith("//")?new URL(X.protocol+v):new URL(v),Ee=wf(ue.pathname,M);ue.origin===X.origin&&Ee!=null?v=Ee+ue.search+ue.hash:Y=!0}catch{}let L=YE(v,{relative:o}),K=IT(v,{replace:d,state:p,target:y,preventScrollReset:E,relative:o,viewTransition:x});function $(X){i&&i(X),X.defaultPrevented||K(X)}return Q.createElement("a",Wh({},S,{href:q||L,onClick:Y||l?i:$,ref:t,target:y}))});var Fg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Fg||(Fg={}));var Ug;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Ug||(Ug={}));function IT(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:p}=e===void 0?{}:e,y=Rc(),v=gl(),E=Pv(r,{relative:d});return Q.useCallback(x=>{if(yT(x,t)){x.preventDefault();let S=i!==void 0?i:oc(v)===oc(E);y(r,{replace:S,state:o,preventScrollReset:l,relative:d,viewTransition:p})}},[v,y,E,i,o,t,r,l,d,p])}const ST=()=>{};var zg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},CT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],p=r[t++],y=((o&7)<<18|(l&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},bv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,p=d?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,E=l>>2,x=(l&3)<<4|p>>4;let S=(p&15)<<2|v>>6,M=v&63;y||(M=64,d||(S=64)),i.push(t[E],t[x],t[S],t[M])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Nv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):CT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const x=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||x==null)throw new PT;const S=l<<2|p>>4;if(i.push(S),v!==64){const M=p<<4&240|v>>2;if(i.push(M),x!==64){const q=v<<6&192|x;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class PT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RT=function(r){const e=Nv(r);return bv.encodeByteArray(e,!0)},ac=function(r){return RT(r).replace(/\./g,"")},jv=function(r){try{return bv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=()=>AT().__FIREBASE_DEFAULTS__,NT=()=>{if(typeof process>"u"||typeof zg>"u")return;const r=zg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},bT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&jv(r[1]);return e&&JSON.parse(e)},Ac=()=>{try{return ST()||kT()||NT()||bT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Dv=r=>{var e,t;return(t=(e=Ac())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},jT=r=>{const e=Dv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Vv=()=>{var r;return(r=Ac())===null||r===void 0?void 0:r.config},Ov=r=>{var e;return(e=Ac())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ac(JSON.stringify(t)),ac(JSON.stringify(d)),""].join(".")}const Za={};function OT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Za))Za[e]?r.emulator.push(e):r.prod.push(e);return r}function LT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Bg=!1;function Mv(r,e){if(typeof window>"u"||typeof document>"u"||!Qo(window.location.host)||Za[r]===e||Za[r]||Bg)return;Za[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=OT().prod.length>0;function d(){const S=document.getElementById(i);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,M){S.setAttribute("width","24"),S.setAttribute("id",M),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Bg=!0,d()},S}function E(S,M){S.setAttribute("id",M),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function x(){const S=LT(i),M=t("text"),q=document.getElementById(M)||document.createElement("span"),Y=t("learnmore"),L=document.getElementById(Y)||document.createElement("a"),K=t("preprendIcon"),$=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const X=S.element;p(X),E(L,Y);const ue=v();y($,K),X.append($,q,L,ue),document.body.appendChild(X)}l?(q.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function FT(){var r;const e=(r=Ac())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function BT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $T(){const r=rn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function WT(){return!FT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HT(){try{return typeof indexedDB=="object"}catch{return!1}}function qT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="FirebaseError";class li extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=GT,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?KT(l,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new li(o,p,i)}}function KT(r,e){return r.replace(QT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const QT=/\{\$([^}]+)}/g;function YT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Os(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],d=e[o];if($g(l)&&$g(d)){if(!Os(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function $g(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ha(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function qa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function JT(r,e){const t=new XT(r,e);return t.subscribe.bind(t)}class XT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ZT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Rh),o.error===void 0&&(o.error=Rh),o.complete===void 0&&(o.complete=Rh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Rh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(r){return r&&r._delegate?r._delegate:r}class Ls{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new DT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nx(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:tx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tx(r){return r===bs?void 0:r}function nx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ex(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ze||(ze={}));const ix={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},sx=ze.INFO,ox={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},ax=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=ox[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class If{constructor(e){this.name=e,this._logLevel=sx,this._logHandler=ax,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ix[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const lx=(r,e)=>e.some(t=>r instanceof t);let Wg,Hg;function ux(){return Wg||(Wg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cx(){return Hg||(Hg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fv=new WeakMap,Hh=new WeakMap,Uv=new WeakMap,Ah=new WeakMap,Sf=new WeakMap;function dx(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(Bi(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Fv.set(t,r)}).catch(()=>{}),Sf.set(e,r),e}function hx(r){if(Hh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Hh.set(r,e)}let qh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Hh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Uv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function fx(r){qh=r(qh)}function px(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(kh(this),e,...t);return Uv.set(i,e.sort?e.sort():[e]),Bi(i)}:cx().includes(r)?function(...e){return r.apply(kh(this),e),Bi(Fv.get(this))}:function(...e){return Bi(r.apply(kh(this),e))}}function mx(r){return typeof r=="function"?px(r):(r instanceof IDBTransaction&&hx(r),lx(r,ux())?new Proxy(r,qh):r)}function Bi(r){if(r instanceof IDBRequest)return dx(r);if(Ah.has(r))return Ah.get(r);const e=mx(r);return e!==r&&(Ah.set(r,e),Sf.set(e,r)),e}const kh=r=>Sf.get(r);function gx(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),p=Bi(d);return i&&d.addEventListener("upgradeneeded",y=>{i(Bi(d.result),y.oldVersion,y.newVersion,Bi(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),p.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const yx=["get","getKey","getAll","getAllKeys","count"],vx=["put","add","delete","clear"],Nh=new Map;function qg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Nh.get(e))return Nh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=vx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||yx.includes(t)))return;const l=async function(d,...p){const y=this.transaction(d,o?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&y.done]))[0]};return Nh.set(e,l),l}fx(r=>({...r,get:(e,t,i)=>qg(e,t)||r.get(e,t,i),has:(e,t)=>!!qg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function wx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gh="@firebase/app",Gg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new If("@firebase/app"),Ex="@firebase/app-compat",Tx="@firebase/analytics-compat",xx="@firebase/analytics",Ix="@firebase/app-check-compat",Sx="@firebase/app-check",Cx="@firebase/auth",Px="@firebase/auth-compat",Rx="@firebase/database",Ax="@firebase/data-connect",kx="@firebase/database-compat",Nx="@firebase/functions",bx="@firebase/functions-compat",jx="@firebase/installations",Dx="@firebase/installations-compat",Vx="@firebase/messaging",Ox="@firebase/messaging-compat",Lx="@firebase/performance",Mx="@firebase/performance-compat",Fx="@firebase/remote-config",Ux="@firebase/remote-config-compat",zx="@firebase/storage",Bx="@firebase/storage-compat",$x="@firebase/firestore",Wx="@firebase/ai",Hx="@firebase/firestore-compat",qx="firebase",Gx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="[DEFAULT]",Kx={[Gh]:"fire-core",[Ex]:"fire-core-compat",[xx]:"fire-analytics",[Tx]:"fire-analytics-compat",[Sx]:"fire-app-check",[Ix]:"fire-app-check-compat",[Cx]:"fire-auth",[Px]:"fire-auth-compat",[Rx]:"fire-rtdb",[Ax]:"fire-data-connect",[kx]:"fire-rtdb-compat",[Nx]:"fire-fn",[bx]:"fire-fn-compat",[jx]:"fire-iid",[Dx]:"fire-iid-compat",[Vx]:"fire-fcm",[Ox]:"fire-fcm-compat",[Lx]:"fire-perf",[Mx]:"fire-perf-compat",[Fx]:"fire-rc",[Ux]:"fire-rc-compat",[zx]:"fire-gcs",[Bx]:"fire-gcs-compat",[$x]:"fire-fst",[Hx]:"fire-fst-compat",[Wx]:"fire-vertex","fire-js":"fire-js",[qx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Map,Qx=new Map,Qh=new Map;function Kg(r,e){try{r.container.addComponent(e)}catch(t){ri.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Uo(r){const e=r.name;if(Qh.has(e))return ri.debug(`There were multiple attempts to register component ${e}.`),!1;Qh.set(e,r);for(const t of lc.values())Kg(t,r);for(const t of Qx.values())Kg(t,r);return!0}function Cf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function jn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new yl("app","Firebase",Yx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=Gx;function zv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Kh,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw $i.create("bad-app-name",{appName:String(o)});if(t||(t=Vv()),!t)throw $i.create("no-options");const l=lc.get(o);if(l){if(Os(t,l.options)&&Os(i,l.config))return l;throw $i.create("duplicate-app",{appName:o})}const d=new rx(o);for(const y of Qh.values())d.addComponent(y);const p=new Jx(t,i,d);return lc.set(o,p),p}function Bv(r=Kh){const e=lc.get(r);if(!e&&r===Kh&&Vv())return zv();if(!e)throw $i.create("no-app",{appName:r});return e}function Wi(r,e,t){var i;let o=(i=Kx[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ri.warn(p.join(" "));return}Uo(new Ls(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="firebase-heartbeat-database",Zx=1,al="firebase-heartbeat-store";let bh=null;function $v(){return bh||(bh=gx(Xx,Zx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(r=>{throw $i.create("idb-open",{originalErrorMessage:r.message})})),bh}async function eI(r){try{const t=(await $v()).transaction(al),i=await t.objectStore(al).get(Wv(r));return await t.done,i}catch(e){if(e instanceof li)ri.warn(e.message);else{const t=$i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ri.warn(t.message)}}}async function Qg(r,e){try{const i=(await $v()).transaction(al,"readwrite");await i.objectStore(al).put(e,Wv(r)),await i.done}catch(t){if(t instanceof li)ri.warn(t.message);else{const i=$i.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ri.warn(i.message)}}}function Wv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=1024,nI=30;class rI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Yg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>nI){const d=oI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ri.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yg(),{heartbeatsToSend:i,unsentEntries:o}=iI(this._heartbeatsCache.heartbeats),l=ac(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ri.warn(t),""}}}function Yg(){return new Date().toISOString().substring(0,10)}function iI(r,e=tI){const t=[];let i=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),Jg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Jg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class sI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HT()?qT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Qg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Qg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Jg(r){return ac(JSON.stringify({version:2,heartbeats:r})).length}function oI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(r){Uo(new Ls("platform-logger",e=>new _x(e),"PRIVATE")),Uo(new Ls("heartbeat",e=>new rI(e),"PRIVATE")),Wi(Gh,Gg,r),Wi(Gh,Gg,"esm2017"),Wi("fire-js","")}aI("");var lI="firebase",uI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wi(lI,uI,"app");function Pf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Hv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cI=Hv,qv=new yl("auth","Firebase",Hv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new If("@firebase/auth");function dI(r,...e){uc.logLevel<=ze.WARN&&uc.warn(`Auth (${Yo}): ${r}`,...e)}function Yu(r,...e){uc.logLevel<=ze.ERROR&&uc.error(`Auth (${Yo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(r,...e){throw Af(r,...e)}function hr(r,...e){return Af(r,...e)}function Rf(r,e,t){const i=Object.assign(Object.assign({},cI()),{[e]:t});return new yl("auth","Firebase",i).create(e,{appName:r.name})}function ti(r){return Rf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&qn(r,"argument-error"),Rf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Af(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return qv.create(r,...e)}function ke(r,e,...t){if(!r)throw Af(e,...t)}function Zr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Yu(e),new Error(e)}function ii(r,e){r||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function fI(){return Xg()==="http:"||Xg()==="https:"}function Xg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fI()||zT()||"connection"in navigator)?navigator.onLine:!0}function mI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.shortDelay=e,this.longDelay=t,ii(t>e,"Short delay should be less than long delay!"),this.isMobile=MT()||BT()}get(){return pI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(r,e){ii(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vI=new _l(3e4,6e4);function rs(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function is(r,e,t,i,o={}){return Kv(r,o,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const p=vl(Object.assign({key:r.config.apiKey},d)).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:y},l);return UT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Qo(r.emulatorConfig.host)&&(v.credentials="include"),Gv.fetch()(await Qv(r,r.config.apiHost,t,p),v)})}async function Kv(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},gI),e);try{const o=new wI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Wu(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const p=l.ok?d.errorMessage:d.error.message,[y,v]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Wu(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw Wu(r,"user-disabled",d);const E=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Rf(r,E,v);qn(r,E)}}catch(o){if(o instanceof li)throw o;qn(r,"network-request-failed",{message:String(o)})}}async function wl(r,e,t,i,o={}){const l=await is(r,e,t,i,o);return"mfaPendingCredential"in l&&qn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Qv(r,e,t,i){const o=`${e}${t}?${i}`,l=r,d=l.config.emulator?kf(r.config,o):`${r.config.apiScheme}://${o}`;return yI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function _I(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(hr(this.auth,"network-request-failed")),vI.get())})}}function Wu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=hr(r,e,i);return o.customData._tokenResponse=t,o}function Zg(r){return r!==void 0&&r.enterprise!==void 0}class EI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _I(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TI(r,e){return is(r,"GET","/v2/recaptchaConfig",rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xI(r,e){return is(r,"POST","/v1/accounts:delete",e)}async function cc(r,e){return is(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function II(r,e=!1){const t=Kt(r),i=await t.getIdToken(e),o=Nf(i);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:el(jh(o.auth_time)),issuedAtTime:el(jh(o.iat)),expirationTime:el(jh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function jh(r){return Number(r)*1e3}function Nf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const o=jv(t);return o?JSON.parse(o):(Yu("Failed to decode base64 JWT payload"),null)}catch(o){return Yu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function ey(r){const e=Nf(r);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof li&&SI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function SI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=el(this.lastLoginAt),this.creationTime=el(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await ll(r,cc(t,{idToken:i}));ke(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Yv(l.providerUserInfo):[],p=RI(r.providerData,d),y=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),E=y?v:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new Jh(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,x)}async function PI(r){const e=Kt(r);await dc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Yv(r){return r.map(e=>{var{providerId:t}=e,i=Pf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AI(r,e){const t=await Kv(r,{},async()=>{const i=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await Qv(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:i};return r.emulatorConfig&&Qo(r.emulatorConfig.host)&&(y.credentials="include"),Gv.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kI(r,e){return is(r,"POST","/v2/accounts:revokeToken",rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ey(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=ey(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await AI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,d=new Vo;return i&&(ke(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(ke(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(ke(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(r,e){ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Pf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Jh(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ll(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return II(this,e)}reload(){return PI(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await dc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(ti(this.auth));const e=await this.getIdToken();return await ll(this,xI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,d,p,y,v,E;const x=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,M=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(d=t.photoURL)!==null&&d!==void 0?d:void 0,Y=(p=t.tenantId)!==null&&p!==void 0?p:void 0,L=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,K=(v=t.createdAt)!==null&&v!==void 0?v:void 0,$=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:X,emailVerified:ue,isAnonymous:Ee,providerData:ae,stsTokenManager:b}=t;ke(X&&b,e,"internal-error");const I=Vo.fromJSON(this.name,b);ke(typeof X=="string",e,"internal-error"),Vi(x,e.name),Vi(S,e.name),ke(typeof ue=="boolean",e,"internal-error"),ke(typeof Ee=="boolean",e,"internal-error"),Vi(M,e.name),Vi(q,e.name),Vi(Y,e.name),Vi(L,e.name),Vi(K,e.name),Vi($,e.name);const A=new dr({uid:X,auth:e,email:S,emailVerified:ue,displayName:x,isAnonymous:Ee,photoURL:q,phoneNumber:M,tenantId:Y,stsTokenManager:I,createdAt:K,lastLoginAt:$});return ae&&Array.isArray(ae)&&(A.providerData=ae.map(k=>Object.assign({},k))),L&&(A._redirectEventId=L),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new Vo;o.updateFromServerResponse(t);const l=new dr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await dc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Yv(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Vo;p.updateFromIdToken(i);const y=new dr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Jh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=new Map;function ei(r){ii(r instanceof Function,"Expected a class definition");let e=ty.get(r);return e?(ii(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ty.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Jv.type="NONE";const ny=Jv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(r,e,t){return`firebase:${r}:${e}:${t}`}class Oo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Ju(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ju("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cc(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Oo(ei(ny),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||ei(ny);const d=Ju(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const E=await v._get(d);if(E){let x;if(typeof E=="string"){const S=await cc(e,{idToken:E}).catch(()=>{});if(!S)break;x=await dr._fromGetAccountInfoResponse(e,S,E)}else x=dr._fromJSON(e,E);v!==l&&(p=x),l=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new Oo(l,e,i):(l=y[0],p&&await l._set(d,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Oo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r_(e))return"Blackberry";if(i_(e))return"Webos";if(Zv(e))return"Safari";if((e.includes("chrome/")||e_(e))&&!e.includes("edge/"))return"Chrome";if(n_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Xv(r=rn()){return/firefox\//i.test(r)}function Zv(r=rn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e_(r=rn()){return/crios\//i.test(r)}function t_(r=rn()){return/iemobile/i.test(r)}function n_(r=rn()){return/android/i.test(r)}function r_(r=rn()){return/blackberry/i.test(r)}function i_(r=rn()){return/webos/i.test(r)}function bf(r=rn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function NI(r=rn()){var e;return bf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bI(){return $T()&&document.documentMode===10}function s_(r=rn()){return bf(r)||n_(r)||i_(r)||r_(r)||/windows phone/i.test(r)||t_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(r,e=[]){let t;switch(r){case"Browser":t=ry(rn());break;case"Worker":t=`${ry(rn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,p)=>{try{const y=e(l);d(y)}catch(y){p(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(r,e={}){return is(r,"GET","/v2/passwordPolicy",rs(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=6;class OI{constructor(e){var t,i,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:VI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,d,p;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(i=y.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),y.isValid&&(y.isValid=(o=y.containsLowercaseLetter)!==null&&o!==void 0?o:!0),y.isValid&&(y.isValid=(l=y.containsUppercaseLetter)!==null&&l!==void 0?l:!0),y.isValid&&(y.isValid=(d=y.containsNumericCharacter)!==null&&d!==void 0?d:!0),y.isValid&&(y.isValid=(p=y.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),y}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iy(this),this.idTokenSubscription=new iy(this),this.beforeStateQueue=new jI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ei(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cc(this,{idToken:e}),i=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(jn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===p)&&(y!=null&&y.user)&&(o=y.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(ti(this));const t=e?Kt(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DI(this),t=new OI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await kI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ei(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[ei(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(p,this,"internal-error"),p.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&dI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ss(r){return Kt(r)}class iy{constructor(e){this.auth=e,this.observer=null,this.addObserver=JT(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MI(r){kc=r}function a_(r){return kc.loadJS(r)}function FI(){return kc.recaptchaEnterpriseScript}function UI(){return kc.gapiScript}function zI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class BI{constructor(){this.enterprise=new $I}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $I{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const WI="recaptcha-enterprise",l_="NO_RECAPTCHA";class HI{constructor(e){this.type=WI,this.auth=ss(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,p)=>{TI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new EI(y);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(y=>{p(y)})})}function o(l,d,p){const y=window.grecaptcha;Zg(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(l_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BI().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{i(this.auth).then(p=>{if(!t&&Zg(window.grecaptcha))o(p,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=FI();y.length!==0&&(y+=p),a_(y).then(()=>{o(p,l,d)}).catch(v=>{d(v)})}}).catch(p=>{d(p)})})}}async function sy(r,e,t,i=!1,o=!1){const l=new HI(r);let d;if(o)d=l_;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Xh(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await sy(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await sy(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(r,e){const t=Cf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Os(l,e??{}))return o;qn(o,"already-initialized")}return t.initialize({options:e})}function GI(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ei);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function KI(r,e,t){const i=ss(r);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=u_(e),{host:d,port:p}=QI(e),y=p===null?"":`:${p}`,v={url:`${l}//${d}${y}/`},E=Object.freeze({host:d,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(Os(v,i.config.emulator)&&Os(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,Qo(d)?(Lv(`${l}//${d}${y}`),Mv("Auth",!0)):YI()}function u_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function QI(r){const e=u_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:oy(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:oy(d)}}}function oy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function YI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function JI(r,e){return is(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(r,e){return wl(r,"POST","/v1/accounts:signInWithPassword",rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(r,e){return wl(r,"POST","/v1/accounts:signInWithEmailLink",rs(r,e))}async function eS(r,e){return wl(r,"POST","/v1/accounts:signInWithEmailLink",rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends jf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ul(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ul(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xh(e,t,"signInWithPassword",XI);case"emailLink":return ZI(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xh(e,i,"signUpPassword",JI);case"emailLink":return eS(e,{idToken:t,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(r,e){return wl(r,"POST","/v1/accounts:signInWithIdp",rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="http://localhost";class Ms extends jf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Pf(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new Ms(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Lo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Lo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lo(e,t)}buildRequest(){const e={requestUri:tS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rS(r){const e=Ha(qa(r)).link,t=e?Ha(qa(e)).deep_link_id:null,i=Ha(qa(r)).deep_link_id;return(i?Ha(qa(i)).link:null)||i||t||e||r}class Df{constructor(e){var t,i,o,l,d,p;const y=Ha(qa(e)),v=(t=y.apiKey)!==null&&t!==void 0?t:null,E=(i=y.oobCode)!==null&&i!==void 0?i:null,x=nS((o=y.mode)!==null&&o!==void 0?o:null);ke(v&&E&&x,"argument-error"),this.apiKey=v,this.operation=x,this.code=E,this.continueUrl=(l=y.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=y.lang)!==null&&d!==void 0?d:null,this.tenantId=(p=y.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=rS(e);try{return new Df(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.providerId=Jo.PROVIDER_ID}static credential(e,t){return ul._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Df.parseLink(t);return ke(i,"argument-error"),ul._fromEmailAndCode(e,i.code,i.tenantId)}}Jo.PROVIDER_ID="password";Jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Vf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends El{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ms._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Rr.credential(t,i)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends El{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends El{constructor(){super("twitter.com")}static credential(e,t){return Ms._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Mi.credential(t,i)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(r,e){return wl(r,"POST","/v1/accounts:signUp",rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await dr._fromIdTokenResponse(e,i,o),d=ay(i);return new Fs({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ay(i);return new Fs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ay(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends li{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,hc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new hc(e,t,i,o)}}function c_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?hc._fromErrorAndOperation(r,l,e,i):l})}async function sS(r,e,t=!1){const i=await ll(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Fs._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(r,e,t=!1){const{auth:i}=r;if(jn(i.app))return Promise.reject(ti(i));const o="reauthenticate";try{const l=await ll(r,c_(i,o,e,r),t);ke(l.idToken,i,"internal-error");const d=Nf(l.idToken);ke(d,i,"internal-error");const{sub:p}=d;return ke(r.uid===p,i,"user-mismatch"),Fs._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&qn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_(r,e,t=!1){if(jn(r.app))return Promise.reject(ti(r));const i="signIn",o=await c_(r,i,e),l=await Fs._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function aS(r,e){return d_(ss(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h_(r){const e=ss(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lS(r,e,t){if(jn(r.app))return Promise.reject(ti(r));const i=ss(r),d=await Xh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iS).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&h_(r),y}),p=await Fs._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function f_(r,e,t){return jn(r.app)?Promise.reject(ti(r)):aS(Kt(r),Jo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&h_(r),i})}function uS(r,e,t,i){return Kt(r).onIdTokenChanged(e,t,i)}function cS(r,e,t){return Kt(r).beforeAuthStateChanged(e,t)}function dS(r,e,t,i){return Kt(r).onAuthStateChanged(e,t,i)}function p_(r){return Kt(r).signOut()}const fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fc,"1"),this.storage.removeItem(fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=1e3,fS=10;class g_ extends m_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);bI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,fS):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},hS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}g_.type="LOCAL";const pS=g_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_ extends m_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}y_.type="SESSION";const v_=y_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Nc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async v=>v(t.origin,l)),y=await mS(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((p,y)=>{const v=Of("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(x){const S=x;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(S.data.response);break;default:clearTimeout(E),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function yS(r){Ar().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function vS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _S(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function wS(){return __()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="firebaseLocalStorageDb",ES=1,pc="firebaseLocalStorage",E_="fbase_key";class Tl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bc(r,e){return r.transaction([pc],e?"readwrite":"readonly").objectStore(pc)}function TS(){const r=indexedDB.deleteDatabase(w_);return new Tl(r).toPromise()}function Zh(){const r=indexedDB.open(w_,ES);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(pc,{keyPath:E_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(pc)?e(i):(i.close(),await TS(),e(await Zh()))})})}async function ly(r,e,t){const i=bc(r,!0).put({[E_]:e,value:t});return new Tl(i).toPromise()}async function xS(r,e){const t=bc(r,!1).get(e),i=await new Tl(t).toPromise();return i===void 0?null:i.value}function uy(r,e){const t=bc(r,!0).delete(e);return new Tl(t).toPromise()}const IS=800,SS=3;class T_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>SS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return __()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nc._getInstance(wS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await vS(),!this.activeServiceWorker)return;this.sender=new gS(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_S()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zh();return await ly(e,fc,"1"),await uy(e,fc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ly(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>xS(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=bc(o,!1).getAll();return new Tl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}T_.type="LOCAL";const CS=T_;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(r,e){return e?ei(e):(ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends jf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function PS(r){return d_(r.auth,new Lf(r),r.bypassAuthState)}function RS(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),oS(t,new Lf(r),r.bypassAuthState)}async function AS(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),sS(t,new Lf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PS;case"linkViaPopup":case"linkViaRedirect":return AS;case"reauthViaPopup":case"reauthViaRedirect":return RS;default:qn(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new _l(2e3,1e4);async function S_(r,e,t){if(jn(r.app))return Promise.reject(hr(r,"operation-not-supported-in-this-environment"));const i=ss(r);hI(r,e,Vf);const o=x_(i,t);return new js(i,"signInViaPopup",e,o).executeNotNull()}class js extends I_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,js.currentPopupAction&&js.currentPopupAction.cancel(),js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=Of();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,js.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kS.get())};e()}}js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="pendingRedirect",Xu=new Map;class bS extends I_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const i=await jS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jS(r,e){const t=OS(e),i=VS(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function DS(r,e){Xu.set(r._key(),e)}function VS(r){return ei(r._redirectPersistence)}function OS(r){return Ju(NS,r.config.apiKey,r.name)}async function LS(r,e,t=!1){if(jn(r.app))return Promise.reject(ti(r));const i=ss(r),o=x_(i,e),d=await new bS(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=600*1e3;class FS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!US(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!C_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(hr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(cy(e))}saveEventToCache(e){this.cachedEventUids.add(cy(e)),this.lastProcessedEventTime=Date.now()}}function cy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function C_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function US(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(r,e={}){return is(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$S=/^https?/;async function WS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await zS(r);for(const t of e)try{if(HS(t))return}catch{}qn(r,"unauthorized-domain")}function HS(r){const e=Yh(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!$S.test(t))return!1;if(BS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=new _l(3e4,6e4);function dy(){const r=Ar().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function GS(r){return new Promise((e,t)=>{var i,o,l;function d(){dy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dy(),t(hr(r,"network-request-failed"))},timeout:qS.get()})}if(!((o=(i=Ar().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Ar().gapi)===null||l===void 0)&&l.load)d();else{const p=zI("iframefcb");return Ar()[p]=()=>{gapi.load?d():t(hr(r,"network-request-failed"))},a_(`${UI()}?onload=${p}`).catch(y=>t(y))}}).catch(e=>{throw Zu=null,e})}let Zu=null;function KS(r){return Zu=Zu||GS(r),Zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=new _l(5e3,15e3),YS="__/auth/iframe",JS="emulator/auth/iframe",XS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e1(r){const e=r.config;ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?kf(e,JS):`https://${r.config.authDomain}/${YS}`,i={apiKey:e.apiKey,appName:r.name,v:Yo},o=ZS.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${vl(i).slice(1)}`}async function t1(r){const e=await KS(r),t=Ar().gapi;return ke(t,r,"internal-error"),e.open({where:document.body,url:e1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XS,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=hr(r,"network-request-failed"),p=Ar().setTimeout(()=>{l(d)},QS.get());function y(){Ar().clearTimeout(p),o(i)}i.ping(y).then(y,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r1=500,i1=600,s1="_blank",o1="http://localhost";class hy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function a1(r,e,t,i=r1,o=i1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const y=Object.assign(Object.assign({},n1),{width:i.toString(),height:o.toString(),top:l,left:d}),v=rn().toLowerCase();t&&(p=e_(v)?s1:t),Xv(v)&&(e=e||o1,y.scrollbars="yes");const E=Object.entries(y).reduce((S,[M,q])=>`${S}${M}=${q},`,"");if(NI(v)&&p!=="_self")return l1(e||"",p),new hy(null);const x=window.open(e||"",p,E);ke(x,r,"popup-blocked");try{x.focus()}catch{}return new hy(x)}function l1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="__/auth/handler",c1="emulator/auth/handler",d1=encodeURIComponent("fac");async function fy(r,e,t,i,o,l){ke(r.config.authDomain,r,"auth-domain-config-required"),ke(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Yo,eventId:o};if(e instanceof Vf){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",YT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,x]of Object.entries({}))d[E]=x}if(e instanceof El){const E=e.getScopes().filter(x=>x!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const y=await r._getAppCheckToken(),v=y?`#${d1}=${encodeURIComponent(y)}`:"";return`${h1(r)}?${vl(p).slice(1)}${v}`}function h1({config:r}){return r.emulator?kf(r,c1):`https://${r.authDomain}/${u1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="webStorageSupport";class f1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=v_,this._completeRedirectFn=LS,this._overrideRedirectResult=DS}async _openPopup(e,t,i,o){var l;ii((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await fy(e,t,i,Yh(),o);return a1(e,d,Of())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await fy(e,t,i,Yh(),o);return yS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ii(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await t1(e),i=new FS(e);return t.register("authEvent",o=>(ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dh,{type:Dh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Dh];d!==void 0&&t(!!d),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=WS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return s_()||Zv()||bf()}}const p1=f1;var py="@firebase/auth",my="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y1(r){Uo(new Ls("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;ke(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o_(r)},v=new LI(i,o,l,y);return GI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Uo(new Ls("auth-internal",e=>{const t=ss(e.getProvider("auth").getImmediate());return(i=>new m1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wi(py,my,g1(r)),Wi(py,my,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=300,_1=Ov("authIdTokenMaxAge")||v1;let gy=null;const w1=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>_1)return;const o=t==null?void 0:t.token;gy!==o&&(gy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function E1(r=Bv()){const e=Cf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=qI(r,{popupRedirectResolver:p1,persistence:[CS,pS,v_]}),i=Ov("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=w1(l.toString());cS(t,d,()=>d(t.currentUser)),uS(t,p=>d(p))}}const o=Dv("auth");return o&&KI(t,`http://${o}`),t}function T1(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}MI({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=hr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",T1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y1("Browser");var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,P_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,I){function A(){}A.prototype=I.prototype,b.D=I.prototype,b.prototype=new A,b.prototype.constructor=b,b.C=function(k,V,N){for(var R=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)R[Je-2]=arguments[Je];return I.prototype[V].apply(k,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,I,A){A||(A=0);var k=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)k[V]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(V=0;16>V;++V)k[V]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=b.g[0],A=b.g[1],V=b.g[2];var N=b.g[3],R=I+(N^A&(V^N))+k[0]+3614090360&4294967295;I=A+(R<<7&4294967295|R>>>25),R=N+(V^I&(A^V))+k[1]+3905402710&4294967295,N=I+(R<<12&4294967295|R>>>20),R=V+(A^N&(I^A))+k[2]+606105819&4294967295,V=N+(R<<17&4294967295|R>>>15),R=A+(I^V&(N^I))+k[3]+3250441966&4294967295,A=V+(R<<22&4294967295|R>>>10),R=I+(N^A&(V^N))+k[4]+4118548399&4294967295,I=A+(R<<7&4294967295|R>>>25),R=N+(V^I&(A^V))+k[5]+1200080426&4294967295,N=I+(R<<12&4294967295|R>>>20),R=V+(A^N&(I^A))+k[6]+2821735955&4294967295,V=N+(R<<17&4294967295|R>>>15),R=A+(I^V&(N^I))+k[7]+4249261313&4294967295,A=V+(R<<22&4294967295|R>>>10),R=I+(N^A&(V^N))+k[8]+1770035416&4294967295,I=A+(R<<7&4294967295|R>>>25),R=N+(V^I&(A^V))+k[9]+2336552879&4294967295,N=I+(R<<12&4294967295|R>>>20),R=V+(A^N&(I^A))+k[10]+4294925233&4294967295,V=N+(R<<17&4294967295|R>>>15),R=A+(I^V&(N^I))+k[11]+2304563134&4294967295,A=V+(R<<22&4294967295|R>>>10),R=I+(N^A&(V^N))+k[12]+1804603682&4294967295,I=A+(R<<7&4294967295|R>>>25),R=N+(V^I&(A^V))+k[13]+4254626195&4294967295,N=I+(R<<12&4294967295|R>>>20),R=V+(A^N&(I^A))+k[14]+2792965006&4294967295,V=N+(R<<17&4294967295|R>>>15),R=A+(I^V&(N^I))+k[15]+1236535329&4294967295,A=V+(R<<22&4294967295|R>>>10),R=I+(V^N&(A^V))+k[1]+4129170786&4294967295,I=A+(R<<5&4294967295|R>>>27),R=N+(A^V&(I^A))+k[6]+3225465664&4294967295,N=I+(R<<9&4294967295|R>>>23),R=V+(I^A&(N^I))+k[11]+643717713&4294967295,V=N+(R<<14&4294967295|R>>>18),R=A+(N^I&(V^N))+k[0]+3921069994&4294967295,A=V+(R<<20&4294967295|R>>>12),R=I+(V^N&(A^V))+k[5]+3593408605&4294967295,I=A+(R<<5&4294967295|R>>>27),R=N+(A^V&(I^A))+k[10]+38016083&4294967295,N=I+(R<<9&4294967295|R>>>23),R=V+(I^A&(N^I))+k[15]+3634488961&4294967295,V=N+(R<<14&4294967295|R>>>18),R=A+(N^I&(V^N))+k[4]+3889429448&4294967295,A=V+(R<<20&4294967295|R>>>12),R=I+(V^N&(A^V))+k[9]+568446438&4294967295,I=A+(R<<5&4294967295|R>>>27),R=N+(A^V&(I^A))+k[14]+3275163606&4294967295,N=I+(R<<9&4294967295|R>>>23),R=V+(I^A&(N^I))+k[3]+4107603335&4294967295,V=N+(R<<14&4294967295|R>>>18),R=A+(N^I&(V^N))+k[8]+1163531501&4294967295,A=V+(R<<20&4294967295|R>>>12),R=I+(V^N&(A^V))+k[13]+2850285829&4294967295,I=A+(R<<5&4294967295|R>>>27),R=N+(A^V&(I^A))+k[2]+4243563512&4294967295,N=I+(R<<9&4294967295|R>>>23),R=V+(I^A&(N^I))+k[7]+1735328473&4294967295,V=N+(R<<14&4294967295|R>>>18),R=A+(N^I&(V^N))+k[12]+2368359562&4294967295,A=V+(R<<20&4294967295|R>>>12),R=I+(A^V^N)+k[5]+4294588738&4294967295,I=A+(R<<4&4294967295|R>>>28),R=N+(I^A^V)+k[8]+2272392833&4294967295,N=I+(R<<11&4294967295|R>>>21),R=V+(N^I^A)+k[11]+1839030562&4294967295,V=N+(R<<16&4294967295|R>>>16),R=A+(V^N^I)+k[14]+4259657740&4294967295,A=V+(R<<23&4294967295|R>>>9),R=I+(A^V^N)+k[1]+2763975236&4294967295,I=A+(R<<4&4294967295|R>>>28),R=N+(I^A^V)+k[4]+1272893353&4294967295,N=I+(R<<11&4294967295|R>>>21),R=V+(N^I^A)+k[7]+4139469664&4294967295,V=N+(R<<16&4294967295|R>>>16),R=A+(V^N^I)+k[10]+3200236656&4294967295,A=V+(R<<23&4294967295|R>>>9),R=I+(A^V^N)+k[13]+681279174&4294967295,I=A+(R<<4&4294967295|R>>>28),R=N+(I^A^V)+k[0]+3936430074&4294967295,N=I+(R<<11&4294967295|R>>>21),R=V+(N^I^A)+k[3]+3572445317&4294967295,V=N+(R<<16&4294967295|R>>>16),R=A+(V^N^I)+k[6]+76029189&4294967295,A=V+(R<<23&4294967295|R>>>9),R=I+(A^V^N)+k[9]+3654602809&4294967295,I=A+(R<<4&4294967295|R>>>28),R=N+(I^A^V)+k[12]+3873151461&4294967295,N=I+(R<<11&4294967295|R>>>21),R=V+(N^I^A)+k[15]+530742520&4294967295,V=N+(R<<16&4294967295|R>>>16),R=A+(V^N^I)+k[2]+3299628645&4294967295,A=V+(R<<23&4294967295|R>>>9),R=I+(V^(A|~N))+k[0]+4096336452&4294967295,I=A+(R<<6&4294967295|R>>>26),R=N+(A^(I|~V))+k[7]+1126891415&4294967295,N=I+(R<<10&4294967295|R>>>22),R=V+(I^(N|~A))+k[14]+2878612391&4294967295,V=N+(R<<15&4294967295|R>>>17),R=A+(N^(V|~I))+k[5]+4237533241&4294967295,A=V+(R<<21&4294967295|R>>>11),R=I+(V^(A|~N))+k[12]+1700485571&4294967295,I=A+(R<<6&4294967295|R>>>26),R=N+(A^(I|~V))+k[3]+2399980690&4294967295,N=I+(R<<10&4294967295|R>>>22),R=V+(I^(N|~A))+k[10]+4293915773&4294967295,V=N+(R<<15&4294967295|R>>>17),R=A+(N^(V|~I))+k[1]+2240044497&4294967295,A=V+(R<<21&4294967295|R>>>11),R=I+(V^(A|~N))+k[8]+1873313359&4294967295,I=A+(R<<6&4294967295|R>>>26),R=N+(A^(I|~V))+k[15]+4264355552&4294967295,N=I+(R<<10&4294967295|R>>>22),R=V+(I^(N|~A))+k[6]+2734768916&4294967295,V=N+(R<<15&4294967295|R>>>17),R=A+(N^(V|~I))+k[13]+1309151649&4294967295,A=V+(R<<21&4294967295|R>>>11),R=I+(V^(A|~N))+k[4]+4149444226&4294967295,I=A+(R<<6&4294967295|R>>>26),R=N+(A^(I|~V))+k[11]+3174756917&4294967295,N=I+(R<<10&4294967295|R>>>22),R=V+(I^(N|~A))+k[2]+718787259&4294967295,V=N+(R<<15&4294967295|R>>>17),R=A+(N^(V|~I))+k[9]+3951481745&4294967295,b.g[0]=b.g[0]+I&4294967295,b.g[1]=b.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+V&4294967295,b.g[3]=b.g[3]+N&4294967295}i.prototype.u=function(b,I){I===void 0&&(I=b.length);for(var A=I-this.blockSize,k=this.B,V=this.h,N=0;N<I;){if(V==0)for(;N<=A;)o(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<I;)if(k[V++]=b.charCodeAt(N++),V==this.blockSize){o(this,k),V=0;break}}else for(;N<I;)if(k[V++]=b[N++],V==this.blockSize){o(this,k),V=0;break}}this.h=V,this.o+=I},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var I=1;I<b.length-8;++I)b[I]=0;var A=8*this.o;for(I=b.length-8;I<b.length;++I)b[I]=A&255,A/=256;for(this.u(b),b=Array(16),I=A=0;4>I;++I)for(var k=0;32>k;k+=8)b[A++]=this.g[I]>>>k&255;return b};function l(b,I){var A=p;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=I(b)}function d(b,I){this.h=I;for(var A=[],k=!0,V=b.length-1;0<=V;V--){var N=b[V]|0;k&&N==I||(A[V]=N,k=!1)}this.g=A}var p={};function y(b){return-128<=b&&128>b?l(b,function(I){return new d([I|0],0>I?-1:0)}):new d([b|0],0>b?-1:0)}function v(b){if(isNaN(b)||!isFinite(b))return x;if(0>b)return L(v(-b));for(var I=[],A=1,k=0;b>=A;k++)I[k]=b/A|0,A*=4294967296;return new d(I,0)}function E(b,I){if(b.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b.charAt(0)=="-")return L(E(b.substring(1),I));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(I,8)),k=x,V=0;V<b.length;V+=8){var N=Math.min(8,b.length-V),R=parseInt(b.substring(V,V+N),I);8>N?(N=v(Math.pow(I,N)),k=k.j(N).add(v(R))):(k=k.j(A),k=k.add(v(R)))}return k}var x=y(0),S=y(1),M=y(16777216);r=d.prototype,r.m=function(){if(Y(this))return-L(this).m();for(var b=0,I=1,A=0;A<this.g.length;A++){var k=this.i(A);b+=(0<=k?k:4294967296+k)*I,I*=4294967296}return b},r.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(q(this))return"0";if(Y(this))return"-"+L(this).toString(b);for(var I=v(Math.pow(b,6)),A=this,k="";;){var V=ue(A,I).g;A=K(A,V.j(I));var N=((0<A.g.length?A.g[0]:A.h)>>>0).toString(b);if(A=V,q(A))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},r.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function q(b){if(b.h!=0)return!1;for(var I=0;I<b.g.length;I++)if(b.g[I]!=0)return!1;return!0}function Y(b){return b.h==-1}r.l=function(b){return b=K(this,b),Y(b)?-1:q(b)?0:1};function L(b){for(var I=b.g.length,A=[],k=0;k<I;k++)A[k]=~b.g[k];return new d(A,~b.h).add(S)}r.abs=function(){return Y(this)?L(this):this},r.add=function(b){for(var I=Math.max(this.g.length,b.g.length),A=[],k=0,V=0;V<=I;V++){var N=k+(this.i(V)&65535)+(b.i(V)&65535),R=(N>>>16)+(this.i(V)>>>16)+(b.i(V)>>>16);k=R>>>16,N&=65535,R&=65535,A[V]=R<<16|N}return new d(A,A[A.length-1]&-2147483648?-1:0)};function K(b,I){return b.add(L(I))}r.j=function(b){if(q(this)||q(b))return x;if(Y(this))return Y(b)?L(this).j(L(b)):L(L(this).j(b));if(Y(b))return L(this.j(L(b)));if(0>this.l(M)&&0>b.l(M))return v(this.m()*b.m());for(var I=this.g.length+b.g.length,A=[],k=0;k<2*I;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var V=0;V<b.g.length;V++){var N=this.i(k)>>>16,R=this.i(k)&65535,Je=b.i(V)>>>16,et=b.i(V)&65535;A[2*k+2*V]+=R*et,$(A,2*k+2*V),A[2*k+2*V+1]+=N*et,$(A,2*k+2*V+1),A[2*k+2*V+1]+=R*Je,$(A,2*k+2*V+1),A[2*k+2*V+2]+=N*Je,$(A,2*k+2*V+2)}for(k=0;k<I;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=I;k<2*I;k++)A[k]=0;return new d(A,0)};function $(b,I){for(;(b[I]&65535)!=b[I];)b[I+1]+=b[I]>>>16,b[I]&=65535,I++}function X(b,I){this.g=b,this.h=I}function ue(b,I){if(q(I))throw Error("division by zero");if(q(b))return new X(x,x);if(Y(b))return I=ue(L(b),I),new X(L(I.g),L(I.h));if(Y(I))return I=ue(b,L(I)),new X(L(I.g),I.h);if(30<b.g.length){if(Y(b)||Y(I))throw Error("slowDivide_ only works with positive integers.");for(var A=S,k=I;0>=k.l(b);)A=Ee(A),k=Ee(k);var V=ae(A,1),N=ae(k,1);for(k=ae(k,2),A=ae(A,2);!q(k);){var R=N.add(k);0>=R.l(b)&&(V=V.add(A),N=R),k=ae(k,1),A=ae(A,1)}return I=K(b,V.j(I)),new X(V,I)}for(V=x;0<=b.l(I);){for(A=Math.max(1,Math.floor(b.m()/I.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=v(A),R=N.j(I);Y(R)||0<R.l(b);)A-=k,N=v(A),R=N.j(I);q(N)&&(N=S),V=V.add(N),b=K(b,R)}return new X(V,b)}r.A=function(b){return ue(this,b).h},r.and=function(b){for(var I=Math.max(this.g.length,b.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)&b.i(k);return new d(A,this.h&b.h)},r.or=function(b){for(var I=Math.max(this.g.length,b.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)|b.i(k);return new d(A,this.h|b.h)},r.xor=function(b){for(var I=Math.max(this.g.length,b.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)^b.i(k);return new d(A,this.h^b.h)};function Ee(b){for(var I=b.g.length+1,A=[],k=0;k<I;k++)A[k]=b.i(k)<<1|b.i(k-1)>>>31;return new d(A,b.h)}function ae(b,I){var A=I>>5;I%=32;for(var k=b.g.length-A,V=[],N=0;N<k;N++)V[N]=0<I?b.i(N+A)>>>I|b.i(N+A+1)<<32-I:b.i(N+A);return new d(V,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,P_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,Hi=d}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R_,Ga,A_,ec,ef,k_,N_,b_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in _))break e;_=_[U]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,T=!1,U={next:function(){if(!T&&_<u.length){var G=_++;return{value:m(G,u[G]),done:!1}}return T=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function x(u,m,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,T),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function S(u,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:x,S.apply(null,arguments)}function M(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function q(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,U,G){for(var le=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)le[rt-2]=arguments[rt];return m.prototype[U].apply(T,le)}}function Y(u){const m=u.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function L(u,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(y(T)){const U=u.length||0,G=T.length||0;u.length=U+G;for(let le=0;le<G;le++)u[U+le]=T[le]}else u.push(T)}}class K{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function $(u){return/^[\s\xa0]*$/.test(u)}function X(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function ue(u){return ue[" "](u),u}ue[" "]=function(){};var Ee=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ae(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function b(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function I(u){const m={};for(const _ in u)m[_]=u[_];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let _,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(_ in T)u[_]=T[_];for(let G=0;G<A.length;G++)_=A[G],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function V(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function N(u){p.setTimeout(()=>{throw u},0)}function R(){var u=_e;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Je{constructor(){this.h=this.g=null}add(m,_){const T=et.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var et=new K(()=>new _t,u=>u.reset());class _t{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ge,ce=!1,_e=new Je,de=()=>{const u=p.Promise.resolve(void 0);Ge=()=>{u.then(O)}};var O=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){N(_)}var m=et;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ce=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var je=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function Oe(u,m){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Ee){e:{try{ue(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Le[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Oe.aa.h.call(this)}}q(Oe,fe);var Le={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function $e(u,m,_,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=U,this.key=++Ue,this.da=this.fa=!1}function Xe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function dn(u){this.src=u,this.g={},this.h=0}dn.prototype.add=function(u,m,_,T,U){var G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);var le=hn(u,m,T,U);return-1<le?(m=u[le],_||(m.fa=!1)):(m=new $e(m,this.src,G,!!T,U),m.fa=_,u.push(m)),m};function sn(u,m){var _=m.type;if(_ in u.g){var T=u.g[_],U=Array.prototype.indexOf.call(T,m,void 0),G;(G=0<=U)&&Array.prototype.splice.call(T,U,1),G&&(Xe(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function hn(u,m,_,T){for(var U=0;U<u.length;++U){var G=u[U];if(!G.da&&G.listener==m&&G.capture==!!_&&G.ha==T)return U}return-1}var Vn="closure_lm_"+(1e6*Math.random()|0),Gn={};function on(u,m,_,T,U){if(Array.isArray(m)){for(var G=0;G<m.length;G++)on(u,m[G],_,T,U);return null}return _=ee(_),u&&u[Se]?u.K(m,_,v(T)?!!T.capture:!1,U):tt(u,m,_,!1,T,U)}function tt(u,m,_,T,U,G){if(!m)throw Error("Invalid event type");var le=v(U)?!!U.capture:!!U,rt=Ae(u);if(rt||(u[Vn]=rt=new dn(u)),_=rt.add(m,_,T,le,G),_.proxy)return _;if(T=ui(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)je||(U=le),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(ge(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ui(){function u(_){return m.call(u.src,u.listener,_)}const m=he;return u}function pr(u,m,_,T,U){if(Array.isArray(m))for(var G=0;G<m.length;G++)pr(u,m[G],_,T,U);else T=v(T)?!!T.capture:!!T,_=ee(_),u&&u[Se]?(u=u.i,m=String(m).toString(),m in u.g&&(G=u.g[m],_=hn(G,_,T,U),-1<_&&(Xe(G[_]),Array.prototype.splice.call(G,_,1),G.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ae(u))&&(m=u.g[m.toString()],u=-1,m&&(u=hn(m,_,T,U)),(_=-1<u?m[u]:null)&&re(_))}function re(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Se])sn(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(ge(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Ae(m))?(sn(_,u),_.h==0&&(_.src=null,m[Vn]=null)):Xe(u)}}}function ge(u){return u in Gn?Gn[u]:Gn[u]="on"+u}function he(u,m){if(u.da)u=!0;else{m=new Oe(m,this);var _=u.listener,T=u.ha||u.src;u.fa&&re(u),u=_.call(T,m)}return u}function Ae(u){return u=u[Vn],u instanceof dn?u:null}var C="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(u){return typeof u=="function"?u:(u[C]||(u[C]=function(m){return u.handleEvent(m)}),u[C])}function H(){J.call(this),this.i=new dn(this),this.M=this,this.F=null}q(H,J),H.prototype[Se]=!0,H.prototype.removeEventListener=function(u,m,_,T){pr(this,u,m,_,T)};function F(u,m){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new fe(m,u);else if(m instanceof fe)m.target=m.target||u;else{var U=m;m=new fe(T,u),k(m,U)}if(U=!0,_)for(var G=_.length-1;0<=G;G--){var le=m.g=_[G];U=ye(le,T,!0,m)&&U}if(le=m.g=u,U=ye(le,T,!0,m)&&U,U=ye(le,T,!1,m)&&U,_)for(G=0;G<_.length;G++)le=m.g=_[G],U=ye(le,T,!1,m)&&U}H.prototype.N=function(){if(H.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],T=0;T<_.length;T++)Xe(_[T]);delete u.g[m],u.h--}}this.F=null},H.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},H.prototype.L=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function ye(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,G=0;G<m.length;++G){var le=m[G];if(le&&!le.da&&le.capture==_){var rt=le.listener,kt=le.ha||le.src;le.fa&&sn(u.i,le),U=rt.call(kt,T)!==!1&&U}}return U&&!T.defaultPrevented}function Qe(u,m,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function at(u){u.g=Qe(()=>{u.g=null,u.i&&(u.i=!1,at(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Rt extends J{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:at(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function At(u){J.call(this),this.h=u,this.g={}}q(At,J);var Ot=[];function Kn(u){ae(u.g,function(m,_){this.g.hasOwnProperty(_)&&re(m)},u),u.g={}}At.prototype.N=function(){At.aa.N.call(this),Kn(this)},At.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mr=p.JSON.stringify,Qn=p.JSON.parse,Or=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function Lr(){}Lr.prototype.h=null;function ci(u){return u.h||(u.h=u.i())}function di(){}var fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nt(){fe.call(this,"d")}q(nt,fe);function In(){fe.call(this,"c")}q(In,fe);var gr={},ra=null;function ls(){return ra=ra||new H}gr.La="serverreachability";function ia(u){fe.call(this,gr.La,u)}q(ia,fe);function Mr(u){const m=ls();F(m,new ia(m))}gr.STAT_EVENT="statevent";function sa(u,m){fe.call(this,gr.STAT_EVENT,u),this.stat=m}q(sa,fe);function wt(u){const m=ls();F(m,new sa(m,u))}gr.Ma="timingevent";function Hs(u,m){fe.call(this,gr.Ma,u),this.size=m}q(Hs,fe);function Yn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function us(){this.g=!0}us.prototype.xa=function(){this.g=!1};function cs(u,m,_,T,U,G){u.info(function(){if(u.g)if(G)for(var le="",rt=G.split("&"),kt=0;kt<rt.length;kt++){var He=rt[kt].split("=");if(1<He.length){var Lt=He[0];He=He[1];var It=Lt.split("_");le=2<=It.length&&It[1]=="type"?le+(Lt+"="+He+"&"):le+(Lt+"=redacted&")}}else le=null;else le=G;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+_+`
`+le})}function qs(u,m,_,T,U,G,le){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+_+`
`+G+" "+le})}function Jn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Yc(u,_)+(T?" "+T:"")})}function oa(u,m){u.info(function(){return"TIMEOUT: "+m})}us.prototype.info=function(){};function Yc(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var U=T[1];if(Array.isArray(U)&&!(1>U.length)){var G=U[0];if(G!="noop"&&G!="stop"&&G!="close")for(var le=1;le<U.length;le++)U[le]=""}}}}return mr(_)}catch{return m}}var Gs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Al={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xn;function ds(){}q(ds,Lr),ds.prototype.g=function(){return new XMLHttpRequest},ds.prototype.i=function(){return{}},Xn=new ds;function Zn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.R=T||1,this.U=new At(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kl}function kl(){this.i=null,this.g="",this.h=!1}var aa={},Ks={};function Qs(u,m,_){u.L=1,u.v=gi(Cn(m)),u.m=_,u.P=!0,la(u,null)}function la(u,m){u.F=Date.now(),st(u),u.A=Cn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),vi(_.i,"t",T),u.C=0,_=u.j.J,u.h=new kl,u.g=Kl(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Rt(S(u.Y,u,u.g),u.O)),m=u.U,_=u.g,T=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Ot[0]=U.toString()),U=Ot);for(var G=0;G<U.length;G++){var le=on(_,U[G],T||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Mr(),cs(u.i,u.u,u.A,u.l,u.R,u.m)}Zn.prototype.ca=function(u){u=u.target;const m=this.M;m&&mn(u)==3?m.j():this.Y(u)},Zn.prototype.Y=function(u){try{if(u==this.g)e:{const It=mn(this.g);var m=this.g.Ba();const Mn=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||pa(this.g)))){this.J||It!=4||m==7||(m==8||0>=Mn?Mr(3):Mr(2)),hs(this);var _=this.g.Z();this.X=_;t:if(Nl(this)){var T=pa(this.g);u="";var U=T.length,G=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){On(this),hi(this);var le="";break t}this.h.i=new p.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(G&&m==U-1)});T.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,qs(this.i,this.u,this.A,this.l,this.R,It,_),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,kt=this.g;if((rt=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(rt)){var He=rt;break t}}He=null}if(_=He)Jn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ua(this,_);else{this.o=!1,this.s=3,wt(12),On(this),hi(this);break e}}if(this.P){_=!0;let Rn;for(;!this.J&&this.C<le.length;)if(Rn=Jc(this,le),Rn==Ks){It==4&&(this.s=4,wt(14),_=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==aa){this.s=4,wt(15),Jn(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else Jn(this.i,this.l,Rn,null),ua(this,Rn);if(Nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||le.length!=0||this.h.h||(this.s=1,wt(16),_=!1),this.o=this.o&&_,!_)Jn(this.i,this.l,le,"[Invalid Chunked Response]"),On(this),hi(this);else if(0<le.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),ga(Lt),Lt.M=!0,wt(11))}}else Jn(this.i,this.l,le,null),ua(this,le);It==4&&On(this),this.o&&!this.J&&(It==4?oo(this.j,this):(this.o=!1,st(this)))}else to(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),On(this),hi(this)}}}catch{}finally{}};function Nl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Jc(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?Ks:(_=Number(m.substring(_,T)),isNaN(_)?aa:(T+=1,T+_>m.length?Ks:(m=m.slice(T,T+_),u.C=T+_,m)))}Zn.prototype.cancel=function(){this.J=!0,On(this)};function st(u){u.S=Date.now()+u.I,bl(u,u.I)}function bl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Yn(S(u.ba,u),m)}function hs(u){u.B&&(p.clearTimeout(u.B),u.B=null)}Zn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(oa(this.i,this.A),this.L!=2&&(Mr(),wt(17)),On(this),this.s=2,hi(this)):bl(this,this.S-u)};function hi(u){u.j.G==0||u.J||oo(u.j,u)}function On(u){hs(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Kn(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ua(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||an(_.h,u))){if(!u.K&&an(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)so(_),ir(_);else break e;io(_),wt(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=Yn(S(_.Za,_),6e3));if(1>=Dl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else $r(_,11)}else if((u.K||_.g==u)&&so(_),!$(m))for(U=_.Da.g.parse(m),m=0;m<U.length;m++){let He=U[m];if(_.T=He[0],He=He[1],_.G==2)if(He[0]=="c"){_.K=He[1],_.ia=He[2];const Lt=He[3];Lt!=null&&(_.la=Lt,_.j.info("VER="+_.la));const It=He[4];It!=null&&(_.Aa=It,_.j.info("SVER="+_.Aa));const Mn=He[5];Mn!=null&&typeof Mn=="number"&&0<Mn&&(T=1.5*Mn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Rn=u.g;if(Rn){const _s=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_s){var G=T.h;G.g||_s.indexOf("spdy")==-1&&_s.indexOf("quic")==-1&&_s.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(ca(G,G.h),G.h=null))}if(T.D){const lo=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;lo&&(T.ya=lo,it(T.I,T.D,lo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var le=u;if(T.qa=Gl(T,T.J?T.ia:null,T.W),le.K){Vl(T.h,le);var rt=le,kt=T.L;kt&&(rt.I=kt),rt.B&&(hs(rt),st(rt)),T.g=le}else vs(T);0<_.i.length&&wr(_)}else He[0]!="stop"&&He[0]!="close"||$r(_,7);else _.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?$r(_,7):$t(_):He[0]!="noop"&&_.l&&_.l.ta(He),_.v=0)}}Mr(4)}catch{}}var jl=class{constructor(u,m){this.g=u,this.map=m}};function fs(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Dl(u){return u.h?1:u.g?u.g.size:0}function an(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ca(u,m){u.g?u.g.add(m):u.h=m}function Vl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}fs.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ol(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return Y(u.i)}function Ys(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],_=u.length,T=0;T<_;T++)m.push(u[T]);return m}m=[],_=0;for(T in u)m[_++]=u[T];return m}function Js(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const T in u)m[_++]=T;return m}}}function fi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Js(u),T=Ys(u),U=T.length,G=0;G<U;G++)m.call(void 0,T[G],_&&_[G],u)}var ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xc(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),U=null;if(0<=T){var G=u[_].substring(0,T);U=u[_].substring(T+1)}else G=u[_];m(G,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Fr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Fr){this.h=u.h,ms(this,u.j),this.o=u.o,this.g=u.g,pi(this,u.s),this.l=u.l;var m=u.i,_=new yr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),mi(this,_),this.m=u.m}else u&&(m=String(u).match(ps))?(this.h=!1,ms(this,m[1]||"",!0),this.o=We(m[2]||""),this.g=We(m[3]||"",!0),pi(this,m[4]),this.l=We(m[5]||"",!0),mi(this,m[6]||"",!0),this.m=We(m[7]||"")):(this.h=!1,this.i=new yr(null,this.h))}Fr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(yi(m,Xs,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(yi(m,Xs,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(yi(_,_.charAt(0)=="/"?Fl:Ml,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",yi(_,da)),u.join("")};function Cn(u){return new Fr(u)}function ms(u,m,_){u.j=_?We(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function pi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function mi(u,m,_){m instanceof yr?(u.i=m,vr(u.i,u.h)):(_||(m=yi(m,Ul)),u.i=new yr(m,u.h))}function it(u,m,_){u.i.set(m,_)}function gi(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function We(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function yi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Ll),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ll(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xs=/[#\/\?@]/g,Ml=/[#\?:]/g,Fl=/[#\?]/g,Ul=/[#\?@]/g,da=/#/g;function yr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Bt(u){u.g||(u.g=new Map,u.h=0,u.i&&Xc(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=yr.prototype,r.add=function(u,m){Bt(this),this.i=null,u=Ln(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function er(u,m){Bt(u),m=Ln(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function tr(u,m){return Bt(u),m=Ln(u,m),u.g.has(m)}r.forEach=function(u,m){Bt(this),this.g.forEach(function(_,T){_.forEach(function(U){u.call(m,U,T,this)},this)},this)},r.na=function(){Bt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const U=u[T];for(let G=0;G<U.length;G++)_.push(m[T])}return _},r.V=function(u){Bt(this);let m=[];if(typeof u=="string")tr(this,u)&&(m=m.concat(this.g.get(Ln(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Bt(this),this.i=null,u=Ln(this,u),tr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function vi(u,m,_){er(u,m),0<_.length&&(u.i=null,u.g.set(Ln(u,m),Y(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const G=encodeURIComponent(String(T)),le=this.V(T);for(T=0;T<le.length;T++){var U=G;le[T]!==""&&(U+="="+encodeURIComponent(String(le[T]))),u.push(U)}}return this.i=u.join("&")};function Ln(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function vr(u,m){m&&!u.j&&(Bt(u),u.i=null,u.g.forEach(function(_,T){var U=T.toLowerCase();T!=U&&(er(this,T),vi(this,U,_))},u)),u.j=m}function Zc(u,m){const _=new us;if(p.Image){const T=new Image;T.onload=M(pn,_,"TestLoadImage: loaded",!0,m,T),T.onerror=M(pn,_,"TestLoadImage: error",!1,m,T),T.onabort=M(pn,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=M(pn,_,"TestLoadImage: timeout",!1,m,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function zl(u,m){const _=new us,T=new AbortController,U=setTimeout(()=>{T.abort(),pn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(G=>{clearTimeout(U),G.ok?pn(_,"TestPingServer: ok",!0,m):pn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),pn(_,"TestPingServer: error",!1,m)})}function pn(u,m,_,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(_)}catch{}}function ed(){this.g=new Or}function Bl(u,m,_){const T=_||"";try{fi(u,function(U,G){let le=U;v(U)&&(le=mr(U)),m.push(T+G+"="+encodeURIComponent(le))})}catch(U){throw m.push(T+"type="+encodeURIComponent("_badmap")),U}}function Ur(u){this.l=u.Ub||null,this.j=u.eb||!1}q(Ur,Lr),Ur.prototype.g=function(){return new gs(this.l,this.j)},Ur.prototype.i=(function(u){return function(){return u}})({});function gs(u,m){H.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(gs,H),r=gs.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,rr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rr(this)),this.g&&(this.readyState=3,rr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?nr(this):rr(this),this.readyState==3&&$l(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,nr(this))},r.Qa=function(u){this.g&&(this.response=u,nr(this))},r.ga=function(){this.g&&nr(this)};function nr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,rr(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function rr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function zr(u){let m="";return ae(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function _i(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=zr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):it(u,m,_))}function ht(u){H.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(ht,H);var td=/^https?$/i,ha=["POST","PUT"];r=ht.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xn.g(),this.v=this.o?ci(this.o):ci(Xn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(G){ys(this,G);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)_.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const G of T.keys())_.set(G,T.get(G));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),U=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(ha,m,void 0))||T||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,le]of _)this.g.setRequestHeader(G,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eo(this),this.u=!0,this.g.send(u),this.u=!1}catch(G){ys(this,G)}};function ys(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Zs(u),Pn(u)}function Zs(u){u.A||(u.A=!0,F(u,"complete"),F(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,F(this,"complete"),F(this,"abort"),Pn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pn(this,!0)),ht.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?fa(this):this.bb())},r.bb=function(){fa(this)};function fa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||mn(u)!=4||u.Z()!=2)){if(u.u&&mn(u)==4)Qe(u.Ea,0,u);else if(F(u,"readystatechange"),mn(u)==4){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=le===0){var U=String(u.D).match(ps)[1]||null;!U&&p.self&&p.self.location&&(U=p.self.location.protocol.slice(0,-1)),T=!td.test(U?U.toLowerCase():"")}_=T}if(_)F(u,"complete"),F(u,"success");else{u.m=6;try{var G=2<mn(u)?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.Z()+"]",Zs(u)}}finally{Pn(u)}}}}function Pn(u,m){if(u.g){eo(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||F(u,"ready");try{_.onreadystatechange=T}catch{}}}function eo(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function mn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Qn(m)}};function pa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function to(u){const m={};u=(u.g&&2<=mn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if($(u[T]))continue;var _=V(u[T]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=m[U]||[];m[U]=G,G.push(_)}b(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _r(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ma(u){this.Aa=0,this.i=[],this.j=new us,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_r("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_r("baseRetryDelayMs",5e3,u),this.cb=_r("retryDelaySeedMs",1e4,u),this.Wa=_r("forwardChannelMaxRetries",2,u),this.wa=_r("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new fs(u&&u.concurrentRequestLimit),this.Da=new ed,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ma.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,T){wt(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Gl(this,null,this.W),wr(this)};function $t(u){if(no(u),u.G==3){var m=u.U++,_=Cn(u.I);if(it(_,"SID",u.K),it(_,"RID",m),it(_,"TYPE","terminate"),Br(u,_),m=new Zn(u,u.j,m),m.L=2,m.v=gi(Cn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Kl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),st(m)}ql(u)}function ir(u){u.g&&(ga(u),u.g.cancel(),u.g=null)}function no(u){ir(u),u.u&&(p.clearTimeout(u.u),u.u=null),so(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function wr(u){if(!Sn(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ge||de(),ce||(Ge(),ce=!0),_e.add(m,u),u.B=0}}function nd(u,m){return Dl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Yn(S(u.Ga,u,m),Hl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Zn(this,this.j,u);let G=this.o;if(this.S&&(G?(G=I(G),k(G,this.S)):G=this.S),this.m!==null||this.O||(U.H=G,G=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=wi(this,U,m),_=Cn(this.I),it(_,"RID",u),it(_,"CVER",22),this.D&&it(_,"X-HTTP-Session-Id",this.D),Br(this,_),G&&(this.O?m="headers="+encodeURIComponent(String(zr(G)))+"&"+m:this.m&&_i(_,this.m,G)),ca(this.h,U),this.Ua&&it(_,"TYPE","init"),this.P?(it(_,"$req",m),it(_,"SID","null"),U.T=!0,Qs(U,_,null)):Qs(U,_,m),this.G=2}}else this.G==3&&(u?ro(this,u):this.i.length==0||Sn(this.h)||ro(this))};function ro(u,m){var _;m?_=m.l:_=u.U++;const T=Cn(u.I);it(T,"SID",u.K),it(T,"RID",_),it(T,"AID",u.T),Br(u,T),u.m&&u.o&&_i(T,u.m,u.o),_=new Zn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=wi(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ca(u.h,_),Qs(_,T,m)}function Br(u,m){u.H&&ae(u.H,function(_,T){it(m,T,_)}),u.l&&fi({},function(_,T){it(m,T,_)})}function wi(u,m,_){_=Math.min(u.i.length,_);var T=u.l?S(u.l.Na,u.l,u):null;e:{var U=u.i;let G=-1;for(;;){const le=["count="+_];G==-1?0<_?(G=U[0].g,le.push("ofs="+G)):G=0:le.push("ofs="+G);let rt=!0;for(let kt=0;kt<_;kt++){let He=U[kt].g;const Lt=U[kt].map;if(He-=G,0>He)G=Math.max(0,U[kt].g-100),rt=!1;else try{Bl(Lt,le,"req"+He+"_")}catch{T&&T(Lt)}}if(rt){T=le.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,T}function vs(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ge||de(),ce||(Ge(),ce=!0),_e.add(m,u),u.v=0}}function io(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Yn(S(u.Fa,u),Hl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Yn(S(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),ir(this),Wl(this))};function ga(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Wl(u){u.g=new Zn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Cn(u.qa);it(m,"RID","rpc"),it(m,"SID",u.K),it(m,"AID",u.T),it(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(m,"TO",u.ja),it(m,"TYPE","xmlhttp"),Br(u,m),u.m&&u.o&&_i(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=gi(Cn(m)),_.m=null,_.P=!0,la(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ir(this),io(this),wt(19))};function so(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function oo(u,m){var _=null;if(u.g==m){so(u),ga(u),u.g=null;var T=2}else if(an(u.h,m))_=m.D,Vl(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;T=ls(),F(T,new Hs(T,_)),wr(u)}else vs(u);else if(U=m.s,U==3||U==0&&0<m.X||!(T==1&&nd(u,m)||T==2&&io(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),U){case 1:$r(u,5);break;case 4:$r(u,10);break;case 3:$r(u,6);break;default:$r(u,2)}}}function Hl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function $r(u,m){if(u.j.info("Error code "+m),m==2){var _=S(u.fb,u),T=u.Xa;const U=!T;T=new Fr(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||ms(T,"https"),gi(T),U?Zc(T.toString(),_):zl(T.toString(),_)}else wt(2);u.G=0,u.l&&u.l.sa(m),ql(u),no(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function ql(u){if(u.G=0,u.ka=[],u.l){const m=Ol(u.h);(m.length!=0||u.i.length!=0)&&(L(u.ka,m),L(u.ka,u.i),u.h.i.length=0,Y(u.i),u.i.length=0),u.l.ra()}}function Gl(u,m,_){var T=_ instanceof Fr?Cn(_):new Fr(_);if(T.g!="")m&&(T.g=m+"."+T.g),pi(T,T.s);else{var U=p.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var G=new Fr(null);T&&ms(G,T),m&&(G.g=m),U&&pi(G,U),_&&(G.l=_),T=G}return _=u.D,m=u.ya,_&&m&&it(T,_,m),it(T,"VER",u.la),Br(u,T),T}function Kl(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new ht(new Ur({eb:_})):new ht(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ya(){}r=ya.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ao(){}ao.prototype.g=function(u,m){return new ln(u,m)};function ln(u,m){H.call(this),this.g=new ma(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!$(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!$(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Er(this)}q(ln,H),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){$t(this.g)},ln.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=mr(u),u=_);m.i.push(new jl(m.Ya++,u)),m.G==3&&wr(m)},ln.prototype.N=function(){this.g.l=null,delete this.j,$t(this.g),delete this.g,ln.aa.N.call(this)};function Ql(u){nt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}q(Ql,nt);function Yl(){In.call(this),this.status=1}q(Yl,In);function Er(u){this.g=u}q(Er,ya),Er.prototype.ua=function(){F(this.g,"a")},Er.prototype.ta=function(u){F(this.g,new Ql(u))},Er.prototype.sa=function(u){F(this.g,new Yl)},Er.prototype.ra=function(){F(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,b_=function(){return new ao},N_=function(){return ls()},k_=gr,ef={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gs.NO_ERROR=0,Gs.TIMEOUT=8,Gs.HTTP_ERROR=6,ec=Gs,Al.COMPLETE="complete",A_=Al,di.EventType=fn,fn.OPEN="a",fn.CLOSE="b",fn.ERROR="c",fn.MESSAGE="d",H.prototype.listen=H.prototype.K,Ga=di,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,R_=ht}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const vy="@firebase/firestore",_y="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new If("@firebase/firestore");function No(){return Us.logLevel}function me(r,...e){if(Us.logLevel<=ze.DEBUG){const t=e.map(Mf);Us.debug(`Firestore (${Xo}): ${r}`,...t)}}function si(r,...e){if(Us.logLevel<=ze.ERROR){const t=e.map(Mf);Us.error(`Firestore (${Xo}): ${r}`,...t)}}function Ki(r,...e){if(Us.logLevel<=ze.WARN){const t=e.map(Mf);Us.warn(`Firestore (${Xo}): ${r}`,...t)}}function Mf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,j_(r,i,t)}function j_(r,e,t){let i=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw si(i),new Error(i)}function Ze(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||j_(e,o,i)}function Ve(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class I1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class S1{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ni,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ni)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string",31837,{l:i}),new D_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class C1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class P1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new C1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const i=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=A1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Me(r,e){return r<e?-1:r>e?1:0}function tf(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Me(i,o);{const l=V_(),d=k1(l.encode(Ey(r,t)),l.encode(Ey(e,t)));return d!==0?d:Me(i,o)}}t+=i>65535?2:1}return Me(r.length,e.length)}function Ey(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function k1(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Me(r[t],e[t]);return Me(r.length,e.length)}function zo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="__name__";class Cr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ne(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Cr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Me(e.length,t.length)}static compareSegments(e,t){const i=Cr.isNumericId(e),o=Cr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Cr.extractNumericId(e).compare(Cr.extractNumericId(t)):tf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hi.fromString(e.substring(4,e.length-2))}}class ct extends Cr{construct(e,t,i){return new ct(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ct(t)}static emptyPath(){return new ct([])}}const N1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends Cr{construct(e,t,i){return new Gt(e,t,i)}static isValidIdentifier(e){return N1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ty}static keyField(){return new Gt([Ty])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new xe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new xe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new xe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(l(),o++)}if(l(),d)throw new xe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(t)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(ct.fromString(e))}static fromName(e){return new Ce(ct.fromString(e).popFirst(5))}static empty(){return new Ce(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(r,e,t){if(!t)throw new xe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function b1(r,e,t,i){if(e===!0&&i===!0)throw new xe(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function xy(r){if(!Ce.isDocumentKey(r))throw new xe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Iy(r){if(Ce.isDocumentKey(r))throw new xe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function L_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Uf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ne(12329,{type:typeof r})}function oi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new xe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uf(r);throw new xe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(r,e){const t={typeString:r};return e&&(t.value=e),t}function xl(r,e){if(!L_(r))throw new xe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new xe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=-62135596800,Cy=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Cy);return new dt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sy)throw new xe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cy}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xl(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Pt("string",dt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new dt(0,0))}static max(){return new De(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=-1;function j1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=De.fromTimestamp(i===1e9?new dt(t+1,0):new dt(t,i));return new Qi(o,Ce.empty(),e)}function D1(r){return new Qi(r.readTime,r.key,cl)}class Qi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Qi(De.min(),Ce.empty(),cl)}static max(){return new Qi(De.max(),Ce.empty(),cl)}}function V1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==O1)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,i)=>{t(e)}))}static reject(e){return new Z(((t,i)=>{i(e)}))}static waitFor(e){return new Z(((t,i)=>{let o=0,l=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++l,d&&l===o&&t()}),(y=>i(y)))})),d=!0,l===o&&t()}))}static or(e){let t=Z.resolve(!1);for(const i of e)t=t.next((o=>o?Z.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new Z(((i,o)=>{const l=e.length,d=new Array(l);let p=0;for(let y=0;y<l;y++){const v=y;t(e[v]).next((E=>{d[v]=E,++p,p===l&&i(d)}),(E=>o(E)))}}))}static doWhile(e,t){return new Z(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function M1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ea(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}jc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=-1;function Dc(r){return r==null}function mc(r){return r===0&&1/r==-1/0}function F1(r){return typeof r=="number"&&Number.isInteger(r)&&!mc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="";function U1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Py(e)),e=z1(r.get(t),e);return Py(e)}function z1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case M_:t+="";break;default:t+=l}}return t}function Py(r){return r+M_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function os(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function F_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??qt.RED,this.left=o??qt.EMPTY,this.right=l??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new qt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return qt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ay(this.data.getIterator())}getIteratorFrom(e){return new Ay(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class Ay{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Vt(Gt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new U_("Invalid base64 string: "+l):l}})(e);return new Qt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new Qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const B1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(r){if(Ze(!!r,39018),typeof r=="string"){let e=0;const t=B1.exec(r);if(Ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(r.seconds),nanos:Tt(r.nanos)}}function Tt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ji(r){return typeof r=="string"?Qt.fromBase64String(r):Qt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="server_timestamp",B_="__type__",$_="__previous_value__",W_="__local_write_time__";function Bf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[B_])===null||t===void 0?void 0:t.stringValue)===z_}function Vc(r){const e=r.mapValue.fields[$_];return Bf(e)?Vc(e):e}function dl(r){const e=Yi(r.mapValue.fields[W_].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,i,o,l,d,p,y,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=E}}const gc="(default)";class hl{constructor(e,t){this.projectId=e,this.database=t||gc}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database===gc}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="__type__",W1="__max__",Gu={mapValue:{}},q_="__vector__",yc="value";function Xi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bf(r)?4:q1(r)?9007199254740991:H1(r)?10:11:Ne(28295,{value:r})}function Dr(r,e){if(r===e)return!0;const t=Xi(r);if(t!==Xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return dl(r).isEqual(dl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Yi(o.timestampValue),p=Yi(l.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ji(o.bytesValue).isEqual(Ji(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return Tt(o.geoPointValue.latitude)===Tt(l.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Tt(o.integerValue)===Tt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=Tt(o.doubleValue),p=Tt(l.doubleValue);return d===p?mc(d)===mc(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return zo(r.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Ry(d)!==Ry(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!Dr(d[y],p[y])))return!1;return!0})(r,e);default:return Ne(52216,{left:r})}}function fl(r,e){return(r.values||[]).find((t=>Dr(t,e)))!==void 0}function Bo(r,e){if(r===e)return 0;const t=Xi(r),i=Xi(e);if(t!==i)return Me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const p=Tt(l.integerValue||l.doubleValue),y=Tt(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(r,e);case 3:return ky(r.timestampValue,e.timestampValue);case 4:return ky(dl(r),dl(e));case 5:return tf(r.stringValue,e.stringValue);case 6:return(function(l,d){const p=Ji(l),y=Ji(d);return p.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const p=l.split("/"),y=d.split("/");for(let v=0;v<p.length&&v<y.length;v++){const E=Me(p[v],y[v]);if(E!==0)return E}return Me(p.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const p=Me(Tt(l.latitude),Tt(d.latitude));return p!==0?p:Me(Tt(l.longitude),Tt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ny(r.arrayValue,e.arrayValue);case 10:return(function(l,d){var p,y,v,E;const x=l.fields||{},S=d.fields||{},M=(p=x[yc])===null||p===void 0?void 0:p.arrayValue,q=(y=S[yc])===null||y===void 0?void 0:y.arrayValue,Y=Me(((v=M==null?void 0:M.values)===null||v===void 0?void 0:v.length)||0,((E=q==null?void 0:q.values)===null||E===void 0?void 0:E.length)||0);return Y!==0?Y:Ny(M,q)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Gu.mapValue&&d===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(d===Gu.mapValue)return-1;const p=l.fields||{},y=Object.keys(p),v=d.fields||{},E=Object.keys(v);y.sort(),E.sort();for(let x=0;x<y.length&&x<E.length;++x){const S=tf(y[x],E[x]);if(S!==0)return S;const M=Bo(p[y[x]],v[E[x]]);if(M!==0)return M}return Me(y.length,E.length)})(r.mapValue,e.mapValue);default:throw Ne(23264,{le:t})}}function ky(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=Yi(r),i=Yi(e),o=Me(t.seconds,i.seconds);return o!==0?o:Me(t.nanos,i.nanos)}function Ny(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Bo(t[o],i[o]);if(l)return l}return Me(t.length,i.length)}function $o(r){return nf(r)}function nf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Yi(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ji(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ce.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=nf(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of i)l?l=!1:o+=",",o+=`${d}:${nf(t.fields[d])}`;return o+"}"})(r.mapValue):Ne(61005,{value:r})}function tc(r){switch(Xi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vc(r);return e?16+tc(e):16;case 5:return 2*r.stringValue.length;case 6:return Ji(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+tc(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return os(i.fields,((l,d)=>{o+=l.length+tc(d)})),o})(r.mapValue);default:throw Ne(13486,{value:r})}}function rf(r){return!!r&&"integerValue"in r}function $f(r){return!!r&&"arrayValue"in r}function by(r){return!!r&&"nullValue"in r}function jy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function nc(r){return!!r&&"mapValue"in r}function H1(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[H_])===null||t===void 0?void 0:t.stringValue)===q_}function tl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return os(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=tl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function q1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===W1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!nc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(t)}setAll(e){let t=Gt.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=p.popLast()}d?i[p.lastSegment()]=tl(d):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());nc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];nc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){os(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new xn(tl(this.value))}}function G_(r){const e=[];return os(r.fields,((t,i)=>{const o=new Gt([t]);if(nc(i)){const l=G_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,i,o,l,d,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=d,this.documentState=p}static newInvalidDocument(e){return new nn(e,0,De.min(),De.min(),De.min(),xn.empty(),0)}static newFoundDocument(e,t,i,o){return new nn(e,1,t,De.min(),i,o,0)}static newNoDocument(e,t){return new nn(e,2,t,De.min(),De.min(),xn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,De.min(),De.min(),xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t){this.position=e,this.inclusive=t}}function Dy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?i=Ce.comparator(Ce.fromName(d.referenceValue),t.key):i=Bo(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Dr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t="asc"){this.field=e,this.dir=t}}function G1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{}class jt extends K_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Q1(e,t,i):t==="array-contains"?new X1(e,i):t==="in"?new Z1(e,i):t==="not-in"?new eC(e,i):t==="array-contains-any"?new tC(e,i):new jt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Y1(e,i):new J1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&Xi(this.value)===Xi(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vr extends K_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Vr(e,t)}matches(e){return Q_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Q_(r){return r.op==="and"}function Y_(r){return K1(r)&&Q_(r)}function K1(r){for(const e of r.filters)if(e instanceof Vr)return!1;return!0}function sf(r){if(r instanceof jt)return r.field.canonicalString()+r.op.toString()+$o(r.value);if(Y_(r))return r.filters.map((e=>sf(e))).join(",");{const e=r.filters.map((t=>sf(t))).join(",");return`${r.op}(${e})`}}function J_(r,e){return r instanceof jt?(function(i,o){return o instanceof jt&&i.op===o.op&&i.field.isEqual(o.field)&&Dr(i.value,o.value)})(r,e):r instanceof Vr?(function(i,o){return o instanceof Vr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,d,p)=>l&&J_(d,o.filters[p])),!0):!1})(r,e):void Ne(19439)}function X_(r){return r instanceof jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`})(r):r instanceof Vr?(function(t){return t.op.toString()+" {"+t.getFilters().map(X_).join(" ,")+"}"})(r):"Filter"}class Q1 extends jt{constructor(e,t,i){super(e,t,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class Y1 extends jt{constructor(e,t){super(e,"in",t),this.keys=Z_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class J1 extends jt{constructor(e,t){super(e,"not-in",t),this.keys=Z_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Z_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ce.fromName(i.referenceValue)))}class X1 extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $f(t)&&fl(t.arrayValue,this.value)}}class Z1 extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fl(this.value.arrayValue,t)}}class eC extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fl(this.value.arrayValue,t)}}class tC extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$f(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>fl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t=null,i=[],o=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=d,this.endAt=p,this.Pe=null}}function Oy(r,e=null,t=[],i=[],o=null,l=null,d=null){return new nC(r,e,t,i,o,l,d)}function Wf(r){const e=Ve(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>sf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Dc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>$o(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>$o(i))).join(",")),e.Pe=t}return e.Pe}function Hf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!G1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!J_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Vy(r.startAt,e.startAt)&&Vy(r.endAt,e.endAt)}function of(r){return Ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t=null,i=[],o=[],l=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=y,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function rC(r,e,t,i,o,l,d,p){return new Oc(r,e,t,i,o,l,d,p)}function qf(r){return new Oc(r)}function Ly(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function iC(r){return r.collectionGroup!==null}function nl(r){const e=Ve(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Vt(Gt.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new _c(l,i))})),t.has(Gt.keyField().canonicalString())||e.Te.push(new _c(Gt.keyField(),i))}return e.Te}function kr(r){const e=Ve(r);return e.Ie||(e.Ie=sC(e,nl(r))),e.Ie}function sC(r,e){if(r.limitType==="F")return Oy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new _c(o.field,l)}));const t=r.endAt?new vc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new vc(r.startAt.position,r.startAt.inclusive):null;return Oy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function af(r,e,t){return new Oc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Lc(r,e){return Hf(kr(r),kr(e))&&r.limitType===e.limitType}function e0(r){return`${Wf(kr(r))}|lt:${r.limitType}`}function bo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>X_(o))).join(", ")}]`),Dc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>$o(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>$o(o))).join(",")),`Target(${i})`})(kr(r))}; limitType=${r.limitType})`}function Mc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ce.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of nl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,y){const v=Dy(d,p,y);return d.inclusive?v<=0:v<0})(i.startAt,nl(i),o)||i.endAt&&!(function(d,p,y){const v=Dy(d,p,y);return d.inclusive?v>=0:v>0})(i.endAt,nl(i),o))})(r,e)}function oC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function t0(r){return(e,t)=>{let i=!1;for(const o of nl(r)){const l=aC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function aC(r,e,t){const i=r.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,d,p){const y=d.data.field(l),v=p.data.field(l);return y!==null&&v!==null?Bo(y,v):Ne(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){os(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return F_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new gt(Ce.comparator);function ai(){return lC}const n0=new gt(Ce.comparator);function Ka(...r){let e=n0;for(const t of r)e=e.insert(t.key,t);return e}function r0(r){let e=n0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ds(){return rl()}function i0(){return rl()}function rl(){return new $s((r=>r.toString()),((r,e)=>r.isEqual(e)))}const uC=new gt(Ce.comparator),cC=new Vt(Ce.comparator);function Be(...r){let e=cC;for(const t of r)e=e.add(t);return e}const dC=new Vt(Me);function hC(){return dC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(e)?"-0":e}}function s0(r){return{integerValue:""+r}}function fC(r,e){return F1(e)?s0(e):Gf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this._=void 0}}function pC(r,e,t){return r instanceof wc?(function(o,l){const d={fields:{[B_]:{stringValue:z_},[W_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Bf(l)&&(l=Vc(l)),l&&(d.fields[$_]=l),{mapValue:d}})(t,e):r instanceof pl?a0(r,e):r instanceof ml?l0(r,e):(function(o,l){const d=o0(o,l),p=My(d)+My(o.Ee);return rf(d)&&rf(o.Ee)?s0(p):Gf(o.serializer,p)})(r,e)}function mC(r,e,t){return r instanceof pl?a0(r,e):r instanceof ml?l0(r,e):t}function o0(r,e){return r instanceof Ec?(function(i){return rf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class wc extends Fc{}class pl extends Fc{constructor(e){super(),this.elements=e}}function a0(r,e){const t=u0(e);for(const i of r.elements)t.some((o=>Dr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class ml extends Fc{constructor(e){super(),this.elements=e}}function l0(r,e){let t=u0(e);for(const i of r.elements)t=t.filter((o=>!Dr(o,i)));return{arrayValue:{values:t}}}class Ec extends Fc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function My(r){return Tt(r.integerValue||r.doubleValue)}function u0(r){return $f(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function gC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof pl&&o instanceof pl||i instanceof ml&&o instanceof ml?zo(i.elements,o.elements,Dr):i instanceof Ec&&o instanceof Ec?Dr(i.Ee,o.Ee):i instanceof wc&&o instanceof wc})(r.transform,e.transform)}class yC{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Uc{}function c0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Kf(r.key,fr.none()):new Il(r.key,r.data,fr.none());{const t=r.data,i=xn.empty();let o=new Vt(Gt.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),o=o.add(l)}return new as(r.key,i,new Dn(o.toArray()),fr.none())}}function vC(r,e,t){r instanceof Il?(function(o,l,d){const p=o.value.clone(),y=Uy(o.fieldTransforms,l,d.transformResults);p.setAll(y),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,t):r instanceof as?(function(o,l,d){if(!rc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const p=Uy(o.fieldTransforms,l,d.transformResults),y=l.data;y.setAll(d0(o)),y.setAll(p),l.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function il(r,e,t,i){return r instanceof Il?(function(l,d,p,y){if(!rc(l.precondition,d))return p;const v=l.value.clone(),E=zy(l.fieldTransforms,y,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof as?(function(l,d,p,y){if(!rc(l.precondition,d))return p;const v=zy(l.fieldTransforms,y,d),E=d.data;return E.setAll(d0(l)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(r,e,t,i):(function(l,d,p){return rc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,t)}function _C(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=o0(i.transform,o||null);l!=null&&(t===null&&(t=xn.empty()),t.set(i.field,l))}return t||null}function Fy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&zo(i,o,((l,d)=>gC(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Il extends Uc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class as extends Uc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function d0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Uy(r,e,t){const i=new Map;Ze(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,p=e.data.field(l.field);i.set(l.field,mC(d,p,t[o]))}return i}function zy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);i.set(o.field,pC(l,d,e))}return i}class Kf extends Uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wC extends Uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&vC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=il(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=il(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=i0();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let p=this.applyToLocalView(d,l.mutatedFields);p=t.has(o.key)?null:p;const y=c0(d,p);y!==null&&i.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(De.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((t,i)=>Fy(t,i)))&&zo(this.baseMutations,e.baseMutations,((t,i)=>Fy(t,i)))}}class Qf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ze(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return uC})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,i[d].version);return new Qf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,qe;function IC(r){switch(r){case te.OK:return Ne(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ne(15467,{code:r})}}function h0(r){if(r===void 0)return si("GRPC error has no .code"),te.UNKNOWN;switch(r){case Ct.OK:return te.OK;case Ct.CANCELLED:return te.CANCELLED;case Ct.UNKNOWN:return te.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return te.INTERNAL;case Ct.UNAVAILABLE:return te.UNAVAILABLE;case Ct.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Ct.NOT_FOUND:return te.NOT_FOUND;case Ct.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Ct.ABORTED:return te.ABORTED;case Ct.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Ct.DATA_LOSS:return te.DATA_LOSS;default:return Ne(39323,{code:r})}}(qe=Ct||(Ct={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new Hi([4294967295,4294967295],0);function By(r){const e=V_().encode(r),t=new P_;return t.update(e),new Uint8Array(t.digest())}function $y(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Hi([t,i],0),new Hi([o,l],0)]}class Yf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Qa(`Invalid padding: ${t}`);if(i<0)throw new Qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Hi.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Hi.fromNumber(i)));return o.compare(SC)===1&&(o=new Hi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=By(e),[i,o]=$y(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new Yf(l,o,t);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.fe===0)return;const t=By(e),[i,o]=$y(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new zc(De.min(),o,new gt(Me),ai(),Be())}}class Sl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Sl(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class f0{constructor(e,t){this.targetId=e,this.De=t}}class p0{constructor(e,t,i=Qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Wy{constructor(){this.ve=0,this.Ce=Hy(),this.Fe=Qt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Be(),t=Be(),i=Be();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ne(38017,{changeType:l})}})),new Sl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Hy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class CC{constructor(e){this.We=e,this.Ge=new Map,this.ze=ai(),this.je=Ku(),this.Je=Ku(),this.He=new gt(Me)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(of(l))if(i===0){const d=new Ce(l.path);this.Xe(t,d,nn.newNoDocument(d,De.min()))}else Ze(i===1,20013,{expectedCount:i});else{const d=this.ot(t);if(d!==i){const p=this._t(e),y=p?this.ut(p,e,d):1;if(y!==0){this.rt(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let d,p;try{d=Ji(i).toUint8Array()}catch(y){if(y instanceof U_)return Ki("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new Yf(d,o,l)}catch(y){return Ki(y instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.fe===0?null:p}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const d=this.We.lt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,d)=>{const p=this.st(d);if(p){if(l.current&&of(p.target)){const y=new Ce(p.target.path);this.Tt(y).has(d)||this.It(d,y)||this.Xe(d,y,nn.newNoDocument(y,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}}));let i=Be();this.Je.forEach(((l,d)=>{let p=!0;d.forEachWhile((y=>{const v=this.st(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ze.forEach(((l,d)=>d.setReadTime(e)));const o=new zc(e,t,this.He,this.ze,i);return this.ze=ai(),this.je=Ku(),this.Je=Ku(),this.He=new gt(Me),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Wy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Vt(Me),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Vt(Me),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Wy),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ku(){return new gt(Ce.comparator)}function Hy(){return new gt(Ce.comparator)}const PC={asc:"ASCENDING",desc:"DESCENDING"},RC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AC={and:"AND",or:"OR"};class kC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lf(r,e){return r.useProto3Json||Dc(e)?e:{value:e}}function Tc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function NC(r,e){return Tc(r,e.toTimestamp())}function Nr(r){return Ze(!!r,49232),De.fromTimestamp((function(t){const i=Yi(t);return new dt(i.seconds,i.nanos)})(r))}function Jf(r,e){return uf(r,e).canonicalString()}function uf(r,e){const t=(function(o){return new ct(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function g0(r){const e=ct.fromString(r);return Ze(E0(e),10190,{key:e.toString()}),e}function cf(r,e){return Jf(r.databaseId,e.path)}function Vh(r,e){const t=g0(e);if(t.get(1)!==r.databaseId.projectId)throw new xe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new xe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ce(v0(t))}function y0(r,e){return Jf(r.databaseId,e)}function bC(r){const e=g0(r);return e.length===4?ct.emptyPath():v0(e)}function df(r){return new ct(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function v0(r){return Ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function qy(r,e,t){return{name:cf(r,e),fields:t.value.mapValue.fields}}function jC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ne(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(Ze(E===void 0||typeof E=="string",58123),Qt.fromBase64String(E||"")):(Ze(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Qt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const E=v.code===void 0?te.UNKNOWN:h0(v.code);return new xe(E,v.message||"")})(d);t=new p0(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Vh(r,i.document.name),l=Nr(i.document.updateTime),d=i.document.createTime?Nr(i.document.createTime):De.min(),p=new xn({mapValue:{fields:i.document.fields}}),y=nn.newFoundDocument(o,l,d,p),v=i.targetIds||[],E=i.removedTargetIds||[];t=new ic(v,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Vh(r,i.document),l=i.readTime?Nr(i.readTime):De.min(),d=nn.newNoDocument(o,l),p=i.removedTargetIds||[];t=new ic([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Vh(r,i.document),l=i.removedTargetIds||[];t=new ic([],l,o,null)}else{if(!("filter"in e))return Ne(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,d=new xC(o,l),p=i.targetId;t=new f0(p,d)}}return t}function DC(r,e){let t;if(e instanceof Il)t={update:qy(r,e.key,e.value)};else if(e instanceof Kf)t={delete:cf(r,e.key)};else if(e instanceof as)t={update:qy(r,e.key,e.data),updateMask:$C(e.fieldMask)};else{if(!(e instanceof wC))return Ne(16599,{Rt:e.type});t={verify:cf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const p=d.transform;if(p instanceof wc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof pl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ml)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Ec)return{fieldPath:d.field.canonicalString(),increment:p.Ee};throw Ne(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:NC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ne(27497)})(r,e.precondition)),t}function VC(r,e){return r&&r.length>0?(Ze(e!==void 0,14353),r.map((t=>(function(o,l){let d=o.updateTime?Nr(o.updateTime):Nr(l);return d.isEqual(De.min())&&(d=Nr(l)),new yC(d,o.transformResults||[])})(t,e)))):[]}function OC(r,e){return{documents:[y0(r,e.path)]}}function LC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=y0(r,o);const l=(function(v){if(v.length!==0)return w0(Vr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(v){if(v.length!==0)return v.map((E=>(function(S){return{field:jo(S.field),direction:UC(S.dir)}})(E)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=lf(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function MC(r){let e=bC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ze(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(x){const S=_0(x);return S instanceof Vr&&Y_(S)?S.getFilters():[S]})(t.where));let d=[];t.orderBy&&(d=(function(x){return x.map((S=>(function(q){return new _c(Do(q.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(S)))})(t.orderBy));let p=null;t.limit&&(p=(function(x){let S;return S=typeof x=="object"?x.value:x,Dc(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(x){const S=!!x.before,M=x.values||[];return new vc(M,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(x){const S=!x.before,M=x.values||[];return new vc(M,S)})(t.endAt)),rC(e,o,d,l,p,"F",y,v)}function FC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Do(t.unaryFilter.field);return jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Do(t.unaryFilter.field);return jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Do(t.unaryFilter.field);return jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Do(t.unaryFilter.field);return jt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(r):r.fieldFilter!==void 0?(function(t){return jt.create(Do(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Vr.create(t.compositeFilter.filters.map((i=>_0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(r):Ne(30097,{filter:r})}function UC(r){return PC[r]}function zC(r){return RC[r]}function BC(r){return AC[r]}function jo(r){return{fieldPath:r.canonicalString()}}function Do(r){return Gt.fromServerFormat(r.fieldPath)}function w0(r){return r instanceof jt?(function(t){if(t.op==="=="){if(jy(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NAN"}};if(by(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jy(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NAN"}};if(by(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(t.field),op:zC(t.op),value:t.value}}})(r):r instanceof Vr?(function(t){const i=t.getFilters().map((o=>w0(o)));return i.length===1?i[0]:{compositeFilter:{op:BC(t.op),filters:i}}})(r):Ne(54877,{filter:r})}function $C(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function E0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t,i,o,l=De.min(),d=De.min(),p=Qt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.gt=e}}function HC(r){const e=MC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?af(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.Dn=new GC}addToCollectionParentIndex(e,t){return this.Dn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Qi.min())}updateCollectionGroup(e,t,i){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class GC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Vt(ct.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Vt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T0=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(T0,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Wo(0)}static ur(){return new Wo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="LruGarbageCollector",KC=1048576;function Qy([r,e],[t,i]){const o=Me(r,t);return o===0?Me(e,i):o}class QC{constructor(e){this.Tr=e,this.buffer=new Vt(Qy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Qy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){me(Ky,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ea(t)?me(Ky,"Ignoring IndexedDB error during garbage collection: ",t):await Zo(t)}await this.Rr(3e5)}))}}class JC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(jc.ue);const i=new QC(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Gy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,d,p,y,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,d=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(i=x,p=Date.now(),this.removeTargets(e,i,t)))).next((x=>(l=x,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(v=Date.now(),No()<=ze.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${l} targets in `+(y-p)+`ms
	Removed ${x} documents in `+(v-y)+`ms
Total Duration: ${v-E}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:x}))))}}function XC(r,e){return new JC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.changes=new $s((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Z.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&il(i.mutation,o,Dn.empty(),dt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const o=Ds();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let d=Ka();return l.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=Ds();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,i,o){let l=ai();const d=rl(),p=(function(){return rl()})();return t.forEach(((y,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof as)?l=l.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),il(E.mutation,v,E.mutation.getFieldMask(),dt.now())):d.set(v.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((v,E)=>d.set(v,E))),t.forEach(((v,E)=>{var x;return p.set(v,new eP(E,(x=d.get(v))!==null&&x!==void 0?x:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=rl();let o=new gt(((d,p)=>d-p)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let E=i.get(y)||Dn.empty();E=p.applyToLocalView(v,E),i.set(y,E);const x=(o.get(p.batchId)||Be()).add(y);o=o.insert(p.batchId,x)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),v=y.key,E=y.value,x=i0();E.forEach((S=>{if(!l.has(S)){const M=c0(t.get(S),i.get(S));M!==null&&x.set(S,M),l=l.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,x))}return Z.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return Ce.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Z.resolve(Ds());let p=cl,y=l;return d.next((v=>Z.forEach(v,((E,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),l.get(E)?Z.resolve():this.remoteDocumentCache.getEntry(e,E).next((S=>{y=y.insert(E,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,y,v,Be()))).next((E=>({batchId:p,changes:r0(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((i=>{let o=Ka();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let d=Ka();return this.indexManager.getCollectionParents(e,l).next((p=>Z.forEach(p,(y=>{const v=(function(x,S){return new Oc(S,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((x,S)=>{d=d.insert(x,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((d=>{l.forEach(((y,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,nn.newInvalidDocument(E)))}));let p=Ka();return d.forEach(((y,v)=>{const E=l.get(y);E!==void 0&&il(E.mutation,v,Dn.empty(),dt.now()),Mc(t,v)&&(p=p.insert(y,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Nr(o.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:HC(o.bundledQuery),readTime:Nr(o.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.overlays=new gt(Ce.comparator),this.kr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ds();return Z.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),Z.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),Z.resolve()}getOverlaysForCollection(e,t,i){const o=Ds(),l=t.length+1,d=new Ce(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new gt(((v,E)=>v-E));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=Ds(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const p=Ds(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,E)=>p.set(v,E))),!(p.size()>=o)););return Z.resolve(p)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new TC(t,i));let l=this.kr.get(t);l===void 0&&(l=Be(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this.qr=new Vt(zt.Qr),this.$r=new Vt(zt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new zt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new zt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Ce(new ct([])),i=new zt(t,e),o=new zt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(d=>{this.Wr(d),l.push(d.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ce(new ct([])),i=new zt(t,e),o=new zt(t,e+1);let l=Be();return this.$r.forEachInRange([i,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new zt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class zt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ce.comparator(e.key,t.key)||Me(e.Hr,t.Hr)}static Ur(e,t){return Me(e.Hr,t.Hr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Vt(zt.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new EC(l,t,i,o);this.mutationQueue.push(d);for(const p of o)this.Yr=this.Yr.add(new zt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Z.resolve(d)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return Z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?zf:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zt(t,0),o=new zt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(d=>{const p=this.Zr(d.Hr);l.push(p)})),Z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Vt(Me);return t.forEach((o=>{const l=new zt(o,0),d=new zt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],(p=>{i=i.add(p.Hr)}))})),Z.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ce.isDocumentKey(l)||(l=l.child(""));const d=new zt(new Ce(l),0);let p=new Vt(Me);return this.Yr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(y.Hr)),!0)}),d),Z.resolve(this.ei(p))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ze(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Z.forEach(t.mutations,(o=>{const l=new zt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new zt(t,0),o=this.Yr.firstAfterOrEqual(i);return Z.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.ni=e,this.docs=(function(){return new gt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Z.resolve(i?i.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let i=ai();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():nn.newInvalidDocument(o))})),Z.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=ai();const d=t.path,p=new Ce(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:v,value:{document:E}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||V1(D1(E),i)<=0||(o.has(E.key)||Mc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Z.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ne(9500)}ri(e,t){return Z.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new aP(this)}getSize(e){return Z.resolve(this.size)}}class aP extends ZC{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),Z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.persistence=e,this.ii=new $s((t=>Wf(t)),Hf),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new Xf,this.targetCount=0,this._i=Wo.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Z.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Wo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.hr(t),Z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((d,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),Z.waitFor(l).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return Z.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Z.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),Z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return Z.resolve(i)}containsKey(e,t){return Z.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t){this.ai={},this.overlays={},this.ui=new jc(0),this.ci=!1,this.ci=!0,this.li=new iP,this.referenceDelegate=e(this),this.hi=new lP(this),this.indexManager=new qC,this.remoteDocumentCache=(function(o){return new oP(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new WC(t),this.Ti=new nP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new sP(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const o=new uP(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return Z.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class uP extends L1{constructor(e){super(),this.currentSequenceNumber=e}}class Zf{constructor(e){this.persistence=e,this.Ai=new Xf,this.Ri=null}static Vi(e){return new Zf(e)}get mi(){if(this.Ri)return this.Ri;throw Ne(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Z.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,(i=>{const o=Ce.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,De.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return Z.or([()=>Z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class xc{constructor(e,t){this.persistence=e,this.gi=new $s((i=>U1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=XC(this,t)}static Vi(e,t){return new xc(e,t)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return Z.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?Z.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(d=>this.Sr(e,d,t).next((p=>{p||(i++,l.removeEntry(d,De.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tc(e.data.value)),t}Sr(e,t,i){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return Z.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Be(),o=Be();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ep(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return WT()?8:M1(rn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new cP;return this.ws(e,t,d).next((p=>{if(l.result=p,this.Rs)return this.Ss(e,t,d,p.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(No()<=ze.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(No()<=ze.DEBUG&&me("QueryEngine","Query:",bo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(No()<=ze.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kr(t))):Z.resolve())}ps(e,t){if(Ly(t))return Z.resolve(null);let i=kr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=af(t,null,"F"),i=kr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=Be(...l);return this.gs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.bs(t,p);return this.Ds(t,v,d,y.readTime)?this.ps(e,af(t,null,"F")):this.vs(e,v,t,y)}))))})))))}ys(e,t,i,o){return Ly(t)||o.isEqual(De.min())?Z.resolve(null):this.gs.getDocuments(e,i).next((l=>{const d=this.bs(t,l);return this.Ds(t,d,i,o)?Z.resolve(null):(No()<=ze.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.vs(e,d,t,j1(o,cl)).next((p=>p)))}))}bs(e,t){let i=new Vt(t0(e));return t.forEach(((o,l)=>{Mc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return No()<=ze.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",bo(t)),this.gs.getDocumentsMatchingQuery(e,t,Qi.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="LocalStore",hP=3e8;class fP{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new gt(Me),this.Ms=new $s((l=>Wf(l)),Hf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function pP(r,e,t,i){return new fP(r,e,t,i)}async function I0(r,e){const t=Ve(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],p=[];let y=Be();for(const v of o){d.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}for(const v of l){p.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(i,y).next((v=>({Bs:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function mP(r,e){const t=Ve(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(p,y,v,E){const x=v.batch,S=x.keys();let M=Z.resolve();return S.forEach((q=>{M=M.next((()=>E.getEntry(y,q))).next((Y=>{const L=v.docVersions.get(q);Ze(L!==null,48541),Y.version.compareTo(L)<0&&(x.applyToRemoteDocument(Y,v),Y.isValidDocument()&&(Y.setReadTime(v.commitVersion),E.addEntry(Y)))}))})),M.next((()=>p.mutationQueue.removeMutationBatch(y,x)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let y=Be();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(y=y.add(p.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function S0(r){const e=Ve(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function gP(r,e){const t=Ve(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const p=[];e.targetChanges.forEach(((E,x)=>{const S=o.get(x);if(!S)return;p.push(t.hi.removeMatchingKeys(l,E.removedDocuments,x).next((()=>t.hi.addMatchingKeys(l,E.addedDocuments,x))));let M=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?M=M.withResumeToken(Qt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,i)),o=o.insert(x,M),(function(Y,L,K){return Y.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=hP?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,M,E)&&p.push(t.hi.updateTargetData(l,M))}));let y=ai(),v=Be();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),p.push(yP(l,d,e.documentUpdates).next((E=>{y=E.Ls,v=E.ks}))),!i.isEqual(De.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next((x=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(E)}return Z.waitFor(p).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,v))).next((()=>y))})).then((l=>(t.Fs=o,l)))}function yP(r,e,t){let i=Be(),o=Be();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let d=ai();return t.forEach(((p,y)=>{const v=l.get(p);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(De.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):me(tp,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",y.version)})),{Ls:d,ks:o}}))}function vP(r,e){const t=Ve(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=zf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function _P(r,e){const t=Ve(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,Z.resolve(o)):t.hi.allocateTargetId(i).next((d=>(o=new Ui(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function hf(r,e,t){const i=Ve(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ea(d))throw d;me(tp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Yy(r,e,t){const i=Ve(r);let o=De.min(),l=Be();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,v,E){const x=Ve(y),S=x.Ms.get(E);return S!==void 0?Z.resolve(x.Fs.get(S)):x.hi.getTargetData(v,E)})(i,d,kr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{l=y}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,t?o:De.min(),t?l:Be()))).next((p=>(wP(i,oC(e),p),{documents:p,qs:l})))))}function wP(r,e,t){let i=r.xs.get(e)||De.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class Jy{constructor(){this.activeTargetIds=hC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EP{constructor(){this.Fo=new Jy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Jy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="ConnectivityMonitor";class Zy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){me(Xy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){me(Xy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function ff(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="RestConnection",xP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===gc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const d=ff(),p=this.Go(e,t.toUriEncodedString());me(Oh,`Sending RPC '${e}' ${d}:`,p,i);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(y,o,l);const{host:v}=new URL(p),E=Qo(v);return this.jo(e,p,y,i,E).then((x=>(me(Oh,`Received RPC '${e}' ${d}: `,x),x)),(x=>{throw Ki(Oh,`RPC '${e}' ${d} failed with error: `,x,"url: ",p,"request:",i),x}))}Jo(e,t,i,o,l,d){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=xP[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class CP extends IP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const d=ff();return new Promise(((p,y)=>{const v=new R_;v.setWithCredentials(!0),v.listenOnce(A_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case ec.NO_ERROR:const x=v.getResponseJson();me(en,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),p(x);break;case ec.TIMEOUT:me(en,`RPC '${e}' ${d} timed out`),y(new xe(te.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:const S=v.getStatus();if(me(en,`RPC '${e}' ${d} failed with status:`,S,"response text:",v.getResponseText()),S>0){let M=v.getResponseJson();Array.isArray(M)&&(M=M[0]);const q=M==null?void 0:M.error;if(q&&q.status&&q.message){const Y=(function(K){const $=K.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf($)>=0?$:te.UNKNOWN})(q.status);y(new xe(Y,q.message))}else y(new xe(te.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new xe(te.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{me(en,`RPC '${e}' ${d} completed.`)}}));const E=JSON.stringify(o);me(en,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",E,i,15)}))}P_(e,t,i){const o=ff(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=b_(),p=N_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.zo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const E=l.join("");me(en,`Creating RPC '${e}' stream ${o}: ${E}`,y);const x=d.createWebChannel(E,y);this.T_(x);let S=!1,M=!1;const q=new SP({Ho:L=>{M?me(en,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(S||(me(en,`Opening RPC '${e}' stream ${o} transport.`),x.open(),S=!0),me(en,`RPC '${e}' stream ${o} sending:`,L),x.send(L))},Yo:()=>x.close()}),Y=(L,K,$)=>{L.listen(K,(X=>{try{$(X)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return Y(x,Ga.EventType.OPEN,(()=>{M||(me(en,`RPC '${e}' stream ${o} transport opened.`),q.s_())})),Y(x,Ga.EventType.CLOSE,(()=>{M||(M=!0,me(en,`RPC '${e}' stream ${o} transport closed`),q.__(),this.I_(x))})),Y(x,Ga.EventType.ERROR,(L=>{M||(M=!0,Ki(en,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),q.__(new xe(te.UNAVAILABLE,"The operation could not be completed")))})),Y(x,Ga.EventType.MESSAGE,(L=>{var K;if(!M){const $=L.data[0];Ze(!!$,16349);const X=$,ue=(X==null?void 0:X.error)||((K=X[0])===null||K===void 0?void 0:K.error);if(ue){me(en,`RPC '${e}' stream ${o} received error:`,ue);const Ee=ue.status;let ae=(function(A){const k=Ct[A];if(k!==void 0)return h0(k)})(Ee),b=ue.message;ae===void 0&&(ae=te.INTERNAL,b="Unknown error status: "+Ee+" with message "+ue.message),M=!0,q.__(new xe(ae,b)),x.close()}else me(en,`RPC '${e}' stream ${o} received:`,$),q.a_($)}})),Y(p,k_.STAT_EVENT,(L=>{L.stat===ef.PROXY?me(en,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===ef.NOPROXY&&me(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.o_()}),0),q}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(r){return new kC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="PersistentStream";class P0{constructor(e,t,i,o,l,d,p,y){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new C0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(si(t.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new xe(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return me(ev,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(me(ev,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PP extends P0{constructor(e,t,i,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=jC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return De.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?Nr(d.readTime):De.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=df(this.serializer),t.addTarget=(function(l,d){let p;const y=d.target;if(p=of(y)?{documents:OC(l,y)}:{query:LC(l,y).Vt},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=m0(l,d.resumeToken);const v=lf(l,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(De.min())>0){p.readTime=Tc(l,d.snapshotVersion.toTimestamp());const v=lf(l,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=FC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=df(this.serializer),t.removeTarget=e,this.k_(t)}}class RP extends P0{constructor(e,t,i,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=VC(e.writeResults,e.commitTime),i=Nr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=df(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>DC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{}class kP extends AP{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new xe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,uf(t,i),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(te.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Jo(e,uf(t,i),o,d,p,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new xe(te.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class NP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(si(t),this._a=!1):me("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="RemoteStore";class bP{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{Ws(this)&&(me(zs,"Restarting streams for network reachability change."),await(async function(y){const v=Ve(y);v.Ia.add(4),await Cl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await $c(v)})(this))}))})),this.Aa=new NP(i,o)}}async function $c(r){if(Ws(r))for(const e of r.da)await e(!0)}async function Cl(r){for(const e of r.da)await e(!1)}function R0(r,e){const t=Ve(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),sp(t)?ip(t):ta(t).x_()&&rp(t,e))}function np(r,e){const t=Ve(r),i=ta(t);t.Ta.delete(e),i.x_()&&A0(t,e),t.Ta.size===0&&(i.x_()?i.B_():Ws(t)&&t.Aa.set("Unknown"))}function rp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(r).H_(e)}function A0(r,e){r.Ra.$e(e),ta(r).Y_(e)}function ip(r){r.Ra=new CC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),ta(r).start(),r.Aa.aa()}function sp(r){return Ws(r)&&!ta(r).M_()&&r.Ta.size>0}function Ws(r){return Ve(r).Ia.size===0}function k0(r){r.Ra=void 0}async function jP(r){r.Aa.set("Online")}async function DP(r){r.Ta.forEach(((e,t)=>{rp(r,e)}))}async function VP(r,e){k0(r),sp(r)?(r.Aa.la(e),ip(r)):r.Aa.set("Unknown")}async function OP(r,e,t){if(r.Aa.set("Online"),e instanceof p0&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const p of l.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ta.delete(p),o.Ra.removeTarget(p))})(r,e)}catch(i){me(zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ic(r,i)}else if(e instanceof ic?r.Ra.Ye(e):e instanceof f0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(De.min()))try{const i=await S0(r.localStore);t.compareTo(i)>=0&&await(function(l,d){const p=l.Ra.Pt(d);return p.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const E=l.Ta.get(v);E&&l.Ta.set(v,E.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,v)=>{const E=l.Ta.get(y);if(!E)return;l.Ta.set(y,E.withResumeToken(Qt.EMPTY_BYTE_STRING,E.snapshotVersion)),A0(l,y);const x=new Ui(E.target,y,v,E.sequenceNumber);rp(l,x)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){me(zs,"Failed to raise snapshot:",i),await Ic(r,i)}}async function Ic(r,e,t){if(!ea(e))throw e;r.Ia.add(1),await Cl(r),r.Aa.set("Offline"),t||(t=()=>S0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{me(zs,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await $c(r)}))}function N0(r,e){return e().catch((t=>Ic(r,t,e)))}async function Wc(r){const e=Ve(r),t=Zi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:zf;for(;LP(e);)try{const o=await vP(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,MP(e,o)}catch(o){await Ic(e,o)}b0(e)&&j0(e)}function LP(r){return Ws(r)&&r.Pa.length<10}function MP(r,e){r.Pa.push(e);const t=Zi(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function b0(r){return Ws(r)&&!Zi(r).M_()&&r.Pa.length>0}function j0(r){Zi(r).start()}async function FP(r){Zi(r).na()}async function UP(r){const e=Zi(r);for(const t of r.Pa)e.X_(t.mutations)}async function zP(r,e,t){const i=r.Pa.shift(),o=Qf.from(i,e,t);await N0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Wc(r)}async function BP(r,e){e&&Zi(r).Z_&&await(async function(i,o){if((function(d){return IC(d)&&d!==te.ABORTED})(o.code)){const l=i.Pa.shift();Zi(i).N_(),await N0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Wc(i)}})(r,e),b0(r)&&j0(r)}async function tv(r,e){const t=Ve(r);t.asyncQueue.verifyOperationInProgress(),me(zs,"RemoteStore received new credentials");const i=Ws(t);t.Ia.add(3),await Cl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await $c(t)}async function $P(r,e){const t=Ve(r);e?(t.Ia.delete(2),await $c(t)):e||(t.Ia.add(2),await Cl(t),t.Aa.set("Unknown"))}function ta(r){return r.Va||(r.Va=(function(t,i,o){const l=Ve(t);return l.ia(),new PP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:jP.bind(null,r),e_:DP.bind(null,r),n_:VP.bind(null,r),J_:OP.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),sp(r)?ip(r):r.Aa.set("Unknown")):(await r.Va.stop(),k0(r))}))),r.Va}function Zi(r){return r.ma||(r.ma=(function(t,i,o){const l=Ve(t);return l.ia(),new RP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:FP.bind(null,r),n_:BP.bind(null,r),ea:UP.bind(null,r),ta:zP.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await Wc(r)):(await r.ma.stop(),r.Pa.length>0&&(me(zs,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const d=Date.now()+i,p=new op(e,t,d,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ap(r,e){if(si("AsyncQueue",`${e}: ${r}`),ea(r))return new xe(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ce.comparator(t.key,i.key):(t,i)=>Ce.comparator(t.key,i.key),this.keyedMap=Ka(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.fa=new gt(Ce.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ne(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ho{constructor(e,t,i,o,l,d,p,y,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new Ho(e,t,Mo.emptySet(t),d,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class HP{constructor(){this.queries=rv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ve(t),l=o.queries;o.queries=rv(),l.forEach(((d,p)=>{for(const y of p.wa)y.onError(i)}))})(this,new xe(te.ABORTED,"Firestore shutting down"))}}function rv(){return new $s((r=>e0(r)),Lc)}async function D0(r,e){const t=Ve(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new WP,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=ap(d,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&lp(t)}async function V0(r,e){const t=Ve(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function qP(r,e){const t=Ve(r);let i=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const p of d.wa)p.Ca(o)&&(i=!0);d.ya=o}}i&&lp(t)}function GP(r,e,t){const i=Ve(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function lp(r){r.Da.forEach((e=>{e.next()}))}var pf,iv;(iv=pf||(pf={})).Fa="default",iv.Cache="cache";class O0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ho(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==pf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e){this.key=e}}class M0{constructor(e){this.key=e}}class KP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Be(),this.mutatedKeys=Be(),this.Xa=t0(e),this.eu=new Mo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new nv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,x)=>{const S=o.get(E),M=Mc(this.query,x)?x:null,q=!!S&&this.mutatedKeys.has(S.key),Y=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let L=!1;S&&M?S.data.isEqual(M.data)?q!==Y&&(i.track({type:3,doc:M}),L=!0):this.iu(S,M)||(i.track({type:2,doc:M}),L=!0,(y&&this.Xa(M,y)>0||v&&this.Xa(M,v)<0)&&(p=!0)):!S&&M?(i.track({type:0,doc:M}),L=!0):S&&!M&&(i.track({type:1,doc:S}),L=!0,(y||v)&&(p=!0)),L&&(M?(d=d.add(M),l=Y?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{eu:d,ru:i,Ds:p,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((E,x)=>(function(M,q){const Y=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{At:L})}};return Y(M)-Y(q)})(E.type,x.type)||this.Xa(E.doc,x.doc))),this.su(i),o=o!=null&&o;const p=t&&!o?this.ou():[],y=this.Za.size===0&&this.current&&!o?1:0,v=y!==this.Ya;return this.Ya=y,d.length!==0||v?{snapshot:new Ho(this.query,e.eu,l,d,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new nv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Be(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new M0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new L0(i))})),t}uu(e){this.Ha=e.qs,this.Za=Be();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ho.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const up="SyncEngine";class QP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class YP{constructor(e){this.key=e,this.lu=!1}}class JP{constructor(e,t,i,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new $s((p=>e0(p)),Lc),this.Tu=new Map,this.Iu=new Set,this.du=new gt(Ce.comparator),this.Eu=new Map,this.Au=new Xf,this.Ru={},this.Vu=new Map,this.mu=Wo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function XP(r,e,t=!0){const i=W0(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await F0(i,e,t,!0),o}async function ZP(r,e){const t=W0(r);await F0(t,e,!0,!1)}async function F0(r,e,t,i){const o=await _P(r.localStore,kr(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await eR(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&R0(r.remoteStore,o),p}async function eR(r,e,t,i,o){r.gu=(x,S,M)=>(async function(Y,L,K,$){let X=L.view.nu(K);X.Ds&&(X=await Yy(Y.localStore,L.query,!1).then((({documents:b})=>L.view.nu(b,X))));const ue=$&&$.targetChanges.get(L.targetId),Ee=$&&$.targetMismatches.get(L.targetId)!=null,ae=L.view.applyChanges(X,Y.isPrimaryClient,ue,Ee);return ov(Y,L.targetId,ae._u),ae.snapshot})(r,x,S,M);const l=await Yy(r.localStore,e,!0),d=new KP(e,l.qs),p=d.nu(l.documents),y=Sl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=d.applyChanges(p,r.isPrimaryClient,y);ov(r,t,v._u);const E=new QP(e,t,d);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function tR(r,e,t){const i=Ve(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((d=>!Lc(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await hf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&np(i.remoteStore,o.targetId),mf(i,o.targetId)})).catch(Zo)):(mf(i,o.targetId),await hf(i.localStore,o.targetId,!0))}async function nR(r,e){const t=Ve(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),np(t.remoteStore,i.targetId))}async function rR(r,e,t){const i=cR(r);try{const o=await(function(d,p){const y=Ve(d),v=dt.now(),E=p.reduce(((M,q)=>M.add(q.key)),Be());let x,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let q=ai(),Y=Be();return y.Os.getEntries(M,E).next((L=>{q=L,q.forEach(((K,$)=>{$.isValidDocument()||(Y=Y.add(K))}))})).next((()=>y.localDocuments.getOverlayedDocuments(M,q))).next((L=>{x=L;const K=[];for(const $ of p){const X=_C($,x.get($.key).overlayedDocument);X!=null&&K.push(new as($.key,X,G_(X.value.mapValue),fr.exists(!0)))}return y.mutationQueue.addMutationBatch(M,v,K,p)})).next((L=>{S=L;const K=L.applyToLocalDocumentSet(x,Y);return y.documentOverlayCache.saveOverlays(M,L.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:r0(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,y){let v=d.Ru[d.currentUser.toKey()];v||(v=new gt(Me)),v=v.insert(p,y),d.Ru[d.currentUser.toKey()]=v})(i,o.batchId,t),await Pl(i,o.changes),await Wc(i.remoteStore)}catch(o){const l=ap(o,"Failed to persist write");t.reject(l)}}async function U0(r,e){const t=Ve(r);try{const i=await gP(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Eu.get(l);d&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?Ze(d.lu,14607):o.removedDocuments.size>0&&(Ze(d.lu,42227),d.lu=!1))})),await Pl(t,i,e)}catch(i){await Zo(i)}}function sv(r,e,t){const i=Ve(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const y=Ve(d);y.onlineState=p;let v=!1;y.queries.forEach(((E,x)=>{for(const S of x.wa)S.va(p)&&(v=!0)})),v&&lp(y)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function iR(r,e,t){const i=Ve(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let d=new gt(Ce.comparator);d=d.insert(l,nn.newNoDocument(l,De.min()));const p=Be().add(l),y=new zc(De.min(),new Map,new gt(Me),d,p);await U0(i,y),i.du=i.du.remove(l),i.Eu.delete(e),cp(i)}else await hf(i.localStore,e,!1).then((()=>mf(i,e,t))).catch(Zo)}async function sR(r,e){const t=Ve(r),i=e.batch.batchId;try{const o=await mP(t.localStore,e);B0(t,i,null),z0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pl(t,o)}catch(o){await Zo(o)}}async function oR(r,e,t){const i=Ve(r);try{const o=await(function(d,p){const y=Ve(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return y.mutationQueue.lookupMutationBatch(v,p).next((x=>(Ze(x!==null,37113),E=x.keys(),y.mutationQueue.removeMutationBatch(v,x)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,E,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>y.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);B0(i,e,t),z0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pl(i,o)}catch(o){await Zo(o)}}function z0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function B0(r,e,t){const i=Ve(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function mf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||$0(r,i)}))}function $0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(np(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),cp(r))}function ov(r,e,t){for(const i of t)i instanceof L0?(r.Au.addReference(i.key,e),aR(r,i)):i instanceof M0?(me(up,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||$0(r,i.key)):Ne(19791,{yu:i})}function aR(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(me(up,"New document in limbo: "+t),r.Iu.add(i),cp(r))}function cp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Ce(ct.fromString(e)),i=r.mu.next();r.Eu.set(i,new YP(t)),r.du=r.du.insert(t,i),R0(r.remoteStore,new Ui(kr(qf(t.path)),i,"TargetPurposeLimboResolution",jc.ue))}}async function Pl(r,e,t){const i=Ve(r),o=[],l=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((p,y)=>{d.push(i.gu(y,e,t).then((v=>{var E;if((v||t)&&i.isPrimaryClient){const x=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(y.targetId,x?"current":"not-current")}if(v){o.push(v);const x=ep.Es(y.targetId,v);l.push(x)}})))})),await Promise.all(d),i.hu.J_(o),await(async function(y,v){const E=Ve(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>Z.forEach(v,(S=>Z.forEach(S.Is,(M=>E.persistence.referenceDelegate.addReference(x,S.targetId,M))).next((()=>Z.forEach(S.ds,(M=>E.persistence.referenceDelegate.removeReference(x,S.targetId,M)))))))))}catch(x){if(!ea(x))throw x;me(tp,"Failed to update sequence numbers: "+x)}for(const x of v){const S=x.targetId;if(!x.fromCache){const M=E.Fs.get(S),q=M.snapshotVersion,Y=M.withLastLimboFreeSnapshotVersion(q);E.Fs=E.Fs.insert(S,Y)}}})(i.localStore,l))}async function lR(r,e){const t=Ve(r);if(!t.currentUser.isEqual(e)){me(up,"User change. New user:",e.toKey());const i=await I0(t.localStore,e);t.currentUser=e,(function(l,d){l.Vu.forEach((p=>{p.forEach((y=>{y.reject(new xe(te.CANCELLED,d))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pl(t,i.Bs)}}function uR(r,e){const t=Ve(r),i=t.Eu.get(e);if(i&&i.lu)return Be().add(i.key);{let o=Be();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const p=t.Pu.get(d);o=o.unionWith(p.view.tu)}return o}}function W0(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=U0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iR.bind(null,e),e.hu.J_=qP.bind(null,e.eventManager),e.hu.pu=GP.bind(null,e.eventManager),e}function cR(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oR.bind(null,e),e}class Sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return pP(this.persistence,new dP,e.initialUser,this.serializer)}Du(e){return new x0(Zf.Vi,this.serializer)}bu(e){return new EP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sc.provider={build:()=>new Sc};class dR extends Sc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ze(this.persistence.referenceDelegate instanceof xc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new YC(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new x0((i=>xc.Vi(i,t)),this.serializer)}}class gf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lR.bind(null,this.syncEngine),await $P(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new HP})()}createDatastore(e){const t=Bc(e.databaseInfo.databaseId),i=(function(l){return new CP(l)})(e.databaseInfo);return(function(l,d,p,y){return new kP(l,d,p,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,d,p){return new bP(i,o,l,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>sv(this.syncEngine,t,0)),(function(){return Zy.C()?new Zy:new TP})())}createSyncEngine(e,t){return(function(o,l,d,p,y,v,E){const x=new JP(o,l,d,p,y,v);return E&&(x.fu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ve(o);me(zs,"RemoteStore shutting down."),l.Ia.add(5),await Cl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}gf.provider={build:()=>new gf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="FirestoreClient";class hR{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=Ff.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{me(es,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(me(es,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=ap(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Mh(r,e){r.asyncQueue.verifyOperationInProgress(),me(es,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await I0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Ki("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{me("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Ki("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function av(r,e){r.asyncQueue.verifyOperationInProgress();const t=await fR(r);me(es,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>tv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>tv(e.remoteStore,o))),r._onlineComponents=e}async function fR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(es,"Using user provided OfflineComponentProvider");try{await Mh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ki("Error using user provided cache. Falling back to memory cache: "+t),await Mh(r,new Sc)}}else me(es,"Using default OfflineComponentProvider"),await Mh(r,new dR(void 0));return r._offlineComponents}async function q0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(es,"Using user provided OnlineComponentProvider"),await av(r,r._uninitializedComponentsProvider._online)):(me(es,"Using default OnlineComponentProvider"),await av(r,new gf))),r._onlineComponents}function pR(r){return q0(r).then((e=>e.syncEngine))}async function G0(r){const e=await q0(r),t=e.eventManager;return t.onListen=XP.bind(null,e.syncEngine),t.onUnlisten=tR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nR.bind(null,e.syncEngine),t}function mR(r,e,t={}){const i=new ni;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const E=new H0({next:S=>{E.Ou(),d.enqueueAndForget((()=>V0(l,x)));const M=S.docs.has(p);!M&&S.fromCache?v.reject(new xe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&y&&y.source==="server"?v.reject(new xe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),x=new O0(qf(p.path),E,{includeMetadataChanges:!0,ka:!0});return D0(l,x)})(await G0(r),r.asyncQueue,e,t,i))),i.promise}function gR(r,e,t={}){const i=new ni;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const E=new H0({next:S=>{E.Ou(),d.enqueueAndForget((()=>V0(l,x))),S.fromCache&&y.source==="server"?v.reject(new xe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),x=new O0(p,E,{includeMetadataChanges:!0,ka:!0});return D0(l,x)})(await G0(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="firestore.googleapis.com",uv=!0;class cv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Q0,this.ssl=uv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:uv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KC)throw new xe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new x1;switch(i.type){case"firstParty":return new P1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=lv.get(t);i&&(me("ComponentProvider","Removing Datastore"),lv.delete(t),i.terminate())})(this),Promise.resolve()}}function yR(r,e,t,i={}){var o;r=oi(r,Hc);const l=Qo(e),d=r._getSettings(),p=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),y=`${e}:${t}`;l&&(Lv(`https://${y}`),Mv("Firestore",!0)),d.host!==Q0&&d.host!==y&&Ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:y,ssl:l,emulatorOptions:i});if(!Os(v,p)&&(r._setSettings(v),i.mockUserToken)){let E,x;if(typeof i.mockUserToken=="string")E=i.mockUserToken,x=tn.MOCK_USER;else{E=VT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new xe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new tn(S)}r._authCredentials=new I1(new D_(E,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new qc(this.firestore,e,this._query)}}class Dt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}toJSON(){return{type:Dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(xl(t,Dt._jsonSchema))return new Dt(e,i||null,new Ce(ct.fromString(t.referencePath)))}}Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:Pt("string",Dt._jsonSchemaVersion),referencePath:Pt("string")};class qi extends qc{constructor(e,t,i){super(e,t,qf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new Ce(e))}withConverter(e){return new qi(this.firestore,e,this._path)}}function Pr(r,e,...t){if(r=Kt(r),O_("collection","path",e),r instanceof Hc){const i=ct.fromString(e,...t);return Iy(i),new qi(r,null,i)}{if(!(r instanceof Dt||r instanceof qi))throw new xe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ct.fromString(e,...t));return Iy(i),new qi(r.firestore,null,i)}}function bn(r,e,...t){if(r=Kt(r),arguments.length===1&&(e=Ff.newId()),O_("doc","path",e),r instanceof Hc){const i=ct.fromString(e,...t);return xy(i),new Dt(r,null,new Ce(i))}{if(!(r instanceof Dt||r instanceof qi))throw new xe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ct.fromString(e,...t));return xy(i),new Dt(r.firestore,r instanceof qi?r.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="AsyncQueue";class hv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new C0(this,"async_queue_retry"),this.oc=()=>{const i=Lh();i&&me(dv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new ni;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ea(e))throw e;me(dv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,si("INTERNAL UNHANDLED ERROR: ",fv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=op.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Ne(47125,{hc:fv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function fv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class na extends Hc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new hv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hv(e),this._firestoreClient=void 0,await e}}}function vR(r,e){const t=typeof r=="object"?r:Bv(),i=typeof r=="string"?r:gc,o=Cf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=jT("firestore");l&&yR(o,...l)}return o}function dp(r){if(r._terminated)throw new xe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||_R(r),r._firestoreClient}function _R(r){var e,t,i;const o=r._freezeSettings(),l=(function(p,y,v,E){return new $1(p,y,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,K0(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new hR(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(Qt.fromBase64String(e))}catch(t){throw new xe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hn(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xl(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Pt("string",Hn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(xl(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:Pt("string",br._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xl(e,jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new jr(e.vectorValues);throw new xe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jr._jsonSchemaVersion="firestore/vectorValue/1.0",jr._jsonSchema={type:Pt("string",jr._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=/^__.*__$/;class ER{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new as(e,this.data,this.fieldMask,t,this.fieldTransforms):new Il(e,this.data,t,this.fieldTransforms)}}class Y0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new as(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function J0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ec:r})}}class fp{constructor(e,t,i,o,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new fp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Cc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(J0(this.Ec)&&wR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class TR{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Bc(e)}Dc(e,t,i,o=!1){return new fp({Ec:e,methodName:t,bc:i,path:Gt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function X0(r){const e=r._freezeSettings(),t=Bc(r._databaseId);return new TR(r._databaseId,!!e.ignoreUndefinedProperties,t)}function xR(r,e,t,i,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);pp("Data must be an object, but it was:",d,i);const p=Z0(i,d);let y,v;if(l.merge)y=new Dn(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const x of l.mergeFields){const S=yf(e,x,t);if(!d.contains(S))throw new xe(te.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);tw(E,S)||E.push(S)}y=new Dn(E),v=d.fieldTransforms.filter((x=>y.covers(x.field)))}else y=null,v=d.fieldTransforms;return new ER(new xn(p),y,v)}class Kc extends hp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}function IR(r,e,t,i){const o=r.Dc(1,e,t);pp("Data must be an object, but it was:",o,i);const l=[],d=xn.empty();os(i,((y,v)=>{const E=mp(e,y,t);v=Kt(v);const x=o.gc(E);if(v instanceof Kc)l.push(E);else{const S=Qc(v,x);S!=null&&(l.push(E),d.set(E,S))}}));const p=new Dn(l);return new Y0(d,p,o.fieldTransforms)}function SR(r,e,t,i,o,l){const d=r.Dc(1,e,t),p=[yf(e,i,t)],y=[o];if(l.length%2!=0)throw new xe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)p.push(yf(e,l[S])),y.push(l[S+1]);const v=[],E=xn.empty();for(let S=p.length-1;S>=0;--S)if(!tw(v,p[S])){const M=p[S];let q=y[S];q=Kt(q);const Y=d.gc(M);if(q instanceof Kc)v.push(M);else{const L=Qc(q,Y);L!=null&&(v.push(M),E.set(M,L))}}const x=new Dn(v);return new Y0(E,x,d.fieldTransforms)}function Qc(r,e){if(ew(r=Kt(r)))return pp("Unsupported field value:",e,r),Z0(r,e);if(r instanceof hp)return(function(i,o){if(!J0(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let d=0;for(const p of i){let y=Qc(p,o.yc(d));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),d++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return fC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=dt.fromDate(i);return{timestampValue:Tc(o.serializer,l)}}if(i instanceof dt){const l=new dt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Tc(o.serializer,l)}}if(i instanceof br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Hn)return{bytesValue:m0(o.serializer,i._byteString)};if(i instanceof Dt){const l=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Jf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof jr)return(function(d,p){return{mapValue:{fields:{[H_]:{stringValue:q_},[yc]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw p.wc("VectorValues must only contain numeric values.");return Gf(p.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Uf(i)}`)})(r,e)}function Z0(r,e){const t={};return F_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):os(r,((i,o)=>{const l=Qc(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function ew(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof br||r instanceof Hn||r instanceof Dt||r instanceof hp||r instanceof jr)}function pp(r,e,t){if(!ew(t)||!L_(t)){const i=Uf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function yf(r,e,t){if((e=Kt(e))instanceof Gc)return e._internalPath;if(typeof e=="string")return mp(r,e);throw Cc("Field path arguments must be of type string or ",r,!1,void 0,t)}const CR=new RegExp("[~\\*/\\[\\]]");function mp(r,e,t){if(e.search(CR)>=0)throw Cc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Gc(...e.split("."))._internalPath}catch{throw Cc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Cc(r,e,t,i,o){const l=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(l||d)&&(y+=" (found",l&&(y+=` in field ${i}`),d&&(y+=` in document ${o}`),y+=")"),new xe(te.INVALID_ARGUMENT,p+r+y)}function tw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class PR extends nw{data(){return super.data()}}function rw(r,e){return typeof e=="string"?mp(r,e):e instanceof Gc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new xe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AR{convertValue(e,t="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return os(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[yc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>Tt(d.doubleValue)));return new jr(l)}convertGeoPoint(e){return new br(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Vc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(dl(e));default:return null}}convertTimestamp(e){const t=Yi(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ct.fromString(e);Ze(E0(i),9688,{name:e});const o=new hl(i.get(1),i.get(3)),l=new Ce(i.popFirst(5));return o.isEqual(t)||si(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vs extends nw{constructor(e,t,i,o,l,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(rw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vs._jsonSchema={type:Pt("string",Vs._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class sc extends Vs{data(e={}){return super.data(e)}}class Fo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ya(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new sc(this._firestore,this._userDataWriter,i.key,i,new Ya(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const y=new sc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ya(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const y=new sc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ya(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),E=d.indexOf(p.doc.key)),{type:NR(p.type),doc:y,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ff.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(r){r=oi(r,Dt);const e=oi(r.firestore,na);return mR(dp(e),r._key).then((t=>bR(e,r,t)))}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:Pt("string",Fo._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class iw extends AR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,t)}}function qo(r){r=oi(r,qc);const e=oi(r.firestore,na),t=dp(e),i=new iw(e);return RR(r._query),gR(t,r._query).then((o=>new Fo(e,i,r,o)))}function $a(r,e,t,...i){r=oi(r,Dt);const o=oi(r.firestore,na),l=X0(o);let d;return d=typeof(e=Kt(e))=="string"||e instanceof Gc?SR(l,"updateDoc",r._key,e,t,i):IR(l,"updateDoc",r._key,e),gp(o,[d.toMutation(r._key,fr.exists(!0))])}function Ja(r){return gp(oi(r.firestore,na),[new Kf(r._key,fr.none())])}function Xa(r,e){const t=oi(r.firestore,na),i=bn(r),o=kR(r.converter,e);return gp(t,[xR(X0(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,fr.exists(!1))]).then((()=>i))}function gp(r,e){return(function(i,o){const l=new ni;return i.asyncQueue.enqueueAndForget((async()=>rR(await pR(i),o,l))),l.promise})(dp(r),e)}function bR(r,e,t){const i=t.docs.get(e._key),o=new iw(r);return new Vs(r,o,e._key,i,new Ya(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Xo=o})(Yo),Uo(new Ls("firestore",((i,{instanceIdentifier:o,options:l})=>{const d=i.getProvider("app").getImmediate(),p=new na(new S1(i.getProvider("auth-internal")),new R1(d,i.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new xe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(v.options.projectId,E)})(d,o),d);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),Wi(vy,_y,e),Wi(vy,_y,"esm2017")})();const jR={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},sw=zv(jR),Gi=E1(sw),vt=vR(sw),ow=Q.createContext(null);function DR({children:r}){const[e,t]=Q.useState(null),[i,o]=Q.useState(!1),[l,d]=Q.useState(!0);Q.useEffect(()=>{const v=dS(Gi,async E=>{if(t(E),E)try{const x=bn(vt,"admins",E.uid);if((await pv(x)).exists())o(!0);else{const M=bn(vt,"roles",E.uid),q=await pv(M);q.exists()&&q.data().admin===!0?o(!0):o(!1)}}catch(x){console.error("Error checking admin role:",x),o(!1)}else o(!1);d(!1)});return()=>v()},[]);const p=async(v,E)=>{await f_(Gi,v,E)},y=async()=>{await p_(Gi)};return h.jsx(ow.Provider,{value:{user:e,admin:i,loading:l,login:p,logout:y},children:r})}function Rl(){return Q.useContext(ow)}function VR({onClose:r}){const[e,t]=Q.useState("login"),[i,o]=Q.useState(""),[l,d]=Q.useState("");async function p(){try{await S_(Gi,new Rr),r()}catch(E){alert(E.message)}}async function y(E){E.preventDefault();try{await f_(Gi,i,l),r()}catch(x){alert(x.message)}}async function v(E){E.preventDefault();try{await lS(Gi,i,l),r()}catch(x){alert(x.message)}}return h.jsx("div",{className:"auth-modal-backdrop",onClick:r,children:h.jsxs("div",{className:"auth-modal",onClick:E=>E.stopPropagation(),children:[h.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),h.jsxs("button",{className:"google-btn",onClick:p,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsx("div",{className:"auth-divider",children:h.jsx("span",{children:"or"})}),h.jsxs("form",{onSubmit:e==="login"?y:v,className:"auth-form",children:[h.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:i,onChange:E=>o(E.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:E=>d(E.target.value),required:!0}),h.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),h.jsx("div",{className:"auth-switcher",children:e==="login"?h.jsxs("p",{children:["No account?"," ",h.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):h.jsxs("p",{children:["Already have an account?"," ",h.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),h.jsx("button",{className:"auth-close",onClick:r,children:"Close"})]})})}function OR(){const[r,e]=Q.useState(!1),[t,i]=Q.useState(!1),{user:o,admin:l}=Rl(),d=Rc();async function p(){try{await p_(Gi),e(!1),d("/")}catch(y){console.error(y),alert("Logout failed.")}}return h.jsxs(h.Fragment,{children:[h.jsxs("button",{className:`menu-toggle ${r?"active":""}`,onClick:()=>e(!r),children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("nav",{className:`menu-panel ${r?"open":""}`,children:[h.jsx(Ba,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),h.jsx(Ba,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),h.jsx(Ba,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),h.jsx(Ba,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),l&&h.jsx(Ba,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),h.jsxs("div",{className:"auth-section",children:[h.jsx("p",{className:"auth-section-status",children:o?`Signed in as ${o.email||o.uid}`:"Not signed in"}),h.jsxs("div",{children:[!o&&h.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),i(!0)},children:"Sign in"}),o&&h.jsx("button",{className:"auth-btn secondary",onClick:p,children:"Sign out"})]})]})]}),t&&h.jsx(VR,{onClose:()=>i(!1)})]})}function mv(){return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"im_ok's Collection Hub"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem"},children:"A quiet little corner of the internet for my shelves, lists, and cardboard addictions."}),h.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.72)",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"12px",fontSize:"0.85rem",color:"var(--text-soft)"},children:"Manga | Anime | TCG"})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"About me"}),h.jsxs("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5},children:["Hey, I go by ",h.jsx("strong",{children:"im_ok"}),". I hoard manga, binge anime, and collect way too many trading cards. This site is where I track everything: volumes on my shelves, finished shows, and growing TCG binders."]}),h.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem"},children:"You'll find detailed stats, reading history, and collection values across the different pages - it's basically my personal library dashboard."}),h.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px"},children:[h.jsx("span",{className:"pill",children:"Manga library power user"}),h.jsx("span",{className:"pill",children:"MAL-synced anime list"}),h.jsx("span",{className:"pill",children:"Pokemon & One Piece TCG"}),h.jsx("span",{className:"pill",children:"Automation & data nerd"})]})]}),h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"Explore the site"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[h.jsxs("a",{href:"/base/manga",className:"section-card",children:[h.jsx("h3",{children:"Manga Library"}),h.jsx("p",{children:"Full manga collection & wishlist, with covers, stats, and release tracking."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Firestore-powered"}),h.jsx("span",{className:"section-chip",children:"Library & wishlist"}),h.jsx("span",{className:"section-chip",children:"Release calendar"})]})]}),h.jsxs("a",{href:"/base/anime",className:"section-card",children:[h.jsx("h3",{children:"Anime Library"}),h.jsx("p",{children:"Read-only mirror of my MAL list, with filters, stats, and pretty cards."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"MAL synced"}),h.jsx("span",{className:"section-chip",children:"Status filters"}),h.jsx("span",{className:"section-chip",children:"Quick stats"})]})]}),h.jsxs("a",{href:"/base/tcg",className:"section-card",children:[h.jsx("h3",{children:"TCG Collection"}),h.jsx("p",{children:"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Tracked in Firestore"}),h.jsx("span",{className:"section-chip",children:"Value vs paid"}),h.jsx("span",{className:"section-chip",children:"Per-game breakdown"})]})]})]})]})]}),h.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"Built as a static GitHub Pages site. Data lives in Firestore & MyAnimeList."})]})}function Wa(r){let e=(r||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),i=t?t[1].trim().toLowerCase():e.toLowerCase(),o=t&&t[2]?parseInt(t[2],10):0;return{name:i,vol:Number.isFinite(o)?o:0}}function Fh(r){if(typeof r=="number")return r;if(r==null)return 0;const e=String(r).replace(/[^0-9.-]/g,""),t=parseFloat(e);return Number.isFinite(t)?t:0}function LR(r){if(typeof r=="number")return r;if(r==null||r==="")return 0;const e=parseInt(r,10);return Number.isFinite(e)?e:0}function MR(r,e){const t=r.length,i=e.length,o=t+i,l=r.filter(ae=>ae.read).length,d=t-l,p=t?Math.round(l/t*100):0;let y=0,v=0,E=0;r.forEach(ae=>{y+=Fh(ae.amountPaid),v+=Fh(ae.msrp),E+=Fh(ae.collectiblePrice)});let x=0,S=0;r.forEach(ae=>{const b=LR(ae.pageCount);x+=b,ae.read&&(S+=b)});const M={5:0,"4.5":0,4:0,"3.5":0,3:0,"2.5":0,2:0,"1.5":0,1:0,"0.5":0};let q=0,Y=0;r.forEach(ae=>{const b=ae.rating==null||ae.rating===""?NaN:parseFloat(ae.rating);if(!Number.isFinite(b)||b<=0)return;const I=Math.max(.5,Math.min(5,b)),A=String(Math.round(I*2)/2);M[A]!=null&&(M[A]+=1),q+=I,Y+=1});const L=Y?q/Y:0,K=new Date,$=[];for(let ae=11;ae>=0;ae-=1){const b=new Date(K.getFullYear(),K.getMonth()-ae,1),I=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}`;$.push({key:I,label:b.toLocaleString(void 0,{month:"short"}),count:0})}const X=Object.fromEntries($.map((ae,b)=>[ae.key,b]));r.forEach(ae=>{if(!ae.dateRead)return;const b=ae.dateRead.slice(0,7),I=X[b];I!=null&&($[I].count+=1)});const ue={};r.forEach(ae=>{const b=(ae.publisher||"").trim();b&&(ue[b]=(ue[b]||0)+1)});const Ee=Object.entries(ue).sort((ae,b)=>b[1]-ae[1]).slice(0,5).map(([ae,b])=>({name:ae,count:b}));return{totalBooks:o,totalLibrary:t,totalWishlist:i,readBooks:l,unreadBooks:d,readPct:p,paidTotal:y,msrpTotal:v,collectibleTotal:E,pagesTotal:x,pagesRead:S,avgRating:L,ratingBuckets:M,months:$,topPublishers:Ee}}function FR({library:r,wishlist:e}){const t=Q.useMemo(()=>MR(r,e),[r,e]);if(!t.totalBooks)return h.jsx("div",{className:"manga-empty-state",children:"No manga loaded yet. Once your Firestore library & wishlist are pulled in, this dashboard will light up."});const i=Math.max(...Object.values(t.ratingBuckets),1),o=t.topPublishers.length>0?Math.max(...t.topPublishers.map(d=>d.count),1):1,l=t.months.length>0?Math.max(...t.months.map(d=>d.count),1):1;return h.jsxs("div",{className:"manga-dashboard",children:[h.jsxs("div",{className:"manga-dashboard-grid",children:[h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Collection"}),h.jsx("div",{className:"manga-stat-value",children:t.totalBooks})]}),h.jsxs("div",{className:"manga-stat-sub",children:["Library: ",t.totalLibrary,"  |  Wishlist: ",t.totalWishlist]})]}),h.jsxs("div",{className:"manga-pie-wrap",children:[h.jsx("div",{className:"manga-pie",style:{"--pct":t.readPct},children:h.jsxs("div",{className:"manga-pie-label",children:[t.readPct,"% read"]})}),h.jsxs("div",{className:"manga-stat-sub",children:[h.jsx("strong",{children:t.readBooks})," read  | "," ",h.jsx("strong",{children:t.unreadBooks})," unread in your library.",h.jsx("br",{}),"Perfect for tracking backlog vs progress."]})]})]}),h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Spending & Pages"}),h.jsxs("div",{className:"manga-stat-value",children:["$",t.paidTotal.toFixed(0)]})]}),h.jsxs("div",{className:"manga-stat-sub",children:["Pages owned: ",t.pagesTotal.toLocaleString(),"  |  Read:"," ",t.pagesRead.toLocaleString()]})]}),h.jsxs("div",{className:"manga-stat-sub",children:["MSRP (if set): $",t.msrpTotal.toFixed(0),"  |  Collectible value: $",t.collectibleTotal.toFixed(0),h.jsx("br",{}),"Avg rating:"," ",t.avgRating?t.avgRating.toFixed(2):"N/A"," ","/ 10"]})]}),h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Reading Pace"}),h.jsx("div",{className:"manga-stat-value",children:t.months.reduce((d,p)=>d+p.count,0)})]}),h.jsx("div",{className:"manga-stat-sub",children:"Volumes finished in the last 12 months"})]}),h.jsx("div",{className:"manga-bar-chart",children:t.months.map(d=>h.jsxs("div",{className:"manga-bar",children:[h.jsx("div",{className:"manga-bar-fill",style:{height:`${d.count/l*100||0}%`}}),h.jsx("div",{className:"manga-bar-label",children:d.label}),d.count>0&&h.jsx("div",{className:"manga-bar-value",children:d.count})]},d.key))})]})]}),h.jsxs("div",{className:"manga-dashboard-grid",style:{marginTop:"14px",gridTemplateColumns:"minmax(0, 1.3fr) minmax(0, 1.7fr)"},children:[h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Ratings"}),h.jsx("div",{className:"manga-stat-value",children:Object.values(t.ratingBuckets).reduce((d,p)=>d+p,0)})]}),h.jsx("div",{className:"manga-stat-sub",children:"How you've scored your volumes"})]}),h.jsx("div",{className:"manga-bar-chart",children:Object.entries(t.ratingBuckets).sort((d,p)=>Number(p[0])-Number(d[0])).map(([d,p])=>h.jsxs("div",{className:"manga-bar",children:[h.jsx("div",{className:"manga-bar-fill",style:{height:`${p/i*100||0}%`}}),h.jsx("div",{className:"manga-bar-label",children:d}),p>0&&h.jsx("div",{className:"manga-bar-value",children:p})]},d))})]}),h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Top Publishers"}),h.jsx("div",{className:"manga-stat-value",children:t.topPublishers.reduce((d,p)=>d+p.count,0)})]}),h.jsx("div",{className:"manga-stat-sub",children:"Most common publishers in your library"})]}),t.topPublishers.length===0?h.jsx("div",{className:"manga-stat-sub",children:"No publisher data yet - add some volumes first."}):h.jsx("div",{className:"manga-bar-chart",children:t.topPublishers.map(d=>h.jsxs("div",{className:"manga-bar",children:[h.jsx("div",{className:"manga-bar-fill",style:{height:`${d.count/o*100||0}%`}}),h.jsx("div",{className:"manga-bar-label",children:d.name.length>8?`${d.name.slice(0,8)}...`:d.name}),h.jsx("div",{className:"manga-bar-value",children:d.count})]},d.name))})]})]})]})}function UR(){const{admin:r}=Rl(),e=r,[t,i]=Q.useState("library"),[o,l]=Q.useState([]),[d,p]=Q.useState([]),[y,v]=Q.useState([]),[E,x]=Q.useState([]),[S,M]=Q.useState(!0),[q,Y]=Q.useState(""),[L,K]=Q.useState(""),[$,X]=Q.useState(""),[ue,Ee]=Q.useState(!1),[ae,b]=Q.useState(()=>new Set),[I,A]=Q.useState(null),[k,V]=Q.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[N,R]=Q.useState({open:!1,index:0,items:[]});async function Je(){const C=await qo(Pr(vt,"library")),ee=[];C.forEach(H=>{const F=H.data();ee.push({id:H.id,title:F.title||"",authors:F.authors||"Unknown",publisher:F.publisher||"Unknown",demographic:F.demographic||"",genre:F.genre||"",subGenre:F.subGenre||"",date:F.date||"Unknown",cover:F.cover||"",isbn:F.isbn||"",pageCount:F.pageCount!==void 0&&F.pageCount!==null?F.pageCount:"",rating:F.rating!==void 0&&F.rating!==null?F.rating:"",amountPaid:F.amountPaid!==void 0&&F.amountPaid!==null?F.amountPaid:"",dateRead:F.dateRead||"",datePurchased:F.datePurchased||"",msrp:F.msrp!==void 0&&F.msrp!==null?F.msrp:"",specialType:F.specialType||"",specialVolumes:F.specialVolumes!==void 0&&F.specialVolumes!==null?F.specialVolumes:"",collectiblePrice:F.collectiblePrice!==void 0&&F.collectiblePrice!==null?F.collectiblePrice:"",read:!!F.read,amazonURL:F.amazonURL||"",kind:"library"})}),ee.sort((H,F)=>{const ye=Wa(H.title),Qe=Wa(F.title),at=ye.name.localeCompare(Qe.name);return at!==0?at:ye.vol-Qe.vol}),l(ee),v(H=>{const F=new Set(H);return ee.forEach(ye=>F.add(ye.title||"")),Array.from(F).filter(Boolean).sort()})}async function et(){const C=await qo(Pr(vt,"wishlist")),ee=[];C.forEach(H=>{const F=H.data();ee.push({id:H.id,title:F.title||"",authors:F.authors||"Unknown",publisher:F.publisher||"Unknown",date:F.date||"Unknown",cover:F.cover||"",isbn:F.isbn||"",pageCount:F.pageCount!==void 0&&F.pageCount!==null?F.pageCount:"",rating:F.rating!==void 0&&F.rating!==null?F.rating:"",amountPaid:F.amountPaid!==void 0&&F.amountPaid!==null?F.amountPaid:"",specialType:F.specialType||"",specialVolumes:F.specialVolumes!==void 0&&F.specialVolumes!==null?F.specialVolumes:"",collectiblePrice:F.collectiblePrice!==void 0&&F.collectiblePrice!==null?F.collectiblePrice:"",amazonURL:F.amazonURL||"",kind:"wishlist"})}),ee.sort((H,F)=>{const ye=Wa(H.title),Qe=Wa(F.title),at=ye.name.localeCompare(Qe.name);return at!==0?at:ye.vol-Qe.vol}),p(ee),v(H=>{const F=new Set(H);return ee.forEach(ye=>F.add(ye.title||"")),Array.from(F).filter(Boolean).sort()})}Q.useEffect(()=>{let C=!1;async function ee(){M(!0),Y("");try{await Promise.all([Je(),et()]),C||M(!1)}catch(H){console.error(H),C||(Y("Failed to load manga data from Firestore."),M(!1))}}return ee(),()=>{C=!0}},[]);const _t=Q.useMemo(()=>{const C=L.trim().toLowerCase();return C?o.filter(ee=>[ee.title,ee.authors,ee.publisher,ee.isbn,ee.date,String(ee.pageCount??"")].join(" ").toLowerCase().includes(C)):o},[o,L]),Ge=Q.useMemo(()=>{const C=$.trim().toLowerCase();return C?d.filter(ee=>[ee.title,ee.authors,ee.publisher,ee.isbn,ee.date,String(ee.pageCount??"")].join(" ").toLowerCase().includes(C)):d},[d,$]);function ce(){e&&(Ee(C=>!C),b(new Set))}function _e(C){b(ee=>{const H=new Set(ee);return H.has(C)?H.delete(C):H.add(C),H})}async function de(C){if(!e){alert("Multi-select actions require admin access.");return}const ee=Array.from(ae);if(!ee.length){alert("Select at least one item first.");return}const H=t==="library";try{if(C==="move")if(H){if(!window.confirm(`Move ${ee.length} item(s) to Wishlist?`))return;for(const F of ee){const ye=o.find(at=>at.id===F);if(!ye)continue;const Qe={title:ye.title,authors:ye.authors,publisher:ye.publisher,date:ye.date,isbn:ye.isbn,pageCount:ye.pageCount||"",cover:ye.cover,amazonURL:ye.amazonURL||"",specialType:ye.specialType||"",specialVolumes:ye.specialVolumes||"",collectiblePrice:ye.collectiblePrice||"",rating:ye.rating||""};await Xa(Pr(vt,"wishlist"),Qe),await Ja(bn(vt,"library",F))}}else{if(!window.confirm(`Move ${ee.length} item(s) to Library?`))return;for(const F of ee){const ye=d.find(at=>at.id===F);if(!ye)continue;const Qe={title:ye.title,authors:ye.authors,publisher:ye.publisher,date:ye.date,isbn:ye.isbn,pageCount:ye.pageCount||"",cover:ye.cover,amountPaid:"",read:!1,rating:"",specialType:ye.specialType||"",specialVolumes:ye.specialVolumes||"",collectiblePrice:ye.collectiblePrice||""};await Xa(Pr(vt,"library"),Qe),await Ja(bn(vt,"wishlist",F))}}else if(C==="markRead"&&H)for(const F of ee)await $a(bn(vt,"library",F),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(C==="markUnread"&&H)for(const F of ee)await $a(bn(vt,"library",F),{read:!1,dateRead:"",rating:""});else if(C==="delete"){const F=H?"library":"wishlist";if(!window.confirm(`Delete ${ee.length} item(s) from ${H?"Library":"Wishlist"}?`))return;for(const ye of ee)await Ja(bn(vt,F,ye))}await Promise.all([Je(),et()]),b(new Set),Ee(!1)}catch(F){console.error(F),alert("Failed to apply multi-select action.")}}function O(C){A(C)}function J(){A(null)}const fe=()=>V(C=>({...C,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},multiAdd:!1,startVol:"",endVol:""})),je=Q.useMemo(()=>{const C=new Map;return[...o,...d].forEach(ee=>{const H=Wa(ee.title||"");if(H.name)if(C.has(H.name)){const F=C.get(H.name);F.maxVol=Math.max(F.maxVol,H.vol)}else{const F=(ee.title||"").replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||ee.title||H.name;C.set(H.name,{display:F,maxVol:H.vol})}}),C},[o,d]),Oe=C=>{V(ee=>({...ee,open:!0,mode:"add",list:C,editingId:null,data:{...ee.data,title:"",list:C}}))},Le=C=>{V({open:!0,mode:"edit",list:C.kind==="wishlist"?"wishlist":"library",editingId:C.id,data:{title:C.title||"",authors:C.authors||"",publisher:C.publisher||"",demographic:C.demographic||"",genre:C.genre||"",subGenre:C.subGenre||"",date:C.date||"",cover:C.cover||"",isbn:C.isbn||"",pageCount:C.pageCount||"",rating:C.rating||"",amountPaid:C.amountPaid||"",dateRead:C.dateRead||"",datePurchased:C.datePurchased||"",msrp:C.msrp||"",specialType:C.specialType||"",specialVolumes:C.specialVolumes||"",collectiblePrice:C.collectiblePrice||"",amazonURL:C.amazonURL||"",read:!!C.read}})},Se=(C,ee,H="text")=>{if(V(F=>({...F,data:{...F.data,[C]:H==="checkbox"?!!ee:ee}})),C==="title"){const F=String(ee||"").trim().toLowerCase();if(!F)x([]);else{const ye=[];je.forEach((Qe,at)=>{if(Qe.display.toLowerCase().includes(F)){const Rt=Qe.maxVol>0?Qe.maxVol+1:1;ye.push(`${Qe.display}, Vol. ${Rt}`)}}),x(ye.slice(0,6))}}};async function Ue(){if(!e)return;const{mode:C,list:ee,data:H,editingId:F,multiAdd:ye,startVol:Qe,endVol:at}=k,Rt=ee||"library";if(!H.title.trim()){alert("Title is required.");return}const At=Ot=>({title:Ot||H.title.trim(),authors:H.authors.trim(),publisher:H.publisher.trim(),demographic:H.demographic.trim(),genre:H.genre.trim(),subGenre:H.subGenre.trim(),date:H.date.trim(),cover:H.cover.trim(),isbn:H.isbn.trim(),pageCount:H.pageCount===""?"":Number(H.pageCount),rating:H.rating===""?"":Math.max(.5,Math.min(5,Number(H.rating))),amountPaid:H.amountPaid===""?"":Number(H.amountPaid),dateRead:H.dateRead.trim(),datePurchased:H.datePurchased.trim(),msrp:H.msrp===""?"":Number(H.msrp),specialType:H.specialType.trim(),specialVolumes:H.specialVolumes===""?"":Number(H.specialVolumes),collectiblePrice:H.collectiblePrice===""?"":Number(H.collectiblePrice),amazonURL:H.amazonURL.trim(),read:!!H.read,kind:ee});try{if(C==="add"&&ye){const Ot=Number(Qe||0),Kn=Number(at||0);if(!Number.isFinite(Ot)||!Number.isFinite(Kn)||Ot<=0||Kn<Ot){alert("Provide valid start/end volumes (start > 0, end >= start).");return}const mr=[];for(let Qn=Ot;Qn<=Kn;Qn++){const Or=`${H.title.trim()} Vol. ${Qn}`;mr.push(Xa(Pr(vt,Rt),At(Or)))}await Promise.all(mr)}else C==="add"?await Xa(Pr(vt,Rt),At()):C==="edit"&&F&&await $a(bn(vt,Rt,F),At());await Promise.all([Je(),et()]),fe()}catch(Ot){console.error(Ot),alert("Failed to save entry.")}}async function $e(C,ee){if(e&&window.confirm("Delete this entry?"))try{await Ja(bn(vt,ee,C)),await Promise.all([Je(),et()])}catch(H){console.error(H),alert("Failed to delete entry.")}}const[Xe,dn]=Q.useState(!1),sn=()=>R({open:!1,index:0,items:[]});async function hn(C,ee){if(!(C!=null&&C.id))return;const H=C.kind==="wishlist"?"wishlist":"library";dn(!0);try{await $a(bn(vt,H,C.id),ee),await Promise.all([Je(),et()]),A(F=>F&&F.id===C.id?{...F,...ee}:F)}catch(F){console.error(F),alert("Failed to update entry.")}finally{dn(!1)}}const Vn=(C,ee)=>{const H=ee===""?"":Math.max(.5,Math.min(5,Number(ee)));hn(C,{rating:H})},Gn=(C,ee)=>{if(!C)return;const H=ee?{read:!0,dateRead:new Date().toISOString().slice(0,10)}:{read:!1,dateRead:""};hn(C,H)},on=()=>{if(!ae.size){alert("Select at least one entry first.");return}const ee=[...o,...d].filter(F=>ae.has(F.id));if(!ee.length){alert("No items selected.");return}const H=ee.map(F=>({id:F.id,kind:F.kind||(t==="wishlist"?"wishlist":"library"),data:{title:F.title||"",authors:F.authors||"",publisher:F.publisher||"",demographic:F.demographic||"",genre:F.genre||"",subGenre:F.subGenre||"",date:F.date||"",cover:F.cover||"",isbn:F.isbn||"",pageCount:F.pageCount||"",rating:F.rating||"",amountPaid:F.amountPaid||"",dateRead:F.dateRead||"",datePurchased:F.datePurchased||"",msrp:F.msrp||"",specialType:F.specialType||"",specialVolumes:F.specialVolumes||"",collectiblePrice:F.collectiblePrice||"",amazonURL:F.amazonURL||"",read:!!F.read}}));R({open:!0,index:0,items:H})},tt=(C,ee,H="text")=>{R(F=>{const ye=[...F.items],Qe={...ye[F.index]};return Qe.data={...Qe.data,[C]:H==="checkbox"?!!ee:ee},ye[F.index]=Qe,{...F,items:ye}})},ui=()=>{R(C=>({...C,index:Math.min(C.index+1,C.items.length-1)}))},pr=()=>{R(C=>({...C,index:Math.max(C.index-1,0)}))};async function re(){if(!e)return;const C=N.items;if(!C.length){sn();return}try{const ee=C.map(H=>{const F={...H.data,pageCount:H.data.pageCount===""?"":Number(H.data.pageCount),rating:H.data.rating===""?"":Math.max(.5,Math.min(5,Number(H.data.rating))),amountPaid:H.data.amountPaid===""?"":Number(H.data.amountPaid),msrp:H.data.msrp===""?"":Number(H.data.msrp),collectiblePrice:H.data.collectiblePrice===""?"":Number(H.data.collectiblePrice),specialVolumes:H.data.specialVolumes===""?"":Number(H.data.specialVolumes),read:!!H.data.read},ye=H.kind==="wishlist"?"wishlist":"library";return $a(bn(vt,ye,H.id),F)});await Promise.all(ee),await Promise.all([Je(),et()]),b(new Set),Ee(!1),sn()}catch(ee){console.error(ee),alert("Failed to save bulk edits.")}}function ge(C){const ee=ae.has(C.id),H=C.kind==="library",F=()=>{ue&&e?_e(C.id):O(C)};return h.jsxs("div",{className:"manga-card"+(C.read&&H?" read":"")+(ee?" multiselect-selected":""),onClick:F,children:[h.jsx("div",{className:"manga-card-cover-wrap",children:h.jsx("img",{src:C.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),h.jsxs("div",{className:"manga-card-body",children:[h.jsx("div",{className:"manga-card-title",children:C.title||"Untitled"}),h.jsxs("div",{className:"manga-card-meta",children:[C.authors&&C.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[C.authors,h.jsx("br",{})]}),C.publisher&&C.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[C.publisher,h.jsx("br",{})]}),C.date&&C.date!=="Unknown"&&C.date]}),C.isbn&&h.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",C.isbn]}),e&&h.jsxs("div",{className:"manga-card-actions",children:[h.jsx("button",{type:"button",className:"manga-btn mini",onClick:ye=>{ye.stopPropagation(),Le(C)},children:"Edit"}),h.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:ye=>{ye.stopPropagation(),$e(C.id,C.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},C.id)}const he=({value:C,onChange:ee})=>{const[H,F]=Q.useState(null),ye=Math.max(0,Math.min(5,Number(C)||0)),Qe=H??ye,at=Qe/5*100,Rt=Array.from({length:10},(At,Ot)=>(Ot+1)*.5);return h.jsxs("div",{className:"star-picker",role:"group","aria-label":"Rating",children:[h.jsx("div",{className:"star-track","aria-hidden":"true",children:""}),h.jsx("div",{className:"star-fill",style:{width:`${at}%`},"aria-hidden":"true",children:""}),h.jsx("div",{className:"star-clicks",children:Rt.map(At=>h.jsx("button",{type:"button","aria-label":`${At} stars`,style:{width:`${100/Rt.length}%`},onMouseEnter:()=>F(At),onMouseLeave:()=>F(null),onClick:()=>ee(At)},At))}),h.jsx("div",{className:"star-value",children:Qe?Qe.toFixed(1):"--"}),h.jsx("button",{type:"button",className:"star-clear",onClick:()=>ee(""),"aria-label":"Clear rating",children:"clear"})]})},Ae=t==="library"?_t:Ge;return h.jsxs("div",{className:"manga-page",children:[h.jsxs("header",{className:"manga-header",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"manga-header-title",children:["Tyler's Manga Library",h.jsx("span",{className:"manga-badge",children:"Firestore synced"})]}),h.jsx("div",{className:"manga-header-sub",children:"Library & Wishlist are managed via Firestore. This React port reuses the same collections as your original index.html."})]}),e&&h.jsx("div",{className:"manga-admin-actions",children:h.jsxs("button",{className:"manga-btn",onClick:()=>Oe(t==="wishlist"?"wishlist":"library"),children:["Add ",t==="wishlist"?"Wishlist":"Library"," Item"]})})]}),h.jsxs("div",{className:"manga-tabs",children:[h.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{i("library"),Ee(!1),b(new Set)},children:"Library"}),h.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{i("wishlist"),Ee(!1),b(new Set)},children:"Wishlist"}),h.jsx("button",{className:"manga-tab-btn"+(t==="dashboard"?" active":""),onClick:()=>{i("dashboard"),Ee(!1),b(new Set)},children:"Manga Dashboard"})]}),t!=="dashboard"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-toolbar",children:[h.jsxs("div",{className:"manga-toolbar-left",children:[h.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?L:$,onChange:C=>t==="library"?K(C.target.value):X(C.target.value)}),h.jsx("div",{className:"manga-counter",children:t==="library"?h.jsxs(h.Fragment,{children:["Library: ",_t.length," / ",o.length]}):h.jsxs(h.Fragment,{children:["Wishlist: ",Ge.length," / ",d.length]})})]}),h.jsx("div",{className:"manga-toolbar-right",children:e&&h.jsx("button",{className:"manga-btn secondary"+(ue?" active":""),onClick:ce,children:ue?"Exit Multi-select":"Multi-select"})})]}),e&&ue&&h.jsxs("div",{className:"manga-multiselect-bar",children:[h.jsxs("span",{children:["Selected: ",h.jsx("strong",{children:ae.size})]}),h.jsx("button",{className:"manga-btn",onClick:on,children:"Bulk Edit"}),h.jsxs("button",{className:"manga-btn secondary",onClick:()=>de("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"manga-btn",onClick:()=>de("markRead"),children:"Mark Read"}),h.jsx("button",{className:"manga-btn secondary",onClick:()=>de("markUnread"),children:"Mark Unread"})]}),h.jsx("button",{className:"manga-btn danger",onClick:()=>de("delete"),children:"Delete"})]})]}),S?h.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):q?h.jsx("div",{className:"manga-empty-state",children:q}):t==="dashboard"?h.jsx(FR,{library:o,wishlist:d}):Ae.length===0?h.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):h.jsx("div",{className:"manga-grid",children:Ae.map(C=>ge(C))}),I&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:C=>{C.target===C.currentTarget&&J()},children:h.jsxs("div",{className:"manga-modal",children:[h.jsx("div",{className:"manga-modal-cover-wrap",children:h.jsx("img",{src:I.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:I.title||"Untitled"}),h.jsx("button",{className:"manga-modal-close",onClick:J,type:"button",children:"Close"})]}),h.jsxs("div",{className:"manga-modal-meta",children:[I.authors&&I.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Author(s):"})," ",I.authors,h.jsx("br",{})]}),I.publisher&&I.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Publisher:"})," ",I.publisher,h.jsx("br",{})]}),I.date&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Release:"})," ",I.date,h.jsx("br",{})]}),I.isbn&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"ISBN:"})," ",I.isbn,h.jsx("br",{})]})]}),h.jsxs("div",{className:"manga-modal-details",children:[I.pageCount&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Pages:"})," ",I.pageCount,h.jsx("br",{})]}),h.jsxs("div",{style:{margin:"6px 0"},children:[h.jsx("strong",{children:"Rating:"})," ",h.jsx(he,{value:I.rating||"",onChange:C=>Vn(I,C)})]}),I.amountPaid&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Amount Paid:"})," $",I.amountPaid,h.jsx("br",{})]}),I.msrp&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"MSRP:"})," $",I.msrp,h.jsx("br",{})]}),I.collectiblePrice&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Collectible:"})," $",I.collectiblePrice,h.jsx("br",{})]}),I.read&&I.dateRead&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Date Read:"})," ",I.dateRead,h.jsx("br",{})]}),I.amazonURL&&h.jsx("div",{style:{marginTop:"6px"},children:h.jsx("a",{href:I.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),h.jsxs("div",{className:"manga-modal-footer",style:{gap:"10px",alignItems:"center"},children:[h.jsx("div",{children:I.kind==="library"&&I.read?"Marked as read in your library.":I.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."}),I.kind==="library"&&h.jsx(h.Fragment,{children:I.read?h.jsx("button",{className:"manga-btn mini secondary",disabled:Xe,onClick:()=>Gn(I,!1),type:"button",children:"Mark as unread"}):h.jsx("button",{className:"manga-btn mini",disabled:Xe,onClick:()=>Gn(I,!0),type:"button",children:"Mark as read"})})]})]})]})}),e&&k.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:C=>{C.target===C.currentTarget&&fe()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:k.mode==="add"?"Add Entry":"Edit Entry"}),h.jsx("button",{className:"manga-modal-close",onClick:fe,type:"button",children:"Close"})]}),h.jsxs("div",{className:"admin-form-layout",children:[h.jsx("div",{className:"admin-cover-frame",children:h.jsx("img",{src:k.data.cover||"https://imgur.com/chUgq4W.png",alt:"Cover preview"})}),h.jsxs("div",{className:"admin-form-fields",children:[h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:k.data.title,onChange:C=>Se("title",C.target.value)})]})}),E.length>0&&h.jsx("div",{className:"title-suggestions",children:E.map((C,ee)=>h.jsx("button",{type:"button",className:"manga-btn mini",onClick:()=>Se("title",C),children:C},C+ee))}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:k.data.authors,onChange:C=>Se("authors",C.target.value)})]})}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:k.data.publisher,onChange:C=>Se("publisher",C.target.value)})]})}),h.jsxs("div",{className:"admin-row three",children:[h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:k.data.date,onChange:C=>Se("date",C.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:k.data.datePurchased,onChange:C=>Se("datePurchased",C.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:k.data.dateRead,onChange:C=>Se("dateRead",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",placeholder:"e.g. 192",value:k.data.pageCount,onChange:C=>Se("pageCount",C.target.value)})]}),h.jsxs("label",{children:["ISBN (library only)",h.jsx("input",{type:"text",value:k.data.isbn,onChange:C=>Se("isbn",C.target.value)})]})]}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",placeholder:"Paste image URL here",value:k.data.cover,onChange:C=>Se("cover",C.target.value)})]})}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:k.data.amountPaid,onChange:C=>Se("amountPaid",C.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:k.data.msrp,onChange:C=>Se("msrp",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:k.data.collectiblePrice,onChange:C=>Se("collectiblePrice",C.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",min:"0",value:k.data.specialVolumes,onChange:C=>Se("specialVolumes",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:k.data.specialType,onChange:C=>Se("specialType",C.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:k.data.amazonURL,onChange:C=>Se("amazonURL",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:k.data.demographic,onChange:C=>Se("demographic",C.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:k.data.genre,onChange:C=>Se("genre",C.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:k.data.subGenre,onChange:C=>Se("subGenre",C.target.value)})]}),h.jsxs("label",{children:["Rating (1-5 stars)",h.jsx(he,{value:k.data.rating,onChange:C=>Se("rating",C)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:k.data.read,onChange:C=>Se("read",C.target.checked,"checkbox")}),h.jsx("span",{children:"Mark as read"})]}),h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:k.multiAdd,onChange:C=>V(ee=>({...ee,multiAdd:C.target.checked}))}),h.jsx("span",{children:"Multi-create volumes"})]})]}),k.multiAdd&&h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Start Volume",h.jsx("input",{type:"number",min:"1",value:k.startVol,onChange:C=>V(ee=>({...ee,startVol:C.target.value}))})]}),h.jsxs("label",{children:["End Volume",h.jsx("input",{type:"number",min:"1",value:k.endVol,onChange:C=>V(ee=>({...ee,endVol:C.target.value}))})]})]})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:fe,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:Ue,type:"button",children:k.mode==="add"?"Add":"Save"})]})]})})}),e&&N.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:C=>{C.target===C.currentTarget&&sn()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",N.index+1," / ",N.items.length,")"]}),h.jsx("button",{className:"manga-modal-close",onClick:sn,type:"button",children:"Close"})]}),N.items.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",N.items[N.index].data.title||"Untitled"]}),h.jsxs("div",{className:"admin-form-grid",children:[h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:N.items[N.index].data.title,onChange:C=>tt("title",C.target.value)})]}),h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:N.items[N.index].data.authors,onChange:C=>tt("authors",C.target.value)})]}),h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:N.items[N.index].data.publisher,onChange:C=>tt("publisher",C.target.value)})]}),h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:N.items[N.index].data.demographic,onChange:C=>tt("demographic",C.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:N.items[N.index].data.genre,onChange:C=>tt("genre",C.target.value)})]}),h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:N.items[N.index].data.subGenre,onChange:C=>tt("subGenre",C.target.value)})]}),h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:N.items[N.index].data.date,onChange:C=>tt("date",C.target.value)})]}),h.jsxs("label",{children:["ISBN",h.jsx("input",{type:"text",value:N.items[N.index].data.isbn,onChange:C=>tt("isbn",C.target.value)})]}),h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",value:N.items[N.index].data.cover,onChange:C=>tt("cover",C.target.value)})]}),h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",value:N.items[N.index].data.pageCount,onChange:C=>tt("pageCount",C.target.value)})]}),h.jsxs("label",{children:["Rating (1-5 stars)",h.jsx(he,{value:N.items[N.index].data.rating,onChange:C=>tt("rating",C)})]}),h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:N.items[N.index].data.amountPaid,onChange:C=>tt("amountPaid",C.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:N.items[N.index].data.msrp,onChange:C=>tt("msrp",C.target.value)})]}),h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:N.items[N.index].data.collectiblePrice,onChange:C=>tt("collectiblePrice",C.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:N.items[N.index].data.datePurchased,onChange:C=>tt("datePurchased",C.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:N.items[N.index].data.dateRead,onChange:C=>tt("dateRead",C.target.value)})]}),h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:N.items[N.index].data.specialType,onChange:C=>tt("specialType",C.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",value:N.items[N.index].data.specialVolumes,onChange:C=>tt("specialVolumes",C.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:N.items[N.index].data.amazonURL,onChange:C=>tt("amazonURL",C.target.value)})]}),h.jsxs("label",{className:"checkbox-row",children:[h.jsx("input",{type:"checkbox",checked:N.items[N.index].data.read,onChange:C=>tt("read",C.target.checked,"checkbox")}),h.jsx("span",{children:"Marked as read"})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[h.jsxs("div",{children:[h.jsx("button",{className:"manga-btn secondary",onClick:pr,type:"button",disabled:N.index===0,children:"Previous"}),h.jsx("button",{className:"manga-btn secondary",onClick:ui,type:"button",disabled:N.index===N.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:sn,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:re,type:"button",children:"Save Edits"})]})]})]})]})})}),h.jsx("datalist",{id:"adminTitleSuggestions",children:y.map(C=>h.jsx("option",{value:C},C))})]})}const zR="https://imokmalworker.imokissick.workers.dev/?url=",BR="im_ok",gv=300,$R={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function WR(r){const e=$R[r.status]||(typeof r.status=="string"?r.status.toLowerCase():"unknown");return{id:r.anime_id||r.id,title:r.anime_title||r.title||"Untitled",episodes:r.anime_num_episodes??r.episodes??null,status:e,score:r.score??null,image:r.anime_image_path||r.image_url||r.anime_img||r.picture||null}}function yv(){return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null}]}async function HR(r,e){const t=`https://myanimelist.net/animelist/${r}/load.json?status=7&offset=${e}`,i=await fetch(`${zR}${encodeURIComponent(t)}`);if(!i.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return i.json()}async function qR(r=BR){const e=[];try{let t=0;for(;;){const i=await HR(r,t);if(!Array.isArray(i)||i.length===0||(e.push(...i),i.length<gv))break;t+=gv}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),yv()}return e.length?e.map(WR):yv()}function GR(){const r=$=>$?$.toString().replace(/_/g," ").replace(/\b\w/g,X=>X.toUpperCase()):"Unknown",[e,t]=Q.useState([]),[i,o]=Q.useState([]),[l,d]=Q.useState(""),[p,y]=Q.useState("all"),[v,E]=Q.useState(!0),[x,S]=Q.useState(""),[M,q]=Q.useState(null);Q.useEffect(()=>{async function $(){try{const X=await qR();t(X),o(X)}catch(X){console.error(X),S("Failed to load data from MAL.")}finally{E(!1)}}$()},[]);const Y=$=>{switch(($||"unknown").toLowerCase()){case"watching":return 0;case"completed":return 1;case"on_hold":return 2;case"plan_to_watch":return 3;case"dropped":return 4;default:return 5}};Q.useEffect(()=>{let $=[...e];if(p!=="all"&&($=$.filter(X=>(X.status||"").toLowerCase()===p)),l){const X=l.toLowerCase();$=$.filter(ue=>(ue.title||"").toLowerCase().includes(X))}$.sort((X,ue)=>{const Ee=Y(X.status),ae=Y(ue.status);return Ee!==ae?Ee-ae:(X.title||"").localeCompare(ue.title||"")}),o($)},[e,p,l]);const L=Q.useMemo(()=>{const $=e.length,X={watching:0,completed:0,on_hold:0,dropped:0,plan_to_watch:0,unknown:0};e.forEach(Ee=>{const ae=(Ee.status||"unknown").toLowerCase();X[ae]!=null?X[ae]+=1:X.unknown+=1});const ue=e.reduce((Ee,ae)=>Number.isFinite(ae.score)?Ee+ae.score:Ee,0)/Math.max(1,e.filter(Ee=>Number.isFinite(Ee.score)).length||1);return{total:$,byStatus:X,avgScore:Number.isFinite(ue)?ue:0}},[e]),K=$=>{const X=$.image||"https://imgur.com/chUgq4W.png";return h.jsxs("article",{className:"anime-card",onClick:()=>q($),children:[h.jsxs("div",{className:"anime-cover-wrap",children:[h.jsx("img",{className:"anime-cover",src:X,alt:$.title,loading:"lazy",decoding:"async"}),h.jsx("div",{className:`badge-status ${($.status||"unknown").toLowerCase()}`,children:r($.status)}),$.score!=null&&h.jsx("div",{className:"badge-score",children:$.score})]}),h.jsxs("div",{className:"anime-meta",children:[h.jsx("div",{className:"anime-title",children:$.title}),h.jsx("div",{className:"anime-sub",children:$.episodes?`${$.episodes} episodes`:"Episodes: ?"}),h.jsxs("div",{className:"anime-progress",children:["Status: ",r($.status)]})]})]},$.id||$.title)};return h.jsxs("main",{className:"anime-page",children:[h.jsxs("div",{className:"anime-content",children:[h.jsx("header",{className:"anime-header",children:h.jsxs("div",{children:[h.jsx("h1",{className:"anime-title",children:"Tyler's Anime Library"}),h.jsx("p",{className:"anime-sub",children:"MAL-synced overview of your shows"})]})}),h.jsxs("div",{className:"anime-stats",children:[h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Total Entries"}),h.jsx("div",{className:"anime-stat-value",children:L.total})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Watching"}),h.jsx("div",{className:"anime-stat-value",children:L.byStatus.watching})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Completed"}),h.jsx("div",{className:"anime-stat-value",children:L.byStatus.completed})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Plan to Watch"}),h.jsx("div",{className:"anime-stat-value",children:L.byStatus.plan_to_watch})]}),h.jsxs("div",{className:"anime-stat-card",children:[h.jsx("div",{className:"anime-stat-label",children:"Avg. Score"}),h.jsx("div",{className:"anime-stat-value",children:L.avgScore?L.avgScore.toFixed(1):""})]})]}),h.jsxs("section",{className:"anime-toolbar",children:[h.jsx("input",{type:"text",placeholder:"Search anime by title...",value:l,onChange:$=>d($.target.value),className:"anime-input"}),h.jsxs("select",{value:p,onChange:$=>y($.target.value),className:"anime-select",children:[h.jsx("option",{value:"all",children:"All statuses"}),h.jsx("option",{value:"watching",children:"Watching"}),h.jsx("option",{value:"completed",children:"Completed"}),h.jsx("option",{value:"on_hold",children:"On Hold"}),h.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"}),h.jsx("option",{value:"dropped",children:"Dropped"})]})]}),v&&h.jsx("div",{className:"loading",children:"Loading anime list from MAL..."}),x&&h.jsx("div",{className:"error-state",children:x}),!v&&!x&&h.jsx(h.Fragment,{children:i.length===0?h.jsx("div",{className:"empty-state",children:"No results match your filters yet."}):h.jsx("section",{className:"anime-grid",children:i.map($=>K($))})})]}),M&&h.jsx("div",{className:"modal-backdrop visible",onClick:$=>{$.target===$.currentTarget&&q(null)},children:h.jsxs("div",{className:"anime-modal",children:[h.jsxs("div",{className:"anime-modal-header",children:[h.jsx("h2",{style:{color:"#ffb6c1",margin:0},children:M.title}),h.jsx("button",{className:"anime-modal-close",onClick:()=>q(null),type:"button",children:"Close"})]}),h.jsxs("div",{className:"anime-modal-body",children:[h.jsx("div",{children:h.jsx("img",{className:"anime-modal-cover",src:M.image||"https://imgur.com/chUgq4W.png",alt:M.title})}),h.jsxs("div",{className:"anime-modal-meta",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Status:"})," ",r(M.status)]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Episodes:"})," ",M.episodes?M.episodes:"Unknown"]}),h.jsxs("div",{children:[h.jsx("strong",{children:"Score:"})," ",M.score!=null?M.score:"N/A"]})]})]})]})})]})}function KR(){const{admin:r}=Rl(),[e,t]=Q.useState([]),[i,o]=Q.useState(!0),[l,d]=Q.useState(""),[p,y]=Q.useState("all"),[v,E]=Q.useState({game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:""});Q.useEffect(()=>{async function K(){try{const $=Pr(vt,"tcg"),X=await qo($),ue=[];X.forEach(Ee=>ue.push({id:Ee.id,...Ee.data()})),t(ue)}catch($){console.error("Error loading TCG:",$)}finally{o(!1)}}K()},[]);const x=e.filter(K=>{if(p!=="all"&&K.game!==p)return!1;if(!l)return!0;const $=l.toLowerCase();return(K.name||"").toLowerCase().includes($)||(K.setName||"").toLowerCase().includes($)||(K.number||"").toLowerCase().includes($)}),S=e.reduce((K,$)=>{const X=Number($.quantity||1),ue=Number($.pricePaid||0),Ee=Number($.estimatedValue||0);return K.totalCards+=X,K.totalPaid+=X*ue,K.totalValue+=X*Ee,$.game==="pokemon"&&(K.pokemon+=X),$.game==="onepiece"&&(K.onepiece+=X),K},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),M=S.totalValue-S.totalPaid,q=(K,$)=>{E(X=>({...X,[K]:$}))},Y=async()=>{if(!r)return;if(!v.name.trim()){alert("Card name is required.");return}const K={game:v.game,name:v.name.trim(),setName:v.setName.trim(),number:v.number.trim(),rarity:v.rarity.trim(),condition:v.condition.trim(),quantity:Number(v.quantity||1),pricePaid:Number(v.pricePaid||0),estimatedValue:Number(v.estimatedValue||0)};try{const $=Pr(vt,"tcg");await Xa($,K),E({game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:""});const X=await qo($),ue=[];X.forEach(Ee=>ue.push({id:Ee.id,...Ee.data()})),t(ue)}catch($){console.error("Error adding card:",$),alert("Failed to save card.")}},L=async K=>{if(r&&window.confirm("Delete this card?"))try{await Ja(bn(vt,"tcg",K)),t($=>$.filter(X=>X.id!==K))}catch($){console.error("Delete error:",$),alert("Failed to delete card.")}};return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"TCG Collection"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Pokemon & One Piece TCG cards with quantities, prices, and collection value."})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.totalCards})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",S.totalPaid.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",S.totalValue.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:M>=0?"#00e676":"#ff8a80"},children:[M>=0?"+":"-","$",Math.abs(M).toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.pokemon})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.onepiece})]})]}),h.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[h.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:l,onChange:K=>d(K.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),h.jsxs("select",{value:p,onChange:K=>y(K.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[h.jsx("option",{value:"all",children:"All games"}),h.jsx("option",{value:"pokemon",children:"Pokemon only"}),h.jsx("option",{value:"onepiece",children:"One Piece only"})]})]}),r&&h.jsxs("section",{className:"card",style:{marginTop:"16px",borderStyle:"dashed",borderColor:"rgba(255,182,193,0.5)"},children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"10px",fontSize:"1.05rem",color:"#ffb6c1"},children:"Add card (admin)"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:v.game,onChange:K=>q("game",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:v.name,onChange:K=>q("name",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:v.setName,onChange:K=>q("setName",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:v.number,onChange:K=>q("number",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:v.rarity,onChange:K=>q("rarity",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:v.condition,onChange:K=>q("condition",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",min:"1",value:v.quantity,onChange:K=>q("quantity",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:v.pricePaid,onChange:K=>q("pricePaid",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:v.estimatedValue,onChange:K=>q("estimatedValue",K.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]}),h.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"10px"},children:h.jsx("button",{onClick:Y,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})})]}),i?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):x.length===0?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):h.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:x.map(K=>{const $=Number(K.quantity||1),X=$*Number(K.pricePaid||0),ue=$*Number(K.estimatedValue||0);return h.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem"},children:[h.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:K.name||"Unnamed card"}),h.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:K.setName||""}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[h.jsxs("span",{children:["#",K.number||"-"]}),h.jsx("span",{children:K.rarity||""})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Cond: ",K.condition||"N/A"]}),h.jsxs("span",{children:["Qty: ",$]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Paid: $",X.toFixed(2)]}),h.jsxs("span",{children:["Value: $",ue.toFixed(2)]})]}),h.jsxs("div",{style:{marginTop:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem"},children:K.game==="pokemon"?"Pokemon":"One Piece"}),r&&h.jsx("button",{onClick:()=>L(K.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})]})]},K.id)})})]})}const QR="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",YR="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",JR="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82";function Bs(r){if(!r)return null;if(r instanceof Date)return r;if(r&&typeof r.toDate=="function")return r.toDate();const e=String(r).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,d,p]=t;return new Date(Number(l),Number(d)-1,Number(p))}const i=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(i){let[,l,d,p]=i;const y=p.length===2?+`20${p}`:Number(p);return new Date(y,Number(l)-1,Number(d))}const o=new Date(e);return isNaN(o.getTime())?null:o}function aw(r){const e=(r.seriesKey||r.series||r.Series||r.title||r.Title||"").trim();return e?e.replace(/\bvolume\s+\d+.*$/i,"").replace(/\bvol\.?\s+\d+.*$/i,"").trim().toLowerCase():""}function XR(r){const e=new Map;for(const t of r){const i=aw(t)||t.id;if(!e.has(i)){const y=(t.series||t.Series||t.title||t.Title||"Unknown Series").trim();e.set(i,{key:i,title:y,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const o=e.get(i);o.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;o.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(o.readVolumes+=1,o.readPages+=l);const p=Number(t.rating||t.Rating);!isNaN(p)&&p>0&&(o.ratingSum+=p,o.ratingCount+=1)}return e}function ko(r,e,t=5){const i=new Map;for(const o of r.values()){const l=(o[e]||"").trim();if(!l)continue;const d=l.split(/[\/,]/).map(p=>p.trim()).filter(Boolean);for(const p of d)i.set(p,(i.get(p)||0)+1)}return[...i.entries()].sort((o,l)=>l[1]-o[1]).slice(0,t).map(([o,l])=>({name:o,count:l}))}function vv(r,e){const t=Array.from({length:12},(i,o)=>{const l=new Date(e,o,1);return{key:`${e}-${o}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:o,value:0}});for(const i of r){const o=Bs(i.dateRead||i.DateRead);!o||o.getFullYear()!==e||(t[o.getMonth()].value+=1)}return t}function Uh(r){const e=r.getFullYear(),t=`${r.getMonth()+1}`.padStart(2,"0"),i=`${r.getDate()}`.padStart(2,"0");return`${e}-${t}-${i}`}async function zh(r,e){try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function ZR(r){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of r){const d=Bs(l.dateRead||l.DateRead);d&&(t[d.getDay()]+=1)}if(!t.some(l=>l>0))return[];const o=t.reduce((l,d)=>Math.max(l,d),0)||1;return e.map((l,d)=>({label:l,value:t[d],pct:t[d]/o}))}function eA(r,e=8){const t=[...r.values()];t.sort((l,d)=>d.volumes-l.volumes);const i=t.slice(0,e),o=i.reduce((l,d)=>Math.max(l,d.volumes),0)||1;return i.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/o}))}function tA(r){const e=[];for(const t of r){const i=Bs(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!i)continue;const o=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:i,title:o})}return e.sort((t,i)=>t.date-i.date),e}function nA(r){const e=new Date;for(const t of r)if(t.date>=e)return t;return r[r.length-1]||null}function rA(r){let e=0,t=0;for(const i of r){const o=Bs(i.datePurchased||i.DatePurchased),l=Bs(i.dateRead||i.DateRead);if(!o||!l)continue;const d=l-o;d<=0||(e+=d/(1e3*60*60*24),t+=1)}return t?e/t:null}function iA(r){let e=0,t=0,i=0;for(const o of r){const l=Number(o.msrp||o.MSRP||0)||0,d=Number(o.amountPaid||o.AmountPaid||o.pricePaid||0)||l||0,p=Number(o.collectiblePrice||o.CollectiblePrice||0)||0;e+=l,t+=d,i+=p}return{msrpTotal:e,paidTotal:t,collectibleTotal:i}}function sA(r){const e=new Map;for(const t of r){const i=aw(t)||t.id;e.has(i)||e.set(i,{key:i,title:t.series||t.Series||t.title||t.Title||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]});const o=e.get(i);o.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,d=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,p=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,y=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;o.msrp+=l,o.paid+=d,o.collectible+=p,o.pages+=y,v&&(o.readPages+=y);const E=Number(t.rating||t.Rating);!isNaN(E)&&E>0&&o.ratings.push(E)}return[...e.values()]}function oA(r){let e=0,t=0;for(const i of r){const o=Number(i.pages||i.Pages||i.pageCount||0)||0;e+=o,(!!i.read||i.status==="Read"||i.Read===!0)&&(t+=o)}return{total:e,read:t}}function aA(r){let e=0,t=0;for(const i of r.values())i.ratingCount>0&&(e+=i.ratingSum/i.ratingCount,t+=1);return t?e/t:null}function lA({data:r}){if(!r||!r.length)return h.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=r.reduce((v,E)=>Math.max(v,E.value),0)||1,t=480,i=230,o=30,l=i-o*2,d=t/Math.max(r.length-1,1),p=r.map((v,E)=>{const x=E*d,S=i-o-v.value/e*l;return{...v,x,y:S}}),y=p.map((v,E)=>E===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return h.jsx("div",{className:"line-chart",children:h.jsxs("svg",{viewBox:`0 0 ${t} ${i}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,E)=>{const x=i-o-v*l;return h.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:x,y2:x},`h-${E}`)}),p.map((v,E)=>h.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:o/2,y2:i-o/2},`v-${E}`)),h.jsx("path",{className:"line-path",d:y}),p.map((v,E)=>h.jsxs("g",{children:[h.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),h.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),h.jsx("text",{className:"line-label",x:v.x,y:i-4,children:v.label})]},E))]})})}function uA({data:r}){return!r||!r.length?h.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):h.jsx("div",{className:"weekday-bars",children:r.map(e=>h.jsxs("div",{className:"weekday-col",children:[h.jsx("div",{className:"weekday-count",children:e.value}),h.jsx("div",{className:"weekday-bar-vert",children:h.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),h.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function cA(r,e){const t=r.getFullYear(),i=r.getMonth(),l=new Date(t,i,1).getDay(),d=new Date(t,i+1,0).getDate(),p=new Map;for(const v of e){const E=v.date;if(E.getFullYear()===t&&E.getMonth()===i){const x=E.getDate();p.has(x)||p.set(x,[]),p.get(x).push(v)}}const y=[];for(let v=0;v<l;v++)y.push({type:"pad"});for(let v=1;v<=d;v++)y.push({type:"day",day:v,releases:p.get(v)||[]});return y}function dA(){const{user:r,admin:e,loading:t}=Rl(),[i,o]=Q.useState([]),[l,d]=Q.useState([]),[p,y]=Q.useState(!0),[v,E]=Q.useState(null),[x,S]=Q.useState("-"),[M,q]=Q.useState(!1),[Y,L]=Q.useState(()=>new Date),[K,$]=Q.useState({open:!1,type:null}),X=new Date().getFullYear(),ue=Q.useRef(null),Ee=Q.useRef(null),ae=Q.useRef("");Q.useEffect(()=>{typeof window>"u"||(ue.current=localStorage.getItem("dashboard-yearly-posted"),Ee.current=localStorage.getItem("dashboard-release-posted"))},[]),Q.useEffect(()=>{let re=!1;async function ge(){if(!r||!e){o([]),d([]),E(null),y(!1);return}try{y(!0);const[he,Ae]=await Promise.all([qo(Pr(vt,"library")),qo(Pr(vt,"wishlist"))]);if(re)return;o(he.docs.map(C=>({id:C.id,...C.data()}))),d(Ae.docs.map(C=>({id:C.id,...C.data()}))),E(null)}catch(he){console.error(he),re||E("Failed to load dashboard data.")}finally{re||y(!1)}}return ge(),()=>{re=!0}},[r,e]);const b=Q.useMemo(()=>{const re=i.length,ge=i.filter(nt=>!!nt.read||nt.status==="Read"||nt.Read===!0).length,he=re-ge,Ae=re?Math.round(ge/re*100):0,C=l.length,ee=XR(i),H=vv(i,X),F=vv(i,X-1),ye=H.reduce((nt,In)=>nt+In.value,0),Qe=ZR(i),at=eA(ee),Rt=tA(l),At=nA(Rt),Ot=rA(i),Kn=iA(i),mr=oA(i),Qn=aA(ee),Or=ko(ee,"publisher",5),Lr=ko(ee,"genre",5),ci=ko(ee,"demographic",5),di=sA(i),fn=[...i].map(nt=>{const In=Bs(nt.dateRead||nt.DateRead)||Bs(nt.datePurchased||nt.DatePurchased);return In?{title:nt.title||nt.Title||nt.series||nt.Series||"Untitled",type:nt.dateRead||nt.DateRead?"Read":"Purchased",date:In}:null}).filter(Boolean).sort((nt,In)=>In.date-nt.date).slice(0,12);return{totalLibrary:re,readCount:ge,unreadCount:he,readPct:Ae,wishlistCount:C,seriesMap:ee,monthlyReads:H,prevYearReads:F,currentYearReadsTotal:ye,weekdayBreakdown:Qe,topSeriesBars:at,releases:Rt,nextRelease:At,avgDays:Ot,collectionValue:Kn,pages:mr,avgRating:Qn,topPublishers:Or,topGenres:Lr,topDemographics:ci,seriesAggregates:di,activity:fn}},[i,l,X]),{totalLibrary:I,readCount:A,unreadCount:k,readPct:V,wishlistCount:N,seriesMap:R,monthlyReads:Je,prevYearReads:et,currentYearReadsTotal:_t,weekdayBreakdown:Ge,topSeriesBars:ce,releases:_e,nextRelease:de,avgDays:O,collectionValue:J,pages:fe,avgRating:je,topPublishers:Oe,topGenres:Le,topDemographics:Se,seriesAggregates:Ue,activity:$e}=b,Xe=de?de.date:null,dn=!!v;if(Q.useEffect(()=>{if(!et||!et.length)return;const re=X-1,ge=et.reduce((ee,H)=>ee+H.value,0);if(!ge||(ue.current?parseInt(ue.current,10):null)===re)return;const Ae=et.map(ee=>`${ee.label}: ${ee.value}`).join(", "),C=`Yearly reads summary for ${re}: ${ge} total. Breakdown: ${Ae}`;zh(QR,C).then(()=>{ue.current=String(re),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String(re))})},[et,X]),Q.useEffect(()=>{if(!de||!_e.length)return;const re=Uh(de.date),ge=Uh(new Date);if(re>ge||Ee.current===re)return;const he=_e.filter(C=>Uh(C.date)===re);if(!he.length)return;const Ae=`Wishlist releases for ${re}:
${he.map(C=>`- ${C.title}`).join(`
`)}`;zh(YR,Ae).then(()=>{Ee.current=re,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",re)})},[de,_e]),Q.useEffect(()=>{var Ae,C;if(!e||!$e||!$e.length)return;const re=$e[0];if(!re||!re.date)return;const ge=`${re.type}-${re.title}-${((C=(Ae=re.date).toISOString)==null?void 0:C.call(Ae))||re.date}`;if(ae.current===ge)return;ae.current=ge;const he=`Activity: ${re.type}  ${re.title} (${re.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})`;zh(JR,he)},[$e,e]),Q.useEffect(()=>{if(!Xe){S("-");return}const re=()=>{const he=Xe-new Date;if(he<=0){S("Released");return}const Ae=Math.floor(he/1e3),C=Math.floor(Ae/86400),ee=Math.floor(Ae%86400/3600).toString().padStart(2,"0"),H=Math.floor(Ae%3600/60).toString().padStart(2,"0"),F=Math.floor(Ae%60).toString().padStart(2,"0");S(`${C}d ${ee}:${H}:${F}`)};re();const ge=setInterval(re,1e3);return()=>clearInterval(ge)},[Xe]),t)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"Checking permissions..."})]})});if(!r||!e)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-locked",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(p)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),v?h.jsx("p",{className:"error",children:v}):h.jsx("p",{children:"Loading stats..."})]})});const sn=I+N,hn=sn?Math.round(I/sn*100):0,Vn=[...R.values()].filter(re=>re.ratingCount>0).map(re=>({title:re.title,avg:re.ratingSum/re.ratingCount,count:re.ratingCount})).sort((re,ge)=>ge.avg-re.avg||ge.count-re.count).slice(0,3);function Gn(){if(Xe)L(new Date(Xe.getFullYear(),Xe.getMonth(),1));else if(_e.length){const re=_e[0].date;L(new Date(re.getFullYear(),re.getMonth(),1))}q(!0)}function on(re){$({open:!0,type:re})}function tt(){$({open:!1,type:null})}const ui=cA(Y,_e);function pr(){const re=K.type;if(!re)return null;if(re==="publishers"){const ge=[...ko(R,"publisher",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Publishers by Series"}),ge.length===0?h.jsx("p",{children:"No publisher data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Publisher"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:ge.map((he,Ae)=>h.jsxs("tr",{children:[h.jsx("td",{children:Ae+1}),h.jsx("td",{children:he.name}),h.jsx("td",{children:he.count})]},he.name+Ae))})]})]})}if(re==="genres"){const ge=[...ko(R,"genre",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Genres by Series"}),ge.length===0?h.jsx("p",{children:"No genre data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Genre"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:ge.map((he,Ae)=>h.jsxs("tr",{children:[h.jsx("td",{children:Ae+1}),h.jsx("td",{children:he.name}),h.jsx("td",{children:he.count})]},he.name+Ae))})]})]})}if(re==="demographics"){const ge=[...ko(R,"demographic",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Demographics by Series"}),ge.length===0?h.jsx("p",{children:"No demographic data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Demographic"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:ge.map((he,Ae)=>h.jsxs("tr",{children:[h.jsx("td",{children:Ae+1}),h.jsx("td",{children:he.name}),h.jsx("td",{children:he.count})]},he.name+Ae))})]})]})}if(re==="timeToRead")return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Average Time From Purchase to Read"}),O==null?h.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):h.jsxs("p",{children:["On average, it takes"," ",h.jsxs("strong",{children:[O.toFixed(1)," days"]})," from purchase to finishing a volume."]})]});if(re==="collectionValue"){const{msrpTotal:ge,paidTotal:he}=J,Ae=ge-he,C=ge>0?(he/ge*100).toFixed(1):"-",ee=[...Ue].filter(H=>H.msrp||H.paid||H.collectible).sort((H,F)=>F.msrp+F.collectible-(H.msrp+H.collectible));return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Collection Value Breakdown"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total MSRP"}),h.jsxs("td",{children:["$",ge.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Total Paid"}),h.jsxs("td",{children:["$",he.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Difference"}),h.jsxs("td",{children:["$",Ae.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Paid vs MSRP"}),h.jsx("td",{children:C==="-"?"-":`${C}%`})]})]})}),ee.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"MSRP"}),h.jsx("th",{children:"Paid"}),h.jsx("th",{children:"Collectible"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:ee.map((H,F)=>h.jsxs("tr",{children:[h.jsx("td",{children:H.title}),h.jsxs("td",{children:["$",H.msrp.toFixed(2)]}),h.jsxs("td",{children:["$",H.paid.toFixed(2)]}),h.jsx("td",{children:H.collectible?`$${H.collectible.toFixed(2)}`:"--"}),h.jsx("td",{children:H.books})]},H.title+F))})]})]})]})}if(re==="pages"){const ge=[...Ue].filter(he=>he.pages>0).map(he=>({...he,pct:he.pages?Math.round(he.readPages/he.pages*100):0})).sort((he,Ae)=>Ae.pages-he.pages);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Pages Read vs Total"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total Pages"}),h.jsx("td",{children:fe.total.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Pages Read"}),h.jsx("td",{children:fe.read.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Completion"}),h.jsx("td",{children:fe.total?`${(fe.read/fe.total*100).toFixed(1)}%`:"-"})]})]})}),ge.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Read Pages"}),h.jsx("th",{children:"Total Pages"}),h.jsx("th",{children:"% Read"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:ge.map((he,Ae)=>h.jsxs("tr",{children:[h.jsx("td",{children:he.title}),h.jsx("td",{children:he.readPages.toLocaleString()}),h.jsx("td",{children:he.pages.toLocaleString()}),h.jsxs("td",{children:[he.pct,"%"]}),h.jsx("td",{children:he.books})]},he.title+Ae))})]})]})]})}if(re==="ratings"){const ge=[...Ue].map(he=>{if(!he.ratings.length)return null;const Ae=he.ratings.reduce((C,ee)=>C+ee,0)/he.ratings.length;return{title:he.title,avg:Ae,count:he.ratings.length}}).filter(Boolean).sort((he,Ae)=>Ae.avg-he.avg||Ae.count-he.count);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Ratings Overview"}),je==null?h.jsx("p",{children:"No ratings have been recorded yet."}):h.jsxs("p",{children:["Average series rating across rated series is"," ",h.jsx("strong",{children:je.toFixed(2)}),"."]}),ge.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Avg"}),h.jsx("th",{children:"Ratings"})]})}),h.jsx("tbody",{children:ge.map((he,Ae)=>h.jsxs("tr",{children:[h.jsx("td",{children:he.title}),h.jsx("td",{children:he.avg.toFixed(2)}),h.jsx("td",{children:he.count})]},he.title+Ae))})]})]})]})}return re==="releases"?h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Wishlist Releases"}),_e.length===0?h.jsx("p",{children:"No wishlist releases found."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Date"}),h.jsx("th",{children:"Title"})]})}),h.jsx("tbody",{children:_e.map((ge,he)=>h.jsxs("tr",{children:[h.jsx("td",{children:ge.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),h.jsx("td",{children:ge.title})]},he))})]})]}):null}return h.jsxs("div",{className:"page dashboard-page",children:[h.jsx("header",{className:"dashboard-header",children:h.jsxs("div",{children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{className:"dashboard-sub",children:"Admin-only analytics for your manga library and wishlist."})]})}),h.jsx("section",{id:"dashboardSection",className:"page-section active",children:h.jsxs("div",{className:"dashboard-grid",children:[h.jsxs("div",{className:"stat-stack",children:[h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Total Library Books"}),h.jsx("div",{className:"stat-value",children:I}),h.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Wishlist Items"}),h.jsx("div",{className:"stat-value",children:N}),h.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Read / Unread"}),h.jsx("div",{className:"pie",style:{"--pct":`${V*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[V,"%"]})}),h.jsxs("div",{className:"stat-value",children:[A," read / ",k," unread"]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>on("ratings"),children:[h.jsx("h3",{children:"Ratings"}),h.jsx("div",{className:"stat-value",children:je==null?"-":je.toFixed(2)}),h.jsx("div",{className:"stat-sub",children:"Average across rated series."}),h.jsx("div",{className:"stat-list compact",children:Vn.length?Vn.map((re,ge)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:ge+1}),h.jsx("span",{className:"stat-name",children:re.title}),h.jsx("span",{className:"stat-count",children:re.avg.toFixed(2)})]},re.title+ge)):h.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>on("pages"),children:[h.jsx("h3",{children:"Page Count Read / Total"}),h.jsxs("div",{className:"stat-value",children:[fe.read.toLocaleString()," / ",fe.total.toLocaleString()]}),h.jsx("div",{className:"stat-sub",children:fe.total?`${(fe.read/fe.total*100).toFixed(1)}% read`:"-"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Library vs Wishlist"}),h.jsx("div",{className:"pie",style:{"--pct":`${hn*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[hn,"%"]})}),h.jsxs("div",{className:"stat-value",children:[I," / ",N]}),h.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>on("demographics"),children:[h.jsx("h3",{children:"Top Demographics"}),h.jsx("div",{className:"stat-list",children:Se.length?Se.slice(0,3).map((re,ge)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:ge+1}),h.jsx("span",{className:"stat-name",children:re.name}),h.jsx("span",{className:"stat-count",children:re.count})]},re.name)):h.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>on("publishers"),children:[h.jsx("h3",{children:"Top Publishers"}),h.jsx("div",{className:"stat-list",children:Oe.length?Oe.slice(0,3).map((re,ge)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:ge+1}),h.jsx("span",{className:"stat-name",children:re.name}),h.jsx("span",{className:"stat-count",children:re.count})]},re.name)):h.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>on("genres"),children:[h.jsx("h3",{children:"Top Genres"}),h.jsx("div",{className:"stat-list",children:Le.length?Le.slice(0,3).map((re,ge)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:ge+1}),h.jsx("span",{className:"stat-name",children:re.name}),h.jsx("span",{className:"stat-count",children:re.count})]},re.name)):h.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>{Gn()},children:[h.jsx("h3",{children:"Next Wishlist Release"}),h.jsx("div",{className:"stat-value next-release",children:de?de.title:"No upcoming releases"}),h.jsxs("div",{className:"stat-sub",children:[Xe?Xe.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",h.jsx("br",{}),h.jsx("span",{id:"statNextCountdown",children:x})]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>on("collectionValue"),style:{textAlign:"center"},children:[h.jsx("h3",{children:"Collection Pricing"}),h.jsxs("div",{className:"stat-value stat-msrp",children:["$",J.msrpTotal.toFixed(2)]}),h.jsxs("div",{className:"stat-value stat-paid",children:["$",J.paidTotal.toFixed(2),J.msrpTotal>0&&h.jsxs("span",{className:"stat-paid-pct",children:["(",((1-J.paidTotal/J.msrpTotal)*100).toFixed(1),"% off)"]})]}),h.jsxs("div",{className:"stat-value stat-collectible",children:["$",J.collectibleTotal.toFixed(2)]}),h.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Current Year Reads"}),h.jsx("div",{className:"stat-value",children:_t}),h.jsxs("div",{className:"stat-sub",children:["Reads in ",X]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>on("timeToRead"),children:[h.jsx("h3",{children:"Avg Days From Purchase to Read"}),h.jsx("div",{className:"stat-value",children:O==null?"-":`${O.toFixed(1)} days`}),h.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),h.jsxs("div",{className:"stat-duo",children:[h.jsxs("div",{className:"stat-card tall",children:[h.jsxs("h3",{children:["Reads Per Month (",X,")"]}),h.jsx(lA,{data:Je})]}),h.jsxs("div",{className:"stat-card tall",children:[h.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),h.jsx(uA,{data:Ge}),h.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),h.jsxs("div",{className:"stat-card wide",children:[h.jsx("h3",{children:"Activity Log"}),dn&&h.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),h.jsx("div",{className:"activity-log",children:$e.length?$e.map((re,ge)=>h.jsxs("div",{className:"activity-row",children:[h.jsx("span",{className:"activity-type",children:re.type}),h.jsx("span",{className:"activity-title",children:re.title}),h.jsx("span",{className:"activity-date",children:re.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]},re.title+ge)):h.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]})]})}),M&&h.jsx("div",{id:"calendarOverlay",onClick:()=>q(!1),children:h.jsxs("div",{id:"calendarCard",onClick:re=>re.stopPropagation(),children:[h.jsxs("div",{className:"calendar-header",children:[h.jsx("div",{className:"calendar-title",children:Y.toLocaleString(void 0,{month:"long",year:"numeric"})}),h.jsxs("div",{className:"calendar-nav",children:[h.jsx("button",{className:"calendar-nav-btn",onClick:()=>L(new Date(Y.getFullYear(),Y.getMonth()-1,1)),children:"<"}),h.jsx("button",{className:"calendar-nav-btn",onClick:()=>L(new Date(Y.getFullYear(),Y.getMonth()+1,1)),children:">"})]})]}),h.jsxs("div",{className:"calendar-weekdays",children:[h.jsx("div",{children:"Sun"}),h.jsx("div",{children:"Mon"}),h.jsx("div",{children:"Tue"}),h.jsx("div",{children:"Wed"}),h.jsx("div",{children:"Thu"}),h.jsx("div",{children:"Fri"}),h.jsx("div",{children:"Sat"})]}),h.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:ui.map((re,ge)=>re.type==="pad"?h.jsx("div",{className:"calendar-day pad"},ge):h.jsxs("div",{className:"calendar-day",children:[h.jsx("div",{className:"day-num",children:re.day}),h.jsxs("div",{className:"calendar-releases",children:[re.releases.slice(0,2).map((he,Ae)=>h.jsx("div",{className:"calendar-release",title:he.title,children:he.title},Ae)),re.releases.length>2&&h.jsxs("button",{className:"calendar-more-btn",children:["+",re.releases.length-2," more"]})]})]},ge))}),!_e.length&&h.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),h.jsx("button",{id:"calendarClose",onClick:()=>q(!1),children:"x"})]})}),K.open&&h.jsx("div",{id:"statDetailOverlay",onClick:tt,children:h.jsxs("div",{id:"statDetailCard",onClick:re=>re.stopPropagation(),children:[h.jsx("button",{id:"statDetailClose",onClick:tt,children:"x"}),h.jsxs("h2",{id:"statDetailTitle",children:[K.type==="publishers"&&"Top Publishers",K.type==="genres"&&"Top Genres",K.type==="demographics"&&"Top Demographics",K.type==="timeToRead"&&"Avg Time From Purchase to Read",K.type==="collectionValue"&&"Collection Value",K.type==="pages"&&"Pages Read vs Total",K.type==="ratings"&&"Ratings",K.type==="releases"&&"Wishlist Releases"]}),h.jsx("div",{id:"statDetailBody",children:pr()})]})})]})}function hA(){const r=Rc(),{user:e}=Rl();e&&r("/");async function t(){try{const i=new Rr;await S_(Gi,i),r("/")}catch(i){console.error(i),alert("Google Sign-In failed.")}}return h.jsx("div",{className:"signin-page",children:h.jsxs("div",{className:"signin-card",children:[h.jsx("h2",{className:"signin-title",children:"Welcome Back"}),h.jsx("p",{className:"signin-sub",children:"Sign in to access your dashboard & collections."}),h.jsxs("button",{className:"google-btn",onClick:t,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsxs("button",{className:"signin-cancel",onClick:()=>r("/"),children:["<"," Back to Home"]})]})})}function fA(){return h.jsxs(DR,{children:[h.jsx(OR,{}),h.jsxs(pT,{children:[h.jsx(Xr,{path:"/",element:h.jsx(mv,{})}),h.jsx(Xr,{path:"/home",element:h.jsx(mv,{})}),h.jsx(Xr,{path:"/manga",element:h.jsx(UR,{})}),h.jsx(Xr,{path:"/anime",element:h.jsx(GR,{})}),h.jsx(Xr,{path:"/tcg",element:h.jsx(KR,{})}),h.jsx(Xr,{path:"/dashboard",element:h.jsx(dA,{})}),h.jsx(Xr,{path:"/signin",element:h.jsx(hA,{})}),h.jsx(Xr,{path:"*",element:h.jsx(hT,{to:"/home",replace:!0})})]})]})}EE.createRoot(document.getElementById("root")).render(h.jsx(wv.StrictMode,{children:h.jsx(ET,{basename:"/base",children:h.jsx(fA,{})})}));
