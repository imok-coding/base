import{r as t,j as e}from"./index-Dne_ocRQ.js";const o="https://steam-worker.imokissick.workers.dev";function O(){var x,r,h;const[a,i]=t.useState(null),[m,_]=t.useState(null),[s,g]=t.useState(null),[l,w]=t.useState(null),[u,N]=t.useState("");if(t.useEffect(()=>{let d=!1;return(async()=>{try{const[n,j,p,v]=await Promise.all([fetch(`${o}/steam/profile`),fetch(`${o}/steam/level`),fetch(`${o}/steam/badges`),fetch(`${o}/steam/owned-games`)]);if(!n.ok||!j.ok||!p.ok||!v.ok)throw new Error("Unable to load Steam profile data");const[b,k,y,P]=await Promise.all([n.json(),j.json(),p.json(),v.json()]);d||(i(b),_(k),g(y),w(P))}catch(n){d||N(n.message||"Steam profile unavailable")}})(),()=>{d=!0}},[]),u)return e.jsxs("div",{className:"steam-card",children:[" ",u," "]});if(!a)return null;const f=$(a.personastate),S=f.toLowerCase();return e.jsxs("div",{className:"steam-card",children:[e.jsxs("div",{className:"steam-card__header",children:[e.jsx("div",{className:"steam-card__avatar",children:e.jsx("img",{src:a.avatarfull,alt:`${a.personaname}'s avatar`})}),e.jsxs("div",{children:[e.jsx("h2",{className:"steam-card__name",children:a.personaname}),e.jsx("div",{className:"steam-card__meta",children:e.jsx("span",{className:`pill pill-status ${S}`,children:f})})]}),a.profileurl&&e.jsx("a",{className:"steam-card__link",href:a.profileurl,target:"_blank",rel:"noreferrer",children:"View profile"})]}),a.gameextrainfo&&e.jsxs("div",{className:"steam-card__now-playing",children:[e.jsx("span",{children:"Now playing"}),e.jsx("strong",{children:a.gameextrainfo})]}),(m!=null||s||l)&&e.jsxs("div",{className:"steam-card__stats",children:[e.jsx(c,{label:"Level",value:m??"-"}),e.jsx(c,{label:"Badges",value:((x=s==null?void 0:s.badges)==null?void 0:x.length)??"-"}),e.jsx(c,{label:"XP",value:((h=(r=s==null?void 0:s.player_xp)==null?void 0:r.toLocaleString)==null?void 0:h.call(r))??"-"}),e.jsx(c,{label:"Owned",value:(l==null?void 0:l.game_count)??"-"})]})]})}const c=({label:a,value:i})=>e.jsxs("div",{className:"steam-card__stat",children:[e.jsx("p",{className:"subtext",children:a}),e.jsx("strong",{children:i})]}),$=(a=0)=>["Offline","Online","Busy","Away","Snooze","Trade","Play"][a]||"Offline";export{O as default};
