function cE(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function gv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Eh={exports:{}},Ua={},Th={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function dE(){if(Eg)return Me;Eg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),x=Symbol.iterator;function S(F){return F===null||typeof F!="object"?null:(F=x&&F[x]||F["@@iterator"],typeof F=="function"?F:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,K={};function B(F,J,he){this.props=F,this.context=J,this.refs=K,this.updater=he||M}B.prototype.isReactComponent={},B.prototype.setState=function(F,J){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,J,"setState")},B.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function G(){}G.prototype=B.prototype;function Z(F,J,he){this.props=F,this.context=J,this.refs=K,this.updater=he||M}var ie=Z.prototype=new G;ie.constructor=Z,W(ie,B.prototype),ie.isPureReactComponent=!0;var ce=Array.isArray,Ie=Object.prototype.hasOwnProperty,de={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(F,J,he){var Ne,De={},Oe=null,Te=null;if(J!=null)for(Ne in J.ref!==void 0&&(Te=J.ref),J.key!==void 0&&(Oe=""+J.key),J)Ie.call(J,Ne)&&!k.hasOwnProperty(Ne)&&(De[Ne]=J[Ne]);var Fe=arguments.length-2;if(Fe===1)De.children=he;else if(1<Fe){for(var Be=Array(Fe),Ge=0;Ge<Fe;Ge++)Be[Ge]=arguments[Ge+2];De.children=Be}if(F&&F.defaultProps)for(Ne in Fe=F.defaultProps,Fe)De[Ne]===void 0&&(De[Ne]=Fe[Ne]);return{$$typeof:r,type:F,key:Oe,ref:Te,props:De,_owner:de.current}}function R(F,J){return{$$typeof:r,type:F.type,key:J,ref:F.ref,props:F.props,_owner:F._owner}}function A(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function L(F){var J={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(he){return J[he]})}var N=/\/+/g;function P(F,J){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):J.toString(36)}function et(F,J,he,Ne,De){var Oe=typeof F;(Oe==="undefined"||Oe==="boolean")&&(F=null);var Te=!1;if(F===null)Te=!0;else switch(Oe){case"string":case"number":Te=!0;break;case"object":switch(F.$$typeof){case r:case e:Te=!0}}if(Te)return Te=F,De=De(Te),F=Ne===""?"."+P(Te,0):Ne,ce(De)?(he="",F!=null&&(he=F.replace(N,"$&/")+"/"),et(De,J,he,"",function(Ge){return Ge})):De!=null&&(A(De)&&(De=R(De,he+(!De.key||Te&&Te.key===De.key?"":(""+De.key).replace(N,"$&/")+"/")+F)),J.push(De)),1;if(Te=0,Ne=Ne===""?".":Ne+":",ce(F))for(var Fe=0;Fe<F.length;Fe++){Oe=F[Fe];var Be=Ne+P(Oe,Fe);Te+=et(Oe,J,he,Be,De)}else if(Be=S(F),typeof Be=="function")for(F=Be.call(F),Fe=0;!(Oe=F.next()).done;)Oe=Oe.value,Be=Ne+P(Oe,Fe++),Te+=et(Oe,J,he,Be,De);else if(Oe==="object")throw J=String(F),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Te}function rt(F,J,he){if(F==null)return F;var Ne=[],De=0;return et(F,Ne,"","",function(Oe){return J.call(he,Oe,De++)}),Ne}function yt(F){if(F._status===-1){var J=F._result;J=J(),J.then(function(he){(F._status===0||F._status===-1)&&(F._status=1,F._result=he)},function(he){(F._status===0||F._status===-1)&&(F._status=2,F._result=he)}),F._status===-1&&(F._status=0,F._result=J)}if(F._status===1)return F._result.default;throw F._result}var qe={current:null},le={transition:null},ye={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:le,ReactCurrentOwner:de};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:rt,forEach:function(F,J,he){rt(F,function(){J.apply(this,arguments)},he)},count:function(F){var J=0;return rt(F,function(){J++}),J},toArray:function(F){return rt(F,function(J){return J})||[]},only:function(F){if(!A(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Me.Component=B,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=Z,Me.StrictMode=i,Me.Suspense=y,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,Me.act=ue,Me.cloneElement=function(F,J,he){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ne=W({},F.props),De=F.key,Oe=F.ref,Te=F._owner;if(J!=null){if(J.ref!==void 0&&(Oe=J.ref,Te=de.current),J.key!==void 0&&(De=""+J.key),F.type&&F.type.defaultProps)var Fe=F.type.defaultProps;for(Be in J)Ie.call(J,Be)&&!k.hasOwnProperty(Be)&&(Ne[Be]=J[Be]===void 0&&Fe!==void 0?Fe[Be]:J[Be])}var Be=arguments.length-2;if(Be===1)Ne.children=he;else if(1<Be){Fe=Array(Be);for(var Ge=0;Ge<Be;Ge++)Fe[Ge]=arguments[Ge+2];Ne.children=Fe}return{$$typeof:r,type:F.type,key:De,ref:Oe,props:Ne,_owner:Te}},Me.createContext=function(F){return F={$$typeof:d,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},Me.createElement=I,Me.createFactory=function(F){var J=I.bind(null,F);return J.type=F,J},Me.createRef=function(){return{current:null}},Me.forwardRef=function(F){return{$$typeof:p,render:F}},Me.isValidElement=A,Me.lazy=function(F){return{$$typeof:E,_payload:{_status:-1,_result:F},_init:yt}},Me.memo=function(F,J){return{$$typeof:v,type:F,compare:J===void 0?null:J}},Me.startTransition=function(F){var J=le.transition;le.transition={};try{F()}finally{le.transition=J}},Me.unstable_act=ue,Me.useCallback=function(F,J){return qe.current.useCallback(F,J)},Me.useContext=function(F){return qe.current.useContext(F)},Me.useDebugValue=function(){},Me.useDeferredValue=function(F){return qe.current.useDeferredValue(F)},Me.useEffect=function(F,J){return qe.current.useEffect(F,J)},Me.useId=function(){return qe.current.useId()},Me.useImperativeHandle=function(F,J,he){return qe.current.useImperativeHandle(F,J,he)},Me.useInsertionEffect=function(F,J){return qe.current.useInsertionEffect(F,J)},Me.useLayoutEffect=function(F,J){return qe.current.useLayoutEffect(F,J)},Me.useMemo=function(F,J){return qe.current.useMemo(F,J)},Me.useReducer=function(F,J,he){return qe.current.useReducer(F,J,he)},Me.useRef=function(F){return qe.current.useRef(F)},Me.useState=function(F){return qe.current.useState(F)},Me.useSyncExternalStore=function(F,J,he){return qe.current.useSyncExternalStore(F,J,he)},Me.useTransition=function(){return qe.current.useTransition()},Me.version="18.3.1",Me}var Tg;function yf(){return Tg||(Tg=1,Th.exports=dE()),Th.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function hE(){if(xg)return Ua;xg=1;var r=yf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(p,y,v){var E,x={},S=null,M=null;v!==void 0&&(S=""+v),y.key!==void 0&&(S=""+y.key),y.ref!==void 0&&(M=y.ref);for(E in y)i.call(y,E)&&!l.hasOwnProperty(E)&&(x[E]=y[E]);if(p&&p.defaultProps)for(E in y=p.defaultProps,y)x[E]===void 0&&(x[E]=y[E]);return{$$typeof:e,type:p,key:S,ref:M,props:x,_owner:o.current}}return Ua.Fragment=t,Ua.jsx=d,Ua.jsxs=d,Ua}var Ig;function fE(){return Ig||(Ig=1,Eh.exports=hE()),Eh.exports}var h=fE(),Y=yf();const yv=gv(Y),pE=cE({__proto__:null,default:yv},[Y]);var zu={},xh={exports:{}},mn={},Ih={exports:{}},Sh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function mE(){return Sg||(Sg=1,(function(r){function e(le,ye){var ue=le.length;le.push(ye);e:for(;0<ue;){var F=ue-1>>>1,J=le[F];if(0<o(J,ye))le[F]=ye,le[ue]=J,ue=F;else break e}}function t(le){return le.length===0?null:le[0]}function i(le){if(le.length===0)return null;var ye=le[0],ue=le.pop();if(ue!==ye){le[0]=ue;e:for(var F=0,J=le.length,he=J>>>1;F<he;){var Ne=2*(F+1)-1,De=le[Ne],Oe=Ne+1,Te=le[Oe];if(0>o(De,ue))Oe<J&&0>o(Te,De)?(le[F]=Te,le[Oe]=ue,F=Oe):(le[F]=De,le[Ne]=ue,F=Ne);else if(Oe<J&&0>o(Te,ue))le[F]=Te,le[Oe]=ue,F=Oe;else break e}}return ye}function o(le,ye){var ue=le.sortIndex-ye.sortIndex;return ue!==0?ue:le.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var y=[],v=[],E=1,x=null,S=3,M=!1,W=!1,K=!1,B=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(le){for(var ye=t(v);ye!==null;){if(ye.callback===null)i(v);else if(ye.startTime<=le)i(v),ye.sortIndex=ye.expirationTime,e(y,ye);else break;ye=t(v)}}function ce(le){if(K=!1,ie(le),!W)if(t(y)!==null)W=!0,yt(Ie);else{var ye=t(v);ye!==null&&qe(ce,ye.startTime-le)}}function Ie(le,ye){W=!1,K&&(K=!1,G(I),I=-1),M=!0;var ue=S;try{for(ie(ye),x=t(y);x!==null&&(!(x.expirationTime>ye)||le&&!L());){var F=x.callback;if(typeof F=="function"){x.callback=null,S=x.priorityLevel;var J=F(x.expirationTime<=ye);ye=r.unstable_now(),typeof J=="function"?x.callback=J:x===t(y)&&i(y),ie(ye)}else i(y);x=t(y)}if(x!==null)var he=!0;else{var Ne=t(v);Ne!==null&&qe(ce,Ne.startTime-ye),he=!1}return he}finally{x=null,S=ue,M=!1}}var de=!1,k=null,I=-1,R=5,A=-1;function L(){return!(r.unstable_now()-A<R)}function N(){if(k!==null){var le=r.unstable_now();A=le;var ye=!0;try{ye=k(!0,le)}finally{ye?P():(de=!1,k=null)}}else de=!1}var P;if(typeof Z=="function")P=function(){Z(N)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,rt=et.port2;et.port1.onmessage=N,P=function(){rt.postMessage(null)}}else P=function(){B(N,0)};function yt(le){k=le,de||(de=!0,P())}function qe(le,ye){I=B(function(){le(r.unstable_now())},ye)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(le){le.callback=null},r.unstable_continueExecution=function(){W||M||(W=!0,yt(Ie))},r.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<le?Math.floor(1e3/le):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(le){switch(S){case 1:case 2:case 3:var ye=3;break;default:ye=S}var ue=S;S=ye;try{return le()}finally{S=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(le,ye){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ue=S;S=le;try{return ye()}finally{S=ue}},r.unstable_scheduleCallback=function(le,ye,ue){var F=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?F+ue:F):ue=F,le){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ue+J,le={id:E++,callback:ye,priorityLevel:le,startTime:ue,expirationTime:J,sortIndex:-1},ue>F?(le.sortIndex=ue,e(v,le),t(y)===null&&le===t(v)&&(K?(G(I),I=-1):K=!0,qe(ce,ue-F))):(le.sortIndex=J,e(y,le),W||M||(W=!0,yt(Ie))),le},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(le){var ye=S;return function(){var ue=S;S=ye;try{return le.apply(this,arguments)}finally{S=ue}}}})(Sh)),Sh}var Cg;function gE(){return Cg||(Cg=1,Ih.exports=mE()),Ih.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function yE(){if(Pg)return mn;Pg=1;var r=yf(),e=gE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},x={};function S(n){return y.call(x,n)?!0:y.call(E,n)?!1:v.test(n)?x[n]=!0:(E[n]=!0,!1)}function M(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,s,a,c){if(s===null||typeof s>"u"||M(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function K(n,s,a,c,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){B[n]=new K(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];B[s]=new K(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){B[n]=new K(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){B[n]=new K(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){B[n]=new K(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){B[n]=new K(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){B[n]=new K(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){B[n]=new K(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){B[n]=new K(n,5,!1,n.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function Z(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(G,Z);B[s]=new K(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(G,Z);B[s]=new K(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(G,Z);B[s]=new K(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){B[n]=new K(n,1,!1,n.toLowerCase(),null,!1,!1)}),B.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){B[n]=new K(n,1,!1,n.toLowerCase(),null,!0,!0)});function ie(n,s,a,c){var f=B.hasOwnProperty(s)?B[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(W(s,a,f,c)&&(a=null),c||f===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var ce=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ie=Symbol.for("react.element"),de=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),L=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),yt=Symbol.for("react.lazy"),qe=Symbol.for("react.offscreen"),le=Symbol.iterator;function ye(n){return n===null||typeof n!="object"?null:(n=le&&n[le]||n["@@iterator"],typeof n=="function"?n:null)}var ue=Object.assign,F;function J(n){if(F===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);F=s&&s[1]||""}return`
`+F+n}var he=!1;function Ne(n,s){if(!n||he)return"";he=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(H){var c=H}Reflect.construct(n,[],s)}else{try{s.call()}catch(H){c=H}n.call(s.prototype)}else{try{throw Error()}catch(H){c=H}n()}}catch(H){if(H&&c&&typeof H.stack=="string"){for(var f=H.stack.split(`
`),g=c.stack.split(`
`),w=f.length-1,C=g.length-1;1<=w&&0<=C&&f[w]!==g[C];)C--;for(;1<=w&&0<=C;w--,C--)if(f[w]!==g[C]){if(w!==1||C!==1)do if(w--,C--,0>C||f[w]!==g[C]){var j=`
`+f[w].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=w&&0<=C);break}}}finally{he=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?J(n):""}function De(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=Ne(n.type,!1),n;case 11:return n=Ne(n.type.render,!1),n;case 1:return n=Ne(n.type,!0),n;default:return""}}function Oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case de:return"Portal";case R:return"Profiler";case I:return"StrictMode";case P:return"Suspense";case et:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case L:return(n.displayName||"Context")+".Consumer";case A:return(n._context.displayName||"Context")+".Provider";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case rt:return s=n.displayName||null,s!==null?s:Oe(n.type)||"Memo";case yt:s=n._payload,n=n._init;try{return Oe(n(s))}catch{}}return null}function Te(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ge(n){var s=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function vn(n){n._valueTracker||(n._valueTracker=Ge(n))}function Je(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function _n(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function kn(n,s){var a=s.checked;return ue({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function cr(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Fe(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function en(n,s){s=s.checked,s!=null&&ie(n,"checked",s,!1)}function Wn(n,s){en(n,s);var a=Fe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?oe(n,s.type,a):s.hasOwnProperty("defaultValue")&&oe(n,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function b(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function oe(n,s,a){(s!=="number"||_n(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var V=Array.isArray;function D(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Q(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function me(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(V(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Fe(a)}}function Ve(n,s){var a=Fe(s.value),c=Fe(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Xe(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Pe(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qe(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Pe(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var on,Hn=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(on=on||document.createElement("div"),on.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=on.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Nn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},br=["Webkit","ms","Moz","O"];Object.keys(dr).forEach(function(n){br.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),dr[s]=dr[n]})});function es(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||dr.hasOwnProperty(n)&&dr[n]?(""+s).trim():s+"px"}function ts(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=es(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var ns=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rs(n,s){if(s){if(ns[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function is(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jr=null;function ii(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var si=null,an=null,tt=null;function wn(n){if(n=Sa(n)){if(typeof si!="function")throw Error(t(280));var s=n.stateNode;s&&(s=nu(s),si(n.stateNode,n.type,s))}}function hr(n){an?tt?tt.push(n):tt=[n]:an=n}function na(){if(an){var n=an,s=tt;if(tt=an=null,wn(n),s)for(n=0;n<s.length;n++)wn(s[n])}}function ss(n,s){return n(s)}function ra(){}var Dr=!1;function ia(n,s,a){if(Dr)return n(s,a);Dr=!0;try{return ss(n,s,a)}finally{Dr=!1,(an!==null||tt!==null)&&(ra(),na())}}function vt(n,s){var a=n.stateNode;if(a===null)return null;var c=nu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Hs=!1;if(p)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){Hs=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{Hs=!1}function os(n,s,a,c,f,g,w,C,j){var H=Array.prototype.slice.call(arguments,3);try{s.apply(a,H)}catch(ne){this.onError(ne)}}var as=!1,qs=null,Gn=!1,sa=null,Qc={onError:function(n){as=!0,qs=n}};function Gs(n,s,a,c,f,g,w,C,j){as=!1,qs=null,os.apply(Qc,arguments)}function Pl(n,s,a,c,f,g,w,C,j){if(Gs.apply(this,arguments),as){if(as){var H=qs;as=!1,qs=null}else throw Error(t(198));Gn||(Gn=!0,sa=H)}}function Kn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ls(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Qn(n){if(Kn(n)!==n)throw Error(t(188))}function Rl(n){var s=n.alternate;if(!s){if(s=Kn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Qn(f),n;if(g===c)return Qn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var w=!1,C=f.child;C;){if(C===a){w=!0,a=f,c=g;break}if(C===c){w=!0,c=f,a=g;break}C=C.sibling}if(!w){for(C=g.child;C;){if(C===a){w=!0,a=g,c=f;break}if(C===c){w=!0,c=g,a=f;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function oa(n){return n=Rl(n),n!==null?Ks(n):null}function Ks(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ks(n);if(s!==null)return s;n=n.sibling}return null}var Qs=e.unstable_scheduleCallback,aa=e.unstable_cancelCallback,Al=e.unstable_shouldYield,Yc=e.unstable_requestPaint,st=e.unstable_now,kl=e.unstable_getCurrentPriorityLevel,us=e.unstable_ImmediatePriority,oi=e.unstable_UserBlockingPriority,bn=e.unstable_NormalPriority,la=e.unstable_LowPriority,Nl=e.unstable_IdlePriority,cs=null,En=null;function bl(n){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(cs,n,void 0,(n.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Dl,ua=Math.log,jl=Math.LN2;function Dl(n){return n>>>=0,n===0?32:31-(ua(n)/jl|0)|0}var Ys=64,Js=4194304;function ai(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ds(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~f;C!==0?c=ai(C):(g&=w,g!==0&&(c=ai(g)))}else w=a&~f,w!==0?c=ai(w):g!==0&&(c=ai(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&f)===0&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-tn(s),f=1<<a,c|=n[a],s&=~f;return c}function Jc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-tn(g),C=1<<w,j=f[w];j===-1?((C&a)===0||(C&c)!==0)&&(f[w]=Jc(C,s)):j<=s&&(n.expiredLanes|=C),g&=~C}}function Tn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function hs(){var n=Ys;return Ys<<=1,(Ys&4194240)===0&&(Ys=64),n}function li(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function ui(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-tn(s),n[s]=a}function it(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-tn(a),g=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function ci(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-tn(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var $e=0;function di(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Vl,Xs,Ol,Ll,Ml,ca=!1,fr=[],Mt=null,Yn=null,Jn=null,hi=new Map,jn=new Map,pr=[],Xc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fl(n,s){switch(n){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":hi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":jn.delete(s.pointerId)}}function ln(n,s,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Sa(s),s!==null&&Xs(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Zc(n,s,a,c,f){switch(s){case"focusin":return Mt=ln(Mt,n,s,a,c,f),!0;case"dragenter":return Yn=ln(Yn,n,s,a,c,f),!0;case"mouseover":return Jn=ln(Jn,n,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return hi.set(g,ln(hi.get(g)||null,n,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,jn.set(g,ln(jn.get(g)||null,n,s,a,c,f)),!0}return!1}function Ul(n){var s=ys(n.target);if(s!==null){var a=Kn(s);if(a!==null){if(s=a.tag,s===13){if(s=ls(a),s!==null){n.blockedOn=s,Ml(n.priority,function(){Ol(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Or(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Zs(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);jr=c,a.target.dispatchEvent(c),jr=null}else return s=Sa(a),s!==null&&Xs(s),n.blockedOn=a,!1;s.shift()}return!0}function fs(n,s,a){Or(n)&&a.delete(s)}function zl(){ca=!1,Mt!==null&&Or(Mt)&&(Mt=null),Yn!==null&&Or(Yn)&&(Yn=null),Jn!==null&&Or(Jn)&&(Jn=null),hi.forEach(fs),jn.forEach(fs)}function Xn(n,s){n.blockedOn===s&&(n.blockedOn=null,ca||(ca=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zl)))}function Zn(n){function s(f){return Xn(f,n)}if(0<fr.length){Xn(fr[0],n);for(var a=1;a<fr.length;a++){var c=fr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Mt!==null&&Xn(Mt,n),Yn!==null&&Xn(Yn,n),Jn!==null&&Xn(Jn,n),hi.forEach(s),jn.forEach(s),a=0;a<pr.length;a++)c=pr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<pr.length&&(a=pr[0],a.blockedOn===null);)Ul(a),a.blockedOn===null&&pr.shift()}var Lr=ce.ReactCurrentBatchConfig,fi=!0;function dt(n,s,a,c){var f=$e,g=Lr.transition;Lr.transition=null;try{$e=1,da(n,s,a,c)}finally{$e=f,Lr.transition=g}}function ed(n,s,a,c){var f=$e,g=Lr.transition;Lr.transition=null;try{$e=4,da(n,s,a,c)}finally{$e=f,Lr.transition=g}}function da(n,s,a,c){if(fi){var f=Zs(n,s,a,c);if(f===null)dd(n,s,c,ps,a),Fl(n,c);else if(Zc(f,n,s,a,c))c.stopPropagation();else if(Fl(n,c),s&4&&-1<Xc.indexOf(n)){for(;f!==null;){var g=Sa(f);if(g!==null&&Vl(g),g=Zs(n,s,a,c),g===null&&dd(n,s,c,ps,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else dd(n,s,c,null,a)}}var ps=null;function Zs(n,s,a,c){if(ps=null,n=ii(c),n=ys(n),n!==null)if(s=Kn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ls(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ps=n,null}function ha(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kl()){case us:return 1;case oi:return 4;case bn:case la:return 16;case Nl:return 536870912;default:return 16}default:return 16}}var xn=null,eo=null,un=null;function fa(){if(un)return un;var n,s=eo,a=s.length,c,f="value"in xn?xn.value:xn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===f[g-c];c++);return un=f.slice(n,1<c?1-c:void 0)}function to(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function mr(){return!0}function pa(){return!1}function Ft(n){function s(a,c,f,g,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?mr:pa,this.isPropagationStopped=pa,this}return ue(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),s}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Ft(er),gr=ue({},er,{view:0,detail:0}),td=Ft(gr),ro,Mr,pi,ms=ue({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pi&&(pi&&n.type==="mousemove"?(ro=n.screenX-pi.screenX,Mr=n.screenY-pi.screenY):Mr=ro=0,pi=n),ro)},movementY:function(n){return"movementY"in n?n.movementY:Mr}}),io=Ft(ms),ma=ue({},ms,{dataTransfer:0}),Bl=Ft(ma),so=ue({},gr,{relatedTarget:0}),oo=Ft(so),$l=ue({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Fr=Ft($l),Wl=ue({},er,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Hl=Ft(Wl),ql=ue({},er,{data:0}),ga=Ft(ql),ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Gl[n])?!!s[n]:!1}function yr(){return Kl}var u=ue({},gr,{key:function(n){if(n.key){var s=ao[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=to(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?nn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(n){return n.type==="keypress"?to(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?to(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Ft(u),_=ue({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ft(_),U=ue({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),q=Ft(U),ae=ue({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),nt=Ft(ae),Pt=ue({},ms,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),We=Ft(Pt),jt=[9,13,27,32],Tt=p&&"CompositionEvent"in window,Dn=null;p&&"documentMode"in document&&(Dn=document.documentMode);var In=p&&"TextEvent"in window&&!Dn,gs=p&&(!Tt||Dn&&8<Dn&&11>=Dn),lo=" ",mp=!1;function gp(n,s){switch(n){case"keyup":return jt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var uo=!1;function aw(n,s){switch(n){case"compositionend":return yp(s);case"keypress":return s.which!==32?null:(mp=!0,lo);case"textInput":return n=s.data,n===lo&&mp?null:n;default:return null}}function lw(n,s){if(uo)return n==="compositionend"||!Tt&&gp(n,s)?(n=fa(),un=eo=xn=null,uo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gs&&s.locale!=="ko"?null:s.data;default:return null}}var uw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!uw[n.type]:s==="textarea"}function _p(n,s,a,c){hr(c),s=Zl(s,"onChange"),0<s.length&&(a=new no("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ya=null,va=null;function cw(n){Lp(n,0)}function Ql(n){var s=mo(n);if(Je(s))return n}function dw(n,s){if(n==="change")return s}var wp=!1;if(p){var nd;if(p){var rd="oninput"in document;if(!rd){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),rd=typeof Ep.oninput=="function"}nd=rd}else nd=!1;wp=nd&&(!document.documentMode||9<document.documentMode)}function Tp(){ya&&(ya.detachEvent("onpropertychange",xp),va=ya=null)}function xp(n){if(n.propertyName==="value"&&Ql(va)){var s=[];_p(s,va,n,ii(n)),ia(cw,s)}}function hw(n,s,a){n==="focusin"?(Tp(),ya=s,va=a,ya.attachEvent("onpropertychange",xp)):n==="focusout"&&Tp()}function fw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ql(va)}function pw(n,s){if(n==="click")return Ql(s)}function mw(n,s){if(n==="input"||n==="change")return Ql(s)}function gw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var tr=typeof Object.is=="function"?Object.is:gw;function _a(n,s){if(tr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!y.call(s,f)||!tr(n[f],s[f]))return!1}return!0}function Ip(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sp(n,s){var a=Ip(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ip(a)}}function Cp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Cp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Pp(){for(var n=window,s=_n();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=_n(n.document)}return s}function id(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function yw(n){var s=Pp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Cp(a.ownerDocument.documentElement,a)){if(c!==null&&id(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=Sp(a,g);var w=Sp(a,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var vw=p&&"documentMode"in document&&11>=document.documentMode,co=null,sd=null,wa=null,od=!1;function Rp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;od||co==null||co!==_n(c)||(c=co,"selectionStart"in c&&id(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),wa&&_a(wa,c)||(wa=c,c=Zl(sd,"onSelect"),0<c.length&&(s=new no("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=co)))}function Yl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var ho={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},ad={},Ap={};p&&(Ap=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function Jl(n){if(ad[n])return ad[n];if(!ho[n])return n;var s=ho[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Ap)return ad[n]=s[a];return n}var kp=Jl("animationend"),Np=Jl("animationiteration"),bp=Jl("animationstart"),jp=Jl("transitionend"),Dp=new Map,Vp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mi(n,s){Dp.set(n,s),l(s,[n])}for(var ld=0;ld<Vp.length;ld++){var ud=Vp[ld],_w=ud.toLowerCase(),ww=ud[0].toUpperCase()+ud.slice(1);mi(_w,"on"+ww)}mi(kp,"onAnimationEnd"),mi(Np,"onAnimationIteration"),mi(bp,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(jp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ew=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function Op(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Pl(c,s,void 0,n),n.currentTarget=null}function Lp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var C=c[w],j=C.instance,H=C.currentTarget;if(C=C.listener,j!==g&&f.isPropagationStopped())break e;Op(f,C,H),g=j}else for(w=0;w<c.length;w++){if(C=c[w],j=C.instance,H=C.currentTarget,C=C.listener,j!==g&&f.isPropagationStopped())break e;Op(f,C,H),g=j}}}if(Gn)throw n=sa,Gn=!1,sa=null,n}function at(n,s){var a=s[yd];a===void 0&&(a=s[yd]=new Set);var c=n+"__bubble";a.has(c)||(Mp(s,n,2,!1),a.add(c))}function cd(n,s,a){var c=0;s&&(c|=4),Mp(a,n,c,s)}var Xl="_reactListening"+Math.random().toString(36).slice(2);function Ta(n){if(!n[Xl]){n[Xl]=!0,i.forEach(function(a){a!=="selectionchange"&&(Ew.has(a)||cd(a,!1,n),cd(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Xl]||(s[Xl]=!0,cd("selectionchange",!1,s))}}function Mp(n,s,a,c){switch(ha(s)){case 1:var f=dt;break;case 4:f=ed;break;default:f=da}a=f.bind(null,s,a,n),f=void 0,!Hs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function dd(n,s,a,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var j=w.tag;if((j===3||j===4)&&(j=w.stateNode.containerInfo,j===f||j.nodeType===8&&j.parentNode===f))return;w=w.return}for(;C!==null;){if(w=ys(C),w===null)return;if(j=w.tag,j===5||j===6){c=g=w;continue e}C=C.parentNode}}c=c.return}ia(function(){var H=g,ne=ii(a),re=[];e:{var te=Dp.get(n);if(te!==void 0){var fe=no,ve=n;switch(n){case"keypress":if(to(a)===0)break e;case"keydown":case"keyup":fe=m;break;case"focusin":ve="focus",fe=oo;break;case"focusout":ve="blur",fe=oo;break;case"beforeblur":case"afterblur":fe=oo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Bl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=q;break;case kp:case Np:case bp:fe=Fr;break;case jp:fe=nt;break;case"scroll":fe=td;break;case"wheel":fe=We;break;case"copy":case"cut":case"paste":fe=Hl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=T}var _e=(s&4)!==0,_t=!_e&&n==="scroll",z=_e?te!==null?te+"Capture":null:te;_e=[];for(var O=H,$;O!==null;){$=O;var se=$.stateNode;if($.tag===5&&se!==null&&($=se,z!==null&&(se=vt(O,z),se!=null&&_e.push(xa(O,se,$)))),_t)break;O=O.return}0<_e.length&&(te=new fe(te,ve,null,a,ne),re.push({event:te,listeners:_e}))}}if((s&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",fe=n==="mouseout"||n==="pointerout",te&&a!==jr&&(ve=a.relatedTarget||a.fromElement)&&(ys(ve)||ve[Ur]))break e;if((fe||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,fe?(ve=a.relatedTarget||a.toElement,fe=H,ve=ve?ys(ve):null,ve!==null&&(_t=Kn(ve),ve!==_t||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(fe=null,ve=H),fe!==ve)){if(_e=io,se="onMouseLeave",z="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(_e=T,se="onPointerLeave",z="onPointerEnter",O="pointer"),_t=fe==null?te:mo(fe),$=ve==null?te:mo(ve),te=new _e(se,O+"leave",fe,a,ne),te.target=_t,te.relatedTarget=$,se=null,ys(ne)===H&&(_e=new _e(z,O+"enter",ve,a,ne),_e.target=$,_e.relatedTarget=_t,se=_e),_t=se,fe&&ve)t:{for(_e=fe,z=ve,O=0,$=_e;$;$=fo($))O++;for($=0,se=z;se;se=fo(se))$++;for(;0<O-$;)_e=fo(_e),O--;for(;0<$-O;)z=fo(z),$--;for(;O--;){if(_e===z||z!==null&&_e===z.alternate)break t;_e=fo(_e),z=fo(z)}_e=null}else _e=null;fe!==null&&Fp(re,te,fe,_e,!1),ve!==null&&_t!==null&&Fp(re,_t,ve,_e,!0)}}e:{if(te=H?mo(H):window,fe=te.nodeName&&te.nodeName.toLowerCase(),fe==="select"||fe==="input"&&te.type==="file")var Ee=dw;else if(vp(te))if(wp)Ee=mw;else{Ee=fw;var Se=hw}else(fe=te.nodeName)&&fe.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Ee=pw);if(Ee&&(Ee=Ee(n,H))){_p(re,Ee,a,ne);break e}Se&&Se(n,te,H),n==="focusout"&&(Se=te._wrapperState)&&Se.controlled&&te.type==="number"&&oe(te,"number",te.value)}switch(Se=H?mo(H):window,n){case"focusin":(vp(Se)||Se.contentEditable==="true")&&(co=Se,sd=H,wa=null);break;case"focusout":wa=sd=co=null;break;case"mousedown":od=!0;break;case"contextmenu":case"mouseup":case"dragend":od=!1,Rp(re,a,ne);break;case"selectionchange":if(vw)break;case"keydown":case"keyup":Rp(re,a,ne)}var Ce;if(Tt)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else uo?gp(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(gs&&a.locale!=="ko"&&(uo||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&uo&&(Ce=fa()):(xn=ne,eo="value"in xn?xn.value:xn.textContent,uo=!0)),Se=Zl(H,ke),0<Se.length&&(ke=new ga(ke,n,null,a,ne),re.push({event:ke,listeners:Se}),Ce?ke.data=Ce:(Ce=yp(a),Ce!==null&&(ke.data=Ce)))),(Ce=In?aw(n,a):lw(n,a))&&(H=Zl(H,"onBeforeInput"),0<H.length&&(ne=new ga("onBeforeInput","beforeinput",null,a,ne),re.push({event:ne,listeners:H}),ne.data=Ce))}Lp(re,s)})}function xa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Zl(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=vt(n,a),g!=null&&c.unshift(xa(n,g,f)),g=vt(n,s),g!=null&&c.push(xa(n,g,f))),n=n.return}return c}function fo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Fp(n,s,a,c,f){for(var g=s._reactName,w=[];a!==null&&a!==c;){var C=a,j=C.alternate,H=C.stateNode;if(j!==null&&j===c)break;C.tag===5&&H!==null&&(C=H,f?(j=vt(a,g),j!=null&&w.unshift(xa(a,j,C))):f||(j=vt(a,g),j!=null&&w.push(xa(a,j,C)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var Tw=/\r\n?/g,xw=/\u0000|\uFFFD/g;function Up(n){return(typeof n=="string"?n:""+n).replace(Tw,`
`).replace(xw,"")}function eu(n,s,a){if(s=Up(s),Up(n)!==s&&a)throw Error(t(425))}function tu(){}var hd=null,fd=null;function pd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var md=typeof setTimeout=="function"?setTimeout:void 0,Iw=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,Sw=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(n){return zp.resolve(null).then(n).catch(Cw)}:md;function Cw(n){setTimeout(function(){throw n})}function gd(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),Zn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Zn(s)}function gi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Bp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var po=Math.random().toString(36).slice(2),vr="__reactFiber$"+po,Ia="__reactProps$"+po,Ur="__reactContainer$"+po,yd="__reactEvents$"+po,Pw="__reactListeners$"+po,Rw="__reactHandles$"+po;function ys(n){var s=n[vr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Ur]||a[vr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Bp(n);n!==null;){if(a=n[vr])return a;n=Bp(n)}return s}n=a,a=n.parentNode}return null}function Sa(n){return n=n[vr]||n[Ur],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function mo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function nu(n){return n[Ia]||null}var vd=[],go=-1;function yi(n){return{current:n}}function lt(n){0>go||(n.current=vd[go],vd[go]=null,go--)}function ot(n,s){go++,vd[go]=n.current,n.current=s}var vi={},qt=yi(vi),cn=yi(!1),vs=vi;function yo(n,s){var a=n.type.contextTypes;if(!a)return vi;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function dn(n){return n=n.childContextTypes,n!=null}function ru(){lt(cn),lt(qt)}function $p(n,s,a){if(qt.current!==vi)throw Error(t(168));ot(qt,s),ot(cn,a)}function Wp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,Te(n)||"Unknown",f));return ue({},a,c)}function iu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||vi,vs=qt.current,ot(qt,n),ot(cn,cn.current),!0}function Hp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Wp(n,s,vs),c.__reactInternalMemoizedMergedChildContext=n,lt(cn),lt(qt),ot(qt,n)):lt(cn),ot(cn,a)}var zr=null,su=!1,_d=!1;function qp(n){zr===null?zr=[n]:zr.push(n)}function Aw(n){su=!0,qp(n)}function _i(){if(!_d&&zr!==null){_d=!0;var n=0,s=$e;try{var a=zr;for($e=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}zr=null,su=!1}catch(f){throw zr!==null&&(zr=zr.slice(n+1)),Qs(us,_i),f}finally{$e=s,_d=!1}}return null}var vo=[],_o=0,ou=null,au=0,Vn=[],On=0,_s=null,Br=1,$r="";function ws(n,s){vo[_o++]=au,vo[_o++]=ou,ou=n,au=s}function Gp(n,s,a){Vn[On++]=Br,Vn[On++]=$r,Vn[On++]=_s,_s=n;var c=Br;n=$r;var f=32-tn(c)-1;c&=~(1<<f),a+=1;var g=32-tn(s)+f;if(30<g){var w=f-f%5;g=(c&(1<<w)-1).toString(32),c>>=w,f-=w,Br=1<<32-tn(s)+f|a<<f|c,$r=g+n}else Br=1<<g|a<<f|c,$r=n}function wd(n){n.return!==null&&(ws(n,1),Gp(n,1,0))}function Ed(n){for(;n===ou;)ou=vo[--_o],vo[_o]=null,au=vo[--_o],vo[_o]=null;for(;n===_s;)_s=Vn[--On],Vn[On]=null,$r=Vn[--On],Vn[On]=null,Br=Vn[--On],Vn[On]=null}var Sn=null,Cn=null,ht=!1,nr=null;function Kp(n,s){var a=Un(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Qp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Sn=n,Cn=gi(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Sn=n,Cn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=_s!==null?{id:Br,overflow:$r}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Un(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Sn=n,Cn=null,!0):!1;default:return!1}}function Td(n){return(n.mode&1)!==0&&(n.flags&128)===0}function xd(n){if(ht){var s=Cn;if(s){var a=s;if(!Qp(n,s)){if(Td(n))throw Error(t(418));s=gi(a.nextSibling);var c=Sn;s&&Qp(n,s)?Kp(c,a):(n.flags=n.flags&-4097|2,ht=!1,Sn=n)}}else{if(Td(n))throw Error(t(418));n.flags=n.flags&-4097|2,ht=!1,Sn=n}}}function Yp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Sn=n}function lu(n){if(n!==Sn)return!1;if(!ht)return Yp(n),ht=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!pd(n.type,n.memoizedProps)),s&&(s=Cn)){if(Td(n))throw Jp(),Error(t(418));for(;s;)Kp(n,s),s=gi(s.nextSibling)}if(Yp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Cn=gi(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Cn=null}}else Cn=Sn?gi(n.stateNode.nextSibling):null;return!0}function Jp(){for(var n=Cn;n;)n=gi(n.nextSibling)}function wo(){Cn=Sn=null,ht=!1}function Id(n){nr===null?nr=[n]:nr.push(n)}var kw=ce.ReactCurrentBatchConfig;function Ca(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var C=f.refs;w===null?delete C[g]:C[g]=w},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function uu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Xp(n){var s=n._init;return s(n._payload)}function Zp(n){function s(z,O){if(n){var $=z.deletions;$===null?(z.deletions=[O],z.flags|=16):$.push(O)}}function a(z,O){if(!n)return null;for(;O!==null;)s(z,O),O=O.sibling;return null}function c(z,O){for(z=new Map;O!==null;)O.key!==null?z.set(O.key,O):z.set(O.index,O),O=O.sibling;return z}function f(z,O){return z=Pi(z,O),z.index=0,z.sibling=null,z}function g(z,O,$){return z.index=$,n?($=z.alternate,$!==null?($=$.index,$<O?(z.flags|=2,O):$):(z.flags|=2,O)):(z.flags|=1048576,O)}function w(z){return n&&z.alternate===null&&(z.flags|=2),z}function C(z,O,$,se){return O===null||O.tag!==6?(O=mh($,z.mode,se),O.return=z,O):(O=f(O,$),O.return=z,O)}function j(z,O,$,se){var Ee=$.type;return Ee===k?ne(z,O,$.props.children,se,$.key):O!==null&&(O.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===yt&&Xp(Ee)===O.type)?(se=f(O,$.props),se.ref=Ca(z,O,$),se.return=z,se):(se=ju($.type,$.key,$.props,null,z.mode,se),se.ref=Ca(z,O,$),se.return=z,se)}function H(z,O,$,se){return O===null||O.tag!==4||O.stateNode.containerInfo!==$.containerInfo||O.stateNode.implementation!==$.implementation?(O=gh($,z.mode,se),O.return=z,O):(O=f(O,$.children||[]),O.return=z,O)}function ne(z,O,$,se,Ee){return O===null||O.tag!==7?(O=Rs($,z.mode,se,Ee),O.return=z,O):(O=f(O,$),O.return=z,O)}function re(z,O,$){if(typeof O=="string"&&O!==""||typeof O=="number")return O=mh(""+O,z.mode,$),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ie:return $=ju(O.type,O.key,O.props,null,z.mode,$),$.ref=Ca(z,null,O),$.return=z,$;case de:return O=gh(O,z.mode,$),O.return=z,O;case yt:var se=O._init;return re(z,se(O._payload),$)}if(V(O)||ye(O))return O=Rs(O,z.mode,$,null),O.return=z,O;uu(z,O)}return null}function te(z,O,$,se){var Ee=O!==null?O.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return Ee!==null?null:C(z,O,""+$,se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Ie:return $.key===Ee?j(z,O,$,se):null;case de:return $.key===Ee?H(z,O,$,se):null;case yt:return Ee=$._init,te(z,O,Ee($._payload),se)}if(V($)||ye($))return Ee!==null?null:ne(z,O,$,se,null);uu(z,$)}return null}function fe(z,O,$,se,Ee){if(typeof se=="string"&&se!==""||typeof se=="number")return z=z.get($)||null,C(O,z,""+se,Ee);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Ie:return z=z.get(se.key===null?$:se.key)||null,j(O,z,se,Ee);case de:return z=z.get(se.key===null?$:se.key)||null,H(O,z,se,Ee);case yt:var Se=se._init;return fe(z,O,$,Se(se._payload),Ee)}if(V(se)||ye(se))return z=z.get($)||null,ne(O,z,se,Ee,null);uu(O,se)}return null}function ve(z,O,$,se){for(var Ee=null,Se=null,Ce=O,ke=O=0,Ot=null;Ce!==null&&ke<$.length;ke++){Ce.index>ke?(Ot=Ce,Ce=null):Ot=Ce.sibling;var Ye=te(z,Ce,$[ke],se);if(Ye===null){Ce===null&&(Ce=Ot);break}n&&Ce&&Ye.alternate===null&&s(z,Ce),O=g(Ye,O,ke),Se===null?Ee=Ye:Se.sibling=Ye,Se=Ye,Ce=Ot}if(ke===$.length)return a(z,Ce),ht&&ws(z,ke),Ee;if(Ce===null){for(;ke<$.length;ke++)Ce=re(z,$[ke],se),Ce!==null&&(O=g(Ce,O,ke),Se===null?Ee=Ce:Se.sibling=Ce,Se=Ce);return ht&&ws(z,ke),Ee}for(Ce=c(z,Ce);ke<$.length;ke++)Ot=fe(Ce,z,ke,$[ke],se),Ot!==null&&(n&&Ot.alternate!==null&&Ce.delete(Ot.key===null?ke:Ot.key),O=g(Ot,O,ke),Se===null?Ee=Ot:Se.sibling=Ot,Se=Ot);return n&&Ce.forEach(function(Ri){return s(z,Ri)}),ht&&ws(z,ke),Ee}function _e(z,O,$,se){var Ee=ye($);if(typeof Ee!="function")throw Error(t(150));if($=Ee.call($),$==null)throw Error(t(151));for(var Se=Ee=null,Ce=O,ke=O=0,Ot=null,Ye=$.next();Ce!==null&&!Ye.done;ke++,Ye=$.next()){Ce.index>ke?(Ot=Ce,Ce=null):Ot=Ce.sibling;var Ri=te(z,Ce,Ye.value,se);if(Ri===null){Ce===null&&(Ce=Ot);break}n&&Ce&&Ri.alternate===null&&s(z,Ce),O=g(Ri,O,ke),Se===null?Ee=Ri:Se.sibling=Ri,Se=Ri,Ce=Ot}if(Ye.done)return a(z,Ce),ht&&ws(z,ke),Ee;if(Ce===null){for(;!Ye.done;ke++,Ye=$.next())Ye=re(z,Ye.value,se),Ye!==null&&(O=g(Ye,O,ke),Se===null?Ee=Ye:Se.sibling=Ye,Se=Ye);return ht&&ws(z,ke),Ee}for(Ce=c(z,Ce);!Ye.done;ke++,Ye=$.next())Ye=fe(Ce,z,ke,Ye.value,se),Ye!==null&&(n&&Ye.alternate!==null&&Ce.delete(Ye.key===null?ke:Ye.key),O=g(Ye,O,ke),Se===null?Ee=Ye:Se.sibling=Ye,Se=Ye);return n&&Ce.forEach(function(uE){return s(z,uE)}),ht&&ws(z,ke),Ee}function _t(z,O,$,se){if(typeof $=="object"&&$!==null&&$.type===k&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Ie:e:{for(var Ee=$.key,Se=O;Se!==null;){if(Se.key===Ee){if(Ee=$.type,Ee===k){if(Se.tag===7){a(z,Se.sibling),O=f(Se,$.props.children),O.return=z,z=O;break e}}else if(Se.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===yt&&Xp(Ee)===Se.type){a(z,Se.sibling),O=f(Se,$.props),O.ref=Ca(z,Se,$),O.return=z,z=O;break e}a(z,Se);break}else s(z,Se);Se=Se.sibling}$.type===k?(O=Rs($.props.children,z.mode,se,$.key),O.return=z,z=O):(se=ju($.type,$.key,$.props,null,z.mode,se),se.ref=Ca(z,O,$),se.return=z,z=se)}return w(z);case de:e:{for(Se=$.key;O!==null;){if(O.key===Se)if(O.tag===4&&O.stateNode.containerInfo===$.containerInfo&&O.stateNode.implementation===$.implementation){a(z,O.sibling),O=f(O,$.children||[]),O.return=z,z=O;break e}else{a(z,O);break}else s(z,O);O=O.sibling}O=gh($,z.mode,se),O.return=z,z=O}return w(z);case yt:return Se=$._init,_t(z,O,Se($._payload),se)}if(V($))return ve(z,O,$,se);if(ye($))return _e(z,O,$,se);uu(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,O!==null&&O.tag===6?(a(z,O.sibling),O=f(O,$),O.return=z,z=O):(a(z,O),O=mh($,z.mode,se),O.return=z,z=O),w(z)):a(z,O)}return _t}var Eo=Zp(!0),em=Zp(!1),cu=yi(null),du=null,To=null,Sd=null;function Cd(){Sd=To=du=null}function Pd(n){var s=cu.current;lt(cu),n._currentValue=s}function Rd(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function xo(n,s){du=n,Sd=To=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(hn=!0),n.firstContext=null)}function Ln(n){var s=n._currentValue;if(Sd!==n)if(n={context:n,memoizedValue:s,next:null},To===null){if(du===null)throw Error(t(308));To=n,du.dependencies={lanes:0,firstContext:n}}else To=To.next=n;return s}var Es=null;function Ad(n){Es===null?Es=[n]:Es.push(n)}function tm(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Ad(s)):(a.next=f.next,f.next=a),s.interleaved=a,Wr(n,c)}function Wr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var wi=!1;function kd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Hr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Ei(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ke&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Wr(n,a)}return f=c.interleaved,f===null?(s.next=s,Ad(c)):(s.next=f.next,f.next=s),c.interleaved=s,Wr(n,a)}function hu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ci(n,a)}}function rm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function fu(n,s,a,c){var f=n.updateQueue;wi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var j=C,H=j.next;j.next=null,w===null?g=H:w.next=H,w=j;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==w&&(C===null?ne.firstBaseUpdate=H:C.next=H,ne.lastBaseUpdate=j))}if(g!==null){var re=f.baseState;w=0,ne=H=j=null,C=g;do{var te=C.lane,fe=C.eventTime;if((c&te)===te){ne!==null&&(ne=ne.next={eventTime:fe,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ve=n,_e=C;switch(te=s,fe=a,_e.tag){case 1:if(ve=_e.payload,typeof ve=="function"){re=ve.call(fe,re,te);break e}re=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=_e.payload,te=typeof ve=="function"?ve.call(fe,re,te):ve,te==null)break e;re=ue({},re,te);break e;case 2:wi=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,te=f.effects,te===null?f.effects=[C]:te.push(C))}else fe={eventTime:fe,lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?(H=ne=fe,j=re):ne=ne.next=fe,w|=te;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;te=C,C=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);if(ne===null&&(j=re),f.baseState=j,f.firstBaseUpdate=H,f.lastBaseUpdate=ne,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);Is|=w,n.lanes=w,n.memoizedState=re}}function im(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Pa={},_r=yi(Pa),Ra=yi(Pa),Aa=yi(Pa);function Ts(n){if(n===Pa)throw Error(t(174));return n}function Nd(n,s){switch(ot(Aa,s),ot(Ra,n),ot(_r,Pa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Qe(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Qe(s,n)}lt(_r),ot(_r,s)}function Io(){lt(_r),lt(Ra),lt(Aa)}function sm(n){Ts(Aa.current);var s=Ts(_r.current),a=Qe(s,n.type);s!==a&&(ot(Ra,n),ot(_r,a))}function bd(n){Ra.current===n&&(lt(_r),lt(Ra))}var ft=yi(0);function pu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var jd=[];function Dd(){for(var n=0;n<jd.length;n++)jd[n]._workInProgressVersionPrimary=null;jd.length=0}var mu=ce.ReactCurrentDispatcher,Vd=ce.ReactCurrentBatchConfig,xs=0,pt=null,Rt=null,Dt=null,gu=!1,ka=!1,Na=0,Nw=0;function Gt(){throw Error(t(321))}function Od(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!tr(n[a],s[a]))return!1;return!0}function Ld(n,s,a,c,f,g){if(xs=g,pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,mu.current=n===null||n.memoizedState===null?Vw:Ow,n=a(c,f),ka){g=0;do{if(ka=!1,Na=0,25<=g)throw Error(t(301));g+=1,Dt=Rt=null,s.updateQueue=null,mu.current=Lw,n=a(c,f)}while(ka)}if(mu.current=_u,s=Rt!==null&&Rt.next!==null,xs=0,Dt=Rt=pt=null,gu=!1,s)throw Error(t(300));return n}function Md(){var n=Na!==0;return Na=0,n}function wr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?pt.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function Mn(){if(Rt===null){var n=pt.alternate;n=n!==null?n.memoizedState:null}else n=Rt.next;var s=Dt===null?pt.memoizedState:Dt.next;if(s!==null)Dt=s,Rt=n;else{if(n===null)throw Error(t(310));Rt=n,n={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Dt===null?pt.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function ba(n,s){return typeof s=="function"?s(n):s}function Fd(n){var s=Mn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Rt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var C=w=null,j=null,H=g;do{var ne=H.lane;if((xs&ne)===ne)j!==null&&(j=j.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),c=H.hasEagerState?H.eagerState:n(c,H.action);else{var re={lane:ne,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};j===null?(C=j=re,w=c):j=j.next=re,pt.lanes|=ne,Is|=ne}H=H.next}while(H!==null&&H!==g);j===null?w=c:j.next=C,tr(c,s.memoizedState)||(hn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=j,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,pt.lanes|=g,Is|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ud(n){var s=Mn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);tr(g,s.memoizedState)||(hn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function om(){}function am(n,s){var a=pt,c=Mn(),f=s(),g=!tr(c.memoizedState,f);if(g&&(c.memoizedState=f,hn=!0),c=c.queue,zd(cm.bind(null,a,c,n),[n]),c.getSnapshot!==s||g||Dt!==null&&Dt.memoizedState.tag&1){if(a.flags|=2048,ja(9,um.bind(null,a,c,f,s),void 0,null),Vt===null)throw Error(t(349));(xs&30)!==0||lm(a,s,f)}return f}function lm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=pt.updateQueue,s===null?(s={lastEffect:null,stores:null},pt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function um(n,s,a,c){s.value=a,s.getSnapshot=c,dm(s)&&hm(n)}function cm(n,s,a){return a(function(){dm(s)&&hm(n)})}function dm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!tr(n,a)}catch{return!0}}function hm(n){var s=Wr(n,1);s!==null&&or(s,n,1,-1)}function fm(n){var s=wr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:n},s.queue=n,n=n.dispatch=Dw.bind(null,pt,n),[s.memoizedState,n]}function ja(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=pt.updateQueue,s===null?(s={lastEffect:null,stores:null},pt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function pm(){return Mn().memoizedState}function yu(n,s,a,c){var f=wr();pt.flags|=n,f.memoizedState=ja(1|s,a,void 0,c===void 0?null:c)}function vu(n,s,a,c){var f=Mn();c=c===void 0?null:c;var g=void 0;if(Rt!==null){var w=Rt.memoizedState;if(g=w.destroy,c!==null&&Od(c,w.deps)){f.memoizedState=ja(s,a,g,c);return}}pt.flags|=n,f.memoizedState=ja(1|s,a,g,c)}function mm(n,s){return yu(8390656,8,n,s)}function zd(n,s){return vu(2048,8,n,s)}function gm(n,s){return vu(4,2,n,s)}function ym(n,s){return vu(4,4,n,s)}function vm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function _m(n,s,a){return a=a!=null?a.concat([n]):null,vu(4,4,vm.bind(null,s,n),a)}function Bd(){}function wm(n,s){var a=Mn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Od(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Em(n,s){var a=Mn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Od(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Tm(n,s,a){return(xs&21)===0?(n.baseState&&(n.baseState=!1,hn=!0),n.memoizedState=a):(tr(a,s)||(a=hs(),pt.lanes|=a,Is|=a,n.baseState=!0),s)}function bw(n,s){var a=$e;$e=a!==0&&4>a?a:4,n(!0);var c=Vd.transition;Vd.transition={};try{n(!1),s()}finally{$e=a,Vd.transition=c}}function xm(){return Mn().memoizedState}function jw(n,s,a){var c=Si(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Im(n))Sm(s,a);else if(a=tm(n,s,a,c),a!==null){var f=sn();or(a,n,c,f),Cm(a,s,c)}}function Dw(n,s,a){var c=Si(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Im(n))Sm(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,C=g(w,a);if(f.hasEagerState=!0,f.eagerState=C,tr(C,w)){var j=s.interleaved;j===null?(f.next=f,Ad(s)):(f.next=j.next,j.next=f),s.interleaved=f;return}}catch{}finally{}a=tm(n,s,f,c),a!==null&&(f=sn(),or(a,n,c,f),Cm(a,s,c))}}function Im(n){var s=n.alternate;return n===pt||s!==null&&s===pt}function Sm(n,s){ka=gu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Cm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ci(n,a)}}var _u={readContext:Ln,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},Vw={readContext:Ln,useCallback:function(n,s){return wr().memoizedState=[n,s===void 0?null:s],n},useContext:Ln,useEffect:mm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,yu(4194308,4,vm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return yu(4194308,4,n,s)},useInsertionEffect:function(n,s){return yu(4,2,n,s)},useMemo:function(n,s){var a=wr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=wr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=jw.bind(null,pt,n),[c.memoizedState,n]},useRef:function(n){var s=wr();return n={current:n},s.memoizedState=n},useState:fm,useDebugValue:Bd,useDeferredValue:function(n){return wr().memoizedState=n},useTransition:function(){var n=fm(!1),s=n[0];return n=bw.bind(null,n[1]),wr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=pt,f=wr();if(ht){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Vt===null)throw Error(t(349));(xs&30)!==0||lm(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,mm(cm.bind(null,c,g,n),[n]),c.flags|=2048,ja(9,um.bind(null,c,g,a,s),void 0,null),a},useId:function(){var n=wr(),s=Vt.identifierPrefix;if(ht){var a=$r,c=Br;a=(c&~(1<<32-tn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Na++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Nw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Ow={readContext:Ln,useCallback:wm,useContext:Ln,useEffect:zd,useImperativeHandle:_m,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Em,useReducer:Fd,useRef:pm,useState:function(){return Fd(ba)},useDebugValue:Bd,useDeferredValue:function(n){var s=Mn();return Tm(s,Rt.memoizedState,n)},useTransition:function(){var n=Fd(ba)[0],s=Mn().memoizedState;return[n,s]},useMutableSource:om,useSyncExternalStore:am,useId:xm,unstable_isNewReconciler:!1},Lw={readContext:Ln,useCallback:wm,useContext:Ln,useEffect:zd,useImperativeHandle:_m,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Em,useReducer:Ud,useRef:pm,useState:function(){return Ud(ba)},useDebugValue:Bd,useDeferredValue:function(n){var s=Mn();return Rt===null?s.memoizedState=n:Tm(s,Rt.memoizedState,n)},useTransition:function(){var n=Ud(ba)[0],s=Mn().memoizedState;return[n,s]},useMutableSource:om,useSyncExternalStore:am,useId:xm,unstable_isNewReconciler:!1};function rr(n,s){if(n&&n.defaultProps){s=ue({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function $d(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ue({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var wu={isMounted:function(n){return(n=n._reactInternals)?Kn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=sn(),f=Si(n),g=Hr(c,f);g.payload=s,a!=null&&(g.callback=a),s=Ei(n,g,f),s!==null&&(or(s,n,f,c),hu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=sn(),f=Si(n),g=Hr(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Ei(n,g,f),s!==null&&(or(s,n,f,c),hu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=sn(),c=Si(n),f=Hr(a,c);f.tag=2,s!=null&&(f.callback=s),s=Ei(n,f,c),s!==null&&(or(s,n,c,a),hu(s,n,c))}};function Pm(n,s,a,c,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!_a(a,c)||!_a(f,g):!0}function Rm(n,s,a){var c=!1,f=vi,g=s.contextType;return typeof g=="object"&&g!==null?g=Ln(g):(f=dn(s)?vs:qt.current,c=s.contextTypes,g=(c=c!=null)?yo(n,f):vi),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=wu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Am(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&wu.enqueueReplaceState(s,s.state,null)}function Wd(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},kd(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Ln(g):(g=dn(s)?vs:qt.current,f.context=yo(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&($d(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&wu.enqueueReplaceState(f,f.state,null),fu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function So(n,s){try{var a="",c=s;do a+=De(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Hd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function qd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Mw=typeof WeakMap=="function"?WeakMap:Map;function km(n,s,a){a=Hr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Pu||(Pu=!0,ah=c),qd(n,s)},a}function Nm(n,s,a){a=Hr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){qd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){qd(n,s),typeof c!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function bm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Mw;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=Xw.bind(null,n,s,a),s.then(n,n))}function jm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Dm(n,s,a,c,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Hr(-1,1),s.tag=2,Ei(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Fw=ce.ReactCurrentOwner,hn=!1;function rn(n,s,a,c){s.child=n===null?em(s,null,a,c):Eo(s,n.child,a,c)}function Vm(n,s,a,c,f){a=a.render;var g=s.ref;return xo(s,f),c=Ld(n,s,a,c,g,f),a=Md(),n!==null&&!hn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,qr(n,s,f)):(ht&&a&&wd(s),s.flags|=1,rn(n,s,c,f),s.child)}function Om(n,s,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!ph(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Lm(n,s,g,c,f)):(n=ju(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:_a,a(w,c)&&n.ref===s.ref)return qr(n,s,f)}return s.flags|=1,n=Pi(g,c),n.ref=s.ref,n.return=s,s.child=n}function Lm(n,s,a,c,f){if(n!==null){var g=n.memoizedProps;if(_a(g,c)&&n.ref===s.ref)if(hn=!1,s.pendingProps=c=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(hn=!0);else return s.lanes=n.lanes,qr(n,s,f)}return Gd(n,s,a,c,f)}function Mm(n,s,a){var c=s.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Po,Pn),Pn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,ot(Po,Pn),Pn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,ot(Po,Pn),Pn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,ot(Po,Pn),Pn|=c;return rn(n,s,f,a),s.child}function Fm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Gd(n,s,a,c,f){var g=dn(a)?vs:qt.current;return g=yo(s,g),xo(s,f),a=Ld(n,s,a,c,g,f),c=Md(),n!==null&&!hn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,qr(n,s,f)):(ht&&c&&wd(s),s.flags|=1,rn(n,s,a,f),s.child)}function Um(n,s,a,c,f){if(dn(a)){var g=!0;iu(s)}else g=!1;if(xo(s,f),s.stateNode===null)Tu(n,s),Rm(s,a,c),Wd(s,a,c,f),c=!0;else if(n===null){var w=s.stateNode,C=s.memoizedProps;w.props=C;var j=w.context,H=a.contextType;typeof H=="object"&&H!==null?H=Ln(H):(H=dn(a)?vs:qt.current,H=yo(s,H));var ne=a.getDerivedStateFromProps,re=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function";re||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||j!==H)&&Am(s,w,c,H),wi=!1;var te=s.memoizedState;w.state=te,fu(s,c,w,f),j=s.memoizedState,C!==c||te!==j||cn.current||wi?(typeof ne=="function"&&($d(s,a,ne,c),j=s.memoizedState),(C=wi||Pm(s,a,C,c,te,j,H))?(re||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=j),w.props=c,w.state=j,w.context=H,c=C):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,nm(n,s),C=s.memoizedProps,H=s.type===s.elementType?C:rr(s.type,C),w.props=H,re=s.pendingProps,te=w.context,j=a.contextType,typeof j=="object"&&j!==null?j=Ln(j):(j=dn(a)?vs:qt.current,j=yo(s,j));var fe=a.getDerivedStateFromProps;(ne=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==re||te!==j)&&Am(s,w,c,j),wi=!1,te=s.memoizedState,w.state=te,fu(s,c,w,f);var ve=s.memoizedState;C!==re||te!==ve||cn.current||wi?(typeof fe=="function"&&($d(s,a,fe,c),ve=s.memoizedState),(H=wi||Pm(s,a,H,c,te,ve,j)||!1)?(ne||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ve,j),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ve,j)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ve),w.props=c,w.state=ve,w.context=j,c=H):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),c=!1)}return Kd(n,s,a,c,g,f)}function Kd(n,s,a,c,f,g){Fm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&Hp(s,a,!1),qr(n,s,g);c=s.stateNode,Fw.current=s;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=Eo(s,n.child,null,g),s.child=Eo(s,null,C,g)):rn(n,s,C,g),s.memoizedState=c.state,f&&Hp(s,a,!0),s.child}function zm(n){var s=n.stateNode;s.pendingContext?$p(n,s.pendingContext,s.pendingContext!==s.context):s.context&&$p(n,s.context,!1),Nd(n,s.containerInfo)}function Bm(n,s,a,c,f){return wo(),Id(f),s.flags|=256,rn(n,s,a,c),s.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function Yd(n){return{baseLanes:n,cachePool:null,transitions:null}}function $m(n,s,a){var c=s.pendingProps,f=ft.current,g=!1,w=(s.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(f&2)!==0),C?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),ot(ft,f&1),n===null)return xd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,g?(c=s.mode,g=s.child,w={mode:"hidden",children:w},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Du(w,c,0,null),n=Rs(n,c,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=Yd(a),s.memoizedState=Qd,n):Jd(s,w));if(f=n.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return Uw(n,s,w,c,C,f,a);if(g){g=c.fallback,w=s.mode,f=n.child,C=f.sibling;var j={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=j,s.deletions=null):(c=Pi(f,j),c.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=Pi(C,g):(g=Rs(g,w,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,w=n.child.memoizedState,w=w===null?Yd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,s.memoizedState=Qd,c}return g=n.child,n=g.sibling,c=Pi(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Jd(n,s){return s=Du({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Eu(n,s,a,c){return c!==null&&Id(c),Eo(s,n.child,null,a),n=Jd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Uw(n,s,a,c,f,g,w){if(a)return s.flags&256?(s.flags&=-257,c=Hd(Error(t(422))),Eu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=Du({mode:"visible",children:c.children},f,0,null),g=Rs(g,f,w,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&Eo(s,n.child,null,w),s.child.memoizedState=Yd(w),s.memoizedState=Qd,g);if((s.mode&1)===0)return Eu(n,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var C=c.dgst;return c=C,g=Error(t(419)),c=Hd(g,c,void 0),Eu(n,s,w,c)}if(C=(w&n.childLanes)!==0,hn||C){if(c=Vt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Wr(n,f),or(c,n,f,-1))}return fh(),c=Hd(Error(t(421))),Eu(n,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=Zw.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,Cn=gi(f.nextSibling),Sn=s,ht=!0,nr=null,n!==null&&(Vn[On++]=Br,Vn[On++]=$r,Vn[On++]=_s,Br=n.id,$r=n.overflow,_s=s),s=Jd(s,c.children),s.flags|=4096,s)}function Wm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Rd(n.return,s,a)}function Xd(n,s,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Hm(n,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(rn(n,s,c.children,a),c=ft.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wm(n,a,s);else if(n.tag===19)Wm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(ot(ft,c),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&pu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Xd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&pu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Xd(s,!0,a,null,g);break;case"together":Xd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Tu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function qr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Is|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Pi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Pi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function zw(n,s,a){switch(s.tag){case 3:zm(s),wo();break;case 5:sm(s);break;case 1:dn(s.type)&&iu(s);break;case 4:Nd(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;ot(cu,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(ot(ft,ft.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?$m(n,s,a):(ot(ft,ft.current&1),n=qr(n,s,a),n!==null?n.sibling:null);ot(ft,ft.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Hm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ot(ft,ft.current),c)break;return null;case 22:case 23:return s.lanes=0,Mm(n,s,a)}return qr(n,s,a)}var qm,Zd,Gm,Km;qm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Zd=function(){},Gm=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Ts(_r.current);var g=null;switch(a){case"input":f=kn(n,f),c=kn(n,c),g=[];break;case"select":f=ue({},f,{value:void 0}),c=ue({},c,{value:void 0}),g=[];break;case"textarea":f=Q(n,f),c=Q(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=tu)}rs(a,c);var w;a=null;for(H in f)if(!c.hasOwnProperty(H)&&f.hasOwnProperty(H)&&f[H]!=null)if(H==="style"){var C=f[H];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?g||(g=[]):(g=g||[]).push(H,null));for(H in c){var j=c[H];if(C=f!=null?f[H]:void 0,c.hasOwnProperty(H)&&j!==C&&(j!=null||C!=null))if(H==="style")if(C){for(w in C)!C.hasOwnProperty(w)||j&&j.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in j)j.hasOwnProperty(w)&&C[w]!==j[w]&&(a||(a={}),a[w]=j[w])}else a||(g||(g=[]),g.push(H,a)),a=j;else H==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,C=C?C.__html:void 0,j!=null&&C!==j&&(g=g||[]).push(H,j)):H==="children"?typeof j!="string"&&typeof j!="number"||(g=g||[]).push(H,""+j):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(j!=null&&H==="onScroll"&&at("scroll",n),g||C===j||(g=[])):(g=g||[]).push(H,j))}a&&(g=g||[]).push("style",a);var H=g;(s.updateQueue=H)&&(s.flags|=4)}},Km=function(n,s,a,c){a!==c&&(s.flags|=4)};function Da(n,s){if(!ht)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Kt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Bw(n,s,a){var c=s.pendingProps;switch(Ed(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(s),null;case 1:return dn(s.type)&&ru(),Kt(s),null;case 3:return c=s.stateNode,Io(),lt(cn),lt(qt),Dd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(lu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,nr!==null&&(ch(nr),nr=null))),Zd(n,s),Kt(s),null;case 5:bd(s);var f=Ts(Aa.current);if(a=s.type,n!==null&&s.stateNode!=null)Gm(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Kt(s),null}if(n=Ts(_r.current),lu(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[vr]=s,c[Ia]=g,n=(s.mode&1)!==0,a){case"dialog":at("cancel",c),at("close",c);break;case"iframe":case"object":case"embed":at("load",c);break;case"video":case"audio":for(f=0;f<Ea.length;f++)at(Ea[f],c);break;case"source":at("error",c);break;case"img":case"image":case"link":at("error",c),at("load",c);break;case"details":at("toggle",c);break;case"input":cr(c,g),at("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},at("invalid",c);break;case"textarea":me(c,g),at("invalid",c)}rs(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var C=g[w];w==="children"?typeof C=="string"?c.textContent!==C&&(g.suppressHydrationWarning!==!0&&eu(c.textContent,C,n),f=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&eu(c.textContent,C,n),f=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&at("scroll",c)}switch(a){case"input":vn(c),b(c,g,!0);break;case"textarea":vn(c),Xe(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=tu)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Pe(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[vr]=s,n[Ia]=c,qm(n,s,!1,!1),s.stateNode=n;e:{switch(w=is(a,c),a){case"dialog":at("cancel",n),at("close",n),f=c;break;case"iframe":case"object":case"embed":at("load",n),f=c;break;case"video":case"audio":for(f=0;f<Ea.length;f++)at(Ea[f],n);f=c;break;case"source":at("error",n),f=c;break;case"img":case"image":case"link":at("error",n),at("load",n),f=c;break;case"details":at("toggle",n),f=c;break;case"input":cr(n,c),f=kn(n,c),at("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=ue({},c,{value:void 0}),at("invalid",n);break;case"textarea":me(n,c),f=Q(n,c),at("invalid",n);break;default:f=c}rs(a,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var j=C[g];g==="style"?ts(n,j):g==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Hn(n,j)):g==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&Nn(n,j):typeof j=="number"&&Nn(n,""+j):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?j!=null&&g==="onScroll"&&at("scroll",n):j!=null&&ie(n,g,j,w))}switch(a){case"input":vn(n),b(n,c,!1);break;case"textarea":vn(n),Xe(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?D(n,!!c.multiple,g,!1):c.defaultValue!=null&&D(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=tu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Kt(s),null;case 6:if(n&&s.stateNode!=null)Km(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Ts(Aa.current),Ts(_r.current),lu(s)){if(c=s.stateNode,a=s.memoizedProps,c[vr]=s,(g=c.nodeValue!==a)&&(n=Sn,n!==null))switch(n.tag){case 3:eu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&eu(c.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[vr]=s,s.stateNode=c}return Kt(s),null;case 13:if(lt(ft),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ht&&Cn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Jp(),wo(),s.flags|=98560,g=!1;else if(g=lu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[vr]=s}else wo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Kt(s),g=!1}else nr!==null&&(ch(nr),nr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ft.current&1)!==0?At===0&&(At=3):fh())),s.updateQueue!==null&&(s.flags|=4),Kt(s),null);case 4:return Io(),Zd(n,s),n===null&&Ta(s.stateNode.containerInfo),Kt(s),null;case 10:return Pd(s.type._context),Kt(s),null;case 17:return dn(s.type)&&ru(),Kt(s),null;case 19:if(lt(ft),g=s.memoizedState,g===null)return Kt(s),null;if(c=(s.flags&128)!==0,w=g.rendering,w===null)if(c)Da(g,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=pu(n),w!==null){for(s.flags|=128,Da(g,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,n=c,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return ot(ft,ft.current&1|2),s.child}n=n.sibling}g.tail!==null&&st()>Ro&&(s.flags|=128,c=!0,Da(g,!1),s.lanes=4194304)}else{if(!c)if(n=pu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Da(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!ht)return Kt(s),null}else 2*st()-g.renderingStartTime>Ro&&a!==1073741824&&(s.flags|=128,c=!0,Da(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=st(),s.sibling=null,a=ft.current,ot(ft,c?a&1|2:a&1),s):(Kt(s),null);case 22:case 23:return hh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Pn&1073741824)!==0&&(Kt(s),s.subtreeFlags&6&&(s.flags|=8192)):Kt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function $w(n,s){switch(Ed(s),s.tag){case 1:return dn(s.type)&&ru(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Io(),lt(cn),lt(qt),Dd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return bd(s),null;case 13:if(lt(ft),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));wo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return lt(ft),null;case 4:return Io(),null;case 10:return Pd(s.type._context),null;case 22:case 23:return hh(),null;case 24:return null;default:return null}}var xu=!1,Qt=!1,Ww=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Co(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){gt(n,s,c)}else a.current=null}function eh(n,s,a){try{a()}catch(c){gt(n,s,c)}}var Qm=!1;function Hw(n,s){if(hd=fi,n=Pp(),id(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,C=-1,j=-1,H=0,ne=0,re=n,te=null;t:for(;;){for(var fe;re!==a||f!==0&&re.nodeType!==3||(C=w+f),re!==g||c!==0&&re.nodeType!==3||(j=w+c),re.nodeType===3&&(w+=re.nodeValue.length),(fe=re.firstChild)!==null;)te=re,re=fe;for(;;){if(re===n)break t;if(te===a&&++H===f&&(C=w),te===g&&++ne===c&&(j=w),(fe=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=fe}a=C===-1||j===-1?null:{start:C,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(fd={focusedElem:n,selectionRange:a},fi=!1,ge=s;ge!==null;)if(s=ge,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ge=n;else for(;ge!==null;){s=ge;try{var ve=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var _e=ve.memoizedProps,_t=ve.memoizedState,z=s.stateNode,O=z.getSnapshotBeforeUpdate(s.elementType===s.type?_e:rr(s.type,_e),_t);z.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var $=s.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){gt(s,s.return,se)}if(n=s.sibling,n!==null){n.return=s.return,ge=n;break}ge=s.return}return ve=Qm,Qm=!1,ve}function Va(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&eh(s,a,g)}f=f.next}while(f!==c)}}function Iu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function th(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Ym(n){var s=n.alternate;s!==null&&(n.alternate=null,Ym(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[vr],delete s[Ia],delete s[yd],delete s[Pw],delete s[Rw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Jm(n){return n.tag===5||n.tag===3||n.tag===4}function Xm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Jm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=tu));else if(c!==4&&(n=n.child,n!==null))for(nh(n,s,a),n=n.sibling;n!==null;)nh(n,s,a),n=n.sibling}function rh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(rh(n,s,a),n=n.sibling;n!==null;)rh(n,s,a),n=n.sibling}var Ut=null,ir=!1;function Ti(n,s,a){for(a=a.child;a!==null;)Zm(n,s,a),a=a.sibling}function Zm(n,s,a){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(cs,a)}catch{}switch(a.tag){case 5:Qt||Co(a,s);case 6:var c=Ut,f=ir;Ut=null,Ti(n,s,a),Ut=c,ir=f,Ut!==null&&(ir?(n=Ut,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ut.removeChild(a.stateNode));break;case 18:Ut!==null&&(ir?(n=Ut,a=a.stateNode,n.nodeType===8?gd(n.parentNode,a):n.nodeType===1&&gd(n,a),Zn(n)):gd(Ut,a.stateNode));break;case 4:c=Ut,f=ir,Ut=a.stateNode.containerInfo,ir=!0,Ti(n,s,a),Ut=c,ir=f;break;case 0:case 11:case 14:case 15:if(!Qt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&eh(a,s,w),f=f.next}while(f!==c)}Ti(n,s,a);break;case 1:if(!Qt&&(Co(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){gt(a,s,C)}Ti(n,s,a);break;case 21:Ti(n,s,a);break;case 22:a.mode&1?(Qt=(c=Qt)||a.memoizedState!==null,Ti(n,s,a),Qt=c):Ti(n,s,a);break;default:Ti(n,s,a)}}function eg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Ww),s.forEach(function(c){var f=eE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function sr(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 5:Ut=C.stateNode,ir=!1;break e;case 3:Ut=C.stateNode.containerInfo,ir=!0;break e;case 4:Ut=C.stateNode.containerInfo,ir=!0;break e}C=C.return}if(Ut===null)throw Error(t(160));Zm(g,w,f),Ut=null,ir=!1;var j=f.alternate;j!==null&&(j.return=null),f.return=null}catch(H){gt(f,s,H)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)tg(s,n),s=s.sibling}function tg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(sr(s,n),Er(n),c&4){try{Va(3,n,n.return),Iu(3,n)}catch(_e){gt(n,n.return,_e)}try{Va(5,n,n.return)}catch(_e){gt(n,n.return,_e)}}break;case 1:sr(s,n),Er(n),c&512&&a!==null&&Co(a,a.return);break;case 5:if(sr(s,n),Er(n),c&512&&a!==null&&Co(a,a.return),n.flags&32){var f=n.stateNode;try{Nn(f,"")}catch(_e){gt(n,n.return,_e)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,C=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&en(f,g),is(C,w);var H=is(C,g);for(w=0;w<j.length;w+=2){var ne=j[w],re=j[w+1];ne==="style"?ts(f,re):ne==="dangerouslySetInnerHTML"?Hn(f,re):ne==="children"?Nn(f,re):ie(f,ne,re,H)}switch(C){case"input":Wn(f,g);break;case"textarea":Ve(f,g);break;case"select":var te=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var fe=g.value;fe!=null?D(f,!!g.multiple,fe,!1):te!==!!g.multiple&&(g.defaultValue!=null?D(f,!!g.multiple,g.defaultValue,!0):D(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ia]=g}catch(_e){gt(n,n.return,_e)}}break;case 6:if(sr(s,n),Er(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(_e){gt(n,n.return,_e)}}break;case 3:if(sr(s,n),Er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Zn(s.containerInfo)}catch(_e){gt(n,n.return,_e)}break;case 4:sr(s,n),Er(n);break;case 13:sr(s,n),Er(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(oh=st())),c&4&&eg(n);break;case 22:if(ne=a!==null&&a.memoizedState!==null,n.mode&1?(Qt=(H=Qt)||ne,sr(s,n),Qt=H):sr(s,n),Er(n),c&8192){if(H=n.memoizedState!==null,(n.stateNode.isHidden=H)&&!ne&&(n.mode&1)!==0)for(ge=n,ne=n.child;ne!==null;){for(re=ge=ne;ge!==null;){switch(te=ge,fe=te.child,te.tag){case 0:case 11:case 14:case 15:Va(4,te,te.return);break;case 1:Co(te,te.return);var ve=te.stateNode;if(typeof ve.componentWillUnmount=="function"){c=te,a=te.return;try{s=c,ve.props=s.memoizedProps,ve.state=s.memoizedState,ve.componentWillUnmount()}catch(_e){gt(c,a,_e)}}break;case 5:Co(te,te.return);break;case 22:if(te.memoizedState!==null){ig(re);continue}}fe!==null?(fe.return=te,ge=fe):ig(re)}ne=ne.sibling}e:for(ne=null,re=n;;){if(re.tag===5){if(ne===null){ne=re;try{f=re.stateNode,H?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=re.stateNode,j=re.memoizedProps.style,w=j!=null&&j.hasOwnProperty("display")?j.display:null,C.style.display=es("display",w))}catch(_e){gt(n,n.return,_e)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=H?"":re.memoizedProps}catch(_e){gt(n,n.return,_e)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===n)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===n)break e;for(;re.sibling===null;){if(re.return===null||re.return===n)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:sr(s,n),Er(n),c&4&&eg(n);break;case 21:break;default:sr(s,n),Er(n)}}function Er(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Jm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Nn(f,""),c.flags&=-33);var g=Xm(n);rh(n,g,f);break;case 3:case 4:var w=c.stateNode.containerInfo,C=Xm(n);nh(n,C,w);break;default:throw Error(t(161))}}catch(j){gt(n,n.return,j)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function qw(n,s,a){ge=n,ng(n)}function ng(n,s,a){for(var c=(n.mode&1)!==0;ge!==null;){var f=ge,g=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||xu;if(!w){var C=f.alternate,j=C!==null&&C.memoizedState!==null||Qt;C=xu;var H=Qt;if(xu=w,(Qt=j)&&!H)for(ge=f;ge!==null;)w=ge,j=w.child,w.tag===22&&w.memoizedState!==null?sg(f):j!==null?(j.return=w,ge=j):sg(f);for(;g!==null;)ge=g,ng(g),g=g.sibling;ge=f,xu=C,Qt=H}rg(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ge=g):rg(n)}}function rg(n){for(;ge!==null;){var s=ge;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Qt||Iu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Qt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:rr(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&im(s,g,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}im(s,w,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var H=s.alternate;if(H!==null){var ne=H.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Zn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||s.flags&512&&th(s)}catch(te){gt(s,s.return,te)}}if(s===n){ge=null;break}if(a=s.sibling,a!==null){a.return=s.return,ge=a;break}ge=s.return}}function ig(n){for(;ge!==null;){var s=ge;if(s===n){ge=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ge=a;break}ge=s.return}}function sg(n){for(;ge!==null;){var s=ge;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Iu(4,s)}catch(j){gt(s,a,j)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(j){gt(s,f,j)}}var g=s.return;try{th(s)}catch(j){gt(s,g,j)}break;case 5:var w=s.return;try{th(s)}catch(j){gt(s,w,j)}}}catch(j){gt(s,s.return,j)}if(s===n){ge=null;break}var C=s.sibling;if(C!==null){C.return=s.return,ge=C;break}ge=s.return}}var Gw=Math.ceil,Su=ce.ReactCurrentDispatcher,ih=ce.ReactCurrentOwner,Fn=ce.ReactCurrentBatchConfig,Ke=0,Vt=null,xt=null,zt=0,Pn=0,Po=yi(0),At=0,Oa=null,Is=0,Cu=0,sh=0,La=null,fn=null,oh=0,Ro=1/0,Gr=null,Pu=!1,ah=null,xi=null,Ru=!1,Ii=null,Au=0,Ma=0,lh=null,ku=-1,Nu=0;function sn(){return(Ke&6)!==0?st():ku!==-1?ku:ku=st()}function Si(n){return(n.mode&1)===0?1:(Ke&2)!==0&&zt!==0?zt&-zt:kw.transition!==null?(Nu===0&&(Nu=hs()),Nu):(n=$e,n!==0||(n=window.event,n=n===void 0?16:ha(n.type)),n)}function or(n,s,a,c){if(50<Ma)throw Ma=0,lh=null,Error(t(185));ui(n,a,c),((Ke&2)===0||n!==Vt)&&(n===Vt&&((Ke&2)===0&&(Cu|=a),At===4&&Ci(n,zt)),pn(n,c),a===1&&Ke===0&&(s.mode&1)===0&&(Ro=st()+500,su&&_i()))}function pn(n,s){var a=n.callbackNode;Vr(n,s);var c=ds(n,n===Vt?zt:0);if(c===0)a!==null&&aa(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&aa(a),s===1)n.tag===0?Aw(ag.bind(null,n)):qp(ag.bind(null,n)),Sw(function(){(Ke&6)===0&&_i()}),a=null;else{switch(di(c)){case 1:a=us;break;case 4:a=oi;break;case 16:a=bn;break;case 536870912:a=Nl;break;default:a=bn}a=mg(a,og.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function og(n,s){if(ku=-1,Nu=0,(Ke&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Ao()&&n.callbackNode!==a)return null;var c=ds(n,n===Vt?zt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=bu(n,c);else{s=c;var f=Ke;Ke|=2;var g=ug();(Vt!==n||zt!==s)&&(Gr=null,Ro=st()+500,Cs(n,s));do try{Yw();break}catch(C){lg(n,C)}while(!0);Cd(),Su.current=g,Ke=f,xt!==null?s=0:(Vt=null,zt=0,s=At)}if(s!==0){if(s===2&&(f=Tn(n),f!==0&&(c=f,s=uh(n,f))),s===1)throw a=Oa,Cs(n,0),Ci(n,c),pn(n,st()),a;if(s===6)Ci(n,c);else{if(f=n.current.alternate,(c&30)===0&&!Kw(f)&&(s=bu(n,c),s===2&&(g=Tn(n),g!==0&&(c=g,s=uh(n,g))),s===1))throw a=Oa,Cs(n,0),Ci(n,c),pn(n,st()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Ps(n,fn,Gr);break;case 3:if(Ci(n,c),(c&130023424)===c&&(s=oh+500-st(),10<s)){if(ds(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){sn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=md(Ps.bind(null,n,fn,Gr),s);break}Ps(n,fn,Gr);break;case 4:if(Ci(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var w=31-tn(c);g=1<<w,w=s[w],w>f&&(f=w),c&=~g}if(c=f,c=st()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Gw(c/1960))-c,10<c){n.timeoutHandle=md(Ps.bind(null,n,fn,Gr),c);break}Ps(n,fn,Gr);break;case 5:Ps(n,fn,Gr);break;default:throw Error(t(329))}}}return pn(n,st()),n.callbackNode===a?og.bind(null,n):null}function uh(n,s){var a=La;return n.current.memoizedState.isDehydrated&&(Cs(n,s).flags|=256),n=bu(n,s),n!==2&&(s=fn,fn=a,s!==null&&ch(s)),n}function ch(n){fn===null?fn=n:fn.push.apply(fn,n)}function Kw(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!tr(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ci(n,s){for(s&=~sh,s&=~Cu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-tn(s),c=1<<a;n[a]=-1,s&=~c}}function ag(n){if((Ke&6)!==0)throw Error(t(327));Ao();var s=ds(n,0);if((s&1)===0)return pn(n,st()),null;var a=bu(n,s);if(n.tag!==0&&a===2){var c=Tn(n);c!==0&&(s=c,a=uh(n,c))}if(a===1)throw a=Oa,Cs(n,0),Ci(n,s),pn(n,st()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Ps(n,fn,Gr),pn(n,st()),null}function dh(n,s){var a=Ke;Ke|=1;try{return n(s)}finally{Ke=a,Ke===0&&(Ro=st()+500,su&&_i())}}function Ss(n){Ii!==null&&Ii.tag===0&&(Ke&6)===0&&Ao();var s=Ke;Ke|=1;var a=Fn.transition,c=$e;try{if(Fn.transition=null,$e=1,n)return n()}finally{$e=c,Fn.transition=a,Ke=s,(Ke&6)===0&&_i()}}function hh(){Pn=Po.current,lt(Po)}function Cs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Iw(a)),xt!==null)for(a=xt.return;a!==null;){var c=a;switch(Ed(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ru();break;case 3:Io(),lt(cn),lt(qt),Dd();break;case 5:bd(c);break;case 4:Io();break;case 13:lt(ft);break;case 19:lt(ft);break;case 10:Pd(c.type._context);break;case 22:case 23:hh()}a=a.return}if(Vt=n,xt=n=Pi(n.current,null),zt=Pn=s,At=0,Oa=null,sh=Cu=Is=0,fn=La=null,Es!==null){for(s=0;s<Es.length;s++)if(a=Es[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,c.next=w}a.pending=c}Es=null}return n}function lg(n,s){do{var a=xt;try{if(Cd(),mu.current=_u,gu){for(var c=pt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}gu=!1}if(xs=0,Dt=Rt=pt=null,ka=!1,Na=0,ih.current=null,a===null||a.return===null){At=1,Oa=s,xt=null;break}e:{var g=n,w=a.return,C=a,j=s;if(s=zt,C.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var H=j,ne=C,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var fe=jm(w);if(fe!==null){fe.flags&=-257,Dm(fe,w,C,g,s),fe.mode&1&&bm(g,H,s),s=fe,j=H;var ve=s.updateQueue;if(ve===null){var _e=new Set;_e.add(j),s.updateQueue=_e}else ve.add(j);break e}else{if((s&1)===0){bm(g,H,s),fh();break e}j=Error(t(426))}}else if(ht&&C.mode&1){var _t=jm(w);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),Dm(_t,w,C,g,s),Id(So(j,C));break e}}g=j=So(j,C),At!==4&&(At=2),La===null?La=[g]:La.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var z=km(g,j,s);rm(g,z);break e;case 1:C=j;var O=g.type,$=g.stateNode;if((g.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(xi===null||!xi.has($)))){g.flags|=65536,s&=-s,g.lanes|=s;var se=Nm(g,C,s);rm(g,se);break e}}g=g.return}while(g!==null)}dg(a)}catch(Ee){s=Ee,xt===a&&a!==null&&(xt=a=a.return);continue}break}while(!0)}function ug(){var n=Su.current;return Su.current=_u,n===null?_u:n}function fh(){(At===0||At===3||At===2)&&(At=4),Vt===null||(Is&268435455)===0&&(Cu&268435455)===0||Ci(Vt,zt)}function bu(n,s){var a=Ke;Ke|=2;var c=ug();(Vt!==n||zt!==s)&&(Gr=null,Cs(n,s));do try{Qw();break}catch(f){lg(n,f)}while(!0);if(Cd(),Ke=a,Su.current=c,xt!==null)throw Error(t(261));return Vt=null,zt=0,At}function Qw(){for(;xt!==null;)cg(xt)}function Yw(){for(;xt!==null&&!Al();)cg(xt)}function cg(n){var s=pg(n.alternate,n,Pn);n.memoizedProps=n.pendingProps,s===null?dg(n):xt=s,ih.current=null}function dg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Bw(a,s,Pn),a!==null){xt=a;return}}else{if(a=$w(a,s),a!==null){a.flags&=32767,xt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{At=6,xt=null;return}}if(s=s.sibling,s!==null){xt=s;return}xt=s=n}while(s!==null);At===0&&(At=5)}function Ps(n,s,a){var c=$e,f=Fn.transition;try{Fn.transition=null,$e=1,Jw(n,s,a,c)}finally{Fn.transition=f,$e=c}return null}function Jw(n,s,a,c){do Ao();while(Ii!==null);if((Ke&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(it(n,g),n===Vt&&(xt=Vt=null,zt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ru||(Ru=!0,mg(bn,function(){return Ao(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Fn.transition,Fn.transition=null;var w=$e;$e=1;var C=Ke;Ke|=4,ih.current=null,Hw(n,a),tg(a,n),yw(fd),fi=!!hd,fd=hd=null,n.current=a,qw(a),Yc(),Ke=C,$e=w,Fn.transition=g}else n.current=a;if(Ru&&(Ru=!1,Ii=n,Au=f),g=n.pendingLanes,g===0&&(xi=null),bl(a.stateNode),pn(n,st()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Pu)throw Pu=!1,n=ah,ah=null,n;return(Au&1)!==0&&n.tag!==0&&Ao(),g=n.pendingLanes,(g&1)!==0?n===lh?Ma++:(Ma=0,lh=n):Ma=0,_i(),null}function Ao(){if(Ii!==null){var n=di(Au),s=Fn.transition,a=$e;try{if(Fn.transition=null,$e=16>n?16:n,Ii===null)var c=!1;else{if(n=Ii,Ii=null,Au=0,(Ke&6)!==0)throw Error(t(331));var f=Ke;for(Ke|=4,ge=n.current;ge!==null;){var g=ge,w=g.child;if((ge.flags&16)!==0){var C=g.deletions;if(C!==null){for(var j=0;j<C.length;j++){var H=C[j];for(ge=H;ge!==null;){var ne=ge;switch(ne.tag){case 0:case 11:case 15:Va(8,ne,g)}var re=ne.child;if(re!==null)re.return=ne,ge=re;else for(;ge!==null;){ne=ge;var te=ne.sibling,fe=ne.return;if(Ym(ne),ne===H){ge=null;break}if(te!==null){te.return=fe,ge=te;break}ge=fe}}}var ve=g.alternate;if(ve!==null){var _e=ve.child;if(_e!==null){ve.child=null;do{var _t=_e.sibling;_e.sibling=null,_e=_t}while(_e!==null)}}ge=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,ge=w;else e:for(;ge!==null;){if(g=ge,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Va(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,ge=z;break e}ge=g.return}}var O=n.current;for(ge=O;ge!==null;){w=ge;var $=w.child;if((w.subtreeFlags&2064)!==0&&$!==null)$.return=w,ge=$;else e:for(w=O;ge!==null;){if(C=ge,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Iu(9,C)}}catch(Ee){gt(C,C.return,Ee)}if(C===w){ge=null;break e}var se=C.sibling;if(se!==null){se.return=C.return,ge=se;break e}ge=C.return}}if(Ke=f,_i(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(cs,n)}catch{}c=!0}return c}finally{$e=a,Fn.transition=s}}return!1}function hg(n,s,a){s=So(a,s),s=km(n,s,1),n=Ei(n,s,1),s=sn(),n!==null&&(ui(n,1,s),pn(n,s))}function gt(n,s,a){if(n.tag===3)hg(n,n,a);else for(;s!==null;){if(s.tag===3){hg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(xi===null||!xi.has(c))){n=So(a,n),n=Nm(s,n,1),s=Ei(s,n,1),n=sn(),s!==null&&(ui(s,1,n),pn(s,n));break}}s=s.return}}function Xw(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=sn(),n.pingedLanes|=n.suspendedLanes&a,Vt===n&&(zt&a)===a&&(At===4||At===3&&(zt&130023424)===zt&&500>st()-oh?Cs(n,0):sh|=a),pn(n,s)}function fg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Js,Js<<=1,(Js&130023424)===0&&(Js=4194304)));var a=sn();n=Wr(n,s),n!==null&&(ui(n,s,a),pn(n,a))}function Zw(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),fg(n,a)}function eE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),fg(n,a)}var pg;pg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||cn.current)hn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return hn=!1,zw(n,s,a);hn=(n.flags&131072)!==0}else hn=!1,ht&&(s.flags&1048576)!==0&&Gp(s,au,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Tu(n,s),n=s.pendingProps;var f=yo(s,qt.current);xo(s,a),f=Ld(null,s,c,n,f,a);var g=Md();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,dn(c)?(g=!0,iu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,kd(s),f.updater=wu,s.stateNode=f,f._reactInternals=s,Wd(s,c,n,a),s=Kd(null,s,c,!0,g,a)):(s.tag=0,ht&&g&&wd(s),rn(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Tu(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=nE(c),n=rr(c,n),f){case 0:s=Gd(null,s,c,n,a);break e;case 1:s=Um(null,s,c,n,a);break e;case 11:s=Vm(null,s,c,n,a);break e;case 14:s=Om(null,s,c,rr(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:rr(c,f),Gd(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:rr(c,f),Um(n,s,c,f,a);case 3:e:{if(zm(s),n===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,nm(n,s),fu(s,c,null,a);var w=s.memoizedState;if(c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=So(Error(t(423)),s),s=Bm(n,s,c,a,f);break e}else if(c!==f){f=So(Error(t(424)),s),s=Bm(n,s,c,a,f);break e}else for(Cn=gi(s.stateNode.containerInfo.firstChild),Sn=s,ht=!0,nr=null,a=em(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(wo(),c===f){s=qr(n,s,a);break e}rn(n,s,c,a)}s=s.child}return s;case 5:return sm(s),n===null&&xd(s),c=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,w=f.children,pd(c,f)?w=null:g!==null&&pd(c,g)&&(s.flags|=32),Fm(n,s),rn(n,s,w,a),s.child;case 6:return n===null&&xd(s),null;case 13:return $m(n,s,a);case 4:return Nd(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Eo(s,null,c,a):rn(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:rr(c,f),Vm(n,s,c,f,a);case 7:return rn(n,s,s.pendingProps,a),s.child;case 8:return rn(n,s,s.pendingProps.children,a),s.child;case 12:return rn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,ot(cu,c._currentValue),c._currentValue=w,g!==null)if(tr(g.value,w)){if(g.children===f.children&&!cn.current){s=qr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){w=g.child;for(var j=C.firstContext;j!==null;){if(j.context===c){if(g.tag===1){j=Hr(-1,a&-a),j.tag=2;var H=g.updateQueue;if(H!==null){H=H.shared;var ne=H.pending;ne===null?j.next=j:(j.next=ne.next,ne.next=j),H.pending=j}}g.lanes|=a,j=g.alternate,j!==null&&(j.lanes|=a),Rd(g.return,a,s),C.lanes|=a;break}j=j.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),Rd(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}rn(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,xo(s,a),f=Ln(f),c=c(f),s.flags|=1,rn(n,s,c,a),s.child;case 14:return c=s.type,f=rr(c,s.pendingProps),f=rr(c.type,f),Om(n,s,c,f,a);case 15:return Lm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:rr(c,f),Tu(n,s),s.tag=1,dn(c)?(n=!0,iu(s)):n=!1,xo(s,a),Rm(s,c,f),Wd(s,c,f,a),Kd(null,s,c,!0,n,a);case 19:return Hm(n,s,a);case 22:return Mm(n,s,a)}throw Error(t(156,s.tag))};function mg(n,s){return Qs(n,s)}function tE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(n,s,a,c){return new tE(n,s,a,c)}function ph(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nE(n){if(typeof n=="function")return ph(n)?1:0;if(n!=null){if(n=n.$$typeof,n===N)return 11;if(n===rt)return 14}return 2}function Pi(n,s){var a=n.alternate;return a===null?(a=Un(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ju(n,s,a,c,f,g){var w=2;if(c=n,typeof n=="function")ph(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case k:return Rs(a.children,f,g,s);case I:w=8,f|=8;break;case R:return n=Un(12,a,s,f|2),n.elementType=R,n.lanes=g,n;case P:return n=Un(13,a,s,f),n.elementType=P,n.lanes=g,n;case et:return n=Un(19,a,s,f),n.elementType=et,n.lanes=g,n;case qe:return Du(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:w=10;break e;case L:w=9;break e;case N:w=11;break e;case rt:w=14;break e;case yt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Un(w,a,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function Rs(n,s,a,c){return n=Un(7,n,c,s),n.lanes=a,n}function Du(n,s,a,c){return n=Un(22,n,c,s),n.elementType=qe,n.lanes=a,n.stateNode={isHidden:!1},n}function mh(n,s,a){return n=Un(6,n,null,s),n.lanes=a,n}function gh(n,s,a){return s=Un(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function rE(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=li(0),this.expirationTimes=li(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=li(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function yh(n,s,a,c,f,g,w,C,j){return n=new rE(n,s,a,C,j),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Un(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},kd(g),n}function iE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function gg(n){if(!n)return vi;n=n._reactInternals;e:{if(Kn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(dn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(dn(a))return Wp(n,a,s)}return s}function yg(n,s,a,c,f,g,w,C,j){return n=yh(a,c,!0,n,f,g,w,C,j),n.context=gg(null),a=n.current,c=sn(),f=Si(a),g=Hr(c,f),g.callback=s??null,Ei(a,g,f),n.current.lanes=f,ui(n,f,c),pn(n,c),n}function Vu(n,s,a,c){var f=s.current,g=sn(),w=Si(f);return a=gg(a),s.context===null?s.context=a:s.pendingContext=a,s=Hr(g,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Ei(f,s,w),n!==null&&(or(n,f,w,g),hu(n,f,w)),w}function Ou(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function vg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function vh(n,s){vg(n,s),(n=n.alternate)&&vg(n,s)}function sE(){return null}var _g=typeof reportError=="function"?reportError:function(n){console.error(n)};function _h(n){this._internalRoot=n}Lu.prototype.render=_h.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Vu(n,s,null,null)},Lu.prototype.unmount=_h.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ss(function(){Vu(null,n,null,null)}),s[Ur]=null}};function Lu(n){this._internalRoot=n}Lu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ll();n={blockedOn:null,target:n,priority:s};for(var a=0;a<pr.length&&s!==0&&s<pr[a].priority;a++);pr.splice(a,0,n),a===0&&Ul(n)}};function wh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Mu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function wg(){}function oE(n,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var H=Ou(w);g.call(H)}}var w=yg(s,c,n,0,null,!1,!1,"",wg);return n._reactRootContainer=w,n[Ur]=w.current,Ta(n.nodeType===8?n.parentNode:n),Ss(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var C=c;c=function(){var H=Ou(j);C.call(H)}}var j=yh(n,0,!1,null,null,!1,!1,"",wg);return n._reactRootContainer=j,n[Ur]=j.current,Ta(n.nodeType===8?n.parentNode:n),Ss(function(){Vu(s,j,a,c)}),j}function Fu(n,s,a,c,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var C=f;f=function(){var j=Ou(w);C.call(j)}}Vu(s,w,n,f)}else w=oE(a,s,n,f,c);return Ou(w)}Vl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=ai(s.pendingLanes);a!==0&&(ci(s,a|1),pn(s,st()),(Ke&6)===0&&(Ro=st()+500,_i()))}break;case 13:Ss(function(){var c=Wr(n,1);if(c!==null){var f=sn();or(c,n,1,f)}}),vh(n,1)}},Xs=function(n){if(n.tag===13){var s=Wr(n,134217728);if(s!==null){var a=sn();or(s,n,134217728,a)}vh(n,134217728)}},Ol=function(n){if(n.tag===13){var s=Si(n),a=Wr(n,s);if(a!==null){var c=sn();or(a,n,s,c)}vh(n,s)}},Ll=function(){return $e},Ml=function(n,s){var a=$e;try{return $e=n,s()}finally{$e=a}},si=function(n,s,a){switch(s){case"input":if(Wn(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=nu(c);if(!f)throw Error(t(90));Je(c),Wn(c,f)}}}break;case"textarea":Ve(n,a);break;case"select":s=a.value,s!=null&&D(n,!!a.multiple,s,!1)}},ss=dh,ra=Ss;var aE={usingClientEntryPoint:!1,Events:[Sa,mo,nu,hr,na,dh]},Fa={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lE={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=oa(n),n===null?null:n.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||sE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{cs=Uu.inject(lE),En=Uu}catch{}}return mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aE,mn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wh(s))throw Error(t(200));return iE(n,s,null,a)},mn.createRoot=function(n,s){if(!wh(n))throw Error(t(299));var a=!1,c="",f=_g;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=yh(n,1,!1,null,null,a,!1,c,f),n[Ur]=s.current,Ta(n.nodeType===8?n.parentNode:n),new _h(s)},mn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=oa(s),n=n===null?null:n.stateNode,n},mn.flushSync=function(n){return Ss(n)},mn.hydrate=function(n,s,a){if(!Mu(s))throw Error(t(200));return Fu(null,n,s,!0,a)},mn.hydrateRoot=function(n,s,a){if(!wh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",w=_g;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=yg(s,null,n,1,a??null,f,!1,g,w),n[Ur]=s.current,Ta(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Lu(s)},mn.render=function(n,s,a){if(!Mu(s))throw Error(t(200));return Fu(null,n,s,!1,a)},mn.unmountComponentAtNode=function(n){if(!Mu(n))throw Error(t(40));return n._reactRootContainer?(Ss(function(){Fu(null,null,n,!1,function(){n._reactRootContainer=null,n[Ur]=null})}),!0):!1},mn.unstable_batchedUpdates=dh,mn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Mu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Fu(n,s,a,!1,c)},mn.version="18.3.1-next-f1338f8080-20240426",mn}var Rg;function vv(){if(Rg)return xh.exports;Rg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),xh.exports=yE(),xh.exports}var Ag;function vE(){if(Ag)return zu;Ag=1;var r=vv();return zu.createRoot=r.createRoot,zu.hydrateRoot=r.hydrateRoot,zu}var _E=vE();const wE=gv(_E);vv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},rl.apply(this,arguments)}var ji;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ji||(ji={}));const kg="popstate";function EE(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:d,hash:p}=i.location;return zh("",{pathname:l,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:sc(o)}return xE(e,t,null,r)}function Ct(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function vf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TE(){return Math.random().toString(36).substr(2,8)}function Ng(r,e){return{usr:r.state,key:r.key,idx:e}}function zh(r,e,t,i){return t===void 0&&(t=null),rl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Go(e):e,{state:t,key:e&&e.key||i||TE()})}function sc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Go(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function xE(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,p=ji.Pop,y=null,v=E();v==null&&(v=0,d.replaceState(rl({},d.state,{idx:v}),""));function E(){return(d.state||{idx:null}).idx}function x(){p=ji.Pop;let B=E(),G=B==null?null:B-v;v=B,y&&y({action:p,location:K.location,delta:G})}function S(B,G){p=ji.Push;let Z=zh(K.location,B,G);v=E()+1;let ie=Ng(Z,v),ce=K.createHref(Z);try{d.pushState(ie,"",ce)}catch(Ie){if(Ie instanceof DOMException&&Ie.name==="DataCloneError")throw Ie;o.location.assign(ce)}l&&y&&y({action:p,location:K.location,delta:1})}function M(B,G){p=ji.Replace;let Z=zh(K.location,B,G);v=E();let ie=Ng(Z,v),ce=K.createHref(Z);d.replaceState(ie,"",ce),l&&y&&y({action:p,location:K.location,delta:0})}function W(B){let G=o.location.origin!=="null"?o.location.origin:o.location.href,Z=typeof B=="string"?B:sc(B);return Z=Z.replace(/ $/,"%20"),Ct(G,"No window.location.(origin|href) available to create URL for href: "+Z),new URL(Z,G)}let K={get action(){return p},get location(){return r(o,d)},listen(B){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(kg,x),y=B,()=>{o.removeEventListener(kg,x),y=null}},createHref(B){return e(o,B)},createURL:W,encodeLocation(B){let G=W(B);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:S,replace:M,go(B){return d.go(B)}};return K}var bg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(bg||(bg={}));function IE(r,e,t){return t===void 0&&(t="/"),SE(r,e,t)}function SE(r,e,t,i){let o=typeof e=="string"?Go(e):e,l=_f(o.pathname||"/",t);if(l==null)return null;let d=_v(r);CE(d);let p=null;for(let y=0;p==null&&y<d.length;++y){let v=ME(l);p=VE(d[y],v)}return p}function _v(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,d,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};y.relativePath.startsWith("/")&&(Ct(y.relativePath.startsWith(i),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(i.length));let v=Vi([i,y.relativePath]),E=t.concat(y);l.children&&l.children.length>0&&(Ct(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),_v(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:jE(v,l.index),routesMeta:E})};return r.forEach((l,d)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,d);else for(let y of wv(l.path))o(l,d,y)}),e}function wv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=wv(i.join("/")),p=[];return p.push(...d.map(y=>y===""?l:[l,y].join("/"))),o&&p.push(...d),p.map(y=>r.startsWith("/")&&y===""?"/":y)}function CE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:DE(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const PE=/^:[\w-]+$/,RE=3,AE=2,kE=1,NE=10,bE=-2,jg=r=>r==="*";function jE(r,e){let t=r.split("/"),i=t.length;return t.some(jg)&&(i+=bE),e&&(i+=AE),t.filter(o=>!jg(o)).reduce((o,l)=>o+(PE.test(l)?RE:l===""?kE:NE),i)}function DE(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function VE(r,e,t){let{routesMeta:i}=r,o={},l="/",d=[];for(let p=0;p<i.length;++p){let y=i[p],v=p===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",x=OE({path:y.relativePath,caseSensitive:y.caseSensitive,end:v},E),S=y.route;if(!x)return null;Object.assign(o,x.params),d.push({params:o,pathname:Vi([l,x.pathname]),pathnameBase:$E(Vi([l,x.pathnameBase])),route:S}),x.pathnameBase!=="/"&&(l=Vi([l,x.pathnameBase]))}return d}function OE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=LE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((v,E,x)=>{let{paramName:S,isOptional:M}=E;if(S==="*"){let K=p[x]||"";d=l.slice(0,l.length-K.length).replace(/(.)\/+$/,"$1")}const W=p[x];return M&&!W?v[S]=void 0:v[S]=(W||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:d,pattern:r}}function LE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),vf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,y)=>(i.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function ME(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function _f(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const FE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UE=r=>FE.test(r);function zE(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?Go(r):r,l;if(t)if(UE(t))l=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),vf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+t))}t.startsWith("/")?l=Dg(t.substring(1),"/"):l=Dg(t,e)}else l=e;return{pathname:l,search:WE(i),hash:HE(o)}}function Dg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Ch(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ev(r,e){let t=BE(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Tv(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=Go(r):(o=rl({},r),Ct(!o.pathname||!o.pathname.includes("?"),Ch("?","pathname","search",o)),Ct(!o.pathname||!o.pathname.includes("#"),Ch("#","pathname","hash",o)),Ct(!o.search||!o.search.includes("#"),Ch("#","search","hash",o)));let l=r===""||o.pathname==="",d=l?"/":o.pathname,p;if(d==null)p=t;else{let x=e.length-1;if(!i&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),x-=1;o.pathname=S.join("/")}p=x>=0?e[x]:"/"}let y=zE(o,p),v=d&&d!=="/"&&d.endsWith("/"),E=(l||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(v||E)&&(y.pathname+="/"),y}const Vi=r=>r.join("/").replace(/\/\/+/g,"/"),$E=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),WE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,HE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function qE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const xv=["post","put","patch","delete"];new Set(xv);const GE=["get",...xv];new Set(GE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},il.apply(this,arguments)}const wf=Y.createContext(null),KE=Y.createContext(null),zs=Y.createContext(null),Cc=Y.createContext(null),Bs=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),Iv=Y.createContext(null);function QE(r,e){let{relative:t}=e===void 0?{}:e;pl()||Ct(!1);let{basename:i,navigator:o}=Y.useContext(zs),{hash:l,pathname:d,search:p}=Cv(r,{relative:t}),y=d;return i!=="/"&&(y=d==="/"?i:Vi([i,d])),o.createHref({pathname:y,search:p,hash:l})}function pl(){return Y.useContext(Cc)!=null}function Pc(){return pl()||Ct(!1),Y.useContext(Cc).location}function Sv(r){Y.useContext(zs).static||Y.useLayoutEffect(r)}function Ef(){let{isDataRoute:r}=Y.useContext(Bs);return r?lT():YE()}function YE(){pl()||Ct(!1);let r=Y.useContext(wf),{basename:e,future:t,navigator:i}=Y.useContext(zs),{matches:o}=Y.useContext(Bs),{pathname:l}=Pc(),d=JSON.stringify(Ev(o,t.v7_relativeSplatPath)),p=Y.useRef(!1);return Sv(()=>{p.current=!0}),Y.useCallback(function(v,E){if(E===void 0&&(E={}),!p.current)return;if(typeof v=="number"){i.go(v);return}let x=Tv(v,JSON.parse(d),l,E.relative==="path");r==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Vi([e,x.pathname])),(E.replace?i.replace:i.push)(x,E.state,E)},[e,i,d,l,r])}function Cv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=Y.useContext(zs),{matches:o}=Y.useContext(Bs),{pathname:l}=Pc(),d=JSON.stringify(Ev(o,i.v7_relativeSplatPath));return Y.useMemo(()=>Tv(r,JSON.parse(d),l,t==="path"),[r,d,l,t])}function JE(r,e){return XE(r,e)}function XE(r,e,t,i){pl()||Ct(!1);let{navigator:o}=Y.useContext(zs),{matches:l}=Y.useContext(Bs),d=l[l.length-1],p=d?d.params:{};d&&d.pathname;let y=d?d.pathnameBase:"/";d&&d.route;let v=Pc(),E;if(e){var x;let B=typeof e=="string"?Go(e):e;y==="/"||(x=B.pathname)!=null&&x.startsWith(y)||Ct(!1),E=B}else E=v;let S=E.pathname||"/",M=S;if(y!=="/"){let B=y.replace(/^\//,"").split("/");M="/"+S.replace(/^\//,"").split("/").slice(B.length).join("/")}let W=IE(r,{pathname:M}),K=rT(W&&W.map(B=>Object.assign({},B,{params:Object.assign({},p,B.params),pathname:Vi([y,o.encodeLocation?o.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?y:Vi([y,o.encodeLocation?o.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),l,t,i);return e&&K?Y.createElement(Cc.Provider,{value:{location:il({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:ji.Pop}},K):K}function ZE(){let r=aT(),e=qE(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:o},t):null,null)}const eT=Y.createElement(ZE,null);class tT extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Y.createElement(Bs.Provider,{value:this.props.routeContext},Y.createElement(Iv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nT(r){let{routeContext:e,match:t,children:i}=r,o=Y.useContext(wf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(Bs.Provider,{value:e},i)}function rT(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let E=d.findIndex(x=>x.route.id&&(p==null?void 0:p[x.route.id])!==void 0);E>=0||Ct(!1),d=d.slice(0,Math.min(d.length,E+1))}let y=!1,v=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<d.length;E++){let x=d[E];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(v=E),x.route.id){let{loaderData:S,errors:M}=t,W=x.route.loader&&S[x.route.id]===void 0&&(!M||M[x.route.id]===void 0);if(x.route.lazy||W){y=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}return d.reduceRight((E,x,S)=>{let M,W=!1,K=null,B=null;t&&(M=p&&x.route.id?p[x.route.id]:void 0,K=x.route.errorElement||eT,y&&(v<0&&S===0?(uT("route-fallback"),W=!0,B=null):v===S&&(W=!0,B=x.route.hydrateFallbackElement||null)));let G=e.concat(d.slice(0,S+1)),Z=()=>{let ie;return M?ie=K:W?ie=B:x.route.Component?ie=Y.createElement(x.route.Component,null):x.route.element?ie=x.route.element:ie=E,Y.createElement(nT,{match:x,routeContext:{outlet:E,matches:G,isDataRoute:t!=null},children:ie})};return t&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?Y.createElement(tT,{location:t.location,revalidation:t.revalidation,component:K,error:M,children:Z(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):Z()},null)}var Pv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Pv||{}),Rv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Rv||{});function iT(r){let e=Y.useContext(wf);return e||Ct(!1),e}function sT(r){let e=Y.useContext(KE);return e||Ct(!1),e}function oT(r){let e=Y.useContext(Bs);return e||Ct(!1),e}function Av(r){let e=oT(),t=e.matches[e.matches.length-1];return t.route.id||Ct(!1),t.route.id}function aT(){var r;let e=Y.useContext(Iv),t=sT(),i=Av();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function lT(){let{router:r}=iT(Pv.UseNavigateStable),e=Av(Rv.UseNavigateStable),t=Y.useRef(!1);return Sv(()=>{t.current=!0}),Y.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,il({fromRouteId:e},l)))},[r,e])}const Vg={};function uT(r,e,t){Vg[r]||(Vg[r]=!0)}function cT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function As(r){Ct(!1)}function dT(r){let{basename:e="/",children:t=null,location:i,navigationType:o=ji.Pop,navigator:l,static:d=!1,future:p}=r;pl()&&Ct(!1);let y=e.replace(/^\/*/,"/"),v=Y.useMemo(()=>({basename:y,navigator:l,static:d,future:il({v7_relativeSplatPath:!1},p)}),[y,p,l,d]);typeof i=="string"&&(i=Go(i));let{pathname:E="/",search:x="",hash:S="",state:M=null,key:W="default"}=i,K=Y.useMemo(()=>{let B=_f(E,y);return B==null?null:{location:{pathname:B,search:x,hash:S,state:M,key:W},navigationType:o}},[y,E,x,S,M,W,o]);return K==null?null:Y.createElement(zs.Provider,{value:v},Y.createElement(Cc.Provider,{children:t,value:K}))}function hT(r){let{children:e,location:t}=r;return JE(Bh(e),t)}new Promise(()=>{});function Bh(r,e){e===void 0&&(e=[]);let t=[];return Y.Children.forEach(r,(i,o)=>{if(!Y.isValidElement(i))return;let l=[...e,o];if(i.type===Y.Fragment){t.push.apply(t,Bh(i.props.children,l));return}i.type!==As&&Ct(!1),!i.props.index||!i.props.children||Ct(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Bh(i.props.children,l)),t.push(d)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $h(){return $h=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},$h.apply(this,arguments)}function fT(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function pT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function mT(r,e){return r.button===0&&(!e||e==="_self")&&!pT(r)}const gT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yT="6";try{window.__reactRouterVersion=yT}catch{}const vT="startTransition",Og=pE[vT];function _T(r){let{basename:e,children:t,future:i,window:o}=r,l=Y.useRef();l.current==null&&(l.current=EE({window:o,v5Compat:!0}));let d=l.current,[p,y]=Y.useState({action:d.action,location:d.location}),{v7_startTransition:v}=i||{},E=Y.useCallback(x=>{v&&Og?Og(()=>y(x)):y(x)},[y,v]);return Y.useLayoutEffect(()=>d.listen(E),[d,E]),Y.useEffect(()=>cT(i),[i]),Y.createElement(dT,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:d,future:i})}const wT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ET=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,za=Y.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:d,state:p,target:y,to:v,preventScrollReset:E,viewTransition:x}=e,S=fT(e,gT),{basename:M}=Y.useContext(zs),W,K=!1;if(typeof v=="string"&&ET.test(v)&&(W=v,wT))try{let ie=new URL(window.location.href),ce=v.startsWith("//")?new URL(ie.protocol+v):new URL(v),Ie=_f(ce.pathname,M);ce.origin===ie.origin&&Ie!=null?v=Ie+ce.search+ce.hash:K=!0}catch{}let B=QE(v,{relative:o}),G=TT(v,{replace:d,state:p,target:y,preventScrollReset:E,relative:o,viewTransition:x});function Z(ie){i&&i(ie),ie.defaultPrevented||G(ie)}return Y.createElement("a",$h({},S,{href:W||B,onClick:K||l?i:Z,ref:t,target:y}))});var Lg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Lg||(Lg={}));var Mg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Mg||(Mg={}));function TT(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:d,viewTransition:p}=e===void 0?{}:e,y=Ef(),v=Pc(),E=Cv(r,{relative:d});return Y.useCallback(x=>{if(mT(x,t)){x.preventDefault();let S=i!==void 0?i:sc(v)===sc(E);y(r,{replace:S,state:o,preventScrollReset:l,relative:d,viewTransition:p})}},[v,y,E,i,o,t,r,l,d,p])}const xT=()=>{};var Fg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},IT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],p=r[t++],y=((o&7)<<18|(l&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Nv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,p=d?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,E=l>>2,x=(l&3)<<4|p>>4;let S=(p&15)<<2|v>>6,M=v&63;y||(M=64,d||(S=64)),i.push(t[E],t[x],t[S],t[M])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(kv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):IT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const x=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||x==null)throw new ST;const S=l<<2|p>>4;if(i.push(S),v!==64){const M=p<<4&240|v>>2;if(i.push(M),x!==64){const W=v<<6&192|x;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ST extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CT=function(r){const e=kv(r);return Nv.encodeByteArray(e,!0)},oc=function(r){return CT(r).replace(/\./g,"")},bv=function(r){try{return Nv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=()=>PT().__FIREBASE_DEFAULTS__,AT=()=>{if(typeof process>"u"||typeof Fg>"u")return;const r=Fg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},kT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&bv(r[1]);return e&&JSON.parse(e)},Rc=()=>{try{return xT()||RT()||AT()||kT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},jv=r=>{var e,t;return(t=(e=Rc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},NT=r=>{const e=jv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Dv=()=>{var r;return(r=Rc())===null||r===void 0?void 0:r.config},Vv=r=>{var e;return(e=Rc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ov(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[oc(JSON.stringify(t)),oc(JSON.stringify(d)),""].join(".")}const Ja={};function DT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ja))Ja[e]?r.emulator.push(e):r.prod.push(e);return r}function VT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Ug=!1;function Lv(r,e){if(typeof window>"u"||typeof document>"u"||!Ko(window.location.host)||Ja[r]===e||Ja[r]||Ug)return;Ja[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=DT().prod.length>0;function d(){const S=document.getElementById(i);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,M){S.setAttribute("width","24"),S.setAttribute("id",M),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Ug=!0,d()},S}function E(S,M){S.setAttribute("id",M),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function x(){const S=VT(i),M=t("text"),W=document.getElementById(M)||document.createElement("span"),K=t("learnmore"),B=document.getElementById(K)||document.createElement("a"),G=t("preprendIcon"),Z=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ie=S.element;p(ie),E(B,K);const ce=v();y(Z,G),ie.append(Z,W,B,ce),document.body.appendChild(ie)}l?(W.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function LT(){var r;const e=(r=Rc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function UT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zT(){const r=Zt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function BT(){return!LT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $T(){try{return typeof indexedDB=="object"}catch{return!1}}function WT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="FirebaseError";class ri extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=HT,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ml.prototype.create)}}class ml{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?qT(l,i):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new ri(o,p,i)}}function qT(r,e){return r.replace(GT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const GT=/\{\$([^}]+)}/g;function KT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ds(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],d=e[o];if(zg(l)&&zg(d)){if(!Ds(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function zg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $a(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Wa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function QT(r,e){const t=new YT(r,e);return t.subscribe.bind(t)}class YT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");JT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Ph),o.error===void 0&&(o.error=Ph),o.complete===void 0&&(o.complete=Ph);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Ph(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(r){return r&&r._delegate?r._delegate:r}class Vs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new bT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ex(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ZT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZT(r){return r===ks?void 0:r}function ex(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const nx={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},rx=Ue.INFO,ix={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},sx=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=ix[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tf{constructor(e){this.name=e,this._logLevel=rx,this._logHandler=sx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const ox=(r,e)=>e.some(t=>r instanceof t);let Bg,$g;function ax(){return Bg||(Bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lx(){return $g||($g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mv=new WeakMap,Wh=new WeakMap,Fv=new WeakMap,Rh=new WeakMap,xf=new WeakMap;function ux(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(Oi(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Mv.set(t,r)}).catch(()=>{}),xf.set(e,r),e}function cx(r){if(Wh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Wh.set(r,e)}let Hh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Wh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Fv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function dx(r){Hh=r(Hh)}function hx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Ah(this),e,...t);return Fv.set(i,e.sort?e.sort():[e]),Oi(i)}:lx().includes(r)?function(...e){return r.apply(Ah(this),e),Oi(Mv.get(this))}:function(...e){return Oi(r.apply(Ah(this),e))}}function fx(r){return typeof r=="function"?hx(r):(r instanceof IDBTransaction&&cx(r),ox(r,ax())?new Proxy(r,Hh):r)}function Oi(r){if(r instanceof IDBRequest)return ux(r);if(Rh.has(r))return Rh.get(r);const e=fx(r);return e!==r&&(Rh.set(r,e),xf.set(e,r)),e}const Ah=r=>xf.get(r);function px(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),p=Oi(d);return i&&d.addEventListener("upgradeneeded",y=>{i(Oi(d.result),y.oldVersion,y.newVersion,Oi(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),p.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const mx=["get","getKey","getAll","getAllKeys","count"],gx=["put","add","delete","clear"],kh=new Map;function Wg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(kh.get(e))return kh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=gx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||mx.includes(t)))return;const l=async function(d,...p){const y=this.transaction(d,o?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&y.done]))[0]};return kh.set(e,l),l}dx(r=>({...r,get:(e,t,i)=>Wg(e,t)||r.get(e,t,i),has:(e,t)=>!!Wg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function vx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qh="@firebase/app",Hg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new Tf("@firebase/app"),_x="@firebase/app-compat",wx="@firebase/analytics-compat",Ex="@firebase/analytics",Tx="@firebase/app-check-compat",xx="@firebase/app-check",Ix="@firebase/auth",Sx="@firebase/auth-compat",Cx="@firebase/database",Px="@firebase/data-connect",Rx="@firebase/database-compat",Ax="@firebase/functions",kx="@firebase/functions-compat",Nx="@firebase/installations",bx="@firebase/installations-compat",jx="@firebase/messaging",Dx="@firebase/messaging-compat",Vx="@firebase/performance",Ox="@firebase/performance-compat",Lx="@firebase/remote-config",Mx="@firebase/remote-config-compat",Fx="@firebase/storage",Ux="@firebase/storage-compat",zx="@firebase/firestore",Bx="@firebase/ai",$x="@firebase/firestore-compat",Wx="firebase",Hx="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="[DEFAULT]",qx={[qh]:"fire-core",[_x]:"fire-core-compat",[Ex]:"fire-analytics",[wx]:"fire-analytics-compat",[xx]:"fire-app-check",[Tx]:"fire-app-check-compat",[Ix]:"fire-auth",[Sx]:"fire-auth-compat",[Cx]:"fire-rtdb",[Px]:"fire-data-connect",[Rx]:"fire-rtdb-compat",[Ax]:"fire-fn",[kx]:"fire-fn-compat",[Nx]:"fire-iid",[bx]:"fire-iid-compat",[jx]:"fire-fcm",[Dx]:"fire-fcm-compat",[Vx]:"fire-perf",[Ox]:"fire-perf-compat",[Lx]:"fire-rc",[Mx]:"fire-rc-compat",[Fx]:"fire-gcs",[Ux]:"fire-gcs-compat",[zx]:"fire-fst",[$x]:"fire-fst-compat",[Bx]:"fire-vertex","fire-js":"fire-js",[Wx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Map,Gx=new Map,Kh=new Map;function qg(r,e){try{r.container.addComponent(e)}catch(t){Xr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Uo(r){const e=r.name;if(Kh.has(e))return Xr.debug(`There were multiple attempts to register component ${e}.`),!1;Kh.set(e,r);for(const t of ac.values())qg(t,r);for(const t of Gx.values())qg(t,r);return!0}function If(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Rn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Li=new ml("app","Firebase",Kx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=Hx;function Uv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Gh,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Li.create("bad-app-name",{appName:String(o)});if(t||(t=Dv()),!t)throw Li.create("no-options");const l=ac.get(o);if(l){if(Ds(t,l.options)&&Ds(i,l.config))return l;throw Li.create("duplicate-app",{appName:o})}const d=new tx(o);for(const y of Kh.values())d.addComponent(y);const p=new Qx(t,i,d);return ac.set(o,p),p}function zv(r=Gh){const e=ac.get(r);if(!e&&r===Gh&&Dv())return Uv();if(!e)throw Li.create("no-app",{appName:r});return e}function Mi(r,e,t){var i;let o=(i=qx[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xr.warn(p.join(" "));return}Uo(new Vs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="firebase-heartbeat-database",Jx=1,sl="firebase-heartbeat-store";let Nh=null;function Bv(){return Nh||(Nh=px(Yx,Jx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(sl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Li.create("idb-open",{originalErrorMessage:r.message})})),Nh}async function Xx(r){try{const t=(await Bv()).transaction(sl),i=await t.objectStore(sl).get($v(r));return await t.done,i}catch(e){if(e instanceof ri)Xr.warn(e.message);else{const t=Li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xr.warn(t.message)}}}async function Gg(r,e){try{const i=(await Bv()).transaction(sl,"readwrite");await i.objectStore(sl).put(e,$v(r)),await i.done}catch(t){if(t instanceof ri)Xr.warn(t.message);else{const i=Li.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Xr.warn(i.message)}}}function $v(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=1024,eI=30;class tI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Kg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>eI){const d=iI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Xr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Kg(),{heartbeatsToSend:i,unsentEntries:o}=nI(this._heartbeatsCache.heartbeats),l=oc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Xr.warn(t),""}}}function Kg(){return new Date().toISOString().substring(0,10)}function nI(r,e=Zx){const t=[];let i=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),Qg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Qg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class rI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $T()?WT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Xx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Qg(r){return oc(JSON.stringify({version:2,heartbeats:r})).length}function iI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(r){Uo(new Vs("platform-logger",e=>new yx(e),"PRIVATE")),Uo(new Vs("heartbeat",e=>new tI(e),"PRIVATE")),Mi(qh,Hg,r),Mi(qh,Hg,"esm2017"),Mi("fire-js","")}sI("");var oI="firebase",aI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(oI,aI,"app");function Sf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Wv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lI=Wv,Hv=new ml("auth","Firebase",Wv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Tf("@firebase/auth");function uI(r,...e){lc.logLevel<=Ue.WARN&&lc.warn(`Auth (${Qo}): ${r}`,...e)}function Qu(r,...e){lc.logLevel<=Ue.ERROR&&lc.error(`Auth (${Qo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(r,...e){throw Pf(r,...e)}function lr(r,...e){return Pf(r,...e)}function Cf(r,e,t){const i=Object.assign(Object.assign({},lI()),{[e]:t});return new ml("auth","Firebase",i).create(e,{appName:r.name})}function Yr(r){return Cf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&$n(r,"argument-error"),Cf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Hv.create(r,...e)}function Re(r,e,...t){if(!r)throw Pf(e,...t)}function Kr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Qu(e),new Error(e)}function Zr(r,e){r||Kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function dI(){return Yg()==="http:"||Yg()==="https:"}function Yg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dI()||FT()||"connection"in navigator)?navigator.onLine:!0}function fI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zr(t>e,"Short delay should be less than long delay!"),this.isMobile=OT()||UT()}get(){return hI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(r,e){Zr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gI=new yl(3e4,6e4);function Qi(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Yi(r,e,t,i,o={}){return Gv(r,o,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const p=gl(Object.assign({key:r.config.apiKey},d)).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:y},l);return MT()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Ko(r.emulatorConfig.host)&&(v.credentials="include"),qv.fetch()(await Kv(r,r.config.apiHost,t,p),v)})}async function Gv(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},pI),e);try{const o=new vI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Bu(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const p=l.ok?d.errorMessage:d.error.message,[y,v]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bu(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Bu(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw Bu(r,"user-disabled",d);const E=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Cf(r,E,v);$n(r,E)}}catch(o){if(o instanceof ri)throw o;$n(r,"network-request-failed",{message:String(o)})}}async function vl(r,e,t,i,o={}){const l=await Yi(r,e,t,i,o);return"mfaPendingCredential"in l&&$n(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Kv(r,e,t,i){const o=`${e}${t}?${i}`,l=r,d=l.config.emulator?Rf(r.config,o):`${r.config.apiScheme}://${o}`;return mI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function yI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(lr(this.auth,"network-request-failed")),gI.get())})}}function Bu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=lr(r,e,i);return o.customData._tokenResponse=t,o}function Jg(r){return r!==void 0&&r.enterprise!==void 0}class _I{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wI(r,e){return Yi(r,"GET","/v2/recaptchaConfig",Qi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(r,e){return Yi(r,"POST","/v1/accounts:delete",e)}async function uc(r,e){return Yi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TI(r,e=!1){const t=Wt(r),i=await t.getIdToken(e),o=Af(i);Re(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Xa(bh(o.auth_time)),issuedAtTime:Xa(bh(o.iat)),expirationTime:Xa(bh(o.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function bh(r){return Number(r)*1e3}function Af(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const o=bv(t);return o?JSON.parse(o):(Qu("Failed to decode base64 JWT payload"),null)}catch(o){return Qu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Xg(r){const e=Af(r);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ri&&xI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function xI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await ol(r,uc(t,{idToken:i}));Re(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Qv(l.providerUserInfo):[],p=CI(r.providerData,d),y=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),E=y?v:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new Yh(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,x)}async function SI(r){const e=Wt(r);await cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Qv(r){return r.map(e=>{var{providerId:t}=e,i=Sf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(r,e){const t=await Gv(r,{},async()=>{const i=gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=await Kv(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:i};return r.emulatorConfig&&Ko(r.emulatorConfig.host)&&(y.credentials="include"),qv.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RI(r,e){return Yi(r,"POST","/v2/accounts:revokeToken",Qi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=Xg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await PI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,d=new Vo;return i&&(Re(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Re(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(Re(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(r,e){Re(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ar{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Sf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new II(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Yh(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ol(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TI(this,e)}reload(){return SI(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await cc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await ol(this,EI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,d,p,y,v,E;const x=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,M=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,W=(d=t.photoURL)!==null&&d!==void 0?d:void 0,K=(p=t.tenantId)!==null&&p!==void 0?p:void 0,B=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,G=(v=t.createdAt)!==null&&v!==void 0?v:void 0,Z=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ie,emailVerified:ce,isAnonymous:Ie,providerData:de,stsTokenManager:k}=t;Re(ie&&k,e,"internal-error");const I=Vo.fromJSON(this.name,k);Re(typeof ie=="string",e,"internal-error"),Ai(x,e.name),Ai(S,e.name),Re(typeof ce=="boolean",e,"internal-error"),Re(typeof Ie=="boolean",e,"internal-error"),Ai(M,e.name),Ai(W,e.name),Ai(K,e.name),Ai(B,e.name),Ai(G,e.name),Ai(Z,e.name);const R=new ar({uid:ie,auth:e,email:S,emailVerified:ce,displayName:x,isAnonymous:Ie,photoURL:W,phoneNumber:M,tenantId:K,stsTokenManager:I,createdAt:G,lastLoginAt:Z});return de&&Array.isArray(de)&&(R.providerData=de.map(A=>Object.assign({},A))),B&&(R._redirectEventId=B),R}static async _fromIdTokenResponse(e,t,i=!1){const o=new Vo;o.updateFromServerResponse(t);const l=new ar({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await cc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Re(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Qv(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Vo;p.updateFromIdToken(i);const y=new ar({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Yh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new Map;function Qr(r){Zr(r instanceof Function,"Expected a class definition");let e=Zg.get(r);return e?(Zr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Zg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Yv.type="NONE";const ey=Yv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(r,e,t){return`firebase:${r}:${e}:${t}`}class Oo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Yu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Yu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await uc(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Oo(Qr(ey),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Qr(ey);const d=Yu(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const E=await v._get(d);if(E){let x;if(typeof E=="string"){const S=await uc(e,{idToken:E}).catch(()=>{});if(!S)break;x=await ar._fromGetAccountInfoResponse(e,S,E)}else x=ar._fromJSON(e,E);v!==l&&(p=x),l=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new Oo(l,e,i):(l=y[0],p&&await l._set(d,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new Oo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(e_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(n_(e))return"Blackberry";if(r_(e))return"Webos";if(Xv(e))return"Safari";if((e.includes("chrome/")||Zv(e))&&!e.includes("edge/"))return"Chrome";if(t_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Jv(r=Zt()){return/firefox\//i.test(r)}function Xv(r=Zt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zv(r=Zt()){return/crios\//i.test(r)}function e_(r=Zt()){return/iemobile/i.test(r)}function t_(r=Zt()){return/android/i.test(r)}function n_(r=Zt()){return/blackberry/i.test(r)}function r_(r=Zt()){return/webos/i.test(r)}function kf(r=Zt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function AI(r=Zt()){var e;return kf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kI(){return zT()&&document.documentMode===10}function i_(r=Zt()){return kf(r)||t_(r)||r_(r)||n_(r)||/windows phone/i.test(r)||e_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(r,e=[]){let t;switch(r){case"Browser":t=ty(Zt());break;case"Worker":t=`${ty(Zt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,p)=>{try{const y=e(l);d(y)}catch(y){p(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(r,e={}){return Yi(r,"GET","/v2/passwordPolicy",Qi(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=6;class DI{constructor(e){var t,i,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:jI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,d,p;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(i=y.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),y.isValid&&(y.isValid=(o=y.containsLowercaseLetter)!==null&&o!==void 0?o:!0),y.isValid&&(y.isValid=(l=y.containsUppercaseLetter)!==null&&l!==void 0?l:!0),y.isValid&&(y.isValid=(d=y.containsNumericCharacter)!==null&&d!==void 0?d:!0),y.isValid&&(y.isValid=(p=y.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),y}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ny(this),this.idTokenSubscription=new ny(this),this.beforeStateQueue=new NI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await uc(this,{idToken:e}),i=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Rn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===p)&&(y!=null&&y.user)&&(o=y.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(Yr(this));const t=e?Wt(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bI(this),t=new DI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ml("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await RI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qr(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Qr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(p,this,"internal-error"),p.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&uI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ji(r){return Wt(r)}class ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=QT(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OI(r){Ac=r}function o_(r){return Ac.loadJS(r)}function LI(){return Ac.recaptchaEnterpriseScript}function MI(){return Ac.gapiScript}function FI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class UI{constructor(){this.enterprise=new zI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const BI="recaptcha-enterprise",a_="NO_RECAPTCHA";class $I{constructor(e){this.type=BI,this.auth=Ji(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,p)=>{wI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new _I(y);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(y=>{p(y)})})}function o(l,d,p){const y=window.grecaptcha;Jg(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d(a_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UI().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{i(this.auth).then(p=>{if(!t&&Jg(window.grecaptcha))o(p,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=LI();y.length!==0&&(y+=p),o_(y).then(()=>{o(p,l,d)}).catch(v=>{d(v)})}}).catch(p=>{d(p)})})}}async function ry(r,e,t,i=!1,o=!1){const l=new $I(r);let d;if(o)d=a_;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Jh(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await ry(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await ry(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(r,e){const t=If(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ds(l,e??{}))return o;$n(o,"already-initialized")}return t.initialize({options:e})}function HI(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Qr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function qI(r,e,t){const i=Ji(r);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=l_(e),{host:d,port:p}=GI(e),y=p===null?"":`:${p}`,v={url:`${l}//${d}${y}/`},E=Object.freeze({host:d,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(Ds(v,i.config.emulator)&&Ds(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,Ko(d)?(Ov(`${l}//${d}${y}`),Lv("Auth",!0)):KI()}function l_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function GI(r){const e=l_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:iy(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:iy(d)}}}function iy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function KI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,t){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}async function QI(r,e){return Yi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(r,e){return vl(r,"POST","/v1/accounts:signInWithPassword",Qi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(r,e){return vl(r,"POST","/v1/accounts:signInWithEmailLink",Qi(r,e))}async function XI(r,e){return vl(r,"POST","/v1/accounts:signInWithEmailLink",Qi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends Nf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new al(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new al(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jh(e,t,"signInWithPassword",YI);case"emailLink":return JI(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jh(e,i,"signUpPassword",QI);case"emailLink":return XI(e,{idToken:t,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(r,e){return vl(r,"POST","/v1/accounts:signInWithIdp",Qi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="http://localhost";class Os extends Nf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$n("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Sf(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new Os(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Lo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Lo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lo(e,t)}buildRequest(){const e={requestUri:ZI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tS(r){const e=$a(Wa(r)).link,t=e?$a(Wa(e)).deep_link_id:null,i=$a(Wa(r)).deep_link_id;return(i?$a(Wa(i)).link:null)||i||t||e||r}class bf{constructor(e){var t,i,o,l,d,p;const y=$a(Wa(e)),v=(t=y.apiKey)!==null&&t!==void 0?t:null,E=(i=y.oobCode)!==null&&i!==void 0?i:null,x=eS((o=y.mode)!==null&&o!==void 0?o:null);Re(v&&E&&x,"argument-error"),this.apiKey=v,this.operation=x,this.code=E,this.continueUrl=(l=y.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=y.lang)!==null&&d!==void 0?d:null,this.tenantId=(p=y.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=tS(e);try{return new bf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.providerId=Yo.PROVIDER_ID}static credential(e,t){return al._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=bf.parseLink(t);return Re(i,"argument-error"),al._fromEmailAndCode(e,i.code,i.tenantId)}}Yo.PROVIDER_ID="password";Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends jf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends _l{constructor(){super("facebook.com")}static credential(e){return Os._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends _l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Os._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ir.credential(t,i)}catch{return null}}}Ir.GOOGLE_SIGN_IN_METHOD="google.com";Ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends _l{constructor(){super("github.com")}static credential(e){return Os._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends _l{constructor(){super("twitter.com")}static credential(e,t){return Os._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return bi.credential(t,i)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(r,e){return vl(r,"POST","/v1/accounts:signUp",Qi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await ar._fromIdTokenResponse(e,i,o),d=sy(i);return new Ls({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=sy(i);return new Ls({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function sy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends ri{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,dc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new dc(e,t,i,o)}}function u_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?dc._fromErrorAndOperation(r,l,e,i):l})}async function rS(r,e,t=!1){const i=await ol(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ls._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(r,e,t=!1){const{auth:i}=r;if(Rn(i.app))return Promise.reject(Yr(i));const o="reauthenticate";try{const l=await ol(r,u_(i,o,e,r),t);Re(l.idToken,i,"internal-error");const d=Af(l.idToken);Re(d,i,"internal-error");const{sub:p}=d;return Re(r.uid===p,i,"user-mismatch"),Ls._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&$n(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_(r,e,t=!1){if(Rn(r.app))return Promise.reject(Yr(r));const i="signIn",o=await u_(r,i,e),l=await Ls._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function sS(r,e){return c_(Ji(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_(r){const e=Ji(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oS(r,e,t){if(Rn(r.app))return Promise.reject(Yr(r));const i=Ji(r),d=await Jh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nS).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&d_(r),y}),p=await Ls._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function h_(r,e,t){return Rn(r.app)?Promise.reject(Yr(r)):sS(Wt(r),Yo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&d_(r),i})}function aS(r,e,t,i){return Wt(r).onIdTokenChanged(e,t,i)}function lS(r,e,t){return Wt(r).beforeAuthStateChanged(e,t)}function uS(r,e,t,i){return Wt(r).onAuthStateChanged(e,t,i)}function f_(r){return Wt(r).signOut()}const hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=1e3,dS=10;class m_ extends p_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=i_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);kI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,dS):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},cS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}m_.type="LOCAL";const hS=m_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends p_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}g_.type="SESSION";const y_=g_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new kc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(d).map(async v=>v(t.origin,l)),y=await fS(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((p,y)=>{const v=Df("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(x){const S=x;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(S.data.response);break;default:clearTimeout(E),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function mS(r){Sr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function gS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function vS(){return v_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="firebaseLocalStorageDb",_S=1,fc="firebaseLocalStorage",w_="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nc(r,e){return r.transaction([fc],e?"readwrite":"readonly").objectStore(fc)}function wS(){const r=indexedDB.deleteDatabase(__);return new wl(r).toPromise()}function Xh(){const r=indexedDB.open(__,_S);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(fc,{keyPath:w_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(fc)?e(i):(i.close(),await wS(),e(await Xh()))})})}async function oy(r,e,t){const i=Nc(r,!0).put({[w_]:e,value:t});return new wl(i).toPromise()}async function ES(r,e){const t=Nc(r,!1).get(e),i=await new wl(t).toPromise();return i===void 0?null:i.value}function ay(r,e){const t=Nc(r,!0).delete(e);return new wl(t).toPromise()}const TS=800,xS=3;class E_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>xS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kc._getInstance(vS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await gS(),!this.activeServiceWorker)return;this.sender=new pS(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xh();return await oy(e,hc,"1"),await ay(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>oy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>ES(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ay(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Nc(o,!1).getAll();return new wl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}E_.type="LOCAL";const IS=E_;new yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(r,e){return e?Qr(e):(Re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends Nf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function SS(r){return c_(r.auth,new Vf(r),r.bypassAuthState)}function CS(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),iS(t,new Vf(r),r.bypassAuthState)}async function PS(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),rS(t,new Vf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SS;case"linkViaPopup":case"linkViaRedirect":return PS;case"reauthViaPopup":case"reauthViaRedirect":return CS;default:$n(this.auth,"internal-error")}}resolve(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new yl(2e3,1e4);async function I_(r,e,t){if(Rn(r.app))return Promise.reject(lr(r,"operation-not-supported-in-this-environment"));const i=Ji(r);cI(r,e,jf);const o=T_(i,t);return new Ns(i,"signInViaPopup",e,o).executeNotNull()}class Ns extends x_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Ns.currentPopupAction&&Ns.currentPopupAction.cancel(),Ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Zr(this.filter.length===1,"Popup operations only handle one event");const e=Df();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RS.get())};e()}}Ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="pendingRedirect",Ju=new Map;class kS extends x_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const i=await NS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NS(r,e){const t=DS(e),i=jS(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function bS(r,e){Ju.set(r._key(),e)}function jS(r){return Qr(r._redirectPersistence)}function DS(r){return Yu(AS,r.config.apiKey,r.name)}async function VS(r,e,t=!1){if(Rn(r.app))return Promise.reject(Yr(r));const i=Ji(r),o=T_(i,e),d=await new kS(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=600*1e3;class LS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!S_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OS&&this.cachedEventUids.clear(),this.cachedEventUids.has(ly(e))}saveEventToCache(e){this.cachedEventUids.add(ly(e)),this.lastProcessedEventTime=Date.now()}}function ly(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function S_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(r,e={}){return Yi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zS=/^https?/;async function BS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await FS(r);for(const t of e)try{if($S(t))return}catch{}$n(r,"unauthorized-domain")}function $S(r){const e=Qh(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!zS.test(t))return!1;if(US.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new yl(3e4,6e4);function uy(){const r=Sr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function HS(r){return new Promise((e,t)=>{var i,o,l;function d(){uy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uy(),t(lr(r,"network-request-failed"))},timeout:WS.get()})}if(!((o=(i=Sr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Sr().gapi)===null||l===void 0)&&l.load)d();else{const p=FI("iframefcb");return Sr()[p]=()=>{gapi.load?d():t(lr(r,"network-request-failed"))},o_(`${MI()}?onload=${p}`).catch(y=>t(y))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function qS(r){return Xu=Xu||HS(r),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new yl(5e3,15e3),KS="__/auth/iframe",QS="emulator/auth/iframe",YS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XS(r){const e=r.config;Re(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Rf(e,QS):`https://${r.config.authDomain}/${KS}`,i={apiKey:e.apiKey,appName:r.name,v:Qo},o=JS.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${gl(i).slice(1)}`}async function ZS(r){const e=await qS(r),t=Sr().gapi;return Re(t,r,"internal-error"),e.open({where:document.body,url:XS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YS,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=lr(r,"network-request-failed"),p=Sr().setTimeout(()=>{l(d)},GS.get());function y(){Sr().clearTimeout(p),o(i)}i.ping(y).then(y,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t1=500,n1=600,r1="_blank",i1="http://localhost";class cy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s1(r,e,t,i=t1,o=n1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const y=Object.assign(Object.assign({},e1),{width:i.toString(),height:o.toString(),top:l,left:d}),v=Zt().toLowerCase();t&&(p=Zv(v)?r1:t),Jv(v)&&(e=e||i1,y.scrollbars="yes");const E=Object.entries(y).reduce((S,[M,W])=>`${S}${M}=${W},`,"");if(AI(v)&&p!=="_self")return o1(e||"",p),new cy(null);const x=window.open(e||"",p,E);Re(x,r,"popup-blocked");try{x.focus()}catch{}return new cy(x)}function o1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="__/auth/handler",l1="emulator/auth/handler",u1=encodeURIComponent("fac");async function dy(r,e,t,i,o,l){Re(r.config.authDomain,r,"auth-domain-config-required"),Re(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Qo,eventId:o};if(e instanceof jf){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",KT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,x]of Object.entries({}))d[E]=x}if(e instanceof _l){const E=e.getScopes().filter(x=>x!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const y=await r._getAppCheckToken(),v=y?`#${u1}=${encodeURIComponent(y)}`:"";return`${c1(r)}?${gl(p).slice(1)}${v}`}function c1({config:r}){return r.emulator?Rf(r,l1):`https://${r.authDomain}/${a1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="webStorageSupport";class d1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y_,this._completeRedirectFn=VS,this._overrideRedirectResult=bS}async _openPopup(e,t,i,o){var l;Zr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await dy(e,t,i,Qh(),o);return s1(e,d,Df())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await dy(e,t,i,Qh(),o);return mS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Zr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await ZS(e),i=new LS(e);return t.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jh,{type:jh},o=>{var l;const d=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[jh];d!==void 0&&t(!!d),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return i_()||Xv()||kf()}}const h1=d1;var hy="@firebase/auth",fy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m1(r){Uo(new Vs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;Re(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s_(r)},v=new VI(i,o,l,y);return HI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Uo(new Vs("auth-internal",e=>{const t=Ji(e.getProvider("auth").getImmediate());return(i=>new f1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(hy,fy,p1(r)),Mi(hy,fy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=300,y1=Vv("authIdTokenMaxAge")||g1;let py=null;const v1=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>y1)return;const o=t==null?void 0:t.token;py!==o&&(py=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function _1(r=zv()){const e=If(r,"auth");if(e.isInitialized())return e.getImmediate();const t=WI(r,{popupRedirectResolver:h1,persistence:[IS,hS,y_]}),i=Vv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=v1(l.toString());lS(t,d,()=>d(t.currentUser)),aS(t,p=>d(p))}}const o=jv("auth");return o&&qI(t,`http://${o}`),t}function w1(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}OI({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=lr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",w1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m1("Browser");var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fi,C_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function R(){}R.prototype=I.prototype,k.D=I.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(A,L,N){for(var P=Array(arguments.length-2),et=2;et<arguments.length;et++)P[et-2]=arguments[et];return I.prototype[L].apply(A,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,R){R||(R=0);var A=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)A[L]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(L=0;16>L;++L)A[L]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=k.g[0],R=k.g[1],L=k.g[2];var N=k.g[3],P=I+(N^R&(L^N))+A[0]+3614090360&4294967295;I=R+(P<<7&4294967295|P>>>25),P=N+(L^I&(R^L))+A[1]+3905402710&4294967295,N=I+(P<<12&4294967295|P>>>20),P=L+(R^N&(I^R))+A[2]+606105819&4294967295,L=N+(P<<17&4294967295|P>>>15),P=R+(I^L&(N^I))+A[3]+3250441966&4294967295,R=L+(P<<22&4294967295|P>>>10),P=I+(N^R&(L^N))+A[4]+4118548399&4294967295,I=R+(P<<7&4294967295|P>>>25),P=N+(L^I&(R^L))+A[5]+1200080426&4294967295,N=I+(P<<12&4294967295|P>>>20),P=L+(R^N&(I^R))+A[6]+2821735955&4294967295,L=N+(P<<17&4294967295|P>>>15),P=R+(I^L&(N^I))+A[7]+4249261313&4294967295,R=L+(P<<22&4294967295|P>>>10),P=I+(N^R&(L^N))+A[8]+1770035416&4294967295,I=R+(P<<7&4294967295|P>>>25),P=N+(L^I&(R^L))+A[9]+2336552879&4294967295,N=I+(P<<12&4294967295|P>>>20),P=L+(R^N&(I^R))+A[10]+4294925233&4294967295,L=N+(P<<17&4294967295|P>>>15),P=R+(I^L&(N^I))+A[11]+2304563134&4294967295,R=L+(P<<22&4294967295|P>>>10),P=I+(N^R&(L^N))+A[12]+1804603682&4294967295,I=R+(P<<7&4294967295|P>>>25),P=N+(L^I&(R^L))+A[13]+4254626195&4294967295,N=I+(P<<12&4294967295|P>>>20),P=L+(R^N&(I^R))+A[14]+2792965006&4294967295,L=N+(P<<17&4294967295|P>>>15),P=R+(I^L&(N^I))+A[15]+1236535329&4294967295,R=L+(P<<22&4294967295|P>>>10),P=I+(L^N&(R^L))+A[1]+4129170786&4294967295,I=R+(P<<5&4294967295|P>>>27),P=N+(R^L&(I^R))+A[6]+3225465664&4294967295,N=I+(P<<9&4294967295|P>>>23),P=L+(I^R&(N^I))+A[11]+643717713&4294967295,L=N+(P<<14&4294967295|P>>>18),P=R+(N^I&(L^N))+A[0]+3921069994&4294967295,R=L+(P<<20&4294967295|P>>>12),P=I+(L^N&(R^L))+A[5]+3593408605&4294967295,I=R+(P<<5&4294967295|P>>>27),P=N+(R^L&(I^R))+A[10]+38016083&4294967295,N=I+(P<<9&4294967295|P>>>23),P=L+(I^R&(N^I))+A[15]+3634488961&4294967295,L=N+(P<<14&4294967295|P>>>18),P=R+(N^I&(L^N))+A[4]+3889429448&4294967295,R=L+(P<<20&4294967295|P>>>12),P=I+(L^N&(R^L))+A[9]+568446438&4294967295,I=R+(P<<5&4294967295|P>>>27),P=N+(R^L&(I^R))+A[14]+3275163606&4294967295,N=I+(P<<9&4294967295|P>>>23),P=L+(I^R&(N^I))+A[3]+4107603335&4294967295,L=N+(P<<14&4294967295|P>>>18),P=R+(N^I&(L^N))+A[8]+1163531501&4294967295,R=L+(P<<20&4294967295|P>>>12),P=I+(L^N&(R^L))+A[13]+2850285829&4294967295,I=R+(P<<5&4294967295|P>>>27),P=N+(R^L&(I^R))+A[2]+4243563512&4294967295,N=I+(P<<9&4294967295|P>>>23),P=L+(I^R&(N^I))+A[7]+1735328473&4294967295,L=N+(P<<14&4294967295|P>>>18),P=R+(N^I&(L^N))+A[12]+2368359562&4294967295,R=L+(P<<20&4294967295|P>>>12),P=I+(R^L^N)+A[5]+4294588738&4294967295,I=R+(P<<4&4294967295|P>>>28),P=N+(I^R^L)+A[8]+2272392833&4294967295,N=I+(P<<11&4294967295|P>>>21),P=L+(N^I^R)+A[11]+1839030562&4294967295,L=N+(P<<16&4294967295|P>>>16),P=R+(L^N^I)+A[14]+4259657740&4294967295,R=L+(P<<23&4294967295|P>>>9),P=I+(R^L^N)+A[1]+2763975236&4294967295,I=R+(P<<4&4294967295|P>>>28),P=N+(I^R^L)+A[4]+1272893353&4294967295,N=I+(P<<11&4294967295|P>>>21),P=L+(N^I^R)+A[7]+4139469664&4294967295,L=N+(P<<16&4294967295|P>>>16),P=R+(L^N^I)+A[10]+3200236656&4294967295,R=L+(P<<23&4294967295|P>>>9),P=I+(R^L^N)+A[13]+681279174&4294967295,I=R+(P<<4&4294967295|P>>>28),P=N+(I^R^L)+A[0]+3936430074&4294967295,N=I+(P<<11&4294967295|P>>>21),P=L+(N^I^R)+A[3]+3572445317&4294967295,L=N+(P<<16&4294967295|P>>>16),P=R+(L^N^I)+A[6]+76029189&4294967295,R=L+(P<<23&4294967295|P>>>9),P=I+(R^L^N)+A[9]+3654602809&4294967295,I=R+(P<<4&4294967295|P>>>28),P=N+(I^R^L)+A[12]+3873151461&4294967295,N=I+(P<<11&4294967295|P>>>21),P=L+(N^I^R)+A[15]+530742520&4294967295,L=N+(P<<16&4294967295|P>>>16),P=R+(L^N^I)+A[2]+3299628645&4294967295,R=L+(P<<23&4294967295|P>>>9),P=I+(L^(R|~N))+A[0]+4096336452&4294967295,I=R+(P<<6&4294967295|P>>>26),P=N+(R^(I|~L))+A[7]+1126891415&4294967295,N=I+(P<<10&4294967295|P>>>22),P=L+(I^(N|~R))+A[14]+2878612391&4294967295,L=N+(P<<15&4294967295|P>>>17),P=R+(N^(L|~I))+A[5]+4237533241&4294967295,R=L+(P<<21&4294967295|P>>>11),P=I+(L^(R|~N))+A[12]+1700485571&4294967295,I=R+(P<<6&4294967295|P>>>26),P=N+(R^(I|~L))+A[3]+2399980690&4294967295,N=I+(P<<10&4294967295|P>>>22),P=L+(I^(N|~R))+A[10]+4293915773&4294967295,L=N+(P<<15&4294967295|P>>>17),P=R+(N^(L|~I))+A[1]+2240044497&4294967295,R=L+(P<<21&4294967295|P>>>11),P=I+(L^(R|~N))+A[8]+1873313359&4294967295,I=R+(P<<6&4294967295|P>>>26),P=N+(R^(I|~L))+A[15]+4264355552&4294967295,N=I+(P<<10&4294967295|P>>>22),P=L+(I^(N|~R))+A[6]+2734768916&4294967295,L=N+(P<<15&4294967295|P>>>17),P=R+(N^(L|~I))+A[13]+1309151649&4294967295,R=L+(P<<21&4294967295|P>>>11),P=I+(L^(R|~N))+A[4]+4149444226&4294967295,I=R+(P<<6&4294967295|P>>>26),P=N+(R^(I|~L))+A[11]+3174756917&4294967295,N=I+(P<<10&4294967295|P>>>22),P=L+(I^(N|~R))+A[2]+718787259&4294967295,L=N+(P<<15&4294967295|P>>>17),P=R+(N^(L|~I))+A[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+L&4294967295,k.g[3]=k.g[3]+N&4294967295}i.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var R=I-this.blockSize,A=this.B,L=this.h,N=0;N<I;){if(L==0)for(;N<=R;)o(this,k,N),N+=this.blockSize;if(typeof k=="string"){for(;N<I;)if(A[L++]=k.charCodeAt(N++),L==this.blockSize){o(this,A),L=0;break}}else for(;N<I;)if(A[L++]=k[N++],L==this.blockSize){o(this,A),L=0;break}}this.h=L,this.o+=I},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var R=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=R&255,R/=256;for(this.u(k),k=Array(16),I=R=0;4>I;++I)for(var A=0;32>A;A+=8)k[R++]=this.g[I]>>>A&255;return k};function l(k,I){var R=p;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=I(k)}function d(k,I){this.h=I;for(var R=[],A=!0,L=k.length-1;0<=L;L--){var N=k[L]|0;A&&N==I||(R[L]=N,A=!1)}this.g=R}var p={};function y(k){return-128<=k&&128>k?l(k,function(I){return new d([I|0],0>I?-1:0)}):new d([k|0],0>k?-1:0)}function v(k){if(isNaN(k)||!isFinite(k))return x;if(0>k)return B(v(-k));for(var I=[],R=1,A=0;k>=R;A++)I[A]=k/R|0,R*=4294967296;return new d(I,0)}function E(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return B(E(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(I,8)),A=x,L=0;L<k.length;L+=8){var N=Math.min(8,k.length-L),P=parseInt(k.substring(L,L+N),I);8>N?(N=v(Math.pow(I,N)),A=A.j(N).add(v(P))):(A=A.j(R),A=A.add(v(P)))}return A}var x=y(0),S=y(1),M=y(16777216);r=d.prototype,r.m=function(){if(K(this))return-B(this).m();for(var k=0,I=1,R=0;R<this.g.length;R++){var A=this.i(R);k+=(0<=A?A:4294967296+A)*I,I*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(W(this))return"0";if(K(this))return"-"+B(this).toString(k);for(var I=v(Math.pow(k,6)),R=this,A="";;){var L=ce(R,I).g;R=G(R,L.j(I));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=L,W(R))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function W(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function K(k){return k.h==-1}r.l=function(k){return k=G(this,k),K(k)?-1:W(k)?0:1};function B(k){for(var I=k.g.length,R=[],A=0;A<I;A++)R[A]=~k.g[A];return new d(R,~k.h).add(S)}r.abs=function(){return K(this)?B(this):this},r.add=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],A=0,L=0;L<=I;L++){var N=A+(this.i(L)&65535)+(k.i(L)&65535),P=(N>>>16)+(this.i(L)>>>16)+(k.i(L)>>>16);A=P>>>16,N&=65535,P&=65535,R[L]=P<<16|N}return new d(R,R[R.length-1]&-2147483648?-1:0)};function G(k,I){return k.add(B(I))}r.j=function(k){if(W(this)||W(k))return x;if(K(this))return K(k)?B(this).j(B(k)):B(B(this).j(k));if(K(k))return B(this.j(B(k)));if(0>this.l(M)&&0>k.l(M))return v(this.m()*k.m());for(var I=this.g.length+k.g.length,R=[],A=0;A<2*I;A++)R[A]=0;for(A=0;A<this.g.length;A++)for(var L=0;L<k.g.length;L++){var N=this.i(A)>>>16,P=this.i(A)&65535,et=k.i(L)>>>16,rt=k.i(L)&65535;R[2*A+2*L]+=P*rt,Z(R,2*A+2*L),R[2*A+2*L+1]+=N*rt,Z(R,2*A+2*L+1),R[2*A+2*L+1]+=P*et,Z(R,2*A+2*L+1),R[2*A+2*L+2]+=N*et,Z(R,2*A+2*L+2)}for(A=0;A<I;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=I;A<2*I;A++)R[A]=0;return new d(R,0)};function Z(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function ie(k,I){this.g=k,this.h=I}function ce(k,I){if(W(I))throw Error("division by zero");if(W(k))return new ie(x,x);if(K(k))return I=ce(B(k),I),new ie(B(I.g),B(I.h));if(K(I))return I=ce(k,B(I)),new ie(B(I.g),I.h);if(30<k.g.length){if(K(k)||K(I))throw Error("slowDivide_ only works with positive integers.");for(var R=S,A=I;0>=A.l(k);)R=Ie(R),A=Ie(A);var L=de(R,1),N=de(A,1);for(A=de(A,2),R=de(R,2);!W(A);){var P=N.add(A);0>=P.l(k)&&(L=L.add(R),N=P),A=de(A,1),R=de(R,1)}return I=G(k,L.j(I)),new ie(L,I)}for(L=x;0<=k.l(I);){for(R=Math.max(1,Math.floor(k.m()/I.m())),A=Math.ceil(Math.log(R)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=v(R),P=N.j(I);K(P)||0<P.l(k);)R-=A,N=v(R),P=N.j(I);W(N)&&(N=S),L=L.add(N),k=G(k,P)}return new ie(L,k)}r.A=function(k){return ce(this,k).h},r.and=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],A=0;A<I;A++)R[A]=this.i(A)&k.i(A);return new d(R,this.h&k.h)},r.or=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],A=0;A<I;A++)R[A]=this.i(A)|k.i(A);return new d(R,this.h|k.h)},r.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],A=0;A<I;A++)R[A]=this.i(A)^k.i(A);return new d(R,this.h^k.h)};function Ie(k){for(var I=k.g.length+1,R=[],A=0;A<I;A++)R[A]=k.i(A)<<1|k.i(A-1)>>>31;return new d(R,k.h)}function de(k,I){var R=I>>5;I%=32;for(var A=k.g.length-R,L=[],N=0;N<A;N++)L[N]=0<I?k.i(N+R)>>>I|k.i(N+R+1)<<32-I:k.i(N+R);return new d(L,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,C_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,Fi=d}).apply(typeof my<"u"?my:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var P_,Ha,R_,Zu,Zh,A_,k_,N_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in _))break e;_=_[U]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,T=!1,U={next:function(){if(!T&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function x(u,m,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,T),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function S(u,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:x,S.apply(null,arguments)}function M(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function W(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,U,q){for(var ae=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)ae[nt-2]=arguments[nt];return m.prototype[U].apply(T,ae)}}function K(u){const m=u.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function B(u,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(y(T)){const U=u.length||0,q=T.length||0;u.length=U+q;for(let ae=0;ae<q;ae++)u[U+ae]=T[ae]}else u.push(T)}}class G{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(u){return/^[\s\xa0]*$/.test(u)}function ie(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function ce(u){return ce[" "](u),u}ce[" "]=function(){};var Ie=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function de(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function k(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function I(u){const m={};for(const _ in u)m[_]=u[_];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,m){let _,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(_ in T)u[_]=T[_];for(let q=0;q<R.length;q++)_=R[q],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function L(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function N(u){p.setTimeout(()=>{throw u},0)}function P(){var u=ye;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class et{constructor(){this.h=this.g=null}add(m,_){const T=rt.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var rt=new G(()=>new yt,u=>u.reset());class yt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,le=!1,ye=new et,ue=()=>{const u=p.Promise.resolve(void 0);qe=()=>{u.then(F)}};var F=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(_){N(_)}var m=rt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}le=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ne=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function De(u,m){if(he.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Ie){e:{try{ce(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&De.aa.h.call(this)}}W(De,he);var Oe={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Be(u,m,_,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=U,this.key=++Fe,this.da=this.fa=!1}function Ge(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vn(u){this.src=u,this.g={},this.h=0}vn.prototype.add=function(u,m,_,T,U){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var ae=_n(u,m,T,U);return-1<ae?(m=u[ae],_||(m.fa=!1)):(m=new Be(m,this.src,q,!!T,U),m.fa=_,u.push(m)),m};function Je(u,m){var _=m.type;if(_ in u.g){var T=u.g[_],U=Array.prototype.indexOf.call(T,m,void 0),q;(q=0<=U)&&Array.prototype.splice.call(T,U,1),q&&(Ge(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function _n(u,m,_,T){for(var U=0;U<u.length;++U){var q=u[U];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==T)return U}return-1}var kn="closure_lm_"+(1e6*Math.random()|0),cr={};function en(u,m,_,T,U){if(Array.isArray(m)){for(var q=0;q<m.length;q++)en(u,m[q],_,T,U);return null}return _=Xe(_),u&&u[Te]?u.K(m,_,v(T)?!!T.capture:!1,U):Wn(u,m,_,!1,T,U)}function Wn(u,m,_,T,U,q){if(!m)throw Error("Invalid event type");var ae=v(U)?!!U.capture:!!U,nt=me(u);if(nt||(u[kn]=nt=new vn(u)),_=nt.add(m,_,T,ae,q),_.proxy)return _;if(T=b(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ne||(U=ae),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(D(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function b(){function u(_){return m.call(u.src,u.listener,_)}const m=Q;return u}function oe(u,m,_,T,U){if(Array.isArray(m))for(var q=0;q<m.length;q++)oe(u,m[q],_,T,U);else T=v(T)?!!T.capture:!!T,_=Xe(_),u&&u[Te]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=_n(q,_,T,U),-1<_&&(Ge(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=me(u))&&(m=u.g[m.toString()],u=-1,m&&(u=_n(m,_,T,U)),(_=-1<u?m[u]:null)&&V(_))}function V(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Te])Je(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(D(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=me(m))?(Je(_,u),_.h==0&&(_.src=null,m[kn]=null)):Ge(u)}}}function D(u){return u in cr?cr[u]:cr[u]="on"+u}function Q(u,m){if(u.da)u=!0;else{m=new De(m,this);var _=u.listener,T=u.ha||u.src;u.fa&&V(u),u=_.call(T,m)}return u}function me(u){return u=u[kn],u instanceof vn?u:null}var Ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xe(u){return typeof u=="function"?u:(u[Ve]||(u[Ve]=function(m){return u.handleEvent(m)}),u[Ve])}function Pe(){J.call(this),this.i=new vn(this),this.M=this,this.F=null}W(Pe,J),Pe.prototype[Te]=!0,Pe.prototype.removeEventListener=function(u,m,_,T){oe(this,u,m,_,T)};function Qe(u,m){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new he(m,u);else if(m instanceof he)m.target=m.target||u;else{var U=m;m=new he(T,u),A(m,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var ae=m.g=_[q];U=on(ae,T,!0,m)&&U}if(ae=m.g=u,U=on(ae,T,!0,m)&&U,U=on(ae,T,!1,m)&&U,_)for(q=0;q<_.length;q++)ae=m.g=_[q],U=on(ae,T,!1,m)&&U}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],T=0;T<_.length;T++)Ge(_[T]);delete u.g[m],u.h--}}this.F=null},Pe.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},Pe.prototype.L=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function on(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,q=0;q<m.length;++q){var ae=m[q];if(ae&&!ae.da&&ae.capture==_){var nt=ae.listener,Pt=ae.ha||ae.src;ae.fa&&Je(u.i,ae),U=nt.call(Pt,T)!==!1&&U}}return U&&!T.defaultPrevented}function Hn(u,m,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function Nn(u){u.g=Hn(()=>{u.g=null,u.i&&(u.i=!1,Nn(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class dr extends J{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Nn(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(u){J.call(this),this.h=u,this.g={}}W(br,J);var es=[];function ts(u){de(u.g,function(m,_){this.g.hasOwnProperty(_)&&V(m)},u),u.g={}}br.prototype.N=function(){br.aa.N.call(this),ts(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ns=p.JSON.stringify,rs=p.JSON.parse,is=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function jr(){}jr.prototype.h=null;function ii(u){return u.h||(u.h=u.i())}function si(){}var an={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tt(){he.call(this,"d")}W(tt,he);function wn(){he.call(this,"c")}W(wn,he);var hr={},na=null;function ss(){return na=na||new Pe}hr.La="serverreachability";function ra(u){he.call(this,hr.La,u)}W(ra,he);function Dr(u){const m=ss();Qe(m,new ra(m))}hr.STAT_EVENT="statevent";function ia(u,m){he.call(this,hr.STAT_EVENT,u),this.stat=m}W(ia,he);function vt(u){const m=ss();Qe(m,new ia(m,u))}hr.Ma="timingevent";function Hs(u,m){he.call(this,hr.Ma,u),this.size=m}W(Hs,he);function qn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function os(){this.g=!0}os.prototype.xa=function(){this.g=!1};function as(u,m,_,T,U,q){u.info(function(){if(u.g)if(q)for(var ae="",nt=q.split("&"),Pt=0;Pt<nt.length;Pt++){var We=nt[Pt].split("=");if(1<We.length){var jt=We[0];We=We[1];var Tt=jt.split("_");ae=2<=Tt.length&&Tt[1]=="type"?ae+(jt+"="+We+"&"):ae+(jt+"=redacted&")}}else ae=null;else ae=q;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+_+`
`+ae})}function qs(u,m,_,T,U,q,ae){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+_+`
`+q+" "+ae})}function Gn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Qc(u,_)+(T?" "+T:"")})}function sa(u,m){u.info(function(){return"TIMEOUT: "+m})}os.prototype.info=function(){};function Qc(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var U=T[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ae=1;ae<U.length;ae++)U[ae]=""}}}}return ns(_)}catch{return m}}var Gs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function ls(){}W(ls,jr),ls.prototype.g=function(){return new XMLHttpRequest},ls.prototype.i=function(){return{}},Kn=new ls;function Qn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.R=T||1,this.U=new br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var oa={},Ks={};function Qs(u,m,_){u.L=1,u.v=ci(Tn(m)),u.m=_,u.P=!0,aa(u,null)}function aa(u,m){u.F=Date.now(),st(u),u.A=Tn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),hi(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Rl,u.g=ql(u.j,_?m:null,!u.m),0<u.O&&(u.M=new dr(S(u.Y,u,u.g),u.O)),m=u.U,_=u.g,T=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(es[0]=U.toString()),U=es);for(var q=0;q<U.length;q++){var ae=en(_,U[q],T||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Dr(),as(u.i,u.u,u.A,u.l,u.R,u.m)}Qn.prototype.ca=function(u){u=u.target;const m=this.M;m&&un(u)==3?m.j():this.Y(u)},Qn.prototype.Y=function(u){try{if(u==this.g)e:{const Tt=un(this.g);var m=this.g.Ba();const Dn=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||fa(this.g)))){this.J||Tt!=4||m==7||(m==8||0>=Dn?Dr(3):Dr(2)),us(this);var _=this.g.Z();this.X=_;t:if(Al(this)){var T=fa(this.g);u="";var U=T.length,q=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),oi(this);var ae="";break t}this.h.i=new p.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(q&&m==U-1)});T.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,qs(this.i,this.u,this.A,this.l,this.R,Tt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,Pt=this.g;if((nt=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(nt)){var We=nt;break t}}We=null}if(_=We)Gn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,la(this,_);else{this.o=!1,this.s=3,vt(12),bn(this),oi(this);break e}}if(this.P){_=!0;let In;for(;!this.J&&this.C<ae.length;)if(In=Yc(this,ae),In==Ks){Tt==4&&(this.s=4,vt(14),_=!1),Gn(this.i,this.l,null,"[Incomplete Response]");break}else if(In==oa){this.s=4,vt(15),Gn(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else Gn(this.i,this.l,In,null),la(this,In);if(Al(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||ae.length!=0||this.h.h||(this.s=1,vt(16),_=!1),this.o=this.o&&_,!_)Gn(this.i,this.l,ae,"[Invalid Chunked Response]"),bn(this),oi(this);else if(0<ae.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),ma(jt),jt.M=!0,vt(11))}}else Gn(this.i,this.l,ae,null),la(this,ae);Tt==4&&bn(this),this.o&&!this.J&&(Tt==4?oo(this.j,this):(this.o=!1,st(this)))}else to(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),bn(this),oi(this)}}}catch{}finally{}};function Al(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Yc(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?Ks:(_=Number(m.substring(_,T)),isNaN(_)?oa:(T+=1,T+_>m.length?Ks:(m=m.slice(T,T+_),u.C=T+_,m)))}Qn.prototype.cancel=function(){this.J=!0,bn(this)};function st(u){u.S=Date.now()+u.I,kl(u,u.I)}function kl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qn(S(u.ba,u),m)}function us(u){u.B&&(p.clearTimeout(u.B),u.B=null)}Qn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(sa(this.i,this.A),this.L!=2&&(Dr(),vt(17)),bn(this),this.s=2,oi(this)):kl(this,this.S-u)};function oi(u){u.j.G==0||u.J||oo(u.j,u)}function bn(u){us(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ts(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function la(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||tn(_.h,u))){if(!u.K&&tn(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)so(_),er(_);else break e;io(_),vt(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=qn(S(_.Za,_),6e3));if(1>=bl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Fr(_,11)}else if((u.K||_.g==u)&&so(_),!Z(m))for(U=_.Da.g.parse(m),m=0;m<U.length;m++){let We=U[m];if(_.T=We[0],We=We[1],_.G==2)if(We[0]=="c"){_.K=We[1],_.ia=We[2];const jt=We[3];jt!=null&&(_.la=jt,_.j.info("VER="+_.la));const Tt=We[4];Tt!=null&&(_.Aa=Tt,_.j.info("SVER="+_.Aa));const Dn=We[5];Dn!=null&&typeof Dn=="number"&&0<Dn&&(T=1.5*Dn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const In=u.g;if(In){const gs=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var q=T.h;q.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ua(q,q.h),q.h=null))}if(T.D){const lo=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;lo&&(T.ya=lo,it(T.I,T.D,lo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var ae=u;if(T.qa=Hl(T,T.J?T.ia:null,T.W),ae.K){jl(T.h,ae);var nt=ae,Pt=T.L;Pt&&(nt.I=Pt),nt.B&&(us(nt),st(nt)),T.g=ae}else ms(T);0<_.i.length&&gr(_)}else We[0]!="stop"&&We[0]!="close"||Fr(_,7);else _.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Fr(_,7):Ft(_):We[0]!="noop"&&_.l&&_.l.ta(We),_.v=0)}}Dr(4)}catch{}}var Nl=class{constructor(u,m){this.g=u,this.map=m}};function cs(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function En(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function bl(u){return u.h?1:u.g?u.g.size:0}function tn(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ua(u,m){u.g?u.g.add(m):u.h=m}function jl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}cs.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Dl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return K(u.i)}function Ys(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],_=u.length,T=0;T<_;T++)m.push(u[T]);return m}m=[],_=0;for(T in u)m[_++]=u[T];return m}function Js(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const T in u)m[_++]=T;return m}}}function ai(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Js(u),T=Ys(u),U=T.length,q=0;q<U;q++)m.call(void 0,T[q],_&&_[q],u)}var ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jc(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),U=null;if(0<=T){var q=u[_].substring(0,T);U=u[_].substring(T+1)}else q=u[_];m(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Vr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Vr){this.h=u.h,hs(this,u.j),this.o=u.o,this.g=u.g,li(this,u.s),this.l=u.l;var m=u.i,_=new fr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),ui(this,_),this.m=u.m}else u&&(m=String(u).match(ds))?(this.h=!1,hs(this,m[1]||"",!0),this.o=$e(m[2]||""),this.g=$e(m[3]||"",!0),li(this,m[4]),this.l=$e(m[5]||"",!0),ui(this,m[6]||"",!0),this.m=$e(m[7]||"")):(this.h=!1,this.i=new fr(null,this.h))}Vr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(di(m,Xs,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(di(m,Xs,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(di(_,_.charAt(0)=="/"?Ll:Ol,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",di(_,ca)),u.join("")};function Tn(u){return new Vr(u)}function hs(u,m,_){u.j=_?$e(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function li(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function ui(u,m,_){m instanceof fr?(u.i=m,pr(u.i,u.h)):(_||(m=di(m,Ml)),u.i=new fr(m,u.h))}function it(u,m,_){u.i.set(m,_)}function ci(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function $e(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function di(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Vl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Vl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xs=/[#\/\?@]/g,Ol=/[#\?:]/g,Ll=/[#\?]/g,Ml=/[#\?@]/g,ca=/#/g;function fr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Mt(u){u.g||(u.g=new Map,u.h=0,u.i&&Jc(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=fr.prototype,r.add=function(u,m){Mt(this),this.i=null,u=jn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Yn(u,m){Mt(u),m=jn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Jn(u,m){return Mt(u),m=jn(u,m),u.g.has(m)}r.forEach=function(u,m){Mt(this),this.g.forEach(function(_,T){_.forEach(function(U){u.call(m,U,T,this)},this)},this)},r.na=function(){Mt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const U=u[T];for(let q=0;q<U.length;q++)_.push(m[T])}return _},r.V=function(u){Mt(this);let m=[];if(typeof u=="string")Jn(this,u)&&(m=m.concat(this.g.get(jn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Mt(this),this.i=null,u=jn(this,u),Jn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function hi(u,m,_){Yn(u,m),0<_.length&&(u.i=null,u.g.set(jn(u,m),K(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const q=encodeURIComponent(String(T)),ae=this.V(T);for(T=0;T<ae.length;T++){var U=q;ae[T]!==""&&(U+="="+encodeURIComponent(String(ae[T]))),u.push(U)}}return this.i=u.join("&")};function jn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function pr(u,m){m&&!u.j&&(Mt(u),u.i=null,u.g.forEach(function(_,T){var U=T.toLowerCase();T!=U&&(Yn(this,T),hi(this,U,_))},u)),u.j=m}function Xc(u,m){const _=new os;if(p.Image){const T=new Image;T.onload=M(ln,_,"TestLoadImage: loaded",!0,m,T),T.onerror=M(ln,_,"TestLoadImage: error",!1,m,T),T.onabort=M(ln,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=M(ln,_,"TestLoadImage: timeout",!1,m,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Fl(u,m){const _=new os,T=new AbortController,U=setTimeout(()=>{T.abort(),ln(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(U),q.ok?ln(_,"TestPingServer: ok",!0,m):ln(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),ln(_,"TestPingServer: error",!1,m)})}function ln(u,m,_,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(_)}catch{}}function Zc(){this.g=new is}function Ul(u,m,_){const T=_||"";try{ai(u,function(U,q){let ae=U;v(U)&&(ae=ns(U)),m.push(T+q+"="+encodeURIComponent(ae))})}catch(U){throw m.push(T+"type="+encodeURIComponent("_badmap")),U}}function Or(u){this.l=u.Ub||null,this.j=u.eb||!1}W(Or,jr),Or.prototype.g=function(){return new fs(this.l,this.j)},Or.prototype.i=(function(u){return function(){return u}})({});function fs(u,m){Pe.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(fs,Pe),r=fs.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Zn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function zl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Xn(this):Zn(this),this.readyState==3&&zl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Xn(this))},r.Qa=function(u){this.g&&(this.response=u,Xn(this))},r.ga=function(){this.g&&Xn(this)};function Xn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Zn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Lr(u){let m="";return de(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function fi(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Lr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):it(u,m,_))}function dt(u){Pe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(dt,Pe);var ed=/^https?$/i,da=["POST","PUT"];r=dt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?ii(this.o):ii(Kn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){ps(this,q);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)_.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())_.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(da,m,void 0))||T||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ae]of _)this.g.setRequestHeader(q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eo(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){ps(this,q)}};function ps(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Zs(u),xn(u)}function Zs(u){u.A||(u.A=!0,Qe(u,"complete"),Qe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Qe(this,"complete"),Qe(this,"abort"),xn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xn(this,!0)),dt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ha(this):this.bb())},r.bb=function(){ha(this)};function ha(u){if(u.h&&typeof d<"u"&&(!u.v[1]||un(u)!=4||u.Z()!=2)){if(u.u&&un(u)==4)Hn(u.Ea,0,u);else if(Qe(u,"readystatechange"),un(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=ae===0){var U=String(u.D).match(ds)[1]||null;!U&&p.self&&p.self.location&&(U=p.self.location.protocol.slice(0,-1)),T=!ed.test(U?U.toLowerCase():"")}_=T}if(_)Qe(u,"complete"),Qe(u,"success");else{u.m=6;try{var q=2<un(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Zs(u)}}finally{xn(u)}}}}function xn(u,m){if(u.g){eo(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Qe(u,"ready");try{_.onreadystatechange=T}catch{}}}function eo(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function un(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),rs(m)}};function fa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function to(u){const m={};u=(u.g&&2<=un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(Z(u[T]))continue;var _=L(u[T]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[U]||[];m[U]=q,q.push(_)}k(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function pa(u){this.Aa=0,this.i=[],this.j=new os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mr("baseRetryDelayMs",5e3,u),this.cb=mr("retryDelaySeedMs",1e4,u),this.Wa=mr("forwardChannelMaxRetries",2,u),this.wa=mr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new cs(u&&u.concurrentRequestLimit),this.Da=new Zc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=pa.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,T){vt(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Hl(this,null,this.W),gr(this)};function Ft(u){if(no(u),u.G==3){var m=u.U++,_=Tn(u.I);if(it(_,"SID",u.K),it(_,"RID",m),it(_,"TYPE","terminate"),Mr(u,_),m=new Qn(u,u.j,m),m.L=2,m.v=ci(Tn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=ql(m.j,null),m.g.ea(m.v)),m.F=Date.now(),st(m)}Wl(u)}function er(u){u.g&&(ma(u),u.g.cancel(),u.g=null)}function no(u){er(u),u.u&&(p.clearTimeout(u.u),u.u=null),so(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function gr(u){if(!En(u.h)&&!u.s){u.s=!0;var m=u.Ga;qe||ue(),le||(qe(),le=!0),ye.add(m,u),u.B=0}}function td(u,m){return bl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qn(S(u.Ga,u,m),$l(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Qn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=I(q),A(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=pi(this,U,m),_=Tn(this.I),it(_,"RID",u),it(_,"CVER",22),this.D&&it(_,"X-HTTP-Session-Id",this.D),Mr(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(Lr(q)))+"&"+m:this.m&&fi(_,this.m,q)),ua(this.h,U),this.Ua&&it(_,"TYPE","init"),this.P?(it(_,"$req",m),it(_,"SID","null"),U.T=!0,Qs(U,_,null)):Qs(U,_,m),this.G=2}}else this.G==3&&(u?ro(this,u):this.i.length==0||En(this.h)||ro(this))};function ro(u,m){var _;m?_=m.l:_=u.U++;const T=Tn(u.I);it(T,"SID",u.K),it(T,"RID",_),it(T,"AID",u.T),Mr(u,T),u.m&&u.o&&fi(T,u.m,u.o),_=new Qn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=pi(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ua(u.h,_),Qs(_,T,m)}function Mr(u,m){u.H&&de(u.H,function(_,T){it(m,T,_)}),u.l&&ai({},function(_,T){it(m,T,_)})}function pi(u,m,_){_=Math.min(u.i.length,_);var T=u.l?S(u.l.Na,u.l,u):null;e:{var U=u.i;let q=-1;for(;;){const ae=["count="+_];q==-1?0<_?(q=U[0].g,ae.push("ofs="+q)):q=0:ae.push("ofs="+q);let nt=!0;for(let Pt=0;Pt<_;Pt++){let We=U[Pt].g;const jt=U[Pt].map;if(We-=q,0>We)q=Math.max(0,U[Pt].g-100),nt=!1;else try{Ul(jt,ae,"req"+We+"_")}catch{T&&T(jt)}}if(nt){T=ae.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,T}function ms(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;qe||ue(),le||(qe(),le=!0),ye.add(m,u),u.v=0}}function io(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qn(S(u.Fa,u),$l(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Bl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qn(S(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),er(this),Bl(this))};function ma(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Bl(u){u.g=new Qn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Tn(u.qa);it(m,"RID","rpc"),it(m,"SID",u.K),it(m,"AID",u.T),it(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(m,"TO",u.ja),it(m,"TYPE","xmlhttp"),Mr(u,m),u.m&&u.o&&fi(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ci(Tn(m)),_.m=null,_.P=!0,aa(_,u)}r.Za=function(){this.C!=null&&(this.C=null,er(this),io(this),vt(19))};function so(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function oo(u,m){var _=null;if(u.g==m){so(u),ma(u),u.g=null;var T=2}else if(tn(u.h,m))_=m.D,jl(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;T=ss(),Qe(T,new Hs(T,_)),gr(u)}else ms(u);else if(U=m.s,U==3||U==0&&0<m.X||!(T==1&&td(u,m)||T==2&&io(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),U){case 1:Fr(u,5);break;case 4:Fr(u,10);break;case 3:Fr(u,6);break;default:Fr(u,2)}}}function $l(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Fr(u,m){if(u.j.info("Error code "+m),m==2){var _=S(u.fb,u),T=u.Xa;const U=!T;T=new Vr(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||hs(T,"https"),ci(T),U?Xc(T.toString(),_):Fl(T.toString(),_)}else vt(2);u.G=0,u.l&&u.l.sa(m),Wl(u),no(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Wl(u){if(u.G=0,u.ka=[],u.l){const m=Dl(u.h);(m.length!=0||u.i.length!=0)&&(B(u.ka,m),B(u.ka,u.i),u.h.i.length=0,K(u.i),u.i.length=0),u.l.ra()}}function Hl(u,m,_){var T=_ instanceof Vr?Tn(_):new Vr(_);if(T.g!="")m&&(T.g=m+"."+T.g),li(T,T.s);else{var U=p.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var q=new Vr(null);T&&hs(q,T),m&&(q.g=m),U&&li(q,U),_&&(q.l=_),T=q}return _=u.D,m=u.ya,_&&m&&it(T,_,m),it(T,"VER",u.la),Mr(u,T),T}function ql(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new dt(new Or({eb:_})):new dt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ga(){}r=ga.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ao(){}ao.prototype.g=function(u,m){return new nn(u,m)};function nn(u,m){Pe.call(this),this.g=new pa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Z(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Z(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new yr(this)}W(nn,Pe),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ft(this.g)},nn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ns(u),u=_);m.i.push(new Nl(m.Ya++,u)),m.G==3&&gr(m)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ft(this.g),delete this.g,nn.aa.N.call(this)};function Gl(u){tt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}W(Gl,tt);function Kl(){wn.call(this),this.status=1}W(Kl,wn);function yr(u){this.g=u}W(yr,ga),yr.prototype.ua=function(){Qe(this.g,"a")},yr.prototype.ta=function(u){Qe(this.g,new Gl(u))},yr.prototype.sa=function(u){Qe(this.g,new Kl)},yr.prototype.ra=function(){Qe(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,N_=function(){return new ao},k_=function(){return ss()},A_=hr,Zh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gs.NO_ERROR=0,Gs.TIMEOUT=8,Gs.HTTP_ERROR=6,Zu=Gs,Pl.COMPLETE="complete",R_=Pl,si.EventType=an,an.OPEN="a",an.CLOSE="b",an.ERROR="c",an.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,Ha=si,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,P_=dt}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const gy="@firebase/firestore",yy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Tf("@firebase/firestore");function No(){return Ms.logLevel}function pe(r,...e){if(Ms.logLevel<=Ue.DEBUG){const t=e.map(Of);Ms.debug(`Firestore (${Jo}): ${r}`,...t)}}function ei(r,...e){if(Ms.logLevel<=Ue.ERROR){const t=e.map(Of);Ms.error(`Firestore (${Jo}): ${r}`,...t)}}function Bi(r,...e){if(Ms.logLevel<=Ue.WARN){const t=e.map(Of);Ms.warn(`Firestore (${Jo}): ${r}`,...t)}}function Of(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,b_(r,i,t)}function b_(r,e,t){let i=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ei(i),new Error(i)}function Ze(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||b_(e,o,i)}function je(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ri{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Jt.UNAUTHENTICATED)))}shutdown(){}}class T1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class x1{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Jr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Jr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string",31837,{l:i}),new j_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class I1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class S1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new I1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const i=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=P1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Le(r,e){return r<e?-1:r>e?1:0}function ef(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Le(i,o);{const l=D_(),d=R1(l.encode(_y(r,t)),l.encode(_y(e,t)));return d!==0?d:Le(i,o)}}t+=i>65535?2:1}return Le(r.length,e.length)}function _y(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function R1(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Le(r[t],e[t]);return Le(r.length,e.length)}function zo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="__name__";class Tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ae(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const i=Tr.isNumericId(e),o=Tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Tr.extractNumericId(e).compare(Tr.extractNumericId(t)):ef(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fi.fromString(e.substring(4,e.length-2))}}class ut extends Tr{construct(e,t,i){return new ut(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const A1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Tr{construct(e,t,i){return new $t(e,t,i)}static isValidIdentifier(e){return A1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wy}static keyField(){return new $t([wy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new we(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new we(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new we(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(i+=p,o++):(l(),o++)}if(l(),d)throw new we(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(ut.fromString(e))}static fromName(e){return new xe(ut.fromString(e).popFirst(5))}static empty(){return new xe(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(r,e,t){if(!t)throw new we(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function k1(r,e,t,i){if(e===!0&&i===!0)throw new we(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ey(r){if(!xe.isDocumentKey(r))throw new we(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ty(r){if(xe.isDocumentKey(r))throw new we(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function O_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Mf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function ti(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new we(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mf(r);throw new we(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r,e){const t={typeString:r};return e&&(t.value=e),t}function El(r,e){if(!O_(r))throw new we(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new we(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=-62135596800,Iy=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Iy);return new ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xy)throw new we(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iy}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(El(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:St("string",ct._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new ct(0,0))}static max(){return new be(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=-1;function N1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new ct(t+1,0):new ct(t,i));return new $i(o,xe.empty(),e)}function b1(r){return new $i(r.readTime,r.key,ll)}class $i{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new $i(be.min(),xe.empty(),ll)}static max(){return new $i(be.max(),xe.empty(),ll)}}function j1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==D1)throw r;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,i)=>{t(e)}))}static reject(e){return new X(((t,i)=>{i(e)}))}static waitFor(e){return new X(((t,i)=>{let o=0,l=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++l,d&&l===o&&t()}),(y=>i(y)))})),d=!0,l===o&&t()}))}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next((o=>o?X.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new X(((i,o)=>{const l=e.length,d=new Array(l);let p=0;for(let y=0;y<l;y++){const v=y;t(e[v]).next((E=>{d[v]=E,++p,p===l&&i(d)}),(E=>o(E)))}}))}static doWhile(e,t){return new X(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function O1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}bc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=-1;function jc(r){return r==null}function pc(r){return r===0&&1/r==-1/0}function L1(r){return typeof r=="number"&&Number.isInteger(r)&&!pc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="";function M1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Sy(e)),e=F1(r.get(t),e);return Sy(e)}function F1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case L_:t+="";break;default:t+=l}}return t}function Sy(r){return r+L_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Xi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function M_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wu(this.root,e,this.comparator,!0)}}class Wu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Bt.RED,this.left=o??Bt.EMPTY,this.right=l??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Bt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Bt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(e){return new Py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class Py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new An([])}unionWith(e){let t=new bt($t.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new An(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new F_("Invalid base64 string: "+l):l}})(e);return new Ht(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new Ht(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const U1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wi(r){if(Ze(!!r,39018),typeof r=="string"){let e=0;const t=U1.exec(r);if(Ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Et(r.seconds),nanos:Et(r.nanos)}}function Et(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Hi(r){return typeof r=="string"?Ht.fromBase64String(r):Ht.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="server_timestamp",z_="__type__",B_="__previous_value__",$_="__local_write_time__";function Uf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[z_])===null||t===void 0?void 0:t.stringValue)===U_}function Dc(r){const e=r.mapValue.fields[B_];return Uf(e)?Dc(e):e}function ul(r){const e=Wi(r.mapValue.fields[$_].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t,i,o,l,d,p,y,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=E}}const mc="(default)";class cl{constructor(e,t){this.projectId=e,this.database=t||mc}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database===mc}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="__type__",B1="__max__",Hu={mapValue:{}},H_="__vector__",gc="value";function qi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Uf(r)?4:W1(r)?9007199254740991:$1(r)?10:11:Ae(28295,{value:r})}function kr(r,e){if(r===e)return!0;const t=qi(r);if(t!==qi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ul(r).isEqual(ul(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Wi(o.timestampValue),p=Wi(l.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Hi(o.bytesValue).isEqual(Hi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return Et(o.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(o.geoPointValue.longitude)===Et(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Et(o.integerValue)===Et(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=Et(o.doubleValue),p=Et(l.doubleValue);return d===p?pc(d)===pc(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return zo(r.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Cy(d)!==Cy(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!kr(d[y],p[y])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function dl(r,e){return(r.values||[]).find((t=>kr(t,e)))!==void 0}function Bo(r,e){if(r===e)return 0;const t=qi(r),i=qi(e);if(t!==i)return Le(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const p=Et(l.integerValue||l.doubleValue),y=Et(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(r,e);case 3:return Ry(r.timestampValue,e.timestampValue);case 4:return Ry(ul(r),ul(e));case 5:return ef(r.stringValue,e.stringValue);case 6:return(function(l,d){const p=Hi(l),y=Hi(d);return p.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const p=l.split("/"),y=d.split("/");for(let v=0;v<p.length&&v<y.length;v++){const E=Le(p[v],y[v]);if(E!==0)return E}return Le(p.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const p=Le(Et(l.latitude),Et(d.latitude));return p!==0?p:Le(Et(l.longitude),Et(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ay(r.arrayValue,e.arrayValue);case 10:return(function(l,d){var p,y,v,E;const x=l.fields||{},S=d.fields||{},M=(p=x[gc])===null||p===void 0?void 0:p.arrayValue,W=(y=S[gc])===null||y===void 0?void 0:y.arrayValue,K=Le(((v=M==null?void 0:M.values)===null||v===void 0?void 0:v.length)||0,((E=W==null?void 0:W.values)===null||E===void 0?void 0:E.length)||0);return K!==0?K:Ay(M,W)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Hu.mapValue&&d===Hu.mapValue)return 0;if(l===Hu.mapValue)return 1;if(d===Hu.mapValue)return-1;const p=l.fields||{},y=Object.keys(p),v=d.fields||{},E=Object.keys(v);y.sort(),E.sort();for(let x=0;x<y.length&&x<E.length;++x){const S=ef(y[x],E[x]);if(S!==0)return S;const M=Bo(p[y[x]],v[E[x]]);if(M!==0)return M}return Le(y.length,E.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{le:t})}}function Ry(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=Wi(r),i=Wi(e),o=Le(t.seconds,i.seconds);return o!==0?o:Le(t.nanos,i.nanos)}function Ay(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Bo(t[o],i[o]);if(l)return l}return Le(t.length,i.length)}function $o(r){return tf(r)}function tf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Wi(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Hi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return xe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=tf(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of i)l?l=!1:o+=",",o+=`${d}:${tf(t.fields[d])}`;return o+"}"})(r.mapValue):Ae(61005,{value:r})}function ec(r){switch(qi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dc(r);return e?16+ec(e):16;case 5:return 2*r.stringValue.length;case 6:return Hi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+ec(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Xi(i.fields,((l,d)=>{o+=l.length+ec(d)})),o})(r.mapValue);default:throw Ae(13486,{value:r})}}function nf(r){return!!r&&"integerValue"in r}function zf(r){return!!r&&"arrayValue"in r}function ky(r){return!!r&&"nullValue"in r}function Ny(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function tc(r){return!!r&&"mapValue"in r}function $1(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[W_])===null||t===void 0?void 0:t.stringValue)===H_}function Za(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Xi(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Za(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Za(r.arrayValue.values[t]);return e}return Object.assign({},r)}function W1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===B1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(t)}setAll(e){let t=$t.emptyPath(),i={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=p.popLast()}d?i[p.lastSegment()]=Za(d):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Xi(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new yn(Za(this.value))}}function q_(r){const e=[];return Xi(r.fields,((t,i)=>{const o=new $t([t]);if(tc(i)){const l=q_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t,i,o,l,d,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Xt(e,0,be.min(),be.min(),be.min(),yn.empty(),0)}static newFoundDocument(e,t,i,o){return new Xt(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new Xt(e,2,t,be.min(),be.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new Xt(e,3,t,be.min(),be.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){this.position=e,this.inclusive=t}}function by(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?i=xe.comparator(xe.fromName(d.referenceValue),t.key):i=Bo(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function jy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!kr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function H1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{}class kt extends G_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new G1(e,t,i):t==="array-contains"?new Y1(e,i):t==="in"?new J1(e,i):t==="not-in"?new X1(e,i):t==="array-contains-any"?new Z1(e,i):new kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new K1(e,i):new Q1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&qi(this.value)===qi(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nr extends G_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Nr(e,t)}matches(e){return K_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function K_(r){return r.op==="and"}function Q_(r){return q1(r)&&K_(r)}function q1(r){for(const e of r.filters)if(e instanceof Nr)return!1;return!0}function rf(r){if(r instanceof kt)return r.field.canonicalString()+r.op.toString()+$o(r.value);if(Q_(r))return r.filters.map((e=>rf(e))).join(",");{const e=r.filters.map((t=>rf(t))).join(",");return`${r.op}(${e})`}}function Y_(r,e){return r instanceof kt?(function(i,o){return o instanceof kt&&i.op===o.op&&i.field.isEqual(o.field)&&kr(i.value,o.value)})(r,e):r instanceof Nr?(function(i,o){return o instanceof Nr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,d,p)=>l&&Y_(d,o.filters[p])),!0):!1})(r,e):void Ae(19439)}function J_(r){return r instanceof kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`})(r):r instanceof Nr?(function(t){return t.op.toString()+" {"+t.getFilters().map(J_).join(" ,")+"}"})(r):"Filter"}class G1 extends kt{constructor(e,t,i){super(e,t,i),this.key=xe.fromName(i.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class K1 extends kt{constructor(e,t){super(e,"in",t),this.keys=X_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Q1 extends kt{constructor(e,t){super(e,"not-in",t),this.keys=X_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function X_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>xe.fromName(i.referenceValue)))}class Y1 extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zf(t)&&dl(t.arrayValue,this.value)}}class J1 extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dl(this.value.arrayValue,t)}}class X1 extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dl(this.value.arrayValue,t)}}class Z1 extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>dl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t=null,i=[],o=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=d,this.endAt=p,this.Pe=null}}function Dy(r,e=null,t=[],i=[],o=null,l=null,d=null){return new eC(r,e,t,i,o,l,d)}function Bf(r){const e=je(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>rf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),jc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>$o(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>$o(i))).join(",")),e.Pe=t}return e.Pe}function $f(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!H1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Y_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!jy(r.startAt,e.startAt)&&jy(r.endAt,e.endAt)}function sf(r){return xe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t=null,i=[],o=[],l=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=y,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function tC(r,e,t,i,o,l,d,p){return new Vc(r,e,t,i,o,l,d,p)}function Wf(r){return new Vc(r)}function Vy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function nC(r){return r.collectionGroup!==null}function el(r){const e=je(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new bt($t.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new vc(l,i))})),t.has($t.keyField().canonicalString())||e.Te.push(new vc($t.keyField(),i))}return e.Te}function Cr(r){const e=je(r);return e.Ie||(e.Ie=rC(e,el(r))),e.Ie}function rC(r,e){if(r.limitType==="F")return Dy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new vc(o.field,l)}));const t=r.endAt?new yc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new yc(r.startAt.position,r.startAt.inclusive):null;return Dy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function of(r,e,t){return new Vc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Oc(r,e){return $f(Cr(r),Cr(e))&&r.limitType===e.limitType}function Z_(r){return`${Bf(Cr(r))}|lt:${r.limitType}`}function bo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>J_(o))).join(", ")}]`),jc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>$o(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>$o(o))).join(",")),`Target(${i})`})(Cr(r))}; limitType=${r.limitType})`}function Lc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):xe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of el(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,p,y){const v=by(d,p,y);return d.inclusive?v<=0:v<0})(i.startAt,el(i),o)||i.endAt&&!(function(d,p,y){const v=by(d,p,y);return d.inclusive?v>=0:v>0})(i.endAt,el(i),o))})(r,e)}function iC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function e0(r){return(e,t)=>{let i=!1;for(const o of el(r)){const l=sC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function sC(r,e,t){const i=r.field.isKeyField()?xe.comparator(e.key,t.key):(function(l,d,p){const y=d.data.field(l),v=p.data.field(l);return y!==null&&v!==null?Bo(y,v):Ae(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return M_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new mt(xe.comparator);function ni(){return oC}const t0=new mt(xe.comparator);function qa(...r){let e=t0;for(const t of r)e=e.insert(t.key,t);return e}function n0(r){let e=t0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function bs(){return tl()}function r0(){return tl()}function tl(){return new $s((r=>r.toString()),((r,e)=>r.isEqual(e)))}const aC=new mt(xe.comparator),lC=new bt(xe.comparator);function ze(...r){let e=lC;for(const t of r)e=e.add(t);return e}const uC=new bt(Le);function cC(){return uC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function i0(r){return{integerValue:""+r}}function dC(r,e){return L1(e)?i0(e):Hf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this._=void 0}}function hC(r,e,t){return r instanceof _c?(function(o,l){const d={fields:{[z_]:{stringValue:U_},[$_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Uf(l)&&(l=Dc(l)),l&&(d.fields[B_]=l),{mapValue:d}})(t,e):r instanceof hl?o0(r,e):r instanceof fl?a0(r,e):(function(o,l){const d=s0(o,l),p=Oy(d)+Oy(o.Ee);return nf(d)&&nf(o.Ee)?i0(p):Hf(o.serializer,p)})(r,e)}function fC(r,e,t){return r instanceof hl?o0(r,e):r instanceof fl?a0(r,e):t}function s0(r,e){return r instanceof wc?(function(i){return nf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class _c extends Mc{}class hl extends Mc{constructor(e){super(),this.elements=e}}function o0(r,e){const t=l0(e);for(const i of r.elements)t.some((o=>kr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class fl extends Mc{constructor(e){super(),this.elements=e}}function a0(r,e){let t=l0(e);for(const i of r.elements)t=t.filter((o=>!kr(o,i)));return{arrayValue:{values:t}}}class wc extends Mc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Oy(r){return Et(r.integerValue||r.doubleValue)}function l0(r){return zf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function pC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof hl&&o instanceof hl||i instanceof fl&&o instanceof fl?zo(i.elements,o.elements,kr):i instanceof wc&&o instanceof wc?kr(i.Ee,o.Ee):i instanceof _c&&o instanceof _c})(r.transform,e.transform)}class mC{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Fc{}function u0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new qf(r.key,ur.none()):new Tl(r.key,r.data,ur.none());{const t=r.data,i=yn.empty();let o=new bt($t.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),o=o.add(l)}return new Zi(r.key,i,new An(o.toArray()),ur.none())}}function gC(r,e,t){r instanceof Tl?(function(o,l,d){const p=o.value.clone(),y=My(o.fieldTransforms,l,d.transformResults);p.setAll(y),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,t):r instanceof Zi?(function(o,l,d){if(!nc(o.precondition,l))return void l.convertToUnknownDocument(d.version);const p=My(o.fieldTransforms,l,d.transformResults),y=l.data;y.setAll(c0(o)),y.setAll(p),l.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function nl(r,e,t,i){return r instanceof Tl?(function(l,d,p,y){if(!nc(l.precondition,d))return p;const v=l.value.clone(),E=Fy(l.fieldTransforms,y,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Zi?(function(l,d,p,y){if(!nc(l.precondition,d))return p;const v=Fy(l.fieldTransforms,y,d),E=d.data;return E.setAll(c0(l)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(r,e,t,i):(function(l,d,p){return nc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,t)}function yC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=s0(i.transform,o||null);l!=null&&(t===null&&(t=yn.empty()),t.set(i.field,l))}return t||null}function Ly(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&zo(i,o,((l,d)=>pC(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tl extends Fc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Zi extends Fc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function c0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function My(r,e,t){const i=new Map;Ze(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,p=e.data.field(l.field);i.set(l.field,fC(d,p,t[o]))}return i}function Fy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);i.set(o.field,hC(l,d,e))}return i}class qf extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vC extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&gC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=nl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=nl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=r0();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let p=this.applyToLocalView(d,l.mutatedFields);p=t.has(o.key)?null:p;const y=u0(d,p);y!==null&&i.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((t,i)=>Ly(t,i)))&&zo(this.baseMutations,e.baseMutations,((t,i)=>Ly(t,i)))}}class Gf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ze(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return aC})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,i[d].version);return new Gf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,He;function TC(r){switch(r){case ee.OK:return Ae(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function d0(r){if(r===void 0)return ei("GRPC error has no .code"),ee.UNKNOWN;switch(r){case It.OK:return ee.OK;case It.CANCELLED:return ee.CANCELLED;case It.UNKNOWN:return ee.UNKNOWN;case It.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case It.INTERNAL:return ee.INTERNAL;case It.UNAVAILABLE:return ee.UNAVAILABLE;case It.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case It.NOT_FOUND:return ee.NOT_FOUND;case It.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case It.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case It.ABORTED:return ee.ABORTED;case It.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case It.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case It.DATA_LOSS:return ee.DATA_LOSS;default:return Ae(39323,{code:r})}}(He=It||(It={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new Fi([4294967295,4294967295],0);function Uy(r){const e=D_().encode(r),t=new C_;return t.update(e),new Uint8Array(t.digest())}function zy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Fi([t,i],0),new Fi([o,l],0)]}class Kf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ga(`Invalid padding: ${t}`);if(i<0)throw new Ga(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Fi.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Fi.fromNumber(i)));return o.compare(xC)===1&&(o=new Fi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Uy(e),[i,o]=zy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);if(!this.ye(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new Kf(l,o,t);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.fe===0)return;const t=Uy(e),[i,o]=zy(t);for(let l=0;l<this.hashCount;l++){const d=this.pe(i,o,l);this.we(d)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Uc(be.min(),o,new mt(Le),ni(),ze())}}class xl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new xl(i,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class h0{constructor(e,t){this.targetId=e,this.De=t}}class f0{constructor(e,t,i=Ht.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class By{constructor(){this.ve=0,this.Ce=$y(),this.Fe=Ht.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ze(),t=ze(),i=ze();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ae(38017,{changeType:l})}})),new xl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=$y()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class IC{constructor(e){this.We=e,this.Ge=new Map,this.ze=ni(),this.je=qu(),this.Je=qu(),this.He=new mt(Le)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(sf(l))if(i===0){const d=new xe(l.path);this.Xe(t,d,Xt.newNoDocument(d,be.min()))}else Ze(i===1,20013,{expectedCount:i});else{const d=this.ot(t);if(d!==i){const p=this._t(e),y=p?this.ut(p,e,d):1;if(y!==0){this.rt(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let d,p;try{d=Hi(i).toUint8Array()}catch(y){if(y instanceof F_)return Bi("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new Kf(d,o,l)}catch(y){return Bi(y instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.fe===0?null:p}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const d=this.We.lt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,d)=>{const p=this.st(d);if(p){if(l.current&&sf(p.target)){const y=new xe(p.target.path);this.Tt(y).has(d)||this.It(d,y)||this.Xe(d,y,Xt.newNoDocument(y,e))}l.Ne&&(t.set(d,l.Le()),l.ke())}}));let i=ze();this.Je.forEach(((l,d)=>{let p=!0;d.forEachWhile((y=>{const v=this.st(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ze.forEach(((l,d)=>d.setReadTime(e)));const o=new Uc(e,t,this.He,this.ze,i);return this.ze=ni(),this.je=qu(),this.Je=qu(),this.He=new mt(Le),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new By,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new bt(Le),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new bt(Le),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new By),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function qu(){return new mt(xe.comparator)}function $y(){return new mt(xe.comparator)}const SC={asc:"ASCENDING",desc:"DESCENDING"},CC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PC={and:"AND",or:"OR"};class RC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function af(r,e){return r.useProto3Json||jc(e)?e:{value:e}}function Ec(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function AC(r,e){return Ec(r,e.toTimestamp())}function Pr(r){return Ze(!!r,49232),be.fromTimestamp((function(t){const i=Wi(t);return new ct(i.seconds,i.nanos)})(r))}function Qf(r,e){return lf(r,e).canonicalString()}function lf(r,e){const t=(function(o){return new ut(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function m0(r){const e=ut.fromString(r);return Ze(w0(e),10190,{key:e.toString()}),e}function uf(r,e){return Qf(r.databaseId,e.path)}function Dh(r,e){const t=m0(e);if(t.get(1)!==r.databaseId.projectId)throw new we(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new we(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new xe(y0(t))}function g0(r,e){return Qf(r.databaseId,e)}function kC(r){const e=m0(r);return e.length===4?ut.emptyPath():y0(e)}function cf(r){return new ut(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function y0(r){return Ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Wy(r,e,t){return{name:uf(r,e),fields:t.value.mapValue.fields}}function NC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ae(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(Ze(E===void 0||typeof E=="string",58123),Ht.fromBase64String(E||"")):(Ze(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Ht.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const E=v.code===void 0?ee.UNKNOWN:d0(v.code);return new we(E,v.message||"")})(d);t=new f0(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Dh(r,i.document.name),l=Pr(i.document.updateTime),d=i.document.createTime?Pr(i.document.createTime):be.min(),p=new yn({mapValue:{fields:i.document.fields}}),y=Xt.newFoundDocument(o,l,d,p),v=i.targetIds||[],E=i.removedTargetIds||[];t=new rc(v,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Dh(r,i.document),l=i.readTime?Pr(i.readTime):be.min(),d=Xt.newNoDocument(o,l),p=i.removedTargetIds||[];t=new rc([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Dh(r,i.document),l=i.removedTargetIds||[];t=new rc([],l,o,null)}else{if(!("filter"in e))return Ae(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,d=new EC(o,l),p=i.targetId;t=new h0(p,d)}}return t}function bC(r,e){let t;if(e instanceof Tl)t={update:Wy(r,e.key,e.value)};else if(e instanceof qf)t={delete:uf(r,e.key)};else if(e instanceof Zi)t={update:Wy(r,e.key,e.data),updateMask:zC(e.fieldMask)};else{if(!(e instanceof vC))return Ae(16599,{Rt:e.type});t={verify:uf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const p=d.transform;if(p instanceof _c)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof hl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof fl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof wc)return{fieldPath:d.field.canonicalString(),increment:p.Ee};throw Ae(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:AC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(r,e.precondition)),t}function jC(r,e){return r&&r.length>0?(Ze(e!==void 0,14353),r.map((t=>(function(o,l){let d=o.updateTime?Pr(o.updateTime):Pr(l);return d.isEqual(be.min())&&(d=Pr(l)),new mC(d,o.transformResults||[])})(t,e)))):[]}function DC(r,e){return{documents:[g0(r,e.path)]}}function VC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=g0(r,o);const l=(function(v){if(v.length!==0)return _0(Nr.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(v){if(v.length!==0)return v.map((E=>(function(S){return{field:jo(S.field),direction:MC(S.dir)}})(E)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=af(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function OC(r){let e=kC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ze(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(x){const S=v0(x);return S instanceof Nr&&Q_(S)?S.getFilters():[S]})(t.where));let d=[];t.orderBy&&(d=(function(x){return x.map((S=>(function(W){return new vc(Do(W.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(S)))})(t.orderBy));let p=null;t.limit&&(p=(function(x){let S;return S=typeof x=="object"?x.value:x,jc(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(x){const S=!!x.before,M=x.values||[];return new yc(M,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(x){const S=!x.before,M=x.values||[];return new yc(M,S)})(t.endAt)),tC(e,o,d,l,p,"F",y,v)}function LC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function v0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Do(t.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Do(t.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Do(t.unaryFilter.field);return kt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Do(t.unaryFilter.field);return kt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(t){return kt.create(Do(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Nr.create(t.compositeFilter.filters.map((i=>v0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(r):Ae(30097,{filter:r})}function MC(r){return SC[r]}function FC(r){return CC[r]}function UC(r){return PC[r]}function jo(r){return{fieldPath:r.canonicalString()}}function Do(r){return $t.fromServerFormat(r.fieldPath)}function _0(r){return r instanceof kt?(function(t){if(t.op==="=="){if(Ny(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NAN"}};if(ky(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ny(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NAN"}};if(ky(t.value))return{unaryFilter:{field:jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(t.field),op:FC(t.op),value:t.value}}})(r):r instanceof Nr?(function(t){const i=t.getFilters().map((o=>_0(o)));return i.length===1?i[0]:{compositeFilter:{op:UC(t.op),filters:i}}})(r):Ae(54877,{filter:r})}function zC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function w0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t,i,o,l=be.min(),d=be.min(),p=Ht.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.gt=e}}function $C(r){const e=OC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?of(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.Dn=new HC}addToCollectionParentIndex(e,t){return this.Dn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve($i.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve($i.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class HC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new bt(ut.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new bt(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E0=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(E0,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Wo(0)}static ur(){return new Wo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="LruGarbageCollector",qC=1048576;function Gy([r,e],[t,i]){const o=Le(r,t);return o===0?Le(e,i):o}class GC{constructor(e){this.Tr=e,this.buffer=new bt(Gy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Gy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){pe(qy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zo(t)?pe(qy,"Ignoring IndexedDB error during garbage collection: ",t):await Xo(t)}await this.Rr(3e5)}))}}class QC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(bc.ue);const i=new GC(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Hy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,d,p,y,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,d=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(i=x,p=Date.now(),this.removeTargets(e,i,t)))).next((x=>(l=x,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(v=Date.now(),No()<=Ue.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${l} targets in `+(y-p)+`ms
	Removed ${x} documents in `+(v-y)+`ms
Total Duration: ${v-E}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:x}))))}}function YC(r,e){return new QC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.changes=new $s((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&nl(i.mutation,o,An.empty(),ct.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const o=bs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let d=qa();return l.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=bs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,i,o){let l=ni();const d=tl(),p=(function(){return tl()})();return t.forEach(((y,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Zi)?l=l.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),nl(E.mutation,v,E.mutation.getFieldMask(),ct.now())):d.set(v.key,An.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((v,E)=>d.set(v,E))),t.forEach(((v,E)=>{var x;return p.set(v,new XC(E,(x=d.get(v))!==null&&x!==void 0?x:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=tl();let o=new mt(((d,p)=>d-p)),l=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let E=i.get(y)||An.empty();E=p.applyToLocalView(v,E),i.set(y,E);const x=(o.get(p.batchId)||ze()).add(y);o=o.insert(p.batchId,x)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),v=y.key,E=y.value,x=r0();E.forEach((S=>{if(!l.has(S)){const M=u0(t.get(S),i.get(S));M!==null&&x.set(S,M),l=l.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,x))}return X.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return xe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):X.resolve(bs());let p=ll,y=l;return d.next((v=>X.forEach(v,((E,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),l.get(E)?X.resolve():this.remoteDocumentCache.getEntry(e,E).next((S=>{y=y.insert(E,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,y,v,ze()))).next((E=>({batchId:p,changes:n0(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((i=>{let o=qa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let d=qa();return this.indexManager.getCollectionParents(e,l).next((p=>X.forEach(p,(y=>{const v=(function(x,S){return new Vc(S,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((x,S)=>{d=d.insert(x,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((d=>{l.forEach(((y,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,Xt.newInvalidDocument(E)))}));let p=qa();return d.forEach(((y,v)=>{const E=l.get(y);E!==void 0&&nl(E.mutation,v,An.empty(),ct.now()),Lc(t,v)&&(p=p.insert(y,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return X.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Pr(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:$C(o.bundledQuery),readTime:Pr(o.readTime)}})(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.overlays=new mt(xe.comparator),this.kr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=bs();return X.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=bs(),l=t.length+1,d=new xe(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new mt(((v,E)=>v-E));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=bs(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const p=bs(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,E)=>p.set(v,E))),!(p.size()>=o)););return X.resolve(p)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new wC(t,i));let l=this.kr.get(t);l===void 0&&(l=ze(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this.qr=new bt(Lt.Qr),this.$r=new bt(Lt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Lt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Lt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new xe(new ut([])),i=new Lt(t,e),o=new Lt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(d=>{this.Wr(d),l.push(d.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new xe(new ut([])),i=new Lt(t,e),o=new Lt(t,e+1);let l=ze();return this.$r.forEachInRange([i,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Lt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Lt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return xe.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new bt(Lt.Qr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new _C(l,t,i,o);this.mutationQueue.push(d);for(const p of o)this.Yr=this.Yr.add(new Lt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return X.resolve(d)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Ff:this.er-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Lt(t,0),o=new Lt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(d=>{const p=this.Zr(d.Hr);l.push(p)})),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new bt(Le);return t.forEach((o=>{const l=new Lt(o,0),d=new Lt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,d],(p=>{i=i.add(p.Hr)}))})),X.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;xe.isDocumentKey(l)||(l=l.child(""));const d=new Lt(new xe(l),0);let p=new bt(Le);return this.Yr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(y.Hr)),!0)}),d),X.resolve(this.ei(p))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ze(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return X.forEach(t.mutations,(o=>{const l=new Lt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Lt(t,0),o=this.Yr.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.ni=e,this.docs=(function(){return new mt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,d=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(t))}getEntries(e,t){let i=ni();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Xt.newInvalidDocument(o))})),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=ni();const d=t.path,p=new xe(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:v,value:{document:E}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||j1(b1(E),i)<=0||(o.has(E.key)||Lc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ae(9500)}ri(e,t){return X.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new sP(this)}getSize(e){return X.resolve(this.size)}}class sP extends JC{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),X.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.persistence=e,this.ii=new $s((t=>Bf(t)),$f),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.si=0,this.oi=new Yf,this.targetCount=0,this._i=Wo.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),X.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Wo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.hr(t),X.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((d,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ii.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),X.waitFor(l).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,t){this.ai={},this.overlays={},this.ui=new bc(0),this.ci=!1,this.ci=!0,this.li=new nP,this.referenceDelegate=e(this),this.hi=new oP(this),this.indexManager=new WC,this.remoteDocumentCache=(function(o){return new iP(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new BC(t),this.Ti=new eP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new rP(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new aP(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return X.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class aP extends V1{constructor(e){super(),this.currentSequenceNumber=e}}class Jf{constructor(e){this.persistence=e,this.Ai=new Yf,this.Ri=null}static Vi(e){return new Jf(e)}get mi(){if(this.Ri)return this.Ri;throw Ae(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.mi,(i=>{const o=xe.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,be.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return X.or([()=>X.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Tc{constructor(e,t){this.persistence=e,this.gi=new $s((i=>M1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=YC(this,t)}static Vi(e,t){return new Tc(e,t)}Ii(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return X.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?X.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(d=>this.Sr(e,d,t).next((p=>{p||(i++,l.removeEntry(d,be.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),X.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ec(e.data.value)),t}Sr(e,t,i){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return X.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=ze(),o=ze();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Xf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return BT()?8:O1(Zt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new lP;return this.ws(e,t,d).next((p=>{if(l.result=p,this.Rs)return this.Ss(e,t,d,p.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(No()<=Ue.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(No()<=Ue.DEBUG&&pe("QueryEngine","Query:",bo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(No()<=Ue.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cr(t))):X.resolve())}ps(e,t){if(Vy(t))return X.resolve(null);let i=Cr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=of(t,null,"F"),i=Cr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=ze(...l);return this.gs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.bs(t,p);return this.Ds(t,v,d,y.readTime)?this.ps(e,of(t,null,"F")):this.vs(e,v,t,y)}))))})))))}ys(e,t,i,o){return Vy(t)||o.isEqual(be.min())?X.resolve(null):this.gs.getDocuments(e,i).next((l=>{const d=this.bs(t,l);return this.Ds(t,d,i,o)?X.resolve(null):(No()<=Ue.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.vs(e,d,t,N1(o,ll)).next((p=>p)))}))}bs(e,t){let i=new bt(e0(e));return t.forEach(((o,l)=>{Lc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return No()<=Ue.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",bo(t)),this.gs.getDocumentsMatchingQuery(e,t,$i.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="LocalStore",cP=3e8;class dP{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new mt(Le),this.Ms=new $s((l=>Bf(l)),$f),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function hP(r,e,t,i){return new dP(r,e,t,i)}async function x0(r,e){const t=je(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],p=[];let y=ze();for(const v of o){d.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}for(const v of l){p.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(i,y).next((v=>({Bs:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function fP(r,e){const t=je(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(p,y,v,E){const x=v.batch,S=x.keys();let M=X.resolve();return S.forEach((W=>{M=M.next((()=>E.getEntry(y,W))).next((K=>{const B=v.docVersions.get(W);Ze(B!==null,48541),K.version.compareTo(B)<0&&(x.applyToRemoteDocument(K,v),K.isValidDocument()&&(K.setReadTime(v.commitVersion),E.addEntry(K)))}))})),M.next((()=>p.mutationQueue.removeMutationBatch(y,x)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let y=ze();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(y=y.add(p.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function I0(r){const e=je(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function pP(r,e){const t=je(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const p=[];e.targetChanges.forEach(((E,x)=>{const S=o.get(x);if(!S)return;p.push(t.hi.removeMatchingKeys(l,E.removedDocuments,x).next((()=>t.hi.addMatchingKeys(l,E.addedDocuments,x))));let M=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?M=M.withResumeToken(Ht.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,i)),o=o.insert(x,M),(function(K,B,G){return K.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=cP?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(S,M,E)&&p.push(t.hi.updateTargetData(l,M))}));let y=ni(),v=ze();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),p.push(mP(l,d,e.documentUpdates).next((E=>{y=E.Ls,v=E.ks}))),!i.isEqual(be.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next((x=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(E)}return X.waitFor(p).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,v))).next((()=>y))})).then((l=>(t.Fs=o,l)))}function mP(r,e,t){let i=ze(),o=ze();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let d=ni();return t.forEach(((p,y)=>{const v=l.get(p);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(be.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):pe(Zf,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",y.version)})),{Ls:d,ks:o}}))}function gP(r,e){const t=je(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ff),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function yP(r,e){const t=je(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,X.resolve(o)):t.hi.allocateTargetId(i).next((d=>(o=new Di(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function df(r,e,t){const i=je(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Zo(d))throw d;pe(Zf,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Ky(r,e,t){const i=je(r);let o=be.min(),l=ze();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,v,E){const x=je(y),S=x.Ms.get(E);return S!==void 0?X.resolve(x.Fs.get(S)):x.hi.getTargetData(v,E)})(i,d,Cr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{l=y}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,t?o:be.min(),t?l:ze()))).next((p=>(vP(i,iC(e),p),{documents:p,qs:l})))))}function vP(r,e,t){let i=r.xs.get(e)||be.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class Qy{constructor(){this.activeTargetIds=cC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _P{constructor(){this.Fo=new Qy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Qy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="ConnectivityMonitor";class Jy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pe(Yy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){pe(Yy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gu=null;function hf(){return Gu===null?Gu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gu++,"0x"+Gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="RestConnection",EP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===mc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const d=hf(),p=this.Go(e,t.toUriEncodedString());pe(Vh,`Sending RPC '${e}' ${d}:`,p,i);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(y,o,l);const{host:v}=new URL(p),E=Ko(v);return this.jo(e,p,y,i,E).then((x=>(pe(Vh,`Received RPC '${e}' ${d}: `,x),x)),(x=>{throw Bi(Vh,`RPC '${e}' ${d} failed with error: `,x,"url: ",p,"request:",i),x}))}Jo(e,t,i,o,l,d){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=EP[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class IP extends TP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const d=hf();return new Promise(((p,y)=>{const v=new P_;v.setWithCredentials(!0),v.listenOnce(R_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Zu.NO_ERROR:const x=v.getResponseJson();pe(Yt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),p(x);break;case Zu.TIMEOUT:pe(Yt,`RPC '${e}' ${d} timed out`),y(new we(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const S=v.getStatus();if(pe(Yt,`RPC '${e}' ${d} failed with status:`,S,"response text:",v.getResponseText()),S>0){let M=v.getResponseJson();Array.isArray(M)&&(M=M[0]);const W=M==null?void 0:M.error;if(W&&W.status&&W.message){const K=(function(G){const Z=G.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(Z)>=0?Z:ee.UNKNOWN})(W.status);y(new we(K,W.message))}else y(new we(ee.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new we(ee.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{c_:e,streamId:d,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{pe(Yt,`RPC '${e}' ${d} completed.`)}}));const E=JSON.stringify(o);pe(Yt,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",E,i,15)}))}P_(e,t,i){const o=hf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=N_(),p=k_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.zo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const E=l.join("");pe(Yt,`Creating RPC '${e}' stream ${o}: ${E}`,y);const x=d.createWebChannel(E,y);this.T_(x);let S=!1,M=!1;const W=new xP({Ho:B=>{M?pe(Yt,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(S||(pe(Yt,`Opening RPC '${e}' stream ${o} transport.`),x.open(),S=!0),pe(Yt,`RPC '${e}' stream ${o} sending:`,B),x.send(B))},Yo:()=>x.close()}),K=(B,G,Z)=>{B.listen(G,(ie=>{try{Z(ie)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return K(x,Ha.EventType.OPEN,(()=>{M||(pe(Yt,`RPC '${e}' stream ${o} transport opened.`),W.s_())})),K(x,Ha.EventType.CLOSE,(()=>{M||(M=!0,pe(Yt,`RPC '${e}' stream ${o} transport closed`),W.__(),this.I_(x))})),K(x,Ha.EventType.ERROR,(B=>{M||(M=!0,Bi(Yt,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),W.__(new we(ee.UNAVAILABLE,"The operation could not be completed")))})),K(x,Ha.EventType.MESSAGE,(B=>{var G;if(!M){const Z=B.data[0];Ze(!!Z,16349);const ie=Z,ce=(ie==null?void 0:ie.error)||((G=ie[0])===null||G===void 0?void 0:G.error);if(ce){pe(Yt,`RPC '${e}' stream ${o} received error:`,ce);const Ie=ce.status;let de=(function(R){const A=It[R];if(A!==void 0)return d0(A)})(Ie),k=ce.message;de===void 0&&(de=ee.INTERNAL,k="Unknown error status: "+Ie+" with message "+ce.message),M=!0,W.__(new we(de,k)),x.close()}else pe(Yt,`RPC '${e}' stream ${o} received:`,Z),W.a_(Z)}})),K(p,A_.STAT_EVENT,(B=>{B.stat===Zh.PROXY?pe(Yt,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Zh.NOPROXY&&pe(Yt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.o_()}),0),W}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Oh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(r){return new RC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="PersistentStream";class C0{constructor(e,t,i,o,l,d,p,y){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new S0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(ei(t.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new we(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return pe(Xy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(pe(Xy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SP extends C0{constructor(e,t,i,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=NC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return be.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?be.min():d.readTime?Pr(d.readTime):be.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=cf(this.serializer),t.addTarget=(function(l,d){let p;const y=d.target;if(p=sf(y)?{documents:DC(l,y)}:{query:VC(l,y).Vt},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=p0(l,d.resumeToken);const v=af(l,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(be.min())>0){p.readTime=Ec(l,d.snapshotVersion.toTimestamp());const v=af(l,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=LC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=cf(this.serializer),t.removeTarget=e,this.k_(t)}}class CP extends C0{constructor(e,t,i,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=jC(e.writeResults,e.commitTime),i=Pr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=cf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>bC(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{}class RP extends PP{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new we(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,lf(t,i),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(ee.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Jo(e,lf(t,i),o,d,p,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new we(ee.UNKNOWN,d.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class AP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ei(t),this._a=!1):pe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="RemoteStore";class kP{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((d=>{i.enqueueAndForget((async()=>{Ws(this)&&(pe(Fs,"Restarting streams for network reachability change."),await(async function(y){const v=je(y);v.Ia.add(4),await Il(v),v.Aa.set("Unknown"),v.Ia.delete(4),await Bc(v)})(this))}))})),this.Aa=new AP(i,o)}}async function Bc(r){if(Ws(r))for(const e of r.da)await e(!0)}async function Il(r){for(const e of r.da)await e(!1)}function P0(r,e){const t=je(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),rp(t)?np(t):ea(t).x_()&&tp(t,e))}function ep(r,e){const t=je(r),i=ea(t);t.Ta.delete(e),i.x_()&&R0(t,e),t.Ta.size===0&&(i.x_()?i.B_():Ws(t)&&t.Aa.set("Unknown"))}function tp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ea(r).H_(e)}function R0(r,e){r.Ra.$e(e),ea(r).Y_(e)}function np(r){r.Ra=new IC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),ea(r).start(),r.Aa.aa()}function rp(r){return Ws(r)&&!ea(r).M_()&&r.Ta.size>0}function Ws(r){return je(r).Ia.size===0}function A0(r){r.Ra=void 0}async function NP(r){r.Aa.set("Online")}async function bP(r){r.Ta.forEach(((e,t)=>{tp(r,e)}))}async function jP(r,e){A0(r),rp(r)?(r.Aa.la(e),np(r)):r.Aa.set("Unknown")}async function DP(r,e,t){if(r.Aa.set("Online"),e instanceof f0&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const p of l.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ta.delete(p),o.Ra.removeTarget(p))})(r,e)}catch(i){pe(Fs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await xc(r,i)}else if(e instanceof rc?r.Ra.Ye(e):e instanceof h0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(be.min()))try{const i=await I0(r.localStore);t.compareTo(i)>=0&&await(function(l,d){const p=l.Ra.Pt(d);return p.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const E=l.Ta.get(v);E&&l.Ta.set(v,E.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,v)=>{const E=l.Ta.get(y);if(!E)return;l.Ta.set(y,E.withResumeToken(Ht.EMPTY_BYTE_STRING,E.snapshotVersion)),R0(l,y);const x=new Di(E.target,y,v,E.sequenceNumber);tp(l,x)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){pe(Fs,"Failed to raise snapshot:",i),await xc(r,i)}}async function xc(r,e,t){if(!Zo(e))throw e;r.Ia.add(1),await Il(r),r.Aa.set("Offline"),t||(t=()=>I0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{pe(Fs,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Bc(r)}))}function k0(r,e){return e().catch((t=>xc(r,t,e)))}async function $c(r){const e=je(r),t=Gi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ff;for(;VP(e);)try{const o=await gP(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,OP(e,o)}catch(o){await xc(e,o)}N0(e)&&b0(e)}function VP(r){return Ws(r)&&r.Pa.length<10}function OP(r,e){r.Pa.push(e);const t=Gi(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function N0(r){return Ws(r)&&!Gi(r).M_()&&r.Pa.length>0}function b0(r){Gi(r).start()}async function LP(r){Gi(r).na()}async function MP(r){const e=Gi(r);for(const t of r.Pa)e.X_(t.mutations)}async function FP(r,e,t){const i=r.Pa.shift(),o=Gf.from(i,e,t);await k0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await $c(r)}async function UP(r,e){e&&Gi(r).Z_&&await(async function(i,o){if((function(d){return TC(d)&&d!==ee.ABORTED})(o.code)){const l=i.Pa.shift();Gi(i).N_(),await k0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await $c(i)}})(r,e),N0(r)&&b0(r)}async function Zy(r,e){const t=je(r);t.asyncQueue.verifyOperationInProgress(),pe(Fs,"RemoteStore received new credentials");const i=Ws(t);t.Ia.add(3),await Il(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Bc(t)}async function zP(r,e){const t=je(r);e?(t.Ia.delete(2),await Bc(t)):e||(t.Ia.add(2),await Il(t),t.Aa.set("Unknown"))}function ea(r){return r.Va||(r.Va=(function(t,i,o){const l=je(t);return l.ia(),new SP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:NP.bind(null,r),e_:bP.bind(null,r),n_:jP.bind(null,r),J_:DP.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),rp(r)?np(r):r.Aa.set("Unknown")):(await r.Va.stop(),A0(r))}))),r.Va}function Gi(r){return r.ma||(r.ma=(function(t,i,o){const l=je(t);return l.ia(),new CP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:LP.bind(null,r),n_:UP.bind(null,r),ea:MP.bind(null,r),ta:FP.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await $c(r)):(await r.ma.stop(),r.Pa.length>0&&(pe(Fs,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const d=Date.now()+i,p=new ip(e,t,d,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sp(r,e){if(ei("AsyncQueue",`${e}: ${r}`),Zo(r))return new we(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||xe.comparator(t.key,i.key):(t,i)=>xe.comparator(t.key,i.key),this.keyedMap=qa(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.fa=new mt(xe.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ae(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ho{constructor(e,t,i,o,l,d,p,y,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new Ho(e,t,Mo.emptySet(t),d,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class $P{constructor(){this.queries=tv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=je(t),l=o.queries;o.queries=tv(),l.forEach(((d,p)=>{for(const y of p.wa)y.onError(i)}))})(this,new we(ee.ABORTED,"Firestore shutting down"))}}function tv(){return new $s((r=>Z_(r)),Oc)}async function j0(r,e){const t=je(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new BP,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=sp(d,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&op(t)}async function D0(r,e){const t=je(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const d=l.wa.indexOf(e);d>=0&&(l.wa.splice(d,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function WP(r,e){const t=je(r);let i=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const p of d.wa)p.Ca(o)&&(i=!0);d.ya=o}}i&&op(t)}function HP(r,e,t){const i=je(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function op(r){r.Da.forEach((e=>{e.next()}))}var ff,nv;(nv=ff||(ff={})).Fa="default",nv.Cache="cache";class V0{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ho(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this.key=e}}class L0{constructor(e){this.key=e}}class qP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ze(),this.mutatedKeys=ze(),this.Xa=e0(e),this.eu=new Mo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new ev,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,x)=>{const S=o.get(E),M=Lc(this.query,x)?x:null,W=!!S&&this.mutatedKeys.has(S.key),K=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let B=!1;S&&M?S.data.isEqual(M.data)?W!==K&&(i.track({type:3,doc:M}),B=!0):this.iu(S,M)||(i.track({type:2,doc:M}),B=!0,(y&&this.Xa(M,y)>0||v&&this.Xa(M,v)<0)&&(p=!0)):!S&&M?(i.track({type:0,doc:M}),B=!0):S&&!M&&(i.track({type:1,doc:S}),B=!0,(y||v)&&(p=!0)),B&&(M?(d=d.add(M),l=K?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{eu:d,ru:i,Ds:p,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort(((E,x)=>(function(M,W){const K=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{At:B})}};return K(M)-K(W)})(E.type,x.type)||this.Xa(E.doc,x.doc))),this.su(i),o=o!=null&&o;const p=t&&!o?this.ou():[],y=this.Za.size===0&&this.current&&!o?1:0,v=y!==this.Ya;return this.Ya=y,d.length!==0||v?{snapshot:new Ho(this.query,e.eu,l,d,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ev,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ze(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new L0(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new O0(i))})),t}uu(e){this.Ha=e.qs,this.Za=ze();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ho.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ap="SyncEngine";class GP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class KP{constructor(e){this.key=e,this.lu=!1}}class QP{constructor(e,t,i,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new $s((p=>Z_(p)),Oc),this.Tu=new Map,this.Iu=new Set,this.du=new mt(xe.comparator),this.Eu=new Map,this.Au=new Yf,this.Ru={},this.Vu=new Map,this.mu=Wo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function YP(r,e,t=!0){const i=$0(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await M0(i,e,t,!0),o}async function JP(r,e){const t=$0(r);await M0(t,e,!0,!1)}async function M0(r,e,t,i){const o=await yP(r.localStore,Cr(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await XP(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&P0(r.remoteStore,o),p}async function XP(r,e,t,i,o){r.gu=(x,S,M)=>(async function(K,B,G,Z){let ie=B.view.nu(G);ie.Ds&&(ie=await Ky(K.localStore,B.query,!1).then((({documents:k})=>B.view.nu(k,ie))));const ce=Z&&Z.targetChanges.get(B.targetId),Ie=Z&&Z.targetMismatches.get(B.targetId)!=null,de=B.view.applyChanges(ie,K.isPrimaryClient,ce,Ie);return iv(K,B.targetId,de._u),de.snapshot})(r,x,S,M);const l=await Ky(r.localStore,e,!0),d=new qP(e,l.qs),p=d.nu(l.documents),y=xl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=d.applyChanges(p,r.isPrimaryClient,y);iv(r,t,v._u);const E=new GP(e,t,d);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),v.snapshot}async function ZP(r,e,t){const i=je(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((d=>!Oc(d,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await df(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ep(i.remoteStore,o.targetId),pf(i,o.targetId)})).catch(Xo)):(pf(i,o.targetId),await df(i.localStore,o.targetId,!0))}async function eR(r,e){const t=je(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ep(t.remoteStore,i.targetId))}async function tR(r,e,t){const i=lR(r);try{const o=await(function(d,p){const y=je(d),v=ct.now(),E=p.reduce(((M,W)=>M.add(W.key)),ze());let x,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let W=ni(),K=ze();return y.Os.getEntries(M,E).next((B=>{W=B,W.forEach(((G,Z)=>{Z.isValidDocument()||(K=K.add(G))}))})).next((()=>y.localDocuments.getOverlayedDocuments(M,W))).next((B=>{x=B;const G=[];for(const Z of p){const ie=yC(Z,x.get(Z.key).overlayedDocument);ie!=null&&G.push(new Zi(Z.key,ie,q_(ie.value.mapValue),ur.exists(!0)))}return y.mutationQueue.addMutationBatch(M,v,G,p)})).next((B=>{S=B;const G=B.applyToLocalDocumentSet(x,K);return y.documentOverlayCache.saveOverlays(M,B.batchId,G)}))})).then((()=>({batchId:S.batchId,changes:n0(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,p,y){let v=d.Ru[d.currentUser.toKey()];v||(v=new mt(Le)),v=v.insert(p,y),d.Ru[d.currentUser.toKey()]=v})(i,o.batchId,t),await Sl(i,o.changes),await $c(i.remoteStore)}catch(o){const l=sp(o,"Failed to persist write");t.reject(l)}}async function F0(r,e){const t=je(r);try{const i=await pP(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Eu.get(l);d&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?Ze(d.lu,14607):o.removedDocuments.size>0&&(Ze(d.lu,42227),d.lu=!1))})),await Sl(t,i,e)}catch(i){await Xo(i)}}function rv(r,e,t){const i=je(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const y=je(d);y.onlineState=p;let v=!1;y.queries.forEach(((E,x)=>{for(const S of x.wa)S.va(p)&&(v=!0)})),v&&op(y)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function nR(r,e,t){const i=je(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let d=new mt(xe.comparator);d=d.insert(l,Xt.newNoDocument(l,be.min()));const p=ze().add(l),y=new Uc(be.min(),new Map,new mt(Le),d,p);await F0(i,y),i.du=i.du.remove(l),i.Eu.delete(e),lp(i)}else await df(i.localStore,e,!1).then((()=>pf(i,e,t))).catch(Xo)}async function rR(r,e){const t=je(r),i=e.batch.batchId;try{const o=await fP(t.localStore,e);z0(t,i,null),U0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Sl(t,o)}catch(o){await Xo(o)}}async function iR(r,e,t){const i=je(r);try{const o=await(function(d,p){const y=je(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return y.mutationQueue.lookupMutationBatch(v,p).next((x=>(Ze(x!==null,37113),E=x.keys(),y.mutationQueue.removeMutationBatch(v,x)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,E,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>y.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);z0(i,e,t),U0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Sl(i,o)}catch(o){await Xo(o)}}function U0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function z0(r,e,t){const i=je(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function pf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||B0(r,i)}))}function B0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(ep(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),lp(r))}function iv(r,e,t){for(const i of t)i instanceof O0?(r.Au.addReference(i.key,e),sR(r,i)):i instanceof L0?(pe(ap,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||B0(r,i.key)):Ae(19791,{yu:i})}function sR(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(pe(ap,"New document in limbo: "+t),r.Iu.add(i),lp(r))}function lp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new xe(ut.fromString(e)),i=r.mu.next();r.Eu.set(i,new KP(t)),r.du=r.du.insert(t,i),P0(r.remoteStore,new Di(Cr(Wf(t.path)),i,"TargetPurposeLimboResolution",bc.ue))}}async function Sl(r,e,t){const i=je(r),o=[],l=[],d=[];i.Pu.isEmpty()||(i.Pu.forEach(((p,y)=>{d.push(i.gu(y,e,t).then((v=>{var E;if((v||t)&&i.isPrimaryClient){const x=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(y.targetId,x?"current":"not-current")}if(v){o.push(v);const x=Xf.Es(y.targetId,v);l.push(x)}})))})),await Promise.all(d),i.hu.J_(o),await(async function(y,v){const E=je(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>X.forEach(v,(S=>X.forEach(S.Is,(M=>E.persistence.referenceDelegate.addReference(x,S.targetId,M))).next((()=>X.forEach(S.ds,(M=>E.persistence.referenceDelegate.removeReference(x,S.targetId,M)))))))))}catch(x){if(!Zo(x))throw x;pe(Zf,"Failed to update sequence numbers: "+x)}for(const x of v){const S=x.targetId;if(!x.fromCache){const M=E.Fs.get(S),W=M.snapshotVersion,K=M.withLastLimboFreeSnapshotVersion(W);E.Fs=E.Fs.insert(S,K)}}})(i.localStore,l))}async function oR(r,e){const t=je(r);if(!t.currentUser.isEqual(e)){pe(ap,"User change. New user:",e.toKey());const i=await x0(t.localStore,e);t.currentUser=e,(function(l,d){l.Vu.forEach((p=>{p.forEach((y=>{y.reject(new we(ee.CANCELLED,d))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Sl(t,i.Bs)}}function aR(r,e){const t=je(r),i=t.Eu.get(e);if(i&&i.lu)return ze().add(i.key);{let o=ze();const l=t.Tu.get(e);if(!l)return o;for(const d of l){const p=t.Pu.get(d);o=o.unionWith(p.view.tu)}return o}}function $0(r){const e=je(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=F0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nR.bind(null,e),e.hu.J_=WP.bind(null,e.eventManager),e.hu.pu=HP.bind(null,e.eventManager),e}function lR(r){const e=je(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iR.bind(null,e),e}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return hP(this.persistence,new uP,e.initialUser,this.serializer)}Du(e){return new T0(Jf.Vi,this.serializer)}bu(e){return new _P}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class uR extends Ic{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ze(this.persistence.referenceDelegate instanceof Tc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new KC(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new T0((i=>Tc.Vi(i,t)),this.serializer)}}class mf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oR.bind(null,this.syncEngine),await zP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $P})()}createDatastore(e){const t=zc(e.databaseInfo.databaseId),i=(function(l){return new IP(l)})(e.databaseInfo);return(function(l,d,p,y){return new RP(l,d,p,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,d,p){return new kP(i,o,l,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>rv(this.syncEngine,t,0)),(function(){return Jy.C()?new Jy:new wP})())}createSyncEngine(e,t){return(function(o,l,d,p,y,v,E){const x=new QP(o,l,d,p,y,v);return E&&(x.fu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=je(o);pe(Fs,"RemoteStore shutting down."),l.Ia.add(5),await Il(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}mf.provider={build:()=>new mf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ei("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="FirestoreClient";class cR{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Jt.UNAUTHENTICATED,this.clientId=Lf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{pe(Ki,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(pe(Ki,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Lh(r,e){r.asyncQueue.verifyOperationInProgress(),pe(Ki,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await x0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Bi("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{pe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Bi("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function sv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await dR(r);pe(Ki,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Zy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Zy(e.remoteStore,o))),r._onlineComponents=e}async function dR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(Ki,"Using user provided OfflineComponentProvider");try{await Lh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Bi("Error using user provided cache. Falling back to memory cache: "+t),await Lh(r,new Ic)}}else pe(Ki,"Using default OfflineComponentProvider"),await Lh(r,new uR(void 0));return r._offlineComponents}async function H0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(Ki,"Using user provided OnlineComponentProvider"),await sv(r,r._uninitializedComponentsProvider._online)):(pe(Ki,"Using default OnlineComponentProvider"),await sv(r,new mf))),r._onlineComponents}function hR(r){return H0(r).then((e=>e.syncEngine))}async function q0(r){const e=await H0(r),t=e.eventManager;return t.onListen=YP.bind(null,e.syncEngine),t.onUnlisten=ZP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eR.bind(null,e.syncEngine),t}function fR(r,e,t={}){const i=new Jr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const E=new W0({next:S=>{E.Ou(),d.enqueueAndForget((()=>D0(l,x)));const M=S.docs.has(p);!M&&S.fromCache?v.reject(new we(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&y&&y.source==="server"?v.reject(new we(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),x=new V0(Wf(p.path),E,{includeMetadataChanges:!0,ka:!0});return j0(l,x)})(await q0(r),r.asyncQueue,e,t,i))),i.promise}function pR(r,e,t={}){const i=new Jr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,y,v){const E=new W0({next:S=>{E.Ou(),d.enqueueAndForget((()=>D0(l,x))),S.fromCache&&y.source==="server"?v.reject(new we(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),x=new V0(p,E,{includeMetadataChanges:!0,ka:!0});return j0(l,x)})(await q0(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="firestore.googleapis.com",av=!0;class lv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K0,this.ssl=av}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:av;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=E0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new we(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new E1;switch(i.type){case"firstParty":return new S1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ov.get(t);i&&(pe("ComponentProvider","Removing Datastore"),ov.delete(t),i.terminate())})(this),Promise.resolve()}}function mR(r,e,t,i={}){var o;r=ti(r,Wc);const l=Ko(e),d=r._getSettings(),p=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),y=`${e}:${t}`;l&&(Ov(`https://${y}`),Lv("Firestore",!0)),d.host!==K0&&d.host!==y&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:y,ssl:l,emulatorOptions:i});if(!Ds(v,p)&&(r._setSettings(v),i.mockUserToken)){let E,x;if(typeof i.mockUserToken=="string")E=i.mockUserToken,x=Jt.MOCK_USER;else{E=jT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new we(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Jt(S)}r._authCredentials=new T1(new j_(E,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hc(this.firestore,e,this._query)}}class Nt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(El(t,Nt._jsonSchema))return new Nt(e,i||null,new xe(ut.fromString(t.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:St("string",Nt._jsonSchemaVersion),referencePath:St("string")};class Ui extends Hc{constructor(e,t,i){super(e,t,Wf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new xe(e))}withConverter(e){return new Ui(this.firestore,e,this._path)}}function xr(r,e,...t){if(r=Wt(r),V_("collection","path",e),r instanceof Wc){const i=ut.fromString(e,...t);return Ty(i),new Ui(r,null,i)}{if(!(r instanceof Nt||r instanceof Ui))throw new we(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ut.fromString(e,...t));return Ty(i),new Ui(r.firestore,null,i)}}function zn(r,e,...t){if(r=Wt(r),arguments.length===1&&(e=Lf.newId()),V_("doc","path",e),r instanceof Wc){const i=ut.fromString(e,...t);return Ey(i),new Nt(r,null,new xe(i))}{if(!(r instanceof Nt||r instanceof Ui))throw new we(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ut.fromString(e,...t));return Ey(i),new Nt(r.firestore,r instanceof Ui?r.converter:null,new xe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="AsyncQueue";class cv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new S0(this,"async_queue_retry"),this.oc=()=>{const i=Oh();i&&pe(uv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Oh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Oh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Jr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Zo(e))throw e;pe(uv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,ei("INTERNAL UNHANDLED ERROR: ",dv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=ip.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Ae(47125,{hc:dv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function dv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ta extends Wc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new cv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cv(e),this._firestoreClient=void 0,await e}}}function gR(r,e){const t=typeof r=="object"?r:zv(),i=typeof r=="string"?r:mc,o=If(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=NT("firestore");l&&mR(o,...l)}return o}function up(r){if(r._terminated)throw new we(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yR(r),r._firestoreClient}function yR(r){var e,t,i;const o=r._freezeSettings(),l=(function(p,y,v,E){return new z1(p,y,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,G0(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new cR(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(Ht.fromBase64String(e))}catch(t){throw new we(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bn(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(El(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:St("string",Bn._jsonSchemaVersion),bytes:St("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rr._jsonSchemaVersion}}static fromJSON(e){if(El(e,Rr._jsonSchema))return new Rr(e.latitude,e.longitude)}}Rr._jsonSchemaVersion="firestore/geoPoint/1.0",Rr._jsonSchema={type:St("string",Rr._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(El(e,Ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ar(e.vectorValues);throw new we(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ar._jsonSchemaVersion="firestore/vectorValue/1.0",Ar._jsonSchema={type:St("string",Ar._jsonSchemaVersion),vectorValues:St("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=/^__.*__$/;class _R{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}class Q0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Y0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ec:r})}}class dp{constructor(e,t,i,o,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new dp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Sc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Y0(this.Ec)&&vR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class wR{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zc(e)}Dc(e,t,i,o=!1){return new dp({Ec:e,methodName:t,bc:i,path:$t.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J0(r){const e=r._freezeSettings(),t=zc(r._databaseId);return new wR(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ER(r,e,t,i,o,l={}){const d=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);hp("Data must be an object, but it was:",d,i);const p=X0(i,d);let y,v;if(l.merge)y=new An(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const x of l.mergeFields){const S=gf(e,x,t);if(!d.contains(S))throw new we(ee.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);ew(E,S)||E.push(S)}y=new An(E),v=d.fieldTransforms.filter((x=>y.covers(x.field)))}else y=null,v=d.fieldTransforms;return new _R(new yn(p),y,v)}class Gc extends cp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gc}}function TR(r,e,t,i){const o=r.Dc(1,e,t);hp("Data must be an object, but it was:",o,i);const l=[],d=yn.empty();Xi(i,((y,v)=>{const E=fp(e,y,t);v=Wt(v);const x=o.gc(E);if(v instanceof Gc)l.push(E);else{const S=Kc(v,x);S!=null&&(l.push(E),d.set(E,S))}}));const p=new An(l);return new Q0(d,p,o.fieldTransforms)}function xR(r,e,t,i,o,l){const d=r.Dc(1,e,t),p=[gf(e,i,t)],y=[o];if(l.length%2!=0)throw new we(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)p.push(gf(e,l[S])),y.push(l[S+1]);const v=[],E=yn.empty();for(let S=p.length-1;S>=0;--S)if(!ew(v,p[S])){const M=p[S];let W=y[S];W=Wt(W);const K=d.gc(M);if(W instanceof Gc)v.push(M);else{const B=Kc(W,K);B!=null&&(v.push(M),E.set(M,B))}}const x=new An(v);return new Q0(E,x,d.fieldTransforms)}function Kc(r,e){if(Z0(r=Wt(r)))return hp("Unsupported field value:",e,r),X0(r,e);if(r instanceof cp)return(function(i,o){if(!Y0(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let d=0;for(const p of i){let y=Kc(p,o.yc(d));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),d++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ct.fromDate(i);return{timestampValue:Ec(o.serializer,l)}}if(i instanceof ct){const l=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ec(o.serializer,l)}}if(i instanceof Rr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Bn)return{bytesValue:p0(o.serializer,i._byteString)};if(i instanceof Nt){const l=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Qf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ar)return(function(d,p){return{mapValue:{fields:{[W_]:{stringValue:H_},[gc]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw p.wc("VectorValues must only contain numeric values.");return Hf(p.serializer,v)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Mf(i)}`)})(r,e)}function X0(r,e){const t={};return M_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(r,((i,o)=>{const l=Kc(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Z0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ct||r instanceof Rr||r instanceof Bn||r instanceof Nt||r instanceof cp||r instanceof Ar)}function hp(r,e,t){if(!Z0(t)||!O_(t)){const i=Mf(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function gf(r,e,t){if((e=Wt(e))instanceof qc)return e._internalPath;if(typeof e=="string")return fp(r,e);throw Sc("Field path arguments must be of type string or ",r,!1,void 0,t)}const IR=new RegExp("[~\\*/\\[\\]]");function fp(r,e,t){if(e.search(IR)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new qc(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Sc(r,e,t,i,o){const l=i&&!i.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(l||d)&&(y+=" (found",l&&(y+=` in field ${i}`),d&&(y+=` in document ${o}`),y+=")"),new we(ee.INVALID_ARGUMENT,p+r+y)}function ew(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SR extends tw{data(){return super.data()}}function nw(r,e){return typeof e=="string"?fp(r,e):e instanceof qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new we(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PR{convertValue(e,t="none"){switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Xi(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[gc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>Et(d.doubleValue)));return new Ar(l)}convertGeoPoint(e){return new Rr(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Dc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ul(e));default:return null}}convertTimestamp(e){const t=Wi(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ut.fromString(e);Ze(w0(i),9688,{name:e});const o=new cl(i.get(1),i.get(3)),l=new xe(i.popFirst(5));return o.isEqual(t)||ei(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Ka{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class js extends tw{constructor(e,t,i,o,l,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(nw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=js._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}js._jsonSchemaVersion="firestore/documentSnapshot/1.0",js._jsonSchema={type:St("string",js._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class ic extends js{data(e={}){return super.data(e)}}class Fo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ka(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ic(this._firestore,this._userDataWriter,i.key,i,new Ka(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const y=new ic(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ka(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const y=new ic(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ka(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),E=d.indexOf(p.doc.key)),{type:AR(p.type),doc:y,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function AR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(r){r=ti(r,Nt);const e=ti(r.firestore,ta);return fR(up(e),r._key).then((t=>kR(e,r,t)))}Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:St("string",Fo._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class rw extends PR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,t)}}function qo(r){r=ti(r,Hc);const e=ti(r.firestore,ta),t=up(e),i=new rw(e);return CR(r._query),pR(t,r._query).then((o=>new Fo(e,i,r,o)))}function Ku(r,e,t,...i){r=ti(r,Nt);const o=ti(r.firestore,ta),l=J0(o);let d;return d=typeof(e=Wt(e))=="string"||e instanceof qc?xR(l,"updateDoc",r._key,e,t,i):TR(l,"updateDoc",r._key,e),pp(o,[d.toMutation(r._key,ur.exists(!0))])}function Qa(r){return pp(ti(r.firestore,ta),[new qf(r._key,ur.none())])}function Ya(r,e){const t=ti(r.firestore,ta),i=zn(r),o=RR(r.converter,e);return pp(t,[ER(J0(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,ur.exists(!1))]).then((()=>i))}function pp(r,e){return(function(i,o){const l=new Jr;return i.asyncQueue.enqueueAndForget((async()=>tR(await hR(i),o,l))),l.promise})(up(r),e)}function kR(r,e,t){const i=t.docs.get(e._key),o=new rw(r);return new js(r,o,e._key,i,new Ka(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Jo=o})(Qo),Uo(new Vs("firestore",((i,{instanceIdentifier:o,options:l})=>{const d=i.getProvider("app").getImmediate(),p=new ta(new x1(i.getProvider("auth-internal")),new C1(d,i.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new we(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(v.options.projectId,E)})(d,o),d);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),Mi(gy,yy,e),Mi(gy,yy,"esm2017")})();const NR={apiKey:"AIzaSyCOOnlmEcAcJywsS93LLfLSywy9ENqnppM",authDomain:"tyler-manga-library.firebaseapp.com",projectId:"tyler-manga-library",storageBucket:"tyler-manga-library.firebasestorage.app",messagingSenderId:"307412068362",appId:"1:307412068362:web:6cfe5666187439dfa757f3"},iw=Uv(NR),zi=_1(iw),wt=gR(iw),sw=Y.createContext(null);function bR({children:r}){const[e,t]=Y.useState(null),[i,o]=Y.useState(!1),[l,d]=Y.useState(!0);Y.useEffect(()=>{const v=uS(zi,async E=>{if(t(E),E)try{const x=zn(wt,"admins",E.uid);if((await hv(x)).exists())o(!0);else{const M=zn(wt,"roles",E.uid),W=await hv(M);W.exists()&&W.data().admin===!0?o(!0):o(!1)}}catch(x){console.error("Error checking admin role:",x),o(!1)}else o(!1);d(!1)});return()=>v()},[]);const p=async(v,E)=>{await h_(zi,v,E)},y=async()=>{await f_(zi)};return h.jsx(sw.Provider,{value:{user:e,admin:i,loading:l,login:p,logout:y},children:r})}function Cl(){return Y.useContext(sw)}function jR({onClose:r}){const[e,t]=Y.useState("login"),[i,o]=Y.useState(""),[l,d]=Y.useState("");async function p(){try{await I_(zi,new Ir),r()}catch(E){alert(E.message)}}async function y(E){E.preventDefault();try{await h_(zi,i,l),r()}catch(x){alert(x.message)}}async function v(E){E.preventDefault();try{await oS(zi,i,l),r()}catch(x){alert(x.message)}}return h.jsx("div",{className:"auth-modal-backdrop",onClick:r,children:h.jsxs("div",{className:"auth-modal",onClick:E=>E.stopPropagation(),children:[h.jsx("h2",{className:"auth-title",children:e==="login"?"Sign In":"Create Account"}),h.jsxs("button",{className:"google-btn",onClick:p,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsx("div",{className:"auth-divider",children:h.jsx("span",{children:"or"})}),h.jsxs("form",{onSubmit:e==="login"?y:v,className:"auth-form",children:[h.jsx("input",{type:"email",placeholder:"Email address",className:"auth-input",value:i,onChange:E=>o(E.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:l,onChange:E=>d(E.target.value),required:!0}),h.jsx("button",{className:"auth-submit",children:e==="login"?"Sign In":"Create Account"})]}),h.jsx("div",{className:"auth-switcher",children:e==="login"?h.jsxs("p",{children:["No account?"," ",h.jsx("button",{onClick:()=>t("register"),children:"Register"})]}):h.jsxs("p",{children:["Already have an account?"," ",h.jsx("button",{onClick:()=>t("login"),children:"Sign in"})]})}),h.jsx("button",{className:"auth-close",onClick:r,children:"Close"})]})})}function DR(){const[r,e]=Y.useState(!1),[t,i]=Y.useState(!1),{user:o,admin:l}=Cl(),d=Ef();async function p(){try{await f_(zi),e(!1),d("/")}catch(y){console.error(y),alert("Logout failed.")}}return h.jsxs(h.Fragment,{children:[h.jsxs("button",{className:`menu-toggle ${r?"active":""}`,onClick:()=>e(!r),children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("nav",{className:`menu-panel ${r?"open":""}`,children:[h.jsx(za,{to:"/",className:"menu-item",onClick:()=>e(!1),children:"Home"}),h.jsx(za,{to:"/manga",className:"menu-item",onClick:()=>e(!1),children:"Manga"}),h.jsx(za,{to:"/anime",className:"menu-item",onClick:()=>e(!1),children:"Anime"}),h.jsx(za,{to:"/tcg",className:"menu-item",onClick:()=>e(!1),children:"TCG"}),l&&h.jsx(za,{to:"/dashboard",className:"menu-item",onClick:()=>e(!1),children:"Dashboard"}),h.jsxs("div",{className:"auth-section",children:[h.jsx("p",{className:"auth-section-status",children:o?`Signed in as ${o.email||o.uid}`:"Not signed in"}),h.jsxs("div",{children:[!o&&h.jsx("button",{className:"auth-btn",onClick:()=>{e(!1),i(!0)},children:"Sign in"}),o&&h.jsx("button",{className:"auth-btn secondary",onClick:p,children:"Sign out"})]})]})]}),t&&h.jsx(jR,{onClose:()=>i(!1)})]})}function VR(){return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{textAlign:"center",marginTop:"32px",marginBottom:"24px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2.2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"im_ok's Collection Hub"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.95rem"},children:"A quiet little corner of the internet for my shelves, lists, and cardboard addictions."}),h.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"999px",border:"1px solid rgba(255,182,193,0.35)",background:"rgba(43,15,29,0.72)",boxShadow:"0 8px 24px rgba(0,0,0,0.55)",marginTop:"12px",fontSize:"0.85rem",color:"var(--text-soft)"},children:"Manga | Anime | TCG"})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gap:"20px",marginTop:"24px"},children:[h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"About me"}),h.jsxs("p",{style:{margin:0,color:"var(--text-soft)",fontSize:"0.9rem",lineHeight:1.5},children:["Hey, I go by ",h.jsx("strong",{children:"im_ok"}),". I hoard manga, binge anime, and collect way too many trading cards. This site is where I track everything: volumes on my shelves, finished shows, and growing TCG binders."]}),h.jsx("p",{style:{marginTop:"10px",color:"var(--text-soft)",fontSize:"0.9rem"},children:"You'll find detailed stats, reading history, and collection values across the different pages - it's basically my personal library dashboard."}),h.jsxs("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"6px"},children:[h.jsx("span",{className:"pill",children:"Manga library power user"}),h.jsx("span",{className:"pill",children:"MAL-synced anime list"}),h.jsx("span",{className:"pill",children:"Pokemon & One Piece TCG"}),h.jsx("span",{className:"pill",children:"Automation & data nerd"})]})]}),h.jsxs("article",{className:"card",children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"8px",fontSize:"1.2rem",color:"#ffb6c1"},children:"Explore the site"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(210px, 1fr))",gap:"14px",marginTop:"10px"},children:[h.jsxs("a",{href:"/base/manga",className:"section-card",children:[h.jsx("h3",{children:"Manga Library"}),h.jsx("p",{children:"Full manga collection & wishlist, with covers, stats, and release tracking."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Firestore-powered"}),h.jsx("span",{className:"section-chip",children:"Library & wishlist"}),h.jsx("span",{className:"section-chip",children:"Release calendar"})]})]}),h.jsxs("a",{href:"/base/anime",className:"section-card",children:[h.jsx("h3",{children:"Anime Library"}),h.jsx("p",{children:"Read-only mirror of my MAL list, with filters, stats, and pretty cards."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"MAL synced"}),h.jsx("span",{className:"section-chip",children:"Status filters"}),h.jsx("span",{className:"section-chip",children:"Quick stats"})]})]}),h.jsxs("a",{href:"/base/tcg",className:"section-card",children:[h.jsx("h3",{children:"TCG Collection"}),h.jsx("p",{children:"Pokemon & One Piece TCG cards tracked with quantities, prices, and value."}),h.jsxs("div",{className:"section-chip-row",children:[h.jsx("span",{className:"section-chip accent",children:"Tracked in Firestore"}),h.jsx("span",{className:"section-chip",children:"Value vs paid"}),h.jsx("span",{className:"section-chip",children:"Per-game breakdown"})]})]})]})]})]}),h.jsx("footer",{style:{marginTop:"28px",fontSize:"0.78rem",color:"var(--text-soft)",textAlign:"center"},children:"Built as a static GitHub Pages site. Data lives in Firestore & MyAnimeList."})]})}function Ba(r){let e=(r||"").trim();const t=e.match(/^(.*?)(?:,?\s*(?:Vol\.|Volume)\s*(\d+)(?:\s*[--]\s*\d+)?\s*)?(?:\s*\([^)]*\))?$/i),i=t?t[1].trim().toLowerCase():e.toLowerCase(),o=t&&t[2]?parseInt(t[2],10):0;return{name:i,vol:Number.isFinite(o)?o:0}}function Mh(r){if(typeof r=="number")return r;if(r==null)return 0;const e=String(r).replace(/[^0-9.-]/g,""),t=parseFloat(e);return Number.isFinite(t)?t:0}function OR(r){if(typeof r=="number")return r;if(r==null||r==="")return 0;const e=parseInt(r,10);return Number.isFinite(e)?e:0}function LR(r,e){const t=r.length,i=e.length,o=t+i,l=r.filter(de=>de.read).length,d=t-l,p=t?Math.round(l/t*100):0;let y=0,v=0,E=0;r.forEach(de=>{y+=Mh(de.amountPaid),v+=Mh(de.msrp),E+=Mh(de.collectiblePrice)});let x=0,S=0;r.forEach(de=>{const k=OR(de.pageCount);x+=k,de.read&&(S+=k)});const M={10:0,9:0,8:0,7:0,6:0,5:0,4:0,3:0,2:0,1:0};let W=0,K=0;r.forEach(de=>{const k=de.rating==null||de.rating===""?NaN:parseFloat(de.rating);if(!Number.isFinite(k)||k<=0)return;const I=String(Math.round(k));M[I]!=null&&(M[I]+=1),W+=k,K+=1});const B=K?W/K:0,G=new Date,Z=[];for(let de=11;de>=0;de-=1){const k=new Date(G.getFullYear(),G.getMonth()-de,1),I=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}`;Z.push({key:I,label:k.toLocaleString(void 0,{month:"short"}),count:0})}const ie=Object.fromEntries(Z.map((de,k)=>[de.key,k]));r.forEach(de=>{if(!de.dateRead)return;const k=de.dateRead.slice(0,7),I=ie[k];I!=null&&(Z[I].count+=1)});const ce={};r.forEach(de=>{const k=(de.publisher||"").trim();k&&(ce[k]=(ce[k]||0)+1)});const Ie=Object.entries(ce).sort((de,k)=>k[1]-de[1]).slice(0,5).map(([de,k])=>({name:de,count:k}));return{totalBooks:o,totalLibrary:t,totalWishlist:i,readBooks:l,unreadBooks:d,readPct:p,paidTotal:y,msrpTotal:v,collectibleTotal:E,pagesTotal:x,pagesRead:S,avgRating:B,ratingBuckets:M,months:Z,topPublishers:Ie}}function MR({library:r,wishlist:e}){const t=Y.useMemo(()=>LR(r,e),[r,e]);if(!t.totalBooks)return h.jsx("div",{className:"manga-empty-state",children:"No manga loaded yet. Once your Firestore library & wishlist are pulled in, this dashboard will light up."});const i=Math.max(...Object.values(t.ratingBuckets),1),o=t.topPublishers.length>0?Math.max(...t.topPublishers.map(d=>d.count),1):1,l=t.months.length>0?Math.max(...t.months.map(d=>d.count),1):1;return h.jsxs("div",{className:"manga-dashboard",children:[h.jsxs("div",{className:"manga-dashboard-grid",children:[h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Collection"}),h.jsx("div",{className:"manga-stat-value",children:t.totalBooks})]}),h.jsxs("div",{className:"manga-stat-sub",children:["Library: ",t.totalLibrary,"  |  Wishlist: ",t.totalWishlist]})]}),h.jsxs("div",{className:"manga-pie-wrap",children:[h.jsx("div",{className:"manga-pie",style:{"--pct":t.readPct},children:h.jsxs("div",{className:"manga-pie-label",children:[t.readPct,"% read"]})}),h.jsxs("div",{className:"manga-stat-sub",children:[h.jsx("strong",{children:t.readBooks})," read  | "," ",h.jsx("strong",{children:t.unreadBooks})," unread in your library.",h.jsx("br",{}),"Perfect for tracking backlog vs progress."]})]})]}),h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Spending & Pages"}),h.jsxs("div",{className:"manga-stat-value",children:["$",t.paidTotal.toFixed(0)]})]}),h.jsxs("div",{className:"manga-stat-sub",children:["Pages owned: ",t.pagesTotal.toLocaleString(),"  |  Read:"," ",t.pagesRead.toLocaleString()]})]}),h.jsxs("div",{className:"manga-stat-sub",children:["MSRP (if set): $",t.msrpTotal.toFixed(0),"  |  Collectible value: $",t.collectibleTotal.toFixed(0),h.jsx("br",{}),"Avg rating:"," ",t.avgRating?t.avgRating.toFixed(2):"N/A"," ","/ 10"]})]}),h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Reading Pace"}),h.jsx("div",{className:"manga-stat-value",children:t.months.reduce((d,p)=>d+p.count,0)})]}),h.jsx("div",{className:"manga-stat-sub",children:"Volumes finished in the last 12 months"})]}),h.jsx("div",{className:"manga-bar-chart",children:t.months.map(d=>h.jsxs("div",{className:"manga-bar",children:[h.jsx("div",{className:"manga-bar-fill",style:{height:`${d.count/l*100||0}%`}}),h.jsx("div",{className:"manga-bar-label",children:d.label}),d.count>0&&h.jsx("div",{className:"manga-bar-value",children:d.count})]},d.key))})]})]}),h.jsxs("div",{className:"manga-dashboard-grid",style:{marginTop:"14px",gridTemplateColumns:"minmax(0, 1.3fr) minmax(0, 1.7fr)"},children:[h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Ratings"}),h.jsx("div",{className:"manga-stat-value",children:Object.values(t.ratingBuckets).reduce((d,p)=>d+p,0)})]}),h.jsx("div",{className:"manga-stat-sub",children:"How you've scored your volumes"})]}),h.jsx("div",{className:"manga-bar-chart",children:Object.entries(t.ratingBuckets).sort((d,p)=>Number(p[0])-Number(d[0])).map(([d,p])=>h.jsxs("div",{className:"manga-bar",children:[h.jsx("div",{className:"manga-bar-fill",style:{height:`${p/i*100||0}%`}}),h.jsx("div",{className:"manga-bar-label",children:d}),p>0&&h.jsx("div",{className:"manga-bar-value",children:p})]},d))})]}),h.jsxs("div",{className:"manga-stat-card",children:[h.jsxs("div",{className:"manga-stat-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"manga-stat-label",children:"Top Publishers"}),h.jsx("div",{className:"manga-stat-value",children:t.topPublishers.reduce((d,p)=>d+p.count,0)})]}),h.jsx("div",{className:"manga-stat-sub",children:"Most common publishers in your library"})]}),t.topPublishers.length===0?h.jsx("div",{className:"manga-stat-sub",children:"No publisher data yet - add some volumes first."}):h.jsx("div",{className:"manga-bar-chart",children:t.topPublishers.map(d=>h.jsxs("div",{className:"manga-bar",children:[h.jsx("div",{className:"manga-bar-fill",style:{height:`${d.count/o*100||0}%`}}),h.jsx("div",{className:"manga-bar-label",children:d.name.length>8?`${d.name.slice(0,8)}...`:d.name}),h.jsx("div",{className:"manga-bar-value",children:d.count})]},d.name))})]})]})]})}function FR(){const{admin:r}=Cl(),e=r,[t,i]=Y.useState("library"),[o,l]=Y.useState([]),[d,p]=Y.useState([]),[y,v]=Y.useState([]),[E,x]=Y.useState([]),[S,M]=Y.useState(!0),[W,K]=Y.useState(""),[B,G]=Y.useState(""),[Z,ie]=Y.useState(""),[ce,Ie]=Y.useState(!1),[de,k]=Y.useState(()=>new Set),[I,R]=Y.useState(null),[A,L]=Y.useState({open:!1,mode:"add",list:"library",data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},editingId:null,multiAdd:!1,startVol:"",endVol:""}),[N,P]=Y.useState({open:!1,index:0,items:[]});async function et(){const b=await qo(xr(wt,"library")),oe=[];b.forEach(V=>{const D=V.data();oe.push({id:V.id,title:D.title||"",authors:D.authors||"Unknown",publisher:D.publisher||"Unknown",demographic:D.demographic||"",genre:D.genre||"",subGenre:D.subGenre||"",date:D.date||"Unknown",cover:D.cover||"",isbn:D.isbn||"",pageCount:D.pageCount!==void 0&&D.pageCount!==null?D.pageCount:"",rating:D.rating!==void 0&&D.rating!==null?D.rating:"",amountPaid:D.amountPaid!==void 0&&D.amountPaid!==null?D.amountPaid:"",dateRead:D.dateRead||"",datePurchased:D.datePurchased||"",msrp:D.msrp!==void 0&&D.msrp!==null?D.msrp:"",specialType:D.specialType||"",specialVolumes:D.specialVolumes!==void 0&&D.specialVolumes!==null?D.specialVolumes:"",collectiblePrice:D.collectiblePrice!==void 0&&D.collectiblePrice!==null?D.collectiblePrice:"",read:!!D.read,amazonURL:D.amazonURL||"",kind:"library"})}),oe.sort((V,D)=>{const Q=Ba(V.title),me=Ba(D.title),Ve=Q.name.localeCompare(me.name);return Ve!==0?Ve:Q.vol-me.vol}),l(oe),v(V=>{const D=new Set(V);return oe.forEach(Q=>D.add(Q.title||"")),Array.from(D).filter(Boolean).sort()})}async function rt(){const b=await qo(xr(wt,"wishlist")),oe=[];b.forEach(V=>{const D=V.data();oe.push({id:V.id,title:D.title||"",authors:D.authors||"Unknown",publisher:D.publisher||"Unknown",date:D.date||"Unknown",cover:D.cover||"",isbn:D.isbn||"",pageCount:D.pageCount!==void 0&&D.pageCount!==null?D.pageCount:"",rating:D.rating!==void 0&&D.rating!==null?D.rating:"",amountPaid:D.amountPaid!==void 0&&D.amountPaid!==null?D.amountPaid:"",specialType:D.specialType||"",specialVolumes:D.specialVolumes!==void 0&&D.specialVolumes!==null?D.specialVolumes:"",collectiblePrice:D.collectiblePrice!==void 0&&D.collectiblePrice!==null?D.collectiblePrice:"",amazonURL:D.amazonURL||"",kind:"wishlist"})}),oe.sort((V,D)=>{const Q=Ba(V.title),me=Ba(D.title),Ve=Q.name.localeCompare(me.name);return Ve!==0?Ve:Q.vol-me.vol}),p(oe),v(V=>{const D=new Set(V);return oe.forEach(Q=>D.add(Q.title||"")),Array.from(D).filter(Boolean).sort()})}Y.useEffect(()=>{let b=!1;async function oe(){M(!0),K("");try{await Promise.all([et(),rt()]),b||M(!1)}catch(V){console.error(V),b||(K("Failed to load manga data from Firestore."),M(!1))}}return oe(),()=>{b=!0}},[]);const yt=Y.useMemo(()=>{const b=B.trim().toLowerCase();return b?o.filter(oe=>[oe.title,oe.authors,oe.publisher,oe.isbn,oe.date,String(oe.pageCount??"")].join(" ").toLowerCase().includes(b)):o},[o,B]),qe=Y.useMemo(()=>{const b=Z.trim().toLowerCase();return b?d.filter(oe=>[oe.title,oe.authors,oe.publisher,oe.isbn,oe.date,String(oe.pageCount??"")].join(" ").toLowerCase().includes(b)):d},[d,Z]);function le(){e&&(Ie(b=>!b),k(new Set))}function ye(b){k(oe=>{const V=new Set(oe);return V.has(b)?V.delete(b):V.add(b),V})}async function ue(b){if(!e){alert("Multi-select actions require admin access.");return}const oe=Array.from(de);if(!oe.length){alert("Select at least one item first.");return}const V=t==="library";try{if(b==="move")if(V){if(!window.confirm(`Move ${oe.length} item(s) to Wishlist?`))return;for(const D of oe){const Q=o.find(Ve=>Ve.id===D);if(!Q)continue;const me={title:Q.title,authors:Q.authors,publisher:Q.publisher,date:Q.date,isbn:Q.isbn,pageCount:Q.pageCount||"",cover:Q.cover,amazonURL:Q.amazonURL||"",specialType:Q.specialType||"",specialVolumes:Q.specialVolumes||"",collectiblePrice:Q.collectiblePrice||"",rating:Q.rating||""};await Ya(xr(wt,"wishlist"),me),await Qa(zn(wt,"library",D))}}else{if(!window.confirm(`Move ${oe.length} item(s) to Library?`))return;for(const D of oe){const Q=d.find(Ve=>Ve.id===D);if(!Q)continue;const me={title:Q.title,authors:Q.authors,publisher:Q.publisher,date:Q.date,isbn:Q.isbn,pageCount:Q.pageCount||"",cover:Q.cover,amountPaid:"",read:!1,rating:"",specialType:Q.specialType||"",specialVolumes:Q.specialVolumes||"",collectiblePrice:Q.collectiblePrice||""};await Ya(xr(wt,"library"),me),await Qa(zn(wt,"wishlist",D))}}else if(b==="markRead"&&V)for(const D of oe)await Ku(zn(wt,"library",D),{read:!0,dateRead:new Date().toISOString().slice(0,10)});else if(b==="markUnread"&&V)for(const D of oe)await Ku(zn(wt,"library",D),{read:!1,dateRead:"",rating:""});else if(b==="delete"){const D=V?"library":"wishlist";if(!window.confirm(`Delete ${oe.length} item(s) from ${V?"Library":"Wishlist"}?`))return;for(const Q of oe)await Qa(zn(wt,D,Q))}await Promise.all([et(),rt()]),k(new Set),Ie(!1)}catch(D){console.error(D),alert("Failed to apply multi-select action.")}}function F(b){R(b)}function J(){R(null)}const he=()=>L(b=>({...b,open:!1,mode:"add",editingId:null,data:{title:"",authors:"",publisher:"",demographic:"",genre:"",subGenre:"",date:"",cover:"",isbn:"",pageCount:"",rating:"",amountPaid:"",dateRead:"",datePurchased:"",msrp:"",specialType:"",specialVolumes:"",collectiblePrice:"",amazonURL:"",read:!1},multiAdd:!1,startVol:"",endVol:""})),Ne=Y.useMemo(()=>{const b=new Map;return[...o,...d].forEach(oe=>{const V=Ba(oe.title||"");if(V.name)if(b.has(V.name)){const D=b.get(V.name);D.maxVol=Math.max(D.maxVol,V.vol)}else{const D=(oe.title||"").replace(/,?\s*Vol\.?\s*\d+.*/i,"").trim()||oe.title||V.name;b.set(V.name,{display:D,maxVol:V.vol})}}),b},[o,d]),De=b=>{L(oe=>({...oe,open:!0,mode:"add",list:b,editingId:null,data:{...oe.data,title:"",list:b}}))},Oe=b=>{L({open:!0,mode:"edit",list:b.kind==="wishlist"?"wishlist":"library",editingId:b.id,data:{title:b.title||"",authors:b.authors||"",publisher:b.publisher||"",demographic:b.demographic||"",genre:b.genre||"",subGenre:b.subGenre||"",date:b.date||"",cover:b.cover||"",isbn:b.isbn||"",pageCount:b.pageCount||"",rating:b.rating||"",amountPaid:b.amountPaid||"",dateRead:b.dateRead||"",datePurchased:b.datePurchased||"",msrp:b.msrp||"",specialType:b.specialType||"",specialVolumes:b.specialVolumes||"",collectiblePrice:b.collectiblePrice||"",amazonURL:b.amazonURL||"",read:!!b.read}})},Te=(b,oe,V="text")=>{if(L(D=>({...D,data:{...D.data,[b]:V==="checkbox"?!!oe:oe}})),b==="title"){const D=String(oe||"").trim().toLowerCase();if(!D)x([]);else{const Q=[];Ne.forEach((me,Ve)=>{if(me.display.toLowerCase().includes(D)){const Xe=me.maxVol>0?me.maxVol+1:1;Q.push(`${me.display}, Vol. ${Xe}`)}}),x(Q.slice(0,6))}}};async function Fe(){if(!e)return;const{mode:b,list:oe,data:V,editingId:D,multiAdd:Q,startVol:me,endVol:Ve}=A;if(!V.title.trim()){alert("Title is required.");return}const Xe=Pe=>({title:Pe||V.title.trim(),authors:V.authors.trim(),publisher:V.publisher.trim(),demographic:V.demographic.trim(),genre:V.genre.trim(),subGenre:V.subGenre.trim(),date:V.date.trim(),cover:V.cover.trim(),isbn:V.isbn.trim(),pageCount:V.pageCount===""?"":Number(V.pageCount),rating:V.rating===""?"":Number(V.rating),amountPaid:V.amountPaid===""?"":Number(V.amountPaid),dateRead:V.dateRead.trim(),datePurchased:V.datePurchased.trim(),msrp:V.msrp===""?"":Number(V.msrp),specialType:V.specialType.trim(),specialVolumes:V.specialVolumes===""?"":Number(V.specialVolumes),collectiblePrice:V.collectiblePrice===""?"":Number(V.collectiblePrice),amazonURL:V.amazonURL.trim(),read:!!V.read,kind:oe});try{if(b==="add"&&Q){const Pe=Number(me||0),Qe=Number(Ve||0);if(!Number.isFinite(Pe)||!Number.isFinite(Qe)||Pe<=0||Qe<Pe){alert("Provide valid start/end volumes (start > 0, end >= start).");return}const on=[];for(let Hn=Pe;Hn<=Qe;Hn++){const Nn=`${V.title.trim()} Vol. ${Hn}`;on.push(Ya(xr(wt,oe),Xe(Nn)))}await Promise.all(on)}else b==="add"?await Ya(xr(wt,oe),Xe()):b==="edit"&&D&&await Ku(zn(wt,oe,D),Xe());await Promise.all([et(),rt()]),he()}catch(Pe){console.error(Pe),alert("Failed to save entry.")}}async function Be(b,oe){if(e&&window.confirm("Delete this entry?"))try{await Qa(zn(wt,oe,b)),await Promise.all([et(),rt()])}catch(V){console.error(V),alert("Failed to delete entry.")}}const Ge=()=>P({open:!1,index:0,items:[]}),vn=()=>{if(!de.size){alert("Select at least one entry first.");return}const oe=[...o,...d].filter(D=>de.has(D.id));if(!oe.length){alert("No items selected.");return}const V=oe.map(D=>({id:D.id,kind:D.kind||(t==="wishlist"?"wishlist":"library"),data:{title:D.title||"",authors:D.authors||"",publisher:D.publisher||"",demographic:D.demographic||"",genre:D.genre||"",subGenre:D.subGenre||"",date:D.date||"",cover:D.cover||"",isbn:D.isbn||"",pageCount:D.pageCount||"",rating:D.rating||"",amountPaid:D.amountPaid||"",dateRead:D.dateRead||"",datePurchased:D.datePurchased||"",msrp:D.msrp||"",specialType:D.specialType||"",specialVolumes:D.specialVolumes||"",collectiblePrice:D.collectiblePrice||"",amazonURL:D.amazonURL||"",read:!!D.read}}));P({open:!0,index:0,items:V})},Je=(b,oe,V="text")=>{P(D=>{const Q=[...D.items],me={...Q[D.index]};return me.data={...me.data,[b]:V==="checkbox"?!!oe:oe},Q[D.index]=me,{...D,items:Q}})},_n=()=>{P(b=>({...b,index:Math.min(b.index+1,b.items.length-1)}))},kn=()=>{P(b=>({...b,index:Math.max(b.index-1,0)}))};async function cr(){if(!e)return;const b=N.items;if(!b.length){Ge();return}try{const oe=b.map(V=>{const D={...V.data,pageCount:V.data.pageCount===""?"":Number(V.data.pageCount),rating:V.data.rating===""?"":Number(V.data.rating),amountPaid:V.data.amountPaid===""?"":Number(V.data.amountPaid),msrp:V.data.msrp===""?"":Number(V.data.msrp),collectiblePrice:V.data.collectiblePrice===""?"":Number(V.data.collectiblePrice),specialVolumes:V.data.specialVolumes===""?"":Number(V.data.specialVolumes),read:!!V.data.read},Q=V.kind==="wishlist"?"wishlist":"library";return Ku(zn(wt,Q,V.id),D)});await Promise.all(oe),await Promise.all([et(),rt()]),k(new Set),Ie(!1),Ge()}catch(oe){console.error(oe),alert("Failed to save bulk edits.")}}function en(b){const oe=de.has(b.id),V=b.kind==="library",D=()=>{ce&&e?ye(b.id):F(b)};return h.jsxs("div",{className:"manga-card"+(b.read&&V?" read":"")+(oe?" multiselect-selected":""),onClick:D,children:[h.jsx("div",{className:"manga-card-cover-wrap",children:h.jsx("img",{src:b.cover||"https://imgur.com/chUgq4W.png",alt:"Cover",loading:"lazy",decoding:"async"})}),h.jsxs("div",{className:"manga-card-body",children:[h.jsx("div",{className:"manga-card-title",children:b.title||"Untitled"}),h.jsxs("div",{className:"manga-card-meta",children:[b.authors&&b.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[b.authors,h.jsx("br",{})]}),b.publisher&&b.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[b.publisher,h.jsx("br",{})]}),b.date&&b.date!=="Unknown"&&b.date]}),b.isbn&&h.jsxs("div",{className:"manga-card-isbn",children:["ISBN: ",b.isbn]}),e&&h.jsxs("div",{className:"manga-card-actions",children:[h.jsx("button",{type:"button",className:"manga-btn mini",onClick:Q=>{Q.stopPropagation(),Oe(b)},children:"Edit"}),h.jsx("button",{type:"button",className:"manga-btn mini danger",onClick:Q=>{Q.stopPropagation(),Be(b.id,b.kind==="wishlist"?"wishlist":"library")},children:"Delete"})]})]})]},b.id)}const Wn=t==="library"?yt:qe;return h.jsxs("div",{className:"manga-page",children:[h.jsxs("header",{className:"manga-header",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"manga-header-title",children:["Tyler's Manga Library",h.jsx("span",{className:"manga-badge",children:"Firestore synced"})]}),h.jsx("div",{className:"manga-header-sub",children:"Library & Wishlist are managed via Firestore. This React port reuses the same collections as your original index.html."})]}),e&&h.jsx("div",{className:"manga-admin-actions",children:h.jsxs("button",{className:"manga-btn",onClick:()=>De(t==="wishlist"?"wishlist":"library"),children:["Add ",t==="wishlist"?"Wishlist":"Library"," Item"]})})]}),h.jsxs("div",{className:"manga-tabs",children:[h.jsx("button",{className:"manga-tab-btn"+(t==="library"?" active":""),onClick:()=>{i("library"),Ie(!1),k(new Set)},children:"Library"}),h.jsx("button",{className:"manga-tab-btn"+(t==="wishlist"?" active":""),onClick:()=>{i("wishlist"),Ie(!1),k(new Set)},children:"Wishlist"}),h.jsx("button",{className:"manga-tab-btn"+(t==="dashboard"?" active":""),onClick:()=>{i("dashboard"),Ie(!1),k(new Set)},children:"Manga Dashboard"})]}),t!=="dashboard"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-toolbar",children:[h.jsxs("div",{className:"manga-toolbar-left",children:[h.jsx("input",{type:"text",className:"manga-search-input",placeholder:t==="library"?"Search library by title, author, ISBN...":"Search wishlist...",value:t==="library"?B:Z,onChange:b=>t==="library"?G(b.target.value):ie(b.target.value)}),h.jsx("div",{className:"manga-counter",children:t==="library"?h.jsxs(h.Fragment,{children:["Library: ",yt.length," / ",o.length]}):h.jsxs(h.Fragment,{children:["Wishlist: ",qe.length," / ",d.length]})})]}),h.jsx("div",{className:"manga-toolbar-right",children:e&&h.jsx("button",{className:"manga-btn secondary"+(ce?" active":""),onClick:le,children:ce?"Exit Multi-select":"Multi-select"})})]}),e&&ce&&h.jsxs("div",{className:"manga-multiselect-bar",children:[h.jsxs("span",{children:["Selected: ",h.jsx("strong",{children:de.size})]}),h.jsx("button",{className:"manga-btn",onClick:vn,children:"Bulk Edit"}),h.jsxs("button",{className:"manga-btn secondary",onClick:()=>ue("move"),children:["Move to ",t==="library"?"Wishlist":"Library"]}),t==="library"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"manga-btn",onClick:()=>ue("markRead"),children:"Mark Read"}),h.jsx("button",{className:"manga-btn secondary",onClick:()=>ue("markUnread"),children:"Mark Unread"})]}),h.jsx("button",{className:"manga-btn danger",onClick:()=>ue("delete"),children:"Delete"})]})]}),S?h.jsx("div",{className:"manga-empty-state",children:"Loading manga from Firestore..."}):W?h.jsx("div",{className:"manga-empty-state",children:W}):t==="dashboard"?h.jsx(MR,{library:o,wishlist:d}):Wn.length===0?h.jsx("div",{className:"manga-empty-state",children:"No manga found. Try changing your search."}):h.jsx("div",{className:"manga-grid",children:Wn.map(b=>en(b))}),I&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:b=>{b.target===b.currentTarget&&J()},children:h.jsxs("div",{className:"manga-modal",children:[h.jsx("div",{className:"manga-modal-cover-wrap",children:h.jsx("img",{src:I.cover||"https://imgur.com/chUgq4W.png",alt:"Cover"})}),h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:I.title||"Untitled"}),h.jsx("button",{className:"manga-modal-close",onClick:J,type:"button",children:"Close"})]}),h.jsxs("div",{className:"manga-modal-meta",children:[I.authors&&I.authors!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Author(s):"})," ",I.authors,h.jsx("br",{})]}),I.publisher&&I.publisher!=="Unknown"&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Publisher:"})," ",I.publisher,h.jsx("br",{})]}),I.date&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Release:"})," ",I.date,h.jsx("br",{})]}),I.isbn&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"ISBN:"})," ",I.isbn,h.jsx("br",{})]})]}),h.jsxs("div",{className:"manga-modal-details",children:[I.pageCount&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Pages:"})," ",I.pageCount,h.jsx("br",{})]}),I.rating&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Rating:"})," ",I.rating,"/10",h.jsx("br",{})]}),I.amountPaid&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Amount Paid:"})," $",I.amountPaid,h.jsx("br",{})]}),I.msrp&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"MSRP:"})," $",I.msrp,h.jsx("br",{})]}),I.collectiblePrice&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Collectible:"})," $",I.collectiblePrice,h.jsx("br",{})]}),I.read&&I.dateRead&&h.jsxs(h.Fragment,{children:[h.jsx("strong",{children:"Date Read:"})," ",I.dateRead,h.jsx("br",{})]}),I.amazonURL&&h.jsx("div",{style:{marginTop:"6px"},children:h.jsx("a",{href:I.amazonURL,target:"_blank",rel:"noreferrer",children:"View on Amazon"})})]}),h.jsx("div",{className:"manga-modal-footer",children:h.jsx("div",{children:I.kind==="library"&&I.read?"Marked as read in your library.":I.kind==="library"?"In your library (unread).":"Wishlist item - not in library yet."})})]})]})}),e&&A.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:b=>{b.target===b.currentTarget&&he()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsx("div",{className:"manga-modal-title",children:A.mode==="add"?"Add Entry":"Edit Entry"}),h.jsx("button",{className:"manga-modal-close",onClick:he,type:"button",children:"Close"})]}),h.jsxs("div",{className:"admin-form-layout",children:[h.jsx("div",{className:"admin-cover-frame",children:h.jsx("img",{src:A.data.cover||"https://imgur.com/chUgq4W.png",alt:"Cover preview"})}),h.jsxs("div",{className:"admin-form-fields",children:[h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:A.data.title,onChange:b=>Te("title",b.target.value)})]})}),E.length>0&&h.jsx("div",{className:"title-suggestions",children:E.map((b,oe)=>h.jsx("button",{type:"button",className:"manga-btn mini",onClick:()=>Te("title",b),children:b},b+oe))}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:A.data.authors,onChange:b=>Te("authors",b.target.value)})]})}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:A.data.publisher,onChange:b=>Te("publisher",b.target.value)})]})}),h.jsxs("div",{className:"admin-row three",children:[h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:A.data.date,onChange:b=>Te("date",b.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:A.data.datePurchased,onChange:b=>Te("datePurchased",b.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:A.data.dateRead,onChange:b=>Te("dateRead",b.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",placeholder:"e.g. 192",value:A.data.pageCount,onChange:b=>Te("pageCount",b.target.value)})]}),h.jsxs("label",{children:["ISBN (library only)",h.jsx("input",{type:"text",value:A.data.isbn,onChange:b=>Te("isbn",b.target.value)})]})]}),h.jsx("div",{className:"admin-row",children:h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",placeholder:"Paste image URL here",value:A.data.cover,onChange:b=>Te("cover",b.target.value)})]})}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:A.data.amountPaid,onChange:b=>Te("amountPaid",b.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:A.data.msrp,onChange:b=>Te("msrp",b.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:A.data.collectiblePrice,onChange:b=>Te("collectiblePrice",b.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",min:"0",value:A.data.specialVolumes,onChange:b=>Te("specialVolumes",b.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:A.data.specialType,onChange:b=>Te("specialType",b.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:A.data.amazonURL,onChange:b=>Te("amazonURL",b.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:A.data.demographic,onChange:b=>Te("demographic",b.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:A.data.genre,onChange:b=>Te("genre",b.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:A.data.subGenre,onChange:b=>Te("subGenre",b.target.value)})]}),h.jsxs("label",{children:["Rating (1-10)",h.jsx("input",{type:"number",step:"0.5",min:"0",max:"10",value:A.data.rating,onChange:b=>Te("rating",b.target.value)})]})]}),h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:A.data.read,onChange:b=>Te("read",b.target.checked,"checkbox")}),h.jsx("span",{children:"Mark as read"})]}),h.jsxs("label",{className:"checkbox-inline",children:[h.jsx("input",{type:"checkbox",checked:A.multiAdd,onChange:b=>L(oe=>({...oe,multiAdd:b.target.checked}))}),h.jsx("span",{children:"Multi-create volumes"})]})]}),A.multiAdd&&h.jsxs("div",{className:"admin-row two",children:[h.jsxs("label",{children:["Start Volume",h.jsx("input",{type:"number",min:"1",value:A.startVol,onChange:b=>L(oe=>({...oe,startVol:b.target.value}))})]}),h.jsxs("label",{children:["End Volume",h.jsx("input",{type:"number",min:"1",value:A.endVol,onChange:b=>L(oe=>({...oe,endVol:b.target.value}))})]})]})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"flex-end",gap:"10px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:he,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:Fe,type:"button",children:A.mode==="add"?"Add":"Save"})]})]})})}),e&&N.open&&h.jsx("div",{className:"manga-modal-backdrop visible",onClick:b=>{b.target===b.currentTarget&&Ge()},children:h.jsx("div",{className:"manga-modal admin",children:h.jsxs("div",{className:"manga-modal-body",children:[h.jsxs("div",{className:"manga-modal-header",children:[h.jsxs("div",{className:"manga-modal-title",children:["Bulk Edit (",N.index+1," / ",N.items.length,")"]}),h.jsx("button",{className:"manga-modal-close",onClick:Ge,type:"button",children:"Close"})]}),N.items.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"manga-modal-subtitle",children:["Editing: ",N.items[N.index].data.title||"Untitled"]}),h.jsxs("div",{className:"admin-form-grid",children:[h.jsxs("label",{children:["Title",h.jsx("input",{type:"text",value:N.items[N.index].data.title,onChange:b=>Je("title",b.target.value)})]}),h.jsxs("label",{children:["Authors",h.jsx("input",{type:"text",value:N.items[N.index].data.authors,onChange:b=>Je("authors",b.target.value)})]}),h.jsxs("label",{children:["Publisher",h.jsx("input",{type:"text",value:N.items[N.index].data.publisher,onChange:b=>Je("publisher",b.target.value)})]}),h.jsxs("label",{children:["Demographic",h.jsx("input",{type:"text",value:N.items[N.index].data.demographic,onChange:b=>Je("demographic",b.target.value)})]}),h.jsxs("label",{children:["Genre",h.jsx("input",{type:"text",value:N.items[N.index].data.genre,onChange:b=>Je("genre",b.target.value)})]}),h.jsxs("label",{children:["Sub Genre",h.jsx("input",{type:"text",value:N.items[N.index].data.subGenre,onChange:b=>Je("subGenre",b.target.value)})]}),h.jsxs("label",{children:["Release Date",h.jsx("input",{type:"date",value:N.items[N.index].data.date,onChange:b=>Je("date",b.target.value)})]}),h.jsxs("label",{children:["ISBN",h.jsx("input",{type:"text",value:N.items[N.index].data.isbn,onChange:b=>Je("isbn",b.target.value)})]}),h.jsxs("label",{children:["Cover URL",h.jsx("input",{type:"text",value:N.items[N.index].data.cover,onChange:b=>Je("cover",b.target.value)})]}),h.jsxs("label",{children:["Page Count",h.jsx("input",{type:"number",value:N.items[N.index].data.pageCount,onChange:b=>Je("pageCount",b.target.value)})]}),h.jsxs("label",{children:["Rating",h.jsx("input",{type:"number",step:"0.5",min:"0",max:"10",value:N.items[N.index].data.rating,onChange:b=>Je("rating",b.target.value)})]}),h.jsxs("label",{children:["Amount Paid",h.jsx("input",{type:"number",step:"0.01",value:N.items[N.index].data.amountPaid,onChange:b=>Je("amountPaid",b.target.value)})]}),h.jsxs("label",{children:["MSRP",h.jsx("input",{type:"number",step:"0.01",value:N.items[N.index].data.msrp,onChange:b=>Je("msrp",b.target.value)})]}),h.jsxs("label",{children:["Collectible Price",h.jsx("input",{type:"number",step:"0.01",value:N.items[N.index].data.collectiblePrice,onChange:b=>Je("collectiblePrice",b.target.value)})]}),h.jsxs("label",{children:["Date Purchased",h.jsx("input",{type:"date",value:N.items[N.index].data.datePurchased,onChange:b=>Je("datePurchased",b.target.value)})]}),h.jsxs("label",{children:["Date Read",h.jsx("input",{type:"date",value:N.items[N.index].data.dateRead,onChange:b=>Je("dateRead",b.target.value)})]}),h.jsxs("label",{children:["Special Type",h.jsx("input",{type:"text",value:N.items[N.index].data.specialType,onChange:b=>Je("specialType",b.target.value)})]}),h.jsxs("label",{children:["Special Volumes",h.jsx("input",{type:"number",value:N.items[N.index].data.specialVolumes,onChange:b=>Je("specialVolumes",b.target.value)})]}),h.jsxs("label",{children:["Amazon URL",h.jsx("input",{type:"text",value:N.items[N.index].data.amazonURL,onChange:b=>Je("amazonURL",b.target.value)})]}),h.jsxs("label",{className:"checkbox-row",children:[h.jsx("input",{type:"checkbox",checked:N.items[N.index].data.read,onChange:b=>Je("read",b.target.checked,"checkbox")}),h.jsx("span",{children:"Marked as read"})]})]}),h.jsxs("div",{className:"manga-modal-footer",style:{justifyContent:"space-between",gap:"10px"},children:[h.jsxs("div",{children:[h.jsx("button",{className:"manga-btn secondary",onClick:kn,type:"button",disabled:N.index===0,children:"Previous"}),h.jsx("button",{className:"manga-btn secondary",onClick:_n,type:"button",disabled:N.index===N.items.length-1,style:{marginLeft:"6px"},children:"Next"})]}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{className:"manga-btn secondary",onClick:Ge,type:"button",children:"Cancel"}),h.jsx("button",{className:"manga-btn",onClick:cr,type:"button",children:"Save Edits"})]})]})]})]})})}),h.jsx("datalist",{id:"adminTitleSuggestions",children:y.map(b=>h.jsx("option",{value:b},b))})]})}const UR="https://imokmalworker.imokissick.workers.dev/?url=",zR="im_ok",fv=300,BR={1:"watching",2:"completed",3:"on_hold",4:"dropped",6:"plan_to_watch"};function $R(r){const e=BR[r.status]||(typeof r.status=="string"?r.status.toLowerCase():"unknown");return{id:r.anime_id||r.id,title:r.anime_title||r.title||"Untitled",episodes:r.anime_num_episodes??r.episodes??null,status:e,score:r.score??null}}function pv(){return[{id:1,title:"Cowboy Bebop",episodes:26,status:"completed",score:10},{id:2,title:"Fullmetal Alchemist: Brotherhood",episodes:64,status:"completed",score:10},{id:3,title:"Frieren: Beyond Journey's End",episodes:28,status:"watching",score:9},{id:4,title:"One Piece",episodes:1e3,status:"on_hold",score:8},{id:5,title:"Kaiju No. 8",episodes:12,status:"plan_to_watch",score:null}]}async function WR(r,e){const t=`https://myanimelist.net/animelist/${r}/load.json?status=7&offset=${e}`,i=await fetch(`${UR}${encodeURIComponent(t)}`);if(!i.ok)throw new Error(`Failed to fetch MAL list (offset ${e})`);return i.json()}async function HR(r=zR){const e=[];try{let t=0;for(;;){const i=await WR(r,t);if(!Array.isArray(i)||i.length===0||(e.push(...i),i.length<fv))break;t+=fv}}catch(t){return console.error("Failed to load MAL list; falling back to sample data.",t),pv()}return e.length?e.map($R):pv()}function qR(){const r=M=>M?M.toString().replace(/_/g," ").replace(/\b\w/g,W=>W.toUpperCase()):"Unknown",[e,t]=Y.useState([]),[i,o]=Y.useState([]),[l,d]=Y.useState(""),[p,y]=Y.useState("all"),[v,E]=Y.useState(!0),[x,S]=Y.useState("");return Y.useEffect(()=>{async function M(){try{const K=[...await HR()].sort((B,G)=>(B.title||"").localeCompare(G.title||""));t(K),o(K)}catch(W){console.error(W),S("Failed to load data from MAL.")}finally{E(!1)}}M()},[]),Y.useEffect(()=>{let M=[...e];if(p!=="all"&&(M=M.filter(W=>(W.status||"").toLowerCase()===p)),l){const W=l.toLowerCase();M=M.filter(K=>(K.title||"").toLowerCase().includes(W))}o(M)},[e,p,l]),h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"Anime Library"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Read-only mirror of your MyAnimeList entries."})]}),h.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"12px"},children:[h.jsx("input",{type:"text",placeholder:"Search anime by title...",value:l,onChange:M=>d(M.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid var(--border-soft)",background:"rgba(43,15,29,0.93)",color:"#fff",fontSize:"0.9rem"}}),h.jsxs("select",{value:p,onChange:M=>y(M.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid var(--border-soft)",background:"rgba(43,15,29,0.93)",color:"#fff",fontSize:"0.9rem"},children:[h.jsx("option",{value:"all",children:"All statuses"}),h.jsx("option",{value:"watching",children:"Watching"}),h.jsx("option",{value:"completed",children:"Completed"}),h.jsx("option",{value:"on_hold",children:"On Hold"}),h.jsx("option",{value:"dropped",children:"Dropped"}),h.jsx("option",{value:"plan_to_watch",children:"Plan to Watch"})]})]}),v&&h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading anime list from MAL..."}),x&&h.jsx("p",{style:{marginTop:"20px",color:"#ff8a80"},children:x}),!v&&!x&&h.jsxs("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",marginTop:"20px"},children:[i.length===0&&h.jsx("p",{style:{marginTop:"12px",color:"var(--text-soft)"},children:"No results match your filters yet."}),i.map(M=>h.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"16px",border:"1px solid rgba(255,182,193,0.16)",boxShadow:"var(--shadow-soft)",fontSize:"0.85rem",padding:"8px 8px 10px"},children:[h.jsx("div",{style:{fontWeight:600,color:"#ffc0cb",marginBottom:"4px"},children:M.title}),h.jsx("div",{style:{color:"var(--text-soft)"},children:M.episodes?`${M.episodes} eps`:"Episodes: ?"}),h.jsxs("div",{style:{color:"var(--text-soft)",fontSize:"0.78rem",marginTop:"4px"},children:["Status: ",r(M.status)]}),M.score!=null&&h.jsxs("div",{style:{color:"#ffd166",fontSize:"0.78rem",marginTop:"2px"},children:["Score: ",M.score||"N/A"]})]},M.id||M.title))]})]})}function GR(){const{admin:r}=Cl(),[e,t]=Y.useState([]),[i,o]=Y.useState(!0),[l,d]=Y.useState(""),[p,y]=Y.useState("all"),[v,E]=Y.useState({game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:""});Y.useEffect(()=>{async function G(){try{const Z=xr(wt,"tcg"),ie=await qo(Z),ce=[];ie.forEach(Ie=>ce.push({id:Ie.id,...Ie.data()})),t(ce)}catch(Z){console.error("Error loading TCG:",Z)}finally{o(!1)}}G()},[]);const x=e.filter(G=>{if(p!=="all"&&G.game!==p)return!1;if(!l)return!0;const Z=l.toLowerCase();return(G.name||"").toLowerCase().includes(Z)||(G.setName||"").toLowerCase().includes(Z)||(G.number||"").toLowerCase().includes(Z)}),S=e.reduce((G,Z)=>{const ie=Number(Z.quantity||1),ce=Number(Z.pricePaid||0),Ie=Number(Z.estimatedValue||0);return G.totalCards+=ie,G.totalPaid+=ie*ce,G.totalValue+=ie*Ie,Z.game==="pokemon"&&(G.pokemon+=ie),Z.game==="onepiece"&&(G.onepiece+=ie),G},{totalCards:0,totalPaid:0,totalValue:0,pokemon:0,onepiece:0}),M=S.totalValue-S.totalPaid,W=(G,Z)=>{E(ie=>({...ie,[G]:Z}))},K=async()=>{if(!r)return;if(!v.name.trim()){alert("Card name is required.");return}const G={game:v.game,name:v.name.trim(),setName:v.setName.trim(),number:v.number.trim(),rarity:v.rarity.trim(),condition:v.condition.trim(),quantity:Number(v.quantity||1),pricePaid:Number(v.pricePaid||0),estimatedValue:Number(v.estimatedValue||0)};try{const Z=xr(wt,"tcg");await Ya(Z,G),E({game:"pokemon",name:"",setName:"",number:"",rarity:"",condition:"",quantity:1,pricePaid:"",estimatedValue:""});const ie=await qo(Z),ce=[];ie.forEach(Ie=>ce.push({id:Ie.id,...Ie.data()})),t(ce)}catch(Z){console.error("Error adding card:",Z),alert("Failed to save card.")}},B=async G=>{if(r&&window.confirm("Delete this card?"))try{await Qa(zn(wt,"tcg",G)),t(Z=>Z.filter(ie=>ie.id!==G))}catch(Z){console.error("Delete error:",Z),alert("Failed to delete card.")}};return h.jsxs("main",{className:"page",children:[h.jsxs("header",{style:{marginTop:"32px",marginBottom:"16px"},children:[h.jsx("h1",{style:{margin:0,fontSize:"2rem",color:"#ffb6c1",textShadow:"0 0 8px rgba(255,182,193,0.8)"},children:"TCG Collection"}),h.jsx("p",{style:{margin:"6px 0 0",color:"var(--text-soft)",fontSize:"0.9rem"},children:"Pokemon & One Piece TCG cards with quantities, prices, and collection value."})]}),h.jsxs("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px",marginTop:"18px"},children:[h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.totalCards})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total paid"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",S.totalPaid.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Total value"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["$",S.totalValue.toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Unrealized gain / loss"}),h.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:M>=0?"#00e676":"#ff8a80"},children:[M>=0?"+":"-","$",Math.abs(M).toFixed(2)]})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"Pokemon cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.pokemon})]}),h.jsxs("div",{className:"card",style:{padding:"10px 12px",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:"One Piece cards"}),h.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700},children:S.onepiece})]})]}),h.jsxs("section",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"16px"},children:[h.jsx("input",{type:"text",placeholder:"Search by name, set, or number...",value:l,onChange:G=>d(G.target.value),style:{flex:"1 1 220px",minWidth:"220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"}}),h.jsxs("select",{value:p,onChange:G=>y(G.target.value),style:{flex:"0 0 220px",padding:"8px 12px",borderRadius:"999px",border:"1px solid #bb7f8f",background:"#2b0f1d",color:"#fff"},children:[h.jsx("option",{value:"all",children:"All games"}),h.jsx("option",{value:"pokemon",children:"Pokemon only"}),h.jsx("option",{value:"onepiece",children:"One Piece only"})]})]}),r&&h.jsxs("section",{className:"card",style:{marginTop:"16px",borderStyle:"dashed",borderColor:"rgba(255,182,193,0.5)"},children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"10px",fontSize:"1.05rem",color:"#ffb6c1"},children:"Add card (admin)"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Game",h.jsxs("select",{value:v.game,onChange:G=>W("game",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"},children:[h.jsx("option",{value:"pokemon",children:"Pokemon"}),h.jsx("option",{value:"onepiece",children:"One Piece"})]})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card name",h.jsx("input",{type:"text",value:v.name,onChange:G=>W("name",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Set name",h.jsx("input",{type:"text",value:v.setName,onChange:G=>W("setName",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Card number",h.jsx("input",{type:"text",value:v.number,onChange:G=>W("number",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Rarity",h.jsx("input",{type:"text",value:v.rarity,onChange:G=>W("rarity",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Condition",h.jsx("input",{type:"text",value:v.condition,onChange:G=>W("condition",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Quantity",h.jsx("input",{type:"number",min:"1",value:v.quantity,onChange:G=>W("quantity",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Price paid (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:v.pricePaid,onChange:G=>W("pricePaid",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]}),h.jsxs("label",{style:{fontSize:"0.8rem",color:"var(--text-soft)"},children:["Estimated value (per card)",h.jsx("input",{type:"number",step:"0.01",min:"0",value:v.estimatedValue,onChange:G=>W("estimatedValue",G.target.value),style:{width:"100%",marginTop:"3px",padding:"6px 8px",borderRadius:"8px",border:"1px solid #bb7f8f",background:"#1e0d14",color:"#fff"}})]})]}),h.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"10px"},children:h.jsx("button",{onClick:K,style:{padding:"6px 12px",borderRadius:"999px",border:"none",cursor:"pointer",fontWeight:600,background:"#ff69b4",color:"#1e0d14"},children:"Save card"})})]}),i?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"Loading TCG collection..."}):x.length===0?h.jsx("p",{style:{marginTop:"20px",color:"var(--text-soft)"},children:"No cards found."}):h.jsx("section",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(170px, 1fr))",marginTop:"20px"},children:x.map(G=>{const Z=Number(G.quantity||1),ie=Z*Number(G.pricePaid||0),ce=Z*Number(G.estimatedValue||0);return h.jsxs("article",{style:{background:"#2b0f1d",borderRadius:"12px",border:"1px solid rgba(255,182,193,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.55)",padding:"10px",fontSize:"0.82rem"},children:[h.jsx("div",{style:{fontWeight:700,color:"#ffb6c1",marginBottom:"4px"},children:G.name||"Unnamed card"}),h.jsx("div",{style:{color:"var(--text-soft)",marginBottom:"4px"},children:G.setName||""}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)"},children:[h.jsxs("span",{children:["#",G.number||"-"]}),h.jsx("span",{children:G.rarity||""})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Cond: ",G.condition||"N/A"]}),h.jsxs("span",{children:["Qty: ",Z]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"var(--text-soft)",marginTop:"4px"},children:[h.jsxs("span",{children:["Paid: $",ie.toFixed(2)]}),h.jsxs("span",{children:["Value: $",ce.toFixed(2)]})]}),h.jsxs("div",{style:{marginTop:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx("span",{style:{padding:"2px 7px",borderRadius:"999px",background:"rgba(255,105,180,0.18)",border:"1px solid rgba(255,105,180,0.5)",color:"#ffb6c1",fontSize:"0.7rem"},children:G.game==="pokemon"?"Pokemon":"One Piece"}),r&&h.jsx("button",{onClick:()=>B(G.id),style:{padding:"3px 8px",borderRadius:"999px",border:"1px solid rgba(244,67,54,0.7)",background:"rgba(244,67,54,0.12)",color:"#ff8a80",fontSize:"0.7rem",cursor:"pointer"},children:"Delete"})]})]},G.id)})})]})}const KR="https://discord.com/api/webhooks/1448287168845054004/cGWGPoH5LaTFlBZ1vxtgMjOfV9au6qyQ_9ZRnOWN9-AX0MNfwxKNWVcZYQHz0ESA7_4k",QR="https://discord.com/api/webhooks/1448288240871276616/101WI-B2p8tDR34Hl9fZxxb0QG01f1Eo5w1IvbttlQmP2wWFNJ0OI7UnJfJujKRNWW2Q",YR="https://discord.com/api/webhooks/1448329790942613667/wsC8psNZ-Ax2D1O9Gl4sJi6ay7df2cr7IrIdxMPwGZTBnkSUIY2NDpeVd98qW_4plz82";function Us(r){if(!r)return null;if(r instanceof Date)return r;if(r&&typeof r.toDate=="function")return r.toDate();const e=String(r).trim();if(!e)return null;const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(t){const[,l,d,p]=t;return new Date(Number(l),Number(d)-1,Number(p))}const i=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(i){let[,l,d,p]=i;const y=p.length===2?+`20${p}`:Number(p);return new Date(y,Number(l)-1,Number(d))}const o=new Date(e);return isNaN(o.getTime())?null:o}function ow(r){const e=(r.seriesKey||r.series||r.Series||r.title||r.Title||"").trim();return e?e.replace(/\bvolume\s+\d+.*$/i,"").replace(/\bvol\.?\s+\d+.*$/i,"").trim().toLowerCase():""}function JR(r){const e=new Map;for(const t of r){const i=ow(t)||t.id;if(!e.has(i)){const y=(t.series||t.Series||t.title||t.Title||"Unknown Series").trim();e.set(i,{key:i,title:y,publisher:t.publisher||t.Publisher||"",genre:t.genre||t.Genre||"",demographic:t.demographic||t.Demographic||"",volumes:0,totalPages:0,readPages:0,readVolumes:0,ratingSum:0,ratingCount:0})}const o=e.get(i);o.volumes+=1;const l=Number(t.pages||t.Pages||t.pageCount||0)||0;o.totalPages+=l,(!!t.read||t.status==="Read"||t.Read===!0)&&(o.readVolumes+=1,o.readPages+=l);const p=Number(t.rating||t.Rating);!isNaN(p)&&p>0&&(o.ratingSum+=p,o.ratingCount+=1)}return e}function ko(r,e,t=5){const i=new Map;for(const o of r.values()){const l=(o[e]||"").trim();if(!l)continue;const d=l.split(/[\/,]/).map(p=>p.trim()).filter(Boolean);for(const p of d)i.set(p,(i.get(p)||0)+1)}return[...i.entries()].sort((o,l)=>l[1]-o[1]).slice(0,t).map(([o,l])=>({name:o,count:l}))}function mv(r,e){const t=Array.from({length:12},(i,o)=>{const l=new Date(e,o,1);return{key:`${e}-${o}`,label:l.toLocaleString("default",{month:"short"}),year:e,month:o,value:0}});for(const i of r){const o=Us(i.dateRead||i.DateRead);!o||o.getFullYear()!==e||(t[o.getMonth()].value+=1)}return t}function Fh(r){const e=r.getFullYear(),t=`${r.getMonth()+1}`.padStart(2,"0"),i=`${r.getDate()}`.padStart(2,"0");return`${e}-${t}-${i}`}async function Uh(r,e){try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})})}catch(t){console.error("Webhook post failed",t)}}function XR(r){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=Array(7).fill(0);for(const l of r){const d=Us(l.dateRead||l.DateRead);d&&(t[d.getDay()]+=1)}if(!t.some(l=>l>0))return[];const o=t.reduce((l,d)=>Math.max(l,d),0)||1;return e.map((l,d)=>({label:l,value:t[d],pct:t[d]/o}))}function ZR(r,e=8){const t=[...r.values()];t.sort((l,d)=>d.volumes-l.volumes);const i=t.slice(0,e),o=i.reduce((l,d)=>Math.max(l,d.volumes),0)||1;return i.map(l=>({label:l.title,value:l.volumes,pct:l.volumes/o}))}function eA(r){const e=[];for(const t of r){const i=Us(t.releaseDate||t.ReleaseDate||t.date||t.Date)||null;if(!i)continue;const o=(t.title||t.series||t.Title||"Unknown Title").trim();e.push({date:i,title:o})}return e.sort((t,i)=>t.date-i.date),e}function tA(r){const e=new Date;for(const t of r)if(t.date>=e)return t;return r[r.length-1]||null}function nA(r){let e=0,t=0;for(const i of r){const o=Us(i.datePurchased||i.DatePurchased),l=Us(i.dateRead||i.DateRead);if(!o||!l)continue;const d=l-o;d<=0||(e+=d/(1e3*60*60*24),t+=1)}return t?e/t:null}function rA(r){let e=0,t=0,i=0;for(const o of r){const l=Number(o.msrp||o.MSRP||0)||0,d=Number(o.amountPaid||o.AmountPaid||o.pricePaid||0)||l||0,p=Number(o.collectiblePrice||o.CollectiblePrice||0)||0;e+=l,t+=d,i+=p}return{msrpTotal:e,paidTotal:t,collectibleTotal:i}}function iA(r){const e=new Map;for(const t of r){const i=ow(t)||t.id;e.has(i)||e.set(i,{key:i,title:t.series||t.Series||t.title||t.Title||"Untitled",msrp:0,paid:0,collectible:0,books:0,pages:0,readPages:0,ratings:[]});const o=e.get(i);o.books+=1;const l=Number(t.msrp||t.MSRP||0)||0,d=Number(t.amountPaid||t.AmountPaid||t.pricePaid||0)||0,p=Number(t.collectiblePrice||t.CollectiblePrice||0)||0,y=Number(t.pages||t.Pages||t.pageCount||0)||0,v=!!t.read||t.status==="Read"||t.Read===!0;o.msrp+=l,o.paid+=d,o.collectible+=p,o.pages+=y,v&&(o.readPages+=y);const E=Number(t.rating||t.Rating);!isNaN(E)&&E>0&&o.ratings.push(E)}return[...e.values()]}function sA(r){let e=0,t=0;for(const i of r){const o=Number(i.pages||i.Pages||i.pageCount||0)||0;e+=o,(!!i.read||i.status==="Read"||i.Read===!0)&&(t+=o)}return{total:e,read:t}}function oA(r){let e=0,t=0;for(const i of r.values())i.ratingCount>0&&(e+=i.ratingSum/i.ratingCount,t+=1);return t?e/t:null}function aA({data:r}){if(!r||!r.length)return h.jsx("div",{className:"line-chart empty",children:"No reading data yet."});const e=r.reduce((v,E)=>Math.max(v,E.value),0)||1,t=480,i=230,o=30,l=i-o*2,d=t/Math.max(r.length-1,1),p=r.map((v,E)=>{const x=E*d,S=i-o-v.value/e*l;return{...v,x,y:S}}),y=p.map((v,E)=>E===0?`M ${v.x} ${v.y}`:`L ${v.x} ${v.y}`).join(" ");return h.jsx("div",{className:"line-chart",children:h.jsxs("svg",{viewBox:`0 0 ${t} ${i}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[[0,.25,.5,.75,1].map((v,E)=>{const x=i-o-v*l;return h.jsx("line",{className:"line-grid",x1:"0",x2:t,y1:x,y2:x},`h-${E}`)}),p.map((v,E)=>h.jsx("line",{className:"line-grid",x1:v.x,x2:v.x,y1:o/2,y2:i-o/2},`v-${E}`)),h.jsx("path",{className:"line-path",d:y}),p.map((v,E)=>h.jsxs("g",{children:[h.jsx("circle",{className:"line-point",cx:v.x,cy:v.y,r:"1.5"}),h.jsx("text",{className:"line-value",x:v.x,y:v.y-3,children:v.value}),h.jsx("text",{className:"line-label",x:v.x,y:i-4,children:v.label})]},E))]})})}function lA({data:r}){return!r||!r.length?h.jsx("div",{className:"weekday-breakdown empty",children:"No reads recorded yet."}):h.jsx("div",{className:"weekday-bars",children:r.map(e=>h.jsxs("div",{className:"weekday-col",children:[h.jsx("div",{className:"weekday-count",children:e.value}),h.jsx("div",{className:"weekday-bar-vert",children:h.jsx("div",{className:"weekday-bar-vert-fill",style:{height:`${Math.max(e.pct*100,e.value?6:0)}%`}})}),h.jsx("div",{className:"weekday-label",children:e.label})]},e.label))})}function uA(r,e){const t=r.getFullYear(),i=r.getMonth(),l=new Date(t,i,1).getDay(),d=new Date(t,i+1,0).getDate(),p=new Map;for(const v of e){const E=v.date;if(E.getFullYear()===t&&E.getMonth()===i){const x=E.getDate();p.has(x)||p.set(x,[]),p.get(x).push(v)}}const y=[];for(let v=0;v<l;v++)y.push({type:"pad"});for(let v=1;v<=d;v++)y.push({type:"day",day:v,releases:p.get(v)||[]});return y}function cA(){const{user:r,admin:e,loading:t}=Cl(),[i,o]=Y.useState([]),[l,d]=Y.useState([]),[p,y]=Y.useState(!0),[v,E]=Y.useState(null),[x,S]=Y.useState("-"),[M,W]=Y.useState(!1),[K,B]=Y.useState(()=>new Date),[G,Z]=Y.useState({open:!1,type:null}),ie=new Date().getFullYear(),ce=Y.useRef(null),Ie=Y.useRef(null),de=Y.useRef("");Y.useEffect(()=>{typeof window>"u"||(ce.current=localStorage.getItem("dashboard-yearly-posted"),Ie.current=localStorage.getItem("dashboard-release-posted"))},[]),Y.useEffect(()=>{let V=!1;async function D(){if(!r||!e){o([]),d([]),E(null),y(!1);return}try{y(!0);const[Q,me]=await Promise.all([qo(xr(wt,"library")),qo(xr(wt,"wishlist"))]);if(V)return;o(Q.docs.map(Ve=>({id:Ve.id,...Ve.data()}))),d(me.docs.map(Ve=>({id:Ve.id,...Ve.data()}))),E(null)}catch(Q){console.error(Q),V||E("Failed to load dashboard data.")}finally{V||y(!1)}}return D(),()=>{V=!0}},[r,e]);const k=Y.useMemo(()=>{const V=i.length,D=i.filter(tt=>!!tt.read||tt.status==="Read"||tt.Read===!0).length,Q=V-D,me=V?Math.round(D/V*100):0,Ve=l.length,Xe=JR(i),Pe=mv(i,ie),Qe=mv(i,ie-1),on=Pe.reduce((tt,wn)=>tt+wn.value,0),Hn=XR(i),Nn=ZR(Xe),dr=eA(l),br=tA(dr),es=nA(i),ts=rA(i),ns=sA(i),rs=oA(Xe),is=ko(Xe,"publisher",5),jr=ko(Xe,"genre",5),ii=ko(Xe,"demographic",5),si=iA(i),an=[...i].map(tt=>{const wn=Us(tt.dateRead||tt.DateRead)||Us(tt.datePurchased||tt.DatePurchased);return wn?{title:tt.title||tt.Title||tt.series||tt.Series||"Untitled",type:tt.dateRead||tt.DateRead?"Read":"Purchased",date:wn}:null}).filter(Boolean).sort((tt,wn)=>wn.date-tt.date).slice(0,12);return{totalLibrary:V,readCount:D,unreadCount:Q,readPct:me,wishlistCount:Ve,seriesMap:Xe,monthlyReads:Pe,prevYearReads:Qe,currentYearReadsTotal:on,weekdayBreakdown:Hn,topSeriesBars:Nn,releases:dr,nextRelease:br,avgDays:es,collectionValue:ts,pages:ns,avgRating:rs,topPublishers:is,topGenres:jr,topDemographics:ii,seriesAggregates:si,activity:an}},[i,l,ie]),{totalLibrary:I,readCount:R,unreadCount:A,readPct:L,wishlistCount:N,seriesMap:P,monthlyReads:et,prevYearReads:rt,currentYearReadsTotal:yt,weekdayBreakdown:qe,topSeriesBars:le,releases:ye,nextRelease:ue,avgDays:F,collectionValue:J,pages:he,avgRating:Ne,topPublishers:De,topGenres:Oe,topDemographics:Te,seriesAggregates:Fe,activity:Be}=k,Ge=ue?ue.date:null,vn=!!v;if(Y.useEffect(()=>{if(!rt||!rt.length)return;const V=ie-1,D=rt.reduce((Xe,Pe)=>Xe+Pe.value,0);if(!D||(ce.current?parseInt(ce.current,10):null)===V)return;const me=rt.map(Xe=>`${Xe.label}: ${Xe.value}`).join(", "),Ve=`Yearly reads summary for ${V}: ${D} total. Breakdown: ${me}`;Uh(KR,Ve).then(()=>{ce.current=String(V),typeof window<"u"&&localStorage.setItem("dashboard-yearly-posted",String(V))})},[rt,ie]),Y.useEffect(()=>{if(!ue||!ye.length)return;const V=Fh(ue.date),D=Fh(new Date);if(V>D||Ie.current===V)return;const Q=ye.filter(Ve=>Fh(Ve.date)===V);if(!Q.length)return;const me=`Wishlist releases for ${V}:
${Q.map(Ve=>`- ${Ve.title}`).join(`
`)}`;Uh(QR,me).then(()=>{Ie.current=V,typeof window<"u"&&localStorage.setItem("dashboard-release-posted",V)})},[ue,ye]),Y.useEffect(()=>{var me,Ve;if(!Be||!Be.length)return;const V=Be[0];if(!V||!V.date)return;const D=`${V.type}-${V.title}-${((Ve=(me=V.date).toISOString)==null?void 0:Ve.call(me))||V.date}`;if(de.current===D)return;const Q=`Activity: ${V.type}  ${V.title} (${V.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})`;Uh(YR,Q).then(()=>{de.current=D})},[Be]),Y.useEffect(()=>{if(!Ge){S("-");return}const V=()=>{const Q=Ge-new Date;if(Q<=0){S("Released");return}const me=Math.floor(Q/1e3),Ve=Math.floor(me/86400),Xe=Math.floor(me%86400/3600).toString().padStart(2,"0"),Pe=Math.floor(me%3600/60).toString().padStart(2,"0"),Qe=Math.floor(me%60).toString().padStart(2,"0");S(`${Ve}d ${Xe}:${Pe}:${Qe}`)};V();const D=setInterval(V,1e3);return()=>clearInterval(D)},[Ge]),t)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"Checking permissions..."})]})});if(!r||!e)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-locked",children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{children:"This area is restricted to admin accounts."})]})});if(p)return h.jsx("div",{className:"page dashboard-page",children:h.jsxs("div",{className:"dashboard-loading",children:[h.jsx("h1",{children:"Dashboard"}),v?h.jsx("p",{className:"error",children:v}):h.jsx("p",{children:"Loading stats..."})]})});const Je=I+N,_n=Je?Math.round(I/Je*100):0,kn=[...P.values()].filter(V=>V.ratingCount>0).map(V=>({title:V.title,avg:V.ratingSum/V.ratingCount,count:V.ratingCount})).sort((V,D)=>D.avg-V.avg||D.count-V.count).slice(0,3);function cr(){if(Ge)B(new Date(Ge.getFullYear(),Ge.getMonth(),1));else if(ye.length){const V=ye[0].date;B(new Date(V.getFullYear(),V.getMonth(),1))}W(!0)}function en(V){Z({open:!0,type:V})}function Wn(){Z({open:!1,type:null})}const b=uA(K,ye);function oe(){const V=G.type;if(!V)return null;if(V==="publishers"){const D=[...ko(P,"publisher",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Publishers by Series"}),D.length===0?h.jsx("p",{children:"No publisher data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Publisher"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:D.map((Q,me)=>h.jsxs("tr",{children:[h.jsx("td",{children:me+1}),h.jsx("td",{children:Q.name}),h.jsx("td",{children:Q.count})]},Q.name+me))})]})]})}if(V==="genres"){const D=[...ko(P,"genre",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Genres by Series"}),D.length===0?h.jsx("p",{children:"No genre data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Genre"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:D.map((Q,me)=>h.jsxs("tr",{children:[h.jsx("td",{children:me+1}),h.jsx("td",{children:Q.name}),h.jsx("td",{children:Q.count})]},Q.name+me))})]})]})}if(V==="demographics"){const D=[...ko(P,"demographic",100)];return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Top Demographics by Series"}),D.length===0?h.jsx("p",{children:"No demographic data yet."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"#"}),h.jsx("th",{children:"Demographic"}),h.jsx("th",{children:"Series Count"})]})}),h.jsx("tbody",{children:D.map((Q,me)=>h.jsxs("tr",{children:[h.jsx("td",{children:me+1}),h.jsx("td",{children:Q.name}),h.jsx("td",{children:Q.count})]},Q.name+me))})]})]})}if(V==="timeToRead")return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Average Time From Purchase to Read"}),F==null?h.jsx("p",{children:"Not enough volumes have both purchase and read dates to calculate this yet."}):h.jsxs("p",{children:["On average, it takes"," ",h.jsxs("strong",{children:[F.toFixed(1)," days"]})," from purchase to finishing a volume."]})]});if(V==="collectionValue"){const{msrpTotal:D,paidTotal:Q}=J,me=D-Q,Ve=D>0?(Q/D*100).toFixed(1):"-",Xe=[...Fe].filter(Pe=>Pe.msrp||Pe.paid||Pe.collectible).sort((Pe,Qe)=>Qe.msrp+Qe.collectible-(Pe.msrp+Pe.collectible));return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Collection Value Breakdown"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total MSRP"}),h.jsxs("td",{children:["$",D.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Total Paid"}),h.jsxs("td",{children:["$",Q.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Difference"}),h.jsxs("td",{children:["$",me.toFixed(2)]})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Paid vs MSRP"}),h.jsx("td",{children:Ve==="-"?"-":`${Ve}%`})]})]})}),Xe.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Collection Pricing"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"MSRP"}),h.jsx("th",{children:"Paid"}),h.jsx("th",{children:"Collectible"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:Xe.map((Pe,Qe)=>h.jsxs("tr",{children:[h.jsx("td",{children:Pe.title}),h.jsxs("td",{children:["$",Pe.msrp.toFixed(2)]}),h.jsxs("td",{children:["$",Pe.paid.toFixed(2)]}),h.jsx("td",{children:Pe.collectible?`$${Pe.collectible.toFixed(2)}`:"--"}),h.jsx("td",{children:Pe.books})]},Pe.title+Qe))})]})]})]})}if(V==="pages"){const D=[...Fe].filter(Q=>Q.pages>0).map(Q=>({...Q,pct:Q.pages?Math.round(Q.readPages/Q.pages*100):0})).sort((Q,me)=>me.pages-Q.pages);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Pages Read vs Total"}),h.jsx("table",{children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("th",{children:"Total Pages"}),h.jsx("td",{children:he.total.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Pages Read"}),h.jsx("td",{children:he.read.toLocaleString()})]}),h.jsxs("tr",{children:[h.jsx("th",{children:"Completion"}),h.jsx("td",{children:he.total?`${(he.read/he.total*100).toFixed(1)}%`:"-"})]})]})}),D.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Pages by Series"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Read Pages"}),h.jsx("th",{children:"Total Pages"}),h.jsx("th",{children:"% Read"}),h.jsx("th",{children:"Books"})]})}),h.jsx("tbody",{children:D.map((Q,me)=>h.jsxs("tr",{children:[h.jsx("td",{children:Q.title}),h.jsx("td",{children:Q.readPages.toLocaleString()}),h.jsx("td",{children:Q.pages.toLocaleString()}),h.jsxs("td",{children:[Q.pct,"%"]}),h.jsx("td",{children:Q.books})]},Q.title+me))})]})]})]})}if(V==="ratings"){const D=[...Fe].map(Q=>{if(!Q.ratings.length)return null;const me=Q.ratings.reduce((Ve,Xe)=>Ve+Xe,0)/Q.ratings.length;return{title:Q.title,avg:me,count:Q.ratings.length}}).filter(Boolean).sort((Q,me)=>me.avg-Q.avg||me.count-Q.count);return h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Ratings Overview"}),Ne==null?h.jsx("p",{children:"No ratings have been recorded yet."}):h.jsxs("p",{children:["Average series rating across rated series is"," ",h.jsx("strong",{children:Ne.toFixed(2)}),"."]}),D.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{style:{marginTop:"14px"},children:"Series Averages"}),h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Title"}),h.jsx("th",{children:"Avg"}),h.jsx("th",{children:"Ratings"})]})}),h.jsx("tbody",{children:D.map((Q,me)=>h.jsxs("tr",{children:[h.jsx("td",{children:Q.title}),h.jsx("td",{children:Q.avg.toFixed(2)}),h.jsx("td",{children:Q.count})]},Q.title+me))})]})]})]})}return V==="releases"?h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Wishlist Releases"}),ye.length===0?h.jsx("p",{children:"No wishlist releases found."}):h.jsxs("table",{children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Date"}),h.jsx("th",{children:"Title"})]})}),h.jsx("tbody",{children:ye.map((D,Q)=>h.jsxs("tr",{children:[h.jsx("td",{children:D.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),h.jsx("td",{children:D.title})]},Q))})]})]}):null}return h.jsxs("div",{className:"page dashboard-page",children:[h.jsx("header",{className:"dashboard-header",children:h.jsxs("div",{children:[h.jsx("h1",{children:"Dashboard"}),h.jsx("p",{className:"dashboard-sub",children:"Admin-only analytics for your manga library and wishlist."})]})}),h.jsx("section",{id:"dashboardSection",className:"page-section active",children:h.jsxs("div",{className:"dashboard-grid",children:[h.jsxs("div",{className:"stat-stack",children:[h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Total Library Books"}),h.jsx("div",{className:"stat-value",children:I}),h.jsx("div",{className:"stat-sub",children:"Volumes in your library."})]}),h.jsxs("div",{className:"stat-card mini",children:[h.jsx("h3",{children:"Wishlist Items"}),h.jsx("div",{className:"stat-value",children:N}),h.jsx("div",{className:"stat-sub",children:"Tracked upcoming wants."})]})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Read / Unread"}),h.jsx("div",{className:"pie",style:{"--pct":`${L*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[L,"%"]})}),h.jsxs("div",{className:"stat-value",children:[R," read / ",A," unread"]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>en("ratings"),children:[h.jsx("h3",{children:"Ratings"}),h.jsx("div",{className:"stat-value",children:Ne==null?"-":Ne.toFixed(2)}),h.jsx("div",{className:"stat-sub",children:"Average across rated series."}),h.jsx("div",{className:"stat-list compact",children:kn.length?kn.map((V,D)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:D+1}),h.jsx("span",{className:"stat-name",children:V.title}),h.jsx("span",{className:"stat-count",children:V.avg.toFixed(2)})]},V.title+D)):h.jsx("div",{className:"stat-sub",children:"No ratings yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>en("pages"),children:[h.jsx("h3",{children:"Page Count Read / Total"}),h.jsxs("div",{className:"stat-value",children:[he.read.toLocaleString()," / ",he.total.toLocaleString()]}),h.jsx("div",{className:"stat-sub",children:he.total?`${(he.read/he.total*100).toFixed(1)}% read`:"-"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Library vs Wishlist"}),h.jsx("div",{className:"pie",style:{"--pct":`${_n*3.6}deg`},children:h.jsxs("div",{className:"pie-label",children:[_n,"%"]})}),h.jsxs("div",{className:"stat-value",children:[I," / ",N]}),h.jsx("div",{className:"stat-sub",children:"Library vs wishlist share"})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>en("demographics"),children:[h.jsx("h3",{children:"Top Demographics"}),h.jsx("div",{className:"stat-list",children:Te.length?Te.slice(0,3).map((V,D)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:D+1}),h.jsx("span",{className:"stat-name",children:V.name}),h.jsx("span",{className:"stat-count",children:V.count})]},V.name)):h.jsx("div",{className:"stat-sub",children:"No demographic data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>en("publishers"),children:[h.jsx("h3",{children:"Top Publishers"}),h.jsx("div",{className:"stat-list",children:De.length?De.slice(0,3).map((V,D)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:D+1}),h.jsx("span",{className:"stat-name",children:V.name}),h.jsx("span",{className:"stat-count",children:V.count})]},V.name)):h.jsx("div",{className:"stat-sub",children:"No publisher data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>en("genres"),children:[h.jsx("h3",{children:"Top Genres"}),h.jsx("div",{className:"stat-list",children:Oe.length?Oe.slice(0,3).map((V,D)=>h.jsxs("div",{className:"stat-list-row",children:[h.jsx("span",{className:"stat-rank",children:D+1}),h.jsx("span",{className:"stat-name",children:V.name}),h.jsx("span",{className:"stat-count",children:V.count})]},V.name)):h.jsx("div",{className:"stat-sub",children:"No genre data yet."})})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>{cr()},children:[h.jsx("h3",{children:"Next Wishlist Release"}),h.jsx("div",{className:"stat-value next-release",children:ue?ue.title:"No upcoming releases"}),h.jsxs("div",{className:"stat-sub",children:[Ge?Ge.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"-",h.jsx("br",{}),h.jsx("span",{id:"statNextCountdown",children:x})]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>en("collectionValue"),style:{textAlign:"center"},children:[h.jsx("h3",{children:"Collection Pricing"}),h.jsxs("div",{className:"stat-value stat-msrp",children:["$",J.msrpTotal.toFixed(2)]}),h.jsxs("div",{className:"stat-value stat-paid",children:["$",J.paidTotal.toFixed(2),J.msrpTotal>0&&h.jsxs("span",{className:"stat-paid-pct",children:["(",((1-J.paidTotal/J.msrpTotal)*100).toFixed(1),"% off)"]})]}),h.jsxs("div",{className:"stat-value stat-collectible",children:["$",J.collectibleTotal.toFixed(2)]}),h.jsx("div",{className:"stat-sub",children:"MSRP  Paid  Collectible overrides"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("h3",{children:"Current Year Reads"}),h.jsx("div",{className:"stat-value",children:yt}),h.jsxs("div",{className:"stat-sub",children:["Reads in ",ie]})]}),h.jsxs("div",{className:"stat-card clickable",onClick:()=>en("timeToRead"),children:[h.jsx("h3",{children:"Avg Days From Purchase to Read"}),h.jsx("div",{className:"stat-value",children:F==null?"-":`${F.toFixed(1)} days`}),h.jsx("div",{className:"stat-sub",children:"When both dates exist"})]}),h.jsxs("div",{className:"stat-duo",children:[h.jsxs("div",{className:"stat-card tall",children:[h.jsxs("h3",{children:["Reads Per Month (",ie,")"]}),h.jsx(aA,{data:et})]}),h.jsxs("div",{className:"stat-card tall",children:[h.jsx("h3",{children:"Reads by Day of Week (Lifetime)"}),h.jsx(lA,{data:qe}),h.jsx("div",{className:"stat-sub",children:"Based on all entries with a read date."})]})]}),h.jsxs("div",{className:"stat-card wide",children:[h.jsx("h3",{children:"Activity Log"}),vn&&h.jsx("div",{className:"error",style:{textAlign:"center"},children:v}),h.jsx("div",{className:"activity-log",children:Be.length?Be.map((V,D)=>h.jsxs("div",{className:"activity-row",children:[h.jsx("span",{className:"activity-type",children:V.type}),h.jsx("span",{className:"activity-title",children:V.title}),h.jsx("span",{className:"activity-date",children:V.date.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]},V.title+D)):h.jsx("div",{className:"stat-sub",children:"No recent activity yet."})})]})]})}),M&&h.jsx("div",{id:"calendarOverlay",onClick:()=>W(!1),children:h.jsxs("div",{id:"calendarCard",onClick:V=>V.stopPropagation(),children:[h.jsxs("div",{className:"calendar-header",children:[h.jsx("div",{className:"calendar-title",children:K.toLocaleString(void 0,{month:"long",year:"numeric"})}),h.jsxs("div",{className:"calendar-nav",children:[h.jsx("button",{className:"calendar-nav-btn",onClick:()=>B(new Date(K.getFullYear(),K.getMonth()-1,1)),children:"<"}),h.jsx("button",{className:"calendar-nav-btn",onClick:()=>B(new Date(K.getFullYear(),K.getMonth()+1,1)),children:">"})]})]}),h.jsxs("div",{className:"calendar-weekdays",children:[h.jsx("div",{children:"Sun"}),h.jsx("div",{children:"Mon"}),h.jsx("div",{children:"Tue"}),h.jsx("div",{children:"Wed"}),h.jsx("div",{children:"Thu"}),h.jsx("div",{children:"Fri"}),h.jsx("div",{children:"Sat"})]}),h.jsx("div",{className:"calendar-grid",id:"releaseCalendar",children:b.map((V,D)=>V.type==="pad"?h.jsx("div",{className:"calendar-day pad"},D):h.jsxs("div",{className:"calendar-day",children:[h.jsx("div",{className:"day-num",children:V.day}),h.jsxs("div",{className:"calendar-releases",children:[V.releases.slice(0,2).map((Q,me)=>h.jsx("div",{className:"calendar-release",title:Q.title,children:Q.title},me)),V.releases.length>2&&h.jsxs("button",{className:"calendar-more-btn",children:["+",V.releases.length-2," more"]})]})]},D))}),!ye.length&&h.jsx("div",{className:"calendar-empty",children:"No wishlist releases found."}),h.jsx("button",{id:"calendarClose",onClick:()=>W(!1),children:"x"})]})}),G.open&&h.jsx("div",{id:"statDetailOverlay",onClick:Wn,children:h.jsxs("div",{id:"statDetailCard",onClick:V=>V.stopPropagation(),children:[h.jsx("button",{id:"statDetailClose",onClick:Wn,children:"x"}),h.jsxs("h2",{id:"statDetailTitle",children:[G.type==="publishers"&&"Top Publishers",G.type==="genres"&&"Top Genres",G.type==="demographics"&&"Top Demographics",G.type==="timeToRead"&&"Avg Time From Purchase to Read",G.type==="collectionValue"&&"Collection Value",G.type==="pages"&&"Pages Read vs Total",G.type==="ratings"&&"Ratings",G.type==="releases"&&"Wishlist Releases"]}),h.jsx("div",{id:"statDetailBody",children:oe()})]})})]})}function dA(){const r=Ef(),{user:e}=Cl();e&&r("/");async function t(){try{const i=new Ir;await I_(zi,i),r("/")}catch(i){console.error(i),alert("Google Sign-In failed.")}}return h.jsx("div",{className:"signin-page",children:h.jsxs("div",{className:"signin-card",children:[h.jsx("h2",{className:"signin-title",children:"Welcome Back"}),h.jsx("p",{className:"signin-sub",children:"Sign in to access your dashboard & collections."}),h.jsxs("button",{className:"google-btn",onClick:t,children:[h.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"",className:"google-icon"}),"Continue with Google"]}),h.jsxs("button",{className:"signin-cancel",onClick:()=>r("/"),children:["<"," Back to Home"]})]})})}function hA(){return h.jsxs(bR,{children:[h.jsx(DR,{}),h.jsxs(hT,{children:[h.jsx(As,{path:"/",element:h.jsx(VR,{})}),h.jsx(As,{path:"/manga",element:h.jsx(FR,{})}),h.jsx(As,{path:"/anime",element:h.jsx(qR,{})}),h.jsx(As,{path:"/tcg",element:h.jsx(GR,{})}),h.jsx(As,{path:"/dashboard",element:h.jsx(cA,{})}),h.jsx(As,{path:"/signin",element:h.jsx(dA,{})})]})]})}wE.createRoot(document.getElementById("root")).render(h.jsx(yv.StrictMode,{children:h.jsx(_T,{basename:"/base",children:h.jsx(hA,{})})}));
